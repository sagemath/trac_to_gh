# Issue 11587: update Cremona's tables for Sage

archive/issues_011415.json:
```json
{
    "assignees": [
        "https://github.com/JohnCremona"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nJohn Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 200k is at\nhttp://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\nfile at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-10-26.tgz \n-- not to mention at http://code.google.com/p/ecdata/ !\"\n\nThe goal of this ticket is to:\n\n(1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n\n(2) Create a new sqlite database that has the data up to level 200000, which will be an optional spkg.\n\nThis is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n\nThere is now a patch that depends upon #11642 (which depends upon #11640).\n\nYou can find updated elliptic_curve and database_cremona_ellcurve spkgs at [http://wstein.org/home/ohanar/cremona-database/](http://wstein.org/home/ohanar/cremona-database/).\n\n---\n\nNew spkg: http://sage.math.washington.edu/home/leif/Sage/spkgs/elliptic_curves-0.3.spkg\n\nApply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.\n\nApply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.\n\nApply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.\n\nApply [attachment: trac_11587-fix_speed_regression.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz) to the Sage library.\n\nApply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n\n**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg)\n\nDepends on #11642\n\nCC:  @loefflerd\n\nComponent: **elliptic curves**\n\nKeywords: **elliptic curves ellcurve database**\n\nAuthor: **R. Andrew Ohana**\n\nReviewer: **John Cremona, Tom Boothby**\n\nMerged: **sage-4.8.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11587_\n\n",
    "closed_at": "2011-10-31T11:27:38Z",
    "created_at": "2011-07-11T18:12:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20databases"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update Cremona's tables for Sage",
    "type": "issue",
    "updated_at": "2011-12-18T17:28:59Z",
    "url": "https://github.com/sagemath/sage/issues/11587",
    "user": "https://github.com/williamstein"
}
```
<div id="comment:0"></div>

John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 200k is at
http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-10-26.tgz 
-- not to mention at http://code.google.com/p/ecdata/ !"

The goal of this ticket is to:

(1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.

(2) Create a new sqlite database that has the data up to level 200000, which will be an optional spkg.

This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 

There is now a patch that depends upon #11642 (which depends upon #11640).

You can find updated elliptic_curve and database_cremona_ellcurve spkgs at [http://wstein.org/home/ohanar/cremona-database/](http://wstein.org/home/ohanar/cremona-database/).

---

New spkg: http://sage.math.washington.edu/home/leif/Sage/spkgs/elliptic_curves-0.3.spkg

Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.

Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.

Apply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.

Apply [attachment: trac_11587-fix_speed_regression.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz) to the Sage library.

Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.

**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg)

Depends on #11642

CC:  @loefflerd

Component: **elliptic curves**

Keywords: **elliptic curves ellcurve database**

Author: **R. Andrew Ohana**

Reviewer: **John Cremona, Tom Boothby**

Merged: **sage-4.8.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/11587_





---

archive/issue_events_153546.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-07-11T18:12:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153546"
}
```



---

archive/issue_events_153547.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-07-11T18:12:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153547"
}
```



---

archive/issue_events_153548.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-07-11T18:12:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153548"
}
```



---

archive/issue_events_153549.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-07-11T18:12:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153549"
}
```



---

archive/issue_events_153550.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-07-11T18:12:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153550"
}
```



---

archive/issue_comments_118771.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nUpdated description to reflect the current status of the tables.",
    "created_at": "2011-07-11T22:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118771",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:1" align="right">comment:1</div>

Updated description to reflect the current status of the tables.



---

archive/issue_comments_118772.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n-John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 140k is at\n+John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 160k is at\n http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\n-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-04-08.tgz\n+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-08.tgz \n -- not to mention at http://code.google.com/p/ecdata/ !\"\n \n The goal of this ticket is to:\n \n (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n \n-(2) Create a new sqlite database that has the data up to level 140000, which will be an optional spkg.\n+(2) Create a new sqlite database that has the data up to level 160000, which will be an optional spkg.\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n``````\n",
    "created_at": "2011-07-11T22:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118772",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
-John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 140k is at
+John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 160k is at
 http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-04-08.tgz
+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-08.tgz 
 -- not to mention at http://code.google.com/p/ecdata/ !"
 
 The goal of this ticket is to:
 
 (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.
 
-(2) Create a new sqlite database that has the data up to level 140000, which will be an optional spkg.
+(2) Create a new sqlite database that has the data up to level 160000, which will be an optional spkg.
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
``````




---

archive/issue_comments_118773.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNote: only the allgens file format has changed.",
    "created_at": "2011-07-13T09:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118773",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">comment:2</div>

Note: only the allgens file format has changed.



---

archive/issue_comments_118774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,14 @@\n-John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 160k is at\n+John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 170k is at\n http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\n-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-08.tgz \n+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-26.tgz \n -- not to mention at http://code.google.com/p/ecdata/ !\"\n \n The goal of this ticket is to:\n \n (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n \n-(2) Create a new sqlite database that has the data up to level 160000, which will be an optional spkg.\n+(2) Create a new sqlite database that has the data up to level 170000, which will be an optional spkg.\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n+\n+There is now a patch that depends upon #11642\n``````\n",
    "created_at": "2011-08-02T00:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118774",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,14 @@
-John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 160k is at
+John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 170k is at
 http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-08.tgz 
+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-26.tgz 
 -- not to mention at http://code.google.com/p/ecdata/ !"
 
 The goal of this ticket is to:
 
 (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.
 
-(2) Create a new sqlite database that has the data up to level 160000, which will be an optional spkg.
+(2) Create a new sqlite database that has the data up to level 170000, which will be an optional spkg.
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
+
+There is now a patch that depends upon #11642
``````




---

archive/issue_comments_118775.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThere are new spkgs at\nhttp://wstein.org/home/ohanar/cremona-database",
    "created_at": "2011-08-02T00:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118775",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:3" align="right">comment:3</div>

There are new spkgs at
http://wstein.org/home/ohanar/cremona-database



---

archive/issue_events_153551.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-08-02T00:30:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153551"
}
```



---

archive/issue_comments_118776.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2011-08-02T09:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118776",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_118777.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have a few questions.  Also since I do not know SQLITE and do not have the time to learn it just for this, the code will need to be reviewed by someone else.\n\nThere are two spkgs at the link, and one patch on this ticket.  Please can you explain how they are related?  Is one of the spkgs intended to be part of the standard Sage distribution so that every copy of Sage has the mini-database, as is the case now?  And is the other one a replacement for the optional large database?\n\nSecondly, you warn that the database takes some time to create.  Is this once-only time which you had to spend in creating the database which is part of the spkg, or is it time which must be spent by anyone installing the large optional spkg?\n\nTo test this, I assume that the following steps are necessary; please correct me if I am wrong.\n\n1. apply patches at #11642\n2. apply the patch here (trac_11587.patch)\n3. sage -b\n4. sage -i http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg\n5. sage -b, test everything works\n6. sage -i http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110801.spkg\n7. sage -b, test everything still works\n\nLastly:  I expect that at regular intervals over the next few months I will be releasing updates to the database (for example, the range 170k=180k is about 70% done already).  Please leave rather clear instructions for what to do for future updates;  in particular, will it be neceaary to rebuild everything, or just to read in the new files (e.g. *.170000-179999 next time)?",
    "created_at": "2011-08-02T09:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118777",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

I have a few questions.  Also since I do not know SQLITE and do not have the time to learn it just for this, the code will need to be reviewed by someone else.

There are two spkgs at the link, and one patch on this ticket.  Please can you explain how they are related?  Is one of the spkgs intended to be part of the standard Sage distribution so that every copy of Sage has the mini-database, as is the case now?  And is the other one a replacement for the optional large database?

Secondly, you warn that the database takes some time to create.  Is this once-only time which you had to spend in creating the database which is part of the spkg, or is it time which must be spent by anyone installing the large optional spkg?

To test this, I assume that the following steps are necessary; please correct me if I am wrong.

1. apply patches at #11642
2. apply the patch here (trac_11587.patch)
3. sage -b
4. sage -i http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg
5. sage -b, test everything works
6. sage -i http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110801.spkg
7. sage -b, test everything still works

Lastly:  I expect that at regular intervals over the next few months I will be releasing updates to the database (for example, the range 170k=180k is about 70% done already).  Please leave rather clear instructions for what to do for future updates;  in particular, will it be neceaary to rebuild everything, or just to read in the new files (e.g. *.170000-179999 next time)?



---

archive/issue_events_153552.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-08-02T09:45:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153552"
}
```



---

archive/issue_events_153553.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-08-02T09:45:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153553"
}
```



---

archive/issue_comments_118778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n \n-There is now a patch that depends upon #11642\n+There is now a patch that depends upon #11642 (which depends upon #11640).\n+\n+You can find updated elliptic_curve and database_cremona_ellcurve spkgs at http://wstein.org/home/ohanar/cremona-database\n``````\n",
    "created_at": "2011-08-02T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118778",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
 
-There is now a patch that depends upon #11642
+There is now a patch that depends upon #11642 (which depends upon #11640).
+
+You can find updated elliptic_curve and database_cremona_ellcurve spkgs at http://wstein.org/home/ohanar/cremona-database
``````




---

archive/issue_events_153554.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-08-02T18:17:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153554"
}
```



---

archive/issue_events_153555.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-08-02T18:17:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153555"
}
```



---

archive/issue_comments_118779.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@JohnCremona](#comment%3A5):\n\n> There are two spkgs at the link, and one patch on this ticket.  Please can you explain how they are related?\n\nThe patch updates sage.databases.cremona to wrap the new SQLite databases. It provides about the same functionality as the old ZODB (there are some slight modifications to actually reflect the documentation, which wasn't respected before -- specifically the mini-database only has data from allcurves).\n\n> Is one of the spkgs intended to be part of the standard Sage distribution so that every copy of Sage has the mini-database, as is the case now?  And is the other one a replacement for the optional large database?\n\nCorrect. The elliptic_curve spkg is included every copy of sage, and includes both the mini-database, as well as a very small database of curves William finds interesting. The database_cremona_ellcurve spkg includes (most of) the data from allcurves, allgens, allbsd, and degphi for every curve that you have listed.\n \n> Secondly, you warn that the database takes some time to create.  Is this once-only time which you had to spend in creating the database which is part of the spkg, or is it time which must be spent by anyone installing the large optional spkg?\n\nCurrently the spkgs simply install pre-built SQL databases, so currently this is a once-only thing. That said, on my home system it only takes ~4mins to create the database from scratch.\n\n> To test this, I assume that the following steps are necessary; please correct me if I am wrong.\n\n1. apply patches at #11642\n2. apply the patch here (trac_11587.patch)\n3. sage -b\n4. sage -i http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg\n5. sage -b, test everything works\n6. sage -i http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110801.spkg\n7. sage -b, test everything still works\n\nYes, that looks correct. The only thing to be aware of is that #11642 depends on #11640 (which is just a small patch), and that there are optional doctests you should run in step 7.\n\n> Lastly:  I expect that at regular intervals over the next few months I will be releasing updates to the database (for example, the range 170k=180k is about 70% done already).  Please leave rather clear instructions for what to do for future updates;  in particular, will it be neceaary to rebuild everything, or just to read in the new files (e.g. *.170000-179999 next time)?\n\nCurrently there is simple script to rebuild everything, but (in theory) it is also possible to simply add the new files. The former:\n\n```\nrm SAGE_ROOT/data/cremona/cremona.db\nSAGE_ROOT/sage\nsage: sage.databases.cremona.build('cremona','/path/to/ecdata.tgz')\n```\nthe later should be (although I haven't tested it):\n\n```\nmake a directory that only contains the new files\nSAGE_ROOT/sage\nsage: cData = sage.databases.cremona.LargeCremonaDatabase('cremona',False)\nsage: cData._init_from_ftpdata('/path/to/said/directory')\n```\nThat said, I've marked myself as the maintainer of the database_cremona_ellcurve spkg, so I'll try to keep it up to date (of course it would help if you let me know when you update your tables of course (: ).",
    "created_at": "2011-08-02T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118779",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@JohnCremona](#comment%3A5):

> There are two spkgs at the link, and one patch on this ticket.  Please can you explain how they are related?

The patch updates sage.databases.cremona to wrap the new SQLite databases. It provides about the same functionality as the old ZODB (there are some slight modifications to actually reflect the documentation, which wasn't respected before -- specifically the mini-database only has data from allcurves).

> Is one of the spkgs intended to be part of the standard Sage distribution so that every copy of Sage has the mini-database, as is the case now?  And is the other one a replacement for the optional large database?

Correct. The elliptic_curve spkg is included every copy of sage, and includes both the mini-database, as well as a very small database of curves William finds interesting. The database_cremona_ellcurve spkg includes (most of) the data from allcurves, allgens, allbsd, and degphi for every curve that you have listed.
 
> Secondly, you warn that the database takes some time to create.  Is this once-only time which you had to spend in creating the database which is part of the spkg, or is it time which must be spent by anyone installing the large optional spkg?

Currently the spkgs simply install pre-built SQL databases, so currently this is a once-only thing. That said, on my home system it only takes ~4mins to create the database from scratch.

> To test this, I assume that the following steps are necessary; please correct me if I am wrong.

1. apply patches at #11642
2. apply the patch here (trac_11587.patch)
3. sage -b
4. sage -i http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg
5. sage -b, test everything works
6. sage -i http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110801.spkg
7. sage -b, test everything still works

Yes, that looks correct. The only thing to be aware of is that #11642 depends on #11640 (which is just a small patch), and that there are optional doctests you should run in step 7.

> Lastly:  I expect that at regular intervals over the next few months I will be releasing updates to the database (for example, the range 170k=180k is about 70% done already).  Please leave rather clear instructions for what to do for future updates;  in particular, will it be neceaary to rebuild everything, or just to read in the new files (e.g. *.170000-179999 next time)?

Currently there is simple script to rebuild everything, but (in theory) it is also possible to simply add the new files. The former:

```
rm SAGE_ROOT/data/cremona/cremona.db
SAGE_ROOT/sage
sage: sage.databases.cremona.build('cremona','/path/to/ecdata.tgz')
```
the later should be (although I haven't tested it):

```
make a directory that only contains the new files
SAGE_ROOT/sage
sage: cData = sage.databases.cremona.LargeCremonaDatabase('cremona',False)
sage: cData._init_from_ftpdata('/path/to/said/directory')
```
That said, I've marked myself as the maintainer of the database_cremona_ellcurve spkg, so I'll try to keep it up to date (of course it would help if you let me know when you update your tables of course (: ).



---

archive/issue_comments_118780.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,13 @@\n-John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 170k is at\n+John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 180k is at\n http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\n-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-26.tgz \n+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz \n -- not to mention at http://code.google.com/p/ecdata/ !\"\n \n The goal of this ticket is to:\n \n (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n \n-(2) Create a new sqlite database that has the data up to level 170000, which will be an optional spkg.\n+(2) Create a new sqlite database that has the data up to level 180000, which will be an optional spkg.\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n \n``````\n",
    "created_at": "2011-08-10T03:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118780",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,13 @@
-John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 170k is at
+John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 180k is at
 http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-07-26.tgz 
+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz 
 -- not to mention at http://code.google.com/p/ecdata/ !"
 
 The goal of this ticket is to:
 
 (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.
 
-(2) Create a new sqlite database that has the data up to level 170000, which will be an optional spkg.
+(2) Create a new sqlite database that has the data up to level 180000, which will be an optional spkg.
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
 
``````




---

archive/issue_comments_118781.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI've updated the database_cremona_ellcurve spkg to include the latest tables, which can still be found at http://wstein.org/home/ohanar/cremona-database (the old one is still there there as well).\n\nI'm also attaching an updated patch that mainly updates the documentation to reflect the current state of the tables (upper bound of 180,000 vs 130,000), as well as the spkg version. It also limits the outputs of a few queries where only the first entry is needed.",
    "created_at": "2011-08-10T03:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118781",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:7" align="right">comment:7</div>

I've updated the database_cremona_ellcurve spkg to include the latest tables, which can still be found at http://wstein.org/home/ohanar/cremona-database (the old one is still there there as well).

I'm also attaching an updated patch that mainly updates the documentation to reflect the current state of the tables (upper bound of 180,000 vs 130,000), as well as the spkg version. It also limits the outputs of a few queries where only the first entry is needed.



---

archive/issue_comments_118782.json:
```json
{
    "body": "fixes the broken doctest for cremona_mini",
    "created_at": "2011-08-24T23:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118782",
    "user": "https://github.com/ohanar"
}
```

fixes the broken doctest for cremona_mini



---

archive/issue_comments_118783.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_11587.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz)**\n\nlooks good, works good",
    "created_at": "2011-08-25T08:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118783",
    "user": "https://github.com/boothby"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_11587.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz)**

looks good, works good



---

archive/issue_comments_118784.json:
```json
{
    "body": "Author: **Andrew Ohana**",
    "created_at": "2011-08-25T08:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118784",
    "user": "https://github.com/boothby"
}
```

Author: **Andrew Ohana**



---

archive/issue_events_153556.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2011-08-25T08:51:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153556"
}
```



---

archive/issue_events_153557.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2011-08-25T08:51:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153557"
}
```



---

archive/issue_comments_118785.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to **John Cremona, Tom Boothby**",
    "created_at": "2011-08-25T08:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118785",
    "user": "https://github.com/boothby"
}
```

Changed reviewer from **John Cremona** to **John Cremona, Tom Boothby**



---

archive/issue_comments_118786.json:
```json
{
    "body": "Dependencies: **#11642**",
    "created_at": "2011-09-08T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118786",
    "user": "https://github.com/nexttime"
}
```

Dependencies: **#11642**



---

archive/issue_comments_118787.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat's +1.4 MB, or +78% for the standard spkg.",
    "created_at": "2011-09-08T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118787",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

That's +1.4 MB, or +78% for the standard spkg.



---

archive/issue_comments_118788.json:
```json
{
    "body": "Changed keywords from none to **elliptic curves ellcurve database**",
    "created_at": "2011-09-08T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118788",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **elliptic curves ellcurve database**



---

archive/issue_events_153558.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-08T14:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20databases",
    "label_color": "0000ff",
    "label_name": "c: databases",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153558"
}
```



---

archive/issue_comments_118789.json:
```json
{
    "body": "Changed author from **Andrew Ohana** to **R. Andrew Ohana**",
    "created_at": "2011-09-08T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118789",
    "user": "https://github.com/nexttime"
}
```

Changed author from **Andrew Ohana** to **R. Andrew Ohana**



---

archive/issue_comments_118790.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,14 @@\n \n There is now a patch that depends upon #11642 (which depends upon #11640).\n \n-You can find updated elliptic_curve and database_cremona_ellcurve spkgs at http://wstein.org/home/ohanar/cremona-database\n+You can find updated elliptic_curve and database_cremona_ellcurve spkgs at [http://wstein.org/home/ohanar/cremona-database/](http://wstein.org/home/ohanar/cremona-database/).\n+\n+---\n+\n+New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg\n+\n+Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.\n+\n+---\n+\n+**The new *optional* spkg also has to be brought into place.** (I don't put a link here to not confuse the bots.)\n``````\n",
    "created_at": "2011-09-08T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118790",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,14 @@
 
 There is now a patch that depends upon #11642 (which depends upon #11640).
 
-You can find updated elliptic_curve and database_cremona_ellcurve spkgs at http://wstein.org/home/ohanar/cremona-database
+You can find updated elliptic_curve and database_cremona_ellcurve spkgs at [http://wstein.org/home/ohanar/cremona-database/](http://wstein.org/home/ohanar/cremona-database/).
+
+---
+
+New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg
+
+Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.
+
+---
+
+**The new *optional* spkg also has to be brought into place.** (I don't put a link here to not confuse the bots.)
``````




---

archive/issue_comments_118791.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nexttime](#comment%3A9):\n> That's +1.4 MB, or +78% for the standard spkg.\n\nI can rewrite the install script to simply create the database from Cremona's text files. On my system it takes ~6sec to build it from scratch, and would probably decrease the size of the spkg to a bit over 1MB.",
    "created_at": "2011-09-09T07:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118791",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nexttime](#comment%3A9):
> That's +1.4 MB, or +78% for the standard spkg.

I can rewrite the install script to simply create the database from Cremona's text files. On my system it takes ~6sec to build it from scratch, and would probably decrease the size of the spkg to a bit over 1MB.



---

archive/issue_comments_118792.json:
```json
{
    "body": "Attachment: **[trac_11587-depfix.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz)**\n\nAdds the new dependencies of the elliptic_curves spkg",
    "created_at": "2011-09-10T07:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118792",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[trac_11587-depfix.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz)**

Adds the new dependencies of the elliptic_curves spkg



---

archive/issue_comments_118793.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI've created a new spkg that builds the cremona_mini database from Cremona's original text file. This requires a patch to the Sage root repository to reflect the new dependencies. I'm going to keep the optional spkg the same since it takes >5mins to build the database.",
    "created_at": "2011-09-10T07:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118793",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:11" align="right">comment:11</div>

I've created a new spkg that builds the cremona_mini database from Cremona's original text file. This requires a patch to the Sage root repository to reflect the new dependencies. I'm going to keep the optional spkg the same since it takes >5mins to build the database.



---

archive/issue_comments_118794.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,9 +17,11 @@\n \n ---\n \n-New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg\n+New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.3.spkg\n \n Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.\n+\n+Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n ---\n \n``````\n",
    "created_at": "2011-09-10T07:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118794",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,9 +17,11 @@
 
 ---
 
-New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.2.spkg
+New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.3.spkg
 
 Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.
+
+Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
 ---
 
``````




---

archive/issue_comments_118795.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@ohanar](#comment%3A11):\n> I've created a new spkg that builds the cremona_mini database from Cremona's original text file. This requires a patch to the Sage root repository to reflect the new dependencies.\n\nCool, thanks.\n\n> I'm going to keep the optional spkg the same since it takes >5mins to build the database.\n\nOptional is optional; I'm not aware of any size demands or restrictions there...",
    "created_at": "2011-09-10T07:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118795",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@ohanar](#comment%3A11):
> I've created a new spkg that builds the cremona_mini database from Cremona's original text file. This requires a patch to the Sage root repository to reflect the new dependencies.

Cool, thanks.

> I'm going to keep the optional spkg the same since it takes >5mins to build the database.

Optional is optional; I'm not aware of any size demands or restrictions there...



---

archive/issue_comments_118796.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nexttime](#comment%3A12):\n> Replying to [@ohanar](#comment%3A11):\n> > I'm going to keep the optional spkg the same since it takes >5mins to build the database.\n> \n> \n> Optional is optional; I'm not aware of any size demands or restrictions there...\n\nTrue, but I realized when updating the spkg that creating the database from text files more closely follows the spkg design of building libraries from source.",
    "created_at": "2011-09-10T08:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118796",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nexttime](#comment%3A12):
> Replying to [@ohanar](#comment%3A11):
> > I'm going to keep the optional spkg the same since it takes >5mins to build the database.
> 
> 
> Optional is optional; I'm not aware of any size demands or restrictions there...

True, but I realized when updating the spkg that creating the database from text files more closely follows the spkg design of building libraries from source.



---

archive/issue_comments_118797.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMany thanks for your work on this, Andrew.  It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right?  Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?",
    "created_at": "2011-09-10T13:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118797",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">comment:14</div>

Many thanks for your work on this, Andrew.  It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right?  Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?



---

archive/issue_comments_118798.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@JohnCremona](#comment%3A14):\n> It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right? \n\nCurrently the spkg includes basically a single file -- a prebuilt database. This is primarily because it is much faster to have the package copy the file, rather than build the database from scratch (I was going to use time it takes to create it on sage.math as an example, but I got too impatient to let it finish). The script to create this database is `sage.databases.cremona.build`, this will build and install the database from your tgz file.\n\nIf we decide to, we can move the build script to be inside the spkg, with the knowledge that we should not use it on slow filesystems. If we do so, we should only include allcurves, allgens, allbsd, and degphi since those are the only files sage currently uses.\n\n> Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?\n\nThere is still a bit of hard-wired code: a bit in the documentation, the build script, and an error message. It is possible to remove all of these references, the only reason I didn't when working on this patch was because I wanted to get sage up to speed. It is a simple fix, although if we decide remove the build scripts from the sage library to the spkg instead, we might as well do this at the same time.",
    "created_at": "2011-09-11T05:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118798",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@JohnCremona](#comment%3A14):
> It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right? 

Currently the spkg includes basically a single file -- a prebuilt database. This is primarily because it is much faster to have the package copy the file, rather than build the database from scratch (I was going to use time it takes to create it on sage.math as an example, but I got too impatient to let it finish). The script to create this database is `sage.databases.cremona.build`, this will build and install the database from your tgz file.

If we decide to, we can move the build script to be inside the spkg, with the knowledge that we should not use it on slow filesystems. If we do so, we should only include allcurves, allgens, allbsd, and degphi since those are the only files sage currently uses.

> Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?

There is still a bit of hard-wired code: a bit in the documentation, the build script, and an error message. It is possible to remove all of these references, the only reason I didn't when working on this patch was because I wanted to get sage up to speed. It is a simple fix, although if we decide remove the build scripts from the sage library to the spkg instead, we might as well do this at the same time.



---

archive/issue_comments_118799.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@ohanar](#comment%3A15):\n> Replying to [@JohnCremona](#comment%3A14):\n> > It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right? \n> \n> \n> Currently the spkg includes basically a single file -- a prebuilt database. This is primarily because it is much faster to have the package copy the file, rather than build the database from scratch (I was going to use time it takes to create it on sage.math as an example, but I got too impatient to let it finish). The script to create this database is `sage.databases.cremona.build`, this will build and install the database from your tgz file.\n> \n> If we decide to, we can move the build script to be inside the spkg, with the knowledge that we should not use it on slow filesystems. If we do so, we should only include allcurves, allgens, allbsd, and degphi since those are the only files sage currently uses.\n> \n> > Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?\n> \n> \n> There is still a bit of hard-wired code: a bit in the documentation, the build script, and an error message. It is possible to remove all of these references, the only reason I didn't when working on this patch was because I wanted to get sage up to speed. It is a simple fix, although if we decide remove the build scripts from the sage library to the spkg instead, we might as well do this at the same time.\n\nThanks for the explanation.  I agree that it is good to have the database file itself in the package and not the raw data, as long as it (the spkg) also has instructions on how to (re)create this from my raw data.  And a note of the precise things to be changed when the range is extended would also be a good idea, even if that's only a couple of places.  I'm thinking that it may not be you doing this next time!",
    "created_at": "2011-09-11T09:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118799",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@ohanar](#comment%3A15):
> Replying to [@JohnCremona](#comment%3A14):
> > It would be good if it were very easy to extend further (say just by having more data files in the right place on installation), since I have not stopped and in fact am very close to adding the range 180k=190k.  Adding that data (and more) should now be just a matter of adding some data files to the spkg, right? 
> 
> 
> Currently the spkg includes basically a single file -- a prebuilt database. This is primarily because it is much faster to have the package copy the file, rather than build the database from scratch (I was going to use time it takes to create it on sage.math as an example, but I got too impatient to let it finish). The script to create this database is `sage.databases.cremona.build`, this will build and install the database from your tgz file.
> 
> If we decide to, we can move the build script to be inside the spkg, with the knowledge that we should not use it on slow filesystems. If we do so, we should only include allcurves, allgens, allbsd, and degphi since those are the only files sage currently uses.
> 
> > Is the information such as the maximum conductor hard-wired into the code or just read from the database after construction from raw data files?
> 
> 
> There is still a bit of hard-wired code: a bit in the documentation, the build script, and an error message. It is possible to remove all of these references, the only reason I didn't when working on this patch was because I wanted to get sage up to speed. It is a simple fix, although if we decide remove the build scripts from the sage library to the spkg instead, we might as well do this at the same time.

Thanks for the explanation.  I agree that it is good to have the database file itself in the package and not the raw data, as long as it (the spkg) also has instructions on how to (re)create this from my raw data.  And a note of the precise things to be changed when the range is extended would also be a good idea, even if that's only a couple of places.  I'm thinking that it may not be you doing this next time!



---

archive/issue_comments_118800.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIf 190k is almost done, I can add the upgrading instructions then.",
    "created_at": "2011-09-11T20:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118800",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:17" align="right">comment:17</div>

If 190k is almost done, I can add the upgrading instructions then.



---

archive/issue_comments_118801.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI get warnings from Sphinx:\n\n```\n.../local/lib/python2.6/site-packages/sage/databases/cremona.py:docstring of sage.databases.cremona:26: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\n.../local/lib/python2.6/site-packages/sage/databases/cremona.py:docstring of sage.databases.cremona:36: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\n```",
    "created_at": "2011-09-12T07:33:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118801",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

I get warnings from Sphinx:

```
.../local/lib/python2.6/site-packages/sage/databases/cremona.py:docstring of sage.databases.cremona:26: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
.../local/lib/python2.6/site-packages/sage/databases/cremona.py:docstring of sage.databases.cremona:36: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
```



---

archive/issue_comments_118802.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:\n\n```python\n\nTo use the database, just create a curve by giving\n\n::\n\n    sage: EllipticCurve('5077a1')\n    Elliptic Curve defined by y^2 + y = x^3 - 7*x + 6 over Rational Field\n    sage: C = CremonaDatabase() \n    sage: C.number_of_curves() #optional - cremona\n    847550\n    sage: C[37]\n    {'a': {'a1': [[0, 0, 1, -1, 0], 1, 1],\n           'b1': [[0, 1, 1, -23, -50], 0, 3], ...\n    sage: C.isogeny_class('37b')\n    [Elliptic Curve defined by y^2 + y = x^3 + x^2 - 23*x - 50 \n    over Rational Field, ...]\n\n```\n\n```\nFile \".../doc/en/bordeaux_2008/elliptic_curves.rst\", line 22:\n    sage: C[37]\nExpected:\n    {'a': {'a1': [[0, 0, 1, -1, 0], 1, 1],\n           'b1': [[0, 1, 1, -23, -50], 0, 3], ...\nGot:\n    {'allcurves': {'a1': [[0, 0, 1, -1, 0], 1, 1], 'b1': [[0, 1, 1, -23, -50], 0, 3], 'b2': [[0, 1, 1, -1873, -31833], 0, 1], 'b3': [[0, 1, 1, -3, 1], 0, 3]}}\n```\n\n(Just the first key differs; `a` vs. `allcurves`.)",
    "created_at": "2011-09-12T08:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118802",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

I'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:

```python

To use the database, just create a curve by giving

::

    sage: EllipticCurve('5077a1')
    Elliptic Curve defined by y^2 + y = x^3 - 7*x + 6 over Rational Field
    sage: C = CremonaDatabase() 
    sage: C.number_of_curves() #optional - cremona
    847550
    sage: C[37]
    {'a': {'a1': [[0, 0, 1, -1, 0], 1, 1],
           'b1': [[0, 1, 1, -23, -50], 0, 3], ...
    sage: C.isogeny_class('37b')
    [Elliptic Curve defined by y^2 + y = x^3 + x^2 - 23*x - 50 
    over Rational Field, ...]

```

```
File ".../doc/en/bordeaux_2008/elliptic_curves.rst", line 22:
    sage: C[37]
Expected:
    {'a': {'a1': [[0, 0, 1, -1, 0], 1, 1],
           'b1': [[0, 1, 1, -23, -50], 0, 3], ...
Got:
    {'allcurves': {'a1': [[0, 0, 1, -1, 0], 1, 1], 'b1': [[0, 1, 1, -23, -50], 0, 3], 'b2': [[0, 1, 1, -1873, -31833], 0, 1], 'b3': [[0, 1, 1, -3, 1], 0, 3]}}
```

(Just the first key differs; `a` vs. `allcurves`.)



---

archive/issue_events_153559.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-09-12T08:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153559"
}
```



---

archive/issue_events_153560.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-09-12T08:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153560"
}
```



---

archive/issue_comments_118803.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nexttime](#comment%3A19):\n> I'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:\n\n> (Just the first key differs; `a` vs. `allcurves`.)\n\nI'm sure this is the correct ticket since the database has changed.  It's easy to forget to test this part of the documentation.  Changing the expected output to the actual output would be fine.\nHence back to \"Needs (trivial) work\".",
    "created_at": "2011-09-12T08:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118803",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nexttime](#comment%3A19):
> I'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:

> (Just the first key differs; `a` vs. `allcurves`.)

I'm sure this is the correct ticket since the database has changed.  It's easy to forget to test this part of the documentation.  Changing the expected output to the actual output would be fine.
Hence back to "Needs (trivial) work".



---

archive/issue_comments_118804.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@JohnCremona](#comment%3A20):\n> Replying to [@nexttime](#comment%3A19):\n> > I'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:\n> \n> \n> > (Just the first key differs; `a` vs. `allcurves`.)\n> \n> \n> I'm sure this is the correct ticket since the database has changed.  It's easy to forget to test this part of the documentation.  Changing the expected output to the actual output would be fine.\n\nYup, didn't test this, so a good catch (and yes, it does belong here, I made the change in key names). Also, if you run the optional test, that will fail as well (we may want to scrap it for something else, since it adds to the maintenance of the optional spkg).",
    "created_at": "2011-09-12T08:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118804",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@JohnCremona](#comment%3A20):
> Replying to [@nexttime](#comment%3A19):
> > I'm not sure to which ticket this belongs, but I get an apparently trivial doctest error in the following example of `doc/en/bordeaux_2008/elliptic_curves.rst`:
> 
> 
> > (Just the first key differs; `a` vs. `allcurves`.)
> 
> 
> I'm sure this is the correct ticket since the database has changed.  It's easy to forget to test this part of the documentation.  Changing the expected output to the actual output would be fine.

Yup, didn't test this, so a good catch (and yes, it does belong here, I made the change in key names). Also, if you run the optional test, that will fail as well (we may want to scrap it for something else, since it adds to the maintenance of the optional spkg).



---

archive/issue_comments_118805.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@ohanar](#comment%3A17):\n> If 190k is almost done, I can add the upgrading instructions then.\n\nIt's almost done in the sense that I have everything except that 3 curves in the range are \"missing\" on account of some difficulties with modular symbols which I will now try to fix (requires revising code and testing).  Either I'll have this by the end of Thursday, or I'll be away for a week and it will take longer.",
    "created_at": "2011-09-12T08:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118805",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@ohanar](#comment%3A17):
> If 190k is almost done, I can add the upgrading instructions then.

It's almost done in the sense that I have everything except that 3 curves in the range are "missing" on account of some difficulties with modular symbols which I will now try to fix (requires revising code and testing).  Either I'll have this by the end of Thursday, or I'll be away for a week and it will take longer.



---

archive/issue_comments_118806.json:
```json
{
    "body": "Attachment: **[trac_11587-docfixes.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz)**\n\nApply on top to sage library. Fixes issues with documentation.",
    "created_at": "2011-09-12T23:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118806",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[trac_11587-docfixes.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz)**

Apply on top to sage library. Fixes issues with documentation.



---

archive/issue_comments_118807.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,6 +21,8 @@\n \n Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.\n \n+Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.\n+\n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n ---\n``````\n",
    "created_at": "2011-09-12T23:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118807",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,6 +21,8 @@
 
 Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.
 
+Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.
+
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
 ---
``````




---

archive/issue_events_153561.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-09-12T23:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153561"
}
```



---

archive/issue_events_153562.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-09-12T23:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153562"
}
```



---

archive/issue_comments_118808.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nApplying trac_11587.patch onto 4.7.2.alpha1 failed.  And before that, installing the new spkg using sage -i ended with \n\n```\n...\nThread model: posix\ngcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) \n****************************************************\n/home/jec/sage-4.7.2.alpha1.ecdb/local/bin/sage-sage: line 807: 12145 Killed                  tee -a ../install.log \"$SAGE_LOGS/$PKG_NAME\".log\n```\nwhich looks like an error message, I am not sure.  Am I doing something wrong?",
    "created_at": "2011-09-15T13:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118808",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:25" align="right">comment:25</div>

Applying trac_11587.patch onto 4.7.2.alpha1 failed.  And before that, installing the new spkg using sage -i ended with 

```
...
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) 
****************************************************
/home/jec/sage-4.7.2.alpha1.ecdb/local/bin/sage-sage: line 807: 12145 Killed                  tee -a ../install.log "$SAGE_LOGS/$PKG_NAME".log
```
which looks like an error message, I am not sure.  Am I doing something wrong?



---

archive/issue_comments_118809.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@JohnCremona](#comment%3A25):\n> Applying trac_11587.patch onto 4.7.2.alpha1 failed.\n\nDid you first apply #11640 and #11642?\n\n\n> And before that, installing the new spkg using sage -i ended with \n\n\n```\n...\nThread model: posix\ngcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) \n****************************************************\n/home/jec/sage-4.7.2.alpha1.ecdb/local/bin/sage-sage: line 807: 12145 Killed                  tee -a ../install.log \"$SAGE_LOGS/$PKG_NAME\".log\n```\n> which looks like an error message, I am not sure.\n\nYes. No idea what might have caused that.",
    "created_at": "2011-09-15T14:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118809",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@JohnCremona](#comment%3A25):
> Applying trac_11587.patch onto 4.7.2.alpha1 failed.

Did you first apply #11640 and #11642?


> And before that, installing the new spkg using sage -i ended with 


```
...
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) 
****************************************************
/home/jec/sage-4.7.2.alpha1.ecdb/local/bin/sage-sage: line 807: 12145 Killed                  tee -a ../install.log "$SAGE_LOGS/$PKG_NAME".log
```
> which looks like an error message, I am not sure.

Yes. No idea what might have caused that.



---

archive/issue_comments_118810.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nexttime](#comment%3A26):\n> Replying to [@JohnCremona](#comment%3A25):\n> > Applying trac_11587.patch onto 4.7.2.alpha1 failed.\n> \n> \n> Did you first apply #11640 and #11642?\n\nNo since I saw that they were merged already -- but now I see that they were merged in alpha3 only.",
    "created_at": "2011-09-15T14:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118810",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nexttime](#comment%3A26):
> Replying to [@JohnCremona](#comment%3A25):
> > Applying trac_11587.patch onto 4.7.2.alpha1 failed.
> 
> 
> Did you first apply #11640 and #11642?

No since I saw that they were merged already -- but now I see that they were merged in alpha3 only.



---

archive/issue_comments_118811.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOK, with #11640 and #11642 applied first the patches to the Sage library apply fine.  Dor the deps one I just manually edited the file since I could find no trace of mercurial in $SAGE_ROOT/spkgs/standard (or at least hg gave an error message).  Then I rebuilt everything with sage -ba, and I am now doing a make ptestlong, and will report back.\n\nSmall comment, since I know that Andrew will be updating the conductor ranges anyway:  at the moment smallest_conductor() returns 1 which will surprise some people as the actual smallest is 11!",
    "created_at": "2011-09-15T14:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118811",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:28" align="right">comment:28</div>

OK, with #11640 and #11642 applied first the patches to the Sage library apply fine.  Dor the deps one I just manually edited the file since I could find no trace of mercurial in $SAGE_ROOT/spkgs/standard (or at least hg gave an error message).  Then I rebuilt everything with sage -ba, and I am now doing a make ptestlong, and will report back.

Small comment, since I know that Andrew will be updating the conductor ranges anyway:  at the moment smallest_conductor() returns 1 which will surprise some people as the actual smallest is 11!



---

archive/issue_events_153563.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-09-15T15:59:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153563"
}
```



---

archive/issue_events_153564.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-09-15T15:59:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153564"
}
```



---

archive/issue_comments_118812.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAll test pass, so I am giving this a positive review.  This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.",
    "created_at": "2011-09-15T15:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118812",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:29" align="right">comment:29</div>

All test pass, so I am giving this a positive review.  This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.



---

archive/issue_comments_118813.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@JohnCremona](#comment%3A29):\n> All test pass, so I am giving this a positive review.\n\nI didn't expect something else. ;-)\n\n> This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.\n\nWhich will be when?\n\nCan't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?",
    "created_at": "2011-09-15T16:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118813",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@JohnCremona](#comment%3A29):
> All test pass, so I am giving this a positive review.

I didn't expect something else. ;-)

> This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.

Which will be when?

Can't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?



---

archive/issue_comments_118814.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nP.S.: `deps` is part of the \"root\" repository, which is located in `$SAGE_ROOT`, so you have to apply the patch there.",
    "created_at": "2011-09-15T16:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118814",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:31" align="right">comment:31</div>

P.S.: `deps` is part of the "root" repository, which is located in `$SAGE_ROOT`, so you have to apply the patch there.



---

archive/issue_comments_118815.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@nexttime](#comment%3A30):\n> Replying to [@JohnCremona](#comment%3A29):\n> > All test pass, so I am giving this a positive review.\n> \n> \n> I didn't expect something else. ;-)\n> \n> > This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.\n> \n> \n> Which will be when?\n\nI finished creating the data this morning, and Andrew Ohana is updating his optional spkg (?) now.\n\n> \n> Can't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?\n\nNo, I don't think so, since the database has completely changed and so the *old* version of the optional larger database spkg will not be able to be applied to the *new* standard spkg.  (Andrew, please correct me if I am wrong on this).\n\nAnyway, the impression I got was that adding the additional curves published today would only take a few minutes.  If longer, then go with what is on this ticket.  But I don't know the right mechanism for changing the optional spkg.",
    "created_at": "2011-09-15T16:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118815",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@nexttime](#comment%3A30):
> Replying to [@JohnCremona](#comment%3A29):
> > All test pass, so I am giving this a positive review.
> 
> 
> I didn't expect something else. ;-)
> 
> > This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.
> 
> 
> Which will be when?

I finished creating the data this morning, and Andrew Ohana is updating his optional spkg (?) now.

> 
> Can't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?

No, I don't think so, since the database has completely changed and so the *old* version of the optional larger database spkg will not be able to be applied to the *new* standard spkg.  (Andrew, please correct me if I am wrong on this).

Anyway, the impression I got was that adding the additional curves published today would only take a few minutes.  If longer, then go with what is on this ticket.  But I don't know the right mechanism for changing the optional spkg.



---

archive/issue_comments_118816.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@JohnCremona](#comment%3A32):\n> Replying to [@nexttime](#comment%3A30):\n> > Replying to [@JohnCremona](#comment%3A29):\n> > > This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.\n> > \n> > \n> > Which will be when?\n> \n> \n> I finished creating the data this morning, and Andrew Ohana is updating his optional spkg (?) now.\n\nWorking on it right now.\n> \n> > \n> > Can't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?\n> \n> \n> No, I don't think so, since the database has completely changed and so the *old* version of the optional larger database spkg will not be able to be applied to the *new* standard spkg.  (Andrew, please correct me if I am wrong on this).\n\nThe optional spkgs mentioned the description work with the new database format, but there are a few places where the version of the package is hardcoded into the sage library (so holding off may be a good idea). I am going to remove these, so that maintaining the spkg is an easier chore.",
    "created_at": "2011-09-15T21:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118816",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@JohnCremona](#comment%3A32):
> Replying to [@nexttime](#comment%3A30):
> > Replying to [@JohnCremona](#comment%3A29):
> > > This is for the default database (max conductor 10000);  but this ticket cannot be merged until the large database is also ready to go and has been tested.
> > 
> > 
> > Which will be when?
> 
> 
> I finished creating the data this morning, and Andrew Ohana is updating his optional spkg (?) now.

Working on it right now.
> 
> > 
> > Can't we just merge this ticket and open a follow-up in case something goes wrong with the larger (anyway optional) database?
> 
> 
> No, I don't think so, since the database has completely changed and so the *old* version of the optional larger database spkg will not be able to be applied to the *new* standard spkg.  (Andrew, please correct me if I am wrong on this).

The optional spkgs mentioned the description work with the new database format, but there are a few places where the version of the package is hardcoded into the sage library (so holding off may be a good idea). I am going to remove these, so that maintaining the spkg is an easier chore.



---

archive/issue_comments_118817.json:
```json
{
    "body": "Attachment: **[trac_11587-rmhardcode.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz)**\n\nremoves the hardcoded version number from sage library",
    "created_at": "2011-09-15T22:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118817",
    "user": "https://github.com/ohanar"
}
```

Attachment: **[trac_11587-rmhardcode.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz)**

removes the hardcoded version number from sage library



---

archive/issue_comments_118818.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOk, I've updated the spkg, it now includes updating instructions in the spkg.txt as well. I've also added a patch that removes the hardcoded version numbers from the sage library, the instructions in the spkg are based off of this.",
    "created_at": "2011-09-15T22:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118818",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:34" align="right">comment:34</div>

Ok, I've updated the spkg, it now includes updating instructions in the spkg.txt as well. I've also added a patch that removes the hardcoded version numbers from the sage library, the instructions in the spkg are based off of this.



---

archive/issue_comments_118819.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,6 +23,8 @@\n \n Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.\n \n+Apply [attachment: trac_11587-rmhardcode.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz) to the Sage library.\n+\n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n ---\n``````\n",
    "created_at": "2011-09-15T22:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118819",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,6 +23,8 @@
 
 Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.
 
+Apply [attachment: trac_11587-rmhardcode.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz) to the Sage library.
+
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
 ---
``````




---

archive/issue_comments_118820.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nAndrew, is the optional spkg http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg with the larger database ready for \"release\"?",
    "created_at": "2011-09-16T13:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118820",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

Andrew, is the optional spkg http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg with the larger database ready for "release"?



---

archive/issue_comments_118821.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@nexttime](#comment%3A35):\n> Andrew, is the optional spkg http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg with the larger database ready for \"release\"?\n\nIt should be (the install script simply copies a single file)",
    "created_at": "2011-09-16T16:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118821",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@nexttime](#comment%3A35):
> Andrew, is the optional spkg http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg with the larger database ready for "release"?

It should be (the install script simply copies a single file)



---

archive/issue_comments_118822.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha3**",
    "created_at": "2011-09-17T04:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118822",
    "user": "https://github.com/nexttime"
}
```

Merged: **sage-4.7.2.alpha3**



---

archive/issue_events_153565.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T04:58:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153565"
}
```



---

archive/issue_events_153566.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-17T04:58:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153566"
}
```



---

archive/issue_comments_118823.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nHad to add a changelog entry for the previous version in Sage (0.1), since otherwise Jeroen's merger3 (meanwhile) rejects it (assuming it wasn't based on the previous one in Sage).\n\nCorrected spkg at new location.",
    "created_at": "2011-09-23T04:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118823",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:38" align="right">comment:38</div>

Had to add a changelog entry for the previous version in Sage (0.1), since otherwise Jeroen's merger3 (meanwhile) rejects it (assuming it wasn't based on the previous one in Sage).

Corrected spkg at new location.



---

archive/issue_comments_118824.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,7 +17,7 @@\n \n ---\n \n-New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.3.spkg\n+New spkg: http://sage.math.washington.edu/home/leif/Sage/spkgs/elliptic_curves-0.3.spkg\n \n Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.\n \n``````\n",
    "created_at": "2011-09-23T04:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118824",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,7 +17,7 @@
 
 ---
 
-New spkg: http://wstein.org/home/ohanar/cremona-database/elliptic_curves-0.3.spkg
+New spkg: http://sage.math.washington.edu/home/leif/Sage/spkgs/elliptic_curves-0.3.spkg
 
 Apply [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz) to the Sage library.
 
``````




---

archive/issue_comments_118825.json:
```json
{
    "body": "\"Proper\" Mercurial changeset replacement patch. (Adds just the \"User\" field.)",
    "created_at": "2011-09-28T17:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118825",
    "user": "https://github.com/nexttime"
}
```

"Proper" Mercurial changeset replacement patch. (Adds just the "User" field.)



---

archive/issue_comments_118826.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nAttachment: **[trac_11587-rmhardcode.proper.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz)**\n\nI've attached one replacement patch which just adds the \"`# User ...`\" line the original patch is lacking.",
    "created_at": "2011-09-28T17:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118826",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:39" align="right">comment:39</div>

Attachment: **[trac_11587-rmhardcode.proper.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz)**

I've attached one replacement patch which just adds the "`# User ...`" line the original patch is lacking.



---

archive/issue_comments_118827.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,7 +23,7 @@\n \n Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.\n \n-Apply [attachment: trac_11587-rmhardcode.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz) to the Sage library.\n+Apply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.\n \n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n``````\n",
    "created_at": "2011-09-28T17:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118827",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,7 +23,7 @@
 
 Apply [attachment: trac_11587-docfixes.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-docfixes.patch.gz) to the Sage library.
 
-Apply [attachment: trac_11587-rmhardcode.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.patch.gz) to the Sage library.
+Apply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.
 
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
``````




---

archive/issue_comments_118828.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAfter installing the optionl daatbase on top of 4.7.2.alpha3 I had a doctest failure in \ndevel/sage/doc/en/bordeaux_2008/elliptic_curves.rst .  Nothing serious, just different gens for a curve (i.e. the ones in the database are not the same as those found, for a rank 2 curve).",
    "created_at": "2011-09-29T19:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118828",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:40" align="right">comment:40</div>

After installing the optionl daatbase on top of 4.7.2.alpha3 I had a doctest failure in 
devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst .  Nothing serious, just different gens for a curve (i.e. the ones in the database are not the same as those found, for a rank 2 curve).



---

archive/issue_comments_118829.json:
```json
{
    "body": "Changed merged from **sage-4.7.2.alpha3** to none",
    "created_at": "2011-10-06T19:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118829",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.2.alpha3** to none



---

archive/issue_comments_118830.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThis is the cause of a serious speed regression.  Message by Dave Loeffler:\n\nI've found the culprit: this is a side-effect of #11587. If you\nlook at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code\nat lines 710-712 of sage/databases/cremona.py which sets the\ngenerators to [] if the gens aren't explicitly in the database but the\nrank is known to be 0. The new version doesn't perform this little\ncheck and so we waste loads of time doing pointless 2-descents.",
    "created_at": "2011-10-06T19:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118830",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

This is the cause of a serious speed regression.  Message by Dave Loeffler:

I've found the culprit: this is a side-effect of #11587. If you
look at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code
at lines 710-712 of sage/databases/cremona.py which sets the
generators to [] if the gens aren't explicitly in the database but the
rank is known to be 0. The new version doesn't perform this little
check and so we waste loads of time doing pointless 2-descents.



---

archive/issue_events_153567.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-06T19:25:09Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153567"
}
```



---

archive/issue_comments_118831.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jdemeyer](#comment%3A41):\n> This is the cause of a serious speed regression.  Message by Dave Loeffler:\n> \n> I've found the culprit: this is a side-effect of #11587. If you\n> look at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code\n> at lines 710-712 of sage/databases/cremona.py which sets the\n> generators to [] if the gens aren't explicitly in the database but the\n> rank is known to be 0. The new version doesn't perform this little\n> check and so we waste loads of time doing pointless 2-descents.\n\nI was fearing something like that.\n\nWhy not open a follow-up (blocker) ticket for fixing that?\n\nalpha3 is already out...",
    "created_at": "2011-10-06T19:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118831",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jdemeyer](#comment%3A41):
> This is the cause of a serious speed regression.  Message by Dave Loeffler:
> 
> I've found the culprit: this is a side-effect of #11587. If you
> look at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code
> at lines 710-712 of sage/databases/cremona.py which sets the
> generators to [] if the gens aren't explicitly in the database but the
> rank is known to be 0. The new version doesn't perform this little
> check and so we waste loads of time doing pointless 2-descents.

I was fearing something like that.

Why not open a follow-up (blocker) ticket for fixing that?

alpha3 is already out...



---

archive/issue_comments_118832.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@nexttime](#comment%3A42):\n> Why not open a follow-up (blocker) ticket for fixing that?\n\nI thought it might be easier to change an existing ticket, especially if the change is small.\n\n> alpha3 is already out...\n\nDoesn't really matter, I can re-merge the ticket in alpha4...",
    "created_at": "2011-10-06T20:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118832",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@nexttime](#comment%3A42):
> Why not open a follow-up (blocker) ticket for fixing that?

I thought it might be easier to change an existing ticket, especially if the change is small.

> alpha3 is already out...

Doesn't really matter, I can re-merge the ticket in alpha4...



---

archive/issue_comments_118833.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@jdemeyer](#comment%3A41):\n> This is the cause of a serious speed regression.  Message by Dave Loeffler:\n> \n> I've found the culprit: this is a side-effect of #11587. If you\n> look at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code\n> at lines 710-712 of sage/databases/cremona.py which sets the\n> generators to [] if the gens aren't explicitly in the database but the\n> rank is known to be 0. The new version doesn't perform this little\n> check and so we waste loads of time doing pointless 2-descents.\n\nIt has always been rather a nuisance that the small default database differs from the large one not only in having fewer curves but in having less information about them (specifically, omits the known rank and generators).  I don't want to delay this ticket longer than necessary (and apologise for the positive review which missed this glitch) but propose a follow-up which includes all known data for the small database too.",
    "created_at": "2011-10-06T21:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118833",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@jdemeyer](#comment%3A41):
> This is the cause of a serious speed regression.  Message by Dave Loeffler:
> 
> I've found the culprit: this is a side-effect of #11587. If you
> look at [attachment: trac_11587.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587.patch.gz), then it removes a couple of lines of code
> at lines 710-712 of sage/databases/cremona.py which sets the
> generators to [] if the gens aren't explicitly in the database but the
> rank is known to be 0. The new version doesn't perform this little
> check and so we waste loads of time doing pointless 2-descents.

It has always been rather a nuisance that the small default database differs from the large one not only in having fewer curves but in having less information about them (specifically, omits the known rank and generators).  I don't want to delay this ticket longer than necessary (and apologise for the positive review which missed this glitch) but propose a follow-up which includes all known data for the small database too.



---

archive/issue_comments_118834.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nFollow-up or on this ticket will not make a difference because I plan to unmerge this ticket anyway if it causes such massive slowdown.  So, do as you wish.",
    "created_at": "2011-10-06T21:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118834",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Follow-up or on this ticket will not make a difference because I plan to unmerge this ticket anyway if it causes such massive slowdown.  So, do as you wish.



---

archive/issue_comments_118835.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThis will be unmerged for the sage-4.7.2 release series.  We really *should* get this working so that it can be merged again in sage-4.7.3.alpha0.",
    "created_at": "2011-10-08T10:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118835",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

This will be unmerged for the sage-4.7.2 release series.  We really *should* get this working so that it can be merged again in sage-4.7.3.alpha0.



---

archive/issue_events_153568.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T10:23:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153568"
}
```



---

archive/issue_events_153569.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-08T10:23:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153569"
}
```



---

archive/issue_comments_118836.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@jdemeyer](#comment%3A46):\n> This will be unmerged for the sage-4.7.2 release series.  We really *should* get this working so that it can be merged again in sage-4.7.3.alpha0.\n\nThen we should also remove [http://sagemath.org/packages/optional/database_cremona_ellcurve-20110915.spkg](http://sagemath.org/packages/optional/database_cremona_ellcurve-20110915.spkg) again, since it is in the new format (which only the alpha3 supports); either when alpha4 is officially released, or right before the final 4.7.2 gets out.\n\nIt shouldn't be hard to change its `spkg-install` to just install the previous version (hard-coded URL, e.g. by recursively calling `sage -i ...` or `sage-spkg`) if the Sage version present doesn't support the new format, which is reasonable for the future anyway (i.e., when this ticket gets remerged). Cf. [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/3f8a60845a477324/cc82a5faf40fe57e#cc82a5faf40fe57e).",
    "created_at": "2011-10-08T14:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118836",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@jdemeyer](#comment%3A46):
> This will be unmerged for the sage-4.7.2 release series.  We really *should* get this working so that it can be merged again in sage-4.7.3.alpha0.

Then we should also remove [http://sagemath.org/packages/optional/database_cremona_ellcurve-20110915.spkg](http://sagemath.org/packages/optional/database_cremona_ellcurve-20110915.spkg) again, since it is in the new format (which only the alpha3 supports); either when alpha4 is officially released, or right before the final 4.7.2 gets out.

It shouldn't be hard to change its `spkg-install` to just install the previous version (hard-coded URL, e.g. by recursively calling `sage -i ...` or `sage-spkg`) if the Sage version present doesn't support the new format, which is reasonable for the future anyway (i.e., when this ticket gets remerged). Cf. [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/3f8a60845a477324/cc82a5faf40fe57e#cc82a5faf40fe57e).



---

archive/issue_comments_118837.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n... or simply print a message instructing the user to instead do\n\n```sh\n$ ./sage -i http://sagemath.org/packages/archive/database_cremona_ellcurve-20071019.p0.spkg\n```\n\n(It should IMHO also still be in `/packages/optional/`, along with its description, but I get a 404 if I replace `archive` by `optional` above.)\n\n\n\n\nCeterum censeo we should really split the spkg metadata (or Sage part) from its \"real\" contents (data or upstream tarballs), or at least *additionally* provide it in *small* files to be processed without the need to download the full spkgs in advance...",
    "created_at": "2011-10-08T14:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118837",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:48" align="right">comment:48</div>

... or simply print a message instructing the user to instead do

```sh
$ ./sage -i http://sagemath.org/packages/archive/database_cremona_ellcurve-20071019.p0.spkg
```

(It should IMHO also still be in `/packages/optional/`, along with its description, but I get a 404 if I replace `archive` by `optional` above.)




Ceterum censeo we should really split the spkg metadata (or Sage part) from its "real" contents (data or upstream tarballs), or at least *additionally* provide it in *small* files to be processed without the need to download the full spkgs in advance...



---

archive/issue_comments_118838.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nAny effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.",
    "created_at": "2011-10-09T10:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118838",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:49" align="right">comment:49</div>

Any effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.



---

archive/issue_comments_118839.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@JohnCremona](#comment%3A49):\n> Any effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.\n\nI fully agree, but unfortunately it's relatively easy to \"unmerge\" this ticket, and it's in general not up to the *release manager* to fix such things (that go beyond simple rebasing, fixing noise, permissions or commit messages etc., which IMHO at least partially already is a *voluntary* service).",
    "created_at": "2011-10-09T15:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118839",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@JohnCremona](#comment%3A49):
> Any effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.

I fully agree, but unfortunately it's relatively easy to "unmerge" this ticket, and it's in general not up to the *release manager* to fix such things (that go beyond simple rebasing, fixing noise, permissions or commit messages etc., which IMHO at least partially already is a *voluntary* service).



---

archive/issue_comments_118840.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 180k is at\n+John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 190k is at\n http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\n file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz \n -- not to mention at http://code.google.com/p/ecdata/ !\"\n@@ -7,7 +7,7 @@\n \n (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n \n-(2) Create a new sqlite database that has the data up to level 180000, which will be an optional spkg.\n+(2) Create a new sqlite database that has the data up to level 190000, which will be an optional spkg.\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n \n``````\n",
    "created_at": "2011-10-09T16:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118840",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 180k is at
+John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 190k is at
 http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
 file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz 
 -- not to mention at http://code.google.com/p/ecdata/ !"
@@ -7,7 +7,7 @@
 
 (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.
 
-(2) Create a new sqlite database that has the data up to level 180000, which will be an optional spkg.
+(2) Create a new sqlite database that has the data up to level 190000, which will be an optional spkg.
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
 
``````




---

archive/issue_comments_118841.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@nexttime](#comment%3A50):\n> Replying to [@JohnCremona](#comment%3A49):\n> > Any effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.\n> \n> \n> I fully agree, but unfortunately it's relatively easy to \"unmerge\" this ticket, and it's in general not up to the *release manager* to fix such things (that go beyond simple rebasing, fixing noise, permissions or commit messages etc., which IMHO at least partially already is a *voluntary* service).\n\nOf course -- I just meant that you should do the absolute minimum and not spend effort making the old system more clever. And I just have not had time to fix the patch.",
    "created_at": "2011-10-09T16:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118841",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@nexttime](#comment%3A50):
> Replying to [@JohnCremona](#comment%3A49):
> > Any effort in removing this upgrade which takes more than the few minutes it would take to fix the very minor problem in it would be a complete waste of time.
> 
> 
> I fully agree, but unfortunately it's relatively easy to "unmerge" this ticket, and it's in general not up to the *release manager* to fix such things (that go beyond simple rebasing, fixing noise, permissions or commit messages etc., which IMHO at least partially already is a *voluntary* service).

Of course -- I just meant that you should do the absolute minimum and not spend effort making the old system more clever. And I just have not had time to fix the patch.



---

archive/issue_comments_118842.json:
```json
{
    "body": "apply over previous patches",
    "created_at": "2011-10-16T18:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118842",
    "user": "https://github.com/loefflerd"
}
```

apply over previous patches



---

archive/issue_comments_118843.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nAttachment: **[trac_11587-fix_speed_regression.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz)**",
    "created_at": "2011-10-16T18:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118843",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:52" align="right">comment:52</div>

Attachment: **[trac_11587-fix_speed_regression.patch.gz](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz)**



---

archive/issue_comments_118844.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,6 +25,8 @@\n \n Apply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.\n \n+Apply [attachment: trac_11587-fix_speed_regression.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz) to the Sage library.\n+\n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n ---\n``````\n",
    "created_at": "2011-10-16T18:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118844",
    "user": "https://github.com/loefflerd"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,6 +25,8 @@
 
 Apply [attachment: trac_11587-rmhardcode.proper.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-rmhardcode.proper.patch.gz) to the Sage library.
 
+Apply [attachment: trac_11587-fix_speed_regression.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-fix_speed_regression.patch.gz) to the Sage library.
+
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
 ---
``````




---

archive/issue_events_153570.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-10-16T18:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153570"
}
```



---

archive/issue_comments_118845.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@loefflerd](#comment%3A52):\n\nNot tested but David's patch looks perfect and I believe his comment.  Better if someone else test this as David and I use the same machine.\n\nIf this is not merged soon it will become out of date since I have currently reached 198800 and expect to release an extension up to 200k within a week!",
    "created_at": "2011-10-16T19:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118845",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@loefflerd](#comment%3A52):

Not tested but David's patch looks perfect and I believe his comment.  Better if someone else test this as David and I use the same machine.

If this is not merged soon it will become out of date since I have currently reached 198800 and expect to release an extension up to 200k within a week!



---

archive/issue_events_153571.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-10-30T00:51:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153571"
}
```



---

archive/issue_events_153572.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2011-10-30T00:51:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153572"
}
```



---

archive/issue_comments_118846.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nEverything works as expected.\n\n@loefflerd \nI don't think that those lines of code were actually ever used in the old version, since the small database actually included the generators despite the documentation saying otherwise (the new version follows what the documentation specified).\n\n@JohnCremona\nI've posted a new spkg with your expanded tables, same location as before.",
    "created_at": "2011-10-30T00:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118846",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:54" align="right">comment:54</div>

Everything works as expected.

@loefflerd 
I don't think that those lines of code were actually ever used in the old version, since the small database actually included the generators despite the documentation saying otherwise (the new version follows what the documentation specified).

@JohnCremona
I've posted a new spkg with your expanded tables, same location as before.



---

archive/issue_comments_118847.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@ohanar](#comment%3A54):\n> Everything works as expected.\n> \n> @loefflerd \n> I don't think that those lines of code were actually ever used in the old version, since the small database actually included the generators despite the documentation saying otherwise (the new version follows what the documentation specified).\n> \n> @JohnCremona\n> I've posted a new spkg with your expanded tables, same location as before.\n\nMany thanks to all.  As predicted, the database was updated to go up to 200k a few days ago.",
    "created_at": "2011-10-30T11:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118847",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@ohanar](#comment%3A54):
> Everything works as expected.
> 
> @loefflerd 
> I don't think that those lines of code were actually ever used in the old version, since the small database actually included the generators despite the documentation saying otherwise (the new version follows what the documentation specified).
> 
> @JohnCremona
> I've posted a new spkg with your expanded tables, same location as before.

Many thanks to all.  As predicted, the database was updated to go up to 200k a few days ago.



---

archive/issue_events_153573.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-31T11:27:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153573"
}
```



---

archive/issue_events_153574.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-31T11:27:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153574"
}
```



---

archive/issue_comments_118848.json:
```json
{
    "body": "Merged: **sage-4.7.3.alpha0**",
    "created_at": "2011-10-31T11:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118848",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.3.alpha0**



---

archive/issue_comments_118849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,6 +29,4 @@\n \n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n----\n-\n-**The new *optional* spkg also has to be brought into place.** (I don't put a link here to not confuse the bots.)\n+**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg)\n``````\n",
    "created_at": "2011-11-03T13:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118849",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,6 +29,4 @@
 
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
----
-
-**The new *optional* spkg also has to be brought into place.** (I don't put a link here to not confuse the bots.)
+**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg)
``````




---

archive/issue_comments_118850.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI just updated the description to reflect the fact that the optional db now goes up to 200k.",
    "created_at": "2011-11-03T13:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118850",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:58" align="right">comment:58</div>

I just updated the description to reflect the fact that the optional db now goes up to 200k.



---

archive/issue_comments_118851.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,13 @@\n-John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 190k is at\n+John Cremona tells me that: \"All data for elliptic curves of conductors from 130k to 200k is at\n http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar\n-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz \n+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-10-26.tgz \n -- not to mention at http://code.google.com/p/ecdata/ !\"\n \n The goal of this ticket is to:\n \n (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.\n \n-(2) Create a new sqlite database that has the data up to level 190000, which will be an optional spkg.\n+(2) Create a new sqlite database that has the data up to level 200000, which will be an optional spkg.\n \n This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. \n \n``````\n",
    "created_at": "2011-11-03T13:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118851",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,13 @@
-John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 190k is at
+John Cremona tells me that: "All data for elliptic curves of conductors from 130k to 200k is at
 http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/data/ and also as a tar
-file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-08-09.tgz 
+file at http://www.warwick.ac.uk/staff/J.E.Cremona/ftp/ecdata-2011-10-26.tgz 
 -- not to mention at http://code.google.com/p/ecdata/ !"
 
 The goal of this ticket is to:
 
 (1) Create a new drop-in-replacement sqlite database that has the data up to level 10000, which will be included standard with Sage.
 
-(2) Create a new sqlite database that has the data up to level 190000, which will be an optional spkg.
+(2) Create a new sqlite database that has the data up to level 200000, which will be an optional spkg.
 
 This is complicated because the current packages in Sage use ZODB.  Also, Cremona's database format has changed somewhat. 
 
``````




---

archive/issue_comments_118852.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,4 +29,4 @@\n \n Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.\n \n-**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg)\n+**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg)\n``````\n",
    "created_at": "2011-11-03T14:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118852",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,4 +29,4 @@
 
 Apply [attachment: trac_11587-depfix.patch](https://github.com/sagemath/sage/files/ticket11587/trac_11587-depfix.patch.gz) to Sage root.
 
-**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20110915.spkg)
+**Optional spkg**: [http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111029.spkg)
``````




---

archive/issue_comments_118853.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@ohanar](#comment%3A54):\n> I've posted a new spkg with your expanded tables, same location as before.\n\nNot really same location as before, I updated the ticket description.",
    "created_at": "2011-11-03T14:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118853",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@ohanar](#comment%3A54):
> I've posted a new spkg with your expanded tables, same location as before.

Not really same location as before, I updated the ticket description.



---

archive/issue_events_153575.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153575"
}
```



---

archive/issue_comments_118854.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118854",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_comments_118855.json:
```json
{
    "body": "Changed merged from **sage-4.7.3.alpha0** to **sage-4.8.alpha0**",
    "created_at": "2011-11-03T16:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118855",
    "user": "https://github.com/jdemeyer"
}
```

Changed merged from **sage-4.7.3.alpha0** to **sage-4.8.alpha0**



---

archive/issue_events_153576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:17:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11587#event-153576"
}
```



---

archive/issue_comments_118856.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI've posted an updated spkg based on Cremona's update to 210000 ([http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg)).\n\nI noticed that I never put in a way to install the old spkg for old copies of sage, so I added a recursive `sage -i` for now, until we have a standard that frees the user from downloading two different versions of an spkg. It should work for any version of sage released within the last year, although I haven't tested it super thoroughly (it works with stable 4.7.x, 4.8.alpha3, and 4.3.3.alpha0).",
    "created_at": "2011-11-27T11:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118856",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:62" align="right">comment:62</div>

I've posted an updated spkg based on Cremona's update to 210000 ([http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg)).

I noticed that I never put in a way to install the old spkg for old copies of sage, so I added a recursive `sage -i` for now, until we have a standard that frees the user from downloading two different versions of an spkg. It should work for any version of sage released within the last year, although I haven't tested it super thoroughly (it works with stable 4.7.x, 4.8.alpha3, and 4.3.3.alpha0).



---

archive/issue_comments_118857.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@ohanar](#comment%3A62):\n> I've posted an updated spkg based on Cremona's update to 210000 ([http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg)).\n\nPlease make a new ticket for making this an optional spkg (this ticket is closed).",
    "created_at": "2011-11-27T20:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118857",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@ohanar](#comment%3A62):
> I've posted an updated spkg based on Cremona's update to 210000 ([http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg](http://wstein.org/home/ohanar/cremona-database/database_cremona_ellcurve-20111121.spkg)).

Please make a new ticket for making this an optional spkg (this ticket is closed).



---

archive/issue_comments_118858.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@jdemeyer](#comment%3A63):\n> Please make a new ticket for making this an optional spkg (this ticket is closed).\n\nSure, my only reason for posting it in this ticket was due to the unaddressed issue of dealing with old copies of Sage.",
    "created_at": "2011-11-28T02:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118858",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@jdemeyer](#comment%3A63):
> Please make a new ticket for making this an optional spkg (this ticket is closed).

Sure, my only reason for posting it in this ticket was due to the unaddressed issue of dealing with old copies of Sage.



---

archive/issue_comments_118859.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nDoing a full test after installing the new optional database (onto 4.8.alpha4) I find one doctest failure in devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst:\n\n```\n    sage: E = EllipticCurve([1,2,5,7,17])\n    sage: E.conductor()       # not in the Tables\n    154907\n    sage: E.gens()            # a few seconds\n    [(1 : 3 : 1), (67/4 : 507/8 : 1)]\n```\nsince that curve is now in the database and the listed generators are different.  I suggest instead \n\n```\nsage: E = EllipticCurve([0,0,1,-19,60])\nsage: E.conductor()        # not in the Tables\n1129211\nsage: E.gens()             # a few seconds\n[(-5 : 5 : 1), (-4 : 8 : 1), (-15/4 : 67/8 : 1), (-3 : 9 : 1)]\n```\n\nShould the ticket be reopened -- this is not an issue in testing without the optional db installed?",
    "created_at": "2011-12-14T14:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118859",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:65" align="right">comment:65</div>

Doing a full test after installing the new optional database (onto 4.8.alpha4) I find one doctest failure in devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst:

```
    sage: E = EllipticCurve([1,2,5,7,17])
    sage: E.conductor()       # not in the Tables
    154907
    sage: E.gens()            # a few seconds
    [(1 : 3 : 1), (67/4 : 507/8 : 1)]
```
since that curve is now in the database and the listed generators are different.  I suggest instead 

```
sage: E = EllipticCurve([0,0,1,-19,60])
sage: E.conductor()        # not in the Tables
1129211
sage: E.gens()             # a few seconds
[(-5 : 5 : 1), (-4 : 8 : 1), (-15/4 : 67/8 : 1), (-3 : 9 : 1)]
```

Should the ticket be reopened -- this is not an issue in testing without the optional db installed?



---

archive/issue_comments_118860.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@JohnCremona](#comment%3A65):\n\n> \n> Should the ticket be reopened -- this is not an issue in testing without the optional db installed?\n\nSee #12184",
    "created_at": "2011-12-18T17:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11587",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11587#issuecomment-118860",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@JohnCremona](#comment%3A65):

> 
> Should the ticket be reopened -- this is not an issue in testing without the optional db installed?

See #12184
