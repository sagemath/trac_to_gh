# Issue 11645: Singular does not find "gftables/9" on Solaris

archive/issues_011473.json:
```json
{
    "assignees": [],
    "body": "The following problem of Singular on Solaris (mark in skynet for sage-4.7.1.rc1, to be precise) was found in #11431, and reported to the [Singular trac server](http://www.singular.uni-kl.de:8002/trac/ticket/352).\n\n```\n$ ./sage -singular --version\n   ? cannot open `help.cnf`\nSingular for SunOS-5 version 3-1-1 (3114-2011080223)  Aug  2 2011 23:47:38\nwith\n        factory(@(#) factoryVersion = 3.1.1),libfac(3.1.1,Feb 2010),\n        GMP(4.2),NTL(5.5.2),32bit,static readline,Plural,DBM,\n        dynamic modules,OM_NDEBUG,random=1312397091\n        CC= gcc -O2 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -DSunOS_5 -DHAVE_CONFIG_H,\n        CXX= g++ -O2 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -DSunOS_5 -DHAVE_CONFIG_H (4.5.1)\nargv[0]   :     Singular-3-1-1\nSearchPath:     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/share/singular:/home/simonking/SAGE/sage-4.7.1.rc1mark/local/LIB\nSingular  :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin/Singular\nBinDir    :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin\nRootDir   :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local\nDefaultDir:     /home/simonking/SAGE/sage-4.7.1.rc1mark/local\nInfoFile  :\nIdxFile   :\nHtmlDir   :\nManualUrl :     http://www.singular.uni-kl.de/Manual/3-1-1\nExDir     :\nPath      :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin:/home/simonking/SAGE/sage-4.7.1.rc1mark:/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld/bin:/usr/local/bin/sparc-SunOS-ultrasparc3:/usr/bin:/usr/ccs/bin\nEmacsDir  :\nAvailable HelpBrowsers: dummy, emacs,\nCurrent HelpBrowser: dummy\n                     SINGULAR                             /  Development\n A Computer Algebra System for Polynomial Computations   /   version 3-1-1\n                                                       0<\n     by: G.-M. Greuel, G. Pfister, H. Schoenemann        \\   Feb 2010\nFB Mathematik der Universitaet, D-67653 Kaiserslautern    \\\n> ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);\n   ? cannot open `gftables/9`\n   ? cannot make ring\n   ? error occurred in or before STDIN line 1: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`\n   ? expected ring-expression. type 'help ring;'\n>\n```\n\nThat example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.\n\nNew spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg)\n\nCC:  @malb\n\nKeywords: **Singular solaris gftables install.sh 10201**\n\nComponent: **packages: standard**\n\nAuthor: **Leif Leonhardy, Jeroen Demeyer**\n\nReviewer: **Simon King**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nMerged: **sage-4.7.1.rc2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11645_\n\n",
    "closed_at": "2011-08-11T09:14:06Z",
    "created_at": "2011-08-03T19:28:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Singular does not find \"gftables/9\" on Solaris",
    "type": "issue",
    "updated_at": "2011-08-11T09:14:06Z",
    "url": "https://github.com/sagemath/sage/issues/11645",
    "user": "https://github.com/simon-king-jena"
}
```
The following problem of Singular on Solaris (mark in skynet for sage-4.7.1.rc1, to be precise) was found in #11431, and reported to the [Singular trac server](http://www.singular.uni-kl.de:8002/trac/ticket/352).

```
$ ./sage -singular --version
   ? cannot open `help.cnf`
Singular for SunOS-5 version 3-1-1 (3114-2011080223)  Aug  2 2011 23:47:38
with
        factory(@(#) factoryVersion = 3.1.1),libfac(3.1.1,Feb 2010),
        GMP(4.2),NTL(5.5.2),32bit,static readline,Plural,DBM,
        dynamic modules,OM_NDEBUG,random=1312397091
        CC= gcc -O2 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -DSunOS_5 -DHAVE_CONFIG_H,
        CXX= g++ -O2 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -DSunOS_5 -DHAVE_CONFIG_H (4.5.1)
argv[0]   :     Singular-3-1-1
SearchPath:     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/share/singular:/home/simonking/SAGE/sage-4.7.1.rc1mark/local/LIB
Singular  :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin/Singular
BinDir    :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin
RootDir   :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local
DefaultDir:     /home/simonking/SAGE/sage-4.7.1.rc1mark/local
InfoFile  :
IdxFile   :
HtmlDir   :
ManualUrl :     http://www.singular.uni-kl.de/Manual/3-1-1
ExDir     :
Path      :     /home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin:/home/simonking/SAGE/sage-4.7.1.rc1mark:/usr/local/gcc-4.5.1/sparc-SunOS-ultrasparc3-sun-as-ld/bin:/usr/local/bin/sparc-SunOS-ultrasparc3:/usr/bin:/usr/ccs/bin
EmacsDir  :
Available HelpBrowsers: dummy, emacs,
Current HelpBrowser: dummy
                     SINGULAR                             /  Development
 A Computer Algebra System for Polynomial Computations   /   version 3-1-1
                                                       0<
     by: G.-M. Greuel, G. Pfister, H. Schoenemann        \   Feb 2010
FB Mathematik der Universitaet, D-67653 Kaiserslautern    \
> ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);
   ? cannot open `gftables/9`
   ? cannot make ring
   ? error occurred in or before STDIN line 1: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`
   ? expected ring-expression. type 'help ring;'
>
```

That example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.

New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg)

CC:  @malb

Keywords: **Singular solaris gftables install.sh 10201**

Component: **packages: standard**

Author: **Leif Leonhardy, Jeroen Demeyer**

Reviewer: **Simon King**

Upstream: **Fixed upstream, in a later stable release.**

Merged: **sage-4.7.1.rc2**

_Issue created by migration from https://trac.sagemath.org/ticket/11645_





---

archive/issue_events_156060.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-03T19:28:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156060"
}
```



---

archive/issue_events_156061.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-03T19:28:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "c: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156061"
}
```



---

archive/issue_events_156062.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-03T19:28:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156062"
}
```



---

archive/issue_events_156063.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-03T19:28:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156063"
}
```



---

archive/issue_events_156064.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-08-03T19:28:31Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "subject": "https://github.com/simon-king-jena",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156064"
}
```



---

archive/issue_comments_119964.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOleksander and Hannes from the Singular team replied. Apparently, there should be tables in the folder `SAGE_ROOT/local/share/singular/gftables` (or perhaps in `SAGE_ROOT/local/LIB/gftables`).\n\nIn my Sage installation on mark, there is a gftables directory, but it only contains a table for the field of size 10201.\n\nI am not sure whether the tables should already be created when Singular is built, or only when a field of a particular size is first created (I asked the Singular team a few minues ago).\n\nAccording to the Singular manual, Singular allows all field sizes below `2^16`. Looking at the gftables directory of my installation on my linux computer, clearly there are less tables than field sizes. So, I guess that the tables are only created when needed.\n\nBut why is Singular not able to? It seems that `SINGULARPATH` is available:\n\n```\nsage: [(s,v) for s,v in os.environ.iteritems() if 'SINGULAR' in s]\n[('SINGULAR_EXECUTABLE', '/home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin/Singular'), ('SINGULARPATH', '/home/simonking/SAGE/sage-4.7.1.rc1mark/local/share/singular')]\n```",
    "created_at": "2011-08-04T08:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119964",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

Oleksander and Hannes from the Singular team replied. Apparently, there should be tables in the folder `SAGE_ROOT/local/share/singular/gftables` (or perhaps in `SAGE_ROOT/local/LIB/gftables`).

In my Sage installation on mark, there is a gftables directory, but it only contains a table for the field of size 10201.

I am not sure whether the tables should already be created when Singular is built, or only when a field of a particular size is first created (I asked the Singular team a few minues ago).

According to the Singular manual, Singular allows all field sizes below `2^16`. Looking at the gftables directory of my installation on my linux computer, clearly there are less tables than field sizes. So, I guess that the tables are only created when needed.

But why is Singular not able to? It seems that `SINGULARPATH` is available:

```
sage: [(s,v) for s,v in os.environ.iteritems() if 'SINGULAR' in s]
[('SINGULAR_EXECUTABLE', '/home/simonking/SAGE/sage-4.7.1.rc1mark/local/bin/Singular'), ('SINGULARPATH', '/home/simonking/SAGE/sage-4.7.1.rc1mark/local/share/singular')]
```



---

archive/issue_comments_119965.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@simon-king-jena](#comment:1):\n> According to the Singular manual, Singular allows all field sizes below `2^16`. Looking at the gftables directory of my installation on my linux computer, clearly there are less tables than field sizes. So, I guess that the tables are only created when needed.\n\nI was wrong: The gftables file contains files for *all* prime powers greater than 1 and smaller than `2^16` that are not prime. So, that looks as if it was made at compilation time.",
    "created_at": "2011-08-04T09:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119965",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@simon-king-jena](#comment:1):
> According to the Singular manual, Singular allows all field sizes below `2^16`. Looking at the gftables directory of my installation on my linux computer, clearly there are less tables than field sizes. So, I guess that the tables are only created when needed.

I was wrong: The gftables file contains files for *all* prime powers greater than 1 and smaller than `2^16` that are not prime. So, that looks as if it was made at compilation time.



---

archive/issue_comments_119966.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe following indicates that the problem is on Sage's end:\n\n```\nsage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/home/simonking/SAGE/sage-4.7.1.rc1mark/<ipython console> in <module>()\n\n/home/simonking/SAGE/sage-4.7.1.rc1mark/local/lib/python2.6/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)\n    548\n    549         if s.find(\"error\") != -1 or s.find(\"Segment fault\") != -1:\n--> 550             raise RuntimeError, 'Singular error:\\n%s'%s\n    551\n    552         if get_verbose() > 0:\n\nRuntimeError: Singular error:\n   ? cannot open `gftables/9`\n   ? cannot make ring\n   ? error occurred in or before STDIN line 39: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`\n   ? expected ring-expression. type 'help ring;'\nsage: R.<a,b,c,d,e,f> = GF(9,'x')[]\nsage: singular(R)\n//   characteristic : 3\n//   1 parameter    : x\n//   minpoly        : (x^2-x-1)\n//   number of vars : 6\n//        block   1 : ordering dp\n//                  : names    a b c d e f\n//        block   2 : ordering C\nsage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')\n'ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);'\n```\n\nIn other words: If one constructs a polynomial ring over a finite non-prime field and converts it into Singular, then the missing file in the gftables-folder is created!\n\nIn other words: If nothing else helps then one could construct *while Sage is built* a polynomial ring over any finite non-prime field of size less than `2^16` and convert it into Singular. In that way, all gftables would be created.\n\nThat still does not explain why the field tables are not created (or copied?) in the first place, but it could be a work around.",
    "created_at": "2011-08-06T09:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119966",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

The following indicates that the problem is on Sage's end:

```
sage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/home/simonking/SAGE/sage-4.7.1.rc1mark/<ipython console> in <module>()

/home/simonking/SAGE/sage-4.7.1.rc1mark/local/lib/python2.6/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)
    548
    549         if s.find("error") != -1 or s.find("Segment fault") != -1:
--> 550             raise RuntimeError, 'Singular error:\n%s'%s
    551
    552         if get_verbose() > 0:

RuntimeError: Singular error:
   ? cannot open `gftables/9`
   ? cannot make ring
   ? error occurred in or before STDIN line 39: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`
   ? expected ring-expression. type 'help ring;'
sage: R.<a,b,c,d,e,f> = GF(9,'x')[]
sage: singular(R)
//   characteristic : 3
//   1 parameter    : x
//   minpoly        : (x^2-x-1)
//   number of vars : 6
//        block   1 : ordering dp
//                  : names    a b c d e f
//        block   2 : ordering C
sage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')
'ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);'
```

In other words: If one constructs a polynomial ring over a finite non-prime field and converts it into Singular, then the missing file in the gftables-folder is created!

In other words: If nothing else helps then one could construct *while Sage is built* a polynomial ring over any finite non-prime field of size less than `2^16` and convert it into Singular. In that way, all gftables would be created.

That still does not explain why the field tables are not created (or copied?) in the first place, but it could be a work around.



---

archive/issue_comments_119967.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi Martin,\n\nperhaps you know about missing \"gftables\" in Singular.\n\nFor working with finite non-prime fields, Singular needs certain files in a folder gftables. However, these files are missing when Sage is built on Solaris.\n\nProblem: When Singular tries to create a polynomial ring over a finite field and the table for that field is missing, then it raises an error, but it does *not* simply compute that table -- at least not on Solaris.\n\nHowever, when one has a polynomial ring over the same finite field in Sage (using libsingular) and converts it into Singular then the field table magically appears.\n\nQuestions to Martin: Did you do anything special in the Singular conversion method of libsingular polynomial rings? That's to say, do you catch errors mentioning gftables? Is there a command to create a gftable?",
    "created_at": "2011-08-06T09:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119967",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi Martin,

perhaps you know about missing "gftables" in Singular.

For working with finite non-prime fields, Singular needs certain files in a folder gftables. However, these files are missing when Sage is built on Solaris.

Problem: When Singular tries to create a polynomial ring over a finite field and the table for that field is missing, then it raises an error, but it does *not* simply compute that table -- at least not on Solaris.

However, when one has a polynomial ring over the same finite field in Sage (using libsingular) and converts it into Singular then the field table magically appears.

Questions to Martin: Did you do anything special in the Singular conversion method of libsingular polynomial rings? That's to say, do you catch errors mentioning gftables? Is there a command to create a gftable?



---

archive/issue_comments_119968.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nActually, it is even better: The missing table is not only created when a libsingular ring is converted into Singular, but already when that ring is *created*. Proof:\n\nI emptied the gftables folder and started Sage. Then:\n\n```\nsage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n...\nRuntimeError: Singular error:\n   ? cannot open `gftables/9`\n   ? cannot make ring\n   ? error occurred in or before STDIN line 25: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`\n```\nHence, Singular does not create the table by itself.\n\nHowever, creating a ring in libsingular means that the table shows up and can be used:\n\n```\nsage: R.<a,b,c,d,e,f> = GF(9,'x')[]\nsage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')\n'ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);'\n```\n\nSo, question to Martin: How does libsingular make sure that a field table is present?",
    "created_at": "2011-08-06T09:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119968",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

Actually, it is even better: The missing table is not only created when a libsingular ring is converted into Singular, but already when that ring is *created*. Proof:

I emptied the gftables folder and started Sage. Then:

```
sage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
...
RuntimeError: Singular error:
   ? cannot open `gftables/9`
   ? cannot make ring
   ? error occurred in or before STDIN line 25: `ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);`
```
Hence, Singular does not create the table by itself.

However, creating a ring in libsingular means that the table shows up and can be used:

```
sage: R.<a,b,c,d,e,f> = GF(9,'x')[]
sage: singular.eval('ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp)')
'ring r1 = (9,x),(a,b,c,d,e,f),(M((1,2,3,0)),wp(2,3),lp);'
```

So, question to Martin: How does libsingular make sure that a field table is present?



---

archive/issue_comments_119969.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Little or no feedback.** to **None of the above - read trac for reasoning.**",
    "created_at": "2011-08-06T12:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119969",
    "user": "https://github.com/simon-king-jena"
}
```

Changed upstream from **Reported upstream. Little or no feedback.** to **None of the above - read trac for reasoning.**



---

archive/issue_comments_119970.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNow I am really puzzled. On Singular trac, Hannes stated: \"No, gftables are parts of the sources and will be copied during installation, but usually not computed (the program for that, a part of factory, will not be build during a standard compilation and installation).\"\n\nThat gives rise to two questions:\n\n1. Why are the tables not copied to the appropriate directory on Solaris?\n\n2. How can libsingular create the missing tables?\n\nAny clue?\n\nI am also modifying the \"reported upstream\" part of the ticket. I think that meanwhile it is clear that the problem is not an upstream problem.",
    "created_at": "2011-08-06T12:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119970",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">comment:6</div>

Now I am really puzzled. On Singular trac, Hannes stated: "No, gftables are parts of the sources and will be copied during installation, but usually not computed (the program for that, a part of factory, will not be build during a standard compilation and installation)."

That gives rise to two questions:

1. Why are the tables not copied to the appropriate directory on Solaris?

2. How can libsingular create the missing tables?

Any clue?

I am also modifying the "reported upstream" part of the ticket. I think that meanwhile it is clear that the problem is not an upstream problem.



---

archive/issue_comments_119971.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFrom the singular installation log on mark2:\n\n```\n./mkinstalldirs /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables\nmkdir /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables\n./install-sh -c -m 644 `pwd`/LIB/gftables/* /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables/\nmake[3]: Leaving directory `/home/palmieri/mark2/sage-4.7.1.rc1/spkg/build/singular-3-1-1-4.p9/src/Singular'\n```\nI wonder if the script `install-sh` is the problem.",
    "created_at": "2011-08-06T15:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119971",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

From the singular installation log on mark2:

```
./mkinstalldirs /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables
mkdir /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables
./install-sh -c -m 644 `pwd`/LIB/gftables/* /home/palmieri/mark2/sage-4.7.1.rc1/local/share/singular/gftables/
make[3]: Leaving directory `/home/palmieri/mark2/sage-4.7.1.rc1/spkg/build/singular-3-1-1-4.p9/src/Singular'
```
I wonder if the script `install-sh` is the problem.



---

archive/issue_comments_119972.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOff-list ;-) comment:\n\n```sh\n\n$ find /home/leif/Sage/spkgs/singular-3-1-1-4.p9/ -name gftables -print -exec ls {} \\;\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/Singular/LIB/gftables\n10201  125    16     1849   2209   25\t  289\t 32768\t38809  4913   529    625    7921  961\n1024   12769  16129  18769  22201  256\t  29791  343\t39601  49729  5329   63001  8\n10609  128    16384  19321  22801  26569  29929  3481\t4      5041   54289  64     81\n11449  1331   16807  19683  2401   27\t  3125\t 361\t4096   50653  57121  6561   8192\n11881  1369   1681   2048   243    27889  32\t 36481\t44521  512    58081  6859   841\n121    14641  169    2187   24389  2809   32041  3721\t4489   51529  59049  6889   9\n12167  15625  17161  2197   24649  28561  32761  37249\t49     52441  6241   729    9409\n```\nI.e., they're all (precomputed) in our upstream tree, and should get copied by some BSD `install` program, cf. my reply on sage-release.\n\nUsually autotools-enabled packages ship with some default / fallback `install` shell script in case the system lacks one, and so does Singular:\n\n```sh\n$ find /home/leif/Sage/spkgs/singular-3-1-1-4.p9/ -name install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/libfac/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/Singular/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/kernel/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/factory/bin/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/omalloc/install-sh\n/home/leif/Sage/spkgs/singular-3-1-1-4.p9/install-sh\n```\n\n`spkg/logs/singular-*.log` should show which `install` actually got used:\n\n```\nchecking for a BSD compatible install... /usr/bin/install -c\n```\n(on my Linux box)\n\nSo maybe the one found on Solaris / mark etc. is broken, but `configure` doesn't notice that. It might just install the *first* file passed to it, which would explain why just `10201` (the first in *lexicographical* order) is present there, as the relevant command used by Singular is\n\n```sh\n/usr/bin/install -c -m 644 `pwd`/LIB/gftables/* <SAGE_ROOT>/local/share/singular/gftables/\n```\n(Notice the wildcard, which is expanded by the shell.)\n\nFurthermore, `gftables/*` is the only such instance; all other files are installed by something like\n\n```sh\nfor f in whatever/*; do\n    install -c [...] $f\ndone\n```\nso IMHO this **is** an upstream problem, since they should either use the latter for `gftables/*` as well, or make sure the `install` program they use supports multiple files at once.",
    "created_at": "2011-08-06T15:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119972",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

Off-list ;-) comment:

```sh

$ find /home/leif/Sage/spkgs/singular-3-1-1-4.p9/ -name gftables -print -exec ls {} \;
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/Singular/LIB/gftables
10201  125    16     1849   2209   25	  289	 32768	38809  4913   529    625    7921  961
1024   12769  16129  18769  22201  256	  29791  343	39601  49729  5329   63001  8
10609  128    16384  19321  22801  26569  29929  3481	4      5041   54289  64     81
11449  1331   16807  19683  2401   27	  3125	 361	4096   50653  57121  6561   8192
11881  1369   1681   2048   243    27889  32	 36481	44521  512    58081  6859   841
121    14641  169    2187   24389  2809   32041  3721	4489   51529  59049  6889   9
12167  15625  17161  2197   24649  28561  32761  37249	49     52441  6241   729    9409
```
I.e., they're all (precomputed) in our upstream tree, and should get copied by some BSD `install` program, cf. my reply on sage-release.

Usually autotools-enabled packages ship with some default / fallback `install` shell script in case the system lacks one, and so does Singular:

```sh
$ find /home/leif/Sage/spkgs/singular-3-1-1-4.p9/ -name install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/libfac/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/Singular/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/kernel/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/factory/bin/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/src/omalloc/install-sh
/home/leif/Sage/spkgs/singular-3-1-1-4.p9/install-sh
```

`spkg/logs/singular-*.log` should show which `install` actually got used:

```
checking for a BSD compatible install... /usr/bin/install -c
```
(on my Linux box)

So maybe the one found on Solaris / mark etc. is broken, but `configure` doesn't notice that. It might just install the *first* file passed to it, which would explain why just `10201` (the first in *lexicographical* order) is present there, as the relevant command used by Singular is

```sh
/usr/bin/install -c -m 644 `pwd`/LIB/gftables/* <SAGE_ROOT>/local/share/singular/gftables/
```
(Notice the wildcard, which is expanded by the shell.)

Furthermore, `gftables/*` is the only such instance; all other files are installed by something like

```sh
for f in whatever/*; do
    install -c [...] $f
done
```
so IMHO this **is** an upstream problem, since they should either use the latter for `gftables/*` as well, or make sure the `install` program they use supports multiple files at once.



---

archive/issue_comments_119973.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jhpalmieri](#comment:7):\n> From the singular installation log on mark2:\n\n\n```\n./install-sh -c -m 644 `pwd`/LIB/gftables/* /home/palmieri/mark2/...\n```\n> I wonder if the script `install-sh` is the problem.\n\nHaha, **their \"own\"**! XD",
    "created_at": "2011-08-06T15:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119973",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jhpalmieri](#comment:7):
> From the singular installation log on mark2:


```
./install-sh -c -m 644 `pwd`/LIB/gftables/* /home/palmieri/mark2/...
```
> I wonder if the script `install-sh` is the problem.

Haha, **their "own"**! XD



---

archive/issue_comments_119974.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFor the record, I've re-reported this upstream (the installation bug).",
    "created_at": "2011-08-06T16:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119974",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

For the record, I've re-reported this upstream (the installation bug).



---

archive/issue_comments_119975.json:
```json
{
    "body": "Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. Little or no feedback.**",
    "created_at": "2011-08-06T16:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119975",
    "user": "https://github.com/nexttime"
}
```

Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. Little or no feedback.**



---

archive/issue_comments_119976.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nexttime](#comment:10):\n> For the record, I've re-reported this upstream (the installation bug).\n\n... actually together with a patch!\n\nIf  Singular accepts the patch, then it will (hopefully) be part of the next Singular release. When? Singular releases take place usually every 6 months. The last was in April. So, it will hopefully be in October.\n\nThen, the upstream fix will be included in Sage. When? Currently, Sage has Singular-3-1-1, which was released in March, 2010. So, the upstream fix will be in Sage, optimistically, in early 2012.\n\nHence, I'd appreciate if we could find a temporary solution in Sage. Two approaches:\n\n1. Since libsingular is able to create the missing files, we could append a section to the Sage install script that creates a libsingular ring over any finite non-prime field of order less than `2^16`.\n\n2. We could patch the current Singular spkg.\n\nProbably, the second solution is better.",
    "created_at": "2011-08-06T17:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119976",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nexttime](#comment:10):
> For the record, I've re-reported this upstream (the installation bug).

... actually together with a patch!

If  Singular accepts the patch, then it will (hopefully) be part of the next Singular release. When? Singular releases take place usually every 6 months. The last was in April. So, it will hopefully be in October.

Then, the upstream fix will be included in Sage. When? Currently, Sage has Singular-3-1-1, which was released in March, 2010. So, the upstream fix will be in Sage, optimistically, in early 2012.

Hence, I'd appreciate if we could find a temporary solution in Sage. Two approaches:

1. Since libsingular is able to create the missing files, we could append a section to the Sage install script that creates a libsingular ring over any finite non-prime field of order less than `2^16`.

2. We could patch the current Singular spkg.

Probably, the second solution is better.



---

archive/issue_comments_119977.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@simon-king-jena](#comment:11):\n> Replying to [@nexttime](#comment:10):\n> > For the record, I've re-reported this upstream (the installation bug).\n\n> \n> ... actually together with a patch!\n\nYes, but had problems adding a further comment on it; looked as if they blocked me... :D (different browsers from the same machine)\n\n> If  Singular accepts the patch, then it will (hopefully) be part of the next Singular release. When? Singular releases take place usually every 6 months. The last was in April. So, it will hopefully be in October.\n> \n> Then, the upstream fix will be included in Sage. When? Currently, Sage has Singular-3-1-1, which was released in March, 2010. So, the upstream fix will be in Sage, optimistically, in early 2012.\n\nHaven't yet looked for other (Sage) Singular tickets, so we might already have some dealing with our current version, or even one which upgrades to a newer upstream release.\n\n> 2. We could patch the current Singular spkg.\n\nIn any case, we can of course apply the same patch in the next Singular spkg.",
    "created_at": "2011-08-06T17:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119977",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@simon-king-jena](#comment:11):
> Replying to [@nexttime](#comment:10):
> > For the record, I've re-reported this upstream (the installation bug).

> 
> ... actually together with a patch!

Yes, but had problems adding a further comment on it; looked as if they blocked me... :D (different browsers from the same machine)

> If  Singular accepts the patch, then it will (hopefully) be part of the next Singular release. When? Singular releases take place usually every 6 months. The last was in April. So, it will hopefully be in October.
> 
> Then, the upstream fix will be included in Sage. When? Currently, Sage has Singular-3-1-1, which was released in March, 2010. So, the upstream fix will be in Sage, optimistically, in early 2012.

Haven't yet looked for other (Sage) Singular tickets, so we might already have some dealing with our current version, or even one which upgrades to a newer upstream release.

> 2. We could patch the current Singular spkg.

In any case, we can of course apply the same patch in the next Singular spkg.



---

archive/issue_events_156065.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-06T17:18:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "c: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156065"
}
```



---

archive/issue_events_156066.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-06T17:18:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156066"
}
```



---

archive/issue_events_156067.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-08-06T17:18:48Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "subject": "https://github.com/nexttime",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156067"
}
```



---

archive/issue_comments_119978.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Little or no feedback.** to **Completely fixed; Fix reported upstream**",
    "created_at": "2011-08-06T17:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119978",
    "user": "https://github.com/nexttime"
}
```

Changed upstream from **Reported upstream. Little or no feedback.** to **Completely fixed; Fix reported upstream**



---

archive/issue_events_156068.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-06T19:45:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156068"
}
```



---

archive/issue_comments_119979.json:
```json
{
    "body": "Changed keywords from **Singular solaris gftables** to **Singular solaris gftables install.sh 10201**",
    "created_at": "2011-08-06T19:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119979",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **Singular solaris gftables** to **Singular solaris gftables install.sh 10201**



---

archive/issue_comments_119980.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nexttime](#comment:12):\n> Haven't yet looked for other (Sage) Singular tickets, so we might already have some dealing with our current version, or even one which upgrades to a newer upstream release.\n\nSo far I've found #10903 (new, for upgrading Singular) and a 3-1-1-4.p10 spkg (#11550), already merged into the inofficial / not yet announced Sage 4.7.2.alpha0 (among about a dozen other open tickets related to Singular).\n\n> > 2. We could patch the current Singular spkg.\n\n> \n> In any case, we can of course apply the same patch in the next Singular spkg.\n\nSo I could provide a p11 fixing this based on that p10.\n\nI don't know if you plan to make further changes (to the Sage library I guess) on this ticket; if so, I can open a new ticket for the spkg. Just let me know.\n\nP.S.: What's up with the apparently missing `help.cnf`? (Cf. #11519)",
    "created_at": "2011-08-06T19:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119980",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nexttime](#comment:12):
> Haven't yet looked for other (Sage) Singular tickets, so we might already have some dealing with our current version, or even one which upgrades to a newer upstream release.

So far I've found #10903 (new, for upgrading Singular) and a 3-1-1-4.p10 spkg (#11550), already merged into the inofficial / not yet announced Sage 4.7.2.alpha0 (among about a dozen other open tickets related to Singular).

> > 2. We could patch the current Singular spkg.

> 
> In any case, we can of course apply the same patch in the next Singular spkg.

So I could provide a p11 fixing this based on that p10.

I don't know if you plan to make further changes (to the Sage library I guess) on this ticket; if so, I can open a new ticket for the spkg. Just let me know.

P.S.: What's up with the apparently missing `help.cnf`? (Cf. #11519)



---

archive/issue_comments_119981.json:
```json
{
    "body": "Changed upstream from **Completely fixed; Fix reported upstream** to **Fixed upstream, in a later stable release.**",
    "created_at": "2011-08-08T10:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119981",
    "user": "https://github.com/nexttime"
}
```

Changed upstream from **Completely fixed; Fix reported upstream** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_119982.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHannes confirmed it's a Singular bug, \"fixed in revision 14360\".\n\nI don't know which Singular version this revision corresponds to though.",
    "created_at": "2011-08-08T10:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119982",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

Hannes confirmed it's a Singular bug, "fixed in revision 14360".

I don't know which Singular version this revision corresponds to though.



---

archive/issue_comments_119983.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nexttime](#comment:14):\n> Hannes confirmed it's a Singular bug, \"fixed in revision 14360\".\n> \n> I don't know which Singular version this revision corresponds to though.\n\nIt probably doesn't matter which: The version in Sage is strongly outdated. Singular 3-1-3 is out since April, but Sage is still using one year old Singular 3-1-1.\n\nAnyway. My guess is that the fix will be part of Singular-3-1-4. In any case, we probably ought to take care of it NOW.",
    "created_at": "2011-08-08T13:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119983",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nexttime](#comment:14):
> Hannes confirmed it's a Singular bug, "fixed in revision 14360".
> 
> I don't know which Singular version this revision corresponds to though.

It probably doesn't matter which: The version in Sage is strongly outdated. Singular 3-1-3 is out since April, but Sage is still using one year old Singular 3-1-1.

Anyway. My guess is that the fix will be part of Singular-3-1-4. In any case, we probably ought to take care of it NOW.



---

archive/issue_comments_119984.json:
```json
{
    "body": "Plain patch to copy into Singular's spkg (`patches/`) and apply from within `spkg-install`.",
    "created_at": "2011-08-09T12:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119984",
    "user": "https://github.com/nexttime"
}
```

Plain patch to copy into Singular's spkg (`patches/`) and apply from within `spkg-install`.



---

archive/issue_comments_119985.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttachment: **[trac_11645-install_gftables_one_by_one.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-install_gftables_one_by_one.patch.gz)**\n\nI've just attached a copy of the patch I submitted upstream.\n\nNote that we already patch `src/Singular/Makefile.in` (with `patches/Singular-Makefile.in.patch`), so the two patches should be merged into one.\n\n(We currently copy a patched file anyway.)",
    "created_at": "2011-08-09T12:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119985",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Attachment: **[trac_11645-install_gftables_one_by_one.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-install_gftables_one_by_one.patch.gz)**

I've just attached a copy of the patch I submitted upstream.

Note that we already patch `src/Singular/Makefile.in` (with `patches/Singular-Makefile.in.patch`), so the two patches should be merged into one.

(We currently copy a patched file anyway.)



---

archive/issue_comments_119986.json:
```json
{
    "body": "Replaces `patches/Singular-Makefile.in` in the Singular spkg. (Cumulatively patched `src/Singular/Makefile.in`.)",
    "created_at": "2011-08-09T13:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119986",
    "user": "https://github.com/nexttime"
}
```

Replaces `patches/Singular-Makefile.in` in the Singular spkg. (Cumulatively patched `src/Singular/Makefile.in`.)



---

archive/issue_comments_119987.json:
```json
{
    "body": "Attachment: **[trac_11645-singular_spkg__patches__Singular-Makefile.in](https://github.com/sagemath/sage/files/ticket11645/trac_11645-singular_spkg__patches__Singular-Makefile.in)**\n\nAttachment: **[trac_11645-singular_spkg__patches__Singular-Makefile.in.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-singular_spkg__patches__Singular-Makefile.in.patch.gz)**\n\nReplaces `patches/Singular-Makefile.in.patch` in the Singular spkg. (Cumulative patch to `src/Singular/Makefile.in`.)",
    "created_at": "2011-08-09T13:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119987",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_11645-singular_spkg__patches__Singular-Makefile.in](https://github.com/sagemath/sage/files/ticket11645/trac_11645-singular_spkg__patches__Singular-Makefile.in)**

Attachment: **[trac_11645-singular_spkg__patches__Singular-Makefile.in.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-singular_spkg__patches__Singular-Makefile.in.patch.gz)**

Replaces `patches/Singular-Makefile.in.patch` in the Singular spkg. (Cumulative patch to `src/Singular/Makefile.in`.)



---

archive/issue_comments_119988.json:
```json
{
    "body": "Diff between Jeroen's p11 Singular spkg from #11663 and what we would get here (with the two files replaced). For reference / review. There's no Changelog entry yet.",
    "created_at": "2011-08-09T14:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119988",
    "user": "https://github.com/nexttime"
}
```

Diff between Jeroen's p11 Singular spkg from #11663 and what we would get here (with the two files replaced). For reference / review. There's no Changelog entry yet.



---

archive/issue_comments_119989.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[singular-3-1-1-4.p11-pNN.diff.gz](https://github.com/sagemath/sage/files/ticket11645/singular-3-1-1-4.p11-pNN.diff.gz)**\n\nJust wondering: is there *any* reason for\n\n```\nfor file in `pwd`/LIB/gftables/*; do\n```\ninstead of simply\n\n```\nfor file in LIB/gftables/*; do\n```",
    "created_at": "2011-08-09T16:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119989",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[singular-3-1-1-4.p11-pNN.diff.gz](https://github.com/sagemath/sage/files/ticket11645/singular-3-1-1-4.p11-pNN.diff.gz)**

Just wondering: is there *any* reason for

```
for file in `pwd`/LIB/gftables/*; do
```
instead of simply

```
for file in LIB/gftables/*; do
```



---

archive/issue_comments_119990.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,6 +38,6 @@\n >\n ```\n \n-That example works fine on most platforms; according to Jeroen and the build bot, t2, mark and mark2 are the only exceptions.\n+That example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.\n \n-I guess it is good to have a Sage ticket for the problem as well, that's why I open it here.\n+Fixed in the spkg from #11663.\n``````\n",
    "created_at": "2011-08-09T17:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119990",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,6 +38,6 @@
 >
 ```
 
-That example works fine on most platforms; according to Jeroen and the build bot, t2, mark and mark2 are the only exceptions.
+That example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.
 
-I guess it is good to have a Sage ticket for the problem as well, that's why I open it here.
+Fixed in the spkg from #11663.
``````




---

archive/issue_events_156069.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:10:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156069"
}
```



---

archive/issue_events_156070.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:10:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156070"
}
```



---

archive/issue_events_156071.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:10:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156071"
}
```



---

archive/issue_events_156072.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:10:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156072"
}
```



---

archive/issue_events_156073.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:10:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156073"
}
```



---

archive/issue_comments_119991.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis will be folded into #11663.",
    "created_at": "2011-08-09T17:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119991",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

This will be folded into #11663.



---

archive/issue_comments_119992.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,4 +40,4 @@\n \n That example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.\n \n-Fixed in the spkg from #11663.\n+New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg)\n``````\n",
    "created_at": "2011-08-09T17:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119992",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,4 +40,4 @@
 
 That example works fine on most platforms; according to the buildbot, t2, mark and mark2 are the only exceptions.
 
-Fixed in the spkg from #11663.
+New spkg: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg)
``````




---

archive/issue_events_156074.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:15:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156074"
}
```



---

archive/issue_events_156075.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:15:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156075"
}
```



---

archive/issue_comments_119993.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNew spkg based on the one for #11663: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg), needs review.",
    "created_at": "2011-08-09T17:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119993",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

New spkg based on the one for #11663: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg), needs review.



---

archive/issue_events_156076.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-09T17:20:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156076"
}
```



---

archive/issue_comments_119994.json:
```json
{
    "body": "Attachment: **[singular-3-1-1-4.p11-p12.diff.gz](https://github.com/sagemath/sage/files/ticket11645/singular-3-1-1-4.p11-p12.diff.gz)**\n\nDiff for the Singular spkg, for reviewers",
    "created_at": "2011-08-09T17:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119994",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[singular-3-1-1-4.p11-p12.diff.gz](https://github.com/sagemath/sage/files/ticket11645/singular-3-1-1-4.p11-p12.diff.gz)**

Diff for the Singular spkg, for reviewers



---

archive/issue_comments_119995.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment:17):\n> Just wondering: is there *any* reason for\n\n\n```\nfor file in `pwd`/LIB/gftables/*; do\n```\n> instead of simply\n\n\n```\nfor file in LIB/gftables/*; do\n```\n\nNo, that's just upstream style I didn't change because I submitted the (same) patch there in the first place. ;-)\n\nSeriously, the first one is safer since `pwd` yields an *absolute* path.",
    "created_at": "2011-08-09T18:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119995",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment:17):
> Just wondering: is there *any* reason for


```
for file in `pwd`/LIB/gftables/*; do
```
> instead of simply


```
for file in LIB/gftables/*; do
```

No, that's just upstream style I didn't change because I submitted the (same) patch there in the first place. ;-)

Seriously, the first one is safer since `pwd` yields an *absolute* path.



---

archive/issue_comments_119996.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment:20):\n> New spkg based on the one for #11663: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg), needs review.\n\nI don't know why you didn't just take the replacement files I attached, but for the record: It's not an upstream patch, but a patch I submitted upstream, i.e. I'm the author. ;-)\n\nIf you merge this (and #11663) into Sage 4.7.1, I think we should also fix the trivial missing `help.cnf` which we have to also \"manually\" copy with `cp -p` in `spkg-install`'s `install_docs()`; just add\n\n```sh\n    cp -p \"$SRC/Singular/LIB/help.cnf\" \"$SAGE_LOCAL/share/singular/\"\n    if [ $? -ne 0 ]; then\n        echo \"Error copying help configuration file\"\n        exit 1\n    fi\n```\nthere, or changed it by\n\n```patch\ndiff -r 7f9b12abe20d spkg-install\n--- a/spkg-install\tTue Aug 09 09:40:38 2011 +0200\n+++ b/spkg-install\tTue Aug 09 20:19:11 2011 +0200\n@@ -356,7 +356,8 @@\n \n install_docs()\n {\n-    cp -p \"$SHARED/singular.hlp\" \"$SHARED/singular.idx\" \"$SAGE_LOCAL/share/singular/\"\n+    cp -p \"$SHARED/singular.hlp\" \"$SHARED/singular.idx\" \"$SRC/Singular/LIB/help.cnf\" \\\n+          \"$SAGE_LOCAL/share/singular/\"\n     if [ $? -ne 0 ]; then\n         echo \"Error installing documentation\"\n         exit 1\n```\nwhich fixes #11519 and (part of) #5994.",
    "created_at": "2011-08-09T18:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119996",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment:20):
> New spkg based on the one for #11663: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg), needs review.

I don't know why you didn't just take the replacement files I attached, but for the record: It's not an upstream patch, but a patch I submitted upstream, i.e. I'm the author. ;-)

If you merge this (and #11663) into Sage 4.7.1, I think we should also fix the trivial missing `help.cnf` which we have to also "manually" copy with `cp -p` in `spkg-install`'s `install_docs()`; just add

```sh
    cp -p "$SRC/Singular/LIB/help.cnf" "$SAGE_LOCAL/share/singular/"
    if [ $? -ne 0 ]; then
        echo "Error copying help configuration file"
        exit 1
    fi
```
there, or changed it by

```patch
diff -r 7f9b12abe20d spkg-install
--- a/spkg-install	Tue Aug 09 09:40:38 2011 +0200
+++ b/spkg-install	Tue Aug 09 20:19:11 2011 +0200
@@ -356,7 +356,8 @@
 
 install_docs()
 {
-    cp -p "$SHARED/singular.hlp" "$SHARED/singular.idx" "$SAGE_LOCAL/share/singular/"
+    cp -p "$SHARED/singular.hlp" "$SHARED/singular.idx" "$SRC/Singular/LIB/help.cnf" \
+          "$SAGE_LOCAL/share/singular/"
     if [ $? -ne 0 ]; then
         echo "Error installing documentation"
         exit 1
```
which fixes #11519 and (part of) #5994.



---

archive/issue_comments_119997.json:
```json
{
    "body": "Patch to Singular's `spkg-install` installing the otherwise missing `help.cnf`. (This actually fixes #11519, and partially #5994.)",
    "created_at": "2011-08-09T18:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119997",
    "user": "https://github.com/nexttime"
}
```

Patch to Singular's `spkg-install` installing the otherwise missing `help.cnf`. (This actually fixes #11519, and partially #5994.)



---

archive/issue_comments_119998.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAttachment: **[trac_11645-fix_missing_help.cnf_file.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-fix_missing_help.cnf_file.patch.gz)**\n\nReplying to [@nexttime](#comment:22):\n> ... or change it by\n\n\n```patch\ndiff -r 7f9b12abe20d spkg-install\n--- a/spkg-install\tTue Aug 09 09:40:38 2011 +0200\n+++ b/spkg-install\tTue Aug 09 20:19:11 2011 +0200\n@@ -356,7 +356,8 @@\n \n install_docs()\n {\n-    cp -p \"$SHARED/singular.hlp\" \"$SHARED/singular.idx\" \"$SAGE_LOCAL/share/singular/\"\n+    cp -p \"$SHARED/singular.hlp\" \"$SHARED/singular.idx\" \"$SRC/Singular/LIB/help.cnf\" \\\n+          \"$SAGE_LOCAL/share/singular/\"\n     if [ $? -ne 0 ]; then\n         echo \"Error installing documentation\"\n         exit 1\n```\n> which fixes #11519 and (part of) #5994.\n\nFor convenience, since we still don't get trac notifications, I've now also attached a patch for that *here*: [attachment: trac_11645-fix_missing_help.cnf_file.patch](https://github.com/sagemath/sage/files/ticket11645/trac_11645-fix_missing_help.cnf_file.patch.gz)",
    "created_at": "2011-08-09T18:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119998",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Attachment: **[trac_11645-fix_missing_help.cnf_file.patch.gz](https://github.com/sagemath/sage/files/ticket11645/trac_11645-fix_missing_help.cnf_file.patch.gz)**

Replying to [@nexttime](#comment:22):
> ... or change it by


```patch
diff -r 7f9b12abe20d spkg-install
--- a/spkg-install	Tue Aug 09 09:40:38 2011 +0200
+++ b/spkg-install	Tue Aug 09 20:19:11 2011 +0200
@@ -356,7 +356,8 @@
 
 install_docs()
 {
-    cp -p "$SHARED/singular.hlp" "$SHARED/singular.idx" "$SAGE_LOCAL/share/singular/"
+    cp -p "$SHARED/singular.hlp" "$SHARED/singular.idx" "$SRC/Singular/LIB/help.cnf" \
+          "$SAGE_LOCAL/share/singular/"
     if [ $? -ne 0 ]; then
         echo "Error installing documentation"
         exit 1
```
> which fixes #11519 and (part of) #5994.

For convenience, since we still don't get trac notifications, I've now also attached a patch for that *here*: [attachment: trac_11645-fix_missing_help.cnf_file.patch](https://github.com/sagemath/sage/files/ticket11645/trac_11645-fix_missing_help.cnf_file.patch.gz)



---

archive/issue_comments_119999.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIt would be really kind to make the help.cnf thing a different ticket. I simply don't have the time to keep rebasing to this ticket with #11550; it is not an easy process for me.",
    "created_at": "2011-08-09T19:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-119999",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

It would be really kind to make the help.cnf thing a different ticket. I simply don't have the time to keep rebasing to this ticket with #11550; it is not an easy process for me.



---

archive/issue_comments_120000.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@kcrisman](#comment:24):\n> It would be really kind to make the help.cnf thing a different ticket. I simply don't have the time to keep rebasing to this ticket with #11550; it is not an easy process for me.\n\nWell, you shouldn't rebase too early. We meanwhile have enough chaos anyway, multiplied by the fact that we still don't get trac notifications.\n\nI gave #11663 positive review to be able to quickly base my new Singular spkg on yours after you had rebased that on Jeroen's. I asked multiple times where we can fix what or in which order.\n\nIt doesn't make sense to me to include (merge) one trivial patch, but not the other one. Permissions can btw. also trivially be fixed by the one who provides an installation, while it is harder to afterwards install some files located somewhere inside spkgs.",
    "created_at": "2011-08-09T19:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120000",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@kcrisman](#comment:24):
> It would be really kind to make the help.cnf thing a different ticket. I simply don't have the time to keep rebasing to this ticket with #11550; it is not an easy process for me.

Well, you shouldn't rebase too early. We meanwhile have enough chaos anyway, multiplied by the fact that we still don't get trac notifications.

I gave #11663 positive review to be able to quickly base my new Singular spkg on yours after you had rebased that on Jeroen's. I asked multiple times where we can fix what or in which order.

It doesn't make sense to me to include (merge) one trivial patch, but not the other one. Permissions can btw. also trivially be fixed by the one who provides an installation, while it is harder to afterwards install some files located somewhere inside spkgs.



---

archive/issue_comments_120001.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@kcrisman](#comment:24):\n> It would be really kind to make the help.cnf thing a different ticket.\n\nI totally agree.  We cannot just keep adding new stuff here all the time.  This ticket is about the **much more serious** issue of gftables.  You are talking about \"trivial patches\" but I think a trivial patch for a serious issue is very different from a trivial patch for a trivial issue.\n\nI do agree with leif about the rebasing: simply wait until the dust settles over this ticket (i.e. when I gets merged), then rebase.\n\nI have changed the spkg just to change the wording in `SPKG.txt` to:\n\n```\n=== singular-3-1-1-4.p12 (Leif Leonhardy, Jeroen Demeyer, 10 August 2011) ===\n * Trac #11645: Fix installation of gftables on Solaris\n   by applying a patch to Singular/Makefile.in\n```\nI also add a doctest.  Both the spkg and doctest need review.",
    "created_at": "2011-08-10T08:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120001",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@kcrisman](#comment:24):
> It would be really kind to make the help.cnf thing a different ticket.

I totally agree.  We cannot just keep adding new stuff here all the time.  This ticket is about the **much more serious** issue of gftables.  You are talking about "trivial patches" but I think a trivial patch for a serious issue is very different from a trivial patch for a trivial issue.

I do agree with leif about the rebasing: simply wait until the dust settles over this ticket (i.e. when I gets merged), then rebase.

I have changed the spkg just to change the wording in `SPKG.txt` to:

```
=== singular-3-1-1-4.p12 (Leif Leonhardy, Jeroen Demeyer, 10 August 2011) ===
 * Trac #11645: Fix installation of gftables on Solaris
   by applying a patch to Singular/Makefile.in
```
I also add a doctest.  Both the spkg and doctest need review.



---

archive/issue_comments_120002.json:
```json
{
    "body": "Doctest to be added",
    "created_at": "2011-08-10T08:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120002",
    "user": "https://github.com/jdemeyer"
}
```

Doctest to be added



---

archive/issue_comments_120003.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAttachment: **[11645_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket11645/11645_doctest.patch.gz)**\n\nQuestion: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then? Should I use trac_11645-fix_missing_help.cnf_file.patch as well?",
    "created_at": "2011-08-10T08:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120003",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:27" align="right">comment:27</div>

Attachment: **[11645_doctest.patch.gz](https://github.com/sagemath/sage/files/ticket11645/11645_doctest.patch.gz)**

Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then? Should I use trac_11645-fix_missing_help.cnf_file.patch as well?



---

archive/issue_comments_120004.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@simon-king-jena](#comment:27):\n> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then? Should I use trac_11645-fix_missing_help.cnf_file.patch as well?\n\nOr only 11645_doctest.patch after the spkg?",
    "created_at": "2011-08-10T08:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120004",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@simon-king-jena](#comment:27):
> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then? Should I use trac_11645-fix_missing_help.cnf_file.patch as well?

Or only 11645_doctest.patch after the spkg?



---

archive/issue_comments_120005.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@simon-king-jena](#comment:27):\n> Should I use trac_11645-fix_missing_help.cnf_file.patch as well?\n\nProbably not: Apparently that patch is part of the spkg, right?\n\nSo, it only is the doctest patch, isn't it?",
    "created_at": "2011-08-10T08:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120005",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@simon-king-jena](#comment:27):
> Should I use trac_11645-fix_missing_help.cnf_file.patch as well?

Probably not: Apparently that patch is part of the spkg, right?

So, it only is the doctest patch, isn't it?



---

archive/issue_comments_120006.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@simon-king-jena](#comment:27):\n> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then?\n\nI guess you should at least doctest `sage/interfaces/singular.py` including my newly added doctest.  This should prove that the `gftables` was installed.  To be sure, you can then delete (or `chmod 0000`) gftables and check that the doctest does indeed fail.\n\n> Should I use trac_11645-fix_missing_help.cnf_file.patch as well?\n\nNo.  This is a different issue.",
    "created_at": "2011-08-10T09:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120006",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@simon-king-jena](#comment:27):
> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably), best after deleting gftables (just to be on the safe side), and then?

I guess you should at least doctest `sage/interfaces/singular.py` including my newly added doctest.  This should prove that the `gftables` was installed.  To be sure, you can then delete (or `chmod 0000`) gftables and check that the doctest does indeed fail.

> Should I use trac_11645-fix_missing_help.cnf_file.patch as well?

No.  This is a different issue.



---

archive/issue_comments_120007.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@jdemeyer](#comment:26):\n> I have changed the spkg just to change the wording in `SPKG.txt`\n\nThe problem is rather unrelated to Solaris, it's just that the machines happened to have no BSD `install` installed such that one of those (broken) `install` scripts shipped with Singular got used.\n\nI'd also add to *Special Update/Build Instructions* that this is said to be fixed in later stable releases (but not necessarily the next one we'll upgrade to).\n\n(Currently the patches aren't documented well; the whole spkg needs work on some follow-up.)",
    "created_at": "2011-08-10T10:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120007",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@jdemeyer](#comment:26):
> I have changed the spkg just to change the wording in `SPKG.txt`

The problem is rather unrelated to Solaris, it's just that the machines happened to have no BSD `install` installed such that one of those (broken) `install` scripts shipped with Singular got used.

I'd also add to *Special Update/Build Instructions* that this is said to be fixed in later stable releases (but not necessarily the next one we'll upgrade to).

(Currently the patches aren't documented well; the whole spkg needs work on some follow-up.)



---

archive/issue_comments_120008.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@simon-king-jena](#comment:27):\n> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably)\n\nYou can test the spkg on any machine where `command -v install` doesn't show anything, or by simply renaming (or `chmod a-x`) the installed one, usually `/usr/bin/install`.\n\n> best after deleting gftables (just to be on the safe side)\n\nYes, of course.",
    "created_at": "2011-08-10T10:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120008",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@simon-king-jena](#comment:27):
> Question: What is needed to do in order to test? I suppose I have to install the new spkg (on Solaris, preferably)

You can test the spkg on any machine where `command -v install` doesn't show anything, or by simply renaming (or `chmod a-x`) the installed one, usually `/usr/bin/install`.

> best after deleting gftables (just to be on the safe side)

Yes, of course.



---

archive/issue_comments_120009.json:
```json
{
    "body": "Reviewer: **Simon King**",
    "created_at": "2011-08-10T10:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120009",
    "user": "https://github.com/simon-king-jena"
}
```

Reviewer: **Simon King**



---

archive/issue_comments_120010.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThis is what I did to test, on the skynet machine mark (which is solaris and which did expose the bug). And, concerning Leif's hint:\n\n```\n$ command -v install\n-bash: command: install: not found\n```\n\n1. I removed the contents of `SAGE_ROOT/local/share/singular/gftables`\n\n2. I installed [the new spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg). Now, gftables is filled with all files that are expected. So, that problem seems solved.\n\n3. I applied [attachment: 11645_doctest.patch](https://github.com/sagemath/sage/files/ticket11645/11645_doctest.patch.gz) and did `sage -br`. Then, I tried `singular.eval('ring r = (25,x),(a,b,c,d,e,f),dp')`, which worked fine and would have failed without gftables.\n\n4. `sage -t sage/interfaces/singular.py` worked fine.\n\n5. I opened the spkg, verified that the changelog is present in `SPKG.txt` and that `hg status` does not complain. It was all fine.\n\nSince the Singular code did not change (only the gftables files were copied), I think it is enough for a positive review.\n\nPlease verify whether I correctly filled the \"Author(s)\" field!\n\n__Caveat__\n\nI am currently running `sage -t sage/rings/`, which takes painfully long on mark. The tests of the first 25 files passed, but of course if some test fails in the next few hours then I'll complain.",
    "created_at": "2011-08-10T10:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120010",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">comment:33</div>

This is what I did to test, on the skynet machine mark (which is solaris and which did expose the bug). And, concerning Leif's hint:

```
$ command -v install
-bash: command: install: not found
```

1. I removed the contents of `SAGE_ROOT/local/share/singular/gftables`

2. I installed [the new spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p12.spkg). Now, gftables is filled with all files that are expected. So, that problem seems solved.

3. I applied [attachment: 11645_doctest.patch](https://github.com/sagemath/sage/files/ticket11645/11645_doctest.patch.gz) and did `sage -br`. Then, I tried `singular.eval('ring r = (25,x),(a,b,c,d,e,f),dp')`, which worked fine and would have failed without gftables.

4. `sage -t sage/interfaces/singular.py` worked fine.

5. I opened the spkg, verified that the changelog is present in `SPKG.txt` and that `hg status` does not complain. It was all fine.

Since the Singular code did not change (only the gftables files were copied), I think it is enough for a positive review.

Please verify whether I correctly filled the "Author(s)" field!

__Caveat__

I am currently running `sage -t sage/rings/`, which takes painfully long on mark. The tests of the first 25 files passed, but of course if some test fails in the next few hours then I'll complain.



---

archive/issue_events_156077.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-10T10:32:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156077"
}
```



---

archive/issue_events_156078.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-10T10:32:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156078"
}
```



---

archive/issue_comments_120011.json:
```json
{
    "body": "Author: **Leif Leonhardy, Jeroen Demeyer**",
    "created_at": "2011-08-10T10:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120011",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Leif Leonhardy, Jeroen Demeyer**



---

archive/issue_comments_120012.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFWIW, the tests in sage/rings have all worked well on mark. So, no complaint from my side, there remains the positive review.",
    "created_at": "2011-08-10T12:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120012",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">comment:34</div>

FWIW, the tests in sage/rings have all worked well on mark. So, no complaint from my side, there remains the positive review.



---

archive/issue_events_156079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T09:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156079"
}
```



---

archive/issue_events_156080.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T09:14:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11645#event-156080"
}
```



---

archive/issue_comments_120013.json:
```json
{
    "body": "Merged: **sage-4.7.1.rc2**",
    "created_at": "2011-08-11T09:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11645#issuecomment-120013",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.rc2**
