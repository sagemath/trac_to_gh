# Issue 11084: Singular 3-1-1-4.p6 fails to build with gcc 4.6.0.

archive/issues_010960.json:
```json
{
    "assignees": [],
    "body": "After trying to build Sage with gcc 4.6.0 on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.  The same issue occurs on various other systems.\n\n```\nIn file included from ../kernel/ring.h:13:0,\n                 from ../kernel/ideals.h:11,\n                 from ipshell.h:12,\n                 from tesths.cc:20:\n../kernel/polys-impl.h:177:0: warning: \"pPolyAssumeReturn\" redefined [enabled by default]\n../kernel/polys-impl.h:176:0: note: this is the location of the previous definition\nmpsr_Tok.cc: In function 'void mpsr_ttGen()':\nmpsr_Tok.cc:551:29: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]\nUndefined\t\t\tfirst referenced\n symbol  \t\t\t    in file\nuniFactorizer(CanonicalForm const&, Variable const&, bool const&) /export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/lib/libsingcf.a(facFqFactorize.o)\nld: fatal: symbol referencing errors. No output written to gentable1\ncollect2: ld returned 1 exit status\nmake[4]: *** [iparith.inc] Error 1\nUndefined\t\t\tfirst referenced\n symbol  \t\t\t    in file\nuniFactorizer(CanonicalForm const&, Variable const&, bool const&) /export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/lib/libsingcf.a(facFqFactorize.o)\nld: fatal: symbol referencing errors. No output written to gentable2\ncollect2: ld returned 1 exit status\nmake[4]: *** [mpsr_Tok.inc] Error 1\nmake[4]: Target `install' not remade because of errors.\nmake[4]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src/Singular'\nmake[3]: *** [install] Error 1\nmake[3]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src'\nmake[2]: *** [/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/bin/Singular-3-1-1] Error 2\nmake[2]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src'\nUnable to build Singular.\n\nreal\t3m22.783s\nuser\t6m14.242s\nsys\t0m22.671s\nsage: An error occurred while installing singular-3-1-1-4.p4\n```\n\nA full log is attached. \n\nA revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at \n\nNew spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)\n\nThis needs further testing on other platforms. \n\nOther problems related to gcc 4.6.0 can be found on #11216\n\nAssignee: **@sagetrac-GeorgSWeber**\n\nAuthor: **David Kirkby, Jeroen Demeyer**\n\nReviewer: **Alexander Dreyer, Jeroen Demeyer**\n\nUpstream: **None of the above - read trac for reasoning.**\n\nMerged: **sage-4.7.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11084_\n\n",
    "closed_at": "2011-04-20T19:56:44Z",
    "created_at": "2011-03-29T22:40:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Singular 3-1-1-4.p6 fails to build with gcc 4.6.0.",
    "type": "issue",
    "updated_at": "2011-04-30T21:26:25Z",
    "url": "https://github.com/sagemath/sage/issues/11084",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
After trying to build Sage with gcc 4.6.0 on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.  The same issue occurs on various other systems.

```
In file included from ../kernel/ring.h:13:0,
                 from ../kernel/ideals.h:11,
                 from ipshell.h:12,
                 from tesths.cc:20:
../kernel/polys-impl.h:177:0: warning: "pPolyAssumeReturn" redefined [enabled by default]
../kernel/polys-impl.h:176:0: note: this is the location of the previous definition
mpsr_Tok.cc: In function 'void mpsr_ttGen()':
mpsr_Tok.cc:551:29: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
Undefined			first referenced
 symbol  			    in file
uniFactorizer(CanonicalForm const&, Variable const&, bool const&) /export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/lib/libsingcf.a(facFqFactorize.o)
ld: fatal: symbol referencing errors. No output written to gentable1
collect2: ld returned 1 exit status
make[4]: *** [iparith.inc] Error 1
Undefined			first referenced
 symbol  			    in file
uniFactorizer(CanonicalForm const&, Variable const&, bool const&) /export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/lib/libsingcf.a(facFqFactorize.o)
ld: fatal: symbol referencing errors. No output written to gentable2
collect2: ld returned 1 exit status
make[4]: *** [mpsr_Tok.inc] Error 1
make[4]: Target `install' not remade because of errors.
make[4]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src/Singular'
make[3]: *** [install] Error 1
make[3]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src'
make[2]: *** [/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/local/bin/Singular-3-1-1] Error 2
make[2]: Leaving directory `/export/home/drkirkby/sage-new-gcc/sage-4.7.alpha2/spkg/build/singular-3-1-1-4.p4/src'
Unable to build Singular.

real	3m22.783s
user	6m14.242s
sys	0m22.671s
sage: An error occurred while installing singular-3-1-1-4.p4
```

A full log is attached. 

A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at 

New spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)

This needs further testing on other platforms. 

Other problems related to gcc 4.6.0 can be found on #11216

Assignee: **@sagetrac-GeorgSWeber**

Author: **David Kirkby, Jeroen Demeyer**

Reviewer: **Alexander Dreyer, Jeroen Demeyer**

Upstream: **None of the above - read trac for reasoning.**

Merged: **sage-4.7.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/11084_





---

archive/issue_events_134193.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:40:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134193"
}
```



---

archive/issue_events_134194.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:40:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134194"
}
```



---

archive/issue_events_134195.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:40:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134195"
}
```



---

archive/issue_comments_111796.json:
```json
{
    "body": "Attachment: **[singular-3-1-1-4.p4.log](https://github.com/sagemath/sage/files/ticket11084/singular-3-1-1-4.p4.log)**\n\nFailed build of Singular 3-1-1-4.p4 as part of Sage 4.7.alpha2 on a Sun Ultra 27 running OpenSolaris 06/2009",
    "created_at": "2011-03-29T22:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111796",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[singular-3-1-1-4.p4.log](https://github.com/sagemath/sage/files/ticket11084/singular-3-1-1-4.p4.log)**

Failed build of Singular 3-1-1-4.p4 as part of Sage 4.7.alpha2 on a Sun Ultra 27 running OpenSolaris 06/2009



---

archive/issue_events_134196.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:43:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134196"
}
```



---

archive/issue_events_134197.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:43:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134197"
}
```



---

archive/issue_events_134198.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-03-29T22:43:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "component: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134198"
}
```



---

archive/issue_comments_111797.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI've set the component to \"solaris\" as that is the only confirmed system on which this fails to build. Can someone change the component to \"build\" if this fails on Linux or OS X. \n\nDave",
    "created_at": "2011-03-29T22:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111797",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:1" align="right">Comment 1</div>

I've set the component to "solaris" as that is the only confirmed system on which this fails to build. Can someone change the component to "build" if this fails on Linux or OS X. 

Dave



---

archive/issue_comments_111798.json:
```json
{
    "body": "Changed assignee from **@sagetrac-GeorgSWeber** to **@sagetrac-drkirkby**",
    "created_at": "2011-03-29T22:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111798",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed assignee from **@sagetrac-GeorgSWeber** to **@sagetrac-drkirkby**



---

archive/issue_events_134199.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-30T02:46:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20solaris",
    "label_color": "000080",
    "label_name": "component: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134199"
}
```



---

archive/issue_events_134200.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-03-30T02:46:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134200"
}
```



---

archive/issue_comments_111799.json:
```json
{
    "body": "Changed assignee from **@sagetrac-drkirkby** to **@sagetrac-GeorgSWeber**",
    "created_at": "2011-03-30T02:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111799",
    "user": "https://github.com/vbraun"
}
```

Changed assignee from **@sagetrac-drkirkby** to **@sagetrac-GeorgSWeber**



---

archive/issue_comments_111800.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAlso fails on Fedora 15 alpha which uses gcc-4.6",
    "created_at": "2011-03-30T02:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111800",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">Comment 2</div>

Also fails on Fedora 15 alpha which uses gcc-4.6



---

archive/issue_comments_111801.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**",
    "created_at": "2011-03-31T14:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111801",
    "user": "https://github.com/burcin"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**



---

archive/issue_comments_111802.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI just posted this to the `libsingular-devel` list:\n\nhttp://groups.google.com/group/libsingular-devel/browse_thread/thread/508c352214392315",
    "created_at": "2011-03-31T14:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111802",
    "user": "https://github.com/burcin"
}
```

<div id="comment:3" align="right">Comment 3</div>

I just posted this to the `libsingular-devel` list:

http://groups.google.com/group/libsingular-devel/browse_thread/thread/508c352214392315



---

archive/issue_comments_111803.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nMaybe a demangling issue?\nSee my comment here:\nhttp://groups.google.com/group/libsingular-devel/browse_thread/thread/508c352214392315?hl=en\nMy best,\n  Alexander",
    "created_at": "2011-03-31T15:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111803",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

Maybe a demangling issue?
See my comment here:
http://groups.google.com/group/libsingular-devel/browse_thread/thread/508c352214392315?hl=en
My best,
  Alexander



---

archive/issue_comments_111804.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nOn a related note, our goal should probably be to update Singular to the newest upstream. IIRC I was able to build the latest upstream with gcc-4.6, but only the standalone singular. I was unable to build libsingular, though.",
    "created_at": "2011-03-31T16:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111804",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">Comment 5</div>

On a related note, our goal should probably be to update Singular to the newest upstream. IIRC I was able to build the latest upstream with gcc-4.6, but only the standalone singular. I was unable to build libsingular, though.



---

archive/issue_comments_111805.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@vbraun](#comment%3A5):\n> On a related note, our goal should probably be to update Singular to the newest upstream. IIRC I was able to build the latest upstream with gcc-4.6, but only the standalone singular. I was unable to build libsingular, though.\n\nWe should really try to get this solved before the 24<sup>th</sup> May 2011, since Fedora 15 is released then, and Sage will fail to build on a fairly popular linux distribution. \n\nhttp://fedoraproject.org/wiki/Releases/15/Schedule",
    "created_at": "2011-04-07T20:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111805",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@vbraun](#comment%3A5):
> On a related note, our goal should probably be to update Singular to the newest upstream. IIRC I was able to build the latest upstream with gcc-4.6, but only the standalone singular. I was unable to build libsingular, though.

We should really try to get this solved before the 24<sup>th</sup> May 2011, since Fedora 15 is released then, and Sage will fail to build on a fairly popular linux distribution. 

http://fedoraproject.org/wiki/Releases/15/Schedule



---

archive/issue_comments_111806.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI reported that upstream:\nhttp://www.singular.uni-kl.de:8002/trac/ticket/332",
    "created_at": "2011-04-07T20:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111806",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:7" align="right">Comment 7</div>

I reported that upstream:
http://www.singular.uni-kl.de:8002/trac/ticket/332



---

archive/issue_events_134201.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-07T22:03:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134201"
}
```



---

archive/issue_events_134202.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-07T22:03:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134202"
}
```



---

archive/issue_comments_111807.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@alexanderdreyer](#comment%3A7):\n> I reported that upstream:\n> http://www.singular.uni-kl.de:8002/trac/ticket/332\n\nThank you. \n\nBurcin has already reported it on the mailing list, but there has been no response from any developers. Having it submitted to the bug database, as you have done, can only be a good thing. \n\nI've updated this to 'critical' as I think it's a pretty important bug to solve. Not that the priories seem to mean very much - e.g. #9739 has been opened for 8 months and has been a blocker for 5 months. \n\nDave",
    "created_at": "2011-04-07T22:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111807",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@alexanderdreyer](#comment%3A7):
> I reported that upstream:
> http://www.singular.uni-kl.de:8002/trac/ticket/332

Thank you. 

Burcin has already reported it on the mailing list, but there has been no response from any developers. Having it submitted to the bug database, as you have done, can only be a good thing. 

I've updated this to 'critical' as I think it's a pretty important bug to solve. Not that the priories seem to mean very much - e.g. #9739 has been opened for 8 months and has been a blocker for 5 months. 

Dave



---

archive/issue_comments_111808.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI've reported on the singular list that the latest version still fails with gcc 4.6.0. I later tried to post this:\n\n---\nWith gcc 4.5.0 the same version builds ok on the same computer, so it does appear to be an issue with gcc 4.6.0.\n\nI would suggest it would be worth trying to build this with Sun Studio (which is a free download)\n\n http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/index.html\n\non a Linux system. The Sun (Oracle) compiler is much stricter than the GNU compilers, so will show up problems that current versions of GCC may not. It goes without saying this will not build with Sun Studio. (I tried this on a Solaris system, but you should get the same on a Linux machine).\n\nDave\n\n---\n\nbut it was rejected as it was thought to be spam. I guess it contains a link, but I don't think it's too much like spam. \n\nDave",
    "created_at": "2011-04-08T20:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111808",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:9" align="right">Comment 9</div>

I've reported on the singular list that the latest version still fails with gcc 4.6.0. I later tried to post this:

---
With gcc 4.5.0 the same version builds ok on the same computer, so it does appear to be an issue with gcc 4.6.0.

I would suggest it would be worth trying to build this with Sun Studio (which is a free download)

 http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/index.html

on a Linux system. The Sun (Oracle) compiler is much stricter than the GNU compilers, so will show up problems that current versions of GCC may not. It goes without saying this will not build with Sun Studio. (I tried this on a Solaris system, but you should get the same on a Linux machine).

Dave

---

but it was rejected as it was thought to be spam. I guess it contains a link, but I don't think it's too much like spam. 

Dave



---

archive/issue_comments_111809.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nIn principle not a bad idea, but due to some implementation tricks making Singular to compile von Solaris studio would be a full port.\n\nAs I pointed out on libSingular-devel, there is a demangling issue for some C++ function names on gcc 4.6. (Maybe tied to optimization options.)",
    "created_at": "2011-04-08T21:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111809",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

In principle not a bad idea, but due to some implementation tricks making Singular to compile von Solaris studio would be a full port.

As I pointed out on libSingular-devel, there is a demangling issue for some C++ function names on gcc 4.6. (Maybe tied to optimization options.)



---

archive/issue_comments_111810.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@alexanderdreyer](#comment%3A10):\n> In principle not a bad idea, but due to some implementation tricks making Singular to compile von Solaris studio would be a full port.\n\nIt suspect it would only need to be converted to standard C and/and C++. \n\n> As I pointed out on libSingular-devel, there is a demangling issue for some C++ function names on gcc 4.6. (Maybe tied to optimization options.)",
    "created_at": "2011-04-08T21:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111810",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@alexanderdreyer](#comment%3A10):
> In principle not a bad idea, but due to some implementation tricks making Singular to compile von Solaris studio would be a full port.

It suspect it would only need to be converted to standard C and/and C++. 

> As I pointed out on libSingular-devel, there is a demangling issue for some C++ function names on gcc 4.6. (Maybe tied to optimization options.)



---

archive/issue_comments_111811.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\n> It suspect it would only need to be converted to standard C and/and C++. \n\nIndeed, but this is ot done overnight.\n\nAnd: it won't fix this bug here. The lines of source code, that cause trouble are standard, this problem seems to accur during the compiler's optimization.",
    "created_at": "2011-04-08T22:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111811",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

> It suspect it would only need to be converted to standard C and/and C++. 

Indeed, but this is ot done overnight.

And: it won't fix this bug here. The lines of source code, that cause trouble are standard, this problem seems to accur during the compiler's optimization.



---

archive/issue_comments_111812.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@alexanderdreyer](#comment%3A12):\n> > It suspect it would only need to be converted to standard C and/and C++. \n\n> Indeed, but this is ot done overnight.\n\nTrue. \n\n> And: it won't fix this bug here. The lines of source code, that cause trouble are standard, this problem seems to accur during the compiler's optimization.\n\nIIRC, Singular uses -O3, which is a bit risky. Perhaps the optimiation level can be dropped to -O2, which is much safer. If I'm mistaken, and it is -O2, then I don't have any suggestions.",
    "created_at": "2011-04-08T22:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111812",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@alexanderdreyer](#comment%3A12):
> > It suspect it would only need to be converted to standard C and/and C++. 

> Indeed, but this is ot done overnight.

True. 

> And: it won't fix this bug here. The lines of source code, that cause trouble are standard, this problem seems to accur during the compiler's optimization.

IIRC, Singular uses -O3, which is a bit risky. Perhaps the optimiation level can be dropped to -O2, which is much safer. If I'm mistaken, and it is -O2, then I don't have any suggestions.



---

archive/issue_events_134203.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-08T22:40:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "title_is": "Singular 3-1-1-4.p4 fails to build with gcc 4.6.0.",
    "title_was": "Singular 3-1-1-4.p4 fails to build with gcc 4.6.0 on OpenSolaris.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134203"
}
```



---

archive/issue_comments_111813.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,3 +36,5 @@\n ```\n \n A full log is attached. \n+\n+The same issue has been reported on Linux - see below.\n``````\n",
    "created_at": "2011-04-08T22:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111813",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,3 +36,5 @@
 ```
 
 A full log is attached. 
+
+The same issue has been reported on Linux - see below.
``````




---

archive/issue_comments_111814.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI've removed the \"*on OpenSolaris*\" from the title, as this is not specific to that platform, so the ticket title should reflect this.",
    "created_at": "2011-04-08T22:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111814",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:14" align="right">Comment 14</div>

I've removed the "*on OpenSolaris*" from the title, as this is not specific to that platform, so the ticket title should reflect this.



---

archive/issue_comments_111815.json:
```json
{
    "body": "Work Issues: **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.**",
    "created_at": "2011-04-09T09:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111815",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Work Issues: **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.**



---

archive/issue_comments_111816.json:
```json
{
    "body": "Author: **David Kirkby**",
    "created_at": "2011-04-09T09:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111816",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Author: **David Kirkby**



---

archive/issue_events_134204.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-09T09:44:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134204"
}
```



---

archive/issue_comments_111817.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A13):\n\n> IIRC, Singular uses -O3, which is a bit risky. Perhaps the optimiation level can be dropped to -O2, which is much safer.\n\nReduced optimisation probably solves the problem. Changing to -O2 allows Singular to build with gcc 4.6.0 on at least OpenSolaris, but I have not yet verified if the doctests pass. I will start a fresh build of Sage, then run all the long doctests. \n\nIf one looks in spkg-install, one find that compiling at -O3 has caused problems in the past, so on one platform -O0 is used. \n\nSo I suspect this is solved. I've placed a package at \n\nhttp://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg\n\nWe will need to verify if this builds and passes the tests properly on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0 before I will mark this for review. For now I'm setting to \"needs info\"\n\nDave \n\nPS.\n\nI reported about an hour ago to the Singular developers that I believe they are using reserved words in Singular too (http://www.singular.uni-kl.de:8002/trac/ticket/333).",
    "created_at": "2011-04-09T09:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111817",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@sagetrac-drkirkby](#comment%3A13):

> IIRC, Singular uses -O3, which is a bit risky. Perhaps the optimiation level can be dropped to -O2, which is much safer.

Reduced optimisation probably solves the problem. Changing to -O2 allows Singular to build with gcc 4.6.0 on at least OpenSolaris, but I have not yet verified if the doctests pass. I will start a fresh build of Sage, then run all the long doctests. 

If one looks in spkg-install, one find that compiling at -O3 has caused problems in the past, so on one platform -O0 is used. 

So I suspect this is solved. I've placed a package at 

http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg

We will need to verify if this builds and passes the tests properly on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0 before I will mark this for review. For now I'm setting to "needs info"

Dave 

PS.

I reported about an hour ago to the Singular developers that I believe they are using reserved words in Singular too (http://www.singular.uni-kl.de:8002/trac/ticket/333).



---

archive/issue_comments_111818.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,3 +38,9 @@\n A full log is attached. \n \n The same issue has been reported on Linux - see below.\n+\n+A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at \n+\n+http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg\n+\n+This needs further testing on other platforms. \n``````\n",
    "created_at": "2011-04-09T09:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111818",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,3 +38,9 @@
 A full log is attached. 
 
 The same issue has been reported on Linux - see below.
+
+A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at 
+
+http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg
+
+This needs further testing on other platforms. 
``````




---

archive/issue_comments_111819.json:
```json
{
    "body": "Attachment: **[11084-Reduce_optimisation_level_in_Singular.patch.gz](https://github.com/sagemath/sage/files/ticket11084/11084-Reduce_optimisation_level_in_Singular.patch.gz)**\n\nReduces optimisation. For review purposes only.",
    "created_at": "2011-04-09T09:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111819",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Attachment: **[11084-Reduce_optimisation_level_in_Singular.patch.gz](https://github.com/sagemath/sage/files/ticket11084/11084-Reduce_optimisation_level_in_Singular.patch.gz)**

Reduces optimisation. For review purposes only.



---

archive/issue_comments_111820.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThis seems to be the right solution: looking at Singular's original settings I just realized that most of Singular is not compiled with -O3 already. (This is the reason why plain Singular doesn't fail to build. The overall optimization level is set in the spkg, so its merely a bug of the package.)\nMaybe a better solution would be not to *increase* optimization and stay with the original settings.\n\nBuilding/installing of the skpg is fine for me. Let's see whether the tests succeed.",
    "created_at": "2011-04-09T21:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111820",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

This seems to be the right solution: looking at Singular's original settings I just realized that most of Singular is not compiled with -O3 already. (This is the reason why plain Singular doesn't fail to build. The overall optimization level is set in the spkg, so its merely a bug of the package.)
Maybe a better solution would be not to *increase* optimization and stay with the original settings.

Building/installing of the skpg is fine for me. Let's see whether the tests succeed.



---

archive/issue_events_134205.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-09T21:31:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134205"
}
```



---

archive/issue_events_134206.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-09T21:31:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134206"
}
```



---

archive/issue_comments_111821.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Little or no feedback.** to **None of the above - read trac for reasoning.**",
    "created_at": "2011-04-09T21:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111821",
    "user": "https://github.com/alexanderdreyer"
}
```

Changed upstream from **Reported upstream. Little or no feedback.** to **None of the above - read trac for reasoning.**



---

archive/issue_comments_111822.json:
```json
{
    "body": "Reviewer: **AlexanderDreyer**",
    "created_at": "2011-04-09T23:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111822",
    "user": "https://github.com/alexanderdreyer"
}
```

Reviewer: **AlexanderDreyer**



---

archive/issue_events_134207.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-09T23:56:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134207"
}
```



---

archive/issue_events_134208.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-09T23:56:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134208"
}
```



---

archive/issue_comments_111823.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThe tests suceeded, so positive review.",
    "created_at": "2011-04-09T23:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111823",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

The tests suceeded, so positive review.



---

archive/issue_comments_111824.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@alexanderdreyer](#comment%3A17):\n> This seems to be the right solution\n\nI completely disagree.  Dropping the optimization is at best a workaround.  IMHO it can *never* be \"the right solution\".  It means that either the compiler or the code has a bug.  Maybe dropping the optimization to `-O2` covers up any issues, but I think one should really investigate what the true problem is.\n\nI am *very strongly* against saying to never increase the optimization level to `-O3`.  If some later upstream version has fixed this problem, we *should* increase the optimization level back to `-O3`.",
    "created_at": "2011-04-11T09:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111824",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@alexanderdreyer](#comment%3A17):
> This seems to be the right solution

I completely disagree.  Dropping the optimization is at best a workaround.  IMHO it can *never* be "the right solution".  It means that either the compiler or the code has a bug.  Maybe dropping the optimization to `-O2` covers up any issues, but I think one should really investigate what the true problem is.

I am *very strongly* against saying to never increase the optimization level to `-O3`.  If some later upstream version has fixed this problem, we *should* increase the optimization level back to `-O3`.



---

archive/issue_comments_111825.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@jdemeyer](#comment%3A19):\n> Replying to [@alexanderdreyer](#comment%3A17):\n> > This seems to be the right solution\n\n> \n> I completely disagree.  Dropping the optimization is at best a workaround. \n\nAgreed. \n\n>    IMHO it can *never* be \"the right solution\".  It means that either the compiler or the code has a bug.  Maybe dropping the optimization to `-O2` covers up any issues, but I think one should really investigate what the true problem is.\n\n\nWell, a lot of the code in Sage is very difficult to navigate. Sage developers did not write it. Much is incomprehensible. Most gives a lot of compiler warnings. Sorting out if a gcc bug or a bug in the code is difficult. Then if it is a bug in the code, finding where is often very very difficult. One could spend ages on it. \n\n\n> I am *very strongly* against saying to never increase the optimization level to `-O3`.  If some later upstream version has fixed this problem, we *should* increase the optimization level back to `-O3`.\n\nGiven this code has caused many issues on many platforms with optimization issues, then I think not increasing it is worthwhile. It should also be realised that -O3 does not necessarily run faster than -O2. The higher optimization level invokes more speculative optimisations, which may cause the code to run slower. See this point from a GCC developer.\n\nhttp://gcc.gnu.org/ml/gcc-help/2010-07/msg00190.html\n\n\n---\n*The -O3 optoin should be safe for correct code. An important difference between -O2/-O3 and -O1 is that -O2 and -O3 enable strict aliasing and strict overflow. Those options provide better optimization for correct code, but are far more likely to cause unexpected code generation for incorrect code. See the -fstrict-aliasing and -fstrict-overflow options.*\n\n*The main difference between -O3 and -O2 is that -O3 enables more speculative optimizations. These should not miscompile your code, but they may cause your program to run more slowly. *\n\n---\n\nSo in summary\n* The upstream developers use -O2\n* Both -O2 and -O3 can cause problems with bad code. \n* -O3 can be slower than -O2\n* Previous attempts to use -O3 have caused problems on numerous platforms\n  * Fedora\n  * OpenSUSE on Itanium\n  * gcc on any platform\n* Just for good measure, the code can't be compiled with the Sun compiler, as it has hard-coded uses gcc-specific flags, so we can't even get a second opinion about doggy lines of code. \n* Finding whether it's a gcc bug or a bug in Singular would take quite a bit of effort, and IMHO would be better spent elsewhere. \n\nThere seems to be little appetite among the Sage community for investigating (and possibly fixing) the **thousands** of compiler warnings - some of which look potentially serious to me. To me at least, permitting -O3 on code which has caused numerous issues in the past is unwise. \n\nDave",
    "created_at": "2011-04-11T10:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111825",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@jdemeyer](#comment%3A19):
> Replying to [@alexanderdreyer](#comment%3A17):
> > This seems to be the right solution

> 
> I completely disagree.  Dropping the optimization is at best a workaround. 

Agreed. 

>    IMHO it can *never* be "the right solution".  It means that either the compiler or the code has a bug.  Maybe dropping the optimization to `-O2` covers up any issues, but I think one should really investigate what the true problem is.


Well, a lot of the code in Sage is very difficult to navigate. Sage developers did not write it. Much is incomprehensible. Most gives a lot of compiler warnings. Sorting out if a gcc bug or a bug in the code is difficult. Then if it is a bug in the code, finding where is often very very difficult. One could spend ages on it. 


> I am *very strongly* against saying to never increase the optimization level to `-O3`.  If some later upstream version has fixed this problem, we *should* increase the optimization level back to `-O3`.

Given this code has caused many issues on many platforms with optimization issues, then I think not increasing it is worthwhile. It should also be realised that -O3 does not necessarily run faster than -O2. The higher optimization level invokes more speculative optimisations, which may cause the code to run slower. See this point from a GCC developer.

http://gcc.gnu.org/ml/gcc-help/2010-07/msg00190.html


---
*The -O3 optoin should be safe for correct code. An important difference between -O2/-O3 and -O1 is that -O2 and -O3 enable strict aliasing and strict overflow. Those options provide better optimization for correct code, but are far more likely to cause unexpected code generation for incorrect code. See the -fstrict-aliasing and -fstrict-overflow options.*

*The main difference between -O3 and -O2 is that -O3 enables more speculative optimizations. These should not miscompile your code, but they may cause your program to run more slowly. *

---

So in summary
* The upstream developers use -O2
* Both -O2 and -O3 can cause problems with bad code. 
* -O3 can be slower than -O2
* Previous attempts to use -O3 have caused problems on numerous platforms
  * Fedora
  * OpenSUSE on Itanium
  * gcc on any platform
* Just for good measure, the code can't be compiled with the Sun compiler, as it has hard-coded uses gcc-specific flags, so we can't even get a second opinion about doggy lines of code. 
* Finding whether it's a gcc bug or a bug in Singular would take quite a bit of effort, and IMHO would be better spent elsewhere. 

There seems to be little appetite among the Sage community for investigating (and possibly fixing) the **thousands** of compiler warnings - some of which look potentially serious to me. To me at least, permitting -O3 on code which has caused numerous issues in the past is unwise. 

Dave



---

archive/issue_comments_111826.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\n> > > This seems to be the right solution\n\n> > \n> > I completely disagree.  Dropping the optimization is at best a workaround. \n\nOf course, I meant a solution for now (let's call this workaround).\n\nI also wanted to point out, that upstream Singular uses different optimization levels for different parts of the system. Some parts are actually compiled with -O3 (not the one which causes problems). \nSo I had wanted to suggest, that the spkg should not increase the optimization level over the levels, respectively, intended by the upstream developers. (It's known that -O3 sometimes yields performance issues.)\n\nFor some reason the Sage-package forces a unified optimization setting for all parts of Singular. Avoiding this would be the best of course.\n\nBTW: I'm pretty sure, the issue is a compiler bug: It complies without problems, but the linker looks for a (C++) function, whose mangled name doesn't fit what the linker expects.",
    "created_at": "2011-04-11T11:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111826",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

> > > This seems to be the right solution

> > 
> > I completely disagree.  Dropping the optimization is at best a workaround. 

Of course, I meant a solution for now (let's call this workaround).

I also wanted to point out, that upstream Singular uses different optimization levels for different parts of the system. Some parts are actually compiled with -O3 (not the one which causes problems). 
So I had wanted to suggest, that the spkg should not increase the optimization level over the levels, respectively, intended by the upstream developers. (It's known that -O3 sometimes yields performance issues.)

For some reason the Sage-package forces a unified optimization setting for all parts of Singular. Avoiding this would be the best of course.

BTW: I'm pretty sure, the issue is a compiler bug: It complies without problems, but the linker looks for a (C++) function, whose mangled name doesn't fit what the linker expects.



---

archive/issue_comments_111827.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nSome administrative comment: there is already a new Singular spkg at #9497 (which will probably be merged in sage-4.7.alpha5), so you should rebase this ticket to the spkg at #9497.",
    "created_at": "2011-04-11T12:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111827",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Some administrative comment: there is already a new Singular spkg at #9497 (which will probably be merged in sage-4.7.alpha5), so you should rebase this ticket to the spkg at #9497.



---

archive/issue_comments_111828.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nDavid, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace \"Please do not push the optimisation to -O3. This has caused too many problems.\" by something along the lines of \"Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2.\"",
    "created_at": "2011-04-11T12:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111828",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

David, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace "Please do not push the optimisation to -O3. This has caused too many problems." by something along the lines of "Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2."



---

archive/issue_comments_111829.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nI dug around for the missing symbol a bit and the issue is in const propagation where some function should get compiled into a const and a non-const version, but apparently one of them is missing when linking everything. I'm not sure if its a compiler bug or a misuse of const-ness that causes it.\n\nWith lower optimization gcc probably doesn't emit two distinct versions of the function. So the bug should only affect whether the code compiles or not, but never give wrong results.",
    "created_at": "2011-04-11T17:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111829",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>

I dug around for the missing symbol a bit and the issue is in const propagation where some function should get compiled into a const and a non-const version, but apparently one of them is missing when linking everything. I'm not sure if its a compiler bug or a misuse of const-ness that causes it.

With lower optimization gcc probably doesn't emit two distinct versions of the function. So the bug should only affect whether the code compiles or not, but never give wrong results.



---

archive/issue_comments_111830.json:
```json
{
    "body": "Changed work issues from **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.** to **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497**",
    "created_at": "2011-04-11T20:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111830",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.** to **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497**



---

archive/issue_events_134209.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T20:33:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134209"
}
```



---

archive/issue_events_134210.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T20:33:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134210"
}
```



---

archive/issue_comments_111831.json:
```json
{
    "body": "Changed work issues from **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497** to **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497**",
    "created_at": "2011-04-18T08:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111831",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **Testing on  Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497** to **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497**



---

archive/issue_events_134211.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-18T08:27:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134211"
}
```



---

archive/issue_events_134212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-18T08:27:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134212"
}
```



---

archive/issue_comments_111832.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -44,3 +44,6 @@\n http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg\n \n This needs further testing on other platforms. \n+\n+Merged with #9497:\n+http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg\n``````\n",
    "created_at": "2011-04-18T09:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111832",
    "user": "https://github.com/alexanderdreyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -44,3 +44,6 @@
 http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg
 
 This needs further testing on other platforms. 
+
+Merged with #9497:
+http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg
``````




---

archive/issue_events_134213.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-18T09:05:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134213"
}
```



---

archive/issue_events_134214.json:
```json
{
    "actor": "https://github.com/alexanderdreyer",
    "created_at": "2011-04-18T09:05:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134214"
}
```



---

archive/issue_comments_111833.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI put the merged spkg here:\nhttp://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg\nUnfortunately, somebody else will need to review it now.",
    "created_at": "2011-04-18T09:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111833",
    "user": "https://github.com/alexanderdreyer"
}
```

<div id="comment:27" align="right">Comment 27</div>

I put the merged spkg here:
http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg
Unfortunately, somebody else will need to review it now.



---

archive/issue_events_134215.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-18T16:19:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134215"
}
```



---

archive/issue_events_134216.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-18T16:19:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134216"
}
```



---

archive/issue_comments_111834.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nPositive review. \n\nIs there a good reason this can't be merged into 4.7 now? Then all the gcc 4.6.0 issues will be resolved. #11159 does mention that gcc 4.6.0 will not build Sage and addresses an issue about GNU tar on Os X. But quite honestly if this is merged, and #11159 is not, then the is just a minor documentation error about GNU tar on OS X. I feel the gcc 4.6.0 issue is far more important than a minor error in the documentation. Or another ticket can be created to remove the comments about gcc 4.6.0 not building Sage. \n\nDave",
    "created_at": "2011-04-19T04:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111834",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:29" align="right">Comment 29</div>

Positive review. 

Is there a good reason this can't be merged into 4.7 now? Then all the gcc 4.6.0 issues will be resolved. #11159 does mention that gcc 4.6.0 will not build Sage and addresses an issue about GNU tar on Os X. But quite honestly if this is merged, and #11159 is not, then the is just a minor documentation error about GNU tar on OS X. I feel the gcc 4.6.0 issue is far more important than a minor error in the documentation. Or another ticket can be created to remove the comments about gcc 4.6.0 not building Sage. 

Dave



---

archive/issue_events_134217.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-19T04:54:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134217"
}
```



---

archive/issue_events_134218.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-19T04:54:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134218"
}
```



---

archive/issue_comments_111835.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-After trying to build Sage with the latest gcc (4.6.0) on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.\n+After trying to build Sage with gcc 4.6.0 on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.  The same issue occurs on various other systems.\n \n ```\n In file included from ../kernel/ring.h:13:0,\n@@ -37,13 +37,9 @@\n \n A full log is attached. \n \n-The same issue has been reported on Linux - see below.\n-\n A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at \n \n-http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg\n+New spkg, based on #9497:\n+[http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg](http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg)\n \n This needs further testing on other platforms. \n-\n-Merged with #9497:\n-http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg\n``````\n",
    "created_at": "2011-04-19T10:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111835",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-After trying to build Sage with the latest gcc (4.6.0) on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.
+After trying to build Sage with gcc 4.6.0 on OpenSolaris, I find it fails when building Singular, despite Singular (and all of Sage) builds with gcc-4.5.0.  The same issue occurs on various other systems.
 
 ```
 In file included from ../kernel/ring.h:13:0,
@@ -37,13 +37,9 @@
 
 A full log is attached. 
 
-The same issue has been reported on Linux - see below.
-
 A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at 
 
-http://boxen.math.washington.edu/home/kirkby/patches/singular-3-1-1-4.p5.spkg
+New spkg, based on #9497:
+[http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg](http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg)
 
 This needs further testing on other platforms. 
-
-Merged with #9497:
-http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg
``````




---

archive/issue_comments_111836.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nAre we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?\n\nFrom `spkg-install`:\n\n```\nif [ \"x$SAGE64\" = xyes ]; then\n    echo \"Building a 64-bit version of Singular\"\n    CFLAGS=\"-O2 -g -m64 \"\n    CXXFLAGS=\"-O2 -g -m64\"\n    CPPFLAGS=\"-O2 -g -m64\"\n    LDFLAGS=\"-m64 \"; export LDFLAGS\n    if [ \"x`uname`\" = xSunOS ] ; then\n      CC=\"$CC -m64\"\n      export CC\n      CXX=\"$CXX -m64\"\n      export CXX\n    fi\nfi\n```",
    "created_at": "2011-04-19T10:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111836",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Are we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?

From `spkg-install`:

```
if [ "x$SAGE64" = xyes ]; then
    echo "Building a 64-bit version of Singular"
    CFLAGS="-O2 -g -m64 "
    CXXFLAGS="-O2 -g -m64"
    CPPFLAGS="-O2 -g -m64"
    LDFLAGS="-m64 "; export LDFLAGS
    if [ "x`uname`" = xSunOS ] ; then
      CC="$CC -m64"
      export CC
      CXX="$CXX -m64"
      export CXX
    fi
fi
```



---

archive/issue_comments_111837.json:
```json
{
    "body": "Changed work issues from **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497** to **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0**",
    "created_at": "2011-04-19T10:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111837",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0.; rebase to #9497** to **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0**



---

archive/issue_events_134219.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-19T10:02:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "title_is": "Singular 3-1-1-4.p6 fails to build with gcc 4.6.0.",
    "title_was": "Singular 3-1-1-4.p4 fails to build with gcc 4.6.0.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134219"
}
```



---

archive/issue_events_134220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-19T10:08:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134220"
}
```



---

archive/issue_events_134221.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-19T10:08:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134221"
}
```



---

archive/issue_comments_111838.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nNew spkg (not overwriting of CFLAGS when SAGE64 is set): [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)",
    "created_at": "2011-04-19T10:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111838",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

New spkg (not overwriting of CFLAGS when SAGE64 is set): [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)



---

archive/issue_comments_111839.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,7 +39,6 @@\n \n A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at \n \n-New spkg, based on #9497:\n-[http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg](http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg)\n+New spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)\n \n This needs further testing on other platforms. \n``````\n",
    "created_at": "2011-04-19T10:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111839",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,7 +39,6 @@
 
 A revised package, which reduces the optimisation level, which at least allows this to build on OpenSolaris may be found at 
 
-New spkg, based on #9497:
-[http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg](http://boxen.math.washington.edu/home/dreyer/spkg/singular-3-1-1-4.p7.spkg)
+New spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)
 
 This needs further testing on other platforms. 
``````




---

archive/issue_events_134222.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-19T10:09:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134222"
}
```



---

archive/issue_events_134223.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-19T10:09:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134223"
}
```



---

archive/issue_comments_111840.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> David, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace \"Please do not push the optimisation to -O3. This has caused too many problems.\" by something along the lines of \"Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2.\"\n\nI will make it less strong, but I feel it needs to be a bit stronger than just mention gcc 4.6.0. \n\nHow about \n\n*The original Singular source code builds part of Singular with -O2 and part with -O3. On several occasions Sage has forced the optimisation of the complete package to -O3, but this has caused various problems (tickets x, y, and x) either with specific compilers or on specific platforms. If you feel tempted to increase the optimiation to -O3, ask on the Singular mailing (whatever@wherever.org) list for advice and discuss in on sage-devel first. Also note that -O3 can be slower than -O2 in some instances.*\n\nDoes that seem reasonable?",
    "created_at": "2011-04-19T10:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111840",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jdemeyer](#comment%3A23):
> David, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace "Please do not push the optimisation to -O3. This has caused too many problems." by something along the lines of "Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2."

I will make it less strong, but I feel it needs to be a bit stronger than just mention gcc 4.6.0. 

How about 

*The original Singular source code builds part of Singular with -O2 and part with -O3. On several occasions Sage has forced the optimisation of the complete package to -O3, but this has caused various problems (tickets x, y, and x) either with specific compilers or on specific platforms. If you feel tempted to increase the optimiation to -O3, ask on the Singular mailing (whatever@wherever.org) list for advice and discuss in on sage-devel first. Also note that -O3 can be slower than -O2 in some instances.*

Does that seem reasonable?



---

archive/issue_comments_111841.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> Are we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?\n\nNo, that is an error, though it is a separate issue to the subject of the ticket. But it is easy to fix. \n\nDave",
    "created_at": "2011-04-19T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111841",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@jdemeyer](#comment%3A31):
> Are we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?

No, that is an error, though it is a separate issue to the subject of the ticket. But it is easy to fix. 

Dave



---

archive/issue_comments_111842.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A35):\n> Replying to [@jdemeyer](#comment%3A31):\n> > Are we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?\n\n> \n> No, that is an error, though it is a separate issue to the subject of the ticket. But it is easy to fix. \n\nIn that case, please review my spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg).",
    "created_at": "2011-04-19T12:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111842",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

Replying to [@sagetrac-drkirkby](#comment%3A35):
> Replying to [@jdemeyer](#comment%3A31):
> > Are we really supposed to **overwrite** CFLAGS instead of **appending** CLFAGS when SAGE64 is set?

> 
> No, that is an error, though it is a separate issue to the subject of the ticket. But it is easy to fix. 

In that case, please review my spkg [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg).



---

archive/issue_comments_111843.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A34):\n> Replying to [@jdemeyer](#comment%3A23):\n> > David, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace \"Please do not push the optimisation to -O3. This has caused too many problems.\" by something along the lines of \"Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2.\"\n\n> \n> I will make it less strong, but I feel it needs to be a bit stronger than just mention gcc 4.6.0. \n> \n> How about \n> \n> *The original Singular source code builds part of Singular with -O2 and part with -O3. On several occasions Sage has forced the optimisation of the complete package to -O3, but this has caused various problems (tickets x, y, and x) either with specific compilers or on specific platforms. If you feel tempted to increase the optimiation to -O3, ask on the Singular mailing (whatever@wherever.org) list for advice and discuss in on sage-devel first. Also note that -O3 can be slower than -O2 in some instances.*\n> \n> Does that seem reasonable? \n\nIt's not unreasonable, but a lot of fuzz about nothing.  What do you think of the following comment from my spkg:\n\n```\n# By default, parts of Singular are compiled with -O2 and parts\n# with -O3.  If we do set any CFLAGS, this always overrides the\n# default CFLAGS set by upstream.  In order to be compatible, we\n# set the optimization to -O2.\n```\nI think it's most important to explain **why** we use `-O2`.  Since there is a good reason to use `-O2`, of course one should not randomly increase the `-O` level.",
    "created_at": "2011-04-19T12:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111843",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@sagetrac-drkirkby](#comment%3A34):
> Replying to [@jdemeyer](#comment%3A23):
> > David, would you agree with the compromise to weaken your wording about the `-O3` issue?  I.e. replace "Please do not push the optimisation to -O3. This has caused too many problems." by something along the lines of "Currently, building Singular with -O3 fails using gcc 4.6.0.  Therefore, we compile using -O2."

> 
> I will make it less strong, but I feel it needs to be a bit stronger than just mention gcc 4.6.0. 
> 
> How about 
> 
> *The original Singular source code builds part of Singular with -O2 and part with -O3. On several occasions Sage has forced the optimisation of the complete package to -O3, but this has caused various problems (tickets x, y, and x) either with specific compilers or on specific platforms. If you feel tempted to increase the optimiation to -O3, ask on the Singular mailing (whatever@wherever.org) list for advice and discuss in on sage-devel first. Also note that -O3 can be slower than -O2 in some instances.*
> 
> Does that seem reasonable? 

It's not unreasonable, but a lot of fuzz about nothing.  What do you think of the following comment from my spkg:

```
# By default, parts of Singular are compiled with -O2 and parts
# with -O3.  If we do set any CFLAGS, this always overrides the
# default CFLAGS set by upstream.  In order to be compatible, we
# set the optimization to -O2.
```
I think it's most important to explain **why** we use `-O2`.  Since there is a good reason to use `-O2`, of course one should not randomly increase the `-O` level.



---

archive/issue_comments_111844.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@jdemeyer](#comment%3A37):\n> I think it's most important to explain **why** we use `-O2`.  Since there is a good reason to use `-O2`, of course one should not randomly increase the `-O` level.\n\nBut my point is that this package does appear to have had the optimisation randomly increased several times, which for Singular is a particularly bad idea, as it has caused numerous problems. Your wording gives no hint of the dangers. We are not being compatible for the sake of it - we are doing so as it is dangerous to do otherwise. \n\nDave",
    "created_at": "2011-04-19T20:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111844",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@jdemeyer](#comment%3A37):
> I think it's most important to explain **why** we use `-O2`.  Since there is a good reason to use `-O2`, of course one should not randomly increase the `-O` level.

But my point is that this package does appear to have had the optimisation randomly increased several times, which for Singular is a particularly bad idea, as it has caused numerous problems. Your wording gives no hint of the dangers. We are not being compatible for the sake of it - we are doing so as it is dangerous to do otherwise. 

Dave



---

archive/issue_comments_111845.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nHow about adding a phrase like this:\n\n```\n# By default, parts of Singular are compiled with -O2 and parts\n# with -O3.  If we do set any CFLAGS, this always overrides the\n# default CFLAGS set by upstream.  In order to be compatible, we\n# set the optimization to -O2.  Increasing the optimization level\n# to -O3 has caused various problems in the past either with\n# specific compilers or on specific platforms.\n```",
    "created_at": "2011-04-20T06:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111845",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

How about adding a phrase like this:

```
# By default, parts of Singular are compiled with -O2 and parts
# with -O3.  If we do set any CFLAGS, this always overrides the
# default CFLAGS set by upstream.  In order to be compatible, we
# set the optimization to -O2.  Increasing the optimization level
# to -O3 has caused various problems in the past either with
# specific compilers or on specific platforms.
```



---

archive/issue_comments_111846.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nNew package, use -O2 optimization level also for ia64 systems (testing on iras shows that this now works): [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)",
    "created_at": "2011-04-20T08:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111846",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

New package, use -O2 optimization level also for ia64 systems (testing on iras shows that this now works): [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)



---

archive/issue_comments_111847.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThat looks ok to me. \n\nCould this not go into 4.7? It seems to me we have fixes for all the gcc 4.6.0 issues. If Sage will build on some platforms with gcc 4.6.0, we have a lot more chance of finding any remaining issues on other platforms.",
    "created_at": "2011-04-20T10:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111847",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:41" align="right">Comment 41</div>

That looks ok to me. 

Could this not go into 4.7? It seems to me we have fixes for all the gcc 4.6.0 issues. If Sage will build on some platforms with gcc 4.6.0, we have a lot more chance of finding any remaining issues on other platforms.



---

archive/issue_events_134224.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-20T10:25:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134224"
}
```



---

archive/issue_events_134225.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2011-04-20T10:25:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134225"
}
```



---

archive/issue_comments_111848.json:
```json
{
    "body": "Changed reviewer from **AlexanderDreyer** to **AlexanderDreyer, Jeroen Demeyer**",
    "created_at": "2011-04-20T10:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111848",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed reviewer from **AlexanderDreyer** to **AlexanderDreyer, Jeroen Demeyer**



---

archive/issue_comments_111849.json:
```json
{
    "body": "Changed author from **David Kirkby** to **David Kirkby, Jeroen Demeyer**",
    "created_at": "2011-04-20T10:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111849",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Changed author from **David Kirkby** to **David Kirkby, Jeroen Demeyer**



---

archive/issue_events_134226.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T15:01:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134226"
}
```



---

archive/issue_events_134227.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T15:01:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134227"
}
```



---

archive/issue_comments_111850.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A41):\n> Could this not go into 4.7?\n\nI'm willing to try...",
    "created_at": "2011-04-20T15:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111850",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@sagetrac-drkirkby](#comment%3A41):
> Could this not go into 4.7?

I'm willing to try...



---

archive/issue_comments_111851.json:
```json
{
    "body": "Merged: **sage-4.7.rc0**",
    "created_at": "2011-04-20T19:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111851",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.rc0**



---

archive/issue_comments_111852.json:
```json
{
    "body": "Changed reviewer from **AlexanderDreyer, Jeroen Demeyer** to **Alexander Dreyer, Jeroen Demeyer**",
    "created_at": "2011-04-20T19:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111852",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **AlexanderDreyer, Jeroen Demeyer** to **Alexander Dreyer, Jeroen Demeyer**



---

archive/issue_comments_111853.json:
```json
{
    "body": "Changed work issues from **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0** to none",
    "created_at": "2011-04-20T19:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111853",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **Testing on Linux, OS X, Solaris 10 (both x86 and SPARC) with gcc 4.6.0** to none



---

archive/issue_events_134228.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T19:56:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134228"
}
```



---

archive/issue_events_134229.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T19:56:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11084#event-134229"
}
```



---

archive/issue_comments_111854.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nI have also closed #6240 because of this ticket.",
    "created_at": "2011-04-20T20:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111854",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">Comment 45</div>

I have also closed #6240 because of this ticket.



---

archive/issue_comments_111855.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -42,3 +42,5 @@\n New spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)\n \n This needs further testing on other platforms. \n+\n+Other problems related to gcc 4.6.0 can be found on #11216\n``````\n",
    "created_at": "2011-04-23T08:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111855",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -42,3 +42,5 @@
 New spkg, based on #9497: [http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/singular-3-1-1-4.p8.spkg)
 
 This needs further testing on other platforms. 
+
+Other problems related to gcc 4.6.0 can be found on #11216
``````




---

archive/issue_comments_111856.json:
```json
{
    "body": "Diff for the singular spkg, for reviewing only",
    "created_at": "2011-04-30T20:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111856",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the singular spkg, for reviewing only



---

archive/issue_comments_111857.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nAttachment: **[singular-3-1-1-4.p6-p8.diff.gz](https://github.com/sagemath/sage/files/ticket11084/singular-3-1-1-4.p6-p8.diff.gz)**\n\nPlease see #11278 for a **blocker** follow-up, any ideas more than welcome...",
    "created_at": "2011-04-30T21:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11084#issuecomment-111857",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">Comment 47</div>

Attachment: **[singular-3-1-1-4.p6-p8.diff.gz](https://github.com/sagemath/sage/files/ticket11084/singular-3-1-1-4.p6-p8.diff.gz)**

Please see #11278 for a **blocker** follow-up, any ideas more than welcome...
