# Issue 11226: Sympow spkg fails with gcc 4.6.0

archive/issues_011054.json:
```json
{
    "body": "On Linux Itanium (ia64) systems, sympow builds with gcc 4.6.0 but fails doctests.\nExample from cleo (RHEL 5.3 ia64 Itanium 2):\n\n```\nsage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py\n**********************************************************************\nFile \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/devel/sage-main/sage/lfunctions/sympow.py\", line 213:\n    sage: sympow.modular_degree(EllipticCurve('11a'))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[2]>\", line 1, in <module>\n        sympow.modular_degree(EllipticCurve('11a'))###line 213:\n    sage: sympow.modular_degree(EllipticCurve('11a'))\n      File \"/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/lib/python/site-packages/sage/lfunctions/sympow.py\", line 229, in modular_degree\n        raise RuntimeError, \"failed to compute modular degree\"\n    RuntimeError: failed to compute modular degree\n**********************************************************************\n\n[...]\n\nThe following tests failed:\n\nsage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\nsage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\nsage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\nsage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n----------------------------------------------------------------------\n```\n\nStarting up the `sympow` executable simply gives\n\n```\nsympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]\n```\n\nReported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)\n\nA revised package, which works around this problem by compiling with -fno-expensive-optimizations is [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)\n\nFor other issues related to gcc 4.6.0 see #11216\n\nAssignee: mariah\n\nKeywords: sympow spkg\n\nUpstream: Reported upstream. Developers deny it's a bug.\n\nReviewer: David Kirkby\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-4.7.rc2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/11226\n\n",
    "closed_at": "2011-05-06T07:18:49Z",
    "created_at": "2011-04-20T15:57:03Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Sympow spkg fails with gcc 4.6.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11226",
    "user": "https://github.com/jdemeyer"
}
```
On Linux Itanium (ia64) systems, sympow builds with gcc 4.6.0 but fails doctests.
Example from cleo (RHEL 5.3 ia64 Itanium 2):

```
sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py
**********************************************************************
File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/devel/sage-main/sage/lfunctions/sympow.py", line 213:
    sage: sympow.modular_degree(EllipticCurve('11a'))
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[2]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('11a'))###line 213:
    sage: sympow.modular_degree(EllipticCurve('11a'))
      File "/home/buildbot/build/sage/cleo-1/cleo_full/build/sage-4.7.alpha5/local/lib/python/site-packages/sage/lfunctions/sympow.py", line 229, in modular_degree
        raise RuntimeError, "failed to compute modular degree"
    RuntimeError: failed to compute modular degree
**********************************************************************

[...]

The following tests failed:

sage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
sage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
----------------------------------------------------------------------
```

Starting up the `sympow` executable simply gives

```
sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]
```

Reported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)

A revised package, which works around this problem by compiling with -fno-expensive-optimizations is [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)

For other issues related to gcc 4.6.0 see #11216

Assignee: mariah

Keywords: sympow spkg

Upstream: Reported upstream. Developers deny it's a bug.

Reviewer: David Kirkby

Author: Jeroen Demeyer

Merged: sage-4.7.rc2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/11226





---

archive/issue_comments_146563.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,9 @@\n \tsage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n ----------------------------------------------------------------------\n ```\n+\n+Starting up the `sympow` executable simply gives\n+\n+```\n+sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]\n+```\n``````\n",
    "created_at": "2011-04-20T16:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146563",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,9 @@
 	sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
 ----------------------------------------------------------------------
 ```
+
+Starting up the `sympow` executable simply gives
+
+```
+sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]
+```
``````




---

archive/issue_comments_146564.json:
```json
{
    "body": "<a id='comment:2'></a>On first sight, it looks like compiling with `-O1` solves the problem.",
    "created_at": "2011-04-20T16:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146564",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>On first sight, it looks like compiling with `-O1` solves the problem.



---

archive/issue_comments_146565.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -38,3 +38,5 @@\n ```\n sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]\n ```\n+\n+For other issues related to gcc 4.6.0 see #11216\n``````\n",
    "created_at": "2011-04-23T09:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146565",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -38,3 +38,5 @@
 ```
 sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]
 ```
+
+For other issues related to gcc 4.6.0 see #11216
``````




---

archive/issue_comments_146566.json:
```json
{
    "body": "<a id='comment:4'></a>Can't say I am surprised. Any clues from the build log?",
    "created_at": "2011-04-24T01:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146566",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>Can't say I am surprised. Any clues from the build log?



---

archive/issue_comments_146567.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [fbissey](#comment%3A4):\n> Can't say I am surprised. \n\n\nMe neither! \n\nDave",
    "created_at": "2011-04-24T02:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146567",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:5'></a>Replying to [fbissey](#comment%3A4):
> Can't say I am surprised. 


Me neither! 

Dave



---

archive/issue_comments_146568.json:
```json
{
    "body": "<a id='comment:6'></a>Has the '`-fno-ivopts`' option, (which has fixed several gcc-4.6.0 specific issues), been tried?",
    "created_at": "2011-04-27T13:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146568",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:6'></a>Has the '`-fno-ivopts`' option, (which has fixed several gcc-4.6.0 specific issues), been tried?



---

archive/issue_comments_146569.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [drkirkby](#comment%3A6):\n> Has the '`-fno-ivopts`' option, (which has fixed several gcc-4.6.0 specific issues), been tried?\n\n\nYes.  I tried compiling with `-O3 -fno-ivopts`, but sadly\nthe reported problem still exists.",
    "created_at": "2011-04-27T19:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146569",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:7'></a>Replying to [drkirkby](#comment%3A6):
> Has the '`-fno-ivopts`' option, (which has fixed several gcc-4.6.0 specific issues), been tried?


Yes.  I tried compiling with `-O3 -fno-ivopts`, but sadly
the reported problem still exists.



---

archive/issue_comments_146570.json:
```json
{
    "body": "<a id='comment:8'></a>If src/QD.c is compiled with -O1 (and the rest with -O3) then\n`sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py`\nno longer fails.  \n\nI am working on isolating the code in QD.c that demonstrates the gcc-4.6.0 optimization bug.",
    "created_at": "2011-04-27T20:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146570",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:8'></a>If src/QD.c is compiled with -O1 (and the rest with -O3) then
`sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py`
no longer fails.  

I am working on isolating the code in QD.c that demonstrates the gcc-4.6.0 optimization bug.



---

archive/issue_comments_146571.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [mariah](#comment%3A8):\n> If src/QD.c is compiled with -O1 (and the rest with -O3) then\n> `sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py`\n> no longer fails.  \n> \n> I am working on isolating the code in QD.c that demonstrates the gcc-4.6.0 optimization bug.\n\n\nYou are a brave lady Mariah - any code in SYMPOW is difficult to understand. Bill  Hart described it as \"virtually obfuscated\". Unfortunately, since it not actually standard C (the Sun compiler wont compile it), it can't be entered into The International Obfuscated C Code Contest\n\nhttp://www.ioccc.org/\n\nI particualry like SYMPOW's Configure script\n\nhttp://boxen.math.washington.edu/home/kirkby/bad-code/sympow-1.018.1.p7/src/Configure\n\nwhich starts off\n\n```/bin/sh\n```\n\nthen later has a test to see if sh exists on the system!\n\n```\nSH=`whichexe sh` && echo \"#define SH \\\"$SH\\\"\" >> $CONFIG\nif [ -z \"$SH\" ]; then\n  echo \"**ERROR**: Could not find sh\"; exit 1;\nelse\n  echo \"SH = $SH\"\nfi\n```\n\nGood luck Mariah - I don't envy you. \n\nDave",
    "created_at": "2011-04-27T21:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146571",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:9'></a>Replying to [mariah](#comment%3A8):
> If src/QD.c is compiled with -O1 (and the rest with -O3) then
> `sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py`
> no longer fails.  
> 
> I am working on isolating the code in QD.c that demonstrates the gcc-4.6.0 optimization bug.


You are a brave lady Mariah - any code in SYMPOW is difficult to understand. Bill  Hart described it as "virtually obfuscated". Unfortunately, since it not actually standard C (the Sun compiler wont compile it), it can't be entered into The International Obfuscated C Code Contest

http://www.ioccc.org/

I particualry like SYMPOW's Configure script

http://boxen.math.washington.edu/home/kirkby/bad-code/sympow-1.018.1.p7/src/Configure

which starts off

```/bin/sh
```

then later has a test to see if sh exists on the system!

```
SH=`whichexe sh` && echo "#define SH \"$SH\"" >> $CONFIG
if [ -z "$SH" ]; then
  echo "**ERROR**: Could not find sh"; exit 1;
else
  echo "SH = $SH"
fi
```

Good luck Mariah - I don't envy you. 

Dave



---

archive/issue_comments_146572.json:
```json
{
    "body": "Changing assignee from tbd to mariah.",
    "created_at": "2011-04-29T14:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146572",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing assignee from tbd to mariah.



---

archive/issue_comments_146573.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. Little or no feedback.\"",
    "created_at": "2011-04-29T16:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146573",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing upstream from "N/A" to "Reported upstream. Little or no feedback."



---

archive/issue_comments_146574.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,4 +39,6 @@\n sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]\n ```\n \n+A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)\n+\n For other issues related to gcc 4.6.0 see #11216\n``````\n",
    "created_at": "2011-04-29T16:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146574",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,4 +39,6 @@
 sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]
 ```
 
+A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)
+
 For other issues related to gcc 4.6.0 see #11216
``````




---

archive/issue_comments_146575.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-04-29T16:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146575",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_146576.json:
```json
{
    "body": "<a id='comment:11'></a>gcc-4.6.0 optimization regression of src/QD.c reported to gcc bugzilla [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)",
    "created_at": "2011-04-29T16:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146576",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:11'></a>gcc-4.6.0 optimization regression of src/QD.c reported to gcc bugzilla [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)



---

archive/issue_comments_146577.json:
```json
{
    "body": "Changing author from \"\" to \"Mariah Lenox\"",
    "created_at": "2011-04-29T16:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146577",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

Changing author from "" to "Mariah Lenox"



---

archive/issue_comments_146578.json:
```json
{
    "body": "<a id='comment:12'></a>Hi Mariah, \n\nthe test in the code \n\n```\nif [ \"`uname -m`\" = \"ia64\" ] && [ $CC = \"gcc\" ]; then \n```\n\nwill fail if CC is set to something like /usr/local/bin/gcc. In this case, $CC is not just gcc. \n\nI would suggest making use of the script `$SAGE_ROOT/local/bin/testcc.sh`, which actually compiles a bit of code and checks that __GNU__ is defined. Then use something like the following, which I'm doing from memory and have not tested. \n\n```\nif [ \"x$UNAME\" = xLinux ] && [ \"x`$SAGE_LOCAL/bin/testcc.sh $CC`\" = xGCC ] && [ \"x`$CC -dumpversion 2>/dev/null`\" = x4.6.0 ] ; then  \n```\n\nThat will\n* Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor. \n* Since the first test uses $UNAME, it should be faster on non-Linux systems, as there is no need to call any external scripts or programs. \n* $CC really is a GNU-like compiler. \n\nYou might want to review #11169 which changes the exit code of the script testcc.sh if it fails. But it wont effect your code here, as you are checking the text output. \n\nDave",
    "created_at": "2011-04-29T23:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146578",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:12'></a>Hi Mariah, 

the test in the code 

```
if [ "`uname -m`" = "ia64" ] && [ $CC = "gcc" ]; then 
```

will fail if CC is set to something like /usr/local/bin/gcc. In this case, $CC is not just gcc. 

I would suggest making use of the script `$SAGE_ROOT/local/bin/testcc.sh`, which actually compiles a bit of code and checks that __GNU__ is defined. Then use something like the following, which I'm doing from memory and have not tested. 

```
if [ "x$UNAME" = xLinux ] && [ "x`$SAGE_LOCAL/bin/testcc.sh $CC`" = xGCC ] && [ "x`$CC -dumpversion 2>/dev/null`" = x4.6.0 ] ; then  
```

That will
* Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor. 
* Since the first test uses $UNAME, it should be faster on non-Linux systems, as there is no need to call any external scripts or programs. 
* $CC really is a GNU-like compiler. 

You might want to review #11169 which changes the exit code of the script testcc.sh if it fails. But it wont effect your code here, as you are checking the text output. 

Dave



---

archive/issue_comments_146579.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-04-29T23:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146579",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_146580.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [drkirkby](#comment%3A12):\n>  * Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor.\n\n\nI would prefer to be on the safe side and lower the optimization on *any* ia64 machine (Linux or not).",
    "created_at": "2011-04-30T10:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146580",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [drkirkby](#comment%3A12):
>  * Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor.


I would prefer to be on the safe side and lower the optimization on *any* ia64 machine (Linux or not).



---

archive/issue_comments_146581.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [jdemeyer](#comment%3A13):\n> Replying to [drkirkby](#comment%3A12):\n> >  * Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor.\n \n> \n> I would prefer to be on the safe side and lower the optimization on *any* ia64 machine (Linux or not).\n\n\nFair enough, so change the test to something like:\n\n```\nif [ \"x`$SAGE_LOCAL/bin/testcc.sh $CC`\" = xGCC ] && [ \"x`$CC -dumpversion 2>/dev/null`\" = x4.6.0 ] ; then  \n```\n\nthen we will know it is gcc, even if someone sets the environment variable CC to be {{{/usr/local/bin/gcc}}\n\nThis release of gcc seems to have caused a fair number of problems for Sage. I'm not aware of any other gcc \"upgrade\" which has caused so much trouble. \n\nDave",
    "created_at": "2011-05-01T17:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146581",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:14'></a>Replying to [jdemeyer](#comment%3A13):
> Replying to [drkirkby](#comment%3A12):
> >  * Ensure the test only gets performed on Linux. We currently have no evidence to assume this will be an issue on HP-UX, which also runs on the Itanium processor.
 
> 
> I would prefer to be on the safe side and lower the optimization on *any* ia64 machine (Linux or not).


Fair enough, so change the test to something like:

```
if [ "x`$SAGE_LOCAL/bin/testcc.sh $CC`" = xGCC ] && [ "x`$CC -dumpversion 2>/dev/null`" = x4.6.0 ] ; then  
```

then we will know it is gcc, even if someone sets the environment variable CC to be {{{/usr/local/bin/gcc}}

This release of gcc seems to have caused a fair number of problems for Sage. I'm not aware of any other gcc "upgrade" which has caused so much trouble. 

Dave



---

archive/issue_comments_146582.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [drkirkby](#comment%3A12):\n\n> I would suggest making use of the script `$SAGE_ROOT/local/bin/testcc.sh`, which actually compiles a bit of code and checks that __GNU!__ is defined.\n\n\nThe trac formatting has screwed that up a bit. The script `$SAGE_ROOT/local/bin/testcc.sh` checks if !__GNU!__ is defined (I have to put a couple of exclamation marks to escape the formatting, as two underscores causes the text to be underlined).\n\nDave",
    "created_at": "2011-05-01T18:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146582",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:15'></a>Replying to [drkirkby](#comment%3A12):

> I would suggest making use of the script `$SAGE_ROOT/local/bin/testcc.sh`, which actually compiles a bit of code and checks that __GNU!__ is defined.


The trac formatting has screwed that up a bit. The script `$SAGE_ROOT/local/bin/testcc.sh` checks if !__GNU!__ is defined (I have to put a couple of exclamation marks to escape the formatting, as two underscores causes the text to be underlined).

Dave



---

archive/issue_comments_146583.json:
```json
{
    "body": "<a id='comment:16'></a>I simplified the testcase and came up with the following minimal code to demonstrate the problem:\n\n```\nextern int printf (__const char *__restrict __format, ...);\n\ndouble p0 = 2.718281828459045091e+00;\ndouble p1 = 1.445646891729250158e-16;\ndouble q0 = 3.141592653589793116e+00;\ndouble q1 = 1.224646799147353207e-16;\n\nint main()\n{\n  double x;\n  x = p0*q1 + p1*q0 + p0*q0;\n  printf(\"%a\\n\", x);\n\n  return 0;\n}\n```\n\nAlso, `-fno-expensive-optimizations` solves this problem.",
    "created_at": "2011-05-02T09:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146583",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>I simplified the testcase and came up with the following minimal code to demonstrate the problem:

```
extern int printf (__const char *__restrict __format, ...);

double p0 = 2.718281828459045091e+00;
double p1 = 1.445646891729250158e-16;
double q0 = 3.141592653589793116e+00;
double q1 = 1.224646799147353207e-16;

int main()
{
  double x;
  x = p0*q1 + p1*q0 + p0*q0;
  printf("%a\n", x);

  return 0;
}
```

Also, `-fno-expensive-optimizations` solves this problem.



---

archive/issue_comments_146584.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,6 +39,8 @@\n sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]\n ```\n \n+Reported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)\n+\n A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)\n \n For other issues related to gcc 4.6.0 see #11216\n``````\n",
    "created_at": "2011-05-02T09:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146584",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,6 +39,8 @@
 sympow 1.018 RELEASE  (c) Mark Watkins -**ERROR** QD_check failed at x[0]
 ```
 
+Reported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)
+
 A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)
 
 For other issues related to gcc 4.6.0 see #11216
``````




---

archive/issue_comments_146585.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -41,6 +41,6 @@\n \n Reported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)\n \n-A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)\n+A revised package, which works around this problem by compiling with -fno-expensive-optimizations is [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)\n \n For other issues related to gcc 4.6.0 see #11216\n``````\n",
    "created_at": "2011-05-02T09:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146585",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -41,6 +41,6 @@
 
 Reported upstream to gcc: [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48823)
 
-A revised package, which works around the gcc-4.6.0 bug by compiling QD.c with -O1 is [http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/mariah/spkg/sympow-1.018.1.p9.spkg)
+A revised package, which works around this problem by compiling with -fno-expensive-optimizations is [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)
 
 For other issues related to gcc 4.6.0 see #11216
``````




---

archive/issue_comments_146586.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2011-05-02T10:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146586",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_146587.json:
```json
{
    "body": "Changing author from \"Mariah Lenox\" to \"Jeroen Demeyer, Mariah Lenox\"",
    "created_at": "2011-05-02T10:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146587",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Mariah Lenox" to "Jeroen Demeyer, Mariah Lenox"



---

archive/issue_comments_146588.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-05-02T10:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146588",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_146589.json:
```json
{
    "body": "<a id='comment:19'></a>New spkg (with uncommitted changes) needs review: [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)",
    "created_at": "2011-05-02T10:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146589",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>New spkg (with uncommitted changes) needs review: [http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/sympow-1.018.1.p9.spkg)



---

archive/issue_comments_146590.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-05-03T12:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146590",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_146591.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-05-03T12:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146591",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_146592.json:
```json
{
    "body": "Changing keywords from \"sympow\" to \"sympow spkg\".",
    "created_at": "2011-05-03T12:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146592",
    "user": "https://github.com/jdemeyer"
}
```

Changing keywords from "sympow" to "sympow spkg".



---

archive/issue_events_029072.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T12:59:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11226#event-29072"
}
```



---

archive/issue_comments_146593.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-05-03T15:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146593",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_146594.json:
```json
{
    "body": "<a id='comment:22'></a>The changes are not checked in\n\n```\ndrkirkby@hawk:~/sage-4.7.rc0/spkg/standard/sympow-1.018.1.p9$ hg status\nM SPKG.txt\nM spkg-install\n```\n\nThat obviously needs fixing. A minor point, gcc 4.6.1 will cause the patch to be applied too, despite the comment saying *\"Working around problems with gcc 4.6.0 on Itanium systems\"*\n\nDave",
    "created_at": "2011-05-03T15:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146594",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:22'></a>The changes are not checked in

```
drkirkby@hawk:~/sage-4.7.rc0/spkg/standard/sympow-1.018.1.p9$ hg status
M SPKG.txt
M spkg-install
```

That obviously needs fixing. A minor point, gcc 4.6.1 will cause the patch to be applied too, despite the comment saying *"Working around problems with gcc 4.6.0 on Itanium systems"*

Dave



---

archive/issue_comments_146595.json:
```json
{
    "body": "<a id='comment:23'></a>I recommend that the patch only apply to gcc-4.6.0.  It might\nbe fixed in later gcc versions.",
    "created_at": "2011-05-03T20:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146595",
    "user": "https://trac.sagemath.org/admin/accounts/users/mariah"
}
```

<a id='comment:23'></a>I recommend that the patch only apply to gcc-4.6.0.  It might
be fixed in later gcc versions.



---

archive/issue_comments_146596.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [mariah](#comment%3A23):\n> I recommend that the patch only apply to gcc-4.6.0.  It might\n> be fixed in later gcc versions.\n\n\nI think that having the workaround for all versions 4.6.x doesn't really hurt. It is certainly a safer alternative than applying the workaround only for gcc 4.6.0. If at some point, this bug is fixed in a later gcc 4.6.x, then we can still change the spkg accordingly.",
    "created_at": "2011-05-04T07:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146596",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>Replying to [mariah](#comment%3A23):
> I recommend that the patch only apply to gcc-4.6.0.  It might
> be fixed in later gcc versions.


I think that having the workaround for all versions 4.6.x doesn't really hurt. It is certainly a safer alternative than applying the workaround only for gcc 4.6.0. If at some point, this bug is fixed in a later gcc 4.6.x, then we can still change the spkg accordingly.



---

archive/issue_comments_146597.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-05-04T09:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146597",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_146598.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [drkirkby](#comment%3A22):\n> The changes are not checked in\n> \n> \n> ```\n> drkirkby@hawk:~/sage-4.7.rc0/spkg/standard/sympow-1.018.1.p9$ hg status\n> M SPKG.txt\n> M spkg-install\n> ```\n> \n> That obviously needs fixing.\n\nNever mind this, it will be fixed after positive_review.\n\n> A minor point, gcc 4.6.1 will cause the patch to be applied too, despite the comment saying *\"Working around problems with gcc 4.6.0 on Itanium systems\"*\n\nI have changed the comment slightly to:\n\n```\n        echo \"Detected GCC version `$CC -dumpversion` on Itanium. Adding\"\n        echo \"work-around to fix a bug when sympow is compiled with gcc 4.6.0\"\n```",
    "created_at": "2011-05-04T09:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146598",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>Replying to [drkirkby](#comment%3A22):
> The changes are not checked in
> 
> 
> ```
> drkirkby@hawk:~/sage-4.7.rc0/spkg/standard/sympow-1.018.1.p9$ hg status
> M SPKG.txt
> M spkg-install
> ```
> 
> That obviously needs fixing.

Never mind this, it will be fixed after positive_review.

> A minor point, gcc 4.6.1 will cause the patch to be applied too, despite the comment saying *"Working around problems with gcc 4.6.0 on Itanium systems"*

I have changed the comment slightly to:

```
        echo "Detected GCC version `$CC -dumpversion` on Itanium. Adding"
        echo "work-around to fix a bug when sympow is compiled with gcc 4.6.0"
```



---

archive/issue_comments_146599.json:
```json
{
    "body": "Diff for the sympow spkg, for reviewing only",
    "created_at": "2011-05-04T09:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146599",
    "user": "https://github.com/jdemeyer"
}
```

Diff for the sympow spkg, for reviewing only



---

archive/issue_comments_146600.json:
```json
{
    "body": "<a id='comment:26'></a>Attachment [sympow-1.018.1.p8-p9.diff](tarball://root/attachments/some-uuid/ticket11226/sympow-1.018.1.p8-p9.diff) by @jdemeyer created at 2011-05-05 13:37:16",
    "created_at": "2011-05-05T13:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146600",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>Attachment [sympow-1.018.1.p8-p9.diff](tarball://root/attachments/some-uuid/ticket11226/sympow-1.018.1.p8-p9.diff) by @jdemeyer created at 2011-05-05 13:37:16



---

archive/issue_comments_146601.json:
```json
{
    "body": "Changing author from \"Jeroen Demeyer, Mariah Lenox\" to \"Jeroen Demeyer\"",
    "created_at": "2011-05-05T13:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146601",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Jeroen Demeyer, Mariah Lenox" to "Jeroen Demeyer"



---

archive/issue_comments_146602.json:
```json
{
    "body": "<a id='comment:27'></a>That looks fine, so positive review, though don't forget to commit the changes.",
    "created_at": "2011-05-05T21:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146602",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:27'></a>That looks fine, so positive review, though don't forget to commit the changes.



---

archive/issue_comments_146603.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Kirkby\"",
    "created_at": "2011-05-05T21:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146603",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing reviewer from "" to "David Kirkby"



---

archive/issue_comments_146604.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-05-05T21:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146604",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_146605.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-05-06T07:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146605",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_146606.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.rc2\"",
    "created_at": "2011-05-06T07:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146606",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.rc2"



---

archive/issue_events_029073.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-06T07:18:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11226#event-29073"
}
```



---

archive/issue_comments_146607.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. Little or no feedback.\" to \"Reported upstream. Developers deny it's a bug.\"",
    "created_at": "2011-10-13T19:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146607",
    "user": "https://github.com/jdemeyer"
}
```

Changing upstream from "Reported upstream. Little or no feedback." to "Reported upstream. Developers deny it's a bug."



---

archive/issue_comments_146608.json:
```json
{
    "body": "<a id='comment:29'></a>According to gcc, it's okay to violate the floating-point standard with `-O3`.  They also say the correct workaround is the **undocumented** option\n\n```\n-ffp-contract=on\n```",
    "created_at": "2011-10-13T19:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146608",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>According to gcc, it's okay to violate the floating-point standard with `-O3`.  They also say the correct workaround is the **undocumented** option

```
-ffp-contract=on
```



---

archive/issue_comments_146609.json:
```json
{
    "body": "<a id='comment:30'></a>Sorry, it is documented.  I was looking at documentation of an older gcc.",
    "created_at": "2011-10-13T19:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146609",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>Sorry, it is documented.  I was looking at documentation of an older gcc.



---

archive/issue_comments_146610.json:
```json
{
    "body": "<a id='comment:31'></a>From [http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html):\n\n```\n-ffp-contract=style\n    -ffp-contract=off disables floating-point expression contraction. -ffp-contract=fast enables floating-point expression contraction such as forming of fused multiply-add operations if the target has native support for them. -ffp-contract=on enables floating-point expression contraction if allowed by the language standard. This is currently not implemented and treated equal to -ffp-contract=off.\n\n    The default is -ffp-contract=fast.\n```",
    "created_at": "2011-10-13T19:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146610",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>From [http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html):

```
-ffp-contract=style
    -ffp-contract=off disables floating-point expression contraction. -ffp-contract=fast enables floating-point expression contraction such as forming of fused multiply-add operations if the target has native support for them. -ffp-contract=on enables floating-point expression contraction if allowed by the language standard. This is currently not implemented and treated equal to -ffp-contract=off.

    The default is -ffp-contract=fast.
```



---

archive/issue_comments_146611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,10 +26,10 @@\n \n The following tests failed:\n \n-\tsage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n-\tsage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n-\tsage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n-\tsage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n+sage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n+sage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n+sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n+sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n ----------------------------------------------------------------------\n ```\n \n``````\n",
    "created_at": "2015-09-06T14:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11226#issuecomment-146611",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,10 +26,10 @@
 
 The following tests failed:
 
-	sage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
-	sage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
-	sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
-	sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
+sage -t -long  -force_lib devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
+sage -t -long  -force_lib devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
+sage -t -long  -force_lib devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
+sage -t -long  -force_lib devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
 ----------------------------------------------------------------------
 ```
 
``````

