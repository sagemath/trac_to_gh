# Issue 11976: matrix plot colorbars

archive/issues_011804.json:
```json
{
    "assignees": [],
    "body": "I needed colorbars for matrix plots, so I added them.  I also fixed a small bug in how keyword arguments were being passed in contour plot colorbars.\n\n**Apply**:\n1.  [attachment: trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)\n2.  [attachment: trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)\n\nAssignee: **@jasongrout, @williamstein**\n\nCC:  @kcrisman\n\nAuthor: **Jason Grout**\n\nReviewer: **Rob Beezer**\n\nMerged: **sage-4.8.alpha5**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11976_\n\n",
    "closed_at": "2011-12-17T09:11:01Z",
    "created_at": "2011-11-01T21:02:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "matrix plot colorbars",
    "type": "issue",
    "updated_at": "2011-12-17T09:11:01Z",
    "url": "https://github.com/sagemath/sage/issues/11976",
    "user": "https://github.com/jasongrout"
}
```
I needed colorbars for matrix plots, so I added them.  I also fixed a small bug in how keyword arguments were being passed in contour plot colorbars.

**Apply**:
1.  [attachment: trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)
2.  [attachment: trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)

Assignee: **@jasongrout, @williamstein**

CC:  @kcrisman

Author: **Jason Grout**

Reviewer: **Rob Beezer**

Merged: **sage-4.8.alpha5**

_Issue created by migration from https://trac.sagemath.org/ticket/11976_





---

archive/issue_events_143003.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-11-01T21:02:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143003"
}
```



---

archive/issue_events_143004.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-11-01T21:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143004"
}
```



---

archive/issue_events_143005.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-11-01T21:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143005"
}
```



---

archive/issue_events_143006.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-11-01T21:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143006"
}
```



---

archive/issue_events_143007.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-11-01T21:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143007"
}
```



---

archive/issue_comments_129331.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)**",
    "created_at": "2011-11-01T21:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129331",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)**



---

archive/issue_comments_129332.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129332",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_143008.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143008"
}
```



---

archive/issue_events_143009.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-12-15T18:32:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143009"
}
```



---

archive/issue_comments_129333.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI like the idea behind this a lot.  Using the formatting and colorbar would make doing matrix plots for number theory correctly a snap.  \n\nIs it ok if review waits for SD 35.5, though?  I just don't know if I'll have time for this, even given the relevance to #9958.",
    "created_at": "2011-12-15T18:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129333",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>Comment 3:</a>
I like the idea behind this a lot.  Using the formatting and colorbar would make doing matrix plots for number theory correctly a snap.  

Is it ok if review waits for SD 35.5, though?  I just don't know if I'll have time for this, even given the relevance to #9958.



---

archive/issue_comments_129334.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNice.  Passes tests in the obvious directories.\n\nExperimentally, the colorbar would appear to have a length equal to the longest side of the plot.  So in one orientation it matches the length of the side, aesthetically pleasing.  But in the other orientation it can be grossly larger than the plot.  Maybe to make sure the gradations do not get totally smooshed together in the colormap along the short edge?  \n\nAnyway, several suggestions:\n\n(a) Document the colorbar defaulting to length of long side.\n\n(b) Use the right combination of max/min on matrix dimensions to provide the right rows:columns ratio to always provide a colorbar the same length as the matrix plot.\n\n(c) Clearly document how to accomplish (b) with an option like `colorbar_options={'shrink':0.2} `.  which seems to be the way to accomplish what I'd like to be easily possible.\n\n(d)  (b) and (c)\n\n(e)  None of the above.\n\nI could contribute to the docstring if you want to go that route.  But it has to be now, not much time for this for many days to come.\n\nRob",
    "created_at": "2011-12-16T00:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129334",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:4'>Comment 4:</a>
Nice.  Passes tests in the obvious directories.

Experimentally, the colorbar would appear to have a length equal to the longest side of the plot.  So in one orientation it matches the length of the side, aesthetically pleasing.  But in the other orientation it can be grossly larger than the plot.  Maybe to make sure the gradations do not get totally smooshed together in the colormap along the short edge?  

Anyway, several suggestions:

(a) Document the colorbar defaulting to length of long side.

(b) Use the right combination of max/min on matrix dimensions to provide the right rows:columns ratio to always provide a colorbar the same length as the matrix plot.

(c) Clearly document how to accomplish (b) with an option like `colorbar_options={'shrink':0.2} `.  which seems to be the way to accomplish what I'd like to be easily possible.

(d)  (b) and (c)

(e)  None of the above.

I could contribute to the docstring if you want to go that route.  But it has to be now, not much time for this for many days to come.

Rob



---

archive/issue_comments_129335.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.",
    "created_at": "2011-12-16T01:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129335",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'>Comment 5:</a>
I think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.



---

archive/issue_comments_129336.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@jasongrout](#comment%3A5):\n> I think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.\n\nOK, I'll write a documentation-only patch after dinner and we can trade reviews.",
    "created_at": "2011-12-16T01:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129336",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@jasongrout](#comment%3A5):
> I think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.

OK, I'll write a documentation-only patch after dinner and we can trade reviews.



---

archive/issue_comments_129337.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAttachment: **[trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)**\n\nPatch adds a doctest showing how to change the size of a colorbar.  The default behavior is not as straightforward as I thought, so it would not have been worth the effort to do this automatically.\n\nThere is also some minor cleanup in the documentation, mostly whitespace and line breaks.\n\nWith both patches on 4.8.alpha3 this passes all tests and documentation looks fine.  I'm clear on a positive review on Jason's patch.  If my documentation patch looks OK, go ahead and flip this to positive review.",
    "created_at": "2011-12-16T04:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129337",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'>Comment 7:</a>
Attachment: **[trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)**

Patch adds a doctest showing how to change the size of a colorbar.  The default behavior is not as straightforward as I thought, so it would not have been worth the effort to do this automatically.

There is also some minor cleanup in the documentation, mostly whitespace and line breaks.

With both patches on 4.8.alpha3 this passes all tests and documentation looks fine.  I'm clear on a positive review on Jason's patch.  If my documentation patch looks OK, go ahead and flip this to positive review.



---

archive/issue_comments_129338.json:
```json
{
    "body": "Author: **Jason Grout**",
    "created_at": "2011-12-16T04:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129338",
    "user": "https://github.com/rbeezer"
}
```

Author: **Jason Grout**



---

archive/issue_comments_129339.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n I needed colorbars for matrix plots, so I added them.  I also fixed a small bug in how keyword arguments were being passed in contour plot colorbars.\n+\n+**Apply**:\n+1.  [attachment: trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)\n+2.  [attachment: trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)\n``````\n",
    "created_at": "2011-12-16T04:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129339",
    "user": "https://github.com/rbeezer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 I needed colorbars for matrix plots, so I added them.  I also fixed a small bug in how keyword arguments were being passed in contour plot colorbars.
+
+**Apply**:
+1.  [attachment: trac-11976-matrixcolorbar.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac-11976-matrixcolorbar.patch.gz)
+2.  [attachment: trac_11976-colorbar-sizing.patch.gz](https://github.com/sagemath/sage/files/ticket11976/trac_11976-colorbar-sizing.patch.gz)
``````




---

archive/issue_comments_129340.json:
```json
{
    "body": "Reviewer: **Rob Beezer**",
    "created_at": "2011-12-16T04:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129340",
    "user": "https://github.com/rbeezer"
}
```

Reviewer: **Rob Beezer**



---

archive/issue_comments_129341.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nPositive review on Rob's patch.  The problem turns out to be creating the extra axis for the colorbar.  Horizontally, it spans the full width of the graphic (by default 6 inches, I think).  Usually the actual graphic is cut down to the size of the matrix plot, but since the colorbar is there spanning the entire width, it stays at 6 inches.\n\nYou showed a good solution, though.",
    "created_at": "2011-12-16T05:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129341",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'>Comment 8:</a>
Positive review on Rob's patch.  The problem turns out to be creating the extra axis for the colorbar.  Horizontally, it spans the full width of the graphic (by default 6 inches, I think).  Usually the actual graphic is cut down to the size of the matrix plot, but since the colorbar is there spanning the entire width, it stays at 6 inches.

You showed a good solution, though.



---

archive/issue_events_143010.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-16T05:11:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143010"
}
```



---

archive/issue_events_143011.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-12-16T05:11:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143011"
}
```



---

archive/issue_events_143012.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:11:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143012"
}
```



---

archive/issue_events_143013.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:11:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11976#event-143013"
}
```



---

archive/issue_comments_129342.json:
```json
{
    "body": "Merged: **sage-4.8.alpha5**",
    "created_at": "2011-12-17T09:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11976",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11976#issuecomment-129342",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha5**
