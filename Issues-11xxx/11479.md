# Issue 11479: SAT Solver Interface

archive/issues_011307.json:
```json
{
    "body": "Since sage does not have any boolean satisfiablity support, we should change this :-)\n\nImplement a simple interface to SAT solvers:\n\nIdeas:\n1) Data structures\n- clauses\n- cnf formulas (implements DIMACS converting...)\n- results\n2) Additional features to CNF class\n- various implementations of at most k variables are true\n3) Some examples\n- e.g., Sudoku, vertex cover via binary search\n4) Solver shell/string parsing interface for:\n- MiniSAT\n- RSAT\n- Berkmin\n- Siege\n- zChaff\n\nFurther ideas:\n5) direct C++ Interface (suggested by Martin)\n- MiniSAT\n- RSAT\n- CryptMiniSat\n\n\nSome ideas are attached:\n- sat.py implements \n    - Clause (set of integers inherits from set)\n    - CNFFormula (list of Clauses)\n        - features:\n        - create DIMACS\n        - read from DIMACS\n        - is_satisfiable (calls sat solver)\n        - solve (calls sat solver and returns additional information), next step: obtain satisfiable assignments from solvers\n        - is_horn (do we have HORN clauses only)\n        - is_2cnf (do we have 2 CNF clauses only)\n        - at_most_k_variables_true (adds clauses such that at most k variables are true)\n\n- backend.py\n   - SolverResult (simple result class, needs improvement)\n   - Solver (call SAT solver, process string solver result) \n\n**Assignee:** @jasongrout\n\n**CC:**  @malb @nathanncohen @haraldschilly tmonteil\n\n**Author:** Johannes Fichte\n\nIssue created by migration from https://trac.sagemath.org/ticket/11479\n\n",
    "closed_at": "2014-03-31T12:31:02Z",
    "created_at": "2011-06-14T13:42:28Z",
    "labels": [
        "component: misc",
        "minor",
        "invalid"
    ],
    "title": "SAT Solver Interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11479",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```
Since sage does not have any boolean satisfiablity support, we should change this :-)

Implement a simple interface to SAT solvers:

Ideas:
1) Data structures
- clauses
- cnf formulas (implements DIMACS converting...)
- results
2) Additional features to CNF class
- various implementations of at most k variables are true
3) Some examples
- e.g., Sudoku, vertex cover via binary search
4) Solver shell/string parsing interface for:
- MiniSAT
- RSAT
- Berkmin
- Siege
- zChaff

Further ideas:
5) direct C++ Interface (suggested by Martin)
- MiniSAT
- RSAT
- CryptMiniSat


Some ideas are attached:
- sat.py implements 
    - Clause (set of integers inherits from set)
    - CNFFormula (list of Clauses)
        - features:
        - create DIMACS
        - read from DIMACS
        - is_satisfiable (calls sat solver)
        - solve (calls sat solver and returns additional information), next step: obtain satisfiable assignments from solvers
        - is_horn (do we have HORN clauses only)
        - is_2cnf (do we have 2 CNF clauses only)
        - at_most_k_variables_true (adds clauses such that at most k variables are true)

- backend.py
   - SolverResult (simple result class, needs improvement)
   - Solver (call SAT solver, process string solver result) 

**Assignee:** @jasongrout

**CC:**  @malb @nathanncohen @haraldschilly tmonteil

**Author:** Johannes Fichte

Issue created by migration from https://trac.sagemath.org/ticket/11479





---

archive/attachments_015133.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "backend.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11479/backend.py",
    "created_at": "2011-06-14T13:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```



---

archive/issue_comments_120209.json:
```json
{
    "body": "Basic backend",
    "created_at": "2011-06-14T13:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120209",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```

Basic backend



---

archive/issue_comments_120210.json:
```json
{
    "body": "Clause, CNFFormula",
    "created_at": "2011-06-14T13:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120210",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```

Clause, CNFFormula



---

archive/attachments_015134.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "sat.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11479/sat.py",
    "created_at": "2011-06-14T13:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```



---

archive/issue_comments_120211.json:
```json
{
    "body": "String Processing for MiniSAT",
    "created_at": "2011-06-14T13:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120211",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```

String Processing for MiniSAT



---

archive/attachments_015135.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "minisat.py",
    "asset_url": "tarball://root/attachments/some-uuid/ticket11479/minisat.py",
    "created_at": "2011-07-26T11:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.py",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```



---

archive/issue_comments_120212.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2011-07-26T11:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120212",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_120213.json:
```json
{
    "body": "<a id='comment:2'></a>\nSee also #418.",
    "created_at": "2012-01-04T21:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120213",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
See also #418.



---

archive/issue_comments_120214.json:
```json
{
    "body": "<a id='comment:3'></a>\n> See also #418. \n\nGiven recent activity there, is this a dup?  Of course, there is code here (and #11479) which could be useful, so I won't make that call.",
    "created_at": "2012-06-04T19:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120214",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
> See also #418. 

Given recent activity there, is this a dup?  Of course, there is code here (and #11479) which could be useful, so I won't make that call.



---

archive/issue_comments_120215.json:
```json
{
    "body": "<a id='comment:4'></a>\n#418 interacts only with cryptominisat. #5671 gives a wrapper for miniSAT. RSat and others are still interesting. I suggested here to create a common wrapper for many solvers, but also to create a string-based interface (create DIMACS and parse output) for solvers that are neither open source nor provide a wrapper. I think we should merge the work.",
    "created_at": "2012-06-04T20:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120215",
    "user": "https://trac.sagemath.org/admin/accounts/users/fichtejo"
}
```

<a id='comment:4'></a>
#418 interacts only with cryptominisat. #5671 gives a wrapper for miniSAT. RSat and others are still interesting. I suggested here to create a common wrapper for many solvers, but also to create a string-based interface (create DIMACS and parse output) for solvers that are neither open source nor provide a wrapper. I think we should merge the work.



---

archive/issue_comments_120216.json:
```json
{
    "body": "<a id='comment:5'></a>\nAgreed! I started from scratch because it was simpler for me but we should merge. Perhaps you could add a \"DIMACS\" solver to sage.sat.solvers which would understand the same commands as my cryptominisat solver interface (which we can change to suite your needs as well). This way my higher level code would still be applicable, e.g., the ANF to CNF conversion and the solve() function?",
    "created_at": "2012-06-04T21:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120216",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'></a>
Agreed! I started from scratch because it was simpler for me but we should merge. Perhaps you could add a "DIMACS" solver to sage.sat.solvers which would understand the same commands as my cryptominisat solver interface (which we can change to suite your needs as well). This way my higher level code would still be applicable, e.g., the ANF to CNF conversion and the solve() function?



---

archive/issue_comments_120217.json:
```json
{
    "body": "<a id='comment:6'></a>\nI added DIMACS solvers to !#418.",
    "created_at": "2012-06-15T16:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120217",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
I added DIMACS solvers to !#418.



---

archive/issue_comments_120218.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhat are we going to do with this ticket? There hasn't been any movement in months and there's #418? Close it?",
    "created_at": "2012-12-19T14:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120218",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
What are we going to do with this ticket? There hasn't been any movement in months and there's #418? Close it?



---

archive/issue_events_092711.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92711"
}
```



---

archive/issue_events_092712.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92712"
}
```



---

archive/issue_events_092713.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92713"
}
```



---

archive/issue_events_092714.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92714"
}
```



---

archive/issue_events_092715.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-14T15:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92715"
}
```



---

archive/issue_comments_120219.json:
```json
{
    "body": "<a id='comment:10'></a>\nMost of the suggested features now seem to be available in `sage.sat`, but some ideas may still be relevant. What do people think?",
    "created_at": "2014-03-14T15:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120219",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:10'></a>
Most of the suggested features now seem to be available in `sage.sat`, but some ideas may still be relevant. What do people think?



---

archive/issue_events_092716.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-14T15:31:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92716"
}
```



---

archive/issue_events_092717.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2014-03-14T15:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92717"
}
```



---

archive/issue_comments_120220.json:
```json
{
    "body": "<a id='comment:11'></a>\nWouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?",
    "created_at": "2014-03-14T15:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120220",
    "user": "https://github.com/malb"
}
```

<a id='comment:11'></a>
Wouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?



---

archive/issue_comments_120221.json:
```json
{
    "body": "<a id='comment:12'></a>\n> Wouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?\n\nI agree.  With that in mind, let's also close #5671 and open new tickets for new features.  mmezzarobba, is that okay?",
    "created_at": "2014-03-14T15:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120221",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>
> Wouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?

I agree.  With that in mind, let's also close #5671 and open new tickets for new features.  mmezzarobba, is that okay?



---

archive/issue_comments_120222.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [kcrisman](#comment%3A12):\n> > Wouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?\n\n> I agree.  With that in mind, let's also close #5671 and open new tickets for new features.  mmezzarobba, is that okay?\n\nSorry, apparently I wasn't clear: I was actually suggesting to close this ticket (hence the change to the milestone field), and I don't feel a need for new tickets about the ideas listed here, but I thought some of the ticket's participants might.",
    "created_at": "2014-03-14T16:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120222",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:13'></a>
Replying to [kcrisman](#comment%3A12):
> > Wouldn't it be better to open a new ticket for (each of) the features that you consider missing from `sage.sat`?

> I agree.  With that in mind, let's also close #5671 and open new tickets for new features.  mmezzarobba, is that okay?

Sorry, apparently I wasn't clear: I was actually suggesting to close this ticket (hence the change to the milestone field), and I don't feel a need for new tickets about the ideas listed here, but I thought some of the ticket's participants might.



---

archive/issue_comments_120223.json:
```json
{
    "body": "<a id='comment:14'></a>\nOh. PLease add me in CC of any sat-related ticket you might create :-)\n\nNathann",
    "created_at": "2014-03-14T20:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11479#issuecomment-120223",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Oh. PLease add me in CC of any sat-related ticket you might create :-)

Nathann



---

archive/issue_events_092718.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-03-25T10:33:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92718"
}
```



---

archive/issue_events_092719.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-03-25T10:33:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92719"
}
```



---

archive/issue_events_092720.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-31T12:31:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92720"
}
```



---

archive/issue_events_092721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-31T12:31:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11479",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11479#event-92721"
}
```
