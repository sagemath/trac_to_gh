# Issue 11134: Add logging for Dokchitser scripts

archive/issues_010992.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "The attached patch adds a logfile for the Dokchitser `gp` scripts.  This is something that I personally needed while debugging some issues with a new PARI package (#11130).\n\nKeywords: **dokchitser gp**\n\nComponent: **interfaces**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **John Cremona**\n\nMerged: **sage-4.7.1.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11134_\n\n",
    "closed_at": "2011-04-20T12:51:58Z",
    "created_at": "2011-04-06T07:35:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add logging for Dokchitser scripts",
    "type": "issue",
    "updated_at": "2011-04-20T12:51:58Z",
    "url": "https://github.com/sagemath/sage/issues/11134",
    "user": "https://github.com/jdemeyer"
}
```
The attached patch adds a logfile for the Dokchitser `gp` scripts.  This is something that I personally needed while debugging some issues with a new PARI package (#11130).

Keywords: **dokchitser gp**

Component: **interfaces**

Author: **Jeroen Demeyer**

Reviewer: **John Cremona**

Merged: **sage-4.7.1.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/11134_





---

archive/issue_events_146168.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-06T07:35:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146168"
}
```



---

archive/issue_events_146169.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-06T07:35:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146169"
}
```



---

archive/issue_events_146170.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-06T07:35:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146170"
}
```



---

archive/issue_events_146171.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-06T07:35:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146171"
}
```



---

archive/issue_events_146172.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2011-04-06T07:35:06Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146172"
}
```



---

archive/issue_events_146173.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-06T07:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146173"
}
```



---

archive/issue_events_146174.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-11T20:35:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146174"
}
```



---

archive/issue_events_146175.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-11T20:35:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146175"
}
```



---

archive/issue_comments_110697.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nApplies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.\n\nWould it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?\n\nJohn",
    "created_at": "2011-04-11T20:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110697",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">comment:2</div>

Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.

Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?

John



---

archive/issue_comments_110698.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@JohnCremona](#comment%3A2):\n> Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.\n\nLet me just point out that `gp` (from PARI/GP) always logs by default (but this might be a bad thing too).",
    "created_at": "2011-04-11T20:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110698",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@JohnCremona](#comment%3A2):
> Applies fine t. 4.7.alpha4 and all tests pass.  But I am a little concerned that with the patch, a log file is created whether or not the user wants one.  This differs from the standard pexpect convention that a log file may be requested but is not created by default.

Let me just point out that `gp` (from PARI/GP) always logs by default (but this might be a bad thing too).



---

archive/issue_comments_110699.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+The attached patch adds a logfile for the Dokchitser `gp` scripts.  This is something that I personally needed while debugging some issues with a new PARI package (#11130).\n``````\n",
    "created_at": "2011-04-11T20:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110699",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+The attached patch adds a logfile for the Dokchitser `gp` scripts.  This is something that I personally needed while debugging some issues with a new PARI package (#11130).
``````




---

archive/issue_comments_110700.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@JohnCremona](#comment%3A2):\n> Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?\n\nNot sure, because the Dokchitser stuff is often initialized indirectly.\n\nI could live with the following:\n\n```\nlogfile = None\n# For debugging\n#logfile = os.path.join(DOT_SAGE, 'dokchitser.log')\ng = sage.interfaces.gp.Gp(script_subdirectory='dokchitser', logfile=logfile)\n```",
    "created_at": "2011-04-11T20:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110700",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@JohnCremona](#comment%3A2):
> Would it work to move the logfile parameter to the init function, with default None, and have that function start up the interpreter?

Not sure, because the Dokchitser stuff is often initialized indirectly.

I could live with the following:

```
logfile = None
# For debugging
#logfile = os.path.join(DOT_SAGE, 'dokchitser.log')
g = sage.interfaces.gp.Gp(script_subdirectory='dokchitser', logfile=logfile)
```



---

archive/issue_comments_110701.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI had not noticed that gp always produces a logfile!  I would vote to remove that and make it optional.\n\nI prefer your \"debugging\" option.  This may well need revisiting after we have put in the new-style Dokchitser interface as worked on by Henri Cohen and me and Martin Raum recently -- I ost track of where that got to.",
    "created_at": "2011-04-11T20:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110701",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

I had not noticed that gp always produces a logfile!  I would vote to remove that and make it optional.

I prefer your "debugging" option.  This may well need revisiting after we have put in the new-style Dokchitser interface as worked on by Henri Cohen and me and Martin Raum recently -- I ost track of where that got to.



---

archive/issue_comments_110702.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe best solution would be to have some kind of global \"logging\" option, similar to the \"proof\" option that we have currently in Sage.  However, this is certainly a more complex solution and not high on my priority list.",
    "created_at": "2011-04-11T20:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110702",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

The best solution would be to have some kind of global "logging" option, similar to the "proof" option that we have currently in Sage.  However, this is certainly a more complex solution and not high on my priority list.



---

archive/issue_events_146176.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T20:49:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146176"
}
```



---

archive/issue_events_146177.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-11T20:49:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146177"
}
```



---

archive/issue_comments_110703.json:
```json
{
    "body": "Attachment: **[11134_dokchitser.patch.gz](https://github.com/sagemath/sage/files/ticket11134/11134_dokchitser.patch.gz)**",
    "created_at": "2011-04-14T18:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110703",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[11134_dokchitser.patch.gz](https://github.com/sagemath/sage/files/ticket11134/11134_dokchitser.patch.gz)**



---

archive/issue_comments_110704.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2011-04-14T18:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110704",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **John Cremona**



---

archive/issue_events_146178.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:53:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146178"
}
```



---

archive/issue_events_146179.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:53:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146179"
}
```



---

archive/issue_events_146180.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:53:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146180"
}
```



---

archive/issue_events_146181.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-14T18:53:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146181"
}
```



---

archive/issue_comments_110705.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@JohnCremona](#comment%3A5):\n> I prefer your \"debugging\" option.\n\nDone.  I chose the simplest solution for this ticket, but you are right that there is work to be done concerning logging (but not on this ticket).",
    "created_at": "2011-04-14T18:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110705",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@JohnCremona](#comment%3A5):
> I prefer your "debugging" option.

Done.  I chose the simplest solution for this ticket, but you are right that there is work to be done concerning logging (but not on this ticket).



---

archive/issue_comments_110706.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nLooks fine, testing now...",
    "created_at": "2011-04-15T15:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110706",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

Looks fine, testing now...



---

archive/issue_comments_110707.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@JohnCremona](#comment%3A8):\n> Looks fine, testing now...\n\n... and all passed.",
    "created_at": "2011-04-15T16:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110707",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@JohnCremona](#comment%3A8):
> Looks fine, testing now...

... and all passed.



---

archive/issue_events_146182.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-15T16:19:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146182"
}
```



---

archive/issue_events_146183.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-04-15T16:19:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146183"
}
```



---

archive/issue_events_146184.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T12:51:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146184"
}
```



---

archive/issue_events_146185.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-20T12:51:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11134#event-146185"
}
```



---

archive/issue_comments_110708.json:
```json
{
    "body": "Merged: **sage-4.7.1.alpha0**",
    "created_at": "2011-04-20T12:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11134#issuecomment-110708",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.alpha0**
