# Issue 11839: sage.symbolic.expression.Expression.collect has no documentation

archive/issues_011667.json:
```json
{
    "assignees": [],
    "body": "The documentation for Expression.collect() has examples, but doesn't actually tell you what it's supposed to do.\n\nAssignee: **@sagetrac-mvngu**\n\nReviewer: **Karl-Dieter Crisman, Travis Scrimshaw**\n\nAuthor: **Michael Orlitzky**\n\nMerged: **sage-5.6.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11839_\n\n",
    "closed_at": "2012-12-18T11:17:03Z",
    "created_at": "2011-09-23T19:23:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.symbolic.expression.Expression.collect has no documentation",
    "type": "issue",
    "updated_at": "2012-12-18T11:17:03Z",
    "url": "https://github.com/sagemath/sage/issues/11839",
    "user": "https://github.com/orlitzky"
}
```
The documentation for Expression.collect() has examples, but doesn't actually tell you what it's supposed to do.

Assignee: **@sagetrac-mvngu**

Reviewer: **Karl-Dieter Crisman, Travis Scrimshaw**

Author: **Michael Orlitzky**

Merged: **sage-5.6.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/11839_





---

archive/issue_events_145603.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2011-09-23T19:23:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145603"
}
```



---

archive/issue_events_145604.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2011-09-23T19:23:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145604"
}
```



---

archive/issue_events_145605.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2011-09-23T19:23:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145605"
}
```



---

archive/issue_events_145606.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2011-09-23T19:23:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145606"
}
```



---

archive/issue_events_145607.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-05-30T16:27:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145607"
}
```



---

archive/issue_comments_126035.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2012-05-30T16:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126035",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_events_145608.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-01T19:51:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145608"
}
```



---

archive/issue_events_145609.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-01T19:51:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145609"
}
```



---

archive/issue_comments_126036.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2012-06-01T19:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126036",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_126037.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI think that this is pretty good overall, but the random test is a little weak, because they are very small polys.  Check out a few!\n\nInstead, \n\n```\nsage: base = QQ['y']\nsage: polynomials = base['x']\nsage: f = SR(polynomials.random_element(8)); g = f.expand().collect(x); print f; print g; bool(f == g)\n```\ngives us a more robust one.  Can you think of even more crazy ones?  We could do arbitrarily wacky ones... but at least this show the collect in action; the current test rarely does, as far as I can tell.",
    "created_at": "2012-06-01T19:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126037",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">Comment 2</div>

I think that this is pretty good overall, but the random test is a little weak, because they are very small polys.  Check out a few!

Instead, 

```
sage: base = QQ['y']
sage: polynomials = base['x']
sage: f = SR(polynomials.random_element(8)); g = f.expand().collect(x); print f; print g; bool(f == g)
```
gives us a more robust one.  Can you think of even more crazy ones?  We could do arbitrarily wacky ones... but at least this show the collect in action; the current test rarely does, as far as I can tell.



---

archive/issue_comments_126038.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI left it kind of simple because I've seen expression equality fail on some \"easy\" cases. A result of `bool(f == g) == False` just means \"I couldn't prove that `f == g`\".\n\nIn that regard the test is only correct if it's going to generate very simple (i.e. comparable) expressions. We could go higher than the default of degree 2 probably, but I didn't feel like spending too much time thinking about it, either.",
    "created_at": "2012-06-01T20:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126038",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:3" align="right">Comment 3</div>

I left it kind of simple because I've seen expression equality fail on some "easy" cases. A result of `bool(f == g) == False` just means "I couldn't prove that `f == g`".

In that regard the test is only correct if it's going to generate very simple (i.e. comparable) expressions. We could go higher than the default of degree 2 probably, but I didn't feel like spending too much time thinking about it, either.



---

archive/issue_comments_126039.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\n> I left it kind of simple because I've seen expression equality fail on some \"easy\" cases. A result of `bool(f == g) == False` just means \"I couldn't prove that `f == g`\".\n\n???  I'd like to see this.  I think that the kind of examples that the code I posted would generate shouldn't have that happen - we're not talking complicated polynomials here.\n\n> In that regard the test is only correct if it's going to generate very simple (i.e. comparable) expressions. We could go higher than the default of degree 2 probably, but I didn't feel like spending too much time thinking about it, either.\n\nWell, considering that the current tests don't actually generate expressions that have anything to collect, I'd prefer at least something with two variables.",
    "created_at": "2012-06-02T04:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126039",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">Comment 4</div>

> I left it kind of simple because I've seen expression equality fail on some "easy" cases. A result of `bool(f == g) == False` just means "I couldn't prove that `f == g`".

???  I'd like to see this.  I think that the kind of examples that the code I posted would generate shouldn't have that happen - we're not talking complicated polynomials here.

> In that regard the test is only correct if it's going to generate very simple (i.e. comparable) expressions. We could go higher than the default of degree 2 probably, but I didn't feel like spending too much time thinking about it, either.

Well, considering that the current tests don't actually generate expressions that have anything to collect, I'd prefer at least something with two variables.



---

archive/issue_events_145610.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-06-12T06:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145610"
}
```



---

archive/issue_events_145611.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-06-12T06:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145611"
}
```



---

archive/issue_comments_126040.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI was worried about things like,\n\n```\nsage: bool(1/3*sqrt(2/5) == 2/3*sqrt(1/10))\nFalse\n```\n\nand the fact that the relevant Ginac code calls expand:\n\n```\n// correct for lost fractional arguments and return\nreturn x + (*this - x).expand();\n```\n\nbut I think I've convinced myself that this won't matter because we'll be expanding zero in that last statement.\n\nPatch has been updated.",
    "created_at": "2012-06-12T06:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126040",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:5" align="right">Comment 5</div>

I was worried about things like,

```
sage: bool(1/3*sqrt(2/5) == 2/3*sqrt(1/10))
False
```

and the fact that the relevant Ginac code calls expand:

```
// correct for lost fractional arguments and return
return x + (*this - x).expand();
```

but I think I've convinced myself that this won't matter because we'll be expanding zero in that last statement.

Patch has been updated.



---

archive/issue_comments_126041.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThis fixes part of #9046, incidentally.",
    "created_at": "2012-07-07T02:53:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126041",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">Comment 6</div>

This fixes part of #9046, incidentally.



---

archive/issue_comments_126042.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nThe patchbot and myself gets some small fuzz, however I don't know offhand which patch this needs to be rebased off:\n\n```\npatching file sage/symbolic/expression.pyx\nHunk #1 succeeded at 5115 with fuzz 1 (offset 274 lines).\nnow at: sage-trac_11839.patch\n```\nAlso could you please remove all trailing whitespace and remove the dollar signs `$` (the single backticks <code>\\`</code> takes it into math mode). Otherwise looks good.",
    "created_at": "2012-11-18T06:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126042",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">Comment 7</div>

The patchbot and myself gets some small fuzz, however I don't know offhand which patch this needs to be rebased off:

```
patching file sage/symbolic/expression.pyx
Hunk #1 succeeded at 5115 with fuzz 1 (offset 274 lines).
now at: sage-trac_11839.patch
```
Also could you please remove all trailing whitespace and remove the dollar signs `$` (the single backticks <code>\`</code> takes it into math mode). Otherwise looks good.



---

archive/issue_comments_126043.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Travis Scrimshaw**",
    "created_at": "2012-11-18T06:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126043",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Travis Scrimshaw**



---

archive/issue_comments_126044.json:
```json
{
    "body": "Attachment: **[sage-trac_11839.patch.gz](https://github.com/sagemath/sage/files/ticket11839/sage-trac_11839.patch.gz)**\n\nClean up whitespace, math-mode, and fuzz",
    "created_at": "2012-11-18T23:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126044",
    "user": "https://github.com/orlitzky"
}
```

Attachment: **[sage-trac_11839.patch.gz](https://github.com/sagemath/sage/files/ticket11839/sage-trac_11839.patch.gz)**

Clean up whitespace, math-mode, and fuzz



---

archive/issue_comments_126045.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThe fuzz was on the blank line before `def collect(...)`. Someone added a tab there.\n\nI've fixed the other issues as well, thanks for taking a look.",
    "created_at": "2012-11-18T23:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126045",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:8" align="right">Comment 8</div>

The fuzz was on the blank line before `def collect(...)`. Someone added a tab there.

I've fixed the other issues as well, thanks for taking a look.



---

archive/issue_comments_126046.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nLooks good to me. Thanks.",
    "created_at": "2012-11-18T23:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126046",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

Looks good to me. Thanks.



---

archive/issue_events_145612.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-18T23:45:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145612"
}
```



---

archive/issue_events_145613.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2012-11-18T23:45:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145613"
}
```



---

archive/issue_comments_126047.json:
```json
{
    "body": "Merged: **sage-5.6.beta0**",
    "created_at": "2012-12-18T11:17:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11839#issuecomment-126047",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta0**



---

archive/issue_events_145614.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T11:17:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145614"
}
```



---

archive/issue_events_145615.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-18T11:17:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11839",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11839#event-145615"
}
```
