# Issue 11445: symbolic integration fails on a very simple test case

archive/issues_011273.json:
```json
{
    "assignees": [],
    "body": "The following happens\n\n```\nsage: var(\"x\")\nx\nsage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x), (x,-Infinity,Infinity))\n0\nsage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),(x,-Infinity,10))\n2\n```\nThe second answer is the correct one, of course...\n\n\n\nAssignee: **@burcin**\n\nCC:  @kcrisman\n\nKeywords: **integrate**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **Karl-Dieter Crisman**\n\nAuthor: **Michael Orlitzky**\n\nMerged: **sage-5.0.beta11**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11445_\n\n",
    "closed_at": "2012-03-28T10:03:04Z",
    "created_at": "2011-06-07T20:57:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "symbolic integration fails on a very simple test case",
    "type": "issue",
    "updated_at": "2012-03-28T10:03:04Z",
    "url": "https://github.com/sagemath/sage/issues/11445",
    "user": "https://github.com/sagetrac-pdehaye"
}
```
The following happens

```
sage: var("x")
x
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x), (x,-Infinity,Infinity))
0
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),(x,-Infinity,10))
2
```
The second answer is the correct one, of course...



Assignee: **@burcin**

CC:  @kcrisman

Keywords: **integrate**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **Karl-Dieter Crisman**

Author: **Michael Orlitzky**

Merged: **sage-5.0.beta11**

_Issue created by migration from https://trac.sagemath.org/ticket/11445_





---

archive/issue_events_134535.json:
```json
{
    "actor": "https://github.com/sagetrac-pdehaye",
    "created_at": "2011-06-07T20:57:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134535"
}
```



---

archive/issue_events_134536.json:
```json
{
    "actor": "https://github.com/sagetrac-pdehaye",
    "created_at": "2011-06-07T20:57:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "component: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134536"
}
```



---

archive/issue_events_134537.json:
```json
{
    "actor": "https://github.com/sagetrac-pdehaye",
    "created_at": "2011-06-07T20:57:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134537"
}
```



---

archive/issue_events_134538.json:
```json
{
    "actor": "https://github.com/sagetrac-pdehaye",
    "created_at": "2011-06-07T20:57:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134538"
}
```



---

archive/issue_comments_117974.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThis also happens in Maxima.\n\n```\n\nMaxima 5.24.0 http://maxima.sourceforge.net\nusing Lisp SBCL 1.0.24\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,10);\n(%o1)                                  2\n(%i2) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,inf);\n(%o2)                                  0\n```\nI don't know that I would call this \"very simple\", though, as integrating absolute value things is somewhat tricky when done symbolically.",
    "created_at": "2011-06-07T21:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117974",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'>Comment 1:</a>
This also happens in Maxima.

```

Maxima 5.24.0 http://maxima.sourceforge.net
using Lisp SBCL 1.0.24
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,10);
(%o1)                                  2
(%i2) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,inf);
(%o2)                                  0
```
I don't know that I would call this "very simple", though, as integrating absolute value things is somewhat tricky when done symbolically.



---

archive/issue_comments_117975.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2011-06-07T21:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117975",
    "user": "https://github.com/kcrisman"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_117976.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nsure, but certainly something i would hope works! also not sure how much of it is due to the infinite interval and how much due to the function itself",
    "created_at": "2011-06-07T21:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117976",
    "user": "https://github.com/sagetrac-pdehaye"
}
```

<a id='comment:2'>Comment 2:</a>
sure, but certainly something i would hope works! also not sure how much of it is due to the infinite interval and how much due to the function itself



---

archive/issue_comments_117977.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThis is now [reported at this location](https://sourceforge.net/tracker/?func=detail&aid=3313531&group_id=4933&atid=104933).",
    "created_at": "2011-06-08T03:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117977",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>Comment 3:</a>
This is now [reported at this location](https://sourceforge.net/tracker/?func=detail&aid=3313531&group_id=4933&atid=104933).



---

archive/issue_comments_117978.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**",
    "created_at": "2011-06-08T03:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117978",
    "user": "https://github.com/kcrisman"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Little or no feedback.**



---

archive/issue_comments_117979.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nfixed over there",
    "created_at": "2011-06-13T07:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117979",
    "user": "https://github.com/sagetrac-pdehaye"
}
```

<a id='comment:4'>Comment 4:</a>
fixed over there



---

archive/issue_comments_117980.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Little or no feedback.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2011-06-13T07:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117980",
    "user": "https://github.com/sagetrac-pdehaye"
}
```

Changed upstream from **Reported upstream. Little or no feedback.** to **Fixed upstream, in a later stable release.**



---

archive/issue_events_134539.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-15T21:22:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134539"
}
```



---

archive/issue_events_134540.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-06-15T21:22:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134540"
}
```



---

archive/issue_comments_117981.json:
```json
{
    "body": "Doctest for the correct result.",
    "created_at": "2012-03-22T13:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117981",
    "user": "https://github.com/orlitzky"
}
```

Doctest for the correct result.



---

archive/issue_events_134541.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-03-22T13:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134541"
}
```



---

archive/issue_comments_117982.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2012-03-22T13:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117982",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_117983.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAttachment: **[sage-trac_11445.patch.gz](https://github.com/sagemath/sage/files/ticket11445/sage-trac_11445.patch.gz)**\n\nFixed now that we've got Maxima 5.26.0. Here's a doctest.",
    "created_at": "2012-03-22T13:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117983",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:7'>Comment 7:</a>
Attachment: **[sage-trac_11445.patch.gz](https://github.com/sagemath/sage/files/ticket11445/sage-trac_11445.patch.gz)**

Fixed now that we've got Maxima 5.26.0. Here's a doctest.



---

archive/issue_comments_117984.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2012-03-22T14:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117984",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_117985.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI probably would have put it in `sage.symbolic.integration.integral.integral` somewhere, where there are lots of tests, but I guess this is fine, and otherwise all is well.  I'd hate to have you rebase it to that other location, seems a waste... but then again, that's where they are...\n\nOr what do you think?  The problem is that we have no canonical location for integral stuff.  `integrate?` is a wasteland, though it points to better sources of doc.",
    "created_at": "2012-03-22T14:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117985",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>Comment 8:</a>
I probably would have put it in `sage.symbolic.integration.integral.integral` somewhere, where there are lots of tests, but I guess this is fine, and otherwise all is well.  I'd hate to have you rebase it to that other location, seems a waste... but then again, that's where they are...

Or what do you think?  The problem is that we have no canonical location for integral stuff.  `integrate?` is a wasteland, though it points to better sources of doc.



---

archive/issue_events_134542.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-03-22T14:23:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134542"
}
```



---

archive/issue_events_134543.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-03-22T14:23:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134543"
}
```



---

archive/issue_comments_117986.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI honestly went through the same thought process. At first, I thought, \"I'll put it with the Maxima stuff because it was a Maxima bug.\" But then I thought, what if we ever drop Maxima completely? This isn't a *Maxima* test: this tests that our integration works. Whatever we would replace Maxima with should also pass this test!\n\nThen, I had to decide whether to put it in functional.py or under symbolics. I settled on this because it's what gets called first when the user calls `integrate()`. It's also where you're sent if you look up the code with `integrate?` or `integrate??`, so to stay true to the report on the ticket, I put it there.\n\nIf the reporter had done,\n\n```\nf = abs(x - 1) + abs(x + 1) - 2*abs(x)\nf.integral(...)\n```\n\nI probably would have stuck it in symbolics. It's no big deal to move it, in any case.",
    "created_at": "2012-03-22T14:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117986",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:9'>Comment 9:</a>
I honestly went through the same thought process. At first, I thought, "I'll put it with the Maxima stuff because it was a Maxima bug." But then I thought, what if we ever drop Maxima completely? This isn't a *Maxima* test: this tests that our integration works. Whatever we would replace Maxima with should also pass this test!

Then, I had to decide whether to put it in functional.py or under symbolics. I settled on this because it's what gets called first when the user calls `integrate()`. It's also where you're sent if you look up the code with `integrate?` or `integrate??`, so to stay true to the report on the ticket, I put it there.

If the reporter had done,

```
f = abs(x - 1) + abs(x + 1) - 2*abs(x)
f.integral(...)
```

I probably would have stuck it in symbolics. It's no big deal to move it, in any case.



---

archive/issue_comments_117987.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nWell, you'll notice that I did give positive review.  You are right about the integration tests not belonging in the Maxima docs, of course.",
    "created_at": "2012-03-22T17:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117987",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>Comment 10:</a>
Well, you'll notice that I did give positive review.  You are right about the integration tests not belonging in the Maxima docs, of course.



---

archive/issue_events_134544.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T10:03:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134544"
}
```



---

archive/issue_events_134545.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T10:03:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11445#event-134545"
}
```



---

archive/issue_comments_117988.json:
```json
{
    "body": "Merged: **sage-5.0.beta11**",
    "created_at": "2012-03-28T10:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11445",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11445#issuecomment-117988",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta11**
