# Issue 11994: Vertex separation and pathwidth in Sage

archive/issues_011822.json:
```json
{
    "body": "Hello everybody !\n\nThis algorithm implements some methods to compute the vertex separation of a digraph and the pathwidth of a digraph for *small* graphs (less than 32 vertices)\n\nIt should be followed by many others dealing with process number an alternative methods to compute the same parameters\n\n**Assignee:** @jasongrout, @nathanncohen, @rlmill\n\n**CC:**  @dcoudert\n\n**Author:** Nathann Cohen\n\n**Reviewer:** David Coudert\n\n**Merged:** sage-4.8.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/11994\n\n",
    "closed_at": "2011-11-10T13:30:29Z",
    "created_at": "2011-11-05T12:16:24Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "title": "Vertex separation and pathwidth in Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/11994",
    "user": "https://github.com/nathanncohen"
}
```
Hello everybody !

This algorithm implements some methods to compute the vertex separation of a digraph and the pathwidth of a digraph for *small* graphs (less than 32 vertices)

It should be followed by many others dealing with process number an alternative methods to compute the same parameters

**Assignee:** @jasongrout, @nathanncohen, @rlmill

**CC:**  @dcoudert

**Author:** Nathann Cohen

**Reviewer:** David Coudert

**Merged:** sage-4.8.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/11994





---

archive/issue_events_096986.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-05T17:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96986"
}
```



---

archive/issue_comments_129564.json:
```json
{
    "body": "<a id='comment:1'></a>\nYet another well-documented patch for Sage's library.\n\nI put the files in the graph_decompositions folder, which is also the one used by rank-decompositions in patch #11754\n\nNow needs a review ! `:-)`\n\nNathann",
    "created_at": "2011-11-05T17:38:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129564",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
Yet another well-documented patch for Sage's library.

I put the files in the graph_decompositions folder, which is also the one used by rank-decompositions in patch #11754

Now needs a review ! `:-)`

Nathann



---

archive/issue_comments_129565.json:
```json
{
    "body": "<a id='comment:2'></a>\nGee, that looks like some pretty nice bit-counting code.  Any chance you could just enhance bitset.pxi and then use the bitset functions, like bitset_len()?",
    "created_at": "2011-11-05T20:06:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129565",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
Gee, that looks like some pretty nice bit-counting code.  Any chance you could just enhance bitset.pxi and then use the bitset functions, like bitset_len()?



---

archive/issue_comments_129566.json:
```json
{
    "body": "<a id='comment:3'></a>\n(there is lots of other code using the bitset structures, so enhancing the bitset code to be better would be a nice plus here).",
    "created_at": "2011-11-05T20:07:04Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129566",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
(there is lots of other code using the bitset structures, so enhancing the bitset code to be better would be a nice plus here).



---

archive/issue_comments_129567.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello Jason !\n\nWell, there is actually not much bit-counting going on. :-)\n\nI have to count bits very often in integers, hence the corresponding function in the code, but most of the code is really graph theoretical. I would have been glad to use bitsets (and I often do these days in Sage patches), but the code was just faster when I stored a small integer for each object, and not just a bit. So I'm using char * instead of bitsets :-)\n\nThouh I'm a very, very good fan of bitsets in general. I just love this thing :-)\n\nNathann",
    "created_at": "2011-11-05T20:11:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129567",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Hello Jason !

Well, there is actually not much bit-counting going on. :-)

I have to count bits very often in integers, hence the corresponding function in the code, but most of the code is really graph theoretical. I would have been glad to use bitsets (and I often do these days in Sage patches), but the code was just faster when I stored a small integer for each object, and not just a bit. So I'm using char * instead of bitsets :-)

Thouh I'm a very, very good fan of bitsets in general. I just love this thing :-)

Nathann



---

archive/issue_comments_129568.json:
```json
{
    "body": "<a id='comment:5'></a>\nI assure you, I use this code a *LOT* myself but I really don't think there's anything in my code that could be of use in bitsets. I can actually prove it ! `:-D`\n\n#11729 #10905 #10432\n\nBut I swear there are other examples as well as a wealth of personnal code using it ! I won't be proved unthankful to bitsets. NEVER `:-D`\n\nNathann",
    "created_at": "2011-11-05T20:17:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129568",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
I assure you, I use this code a *LOT* myself but I really don't think there's anything in my code that could be of use in bitsets. I can actually prove it ! `:-D`

#11729 #10905 #10432

But I swear there are other examples as well as a wealth of personnal code using it ! I won't be proved unthankful to bitsets. NEVER `:-D`

Nathann



---

archive/issue_comments_129569.json:
```json
{
    "body": "<a id='comment:6'></a>\nJust a few more comments about the Cython:  \"for 1<= i< n\" is a backwards-compatible syntax, but I would think that the recommended syntax these days is \"for i in range(n)\" (see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops)\n\nI see that you import the bitset functions, but I guess you never use them in fast_digraph.pyx.  The popcount function was what I was referring to when I said that it would be useful in the bitset.pxi class.\n\n\nP.S. I would *love* to have in-line commenting on patches, like on googlecode, github, or bitbucket!",
    "created_at": "2011-11-05T20:48:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129569",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
Just a few more comments about the Cython:  "for 1<= i< n" is a backwards-compatible syntax, but I would think that the recommended syntax these days is "for i in range(n)" (see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops)

I see that you import the bitset functions, but I guess you never use them in fast_digraph.pyx.  The popcount function was what I was referring to when I said that it would be useful in the bitset.pxi class.


P.S. I would *love* to have in-line commenting on patches, like on googlecode, github, or bitbucket!



---

archive/issue_comments_129570.json:
```json
{
    "body": "<a id='comment:7'></a>\nOh ! I'll try to remember the \"i in range()\" thing, it just scares me to use Python abstractions when I am in Cython, but if I can remember that it is totally equivalent for Cython.. `:-)`\n\nOops, sorry about the bitsets... Yes, in earlier versions I tried to use them but I found a workaround which improved the performances when using a different data structure... I feel guilty when I don't use bitsets in an enumerative code `:-)`\n\nThe important thing about the bitset function is the following : the best is to use the __builtin_popcount() function from GCC when the processor has the popcnt instruction (it is *really* faster), and this can be enabled by adding \n\n```\n#cargs -mpopcnt\n```\n\nat the beginning of the code. On the other hand, when the processor does not know this instruction the code crashes (\"invalid instruction\"). It'd be great to \"use this instruction when available\", and this other short code otherwise. This would really be GREAT `:-)`\n\nNathann",
    "created_at": "2011-11-05T20:54:52Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129570",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Oh ! I'll try to remember the "i in range()" thing, it just scares me to use Python abstractions when I am in Cython, but if I can remember that it is totally equivalent for Cython.. `:-)`

Oops, sorry about the bitsets... Yes, in earlier versions I tried to use them but I found a workaround which improved the performances when using a different data structure... I feel guilty when I don't use bitsets in an enumerative code `:-)`

The important thing about the bitset function is the following : the best is to use the __builtin_popcount() function from GCC when the processor has the popcnt instruction (it is *really* faster), and this can be enabled by adding 

```
#cargs -mpopcnt
```

at the beginning of the code. On the other hand, when the processor does not know this instruction the code crashes ("invalid instruction"). It'd be great to "use this instruction when available", and this other short code otherwise. This would really be GREAT `:-)`

Nathann



---

archive/issue_comments_129571.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhat about the popcount code in this first answer: http://stackoverflow.com/questions/1925964/profiling-a-set-implementation-on-64-bit-machines",
    "created_at": "2011-11-05T20:58:07Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129571",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
What about the popcount code in this first answer: http://stackoverflow.com/questions/1925964/profiling-a-set-implementation-on-64-bit-machines



---

archive/issue_comments_129572.json:
```json
{
    "body": "<a id='comment:9'></a>\nWell.. So he's saying \"use the builtin and trust GCC to recognize the platform\". Only it does not in my situation and I need to say something to GCC about my platfom so that it compiles it with this instruction enabled. We have to find a way to provide this information when Sage gets compiled, or to let it guess if it can be used. Now the thing is that if you compile Sage'binaries on a platform that has it, and somebody else uses it....BOOM ! `:-D\n\nI'd be glad to continue this discussion somewhere else, though. This patch will be long to review, and counting bits should not be the main problem there `^^;`\n\nNathann",
    "created_at": "2011-11-05T21:03:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129572",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Well.. So he's saying "use the builtin and trust GCC to recognize the platform". Only it does not in my situation and I need to say something to GCC about my platfom so that it compiles it with this instruction enabled. We have to find a way to provide this information when Sage gets compiled, or to let it guess if it can be used. Now the thing is that if you compile Sage'binaries on a platform that has it, and somebody else uses it....BOOM ! `:-D

I'd be glad to continue this discussion somewhere else, though. This patch will be long to review, and counting bits should not be the main problem there `^^;`

Nathann



---

archive/issue_comments_129573.json:
```json
{
    "body": "<a id='comment:10'></a>\nGood point, and good call on the discussion.\n\nAt the very least, I guess the includes of bitset.* should be removed at some point...",
    "created_at": "2011-11-05T21:09:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129573",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
Good point, and good call on the discussion.

At the very least, I guess the includes of bitset.* should be removed at some point...



---

archive/issue_comments_129574.json:
```json
{
    "body": "<a id='comment:11'></a>\nThat's for sure : updated `:-)`\n\nNathann",
    "created_at": "2011-11-05T21:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129574",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
That's for sure : updated `:-)`

Nathann



---

archive/issue_comments_129575.json:
```json
{
    "body": "**Reviewer:** David Coudert",
    "created_at": "2011-11-05T21:57:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129575",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** David Coudert



---

archive/issue_events_096987.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-05T21:57:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96987"
}
```



---

archive/issue_events_096988.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-05T21:57:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96988"
}
```



---

archive/issue_comments_129576.json:
```json
{
    "body": "<a id='comment:12'></a>\nVery nice patch Nathann !\n\nI have some comments / improvements propositions that could be discussed\n\n1) You should first use a mapping function from vertex labels to integer, and do the reverse mapping at the end. This is to solve the following problem:\n\n```\nsage: D=digraphs.DeBruijn(2,3)\nsage: D.edges()\n[('000', '000', '0'), ('000', '001', '1'), ('001', '010', '0'), ('001', '011', '1'), ('010', '100', '0'), ('010', '101', '1'), ('011', '110', '0'), ('011', '111', '1'), ('100', '000', '0'), ('100', '001', '1'), ('101', '010', '0'), ('101', '011', '1'), ('110', '100', '0'), ('110', '101', '1'), ('111', '110', '0'), ('111', '111', '1')]\nsage: vs.vertex_separation(D)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<ipython console> in <module>()\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.vertex_separation (sage/graphs/graph_decompositions/vertex_separation.c:1603)()\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.FastDigraph.__cinit__ (sage/graphs/graph_decompositions/vertex_separation.c:687)()\n\nTypeError: an integer is required\nsage: \n\n```\n2) The MemoryError message is not displayed.  Your code is:\n\n```\nraise MemoryError(\"Memory allocation failed. Is there enough memory around ?\") \n```\nand I see\n\n```\nsage: D=digraphs.RandomDirectedGNP(31,.3)\nsage: %time vs.vertex_separation(D)\npython(26950) malloc: *** mmap(size=18446744071562067968) failed (error code=12)\n*** error: can't allocate region\n*** set a breakpoint in malloc_error_break to debug\n---------------------------------------------------------------------------\nMemoryError                               Traceback (most recent call last)\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<ipython console> in <module>()\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/IPython/iplib.pyc in ipmagic(self, arg_s)\n   1180         else:\n   1181             magic_args = self.var_expand(magic_args,1)\n-> 1182             return fn(magic_args)\n   1183 \n   1184     def ipalias(self,arg_s):\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/IPython/Magic.pyc in magic_time(self, parameter_s)\n   1979         if mode=='eval':\n   1980             st = clk()\n-> 1981             out = eval(code,glob)\n   1982             end = clk()\n   1983         else:\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<timed eval> in <module>()\n\n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.vertex_separation (sage/graphs/graph_decompositions/vertex_separation.c:1680)()\n\nMemoryError: \nsage: \n```\n3) small typos in the doc\nwll -> will\n\n```\n88\tthere. This way, a large number of sets wll never be evaluated and *a lot* of \n```\n\n\nmin -> \\min\n\n```\n96\tit by `\\max (c'(S), \\min_{\\text{next}})` (where `min_{\\text{next}}` is the \n```\n\n\nshould translate in english ;-)\n\n```\n320\t        print \"Reservation de la memoire\" \n```\n\n\n\n\n4) You could rename your function for instance vertex_separation_32, and then add a frontend function called vertex_separation calling vertex_separation_32. The goal is to have a more generic function allowing to add other implementations / methods for the vertex separation...",
    "created_at": "2011-11-05T21:57:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129576",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
Very nice patch Nathann !

I have some comments / improvements propositions that could be discussed

1) You should first use a mapping function from vertex labels to integer, and do the reverse mapping at the end. This is to solve the following problem:

```
sage: D=digraphs.DeBruijn(2,3)
sage: D.edges()
[('000', '000', '0'), ('000', '001', '1'), ('001', '010', '0'), ('001', '011', '1'), ('010', '100', '0'), ('010', '101', '1'), ('011', '110', '0'), ('011', '111', '1'), ('100', '000', '0'), ('100', '001', '1'), ('101', '010', '0'), ('101', '011', '1'), ('110', '100', '0'), ('110', '101', '1'), ('111', '110', '0'), ('111', '111', '1')]
sage: vs.vertex_separation(D)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<ipython console> in <module>()

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.vertex_separation (sage/graphs/graph_decompositions/vertex_separation.c:1603)()

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.FastDigraph.__cinit__ (sage/graphs/graph_decompositions/vertex_separation.c:687)()

TypeError: an integer is required
sage: 

```
2) The MemoryError message is not displayed.  Your code is:

```
raise MemoryError("Memory allocation failed. Is there enough memory around ?") 
```
and I see

```
sage: D=digraphs.RandomDirectedGNP(31,.3)
sage: %time vs.vertex_separation(D)
python(26950) malloc: *** mmap(size=18446744071562067968) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
---------------------------------------------------------------------------
MemoryError                               Traceback (most recent call last)

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<ipython console> in <module>()

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/IPython/iplib.pyc in ipmagic(self, arg_s)
   1180         else:
   1181             magic_args = self.var_expand(magic_args,1)
-> 1182             return fn(magic_args)
   1183 
   1184     def ipalias(self,arg_s):

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/IPython/Magic.pyc in magic_time(self, parameter_s)
   1979         if mode=='eval':
   1980             st = clk()
-> 1981             out = eval(code,glob)
   1982             end = clk()
   1983         else:

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-2/<timed eval> in <module>()

/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/vertex_separation.so in sage.graphs.graph_decompositions.vertex_separation.vertex_separation (sage/graphs/graph_decompositions/vertex_separation.c:1680)()

MemoryError: 
sage: 
```
3) small typos in the doc
wll -> will

```
88	there. This way, a large number of sets wll never be evaluated and *a lot* of 
```


min -> \min

```
96	it by `\max (c'(S), \min_{\text{next}})` (where `min_{\text{next}}` is the 
```


should translate in english ;-)

```
320	        print "Reservation de la memoire" 
```




4) You could rename your function for instance vertex_separation_32, and then add a frontend function called vertex_separation calling vertex_separation_32. The goal is to have a more generic function allowing to add other implementations / methods for the vertex separation...



---

archive/issue_events_096989.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-05T23:01:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96989"
}
```



---

archive/issue_events_096990.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-05T23:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96990"
}
```



---

archive/issue_comments_129577.json:
```json
{
    "body": "<a id='comment:13'></a>\nHello !!!\n\n* God I hate those translations. At least with the MILP code you don't have to deal with it `:-P`\n* Yeah ! It means that ``sage_malloc`` actually checks it for me. Good to know ! I removed my test :-D\n* Done !\n* Well, that's the job of the next patch, isn't it ? We'll have plenty of time to write this function when we will know what it contains, that'll be soon enough to write its documentation, its tests for all different algorithms, checking automatically that they are consistent, etc... `:-)`\n\nPatch updated !\n\nNathann",
    "created_at": "2011-11-05T23:01:19Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129577",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Hello !!!

* God I hate those translations. At least with the MILP code you don't have to deal with it `:-P`
* Yeah ! It means that ``sage_malloc`` actually checks it for me. Good to know ! I removed my test :-D
* Done !
* Well, that's the job of the next patch, isn't it ? We'll have plenty of time to write this function when we will know what it contains, that'll be soon enough to write its documentation, its tests for all different algorithms, checking automatically that they are consistent, etc... `:-)`

Patch updated !

Nathann



---

archive/issue_comments_129578.json:
```json
{
    "body": "<a id='comment:14'></a>\nThat's better ;-)\n\nHowever, I have now a problem to build the documentation...\n\n```\nairgoth-2:sage-2 dcoudert$ ../../sage -docbuild reference html\nsphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.0.4\nloading pickled environment... done\nbuilding [html]: targets for 1 source files that are out of date\nupdating environment: 0 added, 1 changed, 0 removed\nreading sources... [100%] graphs                                                   \n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference/graphs.rst:42: (WARNING/2) toctree references unknown document u'sage/graphs/graph_decompositions/vertex_separation'\n\nlooking for now-outdated files... none found\npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... [100%] index                                                     \nwriting additional files... genindex py-modindex search\ncopying static files... done\ndumping search index... done\ndumping object inventory... done\nbuild succeeded, 1 warning.\nBuild finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\nairgoth-2:sage-2 dcoudert$ \n```",
    "created_at": "2011-11-06T00:00:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129578",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
That's better ;-)

However, I have now a problem to build the documentation...

```
airgoth-2:sage-2 dcoudert$ ../../sage -docbuild reference html
sphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
Running Sphinx v1.0.4
loading pickled environment... done
building [html]: targets for 1 source files that are out of date
updating environment: 0 added, 1 changed, 0 removed
reading sources... [100%] graphs                                                   
/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference/graphs.rst:42: (WARNING/2) toctree references unknown document u'sage/graphs/graph_decompositions/vertex_separation'

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] index                                                     
writing additional files... genindex py-modindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 1 warning.
Build finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
airgoth-2:sage-2 dcoudert$ 
```



---

archive/issue_events_096991.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T00:00:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96991"
}
```



---

archive/issue_events_096992.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T00:00:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96992"
}
```



---

archive/issue_comments_129579.json:
```json
{
    "body": "<a id='comment:15'></a>\nRight ! Fixed `:-)`\n\nNathann",
    "created_at": "2011-11-06T15:50:50Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129579",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
Right ! Fixed `:-)`

Nathann



---

archive/issue_events_096993.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-06T15:50:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96993"
}
```



---

archive/issue_events_096994.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-11-06T15:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96994"
}
```



---

archive/issue_events_096995.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T16:53:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96995"
}
```



---

archive/issue_events_096996.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T16:53:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96996"
}
```



---

archive/issue_comments_129580.json:
```json
{
    "body": "<a id='comment:16'></a>\nSorry Nathann, but I still have the same problem :(\n\n```\nairgoth-2:sage-3 dcoudert$ ../../sage -docbuild reference html\nsphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.0.4\nloading pickled environment... done\nbuilding [html]: targets for 1 source files that are out of date\nupdating environment: 0 added, 1 changed, 0 removed\nreading sources... [100%] graphs                                                   \n/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference/graphs.rst:42: (WARNING/2) toctree references unknown document u'sage/graphs/graph_decompositions/vertex_separation'\n\nlooking for now-outdated files... none found\npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... [100%] index                                                     \nwriting additional files... genindex py-modindex search\ncopying static files... done\ndumping search index... done\ndumping object inventory... done\nbuild succeeded, 1 warning.\nBuild finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\n```\n\nand so I don't see the documentation.",
    "created_at": "2011-11-06T16:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129580",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
Sorry Nathann, but I still have the same problem :(

```
airgoth-2:sage-3 dcoudert$ ../../sage -docbuild reference html
sphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
Running Sphinx v1.0.4
loading pickled environment... done
building [html]: targets for 1 source files that are out of date
updating environment: 0 added, 1 changed, 0 removed
reading sources... [100%] graphs                                                   
/Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference/graphs.rst:42: (WARNING/2) toctree references unknown document u'sage/graphs/graph_decompositions/vertex_separation'

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] index                                                     
writing additional files... genindex py-modindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 1 warning.
Build finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
```

and so I don't see the documentation.



---

archive/issue_comments_129581.json:
```json
{
    "body": "<a id='comment:17'></a>\nHmmm... I don't like those bugs much, sphinx has some memory of its own, even when you're dealing with several different clones (branches) in the same copy of Sage. I'll give it a try on musclotte right now, it never saw any of these patches.\n\nNathann",
    "created_at": "2011-11-06T17:04:10Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129581",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
Hmmm... I don't like those bugs much, sphinx has some memory of its own, even when you're dealing with several different clones (branches) in the same copy of Sage. I'll give it a try on musclotte right now, it never saw any of these patches.

Nathann



---

archive/issue_comments_129582.json:
```json
{
    "body": "<a id='comment:18'></a>\nWell, it works on musclotte ! I guess it's because you had already applied a patch for which it failed, and that updating it did not change anything.\nActually, the reason why I sent this patch with a problem in the documentation was before building the doc worked for me, probably because of a detail I had removed since (and so it didn't work for you).\n\nCould you try to build the doc of a different branch (did you recompile sage with sage -b before trying to build the doc ?) or in a different Sage installation ? For instance if you have one ready on one different computer ? I know it's a mess but I still do not know a way around it. It would be nice to be able to say to sphinx \"ignore the documentation you've built so far, and do all the work from the start\". I had found a line doing just that a long time ago, but I forgot `:-/`\n\nNathann",
    "created_at": "2011-11-06T17:07:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129582",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
Well, it works on musclotte ! I guess it's because you had already applied a patch for which it failed, and that updating it did not change anything.
Actually, the reason why I sent this patch with a problem in the documentation was before building the doc worked for me, probably because of a detail I had removed since (and so it didn't work for you).

Could you try to build the doc of a different branch (did you recompile sage with sage -b before trying to build the doc ?) or in a different Sage installation ? For instance if you have one ready on one different computer ? I know it's a mess but I still do not know a way around it. It would be nice to be able to say to sphinx "ignore the documentation you've built so far, and do all the work from the start". I had found a line doing just that a long time ago, but I forgot `:-/`

Nathann



---

archive/issue_events_096997.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T17:15:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96997"
}
```



---

archive/issue_events_096998.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-06T17:15:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96998"
}
```



---

archive/issue_comments_129583.json:
```json
{
    "body": "<a id='comment:19'></a>\nI followed precisely your instructions: create a new branch from a clean branch (original 4.7.2 distribution), then apply the patch on this new branch, test it, and build the doc, (try to) chack it, and finally return to original branch before erasing temporary branch. Believe me, on my macbook air, it takes quit a long time since it recompiles a lot of stuff each time (don't know why).\n\nI will try as soon as I can on another computer.\n\n\nBy the way, another typo line 223 \"reulting\" -> \"resulting\" ;-)\n\n```\n223\t    reulting in a corresponding path decomposition. \n```",
    "created_at": "2011-11-06T17:15:46Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129583",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
I followed precisely your instructions: create a new branch from a clean branch (original 4.7.2 distribution), then apply the patch on this new branch, test it, and build the doc, (try to) chack it, and finally return to original branch before erasing temporary branch. Believe me, on my macbook air, it takes quit a long time since it recompiles a lot of stuff each time (don't know why).

I will try as soon as I can on another computer.


By the way, another typo line 223 "reulting" -> "resulting" ;-)

```
223	    reulting in a corresponding path decomposition. 
```



---

archive/issue_comments_129584.json:
```json
{
    "body": "<a id='comment:20'></a>\nUpdated !\n\nNow that I think about it, perhaps one trick would be to rm -fr the folder SAGE_ROOT/devel/sage-<YOURBRANCH>/doc/output/html/en/reference, in the hope that Sphinx does it all again. But this will take some time, and you will not be able to use Sage in the meantime `;-)`\n\nNathann",
    "created_at": "2011-11-06T17:34:59Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129584",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
Updated !

Now that I think about it, perhaps one trick would be to rm -fr the folder SAGE_ROOT/devel/sage-<YOURBRANCH>/doc/output/html/en/reference, in the hope that Sphinx does it all again. But this will take some time, and you will not be able to use Sage in the meantime `;-)`

Nathann



---

archive/attachments_016532.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_11994.patch",
    "asset_url": "tarball://root/attachments/ticket11994/trac_11994.patch",
    "created_at": "2011-11-06T17:35:18Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11994/trac_11994.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_129585.json:
```json
{
    "body": "**Attachment:** [trac_11994.patch](https://github.com/sagemath/sage/files/ticket11994/trac_11994.patch)",
    "created_at": "2011-11-06T17:35:18Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129585",
    "user": "https://github.com/nathanncohen"
}
```

**Attachment:** [trac_11994.patch](https://github.com/sagemath/sage/files/ticket11994/trac_11994.patch)



---

archive/issue_events_096999.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-07T00:15:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-96999"
}
```



---

archive/issue_events_097000.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2011-11-07T00:15:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-97000"
}
```



---

archive/issue_comments_129586.json:
```json
{
    "body": "<a id='comment:21'></a>\nOK, after a full re-installation of sage, creation of clones, and so on... I have finally understand why the doc was not properly displayed:\nIt writes\n\n```\nairgoth-2:sage-1 dcoudert$ ../../sage -docbuild reference html\nsphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\nRunning Sphinx v1.0.4\n...\n\nbuild succeeded.\nBuild finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference\n```\n\nBut the last line *should be*\n\n```\nBuild finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-1/doc/output/html/en/reference\n```\n\nThe link to the doc should be in the devel/sage-1 directory and note in devel/sage directory. At least now I know...\n\n\nThe function is working well, the results is true, all tests are OK, and the doc is correctly displayed. Consequently, I give a positive review !",
    "created_at": "2011-11-07T00:15:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129586",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
OK, after a full re-installation of sage, creation of clones, and so on... I have finally understand why the doc was not properly displayed:
It writes

```
airgoth-2:sage-1 dcoudert$ ../../sage -docbuild reference html
sphinx-build -b html -d /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/doctrees/en/reference    /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/en/reference /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
Running Sphinx v1.0.4
...

build succeeded.
Build finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage/doc/output/html/en/reference
```

But the last line *should be*

```
Build finished.  The built documents can be found in /Applications/Sage-4.7.2-OSX-64bit-10.6.app/Contents/Resources/sage/devel/sage-1/doc/output/html/en/reference
```

The link to the doc should be in the devel/sage-1 directory and note in devel/sage directory. At least now I know...


The function is working well, the results is true, all tests are OK, and the doc is correctly displayed. Consequently, I give a positive review !



---

archive/issue_comments_129587.json:
```json
{
    "body": "<a id='comment:22'></a>\nYou have my thanks for the review but the mystery remains : the \"sage\" directory you mention is actually a symbolic link toward the \"current branch\". So that's probably not where the problem comes from `:-D`\n\nNathann",
    "created_at": "2011-11-07T07:50:11Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129587",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
You have my thanks for the review but the mystery remains : the "sage" directory you mention is actually a symbolic link toward the "current branch". So that's probably not where the problem comes from `:-D`

Nathann



---

archive/issue_events_097001.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-10T13:30:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-97001"
}
```



---

archive/issue_events_097002.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-10T13:30:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11994#event-97002"
}
```



---

archive/issue_comments_129588.json:
```json
{
    "body": "**Merged:** sage-4.8.alpha2",
    "created_at": "2011-11-10T13:30:29Z",
    "issue": "https://github.com/sagemath/sage/issues/11994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11994#issuecomment-129588",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.8.alpha2
