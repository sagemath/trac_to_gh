# Issue 11933: Fix qepcad doctests

archive/issues_011761.json:
```json
{
    "assignees": [
        "https://github.com/jdemeyer"
    ],
    "body": "This patch fixes some doctest failures for the [experimental package](http://www.sagemath.org/packages/experimental/) qepcad and also fixes the formatting of the doctests.\n\nThis is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).\n\n\nCC:  @jasongrout\n\nComponent: **doctest coverage**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **Karl-Dieter Crisman**\n\nMerged: **sage-4.8.alpha4**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11933_\n\n",
    "closed_at": "2011-12-06T13:19:00Z",
    "created_at": "2011-10-17T18:48:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix qepcad doctests",
    "type": "issue",
    "updated_at": "2011-12-06T13:19:00Z",
    "url": "https://github.com/sagemath/sage/issues/11933",
    "user": "https://github.com/jdemeyer"
}
```
This patch fixes some doctest failures for the [experimental package](http://www.sagemath.org/packages/experimental/) qepcad and also fixes the formatting of the doctests.

This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).


CC:  @jasongrout

Component: **doctest coverage**

Author: **Jeroen Demeyer**

Reviewer: **Karl-Dieter Crisman**

Merged: **sage-4.8.alpha4**

_Issue created by migration from https://trac.sagemath.org/ticket/11933_





---

archive/issue_events_161110.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T18:48:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161110"
}
```



---

archive/issue_events_161111.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T18:48:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161111"
}
```



---

archive/issue_events_161112.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T18:48:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161112"
}
```



---

archive/issue_events_161113.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T18:48:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161113"
}
```



---

archive/issue_events_161114.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2011-10-17T18:48:00Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161114"
}
```



---

archive/issue_comments_126121.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[11933.patch.gz](https://github.com/sagemath/sage/files/ticket11933/11933.patch.gz)**",
    "created_at": "2011-10-18T02:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126121",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[11933.patch.gz](https://github.com/sagemath/sage/files/ticket11933/11933.patch.gz)**



---

archive/issue_comments_126122.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCan you mark this \"needs review\" if it is?",
    "created_at": "2011-10-18T02:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126122",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Can you mark this "needs review" if it is?



---

archive/issue_events_161115.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-18T10:09:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161115"
}
```



---

archive/issue_comments_126123.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2011-10-18T10:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126123",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_161116.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2011-10-18T10:10:12Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161116"
}
```



---

archive/issue_events_161117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-18T10:10:12Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "subject": "https://github.com/jdemeyer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161117"
}
```



---

archive/issue_comments_126124.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYes, it is ready for review.  I have only tested this on one system, I hope the results are not system-dependent.",
    "created_at": "2011-10-18T10:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126124",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Yes, it is ready for review.  I have only tested this on one system, I hope the results are not system-dependent.



---

archive/issue_comments_126125.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis patch fixes some doctest failures for the *experimental package* qepcad and also fixes the formatting of the doctests.\n\nThis is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).",
    "created_at": "2011-10-22T21:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126125",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

This patch fixes some doctest failures for the *experimental package* qepcad and also fixes the formatting of the doctests.

This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).



---

archive/issue_comments_126126.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+This patch fixes some doctest failures for the [experimental package](http://www.sagemath.org/packages/experimental/) qepcad and also fixes the formatting of the doctests.\n \n+This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).\n+\n``````\n",
    "created_at": "2011-10-22T21:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126126",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+This patch fixes some doctest failures for the [experimental package](http://www.sagemath.org/packages/experimental/) qepcad and also fixes the formatting of the doctests.
 
+This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).
+
``````




---

archive/issue_comments_126127.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126127",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_events_161118.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161118"
}
```



---

archive/issue_comments_126128.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2011-12-03T16:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126128",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_events_161119.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-12-03T16:08:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161119"
}
```



---

archive/issue_comments_126129.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jdemeyer](#comment:5):\n> This patch fixes some doctest failures for the *experimental package* qepcad and also fixes the formatting of the doctests.\n\nAs far as I can tell, the nonsubstantive changes are all fine, with the possible exception of the bullet lists toward the end, which could conceivably not be at an appropriate indentation level.  This is not in the reference manual, so I can't check that, but the other changes you made are good, and I assume that the bullets will render properly.\n> This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).\n\nIt also failed on Mac OS X 10.6.  \n\nI'll try to test this on sage.math momentarily for the term order changes, then it could go to positive review.",
    "created_at": "2011-12-03T16:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126129",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jdemeyer](#comment:5):
> This patch fixes some doctest failures for the *experimental package* qepcad and also fixes the formatting of the doctests.

As far as I can tell, the nonsubstantive changes are all fine, with the possible exception of the bullet lists toward the end, which could conceivably not be at an appropriate indentation level.  This is not in the reference manual, so I can't check that, but the other changes you made are good, and I assume that the bullets will render properly.
> This is only tested on x86_64 Linux (I tried installing on 32-bit i386 Linux but that failed).

It also failed on Mac OS X 10.6.  

I'll try to test this on sage.math momentarily for the term order changes, then it could go to positive review.



---

archive/issue_events_161120.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-12-03T17:45:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161120"
}
```



---

archive/issue_events_161121.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2011-12-03T17:45:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161121"
}
```



---

archive/issue_comments_126130.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOn sage.math, before:\n\n```\nsage -t -optional \"devel/sage/sage/interfaces/qepcad.py\"    \n**********************************************************************\nFile \"/mnt/usb1/scratch/kcrisman/sage-4.8.alpha3-sage.math.washington.edu-x86_64-Linux/devel/sage/sage/interfaces/qepcad.py\", line 95:\n    sage: F = qf.exactly_k(3, y, circle * ellipse == 0); F    # optional - qepcad\nExpected:\n    (X3 y)[(y^2 + x^2 - 3) (y^2 + 2 x y + y + 3 x^2 - x - 7) = 0]\nGot:\n    (X3 y)[(x^2 + y^2 - 3) (3 x^2 + 2 x y + y^2 - x + y - 7) = 0]\n<snip>\nExpected:\n    'approx-precision N\\n\\nApproximate algebraic numbers to N decimal places.\\n'\nGot:\n    'approx-precision N\\n\\nApproximate algeraic numbers to N decimal places.\\n'\n**********************************************************************\n3 items had failures:\n   6 of  61 in __main__.example_0\n   1 of   6 in __main__.example_2\n   1 of   6 in __main__.example_25\n***Test Failed*** 8 failures.\nFor whitespace errors, see the file /home/kcrisman/.sage//tmp/qepcad_31669.py\n\t [11.3 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -optional \"devel/sage/sage/interfaces/qepcad.py\"\nTotal time for all tests: 11.4 seconds\n\n```\n\nAfter:\n\n```\n\nsage -t -optional \"devel/sage/sage/interfaces/qepcad.py\"    \n\t [11.6 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 11.6 seconds\n```\n\nGreat!",
    "created_at": "2011-12-03T17:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126130",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

On sage.math, before:

```
sage -t -optional "devel/sage/sage/interfaces/qepcad.py"    
**********************************************************************
File "/mnt/usb1/scratch/kcrisman/sage-4.8.alpha3-sage.math.washington.edu-x86_64-Linux/devel/sage/sage/interfaces/qepcad.py", line 95:
    sage: F = qf.exactly_k(3, y, circle * ellipse == 0); F    # optional - qepcad
Expected:
    (X3 y)[(y^2 + x^2 - 3) (y^2 + 2 x y + y + 3 x^2 - x - 7) = 0]
Got:
    (X3 y)[(x^2 + y^2 - 3) (3 x^2 + 2 x y + y^2 - x + y - 7) = 0]
<snip>
Expected:
    'approx-precision N\n\nApproximate algebraic numbers to N decimal places.\n'
Got:
    'approx-precision N\n\nApproximate algeraic numbers to N decimal places.\n'
**********************************************************************
3 items had failures:
   6 of  61 in __main__.example_0
   1 of   6 in __main__.example_2
   1 of   6 in __main__.example_25
***Test Failed*** 8 failures.
For whitespace errors, see the file /home/kcrisman/.sage//tmp/qepcad_31669.py
	 [11.3 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -optional "devel/sage/sage/interfaces/qepcad.py"
Total time for all tests: 11.4 seconds

```

After:

```

sage -t -optional "devel/sage/sage/interfaces/qepcad.py"    
	 [11.6 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 11.6 seconds
```

Great!



---

archive/issue_comments_126131.json:
```json
{
    "body": "Merged: **sage-4.8.alpha4**",
    "created_at": "2011-12-06T13:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11933#issuecomment-126131",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha4**



---

archive/issue_events_161122.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T13:19:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161122"
}
```



---

archive/issue_events_161123.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T13:19:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11933",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11933#event-161123"
}
```
