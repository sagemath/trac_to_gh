# Issue 11847: unexpexted behavior of degree() with matrix ordering

archive/issues_011675.json:
```json
{
    "assignees": [
        "https://github.com/malb"
    ],
    "body": "Singular assumes the standard grading when predefined orderings such as `lex` and `degrevlex` are given, but infers a grading of a ring from the first row of a specified matrix ordering. This can confuse users (and has confused some developers!) who expect to work in a standard grading, and will not expect this behavior:\n\n```\nsage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=TermOrder(matrix([3,0,1,1,1,0,1,0,0])))\nsage: (x^2*y).degree()\n6\nsage: x.degree()\n3\nsage: x.degree(x)\n1\n```\nThis confusion is compounded by the fact that the term *degree* carries different meanings, depending on the context (degree wrt grading, degree wrt exponents, degree of a monomial, degree of a variable).\n\nSage has an `exponents()` command that behaves somewhat closer to what a user unfamiliar with graded rings might expect:\n\n```\nsage: (x^2*y).exponents()\n[(2,1,0)]\n```\n\nThe documentation should inform users of this behavior. It would also be nice to add a function that computes the total degree wrt the standard grading for the user.\n\nCC:  @simon-king-jena @kwankyu @koffie\n\nKeywords: **degree, polynomial, singular**\n\nComponent: **commutative algebra**\n\nAuthor: **John Perry**\n\nReviewer: **Martin Albrecht**\n\nUpstream: **None of the above - read trac for reasoning.**\n\nMerged: **sage-4.8.alpha3**\n\nDependencies: **sage 4.7.2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11847_\n\n",
    "closed_at": "2011-11-21T10:45:10Z",
    "created_at": "2011-09-25T15:11:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "unexpexted behavior of degree() with matrix ordering",
    "type": "issue",
    "updated_at": "2011-11-21T10:45:10Z",
    "url": "https://github.com/sagemath/sage/issues/11847",
    "user": "https://github.com/johnperry-math"
}
```
Singular assumes the standard grading when predefined orderings such as `lex` and `degrevlex` are given, but infers a grading of a ring from the first row of a specified matrix ordering. This can confuse users (and has confused some developers!) who expect to work in a standard grading, and will not expect this behavior:

```
sage: R.<x,y,z> = PolynomialRing(QQ,'x',3,order=TermOrder(matrix([3,0,1,1,1,0,1,0,0])))
sage: (x^2*y).degree()
6
sage: x.degree()
3
sage: x.degree(x)
1
```
This confusion is compounded by the fact that the term *degree* carries different meanings, depending on the context (degree wrt grading, degree wrt exponents, degree of a monomial, degree of a variable).

Sage has an `exponents()` command that behaves somewhat closer to what a user unfamiliar with graded rings might expect:

```
sage: (x^2*y).exponents()
[(2,1,0)]
```

The documentation should inform users of this behavior. It would also be nice to add a function that computes the total degree wrt the standard grading for the user.

CC:  @simon-king-jena @kwankyu @koffie

Keywords: **degree, polynomial, singular**

Component: **commutative algebra**

Author: **John Perry**

Reviewer: **Martin Albrecht**

Upstream: **None of the above - read trac for reasoning.**

Merged: **sage-4.8.alpha3**

Dependencies: **sage 4.7.2**

_Issue created by migration from https://trac.sagemath.org/ticket/11847_





---

archive/issue_events_157886.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-09-25T15:11:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157886"
}
```



---

archive/issue_events_157887.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-09-25T15:11:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157887"
}
```



---

archive/issue_events_157888.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-09-25T15:11:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157888"
}
```



---

archive/issue_events_157889.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-09-25T15:11:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157889"
}
```



---

archive/issue_events_157890.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-09-25T15:11:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "subject": "https://github.com/johnperry-math",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157890"
}
```



---

archive/issue_comments_123906.json:
```json
{
    "body": "Dependencies: **sage 4.7.2**",
    "created_at": "2011-09-25T18:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123906",
    "user": "https://github.com/johnperry-math"
}
```

Dependencies: **sage 4.7.2**



---

archive/issue_events_157891.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-09-25T18:58:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157891"
}
```



---

archive/issue_comments_123907.json:
```json
{
    "body": "Author: **john_perry**",
    "created_at": "2011-09-25T18:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123907",
    "user": "https://github.com/johnperry-math"
}
```

Author: **john_perry**



---

archive/issue_comments_123908.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis patch adds a note and a test to `degree()` to inform the user of the behavior. It also adds a new function, `total_degree_ungraded()`, which returns the total degree without respect to a grading. Doctests pass for me on sage 4.7.2alpha2.\n\nThis patch and should perhaps include more, but I thought it best to see what others thought.\n\nPS: I removed malb from cc: after noticing that he was made the owner. So I suspect he is being notified anyway. I'm not real sure how notifications work, or who should be cc'd; I thought that everyone who commented on this topic in sage-devel should get some notification, and I knew Martin had worked on this code, too. Sorry if some of you are getting unwanted spam. :-(",
    "created_at": "2011-09-25T19:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123908",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:2" align="right">comment:2</div>

This patch adds a note and a test to `degree()` to inform the user of the behavior. It also adds a new function, `total_degree_ungraded()`, which returns the total degree without respect to a grading. Doctests pass for me on sage 4.7.2alpha2.

This patch and should perhaps include more, but I thought it best to see what others thought.

PS: I removed malb from cc: after noticing that he was made the owner. So I suspect he is being notified anyway. I'm not real sure how notifications work, or who should be cc'd; I thought that everyone who commented on this topic in sage-devel should get some notification, and I knew Martin had worked on this code, too. Sorry if some of you are getting unwanted spam. :-(



---

archive/issue_comments_123909.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTwo cooments:\n\nI don't see natural use cases for total_degree_ungraded() when one use non-default grading with a polynomial ring. If one need such a method for (I think) a very rare case, s/he can define it just for the case. The name is also confusing.\n\nOn the other hand, exponent(x) method, which Maarten suggested, would be useful and essential. Moreover you can make exponent() to return the sum of all exponents of the variables in the monomial, making total_degree_ungraded() redundant. Like degree() method, if exponent(x) or exponent() method is applied for a polynomial rather than a monomial, then the highest of the values for all monomials may be returned.",
    "created_at": "2011-09-26T00:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123909",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:3" align="right">comment:3</div>

Two cooments:

I don't see natural use cases for total_degree_ungraded() when one use non-default grading with a polynomial ring. If one need such a method for (I think) a very rare case, s/he can define it just for the case. The name is also confusing.

On the other hand, exponent(x) method, which Maarten suggested, would be useful and essential. Moreover you can make exponent() to return the sum of all exponents of the variables in the monomial, making total_degree_ungraded() redundant. Like degree() method, if exponent(x) or exponent() method is applied for a polynomial rather than a monomial, then the highest of the values for all monomials may be returned.



---

archive/issue_comments_123910.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@kwankyu](#comment:3):\n> I don't see natural use cases for total_degree_ungraded() when one use non-default grading with a polynomial ring.\n\nI discovered the problem when the grading changed while working with a matrix term ordering. It appears whenever one uses a matrix ordering, and `total_degree()` is not an uncommon tool.\n\n> The name is also confusing.\n\nOne goal was that the user find it easily when performing tab-completion, **and** would see that there are two different notions of *total degree* in play, prompting her or him to read the docstring. With that in mind, I aimed for a name that would be clear. It slipped from my mind that the ring is never ungraded, so I agree that this is a very, very bad name.\n\nI had toyed with `total_degree_exponents()` as well. I could see `exponent_total_degree()`, but thought that harder for a user to find using tab-completion.\n\n> On the other hand, exponent(x) method, which Maarten suggested, would be useful and essential.\n\nActually, I suggested that name. :-) Maarten didn't suggest a particular name, but that there should be a different set of functions for ungraded degree. I originally set out to do as you suggest, but as I thought about it, several considerations presented themselves:\n\n1. The method `degree(x)` already exists, and does the same.\n2. It seems unwise to deprecate `degree(x)`, which is probably used in a lot of code by a lot of people. (*I've* used it a lot, anyway.)\n3. The patch could leave `degree(x)` alone, and introduce `exponent(x)` (or whatever name) which merely replicates the behavior. I'm not opposed to that, but I wanted someone else's input first. I recall there was discussion of a similar duplication of methods in linear algebra some years ago (see e.g. `eigenvectors_right` and `right_eigenvectors`).\n4. I'd *prefer* to change `degree()` to behave as if the ring had the standard grading, and define `degree_in_grading()` (or something similar) to behave the way Singular defines it. Again, that could have an impact on how people have already been using `degree()` in code.\n\nThese thoughts prompted me to start with an incremental patch initially, which could be modified according to comments.\n\n> Moreover you can make exponent() to return the sum of all exponents of the variables in the monomial, making total_degree_ungraded() redundant.\n\n**That** would be confusing to me; I've never seen *total degree* referred to as *exponent*. I would prefer a different name if we take that route, such as `exponent_total_degree()` or `total_degree_exponents()`. Or even something clearer.",
    "created_at": "2011-09-26T04:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123910",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@kwankyu](#comment:3):
> I don't see natural use cases for total_degree_ungraded() when one use non-default grading with a polynomial ring.

I discovered the problem when the grading changed while working with a matrix term ordering. It appears whenever one uses a matrix ordering, and `total_degree()` is not an uncommon tool.

> The name is also confusing.

One goal was that the user find it easily when performing tab-completion, **and** would see that there are two different notions of *total degree* in play, prompting her or him to read the docstring. With that in mind, I aimed for a name that would be clear. It slipped from my mind that the ring is never ungraded, so I agree that this is a very, very bad name.

I had toyed with `total_degree_exponents()` as well. I could see `exponent_total_degree()`, but thought that harder for a user to find using tab-completion.

> On the other hand, exponent(x) method, which Maarten suggested, would be useful and essential.

Actually, I suggested that name. :-) Maarten didn't suggest a particular name, but that there should be a different set of functions for ungraded degree. I originally set out to do as you suggest, but as I thought about it, several considerations presented themselves:

1. The method `degree(x)` already exists, and does the same.
2. It seems unwise to deprecate `degree(x)`, which is probably used in a lot of code by a lot of people. (*I've* used it a lot, anyway.)
3. The patch could leave `degree(x)` alone, and introduce `exponent(x)` (or whatever name) which merely replicates the behavior. I'm not opposed to that, but I wanted someone else's input first. I recall there was discussion of a similar duplication of methods in linear algebra some years ago (see e.g. `eigenvectors_right` and `right_eigenvectors`).
4. I'd *prefer* to change `degree()` to behave as if the ring had the standard grading, and define `degree_in_grading()` (or something similar) to behave the way Singular defines it. Again, that could have an impact on how people have already been using `degree()` in code.

These thoughts prompted me to start with an incremental patch initially, which could be modified according to comments.

> Moreover you can make exponent() to return the sum of all exponents of the variables in the monomial, making total_degree_ungraded() redundant.

**That** would be confusing to me; I've never seen *total degree* referred to as *exponent*. I would prefer a different name if we take that route, such as `exponent_total_degree()` or `total_degree_exponents()`. Or even something clearer.



---

archive/issue_comments_123911.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI would never change the behavior of degree(),degrees(),total_degree(), which should return the standard things as Simon said, except of course bug fixes.\n\nFor exponent(), exponents(), total_exponents(), I would expect\n\n```\nsage: f=x^3+x*y+1\nsage: f.exponent(x)\n[3,1,1]\nsage: f.exponents()\n[(3,0),(1,1),(0,0)]\nsage: f.total_exponent()\n[3,2,0]\nsage: f.exponent()\n[3,2,0]\nsage: g=x*y\nsage: g.exponent(x) % convenient behavior for a monomial\n1\nsage: g.exponents()\n(1,1)\nsage: g.total_exponent()\n2\nsage: g.exponent()\n2\n```\n\nThen even in a polynomial ring with the default grading, the two sets of methods will play different roles.\n\nI would object names mixing \"degree\" and \"exponent\" in any way.",
    "created_at": "2011-09-26T06:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123911",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:5" align="right">comment:5</div>

I would never change the behavior of degree(),degrees(),total_degree(), which should return the standard things as Simon said, except of course bug fixes.

For exponent(), exponents(), total_exponents(), I would expect

```
sage: f=x^3+x*y+1
sage: f.exponent(x)
[3,1,1]
sage: f.exponents()
[(3,0),(1,1),(0,0)]
sage: f.total_exponent()
[3,2,0]
sage: f.exponent()
[3,2,0]
sage: g=x*y
sage: g.exponent(x) % convenient behavior for a monomial
1
sage: g.exponents()
(1,1)
sage: g.total_exponent()
2
sage: g.exponent()
2
```

Then even in a polynomial ring with the default grading, the two sets of methods will play different roles.

I would object names mixing "degree" and "exponent" in any way.



---

archive/issue_comments_123912.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWe could also add a keyword \"use_grading\" to the degree methods.\n\nNote that whathever we do, we should not do the combination of:\n\n```\nsage: f.exponent(x)\n[3,1,1]\nsage: g.exponent(x) % convenient behavior for a monomial\n1\n```\n\nSuch a function will be very hard to use since this behaviour will make you write ugly code like:\n\n\n```\ndeg = f.exponent()\nif f.is_monomial():\n    do_something(f)\nelse:\n    do_something_else(f)\n```",
    "created_at": "2011-09-26T06:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123912",
    "user": "https://github.com/koffie"
}
```

<div id="comment:6" align="right">comment:6</div>

We could also add a keyword "use_grading" to the degree methods.

Note that whathever we do, we should not do the combination of:

```
sage: f.exponent(x)
[3,1,1]
sage: g.exponent(x) % convenient behavior for a monomial
1
```

Such a function will be very hard to use since this behaviour will make you write ugly code like:


```
deg = f.exponent()
if f.is_monomial():
    do_something(f)
else:
    do_something_else(f)
```



---

archive/issue_comments_123913.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@koffie](#comment:6):\n> We could also add a keyword \"use_grading\" to the degree methods.\n\nSimon would think the \"use_grading\" keyword redundant because degree methods must always use grading. Perhaps keyword \"use_default_grading\" is more sensible. Anyway, using a long keyword is an overkill.\n\n> \n> Note that whathever we do, we should not do the combination of:\n> \n> ```\n> sage: f.exponent(x)\n> [3,1,1]\n> sage: g.exponent(x) % convenient behavior for a monomial\n> 1\n> ```\n> \n> Such a function will be very hard to use since this behaviour will make you write ugly code like:\n> \n> \n> ```\n> deg = f.exponent()\n> if f.is_monomial():\n>     do_something(f)\n> else:\n>     do_something_else(f)\n> ```\n> \n> \n\nI think degee methods are for polynomials while exponent methods are for monomials. So it should be more convenient to use exponent methods with monomials. It would even be reasonable to raise an error if f is not a monomial in f.exponents(), though I admit the current behavior \n\n```\nsage: f=x^3+x*y\nsage: f.exponents()\n[(3,0),(1,1)]\n```\nis surely a convenient extension, if used carefully.",
    "created_at": "2011-09-26T07:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123913",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@koffie](#comment:6):
> We could also add a keyword "use_grading" to the degree methods.

Simon would think the "use_grading" keyword redundant because degree methods must always use grading. Perhaps keyword "use_default_grading" is more sensible. Anyway, using a long keyword is an overkill.

> 
> Note that whathever we do, we should not do the combination of:
> 
> ```
> sage: f.exponent(x)
> [3,1,1]
> sage: g.exponent(x) % convenient behavior for a monomial
> 1
> ```
> 
> Such a function will be very hard to use since this behaviour will make you write ugly code like:
> 
> 
> ```
> deg = f.exponent()
> if f.is_monomial():
>     do_something(f)
> else:
>     do_something_else(f)
> ```
> 
> 

I think degee methods are for polynomials while exponent methods are for monomials. So it should be more convenient to use exponent methods with monomials. It would even be reasonable to raise an error if f is not a monomial in f.exponents(), though I admit the current behavior 

```
sage: f=x^3+x*y
sage: f.exponents()
[(3,0),(1,1)]
```
is surely a convenient extension, if used carefully.



---

archive/issue_comments_123914.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kwankyu](#comment:7):\n> Replying to [@koffie](#comment:6):\n> > We could also add a keyword \"use_grading\" to the degree methods.\n\n> Simon would think the \"use_grading\" keyword redundant because degree methods must always use grading. Perhaps keyword \"use_default_grading\" is more sensible. Anyway, using a long keyword is an overkill.\n\nUsing a keyword is a great idea. What about calling it `standard_grading` or (if that's too long) `std_grading`? For reasons of compatibility, the default would be `False`; when `True`, it uses the standard grading to compute `degree()` and `total_degree()`.\n\nOTOH I could see setting the default to `True` and raising a deprecation warning, since matrix orderings haven't been in Sage for very long. (Have they?) But that seems dicier.\n\n> I think degee methods are for polynomials while exponent methods are for monomials.\n\nThere's a strong case to be made for using monomials (efficiency, for example) but I also think that's a separate discussion, for a separate ticket. AFAIK Singular doesn't distinguish the two.\n\n> So it should be more convenient to use exponent methods with monomials. It would even be reasonable to raise an error if f is not a monomial in f.exponents()...\n\nI would prefer not to deprecate old ways of doing things unless they were actually wrong or demonstrably dangerous. I don't think that's the case here, but maybe I'm wrong.",
    "created_at": "2011-09-26T17:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123914",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kwankyu](#comment:7):
> Replying to [@koffie](#comment:6):
> > We could also add a keyword "use_grading" to the degree methods.

> Simon would think the "use_grading" keyword redundant because degree methods must always use grading. Perhaps keyword "use_default_grading" is more sensible. Anyway, using a long keyword is an overkill.

Using a keyword is a great idea. What about calling it `standard_grading` or (if that's too long) `std_grading`? For reasons of compatibility, the default would be `False`; when `True`, it uses the standard grading to compute `degree()` and `total_degree()`.

OTOH I could see setting the default to `True` and raising a deprecation warning, since matrix orderings haven't been in Sage for very long. (Have they?) But that seems dicier.

> I think degee methods are for polynomials while exponent methods are for monomials.

There's a strong case to be made for using monomials (efficiency, for example) but I also think that's a separate discussion, for a separate ticket. AFAIK Singular doesn't distinguish the two.

> So it should be more convenient to use exponent methods with monomials. It would even be reasonable to raise an error if f is not a monomial in f.exponents()...

I would prefer not to deprecate old ways of doing things unless they were actually wrong or demonstrably dangerous. I don't think that's the case here, but maybe I'm wrong.



---

archive/issue_comments_123915.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@johnperry-math](#comment:8):\n> There's a strong case to be made for using monomials (efficiency, for example) but I also think that's a separate discussion, for a separate ticket.\n\nI forgot to say: I also think monomials should be a separate class, not part of `multi_polynomial_libsingular`, in no small part because Singular doesn't distinguish the two.",
    "created_at": "2011-09-26T18:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123915",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@johnperry-math](#comment:8):
> There's a strong case to be made for using monomials (efficiency, for example) but I also think that's a separate discussion, for a separate ticket.

I forgot to say: I also think monomials should be a separate class, not part of `multi_polynomial_libsingular`, in no small part because Singular doesn't distinguish the two.



---

archive/issue_comments_123916.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI've attached a patch that implements this with a keyword (`std_grading`). The `total_degree_exponents()` method has disappeared, and `degree()` also accepts the keyword.",
    "created_at": "2011-09-26T18:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123916",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:10" align="right">comment:10</div>

I've attached a patch that implements this with a keyword (`std_grading`). The `total_degree_exponents()` method has disappeared, and `degree()` also accepts the keyword.



---

archive/issue_comments_123917.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWhoops -- I had forgotten to refresh the mercurial queue... new patch in a second.",
    "created_at": "2011-09-26T18:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123917",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:11" align="right">comment:11</div>

Whoops -- I had forgotten to refresh the mercurial queue... new patch in a second.



---

archive/issue_comments_123918.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n*bump* any chance of a review?",
    "created_at": "2011-11-10T11:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123918",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:12" align="right">comment:12</div>

*bump* any chance of a review?



---

archive/issue_comments_123919.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI have trouble applying this patch to 4.8.alpha1:\n\n```\nHunk #1 succeeded at 2414 with fuzz 2 (offset 191 lines).\nHunk #4 FAILED at 2260\nHunk #5 succeeded at 2466 with fuzz 2 (offset 191 lines).\nHunk #6 FAILED at 2306\n2 out of 6 hunks FAILED -- saving rejects to file sage/rings/polynomial/multi_polynomial_libsingular.pyx.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac11847_distinguish_ungraded_totaldegree.patch\n```\n\nI think the implementation is fine (i.e., I read the patch) so for me all that is needed is to check the formalities (applies, tests pass, docs look okay, etc.)",
    "created_at": "2011-11-14T12:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123919",
    "user": "https://github.com/malb"
}
```

<div id="comment:13" align="right">comment:13</div>

I have trouble applying this patch to 4.8.alpha1:

```
Hunk #1 succeeded at 2414 with fuzz 2 (offset 191 lines).
Hunk #4 FAILED at 2260
Hunk #5 succeeded at 2466 with fuzz 2 (offset 191 lines).
Hunk #6 FAILED at 2306
2 out of 6 hunks FAILED -- saving rejects to file sage/rings/polynomial/multi_polynomial_libsingular.pyx.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac11847_distinguish_ungraded_totaldegree.patch
```

I think the implementation is fine (i.e., I read the patch) so for me all that is needed is to check the formalities (applies, tests pass, docs look okay, etc.)



---

archive/issue_events_157892.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-14T12:26:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157892"
}
```



---

archive/issue_events_157893.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-14T12:26:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157893"
}
```



---

archive/issue_comments_123920.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac11847_distinguish_ungraded_totaldegree.patch.gz](https://github.com/sagemath/sage/files/ticket11847/trac11847_distinguish_ungraded_totaldegree.patch.gz)**\n\nI was unaware that 4.8.alpha1 was out... have to pay better attention to `sage-devel`.\n\nNew patch works on my installation of 4.8.alpha1. Thanks!",
    "created_at": "2011-11-14T20:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123920",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac11847_distinguish_ungraded_totaldegree.patch.gz](https://github.com/sagemath/sage/files/ticket11847/trac11847_distinguish_ungraded_totaldegree.patch.gz)**

I was unaware that 4.8.alpha1 was out... have to pay better attention to `sage-devel`.

New patch works on my installation of 4.8.alpha1. Thanks!



---

archive/issue_events_157894.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-11-14T20:04:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157894"
}
```



---

archive/issue_events_157895.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2011-11-14T20:04:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157895"
}
```



---

archive/issue_events_157896.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-14T22:02:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157896"
}
```



---

archive/issue_events_157897.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2011-11-14T22:02:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157897"
}
```



---

archive/issue_comments_123921.json:
```json
{
    "body": "Reviewer: **Martin Albrecht**",
    "created_at": "2011-11-14T22:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123921",
    "user": "https://github.com/malb"
}
```

Reviewer: **Martin Albrecht**



---

archive/issue_comments_123922.json:
```json
{
    "body": "Changed author from **john_perry** to **John Perry**",
    "created_at": "2011-11-14T22:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123922",
    "user": "https://github.com/malb"
}
```

Changed author from **john_perry** to **John Perry**



---

archive/issue_comments_123923.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\napplies cleanly && doctests pass && reads good.",
    "created_at": "2011-11-14T22:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123923",
    "user": "https://github.com/malb"
}
```

<div id="comment:15" align="right">comment:15</div>

applies cleanly && doctests pass && reads good.



---

archive/issue_comments_123924.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWhat is there to be reported upstream?",
    "created_at": "2011-11-16T14:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123924",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

What is there to be reported upstream?



---

archive/issue_comments_123925.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **None of the above - read trac for reasoning.**",
    "created_at": "2011-11-16T18:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123925",
    "user": "https://github.com/johnperry-math"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **None of the above - read trac for reasoning.**



---

archive/issue_comments_123926.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment:16):\n> What is there to be reported upstream?\n\nIIRC, I checked that box only because Simon had mentioned that someone could discuss this behavior with the Singular developers at the then-upcoming Sage days; see the discussion at\n\n    http://groups.google.com/group/sage-devel/browse_thread/thread/fc6959dc18d6cda1/\n\nI don't know if anyone actually talked about it with them, though -- Simon didn't seem perturbed. As far as I can tell, the bug (if any) was in our documentation, not theirs. Given that this assertion was controversial, I classified this as \"an enhancement\".\n\nIf you think it's okay, I'd prefer removing the \"report upstream\", and change it to \"None of the above; see trac for reasoning\". I've done that already, so change it back if you think that's inappropriate.",
    "created_at": "2011-11-16T18:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123926",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment:16):
> What is there to be reported upstream?

IIRC, I checked that box only because Simon had mentioned that someone could discuss this behavior with the Singular developers at the then-upcoming Sage days; see the discussion at

    http://groups.google.com/group/sage-devel/browse_thread/thread/fc6959dc18d6cda1/

I don't know if anyone actually talked about it with them, though -- Simon didn't seem perturbed. As far as I can tell, the bug (if any) was in our documentation, not theirs. Given that this assertion was controversial, I classified this as "an enhancement".

If you think it's okay, I'd prefer removing the "report upstream", and change it to "None of the above; see trac for reasoning". I've done that already, so change it back if you think that's inappropriate.



---

archive/issue_comments_123927.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHi John and Jeroen,\n\nReplying to [@johnperry-math](#comment:17):\n> Replying to [@jdemeyer](#comment:16):\n> > What is there to be reported upstream?\n\n> \n> IIRC, I checked that box only because Simon had mentioned that someone could discuss this behavior with the Singular developers at the then-upcoming Sage days; \n\nYes, and I did talk with people there. So, it is reported upstream. If I remember correctly, the Singular folks somehow agreed that it would be nice to have, but on the other hand it didn't seem easy to them to implement it, given their data structure.\n\nSo, I don't think that if it will soon be fixed/enhanced/whatever in upstream.",
    "created_at": "2011-11-16T21:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123927",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:18" align="right">comment:18</div>

Hi John and Jeroen,

Replying to [@johnperry-math](#comment:17):
> Replying to [@jdemeyer](#comment:16):
> > What is there to be reported upstream?

> 
> IIRC, I checked that box only because Simon had mentioned that someone could discuss this behavior with the Singular developers at the then-upcoming Sage days; 

Yes, and I did talk with people there. So, it is reported upstream. If I remember correctly, the Singular folks somehow agreed that it would be nice to have, but on the other hand it didn't seem easy to them to implement it, given their data structure.

So, I don't think that if it will soon be fixed/enhanced/whatever in upstream.



---

archive/issue_events_157898.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-21T10:45:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157898"
}
```



---

archive/issue_events_157899.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-21T10:45:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11847#event-157899"
}
```



---

archive/issue_comments_123928.json:
```json
{
    "body": "Merged: **sage-4.8.alpha3**",
    "created_at": "2011-11-21T10:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11847#issuecomment-123928",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.8.alpha3**
