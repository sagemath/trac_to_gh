# Issue 11395: Upgrade Gfan to latest release (version 0.5)

archive/issues_011223.json:
```json
{
    "assignees": [],
    "body": "From the [Gfan page](http://www.math.tu-berlin.de/~jensen/software/gfan/gfan.html):\n\"Gfan version 0.5 (January 23th 2011, major update, Gr\u00f6bner bases/fans over the integers (experimental), p-adic Gr\u00f6bner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). \"\n\nWe should upgrade to this release.\n\nNew spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n\nApply:\n* [attachment:trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch)\n* [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)\n* [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)\n\n**Keywords:** tropical geometry\n\n**Reviewer:** Fran\u00e7ois Bissey, Volker Braun\n\n**Author:** Marshall Hampton, Fran\u00e7ois Bissey\n\n**Merged:** sage-5.5.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/11395\n\n",
    "closed_at": "2012-11-12T21:57:09Z",
    "created_at": "2011-05-28T03:55:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Gfan to latest release (version 0.5)",
    "type": "issue",
    "updated_at": "2012-11-12T21:57:09Z",
    "url": "https://github.com/sagemath/sage/issues/11395",
    "user": "https://github.com/sagetrac-mhampton"
}
```
From the [Gfan page](http://www.math.tu-berlin.de/~jensen/software/gfan/gfan.html):
"Gfan version 0.5 (January 23th 2011, major update, Gröbner bases/fans over the integers (experimental), p-adic Gröbner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). "

We should upgrade to this release.

New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)

Apply:
* [attachment:trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch)
* [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)
* [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)

**Keywords:** tropical geometry

**Reviewer:** François Bissey, Volker Braun

**Author:** Marshall Hampton, François Bissey

**Merged:** sage-5.5.beta1

Issue created by migration from https://trac.sagemath.org/ticket/11395





---

archive/issue_events_127739.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127739"
}
```



---

archive/issue_events_127740.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127740"
}
```



---

archive/issue_events_127741.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127741"
}
```



---

archive/issue_comments_117319.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nOn Gentoo we already did this, so here a little summary what to do:\n\n- in sage/interfaces/gfan.py, we have to change `cmd = 'gfan'` to `cmd = 'gfan_bases'` because the earlier is deprecated. If we do not do this, gfan prints:\n\n This is the Gfan program for computing Groebner fans and tropical varieties.\n Use the command \"gfan list\" to view all subcommands.\n The command \"gfan\" is deprecate for computing all Groebner bases of an ideal.\n Please use subcommand \"gfan _bases\" instead. Awaiting input. <Ctrl>-D to end.\n\n This confuses the current error detection code which assumes every output before commands as an error.\n\n- after adjusting the interface code, we have to review the failing doctests. On my box these are:\n  - sage -t  -force_lib devel/sage-main/doc/fr/tutorial/tour_advanced.rst\n  - sage -t  -force_lib devel/sage-main/doc/en/tutorial/tour_advanced.rst\n  - sage -t  -force_lib devel/sage-main/sage/rings/polynomial/groebner_fan.py\n\n I did not have a closer look at them, but they look like gfan-0.5 reorders its output.",
    "created_at": "2011-05-28T09:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117319",
    "user": "https://github.com/sagetrac-cschwan"
}
```

<a id='comment:1'>**Comment 1:**</a>
On Gentoo we already did this, so here a little summary what to do:

- in sage/interfaces/gfan.py, we have to change `cmd = 'gfan'` to `cmd = 'gfan_bases'` because the earlier is deprecated. If we do not do this, gfan prints:

 This is the Gfan program for computing Groebner fans and tropical varieties.
 Use the command "gfan list" to view all subcommands.
 The command "gfan" is deprecate for computing all Groebner bases of an ideal.
 Please use subcommand "gfan _bases" instead. Awaiting input. <Ctrl>-D to end.

 This confuses the current error detection code which assumes every output before commands as an error.

- after adjusting the interface code, we have to review the failing doctests. On my box these are:
  - sage -t  -force_lib devel/sage-main/doc/fr/tutorial/tour_advanced.rst
  - sage -t  -force_lib devel/sage-main/doc/en/tutorial/tour_advanced.rst
  - sage -t  -force_lib devel/sage-main/sage/rings/polynomial/groebner_fan.py

 I did not have a closer look at them, but they look like gfan-0.5 reorders its output.



---

archive/issue_comments_117320.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nA candidate package is at \n[http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg)\n\nI will take your suggestion on patching the interface.  I am aware of some other issues that need to be fixed; I was going to put those on another ticket but if 0.5 changes its output anyway I suppose it makes sense to put both the update and interface patches in one ticket.",
    "created_at": "2011-05-28T15:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117320",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:2'>**Comment 2:**</a>
A candidate package is at 
[http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg)

I will take your suggestion on patching the interface.  I am aware of some other issues that need to be fixed; I was going to put those on another ticket but if 0.5 changes its output anyway I suppose it makes sense to put both the update and interface patches in one ticket.



---

archive/issue_comments_117321.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nI had kind of started work on that. I am starting to hate when sage-on-gentoo is too much ahead and it breaks tests in non trivial ways. Most of the tests mentioned by Christopher are broken by trivial changes of formatting or ordering. But that one I think needs careful checking:\n\n```\n**********************************************************************                                                              \nFile \"/usr/share/sage/devel/sage-main/sage/rings/polynomial/groebner_fan.py\", line 606:                                             \n    sage: g.weight_vectors()                                                                                                        \nExpected:                                                                                                                           \n    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (1, 1, 4), (1, 1, 1), (1, 4, 1), (1, 4, 10)]                                                  \nGot:                                                                                                                                \n    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (5, 1, 4), (1, 1, 1), (1, 4, 8), (1, 4, 10)]\n**********************************************************************\n```\nIt is not obvious that the two answers are equivalent, I was going to submit it to the opinion of sage-devel on Monday. \n\nOn another note, do you know what this section of the Makefile is all about\n\n```\nifeq ($(sagepath),)\nSAGE_LINKOPTIONS = \nSAGE_INCLUDEOPTIONS =\nelse\nSAGE_LINKOPTIONS = -L$(sagepath)/ -lpython2.6 -lcsage -lsingular\nSAGE_INCLUDEOPTIONS = -I $(sagepath)/\nSAGE_OBJECTS = sage.o sage_link.so\n\nsage_link.so: sage_link.pyx setup.py\n       python setup.py build_ext --inplace --pyrex-include-dirs=$(SAGE_ROOT)/devel/sage/\nendif\n```\nIt is not build by default and the cython source is missing (the resulting .cpp is present) but it looks like someone is looking at producing their own sage-extension.",
    "created_at": "2011-05-28T19:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117321",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'>**Comment 3:**</a>
I had kind of started work on that. I am starting to hate when sage-on-gentoo is too much ahead and it breaks tests in non trivial ways. Most of the tests mentioned by Christopher are broken by trivial changes of formatting or ordering. But that one I think needs careful checking:

```
**********************************************************************                                                              
File "/usr/share/sage/devel/sage-main/sage/rings/polynomial/groebner_fan.py", line 606:                                             
    sage: g.weight_vectors()                                                                                                        
Expected:                                                                                                                           
    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (1, 1, 4), (1, 1, 1), (1, 4, 1), (1, 4, 10)]                                                  
Got:                                                                                                                                
    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (5, 1, 4), (1, 1, 1), (1, 4, 8), (1, 4, 10)]
**********************************************************************
```
It is not obvious that the two answers are equivalent, I was going to submit it to the opinion of sage-devel on Monday. 

On another note, do you know what this section of the Makefile is all about

```
ifeq ($(sagepath),)
SAGE_LINKOPTIONS = 
SAGE_INCLUDEOPTIONS =
else
SAGE_LINKOPTIONS = -L$(sagepath)/ -lpython2.6 -lcsage -lsingular
SAGE_INCLUDEOPTIONS = -I $(sagepath)/
SAGE_OBJECTS = sage.o sage_link.so

sage_link.so: sage_link.pyx setup.py
       python setup.py build_ext --inplace --pyrex-include-dirs=$(SAGE_ROOT)/devel/sage/
endif
```
It is not build by default and the cython source is missing (the resulting .cpp is present) but it looks like someone is looking at producing their own sage-extension.



---

archive/issue_comments_117322.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nI just had a quick look at your spkg. You didn't use \"hg rm\" to remove the files that are not needed anymore in patches. So hg status says this\n\n```\nfrancois@vrooom ~/Downloads/gfan-0.5 $ hg status\n! patches/gcc45_linalg.cpp.patch\n! patches/gcc45_matrix.h.patch\n! patches/linalg.cpp\n! patches/matrix.h\n! patches/polynomial.cpp\n! patches/polynomial.cpp.diff\n```",
    "created_at": "2011-05-28T19:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117322",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'>**Comment 4:**</a>
I just had a quick look at your spkg. You didn't use "hg rm" to remove the files that are not needed anymore in patches. So hg status says this

```
francois@vrooom ~/Downloads/gfan-0.5 $ hg status
! patches/gcc45_linalg.cpp.patch
! patches/gcc45_matrix.h.patch
! patches/linalg.cpp
! patches/matrix.h
! patches/polynomial.cpp
! patches/polynomial.cpp.diff
```



---

archive/issue_comments_117323.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nOK, I removed the unneeded patches.  \n\nI don't think we want to change 'gfan' to 'gfan_bases' in the interface, that should be done in rings/polynomial/groebner_fan.py.  I'll try to do that this week, along with other interface updates.",
    "created_at": "2011-05-31T15:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117323",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:5'>**Comment 5:**</a>
OK, I removed the unneeded patches.  

I don't think we want to change 'gfan' to 'gfan_bases' in the interface, that should be done in rings/polynomial/groebner_fan.py.  I'll try to do that this week, along with other interface updates.



---

archive/issue_comments_117324.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nOK, looks better now. SPKG.txt could be more verbose about your changes (you dropped patches because they are not needed anymore and so on). However the spkg looks in good shape now. I'll give you a review (hopefully positive) once you post the patches.",
    "created_at": "2011-05-31T22:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117324",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'>**Comment 6:**</a>
OK, looks better now. SPKG.txt could be more verbose about your changes (you dropped patches because they are not needed anymore and so on). However the spkg looks in good shape now. I'll give you a review (hopefully positive) once you post the patches.



---

archive/issue_events_127742.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-27T15:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127742"
}
```



---

archive/issue_comments_117325.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nWe need some patch to use gfan 5.0 without at least generating noise. Putting in needs_work.",
    "created_at": "2012-02-27T17:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117325",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'>**Comment 8:**</a>
We need some patch to use gfan 5.0 without at least generating noise. Putting in needs_work.



---

archive/issue_events_127743.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-02-27T17:16:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127743"
}
```



---

archive/issue_events_127744.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-02-27T17:16:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127744"
}
```



---

archive/issue_comments_117326.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nThis probably needs to get rebased on #12760 (not yet merged, no positive review yet, but hopefully...)\n\n(#12760 fixes C++11 issues with upstream code in 0.4plus, and also cleans up Sage's part.)",
    "created_at": "2012-03-28T17:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117326",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'>**Comment 9:**</a>
This probably needs to get rebased on #12760 (not yet merged, no positive review yet, but hopefully...)

(#12760 fixes C++11 issues with upstream code in 0.4plus, and also cleans up Sage's part.)



---

archive/issue_comments_117327.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nIs the patch safe to use with earlier version of gcc? c++, any standard, is a always a major source of headaches too me.",
    "created_at": "2012-03-28T20:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117327",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'>**Comment 10:**</a>
Is the patch safe to use with earlier version of gcc? c++, any standard, is a always a major source of headaches too me.



---

archive/issue_comments_117328.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nI hope to make some progress on this ticket for Sage-Combinat Days 40, July 9-13.\nSo far, I have a working spkg on my mac, but I need to figure out if the gcc-4.5.0 patches need to be rebased for portability.  I also want to add in some interface improvements (supporting symmetry for example).\n\nIn case anyone is interested in helping I will post my progress.\nWorking spkg: [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n\nCurrent patch: [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)",
    "created_at": "2012-07-07T19:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117328",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:11'>**Comment 11:**</a>
I hope to make some progress on this ticket for Sage-Combinat Days 40, July 9-13.
So far, I have a working spkg on my mac, but I need to figure out if the gcc-4.5.0 patches need to be rebased for portability.  I also want to add in some interface improvements (supporting symmetry for example).

In case anyone is interested in helping I will post my progress.
Working spkg: [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)

Current patch: [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)



---

archive/issue_comments_117329.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nIt is a pleasure to see some progress on this. I will have a look.",
    "created_at": "2012-07-08T21:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117329",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'>**Comment 12:**</a>
It is a pleasure to see some progress on this. I will have a look.



---

archive/issue_comments_117330.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nPatch works great but there are more instances of tests of gfan in the documentation:\n\n```\nsage -t -long -force_lib \"devel/sage/doc/fr/tutorial/tour_advanced.rst\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/doc/fr/tutorial/tour_advanced.rst\", line 68:\n    sage: F.reduced_groebner_bases ()\nExpected:\n    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c],\n     [c^2 - b*d, -b*c + a*d, -b^2 + a*c],\n     [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d],\n     [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c],\n     [c^2 - b*d, b*c - a*d, b^2 - a*c],\n     [-c^2 + b*d, b^2 - a*c, -b*c + a*d],\n     [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2],\n     [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c]]\nGot:\n    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c], [-c^2 + b*d, b^2 - a*c, -b*c + a*d], [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2], [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c], [c^2 - b*d, -b*c + a*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d], [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, b^2 - a*c]]\n\n```\nThat's the French one but we have the same in English, Russian and German (de) version.",
    "created_at": "2012-07-09T01:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117330",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'>**Comment 13:**</a>
Patch works great but there are more instances of tests of gfan in the documentation:

```
sage -t -long -force_lib "devel/sage/doc/fr/tutorial/tour_advanced.rst"
**********************************************************************
File "/usr/share/sage/devel/sage/doc/fr/tutorial/tour_advanced.rst", line 68:
    sage: F.reduced_groebner_bases ()
Expected:
    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c],
     [c^2 - b*d, -b*c + a*d, -b^2 + a*c],
     [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d],
     [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c],
     [c^2 - b*d, b*c - a*d, b^2 - a*c],
     [-c^2 + b*d, b^2 - a*c, -b*c + a*d],
     [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2],
     [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c]]
Got:
    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c], [-c^2 + b*d, b^2 - a*c, -b*c + a*d], [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2], [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c], [c^2 - b*d, -b*c + a*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d], [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, b^2 - a*c]]

```
That's the French one but we have the same in English, Russian and German (de) version.



---

archive/issue_comments_117331.json:
```json
{
    "body": "**Attachment:** [trac11395-fix_tutorial.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)\n\nFix tutorial with gfan 0.5",
    "created_at": "2012-07-09T02:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117331",
    "user": "https://github.com/kiwifb"
}
```

**Attachment:** [trac11395-fix_tutorial.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)

Fix tutorial with gfan 0.5



---

archive/issue_comments_117332.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nAttaching a patch for the tutorial. Do you want me to clean up your spkg a little bit? We should only keep the patch for gcc 4.7 and really switch to patch. Of course SPKG.txt needs updating and cleaning after your work. There doesn't seem to be any tests so spkg-check. I can do some of that clean up if you want.",
    "created_at": "2012-07-09T03:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117332",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'>**Comment 14:**</a>
Attaching a patch for the tutorial. Do you want me to clean up your spkg a little bit? We should only keep the patch for gcc 4.7 and really switch to patch. Of course SPKG.txt needs updating and cleaning after your work. There doesn't seem to be any tests so spkg-check. I can do some of that clean up if you want.



---

archive/issue_comments_117333.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nIf you can do some of that soon (next two or three days), then go for it, that would be great. In the meantime I will focus on adding support for symmetry and maybe some other new things in gfan-0.5 like computing over ZZ.",
    "created_at": "2012-07-09T13:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117333",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:15'>**Comment 15:**</a>
If you can do some of that soon (next two or three days), then go for it, that would be great. In the meantime I will focus on adding support for symmetry and maybe some other new things in gfan-0.5 like computing over ZZ.



---

archive/issue_comments_117334.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nOK I am doing this now. A bit more work than I had expected but doable.",
    "created_at": "2012-07-10T23:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117334",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'>**Comment 16:**</a>
OK I am doing this now. A bit more work than I had expected but doable.



---

archive/issue_comments_117335.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nThe file app_minkowski.cpp had changes in it that are not in the patch file you shipped. I cannot see the equivalent modification in Gentoo for gcc-4.7.0 so I am skipping it.",
    "created_at": "2012-07-11T00:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117335",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>**Comment 17:**</a>
The file app_minkowski.cpp had changes in it that are not in the patch file you shipped. I cannot see the equivalent modification in Gentoo for gcc-4.7.0 so I am skipping it.



---

archive/issue_comments_117336.json:
```json
{
    "body": "**Changing author** from \"Marshall Hampton\" to \"Marshall Hampton, Fran\u00e7ois Bissey\".",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117336",
    "user": "https://github.com/kiwifb"
}
```

**Changing author** from "Marshall Hampton" to "Marshall Hampton, François Bissey".



---

archive/issue_comments_117337.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117337",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_117338.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,3 +2,9 @@\n \"Gfan version 0.5 (January 23th 2011, major update, Gr\u00f6bner bases/fans over the integers (experimental), p-adic Gr\u00f6bner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). \"\n \n We should upgrade to this release.\n+\n+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n+\n+Apply:\n+* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n+* [attachment: trac11395-fix_tutorial.patch]\n``````\n",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117338",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,3 +2,9 @@
 "Gfan version 0.5 (January 23th 2011, major update, Gröbner bases/fans over the integers (experimental), p-adic Gröbner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). "
 
 We should upgrade to this release.
+
+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
+
+Apply:
+* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
+* [attachment: trac11395-fix_tutorial.patch]
``````




---

archive/issue_comments_117339.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nOK put a new spkg up. I have gone through the whole TODO list so the changes have been a bit invasive. I made a new Makefile that uses CXXFLAGS, LDFLAGS and CPPFLAGS - it could possibly use a little bit more love before sending upstream. Scrap that it would need a fair rewrite to get rid of a lot of stuff. Patch is now used throughout. Removal of the old gfan install is now done after the build and done correctly - which it wasn't before because of a misplaced double-quote.\n\nI think that sums it up. Over to you Marshall to see if you like the whole thing.",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117339",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'>**Comment 18:**</a>
OK put a new spkg up. I have gone through the whole TODO list so the changes have been a bit invasive. I made a new Makefile that uses CXXFLAGS, LDFLAGS and CPPFLAGS - it could possibly use a little bit more love before sending upstream. Scrap that it would need a fair rewrite to get rid of a lot of stuff. Patch is now used throughout. Removal of the old gfan install is now done after the build and done correctly - which it wasn't before because of a misplaced double-quote.

I think that sums it up. Over to you Marshall to see if you like the whole thing.



---

archive/issue_events_127745.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-07-11T01:51:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127745"
}
```



---

archive/issue_events_127746.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-07-11T01:51:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127746"
}
```



---

archive/issue_comments_117340.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n \n We should upgrade to this release.\n \n-New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n+New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n \n Apply:\n * [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n``````\n",
    "created_at": "2012-07-12T22:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117340",
    "user": "https://github.com/sagetrac-mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 
 We should upgrade to this release.
 
-New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
+New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
 
 Apply:
 * [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
``````




---

archive/issue_comments_117341.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n \n Apply:\n-* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n+* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n * [attachment: trac11395-fix_tutorial.patch]\n``````\n",
    "created_at": "2012-07-12T22:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117341",
    "user": "https://github.com/sagetrac-mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
 
 Apply:
-* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
+* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
 * [attachment: trac11395-fix_tutorial.patch]
``````




---

archive/issue_comments_117342.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nI credited you (Fran\u00e7ois Bissey) in the SPKG.txt, and I have uploaded a patch for the interface that I think greatly improves the functionality as well as supporting the new version.  I am tempted to do more refactoring so I will not flag this for review quite yet.",
    "created_at": "2012-07-12T22:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117342",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:21'>**Comment 21:**</a>
I credited you (François Bissey) in the SPKG.txt, and I have uploaded a patch for the interface that I think greatly improves the functionality as well as supporting the new version.  I am tempted to do more refactoring so I will not flag this for review quite yet.



---

archive/issue_comments_117343.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nI should mention that I am not really qualified to review the changes made to the spkg-install, but I will test this on a few more linux and OS X systems at least.",
    "created_at": "2012-07-12T22:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117343",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<a id='comment:22'>**Comment 22:**</a>
I should mention that I am not really qualified to review the changes made to the spkg-install, but I will test this on a few more linux and OS X systems at least.



---

archive/issue_comments_117344.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nActually I may make one more change. I defined PREFIX on the line calling make but the variable is never used. It would be if we were using the makefile to perform the installation but we don't. I tested the spkg on linux on power7. And as a final note I should add that gfan itself doesn't come with either tests or documentation. A curiosity is that gfan seem to be mostly c++ but link against libgmp rather than libgmpxx.",
    "created_at": "2012-07-12T22:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117344",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'>**Comment 23:**</a>
Actually I may make one more change. I defined PREFIX on the line calling make but the variable is never used. It would be if we were using the makefile to perform the installation but we don't. I tested the spkg on linux on power7. And as a final note I should add that gfan itself doesn't come with either tests or documentation. A curiosity is that gfan seem to be mostly c++ but link against libgmp rather than libgmpxx.



---

archive/issue_comments_117345.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nOK I updated the spkg. In the end I kept the gcc-4.7 patch for app_minkowsky.cpp as before to minimize the burden of review. \n\nAs mentioned I removed the setting of PREFIX and made a comment about it.",
    "created_at": "2012-07-23T00:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117345",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'>**Comment 24:**</a>
OK I updated the spkg. In the end I kept the gcc-4.7 patch for app_minkowsky.cpp as before to minimize the burden of review. 

As mentioned I removed the setting of PREFIX and made a comment about it.



---

archive/issue_comments_117346.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n \n We should upgrade to this release.\n \n-New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n * [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n``````\n",
    "created_at": "2012-07-23T00:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117346",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 
 We should upgrade to this release.
 
-New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
 * [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
``````




---

archive/issue_comments_117347.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nI get a doctest error on sage-5.4.beta1 due to #12544\n\n```\nsage -t  devel/sage-main/sage/rings/polynomial/groebner_fan.py\n**********************************************************************\nFile \"/home/vbraun/opt/sage-5.4.beta1/devel/sage-main/sage/rings/polynomial/groebner_fan.py\", line 504:\n    sage: [q.facet_normals() for q in fan]\nExpected:\n    [(M(0, -1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(-1, 0, 0)), (M(0, 0, 1), M(-1, 0, 0)), (M(0, 1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(0, -1, 0)), (M(0, 0, 1), M(0, -1, 0)), (M(0, 1, 0), M(0, 0, -1)), (M(0, 1, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, -1, 0)), (M(1, 0, 0), M(0, 0, -1)), (M(1, 0, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, 1, 0))]\nGot:\n    [M( 0, -1, 0),\n    M(-1,  0, 0)\n    in 3-d lattice M, M( 0, 0, -1),\n    M(-1, 0,  0)\n    in 3-d lattice M, M( 0, 0, 1),\n    M(-1, 0, 0)\n    in 3-d lattice M, M( 0, 1, 0),\n    M(-1, 0, 0)\n    in 3-d lattice M, M(0,  0, -1),\n    M(0, -1,  0)\n    in 3-d lattice M, M(0,  0, 1),\n    M(0, -1, 0)\n    in 3-d lattice M, M(0, 1,  0),\n    M(0, 0, -1)\n    in 3-d lattice M, M(0, 1, 0),\n    M(0, 0, 1)\n    in 3-d lattice M, M(1,  0, 0),\n    M(0, -1, 0)\n    in 3-d lattice M, M(1, 0,  0),\n    M(0, 0, -1)\n    in 3-d lattice M, M(1, 0, 0),\n    M(0, 0, 1)\n    in 3-d lattice M, M(1, 0, 0),\n    M(0, 1, 0)\n    in 3-d lattice M]\n```",
    "created_at": "2012-09-17T09:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117347",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'>**Comment 25:**</a>
I get a doctest error on sage-5.4.beta1 due to #12544

```
sage -t  devel/sage-main/sage/rings/polynomial/groebner_fan.py
**********************************************************************
File "/home/vbraun/opt/sage-5.4.beta1/devel/sage-main/sage/rings/polynomial/groebner_fan.py", line 504:
    sage: [q.facet_normals() for q in fan]
Expected:
    [(M(0, -1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(-1, 0, 0)), (M(0, 0, 1), M(-1, 0, 0)), (M(0, 1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(0, -1, 0)), (M(0, 0, 1), M(0, -1, 0)), (M(0, 1, 0), M(0, 0, -1)), (M(0, 1, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, -1, 0)), (M(1, 0, 0), M(0, 0, -1)), (M(1, 0, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, 1, 0))]
Got:
    [M( 0, -1, 0),
    M(-1,  0, 0)
    in 3-d lattice M, M( 0, 0, -1),
    M(-1, 0,  0)
    in 3-d lattice M, M( 0, 0, 1),
    M(-1, 0, 0)
    in 3-d lattice M, M( 0, 1, 0),
    M(-1, 0, 0)
    in 3-d lattice M, M(0,  0, -1),
    M(0, -1,  0)
    in 3-d lattice M, M(0,  0, 1),
    M(0, -1, 0)
    in 3-d lattice M, M(0, 1,  0),
    M(0, 0, -1)
    in 3-d lattice M, M(0, 1, 0),
    M(0, 0, 1)
    in 3-d lattice M, M(1,  0, 0),
    M(0, -1, 0)
    in 3-d lattice M, M(1, 0,  0),
    M(0, 0, -1)
    in 3-d lattice M, M(1, 0, 0),
    M(0, 0, 1)
    in 3-d lattice M, M(1, 0, 0),
    M(0, 1, 0)
    in 3-d lattice M]
```



---

archive/issue_comments_117348.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n-* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n-* [attachment: trac11395-fix_tutorial.patch]\n+* [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)\n+* [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)\n``````\n",
    "created_at": "2012-10-05T15:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117348",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
-* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
-* [attachment: trac11395-fix_tutorial.patch]
+* [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)
+* [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)
``````




---

archive/issue_events_127747.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:01:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127747"
}
```



---

archive/issue_events_127748.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:01:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127748"
}
```



---

archive/issue_comments_117349.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nneeds_work because of Volker's failure.",
    "created_at": "2012-10-05T15:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117349",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>**Comment 27:**</a>
needs_work because of Volker's failure.



---

archive/issue_comments_117350.json:
```json
{
    "body": "**Attachment:** [trac_11395_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)\n\nInitial patch",
    "created_at": "2012-10-23T18:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117350",
    "user": "https://github.com/vbraun"
}
```

**Attachment:** [trac_11395_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)

Initial patch



---

archive/issue_events_127749.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127749"
}
```



---

archive/issue_events_127750.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127750"
}
```



---

archive/issue_events_127751.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127751"
}
```



---

archive/issue_events_127752.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127752"
}
```



---

archive/issue_comments_117351.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nAdded a trivial fix, setting it back to positive review.",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117351",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'>**Comment 28:**</a>
Added a trivial fix, setting it back to positive review.



---

archive/issue_comments_117352.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,3 +8,4 @@\n Apply:\n * [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)\n * [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)\n+* [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)\n``````\n",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117352",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,3 +8,4 @@
 Apply:
 * [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)
 * [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)
+* [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)
``````




---

archive/issue_comments_117353.json:
```json
{
    "body": "**Changing reviewer** from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Volker Braun\".",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117353",
    "user": "https://github.com/vbraun"
}
```

**Changing reviewer** from "François Bissey" to "François Bissey, Volker Braun".



---

archive/issue_events_127753.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-30T08:19:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127753"
}
```



---

archive/issue_events_127754.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-30T08:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127754"
}
```



---

archive/issue_comments_117354.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nThe first patch needs a proper commit message.",
    "created_at": "2012-10-30T08:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117354",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>**Comment 29:**</a>
The first patch needs a proper commit message.



---

archive/issue_comments_117355.json:
```json
{
    "body": "Added commit message",
    "created_at": "2012-11-06T01:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117355",
    "user": "https://github.com/vbraun"
}
```

Added commit message



---

archive/issue_events_127755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T01:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127755"
}
```



---

archive/issue_events_127756.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T01:53:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127756"
}
```



---

archive/issue_comments_117356.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\n**Attachment:** [trac_11395_update_gfan_vb.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)\n\nI've added the missing commit message.",
    "created_at": "2012-11-06T01:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117356",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'>**Comment 30:**</a>
**Attachment:** [trac_11395_update_gfan_vb.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)

I've added the missing commit message.



---

archive/issue_comments_117357.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n-* [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)\n+* [attachment:trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch)\n * [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)\n * [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)\n``````\n",
    "created_at": "2012-11-06T01:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117357",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
-* [attachment:trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch)
+* [attachment:trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch)
 * [attachment:trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch)
 * [attachment:trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch)
``````




---

archive/issue_comments_117358.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nThanks I had completely forgotten about this.",
    "created_at": "2012-11-06T01:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117358",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:31'>**Comment 31:**</a>
Thanks I had completely forgotten about this.



---

archive/issue_comments_117359.json:
```json
{
    "body": "**Merged:** sage-5.5.beta1",
    "created_at": "2012-11-12T21:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-117359",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.5.beta1



---

archive/issue_events_127757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T21:57:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127757"
}
```



---

archive/issue_events_127758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T21:57:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-127758"
}
```
