# Issue 11395: Upgrade Gfan to latest release (version 0.5)

archive/issues_011223.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nFrom the [Gfan page](http://www.math.tu-berlin.de/~jensen/software/gfan/gfan.html):\n\"Gfan version 0.5 (January 23th 2011, major update, Gr\u00f6bner bases/fans over the integers (experimental), p-adic Gr\u00f6bner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). \"\n\nWe should upgrade to this release.\n\nNew spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n\nApply:\n* [attachment: trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)\n* [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)\n* [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)\n\nComponent: **packages: standard**\n\nKeywords: **tropical geometry**\n\nAuthor: **Marshall Hampton, Fran\u00e7ois Bissey**\n\nReviewer: **Fran\u00e7ois Bissey, Volker Braun**\n\nMerged: **sage-5.5.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11395_\n\n",
    "closed_at": "2012-11-12T21:57:09Z",
    "created_at": "2011-05-28T03:55:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20geometry"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Gfan to latest release (version 0.5)",
    "type": "issue",
    "updated_at": "2012-11-12T21:57:09Z",
    "url": "https://github.com/sagemath/sage/issues/11395",
    "user": "https://github.com/sagetrac-mhampton"
}
```
<div id="comment:0"></div>

From the [Gfan page](http://www.math.tu-berlin.de/~jensen/software/gfan/gfan.html):
"Gfan version 0.5 (January 23th 2011, major update, Gröbner bases/fans over the integers (experimental), p-adic Gröbner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). "

We should upgrade to this release.

New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)

Apply:
* [attachment: trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)
* [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)
* [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)

Component: **packages: standard**

Keywords: **tropical geometry**

Author: **Marshall Hampton, François Bissey**

Reviewer: **François Bissey, Volker Braun**

Merged: **sage-5.5.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/11395_





---

archive/issue_events_150075.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150075"
}
```



---

archive/issue_events_150076.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150076"
}
```



---

archive/issue_events_150077.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150077"
}
```



---

archive/issue_events_150078.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150078"
}
```



---

archive/issue_events_150079.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-05-28T03:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150079"
}
```



---

archive/issue_comments_115181.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOn Gentoo we already did this, so here a little summary what to do:\n\n- in sage/interfaces/gfan.py, we have to change `cmd = 'gfan'` to `cmd = 'gfan_bases'` because the earlier is deprecated. If we do not do this, gfan prints:\n\n This is the Gfan program for computing Groebner fans and tropical varieties.\n Use the command \"gfan list\" to view all subcommands.\n The command \"gfan\" is deprecate for computing all Groebner bases of an ideal.\n Please use subcommand \"gfan _bases\" instead. Awaiting input. <Ctrl>-D to end.\n\n This confuses the current error detection code which assumes every output before commands as an error.\n\n- after adjusting the interface code, we have to review the failing doctests. On my box these are:\n  - sage -t  -force_lib devel/sage-main/doc/fr/tutorial/tour_advanced.rst\n  - sage -t  -force_lib devel/sage-main/doc/en/tutorial/tour_advanced.rst\n  - sage -t  -force_lib devel/sage-main/sage/rings/polynomial/groebner_fan.py\n\n I did not have a closer look at them, but they look like gfan-0.5 reorders its output.",
    "created_at": "2011-05-28T09:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115181",
    "user": "https://github.com/cschwan"
}
```

<div id="comment:1" align="right">comment:1</div>

On Gentoo we already did this, so here a little summary what to do:

- in sage/interfaces/gfan.py, we have to change `cmd = 'gfan'` to `cmd = 'gfan_bases'` because the earlier is deprecated. If we do not do this, gfan prints:

 This is the Gfan program for computing Groebner fans and tropical varieties.
 Use the command "gfan list" to view all subcommands.
 The command "gfan" is deprecate for computing all Groebner bases of an ideal.
 Please use subcommand "gfan _bases" instead. Awaiting input. <Ctrl>-D to end.

 This confuses the current error detection code which assumes every output before commands as an error.

- after adjusting the interface code, we have to review the failing doctests. On my box these are:
  - sage -t  -force_lib devel/sage-main/doc/fr/tutorial/tour_advanced.rst
  - sage -t  -force_lib devel/sage-main/doc/en/tutorial/tour_advanced.rst
  - sage -t  -force_lib devel/sage-main/sage/rings/polynomial/groebner_fan.py

 I did not have a closer look at them, but they look like gfan-0.5 reorders its output.



---

archive/issue_comments_115182.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nA candidate package is at \n[http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg)\n\nI will take your suggestion on patching the interface.  I am aware of some other issues that need to be fixed; I was going to put those on another ticket but if 0.5 changes its output anyway I suppose it makes sense to put both the update and interface patches in one ticket.",
    "created_at": "2011-05-28T15:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115182",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:2" align="right">comment:2</div>

A candidate package is at 
[http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.spkg)

I will take your suggestion on patching the interface.  I am aware of some other issues that need to be fixed; I was going to put those on another ticket but if 0.5 changes its output anyway I suppose it makes sense to put both the update and interface patches in one ticket.



---

archive/issue_comments_115183.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI had kind of started work on that. I am starting to hate when sage-on-gentoo is too much ahead and it breaks tests in non trivial ways. Most of the tests mentioned by Christopher are broken by trivial changes of formatting or ordering. But that one I think needs careful checking:\n\n```\n**********************************************************************                                                              \nFile \"/usr/share/sage/devel/sage-main/sage/rings/polynomial/groebner_fan.py\", line 606:                                             \n    sage: g.weight_vectors()                                                                                                        \nExpected:                                                                                                                           \n    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (1, 1, 4), (1, 1, 1), (1, 4, 1), (1, 4, 10)]                                                  \nGot:                                                                                                                                \n    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (5, 1, 4), (1, 1, 1), (1, 4, 8), (1, 4, 10)]\n**********************************************************************\n```\nIt is not obvious that the two answers are equivalent, I was going to submit it to the opinion of sage-devel on Monday. \n\nOn another note, do you know what this section of the Makefile is all about\n\n```\nifeq ($(sagepath),)\nSAGE_LINKOPTIONS = \nSAGE_INCLUDEOPTIONS =\nelse\nSAGE_LINKOPTIONS = -L$(sagepath)/ -lpython2.6 -lcsage -lsingular\nSAGE_INCLUDEOPTIONS = -I $(sagepath)/\nSAGE_OBJECTS = sage.o sage_link.so\n\nsage_link.so: sage_link.pyx setup.py\n       python setup.py build_ext --inplace --pyrex-include-dirs=$(SAGE_ROOT)/devel/sage/\nendif\n```\nIt is not build by default and the cython source is missing (the resulting .cpp is present) but it looks like someone is looking at producing their own sage-extension.",
    "created_at": "2011-05-28T19:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115183",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

I had kind of started work on that. I am starting to hate when sage-on-gentoo is too much ahead and it breaks tests in non trivial ways. Most of the tests mentioned by Christopher are broken by trivial changes of formatting or ordering. But that one I think needs careful checking:

```
**********************************************************************                                                              
File "/usr/share/sage/devel/sage-main/sage/rings/polynomial/groebner_fan.py", line 606:                                             
    sage: g.weight_vectors()                                                                                                        
Expected:                                                                                                                           
    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (1, 1, 4), (1, 1, 1), (1, 4, 1), (1, 4, 10)]                                                  
Got:                                                                                                                                
    [(3, 7, 1), (5, 1, 2), (7, 1, 4), (5, 1, 4), (1, 1, 1), (1, 4, 8), (1, 4, 10)]
**********************************************************************
```
It is not obvious that the two answers are equivalent, I was going to submit it to the opinion of sage-devel on Monday. 

On another note, do you know what this section of the Makefile is all about

```
ifeq ($(sagepath),)
SAGE_LINKOPTIONS = 
SAGE_INCLUDEOPTIONS =
else
SAGE_LINKOPTIONS = -L$(sagepath)/ -lpython2.6 -lcsage -lsingular
SAGE_INCLUDEOPTIONS = -I $(sagepath)/
SAGE_OBJECTS = sage.o sage_link.so

sage_link.so: sage_link.pyx setup.py
       python setup.py build_ext --inplace --pyrex-include-dirs=$(SAGE_ROOT)/devel/sage/
endif
```
It is not build by default and the cython source is missing (the resulting .cpp is present) but it looks like someone is looking at producing their own sage-extension.



---

archive/issue_comments_115184.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI just had a quick look at your spkg. You didn't use \"hg rm\" to remove the files that are not needed anymore in patches. So hg status says this\n\n```\nfrancois@vrooom ~/Downloads/gfan-0.5 $ hg status\n! patches/gcc45_linalg.cpp.patch\n! patches/gcc45_matrix.h.patch\n! patches/linalg.cpp\n! patches/matrix.h\n! patches/polynomial.cpp\n! patches/polynomial.cpp.diff\n```",
    "created_at": "2011-05-28T19:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115184",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

I just had a quick look at your spkg. You didn't use "hg rm" to remove the files that are not needed anymore in patches. So hg status says this

```
francois@vrooom ~/Downloads/gfan-0.5 $ hg status
! patches/gcc45_linalg.cpp.patch
! patches/gcc45_matrix.h.patch
! patches/linalg.cpp
! patches/matrix.h
! patches/polynomial.cpp
! patches/polynomial.cpp.diff
```



---

archive/issue_comments_115185.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOK, I removed the unneeded patches.  \n\nI don't think we want to change 'gfan' to 'gfan_bases' in the interface, that should be done in rings/polynomial/groebner_fan.py.  I'll try to do that this week, along with other interface updates.",
    "created_at": "2011-05-31T15:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115185",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

OK, I removed the unneeded patches.  

I don't think we want to change 'gfan' to 'gfan_bases' in the interface, that should be done in rings/polynomial/groebner_fan.py.  I'll try to do that this week, along with other interface updates.



---

archive/issue_comments_115186.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK, looks better now. SPKG.txt could be more verbose about your changes (you dropped patches because they are not needed anymore and so on). However the spkg looks in good shape now. I'll give you a review (hopefully positive) once you post the patches.",
    "created_at": "2011-05-31T22:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115186",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

OK, looks better now. SPKG.txt could be more verbose about your changes (you dropped patches because they are not needed anymore and so on). However the spkg looks in good shape now. I'll give you a review (hopefully positive) once you post the patches.



---

archive/issue_events_150080.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-27T15:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150080"
}
```



---

archive/issue_comments_115187.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWe need some patch to use gfan 5.0 without at least generating noise. Putting in needs_work.",
    "created_at": "2012-02-27T17:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115187",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

We need some patch to use gfan 5.0 without at least generating noise. Putting in needs_work.



---

archive/issue_events_150081.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-02-27T17:16:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150081"
}
```



---

archive/issue_events_150082.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-02-27T17:16:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150082"
}
```



---

archive/issue_comments_115188.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis probably needs to get rebased on #12760 (not yet merged, no positive review yet, but hopefully...)\n\n(#12760 fixes C++11 issues with upstream code in 0.4plus, and also cleans up Sage's part.)",
    "created_at": "2012-03-28T17:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115188",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

This probably needs to get rebased on #12760 (not yet merged, no positive review yet, but hopefully...)

(#12760 fixes C++11 issues with upstream code in 0.4plus, and also cleans up Sage's part.)



---

archive/issue_comments_115189.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIs the patch safe to use with earlier version of gcc? c++, any standard, is a always a major source of headaches too me.",
    "created_at": "2012-03-28T20:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115189",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Is the patch safe to use with earlier version of gcc? c++, any standard, is a always a major source of headaches too me.



---

archive/issue_comments_115190.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI hope to make some progress on this ticket for Sage-Combinat Days 40, July 9-13.\nSo far, I have a working spkg on my mac, but I need to figure out if the gcc-4.5.0 patches need to be rebased for portability.  I also want to add in some interface improvements (supporting symmetry for example).\n\nIn case anyone is interested in helping I will post my progress.\nWorking spkg: [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n\nCurrent patch: [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)",
    "created_at": "2012-07-07T19:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115190",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:11" align="right">comment:11</div>

I hope to make some progress on this ticket for Sage-Combinat Days 40, July 9-13.
So far, I have a working spkg on my mac, but I need to figure out if the gcc-4.5.0 patches need to be rebased for portability.  I also want to add in some interface improvements (supporting symmetry for example).

In case anyone is interested in helping I will post my progress.
Working spkg: [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)

Current patch: [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)



---

archive/issue_comments_115191.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIt is a pleasure to see some progress on this. I will have a look.",
    "created_at": "2012-07-08T21:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115191",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

It is a pleasure to see some progress on this. I will have a look.



---

archive/issue_comments_115192.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nPatch works great but there are more instances of tests of gfan in the documentation:\n\n```\nsage -t -long -force_lib \"devel/sage/doc/fr/tutorial/tour_advanced.rst\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage/doc/fr/tutorial/tour_advanced.rst\", line 68:\n    sage: F.reduced_groebner_bases ()\nExpected:\n    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c],\n     [c^2 - b*d, -b*c + a*d, -b^2 + a*c],\n     [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d],\n     [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c],\n     [c^2 - b*d, b*c - a*d, b^2 - a*c],\n     [-c^2 + b*d, b^2 - a*c, -b*c + a*d],\n     [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2],\n     [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c]]\nGot:\n    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c], [-c^2 + b*d, b^2 - a*c, -b*c + a*d], [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2], [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c], [c^2 - b*d, -b*c + a*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d], [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, b^2 - a*c]]\n\n```\nThat's the French one but we have the same in English, Russian and German (de) version.",
    "created_at": "2012-07-09T01:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115192",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Patch works great but there are more instances of tests of gfan in the documentation:

```
sage -t -long -force_lib "devel/sage/doc/fr/tutorial/tour_advanced.rst"
**********************************************************************
File "/usr/share/sage/devel/sage/doc/fr/tutorial/tour_advanced.rst", line 68:
    sage: F.reduced_groebner_bases ()
Expected:
    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c],
     [c^2 - b*d, -b*c + a*d, -b^2 + a*c],
     [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d],
     [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c],
     [c^2 - b*d, b*c - a*d, b^2 - a*c],
     [-c^2 + b*d, b^2 - a*c, -b*c + a*d],
     [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2],
     [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c]]
Got:
    [[-c^2 + b*d, -b*c + a*d, -b^2 + a*c], [-c^2 + b*d, b^2 - a*c, -b*c + a*d], [-c^2 + b*d, b*c - a*d, b^2 - a*c, -c^3 + a*d^2], [c^3 - a*d^2, -c^2 + b*d, b*c - a*d, b^2 - a*c], [c^2 - b*d, -b*c + a*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, -b^2 + a*c, -b^3 + a^2*d], [c^2 - b*d, b*c - a*d, b^3 - a^2*d, -b^2 + a*c], [c^2 - b*d, b*c - a*d, b^2 - a*c]]

```
That's the French one but we have the same in English, Russian and German (de) version.



---

archive/issue_comments_115193.json:
```json
{
    "body": "Attachment: **[trac11395-fix_tutorial.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)**\n\nFix tutorial with gfan 0.5",
    "created_at": "2012-07-09T02:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115193",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[trac11395-fix_tutorial.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)**

Fix tutorial with gfan 0.5



---

archive/issue_comments_115194.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttaching a patch for the tutorial. Do you want me to clean up your spkg a little bit? We should only keep the patch for gcc 4.7 and really switch to patch. Of course SPKG.txt needs updating and cleaning after your work. There doesn't seem to be any tests so spkg-check. I can do some of that clean up if you want.",
    "created_at": "2012-07-09T03:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115194",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Attaching a patch for the tutorial. Do you want me to clean up your spkg a little bit? We should only keep the patch for gcc 4.7 and really switch to patch. Of course SPKG.txt needs updating and cleaning after your work. There doesn't seem to be any tests so spkg-check. I can do some of that clean up if you want.



---

archive/issue_comments_115195.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIf you can do some of that soon (next two or three days), then go for it, that would be great. In the meantime I will focus on adding support for symmetry and maybe some other new things in gfan-0.5 like computing over ZZ.",
    "created_at": "2012-07-09T13:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115195",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:15" align="right">comment:15</div>

If you can do some of that soon (next two or three days), then go for it, that would be great. In the meantime I will focus on adding support for symmetry and maybe some other new things in gfan-0.5 like computing over ZZ.



---

archive/issue_comments_115196.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOK I am doing this now. A bit more work than I had expected but doable.",
    "created_at": "2012-07-10T23:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115196",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

OK I am doing this now. A bit more work than I had expected but doable.



---

archive/issue_comments_115197.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe file app_minkowski.cpp had changes in it that are not in the patch file you shipped. I cannot see the equivalent modification in Gentoo for gcc-4.7.0 so I am skipping it.",
    "created_at": "2012-07-11T00:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115197",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

The file app_minkowski.cpp had changes in it that are not in the patch file you shipped. I cannot see the equivalent modification in Gentoo for gcc-4.7.0 so I am skipping it.



---

archive/issue_comments_115198.json:
```json
{
    "body": "Changed author from **Marshall Hampton** to **Marshall Hampton, Fran\u00e7ois Bissey**",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115198",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Marshall Hampton** to **Marshall Hampton, François Bissey**



---

archive/issue_comments_115199.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115199",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_115200.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,9 @@\n \"Gfan version 0.5 (January 23th 2011, major update, Gr\u00f6bner bases/fans over the integers (experimental), p-adic Gr\u00f6bner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). \"\n \n We should upgrade to this release.\n+\n+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n+\n+Apply:\n+* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n+* [attachment: trac11395-fix_tutorial.patch]\n``````\n",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115200",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,9 @@
 "Gfan version 0.5 (January 23th 2011, major update, Gröbner bases/fans over the integers (experimental), p-adic Gröbner bases/complexes (experimental), fan homology computations, exporting of fans in Polymake's new xml format, performance improvements (gfan is now faster than TOPCOM for secondary fan computations) and much more.) Updated January 25th 2011 (xml format and installation instructions). "
 
 We should upgrade to this release.
+
+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
+
+Apply:
+* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
+* [attachment: trac11395-fix_tutorial.patch]
``````




---

archive/issue_comments_115201.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOK put a new spkg up. I have gone through the whole TODO list so the changes have been a bit invasive. I made a new Makefile that uses CXXFLAGS, LDFLAGS and CPPFLAGS - it could possibly use a little bit more love before sending upstream. Scrap that it would need a fair rewrite to get rid of a lot of stuff. Patch is now used throughout. Removal of the old gfan install is now done after the build and done correctly - which it wasn't before because of a misplaced double-quote.\n\nI think that sums it up. Over to you Marshall to see if you like the whole thing.",
    "created_at": "2012-07-11T01:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115201",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

OK put a new spkg up. I have gone through the whole TODO list so the changes have been a bit invasive. I made a new Makefile that uses CXXFLAGS, LDFLAGS and CPPFLAGS - it could possibly use a little bit more love before sending upstream. Scrap that it would need a fair rewrite to get rid of a lot of stuff. Patch is now used throughout. Removal of the old gfan install is now done after the build and done correctly - which it wasn't before because of a misplaced double-quote.

I think that sums it up. Over to you Marshall to see if you like the whole thing.



---

archive/issue_events_150083.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-07-11T01:51:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150083"
}
```



---

archive/issue_events_150084.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2012-07-11T01:51:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150084"
}
```



---

archive/issue_comments_115202.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n \n We should upgrade to this release.\n \n-New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n+New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n \n Apply:\n * [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n``````\n",
    "created_at": "2012-07-12T22:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115202",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 
 We should upgrade to this release.
 
-New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
+New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
 
 Apply:
 * [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
``````




---

archive/issue_comments_115203.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n \n Apply:\n-* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)\n+* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n * [attachment: trac11395-fix_tutorial.patch]\n``````\n",
    "created_at": "2012-07-12T22:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115203",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
 
 Apply:
-* [http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch](http://sage.math.washington.edu/home/mhampton/trac_11395_update_gfan_to_0.5.patch)
+* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
 * [attachment: trac11395-fix_tutorial.patch]
``````




---

archive/issue_comments_115204.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI credited you (Fran\u00e7ois Bissey) in the SPKG.txt, and I have uploaded a patch for the interface that I think greatly improves the functionality as well as supporting the new version.  I am tempted to do more refactoring so I will not flag this for review quite yet.",
    "created_at": "2012-07-12T22:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115204",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:21" align="right">comment:21</div>

I credited you (François Bissey) in the SPKG.txt, and I have uploaded a patch for the interface that I think greatly improves the functionality as well as supporting the new version.  I am tempted to do more refactoring so I will not flag this for review quite yet.



---

archive/issue_comments_115205.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI should mention that I am not really qualified to review the changes made to the spkg-install, but I will test this on a few more linux and OS X systems at least.",
    "created_at": "2012-07-12T22:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115205",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:22" align="right">comment:22</div>

I should mention that I am not really qualified to review the changes made to the spkg-install, but I will test this on a few more linux and OS X systems at least.



---

archive/issue_comments_115206.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nActually I may make one more change. I defined PREFIX on the line calling make but the variable is never used. It would be if we were using the makefile to perform the installation but we don't. I tested the spkg on linux on power7. And as a final note I should add that gfan itself doesn't come with either tests or documentation. A curiosity is that gfan seem to be mostly c++ but link against libgmp rather than libgmpxx.",
    "created_at": "2012-07-12T22:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115206",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

Actually I may make one more change. I defined PREFIX on the line calling make but the variable is never used. It would be if we were using the makefile to perform the installation but we don't. I tested the spkg on linux on power7. And as a final note I should add that gfan itself doesn't come with either tests or documentation. A curiosity is that gfan seem to be mostly c++ but link against libgmp rather than libgmpxx.



---

archive/issue_comments_115207.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOK I updated the spkg. In the end I kept the gcc-4.7 patch for app_minkowsky.cpp as before to minimize the burden of review. \n\nAs mentioned I removed the setting of PREFIX and made a comment about it.",
    "created_at": "2012-07-23T00:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115207",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

OK I updated the spkg. In the end I kept the gcc-4.7 patch for app_minkowsky.cpp as before to minimize the burden of review. 

As mentioned I removed the setting of PREFIX and made a comment about it.



---

archive/issue_comments_115208.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n \n We should upgrade to this release.\n \n-New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)\n+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n * [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n``````\n",
    "created_at": "2012-07-23T00:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115208",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 
 We should upgrade to this release.
 
-New spkg available at [http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg](http://sage.math.washington.edu/home/mhampton/gfan-0.5.p0.spkg)
+New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
 * [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
``````




---

archive/issue_comments_115209.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI get a doctest error on sage-5.4.beta1 due to #12544\n\n```\nsage -t  devel/sage-main/sage/rings/polynomial/groebner_fan.py\n**********************************************************************\nFile \"/home/vbraun/opt/sage-5.4.beta1/devel/sage-main/sage/rings/polynomial/groebner_fan.py\", line 504:\n    sage: [q.facet_normals() for q in fan]\nExpected:\n    [(M(0, -1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(-1, 0, 0)), (M(0, 0, 1), M(-1, 0, 0)), (M(0, 1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(0, -1, 0)), (M(0, 0, 1), M(0, -1, 0)), (M(0, 1, 0), M(0, 0, -1)), (M(0, 1, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, -1, 0)), (M(1, 0, 0), M(0, 0, -1)), (M(1, 0, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, 1, 0))]\nGot:\n    [M( 0, -1, 0),\n    M(-1,  0, 0)\n    in 3-d lattice M, M( 0, 0, -1),\n    M(-1, 0,  0)\n    in 3-d lattice M, M( 0, 0, 1),\n    M(-1, 0, 0)\n    in 3-d lattice M, M( 0, 1, 0),\n    M(-1, 0, 0)\n    in 3-d lattice M, M(0,  0, -1),\n    M(0, -1,  0)\n    in 3-d lattice M, M(0,  0, 1),\n    M(0, -1, 0)\n    in 3-d lattice M, M(0, 1,  0),\n    M(0, 0, -1)\n    in 3-d lattice M, M(0, 1, 0),\n    M(0, 0, 1)\n    in 3-d lattice M, M(1,  0, 0),\n    M(0, -1, 0)\n    in 3-d lattice M, M(1, 0,  0),\n    M(0, 0, -1)\n    in 3-d lattice M, M(1, 0, 0),\n    M(0, 0, 1)\n    in 3-d lattice M, M(1, 0, 0),\n    M(0, 1, 0)\n    in 3-d lattice M]\n```",
    "created_at": "2012-09-17T09:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115209",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

I get a doctest error on sage-5.4.beta1 due to #12544

```
sage -t  devel/sage-main/sage/rings/polynomial/groebner_fan.py
**********************************************************************
File "/home/vbraun/opt/sage-5.4.beta1/devel/sage-main/sage/rings/polynomial/groebner_fan.py", line 504:
    sage: [q.facet_normals() for q in fan]
Expected:
    [(M(0, -1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(-1, 0, 0)), (M(0, 0, 1), M(-1, 0, 0)), (M(0, 1, 0), M(-1, 0, 0)), (M(0, 0, -1), M(0, -1, 0)), (M(0, 0, 1), M(0, -1, 0)), (M(0, 1, 0), M(0, 0, -1)), (M(0, 1, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, -1, 0)), (M(1, 0, 0), M(0, 0, -1)), (M(1, 0, 0), M(0, 0, 1)), (M(1, 0, 0), M(0, 1, 0))]
Got:
    [M( 0, -1, 0),
    M(-1,  0, 0)
    in 3-d lattice M, M( 0, 0, -1),
    M(-1, 0,  0)
    in 3-d lattice M, M( 0, 0, 1),
    M(-1, 0, 0)
    in 3-d lattice M, M( 0, 1, 0),
    M(-1, 0, 0)
    in 3-d lattice M, M(0,  0, -1),
    M(0, -1,  0)
    in 3-d lattice M, M(0,  0, 1),
    M(0, -1, 0)
    in 3-d lattice M, M(0, 1,  0),
    M(0, 0, -1)
    in 3-d lattice M, M(0, 1, 0),
    M(0, 0, 1)
    in 3-d lattice M, M(1,  0, 0),
    M(0, -1, 0)
    in 3-d lattice M, M(1, 0,  0),
    M(0, 0, -1)
    in 3-d lattice M, M(1, 0, 0),
    M(0, 0, 1)
    in 3-d lattice M, M(1, 0, 0),
    M(0, 1, 0)
    in 3-d lattice M]
```



---

archive/issue_comments_115210.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n-* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n-* [attachment: trac11395-fix_tutorial.patch]\n+* [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n+* [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)\n``````\n",
    "created_at": "2012-10-05T15:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115210",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
 New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
-* [https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
-* [attachment: trac11395-fix_tutorial.patch]
+* [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
+* [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)
``````




---

archive/issue_events_150085.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:01:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150085"
}
```



---

archive/issue_events_150086.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-05T15:01:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150086"
}
```



---

archive/issue_comments_115211.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nneeds_work because of Volker's failure.",
    "created_at": "2012-10-05T15:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115211",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

needs_work because of Volker's failure.



---

archive/issue_comments_115212.json:
```json
{
    "body": "Attachment: **[trac_11395_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)**\n\nInitial patch",
    "created_at": "2012-10-23T18:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115212",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_11395_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)**

Initial patch



---

archive/issue_events_150087.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150087"
}
```



---

archive/issue_events_150088.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150088"
}
```



---

archive/issue_events_150089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150089"
}
```



---

archive/issue_events_150090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T18:24:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150090"
}
```



---

archive/issue_comments_115213.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAdded a trivial fix, setting it back to positive review.",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115213",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

Added a trivial fix, setting it back to positive review.



---

archive/issue_comments_115214.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,4 @@\n Apply:\n * [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n * [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)\n+* [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)\n``````\n",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115214",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,4 @@
 Apply:
 * [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
 * [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)
+* [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)
``````




---

archive/issue_comments_115215.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Volker Braun**",
    "created_at": "2012-10-23T18:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115215",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Volker Braun**



---

archive/issue_events_150091.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-30T08:19:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150091"
}
```



---

archive/issue_events_150092.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-30T08:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150092"
}
```



---

archive/issue_comments_115216.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe first patch needs a proper commit message.",
    "created_at": "2012-10-30T08:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115216",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

The first patch needs a proper commit message.



---

archive/issue_comments_115217.json:
```json
{
    "body": "Added commit message",
    "created_at": "2012-11-06T01:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115217",
    "user": "https://github.com/vbraun"
}
```

Added commit message



---

archive/issue_events_150093.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T01:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150093"
}
```



---

archive/issue_events_150094.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-11-06T01:53:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150094"
}
```



---

archive/issue_comments_115218.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAttachment: **[trac_11395_update_gfan_vb.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)**\n\nI've added the missing commit message.",
    "created_at": "2012-11-06T01:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115218",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

Attachment: **[trac_11395_update_gfan_vb.patch.gz](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)**

I've added the missing commit message.



---

archive/issue_comments_115219.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)\n \n Apply:\n-* [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)\n+* [attachment: trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)\n * [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)\n * [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)\n``````\n",
    "created_at": "2012-11-06T01:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115219",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 New spkg available at [http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg](http://spkg-upload.googlecode.com/files/gfan-0.5.p0.spkg)
 
 Apply:
-* [attachment: trac_11395_update_gfan.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan.patch.gz)
+* [attachment: trac_11395_update_gfan_vb.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_update_gfan_vb.patch.gz)
 * [attachment: trac11395-fix_tutorial.patch](https://github.com/sagemath/sage/files/ticket11395/trac11395-fix_tutorial.patch.gz)
 * [attachment: trac_11395_doctest_fix.patch](https://github.com/sagemath/sage/files/ticket11395/trac_11395_doctest_fix.patch.gz)
``````




---

archive/issue_comments_115220.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThanks I had completely forgotten about this.",
    "created_at": "2012-11-06T01:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115220",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

Thanks I had completely forgotten about this.



---

archive/issue_comments_115221.json:
```json
{
    "body": "Merged: **sage-5.5.beta1**",
    "created_at": "2012-11-12T21:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11395#issuecomment-115221",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.5.beta1**



---

archive/issue_events_150095.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T21:57:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150095"
}
```



---

archive/issue_events_150096.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-12T21:57:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11395",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11395#event-150096"
}
```
