# Issue 11078: jmol in the flask notebook

archive/issues_010955.json:
```json
{
    "body": "Assignee: jason, mpatel, was\n\nCC:  rkirov @mwhansen @kcrisman\n\nKeywords: sd31 sd35.5\n\nThe attached patch solves an issue with jmol finding the right .jmol.zip file in the new flask notebook.  This patch should only be applied *after* the notebook is moved to a flask notebook.\n\nThe patch should replace the following line in `sage/plot/plot3d/base.pyx`\n\n```\nf.write('set defaultdirectory \"%s\"\\n' % archive_name)\n```\nwith\n\n```\nimport sagenb\nf.write('set defaultdirectory \"cells/%s/%s\"\\n' % (sagenb.notebook.interact.SAGE_CELL_ID, archive_name))\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11078\n\n",
    "closed_at": "2012-07-25T06:40:59Z",
    "created_at": "2011-03-29T11:47:49Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.2",
    "title": "jmol in the flask notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11078",
    "user": "https://github.com/jasongrout"
}
```
Assignee: jason, mpatel, was

CC:  rkirov @mwhansen @kcrisman

Keywords: sd31 sd35.5

The attached patch solves an issue with jmol finding the right .jmol.zip file in the new flask notebook.  This patch should only be applied *after* the notebook is moved to a flask notebook.

The patch should replace the following line in `sage/plot/plot3d/base.pyx`

```
f.write('set defaultdirectory "%s"\n' % archive_name)
```
with

```
import sagenb
f.write('set defaultdirectory "cells/%s/%s"\n' % (sagenb.notebook.interact.SAGE_CELL_ID, archive_name))
```


Issue created by migration from https://trac.sagemath.org/ticket/11078





---

archive/issue_comments_117818.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd31\".",
    "created_at": "2011-06-14T17:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117818",
    "user": "https://github.com/williamstein"
}
```

Changing keywords from "" to "sd31".



---

archive/issue_comments_117819.json:
```json
{
    "body": "This week, I compiled sage-4.7.1.rc0 and installed the new flask Sage notebook following instructions from : http://code.google.com/r/rkirov-flask/. I also followed the section `Adding stock Jmol` plus the patch `trac_11078.patch`. This made Jmol to work from the notebook : Great!\n\nBut, from the command line, with the patch `trac_11078.patch` a command like `sphere()` opens Jmol but Jmol stays all black. I had to mimic the modifications done in #11503 on the same file `sage/plot/plot3d/base.pyx` to make Jmol works properly from the command line.\n\nS\u00e9bastien",
    "created_at": "2011-07-25T19:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117819",
    "user": "https://github.com/seblabbe"
}
```

This week, I compiled sage-4.7.1.rc0 and installed the new flask Sage notebook following instructions from : http://code.google.com/r/rkirov-flask/. I also followed the section `Adding stock Jmol` plus the patch `trac_11078.patch`. This made Jmol to work from the notebook : Great!

But, from the command line, with the patch `trac_11078.patch` a command like `sphere()` opens Jmol but Jmol stays all black. I had to mimic the modifications done in #11503 on the same file `sage/plot/plot3d/base.pyx` to make Jmol works properly from the command line.

SÃ©bastien



---

archive/issue_events_028724.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T09:28:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28724"
}
```



---

archive/issue_comments_117820.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-31T16:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117820",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_117821.json:
```json
{
    "body": "Attachment [trac_11078.patch](tarball://root/attachments/some-uuid/ticket11078/trac_11078.patch) by @jasongrout created at 2011-12-31 16:38:17\n\nI updated the patch with the changes from #11503.  With the flask notebook, sphere() works both from the command line and from the notebook.\n\nI'm setting as needs review to have one other person double-check this patch works as intended, though I guess I might qualify as the only needed reviewer.  Basically, what I did here was just rebase the patch at #11503.",
    "created_at": "2011-12-31T16:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117821",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac_11078.patch](tarball://root/attachments/some-uuid/ticket11078/trac_11078.patch) by @jasongrout created at 2011-12-31 16:38:17

I updated the patch with the changes from #11503.  With the flask notebook, sphere() works both from the command line and from the notebook.

I'm setting as needs review to have one other person double-check this patch works as intended, though I guess I might qualify as the only needed reviewer.  Basically, what I did here was just rebase the patch at #11503.



---

archive/issue_comments_117822.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-06T03:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117822",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_117823.json:
```json
{
    "body": "This looks great to me!",
    "created_at": "2012-01-06T03:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117823",
    "user": "https://github.com/williamstein"
}
```

This looks great to me!



---

archive/issue_comments_117824.json:
```json
{
    "body": "Changing keywords from \"sd31\" to \"sd31, sd35.5\".",
    "created_at": "2012-01-10T15:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117824",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "sd31" to "sd31, sd35.5".



---

archive/issue_comments_117825.json:
```json
{
    "body": "Changing keywords from \"sd31, sd35.5\" to \"sd31 sd35.5\".",
    "created_at": "2012-01-10T15:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117825",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "sd31, sd35.5" to "sd31 sd35.5".



---

archive/issue_events_028725.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:36:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28725"
}
```



---

archive/issue_events_028726.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-14T14:36:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28726"
}
```



---

archive/issue_events_028727.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T08:40:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28727"
}
```



---

archive/issue_events_028728.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-04-08T08:40:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28728"
}
```



---

archive/issue_events_028729.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-23T21:39:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28729"
}
```



---

archive/issue_events_028730.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-05-23T21:39:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28730"
}
```



---

archive/issue_events_028731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T14:39:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28731"
}
```



---

archive/issue_events_028732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-02T14:39:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28732"
}
```



---

archive/issue_comments_117826.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-02T15:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117826",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_028733.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-02T15:21:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28733"
}
```



---

archive/issue_comments_117827.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2012-07-23T06:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117827",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_117828.json:
```json
{
    "body": "Unmerging this from sage-5.2 due to the serious security issue at #13270.",
    "created_at": "2012-07-23T06:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117828",
    "user": "https://github.com/jdemeyer"
}
```

Unmerging this from sage-5.2 due to the serious security issue at #13270.



---

archive/issue_events_028734.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:50:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28734"
}
```



---

archive/issue_events_028735.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:50:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28735"
}
```



---

archive/issue_comments_117829.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2012-07-23T06:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117829",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_028736.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-23T06:50:43Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28736"
}
```



---

archive/issue_comments_117830.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-23T06:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117830",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_117831.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-23T06:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117831",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_028737.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T06:40:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28737"
}
```



---

archive/issue_events_028738.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T06:40:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28738"
}
```



---

archive/issue_events_028739.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-25T06:40:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11078#event-28739"
}
```



---

archive/issue_comments_117832.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-25T06:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11078#issuecomment-117832",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
