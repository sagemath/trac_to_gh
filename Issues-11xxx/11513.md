# Issue 11513: add is_trivial_zero() method to symbolic expressions

archive/issues_011341.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nA fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).\n\nApply [attachment: trac_11513-is_trival_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz).\n\nCC:  @kcrisman\n\nComponent: **symbolics**\n\nKeywords: **sd35.5**\n\nAuthor: **Burcin Erocal**\n\nReviewer: **Benjamin Jones, Paul Zimmermann**\n\nMerged: **sage-5.0.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11513_\n\n",
    "closed_at": "2012-01-15T21:56:51Z",
    "created_at": "2011-06-16T22:37:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add is_trivial_zero() method to symbolic expressions",
    "type": "issue",
    "updated_at": "2012-01-15T21:56:51Z",
    "url": "https://github.com/sagemath/sage/issues/11513",
    "user": "https://github.com/burcin"
}
```
<div id="comment:0"></div>

A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).

Apply [attachment: trac_11513-is_trival_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz).

CC:  @kcrisman

Component: **symbolics**

Keywords: **sd35.5**

Author: **Burcin Erocal**

Reviewer: **Benjamin Jones, Paul Zimmermann**

Merged: **sage-5.0.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/11513_





---

archive/issue_events_152047.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-06-16T22:37:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152047"
}
```



---

archive/issue_events_152048.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-06-16T22:37:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152048"
}
```



---

archive/issue_events_152049.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-06-16T22:37:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152049"
}
```



---

archive/issue_events_152050.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-06-16T22:37:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152050"
}
```



---

archive/issue_events_152051.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2011-06-16T22:37:32Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "subject": "https://github.com/burcin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152051"
}
```



---

archive/issue_comments_117001.json:
```json
{
    "body": "Attachment: **[trac_11513-is_numerically_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_numerically_zero.patch.gz)**\n\ntemporary patch",
    "created_at": "2011-06-17T00:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117001",
    "user": "https://github.com/burcin"
}
```

Attachment: **[trac_11513-is_numerically_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_numerically_zero.patch.gz)**

temporary patch



---

archive/issue_comments_117002.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI attached a patch providing a function which doesn't do much. It should eventually check (reasonably quickly I hope) if expressions like `(pi-1)*pi - (pi-2)*pi - pi)` or `e<sup>I</sup>pi +1` are zero. This function can be used to provide a template for implementing #11143 while someone tries to improve it.",
    "created_at": "2011-06-17T00:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117002",
    "user": "https://github.com/burcin"
}
```

<div id="comment:2" align="right">comment:2</div>

I attached a patch providing a function which doesn't do much. It should eventually check (reasonably quickly I hope) if expressions like `(pi-1)*pi - (pi-2)*pi - pi)` or `e<sup>I</sup>pi +1` are zero. This function can be used to provide a template for implementing #11143 while someone tries to improve it.



---

archive/issue_comments_117003.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI thought this was a computationally unsolvable problem in general?  Maybe I'm missing something here.",
    "created_at": "2011-06-17T00:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117003",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

I thought this was a computationally unsolvable problem in general?  Maybe I'm missing something here.



---

archive/issue_comments_117004.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThat's why the function name says *numerically*. It might have said *trivially* as well. This is just supposed to be a quick check. Maybe the examples in [comment:2](#comment%3A2) were too ambitious.",
    "created_at": "2011-06-17T00:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117004",
    "user": "https://github.com/burcin"
}
```

<div id="comment:4" align="right">comment:4</div>

That's why the function name says *numerically*. It might have said *trivially* as well. This is just supposed to be a quick check. Maybe the examples in [comment:2](#comment%3A2) were too ambitious.



---

archive/issue_comments_117005.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSo what does this exactly check?  Just if something is a numeric Ginac object that Ginac knows is zero?    So we won't get any false positives?  That is my main concern, for instance with #1173 or #11143 - we wouldn't want mathematical incorrectness to get a speedup.",
    "created_at": "2011-08-18T14:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117005",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

So what does this exactly check?  Just if something is a numeric Ginac object that Ginac knows is zero?    So we won't get any false positives?  That is my main concern, for instance with #1173 or #11143 - we wouldn't want mathematical incorrectness to get a speedup.



---

archive/issue_comments_117006.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAlso, what happened to the use of CIF mentioned at #11143?  I assume it's commented out because it's slower, or less reliable, or something?",
    "created_at": "2011-08-18T14:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117006",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

Also, what happened to the use of CIF mentioned at #11143?  I assume it's commented out because it's slower, or less reliable, or something?



---

archive/issue_comments_117007.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'm puzzled about this ticket. Why doesn't the `is_zero` method suffice? As said by Karl-Dieter,\nfor general expressions the problem is undecidable, thus if you want to check expressions that\n*reduce* to zero, the name of the method should reflect the fact that there could be false\nnegatives.\n\nPaul",
    "created_at": "2012-01-09T09:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117007",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:7" align="right">comment:7</div>

I'm puzzled about this ticket. Why doesn't the `is_zero` method suffice? As said by Karl-Dieter,
for general expressions the problem is undecidable, thus if you want to check expressions that
*reduce* to zero, the name of the method should reflect the fact that there could be false
negatives.

Paul



---

archive/issue_comments_117008.json:
```json
{
    "body": "Changed keywords from none to **sd35.5**",
    "created_at": "2012-01-09T09:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117008",
    "user": "https://github.com/zimmermann6"
}
```

Changed keywords from none to **sd35.5**



---

archive/issue_comments_117009.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@zimmermann6](#comment%3A7):\n> I'm puzzled about this ticket. Why doesn't the `is_zero` method suffice? As said by Karl-Dieter,\n> for general expressions the problem is undecidable, thus if you want to check expressions that\n> *reduce* to zero, the name of the method should reflect the fact that there could be false\n> negatives.\n\nHi Paul, I wanted to ask you about this in Warwick. I got caught up in the linear algebra stuff and this slipped my mind.\n\n`is_zero()` usually ends up calling maxima, which is very slow especially in the context of automatic evaluation of symbolic functions.\n\nAt the moment, many symbolic functions (see `sage/functions/generalized.py` for example) use code similar to the following to test if an argument is zero within a reasonable time: (BTW, this code should not initialize `CIF` on every call.)\n\n```\n        try:\n            approx_x = ComplexIntervalField()(x)\n            if bool(approx_x.imag() == 0):      # x is real\n                if bool(approx_x.real() == 0):  # x is zero\n                    return None\n                else:\n                    return 0\n        except:                     # x is symbolic\n            pass    \n```\n\nThe reason for this ticket was to move this to a separate function to avoid code duplication. If this function can detect `pi + (pi - 1)*pi - pi^2 == 0` or `(pi - 1)*x - pi*x + x == 0` it would be even better. In this context, false negatives are not a problem. We should just avoid false positives. It's also OK if this test is not purely numeric. Any suggestions for a better name for this function is also welcome of course.",
    "created_at": "2012-01-09T18:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117009",
    "user": "https://github.com/burcin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@zimmermann6](#comment%3A7):
> I'm puzzled about this ticket. Why doesn't the `is_zero` method suffice? As said by Karl-Dieter,
> for general expressions the problem is undecidable, thus if you want to check expressions that
> *reduce* to zero, the name of the method should reflect the fact that there could be false
> negatives.

Hi Paul, I wanted to ask you about this in Warwick. I got caught up in the linear algebra stuff and this slipped my mind.

`is_zero()` usually ends up calling maxima, which is very slow especially in the context of automatic evaluation of symbolic functions.

At the moment, many symbolic functions (see `sage/functions/generalized.py` for example) use code similar to the following to test if an argument is zero within a reasonable time: (BTW, this code should not initialize `CIF` on every call.)

```
        try:
            approx_x = ComplexIntervalField()(x)
            if bool(approx_x.imag() == 0):      # x is real
                if bool(approx_x.real() == 0):  # x is zero
                    return None
                else:
                    return 0
        except:                     # x is symbolic
            pass    
```

The reason for this ticket was to move this to a separate function to avoid code duplication. If this function can detect `pi + (pi - 1)*pi - pi^2 == 0` or `(pi - 1)*x - pi*x + x == 0` it would be even better. In this context, false negatives are not a problem. We should just avoid false positives. It's also OK if this test is not purely numeric. Any suggestions for a better name for this function is also welcome of course.



---

archive/issue_comments_117010.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDear Burcin,\n\n> The reason for this ticket was to move this to a separate function to avoid code duplication.\n\nok I understand. But I don't like the proposed solution, since:\n\n(1) it might say a number is zero whereas it is not (if the number is tiny, but due to rounding\n    errors it gets numerically evaluated to zero, because the precision used is fixed)\n\n(2) it might say a zero number is not (again due to rounding errors)\n\nIt should be the responsibility of the user only to make such approximations.\n\nWhat happens if your function `_is_numerically_zero()` only checks for *exact* integer or\nreal or complex zero? Do many doctests fail?\n\nPaul",
    "created_at": "2012-01-09T20:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117010",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:9" align="right">comment:9</div>

Dear Burcin,

> The reason for this ticket was to move this to a separate function to avoid code duplication.

ok I understand. But I don't like the proposed solution, since:

(1) it might say a number is zero whereas it is not (if the number is tiny, but due to rounding
    errors it gets numerically evaluated to zero, because the precision used is fixed)

(2) it might say a zero number is not (again due to rounding errors)

It should be the responsibility of the user only to make such approximations.

What happens if your function `_is_numerically_zero()` only checks for *exact* integer or
real or complex zero? Do many doctests fail?

Paul



---

archive/issue_comments_117011.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe `_is_numerically_zero()` has only been used in a few new symbolic functions, we haven't tested replacing the heavily duplicated test code that Burcin is talking about with this new method to see if many doctests fail. My impression is that it is useful to have such a method for automatic simplifications like e.g.  `erf(0)` should return `0` not `erf(0)`, for instance to address #8983.",
    "created_at": "2012-01-09T21:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117011",
    "user": "https://github.com/benjaminfjones"
}
```

<div id="comment:10" align="right">comment:10</div>

The `_is_numerically_zero()` has only been used in a few new symbolic functions, we haven't tested replacing the heavily duplicated test code that Burcin is talking about with this new method to see if many doctests fail. My impression is that it is useful to have such a method for automatic simplifications like e.g.  `erf(0)` should return `0` not `erf(0)`, for instance to address #8983.



---

archive/issue_comments_117012.json:
```json
{
    "body": "Attachment: **[trac_11513-is_trivally_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz)**",
    "created_at": "2012-01-09T22:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117012",
    "user": "https://github.com/burcin"
}
```

Attachment: **[trac_11513-is_trivally_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz)**



---

archive/issue_comments_117013.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAfter playing around with `ComplexIntervalField`, different precisions and symbolic expressions, I finally realized that they cannot perform magic and detect zero. :)\n\n[attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz) implements a method `is_trivially_zero()` instead. This is just a wrapper around pynac's `is_zero()` method, which amounts to the exact integer or real/complex zero check Paul suggested.\n\nCan we review this quickly and turn to another ticket that requires magic: #9953?",
    "created_at": "2012-01-09T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117013",
    "user": "https://github.com/burcin"
}
```

<div id="comment:11" align="right">comment:11</div>

After playing around with `ComplexIntervalField`, different precisions and symbolic expressions, I finally realized that they cannot perform magic and detect zero. :)

[attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz) implements a method `is_trivially_zero()` instead. This is just a wrapper around pynac's `is_zero()` method, which amounts to the exact integer or real/complex zero check Paul suggested.

Can we review this quickly and turn to another ticket that requires magic: #9953?



---

archive/issue_events_152052.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-01-09T22:43:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152052"
}
```



---

archive/issue_events_152053.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-01-09T22:43:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152053"
}
```



---

archive/issue_events_152054.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-01-09T22:43:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152054"
}
```



---

archive/issue_comments_117014.json:
```json
{
    "body": "Author: **Burcin Erocal**",
    "created_at": "2012-01-09T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117014",
    "user": "https://github.com/burcin"
}
```

Author: **Burcin Erocal**



---

archive/issue_comments_117015.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).\n+\n+Apply [attachment: trac_11513-is_trivally_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch..gz)\n``````\n",
    "created_at": "2012-01-09T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117015",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).
+
+Apply [attachment: trac_11513-is_trivally_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch..gz)
``````




---

archive/issue_events_152055.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:34:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152055"
}
```



---

archive/issue_events_152056.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:34:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152056"
}
```



---

archive/issue_comments_117016.json:
```json
{
    "body": "Reviewer: **Benjamin Jones**",
    "created_at": "2012-01-10T00:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117016",
    "user": "https://github.com/benjaminfjones"
}
```

Reviewer: **Benjamin Jones**



---

archive/issue_comments_117017.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think this is certainly sufficient for our needs with fast evaluation and automatic simplification of symbolic functions. \n\nPositive Review.\n\nThe patch looks good, applies cleanly to Sage-4.8.alpha6, and all doctests in the file pass. I'm going to work now on updating various tickets that depended on the name `_is_numerically_zero`.",
    "created_at": "2012-01-10T00:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117017",
    "user": "https://github.com/benjaminfjones"
}
```

<div id="comment:12" align="right">comment:12</div>

I think this is certainly sufficient for our needs with fast evaluation and automatic simplification of symbolic functions. 

Positive Review.

The patch looks good, applies cleanly to Sage-4.8.alpha6, and all doctests in the file pass. I'm going to work now on updating various tickets that depended on the name `_is_numerically_zero`.



---

archive/issue_comments_117018.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSorry, I didn't mean to change the status so quick. I'll defer to others that are interested, but it gets a positive review from me anyhow.",
    "created_at": "2012-01-10T00:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117018",
    "user": "https://github.com/benjaminfjones"
}
```

<div id="comment:13" align="right">comment:13</div>

Sorry, I didn't mean to change the status so quick. I'll defer to others that are interested, but it gets a positive review from me anyhow.



---

archive/issue_events_152057.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:40:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152057"
}
```



---

archive/issue_events_152058.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:40:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152058"
}
```



---

archive/issue_events_152059.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:40:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152059"
}
```



---

archive/issue_events_152060.json:
```json
{
    "actor": "https://github.com/benjaminfjones",
    "created_at": "2012-01-10T00:40:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152060"
}
```



---

archive/issue_comments_117019.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nShould this be an underscore method like the previous one?",
    "created_at": "2012-01-10T04:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117019",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Should this be an underscore method like the previous one?



---

archive/issue_comments_117020.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).\n \n-Apply [attachment: trac_11513-is_trivally_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch..gz)\n+Apply [attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz).\n``````\n",
    "created_at": "2012-01-10T04:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117020",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).
 
-Apply [attachment: trac_11513-is_trivally_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch..gz)
+Apply [attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz).
``````




---

archive/issue_comments_117021.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> Can we review this quickly and turn to another ticket that requires magic: #9953?\n\nSo is that a dup of #9627 or not?  I'm not sure, myself.",
    "created_at": "2012-01-10T04:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117021",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

> Can we review this quickly and turn to another ticket that requires magic: #9953?

So is that a dup of #9627 or not?  I'm not sure, myself.



---

archive/issue_comments_117022.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment%3A16):\n> Should this be an underscore method like the previous one?\n\nI don't see any reason to hide this from the user. We also removed the leading underscore from `is_symbol()`, `is_numeric()`, etc. recently.",
    "created_at": "2012-01-10T06:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117022",
    "user": "https://github.com/burcin"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment%3A16):
> Should this be an underscore method like the previous one?

I don't see any reason to hide this from the user. We also removed the leading underscore from `is_symbol()`, `is_numeric()`, etc. recently.



---

archive/issue_comments_117023.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nthe patch looks good to me. Since this a new function, and it is not used anywhere yet, the\ndoctests should still run, but I will try to be sure. Just a minor point: I'd prefer as name\n`is_trivial_zero` which is simpler.\n\nPaul",
    "created_at": "2012-01-10T08:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117023",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:19" align="right">comment:19</div>

the patch looks good to me. Since this a new function, and it is not used anywhere yet, the
doctests should still run, but I will try to be sure. Just a minor point: I'd prefer as name
`is_trivial_zero` which is simpler.

Paul



---

archive/issue_events_152061.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-10T08:10:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "title_is": "add is_trivially_zero() method to symbolic expressions",
    "title_was": "add _is_numerically_zero() method to symbolic expressions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152061"
}
```



---

archive/issue_comments_117024.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI change the summary to better reflect the new function name.\n\nPaul",
    "created_at": "2012-01-10T08:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117024",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:20" align="right">comment:20</div>

I change the summary to better reflect the new function name.

Paul



---

archive/issue_comments_117025.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).\n \n-Apply [attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz).\n+Apply [attachment: trac_11513-is_trival_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz).\n``````\n",
    "created_at": "2012-01-10T08:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117025",
    "user": "https://github.com/burcin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 A fast way to check if an expression is zero is important in many places, see for example [#11143 comment:15](https://github.com/sagemath/sage/issues/11143#comment:15). We should put the numerical check mentioned there in a method (`_is_numerically_zero()`) of symbolic expressions (`sage.symbolic.expression.Expression`).
 
-Apply [attachment: trac_11513-is_trivally_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trivally_zero.patch.gz).
+Apply [attachment: trac_11513-is_trival_zero.patch](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz).
``````




---

archive/issue_comments_117026.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAttachment: **[trac_11513-is_trival_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz)**\n\nReplying to [@zimmermann6](#comment%3A19):\n> Just a minor point: I'd prefer as name `is_trivial_zero` which is simpler.\n\nDone, see [attachment: trac_11513-is_trival_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch..gz)",
    "created_at": "2012-01-10T08:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117026",
    "user": "https://github.com/burcin"
}
```

<div id="comment:21" align="right">comment:21</div>

Attachment: **[trac_11513-is_trival_zero.patch.gz](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch.gz)**

Replying to [@zimmermann6](#comment%3A19):
> Just a minor point: I'd prefer as name `is_trivial_zero` which is simpler.

Done, see [attachment: trac_11513-is_trival_zero.patch.](https://github.com/sagemath/sage/files/ticket11513/trac_11513-is_trival_zero.patch..gz)



---

archive/issue_events_152062.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-01-10T08:14:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "title_is": "add is_trivial_zero() method to symbolic expressions",
    "title_was": "add is_trivially_zero() method to symbolic expressions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152062"
}
```



---

archive/issue_comments_117027.json:
```json
{
    "body": "Changed reviewer from **Benjamin Jones** to **Benjamin Jones, Paul Zimmermann**",
    "created_at": "2012-01-10T10:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117027",
    "user": "https://github.com/zimmermann6"
}
```

Changed reviewer from **Benjamin Jones** to **Benjamin Jones, Paul Zimmermann**



---

archive/issue_events_152063.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-10T10:10:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152063"
}
```



---

archive/issue_events_152064.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2012-01-10T10:10:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152064"
}
```



---

archive/issue_comments_117028.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nall doctests pass (with the previous patch). However, since the change is trivial, I give a\npositive review.\n\nPaul",
    "created_at": "2012-01-10T10:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117028",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:22" align="right">comment:22</div>

all doctests pass (with the previous patch). However, since the change is trivial, I give a
positive review.

Paul



---

archive/issue_events_152065.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152065"
}
```



---

archive/issue_events_152066.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:56:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11513#event-152066"
}
```



---

archive/issue_comments_117029.json:
```json
{
    "body": "Merged: **sage-5.0.beta0**",
    "created_at": "2012-01-15T21:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11513#issuecomment-117029",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta0**
