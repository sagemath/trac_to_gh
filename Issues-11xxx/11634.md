# Issue 11634: Base Polyhedron on PPL (by default)

archive/issues_011462.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mhampton"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nRewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.\n\nApply\n* [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)\n* [attachment: trac_11634_fix_sage_5_beta8.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)\n\n\n\nDepends on #12159\nDepends on #11429\n\nCC:  @novoselt @dimpase\n\nComponent: **geometry**\n\nAuthor: **Volker Braun**\n\nReviewer: **Marshall Hampton, David Loeffler, Andrey Novoseltsev**\n\nMerged: **sage-5.0.beta10**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/11634_\n\n",
    "closed_at": "2012-03-23T15:19:42Z",
    "created_at": "2011-07-29T10:01:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Base Polyhedron on PPL (by default)",
    "type": "issue",
    "updated_at": "2014-07-06T01:40:47Z",
    "url": "https://github.com/sagemath/sage/issues/11634",
    "user": "https://github.com/vbraun"
}
```
<div id="comment:0"></div>

Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.

Apply
* [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)
* [attachment: trac_11634_fix_sage_5_beta8.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)



Depends on #12159
Depends on #11429

CC:  @novoselt @dimpase

Component: **geometry**

Author: **Volker Braun**

Reviewer: **Marshall Hampton, David Loeffler, Andrey Novoseltsev**

Merged: **sage-5.0.beta10**

_Issue created by migration from https://trac.sagemath.org/ticket/11634_





---

archive/issue_events_154336.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-07-29T10:01:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154336"
}
```



---

archive/issue_events_154337.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-07-29T10:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154337"
}
```



---

archive/issue_events_154338.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-07-29T10:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154338"
}
```



---

archive/issue_events_154339.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-07-29T10:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154339"
}
```



---

archive/issue_events_154340.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-07-29T10:01:23Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "subject": "https://github.com/vbraun",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154340"
}
```



---

archive/issue_events_154341.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2011-08-01T08:34:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154341"
}
```



---

archive/issue_comments_119684.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.\n \n+Apply\n+* [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)\n+* [trac_11634_ppl_backend.patch]\n``````\n",
    "created_at": "2011-08-01T08:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119684",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.
 
+Apply
+* [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)
+* [trac_11634_ppl_backend.patch]
``````




---

archive/issue_comments_119685.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2011-08-01T08:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119685",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_119686.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n Apply\n * [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)\n-* [trac_11634_ppl_backend.patch]\n+* [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)\n``````\n",
    "created_at": "2011-08-01T09:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119686",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 Apply
 * [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)
-* [trac_11634_ppl_backend.patch]
+* [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)
``````




---

archive/issue_comments_119687.json:
```json
{
    "body": "Attachment: **[trac_11634_pickling_for_PPL.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)**\n\nInitial patch",
    "created_at": "2011-08-31T01:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119687",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_11634_pickling_for_PPL.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)**

Initial patch



---

archive/issue_comments_119688.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI've added pickling support to PPL, this is now part of this ticket.",
    "created_at": "2011-08-31T01:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119688",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

I've added pickling support to PPL, this is now part of this ticket.



---

archive/issue_comments_119689.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n Apply\n * [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)\n+* [attachment: trac_11634_pickling_for_PPL.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)\n * [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)\n``````\n",
    "created_at": "2011-08-31T01:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119689",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 Apply
 * [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)
+* [attachment: trac_11634_pickling_for_PPL.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)
 * [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)
``````




---

archive/issue_comments_119690.json:
```json
{
    "body": "Updated patch",
    "created_at": "2011-12-19T22:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119690",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_119691.json:
```json
{
    "body": "Dependencies: **#12159**",
    "created_at": "2011-12-19T22:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119691",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#12159**



---

archive/issue_comments_119692.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAttachment: **[trac_11634_ppl_backend.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)**\n\nThrough the triangulation of polytopes, this depends on #12159",
    "created_at": "2011-12-19T22:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119692",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

Attachment: **[trac_11634_ppl_backend.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)**

Through the triangulation of polytopes, this depends on #12159



---

archive/issue_comments_119693.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nVolker, I'll try to review this this week if I can.  If I forget feel free to ping me about it.",
    "created_at": "2012-01-08T19:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119693",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

Volker, I'll try to review this this week if I can.  If I forget feel free to ping me about it.



---

archive/issue_comments_119694.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm having trouble applying your patches, it looks like this also depends on #11429.",
    "created_at": "2012-01-09T16:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119694",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm having trouble applying your patches, it looks like this also depends on #11429.



---

archive/issue_comments_119695.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, that one needs to be reviewed as well.",
    "created_at": "2012-01-09T16:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119695",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, that one needs to be reviewed as well.



---

archive/issue_comments_119696.json:
```json
{
    "body": "Changed dependencies from **#12159** to **#12159, #11429**",
    "created_at": "2012-01-09T16:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119696",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **#12159** to **#12159, #11429**



---

archive/issue_comments_119697.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI tried applying #11429, and then #12159, both of which worked fine, but I am unable to apply the patches from this ticket after that.",
    "created_at": "2012-01-09T16:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119697",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:8" align="right">comment:8</div>

I tried applying #11429, and then #12159, both of which worked fine, but I am unable to apply the patches from this ticket after that.



---

archive/issue_comments_119698.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI have the following patches applied on top of sage-4.8.alpha6 without problems:\n\n```\n[vbraun@volker-laptop-two hg]$ hg qseries\ntrac_11429_native_enumeration_of_lattice_polytope_points.patch\ntrac_11429_cythonize_lattice_points.patch\ntrac_11429_fix_doctests.patch\ntrac_12159_separate_triangulation_file.patch\ntrac_12159_placing_triangulation.patch\ntrac_12159_normal_cone.patch\ntrac_11634_refactor_polyhedron.patch\ntrac_11634_pickling_for_PPL.patch\ntrac_11634_ppl_backend.patch\n```\nThe patches might not apply cleanly older sage versions.",
    "created_at": "2012-01-09T19:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119698",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

I have the following patches applied on top of sage-4.8.alpha6 without problems:

```
[vbraun@volker-laptop-two hg]$ hg qseries
trac_11429_native_enumeration_of_lattice_polytope_points.patch
trac_11429_cythonize_lattice_points.patch
trac_11429_fix_doctests.patch
trac_12159_separate_triangulation_file.patch
trac_12159_placing_triangulation.patch
trac_12159_normal_cone.patch
trac_11634_refactor_polyhedron.patch
trac_11634_pickling_for_PPL.patch
trac_11634_ppl_backend.patch
```
The patches might not apply cleanly older sage versions.



---

archive/issue_comments_119699.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks; I was working with an unoffical sage-4.8.rc1, I will switch to 4.8.alpha6 and try again in case that is the problem.",
    "created_at": "2012-01-09T20:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119699",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks; I was working with an unoffical sage-4.8.rc1, I will switch to 4.8.alpha6 and try again in case that is the problem.



---

archive/issue_comments_119700.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOK, I got it working now.  Clearly PPL is much faster on some of my test examples, wow.",
    "created_at": "2012-01-09T20:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119700",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:11" align="right">comment:11</div>

OK, I got it working now.  Clearly PPL is much faster on some of my test examples, wow.



---

archive/issue_comments_119701.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@sagetrac-mhampton](#comment%3A11):\n> OK, I got it working now.  Clearly PPL is much faster on some of my test examples, wow.\n\nOh yeah, working with toric varieties got much better once most basic operations were switched to PPL!\n\nI am also the offending reviewer on #11429, dropping off the radar half-way. Will try to remedy it shortly, without forgetting #11599.",
    "created_at": "2012-01-09T20:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119701",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@sagetrac-mhampton](#comment%3A11):
> OK, I got it working now.  Clearly PPL is much faster on some of my test examples, wow.

Oh yeah, working with toric varieties got much better once most basic operations were switched to PPL!

I am also the offending reviewer on #11429, dropping off the radar half-way. Will try to remedy it shortly, without forgetting #11599.



---

archive/issue_comments_119702.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFor sage-5.0.beta1, the numerial noise fix from #9958 changes one line of polyhedra.py, which causes trac_11634_refactor_polyhedron.patch to fail to apply.  \n\n```\n5866c5866\n<             0.8\n---\n>             0.8000...\n```",
    "created_at": "2012-01-23T14:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119702",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:14" align="right">comment:14</div>

For sage-5.0.beta1, the numerial noise fix from #9958 changes one line of polyhedra.py, which causes trac_11634_refactor_polyhedron.patch to fail to apply.  

```
5866c5866
<             0.8
---
>             0.8000...
```



---

archive/issue_comments_119703.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI'm a little confused by the above numerical noise issue.  After changing so that the patch would apply, the doctest failed.  If I switch it to \n\n```\n            sage: filled_poly.axes_width()\n            0.8...\n```\nthen it works.  I'm not sure if the \"0.800...\" makes sense on some other system or not.\n\nApart from that I think this all looks good.  There is one other doctest failure in integral_points.pyx resulting from the Python switch to 2.7, line 688 needs to be changed to\n\n```\n        OverflowError: Python int too large to convert to C long\n```\ninstead of\n\n```\n        OverflowError: long int too large to convert to int\n```\n\nWith those changes I would be happy to give a positive review.\n\nI haven't looked at #11429 and #12159 by themselves, but it would be nice to get this ticket into sage-5.0.  I don't have a lot of time in the coming weeks but if Andrey can't review those I would try to check them out too.",
    "created_at": "2012-01-24T02:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119703",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:15" align="right">comment:15</div>

I'm a little confused by the above numerical noise issue.  After changing so that the patch would apply, the doctest failed.  If I switch it to 

```
            sage: filled_poly.axes_width()
            0.8...
```
then it works.  I'm not sure if the "0.800..." makes sense on some other system or not.

Apart from that I think this all looks good.  There is one other doctest failure in integral_points.pyx resulting from the Python switch to 2.7, line 688 needs to be changed to

```
        OverflowError: Python int too large to convert to C long
```
instead of

```
        OverflowError: long int too large to convert to int
```

With those changes I would be happy to give a positive review.

I haven't looked at #11429 and #12159 by themselves, but it would be nice to get this ticket into sage-5.0.  I don't have a lot of time in the coming weeks but if Andrey can't review those I would try to check them out too.



---

archive/issue_events_154342.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-01-24T02:02:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154342"
}
```



---

archive/issue_events_154343.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-01-24T02:02:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154343"
}
```



---

archive/issue_comments_119704.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI already fixed the `OverflowError` error message in #11429. What output do you get for\n\n```\nfilled_poly.axes_width()\n```\nthe doctest works for me with `0.8`.",
    "created_at": "2012-01-24T02:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119704",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

I already fixed the `OverflowError` error message in #11429. What output do you get for

```
filled_poly.axes_width()
```
the doctest works for me with `0.8`.



---

archive/issue_comments_119705.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-01-24T02:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119705",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_119706.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac_11634_refactor_polyhedron.2.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.2.patch.gz)**\n\nPS: #11429 is already reviewed ;-)",
    "created_at": "2012-01-24T02:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119706",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac_11634_refactor_polyhedron.2.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.2.patch.gz)**

PS: #11429 is already reviewed ;-)



---

archive/issue_comments_119707.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI get 0.8 as well on my mac (10.6.8).  Its just that I am not sure what happens on other systems (solaris, mac ppc, whatever) so maybe leaving it as 0.8... is safer?\n\nThat's good that #11429 is done, I'll try to look at #12159 if I can find the time.",
    "created_at": "2012-01-24T03:36:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119707",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:18" align="right">comment:18</div>

I get 0.8 as well on my mac (10.6.8).  Its just that I am not sure what happens on other systems (solaris, mac ppc, whatever) so maybe leaving it as 0.8... is safer?

That's good that #11429 is done, I'll try to look at #12159 if I can find the time.



---

archive/issue_comments_119708.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe way I understad it, #9958 changes the float printing to do the fuzzy zero automatically so its no longer necessary to add ellipsis.",
    "created_at": "2012-01-24T05:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119708",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

The way I understad it, #9958 changes the float printing to do the fuzzy zero automatically so its no longer necessary to add ellipsis.



---

archive/issue_comments_119709.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOK, I guess its fine to change it back to a 0.8 then.",
    "created_at": "2012-01-24T12:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119709",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:20" align="right">comment:20</div>

OK, I guess its fine to change it back to a 0.8 then.



---

archive/issue_comments_119710.json:
```json
{
    "body": "Attachment: **[trac_11634_refactor_polyhedron.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)**\n\nUpdated patch",
    "created_at": "2012-02-19T01:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119710",
    "user": "https://github.com/vbraun"
}
```

Attachment: **[trac_11634_refactor_polyhedron.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)**

Updated patch



---

archive/issue_events_154344.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-19T01:19:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154344"
}
```



---

archive/issue_events_154345.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-02-19T01:19:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154345"
}
```



---

archive/issue_comments_119711.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nUpdated patch for sage-5.0.beta4. I'm switching this back to \"needs review\" unless you think I haven't given enough info yet ;-)",
    "created_at": "2012-02-19T01:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119711",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

Updated patch for sage-5.0.beta4. I'm switching this back to "needs review" unless you think I haven't given enough info yet ;-)



---

archive/issue_comments_119712.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nApply trac_11634_refactor_polyhedron.patch, trac_11634_pickling_for_PPL.patch, trac_11634_ppl_backend.patch\n\n(for the patchbot)",
    "created_at": "2012-03-11T11:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119712",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:22" align="right">comment:22</div>

Apply trac_11634_refactor_polyhedron.patch, trac_11634_pickling_for_PPL.patch, trac_11634_ppl_backend.patch

(for the patchbot)



---

archive/issue_comments_119713.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nApply trac_11634_refactor_polyhedron.patch,trac_11634_pickling_for_PPL.patch,trac_11634_ppl_backend.patch\n\n(for the patchbot, which is still not getting it)",
    "created_at": "2012-03-11T11:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119713",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:23" align="right">comment:23</div>

Apply trac_11634_refactor_polyhedron.patch,trac_11634_pickling_for_PPL.patch,trac_11634_ppl_backend.patch

(for the patchbot, which is still not getting it)



---

archive/issue_comments_119714.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nApply trac_11634_refactor_polyhedron.patch trac_11634_pickling_for_PPL.patch trac_11634_ppl_backend.patch\n\n(it still doesn't seem to pick up the 2nd patch in the series)",
    "created_at": "2012-03-11T11:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119714",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:24" align="right">comment:24</div>

Apply trac_11634_refactor_polyhedron.patch trac_11634_pickling_for_PPL.patch trac_11634_ppl_backend.patch

(it still doesn't seem to pick up the 2nd patch in the series)



---

archive/issue_comments_119715.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n\n```\nApply trac_11634_refactor_polyhedron.patch trac_11634_pickling_for_ppl.patch trac_11634_ppl_backend.patch \n```",
    "created_at": "2012-03-11T11:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119715",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:25" align="right">comment:25</div>


```
Apply trac_11634_refactor_polyhedron.patch trac_11634_pickling_for_ppl.patch trac_11634_ppl_backend.patch 
```



---

archive/issue_comments_119716.json:
```json
{
    "body": "Apply only this patch. Patch against 5.0.beta7",
    "created_at": "2012-03-11T12:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119716",
    "user": "https://github.com/loefflerd"
}
```

Apply only this patch. Patch against 5.0.beta7



---

archive/issue_comments_119717.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.\n \n Apply\n-* [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)\n-* [attachment: trac_11634_pickling_for_PPL.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)\n-* [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)\n+* [attachment: trac_11634_folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_folded.patch.gz)\n``````\n",
    "created_at": "2012-03-11T12:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119717",
    "user": "https://github.com/loefflerd"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
 Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.
 
 Apply
-* [attachment: trac_11634_refactor_polyhedron.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_refactor_polyhedron.patch.gz)
-* [attachment: trac_11634_pickling_for_PPL.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_pickling_for_PPL.patch.gz)
-* [attachment: trac_11634_ppl_backend.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_ppl_backend.patch.gz)
+* [attachment: trac_11634_folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_folded.patch.gz)
``````




---

archive/issue_comments_119718.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[trac_11634-folded.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)**\n\nI couldn't get the patchbot to apply the three patches. Also, there seems to now be a consensus that code lines with trailing whitespace are a Bad Thing. So I've done a single qfolded patch which is equivalent to Volker's three patches but with all trailing whitespace removed.\n\nApply trac_11634-folded.patch",
    "created_at": "2012-03-11T12:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119718",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[trac_11634-folded.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)**

I couldn't get the patchbot to apply the three patches. Also, there seems to now be a consensus that code lines with trailing whitespace are a Bad Thing. So I've done a single qfolded patch which is equivalent to Volker's three patches but with all trailing whitespace removed.

Apply trac_11634-folded.patch



---

archive/issue_events_154346.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-03-11T21:20:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154346"
}
```



---

archive/issue_events_154347.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-03-11T21:20:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154347"
}
```



---

archive/issue_comments_119719.json:
```json
{
    "body": "Reviewer: **Marshall Hampton, David Loeffler**",
    "created_at": "2012-03-11T21:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119719",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Reviewer: **Marshall Hampton, David Loeffler**



---

archive/issue_comments_119720.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks David, that made things simpler for me to look at.  Volker, my apologies for taking so long on reviewing this.  I think this should be a great addition to sage-5.0.",
    "created_at": "2012-03-11T21:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119720",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks David, that made things simpler for me to look at.  Volker, my apologies for taking so long on reviewing this.  I think this should be a great addition to sage-5.0.



---

archive/issue_comments_119721.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.\n \n Apply\n-* [attachment: trac_11634_folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_folded.patch.gz)\n+* [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)\n``````\n",
    "created_at": "2012-03-11T21:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119721",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Rewrite the `Polyhedron` class to allow different backends for the computation and make PPL the default for polyhedra over `QQ`.
 
 Apply
-* [attachment: trac_11634_folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_folded.patch.gz)
+* [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)
``````




---

archive/issue_comments_119722.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI am not entirely sure if something is wrong on my end, but when I apply the following patches to Sage-5.0.beta8\n\n```\nnovoselt@sage ~/sage/devel/sage-main $ hg qapplied\ntrac_11599_no_circular_imports.patch\ntrac_11599_homset_new_coercion_model.patch\ntrac_11599_rename_morphisms.patch\ntrac_11599_toric_morphisms.patch\ntrac_11599_reviewer.patch\ntrac_11599_remove_class_suffix.patch\ntrac_11599_remaining_fixes.patch\ntrac_11599_numerical_noise.patch\ntrac_12159_separate_triangulation_file.patch\ntrac_12159_placing_triangulation.patch\ntrac_12159_normal_cone.patch\ntrac_11634-folded.patch\n```\nI get after trying to start Sage\n\n```\n----------------------------------------------------------------------\n| Sage Version 5.0.beta8, Release Date: 2012-03-13                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/associahedron.py:22: DeprecationWarning: (Since Sage Version 4.8) The module sage.geometry.polyhedra has been removed, use sage.geometry.polyhedron instead.\n  from sage.geometry.polyhedra import Polyhedron\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/IPython/ipmaker.pyc in force_import(modname, force_reload)\n     61         reload(sys.modules[modname])\n     62     else:\n---> 63         __import__(modname)\n     64         \n     65 \n\n/home/novoselt/sage-5.0.beta8/local/bin/ipy_profile_sage.py in <module>()\n      5     preparser(True)\n      6     \n----> 7     import sage.all_cmdline\n      8     sage.all_cmdline._init_cmdline(globals())\n      9     \n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/all_cmdline.py in <module>()\n     12 try:\n     13 \n---> 14     from sage.all import *\n     15     from sage.calculus.predefined import x\n     16     preparser(on=True)\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/all.py in <module>()\n     80 from sage.modules.all    import *\n     81 from sage.monoids.all    import *\n---> 82 from sage.algebras.all   import *\n     83 from sage.modular.all    import *\n     84 from sage.schemes.all    import *\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/algebras/all.py in <module>()\n     34 from group_algebra_new import GroupAlgebra\n     35 \n---> 36 from iwahori_hecke_algebra import IwahoriHeckeAlgebraT\n     37 from affine_nil_temperley_lieb import AffineNilTemperleyLiebTypeA\n     38 from nil_coxeter_algebra import NilCoxeterAlgebra\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/algebras/iwahori_hecke_algebra.py in <module>()\n     10 #*****************************************************************************\n     11 from sage.categories.all import AlgebrasWithBasis, FiniteDimensionalAlgebrasWithBasis, CoxeterGroups\n---> 12 import sage.combinat.root_system.cartan_type\n     13 from sage.combinat.root_system.weyl_group import WeylGroup\n     14 from sage.combinat.family import Family\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/__init__.py in <module>()\n     11 import type_G\n     12 \n---> 13 import all\n     14 \n     15 \n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/all.py in <module>()\n----> 1 \n      2 \n      3 from associahedron import Associahedron\n      4 from cartan_type import CartanType\n      5 from dynkin_diagram import DynkinDiagram, dynkin_diagram\n      6 from cartan_matrix import cartan_matrix\n      7 from coxeter_matrix import coxeter_matrix\n\n/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/associahedron.py in <module>()\n     24 from sage.modules.free_module_element import vector\n     25 \n---> 26 class Associahedron(Polyhedron):\n     27     r\"\"\"\n     28     The generalized associahedron is a polytopal complex with vertices in one-to-one correspondence\n\nTypeError: Error when calling the metaclass bases\n    function() argument 1 must be code, not str\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\nIs it because some new stuff merged in alpha8 uses old polyhedra code and was not converted?",
    "created_at": "2012-03-13T17:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119722",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:30" align="right">comment:30</div>

I am not entirely sure if something is wrong on my end, but when I apply the following patches to Sage-5.0.beta8

```
novoselt@sage ~/sage/devel/sage-main $ hg qapplied
trac_11599_no_circular_imports.patch
trac_11599_homset_new_coercion_model.patch
trac_11599_rename_morphisms.patch
trac_11599_toric_morphisms.patch
trac_11599_reviewer.patch
trac_11599_remove_class_suffix.patch
trac_11599_remaining_fixes.patch
trac_11599_numerical_noise.patch
trac_12159_separate_triangulation_file.patch
trac_12159_placing_triangulation.patch
trac_12159_normal_cone.patch
trac_11634-folded.patch
```
I get after trying to start Sage

```
----------------------------------------------------------------------
| Sage Version 5.0.beta8, Release Date: 2012-03-13                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/associahedron.py:22: DeprecationWarning: (Since Sage Version 4.8) The module sage.geometry.polyhedra has been removed, use sage.geometry.polyhedron instead.
  from sage.geometry.polyhedra import Polyhedron
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/IPython/ipmaker.pyc in force_import(modname, force_reload)
     61         reload(sys.modules[modname])
     62     else:
---> 63         __import__(modname)
     64         
     65 

/home/novoselt/sage-5.0.beta8/local/bin/ipy_profile_sage.py in <module>()
      5     preparser(True)
      6     
----> 7     import sage.all_cmdline
      8     sage.all_cmdline._init_cmdline(globals())
      9     

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/all_cmdline.py in <module>()
     12 try:
     13 
---> 14     from sage.all import *
     15     from sage.calculus.predefined import x
     16     preparser(on=True)

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/all.py in <module>()
     80 from sage.modules.all    import *
     81 from sage.monoids.all    import *
---> 82 from sage.algebras.all   import *
     83 from sage.modular.all    import *
     84 from sage.schemes.all    import *

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/algebras/all.py in <module>()
     34 from group_algebra_new import GroupAlgebra
     35 
---> 36 from iwahori_hecke_algebra import IwahoriHeckeAlgebraT
     37 from affine_nil_temperley_lieb import AffineNilTemperleyLiebTypeA
     38 from nil_coxeter_algebra import NilCoxeterAlgebra

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/algebras/iwahori_hecke_algebra.py in <module>()
     10 #*****************************************************************************
     11 from sage.categories.all import AlgebrasWithBasis, FiniteDimensionalAlgebrasWithBasis, CoxeterGroups
---> 12 import sage.combinat.root_system.cartan_type
     13 from sage.combinat.root_system.weyl_group import WeylGroup
     14 from sage.combinat.family import Family

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/__init__.py in <module>()
     11 import type_G
     12 
---> 13 import all
     14 
     15 

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/all.py in <module>()
----> 1 
      2 
      3 from associahedron import Associahedron
      4 from cartan_type import CartanType
      5 from dynkin_diagram import DynkinDiagram, dynkin_diagram
      6 from cartan_matrix import cartan_matrix
      7 from coxeter_matrix import coxeter_matrix

/home/novoselt/sage-5.0.beta8/local/lib/python2.7/site-packages/sage/combinat/root_system/associahedron.py in <module>()
     24 from sage.modules.free_module_element import vector
     25 
---> 26 class Associahedron(Polyhedron):
     27     r"""
     28     The generalized associahedron is a polytopal complex with vertices in one-to-one correspondence

TypeError: Error when calling the metaclass bases
    function() argument 1 must be code, not str
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```
Is it because some new stuff merged in alpha8 uses old polyhedra code and was not converted?



---

archive/issue_comments_119723.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThat must be new stuff that was merged in beta8",
    "created_at": "2012-03-13T17:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119723",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

That must be new stuff that was merged in beta8



---

archive/issue_comments_119724.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nNeeds to be rebased",
    "created_at": "2012-03-13T17:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119724",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

Needs to be rebased



---

archive/issue_events_154348.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-03-13T17:21:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154348"
}
```



---

archive/issue_events_154349.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-03-13T17:21:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154349"
}
```



---

archive/issue_comments_119725.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI think this must be from \nhttps://github.com/sagemath/sage/issues/10817",
    "created_at": "2012-03-13T17:25:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119725",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:33" align="right">comment:33</div>

I think this must be from 
https://github.com/sagemath/sage/issues/10817



---

archive/issue_comments_119726.json:
```json
{
    "body": "Initial patch",
    "created_at": "2012-03-18T15:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119726",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_119727.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAttachment: **[trac_11634_fix_sage_5_beta8.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)**\n\nI've added a patch that converts the new !Associahedron class to a PPL-based polyhedron",
    "created_at": "2012-03-18T15:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119727",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

Attachment: **[trac_11634_fix_sage_5_beta8.patch.gz](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)**

I've added a patch that converts the new !Associahedron class to a PPL-based polyhedron



---

archive/issue_events_154350.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-03-18T15:07:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154350"
}
```



---

archive/issue_events_154351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-03-18T15:07:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154351"
}
```



---

archive/issue_comments_119728.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,6 @@\n \n Apply\n * [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)\n+* [attachment: trac_11634_fix_sage_5_beta8.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)\n+\n+\n``````\n",
    "created_at": "2012-03-18T15:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119728",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,6 @@
 
 Apply
 * [attachment: trac_11634-folded.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634-folded.patch.gz)
+* [attachment: trac_11634_fix_sage_5_beta8.patch](https://github.com/sagemath/sage/files/ticket11634/trac_11634_fix_sage_5_beta8.patch.gz)
+
+
``````




---

archive/issue_comments_119729.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nPositive review to the new patch!",
    "created_at": "2012-03-19T21:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119729",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:35" align="right">comment:35</div>

Positive review to the new patch!



---

archive/issue_comments_119730.json:
```json
{
    "body": "Changed reviewer from **Marshall Hampton, David Loeffler** to **Marshall Hampton, David Loeffler, Andrey Novoseltsev**",
    "created_at": "2012-03-19T21:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119730",
    "user": "https://github.com/novoselt"
}
```

Changed reviewer from **Marshall Hampton, David Loeffler** to **Marshall Hampton, David Loeffler, Andrey Novoseltsev**



---

archive/issue_events_154352.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2012-03-19T21:03:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154352"
}
```



---

archive/issue_events_154353.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2012-03-19T21:03:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154353"
}
```



---

archive/issue_events_154354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-23T15:19:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154354"
}
```



---

archive/issue_events_154355.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-23T15:19:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11634#event-154355"
}
```



---

archive/issue_comments_119731.json:
```json
{
    "body": "Merged: **sage-5.0.beta10**",
    "created_at": "2012-03-23T15:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119731",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta10**



---

archive/issue_comments_119732.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nQuestion (likely dumb): could the behavior at [this ask.sagemath question](http://ask.sagemath.org/question/23223/projection_direction-broken-for-polytopes/) be related to this change (or #14175)?  Thanks!",
    "created_at": "2014-07-06T01:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11634#issuecomment-119732",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:37" align="right">comment:37</div>

Question (likely dumb): could the behavior at [this ask.sagemath question](http://ask.sagemath.org/question/23223/projection_direction-broken-for-polytopes/) be related to this change (or #14175)?  Thanks!
