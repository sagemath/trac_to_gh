# Issue 11456: Make the Magma interface able to convert number field elements from Magma to Sage

archive/issues_011284.json:
```json
{
    "body": "Apply:\n\n* [attachment:trac_11456_sage.patch] to the main Sage source\n* [attachment:trac_11456_extcode.patch] to data/extcode\n\nThis adds the following conversion functionality.\n\nFrom Magma to Sage:\n\n* Absolute and relative number fields in one or more generators (previously not possible).\n* Elements of absolute and relative number fields in one generator (previously not possible).\n\nFrom Sage to Magma:\n\n* Relative number fields (previously only absolute number fields).\n\nConverting relative number field elements from Sage to Magma is more difficult (because of garbage collection) and is left for a later patch.\n\nAssignee: @williamstein\n\nCC:  @mstreng\n\nKeywords: magma interface number field element convert\n\nResolution: fixed\n\nAuthor: Marco Streng\n\nReviewer: William Stein\n\nMerged: sage-4.7.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/11456\n\n",
    "closed_at": "2011-08-02T19:45:51Z",
    "created_at": "2011-06-09T14:55:39Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Make the Magma interface able to convert number field elements from Magma to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11456",
    "user": "https://github.com/mstreng"
}
```
Apply:

* [attachment:trac_11456_sage.patch] to the main Sage source
* [attachment:trac_11456_extcode.patch] to data/extcode

This adds the following conversion functionality.

From Magma to Sage:

* Absolute and relative number fields in one or more generators (previously not possible).
* Elements of absolute and relative number fields in one generator (previously not possible).

From Sage to Magma:

* Relative number fields (previously only absolute number fields).

Converting relative number field elements from Sage to Magma is more difficult (because of garbage collection) and is left for a later patch.

Assignee: @williamstein

CC:  @mstreng

Keywords: magma interface number field element convert

Resolution: fixed

Author: Marco Streng

Reviewer: William Stein

Merged: sage-4.7.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/11456





---

archive/issue_comments_151692.json:
```json
{
    "body": "<a id='comment:1'></a>Beware that number fields in Magma can have bases that are not power bases:\n\n```\n> K<a,b>:=NumberField([x^2-2,x^2-3]:Abs);\n> Sqrt(K!6);   \n-a*b\n> Eltseq(Sqrt(K!6));\n[ 0, 0, 0, -1 ]\n> OK:=LLL(IntegerRing(K));\n> L:=FieldOfFractions(OK); //this uses the basis of OK\n> Eltseq(Sqrt(L!6));      \n[ 0, 1, 2, 0 ]\n```\nNumber fields can be relative too, but that is the same in Pari.",
    "created_at": "2011-06-09T15:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151692",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>Beware that number fields in Magma can have bases that are not power bases:

```
> K<a,b>:=NumberField([x^2-2,x^2-3]:Abs);
> Sqrt(K!6);   
-a*b
> Eltseq(Sqrt(K!6));
[ 0, 0, 0, -1 ]
> OK:=LLL(IntegerRing(K));
> L:=FieldOfFractions(OK); //this uses the basis of OK
> Eltseq(Sqrt(L!6));      
[ 0, 1, 2, 0 ]
```
Number fields can be relative too, but that is the same in Pari.



---

archive/issue_comments_151693.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [nbruin](#comment%3A1):\n> Beware that number fields in Magma can have bases that are not power bases:\n\nThanks for the warning!",
    "created_at": "2011-06-09T20:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151693",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:2'></a>Replying to [nbruin](#comment%3A1):
> Beware that number fields in Magma can have bases that are not power bases:

Thanks for the warning!



---

archive/issue_comments_151694.json:
```json
{
    "body": "not finished yet",
    "created_at": "2011-06-29T17:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151694",
    "user": "https://github.com/mstreng"
}
```

not finished yet



---

archive/issue_comments_151695.json:
```json
{
    "body": "Attachment [trac_11456_doctests.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_doctests.patch) by @mstreng created at 2011-07-01 14:13:43\n\npatch for extcode to convert number fields and their elements to Sage",
    "created_at": "2011-07-01T14:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151695",
    "user": "https://github.com/mstreng"
}
```

Attachment [trac_11456_doctests.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_doctests.patch) by @mstreng created at 2011-07-01 14:13:43

patch for extcode to convert number fields and their elements to Sage



---

archive/issue_comments_151696.json:
```json
{
    "body": "Attachment [trac_11456_extcode.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_extcode.patch) by @mstreng created at 2011-07-01 14:15:00\n\npatch for sage source code that provides documentation for the extcode patch (and converts relative number fields to Magma)",
    "created_at": "2011-07-01T14:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151696",
    "user": "https://github.com/mstreng"
}
```

Attachment [trac_11456_extcode.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_extcode.patch) by @mstreng created at 2011-07-01 14:15:00

patch for sage source code that provides documentation for the extcode patch (and converts relative number fields to Magma)



---

archive/issue_comments_151697.json:
```json
{
    "body": "<a id='comment:3'></a>Attachment [trac_11456_sage.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_sage.patch) by @mstreng created at 2011-07-01 14:25:06\n\nThe file trac_11456_doctests.patch can be removed.",
    "created_at": "2011-07-01T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151697",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:3'></a>Attachment [trac_11456_sage.patch](tarball://root/attachments/some-uuid/ticket11456/trac_11456_sage.patch) by @mstreng created at 2011-07-01 14:25:06

The file trac_11456_doctests.patch can be removed.



---

archive/issue_comments_151698.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,17 @@\n-Apparently the Magma interface can't do this yet. See #11455 for examples. If I understand it correctly, this requires adding code for `FldNumElt` to `data/extcode/magma/sage/basic.m`.\n+Apply:\n+\n+* [attachment:trac_11456_sage.patch] to the main Sage source\n+* [attachment:trac_11456_extcode.patch] to data/extcode\n+\n+This adds the following conversion functionality.\n+\n+From Magma to Sage:\n+\n+* Absolute and relative number fields in one or more generators (previously not possible).\n+* Elements of absolute and relative number fields in one generator (previously not possible).\n+\n+From Sage to Magma:\n+\n+* Relative number fields (previously only absolute number fields).\n+\n+Converting relative number field elements from Sage to Magma is more difficult (because of garbage collection) and is left for a later patch.\n``````\n",
    "created_at": "2011-07-01T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151698",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,17 @@
-Apparently the Magma interface can't do this yet. See #11455 for examples. If I understand it correctly, this requires adding code for `FldNumElt` to `data/extcode/magma/sage/basic.m`.
+Apply:
+
+* [attachment:trac_11456_sage.patch] to the main Sage source
+* [attachment:trac_11456_extcode.patch] to data/extcode
+
+This adds the following conversion functionality.
+
+From Magma to Sage:
+
+* Absolute and relative number fields in one or more generators (previously not possible).
+* Elements of absolute and relative number fields in one generator (previously not possible).
+
+From Sage to Magma:
+
+* Relative number fields (previously only absolute number fields).
+
+Converting relative number field elements from Sage to Magma is more difficult (because of garbage collection) and is left for a later patch.
``````




---

archive/issue_comments_151699.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-07-01T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151699",
    "user": "https://github.com/mstreng"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_151700.json:
```json
{
    "body": "Changing author from \"\" to \"Marco Streng\"",
    "created_at": "2011-07-01T14:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151700",
    "user": "https://github.com/mstreng"
}
```

Changing author from "" to "Marco Streng"



---

archive/issue_comments_151701.json:
```json
{
    "body": "<a id='comment:4'></a>NOTE: I just noticed that these patches conflict with #11580.  One or the other may need to be rebased...\n\nI read through this patch, applied it, and tested it, and it looks good to me.  This is much needed functionality, and much care was taken in writing it.",
    "created_at": "2011-07-17T13:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151701",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>NOTE: I just noticed that these patches conflict with #11580.  One or the other may need to be rebased...

I read through this patch, applied it, and tested it, and it looks good to me.  This is much needed functionality, and much care was taken in writing it.



---

archive/issue_comments_151702.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-17T13:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151702",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_029778.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-19T10:16:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11456#event-29778"
}
```



---

archive/issue_comments_151703.json:
```json
{
    "body": "Changing reviewer from \"\" to \"William Stein\"",
    "created_at": "2011-07-28T10:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151703",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "William Stein"



---

archive/issue_comments_151704.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [was](#comment%3A4):\n> NOTE: I just noticed that these patches conflict with #11580.  One or the other may need to be rebased...\n\n\ns/may need to/must/",
    "created_at": "2011-07-28T10:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Replying to [was](#comment%3A4):
> NOTE: I just noticed that these patches conflict with #11580.  One or the other may need to be rebased...


s/may need to/must/



---

archive/issue_comments_151705.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Coordinate with #11580\"",
    "created_at": "2011-07-28T10:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151705",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to "Coordinate with #11580"



---

archive/issue_comments_151706.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-07-28T10:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151706",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_151707.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-07-29T15:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151707",
    "user": "https://github.com/mstreng"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_151708.json:
```json
{
    "body": "<a id='comment:8'></a>I'm putting this one back to positive review, since I've given #11580 a negative one.",
    "created_at": "2011-07-29T15:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151708",
    "user": "https://github.com/mstreng"
}
```

<a id='comment:8'></a>I'm putting this one back to positive review, since I've given #11580 a negative one.



---

archive/issue_comments_151709.json:
```json
{
    "body": "Changing work_issues from \"Coordinate with #11580\" to \"\"",
    "created_at": "2011-07-29T15:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151709",
    "user": "https://github.com/mstreng"
}
```

Changing work_issues from "Coordinate with #11580" to ""



---

archive/issue_events_029779.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-02T19:45:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11456#event-29779"
}
```



---

archive/issue_comments_151710.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.7.2.alpha1\"",
    "created_at": "2011-08-02T19:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151710",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-4.7.2.alpha1"



---

archive/issue_comments_151711.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-08-02T19:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11456",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11456#issuecomment-151711",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
