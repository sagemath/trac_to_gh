# Issue 11787: error in creating graphics with numpy arrays

archive/issues_011615.json:
```json
{
    "assignees": [],
    "body": "#7570 should have been implemented by doing a len()==0 test, rather than a direct comparison to empty lists/dicts/etc.  That allows things like numpy arrays, etc.\n\nI guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.\n\nSee http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n\n---\nApply only [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`\n\n**Assignee:** @jasongrout, @williamstein\n\n**CC:**  @kcrisman @ppurka\n\n**Branch:** [u/lftabera/ticket/11787_numpyarray](https://github.com/sagemath/sagetrac-mirror/tree/u/lftabera/ticket/11787_numpyarray)\n\n**Commit:** [8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8](https://github.com/sagemath/sagetrac-mirror/commit/8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8)\n\n**Reviewer:** Luis Felipe Tabera Alonso\n\n**Author:** Punarbasu Purkayastha\n\nIssue created by migration from https://trac.sagemath.org/ticket/11787\n\n",
    "closed_at": "2013-12-21T18:43:51Z",
    "created_at": "2011-09-11T03:04:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "error in creating graphics with numpy arrays",
    "type": "issue",
    "updated_at": "2014-05-28T00:09:54Z",
    "url": "https://github.com/sagemath/sage/issues/11787",
    "user": "https://github.com/jasongrout"
}
```
#7570 should have been implemented by doing a len()==0 test, rather than a direct comparison to empty lists/dicts/etc.  That allows things like numpy arrays, etc.

I guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.

See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.

---
Apply only [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`

**Assignee:** @jasongrout, @williamstein

**CC:**  @kcrisman @ppurka

**Branch:** [u/lftabera/ticket/11787_numpyarray](https://github.com/sagemath/sagetrac-mirror/tree/u/lftabera/ticket/11787_numpyarray)

**Commit:** [8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8](https://github.com/sagemath/sagetrac-mirror/commit/8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8)

**Reviewer:** Luis Felipe Tabera Alonso

**Author:** Punarbasu Purkayastha

Issue created by migration from https://trac.sagemath.org/ticket/11787





---

archive/issue_events_133687.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-09-11T03:04:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133687"
}
```



---

archive/issue_events_133688.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-09-11T03:04:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "08517b",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133688"
}
```



---

archive/issue_events_133689.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-09-11T03:04:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133689"
}
```



---

archive/issue_events_133690.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-09-11T03:05:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "rename": {
        "from": "empty graphics objects",
        "to": "error in creating graphics with numpy arrays"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133690"
}
```



---

archive/issue_comments_125259.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n #7570 should have been implemented by doing a len()==0 test, rather than a direct comparison to empty lists/dicts/etc.  That allows things like numpy arrays, etc.\n \n I guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.\n+\n+See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n``````\n",
    "created_at": "2011-09-11T03:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125259",
    "user": "https://github.com/jasongrout"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 #7570 should have been implemented by doing a len()==0 test, rather than a direct comparison to empty lists/dicts/etc.  That allows things like numpy arrays, etc.
 
 I guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.
+
+See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.
``````




---

archive/issue_comments_125260.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nS",
    "created_at": "2011-09-11T03:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125260",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'>**Comment 2:**</a>
S



---

archive/issue_comments_125261.json:
```json
{
    "body": "**Author:** Punarbasu Purkayastha",
    "created_at": "2012-11-23T13:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125261",
    "user": "https://github.com/ppurka"
}
```

**Author:** Punarbasu Purkayastha



---

archive/issue_events_133691.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-11-23T13:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133691"
}
```



---

archive/issue_comments_125262.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nAdded patch to use numpy arrays. I am not happy with having to use len() but I don't know of a better way or non-ugly way to *not* traverse the whole list of input data. Hopefully, the impact to the running time is not too high for large input lists or tuples.\n\nThe alternative to checking `len(data) == 0` was something like the following (let's say we are calling `list_plot(data)`):\n\n```python\nimport collections\nif not isinstance(data, collections.Iterable):\n    raise TypeError\nif isinstance(data, dict) and not data:\n    return Graphics()\nif not isinstance(data, dict): # check that data is not a dict, to avoid KeyError\n    try:\n        a = data[0]\n    except IndexError: # this means we have an iterable with no items\n        return Graphics()\n```\n\nIf you would like me to patch up with this ugly kludge of a code instead of the simple `len(data) == 0`, then let me know - I will put up a new patch. :)\n\n*EDIT:* forgot to check for dict before `try`.",
    "created_at": "2012-11-23T13:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125262",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:4'>**Comment 4:**</a>
Added patch to use numpy arrays. I am not happy with having to use len() but I don't know of a better way or non-ugly way to *not* traverse the whole list of input data. Hopefully, the impact to the running time is not too high for large input lists or tuples.

The alternative to checking `len(data) == 0` was something like the following (let's say we are calling `list_plot(data)`):

```python
import collections
if not isinstance(data, collections.Iterable):
    raise TypeError
if isinstance(data, dict) and not data:
    return Graphics()
if not isinstance(data, dict): # check that data is not a dict, to avoid KeyError
    try:
        a = data[0]
    except IndexError: # this means we have an iterable with no items
        return Graphics()
```

If you would like me to patch up with this ugly kludge of a code instead of the simple `len(data) == 0`, then let me know - I will put up a new patch. :)

*EDIT:* forgot to check for dict before `try`.



---

archive/issue_comments_125263.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,6 @@\n I guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.\n \n See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n+\n+---\n+Apply [attachment:trac_11787-allow_numpy_arrays.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch) to `devel/sage`\n``````\n",
    "created_at": "2012-11-23T13:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125263",
    "user": "https://github.com/ppurka"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,6 @@
 I guess technically, numpy arrays aren't documented as being supported by list_plot, for example, so this might technically be an enhancement.
 
 See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.
+
+---
+Apply [attachment:trac_11787-allow_numpy_arrays.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch) to `devel/sage`
``````




---

archive/issue_comments_125264.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nThis will not work, the elements of the array might be arrays\n\n```\nsage: var('x,y')\n(x, y)\nsage: x1=y  \nsage: y1=-x\nsage: A=desolve_odeint([x1,y1],[-0.5,0.3],srange(0,1,0.01),[x,y])\nsage: list_plot(A,plotjoined=True)\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: unable to coerce to a ComplexNumber: <type 'numpy.ndarray'>\n```\n\nTh erecommended way for lists tuples etc. would have been\n\n```\nif not data:\n   return Grpahics()\n}}\n\nBut this does not work with ndarrays. len is O(1) for these types.",
    "created_at": "2013-03-07T19:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125264",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:5'>**Comment 5:**</a>
This will not work, the elements of the array might be arrays

```
sage: var('x,y')
(x, y)
sage: x1=y  
sage: y1=-x
sage: A=desolve_odeint([x1,y1],[-0.5,0.3],srange(0,1,0.01),[x,y])
sage: list_plot(A,plotjoined=True)
TypeError                                 Traceback (most recent call last)
...
TypeError: unable to coerce to a ComplexNumber: <type 'numpy.ndarray'>
```

Th erecommended way for lists tuples etc. would have been

```
if not data:
   return Grpahics()
}}

But this does not work with ndarrays. len is O(1) for these types.



---

archive/issue_events_133692.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-03-08T12:12:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133692"
}
```



---

archive/issue_events_133693.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-03-08T12:12:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133693"
}
```



---

archive/issue_comments_125265.json:
```json
{
    "body": "**Work Issues:** Fix for ndarrays",
    "created_at": "2013-03-08T12:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125265",
    "user": "https://github.com/ppurka"
}
```

**Work Issues:** Fix for ndarrays



---

archive/issue_comments_125266.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\n@lftabera Thanks for looking into this. I will put up an updated patch to take care of ndarrays.",
    "created_at": "2013-03-08T12:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125266",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'>**Comment 6:**</a>
@lftabera Thanks for looking into this. I will put up an updated patch to take care of ndarrays.



---

archive/issue_comments_125267.json:
```json
{
    "body": "Apply to devel/sage",
    "created_at": "2013-03-09T11:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125267",
    "user": "https://github.com/ppurka"
}
```

Apply to devel/sage



---

archive/issue_events_133694.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-03-09T11:35:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133694"
}
```



---

archive/issue_events_133695.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-03-09T11:35:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133695"
}
```



---

archive/issue_comments_125268.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Attachment:** [trac_11787-allow_numpy_arrays.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch.gz)\n\nUpdated the patch to take care of ndarrays of ndarrays, or even lists of ndarrays. The following are the tests on a corei5 @ 2.5GHz.\n\nThere is probably a very minor but insignificant slowdown. The tests of plot.py without this patch takes 220.4s and with this patch takes 223.3s, i.e., 3 seconds more. Given that two more plots are introduced in the doctest, I believe there is no perceptible slowdown to the `list_plot` code.\n\n```\n...sage-5.8.beta4/devel/sage\u00bb ../../sage -t -long sage/plot/plot.py  ## WITH PATCH\nsage -t -long \"devel/sage-main/sage/plot/plot.py\"\n\t [223.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 223.4 seconds\n...sage-5.8.beta4/devel/sage\u00bb hg qser\ntrac_10508_doctest.patch\ntrac_10508_update_atlas_docs.patch\ntrac_11787-allow_numpy_arrays.patch\n...sage-5.8.beta4/devel/sage\u00bb hg qpop trac_10508_update_atlas_docs.patch\nabort: local changes found, refresh first\n...8.beta4/devel/sage [255] \u00bb hg qref\n...sage-5.8.beta4/devel/sage\u00bb hg qpop trac_10508_update_atlas_docs.patch\npopping trac_11787-allow_numpy_arrays.patch\nnow at: trac_10508_update_atlas_docs.patch\n...sage-5.8.beta4/devel/sage\u00bb ../../sage -b >& /dev/null \n...sage-5.8.beta4/devel/sage\u00bb ../../sage -t -long sage/plot/plot.py   ## WITHOUT PATCH\nsage -t -long \"devel/sage-main/sage/plot/plot.py\"\n\t [220.4 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 220.4 seconds\n```",
    "created_at": "2013-03-09T11:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125268",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Attachment:** [trac_11787-allow_numpy_arrays.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch.gz)

Updated the patch to take care of ndarrays of ndarrays, or even lists of ndarrays. The following are the tests on a corei5 @ 2.5GHz.

There is probably a very minor but insignificant slowdown. The tests of plot.py without this patch takes 220.4s and with this patch takes 223.3s, i.e., 3 seconds more. Given that two more plots are introduced in the doctest, I believe there is no perceptible slowdown to the `list_plot` code.

```
...sage-5.8.beta4/devel/sage» ../../sage -t -long sage/plot/plot.py  ## WITH PATCH
sage -t -long "devel/sage-main/sage/plot/plot.py"
	 [223.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 223.4 seconds
...sage-5.8.beta4/devel/sage» hg qser
trac_10508_doctest.patch
trac_10508_update_atlas_docs.patch
trac_11787-allow_numpy_arrays.patch
...sage-5.8.beta4/devel/sage» hg qpop trac_10508_update_atlas_docs.patch
abort: local changes found, refresh first
...8.beta4/devel/sage [255] » hg qref
...sage-5.8.beta4/devel/sage» hg qpop trac_10508_update_atlas_docs.patch
popping trac_11787-allow_numpy_arrays.patch
now at: trac_10508_update_atlas_docs.patch
...sage-5.8.beta4/devel/sage» ../../sage -b >& /dev/null 
...sage-5.8.beta4/devel/sage» ../../sage -t -long sage/plot/plot.py   ## WITHOUT PATCH
sage -t -long "devel/sage-main/sage/plot/plot.py"
	 [220.4 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 220.4 seconds
```



---

archive/issue_comments_125269.json:
```json
{
    "body": "**Changing work issues** from \"Fix for ndarrays\" to \"\".",
    "created_at": "2013-03-09T11:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125269",
    "user": "https://github.com/ppurka"
}
```

**Changing work issues** from "Fix for ndarrays" to "".



---

archive/issue_events_133696.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-03-26T15:25:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133696"
}
```



---

archive/issue_events_133697.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-03-26T15:25:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133697"
}
```



---

archive/issue_comments_125270.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nThe following test now provides an empty graphics\n\nlist_plot([1, I, pi + I/2, CC(.25, .25)])\n\nI would try to avoid, if possible, the import of ndarray and testing for lists, tuples etc. It seems that line and plot can deal with ndarrays and ndarrays of ndarrays without problem.",
    "created_at": "2013-03-26T15:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125270",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:8'>**Comment 8:**</a>
The following test now provides an empty graphics

list_plot([1, I, pi + I/2, CC(.25, .25)])

I would try to avoid, if possible, the import of ndarray and testing for lists, tuples etc. It seems that line and plot can deal with ndarrays and ndarrays of ndarrays without problem.



---

archive/issue_comments_125271.json:
```json
{
    "body": "**Reviewer:** Luis Felipe Tabera Alonso",
    "created_at": "2013-03-26T15:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125271",
    "user": "https://github.com/lftabera"
}
```

**Reviewer:** Luis Felipe Tabera Alonso



---

archive/issue_comments_125272.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@lftabera](#comment%3A8):\n> The following test now provides an empty graphics\n> \n> list_plot([1, I, pi + I/2, CC(.25, .25)])\n\nYikes! I learn something new everyday. I tried to avoid creating yet another list internally in the function by using `enumerate`. But this is an iterator and it runs through to the end of the list on one of the calls to `line` or `point`. And then if an exception is raised from those functions, then the list appears empty while trying the CC plots.\n\n> \n> I would try to avoid, if possible, the import of ndarray and testing for lists, tuples etc. It seems that line and plot can deal with ndarrays and ndarrays of ndarrays without problem.\n\nIndeed line and point can handle ndarrays. But the main problem is to detect when an empty array is passed in. Both those functions can not handle an empty numpy array. All this error checking was just to handle empty arrays :-|\n\n```\nsage: line(np.array([]))\n...\nValueError: there must be at least 2 points\n\nsage: line([])  # this is fine\nsage: point([]) # this is fine\n\nsage: point(np.array([]))\n...\nAttributeError: 'int' object has no attribute '_set_extra_kwds'\n```",
    "created_at": "2013-03-26T16:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125272",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@lftabera](#comment%3A8):
> The following test now provides an empty graphics
> 
> list_plot([1, I, pi + I/2, CC(.25, .25)])

Yikes! I learn something new everyday. I tried to avoid creating yet another list internally in the function by using `enumerate`. But this is an iterator and it runs through to the end of the list on one of the calls to `line` or `point`. And then if an exception is raised from those functions, then the list appears empty while trying the CC plots.

> 
> I would try to avoid, if possible, the import of ndarray and testing for lists, tuples etc. It seems that line and plot can deal with ndarrays and ndarrays of ndarrays without problem.

Indeed line and point can handle ndarrays. But the main problem is to detect when an empty array is passed in. Both those functions can not handle an empty numpy array. All this error checking was just to handle empty arrays :-|

```
sage: line(np.array([]))
...
ValueError: there must be at least 2 points

sage: line([])  # this is fine
sage: point([]) # this is fine

sage: point(np.array([]))
...
AttributeError: 'int' object has no attribute '_set_extra_kwds'
```



---

archive/issue_comments_125273.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nOh I see what you mean. I should remove the checks for numpy. You have raised some very good points.",
    "created_at": "2013-03-26T16:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125273",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:10'>**Comment 10:**</a>
Oh I see what you mean. I should remove the checks for numpy. You have raised some very good points.



---

archive/issue_comments_125274.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nHello, I finally got some time to look at this ticket again. This time it doesn't import numpy and the main changes are in the functions line and point, along with their 3D versions.\n\nIt passes all doctests in sage/plot. Unfortunately, patchbot is down now. :(\n\nPatchbot apply trac_11787-allow_numpy_arrays.2.patch",
    "created_at": "2013-04-19T16:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125274",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:11'>**Comment 11:**</a>
Hello, I finally got some time to look at this ticket again. This time it doesn't import numpy and the main changes are in the functions line and point, along with their 3D versions.

It passes all doctests in sage/plot. Unfortunately, patchbot is down now. :(

Patchbot apply trac_11787-allow_numpy_arrays.2.patch



---

archive/issue_events_133698.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-04-19T16:02:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133698"
}
```



---

archive/issue_events_133699.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-04-19T16:02:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133699"
}
```



---

archive/issue_comments_125275.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n \n ---\n-Apply [attachment:trac_11787-allow_numpy_arrays.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch) to `devel/sage`\n+Apply [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`\n``````\n",
    "created_at": "2013-04-19T16:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125275",
    "user": "https://github.com/ppurka"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.
 
 ---
-Apply [attachment:trac_11787-allow_numpy_arrays.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.patch) to `devel/sage`
+Apply [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`
``````




---

archive/issue_events_133700.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-05-10T08:09:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133700"
}
```



---

archive/issue_events_133701.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-05-10T08:09:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133701"
}
```



---

archive/issue_comments_125276.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\ndoctest fails on sage/schemes/elliptic_curves/heegner.py using sage 5.10.beta2, please check that your code is correct of if there is a bug in the mentioned file.",
    "created_at": "2013-05-10T08:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125276",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:12'>**Comment 12:**</a>
doctest fails on sage/schemes/elliptic_curves/heegner.py using sage 5.10.beta2, please check that your code is correct of if there is a bug in the mentioned file.



---

archive/issue_comments_125277.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nIt seems to be an undocumented \"feature\" of the `point` function. Strictly speaking, the point function has no direct support for plotting a complex number. This is what the `heegner` function does - it passes a complex number to point. Surprising that it worked all these years.",
    "created_at": "2013-05-10T08:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125277",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:13'>**Comment 13:**</a>
It seems to be an undocumented "feature" of the `point` function. Strictly speaking, the point function has no direct support for plotting a complex number. This is what the `heegner` function does - it passes a complex number to point. Surprising that it worked all these years.



---

archive/issue_comments_125278.json:
```json
{
    "body": "**Attachment:** [trac_11787-heegner.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-heegner.patch.gz)\n\nApply after previous file.",
    "created_at": "2013-05-10T08:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125278",
    "user": "https://github.com/ppurka"
}
```

**Attachment:** [trac_11787-heegner.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-heegner.patch.gz)

Apply after previous file.



---

archive/issue_comments_125279.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n \n ---\n-Apply [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`\n+Apply [[attachment:trac_11787-heegner.patch](https://github.com/sagemath/sage/files/ticket11787/98f42fd9d54c9ca6de15faa321ab736e.patch](https://github.com/sagemath/sage/files/ticket11787/93b177044cde47db82783140189931f7.patch),) to `devel/sage`\n``````\n",
    "created_at": "2013-05-10T08:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125279",
    "user": "https://github.com/ppurka"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.
 
 ---
-Apply [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`
+Apply [[attachment:trac_11787-heegner.patch](https://github.com/sagemath/sage/files/ticket11787/98f42fd9d54c9ca6de15faa321ab736e.patch](https://github.com/sagemath/sage/files/ticket11787/93b177044cde47db82783140189931f7.patch),) to `devel/sage`
``````




---

archive/issue_comments_125280.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nAdded a patch to heegner.\n\nPatchbot apply trac_11787-allow_numpy_arrays.2.patch trac_11787-heegner.patch",
    "created_at": "2013-05-10T08:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125280",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:14'>**Comment 14:**</a>
Added a patch to heegner.

Patchbot apply trac_11787-allow_numpy_arrays.2.patch trac_11787-heegner.patch



---

archive/issue_events_133702.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-05-10T08:50:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133702"
}
```



---

archive/issue_events_133703.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-05-10T08:50:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133703"
}
```



---

archive/issue_comments_125281.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI do not convinced with this solution. While it is not documented, it is a nice side feature that CDF can be ploted. I have the gut that there should be another solution. The problem here is with ndarray not behaving as nice python objects. \n\nOne idea is to check first if data is a dictionary and, if not, just simply perform data=list(data). This would simplify the code a lot.",
    "created_at": "2013-05-10T09:37:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125281",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:15'>**Comment 15:**</a>
I do not convinced with this solution. While it is not documented, it is a nice side feature that CDF can be ploted. I have the gut that there should be another solution. The problem here is with ndarray not behaving as nice python objects. 

One idea is to check first if data is a dictionary and, if not, just simply perform data=list(data). This would simplify the code a lot.



---

archive/issue_events_133704.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-05-10T09:39:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133704"
}
```



---

archive/issue_events_133705.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-05-10T09:39:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133705"
}
```



---

archive/issue_comments_125282.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nI don't understand. This bug has nothing to do with numpy. It is using a misfeature and unintended use of points. There are other places in the heegner file where complex points are plotted correctly by using the proper conversion to a tuple containing the real part and the imaginary part separately.",
    "created_at": "2013-05-10T10:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125282",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:17'>**Comment 17:**</a>
I don't understand. This bug has nothing to do with numpy. It is using a misfeature and unintended use of points. There are other places in the heegner file where complex points are plotted correctly by using the proper conversion to a tuple containing the real part and the imaginary part separately.



---

archive/issue_comments_125283.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nI do not agree, if point2d expect lists, it should work with objects that can be interpreted as lists. We should not asks the user to pass strictly lists to the method. http://en.wikipedia.org/wiki/Duck_typing\n\nIn my opinion, line 377 of sage/plot/point.py should read:\n\n`if not points:`\n\nAnd line 2848 of heegner should read\n\n`return point([CDF(self.tau())], **kwds)`\n\nor maybe\n\n`return point(list(CDF(self.tau())), **kwds)`\n\nIn order not to fail on CDF(0.0)",
    "created_at": "2013-05-10T10:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125283",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:18'>**Comment 18:**</a>
I do not agree, if point2d expect lists, it should work with objects that can be interpreted as lists. We should not asks the user to pass strictly lists to the method. http://en.wikipedia.org/wiki/Duck_typing

In my opinion, line 377 of sage/plot/point.py should read:

`if not points:`

And line 2848 of heegner should read

`return point([CDF(self.tau())], **kwds)`

or maybe

`return point(list(CDF(self.tau())), **kwds)`

In order not to fail on CDF(0.0)



---

archive/issue_comments_125284.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nThat's not correct. point2d can be passed any iterable that consists of a tuple or list of two coordinates. There is only one exception where you can pass a single tuple or a single list consisting of two coordinates.",
    "created_at": "2013-05-10T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125284",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:19'>**Comment 19:**</a>
That's not correct. point2d can be passed any iterable that consists of a tuple or list of two coordinates. There is only one exception where you can pass a single tuple or a single list consisting of two coordinates.



---

archive/issue_comments_125285.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nWell, as point2d has incomplete documentation, it does not specify its input and this is argueable. \n\nFrom the python style guide www.python.org/dev/peps/pep-0008\n\n```\nFor sequences, (strings, lists, tuples), use the fact that empty sequences are false.\n\nYes: if not seq:\n     if seq:\n\nNo: if len(seq)\n    if not len(seq)\n```",
    "created_at": "2013-05-10T10:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125285",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:20'>**Comment 20:**</a>
Well, as point2d has incomplete documentation, it does not specify its input and this is argueable. 

From the python style guide www.python.org/dev/peps/pep-0008

```
For sequences, (strings, lists, tuples), use the fact that empty sequences are false.

Yes: if not seq:
     if seq:

No: if len(seq)
    if not len(seq)
```



---

archive/issue_comments_125286.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nReplying to [@lftabera](#comment%3A20):\n> \n> ```\n> For sequences, (strings, lists, tuples), use the fact that empty sequences are false.\n> \n> Yes: if not seq:\n>      if seq:\n> \n> No: if len(seq)\n>     if not len(seq)\n> ```\n\nThis thing doesn't work with numpy arrays. That's why I am using `len` and that's why I had to write the ugly patch earlier.\n\nThe documentation of point2d is clear enough with regard to its input:\n\n```\nPoint takes either a single tuple of coordinates or a list of tuples.\n```\nBut the way the function is written you can pass it either a list of tuples/list or a tuple of tuples/list, or with this patch a numpy array.\n\nEDIT: I wrote in [comment:19](#comment%3A19) that point2d takes any iterable. This is incorrect. It takes in any list or tuple only.",
    "created_at": "2013-05-10T11:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125286",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:21'>**Comment 21:**</a>
Replying to [@lftabera](#comment%3A20):
> 
> ```
> For sequences, (strings, lists, tuples), use the fact that empty sequences are false.
> 
> Yes: if not seq:
>      if seq:
> 
> No: if len(seq)
>     if not len(seq)
> ```

This thing doesn't work with numpy arrays. That's why I am using `len` and that's why I had to write the ugly patch earlier.

The documentation of point2d is clear enough with regard to its input:

```
Point takes either a single tuple of coordinates or a list of tuples.
```
But the way the function is written you can pass it either a list of tuples/list or a tuple of tuples/list, or with this patch a numpy array.

EDIT: I wrote in [comment:19](#comment%3A19) that point2d takes any iterable. This is incorrect. It takes in any list or tuple only.



---

archive/issue_comments_125287.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nJust FYI, #8082 added correct plotting of complex points.  Perhaps the input documentation needs to be updated, but there is an example in the documentation of it being used.  Note also #9982 and #4838.",
    "created_at": "2013-05-10T13:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125287",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'>**Comment 22:**</a>
Just FYI, #8082 added correct plotting of complex points.  Perhaps the input documentation needs to be updated, but there is an example in the documentation of it being used.  Note also #9982 and #4838.



---

archive/issue_comments_125288.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nReplying to [@kcrisman](#comment%3A22):\n> Just FYI, #8082 added correct plotting of complex points.  Perhaps the input documentation needs to be updated, but there is an example in the documentation of it being used.  Note also #9982 and #4838.\n\nUnfortunately, neither #8082 nor #4348 adds any documentation about plotting complex numbers directly via points. Plotting them via `plot` or `list_plot` is of course well documented.\n\n<Edited out>\n\nSince the patch here does not break the code which deals with more than one instance of complex numbers, I suggest that we proceed with the patches here and deal with complex numbers in `point` or `line` in #9982. The following *undocumented* behavior is broken with this ticket\n\n```\npoint(CC(I))\n```\nbut the following works\n\n```\npoint([CC(I)])\npoint([CC(I), CC(1)])\n```",
    "created_at": "2013-05-10T16:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125288",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:23'>**Comment 23:**</a>
Replying to [@kcrisman](#comment%3A22):
> Just FYI, #8082 added correct plotting of complex points.  Perhaps the input documentation needs to be updated, but there is an example in the documentation of it being used.  Note also #9982 and #4838.

Unfortunately, neither #8082 nor #4348 adds any documentation about plotting complex numbers directly via points. Plotting them via `plot` or `list_plot` is of course well documented.

<Edited out>

Since the patch here does not break the code which deals with more than one instance of complex numbers, I suggest that we proceed with the patches here and deal with complex numbers in `point` or `line` in #9982. The following *undocumented* behavior is broken with this ticket

```
point(CC(I))
```
but the following works

```
point([CC(I)])
point([CC(I), CC(1)])
```



---

archive/issue_comments_125289.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nI think I must have been very tired the other day to write that `xydata_from_point_list` was \"incomplete\". The output is just fine. `:-S`.\n\nI will check if the behaviour of `point(CC(I))` can be fixed easily; otherwise I would like to postpone fixing that and the documentation of `point` to #9982.",
    "created_at": "2013-05-13T11:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125289",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:24'>**Comment 24:**</a>
I think I must have been very tired the other day to write that `xydata_from_point_list` was "incomplete". The output is just fine. `:-S`.

I will check if the behaviour of `point(CC(I))` can be fixed easily; otherwise I would like to postpone fixing that and the documentation of `point` to #9982.



---

archive/issue_comments_125290.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.\n \n ---\n-Apply [[attachment:trac_11787-heegner.patch](https://github.com/sagemath/sage/files/ticket11787/98f42fd9d54c9ca6de15faa321ab736e.patch](https://github.com/sagemath/sage/files/ticket11787/93b177044cde47db82783140189931f7.patch),) to `devel/sage`\n+Apply only [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`\n``````\n",
    "created_at": "2013-05-24T09:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125290",
    "user": "https://github.com/ppurka"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 See http://groups.google.com/group/sage-support/browse_thread/thread/fb53b9d908acfb4 for a discussion of this bug.
 
 ---
-Apply [[attachment:trac_11787-heegner.patch](https://github.com/sagemath/sage/files/ticket11787/98f42fd9d54c9ca6de15faa321ab736e.patch](https://github.com/sagemath/sage/files/ticket11787/93b177044cde47db82783140189931f7.patch),) to `devel/sage`
+Apply only [attachment:trac_11787-allow_numpy_arrays.2.patch](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch) to `devel/sage`
``````




---

archive/issue_events_133706.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-05-24T09:52:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133706"
}
```



---

archive/issue_events_133707.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2013-05-24T09:52:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133707"
}
```



---

archive/issue_comments_125291.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nI updated the numpy patch to take care of complex numbers. It works in the cases where it used to work. See #9982 for the cases where it doesn't work.\n\nPatchbot apply trac_11787-allow_numpy_arrays.2.patch\n\n*Edit:*\n1. for reviewing, the diff between the previous and this numpy patch can be [seen here](https://github.com/ppurka/sage-patches/commit/eb0e8ecb81deff15735d656f2c73fc83d3e8c45b).\n2. the heegner patch is not needed any more.",
    "created_at": "2013-05-24T09:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125291",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:25'>**Comment 25:**</a>
I updated the numpy patch to take care of complex numbers. It works in the cases where it used to work. See #9982 for the cases where it doesn't work.

Patchbot apply trac_11787-allow_numpy_arrays.2.patch

*Edit:*
1. for reviewing, the diff between the previous and this numpy patch can be [seen here](https://github.com/ppurka/sage-patches/commit/eb0e8ecb81deff15735d656f2c73fc83d3e8c45b).
2. the heegner patch is not needed any more.



---

archive/issue_comments_125292.json:
```json
{
    "body": "Updated to remove all use of len()",
    "created_at": "2013-05-24T11:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125292",
    "user": "https://github.com/ppurka"
}
```

Updated to remove all use of len()



---

archive/issue_comments_125293.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Attachment:** [trac_11787-allow_numpy_arrays.2.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch.gz)\n\nI removed the final use of len(). The diff to previous upload can be [seen here](https://github.com/ppurka/sage-patches/commit/e81459e3905962931e7b45b2880d176ad3094cf2).",
    "created_at": "2013-05-24T11:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125293",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Attachment:** [trac_11787-allow_numpy_arrays.2.patch.gz](https://github.com/sagemath/sage/files/ticket11787/trac_11787-allow_numpy_arrays.2.patch.gz)

I removed the final use of len(). The diff to previous upload can be [seen here](https://github.com/ppurka/sage-patches/commit/e81459e3905962931e7b45b2880d176ad3094cf2).



---

archive/issue_events_133708.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133708"
}
```



---

archive/issue_events_133709.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133709"
}
```



---

archive/issue_comments_125294.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nCode looks good to me, does not import numpy by default, works on the examples I have tried, doc looks good. \n\nThere are still some rough edges with line/plot but nothing to do with this ticket.",
    "created_at": "2013-12-21T12:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125294",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:28'>**Comment 28:**</a>
Code looks good to me, does not import numpy by default, works on the examples I have tried, doc looks good. 

There are still some rough edges with line/plot but nothing to do with this ticket.



---

archive/issue_events_133710.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-12-21T12:07:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133710"
}
```



---

archive/issue_events_133711.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-12-21T12:07:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133711"
}
```



---

archive/issue_comments_125295.json:
```json
{
    "body": "**Branch:** [u/lftabera/ticket/11787_numpyarray](https://github.com/sagemath/sagetrac-mirror/tree/u/lftabera/ticket/11787_numpyarray)",
    "created_at": "2013-12-21T12:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125295",
    "user": "https://github.com/lftabera"
}
```

**Branch:** [u/lftabera/ticket/11787_numpyarray](https://github.com/sagemath/sagetrac-mirror/tree/u/lftabera/ticket/11787_numpyarray)



---

archive/issue_events_133712.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2013-12-21T12:07:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133712"
}
```



---

archive/issue_events_133713.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2013-12-21T12:07:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133713"
}
```



---

archive/issue_comments_125296.json:
```json
{
    "body": "**Commit:** [8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8](https://github.com/sagemath/sagetrac-mirror/commit/8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8)",
    "created_at": "2013-12-21T12:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125296",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8](https://github.com/sagemath/sagetrac-mirror/commit/8c1320a8b7f8034423c7b0cb6fcb97d12bb900b8)



---

archive/issue_comments_125297.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c1320a\">8c1320a</a></td><td><code>Fixing Whitespace errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/603ea72\">603ea72</a></td><td><code>allow numpy arrays in list_plot, line, points</code></td></tr></table>\n",
    "created_at": "2013-12-21T12:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125297",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>**Comment 29:**</a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c1320a">8c1320a</a></td><td><code>Fixing Whitespace errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/603ea72">603ea72</a></td><td><code>allow numpy arrays in list_plot, line, points</code></td></tr></table>




---

archive/issue_events_133714.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-12-21T12:09:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133714"
}
```



---

archive/issue_events_133715.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2013-12-21T12:09:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133715"
}
```



---

archive/issue_comments_125298.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nReplying to [@lftabera](#comment%3A28):\n> Code looks good to me, does not import numpy by default, works on the examples I have tried, doc looks good. \n\nThanks for the review and for converting it to a git commit!\n\n> There are still some rough edges with line/plot but nothing to do with this ticket.\n\nCan you open a ticket with the bad examples that you have?",
    "created_at": "2013-12-21T13:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125298",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:31'>**Comment 31:**</a>
Replying to [@lftabera](#comment%3A28):
> Code looks good to me, does not import numpy by default, works on the examples I have tried, doc looks good. 

Thanks for the review and for converting it to a git commit!

> There are still some rough edges with line/plot but nothing to do with this ticket.

Can you open a ticket with the bad examples that you have?



---

archive/issue_events_133716.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-21T18:43:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133716"
}
```



---

archive/issue_events_133717.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "32a75d62718486b94f3e87beb63e0cfbd14aa4cf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-21T18:43:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11787#event-133717"
}
```



---

archive/issue_comments_125299.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nSee #16378 for a problem this seems to have caused.",
    "created_at": "2014-05-28T00:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/11787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11787#issuecomment-125299",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:33'>**Comment 33:**</a>
See #16378 for a problem this seems to have caused.
