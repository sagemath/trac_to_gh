# Issue 11674: np.dot of two numeric matrices segfaults in the binary Ubuntu 10.04.1 x86_64 distribution

archive/issues_011502.json:
```json
{
    "body": "Multiplying two ordinary matrices using numpy segfaults `sage`. Using a standard Python install, this does not happen.\n\nSteps to reproduce:\n\n1. Run sage\n2. Run the following code:\n\n```python\nimport numpy as np\nms = np.load('matrices.npy')\nnp.dot(ms[0],ms[1])\n```\n\nObserve that Sage segfaults.\n\nThe actual segfault notification is: \n\n```\n/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]\n/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]\n/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]\n/PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]\n\n----\nUnhandled SIGSEGV: A segmentation fault occurred in Sage. This\nprobably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You\nmight want to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n```\n\nRunning this code outside of Sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.\n\nFor my work, this is debilitating; and I hope to publish a paper using these results soon.\n\n**CC:**  @vbraun\n\n**Keywords:** ATLAS segfault matrix numpy libpthread redhawk\n\n**Reviewer:** Leif Leonhardy\n\nIssue created by migration from https://trac.sagemath.org/ticket/11674\n\n",
    "closed_at": "2013-06-19T12:23:02Z",
    "created_at": "2011-08-10T03:41:18Z",
    "labels": [
        "component: distribution",
        "critical",
        "bug",
        "worksforme",
        "invalid"
    ],
    "title": "np.dot of two numeric matrices segfaults in the binary Ubuntu 10.04.1 x86_64 distribution",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/11674",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```
Multiplying two ordinary matrices using numpy segfaults `sage`. Using a standard Python install, this does not happen.

Steps to reproduce:

1. Run sage
2. Run the following code:

```python
import numpy as np
ms = np.load('matrices.npy')
np.dot(ms[0],ms[1])
```

Observe that Sage segfaults.

The actual segfault notification is: 

```
/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]
/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]
/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]
/PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]

----
Unhandled SIGSEGV: A segmentation fault occurred in Sage. This
probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You
might want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
```

Running this code outside of Sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.

For my work, this is debilitating; and I hope to publish a paper using these results soon.

**CC:**  @vbraun

**Keywords:** ATLAS segfault matrix numpy libpthread redhawk

**Reviewer:** Leif Leonhardy

Issue created by migration from https://trac.sagemath.org/ticket/11674





---

archive/issue_comments_122631.json:
```json
{
    "body": "<a id='comment:1'></a>\nI have been unable to upload the matrices.npy file due to attachment limitations (the file is 4.2MB). Please find the file on my webserver:\n\nhttp://matthewwardrop.info/matrices.npy \n\nThank you :).",
    "created_at": "2011-08-10T03:48:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122631",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:1'></a>
I have been unable to upload the matrices.npy file due to attachment limitations (the file is 4.2MB). Please find the file on my webserver:

http://matthewwardrop.info/matrices.npy 

Thank you :).



---

archive/issue_comments_122632.json:
```json
{
    "body": "<a id='comment:2'></a>\nThanks for your report. For the record, these are two 512x512 matrices.\n\nWorks for me with Sage 4.7.1.rc0, Ubuntu 10.04.3 x86_64; I'll try Sage 4.7 later.\n\nDid you compile Sage from source? If not, please do so, as we at least currently cannot guarantee what ATLAS produces works on all processors, i.e., we unfortunately had a couple of issues (segfaults) with ATLAS and large matrices in **binary** Sage distributions; these issues vanished when using a version of Sage built on the affected machines.\n\n\nP.S.: Please use the wiki markup (`{{{ ... }}}`) for Sage code and screen output examples.",
    "created_at": "2011-08-10T05:10:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122632",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:2'></a>
Thanks for your report. For the record, these are two 512x512 matrices.

Works for me with Sage 4.7.1.rc0, Ubuntu 10.04.3 x86_64; I'll try Sage 4.7 later.

Did you compile Sage from source? If not, please do so, as we at least currently cannot guarantee what ATLAS produces works on all processors, i.e., we unfortunately had a couple of issues (segfaults) with ATLAS and large matrices in **binary** Sage distributions; these issues vanished when using a version of Sage built on the affected machines.


P.S.: Please use the wiki markup (`{{{ ... }}}`) for Sage code and screen output examples.



---

archive/issue_comments_122633.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,20 +1,34 @@\n-Multiplying two ordinary matrices using numpy segfaults sage. Using a standard python install, this does not happen.\n+Multiplying two ordinary matrices using numpy segfaults `sage`. Using a standard Python install, this does not happen.\n \n Steps to reproduce:\n \n-1) Run sage 2) Run the following code:\n+1. Run sage\n+2. Run the following code:\n \n-import numpy as np ms = np.load('matrices.npy') np.dot(ms[0],ms[1])\n+```python\n+import numpy as np\n+ms = np.load('matrices.npy')\n+np.dot(ms[0],ms[1])\n+```\n \n Observe that Sage segfaults.\n \n The actual segfault notification is: \n \n-/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817] /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849] /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60] /PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]\n+```\n+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]\n+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]\n+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]\n+/PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]\n \n----\n-Unhandled SIGSEGV: A segmentation fault occurred in Sage. This probably occurred because a *compiled* component of Sage has a bug in it and is not properly wrapped with sig_on(), sig_off(). You might want to run Sage under gdb with 'sage -gdb' to debug this. Sage will now terminate.\n+----\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage. This\n+probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off(). You\n+might want to run Sage under gdb with 'sage -gdb' to debug this.\n+Sage will now terminate.\n+```\n \n-Running this code outside of sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.\n+Running this code outside of Sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.\n \n For my work, this is debilitating; and I hope to publish a paper using these results soon.\n``````\n",
    "created_at": "2011-08-10T05:10:13Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122633",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,20 +1,34 @@
-Multiplying two ordinary matrices using numpy segfaults sage. Using a standard python install, this does not happen.
+Multiplying two ordinary matrices using numpy segfaults `sage`. Using a standard Python install, this does not happen.
 
 Steps to reproduce:
 
-1) Run sage 2) Run the following code:
+1. Run sage
+2. Run the following code:
 
-import numpy as np ms = np.load('matrices.npy') np.dot(ms[0],ms[1])
+```python
+import numpy as np
+ms = np.load('matrices.npy')
+np.dot(ms[0],ms[1])
+```
 
 Observe that Sage segfaults.
 
 The actual segfault notification is: 
 
-/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817] /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849] /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60] /PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]
+```
+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]
+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]
+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]
+/PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]
 
----
-Unhandled SIGSEGV: A segmentation fault occurred in Sage. This probably occurred because a *compiled* component of Sage has a bug in it and is not properly wrapped with sig_on(), sig_off(). You might want to run Sage under gdb with 'sage -gdb' to debug this. Sage will now terminate.
+----
+Unhandled SIGSEGV: A segmentation fault occurred in Sage. This
+probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off(). You
+might want to run Sage under gdb with 'sage -gdb' to debug this.
+Sage will now terminate.
+```
 
-Running this code outside of sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.
+Running this code outside of Sage, in another python interpreter (with numpy 1.5.1) does not exhibit this fault.
 
 For my work, this is debilitating; and I hope to publish a paper using these results soon.
``````




---

archive/issue_comments_122634.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,7 +18,8 @@\n ```\n /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]\n /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]\n-/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]\n+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474]\n+/lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]\n /PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]\n \n ----\n``````\n",
    "created_at": "2011-08-10T05:11:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122634",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,7 +18,8 @@
 ```
 /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f39008bd817]
 /PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f39008bd849]
-/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]
+/PersonalStorage/Development/tools/sage/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f39008bd474]
+/lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60)[0x7f39068d2c60]
 /PersonalStorage/Development/tools/sage/local/lib/libatlas.so(+0x6b70d)[0x7f38fa76b70d]
 
 ----
``````




---

archive/issue_comments_122635.json:
```json
{
    "body": "<a id='comment:4'></a>\n\n```python\nsage: import numpy as np\nsage: ms = np.load(\"/home/leif/Sage/tmp/matrices.npy\")\nsage: time np.dot(ms[0],ms[1])\narray([[ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\nTime: CPU 0.03 s, Wall: 0.05 s\nsage: ms[0] ; ms[1]\narray([[ 0.,  0.,  0., ..., -0., -0., -0.],\n       [ 0.,  0.,  0., ..., -0., -0., -0.],\n       [ 0.,  0.,  0., ..., -0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\narray([[ 0.,  0.,  0., ..., -0., -0., -0.],\n       [ 0.,  0.,  0., ..., -0., -0., -0.],\n       [ 0.,  0., -2., ..., -0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ..., -2.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\n```",
    "created_at": "2011-08-10T05:16:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122635",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>

```python
sage: import numpy as np
sage: ms = np.load("/home/leif/Sage/tmp/matrices.npy")
sage: time np.dot(ms[0],ms[1])
array([[ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
Time: CPU 0.03 s, Wall: 0.05 s
sage: ms[0] ; ms[1]
array([[ 0.,  0.,  0., ..., -0., -0., -0.],
       [ 0.,  0.,  0., ..., -0., -0., -0.],
       [ 0.,  0.,  0., ..., -0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
array([[ 0.,  0.,  0., ..., -0., -0., -0.],
       [ 0.,  0.,  0., ..., -0., -0., -0.],
       [ 0.,  0., -2., ..., -0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ..., -2.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
```



---

archive/issue_comments_122636.json:
```json
{
    "body": "<a id='comment:5'></a>\nCould you also give some information about your system? E.g. the output of\n\n```sh\n$ uname -a\n$ cat /proc/cpuinfo\n```\nand perhaps the type of Sage installation and Linux distribution you are using.\n\n\nNote that the trac mail notification is currently not working due to a recent major system crash.",
    "created_at": "2011-08-10T05:26:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122636",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
Could you also give some information about your system? E.g. the output of

```sh
$ uname -a
$ cat /proc/cpuinfo
```
and perhaps the type of Sage installation and Linux distribution you are using.


Note that the trac mail notification is currently not working due to a recent major system crash.



---

archive/issue_comments_122637.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"ATLAS segfault matrix numpy\".",
    "created_at": "2011-08-10T05:30:18Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122637",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "" to "ATLAS segfault matrix numpy".



---

archive/issue_comments_122638.json:
```json
{
    "body": "<a id='comment:7'></a>\nFWIW, I do get exactly the same error *with the binary distribution* of Sage 4.7 (`sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux.tar.lzma`) on Ubuntu 10.04.3 x86_64 (Core2, Penryn):\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.7, Release Date: 2011-05-23                         |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: import numpy as np\nsage: ms = np.load(\"/home/leif/Sage/tmp/matrices.npy\")\nsage: time np.dot(ms[0],ms[1])\n/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(print_backtrace+0x31)[0x7f6e46a55817]\n/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(sigdie+0x14)[0x7f6e46a55849]\n/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f6e46a55474]\n/lib/libpthread.so.0(+0xf8f0)[0x7f6e4bbfb8f0]\n/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so(+0x6b70d)[0x7f6e408fe70d]\n\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\n/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/bin/sage-sage: line 300: 31265 Segmentation fault      sage-ipython \"$@\" -i\n```",
    "created_at": "2011-08-10T06:31:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122638",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>
FWIW, I do get exactly the same error *with the binary distribution* of Sage 4.7 (`sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux.tar.lzma`) on Ubuntu 10.04.3 x86_64 (Core2, Penryn):

```
----------------------------------------------------------------------
| Sage Version 4.7, Release Date: 2011-05-23                         |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: import numpy as np
sage: ms = np.load("/home/leif/Sage/tmp/matrices.npy")
sage: time np.dot(ms[0],ms[1])
/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(print_backtrace+0x31)[0x7f6e46a55817]
/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(sigdie+0x14)[0x7f6e46a55849]
/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f6e46a55474]
/lib/libpthread.so.0(+0xf8f0)[0x7f6e4bbfb8f0]
/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so(+0x6b70d)[0x7f6e408fe70d]

------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
/tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/bin/sage-sage: line 300: 31265 Segmentation fault      sage-ipython "$@" -i
```



---

archive/issue_comments_122639.json:
```json
{
    "body": "<a id='comment:8'></a>\nI **don't** get an error with Sage 4.7.rc2 (which is almost identical to the final version released) *built from source* on the same machine.\n\nNote that Sage will generally also run faster if it was built on the machine (more precisely, a machine with the same or similar type of processor) it is running on.",
    "created_at": "2011-08-10T07:09:27Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122639",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
I **don't** get an error with Sage 4.7.rc2 (which is almost identical to the final version released) *built from source* on the same machine.

Note that Sage will generally also run faster if it was built on the machine (more precisely, a machine with the same or similar type of processor) it is running on.



---

archive/issue_comments_122640.json:
```json
{
    "body": "<a id='comment:9'></a>\n@nexttime: Thank you for neatening the bug report. I did not know the wiki syntax to format it; though I admit I should have looked it up.\n\nTo be more precise, though it looks as if you are able to reproduce my issues already, and so it is not required:\n\n```\n$ uname -a\nLinux themadhatter-desktop 3.0.0-8-generic #10-Ubuntu SMP Fri Aug 5 23:54:15 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nI can reproduce this in a fresh install of sage-4.7 from a binary installation; but also on an install of sage-4.6.2 . I have not tested on other installations.\n\nI suppose the remedy appears to be to compile it manually; and so I'll do that. You don't need me to say that this is suboptimal though ;).\n\nThank you for your quick responses :).",
    "created_at": "2011-08-10T10:08:40Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122640",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:9'></a>
@nexttime: Thank you for neatening the bug report. I did not know the wiki syntax to format it; though I admit I should have looked it up.

To be more precise, though it looks as if you are able to reproduce my issues already, and so it is not required:

```
$ uname -a
Linux themadhatter-desktop 3.0.0-8-generic #10-Ubuntu SMP Fri Aug 5 23:54:15 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux
```

I can reproduce this in a fresh install of sage-4.7 from a binary installation; but also on an install of sage-4.6.2 . I have not tested on other installations.

I suppose the remedy appears to be to compile it manually; and so I'll do that. You don't need me to say that this is suboptimal though ;).

Thank you for your quick responses :).



---

archive/issue_comments_122641.json:
```json
{
    "body": "<a id='comment:10'></a>\nOh... and just in case you still wanted it:\n\n```\n$ cat /proc/cpuinfo\nprocessor\t: 0\nvendor_id\t: AuthenticAMD\ncpu family\t: 15\nmodel\t\t: 107\nmodel name\t: AMD Athlon(tm) Neo X2 Dual Core Processor 6850e\nstepping\t: 2\ncpu MHz\t\t: 1800.000\ncache size\t: 512 KB\nphysical id\t: 0\nsiblings\t: 2\ncore id\t\t: 0\ncpu cores\t: 2\napicid\t\t: 0\ninitial apicid\t: 0\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 1\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow rep_good nopl extd_apicid pni cx16 lahf_lm cmp_legacy svm extapic cr8_legacy 3dnowprefetch lbrv\nbogomips\t: 3600.10\nTLB size\t: 1024 4K pages\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 40 bits physical, 48 bits virtual\npower management: ts fid vid ttp tm stc 100mhzsteps\n\nprocessor\t: 1\nvendor_id\t: AuthenticAMD\ncpu family\t: 15\nmodel\t\t: 107\nmodel name\t: AMD Athlon(tm) Neo X2 Dual Core Processor 6850e\nstepping\t: 2\ncpu MHz\t\t: 1800.000\ncache size\t: 512 KB\nphysical id\t: 0\nsiblings\t: 2\ncore id\t\t: 1\ncpu cores\t: 2\napicid\t\t: 1\ninitial apicid\t: 1\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 1\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow rep_good nopl extd_apicid pni cx16 lahf_lm cmp_legacy svm extapic cr8_legacy 3dnowprefetch lbrv\nbogomips\t: 3600.10\nTLB size\t: 1024 4K pages\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 40 bits physical, 48 bits virtual\npower management: ts fid vid ttp tm stc 100mhzsteps\n```\n\nNote that this also happens on another of my machines:\n\n```\n$ cat /proc/cpuinfo\nprocessor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 0\ncpu cores\t: 4\napicid\t\t: 0\ninitial apicid\t: 0\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5852.81\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 1\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 0\ncpu cores\t: 4\napicid\t\t: 1\ninitial apicid\t: 1\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 2\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 1\ncpu cores\t: 4\napicid\t\t: 2\ninitial apicid\t: 2\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 3\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 1\ncpu cores\t: 4\napicid\t\t: 3\ninitial apicid\t: 3\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 4\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 2\ncpu cores\t: 4\napicid\t\t: 4\ninitial apicid\t: 4\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 5\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 2\ncpu cores\t: 4\napicid\t\t: 5\ninitial apicid\t: 5\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 6\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 3\ncpu cores\t: 4\napicid\t\t: 6\ninitial apicid\t: 6\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.89\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 7\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\ncpu MHz\t\t: 1197.000\ncache size\t: 8192 KB\nphysical id\t: 0\nsiblings\t: 8\ncore id\t\t: 3\ncpu cores\t: 4\napicid\t\t: 7\ninitial apicid\t: 7\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.88\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n```\n\nI think they differ enough to consider this a non-architecture related bug... But I'm no expert on these things.",
    "created_at": "2011-08-10T10:27:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122641",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:10'></a>
Oh... and just in case you still wanted it:

```
$ cat /proc/cpuinfo
processor	: 0
vendor_id	: AuthenticAMD
cpu family	: 15
model		: 107
model name	: AMD Athlon(tm) Neo X2 Dual Core Processor 6850e
stepping	: 2
cpu MHz		: 1800.000
cache size	: 512 KB
physical id	: 0
siblings	: 2
core id		: 0
cpu cores	: 2
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 1
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow rep_good nopl extd_apicid pni cx16 lahf_lm cmp_legacy svm extapic cr8_legacy 3dnowprefetch lbrv
bogomips	: 3600.10
TLB size	: 1024 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 40 bits physical, 48 bits virtual
power management: ts fid vid ttp tm stc 100mhzsteps

processor	: 1
vendor_id	: AuthenticAMD
cpu family	: 15
model		: 107
model name	: AMD Athlon(tm) Neo X2 Dual Core Processor 6850e
stepping	: 2
cpu MHz		: 1800.000
cache size	: 512 KB
physical id	: 0
siblings	: 2
core id		: 1
cpu cores	: 2
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 1
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt rdtscp lm 3dnowext 3dnow rep_good nopl extd_apicid pni cx16 lahf_lm cmp_legacy svm extapic cr8_legacy 3dnowprefetch lbrv
bogomips	: 3600.10
TLB size	: 1024 4K pages
clflush size	: 64
cache_alignment	: 64
address sizes	: 40 bits physical, 48 bits virtual
power management: ts fid vid ttp tm stc 100mhzsteps
```

Note that this also happens on another of my machines:

```
$ cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 0
cpu cores	: 4
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5852.81
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 0
cpu cores	: 4
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 2
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 1
cpu cores	: 4
apicid		: 2
initial apicid	: 2
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 3
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 1
cpu cores	: 4
apicid		: 3
initial apicid	: 3
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 4
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 2
cpu cores	: 4
apicid		: 4
initial apicid	: 4
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 5
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 2
cpu cores	: 4
apicid		: 5
initial apicid	: 5
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 6
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 3
cpu cores	: 4
apicid		: 6
initial apicid	: 6
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.89
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 7
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz
stepping	: 5
cpu MHz		: 1197.000
cache size	: 8192 KB
physical id	: 0
siblings	: 8
core id		: 3
cpu cores	: 4
apicid		: 7
initial apicid	: 7
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida dts tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.88
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:
```

I think they differ enough to consider this a non-architecture related bug... But I'm no expert on these things.



---

archive/issue_comments_122642.json:
```json
{
    "body": "**Changing assignee** from @jasongrout, jkantor to mister.wardrop.",
    "created_at": "2011-08-10T10:27:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122642",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

**Changing assignee** from @jasongrout, jkantor to mister.wardrop.



---

archive/issue_comments_122643.json:
```json
{
    "body": "**Changing assignee** from mister.wardrop to @jasongrout, jkantor.",
    "created_at": "2011-08-10T10:28:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122643",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

**Changing assignee** from mister.wardrop to @jasongrout, jkantor.



---

archive/issue_comments_122644.json:
```json
{
    "body": "<a id='comment:11'></a>\nI don't know why it suddenly claimed me as owner. Sorry ><.",
    "created_at": "2011-08-10T10:28:34Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122644",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:11'></a>
I don't know why it suddenly claimed me as owner. Sorry ><.



---

archive/issue_comments_122645.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks for your data points; I think this is the first case it was reported for an AMD CPU, too.\n\nWith your machines, building Sage from source shouldn't take long, but I noticed you have a Linux 3.0 kernel installed, which might cause problems with Python (not the kernel, just the number[!], cf. #11619).\n\nSo if you have a chance, I would build it on a machine with a similar processor but a 2.x kernel (and preferably the same Linux distribution), and then move / tar-untar the installation (or \"bdist\" it in case you're familiar with that).",
    "created_at": "2011-08-10T10:51:36Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122645",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>
Thanks for your data points; I think this is the first case it was reported for an AMD CPU, too.

With your machines, building Sage from source shouldn't take long, but I noticed you have a Linux 3.0 kernel installed, which might cause problems with Python (not the kernel, just the number[!], cf. #11619).

So if you have a chance, I would build it on a machine with a similar processor but a 2.x kernel (and preferably the same Linux distribution), and then move / tar-untar the installation (or "bdist" it in case you're familiar with that).



---

archive/issue_comments_122646.json:
```json
{
    "body": "<a id='comment:13'></a>\nOr, even better, if you still have older (2.x) kernels installed, reboot your machine with one of these; the boot menu (e.g. `grub`) should show them.",
    "created_at": "2011-08-10T10:55:35Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122646",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>
Or, even better, if you still have older (2.x) kernels installed, reboot your machine with one of these; the boot menu (e.g. `grub`) should show them.



---

archive/issue_comments_122647.json:
```json
{
    "body": "<a id='comment:14'></a>\nHmmm... Thanks for the heads up re:Linux 3.0 . I was not at all aware of the fact that python (and potentially its libraries) checked against something which would cause breakage when the major version number was incremented.\n\nThe build has been running for a while; and so I'll let it go. If any of the functionality I need is broken; I'll do as you suggest. I will also report back as to whether it solved the problem on my machines, as I anticipate it will.\n\nThanks again. [My experience is such that I am quite able to deal with breakage :). Whilst I have heard of bdist, I have not used it. I shall look into it :).]",
    "created_at": "2011-08-10T11:12:51Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122647",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:14'></a>
Hmmm... Thanks for the heads up re:Linux 3.0 . I was not at all aware of the fact that python (and potentially its libraries) checked against something which would cause breakage when the major version number was incremented.

The build has been running for a while; and so I'll let it go. If any of the functionality I need is broken; I'll do as you suggest. I will also report back as to whether it solved the problem on my machines, as I anticipate it will.

Thanks again. [My experience is such that I am quite able to deal with breakage :). Whilst I have heard of bdist, I have not used it. I shall look into it :).]



---

archive/issue_comments_122648.json:
```json
{
    "body": "<a id='comment:15'></a>\nOkay. I cannot get ATLAS to build as part of sage 4.7 compilation on either the iMac (second to latest generation) or MacBook 5,1 (2008) with processors of Intel Core i7 Quad-Core (with hyperthreading) and Intel Core 2 Duo P8600 respectively. Interestingly, on the AMD processor, it compiled quickly, and only later had a fault compiling singular. On the Intel machines, I was using a 2.6.38 Linux kernel; but the same result was found while running on a 3.0 kernel.\n\nI cannot really afford to dedicate too much more time to attempting to get sage working; without sure chance of success.\n\nI think this ATLAS compilation bug has something to do with https://github.com/sagemath/sage/issues/9385 .\n\nIf need be, I am happy to provide ssh access to one of my machines so that you can poke through what's going on.",
    "created_at": "2011-08-11T04:36:58Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122648",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:15'></a>
Okay. I cannot get ATLAS to build as part of sage 4.7 compilation on either the iMac (second to latest generation) or MacBook 5,1 (2008) with processors of Intel Core i7 Quad-Core (with hyperthreading) and Intel Core 2 Duo P8600 respectively. Interestingly, on the AMD processor, it compiled quickly, and only later had a fault compiling singular. On the Intel machines, I was using a 2.6.38 Linux kernel; but the same result was found while running on a 3.0 kernel.

I cannot really afford to dedicate too much more time to attempting to get sage working; without sure chance of success.

I think this ATLAS compilation bug has something to do with https://github.com/sagemath/sage/issues/9385 .

If need be, I am happy to provide ssh access to one of my machines so that you can poke through what's going on.



---

archive/issue_comments_122649.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mister.wardrop](#comment%3A15):\n> Okay. I cannot get ATLAS to build as part of sage 4.7 compilation on either the iMac (second to latest generation) or MacBook 5,1 (2008) with processors of Intel Core i7 Quad-Core (with hyperthreading) and Intel Core 2 Duo P8600 respectively. Interestingly, on the AMD processor, it compiled quickly, and only later had a fault compiling singular. On the Intel machines, I was using a 2.6.38 Linux kernel; but the same result was found while running on a 3.0 kernel.\n> \n> I cannot really afford to dedicate too much more time to attempting to get sage working; without sure chance of success.\n> \n> I think this ATLAS compilation bug has something to do with https://github.com/sagemath/sage/issues/9385 .\n\nYou might have to disable CPU throttling, i.e. \"power save mode\". Also, ATLAS 3.8.3 doesn't know good parameters for more recent processors (like those of the Core i7 family), such that it tries more things on these, making the build take much longer.\n\nI'd also strongly suggest to use the new ATLAS spkg from #10226 (which provides ATLAS 3.8.**4** and also much better build options, please see the ticket for details).\n\nUnfortunately this spkg won't even get into Sage 4.7.1 (to be released Monday I think, as we just released rc2).\n\nTo use that spkg, simply copy it into `$SAGE_ROOT/spkg/standard/`; Sage will automatically pick up the most recent one.\n\n> If need be, I am happy to provide ssh access to one of my machines so that you can poke through what's going on.\n\nMight be an option, but it's perhaps easier if you first try the above, since disabling the power save mode AFAIK requires root privileges (at least on some systems)... ;-)",
    "created_at": "2011-08-11T14:00:24Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122649",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'></a>
Replying to [mister.wardrop](#comment%3A15):
> Okay. I cannot get ATLAS to build as part of sage 4.7 compilation on either the iMac (second to latest generation) or MacBook 5,1 (2008) with processors of Intel Core i7 Quad-Core (with hyperthreading) and Intel Core 2 Duo P8600 respectively. Interestingly, on the AMD processor, it compiled quickly, and only later had a fault compiling singular. On the Intel machines, I was using a 2.6.38 Linux kernel; but the same result was found while running on a 3.0 kernel.
> 
> I cannot really afford to dedicate too much more time to attempting to get sage working; without sure chance of success.
> 
> I think this ATLAS compilation bug has something to do with https://github.com/sagemath/sage/issues/9385 .

You might have to disable CPU throttling, i.e. "power save mode". Also, ATLAS 3.8.3 doesn't know good parameters for more recent processors (like those of the Core i7 family), such that it tries more things on these, making the build take much longer.

I'd also strongly suggest to use the new ATLAS spkg from #10226 (which provides ATLAS 3.8.**4** and also much better build options, please see the ticket for details).

Unfortunately this spkg won't even get into Sage 4.7.1 (to be released Monday I think, as we just released rc2).

To use that spkg, simply copy it into `$SAGE_ROOT/spkg/standard/`; Sage will automatically pick up the most recent one.

> If need be, I am happy to provide ssh access to one of my machines so that you can poke through what's going on.

Might be an option, but it's perhaps easier if you first try the above, since disabling the power save mode AFAIK requires root privileges (at least on some systems)... ;-)



---

archive/issue_comments_122650.json:
```json
{
    "body": "<a id='comment:17'></a>\nP.S.: I guess you'll already know, but you can build Sage in parallel by doing:\n\n```sh\nexport SAGE_PARALLEL_SPKG_BUILD=yes\nexport MAKE=\"make -j4\" # build with 4 jobs (threads)\nmake\n```\nDepending on your machine (number of cores and amount of RAM), you can also use larger numbers, i.e. more jobs.\n\nOn my Core2 quad, building Sage (from scratch) that way takes about 27 + 18 minutes (code + documentation; the latter unfortunately doesn't make use of more than one core, which is subject to change soon).\n\n\n\n\nTo watch ATLAS's progress, you can open another terminal window and do\n\n```sh\ntail -f $SAGE_ROOT/install.log | grep STAGE\n```\nafter starting `make`. (Actually you can also start it earlier; `tail -f` won't terminate by itself, i.e., you'll have to terminate it by pressing Control-C anyway.)",
    "created_at": "2011-08-11T14:21:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122650",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
P.S.: I guess you'll already know, but you can build Sage in parallel by doing:

```sh
export SAGE_PARALLEL_SPKG_BUILD=yes
export MAKE="make -j4" # build with 4 jobs (threads)
make
```
Depending on your machine (number of cores and amount of RAM), you can also use larger numbers, i.e. more jobs.

On my Core2 quad, building Sage (from scratch) that way takes about 27 + 18 minutes (code + documentation; the latter unfortunately doesn't make use of more than one core, which is subject to change soon).




To watch ATLAS's progress, you can open another terminal window and do

```sh
tail -f $SAGE_ROOT/install.log | grep STAGE
```
after starting `make`. (Actually you can also start it earlier; `tail -f` won't terminate by itself, i.e., you'll have to terminate it by pressing Control-C anyway.)



---

archive/issue_comments_122651.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [leif](#comment%3A17):\n> To watch ATLAS's progress, you can open another terminal window and do\n\n\n```sh\ntail -f $SAGE_ROOT/install.log | grep STAGE\n```\n\nThe output will (or should) be something like this:\n\n```\nIN STAGE 1 INSTALL:  SYSTEM PROBE/AUX COMPILE\nIN STAGE 2 INSTALL:  TYPE-DEPENDENT TUNING\nSTAGE 2-1: TUNING PREC='d' (precision 1 of 4)\n   STAGE 2-1-1 : BUILDING BLOCK MATMUL TUNE\n   STAGE 2-1-2: CacheEdge DETECTION\n   STAGE 2-1-3: LARGE/SMALL CASE CROSSOVER DETECTION\n   STAGE 2-1-3: COPY/NO-COPY CROSSOVER DETECTION\n   STAGE 2-1-4: LEVEL 3 BLAS TUNE\n   STAGE 2-1-5: GEMV TUNE\n   STAGE 2-1-6: GER TUNE\nSTAGE 2-2: TUNING PREC='s' (precision 2 of 4)\n   STAGE 2-2-1 : BUILDING BLOCK MATMUL TUNE\n   STAGE 2-2-2: CacheEdge DETECTION\n   STAGE 2-2-3: LARGE/SMALL CASE CROSSOVER DETECTION\n   STAGE 2-2-3: COPY/NO-COPY CROSSOVER DETECTION\n   STAGE 2-2-4: LEVEL 3 BLAS TUNE\n   STAGE 2-2-5: GEMV TUNE\n   STAGE 2-2-6: GER TUNE\nSTAGE 2-3: TUNING PREC='z' (precision 3 of 4)\n   STAGE 2-3-1 : BUILDING BLOCK MATMUL TUNE\n   STAGE 2-3-2: CacheEdge DETECTION\n   STAGE 2-3-3: LARGE/SMALL CASE CROSSOVER DETECTION\n   STAGE 2-3-3: COPY/NO-COPY CROSSOVER DETECTION\n   STAGE 2-3-4: LEVEL 3 BLAS TUNE\n   STAGE 2-3-5: GEMV TUNE\n   STAGE 2-3-6: GER TUNE\nSTAGE 2-4: TUNING PREC='c' (precision 4 of 4)\n   STAGE 2-4-1 : BUILDING BLOCK MATMUL TUNE\n   STAGE 2-4-2: CacheEdge DETECTION\n   STAGE 2-4-3: LARGE/SMALL CASE CROSSOVER DETECTION\n   STAGE 2-4-3: COPY/NO-COPY CROSSOVER DETECTION\n   STAGE 2-4-4: LEVEL 3 BLAS Tmake[4]: Entering directory ...\n   STAGE 2-4-5: GEMV TUNE\n   STAGE 2-4-6: GER TUNE\nSTAGE 3: GENERAL LIBRARY BUILD\nSTAGE 4: POST-BUILD TUNING\n```",
    "created_at": "2011-08-11T14:26:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122651",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>
Replying to [leif](#comment%3A17):
> To watch ATLAS's progress, you can open another terminal window and do


```sh
tail -f $SAGE_ROOT/install.log | grep STAGE
```

The output will (or should) be something like this:

```
IN STAGE 1 INSTALL:  SYSTEM PROBE/AUX COMPILE
IN STAGE 2 INSTALL:  TYPE-DEPENDENT TUNING
STAGE 2-1: TUNING PREC='d' (precision 1 of 4)
   STAGE 2-1-1 : BUILDING BLOCK MATMUL TUNE
   STAGE 2-1-2: CacheEdge DETECTION
   STAGE 2-1-3: LARGE/SMALL CASE CROSSOVER DETECTION
   STAGE 2-1-3: COPY/NO-COPY CROSSOVER DETECTION
   STAGE 2-1-4: LEVEL 3 BLAS TUNE
   STAGE 2-1-5: GEMV TUNE
   STAGE 2-1-6: GER TUNE
STAGE 2-2: TUNING PREC='s' (precision 2 of 4)
   STAGE 2-2-1 : BUILDING BLOCK MATMUL TUNE
   STAGE 2-2-2: CacheEdge DETECTION
   STAGE 2-2-3: LARGE/SMALL CASE CROSSOVER DETECTION
   STAGE 2-2-3: COPY/NO-COPY CROSSOVER DETECTION
   STAGE 2-2-4: LEVEL 3 BLAS TUNE
   STAGE 2-2-5: GEMV TUNE
   STAGE 2-2-6: GER TUNE
STAGE 2-3: TUNING PREC='z' (precision 3 of 4)
   STAGE 2-3-1 : BUILDING BLOCK MATMUL TUNE
   STAGE 2-3-2: CacheEdge DETECTION
   STAGE 2-3-3: LARGE/SMALL CASE CROSSOVER DETECTION
   STAGE 2-3-3: COPY/NO-COPY CROSSOVER DETECTION
   STAGE 2-3-4: LEVEL 3 BLAS TUNE
   STAGE 2-3-5: GEMV TUNE
   STAGE 2-3-6: GER TUNE
STAGE 2-4: TUNING PREC='c' (precision 4 of 4)
   STAGE 2-4-1 : BUILDING BLOCK MATMUL TUNE
   STAGE 2-4-2: CacheEdge DETECTION
   STAGE 2-4-3: LARGE/SMALL CASE CROSSOVER DETECTION
   STAGE 2-4-3: COPY/NO-COPY CROSSOVER DETECTION
   STAGE 2-4-4: LEVEL 3 BLAS Tmake[4]: Entering directory ...
   STAGE 2-4-5: GEMV TUNE
   STAGE 2-4-6: GER TUNE
STAGE 3: GENERAL LIBRARY BUILD
STAGE 4: POST-BUILD TUNING
```



---

archive/issue_comments_122652.json:
```json
{
    "body": "<a id='comment:19'></a>\nFWIW, I don't get the segfault when running the example with Valgrind (3.6.1; 3.5.0 raises a `SIGILL` because it doesn't know some instructions) and the binary distribution of Sage 4.7 (built on / for Ubuntu 10.04.1 x86_64), apparently because Valgrind replaces `malloc()` and `free()` etc.:\n\n```\n... lots of messages ...\nsage: import numpy as np\nsage: ms = np.load(\"/home/leif/Sage/tmp/matrices.npy\")\nsage: time np.dot(ms[0],ms[1])\n==25274== Invalid read of size 4\n==25274==    at 0x4EB960E: PyObject_Realloc (obmalloc.c:1154)\n==25274==    by 0x4EE1572: _PyUnicode_New (unicodeobject.c:262)\n==25274==    by 0x4EE1ED8: PyUnicodeUCS4_FromUnicode (unicodeobject.c:461)\n==25274==    by 0x4F1809E: PyEval_EvalFrameEx (ceval.c:4081)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)\n==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)\n==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)\n==25274==  Address 0x174f8020 is not stack'd, malloc'd or (recently) free'd\n==25274== \narray([[ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n==25274== Invalid read of size 4\n==25274==    at 0x4EB9043: PyObject_Free (obmalloc.c:931)\n==25274==    by 0x4F15CA4: PyEval_EvalFrameEx (ceval.c:1632)\n==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4E9F7CA: function_call (funcobject.c:524)\n==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)\n==25274==    by 0x4F15EC2: PyEval_EvalFrameEx (ceval.c:4019)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4E9F6CE: function_call (funcobject.c:524)\n==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)\n==25274==    by 0x4E8455E: instancemethod_call (classobject.c:2579)\n==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)\n==25274==  Address 0x363cc020 is 12,256 bytes inside a block of size 12,832 free'd\n==25274==    at 0x4C262A1: free (vg_replace_malloc.c:366)\n==25274==    by 0x11FFDEA8: ATL_dmmJIK (in /tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so)\n==25274==    by 0x11FF5365: ATL_dgemm (in /tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so)\n==25274==    by 0x32173B57: dotblas_matrixproduct (_dotblas.c:766)\n==25274==    by 0x4F17591: PyEval_EvalFrameEx (ceval.c:3706)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F19341: PyEval_EvalCode (ceval.c:522)\n==25274==    by 0x4F18618: PyEval_EvalFrameEx (ceval.c:4401)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)\n==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)\n==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)\n==25274== \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\nTime: CPU 3.18 s, Wall: 5.07 s\nsage: \n```\n\nI now really wonder whether the segfault would occur on redhawk (the machine the binary distribution was built on) itself, and what GCC version it uses...",
    "created_at": "2011-08-11T22:27:44Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122652",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>
FWIW, I don't get the segfault when running the example with Valgrind (3.6.1; 3.5.0 raises a `SIGILL` because it doesn't know some instructions) and the binary distribution of Sage 4.7 (built on / for Ubuntu 10.04.1 x86_64), apparently because Valgrind replaces `malloc()` and `free()` etc.:

```
... lots of messages ...
sage: import numpy as np
sage: ms = np.load("/home/leif/Sage/tmp/matrices.npy")
sage: time np.dot(ms[0],ms[1])
==25274== Invalid read of size 4
==25274==    at 0x4EB960E: PyObject_Realloc (obmalloc.c:1154)
==25274==    by 0x4EE1572: _PyUnicode_New (unicodeobject.c:262)
==25274==    by 0x4EE1ED8: PyUnicodeUCS4_FromUnicode (unicodeobject.c:461)
==25274==    by 0x4F1809E: PyEval_EvalFrameEx (ceval.c:4081)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)
==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)
==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)
==25274==  Address 0x174f8020 is not stack'd, malloc'd or (recently) free'd
==25274== 
array([[ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
==25274== Invalid read of size 4
==25274==    at 0x4EB9043: PyObject_Free (obmalloc.c:931)
==25274==    by 0x4F15CA4: PyEval_EvalFrameEx (ceval.c:1632)
==25274==    by 0x4F17E87: PyEval_EvalFrameEx (ceval.c:3792)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4E9F7CA: function_call (funcobject.c:524)
==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)
==25274==    by 0x4F15EC2: PyEval_EvalFrameEx (ceval.c:4019)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4E9F6CE: function_call (funcobject.c:524)
==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)
==25274==    by 0x4E8455E: instancemethod_call (classobject.c:2579)
==25274==    by 0x4E73162: PyObject_Call (abstract.c:2492)
==25274==  Address 0x363cc020 is 12,256 bytes inside a block of size 12,832 free'd
==25274==    at 0x4C262A1: free (vg_replace_malloc.c:366)
==25274==    by 0x11FFDEA8: ATL_dmmJIK (in /tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so)
==25274==    by 0x11FF5365: ATL_dgemm (in /tmp/sage-4.7-linux-64bit-ubuntu_10.04.1_lts-x86_64-Linux/local/lib/libatlas.so)
==25274==    by 0x32173B57: dotblas_matrixproduct (_dotblas.c:766)
==25274==    by 0x4F17591: PyEval_EvalFrameEx (ceval.c:3706)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F19341: PyEval_EvalCode (ceval.c:522)
==25274==    by 0x4F18618: PyEval_EvalFrameEx (ceval.c:4401)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)
==25274==    by 0x4F1926C: PyEval_EvalCodeEx (ceval.c:2968)
==25274==    by 0x4F1760C: PyEval_EvalFrameEx (ceval.c:3802)
==25274== 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
Time: CPU 3.18 s, Wall: 5.07 s
sage: 
```

I now really wonder whether the segfault would occur on redhawk (the machine the binary distribution was built on) itself, and what GCC version it uses...



---

archive/issue_comments_122653.json:
```json
{
    "body": "<a id='comment:20'></a>\n\n```\n!sh\nvbraun@redhawk:~/Sage/sage-4.7.1.rc2$ gcc --version\ngcc (Ubuntu 4.4.3-4ubuntu5) 4.4.3\nCopyright (C) 2009 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\nand \n\n```\n\nsage: sage: ms = np.load(\"matrices.npy\")\nsage: sage: time np.dot(ms[0],ms[1])\narray([[ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\nTime: CPU 0.12 s, Wall: 0.02 s\nsage: \n```\nworks",
    "created_at": "2011-08-11T22:39:08Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122653",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>

```
!sh
vbraun@redhawk:~/Sage/sage-4.7.1.rc2$ gcc --version
gcc (Ubuntu 4.4.3-4ubuntu5) 4.4.3
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```
and 

```

sage: sage: ms = np.load("matrices.npy")
sage: sage: time np.dot(ms[0],ms[1])
array([[ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
Time: CPU 0.12 s, Wall: 0.02 s
sage: 
```
works



---

archive/issue_comments_122654.json:
```json
{
    "body": "<a id='comment:21'></a>\nIt's clearly the shared ATLAS library of the binary distribution; if I replace it with a \"native\" one (built on my machine, with Sage 4.7.1.rc2, i.e. from the ATLAS 3.8.3.p16 spkg; GCC 4.5.1), the segfault also doesn't occur.",
    "created_at": "2011-08-11T22:45:33Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122654",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:21'></a>
It's clearly the shared ATLAS library of the binary distribution; if I replace it with a "native" one (built on my machine, with Sage 4.7.1.rc2, i.e. from the ATLAS 3.8.3.p16 spkg; GCC 4.5.1), the segfault also doesn't occur.



---

archive/issue_comments_122655.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [vbraun](#comment%3A20):\n> and \n\n\n```\nsage: sage: ms = np.load(\"matrices.npy\")\nsage: sage: time np.dot(ms[0],ms[1])\narray([[ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       [ 0.,  0.,  0., ...,  0., -0., -0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\nTime: CPU 0.12 s, Wall: 0.02 s\nsage: \n```\n> works.\n\nHmmm. Did you use the binary dist of 4.7 for that? (Doesn't look like.)",
    "created_at": "2011-08-11T22:48:41Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122655",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
Replying to [vbraun](#comment%3A20):
> and 


```
sage: sage: ms = np.load("matrices.npy")
sage: sage: time np.dot(ms[0],ms[1])
array([[ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       [ 0.,  0.,  0., ...,  0., -0., -0.],
       ..., 
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.],
       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])
Time: CPU 0.12 s, Wall: 0.02 s
sage: 
```
> works.

Hmmm. Did you use the binary dist of 4.7 for that? (Doesn't look like.)



---

archive/issue_comments_122656.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [leif](#comment%3A21):\n> It's clearly the shared ATLAS library of the binary distribution; if I replace it with a \"native\" one (built on my machine, with Sage 4.7.1.rc2, i.e. from the ATLAS 3.8.3.p16 spkg; GCC 4.5.1), the segfault also doesn't occur.\n\nNote that I was referring to the *old, official 4.7* binary distribution; just saw [the new one](http://boxen.math.washington.edu/home/vbraun/Sage/sage-4.7.1.rc2/dist/sage-4.7.1.rc2-fat-x86_64-Linux.tar.gz) (4.7.1.rc2, with the new ATLAS 3.8.4 spkg) Volker built, cf. [this post on sage-devel](http://groups.google.com/group/sage-devel/msg/327a64b22a33ad58). (Note that the new one is compressed with GNU `zip`, and hence fairly large, 613 MB -- just downloading it... :) )",
    "created_at": "2011-08-11T23:07:37Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122656",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:23'></a>
Replying to [leif](#comment%3A21):
> It's clearly the shared ATLAS library of the binary distribution; if I replace it with a "native" one (built on my machine, with Sage 4.7.1.rc2, i.e. from the ATLAS 3.8.3.p16 spkg; GCC 4.5.1), the segfault also doesn't occur.

Note that I was referring to the *old, official 4.7* binary distribution; just saw [the new one](http://boxen.math.washington.edu/home/vbraun/Sage/sage-4.7.1.rc2/dist/sage-4.7.1.rc2-fat-x86_64-Linux.tar.gz) (4.7.1.rc2, with the new ATLAS 3.8.4 spkg) Volker built, cf. [this post on sage-devel](http://groups.google.com/group/sage-devel/msg/327a64b22a33ad58). (Note that the new one is compressed with GNU `zip`, and hence fairly large, 613 MB -- just downloading it... :) )



---

archive/issue_comments_122657.json:
```json
{
    "body": "<a id='comment:24'></a>\nUnfortunately I do get exactly the same with the new binary distribution (with ATLAS 3.8.4, built on redhawk):\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.7.1.rc2, Release Date: 2011-08-10                   |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: import numpy as np\nsage: ms = np.load(\"/home/leif/Sage/tmp/matrices.npy\")\nsage: time np.dot(ms[0],ms[1])\n/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(print_backtrace+0x31)[0x7f42264ad817]\n/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(sigdie+0x14)[0x7f42264ad849]\n/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f42264ad474]\n/lib/libpthread.so.0(+0xf8f0)[0x7f422b6538f0]\n/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so(+0x66bcd)[0x7f42209e2bcd]\n\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\n/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/bin/sage-sage: line 301: 26031 Segmentation fault      sage-ipython \"$@\" -i\n```\n(Ubuntu 10.04.3 x86_64, Core2 / Penryn)\n\n```\nprocessor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 23\nmodel name\t: Intel(R) Core(TM)2 Quad CPU    Q9650  @ 3.00GHz\nstepping\t: 10\ncpu MHz\t\t: 3003.000\ncache size\t: 6144 KB\nphysical id\t: 0\nsiblings\t: 4\ncore id\t\t: 0\ncpu cores\t: 4\napicid\t\t: 0\ninitial apicid\t: 0\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 13\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 xsave lahf_lm tpr_shadow vnmi flexpriority\nbogomips\t: 7200.05\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\n...\n```",
    "created_at": "2011-08-11T23:46:46Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122657",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>
Unfortunately I do get exactly the same with the new binary distribution (with ATLAS 3.8.4, built on redhawk):

```
----------------------------------------------------------------------
| Sage Version 4.7.1.rc2, Release Date: 2011-08-10                   |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: import numpy as np
sage: ms = np.load("/home/leif/Sage/tmp/matrices.npy")
sage: time np.dot(ms[0],ms[1])
/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(print_backtrace+0x31)[0x7f42264ad817]
/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(sigdie+0x14)[0x7f42264ad849]
/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libcsage.so(sage_signal_handler+0x20e)[0x7f42264ad474]
/lib/libpthread.so.0(+0xf8f0)[0x7f422b6538f0]
/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so(+0x66bcd)[0x7f42209e2bcd]

------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
/tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/bin/sage-sage: line 301: 26031 Segmentation fault      sage-ipython "$@" -i
```
(Ubuntu 10.04.3 x86_64, Core2 / Penryn)

```
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 23
model name	: Intel(R) Core(TM)2 Quad CPU    Q9650  @ 3.00GHz
stepping	: 10
cpu MHz		: 3003.000
cache size	: 6144 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 4
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts rep_good aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 xsave lahf_lm tpr_shadow vnmi flexpriority
bogomips	: 7200.05
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

...
```



---

archive/issue_comments_122658.json:
```json
{
    "body": "<a id='comment:25'></a>\nWith `sage -gdb` I get:\n\n```\n...\nReading symbols from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/bin/python...done.\n[Thread debugging using libthread_db enabled]\nPython 2.6.4 (r264, Aug 11 2011, 10:32:43) \n[GCC 4.4.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nTraceback (most recent call last):\n  File \"/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.1/libstdc++.so.6.0.14-gdb.py\", line 59, in <module>\n    from libstdcxx.v6.printers import register_libstdcxx_printers\nImportError: No module named libstdcxx.v6.printers\nsage: import numpy as np\nsage: ms = np.load(\"/home/leif/Sage/tmp/matrices.npy\")\nsage: time np.dot(ms[0],ms[1])\n[New Thread 0x7fffc6863700 (LWP 26321)]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffc6863700 (LWP 26321)]\n0x00007fffecae3bcd in ATL_dJIK40x40x40TN40x40x0_a1_b0 ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n(gdb) bt\n#0  0x00007fffecae3bcd in ATL_dJIK40x40x40TN40x40x0_a1_b0 ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n#1  0x00007fffecb4ef87 in ATL_dmmK ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n#2  0x00007fffecb4fff5 in ATL_dmmJITcp ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n#3  0x00007fffecb442c4 in ATL_dgemm ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n#4  0x00007fffece2c87d in ATL_dptgemm0 ()\n   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so\n#5  0x00007ffff780c9ca in start_thread (arg=<value optimized out>) at pthread_create.c:300\n#6  0x00007ffff6edf70d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112\n#7  0x0000000000000000 in ?? ()\n(gdb) \n```",
    "created_at": "2011-08-12T00:12:07Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122658",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'></a>
With `sage -gdb` I get:

```
...
Reading symbols from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/bin/python...done.
[Thread debugging using libthread_db enabled]
Python 2.6.4 (r264, Aug 11 2011, 10:32:43) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
Traceback (most recent call last):
  File "/usr/lib/gcc/x86_64-pc-linux-gnu/4.5.1/libstdc++.so.6.0.14-gdb.py", line 59, in <module>
    from libstdcxx.v6.printers import register_libstdcxx_printers
ImportError: No module named libstdcxx.v6.printers
sage: import numpy as np
sage: ms = np.load("/home/leif/Sage/tmp/matrices.npy")
sage: time np.dot(ms[0],ms[1])
[New Thread 0x7fffc6863700 (LWP 26321)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fffc6863700 (LWP 26321)]
0x00007fffecae3bcd in ATL_dJIK40x40x40TN40x40x0_a1_b0 ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
(gdb) bt
#0  0x00007fffecae3bcd in ATL_dJIK40x40x40TN40x40x0_a1_b0 ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
#1  0x00007fffecb4ef87 in ATL_dmmK ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
#2  0x00007fffecb4fff5 in ATL_dmmJITcp ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
#3  0x00007fffecb442c4 in ATL_dgemm ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
#4  0x00007fffece2c87d in ATL_dptgemm0 ()
   from /tmp/sage-4.7.1.rc2-fat-x86_64-Linux/local/lib/libatlas.so
#5  0x00007ffff780c9ca in start_thread (arg=<value optimized out>) at pthread_create.c:300
#6  0x00007ffff6edf70d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#7  0x0000000000000000 in ?? ()
(gdb) 
```



---

archive/issue_comments_122659.json:
```json
{
    "body": "Compare this to redhawk's (of Ubuntu 10.04.1); cf. sage-devel thread.",
    "created_at": "2011-08-12T00:51:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122659",
    "user": "https://github.com/nexttime"
}
```

Compare this to redhawk's (of Ubuntu 10.04.1); cf. sage-devel thread.



---

archive/attachments_015983.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "pthread.h-Ubuntu_10.04.3_x86_64",
    "asset_url": "tarball://root/attachments/ticket11674/pthread.h-Ubuntu_10.04.3_x86_64",
    "created_at": "2011-08-12T00:58:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11674/pthread.h-Ubuntu_10.04.3_x86_64",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_122660.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Attachment:** [pthread.h-Ubuntu_10.04.3_x86_64](https://github.com/sagemath/sage/files/ticket11674/pthread.h-Ubuntu_10.04.3_x86_64)\n\nI've attached my `pthread.h`, which is (including the shared library `libpthread.so.0` / `libpthread-2.11.1.so`) clearly younger than that originally shipped with Ubuntu 10.04; cf. [my post to sage-devel](http://groups.google.com/group/sage-devel/msg/142cccc25a983447).",
    "created_at": "2011-08-12T00:58:30Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122660",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:26'></a>
**Attachment:** [pthread.h-Ubuntu_10.04.3_x86_64](https://github.com/sagemath/sage/files/ticket11674/pthread.h-Ubuntu_10.04.3_x86_64)

I've attached my `pthread.h`, which is (including the shared library `libpthread.so.0` / `libpthread-2.11.1.so`) clearly younger than that originally shipped with Ubuntu 10.04; cf. [my post to sage-devel](http://groups.google.com/group/sage-devel/msg/142cccc25a983447).



---

archive/issue_comments_122661.json:
```json
{
    "body": "<a id='comment:27'></a>\n@nexttime: Thank you for your helpful tips. I was aware that I could put the build into parallel mode; but had read somewhere that this was experimental and may cause problems. I did it anyway; and atlas is now built. But now, on all of my machines, it bails out when trying to compile singular. Before I post another bug, can you verify I am not doing something silly?\n\nThe error is: <code> *\u2019 [-Wwrite-strings] ../kernel/libkernel.a(mod_raw.o): In function \\`dynl_open': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:217: undefined reference to \\`dlopen' ../kernel/libkernel.a(mod_raw.o): In function \\`dynl_sym': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:228: undefined reference to \\`dlsym' ../kernel/libkernel.a(mod_raw.o): In function \\`dynl_close': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:233: undefined reference to \\`dlclose' ../kernel/libkernel.a(mod_raw.o): In function \\`dynl_error': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:238: undefined reference to \\`dlerror' collect2: ld returned 1 exit status</code>\n\nI think it would be solved by adding -ldl to the end of the compiler command; I'm just not sure where to do that in the Sage automated install.\n\nAny ideas?",
    "created_at": "2011-08-12T01:01:55Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122661",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:27'></a>
@nexttime: Thank you for your helpful tips. I was aware that I could put the build into parallel mode; but had read somewhere that this was experimental and may cause problems. I did it anyway; and atlas is now built. But now, on all of my machines, it bails out when trying to compile singular. Before I post another bug, can you verify I am not doing something silly?

The error is: <code> * [-Wwrite-strings] ../kernel/libkernel.a(mod_raw.o): In function \`dynl_open': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:217: undefined reference to \`dlopen' ../kernel/libkernel.a(mod_raw.o): In function \`dynl_sym': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:228: undefined reference to \`dlsym' ../kernel/libkernel.a(mod_raw.o): In function \`dynl_close': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:233: undefined reference to \`dlclose' ../kernel/libkernel.a(mod_raw.o): In function \`dynl_error': /Storage/Tools/sage-4.7/spkg/build/singular-3-1-1-4.p9/src/kernel/mod_raw.cc:238: undefined reference to \`dlerror' collect2: ld returned 1 exit status</code>

I think it would be solved by adding -ldl to the end of the compiler command; I'm just not sure where to do that in the Sage automated install.

Any ideas?



---

archive/issue_comments_122662.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhoops; it seems { { { needs a line after it ><.",
    "created_at": "2011-08-12T01:03:26Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122662",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:28'></a>
Whoops; it seems { { { needs a line after it ><.



---

archive/issue_comments_122663.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [mister.wardrop](#comment%3A27):\n> I think it would be solved by adding -ldl to the end of the compiler command; I'm just not sure where to do that in the Sage automated install.\n\nWhoops, we already had some trouble with Singular (including race conditions in parallel builds) and fixed a lot, but I've never seen this before.\n\n`configure` should notice whether `-ldl` is necessary (on Linux always AFAIK), and add that.\n\nIf you're not going to touch the Singular spkg itself, adding `-ldl` to `LDFLAGS` could help (and shouldn't hurt otherwise, though a bit odd), but I don't know whether it'll be added in the right position to solve the problem.\n\nYou can try:\n\n```sh\nenv LDFLAGS=-ldl ./sage -i spkg/standard/singular-*\n# and if that worked, continue with\nmake\n```\n\nP.S.: Are you building Sage 4.7 or a later devel release (4.7.1.*)?",
    "created_at": "2011-08-12T01:18:12Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122663",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>
Replying to [mister.wardrop](#comment%3A27):
> I think it would be solved by adding -ldl to the end of the compiler command; I'm just not sure where to do that in the Sage automated install.

Whoops, we already had some trouble with Singular (including race conditions in parallel builds) and fixed a lot, but I've never seen this before.

`configure` should notice whether `-ldl` is necessary (on Linux always AFAIK), and add that.

If you're not going to touch the Singular spkg itself, adding `-ldl` to `LDFLAGS` could help (and shouldn't hurt otherwise, though a bit odd), but I don't know whether it'll be added in the right position to solve the problem.

You can try:

```sh
env LDFLAGS=-ldl ./sage -i spkg/standard/singular-*
# and if that worked, continue with
make
```

P.S.: Are you building Sage 4.7 or a later devel release (4.7.1.*)?



---

archive/issue_comments_122664.json:
```json
{
    "body": "<a id='comment:30'></a>\nP.P.S.:\n\nMy `spkg/logs/singular-3-1-1-4.p9.log` shows\n\n```\nchecking for dlopen in -ldl... yes\n```\nand apparently it is added in a lot of linker commands.\n\nIt isn't clear from your screen dump which `make` target actually failed.",
    "created_at": "2011-08-12T01:27:54Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122664",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:30'></a>
P.P.S.:

My `spkg/logs/singular-3-1-1-4.p9.log` shows

```
checking for dlopen in -ldl... yes
```
and apparently it is added in a lot of linker commands.

It isn't clear from your screen dump which `make` target actually failed.



---

archive/issue_comments_122665.json:
```json
{
    "body": "<a id='comment:31'></a>\n@nexttime:\n\nOkay... so before you responded, I had dropped down to a sage subshell and added \"-ldl\" to the LDFLAGS environment variable; and tried a manual ./spkg-install . This worked; and the build completed; and so I returned to the automatic build; only to find that it had not registered that the spkg install had been completed. So I tried to do it your way; and it worked fine.\n\nDo you want me to give you the build log of the failed build?\n\nI am building the official sage 4.7 release :).",
    "created_at": "2011-08-12T01:32:38Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122665",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:31'></a>
@nexttime:

Okay... so before you responded, I had dropped down to a sage subshell and added "-ldl" to the LDFLAGS environment variable; and tried a manual ./spkg-install . This worked; and the build completed; and so I returned to the automatic build; only to find that it had not registered that the spkg install had been completed. So I tried to do it your way; and it worked fine.

Do you want me to give you the build log of the failed build?

I am building the official sage 4.7 release :).



---

archive/issue_comments_122666.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [mister.wardrop](#comment%3A31):\n> Do you want me to give you the build log of the failed build?\n\nYou could attach it (just the Singular one), though it will now contain at least one failed and one successful build; hope it isn't too large. (Otherwise you could cut it where the successful build starts, or upload it elsewhere.)",
    "created_at": "2011-08-12T01:38:22Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122666",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:32'></a>
Replying to [mister.wardrop](#comment%3A31):
> Do you want me to give you the build log of the failed build?

You could attach it (just the Singular one), though it will now contain at least one failed and one successful build; hope it isn't too large. (Otherwise you could cut it where the successful build starts, or upload it elsewhere.)



---

archive/issue_comments_122667.json:
```json
{
    "body": "<a id='comment:33'></a>\n@nexttime:\n\nNow symmetrica is playing up; with (it seems) a missing link to \"-lm\" (it complains about missing 'cos'). It is possible that this is because I am building against the development branch of Ubuntu 10.10 . It would seem strange to me that this would be the case, though; given that it has not come up in compiling the other components of sage.\n\nAnyway, I shall upload the log of singular in case it reveals something useful to you.",
    "created_at": "2011-08-12T01:40:14Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122667",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:33'></a>
@nexttime:

Now symmetrica is playing up; with (it seems) a missing link to "-lm" (it complains about missing 'cos'). It is possible that this is because I am building against the development branch of Ubuntu 10.10 . It would seem strange to me that this would be the case, though; given that it has not come up in compiling the other components of sage.

Anyway, I shall upload the log of singular in case it reveals something useful to you.



---

archive/attachments_015984.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "singular-3-1-1-4.p9.log",
    "asset_url": "tarball://root/attachments/ticket11674/singular-3-1-1-4.p9.log",
    "created_at": "2011-08-12T01:42:58Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket11674/singular-3-1-1-4.p9.log",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```



---

archive/issue_comments_122668.json:
```json
{
    "body": "**Attachment:** [singular-3-1-1-4.p9.log](https://github.com/sagemath/sage/files/ticket11674/singular-3-1-1-4.p9.log)\n\nSingular build log",
    "created_at": "2011-08-12T01:42:58Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122668",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

**Attachment:** [singular-3-1-1-4.p9.log](https://github.com/sagemath/sage/files/ticket11674/singular-3-1-1-4.p9.log)

Singular build log



---

archive/issue_comments_122669.json:
```json
{
    "body": "<a id='comment:34'></a>\nThere was a mention of someone having a problem building singular in 4.7.1.rc1 on an experimental ubuntu box:\n[https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ](https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ)\nubuntu 11.10 alpha2 was used.",
    "created_at": "2011-08-12T01:45:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122669",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
There was a mention of someone having a problem building singular in 4.7.1.rc1 on an experimental ubuntu box:
[https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ](https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ)
ubuntu 11.10 alpha2 was used.



---

archive/issue_comments_122670.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [fbissey](#comment%3A34):\n> There was a mention of someone having a problem building singular in 4.7.1.rc1 on an experimental ubuntu box:\n> [https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ](https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ)\n> ubuntu 11.10 alpha2 was used.\n\nI wouldn't try that... ;-)\n\nDebian changed the locations of libraries, so that might be the cause.",
    "created_at": "2011-08-12T01:54:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122670",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:35'></a>
Replying to [fbissey](#comment%3A34):
> There was a mention of someone having a problem building singular in 4.7.1.rc1 on an experimental ubuntu box:
> [https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ](https://groups.google.com/d/msg/sage-release/-SxJRPPjYLg/eXv7_yPB37IJ)
> ubuntu 11.10 alpha2 was used.

I wouldn't try that... ;-)

Debian changed the locations of libraries, so that might be the cause.



---

archive/issue_comments_122671.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [mister.wardrop](#comment%3A33):\n> Anyway, I shall upload the log of singular in case it reveals something useful to you.\n\nAh, trouble to come (with newer Debian derivatives I guess):\n\n`-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.",
    "created_at": "2011-08-12T02:07:09Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122671",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:36'></a>
Replying to [mister.wardrop](#comment%3A33):
> Anyway, I shall upload the log of singular in case it reveals something useful to you.

Ah, trouble to come (with newer Debian derivatives I guess):

`-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.



---

archive/issue_comments_122672.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [leif](#comment%3A36):\n> `-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.\n\nI know it is my problem for using a development branch of Ubuntu; but is there any small workaround that I can use to build symmetrica?",
    "created_at": "2011-08-12T02:12:11Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122672",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:37'></a>
Replying to [leif](#comment%3A36):
> `-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.

I know it is my problem for using a development branch of Ubuntu; but is there any small workaround that I can use to build symmetrica?



---

archive/issue_comments_122673.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [mister.wardrop](#comment%3A37):\n> Replying to [leif](#comment%3A36):\n> > `-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.\n\n> \n> I know it is my problem for using a development branch of Ubuntu; but is there any small workaround that I can use to build symmetrica?\n\nHaha, same problem:\n\n```\ngcc-4.5.1 -O1 -fPIC -g -DFAST -DALLTRUE -lm test.c bar.o bi.o boe.o bruch.o classical.o de.o di.o ff.o galois.o ga.o gra.o hash.o hiccup.o io.o ko.o list.o lo.o ma.o mee.o mem.o mes.o mhe.o mhh.o mhm.o mhp.o mhs.o mmm.o mms.o mod_dg_sbd.o mo.o mpp.o mps.o mse.o msh.o msm.o mss.o muir.o na.o nb.o nc.o nu.o part.o pee.o peh.o pem.o perm.o pes.o phe.o phh.o phm.o phs.o plet.o pme.o pmh.o poly.o ppe.o pph.o ppm.o ppp.o pps.o pr.o pse.o psh.o psm.o pss.o rest.o rh.o sab.o sb.o sc.o sr.o ta.o teh.o tem.o tep.o tes.o the.o thm.o thp.o ths.o tme.o tmh.o tmp.o tms.o tpe.o tph.o tpm.o tps.o tse.o tsh.o tsm.o tsp.o vc.o zo.o zykelind.o zyk.o -o test\n```\nI'll take a look at its `spkg-install`...",
    "created_at": "2011-08-12T02:16:49Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122673",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:38'></a>
Replying to [mister.wardrop](#comment%3A37):
> Replying to [leif](#comment%3A36):
> > `-ldl` is there, just the order of libraries is wrong, as `-ldl` is passed **before** `-lkernel` is.

> 
> I know it is my problem for using a development branch of Ubuntu; but is there any small workaround that I can use to build symmetrica?

Haha, same problem:

```
gcc-4.5.1 -O1 -fPIC -g -DFAST -DALLTRUE -lm test.c bar.o bi.o boe.o bruch.o classical.o de.o di.o ff.o galois.o ga.o gra.o hash.o hiccup.o io.o ko.o list.o lo.o ma.o mee.o mem.o mes.o mhe.o mhh.o mhm.o mhp.o mhs.o mmm.o mms.o mod_dg_sbd.o mo.o mpp.o mps.o mse.o msh.o msm.o mss.o muir.o na.o nb.o nc.o nu.o part.o pee.o peh.o pem.o perm.o pes.o phe.o phh.o phm.o phs.o plet.o pme.o pmh.o poly.o ppe.o pph.o ppm.o ppp.o pps.o pr.o pse.o psh.o psm.o pss.o rest.o rh.o sab.o sb.o sc.o sr.o ta.o teh.o tem.o tep.o tes.o the.o thm.o thp.o ths.o tme.o tmh.o tmp.o tms.o tpe.o tph.o tpm.o tps.o tse.o tsh.o tsm.o tsp.o vc.o zo.o zykelind.o zyk.o -o test
```
I'll take a look at its `spkg-install`...



---

archive/issue_comments_122674.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [leif](#comment%3A38):\n> I'll take a look at its `spkg-install`...\n\nYou'd have to edit its `makefile`:\n\n```sh\ncd /tmp\ntar xjf $SAGE_ROOT/spkg/standard/symmetrica-2.0.p5.spkg\nvi symmetrica-2.0.p5/src/makefile # move the -lm to the end of the line\n                                  # (or just comment the line out, `test` isn't needed).\ntar cjf $SAGE_ROOT/spkg/standard/symmetrica-2.0.p5.spkg symmetrica-2.0.p5/\ncd $SAGE_ROOT\n```\nThe rerun `make`.\n\nP.S.: You can also drop into `#sagemath` on `irc.freenode.net`.",
    "created_at": "2011-08-12T02:29:00Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122674",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:39'></a>
Replying to [leif](#comment%3A38):
> I'll take a look at its `spkg-install`...

You'd have to edit its `makefile`:

```sh
cd /tmp
tar xjf $SAGE_ROOT/spkg/standard/symmetrica-2.0.p5.spkg
vi symmetrica-2.0.p5/src/makefile # move the -lm to the end of the line
                                  # (or just comment the line out, `test` isn't needed).
tar cjf $SAGE_ROOT/spkg/standard/symmetrica-2.0.p5.spkg symmetrica-2.0.p5/
cd $SAGE_ROOT
```
The rerun `make`.

P.S.: You can also drop into `#sagemath` on `irc.freenode.net`.



---

archive/issue_comments_122675.json:
```json
{
    "body": "<a id='comment:40'></a>\nJust confirming that after a recompile, I no longer experience a segfault due to atlas. :).\n\nThank you everyone; especially leif.",
    "created_at": "2011-08-12T03:39:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122675",
    "user": "https://trac.sagemath.org/admin/accounts/users/mister.wardrop"
}
```

<a id='comment:40'></a>
Just confirming that after a recompile, I no longer experience a segfault due to atlas. :).

Thank you everyone; especially leif.



---

archive/issue_events_093073.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-01T15:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "component: numerical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93073"
}
```



---

archive/issue_events_093074.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-01T15:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "component: distribution",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93074"
}
```



---

archive/issue_comments_122676.json:
```json
{
    "body": "**Remove assignee** @jasongrout, jkantor.",
    "created_at": "2011-09-01T15:40:21Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122676",
    "user": "https://github.com/nexttime"
}
```

**Remove assignee** @jasongrout, jkantor.



---

archive/issue_events_093075.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-01T15:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93075"
}
```



---

archive/issue_events_093076.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-01T15:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93076"
}
```



---

archive/issue_events_093077.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-01T15:45:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "rename": {
        "from": "np.dot of two numeric matrices segfaults sage.",
        "to": "np.dot of two numeric matrices segfaults in the binary Ubuntu 10.04.1 x86_64 distribution"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93077"
}
```



---

archive/issue_comments_122677.json:
```json
{
    "body": "**Changing keywords** from \"ATLAS segfault matrix numpy\" to \"ATLAS segfault matrix numpy libpthread redhawk\".",
    "created_at": "2011-09-01T15:45:01Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122677",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "ATLAS segfault matrix numpy" to "ATLAS segfault matrix numpy libpthread redhawk".



---

archive/issue_events_093078.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T13:11:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "milestone": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93078"
}
```



---

archive/issue_comments_122678.json:
```json
{
    "body": "**Reviewer:** Leif Leonhardy",
    "created_at": "2013-06-12T13:11:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122678",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Leif Leonhardy



---

archive/issue_events_093079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T13:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93079"
}
```



---

archive/issue_comments_122679.json:
```json
{
    "body": "<a id='comment:43'></a>\nLet's assume this is fixed...",
    "created_at": "2013-06-12T13:11:28Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122679",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Let's assume this is fixed...



---

archive/issue_events_093080.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T13:11:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93080"
}
```



---

archive/issue_events_093081.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T13:11:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93081"
}
```



---

archive/issue_comments_122680.json:
```json
{
    "body": "<a id='comment:45'></a>\nFixed by upgrading redhawk (the machine the bdist was built on).\n\n=> resolution: fixed (or worksforme)",
    "created_at": "2013-06-12T13:40:45Z",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/11674#issuecomment-122680",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:45'></a>
Fixed by upgrading redhawk (the machine the bdist was built on).

=> resolution: fixed (or worksforme)



---

archive/issue_events_093082.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:23:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "worksforme",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93082"
}
```



---

archive/issue_events_093083.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:23:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93083"
}
```



---

archive/issue_events_093084.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:23:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/11674",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/11674#event-93084"
}
```
