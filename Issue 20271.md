# Issue 20271: Windows 64-bit: warning: -fPIC ignored for target (all code is position independent)

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2016-04-27 13:12:32

This is an annoying warning that GCC always outputs on Cygwin either 32-bit or 64-bit.  It's harmless really but it is output for every single compiled source file--C or fortran--and there is no `-Wno-` flag to disable it.

There is a patch now in GCC to remove this outright: https://gcc.gnu.org/ml/gcc-patches/2015-08/msg00836.html  But I don't know when it will be available.  The default GCC currently in Cygwin is 5.3, and it does not have this patch.

It's not worth putting in a lot of effort over this, but I'm squashing it wherever I see it by just removing the `-fPIC` flag (if possible) on Cygwin.  I will maintain a branch for these changes wherever I come across them.


---

Comment by embray created at 2016-04-27 13:12:39

Set assignee to embray.


---

Comment by embray created at 2016-07-06 14:46:46

Went ahead and fixed this for most, if not all packages, while waiting for a build to finish.

Again, the only thing this is fixing as an annoying warning (that will appear for almost every file compiled) on Cygwin where the `-fPIC` flag is enabled.  If future spkgs add this flag it's not a big deal.
----
Last 10 new commits:


---

Comment by embray created at 2016-07-06 14:46:46

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-07-15 09:16:09

I don't like adding pointless complexity to `spkg-install` files. I'm not setting the ticket to needs_work for this, but I really don't see the point...


---

Comment by embray created at 2016-07-15 09:51:04

The point is that without this build outputs on Cygwin are almost line noise.  

Adding a single conditional when there are already plenty is hardly "complexity".  In the meantime I'm still working to squash the need for duplicating stuff in all these spkg-installs.  Please give this a positive review.


---

Comment by jdemeyer created at 2016-07-15 12:05:39

Here is a cleaner suggestion: in `sage-env`, define a variable (just a local variable, no need to `export` it) called `fPIC` set to either `"-fPIC"` or `""`. Then you can replace `-fPIC` by `$fPIC` in `spkg-install` files without conditionals.


---

Comment by embray created at 2016-07-15 12:33:25

That would be okay, sure.  Is `sage-env` the best place for that though?  Over in #20218 I added a `PIP_INSTALL` variable used in most Python packages for the common `pip` options to `build/make/install`.  Maybe that's not great now that I think about it, since it means running `spkg-install` manually won't work.  But I don't know if that's supposed to work or not.

On the other hand I don't like cluttering `sage-env` with countless environment variables used only for building, unless there's a way to do add such variables _only_ at build time?


---

Comment by jdemeyer created at 2016-07-15 12:47:46

Replying to [comment:7 embray]:
> On the other hand I don't like cluttering `sage-env` with countless environment variables used only for building, unless there's a way to do add such variables _only_ at build time?

Like I said, it doesn't have to be an _environment_ variable, just a shell variable. I don't think it costs a lot to have such variables so I don't really see the problem.


---

Comment by embray created at 2016-07-15 13:49:42

Okay, in that case I'll try that.


---

Comment by jdemeyer created at 2017-03-16 19:07:24

Changing status from needs_review to needs_work.
