# Issue 18882: Use $PKG-clean target to implement sage -f $PKG

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-09-01 08:59:58

After #19101, `sage -f PKG` first deletes `local/var/lib/sage/installed/PKG-*` and then runs `sage -i PKG`.

I propose to move the rule of removing `local/var/lib/sage/installed/PKG-*` to `build/make/Makefile` as a `PKG-clean` target. This would make it easier to extend the functionality of `sage -f FOO` to non-packages, for example

```
sage -f optional   # force install all optional packages
sage -f python     # force install correct version of Python (python2 or python3 package)
```



---

Comment by jdemeyer created at 2015-09-01 09:47:14

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-09-01 09:47:14

New commits:


---

Comment by jhpalmieri created at 2015-09-10 19:33:50

If I run `sage -i python` or `sage -f python`, I get

```
Error: package 'python' not found
Assuming it is an old-style package... (this is deprecated: use -p instead of -i to install old-style packages)

Attempting to download package python
Error: could not find a package matching python
       Try 'sage --package list' to see the available packages
       Did you mean: cython, ipython, python2, python3, patch?
```

If I run `make python`, I get

```
make[1]: *** No rule to make target `python'.  Stop.
```

This is despite the line

```
PYTHON = $(PYTHON2)
```

in `build/make/Makefile`.


---

Comment by jhpalmieri created at 2015-09-10 19:39:10

Or maybe that's not the point of this ticket, and this just adds `PKG-clean`. That part works well.


---

Comment by jhpalmieri created at 2015-09-10 19:40:07

Although should `make PKG-clean` also delete the log file for `PKG`?


---

Comment by git created at 2015-09-10 20:51:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-09-10 20:51:29

Replying to [comment:4 jhpalmieri]:
> Or maybe that's not the point of this ticket, and this just adds `PKG-clean`.
Exactly.


---

Comment by jdemeyer created at 2015-09-10 20:53:55

Replying to [comment:5 jhpalmieri]:
> Although should `make PKG-clean` also delete the log file for `PKG`?
I don't see why... so far Sage has always appended log files and I see no reason to change that on this ticket.


---

Comment by jhpalmieri created at 2015-09-10 21:00:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-09-11 16:47:10

Resolution: fixed
