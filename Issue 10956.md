# Issue 10956: SIGSEGV test throws SIGBUS instead on certain systems

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-03-29 13:11:40

Assignee: mvngu

CC:  kcrisman

In the file `sage/tests/interrupt.pyx` there is a test for a segmentation fault by explicitly dereferencing a NULL pointer.  However, on some systems (at least Mac OS X 10.4 PPC) this generates a SIGBUS instead of a SIGSEGV.


---

Comment by jdemeyer created at 2011-03-29 13:27:05

Changing status from new to needs_review.


---

Comment by kcrisman created at 2011-03-29 19:16:45

This patch looks correct, and

```
Dasher-03:~/Desktop/sage-4.7.alpha2 student$ ./sage -t -long devel/sage/sage/tests/interrupt.pyx 
sage -t -long "devel/sage/sage/tests/interrupt.pyx"         
         [436.2 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 436.4 seconds
```

Positive review.  Nice (better) way to name those functions, too; now I know what they actually do!


---

Comment by kcrisman created at 2011-03-29 19:16:45

Changing status from needs_review to positive_review.


---

Comment by GeorgSWeber created at 2011-04-04 18:28:55

I see this on MacIntel OS X 10.4.11, too, so I updated the description. The patch looks superb (although I didn't apply and test it myself); hopefully it gets into the next alpha/rc release.


---

Attachment

Updated patch.  Only change is this comment (changed to reflect that various Mac OS X systems have this issue):

```
# Dereference a NULL pointer on purpose. This signals a SIGSEGV on most
# systems, but on older Mac OS X and possibly other systems, this
# signals a SIGBUS instead. In any case, this should give some signal.
```



---

Comment by jdemeyer created at 2011-04-05 11:59:32

Resolution: fixed
