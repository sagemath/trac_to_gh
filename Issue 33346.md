# Issue 33346: Move integration and volume to Polyhedron_base7

Issue created by migration from https://trac.sagemath.org/ticket/33583

Original creator: @kliem

Original creation time: 2022-03-28 05:48:54

CC:  mkoeppe

Part of #32651.

We also move `cdd_Vrepresentation` and `cdd_Hrepresentation` to `Polyhedron_base0`.


---

Comment by git created at 2022-03-28 05:59:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2022-03-28 06:00:10

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-03-28 17:03:35

With lrslib installed:

```
sage -t --long --random-seed=30473451679236788317468564983261889666 src/sage/geometry/polyhedron/base7.py
**********************************************************************
File "src/sage/geometry/polyhedron/base7.py", line 310, in sage.geometry.polyhedron.base7.Polyhedron_base7._volume_lrs
Failed example:
    polytopes.hypercube(3)._volume_lrs() # optional - lrslib
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base7.Polyhedron_base7._volume_lrs[0]>", line 1, in <module>
        polytopes.hypercube(Integer(3))._volume_lrs() # optional - lrslib
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/geometry/polyhedron/base7.py", line 339, in _volume_lrs
        ans = bytes_to_str(ans)
    NameError: name 'bytes_to_str' is not defined
```



---

Comment by mkoeppe created at 2022-03-28 17:03:35

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-03-28 17:35:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2022-03-28 17:36:24

Changing status from needs_work to needs_review.


---

Comment by @kliem created at 2022-03-28 17:36:24

Thanks for the catch.


---

Comment by mkoeppe created at 2022-03-28 20:40:24

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-03-28 20:40:24


```
sage -t --long --random-seed=321325385952855352170964946242932397043 src/sage/geometry/polyhedron/base7.py
**********************************************************************
File "src/sage/geometry/polyhedron/base7.py", line 311, in sage.geometry.polyhedron.base7.Polyhedron_base7._volume_lrs
Failed example:
    polytopes.hypercube(3)._volume_lrs() # optional - lrslib
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base7.Polyhedron_base7._volume_lrs[0]>", line 1, in <module>
        polytopes.hypercube(Integer(3))._volume_lrs() # optional - lrslib
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/geometry/polyhedron/base7.py", line 349, in _volume_lrs
        volume = QQ(volume)
    NameError: name 'QQ' is not defined
```



---

Comment by git created at 2022-03-29 06:35:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2022-03-29 06:36:41

Changing status from needs_work to needs_review.


---

Comment by @kliem created at 2022-03-29 06:36:41

lrslib works for me now.


---

Comment by mkoeppe created at 2022-03-29 19:03:46

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2022-03-30 05:18:44

Thank you.


---

Comment by vbraun created at 2022-04-02 10:52:44

Resolution: fixed
