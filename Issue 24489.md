# Issue 24489: Sage silenly accepts symbolic expressions with two comparison operators

Issue created by migration from https://trac.sagemath.org/ticket/24726

Original creator: tmonteil

Original creation time: 2018-02-13 16:03:01

CC:  rws slelievre

See the following example:


```
sage: 0 <= x <= 1/2
0 <= x
```


This should raise an error. Note that it can create confusion when used in assumptions:


```
sage: assume(0 <= x <= 1/2)
sage: bool(x <= 1/2)
False
```


This has been reported on [this ask question](https://ask.sagemath.org/question/41061/piecewise-defined-function-via-def).



---

Comment by jdemeyer created at 2018-02-13 16:10:15

This is not a solvable problem. The problem is that Python treats

```
0 <= x <= 1/2
```

as

```
(0 <= x) and (x <= 1/2)
```

Since `bool(0 <= x)` is `False`, this returns `(0 <= x)`.

There is proposal at [PEP 535](https://www.python.org/dev/peps/pep-0535/) to fix this, but it's not clear whether it will be accepted.


---

Comment by jdemeyer created at 2018-02-13 16:10:15

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-02-13 16:20:48

Changing status from needs_review to positive_review.


---

Comment by tmonteil created at 2018-02-13 16:29:11

I got your point, but it is not clear for me that this implies that there is nothing to do on the symbolic ring to mitigate the issue.


---

Comment by jdemeyer created at 2018-02-13 16:30:46

Replying to [comment:3 tmonteil]:
> I got your point, but it is not clear for me that this implies that there is nothing to do on the symbolic ring to mitigate the issue.

As long as `bool(0 <= x)` returns `False`, it is not possible to fix this.


---

Comment by slelievre created at 2018-02-14 02:55:29

We could let the Sage preparser turn multiple inequalities in `assume` statements into multiple assumptions.


---

Comment by rws created at 2018-02-14 04:19:22

That's an interesting idea. And it could raise an error outside assumptions. Let's at least wait for that PEP before closing this.


---

Comment by rws created at 2018-02-14 04:19:22

Changing status from positive_review to needs_info.


---

Comment by jdemeyer created at 2018-02-14 06:19:11

Replying to [comment:5 slelievre]:
> We could let the Sage preparser turn multiple inequalities in `assume` statements into multiple assumptions.

Why special-case `assume`? The problem already occurs before calling `assume`:

```
sage: 0 <= x <= 1/2
0 <= x
```



---

Comment by jdemeyer created at 2018-02-14 08:27:31

And if you do want to hack the preparser for that, I would do it with the PEP 535 semantics.


---

Comment by jdemeyer created at 2019-01-11 14:36:57

Since PEP 535 is not particularly likely to come soon, I suggest to close this as "wontfix".


---

Comment by jdemeyer created at 2019-01-11 14:36:57

Resolution: wontfix
