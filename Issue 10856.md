# Issue 10856: is_maximal is broken

archive/issues_010856.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nKeywords: maximal ideal\n\nThe method \"is_maximal\" in sage/rings/ideal.py is broken:\n\n```\nsage: R = IntegerModRing(8)\nsage: R.principal_ideal(0).is_maximal()\nTrue\nsage: R.principal_ideal(2).is_maximal()\nTrue\nsage: R.principal_ideal(4).is_maximal()\nTrue\n```\n\nAdmittedly, the docstring does say\n\n```\nTODO: Make self.is_maximal() work! Write this code!\n```\n\nbut we need a trac ticket for this.  The comments in the code are not right, either:\n\n```\n        kd = self.ring().krull_dimension()\n        if kd == 0: # every non-trivial ideal is maximal\n```\n\nThis appears to be false, as the example above (Z/8Z) illustrates.  It would be true if the ring were an integral domain (because Krull dimension 0 + integral domain = field).  Alternatively, it would be true if the ideal were prime, but we have limited primality testing right now, so this is not the best way to go: with R as above, `R.principal_ideal(2).is_prime()` raises a `NotImplementedError`.  Next:\n\n```\n        elif kd == 1 and self.ring().is_integral_domain(): # every nontrivial ideal is maximal\n            return self.is_prime()\n```\n\nThe comment should say \"every nontrivial **prime** ideal is maximal, so the code is right but the comment isn't.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10934\n\n",
    "created_at": "2011-03-14T20:19:32Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "is_maximal is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10856",
    "user": "jhpalmieri"
}
```
Assignee: AlexGhitza

Keywords: maximal ideal

The method "is_maximal" in sage/rings/ideal.py is broken:

```
sage: R = IntegerModRing(8)
sage: R.principal_ideal(0).is_maximal()
True
sage: R.principal_ideal(2).is_maximal()
True
sage: R.principal_ideal(4).is_maximal()
True
```

Admittedly, the docstring does say

```
TODO: Make self.is_maximal() work! Write this code!
```

but we need a trac ticket for this.  The comments in the code are not right, either:

```
        kd = self.ring().krull_dimension()
        if kd == 0: # every non-trivial ideal is maximal
```

This appears to be false, as the example above (Z/8Z) illustrates.  It would be true if the ring were an integral domain (because Krull dimension 0 + integral domain = field).  Alternatively, it would be true if the ideal were prime, but we have limited primality testing right now, so this is not the best way to go: with R as above, `R.principal_ideal(2).is_prime()` raises a `NotImplementedError`.  Next:

```
        elif kd == 1 and self.ring().is_integral_domain(): # every nontrivial ideal is maximal
            return self.is_prime()
```

The comment should say "every nontrivial **prime** ideal is maximal, so the code is right but the comment isn't.


Issue created by migration from https://trac.sagemath.org/ticket/10934





---

archive/issue_comments_115286.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-03-14T22:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10856#issuecomment-115286",
    "user": "jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_115287.json:
```json
{
    "body": "Attachment [trac_10934-is-maximal.patch](tarball://root/attachments/some-uuid/ticket10934/trac_10934-is-maximal.patch) by jhpalmieri created at 2011-03-14 22:14:18\n\nHere's a patch: apply\n\n- trac_10934-is-maximal.patch\n\nAll tests pass for me on sage.math.",
    "created_at": "2011-03-14T22:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10856#issuecomment-115287",
    "user": "jhpalmieri"
}
```

Attachment [trac_10934-is-maximal.patch](tarball://root/attachments/some-uuid/ticket10934/trac_10934-is-maximal.patch) by jhpalmieri created at 2011-03-14 22:14:18

Here's a patch: apply

- trac_10934-is-maximal.patch

All tests pass for me on sage.math.



---

archive/issue_comments_115288.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-25T20:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10856#issuecomment-115288",
    "user": "spice"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_115289.json:
```json
{
    "body": "All tests pass for me too, and the code behaves as intended on all the examples I could think of. Positive review.\n\nSince this is only a partial implementation of is_maximal() i.e. only for quotient rings of `ZZ`, should we open a separate ticket for implementing this over general rings? Or does such a ticket already exist?",
    "created_at": "2011-03-25T20:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10856#issuecomment-115289",
    "user": "spice"
}
```

All tests pass for me too, and the code behaves as intended on all the examples I could think of. Positive review.

Since this is only a partial implementation of is_maximal() i.e. only for quotient rings of `ZZ`, should we open a separate ticket for implementing this over general rings? Or does such a ticket already exist?



---

archive/issue_comments_115290.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-04-13T07:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10856",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10856#issuecomment-115290",
    "user": "jdemeyer"
}
```

Resolution: fixed
