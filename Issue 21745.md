# Issue 21745: Py3: Unicode errors in docstrings

Issue created by migration from https://trac.sagemath.org/ticket/21982

Original creator: jmantysalo

Original creation time: 2016-11-28 06:13:47

CC:  chapoton

See


```
find src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 | fgrep -q 'unicode error' && echo $f; done
```



---

Comment by jmantysalo created at 2016-11-28 06:38:32

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-11-28 06:38:32

New commits:


---

Comment by jdemeyer created at 2016-11-28 08:11:44

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-11-28 08:11:44

Those backslashes are really needed for Sphinx to correctly compile!


---

Comment by jmantysalo created at 2016-11-28 08:21:43

Replying to [comment:3 jdemeyer]:
> Those backslashes are really needed for Sphinx to correctly compile!

??? I did look the .html output and saw no error.


---

Comment by jdemeyer created at 2016-11-28 08:36:03

"No errors" is not the same as "correct". Example:

This
>>> sentence

has `no errors` but is NOT _really_ [correct](http://127.0.0.1/).


---

Comment by jmantysalo created at 2016-11-28 08:45:59

Sorry for being blind, but can you show me where the error is? I did look the output file, and it seems to be correct.


---

Comment by jdemeyer created at 2016-11-28 08:53:22

Well, I need to compile the doc myself first. But believe me that those backslashes are there for a reason.


---

Comment by jmantysalo created at 2016-11-28 09:08:53

Replying to [comment:7 jdemeyer]:
> Well, I need to compile the doc myself first. But believe me that those backslashes are there for a reason.

I did compile, and there is no visible change.


---

Comment by jdemeyer created at 2016-11-28 14:55:28

Replying to [comment:8 jmantysalo]:
> Replying to [comment:7 jdemeyer]:
> > Well, I need to compile the doc myself first. But believe me that those backslashes are there for a reason.
> 
> I did compile, and there is no visible change.

I agree. Maybe the problem only occurs with single-line references (all those that you changed are multi-line). In any case, I guess the proper fix is changing `"""` to `r"""` instead of removing the backslashes.


---

Comment by git created at 2016-11-28 15:58:09

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jmantysalo created at 2016-11-28 16:04:50

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-11-28 16:04:50

Replying to [comment:9 jdemeyer]:

> Maybe the problem only occurs with single-line references (all those that you changed are multi-line). In any case, I guess the proper fix is changing `"""` to `r"""` instead of removing the backslashes.

OK. Done.


---

Comment by jdemeyer created at 2016-11-28 16:25:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-11-29 23:20:41

Resolution: fixed
