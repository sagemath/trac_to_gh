# Issue 12935: pyhthon long division causing infinite loop

Issue created by migration from https://trac.sagemath.org/ticket/13107

Original creator: titusn

Original creation time: 2012-06-12 10:12:54

Assignee: burcin

CC:  jpflori

Keywords: python division


```

sage: ~SR(2L)

local/bin/sage-sage: line 303:  9165 Segmentation fault      sage-ipython "$@" -i

```

`~SR(2L)`is evaluated to ` SR(2L)^(-1) `


because of a faulty simplification in the power::eval function it generates power objects recursively


---

Comment by burcin created at 2012-06-12 12:57:05

Changing keywords from "python division" to "pynac division".


---

Comment by burcin created at 2012-07-10 08:52:14

This is fixed in Pynac 0.2.5, which was released yesterday. The [tarball is here](http://sage.math.washington.edu/home/burcin/pynac/pynac-0.2.5.tar.bz2). We need an spkg to proceed.


---

Comment by jpflori created at 2012-07-31 19:51:03

Changing status from new to needs_review.


---

Comment by jpflori created at 2012-07-31 19:51:03

I've just slightly homogenized the patch.
I'll test it tomorrow and should then give positive review.
I've opened another ticket for the update to pynac 0.2.5;
maybe not the greatest idea, but at that time I thought that #13262 should be affected by 0.2.5 as well.
Whatsoever, both this ticket and #13316 should be merged together.


---

Comment by jpflori created at 2012-08-01 07:28:27

I've rebased on top of 5.2 and removed the ALLOW_TAB stuff together with the 3 corresponding tabs from expression.pyx.

As far as I'm concerned, the original patch together with this similarly minor modifications gets positive review.

Someone now needs to review the similarly simple #13316 which I have now tested to work on top of 5.2.

Only apply [attachment:power+eval.2.patch]


---

Comment by jpflori created at 2012-08-01 07:28:27

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-09-11 21:36:20

This needs to be rebased to sage-5.4.beta1:

```
patching file sage/symbolic/expression.pyx
Hunk #2 FAILED at 1373.
Hunk #6 FAILED at 8890.
Hunk #7 FAILED at 8984.
3 out of 7 hunks FAILED -- saving rejects to file sage/symbolic/expression.pyx.rej
```



---

Comment by jdemeyer created at 2012-09-11 21:36:20

Changing status from positive_review to needs_work.


---

Comment by jpflori created at 2012-09-12 14:54:27

Rebased on top of 5.4.beta0


---

Comment by jpflori created at 2012-09-12 14:56:11

Changing status from needs_work to needs_review.


---

Attachment

Updated patch on top of 5.4. beta0.
The failing hunks were formatting issues <hich have been corrected in another ticket in the meantime of getting this merged.

5.4.beta1 should be ok with the updated patch.
If someone confirms that, let's merge this.


---

Comment by burcin created at 2012-09-12 15:03:58

Changing status from needs_review to positive_review.


---

Comment by burcin created at 2012-09-12 15:03:58

Looks good to me. Thanks Jean-Pierre.


---

Comment by jdemeyer created at 2012-09-18 06:39:20

Resolution: fixed
