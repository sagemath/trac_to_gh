# Issue 21081: recognizable series: basic arithmetic

archive/issues_021081.json:
```json
{
    "body": "- Make recognizable series space a module (addition, scalar multiplication)\n- Hadamard product\n- Subsequences\n\nSee also meta ticket #21202\n\nIssue created by migration from https://trac.sagemath.org/ticket/21318\n\n",
    "created_at": "2016-08-23T17:13:13Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "recognizable series: basic arithmetic",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21081",
    "user": "@dkrenn"
}
```
- Make recognizable series space a module (addition, scalar multiplication)
- Hadamard product
- Subsequences

See also meta ticket #21202

Issue created by migration from https://trac.sagemath.org/ticket/21318





---

archive/issue_comments_292020.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-08-23T17:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292020",
    "user": "@dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_292021.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-23T17:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292021",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-23T17:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292022",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_292023.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-24T08:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292023",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-25T11:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292024",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292025.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-25T11:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292025",
    "user": "@dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_292026.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292026",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292027.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292027",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292028.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292028",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292029.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T11:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292029",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292030.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T12:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292030",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292031.json:
```json
{
    "body": "patchbot python3 plugin failuree",
    "created_at": "2017-01-05T12:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292031",
    "user": "@cheuberg"
}
```

patchbot python3 plugin failuree



---

archive/issue_comments_292032.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-24T13:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292032",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292033.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-24T13:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292033",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292034.json:
```json
{
    "body": "Replying to [comment:12 cheuberg]:\n> patchbot python3 plugin failuree\n\nShould be fixed. Is now on 7.5.",
    "created_at": "2017-01-24T13:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292034",
    "user": "@dkrenn"
}
```

Replying to [comment:12 cheuberg]:
> patchbot python3 plugin failuree

Should be fixed. Is now on 7.5.



---

archive/issue_comments_292035.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-06T07:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292035",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-29T08:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292036",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292037.json:
```json
{
    "body": "`@`dkrenn: could you please merge the current version of #21203? Currently, there are some conflicts, and I would prefer to review a version where these conflicts are resolved.",
    "created_at": "2021-05-07T16:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292037",
    "user": "@cheuberg"
}
```

`@`dkrenn: could you please merge the current version of #21203? Currently, there are some conflicts, and I would prefer to review a version where these conflicts are resolved.



---

archive/issue_comments_292038.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-05-07T16:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292038",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292039.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-05-10T11:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292039",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_292040.json:
```json
{
    "body": "Replying to [comment:17 cheuberg]:\n> `@`dkrenn: could you please merge the current version of #21203? Currently, there are some conflicts, and I would prefer to review a version where these conflicts are resolved.\n\nDone; it is now based on the current #21203 which itself is on [SageMath](SageMath) 9.3.",
    "created_at": "2021-05-10T11:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292040",
    "user": "@dkrenn"
}
```

Replying to [comment:17 cheuberg]:
> `@`dkrenn: could you please merge the current version of #21203? Currently, there are some conflicts, and I would prefer to review a version where these conflicts are resolved.

Done; it is now based on the current #21203 which itself is on [SageMath](SageMath) 9.3.



---

archive/issue_comments_292041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T14:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292041",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292042.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-11T14:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292042",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292043.json:
```json
{
    "body": "Fixup due to changes in #21203. So again ready for \"needs review\".",
    "created_at": "2021-05-11T14:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292043",
    "user": "@dkrenn"
}
```

Fixup due to changes in #21203. So again ready for "needs review".



---

archive/issue_comments_292044.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-05-14T14:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292044",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292045.json:
```json
{
    "body": "1. Please reconsider punctuation in input and output blocks.\n\n2. I am not sure whether handling of automatic minimization is best done in the methods `_add_` and `hadamard_product` (especially unsure about the first because it would be rather painful to call it with disabled minimization, overriding the convention about private methods). Perhaps the parent could have a flag whether minimization should always be performed or not?\n\n3. `_add_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\n4. `_add_`: parameter `minimize=False` is not tested.\n\n5. `_neg_`: in the example, `.is_trivial_zero()` could be used.\n\n6. `_rmul_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\n7. `_rmul_`: I am not convinced that this method is called by the tests: In order to understand the problems with the tests of `_lmul_`, I deliberately introduced an error here and it was not raised in the tests.\n\n8. `_lmul_`: The available (untested) test does not seem to be completely rewritten to this case; the last lines seem to belong to the test of `_rmul_`.\n\n9. `_lmul_`: please add a test where `_lmul_` is called explicitly.\n\n10. `hadamard_product`: in the examples and tests, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\n21. `hadamard_product`: I think that\n\n```python\nMatrix(tuple(\n    srow.outer_product(orow).list()\n    for srow in self.mu[a].rows()\n    for orow in other.mu[a].rows())))\n\n```\n\n    could be simplified to `self.mu[a].tensor_product(other.mu[a])` which I consider to be more concise and clearer. I am not sure whether rewriting the left vectors to matrices, then calling `tensor_product` on the two single-row matrices and then extracting the first row would be more readable, too (similarly for the right vectors).\n\n12. `one_hadamard`: I do not think that `one = ZZ(1)` is appropriate for all values of `coefficient_ring`.",
    "created_at": "2021-05-14T14:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292045",
    "user": "@cheuberg"
}
```

1. Please reconsider punctuation in input and output blocks.

2. I am not sure whether handling of automatic minimization is best done in the methods `_add_` and `hadamard_product` (especially unsure about the first because it would be rather painful to call it with disabled minimization, overriding the convention about private methods). Perhaps the parent could have a flag whether minimization should always be performed or not?

3. `_add_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

4. `_add_`: parameter `minimize=False` is not tested.

5. `_neg_`: in the example, `.is_trivial_zero()` could be used.

6. `_rmul_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

7. `_rmul_`: I am not convinced that this method is called by the tests: In order to understand the problems with the tests of `_lmul_`, I deliberately introduced an error here and it was not raised in the tests.

8. `_lmul_`: The available (untested) test does not seem to be completely rewritten to this case; the last lines seem to belong to the test of `_rmul_`.

9. `_lmul_`: please add a test where `_lmul_` is called explicitly.

10. `hadamard_product`: in the examples and tests, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

21. `hadamard_product`: I think that

```python
Matrix(tuple(
    srow.outer_product(orow).list()
    for srow in self.mu[a].rows()
    for orow in other.mu[a].rows())))

```

    could be simplified to `self.mu[a].tensor_product(other.mu[a])` which I consider to be more concise and clearer. I am not sure whether rewriting the left vectors to matrices, then calling `tensor_product` on the two single-row matrices and then extracting the first row would be more readable, too (similarly for the right vectors).

12. `one_hadamard`: I do not think that `one = ZZ(1)` is appropriate for all values of `coefficient_ring`.



---

archive/issue_comments_292046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-24T08:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292046",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-25T11:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292048.json:
```json
{
    "body": "Replying to [comment:22 cheuberg]:\n> 1. Please reconsider punctuation in input and output blocks.\n\nDone.\n\n> 2. I am not sure whether handling of automatic minimization is best done in the methods `_add_` and `hadamard_product` (especially unsure about the first because it would be rather painful to call it with disabled minimization, overriding the convention about private methods). Perhaps the parent could have a flag whether minimization should always be performed or not?\n\nI agree that this is not optimal. I've now written a decorator `minimize_result` and introduce a flag in the parent for controlling the behavior.\n\n> 3. `_add_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\nDone.\n\n> 4. `_add_`: parameter `minimize=False` is not tested.\n\nNow tested (indirectly) in the new decorator `minimize_result`\n\n> 5. `_neg_`: in the example, `.is_trivial_zero()` could be used.\n\nIndeed. Done.\n\n> 6. `_rmul_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\nDone.\n\n> 7. `_rmul_`: I am not convinced that this method is called by the tests: In order to understand the problems with the tests of `_lmul_`, I deliberately introduced an error here and it was not raised in the tests.\n\nThe problem was, that the `RecognizableSeries` was derived from `Element` and not `ModuleElement`, therefore, a fall-back action using a double-and-add algorithm where doubling is done by addition, was used and so `_rmul_` and `_lmul_` were actually never called.\n\nFixed now and added a test to make sure these methods are called.\n\nAlso, left and right was switched; fixed.\n\n> 8. `_lmul_`: The available (untested) test does not seem to be completely rewritten to this case; the last lines seem to belong to the test of `_rmul_`.\n\nOutput removed.\n\n> 9. `_lmul_`: please add a test where `_lmul_` is called explicitly.\n\nNot needed anymore, as `_lmul_` is now properly tested.\n\n> 10. `hadamard_product`: in the examples and tests, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.\n\nDone.\n \n> 11. `hadamard_product`: I think that\n> {{{\n> #!python\n> Matrix(tuple(\n>     srow.outer_product(orow).list()\n>     for srow in self.mu[a].rows()\n>     for orow in other.mu[a].rows())))\n> \n> }}}\n>     could be simplified to `self.mu[a].tensor_product(other.mu[a])` which I consider to be more concise and clearer. I am not sure whether rewriting the left vectors to matrices, then calling `tensor_product` on the two single-row matrices and then extracting the first row would be more readable, too (similarly for the right vectors).\n\nIndeed, using `tensor_product` improves the code a lot. It is now used for the vectors, too.\n\n> 12. `one_hadamard`: I do not think that `one = ZZ(1)` is appropriate for all values of `coefficient_ring`.\n\nChanged.",
    "created_at": "2021-06-25T11:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292048",
    "user": "@dkrenn"
}
```

Replying to [comment:22 cheuberg]:
> 1. Please reconsider punctuation in input and output blocks.

Done.

> 2. I am not sure whether handling of automatic minimization is best done in the methods `_add_` and `hadamard_product` (especially unsure about the first because it would be rather painful to call it with disabled minimization, overriding the convention about private methods). Perhaps the parent could have a flag whether minimization should always be performed or not?

I agree that this is not optimal. I've now written a decorator `minimize_result` and introduce a flag in the parent for controlling the behavior.

> 3. `_add_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

Done.

> 4. `_add_`: parameter `minimize=False` is not tested.

Now tested (indirectly) in the new decorator `minimize_result`

> 5. `_neg_`: in the example, `.is_trivial_zero()` could be used.

Indeed. Done.

> 6. `_rmul_`: in the example, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

Done.

> 7. `_rmul_`: I am not convinced that this method is called by the tests: In order to understand the problems with the tests of `_lmul_`, I deliberately introduced an error here and it was not raised in the tests.

The problem was, that the `RecognizableSeries` was derived from `Element` and not `ModuleElement`, therefore, a fall-back action using a double-and-add algorithm where doubling is done by addition, was used and so `_rmul_` and `_lmul_` were actually never called.

Fixed now and added a test to make sure these methods are called.

Also, left and right was switched; fixed.

> 8. `_lmul_`: The available (untested) test does not seem to be completely rewritten to this case; the last lines seem to belong to the test of `_rmul_`.

Output removed.

> 9. `_lmul_`: please add a test where `_lmul_` is called explicitly.

Not needed anymore, as `_lmul_` is now properly tested.

> 10. `hadamard_product`: in the examples and tests, the (new) method `linear_representation` introduced during review of a previous ticket could be used instead of extracting the information manually.

Done.
 
> 11. `hadamard_product`: I think that
> {{{
> #!python
> Matrix(tuple(
>     srow.outer_product(orow).list()
>     for srow in self.mu[a].rows()
>     for orow in other.mu[a].rows())))
> 
> }}}
>     could be simplified to `self.mu[a].tensor_product(other.mu[a])` which I consider to be more concise and clearer. I am not sure whether rewriting the left vectors to matrices, then calling `tensor_product` on the two single-row matrices and then extracting the first row would be more readable, too (similarly for the right vectors).

Indeed, using `tensor_product` improves the code a lot. It is now used for the vectors, too.

> 12. `one_hadamard`: I do not think that `one = ZZ(1)` is appropriate for all values of `coefficient_ring`.

Changed.



---

archive/issue_comments_292049.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-25T11:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292049",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292050.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-25T12:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292050",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292051.json:
```json
{
    "body": "Thank you. Do you have any idea why `E * 2` calls `E._lmul_` twice (for `2 * E`, `E._rmul_` is called once, as expected) in the newly written test in `_rmul_`?\n\nApart from that question, I think that this ticket is ready to be merged once a patchbot is happy (might be some time because of #32048).",
    "created_at": "2021-06-26T15:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292051",
    "user": "@cheuberg"
}
```

Thank you. Do you have any idea why `E * 2` calls `E._lmul_` twice (for `2 * E`, `E._rmul_` is called once, as expected) in the newly written test in `_rmul_`?

Apart from that question, I think that this ticket is ready to be merged once a patchbot is happy (might be some time because of #32048).



---

archive/issue_comments_292052.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-06-26T15:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292052",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_292053.json:
```json
{
    "body": "Replying to [comment:28 cheuberg]:\n> Thank you. Do you have any idea why `E * 2` calls `E._lmul_` twice (for `2 * E`, `E._rmul_` is called once, as expected) in the newly written test in `_rmul_`?\n\nYes. The first left and right, resp., scalar multiplication that is performed in a session has one additional call coming from the coercion framework after discovering the action, because, when I remember correctly, a dummy multiplication is performed to check if that works. Now `2 * E` is computed earlier in the test, so this additional call of `_rmul_` is done there (but not seen). Removing the tests `2 * E` and also `1 * E` results in the same behavior for both `_rmul_` and `_lmul_`.\n\n> Apart from that question, I think that this ticket is ready to be merged once a patchbot is happy (might be some time because of #32048).\n\nI'll put it to positive_review.",
    "created_at": "2021-06-27T09:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292053",
    "user": "@dkrenn"
}
```

Replying to [comment:28 cheuberg]:
> Thank you. Do you have any idea why `E * 2` calls `E._lmul_` twice (for `2 * E`, `E._rmul_` is called once, as expected) in the newly written test in `_rmul_`?

Yes. The first left and right, resp., scalar multiplication that is performed in a session has one additional call coming from the coercion framework after discovering the action, because, when I remember correctly, a dummy multiplication is performed to check if that works. Now `2 * E` is computed earlier in the test, so this additional call of `_rmul_` is done there (but not seen). Removing the tests `2 * E` and also `1 * E` results in the same behavior for both `_rmul_` and `_lmul_`.

> Apart from that question, I think that this ticket is ready to be merged once a patchbot is happy (might be some time because of #32048).

I'll put it to positive_review.



---

archive/issue_comments_292054.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2021-06-27T09:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292054",
    "user": "@dkrenn"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_292055.json:
```json
{
    "body": "Replying to [comment:29 dkrenn]:\n> I'll put it to positive_review.\n\nBack to needs_review as the patchbot has not run yet.",
    "created_at": "2021-06-27T09:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292055",
    "user": "@dkrenn"
}
```

Replying to [comment:29 dkrenn]:
> I'll put it to positive_review.

Back to needs_review as the patchbot has not run yet.



---

archive/issue_comments_292056.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-06-27T09:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292056",
    "user": "@dkrenn"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_292057.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-04T14:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292057",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_292058.json:
```json
{
    "body": "The `pyflakes` finding by the patchbot should be adressed:\n\n```\nsrc/sage/combinat/recognizable_series.py:1672:9 'sage.rings.integer_ring.ZZ' imported but unused\n```\n",
    "created_at": "2021-07-04T14:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292058",
    "user": "@cheuberg"
}
```

The `pyflakes` finding by the patchbot should be adressed:

```
src/sage/combinat/recognizable_series.py:1672:9 'sage.rings.integer_ring.ZZ' imported but unused
```




---

archive/issue_comments_292059.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T11:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292059",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_292060.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-06T11:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292060",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_292061.json:
```json
{
    "body": "Replying to [comment:31 cheuberg]:\n> The `pyflakes` finding by the patchbot should be adressed:\n> {{{\n> src/sage/combinat/recognizable_series.py:1672:9 'sage.rings.integer_ring.ZZ' imported but unused\n> }}}\n\nDone.",
    "created_at": "2021-07-06T11:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292061",
    "user": "@dkrenn"
}
```

Replying to [comment:31 cheuberg]:
> The `pyflakes` finding by the patchbot should be adressed:
> {{{
> src/sage/combinat/recognizable_series.py:1672:9 'sage.rings.integer_ring.ZZ' imported but unused
> }}}

Done.



---

archive/issue_comments_292062.json:
```json
{
    "body": "Thank you. Feel free to set to positive review once the patchbot is happy.",
    "created_at": "2021-07-06T11:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292062",
    "user": "@cheuberg"
}
```

Thank you. Feel free to set to positive review once the patchbot is happy.



---

archive/issue_comments_292063.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-06T17:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292063",
    "user": "@cheuberg"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_292064.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-09T20:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21081",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21081#issuecomment-292064",
    "user": "@vbraun"
}
```

Resolution: fixed
