# Issue 17865: Arithmetic functions

archive/issues_017865.json:
```json
{
    "body": "CC:  @rwst @kcrisman @slel\n\nKeywords: arithmetic functions\n\nThis ticket is mainly a playground for ideas (for now). Anyone: Feel free to take over... :)\n\nI would like to see some way to work with exact arithmetic functions.\nIn particular when dealing with series (e.g. Dirichlet series but also other series):\nIf a good implementation of function spaces is around then a series could be stored (in an exact way) by specifying it's coefficient function. I.e. allowing/using arithmetic functions as element constructor arguments for (Dirichlet) series. Also see http://trac.sagemath.org/ticket/16477 for the Dirichlet series ticket.\n\nNice subspaces are given by the ring of arithmetic functions with multiplication by convolution.\nThis corresponds to the usual product of the associated Dirichlet series (which acts like a Fourier transform of the arithmetic function).\nOther (smaller) subspaces are given by multiplicative or completely multiplicative functions.\nOne idea might be to use the symbolic ring. But it has trouble with \"sums\" which are absolutely crucial for most operations with arithmetic functions.\n\nI tried to start with one possible (quick) POC implementation.\n\nHere is a simple example:\n\n```\nsigma3 = ArithmeticFunction(lambda n: sigma(n,3), lambda n,_: \"sigma({},3)\".format(n), lambda n,_: \"\\\\sigma_{{3}}\\\\left({}\\\\right)\".format(n))\nsigma3^2\nshow(sigma3^2)\n(sigma3^2)(5)\n```\n\n\nMain issues I see are:\n- representations of coefficients / functions\n- simplifications of functions/representations:\n  For instance we could group sums into one big sum with many conditions over many summation variables.\n  If summation conditions are handled carefully/abstractly this could allow some powerful simplifications.\n- comparisons of functions (very hard!)\n- finding the right way to go about it (categories/etc)\n- trivial scalar multiplication: How to make/represent it as simple as possible?\n\nClearly a lot of the structure comes from the codomain. If it has a ring structure it carries over to the function space and with natural numbers as domain we can define a convolution product. An algebra would also carry over nicely. What's the right general setup for this?\n\nI'm all ears for suggestions / better alternatives.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18102\n\n",
    "created_at": "2015-04-01T20:51:14Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-wishlist",
    "title": "Arithmetic functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17865",
    "user": "https://github.com/jjermann"
}
```
CC:  @rwst @kcrisman @slel

Keywords: arithmetic functions

This ticket is mainly a playground for ideas (for now). Anyone: Feel free to take over... :)

I would like to see some way to work with exact arithmetic functions.
In particular when dealing with series (e.g. Dirichlet series but also other series):
If a good implementation of function spaces is around then a series could be stored (in an exact way) by specifying it's coefficient function. I.e. allowing/using arithmetic functions as element constructor arguments for (Dirichlet) series. Also see http://trac.sagemath.org/ticket/16477 for the Dirichlet series ticket.

Nice subspaces are given by the ring of arithmetic functions with multiplication by convolution.
This corresponds to the usual product of the associated Dirichlet series (which acts like a Fourier transform of the arithmetic function).
Other (smaller) subspaces are given by multiplicative or completely multiplicative functions.
One idea might be to use the symbolic ring. But it has trouble with "sums" which are absolutely crucial for most operations with arithmetic functions.

I tried to start with one possible (quick) POC implementation.

Here is a simple example:

```
sigma3 = ArithmeticFunction(lambda n: sigma(n,3), lambda n,_: "sigma({},3)".format(n), lambda n,_: "\\sigma_{{3}}\\left({}\\right)".format(n))
sigma3^2
show(sigma3^2)
(sigma3^2)(5)
```


Main issues I see are:
- representations of coefficients / functions
- simplifications of functions/representations:
  For instance we could group sums into one big sum with many conditions over many summation variables.
  If summation conditions are handled carefully/abstractly this could allow some powerful simplifications.
- comparisons of functions (very hard!)
- finding the right way to go about it (categories/etc)
- trivial scalar multiplication: How to make/represent it as simple as possible?

Clearly a lot of the structure comes from the codomain. If it has a ring structure it carries over to the function space and with natural numbers as domain we can define a convolution product. An algebra would also carry over nicely. What's the right general setup for this?

I'm all ears for suggestions / better alternatives.

Issue created by migration from https://trac.sagemath.org/ticket/18102





---

archive/issue_comments_239336.json:
```json
{
    "body": "Attachment [dgf-cases.txt](tarball://root/attachments/some-uuid/ticket18102/dgf-cases.txt) by @jjermann created at 2015-04-01 21:04:20\n\nGenerating series (GS), Coefficient function (CF), Dirichlet series (DS)",
    "created_at": "2015-04-01T21:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17865#issuecomment-239336",
    "user": "https://github.com/jjermann"
}
```

Attachment [dgf-cases.txt](tarball://root/attachments/some-uuid/ticket18102/dgf-cases.txt) by @jjermann created at 2015-04-01 21:04:20

Generating series (GS), Coefficient function (CF), Dirichlet series (DS)



---

archive/issue_comments_239337.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2015-04-01T21:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17865#issuecomment-239337",
    "user": "https://github.com/jjermann"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_239338.json:
```json
{
    "body": "EDIT:\n\nSorry, wrong ticket (and not much content anyway, I admit).\n\nOLD POST:\n\nI have written (a long time ago) a domain for Dirichlet series in FriCAS.  If you install FriCAS (with `sage -i fricas`, you can find the source in\n\n\n```\n/sage/local/lib/fricas/target/x86_64-unknown-linux/src/algebra/\n```\n",
    "created_at": "2015-04-01T21:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17865#issuecomment-239338",
    "user": "https://github.com/mantepse"
}
```

EDIT:

Sorry, wrong ticket (and not much content anyway, I admit).

OLD POST:

I have written (a long time ago) a domain for Dirichlet series in FriCAS.  If you install FriCAS (with `sage -i fricas`, you can find the source in


```
/sage/local/lib/fricas/target/x86_64-unknown-linux/src/algebra/
```

