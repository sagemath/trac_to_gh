# Issue 23321: More use for PackageNotFoundError

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2017-07-31 10:48:44

From `RuntimeError("You must install the optional gap_packages package.")` to `PackageNotFoundError("gap_packages")` etc.


---

Comment by jmantysalo created at 2017-07-31 10:49:33

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2017-07-31 10:49:33

New commits:


---

Comment by tscrim created at 2017-07-31 10:57:48

I do not see why this change is needed:

```diff
diff --git a/src/sage/graphs/generic_graph.py b/src/sage/graphs/generic_graph.py
index 8825adf..dc52a4f 100644
--- a/src/sage/graphs/generic_graph.py
+++ b/src/sage/graphs/generic_graph.py
`@``@` -8078,7 +8077,7 `@``@` class GenericGraph(GenericGraph_pyx):
            sage: abs(flow_ff-flow_igraph) < 0.00001         # optional python_igraph
            True
         """
-        from sage.misc.package import is_package_installed
+        from sage.misc.package import is_package_installed, PackageNotFoundError
         self._scream_if_not_simple(allow_loops=True)
         if vertex_bound and algorithm in ["FF", "igraph"]:
             raise ValueError("This method does not support both " +
```

I would also instead do this change:

```diff
diff --git a/src/sage/interfaces/kash.py b/src/sage/interfaces/kash.py
index a0d8ad5..a9a9515 100644
--- a/src/sage/interfaces/kash.py
+++ b/src/sage/interfaces/kash.py
`@``@` -517,10 +517,11 `@``@` class Kash(Expect):
         return 'quit;'
 
     def _start(self):
         try:
             Expect._start(self)
         except RuntimeError:
-            raise RuntimeError("You must install the optional Kash package to use Kash from Sage.")
+            from sage.misc.package import PackageNotFoundError
+            raise PackageNotFoundError("kash")
         # Turn off the annoying timer.
         self.eval('Time(false);')
```

in order to make the import happen only when it is necessary.


---

Comment by git created at 2017-07-31 11:04:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2017-07-31 11:05:19

Thanks Travis. First was a missing change later in the function, added.

I also did the second change.


---

Comment by tscrim created at 2017-07-31 11:06:35

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-07-31 11:06:35

Thanks. LGTM.


---

Comment by vbraun created at 2017-08-05 23:27:08

Resolution: fixed


---

Comment by moritz created at 2017-08-24 09:00:08

sorry, I mixed up a trac number
