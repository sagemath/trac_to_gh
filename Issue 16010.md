# Issue 16010: Abuse of Modules() for modules over noncommutative rings

archive/issues_016010.json:
```json
{
    "body": "CC:  @nthiery simonking @orlitzky\n\nKeywords: modules, categories, associativity,\n\nWe have `LeftModules` and `RightModules` functorial constructions (not sure if since #10963 or already before), and they should be used. `Modules` implements left and right multiplication to be *the same*, which causes misleading and counterintuitive non-associativity issues.\n\nI'm currently running the (short) doctests of src/sage with a commit that adds a warning every time Modules(A) is called for A noncommutative. I'll post the results once it's done. So far:\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/groups/finitely_presented.py  # 2 doctests failed\nsage -t src/sage/matrix/matrix_sparse.pyx  # 4 doctests failed\nsage -t src/sage/matrix/matrix0.pyx  # 5 doctests failed\nsage -t src/sage/matrix/matrix2.pyx  # 1 doctest failed\nsage -t src/sage/matrix/matrix_space.py  # 2 doctests failed\nDoctests interrupted: 231/2069 files tested\n----------------------------------------------------------------------\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/16247\n\n",
    "created_at": "2014-04-27T03:42:08Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Abuse of Modules() for modules over noncommutative rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16010",
    "user": "https://github.com/darijgr"
}
```
CC:  @nthiery simonking @orlitzky

Keywords: modules, categories, associativity,

We have `LeftModules` and `RightModules` functorial constructions (not sure if since #10963 or already before), and they should be used. `Modules` implements left and right multiplication to be *the same*, which causes misleading and counterintuitive non-associativity issues.

I'm currently running the (short) doctests of src/sage with a commit that adds a warning every time Modules(A) is called for A noncommutative. I'll post the results once it's done. So far:

```
----------------------------------------------------------------------
sage -t src/sage/groups/finitely_presented.py  # 2 doctests failed
sage -t src/sage/matrix/matrix_sparse.pyx  # 4 doctests failed
sage -t src/sage/matrix/matrix0.pyx  # 5 doctests failed
sage -t src/sage/matrix/matrix2.pyx  # 1 doctest failed
sage -t src/sage/matrix/matrix_space.py  # 2 doctests failed
Doctests interrupted: 231/2069 files tested
----------------------------------------------------------------------
```

Issue created by migration from https://trac.sagemath.org/ticket/16247





---

archive/issue_comments_207615.json:
```json
{
    "body": "Changing keywords from \"modules, categories, associativity,\" to \"modules, categories, associativity, matrices\".",
    "created_at": "2014-04-27T03:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16010#issuecomment-207615",
    "user": "https://github.com/darijgr"
}
```

Changing keywords from "modules, categories, associativity," to "modules, categories, associativity, matrices".



---

archive/issue_comments_207616.json:
```json
{
    "body": "Thanks for exploring how to clean this up.\n\nJust for the record: we have had left/right/bimodules since 2009 and probably even before. Also, at this point, they are just categories over a base ring, not functorial constructions.\n\nOne thing to check is how this was handled in Axiom. MuPAD was roughly as here: on the lousy side in the non commutative case.",
    "created_at": "2014-04-27T07:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16010#issuecomment-207616",
    "user": "https://github.com/nthiery"
}
```

Thanks for exploring how to clean this up.

Just for the record: we have had left/right/bimodules since 2009 and probably even before. Also, at this point, they are just categories over a base ring, not functorial constructions.

One thing to check is how this was handled in Axiom. MuPAD was roughly as here: on the lousy side in the non commutative case.



---

archive/issue_events_047883.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47883"
}
```



---

archive/issue_events_047884.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47884"
}
```



---

archive/issue_events_047885.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47885"
}
```



---

archive/issue_events_047886.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T16:50:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47886"
}
```



---

archive/issue_events_047887.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T16:50:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47887"
}
```



---

archive/issue_events_047888.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47888"
}
```



---

archive/issue_events_047889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47889"
}
```



---

archive/issue_comments_207617.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16010#issuecomment-207617",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_047890.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47890"
}
```



---

archive/issue_events_047891.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47891"
}
```



---

archive/issue_comments_207618.json:
```json
{
    "body": "I got here through #32250, in which I propose a precise definition for (magmatic) algebras over an associative unital ring, and comment:2:ticket:32250.\n\nMy personal preferred solution would be a variant of the first option in the ticket description: make `Modules` only support *commutative* base rings, and define a module over a commutative ring *R* to be a symmetric (*R*, *R*)-bimodule.  This feels most in line with how modules are currently used in Sage.  Supporting non-commutative rings with this definition would probably be more confusing than justified by the little amount of added functionality.",
    "created_at": "2021-07-27T11:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16010#issuecomment-207618",
    "user": "https://github.com/pjbruin"
}
```

I got here through #32250, in which I propose a precise definition for (magmatic) algebras over an associative unital ring, and comment:2:ticket:32250.

My personal preferred solution would be a variant of the first option in the ticket description: make `Modules` only support *commutative* base rings, and define a module over a commutative ring *R* to be a symmetric (*R*, *R*)-bimodule.  This feels most in line with how modules are currently used in Sage.  Supporting non-commutative rings with this definition would probably be more confusing than justified by the little amount of added functionality.



---

archive/issue_comments_207619.json:
```json
{
    "body": "Replying to [comment:11 pbruin]:\n> \n> My personal preferred solution would be a variant of the first option in the ticket description: make `Modules` only support *commutative* base rings, and define a module over a commutative ring *R* to be a symmetric (*R*, *R*)-bimodule.  This feels most in line with how modules are currently used in Sage.  Supporting non-commutative rings with this definition would probably be more confusing than justified by the little amount of added functionality.\n\n\nI agree. This is what the existing `Modules?` docstring is trying to say. The cited `UserWarning` more or less says that your ring should be commutative, and that your left- and right-module actions had better be the same. The definition should match what Sage is actually capable of.\n\nThis would leave us with new problem though, that of defining a symmetric bimodule within sage. Maybe we should just be explicit about the axioms instead of using that term.",
    "created_at": "2021-07-30T11:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16010#issuecomment-207619",
    "user": "https://github.com/orlitzky"
}
```

Replying to [comment:11 pbruin]:
> 
> My personal preferred solution would be a variant of the first option in the ticket description: make `Modules` only support *commutative* base rings, and define a module over a commutative ring *R* to be a symmetric (*R*, *R*)-bimodule.  This feels most in line with how modules are currently used in Sage.  Supporting non-commutative rings with this definition would probably be more confusing than justified by the little amount of added functionality.


I agree. This is what the existing `Modules?` docstring is trying to say. The cited `UserWarning` more or less says that your ring should be commutative, and that your left- and right-module actions had better be the same. The definition should match what Sage is actually capable of.

This would leave us with new problem though, that of defining a symmetric bimodule within sage. Maybe we should just be explicit about the axioms instead of using that term.



---

archive/issue_events_047892.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47892"
}
```



---

archive/issue_events_047893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47893"
}
```



---

archive/issue_events_047894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47894"
}
```



---

archive/issue_events_047895.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47895"
}
```



---

archive/issue_events_047896.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47896"
}
```



---

archive/issue_events_047897.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16010",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16010#event-47897"
}
```
