# Issue 25118: Upgrade maxima to 5.41.0

Issue created by migration from Trac.

Original creator: @timokau

Original creation time: 2018-05-13 17:52:29

CC:  fbissey embray

Keywords: upgrade

This upgrades maxima to 5.41.0, available at

http://sourceforge.net/projects/maxima/files/Maxima-source/

The doctest changes are just different ways to write the same results, no semantics changed.


---

Comment by git created at 2018-05-13 17:53:44

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @timokau created at 2018-05-13 19:41:36

Changing status from new to needs_review.


---

Comment by @timokau created at 2018-05-13 20:35:28

Changing type from task to enhancement.


---

Comment by jdemeyer created at 2018-05-14 08:32:08

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-05-14 08:32:08

If you want to run a test but ignore its output, use `# random` instead of `# not tested`.

For example, we do want to test that `maxima.version()` works (i.e. it does not raise an exception).


---

Comment by git created at 2018-05-14 09:35:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @timokau created at 2018-05-14 09:35:44

Good point, changed.
----
New commits:


---

Comment by @timokau created at 2018-05-14 09:35:44

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2018-05-14 13:17:51

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2018-05-14 13:17:51

Why did you change back the download link? A direct link is easiest for the release manager.


---

Comment by @timokau created at 2018-05-14 13:50:07

That was by mistake, I must've hit the reverse button or something.


---

Comment by vbraun created at 2018-05-15 22:33:12

Resolution: fixed


---

Comment by chapoton created at 2018-05-19 10:10:59

This update may have broken sage-python3, which does no longer start anymore...

```
    575         self._prompt_wait = ([self._prompt.encode('ascii')] +
--> 576                              [re.compile(x) for x in self._ask] +
        global re.compile = <function compile at 0x7f7eb678c8c8>
        global x = undefined
        self._ask = [b'zero or nonzero\\?', b'an integer\\?', b'positive, negat\
ive or zero\\?', b'positive or negative\\?', b'positive or zero\\?', b'equal to\
 .*\\?']
    577                              [b'Break [0-9]+'])  # note that you might \
need to change _expect_expr if you
    578                                                  # change this
    579         self._error_re = re.compile('(Principal Value|debugmode|incorre\
ct syntax|Maxima encountered a Lisp error)')
    580         self._display2d = False
    581
    582     def set_seed(self, seed=None):
    583         """
    584         http://maxima.sourceforge.net/docs/manual/maxima_10.html
    585         make_random_state (n) returns a new random state object created\
 from an
    586         integer seed value equal to n modulo 2^32. n may be negative.
    587
    588         EXAMPLES::
    589
    590             sage: m = Maxima()
...
AttributeError: 'bytes' object has no attribute 'encode'
```



---

Comment by embray created at 2018-05-21 12:04:21

Hmm, I don't think this is what did it.  Probably more likely one of my patches--probably one of the older ones that only recently got merged, and actually didn't work with some more recent patches.


---

Comment by chapoton created at 2018-05-21 12:06:09

Yes, you are right. This should be fixed by #24269, which needs some care.


---

Comment by embray created at 2018-05-21 12:07:06

Ah, #24269 is one of the tickets I was thinking might have caused the breakage.  I thought it was already merged recently.
