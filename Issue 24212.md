# Issue 24212: doctest failure in matrix/special.py

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2017-12-30 09:41:25

On sage-8.2.beta1 with many optional package installed

```
sage -t --long src/sage/matrix/special.py
**********************************************************************
File "src/sage/matrix/special.py", line 413, in sage.matrix.special.random_matrix
Failed example:
    random_matrix(K, 2, 5)
Expected:
    [      1       a       1 2*a + 1       2]
    [    2*a   a + 2       0       2       1]
Got:
    [      a       0       2       2       1]
    [      a   a + 2   a + 1 2*a + 1       2]
**********************************************************************
File "src/sage/matrix/special.py", line 417, in sage.matrix.special.random_matrix
Failed example:
    random_matrix(RR, 3, 4, density=0.66)
Expected:
    [ 0.000000000000000 -0.806696574554030 -0.693915509972359  0.000000000000000]
    [ 0.629781664418083  0.000000000000000 -0.833709843116637  0.000000000000000]
    [ 0.922346867410064  0.000000000000000  0.000000000000000 -0.940316454178921]
Got:
    [ 0.000000000000000  0.676820913302280 -0.940316454178921  0.000000000000000]
    [ 0.605928518093544  0.000000000000000 -0.693915509972359  0.000000000000000]
    [ 0.629781664418083  0.000000000000000  0.000000000000000 -0.741052529138296]
**********************************************************************
File "src/sage/matrix/special.py", line 422, in sage.matrix.special.random_matrix
Failed example:
    A = random_matrix(ComplexField(32), 3, density=0.8, sparse=True); A
Expected:
    [                 0.000000000  0.399739209 + 0.909948633*I                  0.000000000]
    [-0.361911424 - 0.455087671*I -0.687810605 + 0.460619713*I  0.625520058 - 0.360952012*I]
    [                 0.000000000                  0.000000000 -0.162196416 - 0.193242896*I]
Got:
    [                 0.000000000  0.332155072 - 0.728572036*I                  0.000000000]
    [ 0.577682751 - 0.276405104*I -0.307172821 + 0.611092515*I -0.162196416 - 0.193242896*I]
    [                 0.000000000                  0.000000000  0.399739209 + 0.909948633*I]
**********************************************************************
1 item had failures:
   3 of  62 in sage.matrix.special.random_matrix
    [439 tests, 3 failures, 1.88 s]
```


See full patchbot log at [quasar log](https://patchbot.sagemath.org/log/0/Ubuntu/16.04/x86_64/4.4.0-104-generic/quasar/2017-12-28%2017:39:23).


---

Comment by vdelecroix created at 2017-12-30 09:47:29

Changing component from PLEASE CHANGE to documentation.


---

Comment by jdemeyer created at 2017-12-30 17:15:13

Could this be a "duplicate" of #24445?


---

Comment by vdelecroix created at 2017-12-30 18:00:13

Replying to [comment:5 jdemeyer]:
> Could this be a "duplicate" of #24445?

I believe the answer is yes. Thanks for the pointer.


---

Comment by vdelecroix created at 2017-12-30 18:18:24

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-12-30 18:20:02

Resolution: duplicate
