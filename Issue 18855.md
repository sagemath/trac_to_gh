# Issue 18855: Differentiable manifolds: tangent spaces

Issue created by migration from https://trac.sagemath.org/ticket/19092

Original creator: egourgoulhon

Original creation time: 2015-08-26 13:39:03

Assignee: egourgoulhon

CC:  mbejger

Keywords: differentiable manifold, tangent vector, tangent space

This ticket implements tangent vectors and tangent spaces on differentiable manifolds. This is a follow-up of #18843 within the [SageManifolds project](http://sagemanifolds.obspm.fr/) (see the metaticket #18528 for an overview). As in #18843, the non-discrete topological field K over which the differentiable manifold is defined is generic, although in most applications, K=*R* or K=*C*.

This ticket implements the following Python classes:
- the parent class `TangentSpace` for tangent spaces to a differentiable manifold
- the element class `TangentVector` for tangent vectors to a differentiable manifold
It also implements 
- the method `at()` in tensor field classes (introduced in #18843) to take the value of a given
  tensor field (in particular a vector field) at a given point;  the method `at()` is
  implemented for vector frames and coframes as well. 
- the method `plot()` in class `VectorField`, to get some graphical representations of vector
  fields 
- the methods `differential()`, `differential_functions()` and `jacobian_matrix()` to the class 
  `DiffMap` introduced in #18783 (differential of a map between differentiable manifolds at a
  given point).


---

Comment by egourgoulhon created at 2015-08-26 13:39:33

Changing type from PLEASE CHANGE to enhancement.


---

Comment by git created at 2015-08-26 22:05:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-08-27 13:01:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-14 14:21:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-14 20:44:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-10-15 16:17:36

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by egourgoulhon created at 2015-10-15 21:01:06

Changing status from new to needs_review.


---

Comment by git created at 2015-10-19 09:24:21

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-11-22 20:51:43

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-12-04 08:48:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-06 22:47:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-18 15:39:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-01-03 21:56:37

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2016-01-11 21:06:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-01-30 13:56:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-05-06 16:09:08

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2016-05-10 13:10:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-06-13 12:38:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-15 13:09:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-10-03 12:53:27

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2016-10-03 20:29:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-10-24 08:43:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-10 17:29:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2016-11-10 17:29:23

Okay, I've made it through this one. Mostly it is documentation format changes, but the exception:

For plotting, I used the ``@`options` for `scale` and `max_range` as these seemed like something a user might want to not have to pass every single time (you change change their default with `v.plot.options`). From the user perspective, nothing really changes unless you explicitly set said default value.

So if you agree with my changes, then you can set a positive review.


---

Comment by tscrim created at 2016-11-10 17:31:21

I'm handling rebasing #19124 as I'm starting my review of that now.


---

Comment by git created at 2016-11-10 19:09:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-11-13 10:56:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2016-11-13 11:19:49

Thank you so much for the review!

In the first commit above (23eb9d8), I've corrected a doctest error and fixed some documentation issue revealed by the patchbot.

In the second commit (b4a4530), I've added sphinx directives to render the 3D plots in the documentation of `VectorField.plot` (as well as in `RealChart.plot`), on the same footing as what is now done in the "3D Graphics" section of the reference manual.

Thanks for the addition of ``@`options` to `VectorField.plot`; I've added `color` to these options, to be consistent with what is done in `RealChart.plot`. I've also added some documentation about the use of `v.plot.options`.

A question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that _nb_ is not a standard English abbreviation for _number_, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).


---

Comment by tscrim created at 2016-11-13 16:32:56

Replying to [comment:33 egourgoulhon]:
> Thank you so much for the review!

Not a problem; sorry it took so long.

> A question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that _nb_ is not a standard English abbreviation for _number_, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).

Not to my knowledge. The standard abbreviation is "no." (with a period) but "num" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.


---

Comment by egourgoulhon created at 2016-11-13 16:53:07

Replying to [comment:34 tscrim]:
> 
> Not to my knowledge. The standard abbreviation is "no." (with a period) but "num" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.
>
OK, so let use `number_values` everywhere. I am going to change it in `RealChart.plot`.


---

Comment by tscrim created at 2016-11-13 16:59:01

Thanks.


---

Comment by git created at 2016-11-13 17:36:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2016-11-13 17:38:21

Change `nb_values` --> `number_values` done.


---

Comment by tscrim created at 2016-11-13 17:47:26

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-11-13 17:47:26

I'm sorry I missed that on the previous ticket. LGTM. Thank you.


---

Comment by egourgoulhon created at 2016-11-13 18:14:17

Thanks for the review!


---

Comment by vbraun created at 2016-11-17 18:02:03

Resolution: fixed
