# Issue 18855: Differentiable manifolds: tangent spaces

archive/issues_018855.json:
```json
{
    "body": "Assignee: egourgoulhon\n\nCC:  mbejger\n\nKeywords: differentiable manifold, tangent vector, tangent space\n\nThis ticket implements tangent vectors and tangent spaces on differentiable manifolds. This is a follow-up of #18843 within the [SageManifolds project](http://sagemanifolds.obspm.fr/) (see the metaticket #18528 for an overview). As in #18843, the non-discrete topological field K over which the differentiable manifold is defined is generic, although in most applications, K=**R** or K=**C**.\n\nThis ticket implements the following Python classes:\n- the parent class `TangentSpace` for tangent spaces to a differentiable manifold\n- the element class `TangentVector` for tangent vectors to a differentiable manifold\nIt also implements \n- the method `at()` in tensor field classes (introduced in #18843) to take the value of a given\n  tensor field (in particular a vector field) at a given point;  the method `at()` is\n  implemented for vector frames and coframes as well. \n- the method `plot()` in class `VectorField`, to get some graphical representations of vector\n  fields \n- the methods `differential()`, `differential_functions()` and `jacobian_matrix()` to the class \n  `DiffMap` introduced in #18783 (differential of a map between differentiable manifolds at a\n  given point).\n\nIssue created by migration from https://trac.sagemath.org/ticket/19092\n\n",
    "created_at": "2015-08-26T13:39:03Z",
    "labels": [
        "geometry",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Differentiable manifolds: tangent spaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18855",
    "user": "egourgoulhon"
}
```
Assignee: egourgoulhon

CC:  mbejger

Keywords: differentiable manifold, tangent vector, tangent space

This ticket implements tangent vectors and tangent spaces on differentiable manifolds. This is a follow-up of #18843 within the [SageManifolds project](http://sagemanifolds.obspm.fr/) (see the metaticket #18528 for an overview). As in #18843, the non-discrete topological field K over which the differentiable manifold is defined is generic, although in most applications, K=**R** or K=**C**.

This ticket implements the following Python classes:
- the parent class `TangentSpace` for tangent spaces to a differentiable manifold
- the element class `TangentVector` for tangent vectors to a differentiable manifold
It also implements 
- the method `at()` in tensor field classes (introduced in #18843) to take the value of a given
  tensor field (in particular a vector field) at a given point;  the method `at()` is
  implemented for vector frames and coframes as well. 
- the method `plot()` in class `VectorField`, to get some graphical representations of vector
  fields 
- the methods `differential()`, `differential_functions()` and `jacobian_matrix()` to the class 
  `DiffMap` introduced in #18783 (differential of a map between differentiable manifolds at a
  given point).

Issue created by migration from https://trac.sagemath.org/ticket/19092





---

archive/issue_comments_258020.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-08-26T13:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258020",
    "user": "egourgoulhon"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_258021.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T22:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258021",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-27T13:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258022",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258023.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-14T14:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258023",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-14T20:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258024",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258025.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-15T16:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258025",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258026.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-15T21:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258026",
    "user": "egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258027.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-19T09:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258027",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258028.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-11-22T20:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258028",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258029.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-04T08:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258029",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258030.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-06T22:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258030",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258031.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-18T15:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258031",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258032.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-01-03T21:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258032",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258033.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-11T21:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258033",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258034.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T13:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258034",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258035.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-05-06T16:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258035",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-10T13:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258036",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258037.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-13T12:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258037",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258038.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-15T13:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258038",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258039.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-10-03T12:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258039",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_258040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-03T20:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258040",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-24T08:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258041",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258042.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-10T17:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258042",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258043.json:
```json
{
    "body": "Okay, I've made it through this one. Mostly it is documentation format changes, but the exception:\n\nFor plotting, I used the ``@`options` for `scale` and `max_range` as these seemed like something a user might want to not have to pass every single time (you change change their default with `v.plot.options`). From the user perspective, nothing really changes unless you explicitly set said default value.\n\nSo if you agree with my changes, then you can set a positive review.",
    "created_at": "2016-11-10T17:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258043",
    "user": "tscrim"
}
```

Okay, I've made it through this one. Mostly it is documentation format changes, but the exception:

For plotting, I used the ``@`options` for `scale` and `max_range` as these seemed like something a user might want to not have to pass every single time (you change change their default with `v.plot.options`). From the user perspective, nothing really changes unless you explicitly set said default value.

So if you agree with my changes, then you can set a positive review.



---

archive/issue_comments_258044.json:
```json
{
    "body": "I'm handling rebasing #19124 as I'm starting my review of that now.",
    "created_at": "2016-11-10T17:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258044",
    "user": "tscrim"
}
```

I'm handling rebasing #19124 as I'm starting my review of that now.



---

archive/issue_comments_258045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-10T19:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258046.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-13T10:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258046",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258047.json:
```json
{
    "body": "Thank you so much for the review!\n\nIn the first commit above (23eb9d8), I've corrected a doctest error and fixed some documentation issue revealed by the patchbot.\n\nIn the second commit (b4a4530), I've added sphinx directives to render the 3D plots in the documentation of `VectorField.plot` (as well as in `RealChart.plot`), on the same footing as what is now done in the \"3D Graphics\" section of the reference manual.\n\nThanks for the addition of ``@`options` to `VectorField.plot`; I've added `color` to these options, to be consistent with what is done in `RealChart.plot`. I've also added some documentation about the use of `v.plot.options`.\n\nA question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that *nb* is not a standard English abbreviation for *number*, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).",
    "created_at": "2016-11-13T11:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258047",
    "user": "egourgoulhon"
}
```

Thank you so much for the review!

In the first commit above (23eb9d8), I've corrected a doctest error and fixed some documentation issue revealed by the patchbot.

In the second commit (b4a4530), I've added sphinx directives to render the 3D plots in the documentation of `VectorField.plot` (as well as in `RealChart.plot`), on the same footing as what is now done in the "3D Graphics" section of the reference manual.

Thanks for the addition of ``@`options` to `VectorField.plot`; I've added `color` to these options, to be consistent with what is done in `RealChart.plot`. I've also added some documentation about the use of `v.plot.options`.

A question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that *nb* is not a standard English abbreviation for *number*, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).



---

archive/issue_comments_258048.json:
```json
{
    "body": "Replying to [comment:33 egourgoulhon]:\n> Thank you so much for the review!\n\nNot a problem; sorry it took so long.\n\n> A question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that *nb* is not a standard English abbreviation for *number*, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).\n\nNot to my knowledge. The standard abbreviation is \"no.\" (with a period) but \"num\" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.",
    "created_at": "2016-11-13T16:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258048",
    "user": "tscrim"
}
```

Replying to [comment:33 egourgoulhon]:
> Thank you so much for the review!

Not a problem; sorry it took so long.

> A question: in the keyword arguments of `VectorField.plot`, you have changed `nb_values` to `number_values`, but it is still `nb_values` in `RealChart.plot`. For consistency, both plot methods should use the same name. It seems that *nb* is not a standard English abbreviation for *number*, is it? (I find `number_values` a little bit long, especially that we don't have the TAB completion to type the options).

Not to my knowledge. The standard abbreviation is "no." (with a period) but "num" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.



---

archive/issue_comments_258049.json:
```json
{
    "body": "Replying to [comment:34 tscrim]:\n> \n> Not to my knowledge. The standard abbreviation is \"no.\" (with a period) but \"num\" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.\n>\nOK, so let use `number_values` everywhere. I am going to change it in `RealChart.plot`.",
    "created_at": "2016-11-13T16:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258049",
    "user": "egourgoulhon"
}
```

Replying to [comment:34 tscrim]:
> 
> Not to my knowledge. The standard abbreviation is "no." (with a period) but "num" has become standard (at least in the programming world), but IMO the verbosity is better. However, you can do tab completion for explicit arguments.
>
OK, so let use `number_values` everywhere. I am going to change it in `RealChart.plot`.



---

archive/issue_comments_258050.json:
```json
{
    "body": "Thanks.",
    "created_at": "2016-11-13T16:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258050",
    "user": "tscrim"
}
```

Thanks.



---

archive/issue_comments_258051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-13T17:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258051",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258052.json:
```json
{
    "body": "Change `nb_values` --> `number_values` done.",
    "created_at": "2016-11-13T17:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258052",
    "user": "egourgoulhon"
}
```

Change `nb_values` --> `number_values` done.



---

archive/issue_comments_258053.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-13T17:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258053",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258054.json:
```json
{
    "body": "I'm sorry I missed that on the previous ticket. LGTM. Thank you.",
    "created_at": "2016-11-13T17:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258054",
    "user": "tscrim"
}
```

I'm sorry I missed that on the previous ticket. LGTM. Thank you.



---

archive/issue_comments_258055.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2016-11-13T18:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258055",
    "user": "egourgoulhon"
}
```

Thanks for the review!



---

archive/issue_comments_258056.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-17T18:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18855#issuecomment-258056",
    "user": "vbraun"
}
```

Resolution: fixed
