# Issue 27359: pyflakes and pep cleanup of build/test

archive/issues_027359.json:
```json
{
    "body": "CC:  @vbraun @embray @jdemeyer\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27596\n\n",
    "created_at": "2019-04-02T18:52:42Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "pyflakes and pep cleanup of build/test",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27359",
    "user": "https://github.com/fchapoton"
}
```
CC:  @vbraun @embray @jdemeyer



Issue created by migration from https://trac.sagemath.org/ticket/27596





---

archive/issue_comments_385345.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-02T18:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385345",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_385346.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-04-02T18:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385346",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_385347.json:
```json
{
    "body": "Changing priority from major to trivial.",
    "created_at": "2019-04-08T16:34:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385347",
    "user": "https://github.com/embray"
}
```

Changing priority from major to trivial.



---

archive/issue_comments_385348.json:
```json
{
    "body": "Oops, wrong field.  \n\nStill, it would help if you specified more specifically what the intent was in the description.",
    "created_at": "2019-04-08T16:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385348",
    "user": "https://github.com/embray"
}
```

Oops, wrong field.  

Still, it would help if you specified more specifically what the intent was in the description.



---

archive/issue_comments_385349.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-08T16:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385349",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_385350.json:
```json
{
    "body": "The most recent patchbot failure was from mine, and it got screwed up due to being out of disk space.  I imagine this is still fine.",
    "created_at": "2019-04-08T16:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385350",
    "user": "https://github.com/embray"
}
```

The most recent patchbot failure was from mine, and it got screwed up due to being out of disk space.  I imagine this is still fine.



---

archive/issue_comments_385351.json:
```json
{
    "body": "There was a test with a wrong name\n\n```\n-    def test_logging(self):\n+    def test_overriding(self):\n```\n\nAlso some unused imports.\n\nAlso some changes here, to use a more precise assert:\n\n```\n-        if len(msg) > 0:\n-            self.assertEqual(msg[0], ('INFO', 'Downloading the Sage mirror list'))\n-        self.assertTrue(len(ml.mirrors) >= 0)\n+        if msg:\n+            self.assertEqual(msg[0],\n+                             ('INFO', 'Downloading the Sage mirror list'))\n+        self.assertGreaterEqual(len(ml.mirrors), 0)\n```\n\nand some unused variables (twice)\n\n```\n-        with CapturedLog() as log:\n+        with CapturedLog() as _:\n```\n",
    "created_at": "2019-04-08T17:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385351",
    "user": "https://github.com/fchapoton"
}
```

There was a test with a wrong name

```
-    def test_logging(self):
+    def test_overriding(self):
```

Also some unused imports.

Also some changes here, to use a more precise assert:

```
-        if len(msg) > 0:
-            self.assertEqual(msg[0], ('INFO', 'Downloading the Sage mirror list'))
-        self.assertTrue(len(ml.mirrors) >= 0)
+        if msg:
+            self.assertEqual(msg[0],
+                             ('INFO', 'Downloading the Sage mirror list'))
+        self.assertGreaterEqual(len(ml.mirrors), 0)
```

and some unused variables (twice)

```
-        with CapturedLog() as log:
+        with CapturedLog() as _:
```




---

archive/issue_comments_385352.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-10T15:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27359",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27359#issuecomment-385352",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
