# Issue 14562: Fix Python int problem with exp_integral

Issue created by migration from https://trac.sagemath.org/ticket/14766

Original creator: kcrisman

Original creation time: 2013-06-18 17:37:43

Assignee: burcin

CC:  benjaminfjones burcin eviatarbach

In #11143 we weren't careful about Python ints.  There are lots of examples of this, so one will want to go through the whole file.

```
sage: exp_integral_e(int(3),0)
0
sage: exp_integral_e(3,0)
1/2
```



---

Comment by kcrisman created at 2013-06-18 17:37:52

Changing type from PLEASE CHANGE to defect.


---

Comment by eviatarbach created at 2013-08-31 18:28:41

I'm guessing this occurs in other files too.

I think it's unreasonable to expect everyone adding symbolic functions to worry about this, and certainly users to be aware of it; maybe we could make `BuiltinFunction.__call__` automatically convert `int` to `Integer`? Or have it raise an error if an `int` is in the parameters? Allowing `int` into `_eval_` causes other problems too, such as getting expressions with `int` pyobjects in them, making arithmetic slower, etc.

At the very least, we could temporarily add `from __future__ import division` in all files that implement symbolic functions; then exact answers wouldn't be returned in all cases where they should, but at least mathematically wrong answers wouldn't occur.


---

Comment by benjaminfjones created at 2013-09-07 18:00:27

I think my preference would be either raising a `TypeError` (and clearly documenting what the allowed types are) or doing Python 3 style division. I don't like the idea of adding an implicit coercion `int` -> `Integer`.

If we do type checking in `BuiltinFunction.__call__`, we should make sure that there isn't  a significant performance penalty.


---

Comment by jdemeyer created at 2014-11-26 14:41:35

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-11-26 14:41:35

New commits:


---

Comment by rws created at 2014-12-12 16:22:10

Looks fine and passes tests in `functions/`.


---

Comment by rws created at 2014-12-12 16:22:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-12-15 17:50:51

Resolution: fixed
