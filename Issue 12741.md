# Issue 12741: Deprecate CombinatorialClass in favor of the EnumeratedSet's categories

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2012-05-06 15:59:22

Assignee: sage-combinat

CC:  sage-combinat

All classes that currently inherit from `CombinatorialClass` should instead inherit from Parent and register themselves in one of the categories (`*EnumeratedSets`, `*FiniteEnumeratedSets`, or `*InfiniteEnumeratedSets`). For examples, see e.g. `FiniteEnumeratedSets().example()`.


* Expected benefits:
  * Uniform interface
  * Support for TestSuite
  * Support for conversions, coercions, and morphisms, in particular for bijections (as morphisms in the category of Sets with bijection, with properly defined domain and co-domain rather than python functions).
* Steps:
  1. Let `CombinatorialClass` inherits from `Parent` (mostly done #8910)
  1. For each `CombinatorialClass` C:
    * Have C inherit directly from `Parent`
    * Ensure that `C.__init__` sets up the proper category (Finite|Infinite)...
    * Add `TestSuite(C).run()` to the doctests and make all the tests pass
    * Have a properly setup attribute `C.Element` and use `C.element_class` (as defined by the categories) when constructing elements
    * Ensure proper unique representation behavior by having C inherit both from `UniqueRepresentation` and `Parent`
  1. Deprecate and remove `CombinatorialClass`
  1. Turn all the factory functions into factory classes by mean of `ClasscallMetaClass`; see `PerfectMatching` and `Trees` for an advanced example.


---

Comment by tscrim created at 2013-02-06 04:14:46

Part of the work is done in #13605 (`partition.py`) and #14063 (compositions). More to come.


---

Comment by tscrim created at 2013-03-07 14:36:20

More work:
- Set partitions in #14140,
- `skew*` in #14101.


---

Comment by tscrim created at 2013-06-28 16:12:46

Permutations in #14772.


---

Comment by tscrim created at 2013-07-08 16:49:42

Integer vectors in #12453.


---

Comment by chapoton created at 2017-06-01 12:23:57

Status

```
git grep -c "import.*CombinatorialClass"
src/sage/categories/enumerated_sets.py:1
src/sage/combinat/all.py:1
src/sage/combinat/cartesian_product.py:1
src/sage/combinat/combination.py:1
src/sage/combinat/finite_class.py:1
src/sage/combinat/graph_path.py:1
src/sage/combinat/multichoose_nk.py:1
src/sage/combinat/necklace.py:1
src/sage/combinat/non_decreasing_parking_function.py:1
src/sage/combinat/parking_functions.py:1
src/sage/combinat/partition.py:1
src/sage/combinat/restricted_growth.py:1
src/sage/combinat/root_system/root_lattice_realizations.py:1
src/sage/combinat/sf/ns_macdonald.py:1
src/sage/combinat/species/structure.py:1
src/sage/combinat/symmetric_group_representations.py:1
src/sage/combinat/tuple.py:1
src/sage/combinat/words/shuffle_product.py:1
src/sage/dynamics/flat_surfaces/strata.py:2
src/sage/graphs/linearextensions.py:1
src/sage/sets/family.py:1
```



---

Comment by tscrim created at 2017-06-02 22:49:17

That's actually slightly worse than I thought, but it is good progress. I suspect most of them should be easy changes. From a quick look:

```
src/sage/combinat/root_system/root_lattice_realizations.py
```

is easy to fix as per the comment there (which really moves the issue to the `EnumeratedSets` category).

However

```
src/sage/combinat/symmetric_group_representations.py
```

is harder as the `CombinatorialClass` is behaving something between a category and a parent. At least its elements are morphisms from the SGA to a matrix space, but not with the same codomain. Also, I think of a representation as a vector space with an action together. Well, representation theory in Sage is sorely lacking currently and is something I've only been able to work on in a limited capacity so far.


---

Comment by chapoton created at 2017-07-13 13:27:46

see #23422


---

Comment by chapoton created at 2018-01-07 17:40:19

see #24485 for necklaces

and #24486 for "restricted growth arrays"


---

Comment by chapoton created at 2018-10-02 16:55:27

#26384 for non-decreasing parking functions


---

Comment by chapoton created at 2019-11-29 19:33:22

- #20764 for parking functions

- #25864 for linear extensions (deprecation before removal)

- #28825 for combinat/tuple


---

Comment by chapoton created at 2020-11-12 14:21:33

remains now

* ~~sage/categories/enumerated_sets.py:1~~
* ~~sage/combinat/combination.py:1~~
* ~~sage/combinat/graph_path.py:1
* ~~sage/combinat/parking_functions.py:1~~
* ~~sage/combinat/shuffle.py:1
* sage/combinat/species/structure.py:1
* ~~sage/combinat/symmetric_group_representations.py:1
* ~~sage/combinat/words/shuffle_product.py:1~~
* sage/sets/family.py:1  (easy removal, but must be done at the end)


---

Comment by chapoton created at 2020-11-12 20:02:56

* #30904 for `sage/combinat/words/shuffle_product.py`

* #30907 for Parking functions

* #30908 for combination.py

* #30962 for shuffle

* #30963 for graph_path

* #31079 for `symmetric_group_representations.py`


---

Comment by mantepse created at 2020-11-25 18:59:53

`@`chapoton: concerning the species problem, would you be interested in participating in an online species workshop in February - both as mathematician and as sagemath aficionado?


---

Comment by chapoton created at 2020-12-28 11:19:30

Oh, there seems to remains more with sub-classes (including `MapCombinatorialClass`) in

```
src/sage/categories/enumerated_sets.py
src/sage/combinat/combinat.py
```



---

Comment by chapoton created at 2021-03-24 10:48:37

deprecating the unused variants in #31545


---

Comment by mkoeppe created at 2021-07-04 02:54:38

I have opened #32121 for `MapCombinatorialClass`.


---

Comment by mkoeppe created at 2022-02-19 22:35:56

#33384: Deprecate global imports of `CombinatorialObject`, `CombinatorialClass`, `MapCombinatorialClass`
