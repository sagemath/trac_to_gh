# Issue 22906: gap3 kernel?

Issue created by migration from https://trac.sagemath.org/ticket/23143

Original creator: nthiery

Original creation time: 2017-06-06 03:05:19

CC:  saliola stumpc5 jmichel

A request by Jean Michel: with the legacy notebook, it's possible to switch the language to gap3, and have all cells be executed by gap3 without a need for specifying the `%%gap3` magic. He would like the same with the Jupyter notebook.

Implementing a crude gap3 kernel on top of our current [SageMath](SageMath) kernel should amount to:
- Override `do_execute` to prepend the `%%gap3` magic (or something of similar nature)
- Find some mechanism to only install the kernel if gap3 is installed.

The central question: how strong is the use case; do we have the
manpower in terms of development and maintenance and is it worth it.

For now, one can do some approximation of it with:


```
In[1] from sage.repl.interpreter import SageNotebookInteractiveShell
      def do_execute(self, code, *args, **kwargs):
          code = "%%gap3\n"+code
          super(SageKernel, self).do_execute(code, *args, **kwargs)
      SageKernel.do_execute = do_execute

In[*] 1+1
      2

In[*] W := ComplexReflectionGroup(4)
      ComplexReflectionGroup(4)

In[*] W
      ComplexReflectionGroup(4)

In[*] Size(W)
      24
```

Probably fragile. In particular, something's fishy with how Jupyter
interprets the computation as being finished though.

