# Issue 24240: solve(x, [x], solution_dict=True) error

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2018-01-06 06:52:09

CC:  charpent


```
solve(x, [x], solution_dict=True)
...
/home/ralf/sage/local/lib/python2.7/site-packages/sage/symbolic/relation.pyc in solve(f, *args, **kwds)
   1045 
   1046     if is_Expression(f): # f is a single expression
-> 1047         return _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
   1048 
   1049     if not isinstance(f, (list, tuple)):

/home/ralf/sage/local/lib/python2.7/site-packages/sage/symbolic/relation.pyc in _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
   1369     if solution_dict:
   1370         if isinstance(x, (list, tuple)):
-> 1371             X = [{sol.left():sol.right() for sol in b} for b in X]
   1372         else:
   1373             X = [dict([This is the Trac macro *sol.left* that was inherited from the migration called with arguments (),sol.right)](https://trac.sagemath.org/wiki/WikiMacros#sol.left-macro)) for sol in X]

TypeError: 'sage.symbolic.expression.Expression' object is not iterable
```



---

Comment by chapoton created at 2021-05-24 10:15:17

fixed by #31452, so duplicate, please confirm


---

Comment by chapoton created at 2021-05-24 10:15:17

Changing status from new to needs_review.


---

Comment by charpent created at 2021-05-24 10:26:56

Changing status from needs_review to needs_work.


---

Comment by charpent created at 2021-05-24 10:26:56

Replying to [comment:3 chapoton]:
> fixed by #31452, so duplicate, please confirm

Nope. On 9.3 :

```
sage: solve(x, [x], solution_dict=True)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-6f16dd325c63> in <module>
----> 1 solve(x, [x], solution_dict=True)

/usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in solve(f, *args, **kwds)
   1041 
   1042     if is_Expression(f): # f is a single expression
-> 1043         return _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
   1044 
   1045     if not isinstance(f, (list, tuple)):

/usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
   1366     if solution_dict:
   1367         if isinstance(x, (list, tuple)):
-> 1368             X = [{sol.left():sol.right() for sol in b} for b in X]
   1369         else:
   1370             X = [dict([This is the Trac macro *sol.left* that was inherited from the migration called with arguments (),sol.right)](https://trac.sagemath.org/wiki/WikiMacros#sol.left-macro)) for sol in X]

/usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in <listcomp>(.0)
   1366     if solution_dict:
   1367         if isinstance(x, (list, tuple)):
-> 1368             X = [{sol.left():sol.right() for sol in b} for b in X]
   1369         else:
   1370             X = [dict([This is the Trac macro *sol.left* that was inherited from the migration called with arguments (),sol.right)](https://trac.sagemath.org/wiki/WikiMacros#sol.left-macro)) for sol in X]

TypeError: 'sage.symbolic.expression.Expression' object is not iterable
```


==> `needs_work`, and relevant milestone.


---

Comment by charpent created at 2021-05-24 10:45:07

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2021-05-24 10:45:07

Wups : #31452 in **NOT** in 9.3 (I should wear my spectacles when reading `trac`...).

I'll test this. Restoring status...

Apologies.

Replying to [comment:4 charpent]:
> Replying to [comment:3 chapoton]:
> > fixed by #31452, so duplicate, please confirm
> 
> Nope. On 9.3 :
> {{{
> sage: solve(x, [x], solution_dict=True)
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-5-6f16dd325c63> in <module>
> ----> 1 solve(x, [x], solution_dict=True)
> 
> /usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in solve(f, *args, **kwds)
>    1041 
>    1042     if is_Expression(f): # f is a single expression
> -> 1043         return _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
>    1044 
>    1045     if not isinstance(f, (list, tuple)):
> 
> /usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in _solve_expression(f, x, explicit_solutions, multiplicities, to_poly_solve, solution_dict, algorithm, domain)
>    1366     if solution_dict:
>    1367         if isinstance(x, (list, tuple)):
> -> 1368             X = [{sol.left():sol.right() for sol in b} for b in X]
>    1369         else:
>    1370             X = [dict([This is the Trac macro *sol.left* that was inherited from the migration called with arguments (),sol.right)](https://trac.sagemath.org/wiki/WikiMacros#sol.left-macro)) for sol in X]
> 
> /usr/local/sage-9/local/lib/python3.9/site-packages/sage/symbolic/relation.py in <listcomp>(.0)
>    1366     if solution_dict:
>    1367         if isinstance(x, (list, tuple)):
> -> 1368             X = [{sol.left():sol.right() for sol in b} for b in X]
>    1369         else:
>    1370             X = [dict([This is the Trac macro *sol.left* that was inherited from the migration called with arguments (),sol.right)](https://trac.sagemath.org/wiki/WikiMacros#sol.left-macro)) for sol in X]
> 
> TypeError: 'sage.symbolic.expression.Expression' object is not iterable
> }}}
> 
> ==> `needs_work`, and relevant milestone.
>


---

Comment by charpent created at 2021-05-24 14:24:21

Changing status from needs_review to positive_review.


---

Comment by charpent created at 2021-05-24 14:24:21

Rebased on 9.3, {{{ptestlong}} of your branch gimes me exactly the same failures (two
`gap`-related permanent failures and one transient `pari-gp` timeout) as 9.3.

==> `positive_review` (for good, this time (I hope...)).


---

Comment by charpent created at 2021-05-24 14:26:22

I'm stupid : I positioned `positive_review` on a `duplicate` ticket. Fixed. Time for a walk...


---

Comment by chapoton created at 2021-05-24 14:36:27

Resolution: duplicate
