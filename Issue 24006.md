# Issue 24006: bug in rsolve

Issue created by migration from https://trac.sagemath.org/ticket/24243

Original creator: zimmerma

Original creation time: 2017-11-19 17:53:30

the following was reported to me by Eric Wegrzynowski (with Sage 8.0):

```
sage: from sympy import rsolve
sage: from sympy import Function
sage: from sympy.abc import n
sage: u = Function('u')
sage: f = u(n+1) - (u(n) + (n+1)^2)
sage: rsolve(f, u(n),{u(0):0})
C1*n*(n**2 + 2*n + 1)
```

this answer is wrong, it should be `1/6*(2*n + 1)*(n + 1)*n` and not contain any unknown constant.


---

Comment by rws created at 2017-11-20 09:38:41

Changing status from new to needs_review.


---

Comment by rws created at 2017-11-20 09:38:41

Sage-8.0 has SymPy-1.0 which gave the `C1` result, as I just confirmed. Moreover current Sage-8.1.rc2 has SymPy-1.1.1 which gives the `C1` result, as I just confirmed. Finally, the current SymPy-1.1.2-dev does the same so I'm at a loss where you expect the number to come from. Since `rsolve` is a SymPy function the bug should be reported there.


---

Comment by zimmerma created at 2017-11-20 15:45:40

reported upstream at https://github.com/sympy/sympy/issues/13629,
and set back the milestone to 8.1, since this is also a bug in Sage
(which could well use another package than SymPy to solve recurrence relations).


---

Comment by rws created at 2017-11-20 16:21:19

Sage does not solve recurrences at all, it has no interface to do so. If you input `solve([f(x) == 2*f(x-1), f(0)==1], f)` you will get an error because Sage can only solve for variables. It was the user who explicitly called a SymPy function. The missing solve capabilities are #1291 so this is a duplicate. However if the user can convert the recurrence to a generating function you can use `CFiniteSequence::closed_form()`


---

Comment by zimmerma created at 2017-11-20 16:25:48

ok I now understand.
Paul


---

Comment by chapoton created at 2017-12-07 15:29:18

Changing status from needs_review to positive_review.


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
