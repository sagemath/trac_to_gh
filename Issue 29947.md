# Issue 29947: Support Python 3.9

archive/issues_029947.json:
```json
{
    "body": "CC:  @antonio-rojas @embray @kiwifb @kliem @timokau @isuruf @jhpalmieri @mkoeppe @slel @tobihan @tscrim @jdemeyer @dimpase\n\nKeywords: upgrade, python\n\nWe should support Python 3.9.\n\n- [Python 3.9 release schedule](https://www.python.org/dev/peps/pep-0596/)\n- [What's new in Python 3.9](https://docs.python.org/3.9/whatsnew/3.9.html)\n\nIssue created by migration from https://trac.sagemath.org/ticket/30184\n\n",
    "created_at": "2020-07-20T20:20:29Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Support Python 3.9",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29947",
    "user": "@slel"
}
```
CC:  @antonio-rojas @embray @kiwifb @kliem @timokau @isuruf @jhpalmieri @mkoeppe @slel @tobihan @tscrim @jdemeyer @dimpase

Keywords: upgrade, python

We should support Python 3.9.

- [Python 3.9 release schedule](https://www.python.org/dev/peps/pep-0596/)
- [What's new in Python 3.9](https://docs.python.org/3.9/whatsnew/3.9.html)

Issue created by migration from https://trac.sagemath.org/ticket/30184





---

archive/issue_comments_425377.json:
```json
{
    "body": "Python 3.9.0.beta5, the last of five planned beta release previews,\nwas released on 2020-07-20.\n\n- https://www.python.org/downloads/release/python-390b5/\n\nIt would be nice to test and report any issues to the Python bug tracker.",
    "created_at": "2020-07-20T23:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425377",
    "user": "@slel"
}
```

Python 3.9.0.beta5, the last of five planned beta release previews,
was released on 2020-07-20.

- https://www.python.org/downloads/release/python-390b5/

It would be nice to test and report any issues to the Python bug tracker.



---

archive/issue_comments_425378.json:
```json
{
    "body": "I can't even get 3.8 to work (#27754).  :(",
    "created_at": "2020-07-20T23:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425378",
    "user": "@jhpalmieri"
}
```

I can't even get 3.8 to work (#27754).  :(



---

archive/issue_comments_425379.json:
```json
{
    "body": "Python 3.9.0 is *almost* ready, with *3.9.0rc1*,\nthe penultimate release preview, released.\n\n- https://www.python.org/downloads/release/python-390rc1/",
    "created_at": "2020-08-11T23:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425379",
    "user": "@slel"
}
```

Python 3.9.0 is *almost* ready, with *3.9.0rc1*,
the penultimate release preview, released.

- https://www.python.org/downloads/release/python-390rc1/



---

archive/issue_comments_425380.json:
```json
{
    "body": "Python 3.9.0rc2 announced today on python-announce:\n\n> Python 3.9.0 is almost ready. This release, 3.9.0rc2,\n> is the last planned preview before the final release\n> of Python 3.9.0 on 2020-10-05. Get it here:\n>\n> https://www.python.org/downloads/release/python-390rc2/\n>\n> In the mean time, we strongly encourage maintainers of\n> third-party Python projects to prepare their projects\n> for 3.9 compatibility during this phase. As always,\n> report any issues to the Python bug tracker\n> <https://bugs.python.org/>.",
    "created_at": "2020-09-17T16:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425380",
    "user": "@slel"
}
```

Python 3.9.0rc2 announced today on python-announce:

> Python 3.9.0 is almost ready. This release, 3.9.0rc2,
> is the last planned preview before the final release
> of Python 3.9.0 on 2020-10-05. Get it here:
>
> https://www.python.org/downloads/release/python-390rc2/
>
> In the mean time, we strongly encourage maintainers of
> third-party Python projects to prepare their projects
> for 3.9 compatibility during this phase. As always,
> report any issues to the Python bug tracker
> <https://bugs.python.org/>.



---

archive/issue_comments_425381.json:
```json
{
    "body": "With #30589 (Python 3.9.0rc2), the build goes smoothly up to here:\n\n```\n[sagelib-9.2.beta12] [1/1] gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/ext -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/include/python3.9 -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/include/python3.9 -c build/cythonized/sage/cpython/debug.c -o build/temp.macosx-10.9-x86_64-3.9/build/cythonized/sage/cpython/debug.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99\n[sagelib-9.2.beta12] In file included from build/cythonized/sage/cpython/debug.c:1446:\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:86:32: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     pointer_check_constant(tp->attr, NULL) \\\n[sagelib-9.2.beta12]                            ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:87:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyType_GenericAlloc) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:88:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyType_GenericNew) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:89:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_Del) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:90:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GC_Del) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:91:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GenericGetAttr) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:92:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GenericSetAttr) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:93:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, _Py_HashPointer) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:94:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_HashNotImplemented) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:95:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_traverse) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:96:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_clear) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:97:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_dealloc) \\\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'\n[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \\\n[sagelib-9.2.beta12]         ^~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:108:39: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]                 if (subtp->sub && tp->attr == subtp->attr) \\\n[sagelib-9.2.beta12]                                   ~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:108:54: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]                 if (subtp->sub && tp->attr == subtp->attr) \\\n[sagelib-9.2.beta12]                                               ~~~~~  ^\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'\n[sagelib-9.2.beta12]     attr_pointer(tp_print);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'\n[sagelib-9.2.beta12]     attr_pointer_value(attr);\n[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'\n[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);\n[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~\n[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:117:37: note: expanded from macro 'subattr_pointer_value'\n[sagelib-9.2.beta12]     if (special) printf(\"%p\\n\", tp->attr);\n[sagelib-9.2.beta12]                                 ~~  ^\n[sagelib-9.2.beta12] 15 errors generated.\n[sagelib-9.2.beta12] error: command '/usr/bin/gcc' failed with exit code 1\n[sagelib-9.2.beta12] Exception ignored in: <function Pool.__del__ at 0x1196803a0>\n[sagelib-9.2.beta12] Traceback (most recent call last):\n[sagelib-9.2.beta12]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/pool.py\", line 268, in __del__\n[sagelib-9.2.beta12]     self._change_notifier.put(None)\n[sagelib-9.2.beta12]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/queues.py\", line 378, in put\n[sagelib-9.2.beta12]     self._writer.send_bytes(obj)\n[sagelib-9.2.beta12]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py\", line 205, in send_bytes\n[sagelib-9.2.beta12]     self._send_bytes(m[offset:offset + size])\n[sagelib-9.2.beta12]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py\", line 416, in _send_bytes\n[sagelib-9.2.beta12]     self._send(header + buf)\n[sagelib-9.2.beta12]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py\", line 373, in _send\n[sagelib-9.2.beta12]     n = write(self._handle, buf)\n[sagelib-9.2.beta12] OSError: [Errno 9] Bad file descriptor\n[sagelib-9.2.beta12] \n[sagelib-9.2.beta12] real\t0m7.479s\n[sagelib-9.2.beta12] user\t0m4.042s\n[sagelib-9.2.beta12] sys\t0m2.327s\n```\n",
    "created_at": "2020-09-17T18:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425381",
    "user": "@mkoeppe"
}
```

With #30589 (Python 3.9.0rc2), the build goes smoothly up to here:

```
[sagelib-9.2.beta12] [1/1] gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/ext -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/include/python3.9 -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/include/python3.9 -c build/cythonized/sage/cpython/debug.c -o build/temp.macosx-10.9-x86_64-3.9/build/cythonized/sage/cpython/debug.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99
[sagelib-9.2.beta12] In file included from build/cythonized/sage/cpython/debug.c:1446:
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:86:32: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     pointer_check_constant(tp->attr, NULL) \
[sagelib-9.2.beta12]                            ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:87:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyType_GenericAlloc) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:88:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyType_GenericNew) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:89:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_Del) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:90:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GC_Del) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:91:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GenericGetAttr) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:92:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_GenericSetAttr) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:93:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, _Py_HashPointer) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:94:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, PyObject_HashNotImplemented) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:95:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_traverse) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:96:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_clear) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:97:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     else pointer_check_constant(tp->attr, subtype_dealloc) \
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:78:9: note: expanded from macro 'pointer_check_constant'
[sagelib-9.2.beta12]     if (ptr == (void*)(val)) \
[sagelib-9.2.beta12]         ^~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:108:39: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]                 if (subtp->sub && tp->attr == subtp->attr) \
[sagelib-9.2.beta12]                                   ~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:108:54: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]                 if (subtp->sub && tp->attr == subtp->attr) \
[sagelib-9.2.beta12]                                               ~~~~~  ^
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:188:18: error: no member named 'tp_print' in 'struct _typeobject'
[sagelib-9.2.beta12]     attr_pointer(tp_print);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~^~~~~~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:123:24: note: expanded from macro 'attr_pointer'
[sagelib-9.2.beta12]     attr_pointer_value(attr);
[sagelib-9.2.beta12]     ~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:119:65: note: expanded from macro 'attr_pointer_value'
[sagelib-9.2.beta12] #define attr_pointer_value(attr) subattr_pointer_value(tp_name, attr);
[sagelib-9.2.beta12]                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~
[sagelib-9.2.beta12] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/build/pkgs/sagelib/src/sage/cpython/debugimpl.c:117:37: note: expanded from macro 'subattr_pointer_value'
[sagelib-9.2.beta12]     if (special) printf("%p\n", tp->attr);
[sagelib-9.2.beta12]                                 ~~  ^
[sagelib-9.2.beta12] 15 errors generated.
[sagelib-9.2.beta12] error: command '/usr/bin/gcc' failed with exit code 1
[sagelib-9.2.beta12] Exception ignored in: <function Pool.__del__ at 0x1196803a0>
[sagelib-9.2.beta12] Traceback (most recent call last):
[sagelib-9.2.beta12]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/pool.py", line 268, in __del__
[sagelib-9.2.beta12]     self._change_notifier.put(None)
[sagelib-9.2.beta12]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/queues.py", line 378, in put
[sagelib-9.2.beta12]     self._writer.send_bytes(obj)
[sagelib-9.2.beta12]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py", line 205, in send_bytes
[sagelib-9.2.beta12]     self._send_bytes(m[offset:offset + size])
[sagelib-9.2.beta12]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py", line 416, in _send_bytes
[sagelib-9.2.beta12]     self._send(header + buf)
[sagelib-9.2.beta12]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/multiprocessing/connection.py", line 373, in _send
[sagelib-9.2.beta12]     n = write(self._handle, buf)
[sagelib-9.2.beta12] OSError: [Errno 9] Bad file descriptor
[sagelib-9.2.beta12] 
[sagelib-9.2.beta12] real	0m7.479s
[sagelib-9.2.beta12] user	0m4.042s
[sagelib-9.2.beta12] sys	0m2.327s
```




---

archive/issue_comments_425382.json:
```json
{
    "body": "There is little evidence that anyone but the author of `type_debug` has used this facility. Candidate for removal. Surely there must be something like this on PyPI somewhere?",
    "created_at": "2020-09-17T19:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425382",
    "user": "@mkoeppe"
}
```

There is little evidence that anyone but the author of `type_debug` has used this facility. Candidate for removal. Surely there must be something like this on PyPI somewhere?



---

archive/issue_comments_425383.json:
```json
{
    "body": "Deprecation warnings in docbuild:\n\n```\n[dochtml] <frozen importlib._bootstrap>:228: DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python\n[dochtml] [arithgrou] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/ast.py:407: DeprecationWarning: visit_NameConstant is deprecated; add visit_Constant\n[dochtml] [arithgrou]   return visitor(node)\n[dochtml] [plot3d   ] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/ast.py:407: DeprecationWarning: visit_Str is deprecated; add visit_Constant\n```\n\n----\nNew commits:",
    "created_at": "2020-09-17T20:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425383",
    "user": "@mkoeppe"
}
```

Deprecation warnings in docbuild:

```
[dochtml] <frozen importlib._bootstrap>:228: DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python
[dochtml] [arithgrou] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/ast.py:407: DeprecationWarning: visit_NameConstant is deprecated; add visit_Constant
[dochtml] [arithgrou]   return visitor(node)
[dochtml] [plot3d   ] /Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/ast.py:407: DeprecationWarning: visit_Str is deprecated; add visit_Constant
```

----
New commits:



---

archive/issue_comments_425384.json:
```json
{
    "body": "`make ptestlong` also has various failures due to new warnings `DeprecationWarning: visit_Str is deprecated; add visit_Constant` and similar",
    "created_at": "2020-09-17T22:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425384",
    "user": "@mkoeppe"
}
```

`make ptestlong` also has various failures due to new warnings `DeprecationWarning: visit_Str is deprecated; add visit_Constant` and similar



---

archive/issue_comments_425385.json:
```json
{
    "body": "Any warning-suppression specialists here?",
    "created_at": "2020-09-17T22:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425385",
    "user": "@mkoeppe"
}
```

Any warning-suppression specialists here?



---

archive/issue_comments_425386.json:
```json
{
    "body": "Can you add to the relevant section of `src/sage/all.py`? There are lines like\n\n```\n# scipy 1.18 introduced reprecation warnings on a number of things they are moving to\n# numpy, e.g. DeprecationWarning: scipy.array is deprecated\n#             and will be removed in SciPy 2.0.0, use numpy.array instead\n# This affects networkx 2.2 up and including 2.4 (cf. :trac:29766)\nwarnings.filterwarnings('ignore', category=DeprecationWarning,\n    module='.*(scipy|networkx)')\n```\n",
    "created_at": "2020-09-17T22:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425386",
    "user": "@jhpalmieri"
}
```

Can you add to the relevant section of `src/sage/all.py`? There are lines like

```
# scipy 1.18 introduced reprecation warnings on a number of things they are moving to
# numpy, e.g. DeprecationWarning: scipy.array is deprecated
#             and will be removed in SciPy 2.0.0, use numpy.array instead
# This affects networkx 2.2 up and including 2.4 (cf. :trac:29766)
warnings.filterwarnings('ignore', category=DeprecationWarning,
    module='.*(scipy|networkx)')
```




---

archive/issue_comments_425387.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-09-17T22:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425387",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_425388.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-17T23:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425388",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425389.json:
```json
{
    "body": "Replying to [comment:14 mkoeppe]:\n> Deprecation warnings in docbuild:\n> {{{\n> [dochtml] <frozen importlib._bootstrap>:228: DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python\n> }}}\nThis one also shows up on normal startup. Coming from here:\n\n```\n$ git grep 'import parser'\nsrc/sage/symbolic/ring.pyx:import parser\n```\n\n(Implementation of `isidentifier`.)",
    "created_at": "2020-09-17T23:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425389",
    "user": "@mkoeppe"
}
```

Replying to [comment:14 mkoeppe]:
> Deprecation warnings in docbuild:
> {{{
> [dochtml] <frozen importlib._bootstrap>:228: DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python
> }}}
This one also shows up on normal startup. Coming from here:

```
$ git grep 'import parser'
src/sage/symbolic/ring.pyx:import parser
```

(Implementation of `isidentifier`.)



---

archive/issue_comments_425390.json:
```json
{
    "body": "Looks like we can simplify `isidentifier` now that we are py3-only, similar to https://stackoverflow.com/questions/12700893/how-to-check-if-a-string-is-a-valid-python-identifier-including-keyword-check",
    "created_at": "2020-09-17T23:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425390",
    "user": "@mkoeppe"
}
```

Looks like we can simplify `isidentifier` now that we are py3-only, similar to https://stackoverflow.com/questions/12700893/how-to-check-if-a-string-is-a-valid-python-identifier-including-keyword-check



---

archive/issue_comments_425391.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425391",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425392.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425392",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425393.json:
```json
{
    "body": "More doctest failures:\n\n```\nsage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/pbori/randompoly.py\", line 46, in sage.rings.polynomial.pbori.randompoly.?\nFailed example:\n    s=sparse_random_system(r, number_of_polynomials = 20, variables_per_polynomial = 3, degree=2, random_seed=123)\n    DeprecationWarning: Seeding based on hashing is deprecated\n    since Python 3.9 and will be removed in a subsequent version. The only \n    supported seed types are: None, int, float, str, bytes, and bytearray.\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1629, in sage.functions.other.Function_factorial._eval_\nFailed example:\n    factorial(float(3.2))        # abs tol 1e-14\n      File \"<doctest sage.functions.other.Function_factorial._eval_[8]>\", line 1, in <module>\n        factorial(float(RealNumber('3.2')))        # abs tol 1e-14\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: Using factorial() with floats is deprecated\n    7.756689535793181\nsage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n**********************************************************************\nFile \"src/sage/misc/sageinspect.py\", line 428, in sage.misc.sageinspect.SageArgSpecVisitor\nFailed example:\n    v = ast.parse(\"jc = ['veni', 'vidi', 'vici']\").body[0]; v\nExpected:\n    <_ast.Assign object at ...>\nGot:\n    <ast.Assign object at 0x11ce58a00>\nsage -t --long --random-seed=0 src/sage/combinat/root_system/pieri_factors.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/pieri_factors.py\", line 150, in sage.combinat.root_system.pieri_factors.PieriFactors.elements\nFailed example:\n    [w.reduced_word() for w in PF.elements()]\nExpected:\n    [[3, 2, 1], [2, 1], [3, 1], [3, 2], [2], [1], [3], []]\nGot:\n    [[3, 2, 1], [2, 1], [3, 1], [2], [1], [3], [3, 2], []]\n\nsage -t --long --random-seed=0 src/sage/misc/latex.py\n**********************************************************************\nFile \"src/sage/misc/latex.py\", line 556, in sage.misc.latex.has_latex_attr\nFailed example:\n    T._latex_()\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: descriptor '_latex_' of 'sage.matrix.matrix0.Matrix' object needs an argument\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.latex.has_latex_attr[5]>\", line 1, in <module>\n        T._latex_()\n    TypeError: unbound method Matrix._latex_() needs an argument\n```\n",
    "created_at": "2020-09-18T00:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425393",
    "user": "@mkoeppe"
}
```

More doctest failures:

```
sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py
**********************************************************************
File "src/sage/rings/polynomial/pbori/randompoly.py", line 46, in sage.rings.polynomial.pbori.randompoly.?
Failed example:
    s=sparse_random_system(r, number_of_polynomials = 20, variables_per_polynomial = 3, degree=2, random_seed=123)
    DeprecationWarning: Seeding based on hashing is deprecated
    since Python 3.9 and will be removed in a subsequent version. The only 
    supported seed types are: None, int, float, str, bytes, and bytearray.
**********************************************************************
File "src/sage/functions/other.py", line 1629, in sage.functions.other.Function_factorial._eval_
Failed example:
    factorial(float(3.2))        # abs tol 1e-14
      File "<doctest sage.functions.other.Function_factorial._eval_[8]>", line 1, in <module>
        factorial(float(RealNumber('3.2')))        # abs tol 1e-14
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: Using factorial() with floats is deprecated
    7.756689535793181
sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
**********************************************************************
File "src/sage/misc/sageinspect.py", line 428, in sage.misc.sageinspect.SageArgSpecVisitor
Failed example:
    v = ast.parse("jc = ['veni', 'vidi', 'vici']").body[0]; v
Expected:
    <_ast.Assign object at ...>
Got:
    <ast.Assign object at 0x11ce58a00>
sage -t --long --random-seed=0 src/sage/combinat/root_system/pieri_factors.py
**********************************************************************
File "src/sage/combinat/root_system/pieri_factors.py", line 150, in sage.combinat.root_system.pieri_factors.PieriFactors.elements
Failed example:
    [w.reduced_word() for w in PF.elements()]
Expected:
    [[3, 2, 1], [2, 1], [3, 1], [3, 2], [2], [1], [3], []]
Got:
    [[3, 2, 1], [2, 1], [3, 1], [2], [1], [3], [3, 2], []]

sage -t --long --random-seed=0 src/sage/misc/latex.py
**********************************************************************
File "src/sage/misc/latex.py", line 556, in sage.misc.latex.has_latex_attr
Failed example:
    T._latex_()
Expected:
    Traceback (most recent call last):
    ...
    TypeError: descriptor '_latex_' of 'sage.matrix.matrix0.Matrix' object needs an argument
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.latex.has_latex_attr[5]>", line 1, in <module>
        T._latex_()
    TypeError: unbound method Matrix._latex_() needs an argument
```




---

archive/issue_comments_425394.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425394",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425395",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425396.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425396",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425397.json:
```json
{
    "body": "Also various doctest errors because the order of deprecation warning and output changed in `sage.libs.ppl`:\n\n```\n9 items had failures:\n   1 of   9 in sage.libs.ppl.Constraint.ascii_dump\n   1 of   9 in sage.libs.ppl.Constraint_System.ascii_dump\n   1 of   9 in sage.libs.ppl.Generator.ascii_dump\n   1 of   9 in sage.libs.ppl.Generator_System.ascii_dump\n   1 of   9 in sage.libs.ppl.Linear_Expression.ascii_dump\n   1 of   6 in sage.libs.ppl.Poly_Con_Relation.ascii_dump\n   1 of   6 in sage.libs.ppl.Poly_Gen_Relation.ascii_dump\n   1 of  10 in sage.libs.ppl.Polyhedron.ascii_dump\n   1 of   8 in sage.libs.ppl.Variables_Set.ascii_dump\n```\n",
    "created_at": "2020-09-18T00:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425397",
    "user": "@mkoeppe"
}
```

Also various doctest errors because the order of deprecation warning and output changed in `sage.libs.ppl`:

```
9 items had failures:
   1 of   9 in sage.libs.ppl.Constraint.ascii_dump
   1 of   9 in sage.libs.ppl.Constraint_System.ascii_dump
   1 of   9 in sage.libs.ppl.Generator.ascii_dump
   1 of   9 in sage.libs.ppl.Generator_System.ascii_dump
   1 of   9 in sage.libs.ppl.Linear_Expression.ascii_dump
   1 of   6 in sage.libs.ppl.Poly_Con_Relation.ascii_dump
   1 of   6 in sage.libs.ppl.Poly_Gen_Relation.ascii_dump
   1 of  10 in sage.libs.ppl.Polyhedron.ascii_dump
   1 of   8 in sage.libs.ppl.Variables_Set.ascii_dump
```




---

archive/issue_comments_425398.json:
```json
{
    "body": "Replying to [comment:29 mkoeppe]:\n> Also various doctest errors because the order of deprecation warning and output changed in `sage.libs.ppl`:\n\nI think we can just remove `sage.libs.ppl` - #30595",
    "created_at": "2020-09-18T00:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425398",
    "user": "@mkoeppe"
}
```

Replying to [comment:29 mkoeppe]:
> Also various doctest errors because the order of deprecation warning and output changed in `sage.libs.ppl`:

I think we can just remove `sage.libs.ppl` - #30595



---

archive/issue_comments_425399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425399",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425400.json:
```json
{
    "body": "Only these two remain. Perhaps \"good enough for 9.2\"?\n\n```\nsage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed\n```\n",
    "created_at": "2020-09-18T00:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425400",
    "user": "@mkoeppe"
}
```

Only these two remain. Perhaps "good enough for 9.2"?

```
sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed
```




---

archive/issue_comments_425401.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-09-18T00:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425401",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_425402.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-18T00:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425402",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_425403.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-09-18T00:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425403",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_425404.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-09-18T00:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425404",
    "user": "@mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_425405.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-18T00:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425405",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425406.json:
```json
{
    "body": "Replying to [comment:33 mkoeppe]:\n> Only these two remain. Perhaps \"good enough for 9.2\"?\n> {{{\n> sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed\n> sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed\n> }}}\n> \n\nI can take ownership of the pbori one, I'll see what I can do.",
    "created_at": "2020-09-18T01:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425406",
    "user": "@kiwifb"
}
```

Replying to [comment:33 mkoeppe]:
> Only these two remain. Perhaps "good enough for 9.2"?
> {{{
> sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed
> sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed
> }}}
> 

I can take ownership of the pbori one, I'll see what I can do.



---

archive/issue_comments_425407.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> {{{\n> File \"src/sage/functions/other.py\", line 1629, in sage.functions.other.Function_factorial._eval_\n> Failed example:\n>     factorial(float(3.2))        # abs tol 1e-14\n>       File \"<doctest sage.functions.other.Function_factorial._eval_[8]>\", line 1, in <module>\n>         factorial(float(RealNumber('3.2')))        # abs tol 1e-14\n>       File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n>         sw(msg.message, msg.category, msg.filename, msg.lineno,\n>     :\n>     DeprecationWarning: Using factorial() with floats is deprecated\n>     7.756689535793181\n> sage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n> **********************************************************************\n\nhttps://docs.python.org/3.9/library/math.html#math.factorial\n\"Deprecated since version 3.9: Accepting floats with integral values (like 5.0) is deprecated.\"",
    "created_at": "2020-09-20T20:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425407",
    "user": "@mkoeppe"
}
```

Replying to [comment:25 mkoeppe]:
> {{{
> File "src/sage/functions/other.py", line 1629, in sage.functions.other.Function_factorial._eval_
> Failed example:
>     factorial(float(3.2))        # abs tol 1e-14
>       File "<doctest sage.functions.other.Function_factorial._eval_[8]>", line 1, in <module>
>         factorial(float(RealNumber('3.2')))        # abs tol 1e-14
>       File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-py39/local/lib/python3.9/warnings.py", line 109, in _showwarnmsg
>         sw(msg.message, msg.category, msg.filename, msg.lineno,
>     :
>     DeprecationWarning: Using factorial() with floats is deprecated
>     7.756689535793181
> sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
> **********************************************************************

https://docs.python.org/3.9/library/math.html#math.factorial
"Deprecated since version 3.9: Accepting floats with integral values (like 5.0) is deprecated."



---

archive/issue_comments_425408.json:
```json
{
    "body": "Shouldn't this be using Sage's factorial function, as defined in that file by the line `factorial = Function_factorial()`? Why is `math.factorial` being used?",
    "created_at": "2020-09-20T21:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425408",
    "user": "@jhpalmieri"
}
```

Shouldn't this be using Sage's factorial function, as defined in that file by the line `factorial = Function_factorial()`? Why is `math.factorial` being used?



---

archive/issue_comments_425409.json:
```json
{
    "body": "Yes, this is using `Function_factorial`. Its `_eval_` method does not seem to handle `float`s. My guess is that it is delegated to pynac or sympy, one of which eventually delegates to `math.factorial`.",
    "created_at": "2020-09-20T23:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425409",
    "user": "@mkoeppe"
}
```

Yes, this is using `Function_factorial`. Its `_eval_` method does not seem to handle `float`s. My guess is that it is delegated to pynac or sympy, one of which eventually delegates to `math.factorial`.



---

archive/issue_comments_425410.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-21T04:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425410",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425411.json:
```json
{
    "body": "Let's get this ticket in please. The two remaining issues can be done in follow-up tickets.",
    "created_at": "2020-09-22T14:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425411",
    "user": "@mkoeppe"
}
```

Let's get this ticket in please. The two remaining issues can be done in follow-up tickets.



---

archive/issue_comments_425412.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-09-24T18:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425412",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_425413.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2020-09-24T18:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425413",
    "user": "@mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_425414.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-09-24T18:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425414",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_425415.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-25T01:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425415",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425416.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2020-09-27T15:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425416",
    "user": "@mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_425417.json:
```json
{
    "body": "The changes look okay to me, and doctests pass. I'm not sure why it's a blocker, though.",
    "created_at": "2020-09-28T23:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425417",
    "user": "@jhpalmieri"
}
```

The changes look okay to me, and doctests pass. I'm not sure why it's a blocker, though.



---

archive/issue_comments_425418.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-28T23:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425418",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425419.json:
```json
{
    "body": "Thanks! \n\nI marked it a blocker because we won't be able to release 9.2 before Python 3.9 is released and our new release would therefore already be outdated.",
    "created_at": "2020-09-29T00:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425419",
    "user": "@mkoeppe"
}
```

Thanks! 

I marked it a blocker because we won't be able to release 9.2 before Python 3.9 is released and our new release would therefore already be outdated.



---

archive/issue_comments_425420.json:
```json
{
    "body": "I've tested this with system Python 3.9.rc2 on Gentoo, and got\n\n```\nsage -t --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/pbori/randompoly.py\", line 46, in sage.rings.polynomial.pbori.randompoly.?\nFailed example:\n    s=sparse_random_system(r, number_of_polynomials = 20, variables_per_polynomial = 3, degree=2, random_seed=123)\nExpected nothing\nGot:\n    doctest:warning\n      File \"/mnt/opt/Sage/sage-clang/src/bin/sage-runtests\", line 182, in <module>\n        err = DC.run()\n...\n      File \"/mnt/opt/Sage/sage-clang/local/lib/python3.9/site-packages/sage/rings/polynomial/pbori/randompoly.py\", line 54, in sparse_random_system\n        random_generator = Random(random_seed)\n      File \"/usr/lib/python3.9/random.py\", line 122, in __init__\n        self.seed(x)\n      File \"/usr/lib/python3.9/random.py\", line 158, in seed\n        _warn('Seeding based on hashing is deprecated\\n'\n      File \"/usr/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: Seeding based on hashing is deprecated\n    since Python 3.9 and will be removed in a subsequent version. The only \n    supported seed types are: None, int, float, str, bytes, and bytearray.\n```\n\n\nand also\n\n```\nFile \"src/sage/misc/sageinspect.py\", line 2275, in sage.misc.sageinspect.sage_getsourcelines\nFailed example:\n    sage_getsourcelines(I)\nExpected:\n    (...['class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\\\\n',\n    ...)\nGot:\n    (['@richcmp_method\\n', 'class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\\\\n', '                        MPolynomialIdeal_macaulay2_repr, \\\\\\n', '  ....\n...\n```\n",
    "created_at": "2020-09-30T09:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425420",
    "user": "@dimpase"
}
```

I've tested this with system Python 3.9.rc2 on Gentoo, and got

```
sage -t --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py
**********************************************************************
File "src/sage/rings/polynomial/pbori/randompoly.py", line 46, in sage.rings.polynomial.pbori.randompoly.?
Failed example:
    s=sparse_random_system(r, number_of_polynomials = 20, variables_per_polynomial = 3, degree=2, random_seed=123)
Expected nothing
Got:
    doctest:warning
      File "/mnt/opt/Sage/sage-clang/src/bin/sage-runtests", line 182, in <module>
        err = DC.run()
...
      File "/mnt/opt/Sage/sage-clang/local/lib/python3.9/site-packages/sage/rings/polynomial/pbori/randompoly.py", line 54, in sparse_random_system
        random_generator = Random(random_seed)
      File "/usr/lib/python3.9/random.py", line 122, in __init__
        self.seed(x)
      File "/usr/lib/python3.9/random.py", line 158, in seed
        _warn('Seeding based on hashing is deprecated\n'
      File "/usr/lib/python3.9/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: Seeding based on hashing is deprecated
    since Python 3.9 and will be removed in a subsequent version. The only 
    supported seed types are: None, int, float, str, bytes, and bytearray.
```


and also

```
File "src/sage/misc/sageinspect.py", line 2275, in sage.misc.sageinspect.sage_getsourcelines
Failed example:
    sage_getsourcelines(I)
Expected:
    (...['class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\n',
    ...)
Got:
    (['@richcmp_method\n', 'class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\n', '                        MPolynomialIdeal_macaulay2_repr, \\\n', '  ....
...
```




---

archive/issue_comments_425421.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-09-30T09:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425421",
    "user": "@dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_425422.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-30T20:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425422",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_425423.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-30T21:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425423",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_425424.json:
```json
{
    "body": "See comment 45.",
    "created_at": "2020-09-30T21:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425424",
    "user": "@mkoeppe"
}
```

See comment 45.



---

archive/issue_comments_425425.json:
```json
{
    "body": "Replying to [comment:58 mkoeppe]:\n> See comment 45.\noops, sorry, I was somewhat late to the party. Another problem I'm investigating is that this upgrade seems to lead to zombie Maxima and ECL processes.",
    "created_at": "2020-10-01T08:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425425",
    "user": "@dimpase"
}
```

Replying to [comment:58 mkoeppe]:
> See comment 45.
oops, sorry, I was somewhat late to the party. Another problem I'm investigating is that this upgrade seems to lead to zombie Maxima and ECL processes.



---

archive/issue_comments_425426.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-01T14:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425426",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425427.json:
```json
{
    "body": "ok, good (Zombies have nothing to do with this update)",
    "created_at": "2020-10-01T14:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425427",
    "user": "@dimpase"
}
```

ok, good (Zombies have nothing to do with this update)



---

archive/issue_comments_425428.json:
```json
{
    "body": "Thanks.",
    "created_at": "2020-10-01T15:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425428",
    "user": "@mkoeppe"
}
```

Thanks.



---

archive/issue_comments_425429.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-03T22:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425429",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_425430.json:
```json
{
    "body": "Replying to [comment:40 fbissey]:\n> Replying to [comment:33 mkoeppe]:\n> > Only these two remain. Perhaps \"good enough for 9.2\"?\n> > {{{\n> > sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed\n> > sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed\n> > }}}\n> > \n> \n> I can take ownership of the pbori one, I'll see what I can do.\n\nShould a follow-up ticket for each of these two issues be opened?\n\nMeta-ticket for all Python 3.9 issues?\n\nToo early for a ticket for Python 3.10 support? Python 3.10.0a1 is out:\n\n- https://www.python.org/downloads/release/python-3100a1/",
    "created_at": "2020-10-08T13:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425430",
    "user": "@slel"
}
```

Replying to [comment:40 fbissey]:
> Replying to [comment:33 mkoeppe]:
> > Only these two remain. Perhaps "good enough for 9.2"?
> > {{{
> > sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed
> > sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed
> > }}}
> > 
> 
> I can take ownership of the pbori one, I'll see what I can do.

Should a follow-up ticket for each of these two issues be opened?

Meta-ticket for all Python 3.9 issues?

Too early for a ticket for Python 3.10 support? Python 3.10.0a1 is out:

- https://www.python.org/downloads/release/python-3100a1/



---

archive/issue_comments_425431.json:
```json
{
    "body": "Replying to [comment:63 slelievre]:\n> Replying to [comment:40 fbissey]:\n> > Replying to [comment:33 mkoeppe]:\n> > > Only these two remain. Perhaps \"good enough for 9.2\"?\n> > > {{{\n> > > sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed\n> > > sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed\n> > > }}}\n> > > \n> > \n> > I can take ownership of the pbori one, I'll see what I can do.\n> \n> Should a follow-up ticket for each of these two issues be opened?\n\nYes please\n\n> Meta-ticket for all Python 3.9 issues?\n\nI don't think this is necessary\n\n> Too early for a ticket for Python 3.10 support? Python 3.10.0a1 is out:\n> \n> - https://www.python.org/downloads/release/python-3100a1/\n\nSure, please open a ticket",
    "created_at": "2020-10-13T20:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425431",
    "user": "@mkoeppe"
}
```

Replying to [comment:63 slelievre]:
> Replying to [comment:40 fbissey]:
> > Replying to [comment:33 mkoeppe]:
> > > Only these two remain. Perhaps "good enough for 9.2"?
> > > {{{
> > > sage -t --long --random-seed=0 src/sage/functions/other.py  # 1 doctest failed
> > > sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py  # 1 doctest failed
> > > }}}
> > > 
> > 
> > I can take ownership of the pbori one, I'll see what I can do.
> 
> Should a follow-up ticket for each of these two issues be opened?

Yes please

> Meta-ticket for all Python 3.9 issues?

I don't think this is necessary

> Too early for a ticket for Python 3.10 support? Python 3.10.0a1 is out:
> 
> - https://www.python.org/downloads/release/python-3100a1/

Sure, please open a ticket



---

archive/issue_comments_425432.json:
```json
{
    "body": "Follow-up tickets:\n\n- #30764: Adapt to float factorial deprecation in Python 3.9\n- #30765: Adapt to deprecation of seeding based on hashing in Python 3.9\n- #30766: Support Python 3.10\n- #30767: Test ticket: Python 3.10 development releases",
    "created_at": "2020-10-13T22:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425432",
    "user": "@slel"
}
```

Follow-up tickets:

- #30764: Adapt to float factorial deprecation in Python 3.9
- #30765: Adapt to deprecation of seeding based on hashing in Python 3.9
- #30766: Support Python 3.10
- #30767: Test ticket: Python 3.10 development releases



---

archive/issue_comments_425433.json:
```json
{
    "body": "you might have seen this:\nhttps://github.com/python/cpython/pull/22670  - a critical incompatibility with  pybind11",
    "created_at": "2020-10-20T16:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425433",
    "user": "@dimpase"
}
```

you might have seen this:
https://github.com/python/cpython/pull/22670  - a critical incompatibility with  pybind11



---

archive/issue_comments_425434.json:
```json
{
    "body": "From https://pybind11.readthedocs.io/en/latest/\n\n\n```\nWarning\n\nCombining older versions of pybind11 (< 2.6.0) with the brand-new Python 3.9.0 will trigger undefined behavior that typically manifests as crashes during interpreter shutdown (but could also destroy your data. You have been warned.)\n\nWe recommend that you wait for Python 3.9.1 slated for release in December, which will include a fix that resolves this problem. In the meantime, please update to the latest version of pybind11 (2.6.0 or newer), which includes a temporary workaround specifically when Python 3.9.0 is detected at runtime.\n```\n\n\nshould we hold off 3.9.0  (in spkg-configure.m4 of python3) ?",
    "created_at": "2020-10-20T16:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425434",
    "user": "@dimpase"
}
```

From https://pybind11.readthedocs.io/en/latest/


```
Warning

Combining older versions of pybind11 (< 2.6.0) with the brand-new Python 3.9.0 will trigger undefined behavior that typically manifests as crashes during interpreter shutdown (but could also destroy your data. You have been warned.)

We recommend that you wait for Python 3.9.1 slated for release in December, which will include a fix that resolves this problem. In the meantime, please update to the latest version of pybind11 (2.6.0 or newer), which includes a temporary workaround specifically when Python 3.9.0 is detected at runtime.
```


should we hold off 3.9.0  (in spkg-configure.m4 of python3) ?



---

archive/issue_comments_425435.json:
```json
{
    "body": "We can do the pybind11 upgrade",
    "created_at": "2020-10-20T17:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425435",
    "user": "@mkoeppe"
}
```

We can do the pybind11 upgrade



---

archive/issue_comments_425436.json:
```json
{
    "body": "Replying to [comment:68 mkoeppe]:\n> We can do the pybind11 upgrade\n\nCreated #30803 for this",
    "created_at": "2020-10-20T17:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29947#issuecomment-425436",
    "user": "@mkoeppe"
}
```

Replying to [comment:68 mkoeppe]:
> We can do the pybind11 upgrade

Created #30803 for this
