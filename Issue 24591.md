# Issue 24591: Length-checking iterator

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-02-23 16:13:48

CC:  tscrim embray

Implement a wrapper for an iterator to verify that it has a specified length.

I need this for #24742 but it seems generally useful.


---

Comment by jdemeyer created at 2018-02-23 16:17:54

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-02-23 16:17:54

New commits:


---

Comment by vdelecroix created at 2018-03-02 15:49:41

Why did you implement the `check` method on its own? Why the code not directly into `__next__`?


---

Comment by jdemeyer created at 2018-03-02 15:52:34

Replying to [comment:3 vdelecroix]:
> Why did you implement the `check` method on its own? Why the code not directly into `__next__`?

Because I need to call it twice, also from `__init__`. If you're worried about efficiency, that shouldn't be a problem because it's inlined.


---

Comment by vdelecroix created at 2018-03-02 15:59:50

Replying to [comment:4 jdemeyer]:
> Replying to [comment:3 vdelecroix]:
> > Why did you implement the `check` method on its own? Why the code not directly into `__next__`?
> 
> Because I need to call it twice, also from `__init__`. If you're worried about efficiency, that shouldn't be a problem because it's inlined.

Not efficiency at all (this class is not intended to be efficient anyway). Just readability.


---

Comment by jdemeyer created at 2018-03-02 16:01:33

Replying to [comment:5 vdelecroix]:
> this class is not intended to be efficient anyway

Of course it is!


---

Comment by jdemeyer created at 2018-03-02 16:02:30

Replying to [comment:5 vdelecroix]:
> Just readability.

I would actually argue that separating concerns (iteration vs. checking) _improves_ readability...


---

Comment by vdelecroix created at 2018-03-08 09:34:32

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-03-08 13:18:51

This is useful for dealing with some of the kinds of issues discussed in #24757.   It's not a silver-bullet since it requires either a sized object (with `__len__`) or an otherwise specified length, but that's still useful for a lot of cases.


---

Comment by vbraun created at 2018-03-19 07:57:53

Resolution: fixed
