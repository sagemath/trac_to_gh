# Issue 15181: %timeit in notebook

Issue created by migration from https://trac.sagemath.org/ticket/15418

Original creator: dkrenn

Original creation time: 2013-11-14 10:23:02

CC:  chapoton

Keywords: notebook, timeit

In the notebook

```
%timeit
1+1
```

gives

```
2
CPU time: 0.00 s,  Wall time: 0.00 s
```

whereas

```
timeit("1+1")
```

gives

```
625 loops, best of 3: 806 ns per loop
```

as it should.

In contrast, at the sage command line we get

```
sage: timeit("1+1")
625 loops, best of 3: 886 ns per loop
sage: %timeit 1+1
1000000 loops, best of 3: 309 ns per loop
```


This is inconsistent, the notebook `%timeit` should also return something like `625 loops, best of 3: 806 ns per loop`.


---

Comment by kcrisman created at 2013-11-15 03:36:38

Interesting.  You may also want to report this [upstream](https://github.com/sagemath/sagenb) as well, if it hasn't been already.


---

Comment by kcrisman created at 2014-12-19 04:28:29

I can confirm this - because we don't actually use timeit to handle timeit, apparently it all goes the same place

```
        return ('time' in self.percent_directives() or
                'timeit' in self.percent_directives() or
                getattr(self, '_time', False))
```

in cell.py.


---

Comment by kcrisman created at 2014-12-19 04:29:54

https://github.com/sagemath/sagenb/issues/316


---

Comment by kcrisman created at 2015-06-03 18:08:42

See also #17127.


---

Comment by mkoeppe created at 2020-08-18 00:36:52

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-08-18 00:36:52

Proposing to close all sagenb tickets as outdated, so that all remaining open tickets in the notebook component are about the Jupyter notebook.


---

Comment by chapoton created at 2020-10-20 19:14:14

ok


---

Comment by chapoton created at 2020-10-20 19:14:14

Resolution: invalid
