# Issue 29344: New Algorithm for Characteristic Classes

archive/issues_029344.json:
```json
{
    "body": "CC:  slelievre egourgoulhon tscrim mkoeppe @tobiasdiez\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29581\n\n",
    "created_at": "2020-04-25T19:55:39Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "New Algorithm for Characteristic Classes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29344",
    "user": "@mjungmath"
}
```
CC:  slelievre egourgoulhon tscrim mkoeppe @tobiasdiez



Issue created by migration from https://trac.sagemath.org/ticket/29581





---

archive/issue_comments_416064.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-25T20:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416064",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_416065.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2020-04-26T02:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416065",
    "user": "slelievre"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_416066.json:
```json
{
    "body": "Please add a short description in the \"Description\" field of the ticket,\nand the author's full name in the \"Authors\" field of the ticket. Don't forget\nto set to `needs_review` when this is ready for review.",
    "created_at": "2020-04-26T02:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416066",
    "user": "slelievre"
}
```

Please add a short description in the "Description" field of the ticket,
and the author's full name in the "Authors" field of the ticket. Don't forget
to set to `needs_review` when this is ready for review.



---

archive/issue_comments_416067.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-28T19:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416067",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416068.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-28T19:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416068",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_416069.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-04-28T20:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416069",
    "user": "@mjungmath"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_416070.json:
```json
{
    "body": "Changing keywords from \"\" to \"characteristic_classes, manifolds\".",
    "created_at": "2020-04-28T20:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416070",
    "user": "@mjungmath"
}
```

Changing keywords from "" to "characteristic_classes, manifolds".



---

archive/issue_comments_416071.json:
```json
{
    "body": "Correct syntax for crosslinks is\n\n```\n.. SEEALSO::\n```\n",
    "created_at": "2020-04-28T20:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416071",
    "user": "chapoton"
}
```

Correct syntax for crosslinks is

```
.. SEEALSO::
```




---

archive/issue_comments_416072.json:
```json
{
    "body": "* do not use this:\n\n```\nif distinct_real == False\n```\n\nbut\n\n```\nif not distinct_real\n```\n\n(at least in two places)\n\n\n* The following change is wrong:\n\n```diff\n-        - ``cmatrix`` -- curvature matrix\n-\n+            - ``cmatrix`` -- curvature matrix\n         OUTPUT:\n \n-        - ``I/(2*pi)*cmatrix``\n+            - ``I/(2*pi)*cmatrix``\n```\n\nas one should not indent inside INPUT or OUTPUT blocks (because they end with only one colon). And moreover, one does want empty lines to separate these things.\n\nThis is also incorrect:\n\n```diff\n-            self._dual_exterior_powers[p] = ExtPowerDualFreeModule(self, p)\n+                self._dual_exterior_powers[p] = ExtPowerDualFreeModule(self, p)\n```\n\nWhy did you change the indentation ? it was ok.",
    "created_at": "2020-05-01T18:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416072",
    "user": "chapoton"
}
```

* do not use this:

```
if distinct_real == False
```

but

```
if not distinct_real
```

(at least in two places)


* The following change is wrong:

```diff
-        - ``cmatrix`` -- curvature matrix
-
+            - ``cmatrix`` -- curvature matrix
         OUTPUT:
 
-        - ``I/(2*pi)*cmatrix``
+            - ``I/(2*pi)*cmatrix``
```

as one should not indent inside INPUT or OUTPUT blocks (because they end with only one colon). And moreover, one does want empty lines to separate these things.

This is also incorrect:

```diff
-            self._dual_exterior_powers[p] = ExtPowerDualFreeModule(self, p)
+                self._dual_exterior_powers[p] = ExtPowerDualFreeModule(self, p)
```

Why did you change the indentation ? it was ok.



---

archive/issue_comments_416073.json:
```json
{
    "body": "I am sorry. At this stage, this is just a draft. The indentations are typos coming from using alt+tab (at least I guess so). I will fix this soon.",
    "created_at": "2020-05-01T19:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416073",
    "user": "@mjungmath"
}
```

I am sorry. At this stage, this is just a draft. The indentations are typos coming from using alt+tab (at least I guess so). I will fix this soon.



---

archive/issue_comments_416074.json:
```json
{
    "body": "Thanks for your advice. :)",
    "created_at": "2020-05-01T19:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416074",
    "user": "@mjungmath"
}
```

Thanks for your advice. :)



---

archive/issue_comments_416075.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-04T11:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416075",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416076.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-04T11:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416076",
    "user": "@mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_416077.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-05-04T11:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416077",
    "user": "@mjungmath"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_416078.json:
```json
{
    "body": "An example for the application of the new algorithm would be really nice. For instance a Todd class or A-Hat class. But I have no idea for a suitable one. If anyone does, or at least knows someone who does, I would really appreciate it. Thanks! :)",
    "created_at": "2020-05-04T12:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416078",
    "user": "@mjungmath"
}
```

An example for the application of the new algorithm would be really nice. For instance a Todd class or A-Hat class. But I have no idea for a suitable one. If anyone does, or at least knows someone who does, I would really appreciate it. Thanks! :)



---

archive/issue_comments_416079.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-08T17:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416079",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416080.json:
```json
{
    "body": "Changing component from geometry to manifolds.",
    "created_at": "2020-07-24T11:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416080",
    "user": "@mjungmath"
}
```

Changing component from geometry to manifolds.



---

archive/issue_comments_416081.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416081",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_416082.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416082",
    "user": "mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_416083.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2021-07-23T22:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416083",
    "user": "@mjungmath"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_416084.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-07-23T22:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416084",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_416085.json:
```json
{
    "body": "Do you think it is necessary to give those cohomology classes an own parent or would `DeRhamCohomologyRing` as parent suffice?\n\nThe point is that addition and multiplication is performed differently among those elements. Moreover, it is possible to compare them.",
    "created_at": "2021-07-23T22:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416085",
    "user": "@mjungmath"
}
```

Do you think it is necessary to give those cohomology classes an own parent or would `DeRhamCohomologyRing` as parent suffice?

The point is that addition and multiplication is performed differently among those elements. Moreover, it is possible to compare them.



---

archive/issue_comments_416086.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2021-07-23T22:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416086",
    "user": "@mjungmath"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_416087.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-24T00:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416087",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416088.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-17T15:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416088",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_416089.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-17T17:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416089",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-17T17:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416090",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416091.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-17T20:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416091",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T08:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416092",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T08:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416093",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416094.json:
```json
{
    "body": "The ticket is not ready for review yet; the structure should be fixed though. Feedback at this stage is very much appreciated. :)",
    "created_at": "2021-08-18T08:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416094",
    "user": "@mjungmath"
}
```

The ticket is not ready for review yet; the structure should be fixed though. Feedback at this stage is very much appreciated. :)



---

archive/issue_comments_416095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T09:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416095",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416096.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T16:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416096",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416097.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T16:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416097",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T20:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416098",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416099.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T21:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416099",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416100.json:
```json
{
    "body": "I am particularly curious what you think about my last commit. I want that the corresponding characteristic forms are only computed if really necessary. This essentially only matters for the Pontryagin-Euler algorithm when the characteristic cohomology class contains no Euler or Pontryagin part.\n\nIs there any lazy-stuff to make this a bit nicer maybe?",
    "created_at": "2021-08-18T21:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416100",
    "user": "@mjungmath"
}
```

I am particularly curious what you think about my last commit. I want that the corresponding characteristic forms are only computed if really necessary. This essentially only matters for the Pontryagin-Euler algorithm when the characteristic cohomology class contains no Euler or Pontryagin part.

Is there any lazy-stuff to make this a bit nicer maybe?



---

archive/issue_comments_416101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T21:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416102.json:
```json
{
    "body": "Since I have implemented `fast_wedge_power`, which can be used separately of course, do we want a power method for differential forms or tensor fields respectively?",
    "created_at": "2021-08-19T07:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416102",
    "user": "@mjungmath"
}
```

Since I have implemented `fast_wedge_power`, which can be used separately of course, do we want a power method for differential forms or tensor fields respectively?



---

archive/issue_comments_416103.json:
```json
{
    "body": "Replying to [comment:43 gh-mjungmath]:\n> I am particularly curious what you think about my last commit. I want that the corresponding characteristic forms are only computed if really necessary. This essentially only matters for the Pontryagin-Euler algorithm when the characteristic cohomology class contains no Euler or Pontryagin part.\n\nYou would have to know that ahead of time I think. Na\u00efvely, it seems like you need to know the answer before you can tell if the answer is the form you want.",
    "created_at": "2021-08-19T08:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416103",
    "user": "tscrim"
}
```

Replying to [comment:43 gh-mjungmath]:
> I am particularly curious what you think about my last commit. I want that the corresponding characteristic forms are only computed if really necessary. This essentially only matters for the Pontryagin-Euler algorithm when the characteristic cohomology class contains no Euler or Pontryagin part.

You would have to know that ahead of time I think. Naïvely, it seems like you need to know the answer before you can tell if the answer is the form you want.



---

archive/issue_comments_416104.json:
```json
{
    "body": "Well, what I need to know is already encoded in the characteristic cohomology class itself. For example, if it contains no Euler class generator, then I don't need to invoke `EulerAlgorithm().get(nab)`. Like I said, this only matters for the \"mixed\" PontryaginEuler case because in any other case I have to do the full computation anyway.\n\nOne reason why this is important: in the odd-rank case, or for non-Levi-Civita connections, this algorithm for the Euler class is not working. But one may still want to compute the Pontryagin classes.\n\nThe current commit makes sure of that by asking for the power of a certain generator and returning the one scalar field right away if the exponent is zero. This works, but it feels rather dirty to me, and I ponder whether there might be a nicer solution to this.",
    "created_at": "2021-08-19T08:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416104",
    "user": "@mjungmath"
}
```

Well, what I need to know is already encoded in the characteristic cohomology class itself. For example, if it contains no Euler class generator, then I don't need to invoke `EulerAlgorithm().get(nab)`. Like I said, this only matters for the "mixed" PontryaginEuler case because in any other case I have to do the full computation anyway.

One reason why this is important: in the odd-rank case, or for non-Levi-Civita connections, this algorithm for the Euler class is not working. But one may still want to compute the Pontryagin classes.

The current commit makes sure of that by asking for the power of a certain generator and returning the one scalar field right away if the exponent is zero. This works, but it feels rather dirty to me, and I ponder whether there might be a nicer solution to this.



---

archive/issue_comments_416105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-19T09:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416105",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416106.json:
```json
{
    "body": "Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.",
    "created_at": "2021-08-19T09:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416106",
    "user": "tscrim"
}
```

Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.



---

archive/issue_comments_416107.json:
```json
{
    "body": "Replying to [comment:49 tscrim]:\n> Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.\n\nMh okay. If you like, we can talk about it privately at some point.\n\nI have another question though. I tried to establish a coercion from the characteristic cohomology class ring to the de Rham cohomology ring. For that, I need a representative which I only get if I've inserted a connection. Now I've read that coercions must always suceed. So throwing an error if no representative is available is not an option then?\n\nOtherwise, we could return the same instance of `CharacteristicCohomologyClass` if we pass it to the `_element_constructor_` of `DeRhamCohomologyRing`. But I suppose that is against the coercion principles either, right?",
    "created_at": "2021-08-19T09:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416107",
    "user": "@mjungmath"
}
```

Replying to [comment:49 tscrim]:
> Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.

Mh okay. If you like, we can talk about it privately at some point.

I have another question though. I tried to establish a coercion from the characteristic cohomology class ring to the de Rham cohomology ring. For that, I need a representative which I only get if I've inserted a connection. Now I've read that coercions must always suceed. So throwing an error if no representative is available is not an option then?

Otherwise, we could return the same instance of `CharacteristicCohomologyClass` if we pass it to the `_element_constructor_` of `DeRhamCohomologyRing`. But I suppose that is against the coercion principles either, right?



---

archive/issue_comments_416108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-19T13:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416108",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416109.json:
```json
{
    "body": "Replying to [comment:50 gh-mjungmath]:\n> Replying to [comment:49 tscrim]:\n> > Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.\n> \n> Mh okay. If you like, we can talk about it privately at some point.\n\nIf you are still stuck with something, perhaps we can. Perhaps \u00c9ric can offer some wisdom here.\n\n> I have another question though. I tried to establish a coercion from the characteristic cohomology class ring to the de Rham cohomology ring. For that, I need a representative which I only get if I've inserted a connection. Now I've read that coercions must always suceed. So throwing an error if no representative is available is not an option then?\n\nProbably. Although you can say there is a coercion, but the data used to initialize it has not been specified. However, this map must also be unique too (in a mathematical sense; I think different representatives for the same element is fine), which means you cannot change the connection. This might be a place where we can justify having an exception because of the surrounding framework, but it is likely better to avoid that and make the user explicitly ask for a conversion.\n\n> Otherwise, we could return the same instance of `CharacteristicCohomologyClass` if we pass it to the `_element_constructor_` of `DeRhamCohomologyRing`. But I suppose that is against the coercion principles either, right?\n\nIf we are passing it to the `_element_cosntructor_`, then it is a conversion, and there are essentially no rules at that point.",
    "created_at": "2021-08-25T04:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416109",
    "user": "tscrim"
}
```

Replying to [comment:50 gh-mjungmath]:
> Replying to [comment:49 tscrim]:
> > Unfortunately this is over my head mathematically, so I don't think I can really help with possible solutions at this point.
> 
> Mh okay. If you like, we can talk about it privately at some point.

If you are still stuck with something, perhaps we can. Perhaps Éric can offer some wisdom here.

> I have another question though. I tried to establish a coercion from the characteristic cohomology class ring to the de Rham cohomology ring. For that, I need a representative which I only get if I've inserted a connection. Now I've read that coercions must always suceed. So throwing an error if no representative is available is not an option then?

Probably. Although you can say there is a coercion, but the data used to initialize it has not been specified. However, this map must also be unique too (in a mathematical sense; I think different representatives for the same element is fine), which means you cannot change the connection. This might be a place where we can justify having an exception because of the surrounding framework, but it is likely better to avoid that and make the user explicitly ask for a conversion.

> Otherwise, we could return the same instance of `CharacteristicCohomologyClass` if we pass it to the `_element_constructor_` of `DeRhamCohomologyRing`. But I suppose that is against the coercion principles either, right?

If we are passing it to the `_element_cosntructor_`, then it is a conversion, and there are essentially no rules at that point.



---

archive/issue_comments_416110.json:
```json
{
    "body": "Thank you Travis for your comments. My original idea was to inherit from `DeRhamCohomologyClass`. Because both classes have the `representative` method in common, which is crucial to perform operations such as additions and cup-products. My \"dream\" would be that an element of `CharacteristicCohomologyClassRing` can be seen as member of `DeRhamCohomologyRing`, and whenever `representative` is invoked (even after coercions), you can still choose a connection.\n\nOne way to achieve this could be to allow the attribute `_representative` in `DeRhamCohomologyClass` to refer to a method. But I suppose this is rather spurious for the user?\n\nAlternatively, if we drop my \"dream\" and still allow coercion: we can modify `DeRhamCohomologyClass` in such a way that we can give it a name and allow to leave the `_representative` attribute empty. Similar to scalar fields whose expressions are not set yet. Afterwards, the representative can be set dynamically, and we can make the instance immutable if desired.\n\nWhat would you prefer Travis? Eric, do you have an opinion, too?",
    "created_at": "2021-08-25T07:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416110",
    "user": "@mjungmath"
}
```

Thank you Travis for your comments. My original idea was to inherit from `DeRhamCohomologyClass`. Because both classes have the `representative` method in common, which is crucial to perform operations such as additions and cup-products. My "dream" would be that an element of `CharacteristicCohomologyClassRing` can be seen as member of `DeRhamCohomologyRing`, and whenever `representative` is invoked (even after coercions), you can still choose a connection.

One way to achieve this could be to allow the attribute `_representative` in `DeRhamCohomologyClass` to refer to a method. But I suppose this is rather spurious for the user?

Alternatively, if we drop my "dream" and still allow coercion: we can modify `DeRhamCohomologyClass` in such a way that we can give it a name and allow to leave the `_representative` attribute empty. Similar to scalar fields whose expressions are not set yet. Afterwards, the representative can be set dynamically, and we can make the instance immutable if desired.

What would you prefer Travis? Eric, do you have an opinion, too?



---

archive/issue_comments_416111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-29T16:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416111",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416112.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-29T16:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416112",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416113.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-29T16:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416113",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T10:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416114",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416115.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T14:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416115",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416116.json:
```json
{
    "body": "I think I made the constructor class `CharacteristicCohomologyClass` unnecessarily complicated. Do you have an idea to make it more clean?\n\nOtherwise, the main parts should be finished except for coercion support w.r.t. de Rham cohomology (see comment:53).",
    "created_at": "2021-09-05T14:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416116",
    "user": "@mjungmath"
}
```

I think I made the constructor class `CharacteristicCohomologyClass` unnecessarily complicated. Do you have an idea to make it more clean?

Otherwise, the main parts should be finished except for coercion support w.r.t. de Rham cohomology (see comment:53).



---

archive/issue_comments_416117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T14:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416118.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T14:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416118",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416119.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-09-05T15:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416119",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_416120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T15:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416120",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T15:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416121",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416122.json:
```json
{
    "body": "Replying to [comment:52 tscrim]:\n> Probably. Although you can say there is a coercion, but the data used to initialize it has not been specified. However, this map must also be unique too (in a mathematical sense; I think different representatives for the same element is fine), which means you cannot change the connection.\n\nWait. The cohomology class ***is*** independent of the connection. It just gives different representatives. Then it should be fine.",
    "created_at": "2021-09-05T17:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416122",
    "user": "@mjungmath"
}
```

Replying to [comment:52 tscrim]:
> Probably. Although you can say there is a coercion, but the data used to initialize it has not been specified. However, this map must also be unique too (in a mathematical sense; I think different representatives for the same element is fine), which means you cannot change the connection.

Wait. The cohomology class ***is*** independent of the connection. It just gives different representatives. Then it should be fine.



---

archive/issue_comments_416123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T19:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T19:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416124",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T19:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416125",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T19:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-07T17:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416127",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416128.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-07T17:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416128",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416129.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-08T12:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416129",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-08T12:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416130",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416131.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-09T12:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416131",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416132.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-09T12:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416132",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416133.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-09T14:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416133",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416134.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-09T15:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416134",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-11T20:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416135",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416136.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-11T20:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416136",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416137.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-12T10:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416137",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416138.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2021-09-12T10:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416138",
    "user": "@mjungmath"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_416139.json:
```json
{
    "body": "Ticket should be finally ready for review now. :)",
    "created_at": "2021-09-12T10:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416139",
    "user": "@mjungmath"
}
```

Ticket should be finally ready for review now. :)



---

archive/issue_comments_416140.json:
```json
{
    "body": "By the way, comparing wall times within the notebook https://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Notebooks/SM_char_classes.ipynb yields very good results!",
    "created_at": "2021-09-12T10:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416140",
    "user": "@mjungmath"
}
```

By the way, comparing wall times within the notebook https://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Notebooks/SM_char_classes.ipynb yields very good results!



---

archive/issue_comments_416141.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-12T20:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416141",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416142.json:
```json
{
    "body": "Patchbot is morally green.",
    "created_at": "2021-09-13T07:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416142",
    "user": "@mjungmath"
}
```

Patchbot is morally green.



---

archive/issue_comments_416143.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-13T12:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416143",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-13T17:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416145.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-15T14:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416145",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416146.json:
```json
{
    "body": "Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.\n\nThis isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?\n\nPerhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).",
    "created_at": "2021-09-16T04:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416146",
    "user": "tscrim"
}
```

Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.

This isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?

Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).



---

archive/issue_comments_416147.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-16T12:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416147",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416148.json:
```json
{
    "body": "Replying to [comment:88 tscrim]:\n> Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.\n\nThank you Travis for this feedback. I also tied it to the element constructor now. Is that what you had in mind?\n\n> This isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?\n\nTake for example `CP^1 = S^2` whose 2nd cohomology is generated by the first Chern class of the tautological bundle. But this is a rather special example.\n\n> Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).\n\nmodule-level doc?",
    "created_at": "2021-09-16T12:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416148",
    "user": "@mjungmath"
}
```

Replying to [comment:88 tscrim]:
> Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.

Thank you Travis for this feedback. I also tied it to the element constructor now. Is that what you had in mind?

> This isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?

Take for example `CP^1 = S^2` whose 2nd cohomology is generated by the first Chern class of the tautological bundle. But this is a rather special example.

> Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).

module-level doc?



---

archive/issue_comments_416149.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-16T21:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416149",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416150.json:
```json
{
    "body": "Replying to [comment:90 gh-mjungmath]:\n> Replying to [comment:88 tscrim]:\n> > Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.\n> \n> Thank you Travis for this feedback. I also tied it to the element constructor now. Is that what you had in mind?\n\nYea, that looks good. Thank you.\n\n> > This isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?\n> \n> Take for example `CP^1 = S^2` whose 2nd cohomology is generated by the first Chern class of the tautological bundle. But this is a rather special example.\n\nPerhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.\n\n> > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).\n> \n> module-level doc?\n\nThe documentation at the top of the `characteristic_cohomology_class.py` file (a Python module).",
    "created_at": "2021-09-21T04:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416150",
    "user": "tscrim"
}
```

Replying to [comment:90 gh-mjungmath]:
> Replying to [comment:88 tscrim]:
> > Since `CharacteristicCohomologyClass` is not a function nor user-facing, you should follow Python naming conventions and write it as `characteristic_cohomology_class`, perhaps adding `build_` in front. However, I think you are better off tying that to the ring, perhaps as a (cached) helper method. This ties the cache of classes to the lifecycle of the ring rather than globally (which also nails the rings in memory) and better links everything from a code-association perspective.
> 
> Thank you Travis for this feedback. I also tied it to the element constructor now. Is that what you had in mind?

Yea, that looks good. Thank you.

> > This isn't necessarily specific to this ticket (but maybe now with these changes this is now possible), but do we have an example where the entire cohomology ring of a manifold is computed, such as the sphere or torus?
> 
> Take for example `CP^1 = S^2` whose 2nd cohomology is generated by the first Chern class of the tautological bundle. But this is a rather special example.

Perhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.

> > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).
> 
> module-level doc?

The documentation at the top of the `characteristic_cohomology_class.py` file (a Python module).



---

archive/issue_comments_416151.json:
```json
{
    "body": "Replying to [comment:92 tscrim]:\n> Yea, that looks good. Thank you.\n\nSo, what's missing for a positive review then?\n\n> Perhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.\n\nI don't see how that should be possible with this implementation. Characteristic cohomology classes usually don't tell you anything about the cohomology of your underlying base space. For once, the characteristic cohomology classes in general don't generate the cohomology groups. Moreover, if a characteristic cohomology class has torsion in the ZZ-cohomology, its corresponding class in the de Rham cohomology vanishes. So you lose a lot of information on the way.\n\n> > > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).\n> > \n> > module-level doc?\n> \n> The documentation at the top of the `characteristic_cohomology_class.py` file (a Python module).\n\nRight. But this is indeed something for a follow-up. However, don't you think this fits better into a general tutorial?",
    "created_at": "2021-09-21T20:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416151",
    "user": "@mjungmath"
}
```

Replying to [comment:92 tscrim]:
> Yea, that looks good. Thank you.

So, what's missing for a positive review then?

> Perhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.

I don't see how that should be possible with this implementation. Characteristic cohomology classes usually don't tell you anything about the cohomology of your underlying base space. For once, the characteristic cohomology classes in general don't generate the cohomology groups. Moreover, if a characteristic cohomology class has torsion in the ZZ-cohomology, its corresponding class in the de Rham cohomology vanishes. So you lose a lot of information on the way.

> > > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).
> > 
> > module-level doc?
> 
> The documentation at the top of the `characteristic_cohomology_class.py` file (a Python module).

Right. But this is indeed something for a follow-up. However, don't you think this fits better into a general tutorial?



---

archive/issue_comments_416152.json:
```json
{
    "body": "Replying to [comment:93 gh-mjungmath]:\n> Replying to [comment:92 tscrim]:\n> > Yea, that looks good. Thank you.\n> \n> So, what's missing for a positive review then?\n\nYou've answered all of my other questions, so nothing now. Thank you.\n\n> > Perhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.\n> \n> I don't see how that should be possible with this implementation. Characteristic cohomology classes usually don't tell you anything about the cohomology of your underlying base space. For once, the characteristic cohomology classes in general don't generate the cohomology groups. Moreover, if a characteristic cohomology class has torsion in the ZZ-cohomology, its corresponding class in the de Rham cohomology vanishes. So you lose a lot of information on the way.\n\nOkay. Thank you for the explanation.\n\n> > > > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).\n> \n> Right. But this is indeed something for a follow-up. However, don't you think this fits better into a general tutorial?\n\nI agree that it should be a followup. Yet, it is a bit specialized, so I think a thematic tutorial is better.",
    "created_at": "2021-09-23T03:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416152",
    "user": "tscrim"
}
```

Replying to [comment:93 gh-mjungmath]:
> Replying to [comment:92 tscrim]:
> > Yea, that looks good. Thank you.
> 
> So, what's missing for a positive review then?

You've answered all of my other questions, so nothing now. Thank you.

> > Perhaps that is a bit special. The torus is a little more interesting example. Mainly what I am thinking is if can we compute the Betti numbers without necessarily knowing what the manifold is in advance.
> 
> I don't see how that should be possible with this implementation. Characteristic cohomology classes usually don't tell you anything about the cohomology of your underlying base space. For once, the characteristic cohomology classes in general don't generate the cohomology groups. Moreover, if a characteristic cohomology class has torsion in the ZZ-cohomology, its corresponding class in the de Rham cohomology vanishes. So you lose a lot of information on the way.

Okay. Thank you for the explanation.

> > > > Perhaps as a followup ticket, a thematic tutorial on how to compute with the cohomology classes of the manifold might be good (using the module-level doc as a starting point).
> 
> Right. But this is indeed something for a follow-up. However, don't you think this fits better into a general tutorial?

I agree that it should be a followup. Yet, it is a bit specialized, so I think a thematic tutorial is better.



---

archive/issue_comments_416153.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-23T03:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416153",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416154.json:
```json
{
    "body": "Thank you for the review Travis! :)",
    "created_at": "2021-09-23T08:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416154",
    "user": "@mjungmath"
}
```

Thank you for the review Travis! :)



---

archive/issue_comments_416155.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-09-26T21:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416155",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_416156.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-09-26T21:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416156",
    "user": "vbraun"
}
```

Merge conflict



---

archive/issue_comments_416157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-27T14:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416157",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416158.json:
```json
{
    "body": "I have no idea what caused the merge conflict. I hope it works now...",
    "created_at": "2021-09-27T14:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416158",
    "user": "@mjungmath"
}
```

I have no idea what caused the merge conflict. I hope it works now...



---

archive/issue_comments_416159.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-09-27T14:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416159",
    "user": "@mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_416160.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-29T07:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416160",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416161.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-09-29T08:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416161",
    "user": "egourgoulhon"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_416162.json:
```json
{
    "body": "Sorry to interfere here, but the patchbot says\n\n```\nsage -t --long --random-seed=0 src/sage/manifolds/differentiable/characteristic_cohomology_class.py  # 9 doctests failed\n```\n",
    "created_at": "2021-09-29T08:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416162",
    "user": "egourgoulhon"
}
```

Sorry to interfere here, but the patchbot says

```
sage -t --long --random-seed=0 src/sage/manifolds/differentiable/characteristic_cohomology_class.py  # 9 doctests failed
```




---

archive/issue_comments_416163.json:
```json
{
    "body": "Looks like an import location changed:\n\n```\nImportError: cannot import name 'I' from 'sage.libs.pynac.pynac'\n```\n",
    "created_at": "2021-09-29T09:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416163",
    "user": "tscrim"
}
```

Looks like an import location changed:

```
ImportError: cannot import name 'I' from 'sage.libs.pynac.pynac'
```




---

archive/issue_comments_416164.json:
```json
{
    "body": "This is probably due to #32386. How do I import the imaginary unit now?",
    "created_at": "2021-09-29T09:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416164",
    "user": "@mjungmath"
}
```

This is probably due to #32386. How do I import the imaginary unit now?



---

archive/issue_comments_416165.json:
```json
{
    "body": "Replying to [comment:103 gh-mjungmath]:\n> This is probably due to #32386. How do I import the imaginary unit now?\n`sage: import_statements(\"I\")` says\n\n```\nfrom sage.rings.imaginary_unit import I\n```\n\nIndeed:\n\n```\nsage: from sage.rings.imaginary_unit import I as I2\nsage: I2 is I\nTrue\n```\n",
    "created_at": "2021-09-29T09:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416165",
    "user": "egourgoulhon"
}
```

Replying to [comment:103 gh-mjungmath]:
> This is probably due to #32386. How do I import the imaginary unit now?
`sage: import_statements("I")` says

```
from sage.rings.imaginary_unit import I
```

Indeed:

```
sage: from sage.rings.imaginary_unit import I as I2
sage: I2 is I
True
```




---

archive/issue_comments_416166.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-29T09:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416166",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416167.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-09-29T09:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416167",
    "user": "@mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_416168.json:
```json
{
    "body": "Here we go. Let's hope this works now.\n----\nNew commits:",
    "created_at": "2021-09-29T09:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416168",
    "user": "@mjungmath"
}
```

Here we go. Let's hope this works now.
----
New commits:



---

archive/issue_comments_416169.json:
```json
{
    "body": "From #32386, they made this change:\n\n```diff\n-from sage.libs.pynac.pynac import I\n+from sage.symbolic.expression import I\n```\n",
    "created_at": "2021-09-29T09:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416169",
    "user": "tscrim"
}
```

From #32386, they made this change:

```diff
-from sage.libs.pynac.pynac import I
+from sage.symbolic.expression import I
```




---

archive/issue_comments_416170.json:
```json
{
    "body": "Replying to [comment:104 egourgoulhon]:\n> Replying to [comment:103 gh-mjungmath]:\n> > This is probably due to #32386. How do I import the imaginary unit now?\n> `sage: import_statements(\"I\")` says\n> {{{\n> from sage.rings.imaginary_unit import I\n> }}}\n> Indeed:\n> {{{\n> sage: from sage.rings.imaginary_unit import I as I2\n> sage: I2 is I\n> True\n> }}}\n\nBTW, I've just noticed that\n\n```\nsage: from sage.symbolic.constants import I as I3\nsage: I3 is I\nFalse\n```\n\nHowever, \n\n```\nsage: bool(I3 == I)\nTrue\nsage: I3^2\n-1\nsage: I + I3\n2*I\n```\n",
    "created_at": "2021-09-29T09:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416170",
    "user": "egourgoulhon"
}
```

Replying to [comment:104 egourgoulhon]:
> Replying to [comment:103 gh-mjungmath]:
> > This is probably due to #32386. How do I import the imaginary unit now?
> `sage: import_statements("I")` says
> {{{
> from sage.rings.imaginary_unit import I
> }}}
> Indeed:
> {{{
> sage: from sage.rings.imaginary_unit import I as I2
> sage: I2 is I
> True
> }}}

BTW, I've just noticed that

```
sage: from sage.symbolic.constants import I as I3
sage: I3 is I
False
```

However, 

```
sage: bool(I3 == I)
True
sage: I3^2
-1
sage: I + I3
2*I
```




---

archive/issue_comments_416171.json:
```json
{
    "body": "Replying to [comment:107 tscrim]:\n> From #32386, they made this change:\n> {{{#!diff\n> -from sage.libs.pynac.pynac import I\n> +from sage.symbolic.expression import I\n> }}}\nHere we have:\n\n```\nsage: from sage.symbolic.expression import I as I4\nsage: I4 is I\nFalse\n```\n",
    "created_at": "2021-09-29T09:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416171",
    "user": "egourgoulhon"
}
```

Replying to [comment:107 tscrim]:
> From #32386, they made this change:
> {{{#!diff
> -from sage.libs.pynac.pynac import I
> +from sage.symbolic.expression import I
> }}}
Here we have:

```
sage: from sage.symbolic.expression import I as I4
sage: I4 is I
False
```




---

archive/issue_comments_416172.json:
```json
{
    "body": "To summarize, there are at least 3 sources for `I`: `sage.rings.imaginary_unit`, `sage.symbolic.constants`, `sage.symbolic.expression`, but only the first one gives the same `I` as the Python variable predefined in the interactive shell. Moreover, we have\n\n```\nsage: I.parent()\nNumber Field in I with defining polynomial x^2 + 1 with I = 1*I\nsage: from sage.symbolic.constants import I as I1\nsage: I1.parent()\nSymbolic Ring\nsage: from sage.symbolic.expression import I as I2\nsage: I2.parent()\nSymbolic Ring\nsage: I2 is I1\nTrue\n```\n",
    "created_at": "2021-09-29T09:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416172",
    "user": "egourgoulhon"
}
```

To summarize, there are at least 3 sources for `I`: `sage.rings.imaginary_unit`, `sage.symbolic.constants`, `sage.symbolic.expression`, but only the first one gives the same `I` as the Python variable predefined in the interactive shell. Moreover, we have

```
sage: I.parent()
Number Field in I with defining polynomial x^2 + 1 with I = 1*I
sage: from sage.symbolic.constants import I as I1
sage: I1.parent()
Symbolic Ring
sage: from sage.symbolic.expression import I as I2
sage: I2.parent()
Symbolic Ring
sage: I2 is I1
True
```




---

archive/issue_comments_416173.json:
```json
{
    "body": "But `sage.symbolic.constants` and `sage.symbolic.expression` give the same `I`, don't they?",
    "created_at": "2021-09-29T09:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416173",
    "user": "@mjungmath"
}
```

But `sage.symbolic.constants` and `sage.symbolic.expression` give the same `I`, don't they?



---

archive/issue_comments_416174.json:
```json
{
    "body": "#18036 is probably relevant here.",
    "created_at": "2021-09-29T09:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416174",
    "user": "egourgoulhon"
}
```

#18036 is probably relevant here.



---

archive/issue_comments_416175.json:
```json
{
    "body": "I think you want to follow the change from #32386 since you are wanting to do symbolic ring computations. Otherwise you end up with\n\n```\nsage: I.parent()\nNumber Field in I with defining polynomial x^2 + 1 with I = 1*I\n```\n",
    "created_at": "2021-09-29T09:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416175",
    "user": "tscrim"
}
```

I think you want to follow the change from #32386 since you are wanting to do symbolic ring computations. Otherwise you end up with

```
sage: I.parent()
Number Field in I with defining polynomial x^2 + 1 with I = 1*I
```




---

archive/issue_comments_416176.json:
```json
{
    "body": "Replying to [comment:113 tscrim]:\n> I think you want to follow the change from #32386 since you are wanting to do symbolic ring computations. Otherwise you end up with\n> {{{\n> sage: I.parent()\n> Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n> }}}\nIn `src/sage/symbolic/all.py` there is a deprecation warning against `from sage.symbolic.expression import I`:\n\n```\nlazy_import(\"sage.symbolic.expression\", \"I\", deprecation=(18036,\n        \"import I from sage.symbolic.constants for the imaginary unit viewed as an element of SR, or from sage.rings.imaginary_unit for the element of ZZ[i]\"))\n```\n\nHowever, this warning does not seem effective...",
    "created_at": "2021-09-29T09:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416176",
    "user": "egourgoulhon"
}
```

Replying to [comment:113 tscrim]:
> I think you want to follow the change from #32386 since you are wanting to do symbolic ring computations. Otherwise you end up with
> {{{
> sage: I.parent()
> Number Field in I with defining polynomial x^2 + 1 with I = 1*I
> }}}
In `src/sage/symbolic/all.py` there is a deprecation warning against `from sage.symbolic.expression import I`:

```
lazy_import("sage.symbolic.expression", "I", deprecation=(18036,
        "import I from sage.symbolic.constants for the imaginary unit viewed as an element of SR, or from sage.rings.imaginary_unit for the element of ZZ[i]"))
```

However, this warning does not seem effective...



---

archive/issue_comments_416177.json:
```json
{
    "body": "In a fresh Sage session, we have (since #18036 I guess)\n\n```\nsage: I.parent()\nNumber Field in I with defining polynomial x^2 + 1 with I = 1*I\nsage: from sage.symbolic.constants import I as I_symb\nsage: I_symb.parent()\nSymbolic Ring\nsage: SR(I) is I_symb\nFalse\n```\n\nI would have expected `True` for the last output (i.e. to have `I` unique as a symbolic expression).",
    "created_at": "2021-09-29T10:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416177",
    "user": "egourgoulhon"
}
```

In a fresh Sage session, we have (since #18036 I guess)

```
sage: I.parent()
Number Field in I with defining polynomial x^2 + 1 with I = 1*I
sage: from sage.symbolic.constants import I as I_symb
sage: I_symb.parent()
Symbolic Ring
sage: SR(I) is I_symb
False
```

I would have expected `True` for the last output (i.e. to have `I` unique as a symbolic expression).



---

archive/issue_comments_416178.json:
```json
{
    "body": "It's not so unnatural to have copies being made. It would also be a lot of work for SR to check that some potentially very complicated expression is equal to `I`.\n\nOkay, then follow the deprecation and import from `sage.symbolic.constants`. The main thing is to not use the one from `from sage.rings.imaginary_unit import I`.",
    "created_at": "2021-09-29T12:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416178",
    "user": "tscrim"
}
```

It's not so unnatural to have copies being made. It would also be a lot of work for SR to check that some potentially very complicated expression is equal to `I`.

Okay, then follow the deprecation and import from `sage.symbolic.constants`. The main thing is to not use the one from `from sage.rings.imaginary_unit import I`.



---

archive/issue_comments_416179.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-29T13:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416179",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416180.json:
```json
{
    "body": "Okay, there we go. Thank you for this feedback!",
    "created_at": "2021-09-29T13:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416180",
    "user": "@mjungmath"
}
```

Okay, there we go. Thank you for this feedback!



---

archive/issue_comments_416181.json:
```json
{
    "body": "Green bot. LGTM.",
    "created_at": "2021-09-29T22:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416181",
    "user": "tscrim"
}
```

Green bot. LGTM.



---

archive/issue_comments_416182.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-29T22:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416182",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416183.json:
```json
{
    "body": "\n```\n[docpdf] ! Package inputenc Error: Unicode character \u03d1 (U+03D1)\n[docpdf] (inputenc)                not set up for use with LaTeX.\n[docpdf] \n[docpdf] See the inputenc package documentation for explanation.\n[docpdf] Type  H <return>  for immediate help.\n[docpdf]  ...                                              \n[docpdf]                                                   \n[docpdf] l.73283 ...1}{\\PYGZsh{} use spherical coordinates}\n[docpdf]                                                   \n[docpdf] ? \n[docpdf] ! Emergency stop.\n```\n",
    "created_at": "2021-10-03T17:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416183",
    "user": "vbraun"
}
```


```
[docpdf] ! Package inputenc Error: Unicode character ϑ (U+03D1)
[docpdf] (inputenc)                not set up for use with LaTeX.
[docpdf] 
[docpdf] See the inputenc package documentation for explanation.
[docpdf] Type  H <return>  for immediate help.
[docpdf]  ...                                              
[docpdf]                                                   
[docpdf] l.73283 ...1}{\PYGZsh{} use spherical coordinates}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```




---

archive/issue_comments_416184.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-10-03T17:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416184",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_416185.json:
```json
{
    "body": "Indeed, any new Unicode character has to be declared in\n\n```\nsrc/sage/docs/conf.py\n```\n\nfor the pdf doc to be generated successfully.",
    "created_at": "2021-10-03T19:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416185",
    "user": "egourgoulhon"
}
```

Indeed, any new Unicode character has to be declared in

```
src/sage/docs/conf.py
```

for the pdf doc to be generated successfully.



---

archive/issue_comments_416186.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-03T22:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416186",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416187.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-03T22:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416187",
    "user": "@mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_416188.json:
```json
{
    "body": "That should solve it. Hopefully.",
    "created_at": "2021-10-03T22:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416188",
    "user": "@mjungmath"
}
```

That should solve it. Hopefully.



---

archive/issue_comments_416189.json:
```json
{
    "body": "That is one way to solve it.",
    "created_at": "2021-10-03T23:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416189",
    "user": "tscrim"
}
```

That is one way to solve it.



---

archive/issue_comments_416190.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-03T23:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416190",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416191.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-10T10:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29344#issuecomment-416191",
    "user": "vbraun"
}
```

Resolution: fixed
