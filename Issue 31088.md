# Issue 31088: Upgrade ecm to 7.0.5

archive/issues_031088.json:
```json
{
    "body": "CC:  zimmerma dimpase fbissey tornaria\n\n(from #30600)\n\nIssue created by migration from https://trac.sagemath.org/ticket/31325\n\n",
    "created_at": "2021-02-02T17:14:41Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Upgrade ecm to 7.0.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31088",
    "user": "mkoeppe"
}
```
CC:  zimmerma dimpase fbissey tornaria

(from #30600)

Issue created by migration from https://trac.sagemath.org/ticket/31325





---

archive/issue_comments_444008.json:
```json
{
    "body": "warning, 7.0.5 is not yet released! And the release number might change...",
    "created_at": "2021-02-02T17:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444008",
    "user": "zimmerma"
}
```

warning, 7.0.5 is not yet released! And the release number might change...



---

archive/issue_comments_444009.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444009",
    "user": "mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_444010.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-25T06:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444010",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_444011.json:
```json
{
    "body": "\n```\n[ecm-7.0.5-dev] gcc -DHAVE_CONFIG_H -I.  -DOUTSIDE_LIBECM   -g -march=native -g -O2 -fPIC -c -o ecm-main.o `test -f 'main.c' || echo './'`main.c\n[ecm-7.0.5-dev] main.c:55:10: fatal error: 'torsions.h' file not found\n[ecm-7.0.5-dev] #include \"torsions.h\" /* to benefit from more torsion groups */\n[ecm-7.0.5-dev]          ^~~~~~~~~~~~\n[ecm-7.0.5-dev] 1 error generated.\n```\n",
    "created_at": "2022-04-25T06:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444011",
    "user": "mkoeppe"
}
```


```
[ecm-7.0.5-dev] gcc -DHAVE_CONFIG_H -I.  -DOUTSIDE_LIBECM   -g -march=native -g -O2 -fPIC -c -o ecm-main.o `test -f 'main.c' || echo './'`main.c
[ecm-7.0.5-dev] main.c:55:10: fatal error: 'torsions.h' file not found
[ecm-7.0.5-dev] #include "torsions.h" /* to benefit from more torsion groups */
[ecm-7.0.5-dev]          ^~~~~~~~~~~~
[ecm-7.0.5-dev] 1 error generated.
```




---

archive/issue_comments_444012.json:
```json
{
    "body": "Is https://github.com/sethtroisi/gmp-ecm the official repo?",
    "created_at": "2022-04-25T06:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444012",
    "user": "mkoeppe"
}
```

Is https://github.com/sethtroisi/gmp-ecm the official repo?



---

archive/issue_comments_444013.json:
```json
{
    "body": "in the README\n\nnote: this file is outdated now that GMP-ECM moved to gitlab",
    "created_at": "2022-04-25T06:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444013",
    "user": "chapoton"
}
```

in the README

note: this file is outdated now that GMP-ECM moved to gitlab



---

archive/issue_comments_444014.json:
```json
{
    "body": "https://gitlab.inria.fr/zimmerma/ecm",
    "created_at": "2022-04-25T06:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444014",
    "user": "chapoton"
}
```

https://gitlab.inria.fr/zimmerma/ecm



---

archive/issue_comments_444015.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-25T07:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444015",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444016.json:
```json
{
    "body": "It would be good to have 7.0.5 tagged on the git repo.",
    "created_at": "2022-04-25T10:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444016",
    "user": "dimpase"
}
```

It would be good to have 7.0.5 tagged on the git repo.



---

archive/issue_comments_444017.json:
```json
{
    "body": "the tarball is missing `https://gitlab.inria.fr/zimmerma/ecm/-/raw/master/torsions.h`",
    "created_at": "2022-04-25T10:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444017",
    "user": "dimpase"
}
```

the tarball is missing `https://gitlab.inria.fr/zimmerma/ecm/-/raw/master/torsions.h`



---

archive/issue_comments_444018.json:
```json
{
    "body": "I've put a new tarball at https://members.loria.fr/PZimmermann/ecm-7.0.5a-dev.tar.gz. Is it better?",
    "created_at": "2022-04-25T14:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444018",
    "user": "zimmerma"
}
```

I've put a new tarball at https://members.loria.fr/PZimmermann/ecm-7.0.5a-dev.tar.gz. Is it better?



---

archive/issue_comments_444019.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-25T17:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444019",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444020.json:
```json
{
    "body": "Builds and passes the test suite on macOS 12.3.1 (Intel)",
    "created_at": "2022-04-25T18:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444020",
    "user": "mkoeppe"
}
```

Builds and passes the test suite on macOS 12.3.1 (Intel)



---

archive/issue_comments_444021.json:
```json
{
    "body": "I am not keen to package something that is not a proper release. Any plans or roadmap to the next `ecm` release?",
    "created_at": "2022-04-25T19:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444021",
    "user": "fbissey"
}
```

I am not keen to package something that is not a proper release. Any plans or roadmap to the next `ecm` release?



---

archive/issue_comments_444022.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-29T11:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444022",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_444023.json:
```json
{
    "body": "on Debian stable x86_64 I get\n\n```\nsage -t --warn-long 111.0 --random-seed=252573809850839320636415076260300606363 src/sage/interfaces/ecm.py\n**********************************************************************\nFile \"src/sage/interfaces/ecm.py\", line 717, in sage.interfaces.ecm.ECM.time\nFailed example:\n    ecm.time(n, 35)                  # random output\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.ecm.ECM.time[1]>\", line 1, in <module>\n        ecm.time(n, Integer(35))                  # random output\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/ecm.py\", line 770, in time\n        while next(out_lines) != title_curves:\n    StopIteration\n**********************************************************************\nFile \"src/sage/interfaces/ecm.py\", line 720, in sage.interfaces.ecm.ECM.time\nFailed example:\n    ecm.time(n, 30, verbose=True)     # random output\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.ecm.ECM.time[2]>\", line 1, in <module>\n        ecm.time(n, Integer(30), verbose=True)     # random output\n      File \"/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/ecm.py\", line 770, in time\n        while next(out_lines) != title_curves:\n    StopIteration\n**********************************************************************\n1 item had failures:\n   2 of   4 in sage.interfaces.ecm.ECM.time\n    [47 tests, 2 failures, 4.13 s]\n----------------------------------------------------------------------\nsage -t --warn-long 111.0 --random-seed=252573809850839320636415076260300606363 src/sage/interfaces/ecm.py  # 2 doctests failed\n```\n",
    "created_at": "2022-04-29T11:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444023",
    "user": "dimpase"
}
```

on Debian stable x86_64 I get

```
sage -t --warn-long 111.0 --random-seed=252573809850839320636415076260300606363 src/sage/interfaces/ecm.py
**********************************************************************
File "src/sage/interfaces/ecm.py", line 717, in sage.interfaces.ecm.ECM.time
Failed example:
    ecm.time(n, 35)                  # random output
Exception raised:
    Traceback (most recent call last):
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.ecm.ECM.time[1]>", line 1, in <module>
        ecm.time(n, Integer(35))                  # random output
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/ecm.py", line 770, in time
        while next(out_lines) != title_curves:
    StopIteration
**********************************************************************
File "src/sage/interfaces/ecm.py", line 720, in sage.interfaces.ecm.ECM.time
Failed example:
    ecm.time(n, 30, verbose=True)     # random output
Exception raised:
    Traceback (most recent call last):
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.ecm.ECM.time[2]>", line 1, in <module>
        ecm.time(n, Integer(30), verbose=True)     # random output
      File "/home/dimpase/work/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/ecm.py", line 770, in time
        while next(out_lines) != title_curves:
    StopIteration
**********************************************************************
1 item had failures:
   2 of   4 in sage.interfaces.ecm.ECM.time
    [47 tests, 2 failures, 4.13 s]
----------------------------------------------------------------------
sage -t --warn-long 111.0 --random-seed=252573809850839320636415076260300606363 src/sage/interfaces/ecm.py  # 2 doctests failed
```




---

archive/issue_comments_444024.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-04-29T11:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444024",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_444025.json:
```json
{
    "body": "if these failures are due to upstream, please report them: https://gitlab.inria.fr/zimmerma/ecm",
    "created_at": "2022-05-02T13:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444025",
    "user": "zimmerma"
}
```

if these failures are due to upstream, please report them: https://gitlab.inria.fr/zimmerma/ecm



---

archive/issue_comments_444026.json:
```json
{
    "body": "Has anything changed in ECM's time API since 7.0.4?",
    "created_at": "2022-05-02T14:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444026",
    "user": "dimpase"
}
```

Has anything changed in ECM's time API since 7.0.4?



---

archive/issue_comments_444027.json:
```json
{
    "body": "Replying to [comment:24 dimpase]:\n> Has anything changed in ECM's time API since 7.0.4?\n\nwhich \"time API\" do you mean? In ecm.h there is no time function.",
    "created_at": "2022-05-02T14:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444027",
    "user": "zimmerma"
}
```

Replying to [comment:24 dimpase]:
> Has anything changed in ECM's time API since 7.0.4?

which "time API" do you mean? In ecm.h there is no time function.



---

archive/issue_comments_444028.json:
```json
{
    "body": "Replying to [comment:20 fbissey]:\n> I am not keen to package something that is not a proper release. Any plans or roadmap to the next `ecm` release?\n\nI plan to release 7.0.5 soon.",
    "created_at": "2022-05-02T15:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444028",
    "user": "zimmerma"
}
```

Replying to [comment:20 fbissey]:
> I am not keen to package something that is not a proper release. Any plans or roadmap to the next `ecm` release?

I plan to release 7.0.5 soon.



---

archive/issue_comments_444029.json:
```json
{
    "body": "OK, what changed a bit is the output of ECM, thus we need to do\n\n```diff\n--- a/src/sage/interfaces/ecm.py\n+++ b/src/sage/interfaces/ecm.py\n@@ -754,7 +754,7 @@ class ECM(SageObject):\n             <BLANKLINE>\n             Expected curves: 4911, Expected time: 32.25m\n         \"\"\"\n-        title_curves = 'Expected number of curves to find a factor of n digits:'\n+        title_curves = 'Expected number of curves to find a factor of n digits'\n         title_time = 'Expected time to find a factor of n digits:'\n         n = self._validate(n)\n         B1 = self.recommended_B1(factor_digits)\n@@ -767,7 +767,7 @@ class ECM(SageObject):\n             return\n \n         out_lines = iter(out.splitlines())\n-        while next(out_lines) != title_curves:\n+        while next(out_lines)[:len(title_curves)] != title_curves:\n             pass\n         header_curves = next(out_lines)\n         curve_count_table = next(out_lines)\n```\n\nto let these tests pass (it prints a bit more there now). \n\nNo issue on ECM side.",
    "created_at": "2022-05-02T15:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444029",
    "user": "dimpase"
}
```

OK, what changed a bit is the output of ECM, thus we need to do

```diff
--- a/src/sage/interfaces/ecm.py
+++ b/src/sage/interfaces/ecm.py
@@ -754,7 +754,7 @@ class ECM(SageObject):
             <BLANKLINE>
             Expected curves: 4911, Expected time: 32.25m
         """
-        title_curves = 'Expected number of curves to find a factor of n digits:'
+        title_curves = 'Expected number of curves to find a factor of n digits'
         title_time = 'Expected time to find a factor of n digits:'
         n = self._validate(n)
         B1 = self.recommended_B1(factor_digits)
@@ -767,7 +767,7 @@ class ECM(SageObject):
             return
 
         out_lines = iter(out.splitlines())
-        while next(out_lines) != title_curves:
+        while next(out_lines)[:len(title_curves)] != title_curves:
             pass
         header_curves = next(out_lines)
         curve_count_table = next(out_lines)
```

to let these tests pass (it prints a bit more there now). 

No issue on ECM side.



---

archive/issue_comments_444030.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-05-02T17:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444030",
    "user": "dimpase"
}
```

New commits:



---

archive/issue_comments_444031.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-02T17:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444031",
    "user": "dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_444032.json:
```json
{
    "body": "added the patch from comment:27, rebased over rc3",
    "created_at": "2022-05-02T17:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444032",
    "user": "dimpase"
}
```

added the patch from comment:27, rebased over rc3



---

archive/issue_comments_444033.json:
```json
{
    "body": "I've made a proper release (https://gitlab.inria.fr/zimmerma/ecm/uploads/89f6f0d65d3e980cef33dc922004e4b2/ecm-7.0.5.tar.gz) with tag 7.0.5 in the git repo",
    "created_at": "2022-05-05T11:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444033",
    "user": "zimmerma"
}
```

I've made a proper release (https://gitlab.inria.fr/zimmerma/ecm/uploads/89f6f0d65d3e980cef33dc922004e4b2/ecm-7.0.5.tar.gz) with tag 7.0.5 in the git repo



---

archive/issue_comments_444034.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T13:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444034",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444035.json:
```json
{
    "body": "Is there a way to skip these long hashes in the URL? Anyhow, this is the update, tested on macOS so far.",
    "created_at": "2022-05-05T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444035",
    "user": "dimpase"
}
```

Is there a way to skip these long hashes in the URL? Anyhow, this is the update, tested on macOS so far.



---

archive/issue_comments_444036.json:
```json
{
    "body": "Replying to [comment:32 dimpase]:\n> Is there a way to skip these long hashes in the URL? Anyhow, this is the update, tested on macOS so far.\n\nI believe no. If you look at https://gitlab.inria.fr/zimmerma/ecm/-/releases/7.0.5 you first see \"Source code\" tarballs made automatically by gitlab, but they are of no use since they do no contain a configure file (the autotools were not run).\n\nThe \"release tarball\" was added manually by me, and the long hash was given to me by gitlab.",
    "created_at": "2022-05-05T14:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444036",
    "user": "zimmerma"
}
```

Replying to [comment:32 dimpase]:
> Is there a way to skip these long hashes in the URL? Anyhow, this is the update, tested on macOS so far.

I believe no. If you look at https://gitlab.inria.fr/zimmerma/ecm/-/releases/7.0.5 you first see "Source code" tarballs made automatically by gitlab, but they are of no use since they do no contain a configure file (the autotools were not run).

The "release tarball" was added manually by me, and the long hash was given to me by gitlab.



---

archive/issue_comments_444037.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-05-11T11:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444037",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_444038.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-11T11:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444038",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_444039.json:
```json
{
    "body": "I think this should be run on GH Actions first, perhaps on top of #33316 for the platform updates",
    "created_at": "2022-05-11T17:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444039",
    "user": "mkoeppe"
}
```

I think this should be run on GH Actions first, perhaps on top of #33316 for the platform updates



---

archive/issue_comments_444040.json:
```json
{
    "body": "tests running on https://github.com/dimpase/sage/actions/runs/2314328253\n(on top on #32937 and #33316)",
    "created_at": "2022-05-12T15:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444040",
    "user": "dimpase"
}
```

tests running on https://github.com/dimpase/sage/actions/runs/2314328253
(on top on #32937 and #33316)



---

archive/issue_comments_444041.json:
```json
{
    "body": "Does it need #33861 as a dependency?",
    "created_at": "2022-05-17T02:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444041",
    "user": "mkoeppe"
}
```

Does it need #33861 as a dependency?



---

archive/issue_comments_444042.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-05-17T02:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444042",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_444043.json:
```json
{
    "body": "Replying to [comment:38 mkoeppe]:\n> Does it need #33861 as a dependency?\n\nIndeed https://git.sagemath.org/sage.git/commit?id=f2619864f27c34b751e84d6a4d41d77cfbe39d9a seems to do similar as my patch, so you can just keep this ticket and ignore mine.\n\nThis shows that trac search is not very good: https://trac.sagemath.org/search?q=ecm doesn't show this ticket (no, I didn't look at the second page, given that the first page shows nothing relevant; yes, searching \"upgrade ecm\" gives this as the first hit).",
    "created_at": "2022-05-17T03:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444043",
    "user": "tornaria"
}
```

Replying to [comment:38 mkoeppe]:
> Does it need #33861 as a dependency?

Indeed https://git.sagemath.org/sage.git/commit?id=f2619864f27c34b751e84d6a4d41d77cfbe39d9a seems to do similar as my patch, so you can just keep this ticket and ignore mine.

This shows that trac search is not very good: https://trac.sagemath.org/search?q=ecm doesn't show this ticket (no, I didn't look at the second page, given that the first page shows nothing relevant; yes, searching "upgrade ecm" gives this as the first hit).



---

archive/issue_comments_444044.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-05-17T03:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444044",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_444045.json:
```json
{
    "body": "Then let's mark this one here as critical.",
    "created_at": "2022-05-17T03:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444045",
    "user": "mkoeppe"
}
```

Then let's mark this one here as critical.



---

archive/issue_comments_444046.json:
```json
{
    "body": "since #33861 was marked as duplicate, maybe we can turn this ticket back as \"positive review\"?",
    "created_at": "2022-05-17T07:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444046",
    "user": "zimmerma"
}
```

since #33861 was marked as duplicate, maybe we can turn this ticket back as "positive review"?



---

archive/issue_comments_444047.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-17T07:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444047",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_444048.json:
```json
{
    "body": "Replying to [comment:39 tornaria]:\n>\n> This shows that trac search is not very good:\n> https://trac.sagemath.org/search?q=ecm\n> doesn't show this ticket\n\nThe Trac \"query\" engine often beats its \"search\" engine.\n\nhttps://trac.sagemath.org/query?order=id&desc=1&summary=~ecm\n\nI added a few custom search engines to my browser\nto send trac queries like the above, querying fields\n\"summary\", \"description\", \"author\", \"reviewer\", etc.\n\nThen typing `sagetracsummary ecm` (choose your keyword)\nin the url bar goes to the above.\n\nOr to query only non-closed tickets:\n\nhttps://trac.sagemath.org/query?order=id&desc=1&status=!closed&summary=~ecm",
    "created_at": "2022-05-17T17:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444048",
    "user": "slelievre"
}
```

Replying to [comment:39 tornaria]:
>
> This shows that trac search is not very good:
> https://trac.sagemath.org/search?q=ecm
> doesn't show this ticket

The Trac "query" engine often beats its "search" engine.

https://trac.sagemath.org/query?order=id&desc=1&summary=~ecm

I added a few custom search engines to my browser
to send trac queries like the above, querying fields
"summary", "description", "author", "reviewer", etc.

Then typing `sagetracsummary ecm` (choose your keyword)
in the url bar goes to the above.

Or to query only non-closed tickets:

https://trac.sagemath.org/query?order=id&desc=1&status=!closed&summary=~ecm



---

archive/issue_comments_444049.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-18T22:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31088#issuecomment-444049",
    "user": "vbraun"
}
```

Resolution: fixed
