# Issue 14637: Fixed and improved frobby interface

archive/issues_014637.json:
```json
{
    "body": "Assignee: @miguelmarco\n\nCC:  broune kcricsman @mwhansen\n\nKeywords: frobby\n\nFrobby interface didn't work too well. For instance, it didn't parse correctly a sequence of several ideals, leading  to error messages like this:\n\n\n```\n\nsage: R.<x,y,z>=QQ[]\nsage: I=R.ideal([x^2*y,z^2*y,x*z])\nsage: frobby.irreducible_decomposition(I)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-11-0bf142b894a8> in <module>()\n----> 1 frobby.irreducible_decomposition(I)\n\n/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in irreducible_decomposition(self, monomial_ideal)\n    124         frobby_input = self._ideal_to_string(monomial_ideal)\n    125         frobby_output = self('irrdecom', input=frobby_input)\n--> 126         return self._parse_ideals(frobby_output, monomial_ideal.ring())\n    127 \n    128     def _parse_ideals(self, string, ring):\n\n/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_ideals(self, string, ring)\n    153             gens = [v ** e for v, e in zip(ring.gens(), exps) if e != 0]\n    154             return ring.ideal(gens or ring(1))\n--> 155         return map(to_ideal, self._parse_4ti2_matrix(string)) or [ring.ideal()]\n    156 \n    157     def _parse_4ti2_matrix(self, string):\n\n/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_4ti2_matrix(self, string)\n    195 \n    196         if term_count * var_count != len(ints):\n--> 197             raise RuntimeError(\"Format error: incorrect matrix dimensions.\")\n    198 \n    199         exponents = []\n\nRuntimeError: Format error: incorrect matrix dimensions.\n```\n\n\nThis patch solves this problem, implements calls to more frobby functions (note for instance the speed to compute the alexander dual, it beats the SimplicialComplex alexander_dual method by several orders of magnitude), and makes the doctets optional dependendent on frobby.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14841\n\n",
    "created_at": "2013-06-29T20:36:02Z",
    "labels": [
        "component: packages: experimental"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Fixed and improved frobby interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14637",
    "user": "https://github.com/miguelmarco"
}
```
Assignee: @miguelmarco

CC:  broune kcricsman @mwhansen

Keywords: frobby

Frobby interface didn't work too well. For instance, it didn't parse correctly a sequence of several ideals, leading  to error messages like this:


```

sage: R.<x,y,z>=QQ[]
sage: I=R.ideal([x^2*y,z^2*y,x*z])
sage: frobby.irreducible_decomposition(I)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-11-0bf142b894a8> in <module>()
----> 1 frobby.irreducible_decomposition(I)

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in irreducible_decomposition(self, monomial_ideal)
    124         frobby_input = self._ideal_to_string(monomial_ideal)
    125         frobby_output = self('irrdecom', input=frobby_input)
--> 126         return self._parse_ideals(frobby_output, monomial_ideal.ring())
    127 
    128     def _parse_ideals(self, string, ring):

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_ideals(self, string, ring)
    153             gens = [v ** e for v, e in zip(ring.gens(), exps) if e != 0]
    154             return ring.ideal(gens or ring(1))
--> 155         return map(to_ideal, self._parse_4ti2_matrix(string)) or [ring.ideal()]
    156 
    157     def _parse_4ti2_matrix(self, string):

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_4ti2_matrix(self, string)
    195 
    196         if term_count * var_count != len(ints):
--> 197             raise RuntimeError("Format error: incorrect matrix dimensions.")
    198 
    199         exponents = []

RuntimeError: Format error: incorrect matrix dimensions.
```


This patch solves this problem, implements calls to more frobby functions (note for instance the speed to compute the alexander dual, it beats the SimplicialComplex alexander_dual method by several orders of magnitude), and makes the doctets optional dependendent on frobby.

Issue created by migration from https://trac.sagemath.org/ticket/14841





---

archive/issue_comments_186037.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-29T20:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186037",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_186038.json:
```json
{
    "body": "Very minor point - [the conventions in the developer guide](http://www.sagemath.org/doc/developer/conventions.html) suggest `# optional - frobby` and not `#optional - frobby`.",
    "created_at": "2013-07-01T15:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186038",
    "user": "https://github.com/kcrisman"
}
```

Very minor point - [the conventions in the developer guide](http://www.sagemath.org/doc/developer/conventions.html) suggest `# optional - frobby` and not `#optional - frobby`.



---

archive/issue_comments_186039.json:
```json
{
    "body": "Attachment [14841.patch](tarball://root/attachments/some-uuid/ticket14841/14841.patch) by @miguelmarco created at 2013-07-01 15:35:35",
    "created_at": "2013-07-01T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186039",
    "user": "https://github.com/miguelmarco"
}
```

Attachment [14841.patch](tarball://root/attachments/some-uuid/ticket14841/14841.patch) by @miguelmarco created at 2013-07-01 15:35:35



---

archive/issue_comments_186040.json:
```json
{
    "body": "Ok, changed.",
    "created_at": "2013-07-01T15:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186040",
    "user": "https://github.com/miguelmarco"
}
```

Ok, changed.



---

archive/issue_comments_186041.json:
```json
{
    "body": "Changing component from packages: experimental to interfaces.",
    "created_at": "2013-07-01T15:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186041",
    "user": "https://github.com/miguelmarco"
}
```

Changing component from packages: experimental to interfaces.



---

archive/issue_comments_186042.json:
```json
{
    "body": "0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).\n\nhttp://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg",
    "created_at": "2013-09-07T05:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186042",
    "user": "https://github.com/dimpase"
}
```

0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).

http://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg



---

archive/issue_comments_186043.json:
```json
{
    "body": "for review of spkg update only",
    "created_at": "2013-09-07T06:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186043",
    "user": "https://github.com/dimpase"
}
```

for review of spkg update only



---

archive/issue_comments_186044.json:
```json
{
    "body": "Attachment [p1.spkg.diff](tarball://root/attachments/some-uuid/ticket14841/p1.spkg.diff) by @dimpase created at 2013-09-07 06:45:55\n\nReplying to [comment:6 dimpase]:\n> 0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).\n> \n> http://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg\n\nactually, not only on OSX. The proper fix is to include <unistd.h>\n\nThe patch itself looks good. Please test the new spkg, and then we can make it positive review.",
    "created_at": "2013-09-07T06:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186044",
    "user": "https://github.com/dimpase"
}
```

Attachment [p1.spkg.diff](tarball://root/attachments/some-uuid/ticket14841/p1.spkg.diff) by @dimpase created at 2013-09-07 06:45:55

Replying to [comment:6 dimpase]:
> 0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).
> 
> http://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg

actually, not only on OSX. The proper fix is to include <unistd.h>

The patch itself looks good. Please test the new spkg, and then we can make it positive review.



---

archive/issue_comments_186045.json:
```json
{
    "body": "It seems ok to me.",
    "created_at": "2013-09-07T10:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186045",
    "user": "https://github.com/miguelmarco"
}
```

It seems ok to me.



---

archive/issue_comments_186046.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-07T10:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186046",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_186047.json:
```json
{
    "body": "Changing component from interfaces to packages: experimental.",
    "created_at": "2013-09-30T20:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186047",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from interfaces to packages: experimental.



---

archive/issue_comments_186048.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-01T07:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186048",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_186049.json:
```json
{
    "body": "Patch merged, spkg should be updated soon.",
    "created_at": "2013-10-01T07:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186049",
    "user": "https://github.com/jdemeyer"
}
```

Patch merged, spkg should be updated soon.



---

archive/issue_comments_186050.json:
```json
{
    "body": "I just put the spkg on the server.",
    "created_at": "2013-10-02T10:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186050",
    "user": "https://github.com/haraldschilly"
}
```

I just put the spkg on the server.



---

archive/issue_comments_186051.json:
```json
{
    "body": "This was never uploaded, it seems, or got lost during the transition to git. Meanwhile it seems to need one more small patch. I've included it in the updated spkg. See the hg repo of the spkg for details.",
    "created_at": "2015-02-01T16:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186051",
    "user": "https://github.com/dimpase"
}
```

This was never uploaded, it seems, or got lost during the transition to git. Meanwhile it seems to need one more small patch. I've included it in the updated spkg. See the hg repo of the spkg for details.



---

archive/issue_comments_186052.json:
```json
{
    "body": "The spkg file is updated to include the patch I just mentioned. Beep...",
    "created_at": "2015-02-01T18:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14637",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14637#issuecomment-186052",
    "user": "https://github.com/dimpase"
}
```

The spkg file is updated to include the patch I just mentioned. Beep...
