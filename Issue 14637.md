# Issue 14637: Fixed and improved frobby interface

Issue created by migration from Trac.

Original creator: mmarco

Original creation time: 2013-06-29 20:36:02

Assignee: mmarco

CC:  broune kcricsman mhansen

Keywords: frobby

Frobby interface didn't work too well. For instance, it didn't parse correctly a sequence of several ideals, leading  to error messages like this:


```

sage: R.<x,y,z>=QQ[]
sage: I=R.ideal([x^2*y,z^2*y,x*z])
sage: frobby.irreducible_decomposition(I)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-11-0bf142b894a8> in <module>()
----> 1 frobby.irreducible_decomposition(I)

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in irreducible_decomposition(self, monomial_ideal)
    124         frobby_input = self._ideal_to_string(monomial_ideal)
    125         frobby_output = self('irrdecom', input=frobby_input)
--> 126         return self._parse_ideals(frobby_output, monomial_ideal.ring())
    127 
    128     def _parse_ideals(self, string, ring):

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_ideals(self, string, ring)
    153             gens = [v ** e for v, e in zip(ring.gens(), exps) if e != 0]
    154             return ring.ideal(gens or ring(1))
--> 155         return map(to_ideal, self._parse_4ti2_matrix(string)) or [ring.ideal()]
    156 
    157     def _parse_4ti2_matrix(self, string):

/usr/lib64/python2.7/site-packages/sage/interfaces/frobby.pyc in _parse_4ti2_matrix(self, string)
    195 
    196         if term_count * var_count != len(ints):
--> 197             raise RuntimeError("Format error: incorrect matrix dimensions.")
    198 
    199         exponents = []

RuntimeError: Format error: incorrect matrix dimensions.
```


This patch solves this problem, implements calls to more frobby functions (note for instance the speed to compute the alexander dual, it beats the SimplicialComplex alexander_dual method by several orders of magnitude), and makes the doctets optional dependendent on frobby.


---

Comment by mmarco created at 2013-06-29 20:40:12

Changing status from new to needs_review.


---

Comment by kcrisman created at 2013-07-01 15:14:14

Very minor point - [the conventions in the developer guide](http://www.sagemath.org/doc/developer/conventions.html) suggest `# optional - frobby` and not `#optional - frobby`.


---

Attachment


---

Comment by mmarco created at 2013-07-01 15:36:41

Ok, changed.


---

Comment by mmarco created at 2013-07-01 15:38:43

Changing component from packages: experimental to interfaces.


---

Comment by dimpase created at 2013-09-07 05:52:44

0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).

http://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg


---

Comment by dimpase created at 2013-09-07 06:43:16

for review of spkg update only


---

Attachment

Replying to [comment:6 dimpase]:
> 0.9.0 does not install on OSX. I've made an update to fix it. See the attached diff for changes (they are strictly OSX-specific).
> 
> http://boxen.math.washington.edu/home/dima/packages/frobby-0.9.0.p1.spkg

actually, not only on OSX. The proper fix is to include <unistd.h>

The patch itself looks good. Please test the new spkg, and then we can make it positive review.


---

Comment by mmarco created at 2013-09-07 10:05:18

It seems ok to me.


---

Comment by mmarco created at 2013-09-07 10:05:18

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-09-30 20:38:58

Changing component from interfaces to packages: experimental.


---

Comment by jdemeyer created at 2013-10-01 07:15:51

Resolution: fixed


---

Comment by jdemeyer created at 2013-10-01 07:15:51

Patch merged, spkg should be updated soon.


---

Comment by schilly created at 2013-10-02 10:54:06

I just put the spkg on the server.


---

Comment by dimpase created at 2015-02-01 16:47:16

This was never uploaded, it seems, or got lost during the transition to git. Meanwhile it seems to need one more small patch. I've included it in the updated spkg. See the hg repo of the spkg for details.


---

Comment by dimpase created at 2015-02-01 18:52:31

The spkg file is updated to include the patch I just mentioned. Beep...
