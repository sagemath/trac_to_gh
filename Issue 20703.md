# Issue 20703: LatticePoset: add is_sectionally_complemented()

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2016-07-05 09:00:18

CC:  tscrim

This patch will add a function that checks if the lattice is sectionally complemented or not.


---

Comment by jmantysalo created at 2016-07-05 09:00:54

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-07-05 09:00:54

New commits:


---

Comment by kdilks created at 2016-07-06 17:22:07

Would it be of any value to have an optional `certificate` parameter which would return the poset element whose principal order ideal isn't complemented instead of just `False`?


---

Comment by git created at 2016-07-06 18:50:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-07-06 18:53:41

Replying to [comment:3 kdilks]:
> Would it be of any value to have an optional `certificate` parameter which would return the poset element whose principal order ideal isn't complemented instead of just `False`?

As you wish.

But now for orthogonality we should add `certificate`s to other functions too. Which is not a bad idea at all, at least for demonstration purposes (really show the pentagon for non-modular lattice etc.). I could start with `complements()`, but then someone should first review #20727 that corrects a trivial bug.


---

Comment by jmantysalo created at 2016-07-07 10:19:05

See also #20972. Hope that `certificate`-options do something similar and expectable.


---

Comment by jmantysalo created at 2016-07-08 05:21:20

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-07-08 05:21:20

See comment about `certificate` and INPUT-OUTPUT -sections at #20972.


---

Comment by git created at 2016-07-12 08:11:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-07-12 08:16:15

Changing status from needs_work to needs_info.


---

Comment by jmantysalo created at 2016-07-12 08:16:15

Travis, I reformatted the input-output -blocks like in #20972 (btw, thanks for review).

But should the certificate be one object, i.e. a tuple of two elements? It seems kind of unnecessary, but then it would be consistent with certificate of `is_relatively_complemented()`.


---

Comment by tscrim created at 2016-07-12 14:16:51

Replying to [comment:9 jmantysalo]:
> Travis, I reformatted the input-output -blocks like in #20972 (btw, thanks for review).

Doc LGTM.

> But should the certificate be one object, i.e. a tuple of two elements? It seems kind of unnecessary, but then it would be consistent with certificate of `is_relatively_complemented()`.

I would have the certificate be one object. It couples the output together and allows the user to have a more standard API of `result, cert = P.certificate_returning_method()`.

Kevin, do you have the rest of the review?


---

Comment by kdilks created at 2016-07-12 15:11:43

Yeah, I should be able to get this reviewed today.


---

Comment by git created at 2016-07-12 17:37:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-07-12 17:42:08

Changing status from needs_info to needs_review.


---

Comment by jmantysalo created at 2016-07-12 17:42:08

Replying to [comment:10 tscrim]:

> I would have the certificate be one object. It couples the output together and allows the user to have a more standard API of `result, cert = P.certificate_returning_method()`.

OK, done that.

Warning to reviewer: last patch is blind-coded as I work in a very slow machine now.

(After all these `*complememt*`-function we should think about `SEEALSO`-blocks. But for now we have at least #20817 still in queue.)


---

Comment by kdilks created at 2016-07-12 18:37:03

I guess I misunderstood what was being said about the certificate being a tuple. My presumption was that the function would always return `True` if true, but would either return `False` or a tuple with all possibly relevant data if false depending on `certificate`. Isn't that how other certificates in Sage work?


---

Comment by jmantysalo created at 2016-07-12 18:45:47

Replying to [comment:14 kdilks]:
> I guess I misunderstood what was being said about the certificate being a tuple. My presumption was that the function would always return `True` if true, but would either return `False` or a tuple with all possibly relevant data if false depending on `certificate`. Isn't that how other certificates in Sage work?

It depends. Certificate for the dimension of a poset is a list of linear extensions and for breadth of a lattice a list of elements.

For `is_dismantlable` there is both positive and negative certificate: a dismantling order or a crown subposet.

But I think there are also functions so that they always return a tuple whose first element is a Boolean value.


---

Comment by kdilks created at 2016-07-12 19:47:09

If it's not particular consistent/canonical, then I'm ok with it the way it is.

Under `OUTPUT`, I think the two possibilities for `certificate` should be separate bullet points, and the default possibility (`certificate=False`) should be listed first.

I also don't especially like the usage of `e` and `e_` as variable names, but don't really have a justifiable reason to make you change it.

Otherwise, it looks good.


---

Comment by tscrim created at 2016-07-12 19:52:41

Replying to [comment:16 kdilks]:
> Under `OUTPUT`, I think the two possibilities for `certificate` should be separate bullet points, and the default possibility (`certificate=False`) should be listed first.

I disagree. It makes it seems as if there are multiple things in the output (see comment 8 of #20972).

> I also don't especially like the usage of `e` and `e_` as variable names, but don't really have a justifiable reason to make you change it.

I don't like the `e` and `e_` either. The first is fine, but the other makes it seem much more correlated with `e` and is somewhat strange to read. I'd use `ep` (for e' or e-prime) or `f`.


---

Comment by jmantysalo created at 2016-07-12 19:57:02

Replying to [comment:16 kdilks]:
> If it's not particular consistent/canonical, then I'm ok with it the way it is.

Or maybe we are now making the standard. Sometimes there might exists a "yes"-certificate, sometimes "no"-certificate, and sometimes both. Hence we can not have strictly unified interface. Always returning a tuple with Boolean value in first position is most close we can do.

> Under `OUTPUT`, I think the two possibilities for `certificate` should be separate bullet points, and the default possibility (`certificate=False`) should be listed first.

Arghs. Whatever, as long as it is consistent.

> I also don't especially like the usage of `e` and `e_` as variable names, but don't really have a justifiable reason to make you change it.

I can change those.


---

Comment by jmantysalo created at 2016-07-12 19:57:49

And about more complicated certificates... See #21002.


---

Comment by git created at 2016-07-12 20:10:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kdilks created at 2016-07-12 20:14:21

If they can't be separate bullet points, can we at least have the default/simpler/more commonly used option listed first? 

It might be a bit more direct to simply combine the information about input and output into the `INPUT` the way `dimension()` does


```
  INPUT:

   * "certificate" (boolean; default:"False") -- whether to return
     an integer (the dimension) or a certificate, i.e. a smallest set
     of linear extensions.
```

----
New commits:


---

Comment by jmantysalo created at 2016-07-12 20:21:38

Travis doesn't like it, but I still think that we should close this one and later open a ticket for just to unify docstrings. Maybe after discussion in sage-devel.


---

Comment by tscrim created at 2016-07-12 20:30:22

The description of the certificate is not part of the input, it is the output, so I don't think we should include it in the input. For simple things, this might be okay, but I prefer the separation of concerns. However, I'm not opposed to having the `True` case first.


---

Comment by kdilks created at 2016-07-12 20:34:20

Do you mean having the default `certificate=False` case first? I'll settle for just that being changed.


---

Comment by git created at 2016-07-13 09:00:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-07-13 09:02:07

Replying to [comment:24 kdilks]:
> Do you mean having the default `certificate=False` case first? I'll settle for just that being changed.

Now they are in different order in this and `is_relatively_complemented`. But OK for me...

Some day after poset documentation polishing I'll run the same for lattices.


---

Comment by kdilks created at 2016-07-29 21:04:20

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-08-07 20:01:25

Resolution: fixed
