# Issue 19903: dependencies: use "foo" instead of "$(INST)/$(FOO)"

Issue created by migration from https://trac.sagemath.org/ticket/20140

Original creator: jdemeyer

Original creation time: 2016-02-29 19:49:08

CC:  simonking vbraun fbissey




---

Comment by git created at 2016-03-01 08:52:06

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-01 08:53:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-01 08:54:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-01 08:58:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-01 09:03:10

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-03-01 09:04:05

Changing status from new to needs_review.


---

Comment by embray created at 2016-03-01 12:16:12

Ah, I was just thinking about this.  Actually I had a broader proposal that I'd expand on later of cobbling all package metadata into a single machine-consumable file that I would like to use to better generate info on packages.  But just improving the format of the "dependencies" file is a good start.


---

Comment by fbissey created at 2016-03-01 21:13:35

I don't usually dwell in that area. It made me read some documentation. It does look ok and is a bit simpler.


---

Comment by vbraun created at 2016-03-01 21:21:00

Lgtm but can you also merge in #20129


---

Comment by jdemeyer created at 2016-03-01 21:52:05

Replying to [comment:12 vbraun]:
> Lgtm but can you also merge in #20129

Why? There is no conflict (`openblas` has no dependencies).


---

Comment by vbraun created at 2016-03-01 23:20:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-03-01 23:20:37

Right, forgot about that.


---

Comment by vbraun created at 2016-03-01 23:24:16

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-03-01 23:24:16

Conflicts with #20130


---

Comment by git created at 2016-03-02 07:03:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-03-02 07:06:51

Changing status from needs_work to positive_review.


---

Comment by git created at 2016-03-02 11:07:50

Changing status from positive_review to needs_review.


---

Comment by git created at 2016-03-02 11:07:50

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by jdemeyer created at 2016-03-02 11:11:34

Previous version didn't work because of phony targets in the dependencies. This new version still allows dependencies to be listed as `foo`. A small `sed` script transforms this to `$(inst_foo)`.


---

Comment by git created at 2016-03-02 11:12:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2016-03-02 15:03:39

While you're at it, I've noticed that some packages don't have all their dependencies listed.  I don't have an exhaustive list yet, but I just encountered that `jsonschema` is only included as a dependency of `nbformat` even though it's not listed as such.

Another one: `mistune` is a dependency of `nbconvert`.


---

Comment by vbraun created at 2016-03-02 15:16:46

If we had a way of getting the dependency information into Python then it would be easy enough to compare with the pip dependency information for testing....


---

Comment by jdemeyer created at 2016-03-02 16:53:59

Replying to [comment:21 embray]:
> `jsonschema` is only included as a dependency of `nbformat` even though it's not listed as such.

I don't understand this sentence


---

Comment by embray created at 2016-03-02 16:54:56

The only reason `jsonschema` has an spkg is sage is because it's a dependency of `nbformat`, but `nbformat` does not list `jsonschema` in its dependencies.


---

Comment by jdemeyer created at 2016-03-02 17:02:29

Maybe you are confusing run-time dependencies with build-time dependencies? The `dependencies` files are really only meant for build-time dependencies.

Anyway, this isn't what this ticket is about...


---

Comment by embray created at 2016-03-02 17:14:01

Okay, that must be it then.  I'm confused because some of the Python packages do list dependencies that I wouldn't think of as build dependencies (unless maybe the package doesn't import without them).


---

Comment by jdemeyer created at 2016-03-02 17:20:52

Replying to [comment:26 embray]:
> I'm confused because some of the Python packages do list dependencies that I wouldn't think of as build dependencies (unless maybe the package doesn't import without them).

First of all, keep in mind that a test-suite is also considered "build-time". But it could very well be that packages list dependencies which are not strictly required. Usually, the time to build Python packages is negligible, so it's not so important.


---

Comment by jdemeyer created at 2016-03-02 17:21:20

Regardless of all this, can somebody review this ticket please?


---

Comment by vbraun created at 2016-03-02 17:28:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-03-02 23:30:19

Resolution: fixed
