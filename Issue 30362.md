# Issue 30362: Define a new data structure for a list of combinatorial faces

archive/issues_030362.json:
```json
{
    "body": "CC:  tscrim\n\nKeywords: face list data structure\n\nWe define a new data structure for a lists of combinatorial faces.\n\nThe corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.\n\nSee #30549 for doctesting.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30599\n\n",
    "created_at": "2020-09-18T13:51:10Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "title": "Define a new data structure for a list of combinatorial faces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30362",
    "user": "@kliem"
}
```
CC:  tscrim

Keywords: face list data structure

We define a new data structure for a lists of combinatorial faces.

The corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.

See #30549 for doctesting.

Issue created by migration from https://trac.sagemath.org/ticket/30599





---

archive/issue_comments_433052.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-18T13:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433052",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-09-18T15:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433053",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_433054.json:
```json
{
    "body": "The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n\nTrivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`",
    "created_at": "2020-10-24T05:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433054",
    "user": "tscrim"
}
```

The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?

Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`



---

archive/issue_comments_433055.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-26T07:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433055",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433056.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n> \n> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`\n> \n\nDone.\n\nThe `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.",
    "created_at": "2020-10-26T07:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433056",
    "user": "@kliem"
}
```

Replying to [comment:3 tscrim]:
> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?
> 
> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`
> 

Done.

The `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.



---

archive/issue_comments_433057.json:
```json
{
    "body": "I agree that it is needed for `_sort_faces_loop`.\n\nThank you. LGTM.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433057",
    "user": "tscrim"
}
```

I agree that it is needed for `_sort_faces_loop`.

Thank you. LGTM.



---

archive/issue_comments_433058.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433058",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433059.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-01T00:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30362#issuecomment-433059",
    "user": "vbraun"
}
```

Resolution: fixed
