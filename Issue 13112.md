# Issue 13112: Some conversion between BooleanPolynomialRing and GF(2)[.....] are missing

Issue created by migration from https://trac.sagemath.org/ticket/13284

Original creator: Bouillaguet

Original creation time: 2012-07-23 14:58:55

Assignee: malb

CC:  malb alexanderdreyer polybori

Keywords: conversion

For some reason, it is impossible to directly build the (standard benchmark) cyclic ideals over BooleanPolynomialRing

```
sage: from sage.rings.ideal import Cyclic
sage: R = BooleanPolynomialRing(10, 'x')
sage: I = Cyclic(R)
***BOOOM***
....
TypeError: cannot convert <type 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular'> to BooleanPolynomial
```


Note that there is a possible workaround:

```
sage: R = BooleanPolynomialRing(10, 'x')
sage: R2 = PolynomialRing(GF(2), 10, 'x')
sage: I = ideal([ R(f) for f in Cyclic(R2).gens()])
```


Note that from a mathematical point of view, this is not a very interesting example since this ideal is rather trivial in the boolean polynomial ring... yet something is wrong...


---

Comment by AlexanderDreyer created at 2012-07-24 09:01:23

hm, good question. the `TypeError` arises from `BooleanPolynomialRing`'s `_element_constructor_`, but for conversions it should not go there. (As the workaround shows.)
Alos, something like

```
R2.ideal(R2.gens()).change_ring(R)
```

works nicely.


---

Comment by AlexanderDreyer created at 2012-07-24 09:37:08

Ok, just found out Cyclic computes internally over `QQ[x_1,...]`. There's no conversion for this case:

```
sage: R.has_coerce_map_from(GF(2))
True
sage: R.has_coerce_map_from(QQ)
False
```



---

Comment by AlexanderDreyer created at 2012-07-24 20:38:25

Indeed the conversion routines were missing. I've added a patch which should fix the problem. (May need rebasing).


---

Comment by AlexanderDreyer created at 2012-07-24 20:46:38

I rebased the patch to Sage 5.2rc0, please
apply boolean_conversion.patch


---

Comment by AlexanderDreyer created at 2012-07-24 20:47:14

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-07-27 20:39:00

Please fill in your real name as Author.


---

Comment by Bouillaguet created at 2012-07-28 12:59:25

Patch does what it's supposed to do, and passes the tests. Good to go !


---

Comment by Bouillaguet created at 2012-07-28 12:59:25

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-08-01 13:07:20

This needs to be rebased to sage-5.2 (I accidentally removed the wrong patch).


---

Comment by jdemeyer created at 2012-08-01 16:58:19

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-08-01 17:03:25

Rebased myself, needs review...

Note: in general, it is not a good to add two versions of a patch for two different versions of Sage, _especially_ if the latest patch is for the oldest version and _espcially_ when there are no clear instructions on which patch to apply.


---

Comment by jdemeyer created at 2012-08-01 17:03:25

Changing status from needs_work to needs_review.


---

Comment by AlexanderDreyer created at 2012-08-01 19:54:54

Replying to [comment:12 jdemeyer]:
> Rebased myself, needs review...
It matches my original 5.2 patch  up to one empty line and the `:trac:` construct. So I think, I can give positive review for this part.

> Note: in general, it is not a good to add two versions of a patch for two different versions of Sage, _especially_ if the latest patch is for the oldest version and _espcially_ when there are no clear instructions on which patch to apply.
Sorry, I thought the patchbot data would be utilized.

BTW we have to tell patchbot to 
Apply 13284_boolean_conversion.patch


---

Comment by AlexanderDreyer created at 2012-08-01 19:55:08

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-08-12 22:10:57

This needs to be rebased to [sage-5.3.beta1](http://boxen.math.washington.edu/home/release/sage-5.3.beta1/).


---

Comment by jdemeyer created at 2012-08-12 22:10:57

Changing status from positive_review to needs_work.


---

Attachment

I rebased the patch to 5.3rc1. Waiting for the patchbot to acknowledge....


---

Comment by Bouillaguet created at 2012-09-06 16:59:59

Apply 13284_boolean_conversion_rebased-5.3rc1.patch


---

Comment by Bouillaguet created at 2012-09-06 17:57:27

Changing status from needs_work to needs_review.


---

Comment by AlexanderDreyer created at 2012-09-06 20:42:57

Changing status from needs_review to positive_review.


---

Comment by AlexanderDreyer created at 2012-09-06 20:42:57

I can confirm, that the patch was rebased correctly.


---

Comment by jdemeyer created at 2012-09-11 07:58:03

Resolution: fixed
