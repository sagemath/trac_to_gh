# Issue 27022: spkg-configure.m4 for mpc

Issue created by migration from https://trac.sagemath.org/ticket/27259

Original creator: dimpase

Original creation time: 2019-02-12 09:59:37

CC:  embray

Keywords: spkg-configure

mpc depends on GMP/MPIR and MPFR.
I am trying something like this:

```
SAGE_SPKG_CONFIGURE([mpc], [
    AC_CHECK_HEADER(mpc.h, [], [sage_spkg_install_mpc=yes])
dnl mpc_cmp_abs appeared in MPC 1.1.0
    AC_SEARCH_LIBS([mpc_cmp_abs], [mpc], [break], [sage_spkg_install_mpc=yes])
])
```



---

Comment by dimpase created at 2019-02-25 23:39:11

mpfrcx's spkg-install hardcodes the location of mpc to SAGE_LOCAL. So this will need to be fixed.


---

Comment by embray created at 2019-02-26 11:17:55

That should be no problem (in theory).  We'll treat the prefix for mpc similarly to how we've done with GMP.


---

Comment by dimpase created at 2019-02-26 13:23:19

Last 10 new commits:


---

Comment by git created at 2019-02-28 08:28:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-03-20 16:52:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-03-20 16:53:20

Changing status from new to needs_review.


---

Comment by dimpase created at 2019-03-20 16:53:20

New commits:


---

Comment by embray created at 2019-03-25 10:56:15

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)


---

Comment by git created at 2019-04-30 21:09:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2019-05-10 13:16:08

Rebased on latest #27258.

Confirmed that Sage built successfully on Ubuntu 18.04 with system gmp+mpfr+mpc among other packages.  Running the tests now but they all passed in #27258, so I would be surprised if that changed here.
----
New commits:


---

Comment by embray created at 2019-05-10 14:01:46

Tests pass, so, LGTM.  Would you like to test more on other systems or are you already generally satisfied with how this is?


---

Comment by dimpase created at 2019-05-10 14:03:14

I'll run tests on OSX and if all is good, set it and the mpfr tickets to positive reviews. Thanks!


---

Comment by embray created at 2019-05-10 14:40:53

And then we'll add a separate ticket just for a new confball?


---

Comment by embray created at 2019-05-10 14:42:23

Changing keywords from "spkg-configure" to "spkg-configure mpc".


---

Comment by embray created at 2019-05-10 14:42:23

Changing component from build to build: configure.


---

Comment by dimpase created at 2019-05-10 15:16:50

how about adding config tarball here? 

or perhaps we can proceed rebasing nil/flint/arb over this one (we should do this one way or another) and add a config tarball on arb's ticket?


---

Comment by dimpase created at 2019-05-11 10:03:15

all clear


---

Comment by dimpase created at 2019-05-11 10:03:15

Changing status from needs_review to positive_review.


---

Comment by git created at 2019-05-13 14:46:16

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-05-13 14:46:16

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by embray created at 2019-05-13 14:46:31

Rebased and squashed.


---

Comment by embray created at 2019-05-13 14:46:31

Changing status from needs_review to positive_review.


---

Comment by git created at 2019-05-13 14:47:15

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-05-13 14:47:15

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by embray created at 2019-05-13 14:47:39

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-05-13 14:47:39

Rebased again, but specifically over the branch for #27258.


---

Comment by embray created at 2019-05-13 15:31:09

This ticket should probably not be merged by itself.  Instead please merge #27822 which incorporates this one.


---

Comment by vbraun created at 2019-05-17 11:45:49

Resolution: fixed


---

Comment by vbraun created at 2019-05-20 18:26:23

Changing status from closed to new.


---

Comment by vbraun created at 2019-05-20 18:26:23

Resolution changed from fixed to 


---

Comment by dimpase created at 2019-05-20 23:33:40

Changing status from new to needs_review.


---

Comment by dimpase created at 2019-05-20 23:33:50

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-06-30 11:54:55

Resolution: duplicate
