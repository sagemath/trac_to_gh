# Issue 25352: Small bug in vertex connectivity

Issue created by migration from Trac.

Original creator: dcoudert

Original creation time: 2018-06-16 08:14:08

CC:  meghanamreddy saiharsh

Error with multigraphs of order 2.

```
sage: G = graphs.PathGraph(2)
sage: G.vertex_connectivity()
1
sage: G.allow_multiple_edges(True)
sage: G.add_edges(G.edges())
sage: G.vertex_connectivity()
---------------------------------------------------------------------------
MIPSolverException                        Traceback (most recent call last)
<ipython-input-8-214804d5bfce> in <module>()
----> 1 G.vertex_connectivity()

/home/dcoudert/sage-dev/sage/local/lib/python2.7/site-packages/sage/graphs/connectivity.pyx in sage.graphs.connectivity.vertex_connectivity (build/cythonized/sage/graphs/connectivity.c:15737)()
   1408 
   1409     if value_only:
-> 1410         return Integer(round(p.solve(objective_only=True, log=verbose)))
   1411 
   1412     val = Integer(round(p.solve(log=verbose)))

/home/dcoudert/sage-dev/sage/local/lib/python2.7/site-packages/sage/numerical/mip.pyx in sage.numerical.mip.MixedIntegerLinearProgram.solve (build/cythonized/sage/numerical/mip.c:16986)()
   2303         """
   2304         if log is not None: self._backend.set_verbosity(log)
-> 2305         self._backend.solve()
   2306         return self._backend.get_objective_value()
   2307 

/home/dcoudert/sage-dev/sage/local/lib/python2.7/site-packages/sage/numerical/backends/cplex_backend.pyx in sage.numerical.backends.cplex_backend.CPLEXBackend.solve (build/cythonized/sage/numerical/backends/cplex_backend.c:9857)()
    914             return 0
    915         elif stat == CPX_STAT_INFEASIBLE or stat == CPXMIP_INFEASIBLE:
--> 916             raise MIPSolverException("CPLEX: The problem has no feasible solution")
    917         elif stat == CPX_STAT_UNBOUNDED or stat == CPXMIP_UNBOUNDED:
    918             raise MIPSolverException("CPLEX: The problem is unbounded")

MIPSolverException: CPLEX: The problem has no feasible solution
sage: G = graphs.PathGraph(3)
sage: G.allow_multiple_edges(True)
sage: G.add_edges(G.edges())
sage: G.vertex_connectivity()
1
```



---

Comment by dcoudert created at 2018-06-16 09:20:51

Changing status from new to needs_review.


---

Comment by dcoudert created at 2018-06-16 09:20:51

Actually, we have the same error for any `Graph` build from a complete graph by adding at least one loop or multiple edge. Such graphs are not recognized as cliques.

I prefer to patch the behavior of `vertex_connectivity` rather than changing the behavior of `is_clique`, but this can also be done adding a parameter `to_simple`.
----
New commits:


---

Comment by dcoudert created at 2018-06-16 10:19:32

I'm not sure that my previous commit was done correctly, so I made a new branch.
----
New commits:


---

Comment by meghanamreddy created at 2018-06-16 10:32:27

This seems to be the most effective way to fix the bug.

But how would we define cliques on multigraphs then? "A clique is defined as a subset of vertices such that every pair of vertices in the subset are connected by at least one edge"? Or "every pair of vertices in the subset are connected by a single edge"?


---

Comment by dcoudert created at 2018-06-16 10:56:54

Usually, an undirected complete graph is defined as a graph with `n(n-1)/2` edges such that each pair of vertices is connected by an edge. So it's a simple graph without loops or multiple edges. However, is some situations it is desirable to consider as a clique a graph of order `n` with a complete graph of order `n` as a minor... Such ambiguities in definitions are often ignored in graph theory papers but cannot be ignored when you code.


---

Comment by meghanamreddy created at 2018-06-17 21:12:48

Then it makes sense to change the behaviour of `vertex_connectivity` than change the behaviour of `is_clique()`. 
I'm changing the ticket status to positive review.


---

Comment by meghanamreddy created at 2018-06-17 21:13:15

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-06-17 23:38:48

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2018-06-17 23:38:48

Reviewer name..


---

Comment by dcoudert created at 2018-06-18 06:32:45

Changing status from needs_work to positive_review.


---

Comment by dcoudert created at 2018-06-18 06:32:45

I added the full reviewers name.

Thanks for the review.


---

Comment by vbraun created at 2018-06-19 22:11:03

Resolution: fixed
