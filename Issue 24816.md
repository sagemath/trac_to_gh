# Issue 24816: py3: remove __cmp__ in free monoids

Issue created by migration from https://trac.sagemath.org/ticket/25053

Original creator: chapoton

Original creation time: 2018-03-28 14:45:58

CC:  embray jdemeyer fbissey

Keywords: python3, richcmp

part of #16537


---

Comment by chapoton created at 2018-03-28 14:46:22

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-03-28 14:46:22

New commits:


---

Comment by chapoton created at 2018-03-28 18:53:09

many failing doctests


---

Comment by chapoton created at 2018-03-28 18:53:09

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-03-29 11:39:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-03-29 11:40:07

should be better now


---

Comment by chapoton created at 2018-03-29 11:40:07

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-03-29 18:01:48

bot is green, please review


---

Comment by jdemeyer created at 2018-03-30 10:35:37

Can this actually happen?

```
        if not isinstance(right, FreeMonoidElement)
```

Certainly, this cannot happen in `_richcmp_`:

```
             left.parent() != right.parent()):
```



---

Comment by jdemeyer created at 2018-03-30 10:35:37

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-03-30 10:37:03

Also: please use `self, other` instead of `left, right`.


---

Comment by git created at 2018-03-30 11:06:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-03-30 11:06:46

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-03-30 11:06:46

Thanks, done.


---

Comment by chapoton created at 2018-03-30 17:05:03

bot is green again


---

Comment by tscrim created at 2018-03-30 23:06:51

Minor point, but it is quite a bit faster to do `tuple([gen])` than `tuple(gen)`:

```
sage: %timeit tuple([x for x in range(1000)])
10000 loops, best of 3: 28.1 µs per loop
sage: %timeit tuple(x for x in range(1000))
10000 loops, best of 3: 40.6 µs per loop
```



---

Comment by git created at 2018-03-31 06:25:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-03-31 23:50:49

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-03-31 23:50:49

LGTM.


---

Comment by embray created at 2018-04-03 16:23:43

Replying to [comment:11 tscrim]:
> Minor point, but it is quite a bit faster to do `tuple([gen])` than `tuple(gen)`:

Weird, why do you think that is?  And does that hold for even larger generators?  Seems like it's just unnecessary duplication to me.


---

Comment by vbraun created at 2018-05-12 11:46:58

Resolution: fixed
