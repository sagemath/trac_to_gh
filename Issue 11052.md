# Issue 11052: Support for the descriptor protocol for lazy_import'ed objects

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2011-04-20 10:01:09

Assignee: jason

CC:  rishi jason rlm

This patch enable to lazy import objects using the descriptor protocol (readonly at this point: just the __get__ method).

A sample application taken from the doc::


```
Here we show how to take a function in a module, and lazy
import it as a method of a class. For the sake of this
example, we add manually a function in sage.all::

    sage: def my_method(self): return self
    sage: sage.all.my_method = my_method

Now we lazy import it as a method of a new class ``Foo``::

    sage: from sage.misc.lazy_import import LazyImport
    sage: class Foo:
    ...       my_method = LazyImport('sage.all', 'my_method')

Now we can use it as a usual method::

    sage: Foo().my_method()
    <__main__.Foo instance at ...>
    sage: Foo.my_method
    <unbound method Foo.my_method>
    sage: Foo().my_method
    <bound method Foo.my_method of <__main__.Foo instance at ...>>

Currently, ``my_method`` remains a lazy imported object in the
class dictionary, even when it has already been used, which is
not as efficient as it could be (but see #11003)::

    sage: type(Foo.__dict__["my_method"])
    <type 'sage.misc.lazy_import.LazyImport'>
```


In practice, I needed this feature for further work on categories and functorial constructions, around #11111 and #10963.


---

Attachment

Looks good to me.


---

Comment by mhansen created at 2011-06-13 04:29:15

Changing keywords from "" to "sd31".


---

Comment by mhansen created at 2011-06-13 04:29:15

Changing status from new to needs_review.


---

Comment by mhansen created at 2011-06-13 04:34:17

Changing status from needs_review to positive_review.


---

Comment by nthiery created at 2011-06-13 09:59:24

Thanks for the review!


---

Comment by jdemeyer created at 2011-07-28 10:24:47

Resolution: fixed
