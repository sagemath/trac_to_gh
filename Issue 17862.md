# Issue 17862: Prepare linear_code for inheritance

archive/issues_017862.json:
```json
{
    "body": "CC:  @johanrosenkilde @nathanncohen\n\nKeywords: sd66\n\nFor now, every family of linear code (eg: Hamming code) is a method which returns a `LinearCode` object. It would be nice to change this: every family of code should be an object. \n\nBecause most codes share parameters (like `length`) it could be a good idea to do several parameter assignements in a specific method which be be called by each subclass to automatically do these assignements.\n\nBesides, a linear code gets his `base_ring` using the `base_ring()` method from vector spaces. Linear codes should have their own method to do that.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18099\n\n",
    "created_at": "2015-04-01T13:24:52Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Prepare linear_code for inheritance",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17862",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
CC:  @johanrosenkilde @nathanncohen

Keywords: sd66

For now, every family of linear code (eg: Hamming code) is a method which returns a `LinearCode` object. It would be nice to change this: every family of code should be an object. 

Because most codes share parameters (like `length`) it could be a good idea to do several parameter assignements in a specific method which be be called by each subclass to automatically do these assignements.

Besides, a linear code gets his `base_ring` using the `base_ring()` method from vector spaces. Linear codes should have their own method to do that.

Issue created by migration from https://trac.sagemath.org/ticket/18099





---

archive/issue_comments_239252.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-01T13:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239252",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239253.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-01T13:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239253",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

New commits:



---

archive/issue_comments_239254.json:
```json
{
    "body": "Helloooooooooooooooooooo !\n\nSeveral comments:\n\n- I do not understand why you created a specific function `_init_linear_code`\n  instead of writing what you need in the `__init__` function. In particular the\n  names `__init__` and `_init_linear_code` do not indicate how their aims are\n  different.\n  - If you want to change the name of the function, could it mention categories\n    explicitly? (Or is there a reason not to?)\n  - If you decide to remove this function, please move the doctests that it\n    contains to the `__init__` method.\n- You say in the ticket's description that you add a `base_ring` method while\n  you implement `base_field`. What is the correct version?\n- I do not understand why you implement this function while saying that it is\n  'inherited'.\n  - If it is inherited, why do you need to implement it?\n  - If it is *not* inherited, then shouldn't we fix that instead of\n    implementing the function?\n\n- We usually type '::' at the end of the line. Is there any reason why you write\n  your code this way?\n  {{{\n  We now create a member of our newly made class\n  ::\n  }}}\n\n  Note that writing `our newly made class::` will appear in the HTML as \n  `our newly made class:` (only one ':'). If you do not want to see\n  this terminal ':' then a space is sufficient, e.g.: `This sentence ends here. ::`\n\nNathann",
    "created_at": "2015-04-03T09:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239254",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooooooooooooo !

Several comments:

- I do not understand why you created a specific function `_init_linear_code`
  instead of writing what you need in the `__init__` function. In particular the
  names `__init__` and `_init_linear_code` do not indicate how their aims are
  different.
  - If you want to change the name of the function, could it mention categories
    explicitly? (Or is there a reason not to?)
  - If you decide to remove this function, please move the doctests that it
    contains to the `__init__` method.
- You say in the ticket's description that you add a `base_ring` method while
  you implement `base_field`. What is the correct version?
- I do not understand why you implement this function while saying that it is
  'inherited'.
  - If it is inherited, why do you need to implement it?
  - If it is *not* inherited, then shouldn't we fix that instead of
    implementing the function?

- We usually type '::' at the end of the line. Is there any reason why you write
  your code this way?
  {{{
  We now create a member of our newly made class
  ::
  }}}

  Note that writing `our newly made class::` will appear in the HTML as 
  `our newly made class:` (only one ':'). If you do not want to see
  this terminal ':' then a space is sufficient, e.g.: `This sentence ends here. ::`

Nathann



---

archive/issue_comments_239255.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-04-03T09:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239255",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_239256.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-03T13:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239257.json:
```json
{
    "body": "Okay then!\n\nI changed the structure of the file: we now have an `AbstractLinearCode` class which has all methods that was previously in `LinearCode`. \n`LinearCode` now inherits from this new abstract class (and gets all its former methods that way). I fixed the `::` stuff too.\n\nDavid",
    "created_at": "2015-04-03T13:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239257",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Okay then!

I changed the structure of the file: we now have an `AbstractLinearCode` class which has all methods that was previously in `LinearCode`. 
`LinearCode` now inherits from this new abstract class (and gets all its former methods that way). I fixed the `::` stuff too.

David



---

archive/issue_comments_239258.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-03T13:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239258",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_239259.json:
```json
{
    "body": "Helloooooooooooooooooooooo,\n\nSeveral comments:\n\n- (superficial) The way you moved code around makes the commit much more\n  difficult to read than it should. It is a good thing to quickly read the\n  commits before you push them, as usually the reviewer has to\n  \"reverse-engineer\" what you want to do from the diff file. If you are forced\n  to move code around, it is better to do so in a specific commit which *only*\n  moves the code without changing anything in it.\n\n  As a reviewer, we have to make sure that all changes are correct, and as\n  moving code around appears to us as 1) remove the code 2) add the code we have\n  to re-read and check all of it, even if it was a no-brainer change on your\n  side.\n\n- I changed your toy example a bit so that the matrix is given as argument. I\n  hope that you will not mind.\n\n- While modifying `minimum_distance()` and `gens()` you interfered with its\n  caching mechanism: answers which used to be cached are now forgotten. Could\n  you fix that?\n\n- The doctest you wrote for the abstract class takes a lot of time, and we try\n  to not go over a couple of seconds if we can avoid it (even for long ones). As\n  this one does not test a very fundamental feature, could you make it a bit\n  faster by changing the figures?\n\nThanks,\n\nI added a small commit at public/18099. The usual procedure is that, as I\nreviewed your changes, you can be the reviewer of mine. In particular, feel free\nto discuss/oppose any of the changes.\n\nNathann",
    "created_at": "2015-04-03T14:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239259",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooooooooooooooo,

Several comments:

- (superficial) The way you moved code around makes the commit much more
  difficult to read than it should. It is a good thing to quickly read the
  commits before you push them, as usually the reviewer has to
  "reverse-engineer" what you want to do from the diff file. If you are forced
  to move code around, it is better to do so in a specific commit which *only*
  moves the code without changing anything in it.

  As a reviewer, we have to make sure that all changes are correct, and as
  moving code around appears to us as 1) remove the code 2) add the code we have
  to re-read and check all of it, even if it was a no-brainer change on your
  side.

- I changed your toy example a bit so that the matrix is given as argument. I
  hope that you will not mind.

- While modifying `minimum_distance()` and `gens()` you interfered with its
  caching mechanism: answers which used to be cached are now forgotten. Could
  you fix that?

- The doctest you wrote for the abstract class takes a lot of time, and we try
  to not go over a couple of seconds if we can avoid it (even for long ones). As
  this one does not test a very fundamental feature, could you make it a bit
  faster by changing the figures?

Thanks,

I added a small commit at public/18099. The usual procedure is that, as I
reviewed your changes, you can be the reviewer of mine. In particular, feel free
to discuss/oppose any of the changes.

Nathann



---

archive/issue_comments_239260.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-03T14:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239260",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239261.json:
```json
{
    "body": "Also, remember to change the description of the ticket to reflect what it actually does now.",
    "created_at": "2015-04-06T20:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239261",
    "user": "https://github.com/johanrosenkilde"
}
```

Also, remember to change the description of the ticket to reflect what it actually does now.



---

archive/issue_comments_239262.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-07T08:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239263.json:
```json
{
    "body": "Replying to [comment:10 ncohen]:\n> Helloooooooooooooooooooooo,\n\n\nHello!\n\n> Several comments:\n> \n> - (superficial) The way you moved code around makes the commit much more\n>   difficult to read than it should. It is a good thing to quickly read the\n>   commits before you push them, as usually the reviewer has to\n>   \"reverse-engineer\" what you want to do from the diff file. If you are forced\n>   to move code around, it is better to do so in a specific commit which *only*\n>   moves the code without changing anything in it.\n> \n>   As a reviewer, we have to make sure that all changes are correct, and as\n>   moving code around appears to us as 1) remove the code 2) add the code we have\n>   to re-read and check all of it, even if it was a no-brainer change on your\n>   side.\n\nGot it! Thanks for the advice :)\n\n> - I changed your toy example a bit so that the matrix is given as argument. I\n>   hope that you will not mind.\n\nNot at all. I kept it in the new version of the code.\n\n> - While modifying `minimum_distance()` and `gens()` you interfered with its\n>   caching mechanism: answers which used to be cached are now forgotten. Could\n>   you fix that?\n\nDone. These methods are now cached.\n\n> - The doctest you wrote for the abstract class takes a lot of time, and we try\n>   to not go over a couple of seconds if we can avoid it (even for long ones). As\n>   this one does not test a very fundamental feature, could you make it a bit\n>   faster by changing the figures?\n\nSure. Considering I picked some random methods to illustrate the inheritance mechanism with a dummy class, I just replaced it by something faster.\n\nDavid",
    "created_at": "2015-04-07T08:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239263",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Replying to [comment:10 ncohen]:
> Helloooooooooooooooooooooo,


Hello!

> Several comments:
> 
> - (superficial) The way you moved code around makes the commit much more
>   difficult to read than it should. It is a good thing to quickly read the
>   commits before you push them, as usually the reviewer has to
>   "reverse-engineer" what you want to do from the diff file. If you are forced
>   to move code around, it is better to do so in a specific commit which *only*
>   moves the code without changing anything in it.
> 
>   As a reviewer, we have to make sure that all changes are correct, and as
>   moving code around appears to us as 1) remove the code 2) add the code we have
>   to re-read and check all of it, even if it was a no-brainer change on your
>   side.

Got it! Thanks for the advice :)

> - I changed your toy example a bit so that the matrix is given as argument. I
>   hope that you will not mind.

Not at all. I kept it in the new version of the code.

> - While modifying `minimum_distance()` and `gens()` you interfered with its
>   caching mechanism: answers which used to be cached are now forgotten. Could
>   you fix that?

Done. These methods are now cached.

> - The doctest you wrote for the abstract class takes a lot of time, and we try
>   to not go over a couple of seconds if we can avoid it (even for long ones). As
>   this one does not test a very fundamental feature, could you make it a bit
>   faster by changing the figures?

Sure. Considering I picked some random methods to illustrate the inheritance mechanism with a dummy class, I just replaced it by something faster.

David



---

archive/issue_comments_239264.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-07T08:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239264",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239265.json:
```json
{
    "body": "Hello,\n\nI just had a quick look.\n\n1. What is the point of having two classes `AbstractLinearCode` and `LinearCode`. I would naturally name `LinearCode` the one from which I need to inherit from. Why not `LinearCode` and `LinearCode_generic` instead?\n\n2. Why the ambient vector space is not part of the input of `AbstractLinearCode`?\n\n3. What is the difference between `base_ring` provided by the Module and `base_field`?\n\n4. Coud you include in the docstring of the former `AbstractLinearCode`:\n   - the set of attributes that are provided by the class\n   - what should be done to implement a linar code when inheriting from it\n\n   In particular, some methods of `AbstractLinearCode` assume the presence of the attribute `._generator_matrix` (like `__cmp__`).\n\n5. Could you remove\n\n```\n+ # sage: C.minimum_distance_upper_bound() # optional (net connection)\n+ # 3\n+ # sage: C.minimum_distance_why() # optional (net connection)\n+ # Ub(7,4) = 3 follows by the Griesmer bound.\n```\n\n\n6. In the docstring of `AbstractLinearCode` replace `from this abstract method.` with `from this abstract class.`.\n\nVincent",
    "created_at": "2015-04-07T09:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239265",
    "user": "https://github.com/videlec"
}
```

Hello,

I just had a quick look.

1. What is the point of having two classes `AbstractLinearCode` and `LinearCode`. I would naturally name `LinearCode` the one from which I need to inherit from. Why not `LinearCode` and `LinearCode_generic` instead?

2. Why the ambient vector space is not part of the input of `AbstractLinearCode`?

3. What is the difference between `base_ring` provided by the Module and `base_field`?

4. Coud you include in the docstring of the former `AbstractLinearCode`:
   - the set of attributes that are provided by the class
   - what should be done to implement a linar code when inheriting from it

   In particular, some methods of `AbstractLinearCode` assume the presence of the attribute `._generator_matrix` (like `__cmp__`).

5. Could you remove

```
+ # sage: C.minimum_distance_upper_bound() # optional (net connection)
+ # 3
+ # sage: C.minimum_distance_why() # optional (net connection)
+ # Ub(7,4) = 3 follows by the Griesmer bound.
```


6. In the docstring of `AbstractLinearCode` replace `from this abstract method.` with `from this abstract class.`.

Vincent



---

archive/issue_comments_239266.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-07T09:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239266",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239267.json:
```json
{
    "body": "Hello,\n\n> 1. What is the point of having two classes `AbstractLinearCode` and `LinearCode`. I would naturally name `LinearCode` the one from which I need to inherit from. Why not `LinearCode` and `LinearCode_generic` instead?\n\nI am not sure that I totally understand your question, but I may be able to help a bit.\n\nThe class which is currently named \"LinearCode\" should (to me) be named \"LinearCodeFromMatrix\" in the code [1]. It is meant to represent a linear code *defined* from a matrix. On the other hand, they will have some code which will *not* be defined from a matrix [2]. Thus, I thought that it made sense to have a class defining methods which apply to all kinds of codes in some astract class (I don't care much what the name of that class is).\n\nNathann\n\nP.S.: As usual, when we discuss things \"live\", important information is left out from the ticket's comments.\n\n[1] At user level, I don't see anything wrong with having it aliased as \"LinearCode\", as it is the easiest way for users to define a code.\n\n[2] Like Reed-Solomon codes. They apparently have better ways to compute things than to work on a matrix.",
    "created_at": "2015-04-07T10:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239267",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> 1. What is the point of having two classes `AbstractLinearCode` and `LinearCode`. I would naturally name `LinearCode` the one from which I need to inherit from. Why not `LinearCode` and `LinearCode_generic` instead?

I am not sure that I totally understand your question, but I may be able to help a bit.

The class which is currently named "LinearCode" should (to me) be named "LinearCodeFromMatrix" in the code [1]. It is meant to represent a linear code *defined* from a matrix. On the other hand, they will have some code which will *not* be defined from a matrix [2]. Thus, I thought that it made sense to have a class defining methods which apply to all kinds of codes in some astract class (I don't care much what the name of that class is).

Nathann

P.S.: As usual, when we discuss things "live", important information is left out from the ticket's comments.

[1] At user level, I don't see anything wrong with having it aliased as "LinearCode", as it is the easiest way for users to define a code.

[2] Like Reed-Solomon codes. They apparently have better ways to compute things than to work on a matrix.



---

archive/issue_comments_239268.json:
```json
{
    "body": "Hello,\n\nI updated the description of the ticket.\n\nRegarding the naming problem : from the programmer's point of view, having a class named `AbstractSomething` makes sense (in my humble opinion) with regards to inheritance. Usually, if you see an abstract class of `something` you know that you need to inherit from this class when it comes to the implementation of `something` (or its subfamilies). \n\nRegarding the name of what we call `LinearCode`, we think it's the right name for coding theorists. `LinearCode_generic` is not really clear. I'd prefer to avoid this idea of using aliases, but if you tell me it's a more Sage-consistent naming scheme, I'll take it.\n\n>Why the ambient vector space is not part of the input of AbstractLinearCode?\n\nIt is actually implied by the parameters: the ambient space is a vectorial space over the base field of the code and of dimension the length of the code. `base_field` and `length` are the two parameters in our abstract class constructor, so every code knows its ambient space. Having both `bsae_field`, `length` and `ambient_space` as class parameters is redundant. We chose to pick `length` and `base_field` (and thus build the ambient space from these parameters) but the inverse could make sense too. It's really a matter of taste here `:)`\n\n>What is the difference between base_ring provided by the Module and base_field? \n\nWe noticed that some classes in Sage (like for instance `VectorSpace`) have both `base_ring` and `base_field` methods implemented, the former coming from the category framework and the latter specifically made for the class, both returning the same result. We chose to follow that because we thought it was consistent with Sage to do so. If it's not, I can remove the `base_field` method!\n\n>Coud you include in the docstring of the former AbstractLinearCode:\n>the set of attributes that are provided by the class\n>what should be done to implement a linar code when inheriting from it \n>\n>In particular, some methods of AbstractLinearCode assume the presence of the attribute ._generator_matrix (like `__cmp__`).\n\nSure, I'll do that. Thanks for noticing that in `__cmp__`, because it should not directly call the class parameter anymore but use the method `generator_matrix()` instead. My mistake.\n\n>Could you remove\n\n>{{{\n>\n>    + # sage: C.minimum_distance_upper_bound() # optional (net connection)\n>    + # 3\n>    + # sage: C.minimum_distance_why() # optional (net connection)\n>    + # Ub(7,4) = 3 follows by the Griesmer bound.\n>\n>}}}\n\nThere is some commented lines in the files of the coding part of Sage, along with some algorithms that could be more efficient. We definitely want to clean up the whole coding library, which means:\n- remove all these commented lines\n- remove some deprecation warnings which are more than one year old\n- enhance some algorithms and methods\n\nIf you agree, we would prefer to focus on integrated our new functionnalities into Sage for now, and once it is done clean up all the coding library based on what we noticed while working on the existing code, and on the new input we might get.\n\nDavid",
    "created_at": "2015-04-07T13:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239268",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello,

I updated the description of the ticket.

Regarding the naming problem : from the programmer's point of view, having a class named `AbstractSomething` makes sense (in my humble opinion) with regards to inheritance. Usually, if you see an abstract class of `something` you know that you need to inherit from this class when it comes to the implementation of `something` (or its subfamilies). 

Regarding the name of what we call `LinearCode`, we think it's the right name for coding theorists. `LinearCode_generic` is not really clear. I'd prefer to avoid this idea of using aliases, but if you tell me it's a more Sage-consistent naming scheme, I'll take it.

>Why the ambient vector space is not part of the input of AbstractLinearCode?

It is actually implied by the parameters: the ambient space is a vectorial space over the base field of the code and of dimension the length of the code. `base_field` and `length` are the two parameters in our abstract class constructor, so every code knows its ambient space. Having both `bsae_field`, `length` and `ambient_space` as class parameters is redundant. We chose to pick `length` and `base_field` (and thus build the ambient space from these parameters) but the inverse could make sense too. It's really a matter of taste here `:)`

>What is the difference between base_ring provided by the Module and base_field? 

We noticed that some classes in Sage (like for instance `VectorSpace`) have both `base_ring` and `base_field` methods implemented, the former coming from the category framework and the latter specifically made for the class, both returning the same result. We chose to follow that because we thought it was consistent with Sage to do so. If it's not, I can remove the `base_field` method!

>Coud you include in the docstring of the former AbstractLinearCode:
>the set of attributes that are provided by the class
>what should be done to implement a linar code when inheriting from it 
>
>In particular, some methods of AbstractLinearCode assume the presence of the attribute ._generator_matrix (like `__cmp__`).

Sure, I'll do that. Thanks for noticing that in `__cmp__`, because it should not directly call the class parameter anymore but use the method `generator_matrix()` instead. My mistake.

>Could you remove

>{{{
>
>    + # sage: C.minimum_distance_upper_bound() # optional (net connection)
>    + # 3
>    + # sage: C.minimum_distance_why() # optional (net connection)
>    + # Ub(7,4) = 3 follows by the Griesmer bound.
>
>}}}

There is some commented lines in the files of the coding part of Sage, along with some algorithms that could be more efficient. We definitely want to clean up the whole coding library, which means:
- remove all these commented lines
- remove some deprecation warnings which are more than one year old
- enhance some algorithms and methods

If you agree, we would prefer to focus on integrated our new functionnalities into Sage for now, and once it is done clean up all the coding library based on what we noticed while working on the existing code, and on the new input we might get.

David



---

archive/issue_comments_239269.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-08T09:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239270.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-08T09:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239271.json:
```json
{
    "body": "Replying to [comment:21 dlucas]:\n> Hello,\n> \n> Regarding the naming problem \n> [...]\n\nIf you look around, there are very few `AbstractXYZ`. On the other hand, I do not have very strong feeling about that, so I let you decide.\n\n> >Why the ambient vector space is not part of the input of AbstractLinearCode?\n>\n> It is actually implied by the parameters:\n> [...]\n\nAll right. That is at least clearer to me. Thanks for your explanation.\n\n> >What is the difference between base_ring provided by the Module and base_field? \n> \n> We noticed that some classes in Sage (like for instance `VectorSpace`) have both `base_ring` and `base_field` methods implemented, the former coming from the category framework and the latter specifically made for the class, both returning the same result. We chose to follow that because we thought it was consistent with Sage to do so. If it's not, I can remove the `base_field` method!\n\nFor vector space, you have\n\n```\ndef base_field(self):\n    ...\n    return self.base_ring()\n```\n\n(see line 5144 of `sage/modules/free_module.py`). Why would you dupliacte the attribute in your class `LinearCode`? Note that I have nothing against a **method** `base_field` but you should get rid of the **attribute** `_base_field`.\n\nActually, one thing that I would find more natural is to inherit from `FreeModule_submodule_field` (from `sage.modules.free_module`) instead of simply `Module`. You will get for free many very useful methods (like `ambient_space`, a much better implementation of `__contains__`, etc). The drawback is that you need the generator matrix in the constructor. But I do not see why this would be so bad.\n\n> >Could you remove\n> [...]\n> If you agree, we would prefer to focus on integrated our new functionnalities into Sage for now, and once it is done clean up all the coding library based on what we noticed while working on the existing code, and on the new input we might get.\n\nAll right\n\n\nNext:\n\n- It is very wrong to set\n\n```\nElement = type(facade_for).an_element()\n```\n\n  The thing is that in the category mechanism, `Element` is just here to produce the attribute `_element_class` which is then used as the class for elements. Except in the case where the class is an extension class (i.e. a Cython class) those two classes are different. Moreover, if at some point you implement a `LinearCode` which is not a facade, you will need to set an attribute `Element` to it. In the current state, this attribute would be overriden in the `__init__` by mentioned line.\n\n- This badly fails\n\n```\nsage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)\n<repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>\n```\n\n  One way is to provide a generic is just to move the `_repr_` in `LinearCode` to `AbstractLinearCode`.\n\n- the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not\n\n```\ndef generator_matrix(self):\n    raise NotImplementedError(\"This method must be set in subclasses\")\n```\n\n  That way, the programmer knows where there is something wrong when he implements a new code. Another way to do is to use the decorator ``@`abstract_method` from `sage.misc.abstract_method`.\n\n- In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.\n\n- the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).\n\n- the method `zero` is badly implemented. Instead, just do (without caching)\n\n```\ndef zero(self):\n    return self.ambient_space().zero()\n```\n\n  Or if you really care about the non-facade cases\n\n```\ndef zero(self):\n    if self.facade_for():\n        return self(0)\n    else:\n        return self.ambient_space().zero()\n```\n\n\n- Why did you set `gens` as a `cached_method`? Why do you check for a `_gen` attribute there? If you have an attribute `_gen` at some point the `cached_method` feature will just duplicate the fact that you already have an attribute that takes care of caching!!\n\n- In the constructor, don't you want to check that the argument `base_field` provided is actually a finite field? An easy way is\n\n```\n    if not base_field in Fields().Finite():\n        raise ValueError(\"base_field (={}) must be a finite field\".format(base_field))\n```\n\n  the argument `length` should also be checked and converted to the type you want to use (I guess either a Python `int` or a Sage `Integer`).\n\nEnough for now...\n\nVincent",
    "created_at": "2015-04-08T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239271",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:21 dlucas]:
> Hello,
> 
> Regarding the naming problem 
> [...]

If you look around, there are very few `AbstractXYZ`. On the other hand, I do not have very strong feeling about that, so I let you decide.

> >Why the ambient vector space is not part of the input of AbstractLinearCode?
>
> It is actually implied by the parameters:
> [...]

All right. That is at least clearer to me. Thanks for your explanation.

> >What is the difference between base_ring provided by the Module and base_field? 
> 
> We noticed that some classes in Sage (like for instance `VectorSpace`) have both `base_ring` and `base_field` methods implemented, the former coming from the category framework and the latter specifically made for the class, both returning the same result. We chose to follow that because we thought it was consistent with Sage to do so. If it's not, I can remove the `base_field` method!

For vector space, you have

```
def base_field(self):
    ...
    return self.base_ring()
```

(see line 5144 of `sage/modules/free_module.py`). Why would you dupliacte the attribute in your class `LinearCode`? Note that I have nothing against a **method** `base_field` but you should get rid of the **attribute** `_base_field`.

Actually, one thing that I would find more natural is to inherit from `FreeModule_submodule_field` (from `sage.modules.free_module`) instead of simply `Module`. You will get for free many very useful methods (like `ambient_space`, a much better implementation of `__contains__`, etc). The drawback is that you need the generator matrix in the constructor. But I do not see why this would be so bad.

> >Could you remove
> [...]
> If you agree, we would prefer to focus on integrated our new functionnalities into Sage for now, and once it is done clean up all the coding library based on what we noticed while working on the existing code, and on the new input we might get.

All right


Next:

- It is very wrong to set

```
Element = type(facade_for).an_element()
```

  The thing is that in the category mechanism, `Element` is just here to produce the attribute `_element_class` which is then used as the class for elements. Except in the case where the class is an extension class (i.e. a Cython class) those two classes are different. Moreover, if at some point you implement a `LinearCode` which is not a facade, you will need to set an attribute `Element` to it. In the current state, this attribute would be overriden in the `__init__` by mentioned line.

- This badly fails

```
sage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)
<repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>
```

  One way is to provide a generic is just to move the `_repr_` in `LinearCode` to `AbstractLinearCode`.

- the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not

```
def generator_matrix(self):
    raise NotImplementedError("This method must be set in subclasses")
```

  That way, the programmer knows where there is something wrong when he implements a new code. Another way to do is to use the decorator ``@`abstract_method` from `sage.misc.abstract_method`.

- In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.

- the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).

- the method `zero` is badly implemented. Instead, just do (without caching)

```
def zero(self):
    return self.ambient_space().zero()
```

  Or if you really care about the non-facade cases

```
def zero(self):
    if self.facade_for():
        return self(0)
    else:
        return self.ambient_space().zero()
```


- Why did you set `gens` as a `cached_method`? Why do you check for a `_gen` attribute there? If you have an attribute `_gen` at some point the `cached_method` feature will just duplicate the fact that you already have an attribute that takes care of caching!!

- In the constructor, don't you want to check that the argument `base_field` provided is actually a finite field? An easy way is

```
    if not base_field in Fields().Finite():
        raise ValueError("base_field (={}) must be a finite field".format(base_field))
```

  the argument `length` should also be checked and converted to the type you want to use (I guess either a Python `int` or a Sage `Integer`).

Enough for now...

Vincent



---

archive/issue_comments_239272.json:
```json
{
    "body": "Hi Vincent\n\nIt's awesome that you're being so thorough and giving feedback, but I think you're asking for too many things in this ticket. There's many things wrong with the current code, but for this ticket, we're not trying to fix it all. I'll reply to your comments below.\n\n> If you look around, there are very few `AbstractXYZ`. On the other hand, I do not have very strong feeling about that, so I let you decide.\nOk, we'll go with the abstract class then.\n\n> For vector space, you have ...\nThis implementation of `base_field` is indeed better, and we can kill `_base_field`.\n\n> Actually, one thing that I would find more natural is to inherit from `FreeModule_submodule_field` (from `sage.modules.free_module`) instead of simply `Module`...\n> - It is very wrong to set\n> {{{\n> Element = type(facade_for).an_element()\n> }}}\n> ...\nWe didn't write this facade code; it's from #16644. We're not sufficiently\nfamiliar with the category framework to judge whether it's sensible or not. If\nit is not good as you say, it should of course be fixed, but I suggest doing\nthat in another ticket since it implies various other cleanup (e.g.\n`__contains__` and `ambient_space` as you mention). I therefore suggest adding\n`base_field` with the simple implementation above -- to fix the interface in\nthis ticket - and then create a new ticket to fix the category stuff (which I\nhope you can further help us with).\n\n> - This badly fails\n> {{{\n> sage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)\n> <repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>\n> }}}\n\nIt's supposed to fail: it's an abstract class, so you shouldn't instantiate it.\n\n>   One way is to provide a generic is just to move the `_repr_` in `LinearCode` to `AbstractLinearCode`.\nThe usual `_repr_` should be in `LinearCode`, and I don't see a reason for defining `AbstractLinearCode._repr_`. I guess it could possibly be flagged with ``@`abstract_method` but that's largely a matter of taste. In this instance, I don't find it integral to the functionality of sub-classes that they have a `_repr_`, and ``@`abstract_method` is intended for flagging only essential-to-override methods.\n\n> - the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not\n> {{{\n> def generator_matrix(self):\n>     raise NotImplementedError(\"This method must be set in subclasses\")\n> }}}\n\nThe current implementation should indeed be in `LinearCode`. In `AbstractLinearCode` it should raise a `NotImplementedError`, though not with the message you suggest: mathematically, every linear code has a generator matrix (it has many), but from a programming point of view, one should not be forced to implement it for every code class.\n\nWe made this mistake in the current code because we're introducing a generic way to handle encoders in a ticket coming up. Encoders are linked to generator matrices, and this framework will override `AbstractLinearCode.generator_matrix` with a method which asks the \"default\" encoder for the generator matrix. In this sense, `AbstractLinearCode.generator_matrix` becomes a convenience function, and more or less no sub-class will ever need to override it.\n\n> \n> - In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.\nSubclasses don't need to. (sure, lot's of functions in `AbstractLinearCode` will throw a `NotImplementedError` with the above default implementation of `generator_matrix`, but that's ok.)\n\n> \n> - the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).\nOk. On a side-note, is the 80-character wrap really enforced everywhere? IMHO, it is archaic and very impractical to enforce, especially for doc-tests.\n\n> - the method `zero` is badly implemented...\n\nLot's of stuff is badly implemented (and we know). But it's not the job of this ticket to fix everything in `linear_code.py`.\n\n> - Why did you set `gens` as a `cached_method`? Why do you check for a `_gen` attribute there? If you have an attribute `_gen` at some point the `cached_method` feature will just duplicate the fact that you already have an attribute that takes care of caching!!\nYou're right, ``@`cached_method` should be removed.\n\n> - In the constructor, don't you want to check that the argument `base_field` provided is actually a finite field? An easy way is\n> {{{\n>     if not base_field in Fields().Finite():\n>         raise ValueError(\"base_field (={}) must be a finite field\".format(base_field))\n> }}}\n>   the argument `length` should also be checked and converted to the type you want to use (I guess either a Python `int` or a Sage `Integer`).\n\nNote that such a check wasn't there before either (matrices can be over rings\ntoo). But the check makes sense so we can add it. Probably `length` should be\ncast to Python `int`, and then cast to `Integer` in the `def length()` method.",
    "created_at": "2015-04-09T08:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239272",
    "user": "https://github.com/johanrosenkilde"
}
```

Hi Vincent

It's awesome that you're being so thorough and giving feedback, but I think you're asking for too many things in this ticket. There's many things wrong with the current code, but for this ticket, we're not trying to fix it all. I'll reply to your comments below.

> If you look around, there are very few `AbstractXYZ`. On the other hand, I do not have very strong feeling about that, so I let you decide.
Ok, we'll go with the abstract class then.

> For vector space, you have ...
This implementation of `base_field` is indeed better, and we can kill `_base_field`.

> Actually, one thing that I would find more natural is to inherit from `FreeModule_submodule_field` (from `sage.modules.free_module`) instead of simply `Module`...
> - It is very wrong to set
> {{{
> Element = type(facade_for).an_element()
> }}}
> ...
We didn't write this facade code; it's from #16644. We're not sufficiently
familiar with the category framework to judge whether it's sensible or not. If
it is not good as you say, it should of course be fixed, but I suggest doing
that in another ticket since it implies various other cleanup (e.g.
`__contains__` and `ambient_space` as you mention). I therefore suggest adding
`base_field` with the simple implementation above -- to fix the interface in
this ticket - and then create a new ticket to fix the category stuff (which I
hope you can further help us with).

> - This badly fails
> {{{
> sage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)
> <repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>
> }}}

It's supposed to fail: it's an abstract class, so you shouldn't instantiate it.

>   One way is to provide a generic is just to move the `_repr_` in `LinearCode` to `AbstractLinearCode`.
The usual `_repr_` should be in `LinearCode`, and I don't see a reason for defining `AbstractLinearCode._repr_`. I guess it could possibly be flagged with ``@`abstract_method` but that's largely a matter of taste. In this instance, I don't find it integral to the functionality of sub-classes that they have a `_repr_`, and ``@`abstract_method` is intended for flagging only essential-to-override methods.

> - the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not
> {{{
> def generator_matrix(self):
>     raise NotImplementedError("This method must be set in subclasses")
> }}}

The current implementation should indeed be in `LinearCode`. In `AbstractLinearCode` it should raise a `NotImplementedError`, though not with the message you suggest: mathematically, every linear code has a generator matrix (it has many), but from a programming point of view, one should not be forced to implement it for every code class.

We made this mistake in the current code because we're introducing a generic way to handle encoders in a ticket coming up. Encoders are linked to generator matrices, and this framework will override `AbstractLinearCode.generator_matrix` with a method which asks the "default" encoder for the generator matrix. In this sense, `AbstractLinearCode.generator_matrix` becomes a convenience function, and more or less no sub-class will ever need to override it.

> 
> - In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.
Subclasses don't need to. (sure, lot's of functions in `AbstractLinearCode` will throw a `NotImplementedError` with the above default implementation of `generator_matrix`, but that's ok.)

> 
> - the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).
Ok. On a side-note, is the 80-character wrap really enforced everywhere? IMHO, it is archaic and very impractical to enforce, especially for doc-tests.

> - the method `zero` is badly implemented...

Lot's of stuff is badly implemented (and we know). But it's not the job of this ticket to fix everything in `linear_code.py`.

> - Why did you set `gens` as a `cached_method`? Why do you check for a `_gen` attribute there? If you have an attribute `_gen` at some point the `cached_method` feature will just duplicate the fact that you already have an attribute that takes care of caching!!
You're right, ``@`cached_method` should be removed.

> - In the constructor, don't you want to check that the argument `base_field` provided is actually a finite field? An easy way is
> {{{
>     if not base_field in Fields().Finite():
>         raise ValueError("base_field (={}) must be a finite field".format(base_field))
> }}}
>   the argument `length` should also be checked and converted to the type you want to use (I guess either a Python `int` or a Sage `Integer`).

Note that such a check wasn't there before either (matrices can be over rings
too). But the check makes sense so we can add it. Probably `length` should be
cast to Python `int`, and then cast to `Integer` in the `def length()` method.



---

archive/issue_comments_239273.json:
```json
{
    "body": "Hello Johan, hello David,\n\nReplying to [comment:25 jsrn]:\n> It's awesome that you're being so thorough and giving feedback, but I think you're asking for too many things in this ticket. There's many things wrong with the current code, but for this ticket, we're not trying to fix it all. I'll reply to your comments below.\n\nNo problem. I am just saying what I found wrong while reading the code. You are free to say \"this is not for this ticket\". But keep my remarks under your pillow for the next tickets.\n\nYou somehow ignore my most important request: inheritance from `FreeModule_submodule_field`. That would avoid implementing plenty of useless stuff like `__contains__`, `cardinality`, `__iter__` and so on.\n\n> > - It is very wrong to set\n> > {{{\n> > Element = type(facade_for).an_element()\n> > }}}\n> > ...\n> [...]\n\nWhat happens if you just get rid of that line? Category is a driven by error experimentation ;-)\n\n> > - This badly fails\n> > {{{\n> > sage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)\n> > <repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>\n> > }}}\n> \n> It's supposed to fail: it's an abstract class, so you shouldn't instantiate it.\n\nOn the other hand the implementation uses the attribute `_generator_matrix`. Perhaps, you could just remove this `_repr_` in `AbstractLinearCode`.\n\n> > - the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not\n> > {{{\n> > def generator_matrix(self):\n> >     raise NotImplementedError(\"This method must be set in subclasses\")\n> > }}}\n> \n> The current implementation should indeed be in `LinearCode`. In `AbstractLinearCode` it should raise a `NotImplementedError`, though not with the message you suggest: mathematically, every linear code has a generator matrix (it has many), but from a programming point of view, one should not be forced to implement it for every code class.\n\n> > - In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.\n> Subclasses don't need to. (sure, lot's of functions in `AbstractLinearCode` will throw a `NotImplementedError` with the above default implementation of `generator_matrix`, but that's ok.)\n\nThe thing is that many methods in `AbstractLinearCode` will just fail if you do not implement the method `generator_matrix` (like `gens`, `__iter__`, `information_set`, `is_permutation_automorphism`, `is_permutation_equivalent`, ...). I agree that there are many generating matrices, but in order to define properly your subspace you need to tell Sage at least one. Perhaps not through the method `generating_matrix` though. This is of course related to the inheritance from `FreeModule_submodule_field`.\n\n> We made this mistake in the current code because we're introducing a generic way to handle encoders in a ticket coming up. [...]\n\nI am not familiar with encoders (nor code theory by the way ;-).\n\n> > - the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).\n> Ok. On a side-note, is the 80-character wrap really enforced everywhere? IMHO, it is archaic and very impractical to enforce, especially for doc-tests.\n\nIt is not strictly requested. But the two dots before `NOTE` are.\n\nThat is great work to clean all of this... a bit tedious but definitely needed!\n\nBest\nVincent",
    "created_at": "2015-04-09T09:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239273",
    "user": "https://github.com/videlec"
}
```

Hello Johan, hello David,

Replying to [comment:25 jsrn]:
> It's awesome that you're being so thorough and giving feedback, but I think you're asking for too many things in this ticket. There's many things wrong with the current code, but for this ticket, we're not trying to fix it all. I'll reply to your comments below.

No problem. I am just saying what I found wrong while reading the code. You are free to say "this is not for this ticket". But keep my remarks under your pillow for the next tickets.

You somehow ignore my most important request: inheritance from `FreeModule_submodule_field`. That would avoid implementing plenty of useless stuff like `__contains__`, `cardinality`, `__iter__` and so on.

> > - It is very wrong to set
> > {{{
> > Element = type(facade_for).an_element()
> > }}}
> > ...
> [...]

What happens if you just get rid of that line? Category is a driven by error experimentation ;-)

> > - This badly fails
> > {{{
> > sage: sage.coding.linear_code.AbstractLinearCode(GF(3),2)
> > <repr(<sage.coding.linear_code.AbstractLinearCode_with_category at 0x7f6867c61890>) failed: AttributeError: 'AbstractLinearCode_with_category' object has no attribute '_generator_matrix'>
> > }}}
> 
> It's supposed to fail: it's an abstract class, so you shouldn't instantiate it.

On the other hand the implementation uses the attribute `_generator_matrix`. Perhaps, you could just remove this `_repr_` in `AbstractLinearCode`.

> > - the method `AbstractLinearCode.generator_matrix` is implemented as `return self._generator_matrix`. Why not
> > {{{
> > def generator_matrix(self):
> >     raise NotImplementedError("This method must be set in subclasses")
> > }}}
> 
> The current implementation should indeed be in `LinearCode`. In `AbstractLinearCode` it should raise a `NotImplementedError`, though not with the message you suggest: mathematically, every linear code has a generator matrix (it has many), but from a programming point of view, one should not be forced to implement it for every code class.

> > - In the docstring of the class, you forgot to mention that the method `generator_matrix` must be implemented in subclasses.
> Subclasses don't need to. (sure, lot's of functions in `AbstractLinearCode` will throw a `NotImplementedError` with the above default implementation of `generator_matrix`, but that's ok.)

The thing is that many methods in `AbstractLinearCode` will just fail if you do not implement the method `generator_matrix` (like `gens`, `__iter__`, `information_set`, `is_permutation_automorphism`, `is_permutation_equivalent`, ...). I agree that there are many generating matrices, but in order to define properly your subspace you need to tell Sage at least one. Perhaps not through the method `generating_matrix` though. This is of course related to the inheritance from `FreeModule_submodule_field`.

> We made this mistake in the current code because we're introducing a generic way to handle encoders in a ticket coming up. [...]

I am not familiar with encoders (nor code theory by the way ;-).

> > - the `NOTE::` section in the docstring should be a `.. NOTE::` section. Moreover, the lines are too large here (>110 characters and should be around 80).
> Ok. On a side-note, is the 80-character wrap really enforced everywhere? IMHO, it is archaic and very impractical to enforce, especially for doc-tests.

It is not strictly requested. But the two dots before `NOTE` are.

That is great work to clean all of this... a bit tedious but definitely needed!

Best
Vincent



---

archive/issue_comments_239274.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-09T10:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239275.json:
```json
{
    "body": "Hello,\n\nHere is what I did:\n\n- as Vincent suggested, `generator_matrix()` is now an abstract method (returns `NotYetImplemented`) in `AbstractLinearCode`. I set an implementation of it in `LinearCode`, and I changed the docstring of the abstract class accordingly.\n\n- as \n\n```\nself.Element = type(facade_for.an_element())\n```\n\n  seemed harmless to removed (tested with the `TestSuite().run` method presented in the category tutorial) I killed it.\n\n- I actually removed `_gens` parameter from `LinearCode` and removed the related part in `gens()` method, so duplicated cache anymore.\n\n- However, I did not inherit from `FreeModule_submodule_field` because as far as I understand, it forces us to set the generator matrix as a class attribute, which is something we really do not want to do.",
    "created_at": "2015-04-09T10:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239275",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello,

Here is what I did:

- as Vincent suggested, `generator_matrix()` is now an abstract method (returns `NotYetImplemented`) in `AbstractLinearCode`. I set an implementation of it in `LinearCode`, and I changed the docstring of the abstract class accordingly.

- as 

```
self.Element = type(facade_for.an_element())
```

  seemed harmless to removed (tested with the `TestSuite().run` method presented in the category tutorial) I killed it.

- I actually removed `_gens` parameter from `LinearCode` and removed the related part in `gens()` method, so duplicated cache anymore.

- However, I did not inherit from `FreeModule_submodule_field` because as far as I understand, it forces us to set the generator matrix as a class attribute, which is something we really do not want to do.



---

archive/issue_comments_239276.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-09T11:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239277.json:
```json
{
    "body": "Hi Vincent and David,\n\nI was not clear enough earlier, it seems. What I meant about the category stuff\nwas that I don't think we should touch it in this ticket at all (not even\nremoving the `self.Element = ...` thing. I for one have no idea what it might or\nmight not break). It is a different kettle of fish and would require cleanup\nof several functions, etc. Also, as David mentions, it is really important for\nus that the generator matrix is not explicitly calculated except when asked for\n(possibly indirectly) by the user. If inheriting `FreeModule_submodule_field`\nwould require us to explicitly calculate the generator matrix, I down-vote that\nsolution. This whole discussion needs to be thought through properly in another ticket.\n\nRelatedly, I find it perfectly acceptable that lots of functionality breaks in\nsubclasses of `AbstractLinearCode` if those subclasses don't override\n`generator_matrix`; after all, those methods are default implementations which\ncan and should be overridden in many cases. That being said, most code families\n*will* usually have a generator matrix implementation (based on encoders, after\nour future ticket on the matter).\n\nDavid, you forgot to mention that you also fixed the `NOTE` thing, removed the\n`_repr_`, and reimplemented `base_field()` as suggested. I updated the\ndoc-string for `AbstractLinearCode` with some small stuff, and I changed the error message in `AbstractLinearCode.generator_matrix`.\n\nWhile doing so, I noticed the following: `__cmp__` and `__eq__` now breaks for\n`AbstractLinearCode` since they use `generator_matrix` which is not defined.\nThat's of course unavoidable if the definition of code equality is that they\ndescribe the same sub-space. We have had a discussion on what comparison\nsemantics makes most sense for linear codes, and we should bring this to Trac\nsoon. Our consesus was that it should mean equality of sub-spaces. In this case, the `NOTE` in `AbstractLinearCode` should be removed. However, that's for later, I guess.\n\nDavid, will you create a ticket for fixing up the category stuff, so we don't forget?\n\nBest,\nJohan",
    "created_at": "2015-04-09T11:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239277",
    "user": "https://github.com/johanrosenkilde"
}
```

Hi Vincent and David,

I was not clear enough earlier, it seems. What I meant about the category stuff
was that I don't think we should touch it in this ticket at all (not even
removing the `self.Element = ...` thing. I for one have no idea what it might or
might not break). It is a different kettle of fish and would require cleanup
of several functions, etc. Also, as David mentions, it is really important for
us that the generator matrix is not explicitly calculated except when asked for
(possibly indirectly) by the user. If inheriting `FreeModule_submodule_field`
would require us to explicitly calculate the generator matrix, I down-vote that
solution. This whole discussion needs to be thought through properly in another ticket.

Relatedly, I find it perfectly acceptable that lots of functionality breaks in
subclasses of `AbstractLinearCode` if those subclasses don't override
`generator_matrix`; after all, those methods are default implementations which
can and should be overridden in many cases. That being said, most code families
*will* usually have a generator matrix implementation (based on encoders, after
our future ticket on the matter).

David, you forgot to mention that you also fixed the `NOTE` thing, removed the
`_repr_`, and reimplemented `base_field()` as suggested. I updated the
doc-string for `AbstractLinearCode` with some small stuff, and I changed the error message in `AbstractLinearCode.generator_matrix`.

While doing so, I noticed the following: `__cmp__` and `__eq__` now breaks for
`AbstractLinearCode` since they use `generator_matrix` which is not defined.
That's of course unavoidable if the definition of code equality is that they
describe the same sub-space. We have had a discussion on what comparison
semantics makes most sense for linear codes, and we should bring this to Trac
soon. Our consesus was that it should mean equality of sub-spaces. In this case, the `NOTE` in `AbstractLinearCode` should be removed. However, that's for later, I guess.

David, will you create a ticket for fixing up the category stuff, so we don't forget?

Best,
Johan



---

archive/issue_comments_239278.json:
```json
{
    "body": "Hello,\n\n>David, will you create a ticket for fixing up the category stuff, so we don't forget?\n\nDone, see #18150 (very minimal description, but link to this ticket is provided)",
    "created_at": "2015-04-09T11:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239278",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello,

>David, will you create a ticket for fixing up the category stuff, so we don't forget?

Done, see #18150 (very minimal description, but link to this ticket is provided)



---

archive/issue_comments_239279.json:
```json
{
    "body": "And I reinstated the `Element ...` line as we will discuss category-related stuff in #18150\n----\nNew commits:",
    "created_at": "2015-04-09T11:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239279",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

And I reinstated the `Element ...` line as we will discuss category-related stuff in #18150
----
New commits:



---

archive/issue_comments_239280.json:
```json
{
    "body": "Hello,\n\nwhen you are done with your corrections, you should switch the state to `needs_review`. That way, you have a chance that a reviewer comes back and the patch bot to test your ticket.\n\nVincent",
    "created_at": "2015-04-11T22:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239280",
    "user": "https://github.com/videlec"
}
```

Hello,

when you are done with your corrections, you should switch the state to `needs_review`. That way, you have a chance that a reviewer comes back and the patch bot to test your ticket.

Vincent



---

archive/issue_comments_239281.json:
```json
{
    "body": "Replying to [comment:31 jsrn]:\n> Also, as David mentions, it is really important for\n> us that the generator matrix is not explicitly calculated except when asked for\n> (possibly indirectly) by the user. If inheriting `FreeModule_submodule_field`\n> would require us to explicitly calculate the generator matrix, I down-vote that\n> solution. This whole discussion needs to be thought through properly in another ticket.\n\nAll right. Then, I do not understand why there are so much methods in `AbstractLinearCode`. If most of them need the `generator_matrix` why not put them in your current `LinearCode` class? I really do not like the fact that most methods of `AbstractLinearCode` just reimplement the logic of `FreeModule_submodule_field` using `generator_matrix`.\n\nI would be happy if you briefly explain your reasons to avoid the construction of one generator matrix in the constructor.\n\nsided note: there are some trailing whitespaces that needs to be removed.\n\nVincent",
    "created_at": "2015-04-11T23:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239281",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:31 jsrn]:
> Also, as David mentions, it is really important for
> us that the generator matrix is not explicitly calculated except when asked for
> (possibly indirectly) by the user. If inheriting `FreeModule_submodule_field`
> would require us to explicitly calculate the generator matrix, I down-vote that
> solution. This whole discussion needs to be thought through properly in another ticket.

All right. Then, I do not understand why there are so much methods in `AbstractLinearCode`. If most of them need the `generator_matrix` why not put them in your current `LinearCode` class? I really do not like the fact that most methods of `AbstractLinearCode` just reimplement the logic of `FreeModule_submodule_field` using `generator_matrix`.

I would be happy if you briefly explain your reasons to avoid the construction of one generator matrix in the constructor.

sided note: there are some trailing whitespaces that needs to be removed.

Vincent



---

archive/issue_comments_239282.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-04-11T23:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239282",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_239283.json:
```json
{
    "body": ">when you are done with your corrections, you should switch the state to needs_review. That way, you have a chance that a reviewer comes back and the patch bot to test your ticket.\n\nI thought I did it. My bad.\n\n>I would be happy if you briefly explain your reasons to avoid the construction of one generator matrix in the constructor.\n\nSure. A generator matrix is not mandatory to perform operations of subfamilies of liner codes. For instance, with Reed-Solomon codes, you can encode and decode without using a generator matrix at all (in that case, you work with polynomials only). Compute a generator matrix can take some time for specific codes, and takes space in memory. If any code needs to compute a generator matrix in its constructor, that means you force the user to run a time- and memory-consuming every time he builds a code, even if he does not want to use it to encde and decode.\nAccording to us, building such a matrix should be a choice for the user as it is not a \"free\" computation. Of course, you need a generator for \"generic\" linear codes, that's why it is in `LinearCode` class constructor. But as it is not needed for subfamilies, we prefer not put it a a parameter of the abstract class constructor.\n\n>sided note: there are some trailing whitespaces that needs to be removed.\n\nOk, I'll do that",
    "created_at": "2015-04-12T08:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239283",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

>when you are done with your corrections, you should switch the state to needs_review. That way, you have a chance that a reviewer comes back and the patch bot to test your ticket.

I thought I did it. My bad.

>I would be happy if you briefly explain your reasons to avoid the construction of one generator matrix in the constructor.

Sure. A generator matrix is not mandatory to perform operations of subfamilies of liner codes. For instance, with Reed-Solomon codes, you can encode and decode without using a generator matrix at all (in that case, you work with polynomials only). Compute a generator matrix can take some time for specific codes, and takes space in memory. If any code needs to compute a generator matrix in its constructor, that means you force the user to run a time- and memory-consuming every time he builds a code, even if he does not want to use it to encde and decode.
According to us, building such a matrix should be a choice for the user as it is not a "free" computation. Of course, you need a generator for "generic" linear codes, that's why it is in `LinearCode` class constructor. But as it is not needed for subfamilies, we prefer not put it a a parameter of the abstract class constructor.

>sided note: there are some trailing whitespaces that needs to be removed.

Ok, I'll do that



---

archive/issue_comments_239284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-20T10:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239285.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-20T10:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239285",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_239286.json:
```json
{
    "body": "Hello,\n\nThere still are trailing whitespaces!\n\nWhat do you want to do with `LinearCode` in the future? Will it dispatch into subclasses. If not, you should add a comment about the implementation (telling that everything is computed from the `generator_matrix`).\n\nIn your children classes of `AbstractLinearCode`, will your elements always be vectors in a vector space? You talked about polynomials. Will polynomials be valid elements for some code or you will handle a conversion between them?\n\nVincent",
    "created_at": "2015-04-21T16:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239286",
    "user": "https://github.com/videlec"
}
```

Hello,

There still are trailing whitespaces!

What do you want to do with `LinearCode` in the future? Will it dispatch into subclasses. If not, you should add a comment about the implementation (telling that everything is computed from the `generator_matrix`).

In your children classes of `AbstractLinearCode`, will your elements always be vectors in a vector space? You talked about polynomials. Will polynomials be valid elements for some code or you will handle a conversion between them?

Vincent



---

archive/issue_comments_239287.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-04-21T16:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239287",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_239288.json:
```json
{
    "body": "Hi Vincent\n\n> What do you want to do with `LinearCode` in the future? Will it dispatch into subclasses.\nIt is quite likely that `LinearCode` is a \"final\" class. I see little reason why one would sub-class it.\n\n> If not, you should add a comment about the implementation (telling that everything is computed from the `generator_matrix`).\n\nClearly that is implied by the fact that the generator matrix given as input to the constructor is **all** the information that the object has. The `LinearCode` could compute stuff from nothing else.\n\n> In your children classes of `AbstractLinearCode`, will your elements always be vectors in a vector space? You talked about polynomials. Will polynomials be valid elements for some code or you will handle a conversion between them?\n\nAll `AbstractLinearCode`s will be subspaces of `GF(q)^n`, so yes, its elements will always be vectors over some field. Usually, one talks of an \"encoding\" which is a bijection between the code and some other space called \"the message space\". The latter space is usually `GF(q)^k` where `k` is the dimension of the code, and the \"encoding\" bijection can be described by a linear mapping using a matrix. But it could also (for e.g. Reed-Solomon codes) be a `k`-dimensional space of polynomials.\n\nWe will handle this - in a later ticket - using a light-weight system of `Encoder` objects.\n\nBest,\nJohan",
    "created_at": "2015-04-21T19:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239288",
    "user": "https://github.com/johanrosenkilde"
}
```

Hi Vincent

> What do you want to do with `LinearCode` in the future? Will it dispatch into subclasses.
It is quite likely that `LinearCode` is a "final" class. I see little reason why one would sub-class it.

> If not, you should add a comment about the implementation (telling that everything is computed from the `generator_matrix`).

Clearly that is implied by the fact that the generator matrix given as input to the constructor is **all** the information that the object has. The `LinearCode` could compute stuff from nothing else.

> In your children classes of `AbstractLinearCode`, will your elements always be vectors in a vector space? You talked about polynomials. Will polynomials be valid elements for some code or you will handle a conversion between them?

All `AbstractLinearCode`s will be subspaces of `GF(q)^n`, so yes, its elements will always be vectors over some field. Usually, one talks of an "encoding" which is a bijection between the code and some other space called "the message space". The latter space is usually `GF(q)^k` where `k` is the dimension of the code, and the "encoding" bijection can be described by a linear mapping using a matrix. But it could also (for e.g. Reed-Solomon codes) be a `k`-dimensional space of polynomials.

We will handle this - in a later ticket - using a light-weight system of `Encoder` objects.

Best,
Johan



---

archive/issue_comments_239289.json:
```json
{
    "body": "Hi Johan, hi David,\n\nThen just remove the trailing whitespaces and it will be good to go.\n\nVincent",
    "created_at": "2015-04-21T19:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239289",
    "user": "https://github.com/videlec"
}
```

Hi Johan, hi David,

Then just remove the trailing whitespaces and it will be good to go.

Vincent



---

archive/issue_comments_239290.json:
```json
{
    "body": "Hi Vincent and David,\n\nActually, having reflected about it I think I now get Vincent's point on generator matrices. Perhaps the doc for the class `LinearCode` could be improved to something like\n\n    Linear codes over a finite field or finite ring, represented using a\n    generator matrix.\n\n    This class should be used for arbitrary and unstructured linear codes. This\n    means that basic operations on the code, such as the computation of the\n    minimum distance, will use generic, slow algorithms.\n\n    If you are looking for constructing a code from a more specific family, see\n    if the family has been implemented by investigating `codes.<tab>`. These\n    more specific classes use properties particular for that family to allow\n    faster algorithms, and could also have family-specific methods.",
    "created_at": "2015-04-22T08:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239290",
    "user": "https://github.com/johanrosenkilde"
}
```

Hi Vincent and David,

Actually, having reflected about it I think I now get Vincent's point on generator matrices. Perhaps the doc for the class `LinearCode` could be improved to something like

    Linear codes over a finite field or finite ring, represented using a
    generator matrix.

    This class should be used for arbitrary and unstructured linear codes. This
    means that basic operations on the code, such as the computation of the
    minimum distance, will use generic, slow algorithms.

    If you are looking for constructing a code from a more specific family, see
    if the family has been implemented by investigating `codes.<tab>`. These
    more specific classes use properties particular for that family to allow
    faster algorithms, and could also have family-specific methods.



---

archive/issue_comments_239291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-22T09:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239292.json:
```json
{
    "body": "I removed remaining trailing whitespaces (I hope I caught them all this time...) and I changed `LinearCode` docstring accordingly to comment 43.",
    "created_at": "2015-04-22T09:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239292",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I removed remaining trailing whitespaces (I hope I caught them all this time...) and I changed `LinearCode` docstring accordingly to comment 43.



---

archive/issue_comments_239293.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-22T09:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239293",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_239294.json:
```json
{
    "body": "It is fine with trailing whitespaces now. And all test pass.\n\nVincent",
    "created_at": "2015-04-22T11:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239294",
    "user": "https://github.com/videlec"
}
```

It is fine with trailing whitespaces now. And all test pass.

Vincent



---

archive/issue_comments_239295.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-22T11:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239295",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239296.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-23T03:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17862#issuecomment-239296",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017166.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-23T03:21:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17862",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17862#event-17166"
}
```
