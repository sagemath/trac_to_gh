# Issue 23543: Modify p-adic Gauss sum to allow working directly in Q_p

archive/issues_023543.json:
```json
{
    "body": "Keywords: Gauss sums, Gross-Koblitz formula\n\nThe Gross-Koblitz formula for p-adic computation of Gauss sums was implemented in #23456. The formula involves working in the ramified extension of `Q_p` generated by an element `pi` for which `pi^(p-1) == -p`; however, the formula actually is written as a power of `pi` times an element of `Z_p`, and for some applications (e.g., hypergeometric motives; see #23671) it would be helpful to be able to access the unramified factor without going through the extension ring (for efficiency when `p` is large). That is, one should have the option to request the output in the form `(e, z)` where `e` is a nonnegative integer, `z` is an element of `Z_p`, and the real answer is `pi^e*z` for `pi` as above. And in this case, the extension field should not be formed at all.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23780\n\n",
    "created_at": "2017-09-04T15:30:25Z",
    "labels": [
        "component: padics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Modify p-adic Gauss sum to allow working directly in Q_p",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23543",
    "user": "https://github.com/kedlaya"
}
```
Keywords: Gauss sums, Gross-Koblitz formula

The Gross-Koblitz formula for p-adic computation of Gauss sums was implemented in #23456. The formula involves working in the ramified extension of `Q_p` generated by an element `pi` for which `pi^(p-1) == -p`; however, the formula actually is written as a power of `pi` times an element of `Z_p`, and for some applications (e.g., hypergeometric motives; see #23671) it would be helpful to be able to access the unramified factor without going through the extension ring (for efficiency when `p` is large). That is, one should have the option to request the output in the form `(e, z)` where `e` is a nonnegative integer, `z` is an element of `Z_p`, and the real answer is `pi^e*z` for `pi` as above. And in this case, the extension field should not be formed at all.

Issue created by migration from https://trac.sagemath.org/ticket/23780





---

archive/issue_comments_329428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-04T15:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_329429.json:
```json
{
    "body": "Commit added, with a doctest to match. I also fixed the mathematical issue with the docstring reported in #23671.\n\nThis should be an easy review, except possibly for formatting issues.",
    "created_at": "2017-09-04T15:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329429",
    "user": "https://github.com/kedlaya"
}
```

Commit added, with a doctest to match. I also fixed the mathematical issue with the docstring reported in #23671.

This should be an easy review, except possibly for formatting issues.



---

archive/issue_comments_329430.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-04T15:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329430",
    "user": "https://github.com/kedlaya"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329431.json:
```json
{
    "body": "Looks good to me; positive review once tests pass.",
    "created_at": "2017-09-04T19:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329431",
    "user": "https://github.com/roed314"
}
```

Looks good to me; positive review once tests pass.



---

archive/issue_comments_329432.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-05T15:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329432",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_329433.json:
```json
{
    "body": "Fixed docstring formatting in my mathematical correction; and forced the answer to be cast into the p-adic ring even when `r=0` (otherwise errors may result down the line).",
    "created_at": "2017-09-05T15:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329433",
    "user": "https://github.com/kedlaya"
}
```

Fixed docstring formatting in my mathematical correction; and forced the answer to be cast into the p-adic ring even when `r=0` (otherwise errors may result down the line).



---

archive/issue_comments_329434.json:
```json
{
    "body": "does not apply on the latest beta, needs rebase",
    "created_at": "2017-09-06T11:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329434",
    "user": "https://github.com/fchapoton"
}
```

does not apply on the latest beta, needs rebase



---

archive/issue_comments_329435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-06T13:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_329436.json:
```json
{
    "body": "Sorry, that should be fixed now.",
    "created_at": "2017-09-06T13:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329436",
    "user": "https://github.com/kedlaya"
}
```

Sorry, that should be fixed now.



---

archive/issue_comments_329437.json:
```json
{
    "body": "Adding author for patchbot.",
    "created_at": "2017-09-06T16:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329437",
    "user": "https://github.com/roed314"
}
```

Adding author for patchbot.



---

archive/issue_comments_329438.json:
```json
{
    "body": "trying to make the doc build.\n----\nNew commits:",
    "created_at": "2017-09-07T19:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329438",
    "user": "https://github.com/fchapoton"
}
```

trying to make the doc build.
----
New commits:



---

archive/issue_comments_329439.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-08T06:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329439",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_329440.json:
```json
{
    "body": "ok, let it be.",
    "created_at": "2017-09-08T06:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329440",
    "user": "https://github.com/fchapoton"
}
```

ok, let it be.



---

archive/issue_comments_329441.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-11T13:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23543#issuecomment-329441",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
