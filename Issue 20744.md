# Issue 20744: Fix debug build of some modules on Cygwin

Issue created by migration from https://trac.sagemath.org/ticket/20981

Original creator: embray

Original creation time: 2016-07-08 12:09:42

This small patch fixes some problems I was having doing a debug build of Sage on Cygwin (`SAGE_DEBUG=yes`).  I didn't have the same problem on Windows.

I actually made this patch a few weeks ago and don't remember all the details of why this was needed.  No symbols from `gmp` are used explicitly in those modules, but _are_ brought in via `ntl`.  Normally these unused symbols would be optimized out at link time, but with `-O0` they are not.  There are also some Windows-specific details of the linker that I forget that were specifically responsible for this failing on Windows, while it still worked on Linux.

That said, it should be harmless to add this change in general.


---

Comment by embray created at 2016-07-08 12:23:55

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-07-08 20:59:08

Don't you want to put a note somewhere about that inside `module_list.py`?


---

Comment by embray created at 2016-07-11 11:10:48

Replying to [comment:2 vdelecroix]:
> Don't you want to put a note somewhere about that inside `module_list.py`?

Yes, that would probably be good.


---

Comment by git created at 2016-07-11 11:18:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-03-16 19:07:43

Does not apply.


---

Comment by jdemeyer created at 2017-03-16 19:07:43

Changing status from needs_review to needs_work.


---

Comment by embray created at 2017-03-16 19:37:38

I think #22323 was actually mostly a duplicate of this.  Let me see if there's anything still worth keeping from this ticket.


---

Comment by git created at 2017-03-16 19:44:40

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2017-03-16 19:45:38

Well I rebased it.  There's not much left, but the extra bits make sense to have I think.


---

Comment by embray created at 2017-03-22 15:38:16

It seems actually the last change from this ticket that has not been applied (other than the explanatory comment, though it's not essential) is not needed after all.  I've been building with `SAGE_DEBUG=yes` for a while and haven't needed to link these extra libraries.

Will reopen if somehow it crops up again.


---

Comment by embray created at 2017-03-22 15:38:16

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-03-22 18:04:54

Changing status from needs_review to positive_review.


---

Comment by embray created at 2017-04-24 14:52:11

Resolution: worksforme
