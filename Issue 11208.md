# Issue 11208: Computing continued fractions on real quadratic fields

archive/issues_011208.json:
```json
{
    "body": "Assignee: @williamstein\n\nCC:  @JohnCremona @staroste @lftabera @slel\n\nKeywords: norm-euclidean, two-stage euclidean, continued fraction\n\nWe have implemented some routines that allow for the computation of continued fractions in real quadratic number fields of class number one. This uses 2-stage division chains as defined in G.E.Cooke,\"A weakening of the euclidean property for integral domains and applications to algebraic number theory\".\n\nThe algorithm finds a set of \"hyperbolic regions\" as described in the above article, large enough so that it covers a fundamental domain. These regions are used to construct 2-stage division chains and therefore obtain continued fractions with elements of the ring of integers of the number field.\n\nThis is a\n\nIssue created by migration from https://trac.sagemath.org/ticket/11380\n\n",
    "created_at": "2011-05-25T21:00:11Z",
    "labels": [
        "number theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-wishlist",
    "title": "Computing continued fractions on real quadratic fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11208",
    "user": "@mmasdeu"
}
```
Assignee: @williamstein

CC:  @JohnCremona @staroste @lftabera @slel

Keywords: norm-euclidean, two-stage euclidean, continued fraction

We have implemented some routines that allow for the computation of continued fractions in real quadratic number fields of class number one. This uses 2-stage division chains as defined in G.E.Cooke,"A weakening of the euclidean property for integral domains and applications to algebraic number theory".

The algorithm finds a set of "hyperbolic regions" as described in the above article, large enough so that it covers a fundamental domain. These regions are used to construct 2-stage division chains and therefore obtain continued fractions with elements of the ring of integers of the number field.

This is a

Issue created by migration from https://trac.sagemath.org/ticket/11380





---

archive/issue_comments_123333.json:
```json
{
    "body": "Attachment [trac_11380_cont_frac_quadratic.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_cont_frac_quadratic.patch) by @mmasdeu created at 2011-05-25 21:04:54\n\nFirst version of the new routines",
    "created_at": "2011-05-25T21:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123333",
    "user": "@mmasdeu"
}
```

Attachment [trac_11380_cont_frac_quadratic.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_cont_frac_quadratic.patch) by @mmasdeu created at 2011-05-25 21:04:54

First version of the new routines



---

archive/issue_comments_123334.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-05-25T21:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123334",
    "user": "@mmasdeu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_123335.json:
```json
{
    "body": "Second version",
    "created_at": "2011-05-26T21:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123335",
    "user": "@mmasdeu"
}
```

Second version



---

archive/issue_comments_123336.json:
```json
{
    "body": "Attachment [trac_11380_cont_frac_quadratic_2.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_cont_frac_quadratic_2.patch) by @mmasdeu created at 2011-05-26 21:57:39\n\nI have added a second patch, which should be applied after the first. This will replace the .py with a .pyx and fix some errors.\n\nI think that this works now as expected. Sorry for the small mess...it's my first ticket :-).",
    "created_at": "2011-05-26T21:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123336",
    "user": "@mmasdeu"
}
```

Attachment [trac_11380_cont_frac_quadratic_2.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_cont_frac_quadratic_2.patch) by @mmasdeu created at 2011-05-26 21:57:39

I have added a second patch, which should be applied after the first. This will replace the .py with a .pyx and fix some errors.

I think that this works now as expected. Sorry for the small mess...it's my first ticket :-).



---

archive/issue_comments_123337.json:
```json
{
    "body": "The last attachment contains all the changes and passed all the doctest with Sage 4.7. The first two patches should be disregarded.",
    "created_at": "2011-06-02T16:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123337",
    "user": "@mmasdeu"
}
```

The last attachment contains all the changes and passed all the doctest with Sage 4.7. The first two patches should be disregarded.



---

archive/issue_comments_123338.json:
```json
{
    "body": "I don't think I am qualified to review this since I am not familiar with the algorithm.  But I do have one question:  Why have you put the new code into a cython (.pyx) file when it does not seem to contain any cython code, only python?  (I may be wrong, as I did not read it all).  If it is just python, then it can be renamed .py and not included in the module_list.",
    "created_at": "2011-06-03T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123338",
    "user": "@JohnCremona"
}
```

I don't think I am qualified to review this since I am not familiar with the algorithm.  But I do have one question:  Why have you put the new code into a cython (.pyx) file when it does not seem to contain any cython code, only python?  (I may be wrong, as I did not read it all).  If it is just python, then it can be renamed .py and not included in the module_list.



---

archive/issue_comments_123339.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-06-03T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123339",
    "user": "@JohnCremona"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_123340.json:
```json
{
    "body": "Replying to [comment:5 cremona]:\n> I don't think I am qualified to review this since I am not familiar with the algorithm.  But I do have one question:  Why have you put the new code into a cython (.pyx) file when it does not seem to contain any cython code, only python?  (I may be wrong, as I did not read it all).  If it is just python, then it can be renamed .py and not included in the module_list.\n\nI updated the patch with the suggested changes. As for the review, during this weekend we plan to upload our preprint to the arxiv, and there you can find the algorithm that we are using explained.\n\nIn short, what the only function accessible should do is to return a list of elements of the ring of integers of the number field, so that they are a (terminating) continued fraction for the given element.",
    "created_at": "2011-06-03T16:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123340",
    "user": "@mmasdeu"
}
```

Replying to [comment:5 cremona]:
> I don't think I am qualified to review this since I am not familiar with the algorithm.  But I do have one question:  Why have you put the new code into a cython (.pyx) file when it does not seem to contain any cython code, only python?  (I may be wrong, as I did not read it all).  If it is just python, then it can be renamed .py and not included in the module_list.

I updated the patch with the suggested changes. As for the review, during this weekend we plan to upload our preprint to the arxiv, and there you can find the algorithm that we are using explained.

In short, what the only function accessible should do is to return a list of elements of the ring of integers of the number field, so that they are a (terminating) continued fraction for the given element.



---

archive/issue_comments_123341.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-06-07T15:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123341",
    "user": "@mmasdeu"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_123342.json:
```json
{
    "body": "Let me try to help the buildbot:\n\nApply trac_11380_quadratic_cont_frac.patch",
    "created_at": "2011-06-24T19:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123342",
    "user": "@fchapoton"
}
```

Let me try to help the buildbot:

Apply trac_11380_quadratic_cont_frac.patch



---

archive/issue_comments_123343.json:
```json
{
    "body": "The current patch is a double patch (read it and you'll see what I mean).  Also, I think cremona's question about the .pyx versus .py is a good one.",
    "created_at": "2011-06-24T19:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123343",
    "user": "@kcrisman"
}
```

The current patch is a double patch (read it and you'll see what I mean).  Also, I think cremona's question about the .pyx versus .py is a good one.



---

archive/issue_comments_123344.json:
```json
{
    "body": "To be used alone",
    "created_at": "2011-06-25T14:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123344",
    "user": "@mmasdeu"
}
```

To be used alone



---

archive/issue_comments_123345.json:
```json
{
    "body": "Attachment [trac_11380_quadratic_cont_frac.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_quadratic_cont_frac.patch) by @mmasdeu created at 2011-06-25 14:17:04\n\nThank you chapoton, kcrisman and cremona for taking a look at this. After kcrisman I am uploading a patch that should work. Any references to the .pyx have been removed (we did that in the second version but apparently it got messed up).",
    "created_at": "2011-06-25T14:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123345",
    "user": "@mmasdeu"
}
```

Attachment [trac_11380_quadratic_cont_frac.patch](tarball://root/attachments/some-uuid/ticket11380/trac_11380_quadratic_cont_frac.patch) by @mmasdeu created at 2011-06-25 14:17:04

Thank you chapoton, kcrisman and cremona for taking a look at this. After kcrisman I am uploading a patch that should work. Any references to the .pyx have been removed (we did that in the second version but apparently it got messed up).



---

archive/issue_comments_123346.json:
```json
{
    "body": "for the bot:\n\nApply trac_11380_quadratic_cont_frac.patch",
    "created_at": "2011-06-29T19:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123346",
    "user": "@fchapoton"
}
```

for the bot:

Apply trac_11380_quadratic_cont_frac.patch



---

archive/issue_comments_123347.json:
```json
{
    "body": "This cannot be considered for inclusion into Sage since the file `sage/rings/number_field/quadratic_continued_fraction.py` does not have a single docstring or example anywhere.",
    "created_at": "2011-09-11T15:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123347",
    "user": "@loefflerd"
}
```

This cannot be considered for inclusion into Sage since the file `sage/rings/number_field/quadratic_continued_fraction.py` does not have a single docstring or example anywhere.



---

archive/issue_comments_123348.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-09-11T15:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123348",
    "user": "@loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_123349.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-08-28T19:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123349",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_123350.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-30T12:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123350",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_123351.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-30T16:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123351",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_123352.json:
```json
{
    "body": "typo in the Authors field",
    "created_at": "2015-10-05T01:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123352",
    "user": "@videlec"
}
```

typo in the Authors field



---

archive/issue_comments_123353.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-08T20:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123353",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_123354.json:
```json
{
    "body": "Also available as a pip-installable package that runs on top of Sage:\n- code repo on GitHub: https://github.com/mmasdeu/twostage\n- python package on PyPI: https://pypi.org/project/twostage",
    "created_at": "2018-07-02T22:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123354",
    "user": "@slel"
}
```

Also available as a pip-installable package that runs on top of Sage:
- code repo on GitHub: https://github.com/mmasdeu/twostage
- python package on PyPI: https://pypi.org/project/twostage



---

archive/issue_comments_123355.json:
```json
{
    "body": "Changing keywords from \"norm-euclidean, two-stage euclidean, continued fraction\" to \"norm-euclidean, two-stage euclidean, continued_fraction\".",
    "created_at": "2020-09-24T11:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11208#issuecomment-123355",
    "user": "@fchapoton"
}
```

Changing keywords from "norm-euclidean, two-stage euclidean, continued fraction" to "norm-euclidean, two-stage euclidean, continued_fraction".
