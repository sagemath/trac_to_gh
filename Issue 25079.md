# Issue 25079: Replace python 5755 patch by monkey patch

archive/issues_025079.json:
```json
{
    "body": "Python bug #5755 won't be fixed in 2.7. Because of that, sage patches python.\n\nI don't know what the policy for that is, but at least in my opinion hard patches of dependencies (especially big ones such as python) should be avoided if possible.\n\nIn this case it is possible: We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument. Thats a bit of a hack of course. But it doesn't have any practical disadvantages to the python patch and removes one patch from python.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25316\n\n",
    "created_at": "2018-05-09T10:34:40Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Replace python 5755 patch by monkey patch",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25079",
    "user": "https://github.com/timokau"
}
```
Python bug #5755 won't be fixed in 2.7. Because of that, sage patches python.

I don't know what the policy for that is, but at least in my opinion hard patches of dependencies (especially big ones such as python) should be avoided if possible.

In this case it is possible: We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument. Thats a bit of a hack of course. But it doesn't have any practical disadvantages to the python patch and removes one patch from python.

Issue created by migration from https://trac.sagemath.org/ticket/25316





---

archive/issue_comments_352458.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-09T10:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352458",
    "user": "https://github.com/timokau"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_352459.json:
```json
{
    "body": "Replying to [ticket:25316 gh-timokau]:\n> We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument.\n\nI don't see that in your branch.",
    "created_at": "2018-05-09T11:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352459",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:25316 gh-timokau]:
> We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument.

I don't see that in your branch.



---

archive/issue_comments_352460.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-09T11:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352460",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_352461.json:
```json
{
    "body": "Two general comments:\n\n1. This patch fixes a *warning*, it should not affect functionality. Are there any problems building Sage without this patch?\n\n2. There are plenty of patches to Python in Sage. I don't think that all of them can be replaced by a monkey-patch, so how does it help if this one patch is removed?",
    "created_at": "2018-05-09T12:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352461",
    "user": "https://github.com/jdemeyer"
}
```

Two general comments:

1. This patch fixes a *warning*, it should not affect functionality. Are there any problems building Sage without this patch?

2. There are plenty of patches to Python in Sage. I don't think that all of them can be replaced by a monkey-patch, so how does it help if this one patch is removed?



---

archive/issue_comments_352462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-09T12:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_352463.json:
```json
{
    "body": "Replying to [comment:3 jdemeyer]:\n> Replying to [ticket:25316 gh-timokau]:\n> > We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument.\n> \n> I don't see that in your branch.\n\nOh sorry, I must've forgotten to `git add` it. I've amended the commit.",
    "created_at": "2018-05-09T12:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352463",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:3 jdemeyer]:
> Replying to [ticket:25316 gh-timokau]:
> > We can instead monkey-patch `build_extensions` to always remove the `-Wstrict-prototypes` argument.
> 
> I don't see that in your branch.

Oh sorry, I must've forgotten to `git add` it. I've amended the commit.



---

archive/issue_comments_352464.json:
```json
{
    "body": "Replying to [comment:4 jdemeyer]:\n> Two general comments:\n> \n> 1. This patch fixes a *warning*, it should not affect functionality. Are there any problems building Sage without this patch?\n\nNot building, but it causes the doctests to fail.\n\n> 2. There are plenty of patches to Python in Sage. I don't think that all of them can be replaced by a monkey-patch, so how does it help if this one patch is removed?\n\nIts not *that* much. I only had to adopt two: `re_match_index-issue_27177.patch` (apparently `re` is impossible to monkey-patch) and `descr_ref-issue_25750.patch`.\n\nThe re patch was accepted upstream but unfortuantely not backported to 2.7.\n\nThe other one is currently in an upstream PR and seems likely to be accepted.\n\nSo after that one is accepted, only one patch is needed. I think just because 0 patches can't be archived doesn't mean the amount shouldn't be minimized.",
    "created_at": "2018-05-09T12:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352464",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:4 jdemeyer]:
> Two general comments:
> 
> 1. This patch fixes a *warning*, it should not affect functionality. Are there any problems building Sage without this patch?

Not building, but it causes the doctests to fail.

> 2. There are plenty of patches to Python in Sage. I don't think that all of them can be replaced by a monkey-patch, so how does it help if this one patch is removed?

Its not *that* much. I only had to adopt two: `re_match_index-issue_27177.patch` (apparently `re` is impossible to monkey-patch) and `descr_ref-issue_25750.patch`.

The re patch was accepted upstream but unfortuantely not backported to 2.7.

The other one is currently in an upstream PR and seems likely to be accepted.

So after that one is accepted, only one patch is needed. I think just because 0 patches can't be archived doesn't mean the amount shouldn't be minimized.



---

archive/issue_comments_352465.json:
```json
{
    "body": "Replying to [comment:7 gh-timokau]:\n> it causes the doctests to fail.\n\nCan you show the test failures?",
    "created_at": "2018-05-09T14:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352465",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 gh-timokau]:
> it causes the doctests to fail.

Can you show the test failures?



---

archive/issue_comments_352466.json:
```json
{
    "body": "Surprisingly not all that many, just 3 tests in `cython.py`:\n\nhttps://gist.github.com/timokau/569928555dcec4868d7411c0ca6beb51",
    "created_at": "2018-05-09T21:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352466",
    "user": "https://github.com/timokau"
}
```

Surprisingly not all that many, just 3 tests in `cython.py`:

https://gist.github.com/timokau/569928555dcec4868d7411c0ca6beb51



---

archive/issue_comments_352467.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-10T11:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352467",
    "user": "https://github.com/timokau"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_352468.json:
```json
{
    "body": "To be honest, I'm not too happy with this branch. The Python patch that you want to remove fixes an obvious bug. The way I see it, you're proposing that Sage **adds** a Python bug. I don't think that Sage should suffer because upstream Python ignores a bug report.\n\nOf course, I'll admit that I'm very biased: I'm not packaging Sage for a distro, so I'm in a very different situation than you are.",
    "created_at": "2018-05-11T21:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352468",
    "user": "https://github.com/jdemeyer"
}
```

To be honest, I'm not too happy with this branch. The Python patch that you want to remove fixes an obvious bug. The way I see it, you're proposing that Sage **adds** a Python bug. I don't think that Sage should suffer because upstream Python ignores a bug report.

Of course, I'll admit that I'm very biased: I'm not packaging Sage for a distro, so I'm in a very different situation than you are.



---

archive/issue_comments_352469.json:
```json
{
    "body": "I get where you're coming from. Its a matter of priorities: every patch to sages dependencies makes packaging sage a bit more painful. In my mind reducing that hurdle is more valuable than the \"purity\" gained by patching python instead. If upstream doesn't recognize the bug, I think its best to work around it if possible.\n\nIts not *that* important to me anymore: I already have a working patch for sage that probably won't be too hard to maintain. But it is one more annoyance if somebody wants to create a sage package for another distro.",
    "created_at": "2018-05-12T14:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352469",
    "user": "https://github.com/timokau"
}
```

I get where you're coming from. Its a matter of priorities: every patch to sages dependencies makes packaging sage a bit more painful. In my mind reducing that hurdle is more valuable than the "purity" gained by patching python instead. If upstream doesn't recognize the bug, I think its best to work around it if possible.

Its not *that* important to me anymore: I already have a working patch for sage that probably won't be too hard to maintain. But it is one more annoyance if somebody wants to create a sage package for another distro.



---

archive/issue_comments_352470.json:
```json
{
    "body": "Replying to [comment:12 gh-timokau]:\n> If upstream doesn't recognize the bug, I think its best to work around it if possible.\n\nThis is the part that I disagree most with. In my view, it's Python who is at fault here, not Sage.\n\nMaybe I should just open a real pull request for the upstream Python issue?",
    "created_at": "2018-05-12T14:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352470",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:12 gh-timokau]:
> If upstream doesn't recognize the bug, I think its best to work around it if possible.

This is the part that I disagree most with. In my view, it's Python who is at fault here, not Sage.

Maybe I should just open a real pull request for the upstream Python issue?



---

archive/issue_comments_352471.json:
```json
{
    "body": "The patch produced here has a runtime effect: Any sage process will import distutils. It doesn't do that now.\n\nAnother, reduced, effect: presently, with the hard patch included, the \"sage\" python will have this fixed. After this fix, it will only have it fixed if it imports sage.all (which probably not all scripts in the sage distributions do).\n\nSo it looks like a proper monkeypatch fix would find a hook somewhere to execute the patch upon importing distutils. Another option would be to instead import some module distutils-fixed or so (together with distutils) to make the fix. That would basically amount to manually providing the relevant hook. That's probably rather invasive to maintain.\n\nI think the most important part is that sage can run as much as possible on vanilla python, so that we allow progress towards integrating sage as normal software, rather than having it live in its own little world. Given that the problem here seems to be a warning perhaps we don't need to insist on fixing it.",
    "created_at": "2018-05-12T19:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352471",
    "user": "https://github.com/nbruin"
}
```

The patch produced here has a runtime effect: Any sage process will import distutils. It doesn't do that now.

Another, reduced, effect: presently, with the hard patch included, the "sage" python will have this fixed. After this fix, it will only have it fixed if it imports sage.all (which probably not all scripts in the sage distributions do).

So it looks like a proper monkeypatch fix would find a hook somewhere to execute the patch upon importing distutils. Another option would be to instead import some module distutils-fixed or so (together with distutils) to make the fix. That would basically amount to manually providing the relevant hook. That's probably rather invasive to maintain.

I think the most important part is that sage can run as much as possible on vanilla python, so that we allow progress towards integrating sage as normal software, rather than having it live in its own little world. Given that the problem here seems to be a warning perhaps we don't need to insist on fixing it.



---

archive/issue_comments_352472.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> In my view, it's Python who is at fault here, not Sage.\n\nDefinitely pythons fault. But what does it practically matter who is at fault? If python does not fix it, sage users (or packagers) are the ones who have to deal with it.\n\n> Maybe I should just open a real pull request for the upstream Python issue?\n> Replying to [comment:12 gh-timokau]:\n> > If upstream doesn't recognize the bug, I think its best to work around it if possible.\n\nThis is the part that I disagree most with. bug already something like a pull request that was effectively rejected? I'm not very familiar with the contribution process of python.\nIsn't the python \n\n\nReplying to [comment:14 nbruin]:\n> The patch produced here has a runtime effect: Any sage process will import distutils. It doesn't do that now.\n\nDoes that make any practical difference? Distutils will always be there anyways and while I haven't run any benchmarks, I can't imagine that it significantly impacts sages startup time.\n\n> Another, reduced, effect: presently, with the hard patch included, the \"sage\" python will have this fixed. After this fix, it will only have it fixed if it imports sage.all (which probably not all scripts in the sage distributions do).\n\nWell its just a warning after all, so practically it mostly matters to fix the doctests.\n\n> So it looks like a proper monkeypatch fix would find a hook somewhere to execute the patch upon importing distutils. Another option would be to instead import some module distutils-fixed or so (together with distutils) to make the fix. That would basically amount to manually providing the relevant hook. That's probably rather invasive to maintain.\n\nThat honestly exceeds my pthon knowledge.\n\n> I think the most important part is that sage can run as much as possible on vanilla python, so that we allow progress towards integrating sage as normal software, rather than having it live in its own little world.\n\nExactly my point.\n\n> Given that the problem here seems to be a warning perhaps we don't need to insist on fixing it.\n\nWe could instead just drop the patch entirely and fix the few failing doctests.\n\nI think its very valuable to have the doctests pass. Sages doctests may be a bit brittle, but very valuable\nnonetheless.",
    "created_at": "2018-05-12T21:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352472",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:13 jdemeyer]:
> In my view, it's Python who is at fault here, not Sage.

Definitely pythons fault. But what does it practically matter who is at fault? If python does not fix it, sage users (or packagers) are the ones who have to deal with it.

> Maybe I should just open a real pull request for the upstream Python issue?
> Replying to [comment:12 gh-timokau]:
> > If upstream doesn't recognize the bug, I think its best to work around it if possible.

This is the part that I disagree most with. bug already something like a pull request that was effectively rejected? I'm not very familiar with the contribution process of python.
Isn't the python 


Replying to [comment:14 nbruin]:
> The patch produced here has a runtime effect: Any sage process will import distutils. It doesn't do that now.

Does that make any practical difference? Distutils will always be there anyways and while I haven't run any benchmarks, I can't imagine that it significantly impacts sages startup time.

> Another, reduced, effect: presently, with the hard patch included, the "sage" python will have this fixed. After this fix, it will only have it fixed if it imports sage.all (which probably not all scripts in the sage distributions do).

Well its just a warning after all, so practically it mostly matters to fix the doctests.

> So it looks like a proper monkeypatch fix would find a hook somewhere to execute the patch upon importing distutils. Another option would be to instead import some module distutils-fixed or so (together with distutils) to make the fix. That would basically amount to manually providing the relevant hook. That's probably rather invasive to maintain.

That honestly exceeds my pthon knowledge.

> I think the most important part is that sage can run as much as possible on vanilla python, so that we allow progress towards integrating sage as normal software, rather than having it live in its own little world.

Exactly my point.

> Given that the problem here seems to be a warning perhaps we don't need to insist on fixing it.

We could instead just drop the patch entirely and fix the few failing doctests.

I think its very valuable to have the doctests pass. Sages doctests may be a bit brittle, but very valuable
nonetheless.



---

archive/issue_comments_352473.json:
```json
{
    "body": "Has the particular patch that you suggest as monkey-patch (but perhaps only for C++ extensions) been proposed as pull request? As far as I can tell not.",
    "created_at": "2018-05-13T09:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352473",
    "user": "https://github.com/jdemeyer"
}
```

Has the particular patch that you suggest as monkey-patch (but perhaps only for C++ extensions) been proposed as pull request? As far as I can tell not.



---

archive/issue_comments_352474.json:
```json
{
    "body": "Replying to [comment:15 gh-timokau]:\n> Definitely pythons fault. But what does it practically matter who is at fault? If python does not fix it, sage users (or packagers) are the ones who have to deal with it.\n\nPackagers could just package the Python patch too.",
    "created_at": "2018-05-13T09:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352474",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 gh-timokau]:
> Definitely pythons fault. But what does it practically matter who is at fault? If python does not fix it, sage users (or packagers) are the ones who have to deal with it.

Packagers could just package the Python patch too.



---

archive/issue_comments_352475.json:
```json
{
    "body": "Replying to [comment:16 jdemeyer]:\n> Has the particular patch that you suggest as monkey-patch been proposed as pull request? As far as I can tell not.\n\nIsn't the python bug linked the equivalent of a pull request? As I said, not familiar with the process there. The best outcome would be if upstream just accepted the patch of course.\n\n> Packagers could just package the Python patch too.\n\nYeah thats what I meant with packagers have to deal with it. Every patch adds friction while packaging.",
    "created_at": "2018-05-13T09:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352475",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:16 jdemeyer]:
> Has the particular patch that you suggest as monkey-patch been proposed as pull request? As far as I can tell not.

Isn't the python bug linked the equivalent of a pull request? As I said, not familiar with the process there. The best outcome would be if upstream just accepted the patch of course.

> Packagers could just package the Python patch too.

Yeah thats what I meant with packagers have to deal with it. Every patch adds friction while packaging.



---

archive/issue_comments_352476.json:
```json
{
    "body": "Replying to [comment:18 gh-timokau]:\n> Isn't the python bug linked the equivalent of a pull request?\n\nThe patch sent upstream is the same patch as in Sage, but very different from what you are proposing as monkey-patch here. So my proposal is: change the monkey-patch to a real patch, make sure that it takes effect only for non-C code and then put that in a pull request.",
    "created_at": "2018-05-14T05:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352476",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:18 gh-timokau]:
> Isn't the python bug linked the equivalent of a pull request?

The patch sent upstream is the same patch as in Sage, but very different from what you are proposing as monkey-patch here. So my proposal is: change the monkey-patch to a real patch, make sure that it takes effect only for non-C code and then put that in a pull request.



---

archive/issue_comments_352477.json:
```json
{
    "body": "Replying to [comment:19 jdemeyer]:\n> So my proposal is: change the monkey-patch to a real patch, make sure that it takes effect only for non-C code and then put that in a pull request.\n\nWhy should that have any better chances than the current one? In my view the one currently proposed upstream is \"cleaner\" as a hard-patch, because it doesn't add the flag to begin with. The monkey patch is more of a band-aid.",
    "created_at": "2018-05-14T09:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352477",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:19 jdemeyer]:
> So my proposal is: change the monkey-patch to a real patch, make sure that it takes effect only for non-C code and then put that in a pull request.

Why should that have any better chances than the current one? In my view the one currently proposed upstream is "cleaner" as a hard-patch, because it doesn't add the flag to begin with. The monkey patch is more of a band-aid.



---

archive/issue_comments_352478.json:
```json
{
    "body": "Replying to [comment:20 gh-timokau]:\n> Why should that have any better chances than the current one? In my view the one currently proposed upstream is \"cleaner\" as a hard-patch, because it doesn't add the flag to begin with.\n\nOne could certainly argue that it's a feature to add that flag for C code. But given how distutils almost makes no difference between C and C++ code, I just realized that it's not really possible to add that flag just for C code.",
    "created_at": "2018-05-14T09:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352478",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:20 gh-timokau]:
> Why should that have any better chances than the current one? In my view the one currently proposed upstream is "cleaner" as a hard-patch, because it doesn't add the flag to begin with.

One could certainly argue that it's a feature to add that flag for C code. But given how distutils almost makes no difference between C and C++ code, I just realized that it's not really possible to add that flag just for C code.



---

archive/issue_comments_352479.json:
```json
{
    "body": "Still, it makes sense to compile Python itself with `-Wstrict-prototypes` but not extension modules.",
    "created_at": "2018-05-14T09:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352479",
    "user": "https://github.com/jdemeyer"
}
```

Still, it makes sense to compile Python itself with `-Wstrict-prototypes` but not extension modules.



---

archive/issue_comments_352480.json:
```json
{
    "body": "That seems to be done in the linked issues:\n\nhttps://bugs.python.org/issue1222585\nhttps://bugs.python.org/issue9031\n\nHowever since they are \"adding\" support for C++ (as opposed to \"fixing\" broken C++ support), a 2.7 backport seems unlikely.",
    "created_at": "2018-05-14T10:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352480",
    "user": "https://github.com/timokau"
}
```

That seems to be done in the linked issues:

https://bugs.python.org/issue1222585
https://bugs.python.org/issue9031

However since they are "adding" support for C++ (as opposed to "fixing" broken C++ support), a 2.7 backport seems unlikely.



---

archive/issue_comments_352481.json:
```json
{
    "body": "Upstream CPython has accepted the patch which was originally in Sage.",
    "created_at": "2018-06-04T12:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352481",
    "user": "https://github.com/jdemeyer"
}
```

Upstream CPython has accepted the patch which was originally in Sage.



---

archive/issue_comments_352482.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2018-06-04T12:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352482",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_023374.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2018-06-04T12:50:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25079#event-23374"
}
```



---

archive/issue_comments_352483.json:
```json
{
    "body": "For reference: https://github.com/python/cpython/pull/6791\n\nThats great, thanks! Does that also include a 2.7 backport? It looks like the PR only targets master and backporting isn't mentioned.",
    "created_at": "2018-06-04T15:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352483",
    "user": "https://github.com/timokau"
}
```

For reference: https://github.com/python/cpython/pull/6791

Thats great, thanks! Does that also include a 2.7 backport? It looks like the PR only targets master and backporting isn't mentioned.



---

archive/issue_comments_352484.json:
```json
{
    "body": "Upstream only applied the patch to 3.6 so the motivation for this issue is still valid.",
    "created_at": "2018-06-06T11:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352484",
    "user": "https://github.com/timokau"
}
```

Upstream only applied the patch to 3.6 so the motivation for this issue is still valid.



---

archive/issue_comments_352485.json:
```json
{
    "body": "Resolution changed from invalid to ",
    "created_at": "2019-07-02T21:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352485",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from invalid to 



---

archive/issue_comments_352486.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2019-07-02T21:00:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352486",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_023375.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2019-07-02T21:00:32Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25079#event-23375"
}
```



---

archive/issue_comments_352487.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352487",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_352488.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352488",
    "user": "https://github.com/mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_352489.json:
```json
{
    "body": "Setting milestone to 9.1.1 assuming this ticket is only about Python 2.\n\nIf not please revert.",
    "created_at": "2020-09-16T18:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352489",
    "user": "https://github.com/slel"
}
```

Setting milestone to 9.1.1 assuming this ticket is only about Python 2.

If not please revert.



---

archive/issue_comments_352490.json:
```json
{
    "body": "can this now be closed as invalid ?",
    "created_at": "2022-05-19T12:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352490",
    "user": "https://github.com/fchapoton"
}
```

can this now be closed as invalid ?



---

archive/issue_comments_352491.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-19T12:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352491",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_352492.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2022-05-19T15:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352492",
    "user": "https://github.com/slel"
}
```

Resolution: wontfix



---

archive/issue_events_023376.json:
```json
{
    "actor": "@slel",
    "created_at": "2022-05-19T15:37:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25079#event-23376"
}
```



---

archive/issue_comments_352493.json:
```json
{
    "body": "It can.",
    "created_at": "2022-05-19T15:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25079#issuecomment-352493",
    "user": "https://github.com/slel"
}
```

It can.
