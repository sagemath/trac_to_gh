# Issue 16376: fix content of polynomials

archive/issues_016376.json:
```json
{
    "body": "CC:  mkosters davidloeffler\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16613\n\n",
    "created_at": "2014-07-04T06:33:18Z",
    "labels": [
        "commutative algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "fix content of polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16376",
    "user": "vdelecroix"
}
```
CC:  mkosters davidloeffler



Issue created by migration from https://trac.sagemath.org/ticket/16613





---

archive/issue_comments_214982.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2016-03-02T17:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214982",
    "user": "bruno"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_214983.json:
```json
{
    "body": "The content of a polynomial is sometimes defined as the gcd of its coefficients, and sometimes as the ideal generated by the coefficients. In SageMath, we have inconsistencies between polynomial rings:\n\n* For Flint, NTL, p-adics and multivariate polynomial rings, `content` returns the gcd of the coefficients.\n\n* The generic implementation (for the class `rings.polynomial.polynomial_element.Polynomial`) returns an ideal. This is means that for polynomials over *weird* rings, and for all sparsely represented univariate polynomials, `content` returns an ideal.\n\n**I propose to make all the implementations return a element of the base ring rather than an ideal.**\n\nRationale: \n\n* This means changing only one method.\n* This is consistent with [MuPAD](http://fr.mathworks.com/help/symbolic/mupad_ref/content.html), [Maple](http://www.maplesoft.com/support/help/Maple/view.aspx?path=content), [Mathematica](http://reference.wolfram.com/language/ref/FactorTermsList.html) (though the name of the function is different) and [Magma](http://magma.maths.usyd.edu.au/magma/handbook/text/214#1841) (also for the [multivariate case](http://magma.maths.usyd.edu.au/magma/handbook/text/227#2005))\n* This is the definition taken for instance by von zur Gathen and Gerhard in *Modern Computer Algebra* or Cohen in *A course in Computational Number Theory*.\n\nP.S.: I cc the author and reviewer of #12218 in which the generic `content` was implemented.",
    "created_at": "2016-03-02T17:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214983",
    "user": "bruno"
}
```

The content of a polynomial is sometimes defined as the gcd of its coefficients, and sometimes as the ideal generated by the coefficients. In SageMath, we have inconsistencies between polynomial rings:

* For Flint, NTL, p-adics and multivariate polynomial rings, `content` returns the gcd of the coefficients.

* The generic implementation (for the class `rings.polynomial.polynomial_element.Polynomial`) returns an ideal. This is means that for polynomials over *weird* rings, and for all sparsely represented univariate polynomials, `content` returns an ideal.

**I propose to make all the implementations return a element of the base ring rather than an ideal.**

Rationale: 

* This means changing only one method.
* This is consistent with [MuPAD](http://fr.mathworks.com/help/symbolic/mupad_ref/content.html), [Maple](http://www.maplesoft.com/support/help/Maple/view.aspx?path=content), [Mathematica](http://reference.wolfram.com/language/ref/FactorTermsList.html) (though the name of the function is different) and [Magma](http://magma.maths.usyd.edu.au/magma/handbook/text/214#1841) (also for the [multivariate case](http://magma.maths.usyd.edu.au/magma/handbook/text/227#2005))
* This is the definition taken for instance by von zur Gathen and Gerhard in *Modern Computer Algebra* or Cohen in *A course in Computational Number Theory*.

P.S.: I cc the author and reviewer of #12218 in which the generic `content` was implemented.



---

archive/issue_comments_214984.json:
```json
{
    "body": "Addendum: One could also let the possibility of having the ideal, with one of the following two propositions. I am not sure this is useful.\n\n* Add a keyword `ideal` so that an ideal is returned if `ideal` is set to `True` (defaut `False`).\n* Create a new method `content_ideal` or `ideal_content` for today's behavior of the generic implementation.",
    "created_at": "2016-03-02T17:41:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214984",
    "user": "bruno"
}
```

Addendum: One could also let the possibility of having the ideal, with one of the following two propositions. I am not sure this is useful.

* Add a keyword `ideal` so that an ideal is returned if `ideal` is set to `True` (defaut `False`).
* Create a new method `content_ideal` or `ideal_content` for today's behavior of the generic implementation.



---

archive/issue_comments_214985.json:
```json
{
    "body": "I'm okay with having a method `content_ideal` for the generic behavior. But what is supposed to be returned by `content` when the content ideal is not principal? This is certainly likely to happen if the base ring is the ring of integers in a number field. Perhaps it is best if `content` is only implemented in those cases where it has a sensible definition at the level of elements.",
    "created_at": "2016-04-09T04:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214985",
    "user": "kedlaya"
}
```

I'm okay with having a method `content_ideal` for the generic behavior. But what is supposed to be returned by `content` when the content ideal is not principal? This is certainly likely to happen if the base ring is the ring of integers in a number field. Perhaps it is best if `content` is only implemented in those cases where it has a sensible definition at the level of elements.



---

archive/issue_comments_214986.json:
```json
{
    "body": "Replying to [comment:4 kedlaya]:\n> I'm okay with having a method `content_ideal` for the generic behavior. But what is supposed to be returned by `content` when the content ideal is not principal? This is certainly likely to happen if the base ring is the ring of integers in a number field. Perhaps it is best if `content` is only implemented in those cases where it has a sensible definition at the level of elements.\n\nOf course, this is a difficulty... Well, I propose then to implement `content` for polynomials over principal ideal domains (so that it returns a element of the domain, not an ideal), and `content_ideal` more generally. And of course to add a deprecation warning for `content` over non principal ideal domains. We may also add a warning (no deprecation) for the new behavior of `content` in the generic implementation.\n\nI'll work on a proposal and let you tell me what you think about it.",
    "created_at": "2016-04-11T15:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214986",
    "user": "bruno"
}
```

Replying to [comment:4 kedlaya]:
> I'm okay with having a method `content_ideal` for the generic behavior. But what is supposed to be returned by `content` when the content ideal is not principal? This is certainly likely to happen if the base ring is the ring of integers in a number field. Perhaps it is best if `content` is only implemented in those cases where it has a sensible definition at the level of elements.

Of course, this is a difficulty... Well, I propose then to implement `content` for polynomials over principal ideal domains (so that it returns a element of the domain, not an ideal), and `content_ideal` more generally. And of course to add a deprecation warning for `content` over non principal ideal domains. We may also add a warning (no deprecation) for the new behavior of `content` in the generic implementation.

I'll work on a proposal and let you tell me what you think about it.



---

archive/issue_comments_214987.json:
```json
{
    "body": "I am trying to provide some code for this. I'd like opinions on two points:\n\n1. To avoid future inconsistencies, I plan to implement not only `content` and `content_ideal`, but also the related `primitive_part` and `is_primitive` for all polynomial rings with consistent semantics. Do you think it is appropriate to do so in this ticket, or do you think that it's better to stick with `content` and `content_ideal` only?\n\n2. What should it be the semantic for fields? \n\n------\n#### Remarks for the semantics for fields:\n\nCurrently, there is a method `is_primitive` which uses three distinct (and documented!) semantics:\n* An irreducible polynomial of degree *m* over **F**<sub>p</sub> is primitive if its roots generate **F**<sub>p^m</sub>;\n* A polynomial over a ring is primitive if its coefficients generate the unit ideal;\n* Primitivity is undefined for polynomials over an infinite field, that is an exception is raised.\n\nI guess that there should not be any opposition for `content_ideal` to return the unit ideal. For `content`, I see three possibilities (there may be more):\n* Raise an exception;\n* Return `1` (or more precisely `self._parent.one()`);\n* Return `gcd(self.coefficients())` (knowing that `gcd(2/3,4/5)=2/15` with the current semantics for `gcd`.\nAnd I would say that in all three cases, `primitive_part` should return `self` divided by its content, using for content the same semantic as above. Finally, the case of `is_primitive` is complicated because of the semantic for finite fields. One possibility could be to find another name for this semantic for finite fields but 1. I guess that \"primitive\" is really the word used in mathematics for this property, and 2. this may break some existing code (and given the current discussions on sage-devel, I doubt the community would favor this!).\n\nP.S.: I *really* would like that we reach some consensus on the semantics before including any code in order to limit as much as possible future backward incompatible changes!",
    "created_at": "2016-04-13T13:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214987",
    "user": "bruno"
}
```

I am trying to provide some code for this. I'd like opinions on two points:

1. To avoid future inconsistencies, I plan to implement not only `content` and `content_ideal`, but also the related `primitive_part` and `is_primitive` for all polynomial rings with consistent semantics. Do you think it is appropriate to do so in this ticket, or do you think that it's better to stick with `content` and `content_ideal` only?

2. What should it be the semantic for fields? 

------
#### Remarks for the semantics for fields:

Currently, there is a method `is_primitive` which uses three distinct (and documented!) semantics:
* An irreducible polynomial of degree *m* over **F**<sub>p</sub> is primitive if its roots generate **F**<sub>p^m</sub>;
* A polynomial over a ring is primitive if its coefficients generate the unit ideal;
* Primitivity is undefined for polynomials over an infinite field, that is an exception is raised.

I guess that there should not be any opposition for `content_ideal` to return the unit ideal. For `content`, I see three possibilities (there may be more):
* Raise an exception;
* Return `1` (or more precisely `self._parent.one()`);
* Return `gcd(self.coefficients())` (knowing that `gcd(2/3,4/5)=2/15` with the current semantics for `gcd`.
And I would say that in all three cases, `primitive_part` should return `self` divided by its content, using for content the same semantic as above. Finally, the case of `is_primitive` is complicated because of the semantic for finite fields. One possibility could be to find another name for this semantic for finite fields but 1. I guess that "primitive" is really the word used in mathematics for this property, and 2. this may break some existing code (and given the current discussions on sage-devel, I doubt the community would favor this!).

P.S.: I *really* would like that we reach some consensus on the semantics before including any code in order to limit as much as possible future backward incompatible changes!



---

archive/issue_comments_214988.json:
```json
{
    "body": "It generally is best for the development workflow if individual tickets are as limited as possible. So I would vote in favor of creating a second ticket to deal with `is_primitive` and `primitive_part` after the status of `content` is resolved.\n\nRegarding `primitive`, both uses seem to be quite entrenched in the mathematical literature, and so I think we are obliged to maintain the dichotomy.",
    "created_at": "2016-04-14T02:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214988",
    "user": "kedlaya"
}
```

It generally is best for the development workflow if individual tickets are as limited as possible. So I would vote in favor of creating a second ticket to deal with `is_primitive` and `primitive_part` after the status of `content` is resolved.

Regarding `primitive`, both uses seem to be quite entrenched in the mathematical literature, and so I think we are obliged to maintain the dichotomy.



---

archive/issue_comments_214989.json:
```json
{
    "body": "Changing keywords from \"\" to \"polynomial, content\".",
    "created_at": "2016-05-20T13:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214989",
    "user": "bruno"
}
```

Changing keywords from "" to "polynomial, content".



---

archive/issue_comments_214990.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-05-20T13:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214990",
    "user": "bruno"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_214991.json:
```json
{
    "body": "Based on answers on this ticket and on [sage-devel](https://groups.google.com/forum/#!topic/sage-devel/DP_R3rl0vH0), I've implemented the solution with two methods `content` and `content_ideal`. Right now, there is now warning nor deprecation. If necessary, I can add a warning for the generic method `content` as follows:\n\n\n```python\nfrom sage.warnings import warn\nwarn(\"This method now returns the gcd of the coefficients of the input polynomial. Use content_ideal()` to get the ideal generated by the coefficients.\")\n```\n",
    "created_at": "2016-05-20T13:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214991",
    "user": "bruno"
}
```

Based on answers on this ticket and on [sage-devel](https://groups.google.com/forum/#!topic/sage-devel/DP_R3rl0vH0), I've implemented the solution with two methods `content` and `content_ideal`. Right now, there is now warning nor deprecation. If necessary, I can add a warning for the generic method `content` as follows:


```python
from sage.warnings import warn
warn("This method now returns the gcd of the coefficients of the input polynomial. Use content_ideal()` to get the ideal generated by the coefficients.")
```




---

archive/issue_comments_214992.json:
```json
{
    "body": "The changes look fine to me.\nIt is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`\n\nWhat do you think?",
    "created_at": "2016-12-16T05:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214992",
    "user": "saraedum"
}
```

The changes look fine to me.
It is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`

What do you think?



---

archive/issue_comments_214993.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-12-16T05:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214993",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_214994.json:
```json
{
    "body": "Replying to [comment:9 saraedum]:\n> The changes look fine to me.\n> It is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`\n\nDo you mean that right now, `content()` should still return an ideal but be deprecated, and that it should only later (in one year from now) return the gcd of the coefficients? What about changing the behavior right now, but with a warning? Another idea (to combine both in some sense) is the following:\n* Make `content()` still return an ideal, with deprecation;\n* Add right now a flag `ideal=True` to the method, so that people can already use the \"new behavior\" in their codes, using `content(ideal=False)`;\n* In one year: remove deprecation and make the default value of `ideal` to `False`, or even remove completely the `ideal=...` parameter, or make it useless. \n\nWhat do you think?",
    "created_at": "2016-12-16T09:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214994",
    "user": "bruno"
}
```

Replying to [comment:9 saraedum]:
> The changes look fine to me.
> It is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`

Do you mean that right now, `content()` should still return an ideal but be deprecated, and that it should only later (in one year from now) return the gcd of the coefficients? What about changing the behavior right now, but with a warning? Another idea (to combine both in some sense) is the following:
* Make `content()` still return an ideal, with deprecation;
* Add right now a flag `ideal=True` to the method, so that people can already use the "new behavior" in their codes, using `content(ideal=False)`;
* In one year: remove deprecation and make the default value of `ideal` to `False`, or even remove completely the `ideal=...` parameter, or make it useless. 

What do you think?



---

archive/issue_comments_214995.json:
```json
{
    "body": "Replying to [comment:11 bruno]:\n> Replying to [comment:9 saraedum]:\n> > The changes look fine to me.\n> > It is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`\n> \n> Do you mean that right now, `content()` should still return an ideal but be deprecated, and that it should only later (in one year from now) return the gcd of the coefficients?\nYes.\n\n> What about changing the behavior right now, but with a warning?\nThat would certainly break existing code. It points you to the place where you have to fix it so it would be fine with me. I am not sure what our policy is here.\n\n> Another idea (to combine both in some sense) is the following:\n> * Make `content()` still return an ideal, with deprecation;\n> * Add right now a flag `ideal=True` to the method, so that people can already use the \"new behavior\" in their codes, using `content(ideal=False)`;\n> * In one year: remove deprecation and make the default value of `ideal` to `False`, or even remove completely the `ideal=...` parameter, or make it useless.\nIf we go for this we should remove that parameter completely after some time. I am also fine with this approach but I find it a bit weird to do deprecation by introducing something deprecated (the `ideal` parameter).\n\n> What do you think?\nI think the first option (do not change `content()` at first but print a warning) is the cleanest option.",
    "created_at": "2016-12-16T14:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214995",
    "user": "saraedum"
}
```

Replying to [comment:11 bruno]:
> Replying to [comment:9 saraedum]:
> > The changes look fine to me.
> > It is my understanding that we should deprecate, i.e., `content()` should say `content() is not going to return an ideal but an element in the future. Use content_ideal() instead.`
> 
> Do you mean that right now, `content()` should still return an ideal but be deprecated, and that it should only later (in one year from now) return the gcd of the coefficients?
Yes.

> What about changing the behavior right now, but with a warning?
That would certainly break existing code. It points you to the place where you have to fix it so it would be fine with me. I am not sure what our policy is here.

> Another idea (to combine both in some sense) is the following:
> * Make `content()` still return an ideal, with deprecation;
> * Add right now a flag `ideal=True` to the method, so that people can already use the "new behavior" in their codes, using `content(ideal=False)`;
> * In one year: remove deprecation and make the default value of `ideal` to `False`, or even remove completely the `ideal=...` parameter, or make it useless.
If we go for this we should remove that parameter completely after some time. I am also fine with this approach but I find it a bit weird to do deprecation by introducing something deprecated (the `ideal` parameter).

> What do you think?
I think the first option (do not change `content()` at first but print a warning) is the cleanest option.



---

archive/issue_comments_214996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-17T08:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_214997.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-17T11:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214997",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_214998.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-01-17T11:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214998",
    "user": "bruno"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_214999.json:
```json
{
    "body": "Ok, I've deprecated `content` when it existed and returned an ideal, and we'll perform the complete switch later on.",
    "created_at": "2017-01-17T11:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-214999",
    "user": "bruno"
}
```

Ok, I've deprecated `content` when it existed and returned an ideal, and we'll perform the complete switch later on.



---

archive/issue_comments_215000.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-02-09T05:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215000",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_215001.json:
```json
{
    "body": "Does `SEEALSO: :meth:content` still make sense?",
    "created_at": "2017-02-09T05:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215001",
    "user": "saraedum"
}
```

Does `SEEALSO: :meth:content` still make sense?



---

archive/issue_comments_215002.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T14:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215002",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215003.json:
```json
{
    "body": "Removed irrelevant SEEALSO.",
    "created_at": "2017-02-09T14:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215003",
    "user": "bruno"
}
```

Removed irrelevant SEEALSO.



---

archive/issue_comments_215004.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-02-09T14:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215004",
    "user": "bruno"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_215005.json:
```json
{
    "body": "My 2 cents: I don't like the deprecation of `content` then only to replace it by something that has different functionality. I am close to considering this a bug, and as such, we do not need to deprecate. So the idea of using a temporary flag, which we then deprecate after we remove the ability to return an ideal from `content`, is the best way forward IMO. It's two steps, but it is the most consistent with Sage's policies.",
    "created_at": "2017-02-09T15:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215005",
    "user": "tscrim"
}
```

My 2 cents: I don't like the deprecation of `content` then only to replace it by something that has different functionality. I am close to considering this a bug, and as such, we do not need to deprecate. So the idea of using a temporary flag, which we then deprecate after we remove the ability to return an ideal from `content`, is the best way forward IMO. It's two steps, but it is the most consistent with Sage's policies.



---

archive/issue_comments_215006.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-27T16:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215006",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215007.json:
```json
{
    "body": "I've merged `develop` (8.0.beta11) into this ticket's branch since it did not apply. \n\nNow I agree with Travis that the deprecation is a bit a pity. It will force users to make two changes instead of one when they need the content (as a value rather than an ideal): Now they write `p.content().gen()`, they need to change to `p.content_ideal().gen()` due to the current deprecation warning, and in some months (years?) they'll finally be able to write `p.content()` to avoid the useless construction of the ideal. I'm strongly in favor of having a way for users to directly use the new semantic. \n\nAs such, I would go for making `content` return a value without any deprecation. If the there's enough time left, this backward incompatible change may occur with the new release 8.0.",
    "created_at": "2017-06-28T09:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215007",
    "user": "bruno"
}
```

I've merged `develop` (8.0.beta11) into this ticket's branch since it did not apply. 

Now I agree with Travis that the deprecation is a bit a pity. It will force users to make two changes instead of one when they need the content (as a value rather than an ideal): Now they write `p.content().gen()`, they need to change to `p.content_ideal().gen()` due to the current deprecation warning, and in some months (years?) they'll finally be able to write `p.content()` to avoid the useless construction of the ideal. I'm strongly in favor of having a way for users to directly use the new semantic. 

As such, I would go for making `content` return a value without any deprecation. If the there's enough time left, this backward incompatible change may occur with the new release 8.0.



---

archive/issue_comments_215008.json:
```json
{
    "body": "does not apply",
    "created_at": "2017-07-17T09:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215008",
    "user": "chapoton"
}
```

does not apply



---

archive/issue_comments_215009.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-07-17T09:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215009",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_215010.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-25T13:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215010",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215011.json:
```json
{
    "body": "Applies again!",
    "created_at": "2017-07-25T13:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215011",
    "user": "bruno"
}
```

Applies again!



---

archive/issue_comments_215012.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-07-25T13:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215012",
    "user": "bruno"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_215013.json:
```json
{
    "body": "failing doctests, see patchbot reports",
    "created_at": "2017-07-25T17:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215013",
    "user": "chapoton"
}
```

failing doctests, see patchbot reports



---

archive/issue_comments_215014.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-25T17:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215014",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215015.json:
```json
{
    "body": "Should be OK now (I'll watch the patchbot logs), I made a mistake during the merge.",
    "created_at": "2017-07-25T17:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215015",
    "user": "bruno"
}
```

Should be OK now (I'll watch the patchbot logs), I made a mistake during the merge.



---

archive/issue_comments_215016.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-27T12:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215016",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215017.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-09-06T17:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215017",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_215018.json:
```json
{
    "body": "The implementation looks good to me.\n\nWhat is the deprecation strategy now? Do we want this to go in and have a followup ticket (to be merged in a year) to have content return an element? If so, there should be such a ticket and a comment in the code.\n\nOr do we want to change this without deprecation? We missed the 8.0 window, so I am slightly in favor of the two step change.",
    "created_at": "2017-09-06T17:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215018",
    "user": "saraedum"
}
```

The implementation looks good to me.

What is the deprecation strategy now? Do we want this to go in and have a followup ticket (to be merged in a year) to have content return an element? If so, there should be such a ticket and a comment in the code.

Or do we want to change this without deprecation? We missed the 8.0 window, so I am slightly in favor of the two step change.



---

archive/issue_comments_215019.json:
```json
{
    "body": "In the docstring of `content_ideal`, it would be nice to include a hint such as:\n\n> When the base ring is a gcd ring, the content as a ring element\n> is the generator of the content ideal: `f.content_ideal().gen()`\n\nwith an example.",
    "created_at": "2017-11-19T16:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215019",
    "user": "slelievre"
}
```

In the docstring of `content_ideal`, it would be nice to include a hint such as:

> When the base ring is a gcd ring, the content as a ring element
> is the generator of the content ideal: `f.content_ideal().gen()`

with an example.



---

archive/issue_comments_215020.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-23T13:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215020",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_215021.json:
```json
{
    "body": "Replying to [comment:30 saraedum]:\n> Or do we want to change this without deprecation? We missed the 8.0 window, so I am slightly in favor of the two step change.\n\nI was in favor of a direct change with the argument of \"the sooner the better\" but the result was endless discussions and the ticket waits for 3 years! So in order for this ridiculously simple issue to be fixed *at some point*, let's say we implement the two phase change.\n\nReplying to [comment:32 slelievre]:\nAgree, done! Note that I put this comment only for univariate polynomial rings since in the multivariate case, a method `content` exists (and is linked).\n\nNow needs review (again!).",
    "created_at": "2017-11-23T13:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215021",
    "user": "bruno"
}
```

Replying to [comment:30 saraedum]:
> Or do we want to change this without deprecation? We missed the 8.0 window, so I am slightly in favor of the two step change.

I was in favor of a direct change with the argument of "the sooner the better" but the result was endless discussions and the ticket waits for 3 years! So in order for this ridiculously simple issue to be fixed *at some point*, let's say we implement the two phase change.

Replying to [comment:32 slelievre]:
Agree, done! Note that I put this comment only for univariate polynomial rings since in the multivariate case, a method `content` exists (and is linked).

Now needs review (again!).



---

archive/issue_comments_215022.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-11-23T13:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215022",
    "user": "bruno"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_215023.json:
```json
{
    "body": "I think we should just change the behavior (hopefully in an early beta) and put a `.. NOTE::` if you do not want to go with the suggestion in comment:19.",
    "created_at": "2017-11-23T22:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215023",
    "user": "tscrim"
}
```

I think we should just change the behavior (hopefully in an early beta) and put a `.. NOTE::` if you do not want to go with the suggestion in comment:19.



---

archive/issue_comments_215024.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-05T23:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215024",
    "user": "saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_215025.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-13T11:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16376",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16376#issuecomment-215025",
    "user": "vbraun"
}
```

Resolution: fixed
