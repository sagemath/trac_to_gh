# Issue 28781: Improve documentation of m4/sage_spkg_configure.m4

Issue created by migration from https://trac.sagemath.org/ticket/29018

Original creator: mkoeppe

Original creation time: 2020-01-15 18:06:32

CC:  dimpase mjo

This ticket improves the documentation of the m4 macros provided by `m4/sage_spkg_configure.m4`.


---

Comment by mkoeppe created at 2020-01-16 01:42:39

See also #26668


---

Comment by mjo created at 2020-01-16 02:33:59

I noticed this too but hadn't gotten around to it. I think now that a few people have a feel for how this works, we should rewrite the comment in sage_spkg_configure.m4. What's there is dubious, for example:


```
#   The macro takes five arguments.  The first, PACKAGE-NAME, is simply the
#   base name of the SPKG.  The first two arguments, both optional,
#   implement two different kinds of checks (the first of which is more
#   common).
```


What first two arguments? Is PACKAGE-NAME included in that?



```
#   The next argument (which is less commonly needed) is an optional list of
```


This "next" depends on me knowing what the first two arguments are that it's talking about, and I don't.



```
# ...  The last argument is again commands that
#   are always run, but after the checks are performed (or if they are not
#   performed):
#
#   - CHECK - this should implement a test for whether the package is already
#   ...
```


Last? Did we get all five? And why does the paragraph about the *last* argument then segue into a bullet list discussing all-but-one of them?

In short, I think we should drop the exposition from the top, and start with the bullet list, from...

The macro takes five arguments:

  * PACKAGE-NAME (required)
    ...
  * CHECK (optional)
    ...
  * REQUIRED-CHECK (optional)
    ...
  * etc.

and then the discussion about those arguments should come after we know what they are. In particular the arguments can then be mentioned by name and position, so the reader knows exactly which argument we're talking about.


---

Comment by mkoeppe created at 2020-02-10 01:49:23

It should be checked whether #28788 added sufficient documentation.


---

Comment by mkoeppe created at 2020-04-14 06:33:01

pushing these forward to 9.2


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
