# Issue 27344: Initializing the components of a tensor field while declaring it

archive/issues_027344.json:
```json
{
    "body": "CC:  tscrim\n\nKeywords: tensor field, manifold\n\nAt the moment, the definition of a tensor field on a differentiable manifold is a 2-step operation. For instance, for a vector field:\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: v = M.vector_field()  # step 1: declaration\nsage: v[:] = -y, x          # step 2: initialization of components\nsage: v.display()\n-y d/dx + x d/dy\n```\n\nWith this ticket, this can be achieved in a single step:\n\n```\nsage: v = M.vector_field(-y, x)\nsage: v.display()\n-y d/dx + x d/dy\n```\n\nMoreover, some flexibility is introduced in passing the components: it can be a list:\n\n```\nsage: M.vector_field([-y, x]).display()\n-y d/dx + x d/dy\n```\n\non more generally any iterable, like a vector of symbolic expressions:\n\n```\nsage: M.vector_field(vector([-y, x])).display()\n-y d/dx + x d/dy\n```\n\nThe components can also be provided in a vector frame distinct from the default one:\n\n```\nsage: f = M.vector_frame('f')\nsage: M.vector_field(y^2, -1, frame=f).display(f)\ny^2 f_0 - f_1\n```\n\nAn alternative is passing a dictionary, the keys of which are the vector frames in which the components are defined:\n\n```\nsage: M.vector_field({f: [y^2, -1]}).display(f)\ny^2 f_0 - f_1\n```\n\nThe dictionary is mandatory if the components are given in various frames at once:\n\n```\nsage: M.vector_field({X.frame(): [-y, x], f: [y^2, -1]}).display(f)\ny^2 f_0 - f_1\n```\n\n\n*Remark:* the possibility of initializing the components while declaring a vector field was introduced on Euclidean spaces in #24623. This ticket extends it to any kind of differentiable manifold and any kind of tensor field.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27581\n\n",
    "created_at": "2019-03-31T14:28:19Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Initializing the components of a tensor field while declaring it",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27344",
    "user": "egourgoulhon"
}
```
CC:  tscrim

Keywords: tensor field, manifold

At the moment, the definition of a tensor field on a differentiable manifold is a 2-step operation. For instance, for a vector field:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: v = M.vector_field()  # step 1: declaration
sage: v[:] = -y, x          # step 2: initialization of components
sage: v.display()
-y d/dx + x d/dy
```

With this ticket, this can be achieved in a single step:

```
sage: v = M.vector_field(-y, x)
sage: v.display()
-y d/dx + x d/dy
```

Moreover, some flexibility is introduced in passing the components: it can be a list:

```
sage: M.vector_field([-y, x]).display()
-y d/dx + x d/dy
```

on more generally any iterable, like a vector of symbolic expressions:

```
sage: M.vector_field(vector([-y, x])).display()
-y d/dx + x d/dy
```

The components can also be provided in a vector frame distinct from the default one:

```
sage: f = M.vector_frame('f')
sage: M.vector_field(y^2, -1, frame=f).display(f)
y^2 f_0 - f_1
```

An alternative is passing a dictionary, the keys of which are the vector frames in which the components are defined:

```
sage: M.vector_field({f: [y^2, -1]}).display(f)
y^2 f_0 - f_1
```

The dictionary is mandatory if the components are given in various frames at once:

```
sage: M.vector_field({X.frame(): [-y, x], f: [y^2, -1]}).display(f)
y^2 f_0 - f_1
```


*Remark:* the possibility of initializing the components while declaring a vector field was introduced on Euclidean spaces in #24623. This ticket extends it to any kind of differentiable manifold and any kind of tensor field.

Issue created by migration from https://trac.sagemath.org/ticket/27581





---

archive/issue_comments_385542.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-03-31T14:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385542",
    "user": "egourgoulhon"
}
```

New commits:



---

archive/issue_comments_385543.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-31T14:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385543",
    "user": "egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_385544.json:
```json
{
    "body": "Have to fix some merge conflict with Sage 8.8.beta0.",
    "created_at": "2019-03-31T14:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385544",
    "user": "egourgoulhon"
}
```

Have to fix some merge conflict with Sage 8.8.beta0.



---

archive/issue_comments_385545.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-31T14:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385545",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_385546.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-31T16:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385546",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_385547.json:
```json
{
    "body": "Merge conflict solved.",
    "created_at": "2019-03-31T16:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385547",
    "user": "egourgoulhon"
}
```

Merge conflict solved.



---

archive/issue_comments_385548.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-03-31T16:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385548",
    "user": "egourgoulhon"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_385549.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-31T22:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385549",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_385550.json:
```json
{
    "body": "LGTM.",
    "created_at": "2019-03-31T22:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385550",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_385551.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2019-04-01T08:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385551",
    "user": "egourgoulhon"
}
```

Thanks for the review!



---

archive/issue_comments_385552.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-02T21:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27344#issuecomment-385552",
    "user": "vbraun"
}
```

Resolution: fixed
