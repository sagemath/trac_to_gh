# Issue 27344: Initializing the components of a tensor field while declaring it

Issue created by migration from https://trac.sagemath.org/ticket/27581

Original creator: egourgoulhon

Original creation time: 2019-03-31 14:28:19

CC:  tscrim

Keywords: tensor field, manifold

At the moment, the definition of a tensor field on a differentiable manifold is a 2-step operation. For instance, for a vector field:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: v = M.vector_field()  # step 1: declaration
sage: v[:] = -y, x          # step 2: initialization of components
sage: v.display()
-y d/dx + x d/dy
```

With this ticket, this can be achieved in a single step:

```
sage: v = M.vector_field(-y, x)
sage: v.display()
-y d/dx + x d/dy
```

Moreover, some flexibility is introduced in passing the components: it can be a list:

```
sage: M.vector_field([-y, x]).display()
-y d/dx + x d/dy
```

on more generally any iterable, like a vector of symbolic expressions:

```
sage: M.vector_field(vector([-y, x])).display()
-y d/dx + x d/dy
```

The components can also be provided in a vector frame distinct from the default one:

```
sage: f = M.vector_frame('f')
sage: M.vector_field(y^2, -1, frame=f).display(f)
y^2 f_0 - f_1
```

An alternative is passing a dictionary, the keys of which are the vector frames in which the components are defined:

```
sage: M.vector_field({f: [y^2, -1]}).display(f)
y^2 f_0 - f_1
```

The dictionary is mandatory if the components are given in various frames at once:

```
sage: M.vector_field({X.frame(): [-y, x], f: [y^2, -1]}).display(f)
y^2 f_0 - f_1
```


_Remark:_ the possibility of initializing the components while declaring a vector field was introduced on Euclidean spaces in #24623. This ticket extends it to any kind of differentiable manifold and any kind of tensor field.


---

Comment by egourgoulhon created at 2019-03-31 14:29:19

New commits:


---

Comment by egourgoulhon created at 2019-03-31 14:29:19

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2019-03-31 14:31:17

Have to fix some merge conflict with Sage 8.8.beta0.


---

Comment by egourgoulhon created at 2019-03-31 14:31:17

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-03-31 16:37:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-03-31 16:39:51

Merge conflict solved.


---

Comment by egourgoulhon created at 2019-03-31 16:39:51

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-03-31 22:29:03

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-03-31 22:29:03

LGTM.


---

Comment by egourgoulhon created at 2019-04-01 08:35:42

Thanks for the review!


---

Comment by vbraun created at 2019-04-02 21:30:03

Resolution: fixed
