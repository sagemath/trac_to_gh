# Issue 12994: Compute q-binomial coefficients more efficiently

Issue created by migration from Trac.

Original creator: arminstraub

Original creation time: 2012-06-26 12:24:33

Assignee: sage-combinat

Currently, q-binomials are calculated as a fraction of products of q-integers.  With the attached patch, q-binomials are computed as a product of cyclotomic polynomials.  This avoids reducing a fraction of polynomials and is significantly faster for larger q-binomial coefficients.

Before:

```
sage: %timeit q_binomial(18,7)
125 loops, best of 3: 1.89 ms per loop
sage: %timeit q_binomial(180,70)
5 loops, best of 3: 1.4 s per loop
```


After:

```
sage: %timeit q_binomial(18,7)
125 loops, best of 3: 2.01 ms per loop
sage: %timeit q_binomial2(180,70)
25 loops, best of 3: 34.7 ms per loop
```



---

Attachment


---

Comment by arminstraub created at 2012-06-26 12:58:01

Changing status from new to needs_review.


---

Comment by jlopez created at 2012-07-03 16:56:22

Nice! Code looks good, all tests pass. I have added a reference for the new method in the documentation, if you agree with my reviewer patch you can give this a positive review.


---

Comment by jlopez created at 2012-07-03 16:56:54

patchbot: apply trac_13166_q_binomials.patch trac_13166.reviewer.patch


---

Attachment

Thank you for adding a reference!

I was trying to understand how docstrings in general are working... based on what I saw in other files, I have slightly modified your documentation (for instance, no double colon after REFERENCES and an underscore when citing the reference).  Please correct me if this is wrong.

Other than this nitpicking, I am happy with your addition.


---

Comment by arminstraub created at 2012-07-05 16:34:32

patchbot: apply trac_13166_q_binomials.patch trac_13166_q_binomials_reference.patch


---

Comment by jlopez created at 2012-07-06 11:31:55

Changing status from needs_review to positive_review.


---

Comment by jlopez created at 2012-07-06 11:31:55

You are correct, I tend to mess up the markup every now and then... ;-)
Code still looks good, test still pass, and patchbot seems happy, so positive review!


---

Comment by jdemeyer created at 2012-07-07 22:31:22

Resolution: fixed
