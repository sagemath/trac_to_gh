# Issue 30159: cygwin-standard: sagelib build fails

archive/issues_030159.json:
```json
{
    "body": "CC:  embray frederichan parisse fbissey jhpalmieri dimpase\n\nhttps://github.com/sagemath/sage/runs/1003662756\n\n```\n  [sagelib-9.2.beta9]   gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.7/build/cythonized/sage/ext/interpreters/wrapper_rr.o -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -lmpfr -lgmp -lpython3.7m -o build/lib.cygwin-3.1.6-x86_64-3.7/sage/ext/interpreters/wrapper_rr.cpython-37m-x86_64-cygwin.dll -lpari\n  [sagelib-9.2.beta9]   g++ -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.7/build/cythonized/sage/symbolic/expression.o -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -lgmp -lpynac -lpython3.7m -o build/lib.cygwin-3.1.6-x86_64-3.7/sage/symbolic/expression.cpython-37m-x86_64-cygwin.dll -lpari\n  [sagelib-9.2.beta9]   error: command 'gcc' failed with exit status 1\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30396\n\n",
    "created_at": "2020-08-19T18:22:08Z",
    "labels": [
        "porting: Cygwin",
        "blocker",
        "bug"
    ],
    "title": "cygwin-standard: sagelib build fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30159",
    "user": "mkoeppe"
}
```
CC:  embray frederichan parisse fbissey jhpalmieri dimpase

https://github.com/sagemath/sage/runs/1003662756

```
  [sagelib-9.2.beta9]   gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.7/build/cythonized/sage/ext/interpreters/wrapper_rr.o -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -lmpfr -lgmp -lpython3.7m -o build/lib.cygwin-3.1.6-x86_64-3.7/sage/ext/interpreters/wrapper_rr.cpython-37m-x86_64-cygwin.dll -lpari
  [sagelib-9.2.beta9]   g++ -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.7/build/cythonized/sage/symbolic/expression.o -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -lgmp -lpynac -lpython3.7m -o build/lib.cygwin-3.1.6-x86_64-3.7/sage/symbolic/expression.cpython-37m-x86_64-cygwin.dll -lpari
  [sagelib-9.2.beta9]   error: command 'gcc' failed with exit status 1
```


Issue created by migration from https://trac.sagemath.org/ticket/30396





---

archive/issue_comments_429712.json:
```json
{
    "body": "Without an error message I wouldn't even know how to begin interpreting this.  Is it something you can reproduce locally?  Did anything change recently in that file?",
    "created_at": "2020-08-31T15:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429712",
    "user": "embray"
}
```

Without an error message I wouldn't even know how to begin interpreting this.  Is it something you can reproduce locally?  Did anything change recently in that file?



---

archive/issue_comments_429713.json:
```json
{
    "body": "That's exactly my problem as well. Very consistently in these builds I get this error but no error message.",
    "created_at": "2020-08-31T15:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429713",
    "user": "mkoeppe"
}
```

That's exactly my problem as well. Very consistently in these builds I get this error but no error message.



---

archive/issue_comments_429714.json:
```json
{
    "body": "Local replication of this failure would already be a step forward. (I don't have a Windows machine.)",
    "created_at": "2020-08-31T15:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429714",
    "user": "mkoeppe"
}
```

Local replication of this failure would already be a step forward. (I don't have a Windows machine.)



---

archive/issue_comments_429715.json:
```json
{
    "body": "Changing priority from blocker to critical.",
    "created_at": "2020-09-08T07:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429715",
    "user": "vbraun"
}
```

Changing priority from blocker to critical.



---

archive/issue_comments_429716.json:
```json
{
    "body": "Realistically that can't be a release blocker then",
    "created_at": "2020-09-08T07:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429716",
    "user": "vbraun"
}
```

Realistically that can't be a release blocker then



---

archive/issue_comments_429717.json:
```json
{
    "body": "I have what appears to be the same error. 9.2.beta12, after distclean.\nLast lines after what appears to be a full compilation of sagelib:\n\n```\n[sagelib-9.2.beta12] error: command 'g++' failed with exit status 1\n[sagelib-9.2.beta12]\n[sagelib-9.2.beta12] real       191m8.476s\n[sagelib-9.2.beta12] user       176m28.216s\n[sagelib-9.2.beta12] sys        5m47.132s\nmake[4]: *** [Makefile:2161: sagelib-no-deps] Error 1\nmake[3]: *** [Makefile:2161: /home/skraeling/sage/local/var/lib/sage/installed/sagelib-9.2.beta12] Error 2\nmake[2]: *** [Makefile:1769: all-build] Error 2\nmake[2]: Leaving directory '/home/skraeling/sage/build/make'\n```\n\nFull log: https://www.dropbox.com/s/jjmgib33r9z0359/install.log?dl=0",
    "created_at": "2020-09-10T14:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429717",
    "user": "@darijgr"
}
```

I have what appears to be the same error. 9.2.beta12, after distclean.
Last lines after what appears to be a full compilation of sagelib:

```
[sagelib-9.2.beta12] error: command 'g++' failed with exit status 1
[sagelib-9.2.beta12]
[sagelib-9.2.beta12] real       191m8.476s
[sagelib-9.2.beta12] user       176m28.216s
[sagelib-9.2.beta12] sys        5m47.132s
make[4]: *** [Makefile:2161: sagelib-no-deps] Error 1
make[3]: *** [Makefile:2161: /home/skraeling/sage/local/var/lib/sage/installed/sagelib-9.2.beta12] Error 2
make[2]: *** [Makefile:1769: all-build] Error 2
make[2]: Leaving directory '/home/skraeling/sage/build/make'
```

Full log: https://www.dropbox.com/s/jjmgib33r9z0359/install.log?dl=0



---

archive/issue_comments_429718.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2020-09-10T14:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429718",
    "user": "@darijgr"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_429719.json:
```json
{
    "body": "Thanks for checking this.\n\nI see this error:\n\n```\n[sagelib-9.2.beta12] gcc -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/misc/sage_ostools.o -L/home/skraeling/sage/local/lib/python3.6/config -L/usr/lib -lpython3.6m -o build/lib.cygwin-3.1.6-x86_64-3.6/sage/misc/sage_ostools.cpython-36m-x86_64-cygwin.dll\n[sagelib-9.2.beta12] /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/misc/sage_ostools.o: in function `__pyx_pf_4sage_4misc_12sage_ostools_5fix_for_ticket_30157':\n[sagelib-9.2.beta12] /home/skraeling/sage/build/pkgs/sagelib/src/build/cythonized/sage/misc/sage_ostools.c:4052: undefined reference to `sqlite3_initialize'\n[sagelib-9.2.beta12] /home/skraeling/sage/build/pkgs/sagelib/src/build/cythonized/sage/misc/sage_ostools.c:4052:(.text+0xe05): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `sqlite3_initialize'\n[sagelib-9.2.beta12] collect2: error: ld returned 1 exit status\n```\n",
    "created_at": "2020-09-10T15:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429719",
    "user": "mkoeppe"
}
```

Thanks for checking this.

I see this error:

```
[sagelib-9.2.beta12] gcc -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/misc/sage_ostools.o -L/home/skraeling/sage/local/lib/python3.6/config -L/usr/lib -lpython3.6m -o build/lib.cygwin-3.1.6-x86_64-3.6/sage/misc/sage_ostools.cpython-36m-x86_64-cygwin.dll
[sagelib-9.2.beta12] /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/misc/sage_ostools.o: in function `__pyx_pf_4sage_4misc_12sage_ostools_5fix_for_ticket_30157':
[sagelib-9.2.beta12] /home/skraeling/sage/build/pkgs/sagelib/src/build/cythonized/sage/misc/sage_ostools.c:4052: undefined reference to `sqlite3_initialize'
[sagelib-9.2.beta12] /home/skraeling/sage/build/pkgs/sagelib/src/build/cythonized/sage/misc/sage_ostools.c:4052:(.text+0xe05): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `sqlite3_initialize'
[sagelib-9.2.beta12] collect2: error: ld returned 1 exit status
```




---

archive/issue_comments_429720.json:
```json
{
    "body": "Could you rerun `make build` one more time after this failure and post the log?\n\nCould you also post your config.log?",
    "created_at": "2020-09-10T15:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429720",
    "user": "mkoeppe"
}
```

Could you rerun `make build` one more time after this failure and post the log?

Could you also post your config.log?



---

archive/issue_comments_429721.json:
```json
{
    "body": "Looks like this is coming from #30157",
    "created_at": "2020-09-10T15:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429721",
    "user": "mkoeppe"
}
```

Looks like this is coming from #30157



---

archive/issue_comments_429722.json:
```json
{
    "body": "Here's a possible fix\n----\nNew commits:",
    "created_at": "2020-09-10T15:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429722",
    "user": "mkoeppe"
}
```

Here's a possible fix
----
New commits:



---

archive/issue_comments_429723.json:
```json
{
    "body": "Sadly, doesn't help.\nhttps://www.dropbox.com/s/z2ayo5teqhfqvoa/install-last.log?dl=0\n\nWhere do I find config.log?",
    "created_at": "2020-09-10T16:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429723",
    "user": "@darijgr"
}
```

Sadly, doesn't help.
https://www.dropbox.com/s/z2ayo5teqhfqvoa/install-last.log?dl=0

Where do I find config.log?



---

archive/issue_comments_429724.json:
```json
{
    "body": "Replying to [comment:12 gh-darijgr]:\n> Where do I find config.log?\n\nRoot of the sage tree",
    "created_at": "2020-09-10T16:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429724",
    "user": "mkoeppe"
}
```

Replying to [comment:12 gh-darijgr]:
> Where do I find config.log?

Root of the sage tree



---

archive/issue_comments_429725.json:
```json
{
    "body": "Interesting. The file is supposedly there but actually isn't. But this reminds me of the fact that I have not used ./configure. Maybe I should try again....",
    "created_at": "2020-09-10T16:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429725",
    "user": "@darijgr"
}
```

Interesting. The file is supposedly there but actually isn't. But this reminds me of the fact that I have not used ./configure. Maybe I should try again....



---

archive/issue_comments_429726.json:
```json
{
    "body": "Replying to [comment:12 gh-darijgr]:\n> Sadly, doesn't help.\n\nIt did, actually, now other errors are preventing the build.\n\n```\n[sagelib-9.2.beta12] g++ -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/libs/giac/giac.o -L/home/skraeling/sage/local/lib/python3.6/config -L/usr/lib -lgmp -lgiac -lpython3.6m -o build/lib.cygwin-3.1.6-x86_64-3.6/sage/libs/giac/giac.cpython-36m-x86_64-cygwin.dll -lpari\n[sagelib-9.2.beta12] /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: /home/skraeling/sage/local/lib/libgiac.a(moyal.o): in function `giac::Airy_Ai(giac::gen const&, giac::context const*)':\n[sagelib-9.2.beta12] /home/skraeling/sage/local/var/tmp/sage/build/giac-1.5.0.87p0/src/src/moyal.cc:243: undefined reference to `gsl_sf_airy_Ai'\n[sagelib-9.2.beta12] /home/skraeling/sage/local/var/tmp/sage/build/giac-1.5.0.87p0/src/src/moyal.cc:243:(.text+0x63b): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `gsl_sf_airy_Ai'\n....\n```\n\n\nLooks like `libgiac` is underlinked",
    "created_at": "2020-09-10T16:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429726",
    "user": "mkoeppe"
}
```

Replying to [comment:12 gh-darijgr]:
> Sadly, doesn't help.

It did, actually, now other errors are preventing the build.

```
[sagelib-9.2.beta12] g++ -shared -Wl,--enable-auto-image-base -L/home/skraeling/sage/local/lib -Wl,-rpath,/home/skraeling/sage/local/lib build/temp.cygwin-3.1.6-x86_64-3.6/build/cythonized/sage/libs/giac/giac.o -L/home/skraeling/sage/local/lib/python3.6/config -L/usr/lib -lgmp -lgiac -lpython3.6m -o build/lib.cygwin-3.1.6-x86_64-3.6/sage/libs/giac/giac.cpython-36m-x86_64-cygwin.dll -lpari
[sagelib-9.2.beta12] /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: /home/skraeling/sage/local/lib/libgiac.a(moyal.o): in function `giac::Airy_Ai(giac::gen const&, giac::context const*)':
[sagelib-9.2.beta12] /home/skraeling/sage/local/var/tmp/sage/build/giac-1.5.0.87p0/src/src/moyal.cc:243: undefined reference to `gsl_sf_airy_Ai'
[sagelib-9.2.beta12] /home/skraeling/sage/local/var/tmp/sage/build/giac-1.5.0.87p0/src/src/moyal.cc:243:(.text+0x63b): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `gsl_sf_airy_Ai'
....
```


Looks like `libgiac` is underlinked



---

archive/issue_comments_429727.json:
```json
{
    "body": "(This comes from #29171)",
    "created_at": "2020-09-10T16:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429727",
    "user": "mkoeppe"
}
```

(This comes from #29171)



---

archive/issue_comments_429728.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T16:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429728",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429729.json:
```json
{
    "body": "Try with this one please",
    "created_at": "2020-09-10T16:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429729",
    "user": "mkoeppe"
}
```

Try with this one please



---

archive/issue_comments_429730.json:
```json
{
    "body": "config.log (just ran ./configure): https://www.dropbox.com/s/lv2r3wq2qz55th3/config.log?dl=0\n----\nNew commits:",
    "created_at": "2020-09-10T16:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429730",
    "user": "@darijgr"
}
```

config.log (just ran ./configure): https://www.dropbox.com/s/lv2r3wq2qz55th3/config.log?dl=0
----
New commits:



---

archive/issue_comments_429731.json:
```json
{
    "body": "New failure, with your new commit: https://www.dropbox.com/s/lv2r3wq2qz55th3/config.log?dl=0",
    "created_at": "2020-09-10T17:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429731",
    "user": "@darijgr"
}
```

New failure, with your new commit: https://www.dropbox.com/s/lv2r3wq2qz55th3/config.log?dl=0



---

archive/issue_comments_429732.json:
```json
{
    "body": "Oops, wrong link.\nhttps://www.dropbox.com/s/1lsao5jh7l8i67y/install3.log?dl=0",
    "created_at": "2020-09-10T17:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429732",
    "user": "@darijgr"
}
```

Oops, wrong link.
https://www.dropbox.com/s/1lsao5jh7l8i67y/install3.log?dl=0



---

archive/issue_comments_429733.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T17:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429733",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429734.json:
```json
{
    "body": "Thanks. Here's the next iteration",
    "created_at": "2020-09-10T17:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429734",
    "user": "mkoeppe"
}
```

Thanks. Here's the next iteration



---

archive/issue_comments_429735.json:
```json
{
    "body": "And more undefined failures...\nhttps://pastebin.com/kGbvs167",
    "created_at": "2020-09-10T18:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429735",
    "user": "@darijgr"
}
```

And more undefined failures...
https://pastebin.com/kGbvs167



---

archive/issue_comments_429736.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T18:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429736",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429737.json:
```json
{
    "body": "Another round...",
    "created_at": "2020-09-10T18:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429737",
    "user": "mkoeppe"
}
```

Another round...



---

archive/issue_comments_429738.json:
```json
{
    "body": "The log keeps getting shorter :)\n\nhttps://pastebin.com/pS1rHw93",
    "created_at": "2020-09-10T18:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429738",
    "user": "@darijgr"
}
```

The log keeps getting shorter :)

https://pastebin.com/pS1rHw93



---

archive/issue_comments_429739.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T19:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429739",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429740.json:
```json
{
    "body": "Standard arguments suggest finite termination of this process...",
    "created_at": "2020-09-10T19:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429740",
    "user": "mkoeppe"
}
```

Standard arguments suggest finite termination of this process...



---

archive/issue_comments_429741.json:
```json
{
    "body": "Shorter again! https://pastebin.com/i8zMiHZ9",
    "created_at": "2020-09-10T20:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429741",
    "user": "@darijgr"
}
```

Shorter again! https://pastebin.com/i8zMiHZ9



---

archive/issue_comments_429742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T20:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429742",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429743.json:
```json
{
    "body": "Getting closer...",
    "created_at": "2020-09-10T20:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429743",
    "user": "mkoeppe"
}
```

Getting closer...



---

archive/issue_comments_429744.json:
```json
{
    "body": "Thank you!!! sagelib has compiled now. Will take some hours until I know if the rest of Sage has compiled, but I don't expect bad surprises at this point.",
    "created_at": "2020-09-10T20:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429744",
    "user": "@darijgr"
}
```

Thank you!!! sagelib has compiled now. Will take some hours until I know if the rest of Sage has compiled, but I don't expect bad surprises at this point.



---

archive/issue_comments_429745.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-10T22:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429745",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_429746.json:
```json
{
    "body": "I am getting the following failure on Ubuntu:\n\n```\n[sagelib-9.2.beta12] g++ -pthread -shared -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib -L. -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib build/temp.linux-x86_64-3.8/build/cythonized/sage/libs/giac/giac.o -L/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -lgiac -lintl -lcurl -lecm -lgsl -lglpk -lmpfi -lmpfr -lntl -lgmp -lm -lopenblas -o build/lib.linux-x86_64-3.8/sage/libs/giac/giac.cpython-38-x86_64-linux-gnu.so -lpari\n[sagelib-9.2.beta12] /usr/bin/ld: cannot find -lintl\n[sagelib-9.2.beta12] collect2: error: ld returned 1 exit status\n[sagelib-9.2.beta12] error: command 'g++' failed with exit status 1\n[sagelib-9.2.beta12] Exception ignored in: <function Pool.__del__ at 0x7f17cc3233a0>\n[sagelib-9.2.beta12] Traceback (most recent call last):\n[sagelib-9.2.beta12]   File \"/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/pool.py\", line 268, in __del__\n[sagelib-9.2.beta12]     self._change_notifier.put(None)\n[sagelib-9.2.beta12]   File \"/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/queues.py\", line 368, in put\n[sagelib-9.2.beta12]     self._writer.send_bytes(obj)\n[sagelib-9.2.beta12]   File \"/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py\", line 200, in send_bytes\n[sagelib-9.2.beta12]     self._send_bytes(m[offset:offset + size])\n[sagelib-9.2.beta12]   File \"/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py\", line 411, in _send_bytes\n[sagelib-9.2.beta12]     self._send(header + buf)\n[sagelib-9.2.beta12]   File \"/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py\", line 368, in _send\n[sagelib-9.2.beta12]     n = write(self._handle, buf)\n[sagelib-9.2.beta12] OSError: [Errno 9] Bad file descriptor\n[sagelib-9.2.beta12] \n[sagelib-9.2.beta12] real\t0m46.175s\n[sagelib-9.2.beta12] user\t0m42.734s\n[sagelib-9.2.beta12] sys\t0m1.811s\nMakefile:2191: recipe for target 'sagelib-no-deps' failed\nmake[4]: *** [sagelib-no-deps] Error 1\nMakefile:2191: recipe for target '/home/uqtscrim/sage-build/local/var/lib/sage/installed/sagelib-9.2.beta12' failed\nmake[3]: *** [/home/uqtscrim/sage-build/local/var/lib/sage/installed/sagelib-9.2.beta12] Error 2\nMakefile:1799: recipe for target 'all-build' failed\nmake[2]: *** [all-build] Error 2\nmake[2]: Leaving directory '/home/uqtscrim/sage-build/build/make'\n```\n",
    "created_at": "2020-09-10T23:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429746",
    "user": "tscrim"
}
```

I am getting the following failure on Ubuntu:

```
[sagelib-9.2.beta12] g++ -pthread -shared -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib -L. -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib -Wl,-rpath-link,/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -Wl,-rpath,/home/uqtscrim/sage-build/local/lib build/temp.linux-x86_64-3.8/build/cythonized/sage/libs/giac/giac.o -L/home/uqtscrim/sage-build/local/lib -L/home/uqtscrim/sage-build/local/lib -lgiac -lintl -lcurl -lecm -lgsl -lglpk -lmpfi -lmpfr -lntl -lgmp -lm -lopenblas -o build/lib.linux-x86_64-3.8/sage/libs/giac/giac.cpython-38-x86_64-linux-gnu.so -lpari
[sagelib-9.2.beta12] /usr/bin/ld: cannot find -lintl
[sagelib-9.2.beta12] collect2: error: ld returned 1 exit status
[sagelib-9.2.beta12] error: command 'g++' failed with exit status 1
[sagelib-9.2.beta12] Exception ignored in: <function Pool.__del__ at 0x7f17cc3233a0>
[sagelib-9.2.beta12] Traceback (most recent call last):
[sagelib-9.2.beta12]   File "/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/pool.py", line 268, in __del__
[sagelib-9.2.beta12]     self._change_notifier.put(None)
[sagelib-9.2.beta12]   File "/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/queues.py", line 368, in put
[sagelib-9.2.beta12]     self._writer.send_bytes(obj)
[sagelib-9.2.beta12]   File "/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py", line 200, in send_bytes
[sagelib-9.2.beta12]     self._send_bytes(m[offset:offset + size])
[sagelib-9.2.beta12]   File "/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py", line 411, in _send_bytes
[sagelib-9.2.beta12]     self._send(header + buf)
[sagelib-9.2.beta12]   File "/home/uqtscrim/sage-build/local/lib/python3.8/multiprocessing/connection.py", line 368, in _send
[sagelib-9.2.beta12]     n = write(self._handle, buf)
[sagelib-9.2.beta12] OSError: [Errno 9] Bad file descriptor
[sagelib-9.2.beta12] 
[sagelib-9.2.beta12] real	0m46.175s
[sagelib-9.2.beta12] user	0m42.734s
[sagelib-9.2.beta12] sys	0m1.811s
Makefile:2191: recipe for target 'sagelib-no-deps' failed
make[4]: *** [sagelib-no-deps] Error 1
Makefile:2191: recipe for target '/home/uqtscrim/sage-build/local/var/lib/sage/installed/sagelib-9.2.beta12' failed
make[3]: *** [/home/uqtscrim/sage-build/local/var/lib/sage/installed/sagelib-9.2.beta12] Error 2
Makefile:1799: recipe for target 'all-build' failed
make[2]: *** [all-build] Error 2
make[2]: Leaving directory '/home/uqtscrim/sage-build/build/make'
```




---

archive/issue_comments_429747.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-11T01:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429747",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_429748.json:
```json
{
    "body": "Something like this was to be expected",
    "created_at": "2020-09-11T01:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429748",
    "user": "mkoeppe"
}
```

Something like this was to be expected



---

archive/issue_comments_429749.json:
```json
{
    "body": "Build complete! Thanks again, Matthias.",
    "created_at": "2020-09-11T09:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429749",
    "user": "@darijgr"
}
```

Build complete! Thanks again, Matthias.



---

archive/issue_comments_429750.json:
```json
{
    "body": "PS. Any idea why it says this\n\n```\n\u2502 SageMath version 9.2.beta12, Release Date: 2020-09-06              \u2502\n\u2502 Using Python 3.6.10. Type \"help()\" for help.                       \u2502\n```\n\nwhen 9.2.beta12 supposedly should be using Python 3.8.5?",
    "created_at": "2020-09-11T09:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429750",
    "user": "@darijgr"
}
```

PS. Any idea why it says this

```
│ SageMath version 9.2.beta12, Release Date: 2020-09-06              │
│ Using Python 3.6.10. Type "help()" for help.                       │
```

when 9.2.beta12 supposedly should be using Python 3.8.5?



---

archive/issue_comments_429751.json:
```json
{
    "body": "Replying to [comment:38 gh-darijgr]:\n> PS. Any idea why it says this\n> {{{\n> \u2502 [SageMath](SageMath) version 9.2.beta12, Release Date: 2020-09-06              \u2502\n> \u2502 Using Python 3.6.10. Type \"help()\" for help.                       \u2502\n> }}}\n> when 9.2.beta12 supposedly should be using Python 3.8.5?\n\nSage will try to use your system Python\nif it is >= 3.6 and < 3.9.\n\nOr it can build its own Python which will be 3.8.5.\n\nTo make sure it builds its own Python\nif you build from scratch:\n\n\n```\n$ make configure\n$ ./configure --with-system-python3=no -q\n$ make -s V=0\n```\n\n\nwhere\n- you can replace `make configure` by `./bootstrap`\n- `-q` is for \"quiet\", drop it for more verbose output\n- `-s V=0\" are for \"silent\" and \"lowest verbosity\",\n  drop them for more verbose output\n\nTo force Sage to rebuild Python and everything that\ndepends on it, after it was built using the ambient\nsystem's Python:\n\n\n```\n$ V=0 sage -f python3\n```\n\n\nwhere again V=0 is for less verbose output,\ndrop it if you like more verbose output.",
    "created_at": "2020-09-11T11:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429751",
    "user": "slelievre"
}
```

Replying to [comment:38 gh-darijgr]:
> PS. Any idea why it says this
> {{{
> │ [SageMath](SageMath) version 9.2.beta12, Release Date: 2020-09-06              │
> │ Using Python 3.6.10. Type "help()" for help.                       │
> }}}
> when 9.2.beta12 supposedly should be using Python 3.8.5?

Sage will try to use your system Python
if it is >= 3.6 and < 3.9.

Or it can build its own Python which will be 3.8.5.

To make sure it builds its own Python
if you build from scratch:


```
$ make configure
$ ./configure --with-system-python3=no -q
$ make -s V=0
```


where
- you can replace `make configure` by `./bootstrap`
- `-q` is for "quiet", drop it for more verbose output
- `-s V=0" are for "silent" and "lowest verbosity",
  drop them for more verbose output

To force Sage to rebuild Python and everything that
depends on it, after it was built using the ambient
system's Python:


```
$ V=0 sage -f python3
```


where again V=0 is for less verbose output,
drop it if you like more verbose output.



---

archive/issue_comments_429752.json:
```json
{
    "body": "See #30546 for picking the most recent system Python\nwhen several versions are available.",
    "created_at": "2020-09-11T11:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429752",
    "user": "slelievre"
}
```

See #30546 for picking the most recent system Python
when several versions are available.



---

archive/issue_comments_429753.json:
```json
{
    "body": "Thank you! I probably won't bother to reinstall Sage right now, but on my next reinstall I'll take this into account. (And probably update cygwin beforehand.)",
    "created_at": "2020-09-11T11:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429753",
    "user": "@darijgr"
}
```

Thank you! I probably won't bother to reinstall Sage right now, but on my next reinstall I'll take this into account. (And probably update cygwin beforehand.)



---

archive/issue_comments_429754.json:
```json
{
    "body": "Attachment [giac-1.5.0.87p1.tar.bz2](tarball://root/attachments/some-uuid/ticket30396/giac-1.5.0.87p1.tar.bz2) by git created at 2020-09-11 17:50:39\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T17:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429754",
    "user": "git"
}
```

Attachment [giac-1.5.0.87p1.tar.bz2](tarball://root/attachments/some-uuid/ticket30396/giac-1.5.0.87p1.tar.bz2) by git created at 2020-09-11 17:50:39

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429755.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T17:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429755",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_429756.json:
```json
{
    "body": "Darij, if you have time, another test with this version would be helpful... (This needs `./configure --enable-download-from-upstream-url`)",
    "created_at": "2020-09-11T17:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429756",
    "user": "mkoeppe"
}
```

Darij, if you have time, another test with this version would be helpful... (This needs `./configure --enable-download-from-upstream-url`)



---

archive/issue_comments_429757.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-11T18:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429757",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_429758.json:
```json
{
    "body": "This errors out again again:\nhttps://www.dropbox.com/s/do329gofsaxxw3w/install6.log?dl=0\nNote that I have not run \"make distclean\" after pulling; I've just done the ./configure you suggested and tried to make build again.",
    "created_at": "2020-09-11T20:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30159#issuecomment-429758",
    "user": "@darijgr"
}
```

This errors out again again:
https://www.dropbox.com/s/do329gofsaxxw3w/install6.log?dl=0
Note that I have not run "make distclean" after pulling; I've just done the ./configure you suggested and tried to make build again.
