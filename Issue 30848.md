# Issue 30848: fix conversion of sign function to fricas

Issue created by migration from https://trac.sagemath.org/ticket/31085

Original creator: chapoton

Original creation time: 2020-12-19 20:13:53

CC:  mantepse

which apparently has no symbolic sign function


---

Comment by chapoton created at 2020-12-19 20:14:25

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-12-19 20:14:25

New commits:


---

Comment by mantepse created at 2020-12-19 20:27:23

I don't quite understand the patch.  If you want a sign function for symbolic expressions in fricas, you'll have to use ` x/abs(x) `, I guess.  But I don't think that fricas would be able to do anything with it.  There is a sign function for integers and integer fractions, but I don't see the point of providing a translation, because it should never show up in a result that fricas provides.


---

Comment by chapoton created at 2020-12-19 20:51:46

I was trying the integral in #11590 with fricas, and it did not work. The existing conversion of the symbolic sign function is "sign", which cannot handle symbolic arguments.

But then apparently, Fricas cannot integrate functions containing abs.


---

Comment by mantepse created at 2020-12-19 20:59:05

Yes, that's correct (as far as I know).

So, do you think it makes sense to convert sign to ```x/abs(x)```?  (I don't)


---

Comment by chapoton created at 2020-12-21 08:42:33

Well, at least by converting to `abs(x)/x` (I prefer this way, and did that), one can go to fricas and back to sage without error. Why do you think that it's not a good idea ?


---

Comment by mantepse created at 2020-12-21 09:14:29

Sorry, I missed that!  Yes, I agree with that!  A doctest might be good, I'll try to think of one.


---

Comment by mantepse created at 2020-12-21 09:15:02

Changing keywords from "" to "FriCAS".


---

Comment by mantepse created at 2020-12-21 18:14:50

Here is a trival test, do you want to add it?

```
sage: fricas(sign(x)).eval(x=-3)
- 1
```


Other than that, it looks good.  There is currently a giac failure, which I cannot say anything about.


---

Comment by git created at 2020-12-21 20:40:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2020-12-21 20:42:14

Voil√† !


---

Comment by mantepse created at 2020-12-21 20:49:09

Changing status from needs_review to positive_review.


---

Comment by mantepse created at 2020-12-21 20:49:09

Great, looks good.  I cannot reproduce the giac failure, I guess it's unrelated.


---

Comment by vbraun created at 2020-12-27 00:22:40

Resolution: fixed
