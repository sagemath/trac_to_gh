# Issue 27672: py3: fix a doctest in binary_form_reduce

Issue created by migration from https://trac.sagemath.org/ticket/27909

Original creator: @mwageringel

Original creation time: 2019-05-31 20:11:40

CC:  bhutz

This ticket fixes a Python 3 doctest failure in `smallest_poly()` in `sage.rings.polynomial.binary_form_reduce`.

In Python 3, the result of the function differs due to tiny floating point inaccuracies. I checked that the value that is minimized inside the function is the same in Python 2 and 3 (up to small tolerance), so apparently the result of the computation is not unique. In order to stay consistent between Python versions, I replaced the doctest by a test that checks the properties of the result instead of the result itself.

What I am not sure about: Does `smallest_poly()` return the polynomial for which `get_bound_poly()` attains its minimum? If so, perhaps this could be clarified in the documentation.


---

Comment by @mwageringel created at 2019-05-31 20:20:18

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2019-05-31 20:20:18

New commits:


---

Comment by git created at 2019-05-31 21:19:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2019-06-01 00:46:50

Changing status from needs_review to positive_review.


---

Comment by bhutz created at 2019-06-01 00:46:50

This looks fine to me. The deletions all seem to be unused items that were missed when the original code was checked in.


---

Comment by vbraun created at 2019-06-05 18:30:51

Resolution: fixed
