# Issue 33072: Many fixes for Sage documentation

Issue created by migration from https://trac.sagemath.org/ticket/33309

Original creator: klee

Original creation time: 2022-02-07 08:32:15

CC:  strogdon â€‹schilly mkoeppe




---

Comment by klee created at 2022-02-07 08:46:14

New commits:


---

Comment by klee created at 2022-02-07 08:53:34

Changing status from new to needs_review.


---

Comment by git created at 2022-02-07 09:20:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-07 12:00:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-07 13:30:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2022-02-07 18:47:38

I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?


---

Comment by jhpalmieri created at 2022-02-07 22:34:20

Typo in src/doc/common/themes/sage/static/sage.css_t:

```diff
-/* this is nice, but it leads to hidden headings when jumping
+/* this is nice, but it it leads to hidden headings when jumping
```



---

Comment by jhpalmieri created at 2022-02-07 23:44:34

With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?


---

Comment by git created at 2022-02-08 00:10:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-08 00:12:46

Replying to [comment:19 jhpalmieri]:
> Typo in src/doc/common/themes/sage/static/sage.css_t:
> {{{
> #!diff
> -/* this is nice, but it leads to hidden headings when jumping
> +/* this is nice, but it it leads to hidden headings when jumping
> }}}

This is a typo in the original `basic.css_t` file. Anyway, fixed here.


---

Comment by klee created at 2022-02-08 00:26:16

Replying to [comment:18 gh-tobiasdiez]:
> I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?

I agree that the sage theme looks old. But perhaps it has merits in that it is almost the basic theme officially provided by Sphinx.

Replacing the same theme with a theme not based on the basic theme would be a work on another level. Currently Sage doc build is entangled with the structure of the basic theme. So definitely it is not to be done here.

Eventually it would be good that we could choose at build time among alternative themes.


---

Comment by klee created at 2022-02-08 00:40:12

Replying to [comment:20 jhpalmieri]:
> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?

This is because Sphinx does not see maths in the page and not include MathJax (to save loading time). My solution was to add `:math:`.`` somewhere in the page. It seem this has to be done for the afflicted pages individually. So this is not to be done here.


---

Comment by git created at 2022-02-08 02:23:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-08 02:27:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-08 09:48:03

Replying to [comment:18 gh-tobiasdiez]:
> What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?

In anticipation of an alternative theme (perhaps based on `furo`) that may replace or live side by side with the current `sage` theme, we can rename the `sage` theme to `sage-classic` theme (since it is customized from the `classic` theme) in this ticket. Then later we may add `sage-furo` theme in another ticket. Okay?


---

Comment by @tobiasdiez created at 2022-02-08 10:16:04

Sounds like a good idea!


---

Comment by git created at 2022-02-08 11:03:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2022-02-09 13:08:39

Codewise this looks good to me. I've also browsed around and couldn't find any issues. However, some of the pages don't work for me since on WSL the symlinks are not resolved by a Windows browser (this is also the case in the develop branch). So it's good if someone else double checks.


---

Comment by jhpalmieri created at 2022-02-09 21:36:25

> remove obsolete python2.inv hyperlinks database

Probably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.

> documentation access from jupyter notebook (this undoes #33206) 

I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)


---

Comment by jhpalmieri created at 2022-02-09 21:38:42

Replying to [comment:34 jhpalmieri]:
> > remove obsolete python2.inv hyperlinks database
> 
> Probably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.

Or we can do it here if you want:

```diff
diff --git a/src/doc/common/update-python-inv.sh b/src/doc/common/update-python-inv.sh
index 537d6f4fb4..5c36cd378c 100755
--- a/src/doc/common/update-python-inv.sh
+++ b/src/doc/common/update-python-inv.sh
@@ -1,5 +1,5 @@
 #!/usr/bin/env bash
-# The files python2.inv and python3.inv contain the database of Sphinx hyperlink targets
+# The file python3.inv contains the database of Sphinx hyperlink targets
 # used by the intersphinx extension. See
 #    http://sphinx-doc.org/ext/intersphinx.html
 # To be able to compile Sage without accessing the net, we use a local copy of
@@ -7,12 +7,10 @@
 
 if command -v wget > /dev/null 2>&1 ; then
     rm -f python.inv python2.inv python3.inv
-    wget https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d " " -f 2`/objects.inv -O - > python2.inv
     wget https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d " " -f 2`/objects.inv -O - > python3.inv
 elif command -v curl > /dev/null 2>&1 ; then
     # On OS X, curl is installed by default, but not wget.
     rm -f python.inv python2.inv python3.inv
-    curl https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d " " -f 2`/objects.inv > python2.inv
     curl https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d " " -f 2`/objects.inv > python3.inv
 else
     echo "Error: neither wget nor curl is installed."
```



---

Comment by jhpalmieri created at 2022-02-09 21:39:28

Or in fact you've already done it and I'm not paying attention, but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.


---

Comment by git created at 2022-02-10 01:09:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-10 01:10:49

Replying to [comment:36 jhpalmieri]:
> ... but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.

Right. Thanks.


---

Comment by klee created at 2022-02-10 01:19:31

Replying to [comment:34 jhpalmieri]:
> > documentation access from jupyter notebook (this undoes #33206) 
> 
> I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)

I made this change 

```diff

diff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py
index 2143c22..ab336e8 100644
--- a/src/sage/repl/ipython_kernel/install.py
+++ b/src/sage/repl/ipython_kernel/install.py
@@ -218,7 +218,7 @@ class SageKernelSpec(object):
                 os.path.join(self.kernel_dir, filename)
             )
         self.symlink(
-            os.path.join(SAGE_DOC, 'html', 'en'),
+            SAGE_DOC,
             os.path.join(self.kernel_dir, 'doc')
         )
```


which solves problems related with symlinks. 

I am a little unsure if there could be security problems in exposing this much of path.


---

Comment by git created at 2022-02-10 12:28:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-10 12:29:57

New commits:


---

Comment by git created at 2022-02-11 01:11:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-11 01:14:26

Replying to [comment:39 klee]:
> Replying to [comment:34 jhpalmieri]:
> > > documentation access from jupyter notebook (this undoes #33206) 
> > 
> > I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)
> 
> I made this change 
> {{{#!diff
> 
> diff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py
> index 2143c22..ab336e8 100644
> --- a/src/sage/repl/ipython_kernel/install.py
> +++ b/src/sage/repl/ipython_kernel/install.py
> `@``@` -218,7 +218,7 `@``@` class SageKernelSpec(object):
>                  os.path.join(self.kernel_dir, filename)
>              )
>          self.symlink(
> -            os.path.join(SAGE_DOC, 'html', 'en'),
> +            SAGE_DOC,
>              os.path.join(self.kernel_dir, 'doc')
>          )
> }}}
> 
> which solves problems related with symlinks. 
> 
> I am a little unsure if there could be security problems in exposing this much of path.

Harald?


---

Comment by jhpalmieri created at 2022-02-12 23:52:53

It all looks good to me, so if we can settle the question about security and the path, I think we should merge it.


---

Comment by fbissey created at 2022-02-13 03:08:15

If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.

The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.


---

Comment by klee created at 2022-02-13 04:16:26

Replying to [comment:47 fbissey]:
> If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.

I agree. Okay then.
 
> The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.

Would it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like

https://doc.sagemath.org/index.html

Really, we may use the source file of that page. Where is it?


---

Comment by git created at 2022-02-13 07:25:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-13 07:32:35

Replying to [comment:48 klee]:
> Replying to [comment:47 fbissey]:
> > The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.
> 
> Would it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like
> 
> https://doc.sagemath.org/index.html
> 
> Really, we may use the source file of that page. Where is it?
> 

I created the root `index.html` file based on the source file of https://doc.sagemath.org/index.html. But unlike the original, our root `index.html` file is a simple static html file edited by hand.


---

Comment by git created at 2022-02-13 14:18:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-13 14:25:08

There will be no more commits, hopefully.

Ready for review.


---

Comment by git created at 2022-02-14 01:33:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-14 01:36:13

Sorry. I could not overlook these typos.


---

Comment by jhpalmieri created at 2022-02-14 23:44:02

Is the new top-level `index.html` supposed to be accessible through Sage? Or through the other documentation web pages?


---

Comment by klee created at 2022-02-15 00:48:27

Replying to [comment:57 jhpalmieri]:
> Is the new top-level `index.html` supposed to be accessible through Sage? 

I am negative in that. There would be little usage.

> Or through the other documentation web pages?

(1) It may replace the index page now at https://doc.sagemath.org. This is up to Harald.

(2) We may add a link to the top-level `index.html` in `html/en/index.html`. I can do this in this ticket, if you want.


---

Comment by jhpalmieri created at 2022-02-15 01:07:55

Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority.


---

Comment by fbissey created at 2022-02-15 01:09:41

Replying to [comment:59 jhpalmieri]:
> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. 

The fact that the reference manual only exists in English may have something to do with that.


---

Comment by klee created at 2022-02-15 01:29:09

Replying to [comment:59 jhpalmieri]:
> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. 

I think it's good to have the following link. No?


```diff
diff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html
index 6444d0c09d..b04fd4861f 100644
--- a/src/doc/en/website/templates/index.html
+++ b/src/doc/en/website/templates/index.html
@@ -23,6 +23,7 @@
 
 {% block body %}
 <h1>{{ docstitle|e }}</h1>
+<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href="../../index.html">here</a>.
 {% block tables %}
 <h2>
   <strong>
```



---

Comment by klee created at 2022-02-15 01:47:22

Replying to [comment:20 jhpalmieri]:
> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?

A relevant discussion is here: https://github.com/sphinx-doc/sphinx/issues/10192


---

Comment by git created at 2022-02-15 03:44:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-15 04:37:54

We could force the issue with this:

```diff
diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
index ccb7f0ccf10..6c377eddce3 100644
--- a/src/doc/en/reference/conf_sub.py
+++ b/src/doc/en/reference/conf_sub.py
@@ -22,6 +22,8 @@ from sage.docs.conf import *
 # contains common paths.
 html_static_path = [] + html_common_static_path
 
+html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']
+
 ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')
 ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')
 
```

----
New commits:


---

Comment by klee created at 2022-02-15 05:29:07

Replying to [comment:64 jhpalmieri]:
> We could force the issue with this:
> {{{
> #!diff
> diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
> index ccb7f0ccf10..6c377eddce3 100644
> --- a/src/doc/en/reference/conf_sub.py
> +++ b/src/doc/en/reference/conf_sub.py
> `@``@` -22,6 +22,8 `@``@` from sage.docs.conf import *
>  # contains common paths.
>  html_static_path = [] + html_common_static_path
>  
> +html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']
> +
>  ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')
>  ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')
>  
> }}}

This solution has its own problem. See #33347.


---

Comment by strogdon created at 2022-02-15 05:56:31

Replying to [comment:61 klee]:
> 
> I think it's good to have the following link. No?
> 
> {{{#!diff
> diff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html
> index 6444d0c09d..b04fd4861f 100644
> --- a/src/doc/en/website/templates/index.html
> +++ b/src/doc/en/website/templates/index.html
> `@``@` -23,6 +23,7 `@``@`
>  
>  {% block body %}
>  <h1>{{ docstitle|e }}</h1>
> +<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href="../../index.html">here</a>.
>  {% block tables %}
>  <h2>
>    <strong>
> }}}
Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives


```
doc/html/en is not a file
```



---

Comment by klee created at 2022-02-15 06:18:00

Replying to [comment:66 strogdon]:
> Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives
> 
> {{{
> doc/html/en is not a file
> }}}

I don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?

For me, for example, The "English" link lists files in `html/en` as it is supposed to do.


---

Comment by strogdon created at 2022-02-15 06:38:07

Replying to [comment:67 klee]:
> Replying to [comment:66 strogdon]:
> > Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives
> > 
> > {{{
> > doc/html/en is not a file
> > }}}
> 
> I don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?
> 
> For me, for example, The "English" link lists files in `html/en` as it is supposed to do.


For a new branch `git trac fetch 33309` and then `git merge FETCH_HEAD`. To build `make doc-clean doc-uninstall` and then `make doc-pdf`. I've done this before. html and pdf links look good except the above link. All links on the page seem to work except the language links. Is there something else necessary that I should do?


---

Comment by strogdon created at 2022-02-15 06:51:19

For example the `English` link appears as


```
<div class="cell lang"><a href="html/en">English</a></div>
```

This works

```
<div class="cell lang"><a href="html/en/index.html">English</a></div>
```

I'm doing this from the notebook


---

Comment by klee created at 2022-02-15 06:53:35

Replying to [comment:69 strogdon]:
> For example the `English` link appears as
> 
> {{{
> <div class="cell lang"><a href="html/en">English</a></div>
> }}}
> This works
> {{{
> <div class="cell lang"><a href="html/en/index.html">English</a></div>
> }}}
> I'm doing this from the notebook

What happens if you open `html/en/`? I suspect the tailing slash matters.


---

Comment by git created at 2022-02-15 07:04:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-15 07:06:14

You can save time by using `sage -docbuild website html`.


---

Comment by strogdon created at 2022-02-15 07:27:44

Replying to [comment:71 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)||`Add trailing slash to links to directories`||
This make no difference here from the notebook. For the `French` language I get

```
doc/html/fr/ is not a file
```

I'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.


---

Comment by klee created at 2022-02-15 07:48:33

Replying to [comment:73 strogdon]:
> Replying to [comment:71 git]:
> > Branch pushed to git repo; I updated commit sha1. New commits:
> > ||[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)||`Add trailing slash to links to directories`||
> This make no difference here from the notebook. For the `French` language I get
> {{{
> doc/html/fr/ is not a file
> }}}
> I'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.

Me neither. But I guess listing files for directory url is a fairly standard behaviour of a browser or a web server.


---

Comment by klee created at 2022-02-15 07:58:46

Replying to [comment:73 strogdon]:
> ...Things work locally but not from the notebook.

You meant Jupyter notebook. Yes, I see what you see.


---

Comment by klee created at 2022-02-15 08:30:21

Replying to [comment:73 strogdon]:
> I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. 

I agree, but I should leave this work to other experts in each language.


---

Comment by strogdon created at 2022-02-15 15:32:08

Replying to [comment:76 klee]:
> Replying to [comment:73 strogdon]:
> > I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. 
> 
> I agree, but I should leave this work to other experts in each language. 
I didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.


---

Comment by klee created at 2022-02-15 16:19:33

Replying to [comment:77 strogdon]:
> I didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.

Okay. I agree.


---

Comment by git created at 2022-02-15 16:19:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-15 16:24:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-15 19:21:52

I think it looks great. I propose one change:

```diff
diff --git a/src/doc/en/website/root_index.html b/src/doc/en/website/root_index.html
index 361a7f7631..41613fbdd6 100644
--- a/src/doc/en/website/root_index.html
+++ b/src/doc/en/website/root_index.html
@@ -122,7 +122,6 @@ title="SageMath Mathematical Software">
 <div class='entry lang-en'><a href='pdf/en/installation/installation.pdf'>Installation Guide</a></div>
 <div class='entry lang-en'><a href='pdf/en/developer/developer.pdf'>Developer's Guide</a></div>
 <div class='entry lang-en'><a href='pdf/en/faq/faq.pdf'>FAQ</a></div>
-<div class='entry lang-en'><a href='pdf/en/developer/flowchart.pdf'>Flowchart</a></div>
 </div></div>
 <div class="row fr"><div class="cell"></div>
 <div class="cell lang">French</div>
```

I don't think the flowchart is intended as a standalone document.


---

Comment by git created at 2022-02-16 00:45:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-02-16 00:47:20

Replying to [comment:81 jhpalmieri]:
> I don't think the flowchart is intended as a standalone document.

I agree. I also took this opportunity to revive `English` link.


---

Comment by git created at 2022-02-16 01:07:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-16 06:16:42

I fixed two doctests. I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?
----
New commits:


---

Comment by klee created at 2022-02-16 06:45:16

Replying to [comment:86 jhpalmieri]:
> I fixed two doctests. 

I didn't know them. Thanks!

> I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?

No to more tinkering. Yes to merging it.

Many thanks to all reviewers for all comments!


---

Comment by slelievre created at 2022-02-16 10:20:11

: )


---

Comment by slelievre created at 2022-02-16 10:20:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-02-16 23:59:49

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2022-02-16 23:59:49

Merge failure on top of:

29e12c30b2 Trac #33293: checking doctest output is too slow

3538db804f Trac #33287: make iter(ZZ^n) useful

95d62c119f Trac #33279: Put derivations over function fields in the framework of RingDerivation

a75ff8e968 Trac #33267: Improve speed of sum_of_* for CombinatorialFreeModule

a697f74ccf Trac #33261: .complement() treats bipartite graphs as generic

505e7cd991 Trac #33237: membership testing for ideals of quotient rings

b2bb4a16f9 Trac #33171: fix and activate pycodestyle E713

706626b427 Trac #33000: Remove some imports from sage.rings.all

9608d61a75 Trac #32958: findstat: enforce limit on how many elements to compute

7f5bdc5bbc Trac #32789: Fix spkg-configure.m4 for singular

8c7beae366 Trac #32465: Refactor {Matrix,Vector}_double_dense through ..._numpy_dense, add ..._numpy_integer_dense

537d9a8e7e Trac #31320: Coercion issue with Laurent polynomial rings

15f2fed8a7 Trac #30695: Padic slice method fails on exact zeros for certain inputs

ff40ba0043 Trac #12595: Add doctest for eigenmatrix of complex floating-point matrix

e4f9347fa4 Trac #33350: remove traces of six

24f0f4eeca Trac #33339: Use latest dev docker build for documentation workflow

03d78e2ff6 Trac #32966: tox / GH Actions: Add ubuntu variants using ppa:ubuntu-toolchain-r

22221ae2bb Trac #33174: Unreachable code in sage/graphs/base/c_graph.pyx

ddd2ab1e85 Trac #33163: various lgtm suggestions

83c2a60a36 Trac #33133: Add pictures to scatter_plot documentation

44fb492b48 Trac #33115: Re-run bootstrap when an install-requires.txt or package-version.txt has changed

1dda73e985 Trac #33110: Some performance improvements in the manifolds code

f6aff898e1 Trac #33035: random doctest failure in src/sage/tests/book_stein_ent.py

69ea2e5159 Trac #32988: Deprecate sage.structure.graphics_file

91710c39f7 Trac #32912: Add pictures to disk.py

f413b85fc5 Trac #32264: Convenience syntax for quaternion ideals

92dea6ac0a Trac #31758: State global i or I is a number field element (and no longer in the symbolic ring)

e8c27b5fb6 Trac #31005: Add traceback information to exceptions during docbuild

cd31b18f04 Trac #30763: improve setting global options to None

8b63606d29 Trac #24279: Remove the experimental code for `RelativeFiniteFieldExtension`

44cd8f8580 Trac #33324: pycodestyle cleaning in discrete Fourier transforms

5791dba147 Trac #33314: pycodestyle cleanup of phc interface

708efc2b48 Trac #33307: Fix empty section display on prerequisites doc page

9a9c821782 Trac #33302: fpylll might not find system-wide fplll's strategies json

c10d7bb3d7 Trac #33301: pycodestyle formatting in sage_docbuild

90ec7681c2 Trac #33298: pycodestyle cleaning in rings/valuations/

edad8daffc Trac #33297: some details in src/bin scripts

01e86774fe Trac #33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19

d026799042 Trac #33275: Bug fixes for finitely presented graded modules (#32505)

2e1f8d27ec Trac #33264: Define `x` as symbolic variable in many `animate` examples

5bdf5dd19a Trac #33263: Add github action running on each push

959ff7a3df Trac #33306: tox.ini: Linux platform updates

10a3cd92d1 Trac #33260: Fix bug in .perfect_matchings() for BipartiteGraph

20684fe0d6 Trac #33257: fix a bug in multiple zeta values

8326dee9e8 Trac #33256: buffer.py: make files readonly only when possible

7f8b2684ba Trac #33123: Move construction methods to Polyhedron_base5

826061adbb Updated [SageMath](SageMath) version to 9.6.beta1



merge was not clean: conflicts in src/sage_docbuild/__init__.py


---

Comment by strogdon created at 2022-02-17 01:13:31

For reference, with this branch on top of the above I see in `src/sage_docbuild/__init__.py`

```

<<<<<<< HEAD
    def pdf(self):
        """
        Install in the directory one level up to website_dir a symlink to the
        directory containing pdf files. This symlink is necessary to access
        pdf documentation files within Jupyter (see trac #33206).
        """
        super().pdf()

        html_output_dir = self._output_dir('html')
        pdf_doc_dir = os.path.join(SAGE_DOC, 'pdf')

        # relative path is preferable for symlinks
        dst = os.path.join(html_output_dir, '..')
        relpath = os.path.relpath(pdf_doc_dir, dst)
        try:
            os.symlink(relpath, os.path.join(dst, 'pdf'))
        except FileExistsError:
            pass
=======
        root_index_file = os.path.join(html_output_dir, '../../../index.html')
        shutil.copy2(os.path.join(SAGE_DOC_SRC, self.lang, 'website', 'root_index.html'),
                     root_index_file)
>>>>>>> cc0e3bf3abfb1808c32f81f15db787b83ab7ce1c
```

It's been a while since I've done a merge conflict, so I dare not touch it.


---

Comment by klee created at 2022-02-17 02:07:48

New commits:


---

Comment by klee created at 2022-02-17 02:08:39

Changing status from needs_work to positive_review.


---

Comment by klee created at 2022-02-17 02:20:26

This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager. This seems so from the generated comment reporting the merge conflict above. I think this is good because this reduces the release manager's burden. 

Then it would be convenient to authors and perhaps necessary that the release manager's current branch is available somewhere.


---

Comment by klee created at 2022-02-17 02:35:10

Instead of forcing authors to resolve merge conflicts right away, they may be noticed that their branches will not be merged until after the next beta. So they can wait for the next beta and work on the merge conflicts then.


---

Comment by mkoeppe created at 2022-02-17 07:17:41

Replying to [comment:93 klee]:
> This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager.

There's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to "needs_work".

What is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available.


---

Comment by mkoeppe created at 2022-02-17 07:20:47

For reference, this code is in https://github.com/sagemath/git-trac-command/blob/master/git_trac/releasemgr/app.py#L212


---

Comment by klee created at 2022-02-17 09:19:32

Replying to [comment:96 mkoeppe]:
> There's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to "needs_work".
> 
> What is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. 
> 

I was aware of the update in the release manager scripts. 

I thought that previously, the merge conflict notices that I received from the release manager were always against the latest new beta, not against with the release manager's current branch that I don't have access to. But apparently I thought wrong.


---

Comment by klee created at 2022-02-17 09:38:10

Replying to [comment:96 mkoeppe]:
> Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. 

If the author chooses to address it right away, is there an easy way to find out which ticket in the long list of the tickets has merge conflict with the present ticket? For me, it was tedious work to find this out, without access to the release manager's branch.


---

Comment by slelievre created at 2022-02-17 11:57:22

The release manager's develop branch is at:

- https://github.com/vbraun/sage/tree/develop


---

Comment by klee created at 2022-02-17 13:15:29

Replying to [comment:100 slelievre]:
> The release manager's develop branch is at:
> 
> - https://github.com/vbraun/sage/tree/develop

Thanks. I added that to my repo as git remote with name `vbraun` :)


---

Comment by klee created at 2022-02-17 13:30:53

By the way, it is nice to see the Sage documentation right from the status badge!


---

Comment by vbraun created at 2022-02-21 21:56:10

Resolution: fixed


---

Comment by mkoeppe created at 2022-03-19 01:13:06

Follow-up = #33529
