# Issue 33072: Many fixes for Sage documentation

archive/issues_033072.json:
```json
{
    "body": "CC:  @strogdon @haraldschilly @mkoeppe\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33309\n\n",
    "created_at": "2022-02-07T08:32:15Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Many fixes for Sage documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33072",
    "user": "https://github.com/kwankyu"
}
```
CC:  @strogdon @haraldschilly @mkoeppe



Issue created by migration from https://trac.sagemath.org/ticket/33309





---

archive/issue_comments_470827.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-02-07T08:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470827",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_470828.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-07T08:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470828",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_470829.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-07T09:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470830.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-07T12:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470831.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-07T13:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470832.json:
```json
{
    "body": "I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?",
    "created_at": "2022-02-07T18:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470832",
    "user": "https://github.com/tobiasdiez"
}
```

I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?



---

archive/issue_comments_470833.json:
```json
{
    "body": "Typo in src/doc/common/themes/sage/static/sage.css_t:\n\n```diff\n-/* this is nice, but it leads to hidden headings when jumping\n+/* this is nice, but it it leads to hidden headings when jumping\n```",
    "created_at": "2022-02-07T22:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470833",
    "user": "https://github.com/jhpalmieri"
}
```

Typo in src/doc/common/themes/sage/static/sage.css_t:

```diff
-/* this is nice, but it leads to hidden headings when jumping
+/* this is nice, but it it leads to hidden headings when jumping
```



---

archive/issue_comments_470834.json:
```json
{
    "body": "With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows \"\\(p\\)\" throughout. This doesn't seem to be a new problem. Any ideas for a fix?",
    "created_at": "2022-02-07T23:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470834",
    "user": "https://github.com/jhpalmieri"
}
```

With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?



---

archive/issue_comments_470835.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-08T00:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470836.json:
```json
{
    "body": "Replying to [comment:19 jhpalmieri]:\n> Typo in src/doc/common/themes/sage/static/sage.css_t:\n> \n> ```\n> #!diff\n> -/* this is nice, but it leads to hidden headings when jumping\n> +/* this is nice, but it it leads to hidden headings when jumping\n> ```\n\n\nThis is a typo in the original `basic.css_t` file. Anyway, fixed here.",
    "created_at": "2022-02-08T00:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470836",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:19 jhpalmieri]:
> Typo in src/doc/common/themes/sage/static/sage.css_t:
> 
> ```
> #!diff
> -/* this is nice, but it leads to hidden headings when jumping
> +/* this is nice, but it it leads to hidden headings when jumping
> ```


This is a typo in the original `basic.css_t` file. Anyway, fixed here.



---

archive/issue_comments_470837.json:
```json
{
    "body": "Replying to [comment:18 gh-tobiasdiez]:\n> I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?\n\n\nI agree that the sage theme looks old. But perhaps it has merits in that it is almost the basic theme officially provided by Sphinx.\n\nReplacing the same theme with a theme not based on the basic theme would be a work on another level. Currently Sage doc build is entangled with the structure of the basic theme. So definitely it is not to be done here.\n\nEventually it would be good that we could choose at build time among alternative themes.",
    "created_at": "2022-02-08T00:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470837",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:18 gh-tobiasdiez]:
> I'm really happy to see these improvements to the documentation. What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?


I agree that the sage theme looks old. But perhaps it has merits in that it is almost the basic theme officially provided by Sphinx.

Replacing the same theme with a theme not based on the basic theme would be a work on another level. Currently Sage doc build is entangled with the structure of the basic theme. So definitely it is not to be done here.

Eventually it would be good that we could choose at build time among alternative themes.



---

archive/issue_comments_470838.json:
```json
{
    "body": "Replying to [comment:20 jhpalmieri]:\n> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows \"\\(p\\)\" throughout. This doesn't seem to be a new problem. Any ideas for a fix?\n\n\nThis is because Sphinx does not see maths in the page and not include MathJax (to save loading time). My solution was to add `:math:`.`` somewhere in the page. It seem this has to be done for the afflicted pages individually. So this is not to be done here.",
    "created_at": "2022-02-08T00:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470838",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:20 jhpalmieri]:
> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?


This is because Sphinx does not see maths in the page and not include MathJax (to save loading time). My solution was to add `:math:`.`` somewhere in the page. It seem this has to be done for the afflicted pages individually. So this is not to be done here.



---

archive/issue_comments_470839.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-08T02:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470840.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-08T02:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470841.json:
```json
{
    "body": "Replying to [comment:18 gh-tobiasdiez]:\n> What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?\n\n\nIn anticipation of an alternative theme (perhaps based on `furo`) that may replace or live side by side with the current `sage` theme, we can rename the `sage` theme to `sage-classic` theme (since it is customized from the `classic` theme) in this ticket. Then later we may add `sage-furo` theme in another ticket. Okay?",
    "created_at": "2022-02-08T09:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470841",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:18 gh-tobiasdiez]:
> What do you think about replacing sage's own theme (based on the basic theme) by something modern like [furo](https://pradyunsg.me/furo/) (probably not as part of this ticket but as a follow-up)?


In anticipation of an alternative theme (perhaps based on `furo`) that may replace or live side by side with the current `sage` theme, we can rename the `sage` theme to `sage-classic` theme (since it is customized from the `classic` theme) in this ticket. Then later we may add `sage-furo` theme in another ticket. Okay?



---

archive/issue_comments_470842.json:
```json
{
    "body": "Sounds like a good idea!",
    "created_at": "2022-02-08T10:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470842",
    "user": "https://github.com/tobiasdiez"
}
```

Sounds like a good idea!



---

archive/issue_comments_470843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-08T11:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470844.json:
```json
{
    "body": "Codewise this looks good to me. I've also browsed around and couldn't find any issues. However, some of the pages don't work for me since on WSL the symlinks are not resolved by a Windows browser (this is also the case in the develop branch). So it's good if someone else double checks.",
    "created_at": "2022-02-09T13:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470844",
    "user": "https://github.com/tobiasdiez"
}
```

Codewise this looks good to me. I've also browsed around and couldn't find any issues. However, some of the pages don't work for me since on WSL the symlinks are not resolved by a Windows browser (this is also the case in the develop branch). So it's good if someone else double checks.



---

archive/issue_comments_470845.json:
```json
{
    "body": "> remove obsolete python2.inv hyperlinks database\n\n\nProbably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.\n\n> documentation access from jupyter notebook (this undoes #33206) \n\n\nI'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)",
    "created_at": "2022-02-09T21:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470845",
    "user": "https://github.com/jhpalmieri"
}
```

> remove obsolete python2.inv hyperlinks database


Probably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.

> documentation access from jupyter notebook (this undoes #33206) 


I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)



---

archive/issue_comments_470846.json:
```json
{
    "body": "Replying to [comment:34 jhpalmieri]:\n> > remove obsolete python2.inv hyperlinks database\n\n> \n> Probably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.\n\n\nOr we can do it here if you want:\n\n```diff\ndiff --git a/src/doc/common/update-python-inv.sh b/src/doc/common/update-python-inv.sh\nindex 537d6f4fb4..5c36cd378c 100755\n--- a/src/doc/common/update-python-inv.sh\n+++ b/src/doc/common/update-python-inv.sh\n@@ -1,5 +1,5 @@\n #!/usr/bin/env bash\n-# The files python2.inv and python3.inv contain the database of Sphinx hyperlink targets\n+# The file python3.inv contains the database of Sphinx hyperlink targets\n # used by the intersphinx extension. See\n #    http://sphinx-doc.org/ext/intersphinx.html\n # To be able to compile Sage without accessing the net, we use a local copy of\n@@ -7,12 +7,10 @@\n \n if command -v wget > /dev/null 2>&1 ; then\n     rm -f python.inv python2.inv python3.inv\n-    wget https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d \" \" -f 2`/objects.inv -O - > python2.inv\n     wget https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d \" \" -f 2`/objects.inv -O - > python3.inv\n elif command -v curl > /dev/null 2>&1 ; then\n     # On OS X, curl is installed by default, but not wget.\n     rm -f python.inv python2.inv python3.inv\n-    curl https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d \" \" -f 2`/objects.inv > python2.inv\n     curl https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d \" \" -f 2`/objects.inv > python3.inv\n else\n     echo \"Error: neither wget nor curl is installed.\"\n```",
    "created_at": "2022-02-09T21:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470846",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:34 jhpalmieri]:
> > remove obsolete python2.inv hyperlinks database

> 
> Probably on another ticket, we should also fix `src/doc/common/update-python-inv.sh` to not use Python 2 anymore.


Or we can do it here if you want:

```diff
diff --git a/src/doc/common/update-python-inv.sh b/src/doc/common/update-python-inv.sh
index 537d6f4fb4..5c36cd378c 100755
--- a/src/doc/common/update-python-inv.sh
+++ b/src/doc/common/update-python-inv.sh
@@ -1,5 +1,5 @@
 #!/usr/bin/env bash
-# The files python2.inv and python3.inv contain the database of Sphinx hyperlink targets
+# The file python3.inv contains the database of Sphinx hyperlink targets
 # used by the intersphinx extension. See
 #    http://sphinx-doc.org/ext/intersphinx.html
 # To be able to compile Sage without accessing the net, we use a local copy of
@@ -7,12 +7,10 @@
 
 if command -v wget > /dev/null 2>&1 ; then
     rm -f python.inv python2.inv python3.inv
-    wget https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d " " -f 2`/objects.inv -O - > python2.inv
     wget https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d " " -f 2`/objects.inv -O - > python3.inv
 elif command -v curl > /dev/null 2>&1 ; then
     # On OS X, curl is installed by default, but not wget.
     rm -f python.inv python2.inv python3.inv
-    curl https://docs.python.org/release/`sage --python2 --version 2>&1 | cut -d " " -f 2`/objects.inv > python2.inv
     curl https://docs.python.org/release/`sage --python3 --version 2>&1 | cut -d " " -f 2`/objects.inv > python3.inv
 else
     echo "Error: neither wget nor curl is installed."
```



---

archive/issue_comments_470847.json:
```json
{
    "body": "Or in fact you've already done it and I'm not paying attention, but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.",
    "created_at": "2022-02-09T21:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470847",
    "user": "https://github.com/jhpalmieri"
}
```

Or in fact you've already done it and I'm not paying attention, but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.



---

archive/issue_comments_470848.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-10T01:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470849.json:
```json
{
    "body": "Replying to [comment:36 jhpalmieri]:\n> ... but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.\n\n\nRight. Thanks.",
    "created_at": "2022-02-10T01:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470849",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:36 jhpalmieri]:
> ... but I might keep `rm -f python.inv python2.inv python3.inv` in case people have old files lying around.


Right. Thanks.



---

archive/issue_comments_470850.json:
```json
{
    "body": "Replying to [comment:34 jhpalmieri]:\n> > documentation access from jupyter notebook (this undoes #33206) \n\n> \n> I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)\n\n\nI made this change \n\n```diff\n\ndiff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py\nindex 2143c22..ab336e8 100644\n--- a/src/sage/repl/ipython_kernel/install.py\n+++ b/src/sage/repl/ipython_kernel/install.py\n@@ -218,7 +218,7 @@ class SageKernelSpec(object):\n                 os.path.join(self.kernel_dir, filename)\n             )\n         self.symlink(\n-            os.path.join(SAGE_DOC, 'html', 'en'),\n+            SAGE_DOC,\n             os.path.join(self.kernel_dir, 'doc')\n         )\n```\n\nwhich solves problems related with symlinks. \n\nI am a little unsure if there could be security problems in exposing this much of path.",
    "created_at": "2022-02-10T01:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470850",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:34 jhpalmieri]:
> > documentation access from jupyter notebook (this undoes #33206) 

> 
> I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)


I made this change 

```diff

diff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py
index 2143c22..ab336e8 100644
--- a/src/sage/repl/ipython_kernel/install.py
+++ b/src/sage/repl/ipython_kernel/install.py
@@ -218,7 +218,7 @@ class SageKernelSpec(object):
                 os.path.join(self.kernel_dir, filename)
             )
         self.symlink(
-            os.path.join(SAGE_DOC, 'html', 'en'),
+            SAGE_DOC,
             os.path.join(self.kernel_dir, 'doc')
         )
```

which solves problems related with symlinks. 

I am a little unsure if there could be security problems in exposing this much of path.



---

archive/issue_comments_470851.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-10T12:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470852.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-02-10T12:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470852",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_470853.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-11T01:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470854.json:
```json
{
    "body": "Replying to [comment:39 klee]:\n> Replying to [comment:34 jhpalmieri]:\n> > > documentation access from jupyter notebook (this undoes #33206) \n\n> > \n> > I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)\n\n> \n> I made this change \n> \n> ```diff\n> \n> diff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py\n> index 2143c22..ab336e8 100644\n> --- a/src/sage/repl/ipython_kernel/install.py\n> +++ b/src/sage/repl/ipython_kernel/install.py\n> @@ -218,7 +218,7 @@ class SageKernelSpec(object):\n>                  os.path.join(self.kernel_dir, filename)\n>              )\n>          self.symlink(\n> -            os.path.join(SAGE_DOC, 'html', 'en'),\n> +            SAGE_DOC,\n>              os.path.join(self.kernel_dir, 'doc')\n>          )\n> ```\n> \n> which solves problems related with symlinks. \n> \n> I am a little unsure if there could be security problems in exposing this much of path.\n\n\nHarald?",
    "created_at": "2022-02-11T01:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470854",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:39 klee]:
> Replying to [comment:34 jhpalmieri]:
> > > documentation access from jupyter notebook (this undoes #33206) 

> > 
> > I'm confused by this: can you add more detail? (Did you solve the problem at #33206 in a different way, because the PDF links seem to work from the Jupyter notebook with this branch?)

> 
> I made this change 
> 
> ```diff
> 
> diff --git a/src/sage/repl/ipython_kernel/install.py b/src/sage/repl/ipython_kernel/install.py
> index 2143c22..ab336e8 100644
> --- a/src/sage/repl/ipython_kernel/install.py
> +++ b/src/sage/repl/ipython_kernel/install.py
> @@ -218,7 +218,7 @@ class SageKernelSpec(object):
>                  os.path.join(self.kernel_dir, filename)
>              )
>          self.symlink(
> -            os.path.join(SAGE_DOC, 'html', 'en'),
> +            SAGE_DOC,
>              os.path.join(self.kernel_dir, 'doc')
>          )
> ```
> 
> which solves problems related with symlinks. 
> 
> I am a little unsure if there could be security problems in exposing this much of path.


Harald?



---

archive/issue_comments_470855.json:
```json
{
    "body": "It all looks good to me, so if we can settle the question about security and the path, I think we should merge it.",
    "created_at": "2022-02-12T23:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470855",
    "user": "https://github.com/jhpalmieri"
}
```

It all looks good to me, so if we can settle the question about security and the path, I think we should merge it.



---

archive/issue_comments_470856.json:
```json
{
    "body": "If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.\n\nThe inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.",
    "created_at": "2022-02-13T03:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470856",
    "user": "https://github.com/kiwifb"
}
```

If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.

The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.



---

archive/issue_comments_470857.json:
```json
{
    "body": "Replying to [comment:47 fbissey]:\n> If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.\n\n\nI agree. Okay then.\n \n> The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.\n\n\nWould it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like\n\nhttps://doc.sagemath.org/index.html\n\nReally, we may use the source file of that page. Where is it?",
    "created_at": "2022-02-13T04:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470857",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:47 fbissey]:
> If I am not mistaken you are just moving the root of the webserver to the directory `SAGE_DOC`. In a distro that would be a sage specific folder, so it doesn't expose anything other than sage objects. It doesn't bleed to other stuff. I am not sure what other security issue you would have.


I agree. Okay then.
 
> The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.


Would it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like

https://doc.sagemath.org/index.html

Really, we may use the source file of that page. Where is it?



---

archive/issue_comments_470858.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-13T07:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470859.json:
```json
{
    "body": "Replying to [comment:48 klee]:\n> Replying to [comment:47 fbissey]:\n> > The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.\n\n> \n> Would it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like\n> \n> https://doc.sagemath.org/index.html\n> \n> Really, we may use the source file of that page. Where is it?\n> \n\n\nI created the root `index.html` file based on the source file of https://doc.sagemath.org/index.html. But unlike the original, our root `index.html` file is a simple static html file edited by hand.",
    "created_at": "2022-02-13T07:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470859",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:48 klee]:
> Replying to [comment:47 fbissey]:
> > The inconvenient bit is that now the kernel points to a folder without an `index.html` file I think.

> 
> Would it be convenient to have a small index page at the root? The index page may contain the page listing all sage documentation, like
> 
> https://doc.sagemath.org/index.html
> 
> Really, we may use the source file of that page. Where is it?
> 


I created the root `index.html` file based on the source file of https://doc.sagemath.org/index.html. But unlike the original, our root `index.html` file is a simple static html file edited by hand.



---

archive/issue_comments_470860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-13T14:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470860",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470861.json:
```json
{
    "body": "There will be no more commits, hopefully.\n\nReady for review.",
    "created_at": "2022-02-13T14:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470861",
    "user": "https://github.com/kwankyu"
}
```

There will be no more commits, hopefully.

Ready for review.



---

archive/issue_comments_470862.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-14T01:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470863.json:
```json
{
    "body": "Sorry. I could not overlook these typos.",
    "created_at": "2022-02-14T01:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470863",
    "user": "https://github.com/kwankyu"
}
```

Sorry. I could not overlook these typos.



---

archive/issue_comments_470864.json:
```json
{
    "body": "Is the new top-level `index.html` supposed to be accessible through Sage? Or through the other documentation web pages?",
    "created_at": "2022-02-14T23:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470864",
    "user": "https://github.com/jhpalmieri"
}
```

Is the new top-level `index.html` supposed to be accessible through Sage? Or through the other documentation web pages?



---

archive/issue_comments_470865.json:
```json
{
    "body": "Replying to [comment:57 jhpalmieri]:\n> Is the new top-level `index.html` supposed to be accessible through Sage? \n\n\nI am negative in that. There would be little usage.\n\n> Or through the other documentation web pages?\n\n\n(1) It may replace the index page now at https://doc.sagemath.org. This is up to Harald.\n\n(2) We may add a link to the top-level `index.html` in `html/en/index.html`. I can do this in this ticket, if you want.",
    "created_at": "2022-02-15T00:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470865",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:57 jhpalmieri]:
> Is the new top-level `index.html` supposed to be accessible through Sage? 


I am negative in that. There would be little usage.

> Or through the other documentation web pages?


(1) It may replace the index page now at https://doc.sagemath.org. This is up to Harald.

(2) We may add a link to the top-level `index.html` in `html/en/index.html`. I can do this in this ticket, if you want.



---

archive/issue_comments_470866.json:
```json
{
    "body": "Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority.",
    "created_at": "2022-02-15T01:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470866",
    "user": "https://github.com/jhpalmieri"
}
```

Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority.



---

archive/issue_comments_470867.json:
```json
{
    "body": "Replying to [comment:59 jhpalmieri]:\n> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. \n\n\nThe fact that the reference manual only exists in English may have something to do with that.",
    "created_at": "2022-02-15T01:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470867",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:59 jhpalmieri]:
> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. 


The fact that the reference manual only exists in English may have something to do with that.



---

archive/issue_comments_470868.json:
```json
{
    "body": "Replying to [comment:59 jhpalmieri]:\n> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. \n\n\nI think it's good to have the following link. No?\n\n```diff\ndiff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html\nindex 6444d0c09d..b04fd4861f 100644\n--- a/src/doc/en/website/templates/index.html\n+++ b/src/doc/en/website/templates/index.html\n@@ -23,6 +23,7 @@\n \n {% block body %}\n <h1>{{ docstitle|e }}</h1>\n+<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href=\"../../index.html\">here</a>.\n {% block tables %}\n <h2>\n   <strong>\n```",
    "created_at": "2022-02-15T01:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470868",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:59 jhpalmieri]:
> Okay, I think it's fine to leave as is. Maybe the only advantage would be to provide easier access to non-English documentation, but that has not so far been a priority. 


I think it's good to have the following link. No?

```diff
diff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html
index 6444d0c09d..b04fd4861f 100644
--- a/src/doc/en/website/templates/index.html
+++ b/src/doc/en/website/templates/index.html
@@ -23,6 +23,7 @@
 
 {% block body %}
 <h1>{{ docstitle|e }}</h1>
+<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href="../../index.html">here</a>.
 {% block tables %}
 <h2>
   <strong>
```



---

archive/issue_comments_470869.json:
```json
{
    "body": "Replying to [comment:20 jhpalmieri]:\n> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows \"\\(p\\)\" throughout. This doesn't seem to be a new problem. Any ideas for a fix?\n\n\nA relevant discussion is here: https://github.com/sphinx-doc/sphinx/issues/10192",
    "created_at": "2022-02-15T01:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470869",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:20 jhpalmieri]:
> With OS X, the top page of the reference manual displays math correctly, but a page like https://doc.sagemath.org/html/en/reference/padics/index.html (rather, the local version) shows "\(p\)" throughout. This doesn't seem to be a new problem. Any ideas for a fix?


A relevant discussion is here: https://github.com/sphinx-doc/sphinx/issues/10192



---

archive/issue_comments_470870.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-15T03:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470871.json:
```json
{
    "body": "We could force the issue with this:\n\n```diff\ndiff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py\nindex ccb7f0ccf10..6c377eddce3 100644\n--- a/src/doc/en/reference/conf_sub.py\n+++ b/src/doc/en/reference/conf_sub.py\n@@ -22,6 +22,8 @@ from sage.docs.conf import *\n # contains common paths.\n html_static_path = [] + html_common_static_path\n \n+html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']\n+\n ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')\n ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')\n \n```\n\n---\nNew commits:",
    "created_at": "2022-02-15T04:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470871",
    "user": "https://github.com/jhpalmieri"
}
```

We could force the issue with this:

```diff
diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
index ccb7f0ccf10..6c377eddce3 100644
--- a/src/doc/en/reference/conf_sub.py
+++ b/src/doc/en/reference/conf_sub.py
@@ -22,6 +22,8 @@ from sage.docs.conf import *
 # contains common paths.
 html_static_path = [] + html_common_static_path
 
+html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']
+
 ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')
 ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')
 
```

---
New commits:



---

archive/issue_comments_470872.json:
```json
{
    "body": "Replying to [comment:64 jhpalmieri]:\n> We could force the issue with this:\n> \n> ```\n> #!diff\n> diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py\n> index ccb7f0ccf10..6c377eddce3 100644\n> --- a/src/doc/en/reference/conf_sub.py\n> +++ b/src/doc/en/reference/conf_sub.py\n> @@ -22,6 +22,8 @@ from sage.docs.conf import *\n>  # contains common paths.\n>  html_static_path = [] + html_common_static_path\n>  \n> +html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']\n> +\n>  ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')\n>  ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')\n>  \n> ```\n\n\nThis solution has its own problem. See #33347.",
    "created_at": "2022-02-15T05:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470872",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:64 jhpalmieri]:
> We could force the issue with this:
> 
> ```
> #!diff
> diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
> index ccb7f0ccf10..6c377eddce3 100644
> --- a/src/doc/en/reference/conf_sub.py
> +++ b/src/doc/en/reference/conf_sub.py
> @@ -22,6 +22,8 @@ from sage.docs.conf import *
>  # contains common paths.
>  html_static_path = [] + html_common_static_path
>  
> +html_js_files = ['MathJax.js?config=TeX-AMS_HTML-full', 'mathjax_sage.js']
> +
>  ref_src = os.path.join(SAGE_DOC_SRC, 'en', 'reference')
>  ref_out = os.path.join(SAGE_DOC, 'html', 'en', 'reference')
>  
> ```


This solution has its own problem. See #33347.



---

archive/issue_comments_470873.json:
```json
{
    "body": "Replying to [comment:61 klee]:\n> \n> I think it's good to have the following link. No?\n> \n> \n> ```diff\n> diff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html\n> index 6444d0c09d..b04fd4861f 100644\n> --- a/src/doc/en/website/templates/index.html\n> +++ b/src/doc/en/website/templates/index.html\n> @@ -23,6 +23,7 @@\n>  \n>  {% block body %}\n>  <h1>{{ docstitle|e }}</h1>\n> +<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href=\"../../index.html\">here</a>.\n>  {% block tables %}\n>  <h2>\n>    <strong>\n> ```\n\nHere from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives\n\n```\ndoc/html/en is not a file\n```",
    "created_at": "2022-02-15T05:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470873",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:61 klee]:
> 
> I think it's good to have the following link. No?
> 
> 
> ```diff
> diff --git a/src/doc/en/website/templates/index.html b/src/doc/en/website/templates/index.html
> index 6444d0c09d..b04fd4861f 100644
> --- a/src/doc/en/website/templates/index.html
> +++ b/src/doc/en/website/templates/index.html
> @@ -23,6 +23,7 @@
>  
>  {% block body %}
>  <h1>{{ docstitle|e }}</h1>
> +<p>This is documentation for Sage {{ release }}. Sage documentation in other languages is <a href="../../index.html">here</a>.
>  {% block tables %}
>  <h2>
>    <strong>
> ```

Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives

```
doc/html/en is not a file
```



---

archive/issue_comments_470874.json:
```json
{
    "body": "Replying to [comment:66 strogdon]:\n> Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives\n> \n> \n> ```\n> doc/html/en is not a file\n> ```\n\n\nI don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?\n\nFor me, for example, The \"English\" link lists files in `html/en` as it is supposed to do.",
    "created_at": "2022-02-15T06:18:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470874",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:66 strogdon]:
> Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives
> 
> 
> ```
> doc/html/en is not a file
> ```


I don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?

For me, for example, The "English" link lists files in `html/en` as it is supposed to do.



---

archive/issue_comments_470875.json:
```json
{
    "body": "Replying to [comment:67 klee]:\n> Replying to [comment:66 strogdon]:\n> > Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives\n> > \n> > \n> > ```\n> > doc/html/en is not a file\n> > ```\n\n> \n> I don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?\n> \n> For me, for example, The \"English\" link lists files in `html/en` as it is supposed to do.\n\n\n\nFor a new branch `git trac fetch 33309` and then `git merge FETCH_HEAD`. To build `make doc-clean doc-uninstall` and then `make doc-pdf`. I've done this before. html and pdf links look good except the above link. All links on the page seem to work except the language links. Is there something else necessary that I should do?",
    "created_at": "2022-02-15T06:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470875",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:67 klee]:
> Replying to [comment:66 strogdon]:
> > Here from the above created link all the html and pdf language links do not work, i.e. for example the `English` html link gives
> > 
> > 
> > ```
> > doc/html/en is not a file
> > ```

> 
> I don't understand. Did you build the doc using the latest commit? Or copy pasted from the above diff?
> 
> For me, for example, The "English" link lists files in `html/en` as it is supposed to do.



For a new branch `git trac fetch 33309` and then `git merge FETCH_HEAD`. To build `make doc-clean doc-uninstall` and then `make doc-pdf`. I've done this before. html and pdf links look good except the above link. All links on the page seem to work except the language links. Is there something else necessary that I should do?



---

archive/issue_comments_470876.json:
```json
{
    "body": "For example the `English` link appears as\n\n```\n<div class=\"cell lang\"><a href=\"html/en\">English</a></div>\n```\nThis works\n\n```\n<div class=\"cell lang\"><a href=\"html/en/index.html\">English</a></div>\n```\nI'm doing this from the notebook",
    "created_at": "2022-02-15T06:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470876",
    "user": "https://github.com/strogdon"
}
```

For example the `English` link appears as

```
<div class="cell lang"><a href="html/en">English</a></div>
```
This works

```
<div class="cell lang"><a href="html/en/index.html">English</a></div>
```
I'm doing this from the notebook



---

archive/issue_comments_470877.json:
```json
{
    "body": "Replying to [comment:69 strogdon]:\n> For example the `English` link appears as\n> \n> \n> ```\n> <div class=\"cell lang\"><a href=\"html/en\">English</a></div>\n> ```\n> This works\n> \n> ```\n> <div class=\"cell lang\"><a href=\"html/en/index.html\">English</a></div>\n> ```\n> I'm doing this from the notebook\n\n\nWhat happens if you open `html/en/`? I suspect the tailing slash matters.",
    "created_at": "2022-02-15T06:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470877",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:69 strogdon]:
> For example the `English` link appears as
> 
> 
> ```
> <div class="cell lang"><a href="html/en">English</a></div>
> ```
> This works
> 
> ```
> <div class="cell lang"><a href="html/en/index.html">English</a></div>
> ```
> I'm doing this from the notebook


What happens if you open `html/en/`? I suspect the tailing slash matters.



---

archive/issue_comments_470878.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-15T07:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470879.json:
```json
{
    "body": "You can save time by using `sage -docbuild website html`.",
    "created_at": "2022-02-15T07:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470879",
    "user": "https://github.com/kwankyu"
}
```

You can save time by using `sage -docbuild website html`.



---

archive/issue_comments_470880.json:
```json
{
    "body": "Replying to [comment:71 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                            |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n> |[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)|`Add trailing slash to links to directories`|\n\nThis make no difference here from the notebook. For the `French` language I get\n\n```\ndoc/html/fr/ is not a file\n```\nI'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.",
    "created_at": "2022-02-15T07:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470880",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:71 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                            |
> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
> |[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)|`Add trailing slash to links to directories`|

This make no difference here from the notebook. For the `French` language I get

```
doc/html/fr/ is not a file
```
I'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.



---

archive/issue_comments_470881.json:
```json
{
    "body": "Replying to [comment:73 strogdon]:\n> Replying to [comment:71 git]:\n> > Branch pushed to git repo; I updated commit sha1. New commits:\n> > |                                                                                                                                           |                                            |\n> > |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n> > |[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)|`Add trailing slash to links to directories`|\n\n> This make no difference here from the notebook. For the `French` language I get\n> {{{\n> doc/html/fr/ is not a file\n> }}}\n> I'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.\n\n\nMe neither. But I guess listing files for directory url is a fairly standard behaviour of a browser or a web server.",
    "created_at": "2022-02-15T07:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470881",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:73 strogdon]:
> Replying to [comment:71 git]:
> > Branch pushed to git repo; I updated commit sha1. New commits:
> > |                                                                                                                                           |                                            |
> > |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
> > |[de5ac65](https://git.sagemath.org/sage.git/commit/?id=de5ac6573dee66834a0ed9f074f9710a19929992)|`Add trailing slash to links to directories`|

> This make no difference here from the notebook. For the `French` language I get
> {{{
> doc/html/fr/ is not a file
> }}}
> I'm not an expert on this but I think for this to work from the notebook there needs to be an `index.html` file under each  language that contains links to docs for that language. Things work locally but not from the notebook.


Me neither. But I guess listing files for directory url is a fairly standard behaviour of a browser or a web server.



---

archive/issue_comments_470882.json:
```json
{
    "body": "Replying to [comment:73 strogdon]:\n> ...Things work locally but not from the notebook.\n\n\nYou meant Jupyter notebook. Yes, I see what you see.",
    "created_at": "2022-02-15T07:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470882",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:73 strogdon]:
> ...Things work locally but not from the notebook.


You meant Jupyter notebook. Yes, I see what you see.



---

archive/issue_comments_470883.json:
```json
{
    "body": "Replying to [comment:73 strogdon]:\n> I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. \n\n\nI agree, but I should leave this work to other experts in each language.",
    "created_at": "2022-02-15T08:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470883",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:73 strogdon]:
> I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. 


I agree, but I should leave this work to other experts in each language.



---

archive/issue_comments_470884.json:
```json
{
    "body": "Replying to [comment:76 klee]:\n> Replying to [comment:73 strogdon]:\n> > I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. \n\n> \n> I agree, but I should leave this work to other experts in each language. \n\nI didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.",
    "created_at": "2022-02-15T15:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470884",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:76 klee]:
> Replying to [comment:73 strogdon]:
> > I think for this to work from the notebook there needs to be an `index.html` file under each language that contains links to docs for that language. 

> 
> I agree, but I should leave this work to other experts in each language. 

I didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.



---

archive/issue_comments_470885.json:
```json
{
    "body": "Replying to [comment:77 strogdon]:\n> I didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.\n\n\nOkay. I agree.",
    "created_at": "2022-02-15T16:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470885",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:77 strogdon]:
> I didn't think about it at the time but one could keep the language names on the `local/share/doc/sage/index.html` page but remove there link capabilities. The language names do not need to be links since everything else appears on the `index.html`.


Okay. I agree.



---

archive/issue_comments_470886.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-15T16:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470887.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-15T16:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470888.json:
```json
{
    "body": "I think it looks great. I propose one change:\n\n```diff\ndiff --git a/src/doc/en/website/root_index.html b/src/doc/en/website/root_index.html\nindex 361a7f7631..41613fbdd6 100644\n--- a/src/doc/en/website/root_index.html\n+++ b/src/doc/en/website/root_index.html\n@@ -122,7 +122,6 @@ title=\"SageMath Mathematical Software\">\n <div class='entry lang-en'><a href='pdf/en/installation/installation.pdf'>Installation Guide</a></div>\n <div class='entry lang-en'><a href='pdf/en/developer/developer.pdf'>Developer's Guide</a></div>\n <div class='entry lang-en'><a href='pdf/en/faq/faq.pdf'>FAQ</a></div>\n-<div class='entry lang-en'><a href='pdf/en/developer/flowchart.pdf'>Flowchart</a></div>\n </div></div>\n <div class=\"row fr\"><div class=\"cell\"></div>\n <div class=\"cell lang\">French</div>\n```\nI don't think the flowchart is intended as a standalone document.",
    "created_at": "2022-02-15T19:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470888",
    "user": "https://github.com/jhpalmieri"
}
```

I think it looks great. I propose one change:

```diff
diff --git a/src/doc/en/website/root_index.html b/src/doc/en/website/root_index.html
index 361a7f7631..41613fbdd6 100644
--- a/src/doc/en/website/root_index.html
+++ b/src/doc/en/website/root_index.html
@@ -122,7 +122,6 @@ title="SageMath Mathematical Software">
 <div class='entry lang-en'><a href='pdf/en/installation/installation.pdf'>Installation Guide</a></div>
 <div class='entry lang-en'><a href='pdf/en/developer/developer.pdf'>Developer's Guide</a></div>
 <div class='entry lang-en'><a href='pdf/en/faq/faq.pdf'>FAQ</a></div>
-<div class='entry lang-en'><a href='pdf/en/developer/flowchart.pdf'>Flowchart</a></div>
 </div></div>
 <div class="row fr"><div class="cell"></div>
 <div class="cell lang">French</div>
```
I don't think the flowchart is intended as a standalone document.



---

archive/issue_comments_470889.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-16T00:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470890.json:
```json
{
    "body": "Replying to [comment:81 jhpalmieri]:\n> I don't think the flowchart is intended as a standalone document.\n\n\nI agree. I also took this opportunity to revive `English` link.",
    "created_at": "2022-02-16T00:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470890",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:81 jhpalmieri]:
> I don't think the flowchart is intended as a standalone document.


I agree. I also took this opportunity to revive `English` link.



---

archive/issue_comments_470891.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-16T01:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470892.json:
```json
{
    "body": "I fixed two doctests. I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?\n\n---\nNew commits:",
    "created_at": "2022-02-16T06:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470892",
    "user": "https://github.com/jhpalmieri"
}
```

I fixed two doctests. I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?

---
New commits:



---

archive/issue_comments_470893.json:
```json
{
    "body": "Replying to [comment:86 jhpalmieri]:\n> I fixed two doctests. \n\n\nI didn't know them. Thanks!\n\n> I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?\n\n\nNo to more tinkering. Yes to merging it.\n\nMany thanks to all reviewers for all comments!",
    "created_at": "2022-02-16T06:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470893",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:86 jhpalmieri]:
> I fixed two doctests. 


I didn't know them. Thanks!

> I am happy with this now; thanks for all of your work on it. Do you have more tinkering to do, or should we merge it?


No to more tinkering. Yes to merging it.

Many thanks to all reviewers for all comments!



---

archive/issue_comments_470894.json:
```json
{
    "body": ": )",
    "created_at": "2022-02-16T10:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470894",
    "user": "https://github.com/slel"
}
```

: )



---

archive/issue_comments_470895.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-16T10:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470895",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470896.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-02-16T23:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470896",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_470897.json:
```json
{
    "body": "Merge failure on top of:\n\n29e12c30b2 Trac #33293: checking doctest output is too slow\n\n3538db804f Trac #33287: make iter(ZZ^n) useful\n\n95d62c119f Trac #33279: Put derivations over function fields in the framework of RingDerivation\n\na75ff8e968 Trac #33267: Improve speed of sum_of_* for CombinatorialFreeModule\n\na697f74ccf Trac #33261: .complement() treats bipartite graphs as generic\n\n505e7cd991 Trac #33237: membership testing for ideals of quotient rings\n\nb2bb4a16f9 Trac #33171: fix and activate pycodestyle E713\n\n706626b427 Trac #33000: Remove some imports from sage.rings.all\n\n9608d61a75 Trac #32958: findstat: enforce limit on how many elements to compute\n\n7f5bdc5bbc Trac #32789: Fix spkg-configure.m4 for singular\n\n8c7beae366 Trac #32465: Refactor {Matrix,Vector}_double_dense through ..._numpy_dense, add ..._numpy_integer_dense\n\n537d9a8e7e Trac #31320: Coercion issue with Laurent polynomial rings\n\n15f2fed8a7 Trac #30695: Padic slice method fails on exact zeros for certain inputs\n\nff40ba0043 Trac #12595: Add doctest for eigenmatrix of complex floating-point matrix\n\ne4f9347fa4 Trac #33350: remove traces of six\n\n24f0f4eeca Trac #33339: Use latest dev docker build for documentation workflow\n\n03d78e2ff6 Trac #32966: tox / GH Actions: Add ubuntu variants using ppa:ubuntu-toolchain-r\n\n22221ae2bb Trac #33174: Unreachable code in sage/graphs/base/c_graph.pyx\n\nddd2ab1e85 Trac #33163: various lgtm suggestions\n\n83c2a60a36 Trac #33133: Add pictures to scatter_plot documentation\n\n44fb492b48 Trac #33115: Re-run bootstrap when an install-requires.txt or package-version.txt has changed\n\n1dda73e985 Trac #33110: Some performance improvements in the manifolds code\n\nf6aff898e1 Trac #33035: random doctest failure in src/sage/tests/book_stein_ent.py\n\n69ea2e5159 Trac #32988: Deprecate sage.structure.graphics_file\n\n91710c39f7 Trac #32912: Add pictures to disk.py\n\nf413b85fc5 Trac #32264: Convenience syntax for quaternion ideals\n\n92dea6ac0a Trac #31758: State global i or I is a number field element (and no longer in the symbolic ring)\n\ne8c27b5fb6 Trac #31005: Add traceback information to exceptions during docbuild\n\ncd31b18f04 Trac #30763: improve setting global options to None\n\n8b63606d29 Trac #24279: Remove the experimental code for `RelativeFiniteFieldExtension`\n\n44cd8f8580 Trac #33324: pycodestyle cleaning in discrete Fourier transforms\n\n5791dba147 Trac #33314: pycodestyle cleanup of phc interface\n\n708efc2b48 Trac #33307: Fix empty section display on prerequisites doc page\n\n9a9c821782 Trac #33302: fpylll might not find system-wide fplll's strategies json\n\nc10d7bb3d7 Trac #33301: pycodestyle formatting in sage_docbuild\n\n90ec7681c2 Trac #33298: pycodestyle cleaning in rings/valuations/\n\nedad8daffc Trac #33297: some details in src/bin scripts\n\n01e86774fe Trac #33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19\n\nd026799042 Trac #33275: Bug fixes for finitely presented graded modules (#32505)\n\n2e1f8d27ec Trac #33264: Define `x` as symbolic variable in many `animate` examples\n\n5bdf5dd19a Trac #33263: Add github action running on each push\n\n959ff7a3df Trac #33306: tox.ini: Linux platform updates\n\n10a3cd92d1 Trac #33260: Fix bug in .perfect_matchings() for BipartiteGraph\n\n20684fe0d6 Trac #33257: fix a bug in multiple zeta values\n\n8326dee9e8 Trac #33256: buffer.py: make files readonly only when possible\n\n7f8b2684ba Trac #33123: Move construction methods to Polyhedron_base5\n\n826061adbb Updated [SageMath](SageMath) version to 9.6.beta1\n\n\n\nmerge was not clean: conflicts in src/sage_docbuild/__init__.py",
    "created_at": "2022-02-16T23:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470897",
    "user": "https://github.com/vbraun"
}
```

Merge failure on top of:

29e12c30b2 Trac #33293: checking doctest output is too slow

3538db804f Trac #33287: make iter(ZZ^n) useful

95d62c119f Trac #33279: Put derivations over function fields in the framework of RingDerivation

a75ff8e968 Trac #33267: Improve speed of sum_of_* for CombinatorialFreeModule

a697f74ccf Trac #33261: .complement() treats bipartite graphs as generic

505e7cd991 Trac #33237: membership testing for ideals of quotient rings

b2bb4a16f9 Trac #33171: fix and activate pycodestyle E713

706626b427 Trac #33000: Remove some imports from sage.rings.all

9608d61a75 Trac #32958: findstat: enforce limit on how many elements to compute

7f5bdc5bbc Trac #32789: Fix spkg-configure.m4 for singular

8c7beae366 Trac #32465: Refactor {Matrix,Vector}_double_dense through ..._numpy_dense, add ..._numpy_integer_dense

537d9a8e7e Trac #31320: Coercion issue with Laurent polynomial rings

15f2fed8a7 Trac #30695: Padic slice method fails on exact zeros for certain inputs

ff40ba0043 Trac #12595: Add doctest for eigenmatrix of complex floating-point matrix

e4f9347fa4 Trac #33350: remove traces of six

24f0f4eeca Trac #33339: Use latest dev docker build for documentation workflow

03d78e2ff6 Trac #32966: tox / GH Actions: Add ubuntu variants using ppa:ubuntu-toolchain-r

22221ae2bb Trac #33174: Unreachable code in sage/graphs/base/c_graph.pyx

ddd2ab1e85 Trac #33163: various lgtm suggestions

83c2a60a36 Trac #33133: Add pictures to scatter_plot documentation

44fb492b48 Trac #33115: Re-run bootstrap when an install-requires.txt or package-version.txt has changed

1dda73e985 Trac #33110: Some performance improvements in the manifolds code

f6aff898e1 Trac #33035: random doctest failure in src/sage/tests/book_stein_ent.py

69ea2e5159 Trac #32988: Deprecate sage.structure.graphics_file

91710c39f7 Trac #32912: Add pictures to disk.py

f413b85fc5 Trac #32264: Convenience syntax for quaternion ideals

92dea6ac0a Trac #31758: State global i or I is a number field element (and no longer in the symbolic ring)

e8c27b5fb6 Trac #31005: Add traceback information to exceptions during docbuild

cd31b18f04 Trac #30763: improve setting global options to None

8b63606d29 Trac #24279: Remove the experimental code for `RelativeFiniteFieldExtension`

44cd8f8580 Trac #33324: pycodestyle cleaning in discrete Fourier transforms

5791dba147 Trac #33314: pycodestyle cleanup of phc interface

708efc2b48 Trac #33307: Fix empty section display on prerequisites doc page

9a9c821782 Trac #33302: fpylll might not find system-wide fplll's strategies json

c10d7bb3d7 Trac #33301: pycodestyle formatting in sage_docbuild

90ec7681c2 Trac #33298: pycodestyle cleaning in rings/valuations/

edad8daffc Trac #33297: some details in src/bin scripts

01e86774fe Trac #33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19

d026799042 Trac #33275: Bug fixes for finitely presented graded modules (#32505)

2e1f8d27ec Trac #33264: Define `x` as symbolic variable in many `animate` examples

5bdf5dd19a Trac #33263: Add github action running on each push

959ff7a3df Trac #33306: tox.ini: Linux platform updates

10a3cd92d1 Trac #33260: Fix bug in .perfect_matchings() for BipartiteGraph

20684fe0d6 Trac #33257: fix a bug in multiple zeta values

8326dee9e8 Trac #33256: buffer.py: make files readonly only when possible

7f8b2684ba Trac #33123: Move construction methods to Polyhedron_base5

826061adbb Updated [SageMath](SageMath) version to 9.6.beta1



merge was not clean: conflicts in src/sage_docbuild/__init__.py



---

archive/issue_comments_470898.json:
```json
{
    "body": "For reference, with this branch on top of the above I see in `src/sage_docbuild/__init__.py`\n\n```\n\n<<<<<<< HEAD\n    def pdf(self):\n        \"\"\"\n        Install in the directory one level up to website_dir a symlink to the\n        directory containing pdf files. This symlink is necessary to access\n        pdf documentation files within Jupyter (see trac #33206).\n        \"\"\"\n        super().pdf()\n\n        html_output_dir = self._output_dir('html')\n        pdf_doc_dir = os.path.join(SAGE_DOC, 'pdf')\n\n        # relative path is preferable for symlinks\n        dst = os.path.join(html_output_dir, '..')\n        relpath = os.path.relpath(pdf_doc_dir, dst)\n        try:\n            os.symlink(relpath, os.path.join(dst, 'pdf'))\n        except FileExistsError:\n            pass\n=======\n        root_index_file = os.path.join(html_output_dir, '../../../index.html')\n        shutil.copy2(os.path.join(SAGE_DOC_SRC, self.lang, 'website', 'root_index.html'),\n                     root_index_file)\n>>>>>>> cc0e3bf3abfb1808c32f81f15db787b83ab7ce1c\n```\nIt's been a while since I've done a merge conflict, so I dare not touch it.",
    "created_at": "2022-02-17T01:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470898",
    "user": "https://github.com/strogdon"
}
```

For reference, with this branch on top of the above I see in `src/sage_docbuild/__init__.py`

```

<<<<<<< HEAD
    def pdf(self):
        """
        Install in the directory one level up to website_dir a symlink to the
        directory containing pdf files. This symlink is necessary to access
        pdf documentation files within Jupyter (see trac #33206).
        """
        super().pdf()

        html_output_dir = self._output_dir('html')
        pdf_doc_dir = os.path.join(SAGE_DOC, 'pdf')

        # relative path is preferable for symlinks
        dst = os.path.join(html_output_dir, '..')
        relpath = os.path.relpath(pdf_doc_dir, dst)
        try:
            os.symlink(relpath, os.path.join(dst, 'pdf'))
        except FileExistsError:
            pass
=======
        root_index_file = os.path.join(html_output_dir, '../../../index.html')
        shutil.copy2(os.path.join(SAGE_DOC_SRC, self.lang, 'website', 'root_index.html'),
                     root_index_file)
>>>>>>> cc0e3bf3abfb1808c32f81f15db787b83ab7ce1c
```
It's been a while since I've done a merge conflict, so I dare not touch it.



---

archive/issue_comments_470899.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-02-17T02:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470899",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_470900.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-02-17T02:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470900",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_470901.json:
```json
{
    "body": "This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager. This seems so from the generated comment reporting the merge conflict above. I think this is good because this reduces the release manager's burden. \n\nThen it would be convenient to authors and perhaps necessary that the release manager's current branch is available somewhere.",
    "created_at": "2022-02-17T02:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470901",
    "user": "https://github.com/kwankyu"
}
```

This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager. This seems so from the generated comment reporting the merge conflict above. I think this is good because this reduces the release manager's burden. 

Then it would be convenient to authors and perhaps necessary that the release manager's current branch is available somewhere.



---

archive/issue_comments_470902.json:
```json
{
    "body": "Instead of forcing authors to resolve merge conflicts right away, they may be noticed that their branches will not be merged until after the next beta. So they can wait for the next beta and work on the merge conflicts then.",
    "created_at": "2022-02-17T02:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470902",
    "user": "https://github.com/kwankyu"
}
```

Instead of forcing authors to resolve merge conflicts right away, they may be noticed that their branches will not be merged until after the next beta. So they can wait for the next beta and work on the merge conflicts then.



---

archive/issue_comments_470903.json:
```json
{
    "body": "Replying to [comment:93 klee]:\n> This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager.\n\n\nThere's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to \"needs_work\".\n\nWhat is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available.",
    "created_at": "2022-02-17T07:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470903",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:93 klee]:
> This ticket might be the first one to encounter with the new policy introduced recently. Namely, the ticket authors now have responsibility of resolving conflicts with the branch of the release manager.


There's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to "needs_work".

What is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available.



---

archive/issue_comments_470904.json:
```json
{
    "body": "For reference, this code is in https://github.com/sagemath/git-trac-command/blob/master/git_trac/releasemgr/app.py#L212",
    "created_at": "2022-02-17T07:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470904",
    "user": "https://github.com/mkoeppe"
}
```

For reference, this code is in https://github.com/sagemath/git-trac-command/blob/master/git_trac/releasemgr/app.py#L212



---

archive/issue_comments_470905.json:
```json
{
    "body": "Replying to [comment:96 mkoeppe]:\n> There's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to \"needs_work\".\n> \n> What is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. \n> \n\n\nI was aware of the update in the release manager scripts. \n\nI thought that previously, the merge conflict notices that I received from the release manager were always against the latest new beta, not against with the release manager's current branch that I don't have access to. But apparently I thought wrong.",
    "created_at": "2022-02-17T09:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470905",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:96 mkoeppe]:
> There's no new policy; whenever the release manager encountered a merge conflict, the ticket was set back to "needs_work".
> 
> What is new is that the updated release manager scripts now provide some information regarding the conflict. Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. 
> 


I was aware of the update in the release manager scripts. 

I thought that previously, the merge conflict notices that I received from the release manager were always against the latest new beta, not against with the release manager's current branch that I don't have access to. But apparently I thought wrong.



---

archive/issue_comments_470906.json:
```json
{
    "body": "Replying to [comment:96 mkoeppe]:\n> Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. \n\n\nIf the author chooses to address it right away, is there an easy way to find out which ticket in the long list of the tickets has merge conflict with the present ticket? For me, it was tedious work to find this out, without access to the release manager's branch.",
    "created_at": "2022-02-17T09:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470906",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:96 mkoeppe]:
> Ticket authors can choose whether to address it when this comes in, or when the next beta becomes available. 


If the author chooses to address it right away, is there an easy way to find out which ticket in the long list of the tickets has merge conflict with the present ticket? For me, it was tedious work to find this out, without access to the release manager's branch.



---

archive/issue_comments_470907.json:
```json
{
    "body": "The release manager's develop branch is at:\n\n- https://github.com/vbraun/sage/tree/develop",
    "created_at": "2022-02-17T11:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470907",
    "user": "https://github.com/slel"
}
```

The release manager's develop branch is at:

- https://github.com/vbraun/sage/tree/develop



---

archive/issue_comments_470908.json:
```json
{
    "body": "Replying to [comment:100 slelievre]:\n> The release manager's develop branch is at:\n> \n> - https://github.com/vbraun/sage/tree/develop\n\n\nThanks. I added that to my repo as git remote with name `vbraun` :)",
    "created_at": "2022-02-17T13:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470908",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:100 slelievre]:
> The release manager's develop branch is at:
> 
> - https://github.com/vbraun/sage/tree/develop


Thanks. I added that to my repo as git remote with name `vbraun` :)



---

archive/issue_comments_470909.json:
```json
{
    "body": "By the way, it is nice to see the Sage documentation right from the status badge!",
    "created_at": "2022-02-17T13:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470909",
    "user": "https://github.com/kwankyu"
}
```

By the way, it is nice to see the Sage documentation right from the status badge!



---

archive/issue_comments_470910.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-21T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470910",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087911.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-21T21:56:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33072#event-87911"
}
```



---

archive/issue_comments_470911.json:
```json
{
    "body": "Follow-up = #33529",
    "created_at": "2022-03-19T01:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33072#issuecomment-470911",
    "user": "https://github.com/mkoeppe"
}
```

Follow-up = #33529
