# Issue 22141: Add Jupyter kernel for Singular

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-02-13 13:12:16

CC:  nthiery dimpase




---

Comment by git created at 2017-02-21 12:24:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-02-21 13:43:36

Changing status from new to needs_review.


---

Comment by dimpase created at 2017-02-22 16:01:40

appears to work on Linux. I'll check on OSX too, then we'll see (building/running `surf` might need testing in particular).


---

Comment by dimpase created at 2017-02-22 17:19:29

by the way, I see the following error messages on console:

```
[IPKernelApp] ERROR | No such comm target registered: jupyter.widget.version
// ** Could not find dynamic library: p_Procs_FieldZp.so (path /home/dima/Sage/sage-dev/local/bin/../libexec/singular/MOD:/home/dima/Sage/sage-dev/local/libexec/singular/MOD)
// ** Error message from system: /home/dima/Sage/sage-dev/local/bin/../libexec/singular/MOD/p_Procs_FieldZp.so: undefined symbol: omFreeToPageFault
// ** Singular will work properly, but much slower.
// ** See the INSTALL section in the Singular manual for details.
```



---

Comment by dimpase created at 2017-02-22 18:53:13

A dodgy macro `[RS_CHECK_LIB(m, main)` in `configure.in` leads to inability to build `surf` on OSX:


```
checking for main in -lm... no
configure: error: Sorry: can't link with library libm.\(a\|so\).
```


should be easy to fix...


---

Comment by dimpase created at 2017-02-22 18:53:13

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-02-23 07:28:52

Replying to [comment:7 dimpase]:
> by the way, I see the following error messages on console:
> {{{
> // ** Could not find dynamic library: p_Procs_FieldZp.so (path /home/dima/Sage/sage-dev/local/bin/../libexec/singular/MOD:/home/dima/Sage/sage-dev/local/libexec/singular/MOD)
> // ** Error message from system: /home/dima/Sage/sage-dev/local/bin/../libexec/singular/MOD/p_Procs_FieldZp.so: undefined symbol: omFreeToPageFault
> // ** Singular will work properly, but much slower.
> // ** See the INSTALL section in the Singular manual for details.
> }}}

That's a known issue upstream.


---

Comment by jdemeyer created at 2017-02-23 08:30:35

Replying to [comment:8 dimpase]:
> A dodgy macro `[RS_CHECK_LIB(m, main)` in `configure.in` leads to inability to build `surf` on OSX:
> 
> {{{
> checking for main in -lm... no
> configure: error: Sorry: can't link with library libm.\(a\|so\).
> }}}
> 
> should be easy to fix...

The problem can be solved with `--disable-cups`. But it still leads to trouble further down, because of a missing `-ljpeg`, which is not part of Sage.


---

Comment by git created at 2017-02-23 08:37:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-02-23 08:37:52

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2017-02-23 08:52:39

shouldn't then `surf` be downgraded to `experimental`?


---

Comment by jdemeyer created at 2017-02-23 08:59:40

Replying to [comment:13 dimpase]:
> shouldn't then `surf` be downgraded to `experimental`?

Well, the package works, it's just that it has dependencies which are not in Sage. So I don't know what the policy is for that...


---

Comment by dimpase created at 2017-02-23 09:03:47

shouldn't an optional package be available on all sage-supported platforms?


---

Comment by git created at 2017-02-23 09:10:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2017-02-23 10:51:48

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2017-02-23 10:51:48

OK.


---

Comment by vbraun created at 2017-02-23 13:43:53

Reviewer name


---

Comment by vbraun created at 2017-02-23 13:43:53

Changing status from positive_review to needs_work.


---

Comment by dimpase created at 2017-02-23 14:21:07

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-02-26 15:34:10

Resolution: fixed


---

Comment by jdemeyer created at 2017-03-11 09:32:08

Replying to [comment:15 dimpase]:
> shouldn't an optional package be available on all sage-supported platforms?

For the record, `rst2ipynb` is also optional is not "available on all sage-supported platforms".


---

Comment by dimpase created at 2017-03-11 09:40:33

Replying to [comment:21 jdemeyer]:
> Replying to [comment:15 dimpase]:
> > shouldn't an optional package be available on all sage-supported platforms?
> 
> For the record, `rst2ipynb` is also optional is not "available on all sage-supported platforms".

Really? Why?


---

Comment by jdemeyer created at 2017-03-11 14:20:22

Replying to [comment:22 dimpase]:
> Replying to [comment:21 jdemeyer]:
> > Replying to [comment:15 dimpase]:
> > > shouldn't an optional package be available on all sage-supported platforms?
> > 
> > For the record, `rst2ipynb` is also optional is not "available on all sage-supported platforms".
> 
> Really? Why?

Because it depends on `pandoc` which is not part of Sage.
