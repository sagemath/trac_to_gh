# Issue 28725: Have the Sage version number present on every page of the documentation

archive/issues_028725.json:
```json
{
    "body": "Keywords: version website\n\nGenerally, documentation pages are reached by googling, and it would be convenient to have the Sage version number on every page of the documentation. \n\nWhile this is present on the first page of the references, on the top left corner here: https://doc.sagemath.org/html/en/reference/index.html#discrete-mathematics , it is not present on every other page. For example, a random page that appeared after googling 'sage matrices': \nhttp://doc.sagemath.org/html/en/reference/matrices/sage/matrix/constructor.html\n\nThis would especially be convenient when previous version documentation is archived somewhere, to know what version number it corresponds to. \n\nFor example, version 9.0 of sage has the following page for \"named permutation groups\": http://doc.sagemath.org/html/en/reference/groups/sage/groups/perm_gps/permgroup_named.html \nwhile an archived docpage on some other website has this, which has  a few differences from the original: https://www.math.sciences.univ-nantes.fr/~sorger/chow/html/en/reference/groups/sage/groups/perm_gps/permgroup_named.html\n\nNow, the archived version seems to be v6.4.1, found after clicking \"index\" on the top right: https://www.math.sciences.univ-nantes.fr/~sorger/chow/html/en/reference/genindex.html\n\nHowever, this is not apparent at all while looking at the docs. \n\nSo, basically: would like to have the Sage version number on every page of the documentation somewhere. \n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28962\n\n",
    "created_at": "2020-01-06T19:03:07Z",
    "labels": [
        "component: documentation",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Have the Sage version number present on every page of the documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28725",
    "user": "https://github.com/Tinkidinki"
}
```
Keywords: version website

Generally, documentation pages are reached by googling, and it would be convenient to have the Sage version number on every page of the documentation. 

While this is present on the first page of the references, on the top left corner here: https://doc.sagemath.org/html/en/reference/index.html#discrete-mathematics , it is not present on every other page. For example, a random page that appeared after googling 'sage matrices': 
http://doc.sagemath.org/html/en/reference/matrices/sage/matrix/constructor.html

This would especially be convenient when previous version documentation is archived somewhere, to know what version number it corresponds to. 

For example, version 9.0 of sage has the following page for "named permutation groups": http://doc.sagemath.org/html/en/reference/groups/sage/groups/perm_gps/permgroup_named.html 
while an archived docpage on some other website has this, which has  a few differences from the original: https://www.math.sciences.univ-nantes.fr/~sorger/chow/html/en/reference/groups/sage/groups/perm_gps/permgroup_named.html

Now, the archived version seems to be v6.4.1, found after clicking "index" on the top right: https://www.math.sciences.univ-nantes.fr/~sorger/chow/html/en/reference/genindex.html

However, this is not apparent at all while looking at the docs. 

So, basically: would like to have the Sage version number on every page of the documentation somewhere. 


Issue created by migration from https://trac.sagemath.org/ticket/28962





---

archive/issue_comments_405237.json:
```json
{
    "body": "The version number is actually in the title of the HTML page (possibly hover the tab in your browser to fully see it), but I agree it would be nice if this was more visible.",
    "created_at": "2020-01-06T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405237",
    "user": "https://github.com/mwageringel"
}
```

The version number is actually in the title of the HTML page (possibly hover the tab in your browser to fully see it), but I agree it would be nice if this was more visible.



---

archive/issue_comments_405238.json:
```json
{
    "body": "A patch like this helps, but it could probably be tinkered with:\n\n```diff\ndiff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py\nindex 058fc01101..fdc8556550 100644\n--- a/src/doc/en/reference/conf_sub.py\n+++ b/src/doc/en/reference/conf_sub.py\n@@ -39,14 +39,14 @@ if not title:\n title = title.replace(u'`', u'$')\n \n # General information about the project.\n-project = u'Sage Reference Manual: ' + title\n+project = u'Sage {} Reference Manual: '.format(release) + title\n \n # The name for this set of Sphinx documents.  If None, it defaults to\n # \"<project> v<release> documentation\".\n-html_title = u'Sage Reference Manual v' + release + ': ' + title\n+html_title = project\n \n # A shorter title for the navigation bar.  Default is the same as html_title.\n-html_short_title = title\n+html_short_title = project\n \n # HTML theme (e.g., 'default', 'sphinxdoc').  The pages for the\n # reference manual use a custom theme, a slight variant on the 'sage'\n```\n",
    "created_at": "2020-01-06T23:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405238",
    "user": "https://github.com/jhpalmieri"
}
```

A patch like this helps, but it could probably be tinkered with:

```diff
diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
index 058fc01101..fdc8556550 100644
--- a/src/doc/en/reference/conf_sub.py
+++ b/src/doc/en/reference/conf_sub.py
@@ -39,14 +39,14 @@ if not title:
 title = title.replace(u'`', u'$')
 
 # General information about the project.
-project = u'Sage Reference Manual: ' + title
+project = u'Sage {} Reference Manual: '.format(release) + title
 
 # The name for this set of Sphinx documents.  If None, it defaults to
 # "<project> v<release> documentation".
-html_title = u'Sage Reference Manual v' + release + ': ' + title
+html_title = project
 
 # A shorter title for the navigation bar.  Default is the same as html_title.
-html_short_title = title
+html_short_title = project
 
 # HTML theme (e.g., 'default', 'sphinxdoc').  The pages for the
 # reference manual use a custom theme, a slight variant on the 'sage'
```




---

archive/issue_comments_405239.json:
```json
{
    "body": "Replying to [comment:2 jhpalmieri]:\n> A patch like this helps, but it could probably be tinkered with:\n> {{{\n> #!diff\n> diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py\n> index 058fc01101..fdc8556550 100644\n> --- a/src/doc/en/reference/conf_sub.py\n> +++ b/src/doc/en/reference/conf_sub.py\n> `@``@` -39,14 +39,14 `@``@` if not title:\n>  title = title.replace(u'`', u'$')\n>  \n>  # General information about the project.\n> -project = u'Sage Reference Manual: ' + title\n> +project = u'Sage {} Reference Manual: '.format(release) + title\n>  \n>  # The name for this set of Sphinx documents.  If None, it defaults to\n>  # \"<project> v<release> documentation\".\n> -html_title = u'Sage Reference Manual v' + release + ': ' + title\n> +html_title = project\n>  \n>  # A shorter title for the navigation bar.  Default is the same as html_title.\n> -html_short_title = title\n> +html_short_title = project\n>  \n>  # HTML theme (e.g., 'default', 'sphinxdoc').  The pages for the\n>  # reference manual use a custom theme, a slight variant on the 'sage'\n> }}}\n\nThank you! This looks good. I'm a little new to this - so can you confirm if this is how it works?\n\nI did a checkout ticket number, and a local branch got created. The code changes that you mention in this comment were not present in it though. \n\nAssuming whatever you wrote in this comment is the way to fix the issue, how does one go about fixing it?\n\n1) Do I just make the changes on my local branch and then push?\n2) How can I see how the HTML page will look locally first?\n3) What are the steps for it to finally reflect in the actual documentation?\n\nIf any of those questions can be answered by just reading a resource, please just point me there. \n\nThank you very much!",
    "created_at": "2020-01-08T18:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405239",
    "user": "https://github.com/Tinkidinki"
}
```

Replying to [comment:2 jhpalmieri]:
> A patch like this helps, but it could probably be tinkered with:
> {{{
> #!diff
> diff --git a/src/doc/en/reference/conf_sub.py b/src/doc/en/reference/conf_sub.py
> index 058fc01101..fdc8556550 100644
> --- a/src/doc/en/reference/conf_sub.py
> +++ b/src/doc/en/reference/conf_sub.py
> `@``@` -39,14 +39,14 `@``@` if not title:
>  title = title.replace(u'`', u'$')
>  
>  # General information about the project.
> -project = u'Sage Reference Manual: ' + title
> +project = u'Sage {} Reference Manual: '.format(release) + title
>  
>  # The name for this set of Sphinx documents.  If None, it defaults to
>  # "<project> v<release> documentation".
> -html_title = u'Sage Reference Manual v' + release + ': ' + title
> +html_title = project
>  
>  # A shorter title for the navigation bar.  Default is the same as html_title.
> -html_short_title = title
> +html_short_title = project
>  
>  # HTML theme (e.g., 'default', 'sphinxdoc').  The pages for the
>  # reference manual use a custom theme, a slight variant on the 'sage'
> }}}

Thank you! This looks good. I'm a little new to this - so can you confirm if this is how it works?

I did a checkout ticket number, and a local branch got created. The code changes that you mention in this comment were not present in it though. 

Assuming whatever you wrote in this comment is the way to fix the issue, how does one go about fixing it?

1) Do I just make the changes on my local branch and then push?
2) How can I see how the HTML page will look locally first?
3) What are the steps for it to finally reflect in the actual documentation?

If any of those questions can be answered by just reading a resource, please just point me there. 

Thank you very much!



---

archive/issue_comments_405240.json:
```json
{
    "body": "Right, I didn't post a branch, so checking out this ticket doesn't do anything, as you observed. You can make the changes on your local branch (for example, click the \"Unified\" button on my proposed patch, select the patch, paste to a file, and do `git apply FILE`). Once you've done that, build the documentation with `make`. The main documentation will be in `local/share/doc/sage/html/en`, so you could for example open `local/share/doc/sage/html/en/index.html` in a browser. You should also check non-English documentation by opening files in `local/share/doc/sage/html/[LANGUAGE]/` for appropriate values of `[LANGUAGE]`.",
    "created_at": "2020-01-08T19:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405240",
    "user": "https://github.com/jhpalmieri"
}
```

Right, I didn't post a branch, so checking out this ticket doesn't do anything, as you observed. You can make the changes on your local branch (for example, click the "Unified" button on my proposed patch, select the patch, paste to a file, and do `git apply FILE`). Once you've done that, build the documentation with `make`. The main documentation will be in `local/share/doc/sage/html/en`, so you could for example open `local/share/doc/sage/html/en/index.html` in a browser. You should also check non-English documentation by opening files in `local/share/doc/sage/html/[LANGUAGE]/` for appropriate values of `[LANGUAGE]`.



---

archive/issue_comments_405241.json:
```json
{
    "body": "I get the following error when I try to apply the patch:\n\n\n```\nerror: patch with only garbage at line 3\n```\n\n\nAs an aside, for small changes, is there an advantage to applying a patch over normally editing the file?",
    "created_at": "2020-01-09T13:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405241",
    "user": "https://github.com/Tinkidinki"
}
```

I get the following error when I try to apply the patch:


```
error: patch with only garbage at line 3
```


As an aside, for small changes, is there an advantage to applying a patch over normally editing the file?



---

archive/issue_comments_405242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-14T10:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_405243.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-14T15:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405243",
    "user": "https://github.com/Tinkidinki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_405244.json:
```json
{
    "body": "Tested that the code works on random English references pages. Other languages did not seem to have refererences pages - only single page tutorials. \n\nCan anyone review if this is okay?",
    "created_at": "2020-01-14T15:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405244",
    "user": "https://github.com/Tinkidinki"
}
```

Tested that the code works on random English references pages. Other languages did not seem to have refererences pages - only single page tutorials. 

Can anyone review if this is okay?



---

archive/issue_comments_405245.json:
```json
{
    "body": "Thank you. This looks good to me. The documentation files of the other languages already include the version number, so nothing needs to be changed there.\n\nI have squashed your commits. Please add your full name to the Authors field of this ticket.\n----\nNew commits:",
    "created_at": "2020-02-03T19:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405245",
    "user": "https://github.com/mwageringel"
}
```

Thank you. This looks good to me. The documentation files of the other languages already include the version number, so nothing needs to be changed there.

I have squashed your commits. Please add your full name to the Authors field of this ticket.
----
New commits:



---

archive/issue_comments_405246.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-10T21:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405246",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_405247.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-02-10T21:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405247",
    "user": "https://github.com/mwageringel"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_405248.json:
```json
{
    "body": "Actually, there is a failing doctest.",
    "created_at": "2020-02-10T21:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405248",
    "user": "https://github.com/mwageringel"
}
```

Actually, there is a failing doctest.



---

archive/issue_comments_405249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-10T21:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_405250.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-02-10T21:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405250",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_405251.json:
```json
{
    "body": "Should be fixed now. If the patchbot is green, this can be set back to positive.",
    "created_at": "2020-02-10T21:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405251",
    "user": "https://github.com/mwageringel"
}
```

Should be fixed now. If the patchbot is green, this can be set back to positive.



---

archive/issue_comments_405252.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-11T22:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405252",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_026573.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-17T23:15:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28725#event-26573"
}
```



---

archive/issue_comments_405253.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-02-17T23:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28725#issuecomment-405253",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
