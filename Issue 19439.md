# Issue 19439: Bug in Polynomial_element_generic_sparse.gcd

Issue created by migration from Trac.

Original creator: bruno

Original creation time: 2015-12-07 16:14:22

Keywords: polynomial, gcd

In ticket #15790, I introduced the following bug:


```python
sage: R.<x> = PolynomialRing(ZZ, sparse=True)
sage: S.<y> = R[]
sage: x.gcd(y)
x
sage: x.gcd(3)
NotImplementedError (most recent call last)
...
NotImplementedError:
```


The bug comes from not testing the parents.


---

Comment by bruno created at 2015-12-07 16:19:18

New commits:


---

Comment by bruno created at 2015-12-07 16:19:18

Changing status from new to needs_review.


---

Comment by lftabera created at 2016-02-25 14:16:33

Changing status from needs_review to needs_info.


---

Comment by lftabera created at 2016-02-25 14:16:33

why not use the coercion decorator?


```
`@`coerce_binop
def gcd
```


With that change:


```
sage: R.<x> = PolynomialRing(ZZ,sparse=True)
sage: S.<y> = R[]
sage: x.gcd(y)
1
sage: _.parent() is S
True
sage: (6*x).gcd(9)
3
sage: _.parent() is R
True
```


Is there any reason I am unaware to perform manually the coercion?


---

Comment by git created at 2016-03-02 09:28:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bruno created at 2016-03-02 09:30:49

Replying to [comment:3 lftabera]:
> why not use the coercion decorator?
>
> ...
> 
> Is there any reason I am unaware to perform manually the coercion?

No reason! Thanks for spotting this. I sometimes make things way more complicated than necessary.


---

Comment by bruno created at 2016-03-02 09:30:49

Changing status from needs_info to needs_review.


---

Comment by lftabera created at 2016-03-02 18:35:25

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-03-03 08:29:03

Resolution: fixed
