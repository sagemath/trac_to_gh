# Issue 19713: docbuild of single file, allow to include underscore method

archive/issues_019713.json:
```json
{
    "body": "The hidden doc can be build using\n\n```\nsage -docbuild -u\n```\n\nbut this does not work for a single file. Let us allow that.\n\nlater aim: use that in a patchbot plugin.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19950\n\n",
    "created_at": "2016-01-23T18:45:30Z",
    "labels": [
        "doctest framework",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "docbuild of single file, allow to include underscore method",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19713",
    "user": "@fchapoton"
}
```
The hidden doc can be build using

```
sage -docbuild -u
```

but this does not work for a single file. Let us allow that.

later aim: use that in a patchbot plugin.

Issue created by migration from https://trac.sagemath.org/ticket/19950





---

archive/issue_comments_270994.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-23T18:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270994",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_270995.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-23T18:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270995",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_270996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-27T19:50:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270997.json:
```json
{
    "body": "Simple enought for even me to review.",
    "created_at": "2016-01-28T12:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270997",
    "user": "@jm58660"
}
```

Simple enought for even me to review.



---

archive/issue_comments_270998.json:
```json
{
    "body": "Stupid question, but... \n\n\n```\n$ make doc-clean\n . . .\nSage build/upgrade complete!\n$ ./sage -docbuild -u file=src/sage/graphs/digraph.py  html\n[html     ] loading pickled environment... not yet created\n . . .\nBuild finished. The built documents can be found in /home/jm58660/.sage/docbuild/digraph/output/html\n$ find . -name '*digraph*html'\n$\n```\n\n\nWhere is the result?",
    "created_at": "2016-01-28T14:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270998",
    "user": "@jm58660"
}
```

Stupid question, but... 


```
$ make doc-clean
 . . .
Sage build/upgrade complete!
$ ./sage -docbuild -u file=src/sage/graphs/digraph.py  html
[html     ] loading pickled environment... not yet created
 . . .
Build finished. The built documents can be found in /home/jm58660/.sage/docbuild/digraph/output/html
$ find . -name '*digraph*html'
$
```


Where is the result?



---

archive/issue_comments_270999.json:
```json
{
    "body": "The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.",
    "created_at": "2016-01-28T18:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-270999",
    "user": "@fchapoton"
}
```

The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.



---

archive/issue_comments_271000.json:
```json
{
    "body": "Replying to [comment:5 chapoton]:\n> The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.\n\nDuh, why not in `sage`-directory? And sorry for dumb question, should have used `strace`. Or read the output...\n\nWhen I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?\n\nThis does not put functions to index generated by `{INDEX_OF_METHODS}`. I think that it is not needed, but I mention this in any case.\n\nSeems to work. I will read the code lines little later.",
    "created_at": "2016-01-28T18:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271000",
    "user": "@jm58660"
}
```

Replying to [comment:5 chapoton]:
> The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.

Duh, why not in `sage`-directory? And sorry for dumb question, should have used `strace`. Or read the output...

When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?

This does not put functions to index generated by `{INDEX_OF_METHODS}`. I think that it is not needed, but I mention this in any case.

Seems to work. I will read the code lines little later.



---

archive/issue_comments_271001.json:
```json
{
    "body": "Replying to [comment:6 jmantysalo]:\n> Replying to [comment:5 chapoton]:\n> > The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.\n> \n> Duh, why not in `sage`-directory? \n\nThere is no reason to assume that the user has write access to the Sage directory.\n\n> When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?\n\nThe original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`",
    "created_at": "2016-01-28T19:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271001",
    "user": "@jhpalmieri"
}
```

Replying to [comment:6 jmantysalo]:
> Replying to [comment:5 chapoton]:
> > The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.
> 
> Duh, why not in `sage`-directory? 

There is no reason to assume that the user has write access to the Sage directory.

> When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?

The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`



---

archive/issue_comments_271002.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n\n> The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`\n\nHum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?",
    "created_at": "2016-01-28T19:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271002",
    "user": "@fchapoton"
}
```

Replying to [comment:7 jhpalmieri]:

> The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`

Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?



---

archive/issue_comments_271003.json:
```json
{
    "body": "Replying to [comment:8 chapoton]:\n> Replying to [comment:7 jhpalmieri]:\n> \n> > The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`\n> \n> Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?\n\nIt might work, at least if you're just relying on it to flag errors. The output may not look right if it's a Sage library file (saying `posets.is_poset` rather than `sage.combinat.posets.posets.is_poset`, for example, and I don't know if there are other problems), but the patchbot won't care about that. Have you tested it on many Sage library files?",
    "created_at": "2016-01-28T20:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271003",
    "user": "@jhpalmieri"
}
```

Replying to [comment:8 chapoton]:
> Replying to [comment:7 jhpalmieri]:
> 
> > The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`
> 
> Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?

It might work, at least if you're just relying on it to flag errors. The output may not look right if it's a Sage library file (saying `posets.is_poset` rather than `sage.combinat.posets.posets.is_poset`, for example, and I don't know if there are other problems), but the patchbot won't care about that. Have you tested it on many Sage library files?



---

archive/issue_comments_271004.json:
```json
{
    "body": "No, I have only tested that on a few Sage library files so far. Before trying\nto insert that in the patchbot, this must of course be more thoroughly tested.",
    "created_at": "2016-01-28T20:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271004",
    "user": "@fchapoton"
}
```

No, I have only tested that on a few Sage library files so far. Before trying
to insert that in the patchbot, this must of course be more thoroughly tested.



---

archive/issue_comments_271005.json:
```json
{
    "body": "Also pdf documentation builds.",
    "created_at": "2016-01-29T05:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271005",
    "user": "@jm58660"
}
```

Also pdf documentation builds.



---

archive/issue_comments_271006.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-29T05:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271006",
    "user": "@jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271007.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-30T00:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19713#issuecomment-271007",
    "user": "@vbraun"
}
```

Resolution: fixed
