# Issue 19564: LatticePosets: Add pseudocomplements

archive/issues_019564.json:
```json
{
    "body": "CC:  @dkrenn\n\nKeywords: lattice\n\nThis ticket adds a function to compute pseudocomplements of an element of meet-semilattice and a function to check whether a lattice is pseudocomplemented.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19801\n\n",
    "created_at": "2015-12-29T20:33:34Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "LatticePosets: Add pseudocomplements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19564",
    "user": "@jm58660"
}
```
CC:  @dkrenn

Keywords: lattice

This ticket adds a function to compute pseudocomplements of an element of meet-semilattice and a function to check whether a lattice is pseudocomplemented.


Issue created by migration from https://trac.sagemath.org/ticket/19801





---

archive/issue_comments_268820.json:
```json
{
    "body": "This is missing from the index of functions. As #19123 is stalled, I think I will later make a new ticket only for the index.\n----\nNew commits:",
    "created_at": "2015-12-29T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268820",
    "user": "@jm58660"
}
```

This is missing from the index of functions. As #19123 is stalled, I think I will later make a new ticket only for the index.
----
New commits:



---

archive/issue_comments_268821.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-29T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268821",
    "user": "@jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_268822.json:
```json
{
    "body": "Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.",
    "created_at": "2016-01-04T17:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268822",
    "user": "@jm58660"
}
```

Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.



---

archive/issue_comments_268823.json:
```json
{
    "body": "Replying to [comment:3 jmantysalo]:\n> Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.\n\nI had a quick look; here are a first few comments:\n\n1. Everywhere: I believe the term \"maximal element\" is wrong; it should be \"greatest element\" (Wikipedia confirms this).\n\n2. Link to [https://en.wikipedia.org/wiki/Pseudocomplement](https://en.wikipedia.org/wiki/Pseudocomplement) in the doc.\n\n3. `None` vs. raising an exception if pseudocomplement does not exist. Although I prefer the exception variant; it seems that `None` seems to be the design choice in the poset-files. Am I right? However, this should definitely be documented in an OUTPUT-block; so include OUTPUT-blocks.\n\n4. PEP8: IMHO it should be: `{0: [1, 2], 1: [3], 2: [4], 3: [4]}` (spaces after `:`)\n\n5. `None not in [H.pseudocomplement(e) for e in H]` is inefficient, since the full list is created. You can use `all(H.pseudocomplement(e) is not None for e in H)` instead.",
    "created_at": "2016-01-05T18:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268823",
    "user": "@dkrenn"
}
```

Replying to [comment:3 jmantysalo]:
> Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.

I had a quick look; here are a first few comments:

1. Everywhere: I believe the term "maximal element" is wrong; it should be "greatest element" (Wikipedia confirms this).

2. Link to [https://en.wikipedia.org/wiki/Pseudocomplement](https://en.wikipedia.org/wiki/Pseudocomplement) in the doc.

3. `None` vs. raising an exception if pseudocomplement does not exist. Although I prefer the exception variant; it seems that `None` seems to be the design choice in the poset-files. Am I right? However, this should definitely be documented in an OUTPUT-block; so include OUTPUT-blocks.

4. PEP8: IMHO it should be: `{0: [1, 2], 1: [3], 2: [4], 3: [4]}` (spaces after `:`)

5. `None not in [H.pseudocomplement(e) for e in H]` is inefficient, since the full list is created. You can use `all(H.pseudocomplement(e) is not None for e in H)` instead.



---

archive/issue_comments_268824.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-05T18:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268824",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_268825.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-05T20:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268825",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268826.json:
```json
{
    "body": "1) Changed. 2) Done. I added it to both functions, I guess it makes no harm. 5) Of course, corrected. \n\n4) Yes. And in any case `x={1:[2,3]}; x` outputs `{1: [2, 3]}` so it makes sense.\n\n3) Yep, for example `top()` returns the top element of the poset or `None`. I guess this could be argued to both sides.\n\n6) Thanks!",
    "created_at": "2016-01-05T20:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268826",
    "user": "@jm58660"
}
```

1) Changed. 2) Done. I added it to both functions, I guess it makes no harm. 5) Of course, corrected. 

4) Yes. And in any case `x={1:[2,3]}; x` outputs `{1: [2, 3]}` so it makes sense.

3) Yep, for example `top()` returns the top element of the poset or `None`. I guess this could be argued to both sides.

6) Thanks!



---

archive/issue_comments_268827.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-05T20:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268827",
    "user": "@jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_268828.json:
```json
{
    "body": "Some more comments (sorry I've missed some things last time):\n\n7. lattices.py, L261: ident to after \"(\" of line above and PEP8-ify.\n\n8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.\n\n9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of\n\n```\n``element`` - an element of the lattice whose pseudocomplement is returned.\n```\n\n  I would write simply\n\n```\n``element`` - an element of the lattice\n```\n\n  Similarly in the OUTPUT-block I would rewrite\n\n```\nThe pseudocomplement of an ``element``, if it exists. Otherwise ``None``.\n```\n\n  to\n\n```\nAn element of the lattice or ``None`` if the pseudocomplement does not exist.\n```\n\n  (maybe rewrite the second part...)\n  Now you get the additional information that the element returned is from the lattice (instead of the already known fact that I get the pseudocomplement).\n\n10. hasse_diagram.py\n\n```\n[...] It may not exist, and then the function returns ``None``.\n```\n\n  This paragraph contains the actual defintion of the pseudocomplement. May the return value should be mentioned in the OUTPUT block (add an OUTPUT block to this function). INPUT/OUTPUT-block here could say that ``element`` and the returned value are integers.\n\nI hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )\n\nTest pass, doc builds and looks okay.",
    "created_at": "2016-01-06T19:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268828",
    "user": "@dkrenn"
}
```

Some more comments (sorry I've missed some things last time):

7. lattices.py, L261: ident to after "(" of line above and PEP8-ify.

8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.

9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of

```
``element`` - an element of the lattice whose pseudocomplement is returned.
```

  I would write simply

```
``element`` - an element of the lattice
```

  Similarly in the OUTPUT-block I would rewrite

```
The pseudocomplement of an ``element``, if it exists. Otherwise ``None``.
```

  to

```
An element of the lattice or ``None`` if the pseudocomplement does not exist.
```

  (maybe rewrite the second part...)
  Now you get the additional information that the element returned is from the lattice (instead of the already known fact that I get the pseudocomplement).

10. hasse_diagram.py

```
[...] It may not exist, and then the function returns ``None``.
```

  This paragraph contains the actual defintion of the pseudocomplement. May the return value should be mentioned in the OUTPUT block (add an OUTPUT block to this function). INPUT/OUTPUT-block here could say that ``element`` and the returned value are integers.

I hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )

Test pass, doc builds and looks okay.



---

archive/issue_comments_268829.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-06T19:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268829",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_268830.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-09T10:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268830",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268831.json:
```json
{
    "body": "Replying to [comment:7 dkrenn]:\n\n> I hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )\n\nBetter to do this correctly in first time. And both picky and non-picky reviewer are better than no reviewer at all.\n\n> 8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.\n\nYes, clearly.\n\n> 7. lattices.py, L261: ident to after \"(\" of line above and PEP8-ify.\n\nI corrected this, and also same for `is_pseudocomplemented()`. Actually I don't know what would be best way to make an example. They should be small but not trivial. Also 80 character limit is maybe too restrictive for examples? A picture?\n\n> 9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of\n> {{{\n> ``element`` - an element of the lattice whose pseudocomplement is returned.\n> }}}\n>   I would write simply\n> {{{\n> ``element`` - an element of the lattice\n\nOK. There is a point in this (and on comment 10 which is similar).",
    "created_at": "2016-01-09T10:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268831",
    "user": "@jm58660"
}
```

Replying to [comment:7 dkrenn]:

> I hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )

Better to do this correctly in first time. And both picky and non-picky reviewer are better than no reviewer at all.

> 8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.

Yes, clearly.

> 7. lattices.py, L261: ident to after "(" of line above and PEP8-ify.

I corrected this, and also same for `is_pseudocomplemented()`. Actually I don't know what would be best way to make an example. They should be small but not trivial. Also 80 character limit is maybe too restrictive for examples? A picture?

> 9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of
> {{{
> ``element`` - an element of the lattice whose pseudocomplement is returned.
> }}}
>   I would write simply
> {{{
> ``element`` - an element of the lattice

OK. There is a point in this (and on comment 10 which is similar).



---

archive/issue_comments_268832.json:
```json
{
    "body": "Changes look fine.\n\nlines 260, 779, 784: space after `:`. If done feel free to set it to positive.",
    "created_at": "2016-01-09T16:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268832",
    "user": "@dkrenn"
}
```

Changes look fine.

lines 260, 779, 784: space after `:`. If done feel free to set it to positive.



---

archive/issue_comments_268833.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-09T16:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268833",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268834.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-01-09T16:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268834",
    "user": "@jm58660"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_268835.json:
```json
{
    "body": "Replying to [comment:11 dkrenn]:\n\n> lines 260, 779, 784: space after `:`. If done feel free to set it to positive.\n\nDone and feeling free. `:=)`",
    "created_at": "2016-01-09T16:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268835",
    "user": "@jm58660"
}
```

Replying to [comment:11 dkrenn]:

> lines 260, 779, 784: space after `:`. If done feel free to set it to positive.

Done and feeling free. `:=)`



---

archive/issue_comments_268836.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-10T10:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19564#issuecomment-268836",
    "user": "@vbraun"
}
```

Resolution: fixed
