# Issue 19564: LatticePosets: Add pseudocomplements

Issue created by migration from https://trac.sagemath.org/ticket/19801

Original creator: jmantysalo

Original creation time: 2015-12-29 20:33:34

CC:  dkrenn

Keywords: lattice

This ticket adds a function to compute pseudocomplements of an element of meet-semilattice and a function to check whether a lattice is pseudocomplemented.



---

Comment by jmantysalo created at 2015-12-29 20:35:56

This is missing from the index of functions. As #19123 is stalled, I think I will later make a new ticket only for the index.
----
New commits:


---

Comment by jmantysalo created at 2015-12-29 20:35:56

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-01-04 17:51:50

Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.


---

Comment by dkrenn created at 2016-01-05 18:38:40

Replying to [comment:3 jmantysalo]:
> Daniel showed some signs of life, hence selected as a possible reviewer. `:=)`.

I had a quick look; here are a first few comments:

1. Everywhere: I believe the term "maximal element" is wrong; it should be "greatest element" (Wikipedia confirms this).

2. Link to [https://en.wikipedia.org/wiki/Pseudocomplement](https://en.wikipedia.org/wiki/Pseudocomplement) in the doc.

3. `None` vs. raising an exception if pseudocomplement does not exist. Although I prefer the exception variant; it seems that `None` seems to be the design choice in the poset-files. Am I right? However, this should definitely be documented in an OUTPUT-block; so include OUTPUT-blocks.

4. PEP8: IMHO it should be: `{0: [1, 2], 1: [3], 2: [4], 3: [4]}` (spaces after `:`)

5. `None not in [H.pseudocomplement(e) for e in H]` is inefficient, since the full list is created. You can use `all(H.pseudocomplement(e) is not None for e in H)` instead.


---

Comment by dkrenn created at 2016-01-05 18:38:40

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-01-05 20:11:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-05 20:17:10

1) Changed. 2) Done. I added it to both functions, I guess it makes no harm. 5) Of course, corrected. 

4) Yes. And in any case `x={1:[2,3]}; x` outputs `{1: [2, 3]}` so it makes sense.

3) Yep, for example `top()` returns the top element of the poset or `None`. I guess this could be argued to both sides.

6) Thanks!


---

Comment by jmantysalo created at 2016-01-05 20:17:10

Changing status from needs_work to needs_review.


---

Comment by dkrenn created at 2016-01-06 19:09:57

Some more comments (sorry I've missed some things last time):

7. lattices.py, L261: ident to after "(" of line above and PEP8-ify.

8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.

9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of

```
``element`` - an element of the lattice whose pseudocomplement is returned.
```

  I would write simply

```
``element`` - an element of the lattice
```

  Similarly in the OUTPUT-block I would rewrite

```
The pseudocomplement of an ``element``, if it exists. Otherwise ``None``.
```

  to

```
An element of the lattice or ``None`` if the pseudocomplement does not exist.
```

  (maybe rewrite the second part...)
  Now you get the additional information that the element returned is from the lattice (instead of the already known fact that I get the pseudocomplement).

10. hasse_diagram.py

```
[...] It may not exist, and then the function returns ``None``.
```

  This paragraph contains the actual defintion of the pseudocomplement. May the return value should be mentioned in the OUTPUT block (add an OUTPUT block to this function). INPUT/OUTPUT-block here could say that ``element`` and the returned value are integers.

I hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )

Test pass, doc builds and looks okay.


---

Comment by dkrenn created at 2016-01-06 19:10:14

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-01-09 10:29:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-09 10:39:00

Replying to [comment:7 dkrenn]:

> I hope you don't find this too picky... (on the other hand, you wanted me to review it ;) )

Better to do this correctly in first time. And both picky and non-picky reviewer are better than no reviewer at all.

> 8. INPUT-blocks in hasse_diagram.py and lattices.py: According to developer guide put a `--` instead of the `-` after the parameter name.

Yes, clearly.

> 7. lattices.py, L261: ident to after "(" of line above and PEP8-ify.

I corrected this, and also same for `is_pseudocomplemented()`. Actually I don't know what would be best way to make an example. They should be small but not trivial. Also 80 character limit is maybe too restrictive for examples? A picture?

> 9. I see the INPUT/OUTPUT-blocks more as a technical description, so instead of
> {{{
> ``element`` - an element of the lattice whose pseudocomplement is returned.
> }}}
>   I would write simply
> {{{
> ``element`` - an element of the lattice

OK. There is a point in this (and on comment 10 which is similar).


---

Comment by dkrenn created at 2016-01-09 16:09:26

Changes look fine.

lines 260, 779, 784: space after `:`. If done feel free to set it to positive.


---

Comment by git created at 2016-01-09 16:17:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-09 16:17:51

Changing status from needs_work to positive_review.


---

Comment by jmantysalo created at 2016-01-09 16:17:51

Replying to [comment:11 dkrenn]:

> lines 260, 779, 784: space after `:`. If done feel free to set it to positive.

Done and feeling free. `:=)`


---

Comment by vbraun created at 2016-01-10 10:12:21

Resolution: fixed
