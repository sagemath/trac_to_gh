# Issue 20614: Potential infinite loop in src/sage/categories/coercion_methods.pyx

Issue created by migration from https://trac.sagemath.org/ticket/20851

Original creator: jdemeyer

Original creation time: 2016-06-20 09:09:25

CC:  nthiery

This code from `src/sage/categories/coercion_methods.pyx` looks like a potential infinite loop:

```
    if have_same_parent_c(self, right) and hasattr(self, "_add_"):
        return self._add_(right)
    return coercion_model.bin_op(self, right, operator.add)
```


The `hasattr(self, "_add_")` clause is bad: if there is no `_add_`, the coercion model will just call `__add__`, which calls the coercion model, which calls `__add__`...

Solution: remove the `hasattr(self, "_add_")`.

Hopefully the whole module `coercion_methods.pyx` can be removed in #20767 and then the problem will disappear by itself.


---

Comment by jdemeyer created at 2016-08-01 15:13:48

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-08-01 15:13:48

Fixed by #20767.


---

Comment by jdemeyer created at 2016-08-01 15:13:56

Changing status from needs_review to positive_review.


---

Comment by embray created at 2016-08-30 13:32:25

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).


---

Comment by embray created at 2016-08-30 13:32:25

Resolution: wontfix
