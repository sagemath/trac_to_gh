# Issue 20785: version information in sage.__version__

archive/issues_020785.json:
```json
{
    "body": "CC:  @slel\n\nAlmost all python libs I know have `libname.__version__`. This allows someone to write scripts for checking/listing the version of all available libs. With this ticket I envision, that `sage-update-version` also modifies the topmost `__init__.py` to add the version info there.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21022\n\n",
    "created_at": "2016-07-14T10:32:48Z",
    "labels": [
        "scripts",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "version information in sage.__version__",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20785",
    "user": "@haraldschilly"
}
```
CC:  @slel

Almost all python libs I know have `libname.__version__`. This allows someone to write scripts for checking/listing the version of all available libs. With this ticket I envision, that `sage-update-version` also modifies the topmost `__init__.py` to add the version info there.

Issue created by migration from https://trac.sagemath.org/ticket/21022





---

archive/issue_comments_287198.json:
```json
{
    "body": "Yes this would be very useful since it would also allow you to specify a version of Sage at the start of a script with a simple assert:\n\n```\nimport sage\nfrom distutils.version import LooseVersion\nassert sage.__version__ >= LooseVersion('7.0')\n```\n\n\nSince the version is set at the end of `setup.py`, one of the standard ways that this is done in Python packages is to add:\n\n```\nimport pkg_resources\n__version__ = pkg_resources.require('sage')[0].version\n```\n\n\nto `__init__.py`.",
    "created_at": "2018-03-20T11:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287198",
    "user": "mcbell"
}
```

Yes this would be very useful since it would also allow you to specify a version of Sage at the start of a script with a simple assert:

```
import sage
from distutils.version import LooseVersion
assert sage.__version__ >= LooseVersion('7.0')
```


Since the version is set at the end of `setup.py`, one of the standard ways that this is done in Python packages is to add:

```
import pkg_resources
__version__ = pkg_resources.require('sage')[0].version
```


to `__init__.py`.



---

archive/issue_comments_287199.json:
```json
{
    "body": "Set assignee to mcbell.",
    "created_at": "2018-03-20T21:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287199",
    "user": "mcbell"
}
```

Set assignee to mcbell.



---

archive/issue_comments_287200.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-03-20T21:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287200",
    "user": "mcbell"
}
```

New commits:



---

archive/issue_comments_287201.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2018-03-20T21:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287201",
    "user": "mcbell"
}
```

Changing priority from minor to major.



---

archive/issue_comments_287202.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-20T21:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287202",
    "user": "mcbell"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_287203.json:
```json
{
    "body": "I think that this is slightly better, reusing `sage.version` instead of using `pkg_config`.\n----\nNew commits:",
    "created_at": "2018-03-21T21:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287203",
    "user": "@jdemeyer"
}
```

I think that this is slightly better, reusing `sage.version` instead of using `pkg_config`.
----
New commits:



---

archive/issue_comments_287204.json:
```json
{
    "body": "Excellent. Yes, that is an even simpler and more understandable solution.",
    "created_at": "2018-03-21T22:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287204",
    "user": "mcbell"
}
```

Excellent. Yes, that is an even simpler and more understandable solution.



---

archive/issue_comments_287205.json:
```json
{
    "body": "Changing keywords from \"\" to \"version\".",
    "created_at": "2018-03-21T22:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287205",
    "user": "@slel"
}
```

Changing keywords from "" to "version".



---

archive/issue_comments_287206.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-22T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287206",
    "user": "mcbell"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_287207.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-03-22T23:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287207",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_287208.json:
```json
{
    "body": "Reviewer name missing...",
    "created_at": "2018-03-22T23:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287208",
    "user": "@vbraun"
}
```

Reviewer name missing...



---

archive/issue_comments_287209.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-03-23T05:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287209",
    "user": "@jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_287210.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20785",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20785#issuecomment-287210",
    "user": "@vbraun"
}
```

Resolution: fixed
