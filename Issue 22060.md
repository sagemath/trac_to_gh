# Issue 22060: py3 remove cmp() in element.pyx

archive/issues_022060.json:
```json
{
    "body": "CC:  @tscrim @jdemeyer @a-andre @jhpalmieri\n\nas another step to py3\n\nhere just remove an useless piece of code\n\nIssue created by migration from https://trac.sagemath.org/ticket/22297\n\n",
    "created_at": "2017-02-03T09:51:05Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3 remove cmp() in element.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22060",
    "user": "https://github.com/fchapoton"
}
```
CC:  @tscrim @jdemeyer @a-andre @jhpalmieri

as another step to py3

here just remove an useless piece of code

Issue created by migration from https://trac.sagemath.org/ticket/22297





---

archive/issue_comments_306134.json:
```json
{
    "body": "let us wait for the bots\n----\nNew commits:",
    "created_at": "2017-02-03T09:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306134",
    "user": "https://github.com/fchapoton"
}
```

let us wait for the bots
----
New commits:



---

archive/issue_comments_306135.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-03T09:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306135",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_306136.json:
```json
{
    "body": "This is obviously not correct: you cannot just remove that branch.",
    "created_at": "2017-02-03T11:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306136",
    "user": "https://github.com/jdemeyer"
}
```

This is obviously not correct: you cannot just remove that branch.



---

archive/issue_comments_306137.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-03T11:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306137",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_306138.json:
```json
{
    "body": "could you please explain why ? no doctest fail.",
    "created_at": "2017-02-03T12:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306138",
    "user": "https://github.com/fchapoton"
}
```

could you please explain why ? no doctest fail.



---

archive/issue_comments_306139.json:
```json
{
    "body": "bot is green.",
    "created_at": "2017-02-04T07:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306139",
    "user": "https://github.com/fchapoton"
}
```

bot is green.



---

archive/issue_comments_306140.json:
```json
{
    "body": "Replying to [comment:3 chapoton]:\n> could you please explain why ? no doctest fail.\n\nThat's not how it works.  *You* have to explain me why the change that you made makes sense. And \"no doctest fail\" is never a good explanation.\n\nI'm not even saying that the change is wrong, but it certainly needs to be justified.",
    "created_at": "2017-02-04T14:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306140",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 chapoton]:
> could you please explain why ? no doctest fail.

That's not how it works.  *You* have to explain me why the change that you made makes sense. And "no doctest fail" is never a good explanation.

I'm not even saying that the change is wrong, but it certainly needs to be justified.



---

archive/issue_comments_306141.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> I'm not even saying that the change is wrong\n\nWell, ok, I *did* say that, but that might have been too harsh.",
    "created_at": "2017-02-04T14:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306141",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:5 jdemeyer]:
> I'm not even saying that the change is wrong

Well, ok, I *did* say that, but that might have been too harsh.



---

archive/issue_comments_306142.json:
```json
{
    "body": "If you really want to forward to Python 3, why not remove `__cmp__` completely?",
    "created_at": "2017-02-04T16:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306142",
    "user": "https://github.com/jdemeyer"
}
```

If you really want to forward to Python 3, why not remove `__cmp__` completely?



---

archive/issue_comments_306143.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-02-04T18:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_306144.json:
```json
{
    "body": "This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.",
    "created_at": "2017-02-04T18:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306144",
    "user": "https://github.com/jdemeyer"
}
```

This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.



---

archive/issue_comments_306145.json:
```json
{
    "body": "so, can I put back my branch and set it to needs review ?\n\nit seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)",
    "created_at": "2017-02-04T22:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306145",
    "user": "https://github.com/fchapoton"
}
```

so, can I put back my branch and set it to needs review ?

it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)



---

archive/issue_comments_306146.json:
```json
{
    "body": "Replying to [comment:11 chapoton]:\n> so, can I put back my branch and set it to needs review ?\n> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n\nI looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.",
    "created_at": "2017-02-05T08:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306146",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 chapoton]:
> so, can I put back my branch and set it to needs review ?
> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)

I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.



---

archive/issue_comments_306147.json:
```json
{
    "body": "Anyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.",
    "created_at": "2017-02-05T08:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306147",
    "user": "https://github.com/jdemeyer"
}
```

Anyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.



---

archive/issue_comments_306148.json:
```json
{
    "body": "Replying to [comment:12 jdemeyer]:\n> Replying to [comment:11 chapoton]:\n> > so, can I put back my branch and set it to needs review ?\n> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n> \n> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.\n\noh ! really ? I thought that when things have a parent, they are elements. Would you\nhave an example where this is not the case ?\n\nOther possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\" (I have not yet tried if it works) ? or maybe by \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nThis is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.",
    "created_at": "2017-02-05T12:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306148",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 chapoton]:
> > so, can I put back my branch and set it to needs review ?
> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)
> 
> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.

oh ! really ? I thought that when things have a parent, they are elements. Would you
have an example where this is not the case ?

Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`" (I have not yet tried if it works) ? or maybe by "`raise TypeError('coercion should build members of Element class')`" ?

This is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.



---

archive/issue_comments_306149.json:
```json
{
    "body": "Replying to [comment:10 jdemeyer]:\n> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n\nDo you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.",
    "created_at": "2017-02-05T20:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306149",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:10 jdemeyer]:
> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.

Do you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.



---

archive/issue_comments_306150.json:
```json
{
    "body": "Replying to [comment:14 chapoton]:\n> oh ! really ? I thought that when things have a parent, they are elements.\n\nOf course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.\n\n> Would you have an example where this is not the case ?\nNot right away, but I know that it's possible.\n\n> Other possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\"\n\nI don't really like that, but this might be the least bad thing to do.\n\n> \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nCertainly not this.",
    "created_at": "2017-02-06T08:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306150",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 chapoton]:
> oh ! really ? I thought that when things have a parent, they are elements.

Of course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.

> Would you have an example where this is not the case ?
Not right away, but I know that it's possible.

> Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`"

I don't really like that, but this might be the least bad thing to do.

> "`raise TypeError('coercion should build members of Element class')`" ?

Certainly not this.



---

archive/issue_comments_306151.json:
```json
{
    "body": "Replying to [comment:14 chapoton]:\n> oh ! really ? I thought that when things have a parent, they are elements. Would you\n> have an example where this is not the case ?\n\nOK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.\n\nThis *might* be considered a bug though...",
    "created_at": "2017-02-06T09:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306151",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 chapoton]:
> oh ! really ? I thought that when things have a parent, they are elements. Would you
> have an example where this is not the case ?

OK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.

This *might* be considered a bug though...



---

archive/issue_comments_306152.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-02-07T08:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306152",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_306153.json:
```json
{
    "body": "Oops, wrong ticket...",
    "created_at": "2017-02-07T08:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306153",
    "user": "https://github.com/jdemeyer"
}
```

Oops, wrong ticket...



---

archive/issue_comments_306154.json:
```json
{
    "body": "Replying to [comment:15 chapoton]:\n> Replying to [comment:10 jdemeyer]:\n> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n> \n> Do you remember how many failures there are, and where ?\n\nI didn't really keep track. Certainly intervals too.",
    "created_at": "2017-02-07T11:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306154",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:15 chapoton]:
> Replying to [comment:10 jdemeyer]:
> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.
> 
> Do you remember how many failures there are, and where ?

I didn't really keep track. Certainly intervals too.



---

archive/issue_comments_306155.json:
```json
{
    "body": "putting Jeroen's branch back, so that one can run a bot on it\n----\nNew commits:",
    "created_at": "2017-02-10T12:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306155",
    "user": "https://github.com/fchapoton"
}
```

putting Jeroen's branch back, so that one can run a bot on it
----
New commits:



---

archive/issue_comments_306156.json:
```json
{
    "body": "trying with another branch, that just remove blankly `__cmp__`\n\nthis is a test branch, so that one can run a patchbot on it\n----\nNew commits:",
    "created_at": "2017-02-10T12:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306156",
    "user": "https://github.com/fchapoton"
}
```

trying with another branch, that just remove blankly `__cmp__`

this is a test branch, so that one can run a patchbot on it
----
New commits:



---

archive/issue_comments_306157.json:
```json
{
    "body": "some preparation work done in #22446, #22447, #22448",
    "created_at": "2017-02-25T21:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306157",
    "user": "https://github.com/fchapoton"
}
```

some preparation work done in #22446, #22447, #22448



---

archive/issue_comments_306158.json:
```json
{
    "body": "some of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:\n\n```\nsage: A1=QuadraticField(5)\nsage: A2=QuadraticField(5)\nsage: A1==A2\nFalse\n```\n\nor the existing doctest\n\n```\nQuadraticField(-11, 'a') is QuadraticField(-11, 'a')\n```\n\nIn turn, this seems to come from problems in RealLazyField.\n\n```\nfrom sage.rings.number_field.number_field import NumberFieldFactory\nnff = NumberFieldFactory(\"number_field_factory\")\nsage: R.<x> = QQ[]\na1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na1 == a2\n```\n\nwhere the failure of equality comes from the RLF terms.",
    "created_at": "2017-03-31T11:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306158",
    "user": "https://github.com/fchapoton"
}
```

some of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:

```
sage: A1=QuadraticField(5)
sage: A2=QuadraticField(5)
sage: A1==A2
False
```

or the existing doctest

```
QuadraticField(-11, 'a') is QuadraticField(-11, 'a')
```

In turn, this seems to come from problems in RealLazyField.

```
from sage.rings.number_field.number_field import NumberFieldFactory
nff = NumberFieldFactory("number_field_factory")
sage: R.<x> = QQ[]
a1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a1 == a2
```

where the failure of equality comes from the RLF terms.



---

archive/issue_comments_306159.json:
```json
{
    "body": "so we probably really should fix #22257 first",
    "created_at": "2017-03-31T19:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306159",
    "user": "https://github.com/fchapoton"
}
```

so we probably really should fix #22257 first



---

archive/issue_comments_306160.json:
```json
{
    "body": "now waiting at least for #22890, #22815 and #22907",
    "created_at": "2017-05-14T11:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306160",
    "user": "https://github.com/fchapoton"
}
```

now waiting at least for #22890, #22815 and #22907



---

archive/issue_comments_306161.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-19T12:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_306162.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-19T14:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_306163.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-02T19:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_306164.json:
```json
{
    "body": "another preparation step is #23133",
    "created_at": "2017-06-03T08:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306164",
    "user": "https://github.com/fchapoton"
}
```

another preparation step is #23133



---

archive/issue_comments_306165.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-12T08:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_306166.json:
```json
{
    "body": "maybe the last preparation step is #23273",
    "created_at": "2017-06-19T17:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306166",
    "user": "https://github.com/fchapoton"
}
```

maybe the last preparation step is #23273



---

archive/issue_comments_306167.json:
```json
{
    "body": "this should be ready, let us wait for a patchbot report",
    "created_at": "2017-06-23T06:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306167",
    "user": "https://github.com/fchapoton"
}
```

this should be ready, let us wait for a patchbot report



---

archive/issue_comments_306168.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-23T06:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306168",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_306169.json:
```json
{
    "body": "ok, bot is essentially green. Please review.",
    "created_at": "2017-06-23T11:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306169",
    "user": "https://github.com/fchapoton"
}
```

ok, bot is essentially green. Please review.



---

archive/issue_comments_306170.json:
```json
{
    "body": "Great news!\n\nOne detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.",
    "created_at": "2017-06-23T11:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306170",
    "user": "https://github.com/jdemeyer"
}
```

Great news!

One detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.



---

archive/issue_comments_306171.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-23T11:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306171",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_306172.json:
```json
{
    "body": "Also, only this\n\n```\n            left_cmp = left.__cmp__\n```\n\nshould be inside the `try` statement.",
    "created_at": "2017-06-23T11:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306172",
    "user": "https://github.com/jdemeyer"
}
```

Also, only this

```
            left_cmp = left.__cmp__
```

should be inside the `try` statement.



---

archive/issue_comments_306173.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T12:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306173",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_306174.json:
```json
{
    "body": "ok for the doctest. I also did something for the try statement, but was not sure of what you meant.",
    "created_at": "2017-06-23T12:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306174",
    "user": "https://github.com/fchapoton"
}
```

ok for the doctest. I also did something for the try statement, but was not sure of what you meant.



---

archive/issue_comments_306175.json:
```json
{
    "body": "I meant something like\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            if isinstance(left_cmp, MethodType):\n                return left_cmp(right)\n```\n\nbut I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            return left_cmp(right)\n```\n",
    "created_at": "2017-06-23T12:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306175",
    "user": "https://github.com/jdemeyer"
}
```

I meant something like

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            if isinstance(left_cmp, MethodType):
                return left_cmp(right)
```

but I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            return left_cmp(right)
```




---

archive/issue_comments_306176.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T12:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_306177.json:
```json
{
    "body": "oh, I see. I did not know this syntax.\n\nLet us try without the isinstance check then.",
    "created_at": "2017-06-23T12:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306177",
    "user": "https://github.com/fchapoton"
}
```

oh, I see. I did not know this syntax.

Let us try without the isinstance check then.



---

archive/issue_comments_306178.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-23T12:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306178",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_306179.json:
```json
{
    "body": "You don't need `left_cmp = None`, just write `pass` in the `except` clause.",
    "created_at": "2017-06-23T13:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306179",
    "user": "https://github.com/jdemeyer"
}
```

You don't need `left_cmp = None`, just write `pass` in the `except` clause.



---

archive/issue_comments_306180.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T13:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_306181.json:
```json
{
    "body": "done, sorry",
    "created_at": "2017-06-23T13:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306181",
    "user": "https://github.com/fchapoton"
}
```

done, sorry



---

archive/issue_comments_306182.json:
```json
{
    "body": "bot is morally green\n\n**EDIT** now squarely green",
    "created_at": "2017-06-24T12:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306182",
    "user": "https://github.com/fchapoton"
}
```

bot is morally green

**EDIT** now squarely green



---

archive/issue_comments_306183.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-26T11:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306183",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_020791.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-06-29T06:46:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22060#event-20791"
}
```



---

archive/issue_comments_306184.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-29T06:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22060",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22060#issuecomment-306184",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
