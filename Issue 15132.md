# Issue 15132: IntegerVectors/FreeModules/AdditiveAbelianGroup of dimension 1 do not accept 5 as input and expect [5]

archive/issues_015132.json:
```json
{
    "body": "CC:  @vbraun fhivert @nthiery @videlec @jhpalmieri @kcrisman\n\nFollowing the discussion at \u200bhttps://groups.google.com/d/msg/sage-devel/tyAxhqxk3ZI/SuBg2Ukwwj4J\n\nWhen one creates the additive group `Z/nZ`, it would be nice to be able to use integers and cast them as members of this group. However :\n\n\n```\nsage: G=AdditiveAbelianGroup([5]); G(1)\nTypeError: can't initialize vector from nonzero non-list\n```\n\n\nThe same way with free modules :\n\n\n```\nsage: G=FreeModule(ZZ,1); G(1)  \nTypeError: can't initialize vector from nonzero non-list\n```\n\n\nThis patch makes it possible :\n\n\n```\nsage: G=AdditiveAbelianGroup([5]); G(1)\n(1)\nsage: G=FreeModule(ZZ,1); G(1)         \n(1)\n```\n\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/15369\n\n",
    "created_at": "2013-11-07T13:31:34Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "IntegerVectors/FreeModules/AdditiveAbelianGroup of dimension 1 do not accept 5 as input and expect [5]",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15132",
    "user": "https://github.com/nathanncohen"
}
```
CC:  @vbraun fhivert @nthiery @videlec @jhpalmieri @kcrisman

Following the discussion at â€‹https://groups.google.com/d/msg/sage-devel/tyAxhqxk3ZI/SuBg2Ukwwj4J

When one creates the additive group `Z/nZ`, it would be nice to be able to use integers and cast them as members of this group. However :


```
sage: G=AdditiveAbelianGroup([5]); G(1)
TypeError: can't initialize vector from nonzero non-list
```


The same way with free modules :


```
sage: G=FreeModule(ZZ,1); G(1)  
TypeError: can't initialize vector from nonzero non-list
```


This patch makes it possible :


```
sage: G=AdditiveAbelianGroup([5]); G(1)
(1)
sage: G=FreeModule(ZZ,1); G(1)         
(1)
```


Nathann

Issue created by migration from https://trac.sagemath.org/ticket/15369





---

archive/issue_comments_193792.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-07T13:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193792",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_193793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-07T13:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193794.json:
```json
{
    "body": "The patch so far is incomplete -- for instance, `G=FreeModule(QQ,1); G(1)` isn't working. The `FreeModule` class is a factory and it would be best to fix it for all of its implementations.\n\nAlso, please add a doctest!",
    "created_at": "2013-11-07T20:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193794",
    "user": "https://github.com/darijgr"
}
```

The patch so far is incomplete -- for instance, `G=FreeModule(QQ,1); G(1)` isn't working. The `FreeModule` class is a factory and it would be best to fix it for all of its implementations.

Also, please add a doctest!



---

archive/issue_comments_193795.json:
```json
{
    "body": "IMHO it is very confusing that G(1) is not the identity element. I would prefer to always require lists, since that is what you need in general.",
    "created_at": "2013-11-08T07:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193795",
    "user": "https://github.com/vbraun"
}
```

IMHO it is very confusing that G(1) is not the identity element. I would prefer to always require lists, since that is what you need in general.



---

archive/issue_comments_193796.json:
```json
{
    "body": "> IMHO it is very confusing that G(1) is not the identity element. \n\nEven in `(ZZ,+)` ? I find it rather natural.\n\n> I would prefer to always require lists, since that is what you need in general.\n\nCome on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?\n\nNathann",
    "created_at": "2013-11-08T07:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193796",
    "user": "https://github.com/nathanncohen"
}
```

> IMHO it is very confusing that G(1) is not the identity element. 

Even in `(ZZ,+)` ? I find it rather natural.

> I would prefer to always require lists, since that is what you need in general.

Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

Nathann



---

archive/issue_comments_193797.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-08T08:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193798.json:
```json
{
    "body": "Hellooooo ! I rewrote this a bit differently, without touching integer vectors. Could you tell me if it works on principle ? I'll add doctests immediatly in that case. As I really don't feel comfortable touching this code `:-/`\n\nTHaaaaaaaaaaaaaaanks !\n\nNathann\n----\nNew commits:",
    "created_at": "2013-11-08T08:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193798",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooo ! I rewrote this a bit differently, without touching integer vectors. Could you tell me if it works on principle ? I'll add doctests immediatly in that case. As I really don't feel comfortable touching this code `:-/`

THaaaaaaaaaaaaaaanks !

Nathann
----
New commits:



---

archive/issue_comments_193799.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> > I would prefer to always require lists, since that is what you need in general.\n> \n> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?\n\nThat's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.\n\nSo I'd agree with Volker that lists are more natural here. At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.",
    "created_at": "2013-11-08T08:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193799",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:5 ncohen]:
> > I would prefer to always require lists, since that is what you need in general.
> 
> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

That's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.

So I'd agree with Volker that lists are more natural here. At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.



---

archive/issue_comments_193800.json:
```json
{
    "body": "> That's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.\n\nWell. I want an additive Cyclic group. How can I build that ? This was my original problem, and I was told AdditiveAbelianGroup was the way to obtain it.\n\n> So I'd agree with Volker that lists are more natural here.\n\nIf there exists an Additive Cyclic group somewhere, I agree.\n\n> At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.\n\nI'm sorry if it is ugly. I really don't know these classes and they are all using each other, so I am always afraid something wrong might happen somewhere `:-/`\n\nNathann",
    "created_at": "2013-11-08T08:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193800",
    "user": "https://github.com/nathanncohen"
}
```

> That's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.

Well. I want an additive Cyclic group. How can I build that ? This was my original problem, and I was told AdditiveAbelianGroup was the way to obtain it.

> So I'd agree with Volker that lists are more natural here.

If there exists an Additive Cyclic group somewhere, I agree.

> At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.

I'm sorry if it is ugly. I really don't know these classes and they are all using each other, so I am always afraid something wrong might happen somewhere `:-/`

Nathann



---

archive/issue_comments_193801.json:
```json
{
    "body": "> > I would prefer to always require lists, since that is what you need in general.\n> \n> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?\n\nAnd you would like that the following works ?\n\n```\nsage: V = VectorSpace(RR,1)\nsage: V(4.123)\n```\n",
    "created_at": "2013-11-08T11:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193801",
    "user": "https://github.com/videlec"
}
```

> > I would prefer to always require lists, since that is what you need in general.
> 
> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

And you would like that the following works ?

```
sage: V = VectorSpace(RR,1)
sage: V(4.123)
```




---

archive/issue_comments_193802.json:
```json
{
    "body": "Well, I wouldn't see the problem indeed. I don't know if the last commit does that, though. It touches FreeModule.\n\nNathann",
    "created_at": "2013-11-08T12:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193802",
    "user": "https://github.com/nathanncohen"
}
```

Well, I wouldn't see the problem indeed. I don't know if the last commit does that, though. It touches FreeModule.

Nathann



---

archive/issue_comments_193803.json:
```json
{
    "body": "If you want want a cyclic group with nice map Z -> Z/nZ then just use `IntegerModRing`.\n\nThe notation that you propose can certainly be implemented, but its a confusing special case that can't work for a general Abelian group. So -1 from me, consistency is more important than saving two keystrokes.",
    "created_at": "2013-11-10T01:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193803",
    "user": "https://github.com/vbraun"
}
```

If you want want a cyclic group with nice map Z -> Z/nZ then just use `IntegerModRing`.

The notation that you propose can certainly be implemented, but its a confusing special case that can't work for a general Abelian group. So -1 from me, consistency is more important than saving two keystrokes.



---

archive/issue_comments_193804.json:
```json
{
    "body": ".......\n\nOkay. Then, as we DO need to build easily a `Z/nZ` somewhere, would you agree to review a 3-lines patch that adds an alias to `IntegerModRing` as `groups.misc.AdditiveCyclic` ?\n\nNathann",
    "created_at": "2013-11-10T09:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193804",
    "user": "https://github.com/nathanncohen"
}
```

.......

Okay. Then, as we DO need to build easily a `Z/nZ` somewhere, would you agree to review a 3-lines patch that adds an alias to `IntegerModRing` as `groups.misc.AdditiveCyclic` ?

Nathann



---

archive/issue_comments_193805.json:
```json
{
    "body": "That would be fine with me.",
    "created_at": "2013-11-11T18:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193805",
    "user": "https://github.com/vbraun"
}
```

That would be fine with me.



---

archive/issue_comments_193806.json:
```json
{
    "body": "Done !",
    "created_at": "2013-11-12T10:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193806",
    "user": "https://github.com/nathanncohen"
}
```

Done !



---

archive/issue_comments_193807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-12T10:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193808.json:
```json
{
    "body": "Changing component from combinatorics to group theory.",
    "created_at": "2013-11-27T17:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193808",
    "user": "https://github.com/nathanncohen"
}
```

Changing component from combinatorics to group theory.



---

archive/issue_comments_193809.json:
```json
{
    "body": "I will rebase this thing in a second to clean the dependencies.\n\nNathann",
    "created_at": "2013-12-25T14:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193809",
    "user": "https://github.com/nathanncohen"
}
```

I will rebase this thing in a second to clean the dependencies.

Nathann



---

archive/issue_comments_193810.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-25T14:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_193811.json:
```json
{
    "body": "Changing priority from major to trivial.",
    "created_at": "2013-12-25T14:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193811",
    "user": "https://github.com/nathanncohen"
}
```

Changing priority from major to trivial.



---

archive/issue_comments_193812.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-25T15:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193812",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_193813.json:
```json
{
    "body": "lgtm",
    "created_at": "2013-12-25T15:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193813",
    "user": "https://github.com/vbraun"
}
```

lgtm



---

archive/issue_comments_193814.json:
```json
{
    "body": "I just did the same thing... :P",
    "created_at": "2013-12-25T16:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193814",
    "user": "https://github.com/tscrim"
}
```

I just did the same thing... :P



---

archive/issue_events_014805.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2013-12-26T14:50:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15132#event-14805"
}
```



---

archive/issue_comments_193815.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-26T14:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15132#issuecomment-193815",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
