# Issue 15132: IntegerVectors/FreeModules/AdditiveAbelianGroup of dimension 1 do not accept 5 as input and expect [5]

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2013-11-07 13:31:34

CC:  vbraun fhivert nthiery vdelecroix jhpalmieri kcrisman

Following the discussion at â€‹https://groups.google.com/d/msg/sage-devel/tyAxhqxk3ZI/SuBg2Ukwwj4J

When one creates the additive group `Z/nZ`, it would be nice to be able to use integers and cast them as members of this group. However :


```
sage: G=AdditiveAbelianGroup([5]); G(1)
TypeError: can't initialize vector from nonzero non-list
```


The same way with free modules :


```
sage: G=FreeModule(ZZ,1); G(1)  
TypeError: can't initialize vector from nonzero non-list
```


This patch makes it possible :


```
sage: G=AdditiveAbelianGroup([5]); G(1)
(1)
sage: G=FreeModule(ZZ,1); G(1)         
(1)
```


Nathann


---

Comment by ncohen created at 2013-11-07 13:31:55

Changing status from new to needs_review.


---

Comment by git created at 2013-11-07 13:32:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2013-11-07 20:26:25

The patch so far is incomplete -- for instance, `G=FreeModule(QQ,1); G(1)` isn't working. The `FreeModule` class is a factory and it would be best to fix it for all of its implementations.

Also, please add a doctest!


---

Comment by vbraun created at 2013-11-08 07:14:34

IMHO it is very confusing that G(1) is not the identity element. I would prefer to always require lists, since that is what you need in general.


---

Comment by ncohen created at 2013-11-08 07:18:12

> IMHO it is very confusing that G(1) is not the identity element. 

Even in `(ZZ,+)` ? I find it rather natural.

> I would prefer to always require lists, since that is what you need in general.

Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

Nathann


---

Comment by git created at 2013-11-08 08:00:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2013-11-08 08:02:04

Hellooooo ! I rewrote this a bit differently, without touching integer vectors. Could you tell me if it works on principle ? I'll add doctests immediatly in that case. As I really don't feel comfortable touching this code `:-/`

THaaaaaaaaaaaaaaanks !

Nathann
----
New commits:


---

Comment by nbruin created at 2013-11-08 08:41:31

Replying to [comment:5 ncohen]:
> > I would prefer to always require lists, since that is what you need in general.
> 
> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

That's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.

So I'd agree with Volker that lists are more natural here. At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.


---

Comment by ncohen created at 2013-11-08 08:46:16

> That's not what you're asking sage to do. You're asking for a finite abelian group, written additively, that happens to be cyclic of order 5. If you know your group is going to be cyclic, you'd probably be better off asking for a cyclic group explicitly.

Well. I want an additive Cyclic group. How can I build that ? This was my original problem, and I was told AdditiveAbelianGroup was the way to obtain it.

> So I'd agree with Volker that lists are more natural here.

If there exists an Additive Cyclic group somewhere, I agree.

> At the same time you're asking for conversion, which is supposed to make a best effort, so adding a special case wouldn't be out of the question, even if it's an ugly special case.

I'm sorry if it is ugly. I really don't know these classes and they are all using each other, so I am always afraid something wrong might happen somewhere `:-/`

Nathann


---

Comment by vdelecroix created at 2013-11-08 11:53:27

> > I would prefer to always require lists, since that is what you need in general.
> 
> Come on Volker. I want to create `Z/5Z`, and you think more natural to input lists of size 1 than integers ?

And you would like that the following works ?

```
sage: V = VectorSpace(RR,1)
sage: V(4.123)
```



---

Comment by ncohen created at 2013-11-08 12:08:51

Well, I wouldn't see the problem indeed. I don't know if the last commit does that, though. It touches FreeModule.

Nathann


---

Comment by vbraun created at 2013-11-10 01:27:45

If you want want a cyclic group with nice map Z -> Z/nZ then just use `IntegerModRing`.

The notation that you propose can certainly be implemented, but its a confusing special case that can't work for a general Abelian group. So -1 from me, consistency is more important than saving two keystrokes.


---

Comment by ncohen created at 2013-11-10 09:38:24

.......

Okay. Then, as we DO need to build easily a `Z/nZ` somewhere, would you agree to review a 3-lines patch that adds an alias to `IntegerModRing` as `groups.misc.AdditiveCyclic` ?

Nathann


---

Comment by vbraun created at 2013-11-11 18:41:01

That would be fine with me.


---

Comment by ncohen created at 2013-11-12 10:57:18

Done !


---

Comment by git created at 2013-11-12 10:58:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2013-11-27 17:02:37

Changing component from combinatorics to group theory.


---

Comment by ncohen created at 2013-12-25 14:04:07

I will rebase this thing in a second to clean the dependencies.

Nathann


---

Comment by git created at 2013-12-25 14:06:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2013-12-25 14:26:17

Changing priority from major to trivial.


---

Comment by vbraun created at 2013-12-25 15:41:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-25 15:41:43

lgtm


---

Comment by tscrim created at 2013-12-25 16:21:34

I just did the same thing... :P


---

Comment by vbraun created at 2013-12-26 14:50:13

Resolution: fixed
