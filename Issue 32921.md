# Issue 32921: kRegularSequence: minization wrong

Issue created by migration from https://trac.sagemath.org/ticket/33158

Original creator: dkrenn

Original creation time: 2022-01-13 12:15:50


```
sage: function('f')                                                                                                                                                                          
f
sage: var('n')                                                                                                                                                                               
n
sage: Seq2 = kRegularSequenceSpace(2, QQ)                                                                                                                                                    
sage: P = Seq2.from_recurrence([ 
....:     f(4*n) == 5/3*f(2*n) - 1/3*f(2*n + 1),  
....:     f(4*n + 1) == 4/3*f(2*n) + 1/3*f(2*n + 1),  
....:     f(4*n + 2) == 1/3*f(2*n) + 4/3*f(2*n + 1),  
....:     f(4*n + 3) == -1/3*f(2*n) + 5/3*f(2*n + 1),  
....:     f(0) == 1, f(1) == 2], f, n)                                                                                                                                                       
sage: P                                                                                                                                                                                      
2-regular sequence 1, 2, 3, 3, 4, 5, 5, 4, 5, 7, ...
sage: P.minimized()
2-regular sequence 1, 2, 2, 4, 2, 4, 4, 8, 2, 4, ...
```




---

Comment by dkrenn created at 2022-01-13 13:12:00

Changing status from new to needs_review.


---

Comment by cheuberg created at 2022-01-16 17:14:14

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2022-01-16 17:14:14

I had a look at the code. I only have one comment:

1. `parse_one_summand`: In 
   {{{
   #!python
    try:
        right_side = coefficient_ring(right_side)
    except (TypeError, ValueError):
        raise ValueError("Initial value %s given by the equation %s "
                         "is not in %s."
                         % (right_side, eq, coefficient_ring))
    }}}
    I would prefer a `raise ... from None`.
----
New commits:


---

Comment by cheuberg created at 2022-01-16 17:14:56

(I did not push any commits, so the "new commits" part of the above comment can be ignored).


---

Comment by git created at 2022-01-22 09:06:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2022-01-22 09:08:26

Changing status from needs_work to needs_review.


---

Comment by dkrenn created at 2022-01-22 09:08:26

Replying to [comment:4 cheuberg]:
> I had a look at the code. I only have one comment:
> 
> 1. `parse_one_summand`: In 
>    {{{
>    #!python
>     try:
>         right_side = coefficient_ring(right_side)
>     except (TypeError, ValueError):
>         raise ValueError("Initial value %s given by the equation %s "
>                          "is not in %s."
>                          % (right_side, eq, coefficient_ring))
>     }}}
>     I would prefer a `raise ... from None`.

I also prefer this; seems I have forgotten these. Added now, once in `parse_one_summand` and once in the code-part posted above (which was not the same).


---

Comment by cheuberg created at 2022-01-22 09:33:06

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2022-01-30 15:39:13

Setting milestone to 9.6 now that 9.5 is out.


---

Comment by vbraun created at 2022-02-13 10:17:14

Resolution: fixed
