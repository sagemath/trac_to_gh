# Issue 32203: shifting power series doesn't keep track of precision correctly

Issue created by migration from https://trac.sagemath.org/ticket/32440

Original creator: lorenz

Original creation time: 2021-08-31 03:18:09

Keywords: power series, shifting, precision

Example:


```sage
sage: R.<y> = PowerSeriesRing(QQ, implementation='pari')
sage: (y + O(y^7)).shift(1)
y^2 + O(y^8)
sage: (y + O(y^7)) << 1
y^2 + O(y^7)
sage: (y + O(y^7)).shift(-1)
1 + O(y^6)
sage: (y + O(y^7)) >> 1
1 + O(y^7)
```


One weird consequence of this is the following:

```sage
sage: L.<x> = LaurentSeriesRing(QQ, implementation='pari')
sage: f = x + O(x^7)
sage: f
x + O(x^7)
sage: f.power_series()
x + O(x^6)
sage: f.power_series().laurent_series()
x + O(x^6)
```


It's not hard to imagine how this can lead to mathematically incorrect results.



---

Comment by lorenz created at 2021-08-31 03:23:11

New commits:


---

Comment by lorenz created at 2021-08-31 03:27:23

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-08-31 11:34:15

add one empty line between

```
+        Right-shift this power series by `n`, i.e., divide by `t^n`.
+        Terms below `t^n` are discarded.
```



---

Comment by git created at 2021-08-31 11:46:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by lorenz created at 2021-08-31 11:47:50

Done; also fixed an ancient typo in the docstring for `.shift()`.


---

Comment by chapoton created at 2021-08-31 16:59:04

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-08-31 16:59:04

ok, thx


---

Comment by vbraun created at 2021-10-23 22:58:40

Resolution: fixed
