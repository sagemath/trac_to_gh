# Issue 12354: Optimize zero test through the sage lib

Issue created by migration from https://trac.sagemath.org/ticket/12526

Original creator: hivert

Original creation time: 2012-02-17 09:23:06

Assignee: AlexGhitza

The default implementation of `__nonzero__` in element in far from optimal. Thanks #12510 we now can detect where `__nonzero__` is not properly implemented. To experiment I tried with `CDF` here are the timing:

With the default implementation:

```
p = CDF(pi)
sage: %timeit bool(p)
625 loops, best of 3: 731 ns per loop
sage: %timeit p.is_zero()
625 loops, best of 3: 965 ns per loop
```

with the following trivial specific implementation:

```
def __nonzero__(self):
    return bool(self._complex.dat[0]) or bool(self._complex.dat[1])
```

here is the new timing

```
sage: %timeit bool(p)
625 loops, best of 3: 342 ns per loop
sage: %timeit p.is_zero()
625 loops, best of 3: 869 ns per loop
```


This is a so common question that it would be worth removing the default implementation and implement all the specific methods. 
