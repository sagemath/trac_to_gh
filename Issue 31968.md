# Issue 31968: Removing Deprecation Notices in projective_ds

archive/issues_031968.json:
```json
{
    "body": "CC:  @bhutz\n\nKeywords: gsoc2021\n\nCurrently there are several old deprecation warnings in dynamical systems on projective space. They are:\n\n- deprecation of the keyword embedding in sigma_invariants (4 years old, #23333)\n\n- deprecation of rational_periodic_points method (2 years old, #28109)\n\n- deprecation of rational_preperiodic_points method (2 years old, #28213)\n\nWe remove these old deprecations in this ticket.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32205\n\n",
    "created_at": "2021-07-15T20:22:56Z",
    "labels": [
        "dynamics",
        "trivial",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Removing Deprecation Notices in projective_ds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31968",
    "user": "@EnderWannabe"
}
```
CC:  @bhutz

Keywords: gsoc2021

Currently there are several old deprecation warnings in dynamical systems on projective space. They are:

- deprecation of the keyword embedding in sigma_invariants (4 years old, #23333)

- deprecation of rational_periodic_points method (2 years old, #28109)

- deprecation of rational_preperiodic_points method (2 years old, #28213)

We remove these old deprecations in this ticket.

Issue created by migration from https://trac.sagemath.org/ticket/32205





---

archive/issue_comments_456747.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-15T20:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456747",
    "user": "@EnderWannabe"
}
```

New commits:



---

archive/issue_comments_456748.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-15T20:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456748",
    "user": "@EnderWannabe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_456749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-20T14:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456749",
    "user": "@bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456750.json:
```json
{
    "body": "This looks fine to me.",
    "created_at": "2021-07-20T14:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456750",
    "user": "@bhutz"
}
```

This looks fine to me.



---

archive/issue_comments_456751.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-20T22:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456751",
    "user": "@mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_456752.json:
```json
{
    "body": "I don't think this is the correct next step after deprecating the `embedding` keyword.\nIt should become an error if `embedding` is passed.",
    "created_at": "2021-07-20T22:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456752",
    "user": "@mkoeppe"
}
```

I don't think this is the correct next step after deprecating the `embedding` keyword.
It should become an error if `embedding` is passed.



---

archive/issue_comments_456753.json:
```json
{
    "body": "if that's the process, then ok. But note that the keyword hasn't been accepted for 4 years now.",
    "created_at": "2021-07-21T00:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456753",
    "user": "@bhutz"
}
```

if that's the process, then ok. But note that the keyword hasn't been accepted for 4 years now.



---

archive/issue_comments_456754.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-23T14:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456754",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456755.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-23T14:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456755",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456756.json:
```json
{
    "body": "Ok, added an error when the `embedding` keyword is passed.",
    "created_at": "2021-07-23T14:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456756",
    "user": "@EnderWannabe"
}
```

Ok, added an error when the `embedding` keyword is passed.



---

archive/issue_comments_456757.json:
```json
{
    "body": "There error needs to reference the ticket for the deprecation.",
    "created_at": "2021-07-23T15:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456757",
    "user": "@bhutz"
}
```

There error needs to reference the ticket for the deprecation.



---

archive/issue_comments_456758.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-23T15:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456758",
    "user": "@bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-23T16:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456760.json:
```json
{
    "body": "Replying to [comment:8 bhutz]:\n> There error needs to reference the ticket for the deprecation.\nAdded",
    "created_at": "2021-07-23T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456760",
    "user": "@EnderWannabe"
}
```

Replying to [comment:8 bhutz]:
> There error needs to reference the ticket for the deprecation.
Added



---

archive/issue_comments_456761.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-23T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456761",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456762.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-23T17:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456762",
    "user": "@bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456763.json:
```json
{
    "body": "\n```\n+        if not embedding is None:\n+            raise ValueError('the embedding keyword is deprecated, see :trac:`32205`')\n```\n\nthis makes no sense - \"deprecated\" means that it still works \n\n\nAlso note that changes like this:\n\n```\n-    def sigma_invariants(self, n, formal=False, embedding=None, type='point'):\n+    def sigma_invariants(self, n, **kwds):\n```\n\nmake an incompatible change to the signature -- after the change, it is not possible any more to pass these arguments as positional arguments.\n\nThis is something to keep in mind when creating new code -- if arguments are meant to be keyword-only, they should be marked as such.\n\n\nAlso a comment on the ticket description:\n> We remove these old deprecations in this ticket.\n\nOne does not \"remove deprecations\" -- one removes deprecated features or deprecated code.",
    "created_at": "2021-07-23T18:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456763",
    "user": "@mkoeppe"
}
```


```
+        if not embedding is None:
+            raise ValueError('the embedding keyword is deprecated, see :trac:`32205`')
```

this makes no sense - "deprecated" means that it still works 


Also note that changes like this:

```
-    def sigma_invariants(self, n, formal=False, embedding=None, type='point'):
+    def sigma_invariants(self, n, **kwds):
```

make an incompatible change to the signature -- after the change, it is not possible any more to pass these arguments as positional arguments.

This is something to keep in mind when creating new code -- if arguments are meant to be keyword-only, they should be marked as such.


Also a comment on the ticket description:
> We remove these old deprecations in this ticket.

One does not "remove deprecations" -- one removes deprecated features or deprecated code.



---

archive/issue_comments_456764.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-23T18:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456764",
    "user": "@mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_456765.json:
```json
{
    "body": "This is getting a little circular now.\n\nThe signature is changed because you asked for the embedding keyword to be accepted so that an error could be raised. This particular function has never accepted the embedding keyword. The function it replaced was deprecated 2 years ago. That replaced function accepted an embedding keyword until 4 years ago. So adding an embedding keyword to this function just to raise an error does not seem like a good choice.\n\nWhat should have happened is that after the embedding keyword was deprecated that change was followed-up on before the whole function was deprecated and replaced. However, that's not where we are today.\n\nSo, should Alex continue and adjust the error message to be better phrased and leave the code as is or go back to the original solution which seemed to most logical based on the current situation?\n\nSince you have strong opinions about this particular issue, I'm happy to back off and let you handle the review.",
    "created_at": "2021-07-23T19:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456765",
    "user": "@bhutz"
}
```

This is getting a little circular now.

The signature is changed because you asked for the embedding keyword to be accepted so that an error could be raised. This particular function has never accepted the embedding keyword. The function it replaced was deprecated 2 years ago. That replaced function accepted an embedding keyword until 4 years ago. So adding an embedding keyword to this function just to raise an error does not seem like a good choice.

What should have happened is that after the embedding keyword was deprecated that change was followed-up on before the whole function was deprecated and replaced. However, that's not where we are today.

So, should Alex continue and adjust the error message to be better phrased and leave the code as is or go back to the original solution which seemed to most logical based on the current situation?

Since you have strong opinions about this particular issue, I'm happy to back off and let you handle the review.



---

archive/issue_comments_456766.json:
```json
{
    "body": "Replying to [comment:13 bhutz]:\n> you asked for the embedding keyword to be accepted so that an error could be raised.\n\nNo, actually \u200b90f8798 had kept the parameter and removed the warning and the documentation of the parameter - so effectively the function would silently accept this parameter.\n\nI asked for it to become an error to pass the previously deprecated parameter. \n\nNormally one would just remove the parameter from the function signature. Then it becomes an error to pass the parameter just by the fact that passing an unknown keyword argument is an error in Python.\n\nHowever, you have the problem that these functions also accept these arguments as positional arguments. By just removing the `embedding` parameter, you are changing the signature -- a previous call of `.sigma_invariants(n, False, None, 'point')` would no longer be valid.\n\nThe current change, to `**kwds`, makes all calls like `.sigma_invariants(n, False)` invalid too. This is an incompatible change and should not be done without deprecation.\n\n(See #16607 for a related discussion.)",
    "created_at": "2021-07-23T19:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456766",
    "user": "@mkoeppe"
}
```

Replying to [comment:13 bhutz]:
> you asked for the embedding keyword to be accepted so that an error could be raised.

No, actually â€‹90f8798 had kept the parameter and removed the warning and the documentation of the parameter - so effectively the function would silently accept this parameter.

I asked for it to become an error to pass the previously deprecated parameter. 

Normally one would just remove the parameter from the function signature. Then it becomes an error to pass the parameter just by the fact that passing an unknown keyword argument is an error in Python.

However, you have the problem that these functions also accept these arguments as positional arguments. By just removing the `embedding` parameter, you are changing the signature -- a previous call of `.sigma_invariants(n, False, None, 'point')` would no longer be valid.

The current change, to `**kwds`, makes all calls like `.sigma_invariants(n, False)` invalid too. This is an incompatible change and should not be done without deprecation.

(See #16607 for a related discussion.)



---

archive/issue_comments_456767.json:
```json
{
    "body": "Replying to [comment:12 mkoeppe]:\n> Also a comment on the ticket description:\n> > We remove these old deprecations in this ticket.\n> \n> One does not \"remove deprecations\" -- one removes deprecated features or deprecated code.\n\nFixed it for you in description and title",
    "created_at": "2021-07-23T19:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456767",
    "user": "@mkoeppe"
}
```

Replying to [comment:12 mkoeppe]:
> Also a comment on the ticket description:
> > We remove these old deprecations in this ticket.
> 
> One does not "remove deprecations" -- one removes deprecated features or deprecated code.

Fixed it for you in description and title



---

archive/issue_comments_456768.json:
```json
{
    "body": "Replying to [comment:14 mkoeppe]:\n> However, you have the problem that these functions also accept these arguments as positional arguments. By just removing the `embedding` parameter, you are changing the signature -- a previous call of `.sigma_invariants(n, False, None, 'point')` would no longer be valid.\n\nThis is an excellent point I had not thought about.\n\nIf we change the code to throw an error when an `embedding` parameter is passed, then we have reached a dead end where `sigma_invariants` has a useless parameter which must be documented as useless, indefinitely. This seems sub optimal, and confusing for a user.\n\nIs there some way to avoid having to maintain a useless parameter? I can't think of one short of deprecating the entire function and creating a new function with a new name but identical functionality.\n\nIf there isn't a way to avoid maintaining a useless parameter, I'm inclined to leave `embedding` as deprecated. That way it is at least clear why `embedding` is still accepted, and if we add a note referencing this ticket, hopefully no one will make my same mistake.",
    "created_at": "2021-07-23T20:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456768",
    "user": "@EnderWannabe"
}
```

Replying to [comment:14 mkoeppe]:
> However, you have the problem that these functions also accept these arguments as positional arguments. By just removing the `embedding` parameter, you are changing the signature -- a previous call of `.sigma_invariants(n, False, None, 'point')` would no longer be valid.

This is an excellent point I had not thought about.

If we change the code to throw an error when an `embedding` parameter is passed, then we have reached a dead end where `sigma_invariants` has a useless parameter which must be documented as useless, indefinitely. This seems sub optimal, and confusing for a user.

Is there some way to avoid having to maintain a useless parameter? I can't think of one short of deprecating the entire function and creating a new function with a new name but identical functionality.

If there isn't a way to avoid maintaining a useless parameter, I'm inclined to leave `embedding` as deprecated. That way it is at least clear why `embedding` is still accepted, and if we add a note referencing this ticket, hopefully no one will make my same mistake.



---

archive/issue_comments_456769.json:
```json
{
    "body": "Replying to [comment:18 gh-EnderWannabe]:\n> If we change the code to throw an error when an `embedding` parameter is passed, then we have reached a dead end where `sigma_invariants` has a useless parameter which must be documented as useless, indefinitely. This seems sub optimal, and confusing for a user.\n\nYes, it is an unfortunate situation that comes from the fact that Sage was stuck in Python 2 for too long, in which the syntax for marking keyword-only parameters was not available. It is affecting many interfaces in Sage.\n\n> Is there some way to avoid having to maintain a useless parameter? \n\nI'm not aware of a satisfactory mechanism really. We have a `@`rename_keyword decorator, but (as far as I know) not a decorator that would make it an error to pass the keyword - without changing the positional signature.\n\n> I can't think of one short of deprecating the entire function and creating a new function with a new name but identical functionality.\n\nWell, a possible way forward would be to decide to deprecate passing certain parameters as positional arguments. In the example of `sigma_invariants`, I would guess that you would be OK to make all arguments except `n` keyword-only at some point in the future.\n\nSo along the lines of the discussion in #16607, one could introduce this deprecation.\nUnfortunately this may lead to rather complicated code. So ideally it would be implemented using a decorator instead of doing it one by one in every function that needs it.\n\nAfter that deprecation has expired, one would finally be able to remove the parameter completely.\n\n\n> If there isn't a way to avoid maintaining a useless parameter, I'm inclined to leave `embedding` as deprecated. That way it is at least clear why `embedding` is still accepted, and if we add a note referencing this ticket, hopefully no one will make my same mistake.\n\nYes, I think this is a simple reasonable solution; but instead of calling `deprecation`, you could as well raise an error.",
    "created_at": "2021-07-23T21:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456769",
    "user": "@mkoeppe"
}
```

Replying to [comment:18 gh-EnderWannabe]:
> If we change the code to throw an error when an `embedding` parameter is passed, then we have reached a dead end where `sigma_invariants` has a useless parameter which must be documented as useless, indefinitely. This seems sub optimal, and confusing for a user.

Yes, it is an unfortunate situation that comes from the fact that Sage was stuck in Python 2 for too long, in which the syntax for marking keyword-only parameters was not available. It is affecting many interfaces in Sage.

> Is there some way to avoid having to maintain a useless parameter? 

I'm not aware of a satisfactory mechanism really. We have a `@`rename_keyword decorator, but (as far as I know) not a decorator that would make it an error to pass the keyword - without changing the positional signature.

> I can't think of one short of deprecating the entire function and creating a new function with a new name but identical functionality.

Well, a possible way forward would be to decide to deprecate passing certain parameters as positional arguments. In the example of `sigma_invariants`, I would guess that you would be OK to make all arguments except `n` keyword-only at some point in the future.

So along the lines of the discussion in #16607, one could introduce this deprecation.
Unfortunately this may lead to rather complicated code. So ideally it would be implemented using a decorator instead of doing it one by one in every function that needs it.

After that deprecation has expired, one would finally be able to remove the parameter completely.


> If there isn't a way to avoid maintaining a useless parameter, I'm inclined to leave `embedding` as deprecated. That way it is at least clear why `embedding` is still accepted, and if we add a note referencing this ticket, hopefully no one will make my same mistake.

Yes, I think this is a simple reasonable solution; but instead of calling `deprecation`, you could as well raise an error.



---

archive/issue_comments_456770.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-25T16:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456770",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456771.json:
```json
{
    "body": "Replying to [comment:19 mkoeppe]:\n> Yes, I think this is a simple reasonable solution; but instead of calling `deprecation`, you could as well raise an error.\n\nOk, pushed a branch with such an error.",
    "created_at": "2021-07-25T16:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456771",
    "user": "@EnderWannabe"
}
```

Replying to [comment:19 mkoeppe]:
> Yes, I think this is a simple reasonable solution; but instead of calling `deprecation`, you could as well raise an error.

Ok, pushed a branch with such an error.



---

archive/issue_comments_456772.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-25T16:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456772",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456773.json:
```json
{
    "body": "Looking good, but `multiplier_spectra` will need a fix for the positional arguments as well",
    "created_at": "2021-07-25T16:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456773",
    "user": "@mkoeppe"
}
```

Looking good, but `multiplier_spectra` will need a fix for the positional arguments as well



---

archive/issue_comments_456774.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-25T16:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456774",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456775.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-25T18:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456775",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456776.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-25T18:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456776",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456777.json:
```json
{
    "body": "\n```\n--- a/src/sage/dynamics/arithmetic_dynamics/projective_ds.py\n+++ b/src/sage/dynamics/arithmetic_dynamics/projective_ds.py\n@@ -4149,7 +4149,7 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,\n         else:\n             raise ValueError(\"algorithm must be either 'variety' or 'cyclegraph'\")\n \n-    def multiplier_spectra(self, n, formal=False, type='point', use_algebraic_closure=True):\n+    def multiplier_spectra(self, n, formal=False, embedding=None, type='point'):\n         r\"\"\"\n         Computes the ``n`` multiplier spectra of this dynamical system.\n \n```\n\nI don't understand what the purpose of this change is\n\n\n```\n@@ -4172,6 +4172,8 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,\n           to find the formal ``n`` multiplier spectra of this map and\n           ``False`` specifies to find the ``n`` multiplier spectra\n \n+        - ``embedding`` -- (default: ``None``) ignored. See :trac: `32205`.\n+\n         - ``type`` -- (default: ``'point'``) string; either ``'point'``\n           or ``'cycle'`` depending on whether you compute one multiplier\n           per point or one per cycle\n@@ -4296,6 +4298,9 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,\n         PS = self.domain()\n         n = Integer(n)\n \n+        if not embedding is None:\n+            raise ValueError('do not specify an embedding')\n+\n         if (n < 1):\n             raise ValueError(\"period must be a positive integer\")\n         if not is_ProjectiveSpace(PS):\n```\n\nDocumentation does not match the implementation. `embedding` is not ignored.\nHow about something like this:\n\n```\n>>>        - ``embedding`` -- (default: ``None``) must be ``None``, passing an embedding is no longer supported, see :trac:`32205`.\n```\n\nLikewise in the other method.",
    "created_at": "2021-07-25T18:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456777",
    "user": "@mkoeppe"
}
```


```
--- a/src/sage/dynamics/arithmetic_dynamics/projective_ds.py
+++ b/src/sage/dynamics/arithmetic_dynamics/projective_ds.py
@@ -4149,7 +4149,7 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,
         else:
             raise ValueError("algorithm must be either 'variety' or 'cyclegraph'")
 
-    def multiplier_spectra(self, n, formal=False, type='point', use_algebraic_closure=True):
+    def multiplier_spectra(self, n, formal=False, embedding=None, type='point'):
         r"""
         Computes the ``n`` multiplier spectra of this dynamical system.
 
```

I don't understand what the purpose of this change is


```
@@ -4172,6 +4172,8 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,
           to find the formal ``n`` multiplier spectra of this map and
           ``False`` specifies to find the ``n`` multiplier spectra
 
+        - ``embedding`` -- (default: ``None``) ignored. See :trac: `32205`.
+
         - ``type`` -- (default: ``'point'``) string; either ``'point'``
           or ``'cycle'`` depending on whether you compute one multiplier
           per point or one per cycle
@@ -4296,6 +4298,9 @@ class DynamicalSystem_projective(SchemeMorphism_polynomial_projective_space,
         PS = self.domain()
         n = Integer(n)
 
+        if not embedding is None:
+            raise ValueError('do not specify an embedding')
+
         if (n < 1):
             raise ValueError("period must be a positive integer")
         if not is_ProjectiveSpace(PS):
```

Documentation does not match the implementation. `embedding` is not ignored.
How about something like this:

```
>>>        - ``embedding`` -- (default: ``None``) must be ``None``, passing an embedding is no longer supported, see :trac:`32205`.
```

Likewise in the other method.



---

archive/issue_comments_456778.json:
```json
{
    "body": "Replying to [comment:26 mkoeppe]:\n> I don't understand what the purpose of this change is\n\nSorry, I thoughtlessly changed multiplier spectra. You said that multiplier spectra will need a fix for positional arguments as well. Looking back at commits, I don't think multiplier spectra was accepting a deprecated argument before this ticket. Could you clarify?",
    "created_at": "2021-07-25T19:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456778",
    "user": "@EnderWannabe"
}
```

Replying to [comment:26 mkoeppe]:
> I don't understand what the purpose of this change is

Sorry, I thoughtlessly changed multiplier spectra. You said that multiplier spectra will need a fix for positional arguments as well. Looking back at commits, I don't think multiplier spectra was accepting a deprecated argument before this ticket. Could you clarify?



---

archive/issue_comments_456779.json:
```json
{
    "body": "For this method, I think you only need to undo the change to using `**kwds` that you did in https://git.sagemath.org/sage.git/commit/?id=d905c4814cb4f3c6362e2f29bbcfced677055496",
    "created_at": "2021-07-25T19:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456779",
    "user": "@mkoeppe"
}
```

For this method, I think you only need to undo the change to using `**kwds` that you did in https://git.sagemath.org/sage.git/commit/?id=d905c4814cb4f3c6362e2f29bbcfced677055496



---

archive/issue_comments_456780.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-25T19:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456780",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456781.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> For this method, I think you only need to undo the change to using `**kwds` that you did in https://git.sagemath.org/sage.git/commit/?id=d905c4814cb4f3c6362e2f29bbcfced677055496\n\nThanks for clarifying. Hopefully that last push does the trick.",
    "created_at": "2021-07-25T19:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456781",
    "user": "@EnderWannabe"
}
```

Replying to [comment:28 mkoeppe]:
> For this method, I think you only need to undo the change to using `**kwds` that you did in https://git.sagemath.org/sage.git/commit/?id=d905c4814cb4f3c6362e2f29bbcfced677055496

Thanks for clarifying. Hopefully that last push does the trick.



---

archive/issue_comments_456782.json:
```json
{
    "body": "Looking good.",
    "created_at": "2021-07-25T19:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456782",
    "user": "@mkoeppe"
}
```

Looking good.



---

archive/issue_comments_456783.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-25T19:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456783",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456784.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-07-25T20:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456784",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_456785.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-25T20:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456785",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_456786.json:
```json
{
    "body": "Squashed/rebased on 9.4.rc0 to remove the merge conflict\n----\nNew commits:",
    "created_at": "2021-08-01T21:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456786",
    "user": "@mkoeppe"
}
```

Squashed/rebased on 9.4.rc0 to remove the merge conflict
----
New commits:



---

archive/issue_comments_456787.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-08-01T21:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456787",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_456788.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-10-23T23:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456788",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_456789.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-10-23T23:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456789",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_456790.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-24T02:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456790",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456791.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-10-24T02:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456791",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_456792.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-25T22:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31968",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31968#issuecomment-456792",
    "user": "@vbraun"
}
```

Resolution: fixed
