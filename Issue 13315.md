# Issue 13315: Spline is not recomputed when interpolation points change

Issue created by migration from Trac.

Original creator: jvkersch

Original creation time: 2012-09-22 14:01:00

Assignee: jason, jkantor

CC:  kcrisman

Keywords: spline, gsl

The `sage.gsl.interpolation.Spline` class does not recompute the spline when the interpolation points are changed:


```
sage: S = spline([(1,1), (2,3), (4,5), (5, 4)]); S
[(1, 1), (2, 3), (4, 5), (5, 4)]
sage: S(4.1)
4.953437500000001
sage: del S[1]; S
[(1, 1), (4, 5), (5, 4)]
sage: S(4.1)
4.953437500000001
sage: S.append((4, 100)); S
[(1, 1), (4, 5), (5, 4), (4, 100)]
sage: S(4.1)
4.953437500000001
```



---

Comment by jvkersch created at 2012-09-22 14:27:32

Changing status from new to needs_review.


---

Comment by jvkersch created at 2012-09-22 14:27:32

The patch corrects this behavior and adds some examples to the class docstring.


---

Comment by tscrim created at 2012-10-01 07:43:13

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2012-10-01 07:43:13

I get the following errors

```
File "/home/travis/sage-5.4.beta1/devel/sage-reviews/sage/gsl/interpolation.pyx", line 30:
    sage: S(1.5)
Expected:
    2.507575757575758
Got:
    2.5075757575757573
**********************************************************************
File "/home/travis/sage-5.4.beta1/devel/sage-reviews/sage/gsl/interpolation.pyx", line 44:
    sage: S(1.5)
Expected:
    2.507575757575758
Got:
    2.5075757575757573
**********************************************************************
```

which is just a rounding issue. The rest of the documentation has 16 numbers after the decimal.

Also I think you should use single backticks to get math mode and double backticks for inline code in the documentation, and use the automatic trac link `:trac:'13519'` where the single quotes are backticks (since I don't know how to get the escape to work here) instead of !#13519 on line 131. The functionality looks good otherwise.


---

Attachment


---

Comment by jvkersch created at 2012-10-06 21:47:38

Changing status from needs_work to needs_review.


---

Comment by jvkersch created at 2012-10-06 21:47:38

Hey Travis, nice catch. I've uploaded a new version of the patch, where I've made the following changes: 

 1. I didn't have the rounding issue on my machine, but to make things more robust I've replaced the last few digits of each repeating decimal expansion by an ellipsis. 
 1. I've incorporated the automatic links to trac and the formatting for math mode and inline code. I've also made this change elsewhere in the file, so the resulting patch is a little larger than the previous one, but all the new changes just concern formatting.

Let me know if you have any further suggestions for changes.


---

Comment by tscrim created at 2012-10-07 00:15:37

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2012-10-07 00:15:37

Looks good to me.


---

Comment by jvkersch created at 2012-10-07 08:45:27

Thanks, Travis! If you don't mind, can I interest you in #13520 and #13530, which are small variations on this theme?


---

Comment by jdemeyer created at 2012-10-17 21:01:01

Resolution: fixed
