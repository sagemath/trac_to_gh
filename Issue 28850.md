# Issue 28850: Add GitHub Actions workflow for testing spkg-configure / build on various Linux distributions

archive/issues_028850.json:
```json
{
    "body": "CC:  @dimpase @vbraun @saraedum @isuruf @antonio-rojas @kiwifb\n\nThis is a follow-up on #29053: Add debian/fedora/arch package information to build/pkgs, generate Dockerfiles and installation help\n\nThis ticket adds `.github/workflows/tox.yml`, which installs a number of system packages and then runs `./bootstrap`, `./configure` and a bit of `make`.\n\nMost of the interesting parts are in #29053 - everything can be run \"locally\" (with tox and docker). This ticket only adds a simple additional file to run this automatically with several jobs on [GitHub](GitHub) Actions on a commit.\n\nFor each of the Linux distributions supported, there are two configurations: \n- `minimal` - has enough packages so that the build can succeed; \n- `standard` - has additionally all standard packages for which we have `spkg-configure.m4`.\n\nContext: \n- #29060: Meta-ticket: Add `Dockerfile`s and CI scripts for integration testing of source and binary distributions and of downstream packages\n- #27330: Meta-ticket: `spkg-configure`: Try to use as many system packages as possible\n\nIssue created by migration from https://trac.sagemath.org/ticket/29087\n\n",
    "created_at": "2020-01-27T16:50:37Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Add GitHub Actions workflow for testing spkg-configure / build on various Linux distributions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28850",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @vbraun @saraedum @isuruf @antonio-rojas @kiwifb

This is a follow-up on #29053: Add debian/fedora/arch package information to build/pkgs, generate Dockerfiles and installation help

This ticket adds `.github/workflows/tox.yml`, which installs a number of system packages and then runs `./bootstrap`, `./configure` and a bit of `make`.

Most of the interesting parts are in #29053 - everything can be run "locally" (with tox and docker). This ticket only adds a simple additional file to run this automatically with several jobs on [GitHub](GitHub) Actions on a commit.

For each of the Linux distributions supported, there are two configurations: 
- `minimal` - has enough packages so that the build can succeed; 
- `standard` - has additionally all standard packages for which we have `spkg-configure.m4`.

Context: 
- #29060: Meta-ticket: Add `Dockerfile`s and CI scripts for integration testing of source and binary distributions and of downstream packages
- #27330: Meta-ticket: `spkg-configure`: Try to use as many system packages as possible

Issue created by migration from https://trac.sagemath.org/ticket/29087





---

archive/issue_comments_407520.json:
```json
{
    "body": "I am all for more CI, but would it not make more sense to add this to the existing [GitLab](GitLab) CI?",
    "created_at": "2020-01-27T17:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407520",
    "user": "https://github.com/saraedum"
}
```

I am all for more CI, but would it not make more sense to add this to the existing [GitLab](GitLab) CI?



---

archive/issue_comments_407521.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2020-01-27T17:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407521",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_407522.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-27T17:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407522",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_407523.json:
```json
{
    "body": "Replying to [comment:2 saraedum]:\n> I am all for more CI, but would it not make more sense to add this to the existing [GitLab](GitLab) CI?\n\nFine with me too. I have built this on top of tox and docker. It can also run locally. The GitHub-specific part is really minimal - https://git.sagemath.org/sage.git/commit/?h=6a2bf3d2140e2d625d4ca96a40485b74fa582e7a",
    "created_at": "2020-01-27T17:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407523",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:2 saraedum]:
> I am all for more CI, but would it not make more sense to add this to the existing [GitLab](GitLab) CI?

Fine with me too. I have built this on top of tox and docker. It can also run locally. The GitHub-specific part is really minimal - https://git.sagemath.org/sage.git/commit/?h=6a2bf3d2140e2d625d4ca96a40485b74fa582e7a



---

archive/issue_comments_407524.json:
```json
{
    "body": "Changing keywords from \"\" to \"docker, ContinuousIntegration\".",
    "created_at": "2020-01-27T17:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407524",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "docker, ContinuousIntegration".



---

archive/issue_comments_407525.json:
```json
{
    "body": "Personally, I like [GitHub](GitHub). I like [GitLab](GitLab) a bit better because it is very easy to provision our own runners (e.g., for obscure platforms.) The problem with [GitHub](GitHub) is that some people have quite a few reservations about it (lock-in, Microsoft, \u2026) so I think [GitLab](GitLab) is the better choice for such an extensive community.\n\nIn any case, glad to see these things happen. Feel free to ping/bug me explicitly if you need reviews on anything docker/CI.",
    "created_at": "2020-01-27T17:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407525",
    "user": "https://github.com/saraedum"
}
```

Personally, I like [GitHub](GitHub). I like [GitLab](GitLab) a bit better because it is very easy to provision our own runners (e.g., for obscure platforms.) The problem with [GitHub](GitHub) is that some people have quite a few reservations about it (lock-in, Microsoft, â€¦) so I think [GitLab](GitLab) is the better choice for such an extensive community.

In any case, glad to see these things happen. Feel free to ping/bug me explicitly if you need reviews on anything docker/CI.



---

archive/issue_comments_407526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-01-27T19:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407527.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-01-28T00:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407528.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-01-28T23:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407529.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-30T04:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407530.json:
```json
{
    "body": "Replying to [comment:7 saraedum]:\n> Personally, I like [GitHub](GitHub). I like [GitLab](GitLab) a bit better because it is very easy to provision our own runners (e.g., for obscure platforms.) The problem with [GitHub](GitHub) is that some people have quite a few reservations about it (lock-in, Microsoft, \u2026) so I think [GitLab](GitLab) is the better choice for such an extensive community.\n\nYes, I understand these concerns. To avoid lock-in, in this ticket the definition of the tests (for linux) is driven by tox and docker, rather than relying on the specific environments provided by a CI vendor. Likewise for the homebrew tests for macOS on this ticket. \n\nI don't have the time to work on another CI platform but would certainly welcome it if other CI enthusiasts wanted to implement a solution on another platform in a follow-up ticket.\n\n> Feel free to ping/bug me explicitly if you need reviews on anything docker/CI.\n\nThanks. This ticket would be ready for review.",
    "created_at": "2020-01-30T16:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407530",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:7 saraedum]:
> Personally, I like [GitHub](GitHub). I like [GitLab](GitLab) a bit better because it is very easy to provision our own runners (e.g., for obscure platforms.) The problem with [GitHub](GitHub) is that some people have quite a few reservations about it (lock-in, Microsoft, â€¦) so I think [GitLab](GitLab) is the better choice for such an extensive community.

Yes, I understand these concerns. To avoid lock-in, in this ticket the definition of the tests (for linux) is driven by tox and docker, rather than relying on the specific environments provided by a CI vendor. Likewise for the homebrew tests for macOS on this ticket. 

I don't have the time to work on another CI platform but would certainly welcome it if other CI enthusiasts wanted to implement a solution on another platform in a follow-up ticket.

> Feel free to ping/bug me explicitly if you need reviews on anything docker/CI.

Thanks. This ticket would be ready for review.



---

archive/issue_comments_407531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-31T22:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407532.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-02T20:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407533.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-02-02T21:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407534.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-02-02T21:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-02-06T15:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_407536.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-06T15:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407537.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-17T00:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407538.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-17T00:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407539.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-22T22:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407540.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-02T02:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407541.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-07T21:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407541",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_407542.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-08T21:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407543.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-08T21:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407544.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-09T01:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407544",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_407545.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-12T03:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_407546.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T03:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407547.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T03:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407548.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T09:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407549.json:
```json
{
    "body": "what's the story with AC_FC_FUNC?",
    "created_at": "2020-03-12T09:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407549",
    "user": "https://github.com/dimpase"
}
```

what's the story with AC_FC_FUNC?



---

archive/issue_comments_407550.json:
```json
{
    "body": "See #29104 - your solution didn\u2019t work",
    "created_at": "2020-03-12T09:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407550",
    "user": "https://github.com/mkoeppe"
}
```

See #29104 - your solution didnâ€™t work



---

archive/issue_comments_407551.json:
```json
{
    "body": "Oops, it seems there is no way to call `AC_FC_FUNC` conditionally, it is still called even if there is no Fortran detected.\n\nWeird, I don't understand why this happens.",
    "created_at": "2020-03-12T10:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407551",
    "user": "https://github.com/dimpase"
}
```

Oops, it seems there is no way to call `AC_FC_FUNC` conditionally, it is still called even if there is no Fortran detected.

Weird, I don't understand why this happens.



---

archive/issue_comments_407552.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T16:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407553.json:
```json
{
    "body": "I sent a message to autoconf bugs mailing list, asking whether inabiity to chain \nAC_FC_FREEFORM and AC_FC_FUNC is a bug.\n----\nNew commits:",
    "created_at": "2020-03-12T16:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407553",
    "user": "https://github.com/dimpase"
}
```

I sent a message to autoconf bugs mailing list, asking whether inabiity to chain 
AC_FC_FREEFORM and AC_FC_FUNC is a bug.
----
New commits:



---

archive/issue_comments_407554.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T21:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407555.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-03-12T21:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407555",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_407556.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T22:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407557.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-13T01:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407558.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-13T17:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407559.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-13T23:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407560.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-14T21:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407561.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-17T21:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_407562.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-18T03:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407563.json:
```json
{
    "body": "Could you factor out into a separate ticket the fix for AC_FC_FREEFORM and AC_FC_FUNC thing? Cause it's really a bug fix.",
    "created_at": "2020-03-18T18:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407563",
    "user": "https://github.com/dimpase"
}
```

Could you factor out into a separate ticket the fix for AC_FC_FREEFORM and AC_FC_FUNC thing? Cause it's really a bug fix.



---

archive/issue_comments_407564.json:
```json
{
    "body": "Will do.",
    "created_at": "2020-03-18T18:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407564",
    "user": "https://github.com/mkoeppe"
}
```

Will do.



---

archive/issue_comments_407565.json:
```json
{
    "body": "This is now #29361",
    "created_at": "2020-03-18T18:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407565",
    "user": "https://github.com/mkoeppe"
}
```

This is now #29361



---

archive/issue_comments_407566.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-19T01:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_407567.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-03-19T21:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_407568.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-20T19:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407569.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-20T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407570.json:
```json
{
    "body": "So do I understand correctly that merging this into a branch and pushing to github (to a repo with enabled [GitHub](GitHub) actions) will trigger the testing. This is not so nice UI. Do I miss something here?\n\nI guess it's just one file that needs to be changed, which one?\n\nI'd prefer to have a command-line way (perhaps using some [GitHub](GitHub) tools) to trigger GH Actions on a given branch, say.",
    "created_at": "2020-03-21T07:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407570",
    "user": "https://github.com/dimpase"
}
```

So do I understand correctly that merging this into a branch and pushing to github (to a repo with enabled [GitHub](GitHub) actions) will trigger the testing. This is not so nice UI. Do I miss something here?

I guess it's just one file that needs to be changed, which one?

I'd prefer to have a command-line way (perhaps using some [GitHub](GitHub) tools) to trigger GH Actions on a given branch, say.



---

archive/issue_comments_407571.json:
```json
{
    "body": "When this ticket is merged into Sage, it will suffice to just push to github.",
    "created_at": "2020-03-21T12:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407571",
    "user": "https://github.com/mkoeppe"
}
```

When this ticket is merged into Sage, it will suffice to just push to github.



---

archive/issue_comments_407572.json:
```json
{
    "body": "Because the checks run for hours, it would probably be better to run the workflow only on pull requests, rather than on all pushes.\n\nhttps://help.github.com/en/actions/reference/events-that-trigger-workflows#pull-request-event-pull_request\n\n\n```\non:\n  pull_request:\n    types: [opened, synchronize]\n```\n",
    "created_at": "2020-03-21T20:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407572",
    "user": "https://github.com/mkoeppe"
}
```

Because the checks run for hours, it would probably be better to run the workflow only on pull requests, rather than on all pushes.

https://help.github.com/en/actions/reference/events-that-trigger-workflows#pull-request-event-pull_request


```
on:
  pull_request:
    types: [opened, synchronize]
```




---

archive/issue_comments_407573.json:
```json
{
    "body": "Then `gh pr create -f -d` would be a command line interface to trigger the GH actions run. https://cli.github.com/manual/gh_pr_create",
    "created_at": "2020-03-21T20:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407573",
    "user": "https://github.com/mkoeppe"
}
```

Then `gh pr create -f -d` would be a command line interface to trigger the GH actions run. https://cli.github.com/manual/gh_pr_create



---

archive/issue_comments_407574.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-21T22:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407575.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-21T23:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407576.json:
```json
{
    "body": "how does one control the platforms the tests are run on? Often one needs to check on a couple of different OSs at most, and the current setup looks quite wasteful.",
    "created_at": "2020-03-22T10:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407576",
    "user": "https://github.com/dimpase"
}
```

how does one control the platforms the tests are run on? Often one needs to check on a couple of different OSs at most, and the current setup looks quite wasteful.



---

archive/issue_comments_407577.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-22T14:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407578.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-22T15:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407579.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-22T21:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407580.json:
```json
{
    "body": "Replying to [comment:70 dimpase]:\n> how does one control the platforms the tests are run on? Often one needs to check on a couple of different OSs at most, and the current setup looks quite wasteful.\n\nBy editing the section called `matrix` in the file `.github/workflows/tox.yml`.",
    "created_at": "2020-03-23T01:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407580",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:70 dimpase]:
> how does one control the platforms the tests are run on? Often one needs to check on a couple of different OSs at most, and the current setup looks quite wasteful.

By editing the section called `matrix` in the file `.github/workflows/tox.yml`.



---

archive/issue_comments_407581.json:
```json
{
    "body": "https://github.com/mkoeppe/sage/runs/526226655:\n\n```\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 3638.0 seconds\n    cpu time: 5482.8 seconds\n    cumulative wall time: 10347.2 seconds\nError processing tar file(exit status 1): write /sage/src/build/temp.linux-x86_64-3.7/build/cythonized/sage/rings/finite_rings/integer_mod.o: no space left on device\nERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage/sage/.tox/docker-ubuntu-trusty-minimal/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'\n```\n\n\ndocker build ends with \"no space left on device\" \u00b7 Issue #18144 \u00b7 moby/moby\nhttps://github.com/moby/moby/issues/18144\n\nError pulling image (...) no space left on device \u00b7 Issue #10613 \u00b7 moby/moby\nhttps://github.com/moby/moby/issues/10613\n\ndockerd | Docker Documentation\nhttps://docs.docker.com/engine/reference/commandline/dockerd/#storage-driver-options\n\nConfigure and troubleshoot the Docker daemon | Docker Documentation\nhttps://docs.docker.com/config/daemon/",
    "created_at": "2020-03-23T13:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407581",
    "user": "https://github.com/mkoeppe"
}
```

https://github.com/mkoeppe/sage/runs/526226655:

```
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 3638.0 seconds
    cpu time: 5482.8 seconds
    cumulative wall time: 10347.2 seconds
Error processing tar file(exit status 1): write /sage/src/build/temp.linux-x86_64-3.7/build/cythonized/sage/rings/finite_rings/integer_mod.o: no space left on device
ERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage/sage/.tox/docker-ubuntu-trusty-minimal/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'
```


docker build ends with "no space left on device" Â· Issue #18144 Â· moby/moby
https://github.com/moby/moby/issues/18144

Error pulling image (...) no space left on device Â· Issue #10613 Â· moby/moby
https://github.com/moby/moby/issues/10613

dockerd | Docker Documentation
https://docs.docker.com/engine/reference/commandline/dockerd/#storage-driver-options

Configure and troubleshoot the Docker daemon | Docker Documentation
https://docs.docker.com/config/daemon/



---

archive/issue_comments_407582.json:
```json
{
    "body": "sysinfo at https://github.com/mkoeppe/sage/runs/526929826",
    "created_at": "2020-03-23T16:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407582",
    "user": "https://github.com/mkoeppe"
}
```

sysinfo at https://github.com/mkoeppe/sage/runs/526929826



---

archive/issue_comments_407583.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-24T17:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407583",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407584.json:
```json
{
    "body": "this needs more documentation, I gather - on a followup ticket, something to be mentioned in README.md too. But this is good to go, I think.",
    "created_at": "2020-03-24T17:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407584",
    "user": "https://github.com/dimpase"
}
```

this needs more documentation, I gather - on a followup ticket, something to be mentioned in README.md too. But this is good to go, I think.



---

archive/issue_comments_407585.json:
```json
{
    "body": "Thanks! I've created #29401 - Add documentation",
    "created_at": "2020-03-24T21:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407585",
    "user": "https://github.com/mkoeppe"
}
```

Thanks! I've created #29401 - Add documentation



---

archive/issue_comments_407586.json:
```json
{
    "body": "this needs a rebase.",
    "created_at": "2020-03-29T03:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407586",
    "user": "https://github.com/dimpase"
}
```

this needs a rebase.



---

archive/issue_comments_407587.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-03-29T04:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_407588.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-03-29T04:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407588",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_407589.json:
```json
{
    "body": "Merged 9.1.beta9",
    "created_at": "2020-03-29T04:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407589",
    "user": "https://github.com/mkoeppe"
}
```

Merged 9.1.beta9



---

archive/issue_comments_407590.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-30T01:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407590",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407591.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-09T22:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28850#issuecomment-407591",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_026682.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2020-04-09T22:44:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28850",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28850#event-26682"
}
```
