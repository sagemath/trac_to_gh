# Issue 30054: try-except block in display method

Issue created by migration from https://trac.sagemath.org/ticket/30291

Original creator: @mjungmath

Original creation time: 2020-08-05 10:09:02

CC:  egourgoulhon tscrim mkoeppe




---

Comment by @mjungmath created at 2020-08-05 11:38:11

Changing type from PLEASE CHANGE to enhancement.


---

Comment by @mjungmath created at 2020-08-05 11:38:26

Changing component from PLEASE CHANGE to manifolds.


---

Comment by @mjungmath created at 2020-08-05 12:12:14

Changing status from new to needs_review.


---

Comment by @mjungmath created at 2020-08-05 16:11:23

New commits:


---

Comment by git created at 2020-08-05 16:13:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2020-08-05 20:05:56

Apparently, I mixed some things up with #30239. I'll rebase; same for #30239.


---

Comment by git created at 2020-08-05 21:34:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mjungmath created at 2020-08-05 22:53:59

I am also curious about your opinion on my very last comment, Matthias.


---

Comment by @mjungmath created at 2020-08-05 22:54:42

Wrong ticket, sorry Matthias...I was referring to #30239. But you're already in the cc there.


---

Comment by tscrim created at 2020-08-07 23:00:55

Note that `(self - 1)` will involve a coercion call. How difficult would it be to instead add a method `is_trivial_one` that just pushes the `x - self.base_ring().one()` (or maybe `x - SR.one()`) computation to the essential code to avoid creating fewer temporary (heavy) objects?


---

Comment by git created at 2020-08-07 23:30:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2020-08-07 23:31:02

You mean something like this?


---

Comment by tscrim created at 2020-08-07 23:33:55

Yep, exactly. This seems like it should be faster than using `(self - 1).is_trivial_zero()`. If the the patchbot comes back green, then you can set a positive review.


---

Comment by @mjungmath created at 2020-08-07 23:37:33

I will do a short performance check tomorrow and post it here.


---

Comment by @mjungmath created at 2020-08-08 07:16:37

Thanks Travis.

Performance check follows...


---

Comment by @mjungmath created at 2020-08-08 07:16:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-08-10 18:50:06

Resolution: fixed
