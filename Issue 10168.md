# Issue 10168: Operands and Operator of symbolic expressions

archive/issues_010168.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @eviatarbach\n\nKeywords: operator operands symbolics\n\nI think that for all symbolic expression `s` should hold\n\n```\nsage: s == s.operator()(*s.operands())\n```\n\n\nThat currently does not work, for two reasons.\n\n1. There may be no operator at all:\n\n```\nsage: print x.operator()\nNone\nsage: x.operands()\n[]\n```\n\nI believe there should instead be an identity operator.\n\n2. The list of operands may be longer than what the operator accepts:\n\n```\nsage: s = 0.001*x^2+0.01*x+0.1*sin(1.01*x)+1\nsage: s.operands()\n[0.00100000000000000*x^2, 0.0100000000000000*x,\n0.100000000000000*sin(1.01000000000000*x), 1]\nsage: s.operator()(*s.operands())\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call\nlast)\n\n/home/king/<ipython console> in <module>()\n\nTypeError: op_add expected 2 arguments, got 4 \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10169\n\n",
    "created_at": "2010-10-25T12:06:04Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Operands and Operator of symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10168",
    "user": "@simon-king-jena"
}
```
Assignee: @burcin

CC:  @eviatarbach

Keywords: operator operands symbolics

I think that for all symbolic expression `s` should hold

```
sage: s == s.operator()(*s.operands())
```


That currently does not work, for two reasons.

1. There may be no operator at all:

```
sage: print x.operator()
None
sage: x.operands()
[]
```

I believe there should instead be an identity operator.

2. The list of operands may be longer than what the operator accepts:

```
sage: s = 0.001*x^2+0.01*x+0.1*sin(1.01*x)+1
sage: s.operands()
[0.00100000000000000*x^2, 0.0100000000000000*x,
0.100000000000000*sin(1.01000000000000*x), 1]
sage: s.operator()(*s.operands())
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call
last)

/home/king/<ipython console> in <module>()

TypeError: op_add expected 2 arguments, got 4 
```


Issue created by migration from https://trac.sagemath.org/ticket/10169





---

archive/issue_comments_103052.json:
```json
{
    "body": "Note to self: after this is fixed (or at least just the arithmetic operators), `simplify_hypergeometric` should be added to `simplify_full`. Now it cannot be added because it will sometimes raise errors due to this bug.",
    "created_at": "2013-07-16T05:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10168#issuecomment-103052",
    "user": "@eviatarbach"
}
```

Note to self: after this is fixed (or at least just the arithmetic operators), `simplify_hypergeometric` should be added to `simplify_full`. Now it cannot be added because it will sometimes raise errors due to this bug.



---

archive/issue_comments_103053.json:
```json
{
    "body": "Burcin, is there a problem with setting the sum operator to `Expression.add`, for example? I don't understand why we have to define new functions representing the arithmetic operators.",
    "created_at": "2013-07-16T07:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10168#issuecomment-103053",
    "user": "@eviatarbach"
}
```

Burcin, is there a problem with setting the sum operator to `Expression.add`, for example? I don't understand why we have to define new functions representing the arithmetic operators.



---

archive/issue_comments_103054.json:
```json
{
    "body": "This will not work with some symbolic functions because they may have been called with the `hold=True` keyword, and calling them again doesn't know about it. See also #17849. The solution of that ticket in line with this one would be to make keywords into operands (strings?, a dedicated class `OperatorKeyword`?).\n\nAnother possible solution would be to abandon the `hold` keyword and introduce a `hold` context, see #10035.",
    "created_at": "2015-02-27T08:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10168",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10168#issuecomment-103054",
    "user": "@rwst"
}
```

This will not work with some symbolic functions because they may have been called with the `hold=True` keyword, and calling them again doesn't know about it. See also #17849. The solution of that ticket in line with this one would be to make keywords into operands (strings?, a dedicated class `OperatorKeyword`?).

Another possible solution would be to abandon the `hold` keyword and introduce a `hold` context, see #10035.
