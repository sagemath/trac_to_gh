# Issue 18097: unique_sign and unique_trunc on real intervals

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2015-04-29 12:13:48

Real intervals are missing two functions: `unique_sign` and `unique_trunc`


---

Comment by vdelecroix created at 2015-04-29 13:27:57

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2015-04-29 13:27:57

New commits:


---

Comment by jdemeyer created at 2015-05-04 09:33:35

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-05-04 09:33:35

The `frac()` of an interval is not the same as

```
self.parent()(self.lower().frac(), self.upper().frac())
```


For example, the `frac()` of `RIF(6,7)` should be the whole interval `RIF(0,1)`.


---

Comment by jdemeyer created at 2015-05-04 09:34:53

The following would be a good doctest:

```
sage: RIF(-0.9, 0.9).unique_trunc()
0
```



---

Comment by jdemeyer created at 2015-05-04 09:42:01

For `frac()`, you should check specifically if `-1` or `1` should be contained in the result:

- if the interval `]a,b]` contains a positive integer (check if `floor(b) > max(a,0)`): `frac()` must contain `[0,1]`
- if the interval `[a,b[` contains a negative integer (check if `ceil(a) < min(b,0)`): `frac()` must contain `[-1,0]`

If you add the `frac()` of the endpoints, you should get everything.


---

Comment by git created at 2015-05-04 11:11:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-05-04 11:12:13

Replying to [comment:6 jdemeyer]:
> For `frac()`, you should check specifically if `-1` or `1` should be contained in the result:
> 
> - if the interval `]a,b]` contains a positive integer (check if `floor(b) > max(a,0)`): `frac()` must contain `[0,1]`
> - if the interval `[a,b[` contains a negative integer (check if `ceil(a) < min(b,0)`): `frac()` must contain `[-1,0]`
> 
> If you add the `frac()` of the endpoints, you should get everything.

Of course. This was completely wrong! Thanks.


---

Comment by vdelecroix created at 2015-05-04 11:16:26

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-05-04 12:27:42

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-05-04 12:27:42

Add some comments like I wrote in [comment:6]. I would also like to see doctests where one endpoint is an integer:

```
sage: RIF(0.5, 1).frac()
sage: RIF(1, 1.5).frac()
```



---

Comment by git created at 2015-05-04 12:49:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-05-04 12:51:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-05-04 12:51:39

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-05-04 13:17:50

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2015-05-04 13:20:42

Thanks Jeroen!


---

Comment by vbraun created at 2015-05-05 00:32:27

Resolution: fixed
