# Issue 30696: GH Actions: Repair upload of docker images

Issue created by migration from https://trac.sagemath.org/ticket/30933

Original creator: mkoeppe

Original creation time: 2020-11-17 21:40:01

CC:  @kliem dimpase @tobiasdiez

Even after #30733, although the login to `docker.pkg.github.com` succeeds, the push fails with `no basic auth credentials` - see https://github.com/mkoeppe/sage/runs/1414148202?check_suite_focus=true


---

Comment by mkoeppe created at 2020-11-17 21:45:31

This is possibly because `tox` does not pass on `$HOME` - and `docker login` stores the password in `/home/runner/.docker/config.json`.


---

Comment by mkoeppe created at 2020-11-17 21:47:54

`docker login` recommends to configure a credential helper - 
https://docs.docker.com/engine/reference/commandline/login/#credentials-store


---

Comment by mkoeppe created at 2020-11-18 06:19:13

New commits:


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by git created at 2021-12-31 21:49:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-12-31 21:56:12

Changing status from new to needs_review.


---

Comment by git created at 2021-12-31 23:53:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-01-01 00:05:48

This fixes the problem.

For example, https://github.com/mkoeppe/sage/runs/4676511083?check_suite_focus=true has just uploaded the image https://github.com/mkoeppe/sage/pkgs/container/sage%2Fsage-docker-ubuntu-trusty-minimal-configured


---

Comment by dimpase created at 2022-01-01 00:43:49

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-01-01 00:43:49

OK, Happy New Year :-)


---

Comment by mkoeppe created at 2022-01-01 01:05:52

Thanks Dima, happy new year to you too!


---

Comment by mkoeppe created at 2022-01-13 18:56:28

Changing priority from major to critical.


---

Comment by mkoeppe created at 2022-01-27 21:48:58

Changing priority from critical to blocker.


---

Comment by vbraun created at 2022-01-30 11:38:05

Resolution: fixed
