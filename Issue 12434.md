# Issue 12434: Fix sage --info <package>

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2012-02-28 07:45:00

Assignee: leif

CC:  jhpalmieri

Doing

```
./sage --info mpir
```

should show the `SPKG.txt` of the mpir spkg.


---

Comment by jdemeyer created at 2012-08-29 19:05:33

Changing status from new to needs_review.


---

Attachment


---

Attachment

Looks good to me.


---

Comment by jhpalmieri created at 2012-08-30 05:32:59

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-09-03 12:52:30

Resolution: fixed


---

Comment by jdemeyer created at 2012-09-16 18:29:07

Follow-up: #13497 (Disable sage --info test for bdists)


---

Comment by jhpalmieri created at 2012-09-28 01:37:43

What would you think of a patch like this:

```diff
diff --git a/spkg/bin/sage b/spkg/bin/sage
--- a/spkg/bin/sage
+++ b/spkg/bin/sage
`@``@` -919,9 +919,13 `@``@` install() {
         PKG_NAME=`echo "$PKG" | sed -e "s/\.spkg$//"`
         PKG_NAME=`basename "$PKG_NAME"`
 
-        "$SAGE_ROOT"/spkg/pipestatus \
-            "sage-spkg $OPTINFO $OPTF $OPTS $OPTC '$PKG' 2>&1" \
-            "(trap '' SIGINT; tee -a '$SAGE_ROOT/install.log' '$SAGE_LOGS/$PKG_NAME.log')"
+       if [ -n $OPTINFO ]; then
+            sage-spkg "$OPTINFO" "$PKG" 2>&1
+       else
+            "$SAGE_ROOT"/spkg/pipestatus \
+               "sage-spkg $OPTINFO $OPTF $OPTS $OPTC '$PKG' 2>&1" \
+               "(trap '' SIGINT; tee -a '$SAGE_ROOT/install.log' '$SAGE_LOGS/$PKG_NAME.log')"
+       fi
         # Do not try to install further packages if one failed
         if [ $? -ne 0 ]; then
             exit 1
```

(Or we can run `sage-spkg --info "$PKG"` for two cases in the `case` block.) Basically, I don't think that running `sage --info foo` should produce a file `spkg/logs/foo.log`.


---

Comment by jdemeyer created at 2012-09-28 06:40:57

Replying to [comment:6 jhpalmieri]:
> Basically, I don't think that running `sage --info foo` should produce a file `spkg/logs/foo.log`.
I agree, I already made a change like this for #5155.
