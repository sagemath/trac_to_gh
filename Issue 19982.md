# Issue 19982: Remove redundant functions from gen.pyx

Issue created by migration from https://trac.sagemath.org/ticket/20219

Original creator: jdemeyer

Original creation time: 2016-03-16 10:31:38

CC:  defeo

Many functions in `src/sage/libs/pari/gen.pyx` are just manual copies of auto-generated code. Remove those functions, but keep the doctests in `src/sage/libs/pari/tests.py`.


---

Comment by git created at 2016-03-16 13:58:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-16 14:11:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-16 15:03:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-16 16:54:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-16 18:00:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-16 22:03:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-03-17 10:27:42

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-03-23 13:55:23

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2016-03-23 13:55:23

There was no doctest for `vecmin`, `vecmax`, `elltaniyama`, `bnfcertify`, `bnfunit`, `idealval`, `nfsubfields`,  .Would it be possible to provide one to check that the methods exist?

The methods `idealintersection`, ` reverse`, `order`, ` listinsert`, `listput` were simply removed. You should provide deprecation and test it.

Finally, could you change the doctest

```
     sage: var('x')
     x
     sage: pari(x).ceil()
     x
```

to

```
    sage: pari(SR.var('x')).ceil()
```



---

Comment by jdemeyer created at 2016-03-23 14:34:14

Replying to [comment:10 vdelecroix]:
> Finally, could you change the doctest
> {{{
>      sage: var('x')
>      x
>      sage: pari(x).ceil()
>      x
> }}}
> to
> {{{
>     sage: pari(SR.var('x')).ceil()
> }}}

Why?


---

Comment by vdelecroix created at 2016-03-23 14:39:00

Replying to [comment:11 jdemeyer]:
> Replying to [comment:10 vdelecroix]:
> > Finally, could you change the doctest
> > {{{
> >      sage: var('x')
> >      x
> >      sage: pari(x).ceil()
> >      x
> > }}}
> > to
> > {{{
> >     sage: pari(SR.var('x')).ceil()
> > }}}
> 
> Why?

Because `var` is an horrible function that implicitely put `x` in the namespace.


---

Comment by jdemeyer created at 2016-03-23 14:55:35

Replying to [comment:12 vdelecroix]:
> Because `var` is an horrible function that implicitely put `x` in the namespace.

Would you agree with putting `x` in the namespace explicitly:

```
sage: x = SR.var('x')
sage: pari(x)....
```



---

Comment by vdelecroix created at 2016-03-23 15:00:27

Replying to [comment:13 jdemeyer]:
> Replying to [comment:12 vdelecroix]:
> > Because `var` is an horrible function that implicitely put `x` in the namespace.
> 
> Would you agree with putting `x` in the namespace explicitly:
> {{{
> sage: x = SR.var('x')
> sage: pari(x)....
> }}}

I do.


---

Comment by git created at 2016-03-24 08:35:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-03-24 08:48:30

Replying to [comment:10 vdelecroix]:
> There was no doctest for `vecmin`, `vecmax`, `elltaniyama`, `bnfcertify`, `bnfunit`, `idealval`, `nfsubfields`,  .Would it be possible to provide one to check that the methods exist?

I don't see the point. We provide the functions exposed by PARI/GP. If these functions are used in Sage library code, there is an implicit test that they work. If they are not used, I don't see why it's our business to check that PARI/GP has a `vecmin()` function for example.

> The methods `idealintersection`, ` reverse`, `order`, ` listinsert`, `listput` were simply removed. You should provide deprecation and test it.

`idealintersection` and `reverse` are tested in `tests.py`. The last three indeed disappeared.


---

Comment by git created at 2016-03-24 09:13:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-03-24 09:15:14

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2016-03-24 20:15:15

Replying to [comment:16 jdemeyer]:
> Replying to [comment:10 vdelecroix]:
> > There was no doctest for `vecmin`, `vecmax`, `elltaniyama`, `bnfcertify`, `bnfunit`, `idealval`, `nfsubfields`,  .Would it be possible to provide one to check that the methods exist?
> 
> I don't see the point. We provide the functions exposed by PARI/GP. If these functions are used in Sage library code, there is an implicit test that they work. If they are not used, I don't see why it's our business to check that PARI/GP has a `vecmin()` function for example.

But these functions used to be there. Some people might use them outside of the Sage library code. I do not claim that the code was good from the begining but that the changes should be as smooth as possible.

> > The methods `idealintersection`, ` reverse`, `order`, ` listinsert`, `listput` were simply removed. You should provide deprecation and test it.
> 
> `idealintersection` and `reverse` are tested in `tests.py`. The last three indeed disappeared.

The same remark applies.


---

Comment by git created at 2016-03-25 09:10:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-03-25 09:24:23

OK, let's look at the functions that you mentioned:

* `vecmin`, `vecmax`: added back with doctests.
* `elltaniyama`, `bnfcertify`, `nfsubfields`, `idealval`: still exist, auto-generated.
* `bnfunit`: still exists in `gen.pyx`.
* `idealintersection`, `reverse`: still exist but deprecated.
* `order`: added back as deprecated alias.
* `listinsert`, `listput`: now auto-generated and doctested implicitly in `List()`.


---

Comment by git created at 2016-03-29 13:39:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-03-29 20:07:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-03-30 14:05:47

Resolution: fixed
