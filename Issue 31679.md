# Issue 31679: Polyhedron.relative_interior

archive/issues_031679.json:
```json
{
    "body": "CC:  @kliem @yuan-zhou @jplab @tscrim @novoselt @orlitzky\n\nWe introduce a new method `relative_interior`, which returns a simple object with a `__contains__` method. Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.\n\nThis will also simplify #31660.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31916\n\n",
    "created_at": "2021-06-06T01:16:13Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Polyhedron.relative_interior",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31679",
    "user": "@mkoeppe"
}
```
CC:  @kliem @yuan-zhou @jplab @tscrim @novoselt @orlitzky

We introduce a new method `relative_interior`, which returns a simple object with a `__contains__` method. Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.

This will also simplify #31660.

Issue created by migration from https://trac.sagemath.org/ticket/31916





---

archive/issue_comments_452509.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-06-06T18:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452509",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_452510.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-06T18:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452510",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452511.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-06T18:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452511",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452512.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-06T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452512",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452513.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-06T20:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452513",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452514.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-06T20:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452514",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452515.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-07T10:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452515",
    "user": "@kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452516.json:
```json
{
    "body": "There are various small things:\n\nThe interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n\nWhy do you implement `relative_interior` for relative interiors but not `interior`?\n\nWhy is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n\nComparison will raise `AttributeErrors`, when `other` is the universe.",
    "created_at": "2021-06-07T10:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452516",
    "user": "@kliem"
}
```

There are various small things:

The interior of a non-full-dimensional cone should be a cone, not a polyhedron.

Why do you implement `relative_interior` for relative interiors but not `interior`?

Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.

Comparison will raise `AttributeErrors`, when `other` is the universe.



---

archive/issue_comments_452517.json:
```json
{
    "body": "#31919 solves the problem with `closure`.",
    "created_at": "2021-06-07T19:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452517",
    "user": "@kliem"
}
```

#31919 solves the problem with `closure`.



---

archive/issue_comments_452518.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T19:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452518",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452519.json:
```json
{
    "body": "Replying to [comment:9 gh-kliem]:\n> The interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n\nCan't do - a `ConvexRationalPolyhedralCone` always contains 0\n\n> Why do you implement `relative_interior` for relative interiors but not `interior`?\n\nDone\n\n> Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n\nFor this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.\n\n> Comparison will raise `AttributeErrors`, when `other` is the universe.\n\nDone",
    "created_at": "2021-06-07T19:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452519",
    "user": "@mkoeppe"
}
```

Replying to [comment:9 gh-kliem]:
> The interior of a non-full-dimensional cone should be a cone, not a polyhedron.

Can't do - a `ConvexRationalPolyhedralCone` always contains 0

> Why do you implement `relative_interior` for relative interiors but not `interior`?

Done

> Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.

For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.

> Comparison will raise `AttributeErrors`, when `other` is the universe.

Done



---

archive/issue_comments_452520.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-07T19:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452520",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452521.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-07T19:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452521",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452522.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-06-07T19:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452522",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_452523.json:
```json
{
    "body": "Replying to [comment:12 mkoeppe]:\n> Replying to [comment:9 gh-kliem]:\n> > The interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n> \n> Can't do - a `ConvexRationalPolyhedralCone` always contains 0\nRight.\n> \n> > Why do you implement `relative_interior` for relative interiors but not `interior`?\n> \n> Done\n> \n> > Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n> \n> For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.\n\nAs noted above, I later discovered this on #31919 and it's fine to add it later on.\n> \n> > Comparison will raise `AttributeErrors`, when `other` is the universe.\n> \n> Done\n>",
    "created_at": "2021-06-07T19:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452523",
    "user": "@kliem"
}
```

Replying to [comment:12 mkoeppe]:
> Replying to [comment:9 gh-kliem]:
> > The interior of a non-full-dimensional cone should be a cone, not a polyhedron.
> 
> Can't do - a `ConvexRationalPolyhedralCone` always contains 0
Right.
> 
> > Why do you implement `relative_interior` for relative interiors but not `interior`?
> 
> Done
> 
> > Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.
> 
> For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.

As noted above, I later discovered this on #31919 and it's fine to add it later on.
> 
> > Comparison will raise `AttributeErrors`, when `other` is the universe.
> 
> Done
>



---

archive/issue_comments_452524.json:
```json
{
    "body": "Thanks! But I think I need to revise `relative_interior` to handle polyhedra that are already relatively open",
    "created_at": "2021-06-07T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452524",
    "user": "@mkoeppe"
}
```

Thanks! But I think I need to revise `relative_interior` to handle polyhedra that are already relatively open



---

archive/issue_comments_452525.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-07T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452525",
    "user": "@mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_452526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T19:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452526",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452527.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-07T19:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452527",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452528.json:
```json
{
    "body": "I was locking for a boundary case, but yes, if a polyhedron is it's affine hull, then it either empty or the universe it it's affine hull.",
    "created_at": "2021-06-07T19:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452528",
    "user": "@kliem"
}
```

I was locking for a boundary case, but yes, if a polyhedron is it's affine hull, then it either empty or the universe it it's affine hull.



---

archive/issue_comments_452529.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-07T19:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452529",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452530.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-06-07T20:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452530",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_452531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-06-07T20:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452531",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_452532.json:
```json
{
    "body": "Sorry, here's the same fix for cones",
    "created_at": "2021-06-07T20:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452532",
    "user": "@mkoeppe"
}
```

Sorry, here's the same fix for cones



---

archive/issue_comments_452533.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T20:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452533",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452534.json:
```json
{
    "body": "Is there a reason for the emptylines:\n\n\n```\n+    def is_relatively_open(self):\n+\n+        r\"\"\"\n+        Return whether ``self`` is relatively open.\n```\n\n\n\n```\n+class RelativeInterior(SageObject):\n+\n+    r\"\"\"\n```\n\n\n> Surround top-level function and class definitions with two blank lines.\n\n\n```\n+# ****************************************************************************\n+\n+from sage.structure.sage_object import SageObject\n+\n+class RelativeInterior(SageObject):\n```\n\n\nI'm not sure, if it also applies to the import.\n\nReally tiny: Does a docstring ending with an example contain an empty line in the end? (Doesn't need to be fixed, I just noticed.)\n\nMaybe for another ticket: Replace the `ppl` imports in `cone.py` by explicity imports to help pyflakes.\n\nOtherwise it's a positive review.",
    "created_at": "2021-06-07T21:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452534",
    "user": "@kliem"
}
```

Is there a reason for the emptylines:


```
+    def is_relatively_open(self):
+
+        r"""
+        Return whether ``self`` is relatively open.
```



```
+class RelativeInterior(SageObject):
+
+    r"""
```


> Surround top-level function and class definitions with two blank lines.


```
+# ****************************************************************************
+
+from sage.structure.sage_object import SageObject
+
+class RelativeInterior(SageObject):
```


I'm not sure, if it also applies to the import.

Really tiny: Does a docstring ending with an example contain an empty line in the end? (Doesn't need to be fixed, I just noticed.)

Maybe for another ticket: Replace the `ppl` imports in `cone.py` by explicity imports to help pyflakes.

Otherwise it's a positive review.



---

archive/issue_comments_452535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T22:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452535",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452536.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-06-08T06:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452536",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_452537.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-08T06:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452537",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452538.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-06-08T17:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452538",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_452539.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-29T17:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31679",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31679#issuecomment-452539",
    "user": "@vbraun"
}
```

Resolution: fixed
