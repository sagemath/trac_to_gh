# Issue 20794: "sage -package update" nukes checksums.ini on error

Issue created by migration from https://trac.sagemath.org/ticket/21031

Original creator: mkoeppe

Original creation time: 2016-07-15 17:52:40

CC:  vbraun jdemeyer

When something goes wrong during `sage -package update` because of a typo, the `checksums.ini` file is left empty.


---

Comment by mkoeppe created at 2020-12-06 18:17:38

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111


---

Comment by mkoeppe created at 2020-12-06 18:17:38

Changing keywords from "" to "sd111".


---

Comment by @kliem created at 2020-12-09 20:01:26

I can't reproduce this. However, `build/pkgs/normaliz/package-version.txt` is changed regardless, which isn't optimal.


---

Comment by @kliem created at 2020-12-10 21:28:50

New commits:


---

Comment by @kliem created at 2020-12-10 21:28:50

Changing status from new to needs_review.


---

Comment by @kliem created at 2020-12-10 21:29:32

This at least restores the previous version number (or tries to).

I don't know, if it is worth it.


---

Comment by mkoeppe created at 2020-12-11 03:08:48

... probably adds too much complexity for what it adds


---

Comment by @kliem created at 2020-12-11 07:02:32

Okay. The only use case would be a person having the sources but not in a git repository and trying to update. If this is the case, the person would have to fix the version number itself. I think this is ok.


---

Comment by chapoton created at 2020-12-17 20:33:29

Resolution: wontfix
