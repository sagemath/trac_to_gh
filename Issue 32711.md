# Issue 32711: pycodestyle: Do not check for E704

Issue created by migration from https://trac.sagemath.org/ticket/32948

Original creator: @tobiasdiez

Original creation time: 2021-11-29 12:15:10

CC:  mkoeppe chapoton mjo

Currently, `pycodestyle-minimal` checks for E704 (multiple statements on one line (def)) while `pycodestyle` does not as this rule is not activated by default. In fact, the documentation says:
> In the default configuration, the checks E121, E123, E126, E133, E226, E241, E242, E704, W503, W504 and W505 are ignored because they are not rules unanimously accepted, and PEP 8 does not enforce them.

E704 is also not listed in the description of the tox env, so I guess it has been included only by accident instead of purpose.


---

Comment by @tobiasdiez created at 2021-11-29 12:15:16

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-11-29 12:48:56

well, if it pass, why remove it ?


---

Comment by @tobiasdiez created at 2021-11-29 16:58:02

For typing you often have constructions like 

```
    @overload
    def volume_form(self) -> DiffForm: ...
    @overload
    def volume_form(self, contra: int) -> TensorField: ...
    def volume_form(self, contra=0):
```

This is not are not working with E704, see #29775 for an example.
If one insists on E704, a correctly formated version would be

```
    @overload
    def volume_form(self) -> DiffForm:
       ...


    @overload
    def volume_form(self, contra: int) -> TensorField:
       ...


    def volume_form(self, contra=0):
```

which is pretty awkward due to the required 2 lines between function defs from the E3XX rules (which are not required for 'single line defs').
 
Also it's confusing that 'minimal' is checking for more than the default 'maximal' config.


---

Comment by mjo created at 2021-11-30 00:15:42

I dislike this rule as well, but you can expect some fierce objections to any trivial cosmetic change like this.


---

Comment by dimpase created at 2021-12-04 21:27:46

can we also exclude `E741`, as we do use `I` a lot, as well as `l`?


---

Comment by mkoeppe created at 2021-12-04 23:28:55

Replying to [comment:3 gh-tobiasdiez]:
> which is pretty awkward due to the required 2 lines between function defs from the E3XX rules

Pretty sure that only 1 blank line is required between methods.


---

Comment by @tobiasdiez created at 2021-12-05 09:50:01

Replying to [comment:6 mkoeppe]:
> Replying to [comment:3 gh-tobiasdiez]:
> > which is pretty awkward due to the required 2 lines between function defs from the E3XX rules
> 
> Pretty sure that only 1 blank line is required between methods. 


https://www.python.org/dev/peps/pep-0008/#blank-lines
says
> Surround top-level function and class definitions with two blank lines.

> Method definitions inside a class are surrounded by a single blank line.

So it depends where the function is defined.

Anyway, I still think E704 has been activated only by accident, since the comments in the tox file don't mention it and "pycodestyle-maximum" is not testing for it.


---

Comment by @tobiasdiez created at 2021-12-12 18:18:00

Changing type from PLEASE CHANGE to defect.


---

Comment by mkoeppe created at 2021-12-12 18:58:54

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-12 18:58:54

I don't have strong opinions on these style details, but definitely `pycodestyle-minimal` should check a subset of `pycodestyle`.


---

Comment by @tobiasdiez created at 2021-12-12 19:00:21

Thanks!


---

Comment by vbraun created at 2021-12-23 20:25:42

Resolution: fixed
