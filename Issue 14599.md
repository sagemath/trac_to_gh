# Issue 14599: ppl-1.0 build error

Issue created by migration from Trac.

Original creator: stephen

Original creation time: 2013-06-21 22:41:53

Assignee: pjeremy

CC:  vbraun

I am compiling ppl-1.0 as part of sage-5.11 under FreeBSD-8.4. I get the following compilation error.


```
gcc -DHAVE_CONFIG_H -I. -I../.. -I../../interfaces/C
-I/usr/home/stephen/sage-devel/work/sage-5.11.beta2/local/include
-pedantic -std=gnu89 -Werror -g -O2 -frounding-math -pipe
-Wl,-rpath=/usr/home/stephen/sage-devel/work/sage-5.11.beta2/local/lib
-Wl,-rpath=/usr/local/lib/gcc46 -W -Wall -MT ppl_lpsol-ppl_lpsol.o -MD
-MP -MF .deps/ppl_lpsol-ppl_lpsol.Tpo -c -o ppl_lpsol-ppl_lpsol.o `test
-f 'ppl_lpsol.c' || echo './'`ppl_lpsol.c
ppl_lpsol.c: In function 'limit_virtual_memory':
ppl_lpsol.c:537:13: error: comparison between signed and unsigned
integer expressions [-Werror=sign-compare]
```

In FreeBSD, it looks like rlim_cur in struct rlimit is a signed number.

The following patch will work:

```
--- ppl-1.0.p0/src/demos/ppl_lpsol/ppl_lpsol.c.orig 2013-06-20 17:21:39.000000000 +0000
+++ ppl-1.0.p0/src/demos/ppl_lpsol/ppl_lpsol.c 2013-06-20 17:39:44.000000000 +0000
`@``@` -534,7 +534,7 `@``@`
   if (getrlimit(RLIMIT_AS, &t) != 0)
     fatal("getrlimit failed: %s", strerror(errno));

- if (bytes < t.rlim_cur) {
+ if (bytes < (unsigned long)(t.rlim_cur)) {
     t.rlim_cur = bytes;
     if (setrlimit(RLIMIT_AS, &t) != 0)
       fatal("setrlimit failed: %s", strerror(errno));
```


Reported upstream: https://www.cs.unipr.it/mantis/view.php?id=508


---

Comment by slelievre created at 2017-04-18 08:23:52

The upstream bug report is closed as fixed, with a comment that PPL 1.1 builds on FreeBSD 8.x.

This ticket here can probably be closed.


---

Comment by jdemeyer created at 2017-04-18 08:31:51

Solution: don't build with `-Werror`


---

Comment by jdemeyer created at 2017-04-18 08:32:32

Resolution: worksforme
