# Issue 12617: Move local/bin/sage-check-64 to spkg/bin/sage-arch-env

archive/issues_012617.json:
```json
{
    "body": "Assignee: leif\n\nSince `sage-env` sources `$SAGE_LOCAL/bin/sage-check-64`, it makes sense to move the latter file to `$SAGE_ROOT/spkg/bin`.  I also propose to rename the file to \"sage-arch-env\".  I would like to support a SAGE32 flag (see #12726) and it makes sense to use the same file for this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12789\n\n",
    "created_at": "2012-04-02T08:03:57Z",
    "labels": [
        "scripts",
        "major",
        "enhancement"
    ],
    "title": "Move local/bin/sage-check-64 to spkg/bin/sage-arch-env",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12617",
    "user": "jdemeyer"
}
```
Assignee: leif

Since `sage-env` sources `$SAGE_LOCAL/bin/sage-check-64`, it makes sense to move the latter file to `$SAGE_ROOT/spkg/bin`.  I also propose to rename the file to "sage-arch-env".  I would like to support a SAGE32 flag (see #12726) and it makes sense to use the same file for this.

Issue created by migration from https://trac.sagemath.org/ticket/12789





---

archive/issue_comments_150050.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-02T08:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150050",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_150051.json:
```json
{
    "body": "I haven't looked at the patches here, but #10303 and #11077 also had some ideas for clean up for `sage-check-64`.",
    "created_at": "2012-04-02T15:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150051",
    "user": "jhpalmieri"
}
```

I haven't looked at the patches here, but #10303 and #11077 also had some ideas for clean up for `sage-check-64`.



---

archive/issue_comments_150052.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> I haven't looked at the patches here, but #10303 and #11077 also had some ideas for clean up for `sage-check-64`.\n\nToo bad those tickets got abandoned, as they are bitrotten now.  Anyway, I will look at those tickets and take the good ideas here.",
    "created_at": "2012-04-02T15:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150052",
    "user": "jdemeyer"
}
```

Replying to [comment:7 jhpalmieri]:
> I haven't looked at the patches here, but #10303 and #11077 also had some ideas for clean up for `sage-check-64`.

Too bad those tickets got abandoned, as they are bitrotten now.  Anyway, I will look at those tickets and take the good ideas here.



---

archive/issue_comments_150053.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-02T20:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150053",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_150054.json:
```json
{
    "body": "Added items 5 and 6.\n\nOne idea from #10303 that I disagree with is to source `sage-check-64` (now `sage-arch-env`) only in `sage-spkg` and `sage-build`, i.e. when a package is being built.  I think it can be useful even within Sage, for example to compile Cython files.",
    "created_at": "2012-04-02T20:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150054",
    "user": "jdemeyer"
}
```

Added items 5 and 6.

One idea from #10303 that I disagree with is to source `sage-check-64` (now `sage-arch-env`) only in `sage-spkg` and `sage-build`, i.e. when a package is being built.  I think it can be useful even within Sage, for example to compile Cython files.



---

archive/issue_comments_150055.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-02T20:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150055",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_150056.json:
```json
{
    "body": "Replying to [comment:10 jdemeyer]:\n> Added items 5 and 6.\n> \n> One idea from #10303 that I disagree with is to source `sage-check-64` (now `sage-arch-env`) only in `sage-spkg` and `sage-build`, i.e. when a package is being built.  I think it can be useful even within Sage, for example to compile Cython files.\n\nWell, Cython should take `CFLAGS` etc. from distutils, i.e., Python.\n\nDoesn't really make sense to change the settings (`SAGE64` or whatever) afterwards or inbetween.  Either you do (or have) a 64-bit build, or not.  The original purpose of the `sage-64.txt` file is exactly to avoid mixing up 32-bit and 64-bit builds (although there are certainly better ways to achieve this).",
    "created_at": "2012-04-02T22:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150056",
    "user": "leif"
}
```

Replying to [comment:10 jdemeyer]:
> Added items 5 and 6.
> 
> One idea from #10303 that I disagree with is to source `sage-check-64` (now `sage-arch-env`) only in `sage-spkg` and `sage-build`, i.e. when a package is being built.  I think it can be useful even within Sage, for example to compile Cython files.

Well, Cython should take `CFLAGS` etc. from distutils, i.e., Python.

Doesn't really make sense to change the settings (`SAGE64` or whatever) afterwards or inbetween.  Either you do (or have) a 64-bit build, or not.  The original purpose of the `sage-64.txt` file is exactly to avoid mixing up 32-bit and 64-bit builds (although there are certainly better ways to achieve this).



---

archive/issue_comments_150057.json:
```json
{
    "body": "Shouldn't there be at least a warning if `SAGE64` is set to `\"no\"` but `sage-64.txt` already exists?\n\nSince this is exactly what we want to avoid: Mixing up both.",
    "created_at": "2012-04-02T22:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150057",
    "user": "leif"
}
```

Shouldn't there be at least a warning if `SAGE64` is set to `"no"` but `sage-64.txt` already exists?

Since this is exactly what we want to avoid: Mixing up both.



---

archive/issue_comments_150058.json:
```json
{
    "body": "Replying to [comment:12 leif]:\n> Shouldn't there be at least a warning if `SAGE64` is set to `\"no\"` but `sage-64.txt` already exists?\nI believe in the philosophy of \"user is always right\".  If the user *intentionally* set `SAGE64=yes` and then later `SAGE64=no`, we assume he knows what he's doing.  I don't see the need for a warning.  Besides, the warning would only be printed once (`sage-64.txt` is deleted if `SAGE64=no`), so it would be easy to miss.",
    "created_at": "2012-04-03T06:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150058",
    "user": "jdemeyer"
}
```

Replying to [comment:12 leif]:
> Shouldn't there be at least a warning if `SAGE64` is set to `"no"` but `sage-64.txt` already exists?
I believe in the philosophy of "user is always right".  If the user *intentionally* set `SAGE64=yes` and then later `SAGE64=no`, we assume he knows what he's doing.  I don't see the need for a warning.  Besides, the warning would only be printed once (`sage-64.txt` is deleted if `SAGE64=no`), so it would be easy to miss.



---

archive/issue_comments_150059.json:
```json
{
    "body": "Replying to [comment:11 leif]:\n> Well, Cython should take `CFLAGS` etc. from distutils, i.e., Python.\nPerhaps, but I think it's not impossible that some Sage library code or user code wants to look at `SAGE64`.  However, I'm not going to insist on this.  I just want this ticket to get reviewed and merged, unlike #10303.",
    "created_at": "2012-04-03T06:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150059",
    "user": "jdemeyer"
}
```

Replying to [comment:11 leif]:
> Well, Cython should take `CFLAGS` etc. from distutils, i.e., Python.
Perhaps, but I think it's not impossible that some Sage library code or user code wants to look at `SAGE64`.  However, I'm not going to insist on this.  I just want this ticket to get reviewed and merged, unlike #10303.



---

archive/issue_comments_150060.json:
```json
{
    "body": "Attachment [12789_scripts.patch](tarball://root/attachments/some-uuid/ticket12789/12789_scripts.patch) by jdemeyer created at 2012-04-29 14:00:57",
    "created_at": "2012-04-29T14:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150060",
    "user": "jdemeyer"
}
```

Attachment [12789_scripts.patch](tarball://root/attachments/some-uuid/ticket12789/12789_scripts.patch) by jdemeyer created at 2012-04-29 14:00:57



---

archive/issue_comments_150061.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd40.5\".",
    "created_at": "2012-05-26T18:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150061",
    "user": "vbraun"
}
```

Changing keywords from "" to "sd40.5".



---

archive/issue_comments_150062.json:
```json
{
    "body": "Attachment [12789_root.patch](tarball://root/attachments/some-uuid/ticket12789/12789_root.patch) by vbraun created at 2012-05-26 18:42:36\n\nLooks good!",
    "created_at": "2012-05-26T18:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150062",
    "user": "vbraun"
}
```

Attachment [12789_root.patch](tarball://root/attachments/some-uuid/ticket12789/12789_root.patch) by vbraun created at 2012-05-26 18:42:36

Looks good!



---

archive/issue_comments_150063.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-26T18:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150063",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_150064.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-14T06:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12617#issuecomment-150064",
    "user": "jdemeyer"
}
```

Resolution: fixed
