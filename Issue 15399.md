# Issue 15399: slow ascii_art after sympy update

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-01-06 03:33:25

CC:  elixyre burcin jpflori

This takes a lot of time

```
sage: ascii_art(integral(exp(x + x^2)/(x+1), x))
```

because sympy is trying to solve the integral before drawing the ascii art. We actually don't want sympy to solve the integral, just draw.


---

Comment by tscrim created at 2014-01-06 16:52:03

I've created a branch `public/sympy-ascii_art-15636` which passes `evaluate=False` to `sympify()` in `_ascii_art_()` because I don't think we want to evaluate something when we just want a text representation. However this does not solve the problem, so things must be getting evaluated during the conversion from Sage's symbolic expressions and sympy.


---

Comment by tscrim created at 2014-01-06 19:09:35

New commits:


---

Comment by git created at 2014-03-04 12:57:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2014-03-04 13:07:42

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2014-03-04 13:07:42

Converting sage integrals to sympy unevaluated `Integral`s instead of `integral` commands solves the problem and does not seem to break anything.

It works even without passing `evaluate=False` to `sympify()`, but doing it does not hurt. In fact, as far as I understand, we want conversions to sympy to do as little evaluation as possible in general. So I also rebased Travis' patch on top of `u/jpflori/ticket/15198` (to prevent a trivial merge conflict), and made `SympyConverter` use `evaluate=False` as well.
----
New commits:


---

Comment by vbraun created at 2014-03-04 14:11:04

Sounds good to me


---

Comment by tscrim created at 2014-03-04 16:21:56

Is that a positive review or an agreeing with the concept?


---

Comment by vbraun created at 2014-03-04 16:58:32

Resolution: fixed
