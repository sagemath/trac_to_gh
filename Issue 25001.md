# Issue 25001: Preload a portable random number generator

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2018-04-24 13:32:06

CC:  vbraun embray

We currently patch cddlib to replace `rand()` with a GNU implementation. The idea seems to be to get the same random numbers on all platforms (I could not really find which platform this was done for but I saw some things related to Solaris in the surroundings.)

If we really want to get stable random numbers for doctesting there, we should probably use a preload hack to fix `rand()` everywhere, see https://rafalcieslak.wordpress.com/2013/04/02/dynamic-linker-tricks-using-ld_preload-to-cheat-inject-features-and-investigate-programs/ to get the idea.


---

Comment by saraedum created at 2018-04-24 13:32:35

I would like to get some feedback on this idea. Has this been tried before?


---

Comment by saraedum created at 2018-04-24 13:36:46

(I am not sure how "portable" preloading is, i.e., which platforms support it.)


---

Comment by vbraun created at 2018-04-24 17:54:16

I don't think there are that there are other places where we rely on the glibc random number generator. Usually its the one in Python or a special cryptographically secure one; As far as cdd goes, I consider it a bug that it uses pseudorandom numbers at all, it implements a completely deterministic algorithm.


---

Comment by saraedum created at 2018-04-25 13:03:59

I see. Thanks for clarifying. I asked upstream whether they mind me fixing this.


---

Comment by saraedum created at 2018-04-25 13:03:59

Changing status from new to needs_review.


---

Comment by saraedum created at 2018-04-25 13:04:07

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2018-05-18 17:16:26

closing positively reviewed duplicates


---

Comment by vdelecroix created at 2018-05-18 17:16:26

Resolution: wontfix
