# Issue 29165: When SAGE_CHECK=warn, print warnings for failed test suites

archive/issues_029165.json:
```json
{
    "body": "CC:  mkoeppe\n\nFollowup to #29301: when running `make` with SAGE_CHECK=\"warn\", we should print out a message summarizing the failed test suites.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29402\n\n",
    "created_at": "2020-03-24T21:34:53Z",
    "labels": [
        "build",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "When SAGE_CHECK=warn, print warnings for failed test suites",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29165",
    "user": "jhpalmieri"
}
```
CC:  mkoeppe

Followup to #29301: when running `make` with SAGE_CHECK="warn", we should print out a message summarizing the failed test suites.


Issue created by migration from https://trac.sagemath.org/ticket/29402





---

archive/issue_comments_412965.json:
```json
{
    "body": "Here is an attempt. Also trying to remove some code duplication.\n----\nNew commits:",
    "created_at": "2020-03-24T21:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412965",
    "user": "jhpalmieri"
}
```

Here is an attempt. Also trying to remove some code duplication.
----
New commits:



---

archive/issue_comments_412966.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-24T21:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412966",
    "user": "jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412967.json:
```json
{
    "body": "It would be better if the message \"Warning: the following package(s) may have failed their test suites\" were only printed if look_for_errors finds a log file with a failing test suite",
    "created_at": "2020-03-26T14:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412967",
    "user": "mkoeppe"
}
```

It would be better if the message "Warning: the following package(s) may have failed their test suites" were only printed if look_for_errors finds a log file with a failing test suite



---

archive/issue_comments_412968.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T17:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412968",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412969.json:
```json
{
    "body": "Okay, how about this?",
    "created_at": "2020-03-26T17:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412969",
    "user": "jhpalmieri"
}
```

Okay, how about this?



---

archive/issue_comments_412970.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-27T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412970",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412971.json:
```json
{
    "body": "This seems to work well, thanks for working on it.\n\n```\n...\nSAGE_CHECK=warn, so scanning the log files. This may take a few seconds.\n\n* package:         yasm-1.3.0.p0\n  last build time: Mar 13 21:06\n  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log\n```\n",
    "created_at": "2020-03-27T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412971",
    "user": "mkoeppe"
}
```

This seems to work well, thanks for working on it.

```
...
SAGE_CHECK=warn, so scanning the log files. This may take a few seconds.

* package:         yasm-1.3.0.p0
  last build time: Mar 13 21:06
  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log
```




---

archive/issue_comments_412972.json:
```json
{
    "body": "And the refactoring of the script is also very nice. Thanks!",
    "created_at": "2020-03-27T13:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412972",
    "user": "mkoeppe"
}
```

And the refactoring of the script is also very nice. Thanks!



---

archive/issue_comments_412973.json:
```json
{
    "body": "Great, thanks!",
    "created_at": "2020-03-27T16:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412973",
    "user": "jhpalmieri"
}
```

Great, thanks!



---

archive/issue_comments_412974.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-05T08:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29165#issuecomment-412974",
    "user": "vbraun"
}
```

Resolution: fixed
