# Issue 13174: Add a cython implementation of the Kolakoski word

archive/issues_013174.json:
```json
{
    "body": "Assignee: @seblabbe\n\nCC:  abmasse tjolivet\n\nA Python implementation of the Kolakoski word was implemented some time ago in #8739. But, there exist much faster implementation especially some lines of C code of Dominique Bernardi shared by himself during Sage Days 28 in Orsay, France, in January 2011.\n\nThis patch adds a cython version of the code of Bernardi. It is much faster than the actual python implementation in Sage.\n\nBEFORE:\n\n\n```\nsage: K = words.KolakoskiWord() \nsage: K                                          \nword: 1221121221221121122121121221121121221221...\nsage: time K[100000]           \n1                              \nTime: CPU 0.96 s, Wall: 1.36 s \nsage: time K[1000000]          # takes forever                            \n```\n\n\nAFTER:\n\n\n```\nsage: K = words.KolakoskiWord(algorithm='Bernardi')\nsage: K                                          \nword: 1221121221221121122121121221121121221221...\nsage: time K[1000000]                              \n2                                                  \nTime: CPU 0.01 s, Wall: 0.02 s                     \nsage: time K[100000000]                            \n1                                                  \nTime: CPU 1.38 s, Wall: 1.92 s                     \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13346\n\n",
    "created_at": "2012-08-06T21:02:32Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Add a cython implementation of the Kolakoski word",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13174",
    "user": "https://github.com/seblabbe"
}
```
Assignee: @seblabbe

CC:  abmasse tjolivet

A Python implementation of the Kolakoski word was implemented some time ago in #8739. But, there exist much faster implementation especially some lines of C code of Dominique Bernardi shared by himself during Sage Days 28 in Orsay, France, in January 2011.

This patch adds a cython version of the code of Bernardi. It is much faster than the actual python implementation in Sage.

BEFORE:


```
sage: K = words.KolakoskiWord() 
sage: K                                          
word: 1221121221221121122121121221121121221221...
sage: time K[100000]           
1                              
Time: CPU 0.96 s, Wall: 1.36 s 
sage: time K[1000000]          # takes forever                            
```


AFTER:


```
sage: K = words.KolakoskiWord(algorithm='Bernardi')
sage: K                                          
word: 1221121221221121122121121221121121221221...
sage: time K[1000000]                              
2                                                  
Time: CPU 0.01 s, Wall: 0.02 s                     
sage: time K[100000000]                            
1                                                  
Time: CPU 1.38 s, Wall: 1.92 s                     
```


Issue created by migration from https://trac.sagemath.org/ticket/13346





---

archive/issue_comments_160540.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-06T22:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160540",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160541.json:
```json
{
    "body": "Attachment [trac13346_kolakoski_cython-sl.patch](tarball://root/attachments/some-uuid/ticket13346/trac13346_kolakoski_cython-sl.patch) by @seblabbe created at 2012-08-09 20:09:47",
    "created_at": "2012-08-09T20:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160541",
    "user": "https://github.com/seblabbe"
}
```

Attachment [trac13346_kolakoski_cython-sl.patch](tarball://root/attachments/some-uuid/ticket13346/trac13346_kolakoski_cython-sl.patch) by @seblabbe created at 2012-08-09 20:09:47



---

archive/issue_comments_160542.json:
```json
{
    "body": "I just updated the patch.",
    "created_at": "2012-08-09T20:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160542",
    "user": "https://github.com/seblabbe"
}
```

I just updated the patch.



---

archive/issue_comments_160543.json:
```json
{
    "body": "I should work on this ticket in the next days. I just need to install the newest sage version.",
    "created_at": "2013-01-10T15:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160543",
    "user": "https://trac.sagemath.org/admin/accounts/users/abmasse"
}
```

I should work on this ticket in the next days. I just need to install the newest sage version.



---

archive/issue_comments_160544.json:
```json
{
    "body": "Salut Alex,\n\nEn fait, un patch de V. Delecroix et Stepan Starosta est en attente et mon ticket ne s'applique plus sur le leur... Je devrais \u00e9crire une nouvelle version au courant de la semaine prochaine si tout va bien... Donc, le review de ce ticket est en stand by pour l'instant.\n\nOups, I wrote in French sorry.\n\nS\u00e9bastien",
    "created_at": "2013-01-11T17:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160544",
    "user": "https://github.com/seblabbe"
}
```

Salut Alex,

En fait, un patch de V. Delecroix et Stepan Starosta est en attente et mon ticket ne s'applique plus sur le leur... Je devrais écrire une nouvelle version au courant de la semaine prochaine si tout va bien... Donc, le review de ce ticket est en stand by pour l'instant.

Oups, I wrote in French sorry.

Sébastien



---

archive/issue_comments_160545.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-25T01:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160545",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_160546.json:
```json
{
    "body": "This ticket needs work to give the opportunity to #12224 to get into Sage first. Hoping it will not take forever.",
    "created_at": "2013-01-25T01:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13174",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13174#issuecomment-160546",
    "user": "https://github.com/seblabbe"
}
```

This ticket needs work to give the opportunity to #12224 to get into Sage first. Hoping it will not take forever.
