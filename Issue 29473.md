# Issue 29473: Update mac app installation instructions

archive/issues_029473.json:
```json
{
    "body": "CC:  @kcrisman @videlec @fchapoton @slel @rana-aerea @dimpase @vbraun\n\nApparently mac app installation instructions need updating (https://groups.google.com/d/msg/sage-devel/KuZXlKFHofI/WBlq9_yhAgAJ)\n\nThis should be done in:\n- the installation manual: `src/doc/en/installation/` \n- `src/mac-app/sage-README-macOS.txt` (see #25995)\n\nIssue created by migration from https://trac.sagemath.org/ticket/29710\n\n",
    "created_at": "2020-05-18T22:03:00Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Update mac app installation instructions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29473",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kcrisman @videlec @fchapoton @slel @rana-aerea @dimpase @vbraun

Apparently mac app installation instructions need updating (https://groups.google.com/d/msg/sage-devel/KuZXlKFHofI/WBlq9_yhAgAJ)

This should be done in:
- the installation manual: `src/doc/en/installation/` 
- `src/mac-app/sage-README-macOS.txt` (see #25995)

Issue created by migration from https://trac.sagemath.org/ticket/29710





---

archive/issue_comments_417834.json:
```json
{
    "body": "Just for clarification, this ticket is about anything needed for the app.  Separately we should have instructions relevant to Catalina for ordinary binaries, possibly updated on a relevant Wiki page, as mentioned in the description.",
    "created_at": "2020-05-18T22:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417834",
    "user": "https://github.com/kcrisman"
}
```

Just for clarification, this ticket is about anything needed for the app.  Separately we should have instructions relevant to Catalina for ordinary binaries, possibly updated on a relevant Wiki page, as mentioned in the description.



---

archive/issue_comments_417835.json:
```json
{
    "body": "See also: #30099 - remove traces of sws docs from macOS Sage app",
    "created_at": "2020-08-30T19:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417835",
    "user": "https://github.com/mkoeppe"
}
```

See also: #30099 - remove traces of sws docs from macOS Sage app



---

archive/issue_comments_417836.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-30T19:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417836",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_417837.json:
```json
{
    "body": "Is someone able to take care of this?",
    "created_at": "2020-08-30T19:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417837",
    "user": "https://github.com/mkoeppe"
}
```

Is someone able to take care of this?



---

archive/issue_comments_417838.json:
```json
{
    "body": "On a related note, this Ask Sage question\n\n- [Ask Sage question 53036](https://ask.sagemath.org/question/53036)\n\nreports an outdated README file on the\ndownload section of the Sage website.",
    "created_at": "2020-08-31T12:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417838",
    "user": "https://github.com/slel"
}
```

On a related note, this Ask Sage question

- [Ask Sage question 53036](https://ask.sagemath.org/question/53036)

reports an outdated README file on the
download section of the Sage website.



---

archive/issue_comments_417839.json:
```json
{
    "body": "Can we just retire the mac app completely? It seems it is only causing trouble.",
    "created_at": "2020-10-15T04:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417839",
    "user": "https://github.com/mkoeppe"
}
```

Can we just retire the mac app completely? It seems it is only causing trouble.



---

archive/issue_comments_417840.json:
```json
{
    "body": "this version of mac app must be retired, sure.",
    "created_at": "2020-10-15T08:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417840",
    "user": "https://github.com/dimpase"
}
```

this version of mac app must be retired, sure.



---

archive/issue_comments_417841.json:
```json
{
    "body": "Volker, could you at the very least drop sage app from the list of binaries you are building for the releases?",
    "created_at": "2020-10-15T10:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417841",
    "user": "https://github.com/dimpase"
}
```

Volker, could you at the very least drop sage app from the list of binaries you are building for the releases?



---

archive/issue_comments_417842.json:
```json
{
    "body": "I'm still kind of baffled by why we can't just cut and paste a documentation upgrade as suggested in the description of this ticket.  I've had something waiting for approval on the website GH page for months now.  I haven't heard anyone say the Mac app doesn't work at all (maybe they have, I just haven't seen those posts).",
    "created_at": "2020-10-15T12:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417842",
    "user": "https://github.com/kcrisman"
}
```

I'm still kind of baffled by why we can't just cut and paste a documentation upgrade as suggested in the description of this ticket.  I've had something waiting for approval on the website GH page for months now.  I haven't heard anyone say the Mac app doesn't work at all (maybe they have, I just haven't seen those posts).



---

archive/issue_comments_417843.json:
```json
{
    "body": "building does not work as advertised in mac-app readme:\n\n```\n% make\nmkdir -p sage-9.2.rc3-OSX_10.15.7_x86_64\nxcodebuild -target Sage -configuration Debug \\\n\t    ARCHS=x86_64 \\\n\t    ONLY_ACTIVE_ARCH=NO \\\n\t    SDKROOT=\nxcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance\nmake: *** [sage-9.2.rc3-OSX_10.15.7_x86_64/SageMath-9.2.rc3.app] Error 1\n```\n",
    "created_at": "2020-10-22T10:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417843",
    "user": "https://github.com/dimpase"
}
```

building does not work as advertised in mac-app readme:

```
% make
mkdir -p sage-9.2.rc3-OSX_10.15.7_x86_64
xcodebuild -target Sage -configuration Debug \
	    ARCHS=x86_64 \
	    ONLY_ACTIVE_ARCH=NO \
	    SDKROOT=
xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance
make: *** [sage-9.2.rc3-OSX_10.15.7_x86_64/SageMath-9.2.rc3.app] Error 1
```




---

archive/issue_comments_417844.json:
```json
{
    "body": "Actually, that makes sense.  We could add something that says \"In order to separately build the Mac app, you may need to install Xcode itself, not just command line tools, or update said tools.  The command `xcode-select --install` often works; sometimes you may need to uninstall previous installs with `sudo rm -rf /Library/Developer/CommandLineTools`.  Finally, going to https://developer.apple.com/download and installing them separately may also work, though this requires an Apple ID.\"\n\nAre you able to build the Mac app via `binary-pkg`, though?",
    "created_at": "2020-10-22T12:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417844",
    "user": "https://github.com/kcrisman"
}
```

Actually, that makes sense.  We could add something that says "In order to separately build the Mac app, you may need to install Xcode itself, not just command line tools, or update said tools.  The command `xcode-select --install` often works; sometimes you may need to uninstall previous installs with `sudo rm -rf /Library/Developer/CommandLineTools`.  Finally, going to https://developer.apple.com/download and installing them separately may also work, though this requires an Apple ID."

Are you able to build the Mac app via `binary-pkg`, though?



---

archive/issue_comments_417845.json:
```json
{
    "body": "I am checking the building now. It is very slow, as it seems that xcode has to \"bless\" a lot of files...",
    "created_at": "2020-10-22T14:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417845",
    "user": "https://github.com/dimpase"
}
```

I am checking the building now. It is very slow, as it seems that xcode has to "bless" a lot of files...



---

archive/issue_comments_417846.json:
```json
{
    "body": "the whole app thing is a kludge right now. I think we need to create a codesigned app that is to be installed in /Applications.\nAs it's not codesigned, running it is very, very slow.",
    "created_at": "2020-10-22T16:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417846",
    "user": "https://github.com/dimpase"
}
```

the whole app thing is a kludge right now. I think we need to create a codesigned app that is to be installed in /Applications.
As it's not codesigned, running it is very, very slow.



---

archive/issue_comments_417847.json:
```json
{
    "body": "Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an \"official\" Mac app?  Surely more overhead than Sage developers have to offer.",
    "created_at": "2020-10-22T16:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417847",
    "user": "https://github.com/kcrisman"
}
```

Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an "official" Mac app?  Surely more overhead than Sage developers have to offer.



---

archive/issue_comments_417848.json:
```json
{
    "body": "Replying to [comment:18 kcrisman]:\n> Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an \"official\" Mac app?  Surely more overhead than Sage developers have to offer.\n\nFirst things first, we should ship the commandline Sage installable into /Applications, see\nhttps://github.com/sagemath/binary-pkg/issues/26\n(or, perhaps, investigate the macOS-specific way to build a relocateable terminal application)\n\nwith this, it should be possible to build a codesigned app that uses this location.\n\nAt the moment, several parts of the Sage app don't work any more, e.g. one cannot launch a terminal session from Sage app, as one gets\n\n```\nRunning command: /Users/dima/sage/sage\n2020-10-23 10:24:16.913842+0100 Sage[27682:2147028] terminalRun: Error running Applescript: {\n    NSAppleScriptErrorAppName = \"System Events\";\n    NSAppleScriptErrorBriefMessage = \"Not authorized to send Apple events to System Events.\";\n    NSAppleScriptErrorMessage = \"Not authorized to send Apple events to System Events.\";\n    NSAppleScriptErrorNumber = \"-1743\";\n    NSAppleScriptErrorRange = \"NSRange: {86, 10}\";\n```\n\nyes, I loaded Sage app into XCode 12 to dig this up.\n\nLoading into XCode was not uneventful, there were a number of (legacy) errors, all of them fortunately automatically corrected, and\nthere was also necessary to modify `PATH` to include  `$SAGE_ROOT`.",
    "created_at": "2020-10-23T09:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417848",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:18 kcrisman]:
> Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an "official" Mac app?  Surely more overhead than Sage developers have to offer.

First things first, we should ship the commandline Sage installable into /Applications, see
https://github.com/sagemath/binary-pkg/issues/26
(or, perhaps, investigate the macOS-specific way to build a relocateable terminal application)

with this, it should be possible to build a codesigned app that uses this location.

At the moment, several parts of the Sage app don't work any more, e.g. one cannot launch a terminal session from Sage app, as one gets

```
Running command: /Users/dima/sage/sage
2020-10-23 10:24:16.913842+0100 Sage[27682:2147028] terminalRun: Error running Applescript: {
    NSAppleScriptErrorAppName = "System Events";
    NSAppleScriptErrorBriefMessage = "Not authorized to send Apple events to System Events.";
    NSAppleScriptErrorMessage = "Not authorized to send Apple events to System Events.";
    NSAppleScriptErrorNumber = "-1743";
    NSAppleScriptErrorRange = "NSRange: {86, 10}";
```

yes, I loaded Sage app into XCode 12 to dig this up.

Loading into XCode was not uneventful, there were a number of (legacy) errors, all of them fortunately automatically corrected, and
there was also necessary to modify `PATH` to include  `$SAGE_ROOT`.



---

archive/issue_comments_417849.json:
```json
{
    "body": "Thanks for looking into this.  I don't have access to a recent enough Mac for some of these problems.   I will be trying binary-pkg on the next full release of Sage and seeing what happens, of course.\n\nHere is a different question; what happens if you download a version of the app built for  (say) 9.1 on a previous Mac OS version?  Do the same errors occur, or is it Catalina+ specific?",
    "created_at": "2020-10-23T10:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417849",
    "user": "https://github.com/kcrisman"
}
```

Thanks for looking into this.  I don't have access to a recent enough Mac for some of these problems.   I will be trying binary-pkg on the next full release of Sage and seeing what happens, of course.

Here is a different question; what happens if you download a version of the app built for  (say) 9.1 on a previous Mac OS version?  Do the same errors occur, or is it Catalina+ specific?



---

archive/issue_comments_417850.json:
```json
{
    "body": "I can tell you what happens with our 9.1 app for 10.15.4 on 10.15.7 - it refuses to open, with the message \"...cannot be opened because the developer cannot be verified\".\n\nI guess only a drastic disabling of the security would allow this to run (if this is at all possible, I don't know), as the default options are either to\n\n-  only allow apps from Apple Store, or\n- only  allow apps either from the Store or from verified Apple Developers.",
    "created_at": "2020-10-23T12:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417850",
    "user": "https://github.com/dimpase"
}
```

I can tell you what happens with our 9.1 app for 10.15.4 on 10.15.7 - it refuses to open, with the message "...cannot be opened because the developer cannot be verified".

I guess only a drastic disabling of the security would allow this to run (if this is at all possible, I don't know), as the default options are either to

-  only allow apps from Apple Store, or
- only  allow apps either from the Store or from verified Apple Developers.



---

archive/issue_comments_417851.json:
```json
{
    "body": "I believe some of the instructions linked to here (and on the PR I have to the website) should address that.",
    "created_at": "2020-10-23T14:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417851",
    "user": "https://github.com/kcrisman"
}
```

I believe some of the instructions linked to here (and on the PR I have to the website) should address that.



---

archive/issue_comments_417852.json:
```json
{
    "body": "I am not sure whether on a managed machine executing these sort of security disabling things is feasible. E.g. I have a department owned machine with an antivirus installed - which I cannot disable.\nI don't want to brick the machine for rhe 2nd time in a short period.",
    "created_at": "2020-10-23T16:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417852",
    "user": "https://github.com/dimpase"
}
```

I am not sure whether on a managed machine executing these sort of security disabling things is feasible. E.g. I have a department owned machine with an antivirus installed - which I cannot disable.
I don't want to brick the machine for rhe 2nd time in a short period.



---

archive/issue_comments_417853.json:
```json
{
    "body": "Yup, understood - I'm not suggesting you personally try them necessarily, just that updating the instructions will be helpful.",
    "created_at": "2020-10-23T16:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417853",
    "user": "https://github.com/kcrisman"
}
```

Yup, understood - I'm not suggesting you personally try them necessarily, just that updating the instructions will be helpful.



---

archive/issue_comments_417854.json:
```json
{
    "body": "No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.",
    "created_at": "2020-10-23T20:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417854",
    "user": "https://github.com/dimpase"
}
```

No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.



---

archive/issue_comments_417855.json:
```json
{
    "body": "Replying to [comment:25 dimpase]:\n> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.\n\nI have opened #30867 to remove it.",
    "created_at": "2020-11-06T18:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417855",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:25 dimpase]:
> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.

I have opened #30867 to remove it.



---

archive/issue_comments_417856.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-06T19:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417856",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_417857.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-06T19:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417857",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_417858.json:
```json
{
    "body": "> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.\nI sincerely doubt this is true but do not have time or expertise on this codebase to effectively object.",
    "created_at": "2020-11-06T20:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417858",
    "user": "https://github.com/kcrisman"
}
```

> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.
I sincerely doubt this is true but do not have time or expertise on this codebase to effectively object.



---

archive/issue_comments_417859.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-11-25T08:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417859",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid



---

archive/issue_events_027215.json:
```json
{
    "actor": "@fchapoton",
    "created_at": "2020-11-25T08:46:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29473#event-27215"
}
```



---

archive/issue_comments_417860.json:
```json
{
    "body": "mac app has been removed",
    "created_at": "2020-11-25T08:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29473#issuecomment-417860",
    "user": "https://github.com/fchapoton"
}
```

mac app has been removed
