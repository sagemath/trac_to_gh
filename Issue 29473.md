# Issue 29473: Update mac app installation instructions

Issue created by migration from https://trac.sagemath.org/ticket/29710

Original creator: mkoeppe

Original creation time: 2020-05-18 22:03:00

CC:  kcrisman vdelecroix chapoton slelievre @rana-aerea dimpase vbraun

Apparently mac app installation instructions need updating (https://groups.google.com/d/msg/sage-devel/KuZXlKFHofI/WBlq9_yhAgAJ)

This should be done in:
 - the installation manual: `src/doc/en/installation/` 
 - `src/mac-app/sage-README-macOS.txt` (see #25995)


---

Comment by kcrisman created at 2020-05-18 22:17:05

Just for clarification, this ticket is about anything needed for the app.  Separately we should have instructions relevant to Catalina for ordinary binaries, possibly updated on a relevant Wiki page, as mentioned in the description.


---

Comment by mkoeppe created at 2020-08-30 19:35:33

See also: #30099 - remove traces of sws docs from macOS Sage app


---

Comment by mkoeppe created at 2020-08-30 19:35:33

Changing priority from major to critical.


---

Comment by mkoeppe created at 2020-08-30 19:36:13

Is someone able to take care of this?


---

Comment by slelievre created at 2020-08-31 12:22:36

On a related note, this Ask Sage question

- [Ask Sage question 53036](https://ask.sagemath.org/question/53036)

reports an outdated README file on the
download section of the Sage website.


---

Comment by mkoeppe created at 2020-10-15 04:56:23

Can we just retire the mac app completely? It seems it is only causing trouble.


---

Comment by dimpase created at 2020-10-15 08:05:39

this version of mac app must be retired, sure.


---

Comment by dimpase created at 2020-10-15 10:52:34

Volker, could you at the very least drop sage app from the list of binaries you are building for the releases?


---

Comment by kcrisman created at 2020-10-15 12:58:19

I'm still kind of baffled by why we can't just cut and paste a documentation upgrade as suggested in the description of this ticket.  I've had something waiting for approval on the website GH page for months now.  I haven't heard anyone say the Mac app doesn't work at all (maybe they have, I just haven't seen those posts).


---

Comment by dimpase created at 2020-10-22 10:55:33

building does not work as advertised in mac-app readme:

```
% make
mkdir -p sage-9.2.rc3-OSX_10.15.7_x86_64
xcodebuild -target Sage -configuration Debug \
	    ARCHS=x86_64 \
	    ONLY_ACTIVE_ARCH=NO \
	    SDKROOT=
xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance
make: *** [sage-9.2.rc3-OSX_10.15.7_x86_64/SageMath-9.2.rc3.app] Error 1
```



---

Comment by kcrisman created at 2020-10-22 12:41:29

Actually, that makes sense.  We could add something that says "In order to separately build the Mac app, you may need to install Xcode itself, not just command line tools, or update said tools.  The command `xcode-select --install` often works; sometimes you may need to uninstall previous installs with `sudo rm -rf /Library/Developer/CommandLineTools`.  Finally, going to https://developer.apple.com/download and installing them separately may also work, though this requires an Apple ID."

Are you able to build the Mac app via `binary-pkg`, though?


---

Comment by dimpase created at 2020-10-22 14:15:29

I am checking the building now. It is very slow, as it seems that xcode has to "bless" a lot of files...


---

Comment by dimpase created at 2020-10-22 16:30:15

the whole app thing is a kludge right now. I think we need to create a codesigned app that is to be installed in /Applications.
As it's not codesigned, running it is very, very slow.


---

Comment by kcrisman created at 2020-10-22 16:40:14

Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an "official" Mac app?  Surely more overhead than Sage developers have to offer.


---

Comment by dimpase created at 2020-10-23 09:34:09

Replying to [comment:18 kcrisman]:
> Yeah, that is probably something much harder to fix than this ticket doc upgrades.  What would even be involved in making an "official" Mac app?  Surely more overhead than Sage developers have to offer.

First things first, we should ship the commandline Sage installable into /Applications, see
https://github.com/sagemath/binary-pkg/issues/26
(or, perhaps, investigate the macOS-specific way to build a relocateable terminal application)

with this, it should be possible to build a codesigned app that uses this location.

At the moment, several parts of the Sage app don't work any more, e.g. one cannot launch a terminal session from Sage app, as one gets

```
Running command: /Users/dima/sage/sage
2020-10-23 10:24:16.913842+0100 Sage[27682:2147028] terminalRun: Error running Applescript: {
    NSAppleScriptErrorAppName = "System Events";
    NSAppleScriptErrorBriefMessage = "Not authorized to send Apple events to System Events.";
    NSAppleScriptErrorMessage = "Not authorized to send Apple events to System Events.";
    NSAppleScriptErrorNumber = "-1743";
    NSAppleScriptErrorRange = "NSRange: {86, 10}";
```

yes, I loaded Sage app into XCode 12 to dig this up.

Loading into XCode was not uneventful, there were a number of (legacy) errors, all of them fortunately automatically corrected, and
there was also necessary to modify `PATH` to include  `$SAGE_ROOT`.


---

Comment by kcrisman created at 2020-10-23 10:39:35

Thanks for looking into this.  I don't have access to a recent enough Mac for some of these problems.   I will be trying binary-pkg on the next full release of Sage and seeing what happens, of course.

Here is a different question; what happens if you download a version of the app built for  (say) 9.1 on a previous Mac OS version?  Do the same errors occur, or is it Catalina+ specific?


---

Comment by dimpase created at 2020-10-23 12:51:20

I can tell you what happens with our 9.1 app for 10.15.4 on 10.15.7 - it refuses to open, with the message "...cannot be opened because the developer cannot be verified".

I guess only a drastic disabling of the security would allow this to run (if this is at all possible, I don't know), as the default options are either to

 -  only allow apps from Apple Store, or
 - only  allow apps either from the Store or from verified Apple Developers.


---

Comment by kcrisman created at 2020-10-23 14:37:36

I believe some of the instructions linked to here (and on the PR I have to the website) should address that.


---

Comment by dimpase created at 2020-10-23 16:08:08

I am not sure whether on a managed machine executing these sort of security disabling things is feasible. E.g. I have a department owned machine with an antivirus installed - which I cannot disable.
I don't want to brick the machine for rhe 2nd time in a short period.


---

Comment by kcrisman created at 2020-10-23 16:18:05

Yup, understood - I'm not suggesting you personally try them necessarily, just that updating the instructions will be helpful.


---

Comment by dimpase created at 2020-10-23 20:49:51

No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.


---

Comment by mkoeppe created at 2020-11-06 18:46:56

Replying to [comment:25 dimpase]:
> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.

I have opened #30867 to remove it.


---

Comment by mkoeppe created at 2020-11-06 19:23:56

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-11-06 19:26:32

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2020-11-06 20:45:39

> No, my point is that the app is just too low quality now to be distributed. No amount of instructions is going to help it as it stands.
I sincerely doubt this is true but do not have time or expertise on this codebase to effectively object.


---

Comment by chapoton created at 2020-11-25 08:46:03

Resolution: invalid


---

Comment by chapoton created at 2020-11-25 08:46:03

mac app has been removed
