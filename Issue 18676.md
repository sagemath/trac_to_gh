# Issue 18676: Properly fix gdb optional test in doctest/test.py

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-07-16 13:13:25

CC:  slabbe fbissey


```
**********************************************************************
File "src/sage/doctest/test.py", line 330, in sage.doctest.test
Failed example:
    subprocess.call(["sage", "-t",  "--warn-long", "0", "--gdb", "1second.rst"], stdin=open(os.devnull), **kwds)  # long time, optional: gdb
Expected:
    exec gdb ...
    Running doctests...
    Doctesting 1 file.
    sage -t ... 1second.rst
        [2 tests, ... s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    ...
    0
Got:
    exec gdb -x "$SAGE_LOCAL/bin/sage-gdb-commands" --args python "$SAGE_LOCAL/bin/sage-runtests" --serial --timeout=0 --stats_path=/home/jdemeyer/.sage/timings2.json --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides 1second.rst
    GNU gdb (GDB) 7.8
    Copyright (C) 2014 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
    and "show warranty" for details.
    This GDB was configured as "x86_64-unknown-linux-gnu".
    Type "show configuration" for configuration details.
    For bug reporting instructions, please see:
    <http://www.gnu.org/software/gdb/bugs/>.
    Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.
    For help, type "help".
    Type "apropos word" to search for commands related to "word"...
    Reading symbols from python...done.
    warning: Could not load shared library symbols for linux-vdso.so.1.
    Do you need "set solib-search-path" or "set sysroot"?
    [Thread debugging using libthread_db enabled]
    Using host libthread_db library "/lib64/libthread_db.so.1".
    too many failed tests, not using stored timings
    Running doctests with ID 2015-07-16-14-35-43-4aa91299.
    Git branch: t/18787/bug_with_products_of_symbolic_variables_with_modular_integers
    Using --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides
    Doctesting 1 file.
    sage -t 1second.rst
        [2 tests, 1.00 s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    Total time for all tests: 1.0 seconds
        cpu time: 0.0 seconds
        cumulative wall time: 1.0 seconds
    [Inferior 1 (process 24492) exited normally]
    (gdb) quit
    0
**********************************************************************
```



---

Comment by slabbe created at 2015-07-16 13:15:28

Sorry, I thought that the empty string was catched by the "...". How should we fix it then?


---

Comment by slabbe created at 2015-07-16 13:17:23

Or "..." realy catch the emtpy string but the problem is with the double space?


---

Comment by jdemeyer created at 2015-07-16 14:46:52

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-07-16 14:46:52

Yes, the double space was the problem.
----
New commits:


---

Comment by slabbe created at 2015-07-16 16:54:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-16 22:51:10

Resolution: fixed
