# Issue 20577: py3 print : not tested cases, step 5

archive/issues_020577.json:
```json
{
    "body": "CC:  @tscrim\n\nanother small step towards python3\n\nsome more print converted to use python3 syntax\n\nIssue created by migration from https://trac.sagemath.org/ticket/20814\n\n",
    "created_at": "2016-06-12T08:27:31Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "py3 print : not tested cases, step 5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20577",
    "user": "@fchapoton"
}
```
CC:  @tscrim

another small step towards python3

some more print converted to use python3 syntax

Issue created by migration from https://trac.sagemath.org/ticket/20814





---

archive/issue_comments_284158.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-12T08:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284158",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_284159.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-06-12T08:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284159",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_284160.json:
```json
{
    "body": "An error here:\n\n\n```\n-    if verbose: print \"Check:\",\n+    if verbose:\n+        print(\"Check:\", end=\"\")\n```\n\n\nneeds a space after colon.",
    "created_at": "2016-06-12T10:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284160",
    "user": "@jm58660"
}
```

An error here:


```
-    if verbose: print "Check:",
+    if verbose:
+        print("Check:", end="")
```


needs a space after colon.



---

archive/issue_comments_284161.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-06-12T10:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284161",
    "user": "@jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_284162.json:
```json
{
    "body": "I found no other errors. You can mark this as *positive_review* after correcting above error.\n\nThis is probably my last review for a week. Btw, if you have much time you might be interested in reviewing the code at #20769, or if you have some minutes, making a comment to #20669.",
    "created_at": "2016-06-12T10:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284162",
    "user": "@jm58660"
}
```

I found no other errors. You can mark this as *positive_review* after correcting above error.

This is probably my last review for a week. Btw, if you have much time you might be interested in reviewing the code at #20769, or if you have some minutes, making a comment to #20669.



---

archive/issue_comments_284163.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-12T12:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284163",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284164.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-06-12T12:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284164",
    "user": "@jm58660"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_284165.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-06-12T17:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284165",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_284166.json:
```json
{
    "body": "Merge conflict, wait for next beta",
    "created_at": "2016-06-12T17:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284166",
    "user": "@vbraun"
}
```

Merge conflict, wait for next beta



---

archive/issue_comments_284167.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-13T06:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284167",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284168.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-13T07:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284168",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_284169.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-06-13T16:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284169",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_284170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-13T16:48:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284170",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284171.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-06-13T16:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284171",
    "user": "@fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_284172.json:
```json
{
    "body": "No time now. Travis?",
    "created_at": "2016-06-13T17:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284172",
    "user": "@jm58660"
}
```

No time now. Travis?



---

archive/issue_comments_284173.json:
```json
{
    "body": "bot is green",
    "created_at": "2016-06-14T07:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284173",
    "user": "@fchapoton"
}
```

bot is green



---

archive/issue_comments_284174.json:
```json
{
    "body": "So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?",
    "created_at": "2016-06-15T00:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284174",
    "user": "@tscrim"
}
```

So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?



---

archive/issue_comments_284175.json:
```json
{
    "body": "Replying to [comment:14 tscrim]:\n> So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?\n\nYes, I think so. this seems to be triggered ~~by the change in structure/test_factory.py~~.\nI was not expecting that, but as this was something I wanted to do anyway, I am happy\nto do it here.\n\n**EDIT**: I do not understand by what change this is triggered. Maybe one in misc ?\n\n1) I have not tested the new behaviour by adding a fake file with a bad print\n2) one should also check that the print behaviour in console and notebooks is still py2\n3) maybe this should be discussed on sage-devel, though this is not a major change really\n4) maybe this can/should be split in another ticket ?\n\nThis is the **keystone** of all my previous changes in the doc, that prevents any regression.",
    "created_at": "2016-06-15T06:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284175",
    "user": "@fchapoton"
}
```

Replying to [comment:14 tscrim]:
> So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?

Yes, I think so. this seems to be triggered ~~by the change in structure/test_factory.py~~.
I was not expecting that, but as this was something I wanted to do anyway, I am happy
to do it here.

**EDIT**: I do not understand by what change this is triggered. Maybe one in misc ?

1) I have not tested the new behaviour by adding a fake file with a bad print
2) one should also check that the print behaviour in console and notebooks is still py2
3) maybe this should be discussed on sage-devel, though this is not a major change really
4) maybe this can/should be split in another ticket ?

This is the **keystone** of all my previous changes in the doc, that prevents any regression.



---

archive/issue_comments_284176.json:
```json
{
    "body": "I have tested by adding a fake new file with a bad print in the doc: tests do not pass\n\nI have checked that the behaviour of print is unchanged in console and both notebooks.\n\nI still do not understand why this desirable behaviour happens.",
    "created_at": "2016-06-15T08:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284176",
    "user": "@fchapoton"
}
```

I have tested by adding a fake new file with a bad print in the doc: tests do not pass

I have checked that the behaviour of print is unchanged in console and both notebooks.

I still do not understand why this desirable behaviour happens.



---

archive/issue_comments_284177.json:
```json
{
    "body": "ping ?",
    "created_at": "2016-06-17T15:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284177",
    "user": "@fchapoton"
}
```

ping ?



---

archive/issue_comments_284178.json:
```json
{
    "body": "I think it was the change in `misc/dev_tools.py`. While in principle, I am for this change, I do believe we should have some discussion on sage-devel about it. In general, we can write 2/3 compatible docstrings, but we cannot strictly enforce it. I am in favor of enforcing the Python3 syntax, but it does create a discrepancy (at least if we add a strictly Python3 print statement). If there are no objections on sage-devel, then I am content with putting this to a positive review.",
    "created_at": "2016-06-18T02:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284178",
    "user": "@tscrim"
}
```

I think it was the change in `misc/dev_tools.py`. While in principle, I am for this change, I do believe we should have some discussion on sage-devel about it. In general, we can write 2/3 compatible docstrings, but we cannot strictly enforce it. I am in favor of enforcing the Python3 syntax, but it does create a discrepancy (at least if we add a strictly Python3 print statement). If there are no objections on sage-devel, then I am content with putting this to a positive review.



---

archive/issue_comments_284179.json:
```json
{
    "body": "I do not think that it comes from the changes in misc/dev_tools.py\n\nI have really tried to see where the change of behaviour came from, with no success so far.\n\nI would now prefer this ticket not to make this change of behaviour, but for this I need to understand what has to be undone, and I have not clue.",
    "created_at": "2016-06-18T09:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284179",
    "user": "@fchapoton"
}
```

I do not think that it comes from the changes in misc/dev_tools.py

I have really tried to see where the change of behaviour came from, with no success so far.

I would now prefer this ticket not to make this change of behaviour, but for this I need to understand what has to be undone, and I have not clue.



---

archive/issue_comments_284180.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-18T14:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284180",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284181.json:
```json
{
    "body": "ok, I think I have found that the problems were coming from the future import in `src/sage/modular/etaproducts.py`\n\nNo idea what happens exactly, but undoing this change gives us back the usual behaviour.\n\nSo this is back to being a very simple print ticket, one of the last ones for py files.",
    "created_at": "2016-06-18T14:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284181",
    "user": "@fchapoton"
}
```

ok, I think I have found that the problems were coming from the future import in `src/sage/modular/etaproducts.py`

No idea what happens exactly, but undoing this change gives us back the usual behaviour.

So this is back to being a very simple print ticket, one of the last ones for py files.



---

archive/issue_comments_284182.json:
```json
{
    "body": "If you could remove the added space in the copyright header for consistency, then you can set a positive review on my behalf.",
    "created_at": "2016-06-18T16:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284182",
    "user": "@tscrim"
}
```

If you could remove the added space in the copyright header for consistency, then you can set a positive review on my behalf.



---

archive/issue_comments_284183.json:
```json
{
    "body": "The added space remove I can (Yoda mode), but this change is suggested by pep8. Should I remove ?",
    "created_at": "2016-06-18T16:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284183",
    "user": "@fchapoton"
}
```

The added space remove I can (Yoda mode), but this change is suggested by pep8. Should I remove ?



---

archive/issue_comments_284184.json:
```json
{
    "body": "I think so. We consistently break the PEP8 in this case, and in our doc about file headers, the copyright is given without a space as well.",
    "created_at": "2016-06-18T16:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284184",
    "user": "@tscrim"
}
```

I think so. We consistently break the PEP8 in this case, and in our doc about file headers, the copyright is given without a space as well.



---

archive/issue_comments_284185.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-18T16:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284185",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_284186.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-18T17:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284186",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284187.json:
```json
{
    "body": "Thanks.",
    "created_at": "2016-06-18T17:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284187",
    "user": "@tscrim"
}
```

Thanks.



---

archive/issue_comments_284188.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-20T07:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20577#issuecomment-284188",
    "user": "@vbraun"
}
```

Resolution: fixed
