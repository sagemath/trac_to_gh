# Issue 20577: py3 print : not tested cases, step 5

Issue created by migration from https://trac.sagemath.org/ticket/20814

Original creator: chapoton

Original creation time: 2016-06-12 08:27:31

CC:  tscrim

another small step towards python3

some more print converted to use python3 syntax


---

Comment by chapoton created at 2016-06-12 08:28:08

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-06-12 08:28:08

New commits:


---

Comment by jmantysalo created at 2016-06-12 10:48:48

An error here:


```
-    if verbose: print "Check:",
+    if verbose:
+        print("Check:", end="")
```


needs a space after colon.


---

Comment by jmantysalo created at 2016-06-12 10:48:48

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-06-12 10:56:51

I found no other errors. You can mark this as _positive_review_ after correcting above error.

This is probably my last review for a week. Btw, if you have much time you might be interested in reviewing the code at #20769, or if you have some minutes, making a comment to #20669.


---

Comment by git created at 2016-06-12 12:04:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-06-12 12:05:18

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2016-06-12 17:47:22

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-06-12 17:47:22

Merge conflict, wait for next beta


---

Comment by git created at 2016-06-13 06:56:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-06-13 07:04:17

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-06-13 16:02:43

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-06-13 16:48:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-06-13 16:51:01

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-06-13 17:14:35

No time now. Travis?


---

Comment by chapoton created at 2016-06-14 07:34:59

bot is green


---

Comment by tscrim created at 2016-06-15 00:37:53

So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?


---

Comment by chapoton created at 2016-06-15 06:46:51

Replying to [comment:14 tscrim]:
> So with this, every time from this point forward we can never have a Python2 print statement in the doctests? Do I understand the ticket description correctly?

Yes, I think so. this seems to be triggered ~~by the change in structure/test_factory.py~~.
I was not expecting that, but as this was something I wanted to do anyway, I am happy
to do it here.

*EDIT*: I do not understand by what change this is triggered. Maybe one in misc ?

1) I have not tested the new behaviour by adding a fake file with a bad print
2) one should also check that the print behaviour in console and notebooks is still py2
3) maybe this should be discussed on sage-devel, though this is not a major change really
4) maybe this can/should be split in another ticket ?

This is the *keystone* of all my previous changes in the doc, that prevents any regression.


---

Comment by chapoton created at 2016-06-15 08:07:52

I have tested by adding a fake new file with a bad print in the doc: tests do not pass

I have checked that the behaviour of print is unchanged in console and both notebooks.

I still do not understand why this desirable behaviour happens.


---

Comment by chapoton created at 2016-06-17 15:21:34

ping ?


---

Comment by tscrim created at 2016-06-18 02:12:38

I think it was the change in `misc/dev_tools.py`. While in principle, I am for this change, I do believe we should have some discussion on sage-devel about it. In general, we can write 2/3 compatible docstrings, but we cannot strictly enforce it. I am in favor of enforcing the Python3 syntax, but it does create a discrepancy (at least if we add a strictly Python3 print statement). If there are no objections on sage-devel, then I am content with putting this to a positive review.


---

Comment by chapoton created at 2016-06-18 09:06:13

I do not think that it comes from the changes in misc/dev_tools.py

I have really tried to see where the change of behaviour came from, with no success so far.

I would now prefer this ticket not to make this change of behaviour, but for this I need to understand what has to be undone, and I have not clue.


---

Comment by git created at 2016-06-18 14:54:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-06-18 14:57:41

ok, I think I have found that the problems were coming from the future import in `src/sage/modular/etaproducts.py`

No idea what happens exactly, but undoing this change gives us back the usual behaviour.

So this is back to being a very simple print ticket, one of the last ones for py files.


---

Comment by tscrim created at 2016-06-18 16:15:32

If you could remove the added space in the copyright header for consistency, then you can set a positive review on my behalf.


---

Comment by chapoton created at 2016-06-18 16:17:18

The added space remove I can (Yoda mode), but this change is suggested by pep8. Should I remove ?


---

Comment by tscrim created at 2016-06-18 16:27:28

I think so. We consistently break the PEP8 in this case, and in our doc about file headers, the copyright is given without a space as well.


---

Comment by git created at 2016-06-18 16:56:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2016-06-18 17:43:11

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-06-18 17:43:11

Thanks.


---

Comment by vbraun created at 2016-06-20 07:17:01

Resolution: fixed
