# Issue 26964: Rename abs to __abs__ for UniversalCyclotomicField elements

Issue created by migration from https://trac.sagemath.org/ticket/27201

Original creator: slelievre

Original creation time: 2019-02-01 22:45:57

CC:  chapoton slelievre tscrim vdelecroix

Keywords: UniversalCyclotomicField, universal cyclotomic field

This ticket renames `abs` to `__abs__` for UniversalCyclotomicField elements.

With this, calling `abs(a)` calls `a.__abs__()`, which was not the case with `a.abs()`.

This is a follow-up to #26872 where `abs` should have been called `__abs__`.

See this report on Ask Sage and the comment there that #26872 did not fix the problem:

- [Ask Sage question 44623: Norm in Norm in UniversalCyclotomicField](https://ask.sagemath.org/question/44623/)


---

Comment by slelievre created at 2019-02-01 22:47:35

Changing status from new to needs_review.


---

Comment by slelievre created at 2019-02-01 22:48:46

Please review. Does this needs to go through deprecation?
----
New commits:


---

Comment by slelievre created at 2019-02-01 22:58:45

I checked that this solves the problem reported on Ask Sage:

```
sage: a = E(8)
sage: abs(a)
1
sage: v = vector([a])
sage: v.norm()
1
```



---

Comment by jdemeyer created at 2019-02-02 07:34:37

Replying to [comment:4 slelievre]:
> {{{
> sage: a = E(8)
> sage: abs(a)
> 1
> sage: v = vector([a])
> sage: v.norm()
> 1
> }}}

I think that this would be an excellent doctest to add.

Also: I prefer to see `abs(X)` instead of `X.__abs__()` in the tests.


---

Comment by chapoton created at 2019-02-02 08:03:58

and f.abs() should still work, so please keep an alias and a doctest


---

Comment by git created at 2019-02-02 23:48:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by slelievre created at 2019-02-02 23:51:20

Ready for review again with reviewer comments addressed.


---

Comment by chapoton created at 2019-02-03 08:18:42

ok


---

Comment by chapoton created at 2019-02-03 08:18:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-02-04 23:01:19

Resolution: fixed
