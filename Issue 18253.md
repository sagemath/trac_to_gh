# Issue 18253: pyflakes cleanup of interfaces

Issue created by migration from https://trac.sagemath.org/ticket/18490

Original creator: chapoton

Original creation time: 2015-05-24 15:40:08

pyflakes finds many small problems in many interfaces

let's correct them all


---

Comment by chapoton created at 2015-05-24 15:41:05

New commits:


---

Comment by chapoton created at 2015-05-24 15:41:05

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2015-05-24 22:23:33

There are still some problems

```
$ pyflakes-python2 src/sage/interfaces/*.py

src/sage/interfaces/chomp.py:670: list comprehension redefines 'x' from line 665
src/sage/interfaces/expect.py:60: 'AsciiArtString' imported but unused
src/sage/interfaces/maxima_abstract.py:978: local variable 'a' is assigned to but never used
src/sage/interfaces/tests.py:46: 'from all import *' used; unable to detect undefined names
```


Not sure if we should/can fix the last one.


---

Comment by chapoton created at 2015-05-25 06:38:57

At least three of them cannot be fixed.
- maxima_abstract: 'a' is used inside an eval
- tests: this file is testing several interfaces, it is simpler to keep the import *
- expect: this import is there to be imported from other places. So it cannot be removed.


---

Comment by git created at 2015-05-25 08:51:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aapitzsch created at 2015-05-25 09:05:48

Changing status from needs_review to needs_work.


---

Comment by aapitzsch created at 2015-05-25 09:05:48

Documentation fails to build.

```
[reference] interfaces:
[reference] WARNING: Unable to fetch /home/user/Development/sage/src/doc/output/doctrees/en/reference/interfaces/environment.pickle
Error building the documentation.

Note: incremental documentation builds sometimes cause spurious
error messages. To be certain that these are real errors, run
"make doc-clean" first and try again.
Traceback (most recent call last):
  File "/home/user/Development/sage/src/doc/common/builder.py", line 1626, in <module>
    getattr(get_builder(name), type)()
  File "/home/user/Development/sage/src/doc/common/builder.py", line 292, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/user/Development/sage/src/doc/common/builder.py", line 516, in _wrapper
    getattr(DocBuilder(self.name, lang), format)(*args, **kwds)
  File "/home/user/Development/sage/src/doc/common/builder.py", line 110, in f
    eval(compile(open(sys.argv[0]).read(), sys.argv[0], 'exec'))
  File "/home/user/Development/sage/src/doc/common/custom-sphinx-build.py", line 219, in <module>
    raise OSError(ERROR_MESSAGE)
OSError: [reference] WARNING: Unable to fetch /home/user/Development/sage/src/doc/output/doctrees/en/reference/interfaces/environment.pickle
```



---

Comment by chapoton created at 2015-05-25 09:32:07

yes, indeed. no idea where this can come from ?


---

Comment by git created at 2015-05-25 12:26:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-05-25 12:32:41

Changing status from needs_work to needs_review.


---

Comment by aapitzsch created at 2015-05-25 14:12:48

LGTM


---

Comment by aapitzsch created at 2015-05-25 14:12:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-25 22:49:38

Resolution: fixed
