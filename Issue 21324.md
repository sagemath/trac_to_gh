# Issue 21324: OpenBLAS package fails to build

Issue created by migration from Trac.

Original creator: mjo

Original creation time: 2016-09-22 12:32:42

CC:  strogdon

In #20096, OpenBLAS was made standard in place of ATLAS, but the build fails:


```
...
gcc -c -O2 -DMAX_STACK_ALLOC=2048 -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DNO_WARMUP -DMAX_CPU_NUMBER=4 -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME="_" -DCHAR_CNAME="" -DNO_AFFINITY -I. -DHAVE_LAPACK_CONFIG_H -I ../include -o lapacke_chpgvx.o lapacke_chpgvx.c
In file included from ../include/lapacke_utils.h:37:0,
                 from lapacke_chpgvx.c:34:
../include/lapacke.h:889:1: warning: null character(s) ignored
                             lapack_int ldb, lapack_complex_float* x,
 ^
In file included from ../include/lapacke_utils.h:37:0,
                 from lapacke_chpgvx.c:34:
../include/lapacke.h:889:8216: error: unknown type name 'ued'
                             lapack_int ldb, lapack_complex_float* x,
```



---

Attachment

Build log for openblas-0.2.15


---

Comment by mantepse created at 2016-09-26 19:14:17

See https://groups.google.com/forum/#!topic/sage-devel/1mtIT4FcaOk for another failure.


---

Comment by jpflori created at 2016-09-27 09:45:26

Can you try the latest upstream version?
That's currently 0.2.19.


---

Comment by strogdon created at 2016-09-27 14:15:38

I'm wondering if the hardened profile `gcc version 4.9.3 (Gentoo Hardened 4.9.3 p1.5, pie-0.6.4` is doing something strange. I have `gcc version 4.9.3 (Gentoo 4.9.3 p1.5, pie-0.6.4)` and it (0.2.15) builds for me, but my hardware is fairly old.


---

Comment by leif created at 2016-10-02 13:27:03

Until we merge a working version of OpenBLAS, we should probably revert the default to ATLAS.

The current version in Sage apparently crashes (or makes other parts of Sage crash) on any "recent" AMD CPU (Bulldozer, Piledriver aka `bdver1`, `bdver2` / Opteron 62xx, 63xx, etc.).


---

Comment by jpflori created at 2016-10-03 12:36:02

See #21627 for updating openblas.


---

Comment by mantepse created at 2018-08-27 05:53:33

Changing status from new to needs_review.


---

Comment by mantepse created at 2018-08-27 05:54:21

No longer relevant


---

Comment by mantepse created at 2018-08-27 05:54:21

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-02-26 13:58:00

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.


---

Comment by embray created at 2019-02-26 13:58:00

Resolution: invalid
