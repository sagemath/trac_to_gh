# Issue 13917: Fixing bug in shuffle product

archive/issues_013917.json:
```json
{
    "body": "Assignee: Chris Berg\n\nKeywords: shuffle product, days45\n\nShuffle product contains method does not work properly.\n\n\n```\nsage: w = Word('ab')\nsage: x = Word('ac')\nsage: w.shuffle(x)\nShuffle product of word: ab and word: ac\nsage: s = w.shuffle(x)\nsage: s.list()\n[word: abac, word: aabc, word: aacb, word: aabc, word: aacb, word: acab]\nsage: x*w in s\nFalse\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14121\n\n",
    "created_at": "2013-02-14T16:21:47Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "Fixing bug in shuffle product",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13917",
    "user": "chrisjamesberg"
}
```
Assignee: Chris Berg

Keywords: shuffle product, days45

Shuffle product contains method does not work properly.


```
sage: w = Word('ab')
sage: x = Word('ac')
sage: w.shuffle(x)
Shuffle product of word: ab and word: ac
sage: s = w.shuffle(x)
sage: s.list()
[word: abac, word: aabc, word: aacb, word: aabc, word: aacb, word: acab]
sage: x*w in s
False
```


Issue created by migration from https://trac.sagemath.org/ticket/14121





---

archive/issue_comments_173433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-14T16:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173433",
    "user": "chrisjamesberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_173434.json:
```json
{
    "body": "Attachment [fixing_shuffle_product_cb.patch](tarball://root/attachments/some-uuid/ticket14121/fixing_shuffle_product_cb.patch) by chrisjamesberg created at 2013-02-14 16:49:50",
    "created_at": "2013-02-14T16:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173434",
    "user": "chrisjamesberg"
}
```

Attachment [fixing_shuffle_product_cb.patch](tarball://root/attachments/some-uuid/ticket14121/fixing_shuffle_product_cb.patch) by chrisjamesberg created at 2013-02-14 16:49:50



---

archive/issue_comments_173435.json:
```json
{
    "body": "Hi,\n\nYou should add a test that ensures you actually correct the thing ! However, it would be a good idea to actually rewrite the whole method.\n\nVincent",
    "created_at": "2013-02-15T15:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173435",
    "user": "vdelecroix"
}
```

Hi,

You should add a test that ensures you actually correct the thing ! However, it would be a good idea to actually rewrite the whole method.

Vincent



---

archive/issue_comments_173436.json:
```json
{
    "body": "Theorem 7 in http://www8.cs.umu.se/research/uminf/reports/2011/001/part1.pdf seems relevant to finding a polynomial-time algorithm for this. Just mentioning.",
    "created_at": "2013-02-15T15:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173436",
    "user": "darij"
}
```

Theorem 7 in http://www8.cs.umu.se/research/uminf/reports/2011/001/part1.pdf seems relevant to finding a polynomial-time algorithm for this. Just mentioning.



---

archive/issue_comments_173437.json:
```json
{
    "body": "Attachment [trac_14121_review-fc.patch](tarball://root/attachments/some-uuid/ticket14121/trac_14121_review-fc.patch) by chapoton created at 2013-03-03 11:19:08",
    "created_at": "2013-03-03T11:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173437",
    "user": "chapoton"
}
```

Attachment [trac_14121_review-fc.patch](tarball://root/attachments/some-uuid/ticket14121/trac_14121_review-fc.patch) by chapoton created at 2013-03-03 11:19:08



---

archive/issue_comments_173438.json:
```json
{
    "body": "Here is a doctest.",
    "created_at": "2013-03-03T11:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173438",
    "user": "chapoton"
}
```

Here is a doctest.



---

archive/issue_comments_173439.json:
```json
{
    "body": "Hellooooooooooooooooooo !!\n\nWell, this patch definitely fixes a bug and is only slower ono the instances for which it gave bad answers... I think that it's good to go ! What would you think of adding a `.. TODO` in the method's docstring saying that the pdf given above contains the recipe for an efficient future new implementation of that method ?\n\nWhether you chose to add this comment or not, feel free to set this ticket to `positive_review` once you are set `:-)`\n\nNathann",
    "created_at": "2013-03-09T22:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173439",
    "user": "ncohen"
}
```

Hellooooooooooooooooooo !!

Well, this patch definitely fixes a bug and is only slower ono the instances for which it gave bad answers... I think that it's good to go ! What would you think of adding a `.. TODO` in the method's docstring saying that the pdf given above contains the recipe for an efficient future new implementation of that method ?

Whether you chose to add this comment or not, feel free to set this ticket to `positive_review` once you are set `:-)`

Nathann



---

archive/issue_comments_173440.json:
```json
{
    "body": "Wait, wait -- I've never said it gives a more efficient solution; I said it \"seems relevant\". I fear it uses a constant-size alphabet, which is not what we want...",
    "created_at": "2013-03-09T22:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173440",
    "user": "darij"
}
```

Wait, wait -- I've never said it gives a more efficient solution; I said it "seems relevant". I fear it uses a constant-size alphabet, which is not what we want...



---

archive/issue_comments_173441.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-03-10T14:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173441",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_173442.json:
```json
{
    "body": "HMmmmmmmmmmm... Well, then until we find a better way out ... `:-)`\n\nNathann",
    "created_at": "2013-03-10T14:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173442",
    "user": "ncohen"
}
```

HMmmmmmmmmmm... Well, then until we find a better way out ... `:-)`

Nathann



---

archive/issue_comments_173443.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-03-13T10:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13917#issuecomment-173443",
    "user": "jdemeyer"
}
```

Resolution: fixed
