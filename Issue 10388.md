# Issue 10388: Error creating an empty multi-edge (di)graph

Issue created by migration from https://trac.sagemath.org/ticket/10441

Original creator: mhs

Original creation time: 2010-12-08 03:00:40

Assignee: somebody

CC:  mvngu brunellus

Keywords: creating empty Graph, DiGraph, multiple_edges=True

In SAGE 4.5.1 if you try to create an empty graph or digraph using the multi-edge keyword the (di)graph created is a non-multi (di)graph.

Examples of the strange behaviour:


```
sage: G=Graph(multiple_edges=True)
sage: G
Graph on 0 vertices
```



```
sage: G=Graph([],multiple_edges=True)
sage: G
Graph on 0 vertices
```



```
sage: H=DiGraph(multiple_edges=True)
sage: H
Digraph on 0 vertices
```



```
sage: H=DiGraph([],multiple_edges=True)
sage: H
Digraph on 0 vertices
```


Nevertheless it works fine, i.e. produces a multi-graph/multi-digraph if one uses an empty dictionary like in the following:


```
sage: G=Graph([],multiple_edges=True)
sage: G
Multi-graph on 0 vertices
```



```
sage: H=DiGraph({},multiple_edges=True)
sage: H
Multi-digraph on 0 vertices
```


After posting on sage-develop *Strange behaviour of add_edges* [http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc](http://groups.google.com/group/sage-devel/browse_thread/thread/69773eae8ba3cefc) I was asked to open a new ticket...


---

Comment by brunellus created at 2012-01-13 10:22:46

I think that having **kwds in the Graph constructor is very confusing, because any misspelling of an argument pass through without notice. Do you see some serious reason why is this there? I'm looking into the code and can't see anything.


---

Comment by brunellus created at 2012-01-20 22:17:39

I started #12318 for the mentioned problem.

Fix for this ticket is a rather simple one, I think. Prove me wrong! :-)


---

Comment by brunellus created at 2012-01-20 22:17:39

Changing status from new to needs_review.


---

Comment by ncohen created at 2012-01-29 18:37:36

Hellooooooooooooo !!

Well, the code building the graph is a bit messy but indeed what you wrote 1) prevents the bug 2) is what we should do until somebody comes with another weird situation `:-)`

Would it be possible to move your "# not a multi [...]" comments to the line just above the test, though ? That's where we put flags like "optional" or "not tested" for the automatic tests, and it's best to be sure these comments do not interfere `^^;`

Nathann


---

Comment by ncohen created at 2012-01-29 18:37:52

Changing status from needs_review to needs_work.


---

Attachment

Thanks! Is it better now?


---

Comment by brunellus created at 2012-01-31 11:37:51

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2012-01-31 11:47:54

Hellooooooo !!!

I thought you would put the comments just before the "::" but there's no problem with way either... Good to go ! `:-)`

Nathann


---

Comment by ncohen created at 2012-01-31 11:47:54

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-06 21:23:13

Resolution: fixed
