# Issue 197: improve export/import capabilities of the SAGE notebook

archive/issues_000197.json:
```json
{
    "body": "Assignee: boothby\n\n* Improve the SAGE notebook\n  * Implement wiki typesetting for the notebook.\n  * Change notebook disk format to plain text (no pickling -- mainly for security reasons).\n  * Export functionality.  One should be able to export a single worksheet, or a collection of worksheets to any of the following three formats: latex, html, pdf, text.\n   * NOTES:\n     - NOTE: for each, we should allow a single worksheet, complete notebooks, and any subset of worksheets to be exported.\n     - Hopefully Tom Boothby and Alex C can help.\n   * PLAN:\n       0. Design and implement a wiki formatting system (this means basically just getting a function wiki2html from moinmoin.)\n       1. Design a logical interface:\n         - INPUT: list of worksheet names\n         - OUTPUT: * for latex/html: a link to a tarball or zip archive\n                   * for pdf/text -- link to a single file.\n                   * the archive contains both the latex and html and the complete notebook directory, so it can be opened by anybody later. \n                   * the plain text option gives everything as a single plain text file -- no tarball.\n       2. Design interface that can be used from notebook.\n         - A command --, e.g., \n\n```\n              %export latex    # -- exports current worksheet in latex\n              %export html graphs plots   # exports two worksheets to html\n              %export text *   # the entire notebook\n              %export html plot*  # all worksheets begining with plot.\n```\n\n- The ordering of the worksheets is determined by the order they are given on the line.\n- This has to be a special %blah command, not a normal Python command, since it has to be run in the notebook process, not in the worksheet's Python sub-process (as that could be running in a chroot jail or on another machine).\n- The above interface could likely be easily made to work entirely through a GUI later, and will be easy to document. So it's the right first step.\n3. Implement interface above:\n   - The command %export will be mostly implemented in worksheet.py\n   - The hard part is testing, and generating actual latex/html/text which will require adding methods to cell.py, worksheet.py and notebook.py.\n* POSSIBLE PROBLEMS:\n  - The interface designed above is bad for some unforseen reason.\n  - It will be too difficult to implement in a clean way.\n  - Latex output -- some generating output might not actually latex correctly, which could be frusting.  Providing a script to build the latex output (using pdflatex, say, and with nostopmode) would help a lot. \n  - Should also provide pdf output, which is autogenerated by the server (Added.)\n  - What about customization of the \"style\", e.g., css, layout of index into worksheets, etc.?  \n  - Should generated latex be hyper-indexed?  Issues with cross-referencing of worksheets.\n  - Eventually the documents produced this way should have the possibility of looking truly professional, which means that one should be able to include macro files, etc.  It should really provide a totally new way of writing papers.  Along these lines, the \"Edit\" mode for the notebook should support including latex instead of html.  The latex would be \"previewed\" by the notebook using jsmath.  But when exporting it would stay as latex that would get pdflatex'd. \n\n\nIssue created by migration from https://trac.sagemath.org/ticket/197\n\n",
    "created_at": "2007-01-19T09:59:13Z",
    "labels": [
        "component: notebook"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.8.5.1",
    "title": "improve export/import capabilities of the SAGE notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/197",
    "user": "https://github.com/williamstein"
}
```
Assignee: boothby

* Improve the SAGE notebook
  * Implement wiki typesetting for the notebook.
  * Change notebook disk format to plain text (no pickling -- mainly for security reasons).
  * Export functionality.  One should be able to export a single worksheet, or a collection of worksheets to any of the following three formats: latex, html, pdf, text.
   * NOTES:
     - NOTE: for each, we should allow a single worksheet, complete notebooks, and any subset of worksheets to be exported.
     - Hopefully Tom Boothby and Alex C can help.
   * PLAN:
       0. Design and implement a wiki formatting system (this means basically just getting a function wiki2html from moinmoin.)
       1. Design a logical interface:
         - INPUT: list of worksheet names
         - OUTPUT: * for latex/html: a link to a tarball or zip archive
                   * for pdf/text -- link to a single file.
                   * the archive contains both the latex and html and the complete notebook directory, so it can be opened by anybody later. 
                   * the plain text option gives everything as a single plain text file -- no tarball.
       2. Design interface that can be used from notebook.
         - A command --, e.g., 

```
              %export latex    # -- exports current worksheet in latex
              %export html graphs plots   # exports two worksheets to html
              %export text *   # the entire notebook
              %export html plot*  # all worksheets begining with plot.
```

- The ordering of the worksheets is determined by the order they are given on the line.
- This has to be a special %blah command, not a normal Python command, since it has to be run in the notebook process, not in the worksheet's Python sub-process (as that could be running in a chroot jail or on another machine).
- The above interface could likely be easily made to work entirely through a GUI later, and will be easy to document. So it's the right first step.
3. Implement interface above:
   - The command %export will be mostly implemented in worksheet.py
   - The hard part is testing, and generating actual latex/html/text which will require adding methods to cell.py, worksheet.py and notebook.py.
* POSSIBLE PROBLEMS:
  - The interface designed above is bad for some unforseen reason.
  - It will be too difficult to implement in a clean way.
  - Latex output -- some generating output might not actually latex correctly, which could be frusting.  Providing a script to build the latex output (using pdflatex, say, and with nostopmode) would help a lot. 
  - Should also provide pdf output, which is autogenerated by the server (Added.)
  - What about customization of the "style", e.g., css, layout of index into worksheets, etc.?  
  - Should generated latex be hyper-indexed?  Issues with cross-referencing of worksheets.
  - Eventually the documents produced this way should have the possibility of looking truly professional, which means that one should be able to include macro files, etc.  It should really provide a totally new way of writing papers.  Along these lines, the "Edit" mode for the notebook should support including latex instead of html.  The latex would be "previewed" by the notebook using jsmath.  But when exporting it would stay as latex that would get pdflatex'd. 


Issue created by migration from https://trac.sagemath.org/ticket/197





---

archive/issue_comments_000892.json:
```json
{
    "body": "Much of this is implemented, or is brainstorming that should be totally re-evaluated before being implemented.",
    "created_at": "2007-09-23T17:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/197#issuecomment-892",
    "user": "https://github.com/williamstein"
}
```

Much of this is implemented, or is brainstorming that should be totally re-evaluated before being implemented.



---

archive/issue_events_000206.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-23T17:26:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/197",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/197#event-206"
}
```



---

archive/issue_comments_000893.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2007-09-23T17:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/197#issuecomment-893",
    "user": "https://github.com/williamstein"
}
```

Resolution: fixed
