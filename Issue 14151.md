# Issue 14151: Removes sage.combinat.generator

archive/issues_014151.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  vdelecroix\n\nVincent noticed in #10534 that this module was completely useless because of itertools, and it even happens that nothing in Sage uses it.\n\nWhat about getting rid of it ?\n\nIt implements:\n* `concat` -- replaced by `itertools.chain`\n* `map` -- replaced by ... `map`\n* `element` -- replaced by `itertools.repeat`\n* `select` -- replaced by `itertools.ifilter`\n* `successor` -- \"almost\" replaced by `itertools.takewhile`\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/14355\n\n",
    "created_at": "2013-03-25T10:00:45Z",
    "labels": [
        "combinatorics",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Removes sage.combinat.generator",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14151",
    "user": "ncohen"
}
```
Assignee: sage-combinat

CC:  vdelecroix

Vincent noticed in #10534 that this module was completely useless because of itertools, and it even happens that nothing in Sage uses it.

What about getting rid of it ?

It implements:
* `concat` -- replaced by `itertools.chain`
* `map` -- replaced by ... `map`
* `element` -- replaced by `itertools.repeat`
* `select` -- replaced by `itertools.ifilter`
* `successor` -- "almost" replaced by `itertools.takewhile`

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/14355





---

archive/issue_comments_177666.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-25T10:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177666",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_177667.json:
```json
{
    "body": "I love patches that remove code and make Sage works better ! But, the best strategy would be to introduce deprecations and not to remove the functions. The reason is that some people may use the iterators in their own codes and that code should not be broken by a new Sage version.\n\nVincent",
    "created_at": "2013-03-25T12:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177667",
    "user": "vdelecroix"
}
```

I love patches that remove code and make Sage works better ! But, the best strategy would be to introduce deprecations and not to remove the functions. The reason is that some people may use the iterators in their own codes and that code should not be broken by a new Sage version.

Vincent



---

archive/issue_comments_177668.json:
```json
{
    "body": "Come ooooooooooooon. These things are useless. Nobody knows they exist, and those who do will know about itertools....",
    "created_at": "2013-03-25T12:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177668",
    "user": "ncohen"
}
```

Come ooooooooooooon. These things are useless. Nobody knows they exist, and those who do will know about itertools....



---

archive/issue_comments_177669.json:
```json
{
    "body": "So what do we do, we keep this useless thing for another year and ADD code to it ? `-_-`\n\nNathann",
    "created_at": "2013-03-25T12:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177669",
    "user": "ncohen"
}
```

So what do we do, we keep this useless thing for another year and ADD code to it ? `-_-`

Nathann



---

archive/issue_comments_177670.json:
```json
{
    "body": "Ok let's solve it with Sage-devel. I'll deprecate this stuff if needed but that's really a waste of time.\n\nNathann",
    "created_at": "2013-03-25T12:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177670",
    "user": "ncohen"
}
```

Ok let's solve it with Sage-devel. I'll deprecate this stuff if needed but that's really a waste of time.

Nathann



---

archive/issue_comments_177671.json:
```json
{
    "body": "https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/yGrfoB73u0c",
    "created_at": "2013-03-25T13:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177671",
    "user": "ncohen"
}
```

https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/yGrfoB73u0c



---

archive/issue_comments_177672.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-03-25T13:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177672",
    "user": "ncohen"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_177673.json:
```json
{
    "body": "Well, given that the only answers on sage-devel seemed to agree with plain removal, and that after my message on sage-combinat [1] nothing was added, I guess that this ticket is still waiting for a review.\n\nNathann\n\n[1] https://groups.google.com/d/topic/sage-combinat-devel/xW_zvggLm84/discussion",
    "created_at": "2013-03-26T13:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177673",
    "user": "ncohen"
}
```

Well, given that the only answers on sage-devel seemed to agree with plain removal, and that after my message on sage-combinat [1] nothing was added, I guess that this ticket is still waiting for a review.

Nathann

[1] https://groups.google.com/d/topic/sage-combinat-devel/xW_zvggLm84/discussion



---

archive/issue_comments_177674.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-06T19:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177674",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177675.json:
```json
{
    "body": "While I'm not 100% comfortable with outright removal of something in mid-level sage, I doubt anyone will really notice that this is gone (especially since it is only referenced in one place). So on that note, I'm setting this to positive review.",
    "created_at": "2013-04-06T19:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177675",
    "user": "tscrim"
}
```

While I'm not 100% comfortable with outright removal of something in mid-level sage, I doubt anyone will really notice that this is gone (especially since it is only referenced in one place). So on that note, I'm setting this to positive review.



---

archive/issue_comments_177676.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-04-08T09:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177676",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_177677.json:
```json
{
    "body": "\n```\nTraceback (most recent call last):\n  File \"./spkg-install\", line 4, in <module>  \n    from sage.all import save\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/all.py\", line 96, in <module>\n    from sage.algebras.all   import *\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/all.py\", line 20, in <module>\n    from quatalg.all import *\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/__init__.py\", line 3, in <module>\n    import all\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/all.py\", line 1, in <module>\n    from quaternion_algebra import QuaternionAlgebra\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/quaternion_algebra.py\", line 62, in <module>\n    import quaternion_algebra_cython\n  File \"quaternion_algebra_cython.pyx\", line 227, in init sage.algebras.quatalg.quaternion_algebra_cython (sage/algebras/quatalg/quaternion_algebra_cython.cpp:4439)\n  File \"classcall_metaclass.pyx\", line 279, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:932)\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 228, in __classcall__\n    return super(MatrixSpace, cls).__classcall__(cls, base_ring, nrows, ncols, sparse)\n  File \"cachefunc.pyx\", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 447, in __classcall__\n    instance = typecall(cls, *args, **options)\n  File \"classcall_metaclass.pyx\", line 467, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1294)\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 256, in __init__\n    from sage.categories.all import Modules, Algebras\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/categories/all.py\", line 126, in <module>\n    from crystals import Crystals\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/categories/crystals.py\", line 17, in <module>\n    from sage.combinat.subset import Subsets  \n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/subset.py\", line 33, in <module>\n    import sage.combinat.subword as subword   \n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/subword.py\", line 50, in <module>\n    import sage.combinat.combination as combination\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/combination.py\", line 23, in <module>\n    from integer_vector import IntegerVectors \n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/integer_vector.py\", line 35, in <module>\n    import integer_list\n  File \"/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/integer_list.py\", line 34, in <module>\n    import generator\nImportError: No module named generator\n```\n",
    "created_at": "2013-04-08T09:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177677",
    "user": "jdemeyer"
}
```


```
Traceback (most recent call last):
  File "./spkg-install", line 4, in <module>  
    from sage.all import save
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/all.py", line 96, in <module>
    from sage.algebras.all   import *
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/all.py", line 20, in <module>
    from quatalg.all import *
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/__init__.py", line 3, in <module>
    import all
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/all.py", line 1, in <module>
    from quaternion_algebra import QuaternionAlgebra
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/algebras/quatalg/quaternion_algebra.py", line 62, in <module>
    import quaternion_algebra_cython
  File "quaternion_algebra_cython.pyx", line 227, in init sage.algebras.quatalg.quaternion_algebra_cython (sage/algebras/quatalg/quaternion_algebra_cython.cpp:4439)
  File "classcall_metaclass.pyx", line 279, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:932)
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 228, in __classcall__
    return super(MatrixSpace, cls).__classcall__(cls, base_ring, nrows, ncols, sparse)
  File "cachefunc.pyx", line 992, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5175)
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 447, in __classcall__
    instance = typecall(cls, *args, **options)
  File "classcall_metaclass.pyx", line 467, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1294)
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 256, in __init__
    from sage.categories.all import Modules, Algebras
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/categories/all.py", line 126, in <module>
    from crystals import Crystals
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/categories/crystals.py", line 17, in <module>
    from sage.combinat.subset import Subsets  
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/subset.py", line 33, in <module>
    import sage.combinat.subword as subword   
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/subword.py", line 50, in <module>
    import sage.combinat.combination as combination
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/combination.py", line 23, in <module>
    from integer_vector import IntegerVectors 
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/integer_vector.py", line 35, in <module>
    import integer_list
  File "/mazur/release/merger/sage-5.10.beta0/local/lib/python2.7/site-packages/sage/combinat/integer_list.py", line 34, in <module>
    import generator
ImportError: No module named generator
```




---

archive/issue_comments_177678.json:
```json
{
    "body": "Green light from the patchbot in beta2 and something uses it in 5.10.beta0 ?... Honestly `-_-`\n\nNathann",
    "created_at": "2013-04-08T09:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177678",
    "user": "ncohen"
}
```

Green light from the patchbot in beta2 and something uses it in 5.10.beta0 ?... Honestly `-_-`

Nathann



---

archive/issue_comments_177679.json:
```json
{
    "body": "I don't get it. This import line *IS* in the beta1 version, but all tests do pass on that file `O_o`\n\n\n```\nDoctesting 1 file.\nsage -t --long integer_list.py\n    [197 tests, 0.2 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n\n\nAnd... With the patch applied, this works :\n\n```\nsage: import sage.combinat.generator\n```\n\n\neven though the file does not exist anymore `O_o`\n\nNathann",
    "created_at": "2013-04-08T10:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177679",
    "user": "ncohen"
}
```

I don't get it. This import line *IS* in the beta1 version, but all tests do pass on that file `O_o`


```
Doctesting 1 file.
sage -t --long integer_list.py
    [197 tests, 0.2 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```


And... With the patch applied, this works :

```
sage: import sage.combinat.generator
```


even though the file does not exist anymore `O_o`

Nathann



---

archive/issue_comments_177680.json:
```json
{
    "body": "Riiiiiiiight.... Because even though the module has been removed the `.pyc` files still exists, and is not removed by `sage -b`. `>_<`\n\nNathann",
    "created_at": "2013-04-08T10:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177680",
    "user": "ncohen"
}
```

Riiiiiiiight.... Because even though the module has been removed the `.pyc` files still exists, and is not removed by `sage -b`. `>_<`

Nathann



---

archive/issue_comments_177681.json:
```json
{
    "body": "The only place I could find another reference to it was in `integer_list.py` (without patch on `5.9.beta1`):\n\n```\ntravis@travis-virtualbox:~/sage-5.9.beta1/devel/sage-main/sage$ grep -R \"combinat\\.generator\" .\n./combinat/generator.py:        sage: list(sage.combinat.generator.concat([[1,2,3],[4,5,6]]))\n./combinat/generator.py:        sage: list(sage.combinat.generator.map(f,[4,5,6]))\n./combinat/generator.py:        sage: list(sage.combinat.generator.element(1))\n./combinat/generator.py:        sage: list(sage.combinat.generator.element(1, n=3))\n./combinat/generator.py:        sage: list(sage.combinat.generator.select(f,range(7)))\n./combinat/generator.py:        sage: list(sage.combinat.generator.successor(0,f))\n\ntravis@travis-virtualbox:~/sage-5.9.beta1/devel/sage-main/sage/combinat$ grep \"import *generator\" *\ninteger_list.py:import generator\n```\n\nso it should just be a matter of replacing it there as well.",
    "created_at": "2013-04-08T13:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177681",
    "user": "tscrim"
}
```

The only place I could find another reference to it was in `integer_list.py` (without patch on `5.9.beta1`):

```
travis@travis-virtualbox:~/sage-5.9.beta1/devel/sage-main/sage$ grep -R "combinat\.generator" .
./combinat/generator.py:        sage: list(sage.combinat.generator.concat([[1,2,3],[4,5,6]]))
./combinat/generator.py:        sage: list(sage.combinat.generator.map(f,[4,5,6]))
./combinat/generator.py:        sage: list(sage.combinat.generator.element(1))
./combinat/generator.py:        sage: list(sage.combinat.generator.element(1, n=3))
./combinat/generator.py:        sage: list(sage.combinat.generator.select(f,range(7)))
./combinat/generator.py:        sage: list(sage.combinat.generator.successor(0,f))

travis@travis-virtualbox:~/sage-5.9.beta1/devel/sage-main/sage/combinat$ grep "import *generator" *
integer_list.py:import generator
```

so it should just be a matter of replacing it there as well.



---

archive/issue_comments_177682.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-08T15:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177682",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_177683.json:
```json
{
    "body": "Attachment [trac_14355.patch](tarball://root/attachments/some-uuid/ticket14355/trac_14355.patch) by ncohen created at 2013-04-08 15:37:00\n\nFixed ! And ready for another review `^^;`\n\nNathann",
    "created_at": "2013-04-08T15:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177683",
    "user": "ncohen"
}
```

Attachment [trac_14355.patch](tarball://root/attachments/some-uuid/ticket14355/trac_14355.patch) by ncohen created at 2013-04-08 15:37:00

Fixed ! And ready for another review `^^;`

Nathann



---

archive/issue_comments_177684.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-10T20:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177684",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177685.json:
```json
{
    "body": "Looks good to me after running `sync-build`.",
    "created_at": "2013-04-10T20:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177685",
    "user": "tscrim"
}
```

Looks good to me after running `sync-build`.



---

archive/issue_comments_177686.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-13T13:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14151#issuecomment-177686",
    "user": "jdemeyer"
}
```

Resolution: fixed
