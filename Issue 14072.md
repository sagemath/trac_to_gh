# Issue 14072: New doctesting marker: require failure

Issue created by migration from https://trac.sagemath.org/ticket/14276

Original creator: roed

Original creation time: 2013-03-15 05:01:28

Assignee: mvngu

From a discussion on [sage-combinat-devel](https://groups.google.com/d/topic/sage-combinat-devel/-8d0a3AJYoQ/discussion):

Add a new marker for doctests, `# require failure`, which makes the test fail if the output is the same as the expected output and succeed otherwise.

See also #13278.


---

Comment by roed created at 2013-03-15 05:06:33

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-03-15 08:23:12

I have read the thread, but I don't understand the point. What's wrong with


```
sage: 2 + 2   # should be 4 if #56789 is fixed
5
```

or

```
sage: 2 + 2   # known bug: #56789
4
```



---

Comment by jdemeyer created at 2013-03-15 08:28:30

And this makes it actually almost useless:

```
Note that requiring failure is not possible if the test raises an exception
```


If we ever implement this, we must allow exceptions as failures.


---

Comment by jdemeyer created at 2013-03-16 22:07:38

Changing status from needs_review to needs_info.


---

Attachment


---

Comment by roed created at 2013-03-17 08:45:24

When the result of the test is more complicated than one number (multiple lines for example), it's easier to delete a `#require failure` comment than fit the correct answer into a comment and then move it once it starts working.  It does seem like a fairly minor benefit though.

I've updated the patch to allow exceptions as failures.


---

Comment by roed created at 2013-03-17 08:46:14

Changing status from needs_info to needs_review.


---

Comment by roed created at 2013-03-17 08:46:14

I don't have a strong attachment to this feature, but someone did ask for it and it was pretty easy to implement....


---

Comment by roed created at 2013-03-28 22:45:46

Changing component from doctest to doctest framework.


---

Comment by ncohen created at 2015-03-17 12:33:29

Could you explain what exactly this tag is meant for in the ticket's description? The link to a sage-devel thread that you provide is an unrelated (french) message of Frederic Chapoton.

Thanks,

Nathann


---

Comment by ncohen created at 2015-03-17 12:33:29

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2015-03-17 12:41:00

I also don't really understand the point of this, but the link in the ticket is correct for me.


---

Comment by ncohen created at 2015-03-17 12:44:18

Oh. True, is only redirected me toward the last message of that thread. But it seems that people there were looking for a way to remember known bugs, while we have the more effective stopgaps for that.

Close ?

Nathann


---

Comment by roed created at 2015-03-21 00:15:19

I'm fine closing this.


---

Comment by ncohen created at 2015-03-21 06:50:47

Changing status from needs_info to positive_review.


---

Comment by vbraun created at 2015-03-21 09:30:58

Resolution: wontfix
