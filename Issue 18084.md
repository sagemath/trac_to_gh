# Issue 18084: Don't cimport type

Issue created by migration from https://trac.sagemath.org/ticket/18321

Original creator: jdemeyer

Original creation time: 2015-04-28 13:02:56

This line in `src/sage/ext/stdsage.pxd`

```
from cpython.type cimport type
```

causes trouble as it causes Cython to no longer optimize the type `type`.


---

Comment by jdemeyer created at 2015-04-28 15:07:13

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-04-28 15:07:13

New commits:


---

Comment by pbruin created at 2015-05-09 07:16:19

What is the reason for still doing `cimport type as pytype` in `stdsage.pxd`?  Removing this line (and using `type` instead of `pytype` in `PY_NEW`) does not seem to cause any problems at first sight.  Does it have any speed and/or type safety effects?


---

Comment by git created at 2015-05-09 08:00:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-05-09 08:07:21

Replying to [comment:3 pbruin]:
> What is the reason for still doing `cimport type as pytype` in `stdsage.pxd`?
No idea. It must have been needed at some point, but maybe some Cython upgrade changed this?


---

Comment by pbruin created at 2015-05-09 08:24:23

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2015-05-09 08:24:23

Replying to [comment:5 jdemeyer]:
> Replying to [comment:3 pbruin]:
> > What is the reason for still doing `cimport type as pytype` in `stdsage.pxd`?
> No idea. It must have been needed at some point, but maybe some Cython upgrade changed this?
Who knows.  The other occurrence (in `classcall_metaclass.pyx`) does seem to be necessary; without it, there is a doctest that crashes Sage due to insufficient type checking.


---

Comment by vbraun created at 2015-05-09 23:03:18

Resolution: fixed
