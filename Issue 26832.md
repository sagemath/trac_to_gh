# Issue 26832: Inconsistent behavior with generator ordering in free Lie algebras

Issue created by migration from https://trac.sagemath.org/ticket/27069

Original creator: @ehaka

Original creation time: 2019-01-16 20:34:22

Keywords: Lie algebras

This is an issue discovered due to #27018. Giving a free Lie algebra a set of generators that are not in lexicographic order causes `graded_basis` to output elements which are not recognized as basis elements of the Lie algebra due to different ordering behavior.


```
sage: Lxyz = LieAlgebra(QQ, ['x','y','z']).Lyndon()
sage: Lzxy = LieAlgebra(QQ, ['z','x','y']).Lyndon()
sage: Lxyz.graded_basis(2)
([x, y], [x, z], [y, z])
sage: Lzxy.graded_basis(2)
([z, x], [z, y], [x, y])
sage: x,y,z = Lxyz.gens()
sage: a,b,c = Lzxy.gens()
sage: a,b,c
(z, x, y)
sage: b.bracket(a)
[x, z]
sage: x.bracket(z)
[x, z]
sage: Lzxy._is_basis_element(b.leading_support(),a.leading_support())
True
sage: Lzxy._is_basis_element(a.leading_support(),b.leading_support())
False
```

Trying to compute brackets with these elements leads to unhelpful tracebacks, e.g.

```
sage: Lzxy[Lzxy.graded_basis(2)[0],Lzxy.graded_basis(1)[0]]
Traceback (most recent call last)
...
AttributeError: 'sage.algebras.lie_algebras.lie_algebra_element.Lie' object has no attribute '_right'
```



---

Comment by git created at 2019-01-25 18:54:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-01-25 18:55:40

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-01-25 18:55:40

Okay, this should fix it, as well as #27018.


---

Comment by git created at 2019-01-28 04:57:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @ehaka created at 2019-01-28 05:15:09

Everything seems to be working as it should now, thanks for the fix!


---

Comment by @ehaka created at 2019-01-28 05:15:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-02-04 23:02:25

Resolution: fixed
