# Issue 23628: disable a very long doctest in omega.py

Issue created by migration from https://trac.sagemath.org/ticket/23865

Original creator: vdelecroix

Original creation time: 2017-09-15 07:31:08

CC:  dkrenn

Disable the following from `sage/rings/polynomial/omega.py` that takes forever without any justification

```
sage: from sage.rings.polynomial.omega import Omega_ge
sage: %time Omega_ge(0, (2, 2, 1, 1, 1, 1, 1, -1, -1))[0].number_of_terms()
CPU times: user 53.1 s, sys: 66 ms, total: 53.2 s
Wall time: 53.1 s
27837
```

(running the doctests in `omega.py` takes longer than running the doctests in all other files from `sage/rings/polynomial/`)


---

Comment by vdelecroix created at 2017-09-15 07:31:41

New commits:


---

Comment by vdelecroix created at 2017-09-15 07:31:41

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-09-15 07:40:18

Instead of disabling it, could the test be simplified?


---

Comment by vdelecroix created at 2017-09-15 07:42:58

This is why I put dkrenn in copy! I am not exactly sure what this doctest is meant for.


---

Comment by dkrenn created at 2017-09-19 12:36:46

Replying to [comment:2 jdemeyer]:
> Instead of disabling it, could the test be simplified?

Yes, this can be simplified. I'll provide a corrected version in the next days.


---

Comment by dkrenn created at 2017-09-19 12:38:14

Replying to [ticket:23865 vdelecroix]:
> Disable the following from `sage/rings/polynomial/omega.py` that takes forever without any justification

The motivation for having this is, that there is a separate computation for the result meaning that the result is somehow verified. I do not recall that it took that long and will investigate.


---

Comment by vdelecroix created at 2017-09-19 12:45:39

Thanks Daniel!


---

Comment by dkrenn created at 2017-09-19 16:30:43

Small reviewer patch added (`untested` --> `not tested`) and I've added a new, shorter doctest which needs a small cross review. [Good to go from my side.]
----
New commits:


---

Comment by dkrenn created at 2017-09-19 16:31:26

FYI, all non-long tests in the file now take 1 second; including the long tests 2 seconds.


---

Comment by vdelecroix created at 2017-09-19 20:59:11

Indeed, on the patchbot it is now

```
sage -t --long src/sage/rings/polynomial/omega.py
    [127 tests, 1.84 s]
```


Thanks!


---

Comment by vdelecroix created at 2017-10-04 06:37:11

oups. I forgot to positive review it...


---

Comment by vdelecroix created at 2017-10-04 06:37:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-10-05 06:53:51

Resolution: fixed
