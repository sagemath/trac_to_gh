# Issue 22114: PyString_AsString is gone in Python3

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-02-10 22:09:26

CC:  chapoton

The function `PyString_AsString` no longer exists in Python 3 and even Cython does not support it.


---

Comment by chapoton created at 2017-02-20 16:20:42

Any idea of what to do here ?

Just replacing `PyString_*` by `PyBytes_*` does not work.


---

Comment by chapoton created at 2017-02-21 12:41:40

Here is a tentative.
----
New commits:


---

Comment by chapoton created at 2017-02-21 12:41:40

Changing status from new to needs_review.


---

Comment by git created at 2017-02-21 12:54:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-02-21 16:55:29

I removed the changes to `pynac.pyx` to avoid a conflict with #21371.
----
New commits:


---

Comment by chapoton created at 2017-02-22 08:47:35

ok, agreed.

Bot is green, do you think this ticket is now ok ?


---

Comment by jdemeyer created at 2017-02-22 09:02:11

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-02-22 09:02:11

No, let me clean some stuff up. I will do that right now.


---

Comment by jdemeyer created at 2017-02-22 09:27:18

`matrix_gfpn_dense.pyx` needs further changes and will conflict with #21437. I will instead add a comment on #21437.


---

Comment by git created at 2017-02-22 09:49:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-02-22 09:52:07

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-02-22 10:09:23

I tried to get rid of some calls to `PyBytes_...` functions. Please review. I have not ran the testsuite, so let's wait for the patchbot.


---

Comment by chapoton created at 2017-02-22 20:13:04

Looks good to me, and the bot is green. Shall we set to positive ?

By the way, did you handle the pynac case in #21371 ?


---

Comment by jdemeyer created at 2017-02-23 06:57:30

Replying to [comment:15 chapoton]:
> By the way, did you handle the pynac case in #21371 ?

Yes.


---

Comment by jdemeyer created at 2017-02-23 06:57:30

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-02-23 13:42:30

Merge conflict...


---

Comment by vbraun created at 2017-02-23 13:42:37

Changing status from positive_review to needs_work.


---

Comment by chapoton created at 2017-02-26 20:31:20

trivial rebase on 7.6.b5, setting back to positive
----
New commits:


---

Comment by chapoton created at 2017-02-26 20:31:20

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-03-01 18:50:45

Resolution: fixed
