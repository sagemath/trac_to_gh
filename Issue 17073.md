# Issue 17073: improvement to StrongTableaux to_transposition algorithm

Issue created by migration from Trac.

Original creator: zabrocki

Original creation time: 2014-11-08 20:56:09

CC:  aschilling tscrim

Keywords: tableaux

In discussions after #17252, Jennifer Morse pointed out that the algorithm to convert a strong marked column strict tableau to a sequence of transpositions could be made more efficient by always choosing the largest rightmost marking.

We implement that improvement.


---

Comment by zabrocki created at 2014-11-09 13:18:26

I will continue to run a few tests to make sure, but I think that this version shaves a few seconds off of the tests of k_tableau.py
----
New commits:


---

Comment by zabrocki created at 2014-11-09 14:40:39

Changing type from PLEASE CHANGE to enhancement.


---

Comment by zabrocki created at 2014-11-09 14:40:39

This version seems to be slightly faster in practice.  On my laptop I see around 24-25 seconds with the patch, 24-26 without.


---

Comment by zabrocki created at 2014-11-09 14:40:39

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-11-09 20:32:03

So I've made some changes and massaged out some more speed. My timings are below. I've also marked two tests as long because the file takes some 110s to run on mine (each were about 9s). However I'll let someone else (Anne) do the final review on the math portion.

----

Original timings:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 8.32 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 21.1 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 104 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 29.7 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2.46 µs per loop
```

Without my changes:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 8.29 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 21 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 48 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 29.3 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2.4 µs per loop
```

With my changes:

```
sage: CST_to_trans = StrongTableaux.marked_CST_to_transposition_sequence
sage: %timeit CST_to_trans([[-1, -1, -1], [1]], 2)
100 loops, best of 3: 7.7 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -2, -2, -2], [-2, 2], [2]], 3)
10 loops, best of 3: 18.3 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -5, 5, -5, 5, -5], [-3, -4, 5, 5], [5]],3)
10 loops, best of 3: 43.3 ms per loop
sage: %timeit CST_to_trans([[-1, -2, -3, 4, -7], [-4, -6], [-5, 6]],3)
10 loops, best of 3: 26.1 ms per loop
sage: %timeit CST_to_trans([], 2)
100000 loops, best of 3: 2 µs per loop
```

----
New commits:


---

Comment by aschilling created at 2014-11-10 00:32:07

Hi Mike, thanks for implementing this! Looks good to me. Anne


---

Comment by aschilling created at 2014-11-10 00:32:24

Changing status from needs_review to positive_review.


---

Comment by zabrocki created at 2014-11-10 12:26:10

I've been calculating larger examples to make sure going from and to transposition sequences are consistent and have found no faults.

Thanks Travis and Anne.


---

Comment by vbraun created at 2014-11-15 16:16:44

Resolution: fixed
