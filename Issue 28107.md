# Issue 28107: Fix some issues with submanifolds and improve their documentation

Issue created by migration from https://trac.sagemath.org/ticket/28344

Original creator: egourgoulhon

Original creation time: 2019-08-12 12:58:35

CC:  @florentinj tscrim

Keywords: manifold, submanifold

When constructing a submanifold with Sage 8.8, some options are not taken into account:

```
sage: M = Manifold(3, 'M')
sage: S = Manifold(2, 'S', ambient=M, latex_name=r'\Sigma', start_index=1)
sage: latex(S)
S
sage: S.start_index()
0
```

Moreover the `start_index` parameter is not handled properly in some computational methods of class `PseudoRiemannianSubmanifold`, namely `shift()` and `second_fundamental_form()`.

Another issue regards the generation of adapted coordinates in method `TopologicalSubmanifold.adapted_chart()`: if the ambient manifold contains a caret in its name, like `E^3`, the generated variable names in `SR.var()` are not valid Python identifiers. 

This ticket fixes the above issues and improves significantly the documentation of submanifolds.


---

Comment by egourgoulhon created at 2019-08-12 12:59:28

New commits:


---

Comment by egourgoulhon created at 2019-08-12 13:03:38

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-08-12 13:24:16

Some comments:

Missing linebreak:

```
            raise NotImplementedError("mixed_projection() is implemented only "                          "for hypersurfaces")
```

Occurs 3 times.

I would probably write this as `\cdots` since it is a multiplication operation

```diff
-            n = \vec{*}(\mathrm{d}x_0\wedge\mathrm{d}x_1\wedge...
+            n = \vec{*}(\mathrm{d}x_0\wedge\mathrm{d}x_1\wedge\ldots
             \wedge\mathrm{d}x_{n-1})
```

but I know some mathematicians have a convention that the only thing that is `\cdots` is strictly usual multiplication `\cdot`.

Dollar signs snuck in here:

```diff
-One can then define the embedding $\phi_t$::
+One can then define the embedding `\phi_t`::
```


```diff
-and the partial inverse expressing the foliation parameter $t$ as a scalar
+and the partial inverse expressing the foliation parameter `t` as a scalar
```


Missing commas after the `...` (which you might consider replacing with `\ldots`:

```diff
-        `(x_1,...,x_n,t_1,...t_{m-n})` on `M` such that `(x_1,...x_n)` are
-        coordinates on `N` and `(t_1,...t_{m-n})` are the `m-n` free parameters
+        `(x_1,...,x_n,t_1,...,t_{m-n})` on `M` such that `(x_1,...x_n)` are
+        coordinates on `N` and `(t_1,...,t_{m-n})` are the `m-n` free parameters
```


```diff
-          the names of the coordinates `(x_1,...x_n)` and of the parameters
-          `(t_1,...t_{m-n})`. If ``None``, ``"_" + self.ambient()._name`` is
+          the names of the coordinates `(x_1,...,x_n)` and of the parameters
+          `(t_1,...,t_{m-n})`. If ``None``, ``"_" + self.ambient()._name`` is
           used
         - ``latex_postscript`` -- (default: ``None``) string defining the LaTeX
           name of the coordinates of the adapated chart. This string will be
-          appended to the LaTeX names of the coordinates `(x_1,...x_n)` and of
-          the parameters `(t_1,...t_{m-n})`, If ``None``,
+          appended to the LaTeX names of the coordinates `(x_1,...,x_n)` and of
+          the parameters `(t_1,...,t_{m-n})`, If ``None``,
```



---

Comment by git created at 2019-08-13 22:20:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-08-13 22:23:02

Replying to [comment:3 tscrim]:
> Some comments:

Thanks for yours comments (and prompt reply!). The above commit takes them into account.


---

Comment by tscrim created at 2019-08-16 22:53:34

Thank you.


---

Comment by tscrim created at 2019-08-16 22:53:34

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2019-08-17 09:07:04

Many thanks for the review!


---

Comment by vbraun created at 2019-08-19 22:08:52

Resolution: fixed
