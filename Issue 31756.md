# Issue 31756: ConvexSet_base: Add affine_hull, affine_hull_projection, an_affine_basis

archive/issues_031756.json:
```json
{
    "body": "CC:  @kliem\n\n`affine_hull`, `affine_hull_projection` and `AffineHullProjectionData` (from #27366) should be generalized to `ConvexSet_base` via `an_affine_basis`.\n\n(A prototype for `an_affine_basis` is on the branch of #31955.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/31993\n\n",
    "created_at": "2021-06-16T18:20:06Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "title": "ConvexSet_base: Add affine_hull, affine_hull_projection, an_affine_basis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31756",
    "user": "mkoeppe"
}
```
CC:  @kliem

`affine_hull`, `affine_hull_projection` and `AffineHullProjectionData` (from #27366) should be generalized to `ConvexSet_base` via `an_affine_basis`.

(A prototype for `an_affine_basis` is on the branch of #31955.)

Issue created by migration from https://trac.sagemath.org/ticket/31993





---

archive/issue_comments_453680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T15:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453681.json:
```json
{
    "body": "`ConvexRationalPolyhedralCone.solid_restriction` is similar to `affine_hull_projection`",
    "created_at": "2021-07-09T17:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453681",
    "user": "mkoeppe"
}
```

`ConvexRationalPolyhedralCone.solid_restriction` is similar to `affine_hull_projection`



---

archive/issue_comments_453682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-10T22:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453682",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453683.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> `ConvexRationalPolyhedralCone.solid_restriction` is similar to `affine_hull_projection`\n\n... best taken care of in #30172, which adds a cone ABC",
    "created_at": "2021-07-10T23:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453683",
    "user": "mkoeppe"
}
```

Replying to [comment:4 mkoeppe]:
> `ConvexRationalPolyhedralCone.solid_restriction` is similar to `affine_hull_projection`

... best taken care of in #30172, which adds a cone ABC



---

archive/issue_comments_453684.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-10T23:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453684",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453685.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-10T23:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453685",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_453686.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-11T07:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453686",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453687.json:
```json
{
    "body": "Coverage needs work yet.\n\n\n```\n-geometry/relative_interior.py: 100.0% (14 of 14)\n+geometry/relative_interior.py: 83.3% (15 of 18)\n```\n\n\nProbably three stupid tests, testing abstract methods raise a `NotImplementedError`.",
    "created_at": "2021-07-12T14:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453687",
    "user": "@kliem"
}
```

Coverage needs work yet.


```
-geometry/relative_interior.py: 100.0% (14 of 14)
+geometry/relative_interior.py: 83.3% (15 of 18)
```


Probably three stupid tests, testing abstract methods raise a `NotImplementedError`.



---

archive/issue_comments_453688.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-12T16:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453688",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453689.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-12T23:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453689",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_453690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T00:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453690",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T00:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453691",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453692.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-13T00:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453692",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_453693.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-17T21:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453693",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453694.json:
```json
{
    "body": "green patchbot, ready for review",
    "created_at": "2021-07-18T20:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453694",
    "user": "mkoeppe"
}
```

green patchbot, ready for review



---

archive/issue_comments_453695.json:
```json
{
    "body": "Merge conflict.",
    "created_at": "2021-07-20T09:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453695",
    "user": "@kliem"
}
```

Merge conflict.



---

archive/issue_comments_453696.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-20T09:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453696",
    "user": "@kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_453697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-20T15:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453697",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_453698.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-20T15:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453698",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_453699.json:
```json
{
    "body": "Actually would be good to get it into 9.4 so that we don't have to bother with deprecation for the changes to `AffineHullProjectionData`",
    "created_at": "2021-07-20T15:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453699",
    "user": "mkoeppe"
}
```

Actually would be good to get it into 9.4 so that we don't have to bother with deprecation for the changes to `AffineHullProjectionData`



---

archive/issue_comments_453700.json:
```json
{
    "body": "I think things are fine.\n\nWaiting for a patchbot, seems hopeless: https://patchbot.sagemath.org/ticket/0/\n\nCoverage is good. I'm going to run `sage -t --all` on this ticket. Ping me, if I don't report in the next 24 hours.",
    "created_at": "2021-07-22T08:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453700",
    "user": "@kliem"
}
```

I think things are fine.

Waiting for a patchbot, seems hopeless: https://patchbot.sagemath.org/ticket/0/

Coverage is good. I'm going to run `sage -t --all` on this ticket. Ping me, if I don't report in the next 24 hours.



---

archive/issue_comments_453701.json:
```json
{
    "body": "I'm getting those failures\n\n\n```\nsage -t --random-seed=0 src/sage/misc/sagedoc.py  # 1 doctest failed\nsage -t --random-seed=0 src/sage/tests/cmdline.py  # 5 doctests failed\nsage -t --random-seed=0 src/sage/modular/local_comp/local_comp.py  # 1 doctest failed\nsage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py  # 1 doctest failed   \n```\n\n\nand nothing is related to this ticket, but I also get failures on develop.",
    "created_at": "2021-07-22T10:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453701",
    "user": "@kliem"
}
```

I'm getting those failures


```
sage -t --random-seed=0 src/sage/misc/sagedoc.py  # 1 doctest failed
sage -t --random-seed=0 src/sage/tests/cmdline.py  # 5 doctests failed
sage -t --random-seed=0 src/sage/modular/local_comp/local_comp.py  # 1 doctest failed
sage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py  # 1 doctest failed   
```


and nothing is related to this ticket, but I also get failures on develop.



---

archive/issue_comments_453702.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-22T10:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453702",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_453703.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-07-22T10:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453703",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_453704.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-07-22T14:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453704",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_453705.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-07-23T22:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453705",
    "user": "vbraun"
}
```

Merge conflict



---

archive/issue_comments_453706.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-23T22:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453706",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_453707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-07-23T22:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453707",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_453708.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-07-23T22:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453708",
    "user": "mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_453709.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-25T13:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31756",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31756#issuecomment-453709",
    "user": "vbraun"
}
```

Resolution: fixed
