# Issue 12242: system-wide default color

archive/issues_012242.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  kcrisman\n\nIt would be useful to have a system-wide default plotting color.  For example, when embedding in latex, you want all the default line colors that are now blue to be black instead.\n\nThis patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.\n\nThis patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...\n\nIssue created by migration from https://trac.sagemath.org/ticket/12414\n\n",
    "created_at": "2012-02-02T16:08:16Z",
    "labels": [
        "graphics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "system-wide default color",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12242",
    "user": "jason"
}
```
Assignee: jason, was

CC:  kcrisman

It would be useful to have a system-wide default plotting color.  For example, when embedding in latex, you want all the default line colors that are now blue to be black instead.

This patch implements a sage.plot.colors.DEFAULTCOLOR variable that is used, instead of specifying blue in every object.

This patch avoids touching objects that don't have the default color blue so that it won't be very controversial.  Cleaning up the graphics in Sage is a much bigger project...

Issue created by migration from https://trac.sagemath.org/ticket/12414





---

archive/issue_comments_143067.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-02T16:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143067",
    "user": "jason"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_143068.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-02T16:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143068",
    "user": "jason"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_143069.json:
```json
{
    "body": "some doctests are failing...",
    "created_at": "2012-02-02T16:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143069",
    "user": "jason"
}
```

some doctests are failing...



---

archive/issue_comments_143070.json:
```json
{
    "body": "Fixed the failing doctests.",
    "created_at": "2012-02-02T17:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143070",
    "user": "jason"
}
```

Fixed the failing doctests.



---

archive/issue_comments_143071.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T17:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143071",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_143072.json:
```json
{
    "body": "Found a few more failing doctests...",
    "created_at": "2012-02-02T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143072",
    "user": "jason"
}
```

Found a few more failing doctests...



---

archive/issue_comments_143073.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-02T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143073",
    "user": "jason"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_143074.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143074",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_143075.json:
```json
{
    "body": "And now all doctests in plot/ pass...",
    "created_at": "2012-02-02T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143075",
    "user": "jason"
}
```

And now all doctests in plot/ pass...



---

archive/issue_comments_143076.json:
```json
{
    "body": "Ok, this all makes sense to me (and a great idea!) and works well, apparently. \n\nI do except the 3D issues.    Can you explain to me the rationale for the changes in texture.py?  On a related note, I do feel like we're changing end-user use with requiring the `.rgb()` business. \n\nI'm not saying they're bad changes, but I don't see any particular reason (other than perhaps making doctests pass, which isn't quite sufficient by itself).  Just need explanation/justification.\n\nAlso, what formats should work?  I tried\n\n```\nsage: sage.plot.colors.DEFAULTCOLOR='black' \nsage: sage.plot.colors.DEFAULTCOLOR=(0,0,1)\n```\n\nand they worked.  What about hsv or something?  (Not that I know how we'd distinguish between them.)  Or hex?  Just wondering.",
    "created_at": "2012-02-02T18:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143076",
    "user": "kcrisman"
}
```

Ok, this all makes sense to me (and a great idea!) and works well, apparently. 

I do except the 3D issues.    Can you explain to me the rationale for the changes in texture.py?  On a related note, I do feel like we're changing end-user use with requiring the `.rgb()` business. 

I'm not saying they're bad changes, but I don't see any particular reason (other than perhaps making doctests pass, which isn't quite sufficient by itself).  Just need explanation/justification.

Also, what formats should work?  I tried

```
sage: sage.plot.colors.DEFAULTCOLOR='black' 
sage: sage.plot.colors.DEFAULTCOLOR=(0,0,1)
```

and they worked.  What about hsv or something?  (Not that I know how we'd distinguish between them.)  Or hex?  Just wondering.



---

archive/issue_comments_143077.json:
```json
{
    "body": "The changes to the 3d plot parse_color are to make parse_color more consistent and also to get it to use the default color if the color is None.  Before, it returned a tuple if you passed in a Color, but it returned a Color if you passed in a string---not very consistent.  I made it so that it always returns a tuple, and it returns the default color if called with nothing (that's the call to to_mpl_color).\n\nAny format supported by any `color=` option should be supported. Strings, hex strings, rgb colors, color names, etc.",
    "created_at": "2012-02-02T18:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143077",
    "user": "jason"
}
```

The changes to the 3d plot parse_color are to make parse_color more consistent and also to get it to use the default color if the color is None.  Before, it returned a tuple if you passed in a Color, but it returned a Color if you passed in a string---not very consistent.  I made it so that it always returns a tuple, and it returns the default color if called with nothing (that's the call to to_mpl_color).

Any format supported by any `color=` option should be supported. Strings, hex strings, rgb colors, color names, etc.



---

archive/issue_comments_143078.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-02T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143078",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_143079.json:
```json
{
    "body": "I see.  In that case, you forgot to change the documentation!\n\n```\n\n       Parses the color.\n    \n       It transforms a valid color string into a color object and a color\n       object into an RBG tuple of length 3. Otherwise, it multiplies the\n       info by the base color.\n    \n```\n\n\n----\nOn the other issue - before:\n\n```\nsage: [t.color for t in G.texture_set()]\n[RGB color (1.0, 0.0, 0.0), RGB color (1.0, 0.0, 0.0), RGB color (1.0, 1.0, 0.0)]\n```\n\nafter:\n\n```\nsage: [t.color for t in G.texture_set()]\n[(1.0, 0.0, 0.0), (1.0, 0.0, 0.0), (1.0, 1.0, 0.0)]\n```\n\nThis really won't break anything in the initialization of `Texture` where this is used?\n\n----\nAlso, I just found a doctest typo, unnoticed because of the fact that `Texture` pretty much takes any input without complaining.  You didn't do this, but we should fix it here.\n\n```\n\n        sage: Texture(ambiant=0.7)\n        Texture(texture..., 6666ff)\n```\n",
    "created_at": "2012-02-02T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143079",
    "user": "kcrisman"
}
```

I see.  In that case, you forgot to change the documentation!

```

       Parses the color.
    
       It transforms a valid color string into a color object and a color
       object into an RBG tuple of length 3. Otherwise, it multiplies the
       info by the base color.
    
```


----
On the other issue - before:

```
sage: [t.color for t in G.texture_set()]
[RGB color (1.0, 0.0, 0.0), RGB color (1.0, 0.0, 0.0), RGB color (1.0, 1.0, 0.0)]
```

after:

```
sage: [t.color for t in G.texture_set()]
[(1.0, 0.0, 0.0), (1.0, 0.0, 0.0), (1.0, 1.0, 0.0)]
```

This really won't break anything in the initialization of `Texture` where this is used?

----
Also, I just found a doctest typo, unnoticed because of the fact that `Texture` pretty much takes any input without complaining.  You didn't do this, but we should fix it here.

```

        sage: Texture(ambiant=0.7)
        Texture(texture..., 6666ff)
```




---

archive/issue_comments_143080.json:
```json
{
    "body": "I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.\n\nI've attached a patch which takes care of the typo and docs.",
    "created_at": "2012-02-02T19:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143080",
    "user": "jason"
}
```

I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.

I've attached a patch which takes care of the typo and docs.



---

archive/issue_comments_143081.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T19:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143081",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_143082.json:
```json
{
    "body": "Attachment [trac-12414-defaultcolor.patch](tarball://root/attachments/some-uuid/ticket12414/trac-12414-defaultcolor.patch) by kcrisman created at 2012-02-02 19:39:23\n\n> I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.\nI think that is the easier solution for now.  I assume that most people wouldn't care, but I think there was some method to the way it's returned, so that the same parsing function could be used in a few different contexts.  I don't know whether `parse_color` is used outside of the initialization of `Texture`, but I think it would be unfortunate for attributes of `Texture`s to change format without discussion somewhere by someone who uses them.\n\nIf you do change that back, please give the new patch a different name, because then we have this other fix still on Trac for easy reference later.\n\n> I've attached a patch which takes care of the typo and docs.\nExcept there was a typo there from before this ticket which I just noticed.  Aargh!\n\n```\nIt transforms a valid color description into an RBG tuple of \n```\n\nWhat is RBG, kcrisman?  Silly... This would be needed no matter how you deal with `parse_color`.",
    "created_at": "2012-02-02T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143082",
    "user": "kcrisman"
}
```

Attachment [trac-12414-defaultcolor.patch](tarball://root/attachments/some-uuid/ticket12414/trac-12414-defaultcolor.patch) by kcrisman created at 2012-02-02 19:39:23

> I'm waffling about whether I should back out the texture changes (I don't have time now to dive deeply into the 3d plotting).  What do you think?  I can just put an extra test in there that returns the default color if no color is passed in.
I think that is the easier solution for now.  I assume that most people wouldn't care, but I think there was some method to the way it's returned, so that the same parsing function could be used in a few different contexts.  I don't know whether `parse_color` is used outside of the initialization of `Texture`, but I think it would be unfortunate for attributes of `Texture`s to change format without discussion somewhere by someone who uses them.

If you do change that back, please give the new patch a different name, because then we have this other fix still on Trac for easy reference later.

> I've attached a patch which takes care of the typo and docs.
Except there was a typo there from before this ticket which I just noticed.  Aargh!

```
It transforms a valid color description into an RBG tuple of 
```

What is RBG, kcrisman?  Silly... This would be needed no matter how you deal with `parse_color`.



---

archive/issue_comments_143083.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-02-03T02:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143083",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_143084.json:
```json
{
    "body": "Just needing info on how it will proceed.",
    "created_at": "2012-02-03T02:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143084",
    "user": "kcrisman"
}
```

Just needing info on how it will proceed.



---

archive/issue_comments_143085.json:
```json
{
    "body": "I'll put up a new patch later; no time now...",
    "created_at": "2012-02-03T03:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143085",
    "user": "jason"
}
```

I'll put up a new patch later; no time now...



---

archive/issue_comments_143086.json:
```json
{
    "body": "Getting back to this...where are we?  Should I back out the texture part?",
    "created_at": "2012-05-11T13:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143086",
    "user": "jason"
}
```

Getting back to this...where are we?  Should I back out the texture part?



---

archive/issue_comments_143087.json:
```json
{
    "body": "I guess, except see #12904 which has positive review and makes a change to `parse_color` that might impact this.",
    "created_at": "2012-05-11T15:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12242",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12242#issuecomment-143087",
    "user": "kcrisman"
}
```

I guess, except see #12904 which has positive review and makes a change to `parse_color` that might impact this.
