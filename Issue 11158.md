# Issue 11158: Automatically build VirtualBox image

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2011-05-12 11:40:42

Assignee: GeorgSWeber

We should automatically build a VirtualBox/VMware image for each Sage release. This requires some script support to create a image and perform an unattended sage install.


---

Comment by ltw created at 2011-05-12 23:09:44

Maybe the script can use [debootstrap](http://packages.debian.org/squeeze/debootstrap) to create a base system, chroot into it to install whatever necessary tools (e.g. graphical environment, kernel, package manager, web browser), exit the chroot, build Sage (or copy a pre-built linux binary), wrap it up in a VirtualBox/VMware disk image, and finally configure the VM.


---

Comment by vbraun created at 2011-05-12 23:23:39

I'm working on an Fedora kickstart unattended install in an automatically generated VM. Its basically working, just needs some bugs ironed out. You can swap out the embedded Linux distribution with any install DVD as long as
  1. It installs without any user interaction
  2. It powers off the VM when it is done installing.  
  3. It automatically installs Sage
The script that creates the VM then boots of the DVD medium and waits until the VM powers itself off...


---

Comment by vbraun created at 2011-05-13 15:06:04

Changing status from new to needs_info.


---

Comment by vbraun created at 2011-05-13 15:06:04

Here is an example of the built virtual machine that is built by the attached scripts without user intervention:

http://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova

The virtual machine starts up in text mode and automatically runs the Sage notebook server. At first startup you are prompted to enter a password, as usual. Once you set up your admin password you have to use your *host OS* web browser to open `http://localhost:8000`. 

At this point it would be nice if somebody could try it out on a windows machine (or any other machine).


---

Comment by vbraun created at 2011-05-13 15:06:40

scripts to auto-build virtual machine


---

Attachment

Replying to [comment:3 vbraun]:
> Here is an example of the built virtual machine that is built by the attached scripts without user intervention:
> 
> http://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova

I get a "403 Forbidden" error for that file. Interestingly, I can access all of your other files in that same directory.


---

Comment by vbraun created at 2011-05-13 19:03:32

Sorry, wrong permissions. Fixed!


---

Comment by dimpase created at 2011-05-14 04:00:10

I'll try this on a Windows 7 box, as soon as I figure out what is needed.

I got the latest VirtualBox (4.0.6) with no guest OS installed.
Do I need anything else, apart from the .ova - file, to have it running?


---

Comment by dimpase created at 2011-05-14 13:29:35

Replying to [comment:6 dimpase]:
> I'll try this on a Windows 7 box, as soon as I figure out what is needed.
> 
> I got the latest VirtualBox (4.0.6) with no guest OS installed.
> Do I need anything else, apart from the .ova - file, to have it running?

for the record, it does not work, perhaps because this Windows 7 installation is itself a VMWare virtual host.


---

Comment by vbraun created at 2016-01-25 20:54:35

Code at https://bitbucket.org/vbraun/sage-virtual-appliance-buildscript


---

Comment by embray created at 2018-08-14 17:24:39

Resolution: fixed


---

Comment by embray created at 2018-08-14 17:24:39

Seems, then, that this is done.
