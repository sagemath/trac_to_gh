# Issue 11158: Automatically build VirtualBox image

archive/issues_011158.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nWe should automatically build a VirtualBox/VMware image for each Sage release. This requires some script support to create a image and perform an unattended sage install.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11330\n\n",
    "created_at": "2011-05-12T11:40:42Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Automatically build VirtualBox image",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11158",
    "user": "https://github.com/vbraun"
}
```
Assignee: GeorgSWeber

We should automatically build a VirtualBox/VMware image for each Sage release. This requires some script support to create a image and perform an unattended sage install.

Issue created by migration from https://trac.sagemath.org/ticket/11330





---

archive/issue_comments_122090.json:
```json
{
    "body": "Maybe the script can use [debootstrap](http://packages.debian.org/squeeze/debootstrap) to create a base system, chroot into it to install whatever necessary tools (e.g. graphical environment, kernel, package manager, web browser), exit the chroot, build Sage (or copy a pre-built linux binary), wrap it up in a VirtualBox/VMware disk image, and finally configure the VM.",
    "created_at": "2011-05-12T23:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122090",
    "user": "https://trac.sagemath.org/admin/accounts/users/ltw"
}
```

Maybe the script can use [debootstrap](http://packages.debian.org/squeeze/debootstrap) to create a base system, chroot into it to install whatever necessary tools (e.g. graphical environment, kernel, package manager, web browser), exit the chroot, build Sage (or copy a pre-built linux binary), wrap it up in a VirtualBox/VMware disk image, and finally configure the VM.



---

archive/issue_comments_122091.json:
```json
{
    "body": "I'm working on an Fedora kickstart unattended install in an automatically generated VM. Its basically working, just needs some bugs ironed out. You can swap out the embedded Linux distribution with any install DVD as long as\n1. It installs without any user interaction\n2. It powers off the VM when it is done installing.  \n3. It automatically installs Sage\nThe script that creates the VM then boots of the DVD medium and waits until the VM powers itself off...",
    "created_at": "2011-05-12T23:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122091",
    "user": "https://github.com/vbraun"
}
```

I'm working on an Fedora kickstart unattended install in an automatically generated VM. Its basically working, just needs some bugs ironed out. You can swap out the embedded Linux distribution with any install DVD as long as
1. It installs without any user interaction
2. It powers off the VM when it is done installing.  
3. It automatically installs Sage
The script that creates the VM then boots of the DVD medium and waits until the VM powers itself off...



---

archive/issue_comments_122092.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-05-13T15:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122092",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_122093.json:
```json
{
    "body": "Here is an example of the built virtual machine that is built by the attached scripts without user intervention:\n\nhttp://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova\n\nThe virtual machine starts up in text mode and automatically runs the Sage notebook server. At first startup you are prompted to enter a password, as usual. Once you set up your admin password you have to use your **host OS** web browser to open `http://localhost:8000`. \n\nAt this point it would be nice if somebody could try it out on a windows machine (or any other machine).",
    "created_at": "2011-05-13T15:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122093",
    "user": "https://github.com/vbraun"
}
```

Here is an example of the built virtual machine that is built by the attached scripts without user intervention:

http://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova

The virtual machine starts up in text mode and automatically runs the Sage notebook server. At first startup you are prompted to enter a password, as usual. Once you set up your admin password you have to use your **host OS** web browser to open `http://localhost:8000`. 

At this point it would be nice if somebody could try it out on a windows machine (or any other machine).



---

archive/issue_comments_122094.json:
```json
{
    "body": "scripts to auto-build virtual machine",
    "created_at": "2011-05-13T15:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122094",
    "user": "https://github.com/vbraun"
}
```

scripts to auto-build virtual machine



---

archive/issue_comments_122095.json:
```json
{
    "body": "Attachment [build-sage-virtualbox.tar.bz2](tarball://root/attachments/some-uuid/ticket11330/build-sage-virtualbox.tar.bz2) by ltw created at 2011-05-13 18:42:34\n\nReplying to [comment:3 vbraun]:\n> Here is an example of the built virtual machine that is built by the attached scripts without user intervention:\n> \n> http://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova\n\nI get a \"403 Forbidden\" error for that file. Interestingly, I can access all of your other files in that same directory.",
    "created_at": "2011-05-13T18:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122095",
    "user": "https://trac.sagemath.org/admin/accounts/users/ltw"
}
```

Attachment [build-sage-virtualbox.tar.bz2](tarball://root/attachments/some-uuid/ticket11330/build-sage-virtualbox.tar.bz2) by ltw created at 2011-05-13 18:42:34

Replying to [comment:3 vbraun]:
> Here is an example of the built virtual machine that is built by the attached scripts without user intervention:
> 
> http://www.stp.dias.ie/~vbraun/Sage/Sage-4.7.rc2.ova

I get a "403 Forbidden" error for that file. Interestingly, I can access all of your other files in that same directory.



---

archive/issue_comments_122096.json:
```json
{
    "body": "Sorry, wrong permissions. Fixed!",
    "created_at": "2011-05-13T19:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122096",
    "user": "https://github.com/vbraun"
}
```

Sorry, wrong permissions. Fixed!



---

archive/issue_comments_122097.json:
```json
{
    "body": "I'll try this on a Windows 7 box, as soon as I figure out what is needed.\n\nI got the latest VirtualBox (4.0.6) with no guest OS installed.\nDo I need anything else, apart from the .ova - file, to have it running?",
    "created_at": "2011-05-14T04:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122097",
    "user": "https://github.com/dimpase"
}
```

I'll try this on a Windows 7 box, as soon as I figure out what is needed.

I got the latest VirtualBox (4.0.6) with no guest OS installed.
Do I need anything else, apart from the .ova - file, to have it running?



---

archive/issue_comments_122098.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> I'll try this on a Windows 7 box, as soon as I figure out what is needed.\n> \n> I got the latest VirtualBox (4.0.6) with no guest OS installed.\n> Do I need anything else, apart from the .ova - file, to have it running?\n\nfor the record, it does not work, perhaps because this Windows 7 installation is itself a VMWare virtual host.",
    "created_at": "2011-05-14T13:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122098",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:6 dimpase]:
> I'll try this on a Windows 7 box, as soon as I figure out what is needed.
> 
> I got the latest VirtualBox (4.0.6) with no guest OS installed.
> Do I need anything else, apart from the .ova - file, to have it running?

for the record, it does not work, perhaps because this Windows 7 installation is itself a VMWare virtual host.



---

archive/issue_events_029380.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29380"
}
```



---

archive/issue_events_029381.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29381"
}
```



---

archive/issue_events_029382.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29382"
}
```



---

archive/issue_events_029383.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29383"
}
```



---

archive/issue_events_029384.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29384"
}
```



---

archive/issue_events_029385.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29385"
}
```



---

archive/issue_events_029386.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29386"
}
```



---

archive/issue_comments_122099.json:
```json
{
    "body": "Code at https://bitbucket.org/vbraun/sage-virtual-appliance-buildscript",
    "created_at": "2016-01-25T20:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122099",
    "user": "https://github.com/vbraun"
}
```

Code at https://bitbucket.org/vbraun/sage-virtual-appliance-buildscript



---

archive/issue_events_029387.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-25T20:54:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29387"
}
```



---

archive/issue_events_029388.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-25T20:54:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29388"
}
```



---

archive/issue_comments_122100.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-14T17:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122100",
    "user": "https://github.com/embray"
}
```

Resolution: fixed



---

archive/issue_comments_122101.json:
```json
{
    "body": "Seems, then, that this is done.",
    "created_at": "2018-08-14T17:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11158#issuecomment-122101",
    "user": "https://github.com/embray"
}
```

Seems, then, that this is done.



---

archive/issue_events_029389.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-08-14T17:24:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11158",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11158#event-29389"
}
```
