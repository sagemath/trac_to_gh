# Issue 32981: speed up valuation of a polynomial at another

archive/issues_032981.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/33218\n\n",
    "created_at": "2022-01-22T16:58:51Z",
    "labels": [
        "basic arithmetic",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "speed up valuation of a polynomial at another",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32981",
    "user": "@mezzarobba"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/33218





---

archive/issue_comments_470343.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-22T17:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470343",
    "user": "@mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_470344.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-01-22T17:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470344",
    "user": "@mezzarobba"
}
```

New commits:



---

archive/issue_comments_470345.json:
```json
{
    "body": "Looks good! Just two small suggestions.\n\n- This appears to make it a tiny bit faster:\n\n```diff\n-        rem = self.parent().zero()\n+        cdef Polynomial rem = self.parent().zero()\n```\n\n\n- While we're at it, we could also fix this (to catch `p=0`):\n\n```diff\n-        if p.degree() == 0:\n-            raise ArithmeticError(\"The polynomial, p, must have positive degree.\")\n+        if p.is_constant():\n+            raise ArithmeticError(\"The polynomial, p, must be non-constant.\")\n```\n",
    "created_at": "2022-01-25T09:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470345",
    "user": "@yyyyx4"
}
```

Looks good! Just two small suggestions.

- This appears to make it a tiny bit faster:

```diff
-        rem = self.parent().zero()
+        cdef Polynomial rem = self.parent().zero()
```


- While we're at it, we could also fix this (to catch `p=0`):

```diff
-        if p.degree() == 0:
-            raise ArithmeticError("The polynomial, p, must have positive degree.")
+        if p.is_constant():
+            raise ArithmeticError("The polynomial, p, must be non-constant.")
```




---

archive/issue_comments_470346.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-25T09:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470346",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470347.json:
```json
{
    "body": "thanks for your comments! the new version seems to be 1-2% faster on the example in the description",
    "created_at": "2022-01-25T09:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470347",
    "user": "@mezzarobba"
}
```

thanks for your comments! the new version seems to be 1-2% faster on the example in the description



---

archive/issue_comments_470348.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-06T07:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470348",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470349.json:
```json
{
    "body": "ok",
    "created_at": "2022-02-06T07:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470349",
    "user": "@fchapoton"
}
```

ok



---

archive/issue_comments_470350.json:
```json
{
    "body": "thank you!",
    "created_at": "2022-02-06T12:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470350",
    "user": "@mezzarobba"
}
```

thank you!



---

archive/issue_comments_470351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-13T10:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32981#issuecomment-470351",
    "user": "@vbraun"
}
```

Resolution: fixed
