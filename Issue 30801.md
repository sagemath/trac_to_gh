# Issue 30801: Improve the zonotope

Issue created by migration from https://trac.sagemath.org/ticket/31038

Original creator: @kliem

Original creation time: 2020-12-11 10:26:58

CC:  jipilab @laisrast

Keywords: zonotope

Currently the zonotope just takes the convex hull of the sum of all combinations of the input. With `n` generators it takes therefor the convex hull of `2^n` points.

However, most of those points, will be redundant. Reducing via the Minkowski sum, allows to use this.

Before this ticket:


```
sage: from itertools import combinations                                                                                                                                            
sage: cu = polytopes.cube()                                                                                                                                                         
sage: sgmt = [p.vector()-q.vector() for p,q in combinations(cu.vertices(),2)]                                                                                                       
sage: sgmt2 = set(tuple(x) for x in sgmt)                                                                                                                                           
sage: # %time polytopes.zonotope(sgmt)  # killed due to memory overflow                                                                                                                                              
sage: %time polytopes.zonotope(sgmt2)                                                                                                                                               
CPU times: user 2.06 s, sys: 23.9 ms, total: 2.09 s
Wall time: 2.09 s
A 3-dimensional polyhedron in ZZ^3 defined as the convex hull of 96 vertices
```


With this ticket:


```
sage: from itertools import combinations                                                                                                                                            
sage: cu = polytopes.cube()                                                                                                                                                         
sage: sgmt = [p.vector()-q.vector() for p,q in combinations(cu.vertices(),2)]                                                                                                       
sage: sgmt2 = set(tuple(x) for x in sgmt)                                                                                                                                           
sage: %time polytopes.zonotope(sgmt)                                                                                                                                                
CPU times: user 138 ms, sys: 0 ns, total: 138 ms
Wall time: 138 ms
A 3-dimensional polyhedron in ZZ^3 defined as the convex hull of 96 vertices
sage: %time polytopes.zonotope(sgmt2)                                                                                                                                               
CPU times: user 58 ms, sys: 0 ns, total: 58 ms
Wall time: 57.6 ms
A 3-dimensional polyhedron in ZZ^3 defined as the convex hull of 96 vertices
```



---

Comment by @kliem created at 2020-12-11 10:27:05

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-12-13 19:50:59

hmm, `reduce` is not very pythonic. Why not use sum ?


---

Comment by git created at 2020-12-13 20:05:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2020-12-13 20:06:46

Yes, much easier.


---

Comment by chapoton created at 2020-12-14 07:56:07

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-12-14 07:56:07

ok, looks good.


---

Comment by jipilab created at 2020-12-14 08:24:30

Replying to [comment:3 chapoton]:
> hmm, `reduce` is not very pythonic. Why not use sum ?

Ah oui? I once discovered it in a python magazine about "tricks" that go unnoticed. Perhaps it is made for more technical things than `+`?


---

Comment by vbraun created at 2020-12-21 23:35:26

Resolution: fixed
