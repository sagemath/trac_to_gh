# Issue 33040: build/pkgs/_recommended/dependencies

Issue created by migration from https://trac.sagemath.org/ticket/33277

Original creator: mkoeppe

Original creation time: 2022-02-02 18:43:14

CC:  slabbe dimpase

From #32956#comment:7

`src/doc/bootstrap` currently hardcodes the "recommended" packages.

We replace this by using the new file `build/pkgs/_recommended/dependencies`

The new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).


---

Comment by mkoeppe created at 2022-02-02 19:08:50

Last 10 new commits:


---

Comment by mkoeppe created at 2022-02-02 19:08:50

Changing status from new to needs_review.


---

Comment by git created at 2022-02-05 01:10:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2022-02-05 04:35:30

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-02-05 04:35:30

lgtm (it's just 1-line diff)


---

Comment by mkoeppe created at 2022-02-05 05:29:45

No, there's more


---

Comment by slabbe created at 2022-02-10 10:43:48

Sorry, I am arriving late here. When I run configure, I see:


```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG _recommended...
configure: no suitable system package found for SPKG _recommended
-----------------------------------------------------------------------------
```


Is this normal? I have the dependencies ffmpeg, texlive, pandoc, imagemagick, git installed.


---

Comment by slabbe created at 2022-02-10 10:51:35

Also, I observe that the following command returns:


```
$ (for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done)
```

|pandoc|ffmpeg|imagemagick|texlive|git
Therefore, I understand the current change


```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           $RECOMMENDED_SPKG_PATTERN:*)
```


as


```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           _recommended:|pandoc|ffmpeg|imagemagick|texlive|git:*)
```


I feel there are some `*` and `:` missing...


---

Comment by slabbe created at 2022-02-10 10:51:35

Changing status from positive_review to needs_info.


---

Comment by mkoeppe created at 2022-02-10 18:20:24

You're missing that there is a ``@`(...)`, see https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html

The `case` is

```
@(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
```



---

Comment by mkoeppe created at 2022-02-10 18:21:34

Replying to [comment:8 slabbe]:
> Sorry, I am arriving late here. When I run configure, I see:
> 
> {{{
> -----------------------------------------------------------------------------
> Checking whether [SageMath](SageMath) should install SPKG _recommended...
> configure: no suitable system package found for SPKG _recommended
> -----------------------------------------------------------------------------
> }}}
> 
> Is this normal?

Yes, see #30930#comment:6


---

Comment by slabbe created at 2022-02-10 21:59:11

Ok, looks good then!


---

Comment by slabbe created at 2022-02-10 21:59:11

Changing status from needs_info to positive_review.


---

Comment by slabbe created at 2022-02-11 07:44:29

Replying to [comment:10 mkoeppe]:
> The `case` is
> {{{
> `@`(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
> }}}

Should it be?

```
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git):* 
```



---

Comment by mkoeppe created at 2022-02-11 18:23:05

Yes, a typo in my comment. The actual code:

```
$ echo "@(_recommended$(for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done))"
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git)
```



---

Comment by mkoeppe created at 2022-02-11 19:50:49

Changing priority from major to critical.


---

Comment by vbraun created at 2022-02-13 10:17:44

Resolution: fixed
