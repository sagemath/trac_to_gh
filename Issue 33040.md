# Issue 33040: build/pkgs/_recommended/dependencies

archive/issues_033040.json:
```json
{
    "body": "CC:  slabbe dimpase\n\nFrom #32956#comment:7\n\n`src/doc/bootstrap` currently hardcodes the \"recommended\" packages.\n\nWe replace this by using the new file `build/pkgs/_recommended/dependencies`\n\nThe new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).\n\nIssue created by migration from https://trac.sagemath.org/ticket/33277\n\n",
    "created_at": "2022-02-02T18:43:14Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "build/pkgs/_recommended/dependencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33040",
    "user": "mkoeppe"
}
```
CC:  slabbe dimpase

From #32956#comment:7

`src/doc/bootstrap` currently hardcodes the "recommended" packages.

We replace this by using the new file `build/pkgs/_recommended/dependencies`

The new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).

Issue created by migration from https://trac.sagemath.org/ticket/33277





---

archive/issue_comments_471133.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471133",
    "user": "mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_471134.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471134",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_471135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-05T01:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471135",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_471136.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-05T04:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471136",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_471137.json:
```json
{
    "body": "lgtm (it's just 1-line diff)",
    "created_at": "2022-02-05T04:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471137",
    "user": "dimpase"
}
```

lgtm (it's just 1-line diff)



---

archive/issue_comments_471138.json:
```json
{
    "body": "No, there's more",
    "created_at": "2022-02-05T05:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471138",
    "user": "mkoeppe"
}
```

No, there's more



---

archive/issue_comments_471139.json:
```json
{
    "body": "Sorry, I am arriving late here. When I run configure, I see:\n\n\n```\n-----------------------------------------------------------------------------\nChecking whether SageMath should install SPKG _recommended...\nconfigure: no suitable system package found for SPKG _recommended\n-----------------------------------------------------------------------------\n```\n\n\nIs this normal? I have the dependencies ffmpeg, texlive, pandoc, imagemagick, git installed.",
    "created_at": "2022-02-10T10:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471139",
    "user": "slabbe"
}
```

Sorry, I am arriving late here. When I run configure, I see:


```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG _recommended...
configure: no suitable system package found for SPKG _recommended
-----------------------------------------------------------------------------
```


Is this normal? I have the dependencies ffmpeg, texlive, pandoc, imagemagick, git installed.



---

archive/issue_comments_471140.json:
```json
{
    "body": "Also, I observe that the following command returns:\n\n\n```\n$ (for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n \"|\"$a; done)\n```\n\n|pandoc|ffmpeg|imagemagick|texlive|git\nTherefore, I understand the current change\n\n\n```diff\n-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)\n+                           $RECOMMENDED_SPKG_PATTERN:*)\n```\n\n\nas\n\n\n```diff\n-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)\n+                           _recommended:|pandoc|ffmpeg|imagemagick|texlive|git:*)\n```\n\n\nI feel there are some `*` and `:` missing...",
    "created_at": "2022-02-10T10:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471140",
    "user": "slabbe"
}
```

Also, I observe that the following command returns:


```
$ (for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done)
```

|pandoc|ffmpeg|imagemagick|texlive|git
Therefore, I understand the current change


```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           $RECOMMENDED_SPKG_PATTERN:*)
```


as


```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           _recommended:|pandoc|ffmpeg|imagemagick|texlive|git:*)
```


I feel there are some `*` and `:` missing...



---

archive/issue_comments_471141.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2022-02-10T10:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471141",
    "user": "slabbe"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_471142.json:
```json
{
    "body": "You're missing that there is a ``@`(...)`, see https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html\n\nThe `case` is\n\n```\n@(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* \n```\n",
    "created_at": "2022-02-10T18:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471142",
    "user": "mkoeppe"
}
```

You're missing that there is a ``@`(...)`, see https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html

The `case` is

```
@(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
```




---

archive/issue_comments_471143.json:
```json
{
    "body": "Replying to [comment:8 slabbe]:\n> Sorry, I am arriving late here. When I run configure, I see:\n> \n> {{{\n> -----------------------------------------------------------------------------\n> Checking whether [SageMath](SageMath) should install SPKG _recommended...\n> configure: no suitable system package found for SPKG _recommended\n> -----------------------------------------------------------------------------\n> }}}\n> \n> Is this normal?\n\nYes, see #30930#comment:6",
    "created_at": "2022-02-10T18:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471143",
    "user": "mkoeppe"
}
```

Replying to [comment:8 slabbe]:
> Sorry, I am arriving late here. When I run configure, I see:
> 
> {{{
> -----------------------------------------------------------------------------
> Checking whether [SageMath](SageMath) should install SPKG _recommended...
> configure: no suitable system package found for SPKG _recommended
> -----------------------------------------------------------------------------
> }}}
> 
> Is this normal?

Yes, see #30930#comment:6



---

archive/issue_comments_471144.json:
```json
{
    "body": "Ok, looks good then!",
    "created_at": "2022-02-10T21:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471144",
    "user": "slabbe"
}
```

Ok, looks good then!



---

archive/issue_comments_471145.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2022-02-10T21:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471145",
    "user": "slabbe"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_471146.json:
```json
{
    "body": "Replying to [comment:10 mkoeppe]:\n> The `case` is\n> {{{\n> `@`(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* \n> }}}\n\nShould it be?\n\n```\n@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git):* \n```\n",
    "created_at": "2022-02-11T07:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471146",
    "user": "slabbe"
}
```

Replying to [comment:10 mkoeppe]:
> The `case` is
> {{{
> `@`(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
> }}}

Should it be?

```
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git):* 
```




---

archive/issue_comments_471147.json:
```json
{
    "body": "Yes, a typo in my comment. The actual code:\n\n```\n$ echo \"@(_recommended$(for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n \"|\"$a; done))\"\n@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git)\n```\n",
    "created_at": "2022-02-11T18:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471147",
    "user": "mkoeppe"
}
```

Yes, a typo in my comment. The actual code:

```
$ echo "@(_recommended$(for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done))"
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git)
```




---

archive/issue_comments_471148.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-11T19:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471148",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_471149.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-13T10:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-471149",
    "user": "vbraun"
}
```

Resolution: fixed
