# Issue 24466: SIGABRT on i686 involving polybori and strings

archive/issues_024466.json:
```json
{
    "body": "CC:  @kiwifb @embray\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24703\n\n",
    "created_at": "2018-02-10T11:32:21Z",
    "labels": [
        "packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "SIGABRT on i686 involving polybori and strings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24466",
    "user": "@jdemeyer"
}
```
CC:  @kiwifb @embray



Issue created by migration from https://trac.sagemath.org/ticket/24703





---

archive/issue_comments_343205.json:
```json
{
    "body": "Attachment [crash_zrVXNw.log](tarball://root/attachments/some-uuid/ticket24703/crash_zrVXNw.log) by @jdemeyer created at 2018-02-10 11:32:30",
    "created_at": "2018-02-10T11:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343205",
    "user": "@jdemeyer"
}
```

Attachment [crash_zrVXNw.log](tarball://root/attachments/some-uuid/ticket24703/crash_zrVXNw.log) by @jdemeyer created at 2018-02-10 11:32:30



---

archive/issue_comments_343206.json:
```json
{
    "body": "Yup, pretty much anything that use C++ has to be rebuilt when you move to gcc-5. gcc dev have made some commitments to ABI stability for the time being. But then you also have the change of ABI for gfortran at gcc-7. The only thing that's rock solid for almost ever is C.",
    "created_at": "2018-02-12T10:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343206",
    "user": "@kiwifb"
}
```

Yup, pretty much anything that use C++ has to be rebuilt when you move to gcc-5. gcc dev have made some commitments to ABI stability for the time being. But then you also have the change of ABI for gfortran at gcc-7. The only thing that's rock solid for almost ever is C.



---

archive/issue_comments_343207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-14T11:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343207",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343208.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-14T11:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343208",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343209.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-14T12:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343209",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_343210.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-18T21:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343210",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343211.json:
```json
{
    "body": "Not sure why the patchbot is failing but the stuff looks good me, and we should include it ASAP.",
    "created_at": "2018-02-18T21:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343211",
    "user": "@kiwifb"
}
```

Not sure why the patchbot is failing but the stuff looks good me, and we should include it ASAP.



---

archive/issue_comments_343212.json:
```json
{
    "body": "Replying to [comment:13 fbissey]:\n> Not sure why the patchbot is failing but the stuff looks good me, and we should include it ASAP.\n\nI need to upgrade that patchbot.  It's running an old version of the patchbot package that has a bug when testing \"unsafe\" tickets.",
    "created_at": "2018-02-19T16:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343212",
    "user": "@embray"
}
```

Replying to [comment:13 fbissey]:
> Not sure why the patchbot is failing but the stuff looks good me, and we should include it ASAP.

I need to upgrade that patchbot.  It's running an old version of the patchbot package that has a bug when testing "unsafe" tickets.



---

archive/issue_comments_343213.json:
```json
{
    "body": "Okay, I don't really care since I'm not in the habit of building gcc anyways, but I would appreciate if someone sign off on #21524 so I don't have to keep upgrading it to incorporate changes like this.",
    "created_at": "2018-02-19T16:43:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343213",
    "user": "@embray"
}
```

Okay, I don't really care since I'm not in the habit of building gcc anyways, but I would appreciate if someone sign off on #21524 so I don't have to keep upgrading it to incorporate changes like this.



---

archive/issue_comments_343214.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-20T23:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343214",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_343215.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2018-02-28T07:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343215",
    "user": "@vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_343216.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2018-02-28T07:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343216",
    "user": "@vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_343217.json:
```json
{
    "body": "Breaks full build on Debian 7 (both 32 and 64 bit)\n\nPPL: \n\n```\nconfigure: error: Cannot find GMP version 4.1.3 or higher.\nGMP is the GNU Multi-Precision library:\nsee http://www.swox.com/gmp/ for more information.\nWhen compiling the GMP library, do not forget to enable the C++ interface:\nadd --enable-cxx to the configuration options.\nError configuring the Parma Polyhedra Library.\n```\n\n\nGivaro:\n\n```\nchecking for GMP library... yes\nchecking gmpxx.h usability... no\nchecking gmpxx.h presence... no\nchecking for gmpxx.h... no\nyour GMP does not have c++ support. Compile GMP with --enable-cxx\n********************************************************************************\nError configuring givaro-4.0.4\n********************************************************************************\n```\n",
    "created_at": "2018-02-28T07:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343217",
    "user": "@vbraun"
}
```

Breaks full build on Debian 7 (both 32 and 64 bit)

PPL: 

```
configure: error: Cannot find GMP version 4.1.3 or higher.
GMP is the GNU Multi-Precision library:
see http://www.swox.com/gmp/ for more information.
When compiling the GMP library, do not forget to enable the C++ interface:
add --enable-cxx to the configuration options.
Error configuring the Parma Polyhedra Library.
```


Givaro:

```
checking for GMP library... yes
checking gmpxx.h usability... no
checking gmpxx.h presence... no
checking for gmpxx.h... no
your GMP does not have c++ support. Compile GMP with --enable-cxx
********************************************************************************
Error configuring givaro-4.0.4
********************************************************************************
```




---

archive/issue_comments_343218.json:
```json
{
    "body": "Do you happen to have the `install.log` file?",
    "created_at": "2018-02-28T08:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343218",
    "user": "@jdemeyer"
}
```

Do you happen to have the `install.log` file?



---

archive/issue_comments_343219.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-28T13:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343219",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_343220.json:
```json
{
    "body": "Reverted this:\n\n```diff\n--- a/build/pkgs/gcc/spkg-install\n+++ b/build/pkgs/gcc/spkg-install\n@@ -124,7 +124,7 @@ $MAKE install\n \n # Mark gfortran as not installed in case gfortran was installed earlier\n cd \"$SAGE_SPKG_INST\"\n-rm -f gmp-* mpir-* mpfr-* mpc-* gfortran-*\n+rm -f gfortran-*\n \n # Force re-configuration: the next time that \"make\" is run, we need to\n # rebuild all packages (#24703) but we should not rebuild gcc (#19324)\n```\n\n----\nNew commits:",
    "created_at": "2018-02-28T13:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343220",
    "user": "@jdemeyer"
}
```

Reverted this:

```diff
--- a/build/pkgs/gcc/spkg-install
+++ b/build/pkgs/gcc/spkg-install
@@ -124,7 +124,7 @@ $MAKE install
 
 # Mark gfortran as not installed in case gfortran was installed earlier
 cd "$SAGE_SPKG_INST"
-rm -f gmp-* mpir-* mpfr-* mpc-* gfortran-*
+rm -f gfortran-*
 
 # Force re-configuration: the next time that "make" is run, we need to
 # rebuild all packages (#24703) but we should not rebuild gcc (#19324)
```

----
New commits:



---

archive/issue_comments_343221.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-28T13:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343221",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343222.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-28T22:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343222",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_343223.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2018-03-01T23:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343223",
    "user": "@vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_343224.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2018-03-01T23:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343224",
    "user": "@vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_343225.json:
```json
{
    "body": "http://build.sagemath.org/#/builders/30/builds/6/steps/6/logs/matplotlib\n\nBuilding matplotlib still fails on Debian 7 64-bit with \n\n```\n    gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPY_ARRAY_UNIQUE_SYMBOL=MPL_matplotlib__image_ARRAY_API -DNPY_NO_DEPRECATED_API=NPY_1_7_API_VERSION -D__STDC_FORMAT_MACROS=1 -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/local/include -I. -Iextern/agg24-svn/include -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c src/py_converters.cpp -o build/temp.linux-x86_64-2.7/src/py_converters.o\n    In file included from /home/buildbot/slave/sage_git/build/local/include/python2.7/Python.h:19:0,\n                     from src/py_converters.h:16,\n                     from src/py_converters.cpp:3:\n    /usr/include/limits.h:125:26: error: no include path in which to search for limits.h\n     # include_next <limits.h>\n                              ^\n    In file included from src/py_converters.h:16:0,\n                     from src/py_converters.cpp:3:\n    /home/buildbot/slave/sage_git/build/local/include/python2.7/Python.h:22:2: error: #error \"Something's broken.  UCHAR_MAX should be defined in limits.h.\"\n     #error \"Something's broken.  UCHAR_MAX should be defined in limits.h.\"\n```\n",
    "created_at": "2018-03-01T23:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343225",
    "user": "@vbraun"
}
```

http://build.sagemath.org/#/builders/30/builds/6/steps/6/logs/matplotlib

Building matplotlib still fails on Debian 7 64-bit with 

```
    gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPY_ARRAY_UNIQUE_SYMBOL=MPL_matplotlib__image_ARRAY_API -DNPY_NO_DEPRECATED_API=NPY_1_7_API_VERSION -D__STDC_FORMAT_MACROS=1 -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/local/include -I. -Iextern/agg24-svn/include -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c src/py_converters.cpp -o build/temp.linux-x86_64-2.7/src/py_converters.o
    In file included from /home/buildbot/slave/sage_git/build/local/include/python2.7/Python.h:19:0,
                     from src/py_converters.h:16,
                     from src/py_converters.cpp:3:
    /usr/include/limits.h:125:26: error: no include path in which to search for limits.h
     # include_next <limits.h>
                              ^
    In file included from src/py_converters.h:16:0,
                     from src/py_converters.cpp:3:
    /home/buildbot/slave/sage_git/build/local/include/python2.7/Python.h:22:2: error: #error "Something's broken.  UCHAR_MAX should be defined in limits.h."
     #error "Something's broken.  UCHAR_MAX should be defined in limits.h."
```




---

archive/issue_comments_343226.json:
```json
{
    "body": "I don't see how that error is related to this ticket.",
    "created_at": "2018-03-02T09:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343226",
    "user": "@jdemeyer"
}
```

I don't see how that error is related to this ticket.



---

archive/issue_comments_343227.json:
```json
{
    "body": "Apparently the build was interleaved with gcc, which shouldn't happen. This also happens after backing out the ticket so its either a preexisting issue or the makefile isn't regenerated. This is the second build of gcc, it builds in parallel with everything else.",
    "created_at": "2018-03-02T10:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343227",
    "user": "@vbraun"
}
```

Apparently the build was interleaved with gcc, which shouldn't happen. This also happens after backing out the ticket so its either a preexisting issue or the makefile isn't regenerated. This is the second build of gcc, it builds in parallel with everything else.



---

archive/issue_comments_343228.json:
```json
{
    "body": "Replying to [comment:26 vbraun]:\n> This also happens after backing out the ticket\n\nI think it's a bug in the *previous* version of this ticket then.\n\n> This is the second build of gcc\n\nThere shouldn't be a second build of gcc.\n\nIt would be very useful to see the auto-generated `build/make/Makefile` from the failed build to understand what is happening.",
    "created_at": "2018-03-02T12:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343228",
    "user": "@jdemeyer"
}
```

Replying to [comment:26 vbraun]:
> This also happens after backing out the ticket

I think it's a bug in the *previous* version of this ticket then.

> This is the second build of gcc

There shouldn't be a second build of gcc.

It would be very useful to see the auto-generated `build/make/Makefile` from the failed build to understand what is happening.



---

archive/issue_comments_343229.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-02T12:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343229",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_343230.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-02T12:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343230",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343231.json:
```json
{
    "body": "Attachment [Makefile](tarball://root/attachments/some-uuid/ticket24703/Makefile) by @vbraun created at 2018-03-02 13:55:48",
    "created_at": "2018-03-02T13:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343231",
    "user": "@vbraun"
}
```

Attachment [Makefile](tarball://root/attachments/some-uuid/ticket24703/Makefile) by @vbraun created at 2018-03-02 13:55:48



---

archive/issue_comments_343232.json:
```json
{
    "body": "I attached the makefile...",
    "created_at": "2018-03-02T13:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343232",
    "user": "@vbraun"
}
```

I attached the makefile...



---

archive/issue_comments_343233.json:
```json
{
    "body": "I checked out just this ticket and ran `make distclean && make` and gcc builds twice\n\n```\nbuildbot@sagebd07_64s02:~/slave/sage_git/build$ grep 'Found local metadata for gcc' logs/install.log \n[gcc-7.2.0] Found local metadata for gcc-7.2.0\n[gcc-7.2.0] Found local metadata for gcc-7.2.0\n```\n\nand the second time is in parallel with lots of other stuff...",
    "created_at": "2018-03-02T14:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343233",
    "user": "@vbraun"
}
```

I checked out just this ticket and ran `make distclean && make` and gcc builds twice

```
buildbot@sagebd07_64s02:~/slave/sage_git/build$ grep 'Found local metadata for gcc' logs/install.log 
[gcc-7.2.0] Found local metadata for gcc-7.2.0
[gcc-7.2.0] Found local metadata for gcc-7.2.0
```

and the second time is in parallel with lots of other stuff...



---

archive/issue_comments_343234.json:
```json
{
    "body": "OK, I think I know what happened: there is indeed a serious bug that GCC is installed twice.\n\nBut that bug is not because of this ticket, it is most likely happening since #24599. I think you are just unlucky to hit this bug now and not before.",
    "created_at": "2018-03-02T19:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343234",
    "user": "@jdemeyer"
}
```

OK, I think I know what happened: there is indeed a serious bug that GCC is installed twice.

But that bug is not because of this ticket, it is most likely happening since #24599. I think you are just unlucky to hit this bug now and not before.



---

archive/issue_comments_343235.json:
```json
{
    "body": "I would rather prefer to merge this ticket anyway and then deal with further fixes to the GCC build process in a future ticket.",
    "created_at": "2018-03-02T19:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343235",
    "user": "@jdemeyer"
}
```

I would rather prefer to merge this ticket anyway and then deal with further fixes to the GCC build process in a future ticket.



---

archive/issue_comments_343236.json:
```json
{
    "body": "Sure, did you open a followup ticket?",
    "created_at": "2018-03-02T22:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343236",
    "user": "@vbraun"
}
```

Sure, did you open a followup ticket?



---

archive/issue_comments_343237.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-03-02T22:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343237",
    "user": "@vbraun"
}
```

New commits:



---

archive/issue_comments_343238.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-03-02T22:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343238",
    "user": "@vbraun"
}
```

New commits:



---

archive/issue_comments_343239.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-02T22:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343239",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_343240.json:
```json
{
    "body": "A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.",
    "created_at": "2018-03-12T23:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343240",
    "user": "@jhpalmieri"
}
```

A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.



---

archive/issue_comments_343241.json:
```json
{
    "body": "Replying to [comment:37 jhpalmieri]:\n> A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.\n\nReally, you need to check both, with the caveat that if you installed with clang and want to switch to gcc you will break your install. So, unfortunately, a not so stupid user could break things.",
    "created_at": "2018-03-13T00:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343241",
    "user": "@kiwifb"
}
```

Replying to [comment:37 jhpalmieri]:
> A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.

Really, you need to check both, with the caveat that if you installed with clang and want to switch to gcc you will break your install. So, unfortunately, a not so stupid user could break things.



---

archive/issue_comments_343242.json:
```json
{
    "body": "In my case, I switched from gcc (the default) to clang (the new default), and upgrading to the most recent beta broke things, because this test ended up adding bad stuff to `build/make/Makefile`, as reported in sage-release and #21524, and now being fixed in #24961.",
    "created_at": "2018-03-13T02:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343242",
    "user": "@jhpalmieri"
}
```

In my case, I switched from gcc (the default) to clang (the new default), and upgrading to the most recent beta broke things, because this test ended up adding bad stuff to `build/make/Makefile`, as reported in sage-release and #21524, and now being fixed in #24961.



---

archive/issue_comments_343243.json:
```json
{
    "body": "Replying to [comment:39 jhpalmieri]:\n> In my case, I switched from gcc (the default) to clang (the new default)\n\nAre you sure? If the GCC spkg is installed, it should be used by Sage. If this is not the case, I consider that a bug.",
    "created_at": "2018-03-13T09:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343243",
    "user": "@jdemeyer"
}
```

Replying to [comment:39 jhpalmieri]:
> In my case, I switched from gcc (the default) to clang (the new default)

Are you sure? If the GCC spkg is installed, it should be used by Sage. If this is not the case, I consider that a bug.



---

archive/issue_comments_343244.json:
```json
{
    "body": "Replying to [comment:38 fbissey]:\n> Replying to [comment:37 jhpalmieri]:\n> > A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.\n> \n> Really, you need to check both\n\nI don't see why, but maybe I'm missing something?",
    "created_at": "2018-03-13T09:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343244",
    "user": "@jdemeyer"
}
```

Replying to [comment:38 fbissey]:
> Replying to [comment:37 jhpalmieri]:
> > A question related to #24961: should we be checking that `x$SAGE_INSTALL_GCC = xexists` or that `x$SAGE_INSTALL_GCC = xyes`? On an OS X machine, I have Sage's gcc installed (from a few betas ago), but now Sage uses clang instead of gcc, so Sage's gcc will not be rebuilt as I upgraded Sage.
> 
> Really, you need to check both

I don't see why, but maybe I'm missing something?



---

archive/issue_comments_343245.json:
```json
{
    "body": "Replying to [comment:40 jdemeyer]:\n> Replying to [comment:39 jhpalmieri]:\n> > In my case, I switched from gcc (the default) to clang (the new default)\n> \n> Are you sure? If the GCC spkg is installed, it should be used by Sage. If this is not the case, I consider that a bug.\n\nI guess you're right, gcc is used, but `configure` tells me that `gcc` will not be installed.",
    "created_at": "2018-03-13T14:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343245",
    "user": "@jhpalmieri"
}
```

Replying to [comment:40 jdemeyer]:
> Replying to [comment:39 jhpalmieri]:
> > In my case, I switched from gcc (the default) to clang (the new default)
> 
> Are you sure? If the GCC spkg is installed, it should be used by Sage. If this is not the case, I consider that a bug.

I guess you're right, gcc is used, but `configure` tells me that `gcc` will not be installed.



---

archive/issue_comments_343246.json:
```json
{
    "body": "Replying to [comment:42 jhpalmieri]:\n> `configure` tells me that `gcc` will not be installed.\n\nIt won't be installed if it's already installed. Consider that a feature.",
    "created_at": "2018-03-13T14:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343246",
    "user": "@jdemeyer"
}
```

Replying to [comment:42 jhpalmieri]:
> `configure` tells me that `gcc` will not be installed.

It won't be installed if it's already installed. Consider that a feature.



---

archive/issue_comments_343247.json:
```json
{
    "body": "I also consider it a feature if it's not installed because clang is going to be used instead. `configure` does not give a reason for it not being installed, leaving me to guess as to what's going on.",
    "created_at": "2018-03-13T15:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343247",
    "user": "@jhpalmieri"
}
```

I also consider it a feature if it's not installed because clang is going to be used instead. `configure` does not give a reason for it not being installed, leaving me to guess as to what's going on.



---

archive/issue_comments_343248.json:
```json
{
    "body": "Replying to [comment:44 jhpalmieri]:\n> I also consider it a feature if it's not installed because clang is going to be used instead.\n\nOf course. But that should work now, right?",
    "created_at": "2018-03-13T15:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24466#issuecomment-343248",
    "user": "@jdemeyer"
}
```

Replying to [comment:44 jhpalmieri]:
> I also consider it a feature if it's not installed because clang is going to be used instead.

Of course. But that should work now, right?
