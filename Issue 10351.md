# Issue 10351: upgrade ZODB to version 3.10.1

archive/issues_010351.json:
```json
{
    "body": "Assignee: tbd\n\nUpgrade ZODB to the latest upstream\n\nIssue created by migration from https://trac.sagemath.org/ticket/10352\n\n",
    "created_at": "2010-11-28T21:37:08Z",
    "labels": [
        "component: packages: standard",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "upgrade ZODB to version 3.10.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10351",
    "user": "https://github.com/williamstein"
}
```
Assignee: tbd

Upgrade ZODB to the latest upstream

Issue created by migration from https://trac.sagemath.org/ticket/10352





---

archive/issue_comments_106137.json:
```json
{
    "body": "## NOTE ABOUT spkg-check\nI tried adding an spkg-check, but the fact is that the ZODB test suite fails miserably all over the place.  This is true both of the version in Sage (3.7.0) and the version posted here.  The failures start with:\n\n```\n(sage subshell) deep:src wstein$ python test.py\nRunning tests from build/lib.macosx-10.6-i386-2.6\ntest.py:44: DeprecationWarning: zope.testing.testrunner is deprecated in favour of zope.testrunner.\n```\nbut there is no `zope.testrunner` so the DeprecationWarning is wrong!!  And it gets worse from there.  Tons of key errors, other failures, then a total hang.\n\nRegarding spkg-check, here's what it *should* look like:\n\n```/usr/bin/env bash\ncd src/\npython test.py\n```",
    "created_at": "2010-11-28T21:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106137",
    "user": "https://github.com/williamstein"
}
```

## NOTE ABOUT spkg-check
I tried adding an spkg-check, but the fact is that the ZODB test suite fails miserably all over the place.  This is true both of the version in Sage (3.7.0) and the version posted here.  The failures start with:

```
(sage subshell) deep:src wstein$ python test.py
Running tests from build/lib.macosx-10.6-i386-2.6
test.py:44: DeprecationWarning: zope.testing.testrunner is deprecated in favour of zope.testrunner.
```
but there is no `zope.testrunner` so the DeprecationWarning is wrong!!  And it gets worse from there.  Tons of key errors, other failures, then a total hang.

Regarding spkg-check, here's what it *should* look like:

```/usr/bin/env bash
cd src/
python test.py
```



---

archive/issue_comments_106138.json:
```json
{
    "body": "ZODB is used by the database_cremona optional spkg. \u00a0Thus a way to test this package is to install that optional package, then do:\n\n```\nsage: EllipticCurve(\"30001a1\")\nElliptic Curve defined by y^2 + y = x^3 + x^2 - 171*x - 6408 over Rational Field\nsage: CremonaDatabase().largest_conductor()\n130000\n```\nand not get an error.  Just that is enough to show that the ZODB is doing pretty much all we use it for in Sage.   Running the test suite for ZODB is unfortunately not possible :-(. \n\nAlso, be sure to test the \"devel/sage/sage/databases\" directory, and you of course should do \"make test\" in SAGE_ROOT to test the whole library.",
    "created_at": "2010-11-28T21:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106138",
    "user": "https://github.com/williamstein"
}
```

ZODB is used by the database_cremona optional spkg. Â Thus a way to test this package is to install that optional package, then do:

```
sage: EllipticCurve("30001a1")
Elliptic Curve defined by y^2 + y = x^3 + x^2 - 171*x - 6408 over Rational Field
sage: CremonaDatabase().largest_conductor()
130000
```
and not get an error.  Just that is enough to show that the ZODB is doing pretty much all we use it for in Sage.   Running the test suite for ZODB is unfortunately not possible :-(. 

Also, be sure to test the "devel/sage/sage/databases" directory, and you of course should do "make test" in SAGE_ROOT to test the whole library.



---

archive/issue_comments_106139.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-11-28T21:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106139",
    "user": "https://github.com/williamstein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_106140.json:
```json
{
    "body": "I just tried installing this and at the end got:\n\n```\n\nFinished processing dependencies for ZODB3==3.7.0\n\nreal\t0m20.027s\nuser\t0m14.322s\nsys\t0m2.886s\nSuccessfully installed zodb3-3.10.1\n```\nso somehow setuptools is still thinking partly that it needs to install ZODB 3.7.0.  So screw it.  I'm changing this to needs work and not messing with it anymore.",
    "created_at": "2010-11-29T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106140",
    "user": "https://github.com/williamstein"
}
```

I just tried installing this and at the end got:

```

Finished processing dependencies for ZODB3==3.7.0

real	0m20.027s
user	0m14.322s
sys	0m2.886s
Successfully installed zodb3-3.10.1
```
so somehow setuptools is still thinking partly that it needs to install ZODB 3.7.0.  So screw it.  I'm changing this to needs work and not messing with it anymore.



---

archive/issue_comments_106141.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-11-29T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106141",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106142.json:
```json
{
    "body": "Ticket #1634 should be marked as a duplicate.",
    "created_at": "2011-10-03T10:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106142",
    "user": "https://trac.sagemath.org/admin/accounts/users/cschwan"
}
```

Ticket #1634 should be marked as a duplicate.



---

archive/issue_comments_106143.json:
```json
{
    "body": "I am bumping it up to \"major\", since it turns out that zodb screws up refcounts, which makes the debug version of Sage (#13864) fail.",
    "created_at": "2012-12-28T22:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106143",
    "user": "https://github.com/simon-king-jena"
}
```

I am bumping it up to "major", since it turns out that zodb screws up refcounts, which makes the debug version of Sage (#13864) fail.



---

archive/issue_comments_106144.json:
```json
{
    "body": "Can we change this ticket and update to zodb3-3.10.5? Namely, in contrast to 3.10.1, version 3.10.5 does fix one of the problems from #13864.",
    "created_at": "2012-12-28T23:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106144",
    "user": "https://github.com/simon-king-jena"
}
```

Can we change this ticket and update to zodb3-3.10.5? Namely, in contrast to 3.10.1, version 3.10.5 does fix one of the problems from #13864.



---

archive/issue_comments_106145.json:
```json
{
    "body": "Replying to [comment:8 SimonKing]:\n> Can we change this ticket and update to zodb3-3.10.5? Namely, in contrast to 3.10.1, version 3.10.5 does fix one of the problems from #13864.\n\n\nWill do. Got an spkg ready here.",
    "created_at": "2012-12-28T23:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106145",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:8 SimonKing]:
> Can we change this ticket and update to zodb3-3.10.5? Namely, in contrast to 3.10.1, version 3.10.5 does fix one of the problems from #13864.


Will do. Got an spkg ready here.



---

archive/issue_comments_106146.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-28T23:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106146",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106147.json:
```json
{
    "body": "For review purposes, I've just taken William's original upgrade to 3.10.1 and dumped 3.10.5 in instead. \nhttp://sage.math.washington.edu/home/wstein/patches/zodb3-3.10.1.spkg\n\nAs it turns out, our present ZODB3 version does not support Python 2.7, so upgrading is very much recommended.",
    "created_at": "2012-12-28T23:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106147",
    "user": "https://github.com/nbruin"
}
```

For review purposes, I've just taken William's original upgrade to 3.10.1 and dumped 3.10.5 in instead. 
http://sage.math.washington.edu/home/wstein/patches/zodb3-3.10.1.spkg

As it turns out, our present ZODB3 version does not support Python 2.7, so upgrading is very much recommended.



---

archive/issue_comments_106148.json:
```json
{
    "body": "Updating could be done but some of us would rather ditch zodb altogether if someone with the know how would work on converting conway polynomial at #12205 which may have been done already and that I missed. See also #10353.",
    "created_at": "2012-12-29T08:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106148",
    "user": "https://github.com/kiwifb"
}
```

Updating could be done but some of us would rather ditch zodb altogether if someone with the know how would work on converting conway polynomial at #12205 which may have been done already and that I missed. See also #10353.



---

archive/issue_comments_106149.json:
```json
{
    "body": "There are some version mismatches, this needs\n\n```\nhttp://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.2.tar.gz\nhttp://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.4.zip\n```",
    "created_at": "2012-12-30T12:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106149",
    "user": "https://github.com/jdemeyer"
}
```

There are some version mismatches, this needs

```
http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.2.tar.gz
http://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.4.zip
```



---

archive/issue_comments_106150.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-12-30T12:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106150",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106151.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-12-30T18:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106151",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106152.json:
```json
{
    "body": "Thanks for catching! spkg updated.",
    "created_at": "2012-12-30T18:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106152",
    "user": "https://github.com/nbruin"
}
```

Thanks for catching! spkg updated.



---

archive/issue_comments_106153.json:
```json
{
    "body": "I cannot install the last version of the spkg (the previous one seemed fine).\nIt fails during the installation of the dependencies:\n* it install transaction 1.1.1,\n* and then fails with zope.interface.",
    "created_at": "2012-12-31T10:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106153",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I cannot install the last version of the spkg (the previous one seemed fine).
It fails during the installation of the dependencies:
* it install transaction 1.1.1,
* and then fails with zope.interface.



---

archive/issue_comments_106154.json:
```json
{
    "body": "And remark that twisted in sagenb spkg will also need zope.interface, so if #10353 gets merged I guess we have to provide it somewhere else than in zodb3 spkg.",
    "created_at": "2012-12-31T11:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106154",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And remark that twisted in sagenb spkg will also need zope.interface, so if #10353 gets merged I guess we have to provide it somewhere else than in zodb3 spkg.



---

archive/issue_comments_106155.json:
```json
{
    "body": "How about \n* zope.interface will be included in the sagenb spkg\n* We fix up the conway polynomials (#12205)\n* The fixed zodb spkg from this ticket will be an optional spkg\n* The zodb spkg will be a dependency for any optional spkg that needs it",
    "created_at": "2013-01-01T11:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106155",
    "user": "https://github.com/vbraun"
}
```

How about 
* zope.interface will be included in the sagenb spkg
* We fix up the conway polynomials (#12205)
* The fixed zodb spkg from this ticket will be an optional spkg
* The zodb spkg will be a dependency for any optional spkg that needs it



---

archive/issue_comments_106156.json:
```json
{
    "body": "Replying to [comment:18 vbraun]:\n> How about \n> * zope.interface will be included in the sagenb spkg\n\n\nWhy should an independent module only be shipped as part of another independent module?\n\nEven if zope.interface was currently only used by sagenb, I'd still think zope.interface should be an separate spkg.\n\n>   * We fix up the conway polynomials (#12205)\n>   * The fixed zodb spkg from this ticket will be an optional spkg\n>   * The zodb spkg will be a dependency for any optional spkg that needs it\n\n\nThat sounds good to me.",
    "created_at": "2013-01-01T11:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106156",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:18 vbraun]:
> How about 
> * zope.interface will be included in the sagenb spkg


Why should an independent module only be shipped as part of another independent module?

Even if zope.interface was currently only used by sagenb, I'd still think zope.interface should be an separate spkg.

>   * We fix up the conway polynomials (#12205)
>   * The fixed zodb spkg from this ticket will be an optional spkg
>   * The zodb spkg will be a dependency for any optional spkg that needs it


That sounds good to me.



---

archive/issue_comments_106157.json:
```json
{
    "body": "The sagenb spkg contains already a dozen of python dependencies:\n\n```\nsagenb-0.10.2/src/Flask-OpenID-1.0.1.tar.gz\nsagenb-0.10.2/src/Werkzeug-0.8.3.tar.gz\nsagenb-0.10.2/src/Flask-AutoIndex-0.4.1.tar.gz\nsagenb-0.10.2/src/Twisted-12.1.0.tar.bz2\nsagenb-0.10.2/src/Babel-0.9.6.zip\nsagenb-0.10.2/src/Flask-Silk-0.1.1.tar.gz\nsagenb-0.10.2/src/pytz-2012d.zip\nsagenb-0.10.2/src/python-openid-2.2.5.zip\nsagenb-0.10.2/src/Flask-Babel-0.8.tar.gz\nsagenb-0.10.2/src/Flask-0.9.tar.gz\nsagenb-0.10.2/src/speaklater-1.3.tar.gz\nsagenb-0.10.2/src/webassets-0.7.1.tar.gz\n```",
    "created_at": "2013-01-01T12:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106157",
    "user": "https://github.com/vbraun"
}
```

The sagenb spkg contains already a dozen of python dependencies:

```
sagenb-0.10.2/src/Flask-OpenID-1.0.1.tar.gz
sagenb-0.10.2/src/Werkzeug-0.8.3.tar.gz
sagenb-0.10.2/src/Flask-AutoIndex-0.4.1.tar.gz
sagenb-0.10.2/src/Twisted-12.1.0.tar.bz2
sagenb-0.10.2/src/Babel-0.9.6.zip
sagenb-0.10.2/src/Flask-Silk-0.1.1.tar.gz
sagenb-0.10.2/src/pytz-2012d.zip
sagenb-0.10.2/src/python-openid-2.2.5.zip
sagenb-0.10.2/src/Flask-Babel-0.8.tar.gz
sagenb-0.10.2/src/Flask-0.9.tar.gz
sagenb-0.10.2/src/speaklater-1.3.tar.gz
sagenb-0.10.2/src/webassets-0.7.1.tar.gz
```



---

archive/issue_comments_106158.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-01T12:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106158",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_106159.json:
```json
{
    "body": "Not sure exactly what changed in the new spkg, but there are still version mismatches:\n\n```\nhttp://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz\nhttp://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.5.tar.gz\n```",
    "created_at": "2013-01-01T12:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106159",
    "user": "https://github.com/jdemeyer"
}
```

Not sure exactly what changed in the new spkg, but there are still version mismatches:

```
http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz
http://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.5.tar.gz
```



---

archive/issue_comments_106160.json:
```json
{
    "body": "Replying to [comment:20 vbraun]:\n> The sagenb spkg contains already a dozen of python dependencies:\n\n\nIs sagenb a system that should be able to run independent of another system, or is sagenb supposed to be installed on top of another system (such as Sage)? In the former case, I could understand why sagenb comes with batteries included. But if sagenb is intended to be a small brick in a large wall, then it seems to me that a small brick shouldn't attempt to contain other small bricks...\n\nBut I am not a software engineer. Anyway, the fact that sagenb contains a lot of dependencies (taking the risk that the same dependency is provided twice, perhaps even in different versions) should not force us to add yet another module to sagenb.",
    "created_at": "2013-01-01T15:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106160",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:20 vbraun]:
> The sagenb spkg contains already a dozen of python dependencies:


Is sagenb a system that should be able to run independent of another system, or is sagenb supposed to be installed on top of another system (such as Sage)? In the former case, I could understand why sagenb comes with batteries included. But if sagenb is intended to be a small brick in a large wall, then it seems to me that a small brick shouldn't attempt to contain other small bricks...

But I am not a software engineer. Anyway, the fact that sagenb contains a lot of dependencies (taking the risk that the same dependency is provided twice, perhaps even in different versions) should not force us to add yet another module to sagenb.



---

archive/issue_comments_106161.json:
```json
{
    "body": "Replying to [comment:22 SimonKing]:\n> Replying to [comment:20 vbraun]:\n> > The sagenb spkg contains already a dozen of python dependencies:\n\n> \n> Is sagenb a system that should be able to run independent of another system?\n\n\nYes, it is supposed to be something that can run without Sage (it is supposed to only require python).   I don't know to what extent that is currently the case.\n\nWilliam",
    "created_at": "2013-01-01T15:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106161",
    "user": "https://github.com/williamstein"
}
```

Replying to [comment:22 SimonKing]:
> Replying to [comment:20 vbraun]:
> > The sagenb spkg contains already a dozen of python dependencies:

> 
> Is sagenb a system that should be able to run independent of another system?


Yes, it is supposed to be something that can run without Sage (it is supposed to only require python).   I don't know to what extent that is currently the case.

William



---

archive/issue_comments_106162.json:
```json
{
    "body": "Replying to [comment:21 jdemeyer]:\n> Not sure exactly what changed in the new spkg, but there are still version mismatches:\n> \n> ```\n> http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz\n> http://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.5.tar.gz\n> ```\n\nThese are different versions than you reported before. I put the files in there you requested last time. \n\n**to any zope version expert**: please put versions in there that make Jeroen happy.",
    "created_at": "2013-01-01T17:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106162",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:21 jdemeyer]:
> Not sure exactly what changed in the new spkg, but there are still version mismatches:
> 
> ```
> http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz
> http://pypi.python.org/packages/source/z/zope.exceptions/zope.exceptions-4.0.5.tar.gz
> ```

These are different versions than you reported before. I put the files in there you requested last time. 

**to any zope version expert**: please put versions in there that make Jeroen happy.



---

archive/issue_comments_106163.json:
```json
{
    "body": "Perhaps the problem is simply the *order* of packages installed. `transaction` is installed before the zope stuff, but `transaction` requires `zope.interface`.",
    "created_at": "2013-01-02T09:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106163",
    "user": "https://github.com/jdemeyer"
}
```

Perhaps the problem is simply the *order* of packages installed. `transaction` is installed before the zope stuff, but `transaction` requires `zope.interface`.



---

archive/issue_comments_106164.json:
```json
{
    "body": "Can somebody actually post a log from a failed install attempt? It works for me. The version mismatches shouldn't matter either, distutils is checking that each package's dependencies are satisfied. You don't need matching versions of all zope* packages (indeed, they are not in sync).\n\nAlso I don't understand what Jeroen posted, the spkg from the ticket issue contains zope.exceptions-4.0.4.zip and zope.interface-4.0.2.tar.gz and not the versions you mention.",
    "created_at": "2013-01-04T11:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106164",
    "user": "https://github.com/vbraun"
}
```

Can somebody actually post a log from a failed install attempt? It works for me. The version mismatches shouldn't matter either, distutils is checking that each package's dependencies are satisfied. You don't need matching versions of all zope* packages (indeed, they are not in sync).

Also I don't understand what Jeroen posted, the spkg from the ticket issue contains zope.exceptions-4.0.4.zip and zope.interface-4.0.2.tar.gz and not the versions you mention.



---

archive/issue_comments_106165.json:
```json
{
    "body": "Replying to [comment:26 vbraun]:\n> Can somebody actually post a log from a failed install attempt? It works for me. The version mismatches shouldn't matter either, distutils is checking that each package's dependencies are satisfied. You don't need matching versions of all zope* packages (indeed, they are not in sync).\n\n\nThe problem is this:\n\n```\nProcessing transaction-1.1.1.tar.gz\nRunning transaction-1.1.1/setup.py -q bdist_egg --dist-dir /tmp/release/easy_install-FMO44V/transaction-1.1.1/egg-dist-tmp-B7YtEa\nAdding transaction 1.1.1 to easy-install.pth file\n\nInstalled /release/merger/sage-5.6.beta2-debug/local/lib/python2.7/site-packages/transaction-1.1.1-py2.7.egg\nProcessing dependencies for transaction==1.1.1\nSearching for zope.interface\nReading http://pypi.python.org/simple/zope.interface/\nBest match: zope.interface 4.0.3\nDownloading http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz#md5=1ddd308f2c83703accd1696158c300eb\nProcessing zope.interface-4.0.3.tar.gz\nRunning zope.interface-4.0.3/setup.py -q bdist_egg --dist-dir /tmp/release/easy_install-86Axhl/zope.interface-4.0.3/egg-dist-tmp-2mKFn_\nAdding zope.interface 4.0.3 to easy-install.pth file\n\nInstalled /release/merger/sage-5.6.beta2-debug/local/lib/python2.7/site-packages/zope.interface-4.0.3-py2.7-linux-x86_64.egg\nFinished processing dependencies for transaction==1.1.1\n```\n\nWhen transaction is installing, zope.interface hasn't been installed yet and must be downloaded from the internet.",
    "created_at": "2013-01-04T11:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106165",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:26 vbraun]:
> Can somebody actually post a log from a failed install attempt? It works for me. The version mismatches shouldn't matter either, distutils is checking that each package's dependencies are satisfied. You don't need matching versions of all zope* packages (indeed, they are not in sync).


The problem is this:

```
Processing transaction-1.1.1.tar.gz
Running transaction-1.1.1/setup.py -q bdist_egg --dist-dir /tmp/release/easy_install-FMO44V/transaction-1.1.1/egg-dist-tmp-B7YtEa
Adding transaction 1.1.1 to easy-install.pth file

Installed /release/merger/sage-5.6.beta2-debug/local/lib/python2.7/site-packages/transaction-1.1.1-py2.7.egg
Processing dependencies for transaction==1.1.1
Searching for zope.interface
Reading http://pypi.python.org/simple/zope.interface/
Best match: zope.interface 4.0.3
Downloading http://pypi.python.org/packages/source/z/zope.interface/zope.interface-4.0.3.tar.gz#md5=1ddd308f2c83703accd1696158c300eb
Processing zope.interface-4.0.3.tar.gz
Running zope.interface-4.0.3/setup.py -q bdist_egg --dist-dir /tmp/release/easy_install-86Axhl/zope.interface-4.0.3/egg-dist-tmp-2mKFn_
Adding zope.interface 4.0.3 to easy-install.pth file

Installed /release/merger/sage-5.6.beta2-debug/local/lib/python2.7/site-packages/zope.interface-4.0.3-py2.7-linux-x86_64.egg
Finished processing dependencies for transaction==1.1.1
```

When transaction is installing, zope.interface hasn't been installed yet and must be downloaded from the internet.



---

archive/issue_comments_106166.json:
```json
{
    "body": "I guess you can indeed easily reproduce that by shutting down your internet connection and making sure no previous installation of zope.interface is available (e.g. do not upgrade the zodb spkg on an existing sage install).",
    "created_at": "2013-01-04T12:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106166",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I guess you can indeed easily reproduce that by shutting down your internet connection and making sure no previous installation of zope.interface is available (e.g. do not upgrade the zodb spkg on an existing sage install).



---

archive/issue_comments_106167.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-01-04T13:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106167",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_106168.json:
```json
{
    "body": "* upgraded to zope.interface-4.0.3\n* using `easy_install --index-url dependencies <package>` to use the tarballs from the dependencies directory\n\nI've built sage-5.6.beta2 from scratch with the new spkg and verified that zodb is not downloading anything (that is, no \"Downloading\" or urls in the spkg log).",
    "created_at": "2013-01-04T13:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106168",
    "user": "https://github.com/vbraun"
}
```

* upgraded to zope.interface-4.0.3
* using `easy_install --index-url dependencies <package>` to use the tarballs from the dependencies directory

I've built sage-5.6.beta2 from scratch with the new spkg and verified that zodb is not downloading anything (that is, no "Downloading" or urls in the spkg log).



---

archive/issue_comments_106169.json:
```json
{
    "body": "Looks good to me (but it's going to be removed anyway, right?)",
    "created_at": "2013-01-07T09:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106169",
    "user": "https://github.com/jdemeyer"
}
```

Looks good to me (but it's going to be removed anyway, right?)



---

archive/issue_comments_106170.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-07T09:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106170",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_106171.json:
```json
{
    "body": "Its probably premature to remove it in sage-5.6, let's first fix the sagenb dependency. I've created https://github.com/sagemath/sagenb/issues/126 to raise awareness on the sagenb side.",
    "created_at": "2013-01-07T11:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106171",
    "user": "https://github.com/vbraun"
}
```

Its probably premature to remove it in sage-5.6, let's first fix the sagenb dependency. I've created https://github.com/sagemath/sagenb/issues/126 to raise awareness on the sagenb side.



---

archive/issue_comments_106172.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-07T20:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106172",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_026620.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:55:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10351#event-26620"
}
```



---

archive/issue_comments_106173.json:
```json
{
    "body": "Just as a point of information, this was indeed added to upstream, see also #10353 where that was confirmed.",
    "created_at": "2015-01-06T14:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10351#issuecomment-106173",
    "user": "https://github.com/kcrisman"
}
```

Just as a point of information, this was indeed added to upstream, see also #10353 where that was confirmed.
