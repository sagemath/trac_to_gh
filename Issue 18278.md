# Issue 18278: LatticePoset: add sublattice()

Issue created by migration from https://trac.sagemath.org/ticket/18515

Original creator: jmantysalo

Original creation time: 2015-05-26 11:05:37

CC:  chapoton ncohen

Add a function to get smallest sublattice of the lattice containing given elements.


---

Comment by jmantysalo created at 2015-05-26 11:40:15

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2015-05-26 11:40:15

Slooow. Better than nothing. Needs review.
----
New commits:


---

Comment by git created at 2015-05-26 11:43:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by deinst created at 2015-05-27 03:40:10

I think there is a typo. I've changed the code to what I think is correct.  The previous code did the following:

```
sage: L = Posets.BooleanLattice(3)
sage: L.sublattice([3,5,6,7])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-14-837853635c8a> in <module>()
----> 1 L.sublattice([Integer(3),Integer(5),Integer(6),Integer(7)])

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in sublattice(self, elms)
    881                     elms.append(m)
    882                     n=True
--> 883         return LatticePoset(self.subposet(elms))
    884 
    885 ############################################################################

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in LatticePoset(data, *args, **options)
    406     P = Poset(data, *args, **options)
    407     if not P.is_lattice():
--> 408         raise ValueError("Not a lattice.")
    409 
    410     return FiniteLatticePoset(P, category = FiniteLatticePosets(), facade = P._is_facade)

ValueError: Not a lattice.
```


Also, could you put whitespace around `=` as suggested by http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style
----
New commits:


---

Comment by deinst created at 2015-05-27 03:44:27

Otherwise it looks good to me.


---

Comment by jmantysalo created at 2015-05-27 05:37:42

Thanks! And yes, there was a stupid typo. I'll try to remember spaces from now on. (A promise I have made before...)

So, who's going to review this?


---

Comment by ncohen created at 2015-05-27 07:52:40

Yo !

I added a commit at `public/18515` which improves the algorithm a bit. In general, try to avoid using 'Subsets' (or any combinat stuff) if you can avoid it: they implement their code to deal with infinitely more abstraction than you usually need (categories, parents, elements, ...). 


```
sage: type(Subsets([1,2,3],2).an_element())
<class 'sage.sets.set.Set_object_enumerated_with_category'>
```


When you only need to enumerate pairs of points, the better is to use itertools:


```
sage: from itertools import combinations
sage: list(combinations([1,2,3],2))
[(1, 2), (1, 3), (2, 3)]
```


Simple, and more efficient.

> So, who's going to review this?

We can review each other's commits, it is not forbidden. For as long as everything is doubled checked, no problem.

Nathann


---

Comment by jmantysalo created at 2015-05-27 09:05:06

Seems good, but of course doesn't make that much difference than totally other algorithm mentioned in the note. I'll check the code of Nathann and then put this to positive review. (Assuming that deinst doesn't do it before that.)


---

Comment by jmantysalo created at 2015-05-27 09:53:30

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2015-05-27 09:53:30

Works.
----
New commits:


---

Comment by ncohen created at 2015-05-27 11:29:34

`;-)`


---

Comment by vbraun created at 2015-05-27 22:09:23

Resolution: fixed
