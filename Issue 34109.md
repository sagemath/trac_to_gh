# Issue 34109: Document new conda packages sagemath-sirocco and sagemath-bliss

Issue created by migration from https://trac.sagemath.org/ticket/34346

Original creator: isuruf

Original creation time: 2022-08-12 01:55:02

CC:  saraedum mkoeppe slelievre fbissey arojas tornaria dimpase

These are the two python extension modules that depend on the optional packages sirocco and bliss.

We should add this info to https://doc.sagemath.org/html/en/installation/conda.html#installing-all-of-sagemath-from-conda-not-for-development


---

Comment by mkoeppe created at 2022-08-12 02:09:09

the Python distribution packages should go to `pkgs/`


---

Comment by mkoeppe created at 2022-10-08 21:55:13

New commits:


---

Comment by git created at 2022-10-09 05:25:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2022-10-09 07:40:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 05:04:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 06:08:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 06:41:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 07:11:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 07:27:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-11-16 08:04:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-11-16 08:09:04

Changing component from documentation to refactoring.


---

Comment by mkoeppe created at 2022-11-16 08:09:04

Changing priority from minor to major.


---

Comment by mkoeppe created at 2022-11-16 08:09:12

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-11-20 22:05:13

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-11-20 23:47:10

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-11-21 03:14:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-11-21 03:15:41

Changing status from needs_work to needs_review.


---

Comment by git created at 2022-11-21 07:53:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-12-05 01:43:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2022-12-08 01:29:14

No tox.ini for these distribution packages?


---

Comment by mkoeppe created at 2022-12-08 01:37:31

Good idea, I'll add them


---

Comment by klee created at 2022-12-08 02:35:48

and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?

```sage
if len(sys.argv) > 1 and (sys.argv[1] == "sdist" or sys.argv[1] == "egg_info"):
    sdist = True
else:
    sdist = False

if sdist:
    cmdclass = {}
else:
    ...
    lines that build source distribution ???
    ...
```


When running

```
    python3 -u setup.py --no-user-cfg sdist --dist-dir "$SAGE_DISTFILES"
```

the "if condition" actually fails so that the sdist is actually built, but this seems just a good luck. Am I reading something wrong?


---

Comment by mkoeppe created at 2022-12-08 04:42:48

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-12-08 04:53:39

Replying to [comment:29 Kwankyu Lee]:
> and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?
> {{{#!sage
> if len(sys.argv) > 1 and (sys.argv[1] == "sdist" or sys.argv[1] == "egg_info"):
>     sdist = True
> [...] 
> When running
> {{{
>     python3 -u setup.py --no-user-cfg sdist --dist-dir "$SAGE_DISTFILES"
> }}}
> the "if condition" actually fails 

Nice catch, indeed this test will go wrong when there are global options.
We have this in many of our `setup.py` scripts. It's only an optimization - avoiding to cythonize when it is unnecessary.


---

Comment by mkoeppe created at 2022-12-18 23:56:11

I'm getting rid of this test where it was copied from in #34858.


---

Comment by git created at 2022-12-19 05:30:26

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2022-12-19 05:49:26

Branch pushed to git repo; I updated commit sha1. New commits:
