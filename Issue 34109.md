# Issue 34109: Document new conda packages sagemath-sirocco and sagemath-bliss

archive/issues_034109.json:
```json
{
    "body": "CC:  saraedum mkoeppe slelievre fbissey arojas tornaria dimpase\n\nThese are the two python extension modules that depend on the optional packages sirocco and bliss.\n\nWe should add this info to https://doc.sagemath.org/html/en/installation/conda.html#installing-all-of-sagemath-from-conda-not-for-development\n\nIssue created by migration from https://trac.sagemath.org/ticket/34346\n\n",
    "created_at": "2022-08-12T01:55:02Z",
    "labels": [
        "documentation",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Document new conda packages sagemath-sirocco and sagemath-bliss",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34109",
    "user": "isuruf"
}
```
CC:  saraedum mkoeppe slelievre fbissey arojas tornaria dimpase

These are the two python extension modules that depend on the optional packages sirocco and bliss.

We should add this info to https://doc.sagemath.org/html/en/installation/conda.html#installing-all-of-sagemath-from-conda-not-for-development

Issue created by migration from https://trac.sagemath.org/ticket/34346





---

archive/issue_comments_483921.json:
```json
{
    "body": "the Python distribution packages should go to `pkgs/`",
    "created_at": "2022-08-12T02:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483921",
    "user": "mkoeppe"
}
```

the Python distribution packages should go to `pkgs/`



---

archive/issue_comments_483922.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-10-08T21:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483922",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_483923.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-10-09T05:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483923",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_483924.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-09T07:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483924",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T05:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483925",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483926.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T06:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483926",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483927.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T06:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483927",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483928.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T07:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483928",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483929.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T07:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483929",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483930.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-16T08:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483930",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483931.json:
```json
{
    "body": "Changing component from documentation to refactoring.",
    "created_at": "2022-11-16T08:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483931",
    "user": "mkoeppe"
}
```

Changing component from documentation to refactoring.



---

archive/issue_comments_483932.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2022-11-16T08:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483932",
    "user": "mkoeppe"
}
```

Changing priority from minor to major.



---

archive/issue_comments_483933.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-11-16T08:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483933",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_483934.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-11-20T22:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483934",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_483935.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-11-20T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483935",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_483936.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-21T03:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483936",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483937.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-11-21T03:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483937",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_483938.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-21T07:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483938",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483939.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-05T01:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483939",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483940.json:
```json
{
    "body": "No tox.ini for these distribution packages?",
    "created_at": "2022-12-08T01:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483940",
    "user": "klee"
}
```

No tox.ini for these distribution packages?



---

archive/issue_comments_483941.json:
```json
{
    "body": "Good idea, I'll add them",
    "created_at": "2022-12-08T01:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483941",
    "user": "mkoeppe"
}
```

Good idea, I'll add them



---

archive/issue_comments_483942.json:
```json
{
    "body": "and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?\n\n```sage\nif len(sys.argv) > 1 and (sys.argv[1] == \"sdist\" or sys.argv[1] == \"egg_info\"):\n    sdist = True\nelse:\n    sdist = False\n\nif sdist:\n    cmdclass = {}\nelse:\n    ...\n    lines that build source distribution ???\n    ...\n```\n\n\nWhen running\n\n```\n    python3 -u setup.py --no-user-cfg sdist --dist-dir \"$SAGE_DISTFILES\"\n```\n\nthe \"if condition\" actually fails so that the sdist is actually built, but this seems just a good luck. Am I reading something wrong?",
    "created_at": "2022-12-08T02:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483942",
    "user": "klee"
}
```

and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?

```sage
if len(sys.argv) > 1 and (sys.argv[1] == "sdist" or sys.argv[1] == "egg_info"):
    sdist = True
else:
    sdist = False

if sdist:
    cmdclass = {}
else:
    ...
    lines that build source distribution ???
    ...
```


When running

```
    python3 -u setup.py --no-user-cfg sdist --dist-dir "$SAGE_DISTFILES"
```

the "if condition" actually fails so that the sdist is actually built, but this seems just a good luck. Am I reading something wrong?



---

archive/issue_comments_483943.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-12-08T04:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483943",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_483944.json:
```json
{
    "body": "Replying to [comment:29 Kwankyu Lee]:\n> and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?\n> {{{#!sage\n> if len(sys.argv) > 1 and (sys.argv[1] == \"sdist\" or sys.argv[1] == \"egg_info\"):\n>     sdist = True\n> [...] \n> When running\n> {{{\n>     python3 -u setup.py --no-user-cfg sdist --dist-dir \"$SAGE_DISTFILES\"\n> }}}\n> the \"if condition\" actually fails \n\nNice catch, indeed this test will go wrong when there are global options.\nWe have this in many of our `setup.py` scripts. It's only an optimization - avoiding to cythonize when it is unnecessary.",
    "created_at": "2022-12-08T04:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483944",
    "user": "mkoeppe"
}
```

Replying to [comment:29 Kwankyu Lee]:
> and these lines (of `pkgs/sagemath-bliss/setup.py` for instance) are right?
> {{{#!sage
> if len(sys.argv) > 1 and (sys.argv[1] == "sdist" or sys.argv[1] == "egg_info"):
>     sdist = True
> [...] 
> When running
> {{{
>     python3 -u setup.py --no-user-cfg sdist --dist-dir "$SAGE_DISTFILES"
> }}}
> the "if condition" actually fails 

Nice catch, indeed this test will go wrong when there are global options.
We have this in many of our `setup.py` scripts. It's only an optimization - avoiding to cythonize when it is unnecessary.



---

archive/issue_comments_483945.json:
```json
{
    "body": "I'm getting rid of this test where it was copied from in #34858.",
    "created_at": "2022-12-18T23:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483945",
    "user": "mkoeppe"
}
```

I'm getting rid of this test where it was copied from in #34858.



---

archive/issue_comments_483946.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2022-12-19T05:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483946",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_483947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-19T05:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34109#issuecomment-483947",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
