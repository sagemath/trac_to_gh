# Issue 25880: Upgrade to sympy 1.2

Issue created by migration from https://trac.sagemath.org/ticket/26117

Original creator: saraedum

Original creation time: 2018-08-24 01:29:19

CC:  arojas @timokau fbissey rws

Sympy 1.2 has been released recently. Let's upgrade.


---

Comment by git created at 2018-08-24 16:02:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-24 16:03:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-08-24 16:04:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-08-24 16:09:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-08-24 16:10:33

Changing status from new to needs_review.


---

Comment by saraedum created at 2018-08-24 16:12:59

Arch Linux ships sympy 1.2 already. arojas, maybe you want to review here?


---

Comment by saraedum created at 2018-08-24 16:14:26

Long tests pass btw.


---

Comment by dimpase created at 2018-08-26 13:10:44

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2018-08-26 13:10:44

LGTM


---

Comment by @timokau created at 2018-08-26 16:44:00

Why isn't `03_undeffun_sage.patch` upstreamed? Is there an upstream PR for that?


---

Comment by @timokau created at 2018-08-26 16:48:06

Found it: https://github.com/sympy/sympy/pull/11858 and https://github.com/sympy/sympy/pull/13476.


---

Comment by vbraun created at 2018-08-30 07:12:39

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2018-08-30 07:12:39


```
Installing collected packages: sympy
  Created temporary directory: /tmp/pip-record-mtnz9f
  Running setup.py install for sympy: started
    Running command /mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/set
up.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no
-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/
local/var/tmp/sage/build/sympy-1.2.p0/inst --compile
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-req-build-6ysf3v/setup.py", line 424, in <module>
        **extra_kwargs
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py", line 130, in setup
        _install_setup_requires(attrs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py", line 119, in _install_setup_requires
        (k, v) for k, v in attrs.items()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/dist.py", line 367, in __init__
        for ep in pkg_resources.iter_entry_points('distutils.setup_keywords'):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 644, in iter_entry_points
        entries = dist.get_entry_map(group)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2711, in get_entry_map
        self._get_metadata('entry_points.txt'), self
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2405, in parse_map
        for group, lines in data:
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 3046, in split_sections
        for line in yield_lines(s):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2265, in yield_lines
        for ss in strs:
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2624, in _get_metadata
        for line in self.get_metadata_lines(name):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1407, in get_metadata_lines
        return yield_lines(self.get_metadata(name))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1403, in get_metadata
        value = self._get(self._fn(self.egg_info, name))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1515, in _get
        with open(path, 'rb') as stream:
    IOError: [Errno 2] No such file or directory: '/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/jupyter_client-5.2.2-py2.7.egg-info/entry_points.txt'
    Running setup.py install for sympy: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-req-build-6ysf3v
Removed build tracker '/tmp/pip-req-tracker-LdRUsc'
Command "/mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile" failed with error code 1 in /tmp/pip-req-build-6ysf3v/
Exception information:
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/basecommand.py", line 141, in main
    status = self.run(options, args)
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/commands/install.py", line 347, in run
    use_user_site=options.use_user_site,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/__init__.py", line 49, in install_given_reqs
    **kwargs
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py", line 972, in install
    spinner=spinner,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py", line 701, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "/mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile" failed with error code 1 in /tmp/pip-req-build-6ysf3v/
Error: installing with pip2 failed
```



---

Comment by dimpase created at 2018-08-30 08:17:31

what OS is this error on?


---

Comment by jdemeyer created at 2018-08-30 08:48:59

vbraun: isn't that just an instance of #26018?


---

Comment by jdemeyer created at 2018-08-30 08:48:59

Changing status from needs_work to positive_review.


---

Comment by dimpase created at 2018-09-15 15:03:12

and meanwhile 1.3 has been released.


---

Comment by vbraun created at 2018-09-16 09:56:56

Resolution: fixed
