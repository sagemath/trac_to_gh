# Issue 25880: Upgrade to sympy 1.2

archive/issues_025880.json:
```json
{
    "body": "CC:  @antonio-rojas @timokau @kiwifb @rwst\n\nSympy 1.2 has been released recently. Let's upgrade.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26117\n\n",
    "created_at": "2018-08-24T01:29:19Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Upgrade to sympy 1.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25880",
    "user": "https://github.com/saraedum"
}
```
CC:  @antonio-rojas @timokau @kiwifb @rwst

Sympy 1.2 has been released recently. Let's upgrade.

Issue created by migration from https://trac.sagemath.org/ticket/26117





---

archive/issue_comments_364900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-24T16:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_364901.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-24T16:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_364902.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-24T16:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_364903.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-08-24T16:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_364904.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-24T16:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364904",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_364905.json:
```json
{
    "body": "Arch Linux ships sympy 1.2 already. arojas, maybe you want to review here?",
    "created_at": "2018-08-24T16:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364905",
    "user": "https://github.com/saraedum"
}
```

Arch Linux ships sympy 1.2 already. arojas, maybe you want to review here?



---

archive/issue_comments_364906.json:
```json
{
    "body": "Long tests pass btw.",
    "created_at": "2018-08-24T16:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364906",
    "user": "https://github.com/saraedum"
}
```

Long tests pass btw.



---

archive/issue_comments_364907.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-26T13:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364907",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_364908.json:
```json
{
    "body": "LGTM",
    "created_at": "2018-08-26T13:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364908",
    "user": "https://github.com/dimpase"
}
```

LGTM



---

archive/issue_comments_364909.json:
```json
{
    "body": "Why isn't `03_undeffun_sage.patch` upstreamed? Is there an upstream PR for that?",
    "created_at": "2018-08-26T16:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364909",
    "user": "https://github.com/timokau"
}
```

Why isn't `03_undeffun_sage.patch` upstreamed? Is there an upstream PR for that?



---

archive/issue_comments_364910.json:
```json
{
    "body": "Found it: https://github.com/sympy/sympy/pull/11858 and https://github.com/sympy/sympy/pull/13476.",
    "created_at": "2018-08-26T16:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364910",
    "user": "https://github.com/timokau"
}
```

Found it: https://github.com/sympy/sympy/pull/11858 and https://github.com/sympy/sympy/pull/13476.



---

archive/issue_comments_364911.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-08-30T07:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364911",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_364912.json:
```json
{
    "body": "```\nInstalling collected packages: sympy\n  Created temporary directory: /tmp/pip-record-mtnz9f\n  Running setup.py install for sympy: started\n    Running command /mnt/disk/home/release/Sage/local/bin/python2 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/set\nup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" --no\n-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/\nlocal/var/tmp/sage/build/sympy-1.2.p0/inst --compile\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-req-build-6ysf3v/setup.py\", line 424, in <module>\n        **extra_kwargs\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py\", line 130, in setup\n        _install_setup_requires(attrs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py\", line 119, in _install_setup_requires\n        (k, v) for k, v in attrs.items()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/dist.py\", line 367, in __init__\n        for ep in pkg_resources.iter_entry_points('distutils.setup_keywords'):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 644, in iter_entry_points\n        entries = dist.get_entry_map(group)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2711, in get_entry_map\n        self._get_metadata('entry_points.txt'), self\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2405, in parse_map\n        for group, lines in data:\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 3046, in split_sections\n        for line in yield_lines(s):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2265, in yield_lines\n        for ss in strs:\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 2624, in _get_metadata\n        for line in self.get_metadata_lines(name):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1407, in get_metadata_lines\n        return yield_lines(self.get_metadata(name))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1403, in get_metadata\n        value = self._get(self._fn(self.egg_info, name))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py\", line 1515, in _get\n        with open(path, 'rb') as stream:\n    IOError: [Errno 2] No such file or directory: '/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/jupyter_client-5.2.2-py2.7.egg-info/entry_points.txt'\n    Running setup.py install for sympy: finished with status 'error'\nCleaning up...\n  Removing source in /tmp/pip-req-build-6ysf3v\nRemoved build tracker '/tmp/pip-req-tracker-LdRUsc'\nCommand \"/mnt/disk/home/release/Sage/local/bin/python2 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile\" failed with error code 1 in /tmp/pip-req-build-6ysf3v/\nException information:\nTraceback (most recent call last):\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/basecommand.py\", line 141, in main\n    status = self.run(options, args)\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/commands/install.py\", line 347, in run\n    use_user_site=options.use_user_site,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/__init__.py\", line 49, in install_given_reqs\n    **kwargs\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py\", line 972, in install\n    spinner=spinner,\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py\", line 701, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\nInstallationError: Command \"/mnt/disk/home/release/Sage/local/bin/python2 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile\" failed with error code 1 in /tmp/pip-req-build-6ysf3v/\nError: installing with pip2 failed\n```",
    "created_at": "2018-08-30T07:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364912",
    "user": "https://github.com/vbraun"
}
```

```
Installing collected packages: sympy
  Created temporary directory: /tmp/pip-record-mtnz9f
  Running setup.py install for sympy: started
    Running command /mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/set
up.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no
-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/
local/var/tmp/sage/build/sympy-1.2.p0/inst --compile
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-req-build-6ysf3v/setup.py", line 424, in <module>
        **extra_kwargs
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py", line 130, in setup
        _install_setup_requires(attrs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/__init__.py", line 119, in _install_setup_requires
        (k, v) for k, v in attrs.items()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/setuptools/dist.py", line 367, in __init__
        for ep in pkg_resources.iter_entry_points('distutils.setup_keywords'):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 644, in iter_entry_points
        entries = dist.get_entry_map(group)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2711, in get_entry_map
        self._get_metadata('entry_points.txt'), self
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2405, in parse_map
        for group, lines in data:
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 3046, in split_sections
        for line in yield_lines(s):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2265, in yield_lines
        for ss in strs:
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 2624, in _get_metadata
        for line in self.get_metadata_lines(name):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1407, in get_metadata_lines
        return yield_lines(self.get_metadata(name))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1403, in get_metadata
        value = self._get(self._fn(self.egg_info, name))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pkg_resources/__init__.py", line 1515, in _get
        with open(path, 'rb') as stream:
    IOError: [Errno 2] No such file or directory: '/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/jupyter_client-5.2.2-py2.7.egg-info/entry_points.txt'
    Running setup.py install for sympy: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-req-build-6ysf3v
Removed build tracker '/tmp/pip-req-tracker-LdRUsc'
Command "/mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile" failed with error code 1 in /tmp/pip-req-build-6ysf3v/
Exception information:
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/basecommand.py", line 141, in main
    status = self.run(options, args)
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/commands/install.py", line 347, in run
    use_user_site=options.use_user_site,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/__init__.py", line 49, in install_given_reqs
    **kwargs
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py", line 972, in install
    spinner=spinner,
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py", line 701, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "/mnt/disk/home/release/Sage/local/bin/python2 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-6ysf3v/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))" --no-user-cfg install --record /tmp/pip-record-mtnz9f/install-record.txt --single-version-externally-managed --root /mnt/disk/home/release/Sage/local/var/tmp/sage/build/sympy-1.2.p0/inst --compile" failed with error code 1 in /tmp/pip-req-build-6ysf3v/
Error: installing with pip2 failed
```



---

archive/issue_comments_364913.json:
```json
{
    "body": "what OS is this error on?",
    "created_at": "2018-08-30T08:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364913",
    "user": "https://github.com/dimpase"
}
```

what OS is this error on?



---

archive/issue_comments_364914.json:
```json
{
    "body": "vbraun: isn't that just an instance of #26018?",
    "created_at": "2018-08-30T08:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364914",
    "user": "https://github.com/jdemeyer"
}
```

vbraun: isn't that just an instance of #26018?



---

archive/issue_comments_364915.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-08-30T08:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364915",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_364916.json:
```json
{
    "body": "and meanwhile 1.3 has been released.",
    "created_at": "2018-09-15T15:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364916",
    "user": "https://github.com/dimpase"
}
```

and meanwhile 1.3 has been released.



---

archive/issue_events_065151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-16T09:56:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25880#event-65151"
}
```



---

archive/issue_comments_364917.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-16T09:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25880#issuecomment-364917",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
