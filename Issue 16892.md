# Issue 16892: Posets constructor does not check argument

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2014-10-10 06:02:51

CC:  ncohen


```
sage: P=Posets("cat-says-meow"); P
Posets containing cat-says-meow vertices
sage: P[42]
?`@`ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
```




---

Comment by jmantysalo created at 2014-10-21 19:27:10

Is there some reason for _not_ to check arguments on other functions? For example


```
Posets.RestrictedIntegerPartitions('cat-says-meow')
Posets.SymmetricGroupBruhatIntervalPoset('cat-says-meow', 42)
Posets.BooleanLattice('cat-says-meow')
```


will all give exception, but they output


```
ValueError: n must be an integer or be equal to one of None, NN,
NonNegativeIntegers()

ValueError: invalid literal for int() with base 10: ''

TypeError: unsupported operand type(s) for ** or pow(): 'int' and 'str'
```


Is right check just `if not n in ZZ: raise...`?


---

Comment by ncohen created at 2014-10-22 09:25:58

Well, as long as an exception is raised I do not mind much, personally. Though you can add an explicit check if it helps you sleep better `:-P`

Nathann


---

Comment by jmantysalo created at 2014-10-30 10:28:43

Changing priority from trivial to minor.


---

Comment by jmantysalo created at 2014-10-30 10:28:43

`BooleanLattice(1)` return 1-element lattice, not 2-element. Hence I raise this from trivial level to minor. (And write this comment as a note to myself.)


---

Comment by jmantysalo created at 2014-11-03 14:04:49

I copied the check from `RandomPoset`.
----
New commits:


---

Comment by jmantysalo created at 2014-11-03 14:04:49

Changing status from new to needs_review.


---

Comment by ncohen created at 2014-11-03 21:09:29

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2014-11-03 21:09:29

Hello!

It looks good but you should check the doctests. There are errors when you run them in the poset folder.

Nathann


---

Comment by jmantysalo created at 2014-11-04 09:10:59

Replying to [comment:7 ncohen]:

> It looks good but you should check the doctests. There are errors when you run them in the poset folder.

I do not understand. It says `Got: <BLANKLINE>`. Only change I did was changing "numbers" to "Numbers" in phrase "number of elements must be non-negative - -" at `RandomPoset()`. Of course I should have changed doctest also. But where does this blankline comes?


---

Comment by ncohen created at 2014-11-04 09:22:22

Yo !

> I do not understand. It says `Got: <BLANKLINE>`. Only change I did was changing "numbers" to "Numbers" in phrase "number of elements must be non-negative - -" at `RandomPoset()`. Of course I should have changed doctest also. But where does this blankline comes?

The blankline is a bluff. You did not only change the `n->N` but also the final '.'.

Sphinx is not the kind of software that you can trust to give meaningful error messages `^^;`

Nathann


---

Comment by git created at 2014-11-04 09:30:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2014-11-04 09:31:45

Replying to [comment:9 ncohen]:

> Sphinx is not the kind of software that you can trust to give meaningful error messages `^^;`

Grrrr....

Thanks, corrected this, also added another dots.


---

Comment by ncohen created at 2014-11-04 09:37:26

> Thanks, corrected this, also added another dots.

Okay ! I will run all of Sage's doctests because the Poset code is called in weird places, then will switch change the ticket's status.

Nathann


---

Comment by ncohen created at 2014-11-04 10:21:12

Changing status from needs_work to positive_review.


---

Comment by ncohen created at 2014-11-04 10:21:12

Done, and no problem !

Nathann


---

Comment by vbraun created at 2014-11-06 12:26:10

Python style for exeption messages is incomplete sentences. In particular, no capitalization of the first word and no period at the end. E.g.

```
$ python
Python 2.7.8 (default, Oct 27 2014, 15:54:28) 
[GCC 4.9.1 20140930 (Red Hat 4.9.1-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 1 + '2'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'int' and 'str'
```

This ticket makes it worse in many places.


---

Comment by vbraun created at 2014-11-06 12:26:10

Changing status from positive_review to needs_work.


---

Comment by git created at 2014-11-06 20:41:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2014-11-06 20:42:58

Replying to [comment:14 vbraun]:
> Python style for exeption messages is incomplete sentences.

OK. Corrected.


---

Comment by jmantysalo created at 2014-11-06 20:42:58

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2014-11-08 13:25:47

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-11-08 13:25:47

Tests pass !

(sorry for the incompatible writing styles...)

Nathann


---

Comment by vbraun created at 2014-11-15 16:19:17

Resolution: fixed
