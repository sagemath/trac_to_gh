# Issue 16705: Construct isogenies graph in elliptic curves

archive/issues_016705.json:
```json
{
    "body": "CC:  @defeo @JohnCremona jpflori\n\nLet E be an EllipticCurve.  \n\nWe can not yet construct the graph of the j-invariants of the curves which are isogenous to E. This ticket fills this little gap.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16942\n\n",
    "created_at": "2014-09-07T02:50:10Z",
    "labels": [
        "component: elliptic curves"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Construct isogenies graph in elliptic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16705",
    "user": "https://trac.sagemath.org/admin/accounts/users/sbesnier"
}
```
CC:  @defeo @JohnCremona jpflori

Let E be an EllipticCurve.  

We can not yet construct the graph of the j-invariants of the curves which are isogenous to E. This ticket fills this little gap.

Issue created by migration from https://trac.sagemath.org/ticket/16942





---

archive/issue_comments_220525.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-09-07T02:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220525",
    "user": "https://trac.sagemath.org/admin/accounts/users/sbesnier"
}
```

New commits:



---

archive/issue_comments_220526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-07T02:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220527.json:
```json
{
    "body": "I have made a cosmetic cleanup of the branch.\n\nBut it does not work, test do not pass for me. The doc should say (and the tests should also care) that this is optional, because requiring a database.\n\n---\nNew commits:",
    "created_at": "2014-09-08T18:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220527",
    "user": "https://github.com/fchapoton"
}
```

I have made a cosmetic cleanup of the branch.

But it does not work, test do not pass for me. The doc should say (and the tests should also care) that this is optional, because requiring a database.

---
New commits:



---

archive/issue_comments_220528.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-05T21:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220529.json:
```json
{
    "body": "Do you want to put this in the state \"needs review\" ?",
    "created_at": "2014-10-09T19:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220529",
    "user": "https://github.com/fchapoton"
}
```

Do you want to put this in the state "needs review" ?



---

archive/issue_comments_220530.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-09T19:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220530",
    "user": "https://trac.sagemath.org/admin/accounts/users/sbesnier"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_220531.json:
```json
{
    "body": "I thought I did it... Thank you.",
    "created_at": "2014-10-09T19:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220531",
    "user": "https://trac.sagemath.org/admin/accounts/users/sbesnier"
}
```

I thought I did it... Thank you.



---

archive/issue_comments_220532.json:
```json
{
    "body": "It seems that `db_modular_polynomials` is not available using\n `sage -i db_modular_polynomials`\n\nI think it would be good to explain how to install this database in the doc, if there is some other way.\n\nAnd `AttributeError` should be `ValueError` instead.\n\nAnd `.. note::` should be `.. NOTE::`",
    "created_at": "2014-11-05T20:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220532",
    "user": "https://github.com/fchapoton"
}
```

It seems that `db_modular_polynomials` is not available using
 `sage -i db_modular_polynomials`

I think it would be good to explain how to install this database in the doc, if there is some other way.

And `AttributeError` should be `ValueError` instead.

And `.. note::` should be `.. NOTE::`



---

archive/issue_comments_220533.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-11-05T20:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220533",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_220534.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-28T20:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_049427.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-24T07:28:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16705#event-49427"
}
```



---

archive/issue_comments_220535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-24T07:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220536.json:
```json
{
    "body": "This now does no longer depends on any database.",
    "created_at": "2015-07-24T07:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220536",
    "user": "https://github.com/fchapoton"
}
```

This now does no longer depends on any database.



---

archive/issue_comments_220537.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-07-24T07:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220537",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_220538.json:
```json
{
    "body": "Should the method perhaps be renamed `isogeny_graph()`?  I think \"isogeny graph\" is much more widely used than \"isogenies graph\" (and Google agrees).",
    "created_at": "2015-07-24T08:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220538",
    "user": "https://github.com/pjbruin"
}
```

Should the method perhaps be renamed `isogeny_graph()`?  I think "isogeny graph" is much more widely used than "isogenies graph" (and Google agrees).



---

archive/issue_comments_220539.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-24T08:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220540.json:
```json
{
    "body": "I did not understand the purpose of this ticket from its description, but I do now that I read the code.  For elliptic curves over Q and other number fields we have a class for isogeny classes, which has (amongst other methods) a method for displaying the graph.  So I wonder whether it might be possible to put this new code under the same umbrella.  But that would be more work, so I do not want to delay this.\n\nCertainly \"isogeny graph\" is a better term.",
    "created_at": "2015-07-24T08:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220540",
    "user": "https://github.com/JohnCremona"
}
```

I did not understand the purpose of this ticket from its description, but I do now that I read the code.  For elliptic curves over Q and other number fields we have a class for isogeny classes, which has (amongst other methods) a method for displaying the graph.  So I wonder whether it might be possible to put this new code under the same umbrella.  But that would be more work, so I do not want to delay this.

Certainly "isogeny graph" is a better term.



---

archive/issue_comments_220541.json:
```json
{
    "body": "I don't have time to really review this now (last working day before my holidays), but why does this return a directed graph?  If there is an isogeny in one direction, there always is the dual isogeny in the opposite direction.",
    "created_at": "2015-07-24T08:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220541",
    "user": "https://github.com/pjbruin"
}
```

I don't have time to really review this now (last working day before my holidays), but why does this return a directed graph?  If there is an isogeny in one direction, there always is the dual isogeny in the opposite direction.



---

archive/issue_comments_220542.json:
```json
{
    "body": "Good point.  And the behaviour for \"l = characteristic\" should be documented;  probably not allowed?\n\nUsing the modular polynomial is one way to do it.  You could also make use of the existing method E.isogenies_prime_degree().  But in fact as it stands this function is not a method of elliptic curves at all, the input is really just and element j of a finite field.  So surely there could be a separate function (not a class method) with input an element of F_q and a prime l, and output a graph on some subset of Fq, and then the elliptic curve class method would call that on its j-invariant.",
    "created_at": "2015-07-24T08:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220542",
    "user": "https://github.com/JohnCremona"
}
```

Good point.  And the behaviour for "l = characteristic" should be documented;  probably not allowed?

Using the modular polynomial is one way to do it.  You could also make use of the existing method E.isogenies_prime_degree().  But in fact as it stands this function is not a method of elliptic curves at all, the input is really just and element j of a finite field.  So surely there could be a separate function (not a class method) with input an element of F_q and a prime l, and output a graph on some subset of Fq, and then the elliptic curve class method would call that on its j-invariant.



---

archive/issue_comments_220543.json:
```json
{
    "body": "Replying to [comment:16 cremona]:\n> Using the modular polynomial is one way to do it.  You could also make use of the existing method E.isogenies_prime_degree().  But in fact as it stands this function is not a method of elliptic curves at all, the input is really just and element j of a finite field.  So surely there could be a separate function (not a class method) with input an element of F_q and a prime l, and output a graph on some subset of Fq, and then the elliptic curve class method would call that on its j-invariant.\n\nActually, the method should perhaps even (optionally?) return the graph of actual elliptic curves instead of the graph of *j*-invariants.  It is likely that the user will want to know exactly which curves over the base field appear in the isogeny graph; if you just have the *j*-invariants, you only know them up to twist.",
    "created_at": "2015-07-24T08:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220543",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:16 cremona]:
> Using the modular polynomial is one way to do it.  You could also make use of the existing method E.isogenies_prime_degree().  But in fact as it stands this function is not a method of elliptic curves at all, the input is really just and element j of a finite field.  So surely there could be a separate function (not a class method) with input an element of F_q and a prime l, and output a graph on some subset of Fq, and then the elliptic curve class method would call that on its j-invariant.

Actually, the method should perhaps even (optionally?) return the graph of actual elliptic curves instead of the graph of *j*-invariants.  It is likely that the user will want to know exactly which curves over the base field appear in the isogeny graph; if you just have the *j*-invariants, you only know them up to twist.



---

archive/issue_comments_220544.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-24T09:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_049428.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:38:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16705#event-49428"
}
```



---

archive/issue_events_049429.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:38:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16705#event-49429"
}
```



---

archive/issue_events_049430.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T14:45:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16705#event-49430"
}
```



---

archive/issue_events_049431.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T14:45:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16705#event-49431"
}
```



---

archive/issue_comments_220545.json:
```json
{
    "body": "I am not really the man to give a positive review, given that I am not an expert.\n\nThere seems to remain an issue about directed graph versus undirected graph..",
    "created_at": "2015-11-10T14:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220545",
    "user": "https://github.com/fchapoton"
}
```

I am not really the man to give a positive review, given that I am not an expert.

There seems to remain an issue about directed graph versus undirected graph..



---

archive/issue_comments_220546.json:
```json
{
    "body": "Replying to [comment:20 chapoton]:\n> There seems to remain an issue about directed graph versus undirected graph..\n\nYes, and it should also be possible to get the actual elliptic curves in the isogeny class, not just their *j*-invariants (see comment:17).  It would probably be a good idea to look at the method `EllipticCurve_rational_field.isogeny_graph()` and try to keep the interface consistent with that.",
    "created_at": "2015-11-11T08:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220546",
    "user": "https://github.com/pjbruin"
}
```

Replying to [comment:20 chapoton]:
> There seems to remain an issue about directed graph versus undirected graph..

Yes, and it should also be possible to get the actual elliptic curves in the isogeny class, not just their *j*-invariants (see comment:17).  It would probably be a good idea to look at the method `EllipticCurve_rational_field.isogeny_graph()` and try to keep the interface consistent with that.



---

archive/issue_comments_220547.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-11T08:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220547",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_220548.json:
```json
{
    "body": "Replying to [comment:21 pbruin]:\n> Replying to [comment:20 chapoton]:\n> > There seems to remain an issue about directed graph versus undirected graph..\n\n> Yes, and it should also be possible to get the actual elliptic curves in the isogeny class, not just their *j*-invariants (see comment:17).  It would probably be a good idea to look at the method `EllipticCurve_rational_field.isogeny_graph()` and try to keep the interface consistent with that.\n\nAgreed.  There will be differences:  over number fields isogeny classes are finite;  in non-CM cases there is a unique degree of cyclic isogeny between any 2 curves in the class, and the graph we draw uses only those of prime degree which is enough to connect the graph.  In CM cases, the situation is very similar to ordinary e.c. over finite fields: isogenies come in 2 types, \"horizontal\" (between curves whose endomorphism rings are the same order), and \"vertical\" (between curves whose endo rings are different orders in the same imaginary quadratic field).  Vertical isogenies are as before, with a unique cyclic degree;  but the horizontal ones do not have unique degrees, in the sense that if two curves hace CM by the same imaginary quadratic order, of discriminant D say, then the set of degrees of isogenies between them is the set of positive integers represented by some binary quadratic form of discriminant D.  I toyed with the idea of using the quadratic form as a label for the edges in this case, but in the end went for the smallest prime represented by the form.\n\nOver a finite field, in the ordinary case,the curves in an isogeny class all have the same number of points and their endo rings are all orders in the same i.q.field,  and one can again distinguish between horizontal and vertical isogenies.  The graph is usually referred to as a \"volcano\" on account of its shape, where \"vertical\" and \"horizontal\" now have physical meaning.  If coders are up to the challenge we could have some spectacular isogeny graphs!  but getting the layout to look good would be a challenge.\n\nAnd then there are supersingular curves.  Here, for any two isogenous curves, all but finitely many positive integers arise as isogeny degrees between them (see the last chapter of Kohel's thesis), and I don't see any reason for not just showing a complete graph.",
    "created_at": "2015-11-11T14:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220548",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:21 pbruin]:
> Replying to [comment:20 chapoton]:
> > There seems to remain an issue about directed graph versus undirected graph..

> Yes, and it should also be possible to get the actual elliptic curves in the isogeny class, not just their *j*-invariants (see comment:17).  It would probably be a good idea to look at the method `EllipticCurve_rational_field.isogeny_graph()` and try to keep the interface consistent with that.

Agreed.  There will be differences:  over number fields isogeny classes are finite;  in non-CM cases there is a unique degree of cyclic isogeny between any 2 curves in the class, and the graph we draw uses only those of prime degree which is enough to connect the graph.  In CM cases, the situation is very similar to ordinary e.c. over finite fields: isogenies come in 2 types, "horizontal" (between curves whose endomorphism rings are the same order), and "vertical" (between curves whose endo rings are different orders in the same imaginary quadratic field).  Vertical isogenies are as before, with a unique cyclic degree;  but the horizontal ones do not have unique degrees, in the sense that if two curves hace CM by the same imaginary quadratic order, of discriminant D say, then the set of degrees of isogenies between them is the set of positive integers represented by some binary quadratic form of discriminant D.  I toyed with the idea of using the quadratic form as a label for the edges in this case, but in the end went for the smallest prime represented by the form.

Over a finite field, in the ordinary case,the curves in an isogeny class all have the same number of points and their endo rings are all orders in the same i.q.field,  and one can again distinguish between horizontal and vertical isogenies.  The graph is usually referred to as a "volcano" on account of its shape, where "vertical" and "horizontal" now have physical meaning.  If coders are up to the challenge we could have some spectacular isogeny graphs!  but getting the layout to look good would be a challenge.

And then there are supersingular curves.  Here, for any two isogenous curves, all but finitely many positive integers arise as isogeny degrees between them (see the last chapter of Kohel's thesis), and I don't see any reason for not just showing a complete graph.



---

archive/issue_comments_220549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-26T16:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220550.json:
```json
{
    "body": "Hello. Thanks `@`chapoton for taking the time to rebase this.\n\nBut, honestly, shouldn't we say this code is not going to be merged?\n\nI am sure there is a lot of interest right now in isogeny graphs over finite fields (because post-quantum crypto, you know), and it would be good if Sage offered some functionality. However this code hardly covers all interesting cases, and it has design issues.\n\nIf we could agree on the correct API, I'd be happy to rewrite the code. Let me summarize the issues:\n\n- A function on Fq which outputs a graph labeled by j-invariants, VS a function on elliptic curves which outputs a graph labeled by curves. My opinion is that both are useful, so we could implement both.\n\n- Undirected VS directed graph. The problem is that, although generically these graphs are simple undirected graphs, there are lots of pathological cases:\n  - Self-loops,\n  - multi-edges,\n  - j-invariants 0 and 1728 are especially nasty (same dual for many isogenies).\n\n- The method: modular polynomials VS `isogenies_prime_degree()`. As far as I recall, `isogenies_prime_degree()` factors the division polynomial. It is more expensive, but it requires no optional database (and can in principle cover any degree, although it becomes unrealistic when degrees get large).\n\nLet me add one more issue: fool-proofness. The size of these graphs is polynomial in the field **SIZE**! I'm sure a lot of beginners would create a cyptographic-size finite field and then ask for an isogeny graph. This would of course take forever. Maybe we could print a warning when the expected size is too large.\n\n`@`cremona, `@`pbruin, comments?",
    "created_at": "2017-09-04T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220550",
    "user": "https://github.com/defeo"
}
```

Hello. Thanks `@`chapoton for taking the time to rebase this.

But, honestly, shouldn't we say this code is not going to be merged?

I am sure there is a lot of interest right now in isogeny graphs over finite fields (because post-quantum crypto, you know), and it would be good if Sage offered some functionality. However this code hardly covers all interesting cases, and it has design issues.

If we could agree on the correct API, I'd be happy to rewrite the code. Let me summarize the issues:

- A function on Fq which outputs a graph labeled by j-invariants, VS a function on elliptic curves which outputs a graph labeled by curves. My opinion is that both are useful, so we could implement both.

- Undirected VS directed graph. The problem is that, although generically these graphs are simple undirected graphs, there are lots of pathological cases:
  - Self-loops,
  - multi-edges,
  - j-invariants 0 and 1728 are especially nasty (same dual for many isogenies).

- The method: modular polynomials VS `isogenies_prime_degree()`. As far as I recall, `isogenies_prime_degree()` factors the division polynomial. It is more expensive, but it requires no optional database (and can in principle cover any degree, although it becomes unrealistic when degrees get large).

Let me add one more issue: fool-proofness. The size of these graphs is polynomial in the field **SIZE**! I'm sure a lot of beginners would create a cyptographic-size finite field and then ask for an isogeny graph. This would of course take forever. Maybe we could print a warning when the expected size is too large.

`@`cremona, `@`pbruin, comments?



---

archive/issue_comments_220551.json:
```json
{
    "body": "See my comments on #30199.",
    "created_at": "2020-12-16T11:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220551",
    "user": "https://github.com/JohnCremona"
}
```

See my comments on #30199.



---

archive/issue_comments_220552.json:
```json
{
    "body": "By the way, Sage's optional database of David Kohel's modular polynomials is tiny.  Andrew Sutherland has a very much larger database.",
    "created_at": "2020-12-16T12:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220552",
    "user": "https://github.com/JohnCremona"
}
```

By the way, Sage's optional database of David Kohel's modular polynomials is tiny.  Andrew Sutherland has a very much larger database.



---

archive/issue_comments_220553.json:
```json
{
    "body": "Maybe we can close this ticket, now that #30199 is going to get in?\n\nRe the modular polynomial database, yes, I had been toying with repackaging it for a while. I hope to be able to finish that work some day...\n\nMaybe it would be good to create a meta-ticket summarizing all wanted functionality regarding isogeny classes and graphs? I can do that if you like.",
    "created_at": "2020-12-16T13:28:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16705",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16705#issuecomment-220553",
    "user": "https://github.com/defeo"
}
```

Maybe we can close this ticket, now that #30199 is going to get in?

Re the modular polynomial database, yes, I had been toying with repackaging it for a while. I hope to be able to finish that work some day...

Maybe it would be good to create a meta-ticket summarizing all wanted functionality regarding isogeny classes and graphs? I can do that if you like.
