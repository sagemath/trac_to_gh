# Issue 14506: Update boehm_gc to 7.2d

archive/issues_014506.json:
```json
{
    "body": "Assignee: jdemeyer\n\nCC:  kcrisman dimpase jdemeyer tscrim\n\nWe are currently packaging some alpha version.\n\nMoreover it would be a good time to:\n* cleanup the spkg scripts,\n* add a patch from Cygwin folks to build on Cygwin64 (see [ftp://cygwin.com/pub/cygwin/64bit/release/libgc/libgc-7.2d-2-src.tar.bz2 source package]),\n* remove the Cygwin threads workaround (I don't need it to build on Cygwin64, did not test Cygwin, it seems though threaded libgc might be harmful on Cygwin but it was not the reason of the workaround which was only set up to let libgc build).\n\nIssue created by migration from https://trac.sagemath.org/ticket/14710\n\n",
    "created_at": "2013-06-10T08:39:47Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "Update boehm_gc to 7.2d",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14506",
    "user": "jpflori"
}
```
Assignee: jdemeyer

CC:  kcrisman dimpase jdemeyer tscrim

We are currently packaging some alpha version.

Moreover it would be a good time to:
* cleanup the spkg scripts,
* add a patch from Cygwin folks to build on Cygwin64 (see [ftp://cygwin.com/pub/cygwin/64bit/release/libgc/libgc-7.2d-2-src.tar.bz2 source package]),
* remove the Cygwin threads workaround (I don't need it to build on Cygwin64, did not test Cygwin, it seems though threaded libgc might be harmful on Cygwin but it was not the reason of the workaround which was only set up to let libgc build).

Issue created by migration from https://trac.sagemath.org/ticket/14710





---

archive/issue_comments_183806.json:
```json
{
    "body": "Changing keywords from \"\" to \"spkg boehm_gc\".",
    "created_at": "2013-06-11T21:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183806",
    "user": "jpflori"
}
```

Changing keywords from "" to "spkg boehm_gc".



---

archive/issue_comments_183807.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-11T21:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183807",
    "user": "jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_183808.json:
```json
{
    "body": "I've removed the two OS X patches (needed before on OS X 10.7) as it seems the relevant part is now upstream.\nThis needs testing.\n\nAdded a patch for Cygwin64, works ok.\n\nAlso removed the thread hack, it builds without it, not sure it can break something further.",
    "created_at": "2013-06-11T21:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183808",
    "user": "jpflori"
}
```

I've removed the two OS X patches (needed before on OS X 10.7) as it seems the relevant part is now upstream.
This needs testing.

Added a patch for Cygwin64, works ok.

Also removed the thread hack, it builds without it, not sure it can break something further.



---

archive/issue_comments_183809.json:
```json
{
    "body": "Why the dependency on #14715?",
    "created_at": "2013-06-12T07:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183809",
    "user": "jdemeyer"
}
```

Why the dependency on #14715?



---

archive/issue_comments_183810.json:
```json
{
    "body": "Because I removed some RM related stuff.",
    "created_at": "2013-06-12T18:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183810",
    "user": "jpflori"
}
```

Because I removed some RM related stuff.



---

archive/issue_comments_183811.json:
```json
{
    "body": "Replying to [comment:4 jpflori]:\n> Because I removed some RM related stuff.\nWhich is related to this ticket because ............. ?",
    "created_at": "2013-06-13T06:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183811",
    "user": "jdemeyer"
}
```

Replying to [comment:4 jpflori]:
> Because I removed some RM related stuff.
Which is related to this ticket because ............. ?



---

archive/issue_comments_183812.json:
```json
{
    "body": "Because it was needed to upgrade from Sage <= 4.7.",
    "created_at": "2013-06-13T14:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183812",
    "user": "jpflori"
}
```

Because it was needed to upgrade from Sage <= 4.7.



---

archive/issue_comments_183813.json:
```json
{
    "body": "Not anymore, the `RM` which is deleted in #14715 makes sure upgrades from older versions work. The `unset RM` in `boehm_gc` and the `RM` stuff in `spkg/install` have the same purpose.",
    "created_at": "2013-06-13T15:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183813",
    "user": "jdemeyer"
}
```

Not anymore, the `RM` which is deleted in #14715 makes sure upgrades from older versions work. The `unset RM` in `boehm_gc` and the `RM` stuff in `spkg/install` have the same purpose.



---

archive/issue_comments_183814.json:
```json
{
    "body": "Anyone for this simple update?\n\nIt's basically updating boehm_gc to a stable version, removing patches which went upstream and adding a ptach from the cygwin folk.",
    "created_at": "2013-09-05T12:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183814",
    "user": "jpflori"
}
```

Anyone for this simple update?

It's basically updating boehm_gc to a stable version, removing patches which went upstream and adding a ptach from the cygwin folk.



---

archive/issue_comments_183815.json:
```json
{
    "body": "looks good, but I can't test on Cygwin presently.",
    "created_at": "2013-10-16T12:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183815",
    "user": "dimpase"
}
```

looks good, but I can't test on Cygwin presently.



---

archive/issue_comments_183816.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-16T12:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183816",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_183817.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-10-16T20:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183817",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_183818.json:
```json
{
    "body": "What's your justification for\n\n```\npatch -p1 <\"$patch\" || continue\n```\n\n(especially the `continue` in `spkg-install`)?\n\nAlso, Reviewer should be filled in.",
    "created_at": "2013-10-16T20:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183818",
    "user": "jdemeyer"
}
```

What's your justification for

```
patch -p1 <"$patch" || continue
```

(especially the `continue` in `spkg-install`)?

Also, Reviewer should be filled in.



---

archive/issue_comments_183819.json:
```json
{
    "body": "None the continue is wrong, I wanted something like [ -r $patch ] || continue I guess.\n\nThe -p0 to -p1 is just because the cd src moved because I wanted the script to look more like other scriptS.",
    "created_at": "2013-10-16T20:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183819",
    "user": "jpflori"
}
```

None the continue is wrong, I wanted something like [ -r $patch ] || continue I guess.

The -p0 to -p1 is just because the cd src moved because I wanted the script to look more like other scriptS.



---

archive/issue_comments_183820.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2013-10-16T20:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183820",
    "user": "jpflori"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_183821.json:
```json
{
    "body": "I indeed screwed up between testing the spkg on cygwin and packqging it later...\nShould be ok now.",
    "created_at": "2013-10-16T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183821",
    "user": "jpflori"
}
```

I indeed screwed up between testing the spkg on cygwin and packqging it later...
Should be ok now.



---

archive/issue_comments_183822.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-10-16T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183822",
    "user": "jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_183823.json:
```json
{
    "body": "Spkg diff, for review only.",
    "created_at": "2013-10-16T21:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183823",
    "user": "jpflori"
}
```

Spkg diff, for review only.



---

archive/issue_comments_183824.json:
```json
{
    "body": "Attachment\n\nOK, looks that things are fixed, and work, too.",
    "created_at": "2013-10-28T22:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183824",
    "user": "dimpase"
}
```

Attachment

OK, looks that things are fixed, and work, too.



---

archive/issue_comments_183825.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-28T22:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183825",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_183826.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-31T19:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14506#issuecomment-183826",
    "user": "jdemeyer"
}
```

Resolution: fixed
