# Issue 14506: Update boehm_gc to 7.2d

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2013-06-10 08:39:47

Assignee: jdemeyer

CC:  kcrisman dimpase jdemeyer tscrim

We are currently packaging some alpha version.

Moreover it would be a good time to:
* cleanup the spkg scripts,
* add a patch from Cygwin folks to build on Cygwin64 (see [ftp://cygwin.com/pub/cygwin/64bit/release/libgc/libgc-7.2d-2-src.tar.bz2 source package]),
* remove the Cygwin threads workaround (I don't need it to build on Cygwin64, did not test Cygwin, it seems though threaded libgc might be harmful on Cygwin but it was not the reason of the workaround which was only set up to let libgc build).


---

Comment by jpflori created at 2013-06-11 21:52:25

Changing keywords from "" to "spkg boehm_gc".


---

Comment by jpflori created at 2013-06-11 21:52:25

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-06-11 21:52:25

I've removed the two OS X patches (needed before on OS X 10.7) as it seems the relevant part is now upstream.
This needs testing.

Added a patch for Cygwin64, works ok.

Also removed the thread hack, it builds without it, not sure it can break something further.


---

Comment by jdemeyer created at 2013-06-12 07:56:52

Why the dependency on #14715?


---

Comment by jpflori created at 2013-06-12 18:03:24

Because I removed some RM related stuff.


---

Comment by jdemeyer created at 2013-06-13 06:56:32

Replying to [comment:4 jpflori]:
> Because I removed some RM related stuff.
Which is related to this ticket because ............. ?


---

Comment by jpflori created at 2013-06-13 14:05:16

Because it was needed to upgrade from Sage <= 4.7.


---

Comment by jdemeyer created at 2013-06-13 15:25:30

Not anymore, the `RM` which is deleted in #14715 makes sure upgrades from older versions work. The `unset RM` in `boehm_gc` and the `RM` stuff in `spkg/install` have the same purpose.


---

Comment by jpflori created at 2013-09-05 12:34:51

Anyone for this simple update?

It's basically updating boehm_gc to a stable version, removing patches which went upstream and adding a ptach from the cygwin folk.


---

Comment by dimpase created at 2013-10-16 12:00:19

looks good, but I can't test on Cygwin presently.


---

Comment by dimpase created at 2013-10-16 12:52:13

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-16 20:25:55

Changing status from positive_review to needs_info.


---

Comment by jdemeyer created at 2013-10-16 20:25:55

What's your justification for

```
patch -p1 <"$patch" || continue
```

(especially the `continue` in `spkg-install`)?

Also, Reviewer should be filled in.


---

Comment by jpflori created at 2013-10-16 20:45:01

None the continue is wrong, I wanted something like [ -r $patch ] || continue I guess.

The -p0 to -p1 is just because the cd src moved because I wanted the script to look more like other scriptS.


---

Comment by jpflori created at 2013-10-16 20:45:24

Changing status from needs_info to needs_work.


---

Comment by jpflori created at 2013-10-16 21:32:25

I indeed screwed up between testing the spkg on cygwin and packqging it later...
Should be ok now.


---

Comment by jpflori created at 2013-10-16 21:32:25

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-10-16 21:32:53

Spkg diff, for review only.


---

Attachment

OK, looks that things are fixed, and work, too.


---

Comment by dimpase created at 2013-10-28 22:03:18

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-10-31 19:16:49

Resolution: fixed
