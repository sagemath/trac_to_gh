# Issue 21503: Powers with rational exponents from QQbar fail

Issue created by migration from https://trac.sagemath.org/ticket/21740

Original creator: rws

Original creation time: 2016-10-22 14:57:01


```
sage: 2^(QQbar(1))
...
TypeError: no canonical coercion from Algebraic Field to Rational Field
```



---

Comment by rws created at 2016-10-22 15:22:05

New commits:


---

Comment by rws created at 2016-10-22 15:22:05

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-10-22 20:00:47

The `e = QQ(e)` should call `_coerce_` first then call the conversion, so `_coerce_` shouldn't need to be called again. (We'd also then want `e = QQ(e)` to raise the error.)


---

Comment by git created at 2016-10-23 06:11:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2016-10-23 06:11:53

You mean, this way?


---

Comment by nbruin created at 2016-10-23 06:31:44

If you're going to try conversion anyway, I don't think it makes much sense to try coercion explicitly first. I think it's good custom that if a coercion exists, conversion should agree with it. So, in effect (and possibly even in implementation!), conversion would try a coercion already.

One of the reasons why conversion might not be appropriate here is that, for instance, `QQ("2")` works just fine. So, if you use conversion in exponents the following probably would hold:

```
sage: 2^"2"
4
sage: a=GF(3)(-1)
sage: 2^a
4
```

That's a little too lenient to my taste.


---

Comment by jdemeyer created at 2016-10-23 09:30:27

As me and Vincent Delecroix wrote on sage-devel, it is a _feature_ that `2 ^ QQbar(1)` raises an exception.


---

Comment by rws created at 2016-10-23 09:48:24

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-01-21 18:03:11

Resolution: invalid
