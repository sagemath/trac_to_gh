# Issue 27494: upgrade normaliz to 3.7.2, pynormaliz to 2.5

archive/issues_027494.json:
```json
{
    "body": "CC:  winfried @jplab @sebasguts @mkoeppe @videlec @tscrim\n\nAnother update of normaliz, pynormaliz.\nThe upgrade of PyNormaliz from 2.1 to 2.5 fixes a critical data conversion bug (Check overflow for int conversion correctly) that was present in all previous versions.\n\nTarballs - see wget commands below.\n\n---\n\nStep by step instructions if you want to try it out\n\n1. Go to the Sage source tree and pull the branch associated to this ticket\n\n2. Get the tarballs and put them in the `upstream` repository\n\n```\n$ wget -P upstream https://github.com/Normaliz/Normaliz/releases/download/v3.7.2/normaliz-3.7.2.tar.gz\n$ wget -P upstream https://files.pythonhosted.org/packages/31/8f/a1e8e489150a570c81b427d351a29b868df57015f13c12e8e6d2d2d55c45/PyNormaliz-2.5.tar.gz\n```\n\n3. Compile and install everything\n\n```\n$ sage -i pynormaliz\n```\n\n4. Run make\n\n```\n$ make build\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/27731\n\n",
    "closed_at": "2019-05-14T12:37:21Z",
    "created_at": "2019-04-26T13:50:30Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "upgrade normaliz to 3.7.2, pynormaliz to 2.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27494",
    "user": "https://github.com/mkoeppe"
}
```
CC:  winfried @jplab @sebasguts @mkoeppe @videlec @tscrim

Another update of normaliz, pynormaliz.
The upgrade of PyNormaliz from 2.1 to 2.5 fixes a critical data conversion bug (Check overflow for int conversion correctly) that was present in all previous versions.

Tarballs - see wget commands below.

---

Step by step instructions if you want to try it out

1. Go to the Sage source tree and pull the branch associated to this ticket

2. Get the tarballs and put them in the `upstream` repository

```
$ wget -P upstream https://github.com/Normaliz/Normaliz/releases/download/v3.7.2/normaliz-3.7.2.tar.gz
$ wget -P upstream https://files.pythonhosted.org/packages/31/8f/a1e8e489150a570c81b427d351a29b868df57015f13c12e8e6d2d2d55c45/PyNormaliz-2.5.tar.gz
```

3. Compile and install everything

```
$ sage -i pynormaliz
```

4. Run make

```
$ make build
```

Issue created by migration from https://trac.sagemath.org/ticket/27731





---

archive/issue_comments_387194.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-04-26T14:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387194",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_387195.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-26T14:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387195",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387196.json:
```json
{
    "body": "Hi,\n\nWhat is the point of having several open tickets concerning Normaliz/PyNormaliz upgrade? You want the job of the release manager to become a nightmare? If Normaliz/PyNormaliz are not mature you should not have set anything to needs review in the first place. Also, you are shipping a beta version of e-antic which is not nice either.",
    "created_at": "2019-04-26T14:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387196",
    "user": "https://github.com/videlec"
}
```

Hi,

What is the point of having several open tickets concerning Normaliz/PyNormaliz upgrade? You want the job of the release manager to become a nightmare? If Normaliz/PyNormaliz are not mature you should not have set anything to needs review in the first place. Also, you are shipping a beta version of e-antic which is not nice either.



---

archive/issue_comments_387197.json:
```json
{
    "body": "3.7.1/2.1 are stable and an improvement over the existing versions in sage. The ticket #27682 is positively reviewed already, and per release manager, positively reviewed tickets are not to be modified further.",
    "created_at": "2019-04-26T15:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387197",
    "user": "https://github.com/mkoeppe"
}
```

3.7.1/2.1 are stable and an improvement over the existing versions in sage. The ticket #27682 is positively reviewed already, and per release manager, positively reviewed tickets are not to be modified further.



---

archive/issue_comments_387198.json:
```json
{
    "body": "`PyNormaliz` provides a test suite, there should be a `spkg-check`.",
    "created_at": "2019-04-26T22:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387198",
    "user": "https://github.com/videlec"
}
```

`PyNormaliz` provides a test suite, there should be a `spkg-check`.



---

archive/issue_comments_387199.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-26T22:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387199",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_387200.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T07:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387201.json:
```json
{
    "body": "PyNormaliz test suite currently fails with the e-antic bug-fix release 0.1.3b0 that we have in #27682.",
    "created_at": "2019-04-27T07:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387201",
    "user": "https://github.com/mkoeppe"
}
```

PyNormaliz test suite currently fails with the e-antic bug-fix release 0.1.3b0 that we have in #27682.



---

archive/issue_comments_387202.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-01T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387203.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2019-05-01T11:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387203",
    "user": "https://github.com/mkoeppe"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_387204.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-01T11:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387204",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_387205.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-01T17:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387206.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-05-02T17:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387206",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_387207.json:
```json
{
    "body": "With Sage built with Python3\n\n```\nsage -t --long polyhedron/backend_normaliz.py\n**********************************************************************\nFile \"polyhedron/backend_normaliz.py\", line 497, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._normaliz_format\nFailed example:\n    P = Polyhedron(vertices=[[0, 0], [0, 1], [1, 0]], # indirect doctest; optional - pynormaliz\n                   backend='normaliz', verbose=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._normaliz_format[0]>\", line 2, in <module>\n        backend='normaliz', verbose=True)\n      File \"sage/misc/lazy_import.pyx\", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3690)\n        return self.get_object()(*args, **kwds)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/constructor.py\", line 604, in Polyhedron\n        return parent(Vrep, Hrep, convert=convert, verbose=verbose)\n      File \"sage/structure/parent.pyx\", line 902, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9224)\n        return mor._call_with_args(x, args, kwds)\n      File \"sage/structure/coerce_maps.pyx\", line 181, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5074)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 176, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4962)\n        return C._element_constructor(x, *args, **kwds)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py\", line 517, in _element_constructor_\n        return self.element_class(self, Vrep, Hrep, **kwds)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 156, in __init__\n        Polyhedron_base.__init__(self, parent, Vrep, Hrep, **kwds)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 124, in __init__\n        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 263, in _init_from_Vrepresentation\n        self._init_from_normaliz_data(data, verbose=verbose)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 201, in _init_from_normaliz_data\n        print(self._normaliz_format(data), end='')\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py\", line 511, in _normaliz_format\n        for key, value in data.iteritems():\n    AttributeError: 'dict' object has no attribute 'iteritems'\n**********************************************************************\n```",
    "created_at": "2019-05-02T17:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387207",
    "user": "https://github.com/videlec"
}
```

With Sage built with Python3

```
sage -t --long polyhedron/backend_normaliz.py
**********************************************************************
File "polyhedron/backend_normaliz.py", line 497, in sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._normaliz_format
Failed example:
    P = Polyhedron(vertices=[[0, 0], [0, 1], [1, 0]], # indirect doctest; optional - pynormaliz
                   backend='normaliz', verbose=True)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.backend_normaliz.Polyhedron_normaliz._normaliz_format[0]>", line 2, in <module>
        backend='normaliz', verbose=True)
      File "sage/misc/lazy_import.pyx", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3690)
        return self.get_object()(*args, **kwds)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/constructor.py", line 604, in Polyhedron
        return parent(Vrep, Hrep, convert=convert, verbose=verbose)
      File "sage/structure/parent.pyx", line 902, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9224)
        return mor._call_with_args(x, args, kwds)
      File "sage/structure/coerce_maps.pyx", line 181, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:5074)
        raise
      File "sage/structure/coerce_maps.pyx", line 176, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_with_args (build/cythonized/sage/structure/coerce_maps.c:4962)
        return C._element_constructor(x, *args, **kwds)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py", line 517, in _element_constructor_
        return self.element_class(self, Vrep, Hrep, **kwds)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 156, in __init__
        Polyhedron_base.__init__(self, parent, Vrep, Hrep, **kwds)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 124, in __init__
        self._init_from_Vrepresentation(vertices, rays, lines, **kwds)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 263, in _init_from_Vrepresentation
        self._init_from_normaliz_data(data, verbose=verbose)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 201, in _init_from_normaliz_data
        print(self._normaliz_format(data), end='')
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_normaliz.py", line 511, in _normaliz_format
        for key, value in data.iteritems():
    AttributeError: 'dict' object has no attribute 'iteritems'
**********************************************************************
```



---

archive/issue_comments_387208.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-03T10:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387209.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-03T10:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387209",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_387210.json:
```json
{
    "body": "(The canonicalization of the output files is a good idea anyway and takes care of differences in dictionary orders between py2 and py3.)",
    "created_at": "2019-05-03T10:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387210",
    "user": "https://github.com/mkoeppe"
}
```

(The canonicalization of the output files is a good idea anyway and takes care of differences in dictionary orders between py2 and py3.)



---

archive/issue_comments_387211.json:
```json
{
    "body": "Compiles cleanly on debian.\n\nRunning tests using `pynormaliz` in the folder `src/sage/geometry/polyhedron`:\n\n```\n$ sage -t *.py\nUsing --optional=bliss,dochtml,e_antic,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom\nDoctesting 25 files.\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n\nand without:\n\n```\n$ sage -t *.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom\nUsing --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom\nDoctesting 25 files.\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2019-05-03T14:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387211",
    "user": "https://github.com/jplab"
}
```

Compiles cleanly on debian.

Running tests using `pynormaliz` in the folder `src/sage/geometry/polyhedron`:

```
$ sage -t *.py
Using --optional=bliss,dochtml,e_antic,gfortran,lrslib,memlimit,mpir,ninja_build,normaliz,pynormaliz,python2,sage,topcom
Doctesting 25 files.
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```

and without:

```
$ sage -t *.py --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom
Using --optional=bliss,dochtml,gfortran,lrslib,memlimit,mpir,ninja_build,python2,sage,topcom
Doctesting 25 files.
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_387212.json:
```json
{
    "body": "Merge conflict with the new beta.",
    "created_at": "2019-05-05T11:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387212",
    "user": "https://github.com/jplab"
}
```

Merge conflict with the new beta.



---

archive/issue_comments_387213.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-07T11:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-07T11:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387215.json:
```json
{
    "body": "Needs review again!",
    "created_at": "2019-05-08T19:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387215",
    "user": "https://github.com/mkoeppe"
}
```

Needs review again!



---

archive/issue_comments_387216.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T20:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387216",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_068757.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-14T12:37:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27494#event-68757"
}
```



---

archive/issue_comments_387217.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-14T12:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387217",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_387218.json:
```json
{
    "body": "As I reported on [sage-release for 8.8.beta6](https://groups.google.com/d/msg/sage-release/CHxw0WQQLpE/D_jWIruEBQAJ), I get troubles installing pynormaliz.\n\nIs this normal doctor?",
    "created_at": "2019-05-23T19:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387218",
    "user": "https://github.com/seblabbe"
}
```

As I reported on [sage-release for 8.8.beta6](https://groups.google.com/d/msg/sage-release/CHxw0WQQLpE/D_jWIruEBQAJ), I get troubles installing pynormaliz.

Is this normal doctor?



---

archive/issue_comments_387219.json:
```json
{
    "body": "Replying to [comment:27 slabbe]:\n> As I reported on [sage-release for 8.8.beta6](https://groups.google.com/d/msg/sage-release/CHxw0WQQLpE/D_jWIruEBQAJ), I get troubles installing pynormaliz.\n> \n> Is this normal doctor?\n\n\nCould you check whether there is a config.log in\n\n/home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5\n\nand if so attach it.",
    "created_at": "2019-05-23T19:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387219",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:27 slabbe]:
> As I reported on [sage-release for 8.8.beta6](https://groups.google.com/d/msg/sage-release/CHxw0WQQLpE/D_jWIruEBQAJ), I get troubles installing pynormaliz.
> 
> Is this normal doctor?


Could you check whether there is a config.log in

/home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5

and if so attach it.



---

archive/issue_comments_387220.json:
```json
{
    "body": "No config.log:\n\n```\n$ ls /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5\nchecksums.ini  package-version.txt  spkg-install  src\ndependencies   spkg-check           SPKG.txt      type\n```",
    "created_at": "2019-05-23T20:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387220",
    "user": "https://github.com/seblabbe"
}
```

No config.log:

```
$ ls /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5
checksums.ini  package-version.txt  spkg-install  src
dependencies   spkg-check           SPKG.txt      type
```



---

archive/issue_comments_387221.json:
```json
{
    "body": "It would of course be in the src subdirectory.",
    "created_at": "2019-05-23T20:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387221",
    "user": "https://github.com/mkoeppe"
}
```

It would of course be in the src subdirectory.



---

archive/issue_comments_387222.json:
```json
{
    "body": "The complete pynormaliz-2.5.log file is pasted on [framabin here](https://framabin.org/p/?a648d45c0650b5cd#6Z9TY9HfEOFxlM5mHck+Hk1/17KgtcFqn8XFEy3vq9M=)\n\nIn particular, there is this line:\n\n```\n    configure: error: source directory already configured; run \"make distclean\" there first\n```\n\nMaybe this has to do with the fact that my brother asked me to [try to test this ticket](https://trac.sagemath.org/ticket/24905#comment:54) one month ago where I installed a previous version of those packages?",
    "created_at": "2019-05-23T20:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387222",
    "user": "https://github.com/seblabbe"
}
```

The complete pynormaliz-2.5.log file is pasted on [framabin here](https://framabin.org/p/?a648d45c0650b5cd#6Z9TY9HfEOFxlM5mHck+Hk1/17KgtcFqn8XFEy3vq9M=)

In particular, there is this line:

```
    configure: error: source directory already configured; run "make distclean" there first
```

Maybe this has to do with the fact that my brother asked me to [try to test this ticket](https://trac.sagemath.org/ticket/24905#comment:54) one month ago where I installed a previous version of those packages?



---

archive/issue_comments_387223.json:
```json
{
    "body": "Replying to [comment:30 mkoeppe]:\n> It would of course be in the src subdirectory.\n\n\nNo config.log file in the src directory, but there is a config.py.in:\n\n```bash\n$ cd /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5/src\n$ ls\nconfig.py.in  doc       m4                  PyNormaliz.py  setup.py\nconfigure     examples  NormalizModule.cpp  Readme.md      tests\nCOPYING       GPLv2     PKG-INFO            setup.cfg\n$ cat config.py.in \n# Configuration variables\nENFNORMALIZ=@ENFNORMALIZ@\n```",
    "created_at": "2019-05-23T20:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387223",
    "user": "https://github.com/seblabbe"
}
```

Replying to [comment:30 mkoeppe]:
> It would of course be in the src subdirectory.


No config.log file in the src directory, but there is a config.py.in:

```bash
$ cd /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5/src
$ ls
config.py.in  doc       m4                  PyNormaliz.py  setup.py
configure     examples  NormalizModule.cpp  Readme.md      tests
COPYING       GPLv2     PKG-INFO            setup.cfg
$ cat config.py.in 
# Configuration variables
ENFNORMALIZ=@ENFNORMALIZ@
```



---

archive/issue_comments_387224.json:
```json
{
    "body": "Replying to [comment:31 slabbe]:\n> The complete pynormaliz-2.5.log file is pasted on [framabin here](https://framabin.org/p/?a648d45c0650b5cd#6Z9TY9HfEOFxlM5mHck+Hk1/17KgtcFqn8XFEy3vq9M=)\n\n\nI noticed. And this is not what I asked for.",
    "created_at": "2019-05-23T20:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387224",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:31 slabbe]:
> The complete pynormaliz-2.5.log file is pasted on [framabin here](https://framabin.org/p/?a648d45c0650b5cd#6Z9TY9HfEOFxlM5mHck+Hk1/17KgtcFqn8XFEy3vq9M=)


I noticed. And this is not what I asked for.



---

archive/issue_comments_387225.json:
```json
{
    "body": "Replying to [comment:32 slabbe]:\n> Replying to [comment:30 mkoeppe]:\n> > It would of course be in the src subdirectory.\n\n> \n> No config.log file in the src directory, but there is a config.py.in:\n> \n> \n> ```\n> #!bash\n> $ cd /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5/src\n> $ ls\n> config.py.in  doc       m4                  PyNormaliz.py  setup.py\n> configure     examples  NormalizModule.cpp  Readme.md      tests\n> COPYING       GPLv2     PKG-INFO            setup.cfg\n> $ cat config.py.in \n> # Configuration variables\n> ENFNORMALIZ=@ENFNORMALIZ@\n> ```\n\n\nThat is to be expected. The `setup.py` script calls `$ sh configure` that creates the `config.py` from the template file `config.py.in`. In your situation, the process get stuck at the `$ sh configure` call (as you `pynormaliz-2.5.log` already mentioned).\n\nDo you have `sh` installed?\n\nBTW: we should not discuss this on this close ticket... could you open a thread on sage-devel or so.",
    "created_at": "2019-05-23T20:49:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387225",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:32 slabbe]:
> Replying to [comment:30 mkoeppe]:
> > It would of course be in the src subdirectory.

> 
> No config.log file in the src directory, but there is a config.py.in:
> 
> 
> ```
> #!bash
> $ cd /home/slabbe/GitBox/sage/local/var/tmp/sage/build/pynormaliz-2.5/src
> $ ls
> config.py.in  doc       m4                  PyNormaliz.py  setup.py
> configure     examples  NormalizModule.cpp  Readme.md      tests
> COPYING       GPLv2     PKG-INFO            setup.cfg
> $ cat config.py.in 
> # Configuration variables
> ENFNORMALIZ=@ENFNORMALIZ@
> ```


That is to be expected. The `setup.py` script calls `$ sh configure` that creates the `config.py` from the template file `config.py.in`. In your situation, the process get stuck at the `$ sh configure` call (as you `pynormaliz-2.5.log` already mentioned).

Do you have `sh` installed?

BTW: we should not discuss this on this close ticket... could you open a thread on sage-devel or so.



---

archive/issue_comments_387226.json:
```json
{
    "body": "> BTW: we should not discuss this on this close ticket... could you open a thread on sage-devel or so.\n\n\nOK, let's continue here: https://groups.google.com/d/msg/sage-devel/2virhaHdt1k/nK-AtlByBAAJ",
    "created_at": "2019-05-23T20:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387226",
    "user": "https://github.com/seblabbe"
}
```

> BTW: we should not discuss this on this close ticket... could you open a thread on sage-devel or so.


OK, let's continue here: https://groups.google.com/d/msg/sage-devel/2virhaHdt1k/nK-AtlByBAAJ



---

archive/issue_comments_387227.json:
```json
{
    "body": "Follow-up in #27920.",
    "created_at": "2019-06-02T22:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27494",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27494#issuecomment-387227",
    "user": "https://github.com/mkoeppe"
}
```

Follow-up in #27920.
