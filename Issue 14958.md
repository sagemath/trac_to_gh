# Issue 14958: Family cardinality does not catch enough errors

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2013-09-13 17:04:24

Assignee: tscrim

CC:  nthiery

Keywords: Family cardinality

We have the following:

```
sage: C = CartesianProduct(PositiveIntegers(), [1,2,3])
sage: C.cardinality()
+Infinity
sage: F = Family(C, lambda x: x)
sage: F.cardinality()
Throws a TypeError
```


Fixes this by also catching type errors.


---

Comment by tscrim created at 2013-09-13 17:08:22

Changing status from new to needs_review.


---

Attachment

Hmmm... It fixes the bug indeed, but why wouldn't we do the opposite and first try to call `.set.cardinality()` and on `AttributeError` run the `len` version ? Is this a speed problem ?

Nathann


---

Comment by tscrim created at 2013-10-23 23:20:57

Its hard for me to say. If it typically gets python objects like `list`, then it will be faster. If it's expecting objects with a `cardinality()` method, then it's the reverse.

Nicolas, which do you think should be attempted first (note that this is for `LazyFamily`)?

Best,

Travis


---

Comment by ncohen created at 2013-10-27 11:19:25

Okay okay, if it's about comparing the different use-cases then let's merge this patch first then think about that.

Especially if obtaining an answer takes three days `:-P`

Nathann


---

Comment by ncohen created at 2013-10-27 11:19:25

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-10-27 15:05:57

Thanks Nathann.

Travis


---

Comment by jdemeyer created at 2013-10-31 19:17:33

Resolution: fixed
