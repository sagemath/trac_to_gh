# Issue 29422: PDF and PNG viewer wrongly initialized

Issue created by migration from https://trac.sagemath.org/ticket/29659

Original creator: @gfadini

Original creation time: 2020-05-07 08:28:45

The viewer.png_viewer() and viewer.png_viewer() are directed to '/usr/bin/firefox', which is not an existing path on the system. Why was this changed from the 'xdg-open' in the new release sage                                                                                                                                                                          'SageMath version 9.0, Release Date: 2020-01-01'?
How can I restore it to the previous 'xdg-open' pemanently?


---

Comment by @gfadini created at 2020-05-07 08:29:06

Changing priority from major to minor.


---

Comment by jhpalmieri created at 2020-05-07 16:53:12

Do you have the environment variable `BROWSER` set?


---

Comment by @gfadini created at 2020-05-08 08:08:27

Replying to [comment:2 jhpalmieri]:
> Do you have the environment variable `BROWSER` set?
Yes, I checked that and it was set to Firefox and I didn't change it to my new browser. If I wanted to open the image with the standard image viewer that in my case is Gwenview (which was the default behaviour before) how can I do that?


---

Comment by jhpalmieri created at 2020-05-08 16:05:54

Try unsetting that variable and see if that helps. The variable `SAGE_BROWSER` should also be unset.


---

Comment by @gfadini created at 2020-05-09 08:09:45

I don't have the SAGE_BROWER variable set, unsetting the BROWSER variable seems to produce correctly the previous behavior to let the output to be opened with xdg-open.
In my specific case I run KDE so the variable was set in /etc/xdg/plasma-workspace/env and can be modified/removed there.
However I guess that the fact it starts with browser has to do with some change in the 9.0 from pacman because I didn't have such behavior before.
Another interesting thing to me in order to have a workaround could be to change where the png files are saved temporarily.


---

Comment by jhpalmieri created at 2020-05-09 15:49:44

I don't know when `/etc/xdg/plasma-workspace/env` gets executed, before or after your shell profile scripts, but you could put `unset BROWSER` in `.profile` or `.bashrc` or similar.

In any case, I propose to close this ticket: it is not a bug in Sage.


---

Comment by jhpalmieri created at 2020-05-09 15:55:12

And the relevant Sage code hasn't changed in a long time. The most recent change I can find is from 2017:

```
commit 8945bd00e693e63fca325d2e52aed4e550fbb285
Author: Jeroen Demeyer <jdemeyer@cage.ugent.be>
Date:   Mon Feb 27 15:43:52 2017 +0100

    Support standard BROWSER environment variable
```



---

Comment by chapoton created at 2020-05-13 18:24:45

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2020-05-13 18:56:45

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-05-14 09:21:11

Resolution: invalid
