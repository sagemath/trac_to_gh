# Issue 16945: random spanning trees using the Aldous-Broder algorithm

archive/issues_016945.json:
```json
{
    "body": "CC:  ncohen\n\nKeywords: random tree\n\nThis implements the Aldous-Broder algorithm that uses a random walk to find a random spanning tree (with uniform distribution).\n\nIssue created by migration from https://trac.sagemath.org/ticket/17182\n\n",
    "created_at": "2014-10-20T12:43:58Z",
    "labels": [
        "graph theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "random spanning trees using the Aldous-Broder algorithm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16945",
    "user": "chapoton"
}
```
CC:  ncohen

Keywords: random tree

This implements the Aldous-Broder algorithm that uses a random walk to find a random spanning tree (with uniform distribution).

Issue created by migration from https://trac.sagemath.org/ticket/17182





---

archive/issue_comments_224546.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224546",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_224547.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-20T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224547",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_224548.json:
```json
{
    "body": "This should probably go in `graph/spanning_trees.py`\n\nNathann",
    "created_at": "2014-10-20T12:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224548",
    "user": "ncohen"
}
```

This should probably go in `graph/spanning_trees.py`

Nathann



---

archive/issue_comments_224549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-20T13:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224549",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_224550.json:
```json
{
    "body": "1) Should be in `spanning_trees.py`\n\n2) Fails on the empty graph\n\n3) Infinite loop on disconnected graphs\n\n4) `found` should be a set, not a list\n\nNathann",
    "created_at": "2014-10-20T13:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224550",
    "user": "ncohen"
}
```

1) Should be in `spanning_trees.py`

2) Fails on the empty graph

3) Infinite loop on disconnected graphs

4) `found` should be a set, not a list

Nathann



---

archive/issue_comments_224551.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-20T13:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224551",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_224552.json:
```json
{
    "body": "Furthermore, all explanations of the `Aldous-Broder` algorithm that I find mention taking the initial vertex at random, while you always take the first one.\n\nNathann",
    "created_at": "2014-10-20T13:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224552",
    "user": "ncohen"
}
```

Furthermore, all explanations of the `Aldous-Broder` algorithm that I find mention taking the initial vertex at random, while you always take the first one.

Nathann



---

archive/issue_comments_224553.json:
```json
{
    "body": "Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf\n\nI am working now on the move.\n\nShould I use `set`, `Set` or `frozenset` ?",
    "created_at": "2014-10-20T14:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224553",
    "user": "chapoton"
}
```

Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf

I am working now on the move.

Should I use `set`, `Set` or `frozenset` ?



---

archive/issue_comments_224554.json:
```json
{
    "body": "Yo !\n\n> Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf\n\nOkay.\n\n> I am working now on the move.\n\nOkay.\n\n> Should I use `set`, `Set` or `frozenset` ?\n\n`set` is fine. Never use `Set` for anything else than teaching purposes, and `frozenset` makes no sense here as you want to add elements to the set.\n\nNathann",
    "created_at": "2014-10-20T14:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224554",
    "user": "ncohen"
}
```

Yo !

> Any vertex does the job, see page 2 of https://www.cs.cmu.edu/~15859n/RelatedWork/Broder-GenRanSpanningTrees.pdf

Okay.

> I am working now on the move.

Okay.

> Should I use `set`, `Set` or `frozenset` ?

`set` is fine. Never use `Set` for anything else than teaching purposes, and `frozenset` makes no sense here as you want to add elements to the set.

Nathann



---

archive/issue_comments_224555.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-20T15:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224555",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_224556.json:
```json
{
    "body": "I have a problem with the empty graph, but I do not see what is wrong with my code.\n\nAnother question : do you think I should raise an exception for the empty graph ? Does it have one spanning tree or none ? I would go for none.\n\nI have also corrected Graph().spanning_trees(), that was failing also. It now says that the empty graph has no spanning tree, which is coherent with spanning_trees_count.",
    "created_at": "2014-10-20T15:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224556",
    "user": "chapoton"
}
```

I have a problem with the empty graph, but I do not see what is wrong with my code.

Another question : do you think I should raise an exception for the empty graph ? Does it have one spanning tree or none ? I would go for none.

I have also corrected Graph().spanning_trees(), that was failing also. It now says that the empty graph has no spanning tree, which is coherent with spanning_trees_count.



---

archive/issue_comments_224557.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-20T16:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224557",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_224558.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-20T16:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224558",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_224559.json:
```json
{
    "body": "Hello,\n\nThe doc did not compile. I fixed it. A reference was defined twice (once in `spanning_trees.pyx`, another time in the copy of that function as it is imported in `graph.py`).\n\nThe 'see also' should appear a bit earlier, especially when there is a 'test' section. Otherwise nobody sees it.\n\nI flagged the spanning tree in the doctest as `#random`, because the vertex ordering can depend on the architecture.\n\nIf you agree with the commit I added, please set this ticket to `positive_review`\n\nNathann\n----\nNew commits:",
    "created_at": "2014-10-21T14:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224559",
    "user": "ncohen"
}
```

Hello,

The doc did not compile. I fixed it. A reference was defined twice (once in `spanning_trees.pyx`, another time in the copy of that function as it is imported in `graph.py`).

The 'see also' should appear a bit earlier, especially when there is a 'test' section. Otherwise nobody sees it.

I flagged the spanning tree in the doctest as `#random`, because the vertex ordering can depend on the architecture.

If you agree with the commit I added, please set this ticket to `positive_review`

Nathann
----
New commits:



---

archive/issue_comments_224560.json:
```json
{
    "body": "Thank you Nathann !",
    "created_at": "2014-10-21T14:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224560",
    "user": "chapoton"
}
```

Thank you Nathann !



---

archive/issue_comments_224561.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-21T14:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224561",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_224562.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-23T11:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16945#issuecomment-224562",
    "user": "vbraun"
}
```

Resolution: fixed
