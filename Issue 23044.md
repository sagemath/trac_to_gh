# Issue 23044: Rounding for floating point p-adics

archive/issues_023044.json:
```json
{
    "body": "CC:  @roed314 @saraedum\n\nCurrently, we have:\n\n```\nsage: R = ZpFP(2)   # prec = 20\nsage: R(1+2^19) + R(1+2^19)\n2\n```\n\nI think that the answer should rather be `2 + 2^20`, i.e. we should first perform the addition and then round the result according to its valuation. Any objection?\n\nBy the way, I believe that it does not really make sense to define the methods `precision_absolute` and `precision_relative` for a p-adic float because p-adic floats have to be considered as exact p-adics (what are non-exact are the operations on them).\n\nIssue created by migration from https://trac.sagemath.org/ticket/23281\n\n",
    "created_at": "2017-06-19T21:30:09Z",
    "labels": [
        "component: padics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Rounding for floating point p-adics",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23044",
    "user": "https://github.com/xcaruso"
}
```
CC:  @roed314 @saraedum

Currently, we have:

```
sage: R = ZpFP(2)   # prec = 20
sage: R(1+2^19) + R(1+2^19)
2
```

I think that the answer should rather be `2 + 2^20`, i.e. we should first perform the addition and then round the result according to its valuation. Any objection?

By the way, I believe that it does not really make sense to define the methods `precision_absolute` and `precision_relative` for a p-adic float because p-adic floats have to be considered as exact p-adics (what are non-exact are the operations on them).

Issue created by migration from https://trac.sagemath.org/ticket/23281





---

archive/issue_comments_321923.json:
```json
{
    "body": "Changing keywords from \"\" to \"padicIMA\".",
    "created_at": "2018-07-22T20:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23044#issuecomment-321923",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "" to "padicIMA".



---

archive/issue_comments_321924.json:
```json
{
    "body": "I finally have an objection :-)\n\nIf we do this, then the opposite of `x = 1` would be `y = 2^20 - 1` and `x+y` would be equal to `2^20`, meaning that we would break the axiom `x + (-x) = 0`. The correct way to handle this is to choose balanced representatives but it's a lot of work...",
    "created_at": "2018-07-27T00:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23044#issuecomment-321924",
    "user": "https://github.com/xcaruso"
}
```

I finally have an objection :-)

If we do this, then the opposite of `x = 1` would be `y = 2^20 - 1` and `x+y` would be equal to `2^20`, meaning that we would break the axiom `x + (-x) = 0`. The correct way to handle this is to choose balanced representatives but it's a lot of work...



---

archive/issue_comments_321925.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2019-09-07T13:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23044#issuecomment-321925",
    "user": "https://github.com/roed314"
}
```

Changing priority from major to minor.
