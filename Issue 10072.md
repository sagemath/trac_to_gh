# Issue 10072: held variables aren't restored

archive/issues_010072.json:
```json
{
    "body": "Assignee: burcin\n\nSee #9879, where this was discovered.  After #9901 is merged, this will be possible:\n\n```\nsage: I.log(hold=True).simplify()\n1/2*I*pi\nsage: var('I')\nI\nsage: I.log(hold=True).simplify()\nlog(I)\nsage: restore('I')\nsage: I.log(hold=True).simplify()\nlog(I)\n```\n\nIt's totally unclear to me why this is happening.  It even happens across different classes in doctesting.  For now I'm putting this under symbolics, but it may be unrelated to that, and instead related to the miscellaneous commands.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10073\n\n",
    "created_at": "2010-10-05T13:52:47Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "held variables aren't restored",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10072",
    "user": "kcrisman"
}
```
Assignee: burcin

See #9879, where this was discovered.  After #9901 is merged, this will be possible:

```
sage: I.log(hold=True).simplify()
1/2*I*pi
sage: var('I')
I
sage: I.log(hold=True).simplify()
log(I)
sage: restore('I')
sage: I.log(hold=True).simplify()
log(I)
```

It's totally unclear to me why this is happening.  It even happens across different classes in doctesting.  For now I'm putting this under symbolics, but it may be unrelated to that, and instead related to the miscellaneous commands.

Issue created by migration from https://trac.sagemath.org/ticket/10073





---

archive/issue_comments_101601.json:
```json
{
    "body": "By the way, that does not happen when you do not use the hold parameter followed by the simplify call :\n\n\n```\nsage: I.log()\n1/2*I*pi\nsage: var('I')\nI\nsage: I.log()\nlog(I)\nsage: restore('I')\nsage: I.log()\n1/2*I*pi\n\n```\n\nSo 'I' gets restored but maybe Maxima gets the var('I') which was created and not the default numeric 'I'.\n\nHere is another strange thing:\n\n\n```\nsage: I.log()\n1/2*I*pi\nsage: J = deepcopy(I)\nsage: bool(I == J)\nTrue\nsage: J.log()\n1.57079632679490*I\n```\n",
    "created_at": "2010-10-06T15:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10072#issuecomment-101601",
    "user": "jpflori"
}
```

By the way, that does not happen when you do not use the hold parameter followed by the simplify call :


```
sage: I.log()
1/2*I*pi
sage: var('I')
I
sage: I.log()
log(I)
sage: restore('I')
sage: I.log()
1/2*I*pi

```

So 'I' gets restored but maybe Maxima gets the var('I') which was created and not the default numeric 'I'.

Here is another strange thing:


```
sage: I.log()
1/2*I*pi
sage: J = deepcopy(I)
sage: bool(I == J)
True
sage: J.log()
1.57079632679490*I
```




---

archive/issue_comments_101602.json:
```json
{
    "body": "Yes, Burcin says it has something to do with \"a problem with restore and the maxima interface, not pynac\".  This seems likely.  I can't explain the second thing.",
    "created_at": "2010-10-06T15:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10072#issuecomment-101602",
    "user": "kcrisman"
}
```

Yes, Burcin says it has something to do with "a problem with restore and the maxima interface, not pynac".  This seems likely.  I can't explain the second thing.



---

archive/issue_comments_101603.json:
```json
{
    "body": "Something has changed here, probably with #6882:\n\n```\nsage: I.log(hold=True).simplify()\n1/2*I*pi\nsage: var('I')\nI\nsage: I.log(hold=True).simplify()\nlog(_I)\nsage: restore('I')\nsage: I.log(hold=True).simplify()\nlog(I)\nsage: I.log()\n1/2*I*pi\nsage: I.log(hold=True).simplify_full()\nlog(_I)\n```\n\nThis is not encouraging.",
    "created_at": "2015-01-31T08:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10072#issuecomment-101603",
    "user": "rws"
}
```

Something has changed here, probably with #6882:

```
sage: I.log(hold=True).simplify()
1/2*I*pi
sage: var('I')
I
sage: I.log(hold=True).simplify()
log(_I)
sage: restore('I')
sage: I.log(hold=True).simplify()
log(I)
sage: I.log()
1/2*I*pi
sage: I.log(hold=True).simplify_full()
log(_I)
```

This is not encouraging.
