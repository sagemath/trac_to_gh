# Issue 14619: Categories of (C)DVR and (C)DVF

archive/issues_014619.json:
```json
{
    "body": "Assignee: @nthiery\n\nCC:  @defeo\n\nKeywords: categories, DVR\n\nHere is a small patch defining categories of (complete) discrete valuation rings and (complete) discrete valuation fields.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14823\n\n",
    "created_at": "2013-06-26T08:51:53Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "Categories of (C)DVR and (C)DVF",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14619",
    "user": "https://github.com/xcaruso"
}
```
Assignee: @nthiery

CC:  @defeo

Keywords: categories, DVR

Here is a small patch defining categories of (complete) discrete valuation rings and (complete) discrete valuation fields.

Issue created by migration from https://trac.sagemath.org/ticket/14823





---

archive/issue_comments_185682.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-06-26T08:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185682",
    "user": "https://github.com/xcaruso"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_185683.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-26T08:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185683",
    "user": "https://github.com/xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_185684.json:
```json
{
    "body": "I'm glad you're working on this stuff.  Here are some comments:\n\n* There are test failures to fix but they look simple.\n* Rather than ``@`abstract_method` you should use the `required_methods` function from `sage.categories.Category`.  Most of the functions on these categories should not actually be implemented on the category but rather included in the output of `required_methods`.\n* In power series rings it's probably worth giving some examples with infinite precision to highlight the difference with p-adic rings.",
    "created_at": "2013-07-08T11:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185684",
    "user": "https://github.com/roed314"
}
```

I'm glad you're working on this stuff.  Here are some comments:

* There are test failures to fix but they look simple.
* Rather than ``@`abstract_method` you should use the `required_methods` function from `sage.categories.Category`.  Most of the functions on these categories should not actually be implemented on the category but rather included in the output of `required_methods`.
* In power series rings it's probably worth giving some examples with infinite precision to highlight the difference with p-adic rings.



---

archive/issue_comments_185685.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-07-08T11:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185685",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_185686.json:
```json
{
    "body": "Hi David!\n\nReplying to [comment:2 roed]:\n\n> * Rather than ``@`abstract_method` you should use the\n>   `required_methods` function from `sage.categories.Category`.  Most\n>   of the functions on these categories should not actually be\n>   implemented on the category but rather included in the output of\n>   `required_methods`.\n\nI am not sure I understand your point. Looking at the patch, those\nmethods are not implemented on the category (just declared as abstract\nmethods), and it's those declarations that get them included in\n``required_methods``.\n\nOther than this, just for checking (and showing off my incompetence on\nthe topic at hand), it's on purpose that a discrete valuation field is\nnot a discrete valuation ring?\n\nCheers,\n                         Nicolas",
    "created_at": "2013-07-08T18:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185686",
    "user": "https://github.com/nthiery"
}
```

Hi David!

Replying to [comment:2 roed]:

> * Rather than ``@`abstract_method` you should use the
>   `required_methods` function from `sage.categories.Category`.  Most
>   of the functions on these categories should not actually be
>   implemented on the category but rather included in the output of
>   `required_methods`.

I am not sure I understand your point. Looking at the patch, those
methods are not implemented on the category (just declared as abstract
methods), and it's those declarations that get them included in
``required_methods``.

Other than this, just for checking (and showing off my incompetence on
the topic at hand), it's on purpose that a discrete valuation field is
not a discrete valuation ring?

Cheers,
                         Nicolas



---

archive/issue_comments_185687.json:
```json
{
    "body": "Replying to [comment:2 roed]:\n> * There are test failures to fix but they look simple.\n\nFixed.\n\n> * Rather than ``@`abstract_method` you should use the `required_methods` function from `sage.categories.Category`.  Most of the functions on these categories should not actually be implemented on the category but rather included in the output of `required_methods`.\n\ncf Nicolas' answer: I think that the \"right way\" is to decorate these functions by ``@`abstract_method`, so that they are automatically discovered by `required_methods`.\n\n> * In power series rings it's probably worth giving some examples with infinite precision to highlight the difference with p-adic rings.\n\nI don't understand what you are saying: do you mean that I should add some doctests in `sage.rings.power_series_ring` and `sage.rings.power_series_ring_element` to highlight this difference?",
    "created_at": "2013-07-09T09:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185687",
    "user": "https://github.com/xcaruso"
}
```

Replying to [comment:2 roed]:
> * There are test failures to fix but they look simple.

Fixed.

> * Rather than ``@`abstract_method` you should use the `required_methods` function from `sage.categories.Category`.  Most of the functions on these categories should not actually be implemented on the category but rather included in the output of `required_methods`.

cf Nicolas' answer: I think that the "right way" is to decorate these functions by ``@`abstract_method`, so that they are automatically discovered by `required_methods`.

> * In power series rings it's probably worth giving some examples with infinite precision to highlight the difference with p-adic rings.

I don't understand what you are saying: do you mean that I should add some doctests in `sage.rings.power_series_ring` and `sage.rings.power_series_ring_element` to highlight this difference?



---

archive/issue_comments_185688.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2013-07-09T09:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185688",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_185689.json:
```json
{
    "body": "Attachment [trac_14823_category_cdvr_cdvf.patch](tarball://root/attachments/some-uuid/ticket14823/trac_14823_category_cdvr_cdvf.patch) by @xcaruso created at 2013-08-24 17:50:00\n\nI realized that my patch was not compatible with #14084. I just posted a revised version of my patch.",
    "created_at": "2013-08-24T17:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185689",
    "user": "https://github.com/xcaruso"
}
```

Attachment [trac_14823_category_cdvr_cdvf.patch](tarball://root/attachments/some-uuid/ticket14823/trac_14823_category_cdvr_cdvf.patch) by @xcaruso created at 2013-08-24 17:50:00

I realized that my patch was not compatible with #14084. I just posted a revised version of my patch.



---

archive/issue_comments_185690.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-08-24T17:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185690",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_185691.json:
```json
{
    "body": "Changing keywords from \"categories, DVR\" to \"categories, DVR, sd52\".",
    "created_at": "2013-09-02T12:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185691",
    "user": "https://github.com/saraedum"
}
```

Changing keywords from "categories, DVR" to "categories, DVR, sd52".



---

archive/issue_comments_185692.json:
```json
{
    "body": "I made some changes: if you're happy with them then feel free to mark as positive review.",
    "created_at": "2013-09-07T02:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185692",
    "user": "https://github.com/roed314"
}
```

I made some changes: if you're happy with them then feel free to mark as positive review.



---

archive/issue_comments_185693.json:
```json
{
    "body": "I'm happy with your modifications. I don't just really understand why this ticket depends on #14482...",
    "created_at": "2013-09-11T09:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185693",
    "user": "https://github.com/xcaruso"
}
```

I'm happy with your modifications. I don't just really understand why this ticket depends on #14482...



---

archive/issue_comments_185694.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-09-11T09:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185694",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185695.json:
```json
{
    "body": "Replying to [comment:13 caruso]:\n> I don't just really understand why this ticket depends on #14482...\n\nBecause it uses sage-git with the dev scripts. It cannot really go in before #14482 gets in (and it might need fiddling with the branch, then, I'll keep an eye on it).\n\nAny idea why David's branch does not have a link?",
    "created_at": "2013-09-11T10:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185695",
    "user": "https://github.com/defeo"
}
```

Replying to [comment:13 caruso]:
> I don't just really understand why this ticket depends on #14482...

Because it uses sage-git with the dev scripts. It cannot really go in before #14482 gets in (and it might need fiddling with the branch, then, I'll keep an eye on it).

Any idea why David's branch does not have a link?



---

archive/issue_comments_185696.json:
```json
{
    "body": "Merge conflict, please fix.\n----\nNew commits:",
    "created_at": "2014-01-06T23:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185696",
    "user": "https://github.com/vbraun"
}
```

Merge conflict, please fix.
----
New commits:



---

archive/issue_comments_185697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-01-08T02:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_185698.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-01-08T02:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_185699.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-08T02:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185699",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_185700.json:
```json
{
    "body": "I've trivially fixed the merge conflict, so I'm marking it back to positive review.",
    "created_at": "2014-01-08T02:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185700",
    "user": "https://github.com/roed314"
}
```

I've trivially fixed the merge conflict, so I'm marking it back to positive review.



---

archive/issue_comments_185701.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-08T18:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14619#issuecomment-185701",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_014370.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-08T18:21:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14619",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14619#event-14370"
}
```
