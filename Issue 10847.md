# Issue 10847: Better error messages for bad arrow plots

archive/issues_010847.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  @jasongrout ryan\n\nKeywords: beginner\n\nThe error messages for bad arrow setups are somewhat amusing.\n\n```\nsage: version()\n'Sage Version 4.6.2, Release Date: 2011-02-25'\nsage: arrow([1,2,1],[2,1])\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (2, 0))\n\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (844, 0))\n\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/arrow.pyc in arrow(tailpoint, headpoint, **kwds)\n    342     except ValueError:\n    343         from sage.plot.plot3d.shapes import arrow3d\n--> 344         return arrow3d(tailpoint, headpoint, **kwds)\n    345 \n    346 @rename_keyword(color='rgbcolor')\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)\n    571                     kwds[new_name] = kwds[old_name]\n    572                     del kwds[old_name]\n--> 573             return func(*args, **kwds)\n    574         \n    575         return wrapper\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/shapes.so in sage.plot.plot3d.shapes.arrow3d (sage/plot/plot3d/shapes.c:5870)()\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.ModuleElement.__sub__ (sage/structure/element.c:8080)()\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6996)()\n\nTypeError: unsupported operand parent(s) for '-': 'Vector space of dimension 2 over Real Double Field' and 'Vector space of dimension 3 over Real Double Field'\n```\n\nand \n\n```\nsage: arrow([1],[1])\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (2, 0))\n\n---------------------------------------------------------------------------\nArithmeticError                           Traceback (most recent call last)\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/arrow.pyc in arrow(tailpoint, headpoint, **kwds)\n    342     except ValueError:\n    343         from sage.plot.plot3d.shapes import arrow3d\n--> 344         return arrow3d(tailpoint, headpoint, **kwds)\n    345 \n    346 @rename_keyword(color='rgbcolor')\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)\n    571                     kwds[new_name] = kwds[old_name]\n    572                     del kwds[old_name]\n--> 573             return func(*args, **kwds)\n    574         \n    575         return wrapper\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/shapes.so in sage.plot.plot3d.shapes.arrow3d (sage/plot/plot3d/shapes.c:6038)()\n\n/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/modules/free_module_element.so in sage.modules.free_module_element.FreeModuleElement.cross_product (sage/modules/free_module_element.c:10882)()\n\nArithmeticError: Cross product only defined for vectors of length three or seven, not (3 and 1)\n```\n\nI leave the traces in for those who want to fix this; tentatively saying beginner.  Ideally, we should plot one-dimensional arrows as well (such as how we plot one-dimensional vectors), or should this remain impossible?\n\nIssue created by migration from https://trac.sagemath.org/ticket/10925\n\n",
    "created_at": "2011-03-13T01:49:09Z",
    "labels": [
        "graphics",
        "minor",
        "enhancement"
    ],
    "title": "Better error messages for bad arrow plots",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10847",
    "user": "@kcrisman"
}
```
Assignee: jason, was

CC:  @jasongrout ryan

Keywords: beginner

The error messages for bad arrow setups are somewhat amusing.

```
sage: version()
'Sage Version 4.6.2, Release Date: 2011-02-25'
sage: arrow([1,2,1],[2,1])
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (2, 0))

ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (844, 0))

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/arrow.pyc in arrow(tailpoint, headpoint, **kwds)
    342     except ValueError:
    343         from sage.plot.plot3d.shapes import arrow3d
--> 344         return arrow3d(tailpoint, headpoint, **kwds)
    345 
    346 @rename_keyword(color='rgbcolor')

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
    571                     kwds[new_name] = kwds[old_name]
    572                     del kwds[old_name]
--> 573             return func(*args, **kwds)
    574         
    575         return wrapper

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/shapes.so in sage.plot.plot3d.shapes.arrow3d (sage/plot/plot3d/shapes.c:5870)()

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.ModuleElement.__sub__ (sage/structure/element.c:8080)()

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6996)()

TypeError: unsupported operand parent(s) for '-': 'Vector space of dimension 2 over Real Double Field' and 'Vector space of dimension 3 over Real Double Field'
```

and 

```
sage: arrow([1],[1])
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (2, 0))

---------------------------------------------------------------------------
ArithmeticError                           Traceback (most recent call last)
/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/arrow.pyc in arrow(tailpoint, headpoint, **kwds)
    342     except ValueError:
    343         from sage.plot.plot3d.shapes import arrow3d
--> 344         return arrow3d(tailpoint, headpoint, **kwds)
    345 
    346 @rename_keyword(color='rgbcolor')

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
    571                     kwds[new_name] = kwds[old_name]
    572                     del kwds[old_name]
--> 573             return func(*args, **kwds)
    574         
    575         return wrapper

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/plot/plot3d/shapes.so in sage.plot.plot3d.shapes.arrow3d (sage/plot/plot3d/shapes.c:6038)()

/Applications/MathApps/sage/local/lib/python2.6/site-packages/sage/modules/free_module_element.so in sage.modules.free_module_element.FreeModuleElement.cross_product (sage/modules/free_module_element.c:10882)()

ArithmeticError: Cross product only defined for vectors of length three or seven, not (3 and 1)
```

I leave the traces in for those who want to fix this; tentatively saying beginner.  Ideally, we should plot one-dimensional arrows as well (such as how we plot one-dimensional vectors), or should this remain impossible?

Issue created by migration from https://trac.sagemath.org/ticket/10925





---

archive/issue_comments_115071.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-30T04:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115071",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115072.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-01T04:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115072",
    "user": "philwilt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_115073.json:
```json
{
    "body": "This seems really complicated.  Would it be easier to just do \n\n```\ntry:\n    if len(headpoint) !=  len(tail point):\n        stuff\n    elif\nexcept TypeError # kind of error when you ask for len of something that doesn't have it\n    make into lists like you do\n```\n\nI get what this code is doing but I'm afraid it's going to be hard to maintain.  I don't know how much of an efficiency gain your solution might be, though, or maybe there are too many cases anyway no matter how you do it.\n\nWhat do you think?  By the way, it needs doctests of the \"bad\" cases (there should be examples of traceback doctesting in nearby code, I think, for sure elsewhere in the plot modules).   Thanks for working on this, it's close!",
    "created_at": "2014-08-27T19:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115073",
    "user": "@kcrisman"
}
```

This seems really complicated.  Would it be easier to just do 

```
try:
    if len(headpoint) !=  len(tail point):
        stuff
    elif
except TypeError # kind of error when you ask for len of something that doesn't have it
    make into lists like you do
```

I get what this code is doing but I'm afraid it's going to be hard to maintain.  I don't know how much of an efficiency gain your solution might be, though, or maybe there are too many cases anyway no matter how you do it.

What do you think?  By the way, it needs doctests of the "bad" cases (there should be examples of traceback doctesting in nearby code, I think, for sure elsewhere in the plot modules).   Thanks for working on this, it's close!



---

archive/issue_comments_115074.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-22T18:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115074",
    "user": "@kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_115075.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-05T13:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115075",
    "user": "kkiviat"
}
```

New commits:



---

archive/issue_comments_115076.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-05T13:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115076",
    "user": "kkiviat"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_115077.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-06T00:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115077",
    "user": "@saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_115078.json:
```json
{
    "body": "Changing keywords from \"beginner\" to \"\".",
    "created_at": "2020-05-27T02:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115078",
    "user": "@DaveWitteMorris"
}
```

Changing keywords from "beginner" to "".



---

archive/issue_comments_115079.json:
```json
{
    "body": "Removing the \"beginner\" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.",
    "created_at": "2020-05-27T02:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10847#issuecomment-115079",
    "user": "@DaveWitteMorris"
}
```

Removing the "beginner" tag from old tickets. Some could be returned to beginner-friendly status by adding a comment about what needs to be done. Some others might be easy for an experienced developer to finish.
