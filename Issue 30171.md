# Issue 30171: Add pycodestyle config via tox

Issue created by migration from https://trac.sagemath.org/ticket/30408

Original creator: @tobiasdiez

Original creation time: 2020-08-20 18:32:18

CC:  mkoeppe chapoton

Adds the current configuration of pycodestyle (as taken from the patchbot) to the src/tox.ini file. Thus, it can be run now locally via the cli `pycodestyle`. Moreover, tools like VS Code can pick it up automatically. The corresponding changes for the patchbot are done in https://github.com/sagemath/sage-patchbot/pull/145.

Documentation will be added in #30361.


---

Comment by @tobiasdiez created at 2020-08-20 18:32:27

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-08-20 18:49:06

Perhaps also add a tox environment that runs pycodestyle?


---

Comment by mkoeppe created at 2020-08-20 18:51:30

Speaking of vs code, would it make sense to add a configuration or configuration template for that as well in ~/.vscode so that it knows to launch local/bin/sage and local/bin/python3?


---

Comment by @tobiasdiez created at 2020-08-20 19:02:06

> Perhaps also add a tox environment that runs pycodestyle?

I've no experience with tox, and thus cannot decide if this makes sense or not. Feel free to hijack this PR and add the necessary config.


> Speaking of vs code, would it make sense to add a configuration or configuration template for that as well in ~/.vscode so that it knows to launch local/bin/sage and local/bin/python3?

This definitely makes sense! However, the last time I tried to point vscode to the local sage python environment, it didn't work. My hope was that with the inplace compilation it will work.


---

Comment by mkoeppe created at 2020-08-20 19:10:27

Replying to [comment:4 gh-tobiasdiez]:
> > Speaking of vs code, would it make sense to add a configuration or configuration template for that as well in ~/.vscode so that it knows to launch local/bin/sage and local/bin/python3?
> 
> This definitely makes sense! However, the last time I tried to point vscode to the local sage python environment, it didn't work. My hope was that with the inplace compilation it will work.

I was able to set it so that it can run local/bin/python3 and that was good enough to do some debugging work


---

Comment by mkoeppe created at 2020-08-20 19:10:44

Replying to [comment:4 gh-tobiasdiez]:
> > Perhaps also add a tox environment that runs pycodestyle?
> 
> I've no experience with tox, and thus cannot decide if this makes sense or not. Feel free to hijack this PR and add the necessary config.

Sure, will do


---

Comment by git created at 2020-08-20 20:22:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-08-20 20:27:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-08-20 20:44:11

This auto-provisions pycodestyle

Can do the same also for pyright via https://pypi.org/project/nodeenv/


---

Comment by @tobiasdiez created at 2020-08-20 22:02:44

Thanks!

If you want to enable type checking in a purely pythonic environment, then perhaps mypy (or pytype or PyCharm) are better alternatives. Pyright was mainly designed to be used in combination with VS code and for CI. Anyway, that's not the topic of this ticket ;-).


---

Comment by mkoeppe created at 2020-08-20 22:46:45

Replying to [comment:11 gh-tobiasdiez]:
>  Pyright was mainly designed to be used in combination with VS code and for CI. Anyway, that's not the topic of this ticket ;-).

OK, I've opened #30411 for this, but it's not a high priority to work on it.


---

Comment by @tobiasdiez created at 2020-08-21 09:30:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-08-26 21:15:39

Resolution: fixed


---

Comment by mkoeppe created at 2020-09-01 21:54:13

Replying to [comment:3 mkoeppe]:
> Speaking of vs code, would it make sense to add a configuration or configuration template for that as well in ~/.vscode so that it knows to launch local/bin/sage and local/bin/python3?

This is now #30484
