# Issue 10872: ecmfactor should take as optional argument the sigma value

Issue created by migration from https://trac.sagemath.org/ticket/10951

Original creator: zimmerma

Original creation time: 2011-03-17 06:50:13

Assignee: tbd

CC:  alexghitza cremona rlm jpflori

I suggest the `ecmfactor` function takes as optional argument a sigma
value, which would be passed to GMP-ECM. In case of a successful
factorization, this would allow to know the lucky curve, for
example to report it on some tables of records.

For example I found a 61-digit prime factor using `ecmfactor`,
but was unable to know the lucky sigma
(http://www.loria.fr/~zimmerma/records/ecmnet.html).

Alternatively, one could store the (random) sigma value chosen by
GMP-ECM if not sigma was given, but that might be more difficult to
implement.



---

Comment by zimmerma created at 2011-05-22 19:27:00

Changing status from new to needs_review.


---

Attachment

the attached file does two things:

(1) if an optional sigma=nnn input is given to ecmfactor, it uses that value (nnn) to choose the elliptic curve, instead of a random one. This allows to get a deterministic behaviour;

(2) if a non-trivial factor was found (with a random or user-given sigma) it is returned by
ecmfactor, which now returns (True, N, sigma)

Paul


---

Comment by mariah created at 2011-05-24 14:26:20

This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.


---

Comment by mariah created at 2011-05-24 14:26:20

Changing status from needs_review to needs_work.


---

Comment by zimmerma created at 2011-05-24 16:52:48

Replying to [comment:3 mariah]:
> This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.

you are right. However this was already the case before my patch. The best would be to open a
separate ticket to add documentation for this function.

Paul


---

Comment by zimmerma created at 2011-05-24 16:52:48

Remove assignee tbd.


---

Comment by zimmerma created at 2011-05-24 16:53:23

Set assignee to tbd.


---

Comment by was created at 2011-08-24 23:45:43

Changing keywords from "" to "sd32".


---

Comment by mhansen created at 2012-05-27 23:13:01

Changing status from needs_work to positive_review.


---

Comment by mhansen created at 2012-05-27 23:13:01

Looks good to me.   I've made #13042 to add the module to the reference manual.


---

Comment by mhansen created at 2012-05-27 23:13:01

Changing keywords from "sd32" to "sd32, sd40.5".


---

Comment by jdemeyer created at 2012-05-29 04:04:13

This patch should still be rebased to #12777 and the new option should be documented.


---

Comment by jdemeyer created at 2012-05-29 04:04:13

Changing status from positive_review to needs_work.


---

Comment by zimmerma created at 2015-01-02 18:43:08

any progress on this? I just found a 59-digit factor with ecmfactor, but I'm unable to know which sigma value was used. If I was able to give the sigma value, I would know.

Paul


---

Comment by zimmerma created at 2015-05-28 11:19:24

rebased with the help of Marc Mezzarobba. Remains to do:
* check tests
* add documentation


---

Comment by git created at 2015-06-02 06:57:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zimmerma created at 2015-06-02 06:58:59

I've added documentation in the new patch 27c99e1.
Ready for review again.
Paul
----
New commits:


---

Comment by zimmerma created at 2015-06-02 06:58:59

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2015-08-09 13:02:15

this looks good to me.

I have removed some of the newly introduced random keywords.

If somebody else agrees, this can be put into positive review.
----
New commits:


---

Comment by jpflori created at 2015-08-10 10:02:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-08-11 11:23:37

Resolution: fixed


---

Comment by zimmerma created at 2015-08-17 14:31:31

thank you Frederic for your review. For `ecmfactor(2^167-1, 2e5)` the 7-digit factor is always found by ECM since the curve has order divisible by 12 at least. However the 44-digit factor might be found in some (very) rare cases, which was the reason for the "random" keyword. The other cases are fine.

Paul
