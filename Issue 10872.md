# Issue 10872: ecmfactor should take as optional argument the sigma value

archive/issues_010872.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  alexghitza cremona rlm jpflori\n\nI suggest the `ecmfactor` function takes as optional argument a sigma\nvalue, which would be passed to GMP-ECM. In case of a successful\nfactorization, this would allow to know the lucky curve, for\nexample to report it on some tables of records.\n\nFor example I found a 61-digit prime factor using `ecmfactor`,\nbut was unable to know the lucky sigma\n(http://www.loria.fr/~zimmerma/records/ecmnet.html).\n\nAlternatively, one could store the (random) sigma value chosen by\nGMP-ECM if not sigma was given, but that might be more difficult to\nimplement.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10951\n\n",
    "created_at": "2011-03-17T06:50:13Z",
    "labels": [
        "factorization",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "ecmfactor should take as optional argument the sigma value",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10872",
    "user": "zimmerma"
}
```
Assignee: tbd

CC:  alexghitza cremona rlm jpflori

I suggest the `ecmfactor` function takes as optional argument a sigma
value, which would be passed to GMP-ECM. In case of a successful
factorization, this would allow to know the lucky curve, for
example to report it on some tables of records.

For example I found a 61-digit prime factor using `ecmfactor`,
but was unable to know the lucky sigma
(http://www.loria.fr/~zimmerma/records/ecmnet.html).

Alternatively, one could store the (random) sigma value chosen by
GMP-ECM if not sigma was given, but that might be more difficult to
implement.


Issue created by migration from https://trac.sagemath.org/ticket/10951





---

archive/issue_comments_115480.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-05-22T19:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115480",
    "user": "zimmerma"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_115481.json:
```json
{
    "body": "Attachment [trac_10951.patch](tarball://root/attachments/some-uuid/ticket10951/trac_10951.patch) by zimmerma created at 2011-05-22 19:27:00\n\nthe attached file does two things:\n\n(1) if an optional sigma=nnn input is given to ecmfactor, it uses that value (nnn) to choose the elliptic curve, instead of a random one. This allows to get a deterministic behaviour;\n\n(2) if a non-trivial factor was found (with a random or user-given sigma) it is returned by\necmfactor, which now returns (True, N, sigma)\n\nPaul",
    "created_at": "2011-05-22T19:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115481",
    "user": "zimmerma"
}
```

Attachment [trac_10951.patch](tarball://root/attachments/some-uuid/ticket10951/trac_10951.patch) by zimmerma created at 2011-05-22 19:27:00

the attached file does two things:

(1) if an optional sigma=nnn input is given to ecmfactor, it uses that value (nnn) to choose the elliptic curve, instead of a random one. This allows to get a deterministic behaviour;

(2) if a non-trivial factor was found (with a random or user-given sigma) it is returned by
ecmfactor, which now returns (True, N, sigma)

Paul



---

archive/issue_comments_115482.json:
```json
{
    "body": "This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.",
    "created_at": "2011-05-24T14:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115482",
    "user": "mariah"
}
```

This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.



---

archive/issue_comments_115483.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-05-24T14:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115483",
    "user": "mariah"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_115484.json:
```json
{
    "body": "Replying to [comment:3 mariah]:\n> This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.\n\nyou are right. However this was already the case before my patch. The best would be to open a\nseparate ticket to add documentation for this function.\n\nPaul",
    "created_at": "2011-05-24T16:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115484",
    "user": "zimmerma"
}
```

Replying to [comment:3 mariah]:
> This function seems to lack documentation.  I do not see anything about it at http://sagemath.org/doc/reference/libs.html.

you are right. However this was already the case before my patch. The best would be to open a
separate ticket to add documentation for this function.

Paul



---

archive/issue_comments_115485.json:
```json
{
    "body": "Remove assignee tbd.",
    "created_at": "2011-05-24T16:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115485",
    "user": "zimmerma"
}
```

Remove assignee tbd.



---

archive/issue_comments_115486.json:
```json
{
    "body": "Set assignee to tbd.",
    "created_at": "2011-05-24T16:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115486",
    "user": "zimmerma"
}
```

Set assignee to tbd.



---

archive/issue_comments_115487.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115487",
    "user": "was"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_115488.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-05-27T23:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115488",
    "user": "mhansen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_115489.json:
```json
{
    "body": "Looks good to me.   I've made #13042 to add the module to the reference manual.",
    "created_at": "2012-05-27T23:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115489",
    "user": "mhansen"
}
```

Looks good to me.   I've made #13042 to add the module to the reference manual.



---

archive/issue_comments_115490.json:
```json
{
    "body": "Changing keywords from \"sd32\" to \"sd32, sd40.5\".",
    "created_at": "2012-05-27T23:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115490",
    "user": "mhansen"
}
```

Changing keywords from "sd32" to "sd32, sd40.5".



---

archive/issue_comments_115491.json:
```json
{
    "body": "This patch should still be rebased to #12777 and the new option should be documented.",
    "created_at": "2012-05-29T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115491",
    "user": "jdemeyer"
}
```

This patch should still be rebased to #12777 and the new option should be documented.



---

archive/issue_comments_115492.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-29T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115492",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_115493.json:
```json
{
    "body": "any progress on this? I just found a 59-digit factor with ecmfactor, but I'm unable to know which sigma value was used. If I was able to give the sigma value, I would know.\n\nPaul",
    "created_at": "2015-01-02T18:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115493",
    "user": "zimmerma"
}
```

any progress on this? I just found a 59-digit factor with ecmfactor, but I'm unable to know which sigma value was used. If I was able to give the sigma value, I would know.

Paul



---

archive/issue_comments_115494.json:
```json
{
    "body": "rebased with the help of Marc Mezzarobba. Remains to do:\n* check tests\n* add documentation",
    "created_at": "2015-05-28T11:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115494",
    "user": "zimmerma"
}
```

rebased with the help of Marc Mezzarobba. Remains to do:
* check tests
* add documentation



---

archive/issue_comments_115495.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-02T06:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115495",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_115496.json:
```json
{
    "body": "I've added documentation in the new patch 27c99e1.\nReady for review again.\nPaul\n----\nNew commits:",
    "created_at": "2015-06-02T06:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115496",
    "user": "zimmerma"
}
```

I've added documentation in the new patch 27c99e1.
Ready for review again.
Paul
----
New commits:



---

archive/issue_comments_115497.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-02T06:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115497",
    "user": "zimmerma"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_115498.json:
```json
{
    "body": "this looks good to me.\n\nI have removed some of the newly introduced random keywords.\n\nIf somebody else agrees, this can be put into positive review.\n----\nNew commits:",
    "created_at": "2015-08-09T13:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115498",
    "user": "chapoton"
}
```

this looks good to me.

I have removed some of the newly introduced random keywords.

If somebody else agrees, this can be put into positive review.
----
New commits:



---

archive/issue_comments_115499.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-10T10:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115499",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_115500.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-11T11:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115500",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_115501.json:
```json
{
    "body": "thank you Frederic for your review. For `ecmfactor(2^167-1, 2e5)` the 7-digit factor is always found by ECM since the curve has order divisible by 12 at least. However the 44-digit factor might be found in some (very) rare cases, which was the reason for the \"random\" keyword. The other cases are fine.\n\nPaul",
    "created_at": "2015-08-17T14:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10872#issuecomment-115501",
    "user": "zimmerma"
}
```

thank you Frederic for your review. For `ecmfactor(2^167-1, 2e5)` the 7-digit factor is always found by ECM since the curve has order divisible by 12 at least. However the 44-digit factor might be found in some (very) rare cases, which was the reason for the "random" keyword. The other cases are fine.

Paul
