# Issue 28402: Polyhedron_normaliz initialize new cone from both Vrep and Hrep

Issue created by migration from https://trac.sagemath.org/ticket/28639

Original creator: @kliem

Original creation time: 2019-10-19 20:32:58

CC:  jipilab mkoeppe winfried

Keywords: polyhedron, normaliz

This ticket implements a method to initialize a cone from vertices, rays, inequations and equalities.

This method can be useful to unpickle a saved instance of `Polyhedron_normaliz`, where the normaliz cone has been removed. Also it can be used to set up a polyhedron with normaliz with given `Vrepresentation` and `Hrepresentation`.


---

Comment by @kliem created at 2019-10-19 20:34:21

Changing status from new to needs_info.


---

Comment by @kliem created at 2019-10-19 20:34:21

New commits:


---

Comment by @kliem created at 2019-10-19 20:35:47

I have set up doctests to test whether the cone is correct. Are there critical/important examples missing there?


---

Comment by @kliem created at 2019-10-19 20:47:00

I'm also a bit puzzled that it states that the equations are not precomputed from the data (see EXAMPLE block in the code). However, not giving the equations will lead to errors.


---

Comment by git created at 2019-10-21 09:11:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2019-10-21 09:30:33

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2019-12-01 22:09:13

Minor detail:

```diff
         - ``vertices`` -- list of point; each point can be specified
-           as any iterable container of
-           :meth:`~sage.geometry.polyhedron.base.base_ring` elements
+          as any iterable container of
+          :meth:`~sage.geometry.polyhedron.base.base_ring` elements
```

Also, shouldn't `_cone_from_Vrepresentation_and_Hrepresentation` be called from somewhere in the code? Or is this done indirectly through the more general framework?


---

Comment by @kliem created at 2019-12-02 08:08:12

New commits:


---

Comment by @kliem created at 2019-12-02 10:09:09

I fixed the alignment error and also at the place, where I copied it from.

The method is not being used yet. I added a branch to #26363, which uses it in order to fix pickling/unpickling.
Initializing from both `Vrep` and `Hrep` does not work yet. Eventually, we should open a new ticket and allow it at least when converting to backend normaliz.

Replying to [comment:10 tscrim]:
> Minor detail:
> {{{#!diff
>          - ``vertices`` -- list of point; each point can be specified
> -           as any iterable container of
> -           :meth:`~sage.geometry.polyhedron.base.base_ring` elements
> +          as any iterable container of
> +          :meth:`~sage.geometry.polyhedron.base.base_ring` elements
> }}}
> Also, shouldn't `_cone_from_Vrepresentation_and_Hrepresentation` be called from somewhere in the code? Or is this done indirectly through the more general framework?


---

Comment by tscrim created at 2019-12-03 02:05:09

Okay. Thanks. Then LGTM.


---

Comment by tscrim created at 2019-12-03 02:05:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-12-08 21:19:39

Resolution: fixed
