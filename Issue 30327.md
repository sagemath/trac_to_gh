# Issue 30327: Upgrade libpng to 1.6.37 (fixes vulnerability)

Issue created by migration from https://trac.sagemath.org/ticket/30564

Original creator: mkoeppe

Original creation time: 2020-09-12 19:21:35

CC:  jpflori frederichan tscrim slelievre dimpase

http://www.libpng.org/pub/png/libpng.html

Previous update: #22159 (1.6.29)

Tarball: see checksums.ini


---

Comment by mkoeppe created at 2020-09-12 19:37:19

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-09-12 19:37:19

New commits:


---

Comment by dimpase created at 2020-09-13 09:38:20

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-09-13 09:38:20

lgtm


---

Comment by mkoeppe created at 2020-09-13 15:46:45

Thanks!


---

Comment by vbraun created at 2020-09-18 20:23:05

Resolution: fixed


---

Comment by vbraun created at 2020-09-20 22:41:47

Changing status from closed to new.


---

Comment by vbraun created at 2020-09-20 22:41:47


```
************************************************************************
Traceback (most recent call last):
  File "setup.py", line 48, in <module>
    from sage_setup.command.sage_build_cython import sage_build_cython
  File "/Users/buildbot-sage/slave/sage_git/build/src/sage_setup/command/sage_build_cython.py", line 19, in <module>
    from sage_setup.library_order import library_order
  File "/Users/buildbot-sage/slave/sage_git/build/src/sage_setup/library_order.py", line 35, in <module>
    png_pc = pkgconfig.parse('libpng')
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/pkgconfig/pkgconfig.py", line 248, in parse
    _raise_if_not_exists(package)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
    raise PackageNotFoundError(package)
pkgconfig.pkgconfig.PackageNotFoundError: libpng not found
************************************************************************
```



---

Comment by vbraun created at 2020-09-20 22:41:47

Resolution changed from fixed to 


---

Comment by dimpase created at 2020-09-27 22:02:44

hmm, libpng installs an unversioned `libpng.pc`, which is a link to `libpng16.pc` - could it be that `pkgconfig.parse('libpng')` does not like it (on macOS - it seems)?


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.
