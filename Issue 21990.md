# Issue 21990: Document make V=0 (silencing the build)

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2017-01-22 01:07:45

CC:  jen vivianepons nthiery egunawan jdemeyer embray dimpase jhpalmieri

Follow-up on #21539, which introduced this feature. Now we document it.

I'm making this dependent on #22178, which updated related documentation.


---

Comment by mkoeppe created at 2017-01-22 04:50:31

Branch is on top of #22178.
----
New commits:


---

Comment by mkoeppe created at 2017-01-22 04:50:31

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2017-01-26 18:23:10

Needs review.


---

Comment by jhpalmieri created at 2017-01-26 19:05:57

I actually don't understand the syntax. If `V` is an environment variable, I think the proper syntax should be `V=0 make`, but here and elsewhere I have seen `make V=0`. Is it a makefile variable instead of an environment variable? Does the difference matter?


---

Comment by jdemeyer created at 2017-01-26 20:01:53

Replying to [comment:4 jhpalmieri]:
> Does the difference matter?

Absolutely.


---

Comment by mkoeppe created at 2017-01-26 21:03:16

Both `V=0 make` and `make V=0` happen to work. This is because `V` is not initialized in the Makefile, so it is picked up from the environment.


---

Comment by mkoeppe created at 2017-01-26 21:08:09

... and, of course, because Makefile variables that are passed on the command line are exported to the shell that executes the recipes.


---

Comment by jhpalmieri created at 2017-01-26 23:11:27

So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?


---

Comment by mkoeppe created at 2017-01-26 23:16:03

There's really no need for this distinction in the manual. 
The syntax `make VARIABLE=value` also works for all other "environment variables" documented in the manual.
For example, you can do `make SAGE_CHECK=yes lrslib`


---

Comment by dimpase created at 2017-01-26 23:16:52

Replying to [comment:8 jhpalmieri]:
> So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?

just refer to an appropriate result about partially commutative semigroups :-)


---

Comment by mkoeppe created at 2017-01-26 23:28:00

Sadly the syntax `make VARIABLE=value` is not as well known as it should. For example, some Sage packages used to patch the Makefile when it would suffice to just override the Makefile values from the command line using this syntax; this cannot be done with environment variables. (I made this change here:  https://git.sagemath.org/sage.git/commit?id=c07489125ea216006f3de513c9fb794ce07d6b29)


---

Comment by jhpalmieri created at 2017-01-26 23:57:44

Replying to [comment:9 mkoeppe]:
> There's really no need for this distinction in the manual. 

That was my question above, "Does the difference matter?"


---

Comment by jdemeyer created at 2017-01-27 07:18:18

Replying to [comment:12 jhpalmieri]:
> That was my question above, "Does the difference matter?"

OK. In general: yes. In this specific case: no.

But I would certainly consider it "best practice" to use it as make variable, not environment variable.


---

Comment by jhpalmieri created at 2017-01-27 20:09:08

Replying to [comment:13 jdemeyer]:
> Replying to [comment:12 jhpalmieri]:
> > That was my question above, "Does the difference matter?"
> 
> OK. In general: yes. In this specific case: no.

Sorry, I wasn't clear enough the first time.


---

Comment by jhpalmieri created at 2017-01-27 21:04:29

So leave the proposed branch as is, or make a change like

```diff
diff --git a/src/doc/en/installation/source.rst b/src/doc/en/installation/source.rst
index cb454d6..1c333aa 100644
--- a/src/doc/en/installation/source.rst
+++ b/src/doc/en/installation/source.rst
`@``@` -908,6 +908,9 `@``@` Here are some of the more commonly used variables affecting the build process:
 
     make -s V=0
 
+  (Note that :envvar:`V` is actually a Makefile variable, not an
+  environment variable.)
+
 - :envvar:`SAGE_CHECK` - if set to ``yes``, then during the build process,
   or when installing packages manually,
   run the test suite for each package which has one.
```

?


---

Comment by mkoeppe created at 2017-01-27 21:28:40

As I said, in my opinion there's really no need for this distinction.
By the way, this syntax is the syntax for setting a Makefile variable;
however, the variable is USED both as a Makefile variable (in `build/make/Makefile`, generated from `build/make/deps`) and as an environment variable (in `build/bin/sage-logger`).


---

Comment by mkoeppe created at 2017-02-01 00:18:54

Ping?


---

Comment by dimpase created at 2017-02-01 11:09:30

How about adding the latest suggestion in comment 15? Then we can set it to positive review IMHO.


---

Comment by git created at 2017-02-01 23:53:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2017-02-01 23:54:04

I've added a similar sentence.


---

Comment by dimpase created at 2017-02-02 00:08:25

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-02-03 23:51:23

Resolution: fixed
