# Issue 21990: Document make V=0 (silencing the build)

archive/issues_021990.json:
```json
{
    "body": "CC:  jen vivianepons nthiery egunawan jdemeyer embray dimpase jhpalmieri\n\nFollow-up on #21539, which introduced this feature. Now we document it.\n\nI'm making this dependent on #22178, which updated related documentation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22227\n\n",
    "created_at": "2017-01-22T01:07:45Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Document make V=0 (silencing the build)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21990",
    "user": "mkoeppe"
}
```
CC:  jen vivianepons nthiery egunawan jdemeyer embray dimpase jhpalmieri

Follow-up on #21539, which introduced this feature. Now we document it.

I'm making this dependent on #22178, which updated related documentation.

Issue created by migration from https://trac.sagemath.org/ticket/22227





---

archive/issue_comments_305667.json:
```json
{
    "body": "Branch is on top of #22178.\n----\nNew commits:",
    "created_at": "2017-01-22T04:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305667",
    "user": "mkoeppe"
}
```

Branch is on top of #22178.
----
New commits:



---

archive/issue_comments_305668.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-22T04:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305668",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_305669.json:
```json
{
    "body": "Needs review.",
    "created_at": "2017-01-26T18:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305669",
    "user": "mkoeppe"
}
```

Needs review.



---

archive/issue_comments_305670.json:
```json
{
    "body": "I actually don't understand the syntax. If `V` is an environment variable, I think the proper syntax should be `V=0 make`, but here and elsewhere I have seen `make V=0`. Is it a makefile variable instead of an environment variable? Does the difference matter?",
    "created_at": "2017-01-26T19:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305670",
    "user": "jhpalmieri"
}
```

I actually don't understand the syntax. If `V` is an environment variable, I think the proper syntax should be `V=0 make`, but here and elsewhere I have seen `make V=0`. Is it a makefile variable instead of an environment variable? Does the difference matter?



---

archive/issue_comments_305671.json:
```json
{
    "body": "Replying to [comment:4 jhpalmieri]:\n> Does the difference matter?\n\nAbsolutely.",
    "created_at": "2017-01-26T20:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305671",
    "user": "jdemeyer"
}
```

Replying to [comment:4 jhpalmieri]:
> Does the difference matter?

Absolutely.



---

archive/issue_comments_305672.json:
```json
{
    "body": "Both `V=0 make` and `make V=0` happen to work. This is because `V` is not initialized in the Makefile, so it is picked up from the environment.",
    "created_at": "2017-01-26T21:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305672",
    "user": "mkoeppe"
}
```

Both `V=0 make` and `make V=0` happen to work. This is because `V` is not initialized in the Makefile, so it is picked up from the environment.



---

archive/issue_comments_305673.json:
```json
{
    "body": "... and, of course, because Makefile variables that are passed on the command line are exported to the shell that executes the recipes.",
    "created_at": "2017-01-26T21:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305673",
    "user": "mkoeppe"
}
```

... and, of course, because Makefile variables that are passed on the command line are exported to the shell that executes the recipes.



---

archive/issue_comments_305674.json:
```json
{
    "body": "So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?",
    "created_at": "2017-01-26T23:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305674",
    "user": "jhpalmieri"
}
```

So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?



---

archive/issue_comments_305675.json:
```json
{
    "body": "There's really no need for this distinction in the manual. \nThe syntax `make VARIABLE=value` also works for all other \"environment variables\" documented in the manual.\nFor example, you can do `make SAGE_CHECK=yes lrslib`",
    "created_at": "2017-01-26T23:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305675",
    "user": "mkoeppe"
}
```

There's really no need for this distinction in the manual. 
The syntax `make VARIABLE=value` also works for all other "environment variables" documented in the manual.
For example, you can do `make SAGE_CHECK=yes lrslib`



---

archive/issue_comments_305676.json:
```json
{
    "body": "Replying to [comment:8 jhpalmieri]:\n> So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?\n\njust refer to an appropriate result about partially commutative semigroups :-)",
    "created_at": "2017-01-26T23:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305676",
    "user": "dimpase"
}
```

Replying to [comment:8 jhpalmieri]:
> So here it is valid to say `make V=0`, but we should indicate that it is a makefile variable, not an environment variable. Right?

just refer to an appropriate result about partially commutative semigroups :-)



---

archive/issue_comments_305677.json:
```json
{
    "body": "Sadly the syntax `make VARIABLE=value` is not as well known as it should. For example, some Sage packages used to patch the Makefile when it would suffice to just override the Makefile values from the command line using this syntax; this cannot be done with environment variables. (I made this change here:  https://git.sagemath.org/sage.git/commit?id=c07489125ea216006f3de513c9fb794ce07d6b29)",
    "created_at": "2017-01-26T23:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305677",
    "user": "mkoeppe"
}
```

Sadly the syntax `make VARIABLE=value` is not as well known as it should. For example, some Sage packages used to patch the Makefile when it would suffice to just override the Makefile values from the command line using this syntax; this cannot be done with environment variables. (I made this change here:  https://git.sagemath.org/sage.git/commit?id=c07489125ea216006f3de513c9fb794ce07d6b29)



---

archive/issue_comments_305678.json:
```json
{
    "body": "Replying to [comment:9 mkoeppe]:\n> There's really no need for this distinction in the manual. \n\nThat was my question above, \"Does the difference matter?\"",
    "created_at": "2017-01-26T23:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305678",
    "user": "jhpalmieri"
}
```

Replying to [comment:9 mkoeppe]:
> There's really no need for this distinction in the manual. 

That was my question above, "Does the difference matter?"



---

archive/issue_comments_305679.json:
```json
{
    "body": "Replying to [comment:12 jhpalmieri]:\n> That was my question above, \"Does the difference matter?\"\n\nOK. In general: yes. In this specific case: no.\n\nBut I would certainly consider it \"best practice\" to use it as make variable, not environment variable.",
    "created_at": "2017-01-27T07:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305679",
    "user": "jdemeyer"
}
```

Replying to [comment:12 jhpalmieri]:
> That was my question above, "Does the difference matter?"

OK. In general: yes. In this specific case: no.

But I would certainly consider it "best practice" to use it as make variable, not environment variable.



---

archive/issue_comments_305680.json:
```json
{
    "body": "Replying to [comment:13 jdemeyer]:\n> Replying to [comment:12 jhpalmieri]:\n> > That was my question above, \"Does the difference matter?\"\n> \n> OK. In general: yes. In this specific case: no.\n\nSorry, I wasn't clear enough the first time.",
    "created_at": "2017-01-27T20:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305680",
    "user": "jhpalmieri"
}
```

Replying to [comment:13 jdemeyer]:
> Replying to [comment:12 jhpalmieri]:
> > That was my question above, "Does the difference matter?"
> 
> OK. In general: yes. In this specific case: no.

Sorry, I wasn't clear enough the first time.



---

archive/issue_comments_305681.json:
```json
{
    "body": "So leave the proposed branch as is, or make a change like\n\n```diff\ndiff --git a/src/doc/en/installation/source.rst b/src/doc/en/installation/source.rst\nindex cb454d6..1c333aa 100644\n--- a/src/doc/en/installation/source.rst\n+++ b/src/doc/en/installation/source.rst\n@@ -908,6 +908,9 @@ Here are some of the more commonly used variables affecting the build process:\n \n     make -s V=0\n \n+  (Note that :envvar:`V` is actually a Makefile variable, not an\n+  environment variable.)\n+\n - :envvar:`SAGE_CHECK` - if set to ``yes``, then during the build process,\n   or when installing packages manually,\n   run the test suite for each package which has one.\n```\n\n?",
    "created_at": "2017-01-27T21:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305681",
    "user": "jhpalmieri"
}
```

So leave the proposed branch as is, or make a change like

```diff
diff --git a/src/doc/en/installation/source.rst b/src/doc/en/installation/source.rst
index cb454d6..1c333aa 100644
--- a/src/doc/en/installation/source.rst
+++ b/src/doc/en/installation/source.rst
@@ -908,6 +908,9 @@ Here are some of the more commonly used variables affecting the build process:
 
     make -s V=0
 
+  (Note that :envvar:`V` is actually a Makefile variable, not an
+  environment variable.)
+
 - :envvar:`SAGE_CHECK` - if set to ``yes``, then during the build process,
   or when installing packages manually,
   run the test suite for each package which has one.
```

?



---

archive/issue_comments_305682.json:
```json
{
    "body": "As I said, in my opinion there's really no need for this distinction.\nBy the way, this syntax is the syntax for setting a Makefile variable;\nhowever, the variable is USED both as a Makefile variable (in `build/make/Makefile`, generated from `build/make/deps`) and as an environment variable (in `build/bin/sage-logger`).",
    "created_at": "2017-01-27T21:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305682",
    "user": "mkoeppe"
}
```

As I said, in my opinion there's really no need for this distinction.
By the way, this syntax is the syntax for setting a Makefile variable;
however, the variable is USED both as a Makefile variable (in `build/make/Makefile`, generated from `build/make/deps`) and as an environment variable (in `build/bin/sage-logger`).



---

archive/issue_comments_305683.json:
```json
{
    "body": "Ping?",
    "created_at": "2017-02-01T00:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305683",
    "user": "mkoeppe"
}
```

Ping?



---

archive/issue_comments_305684.json:
```json
{
    "body": "How about adding the latest suggestion in comment 15? Then we can set it to positive review IMHO.",
    "created_at": "2017-02-01T11:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305684",
    "user": "dimpase"
}
```

How about adding the latest suggestion in comment 15? Then we can set it to positive review IMHO.



---

archive/issue_comments_305685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-01T23:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305686.json:
```json
{
    "body": "I've added a similar sentence.",
    "created_at": "2017-02-01T23:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305686",
    "user": "mkoeppe"
}
```

I've added a similar sentence.



---

archive/issue_comments_305687.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-02T00:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305687",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_305688.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-03T23:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21990",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21990#issuecomment-305688",
    "user": "vbraun"
}
```

Resolution: fixed
