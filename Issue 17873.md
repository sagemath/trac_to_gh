# Issue 17873: Improve "unable to convert string" error message

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-04-02 15:14:39




---

Comment by jdemeyer created at 2015-04-02 16:04:41

New commits:


---

Comment by jdemeyer created at 2015-04-02 16:04:41

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-04-02 16:04:41

Changing keywords from "" to "sd66".


---

Comment by kcrisman created at 2015-04-02 16:11:41

Only one question:

```
+        if isinstance(x, basestring):
+            from sage.misc.sage_eval import sage_eval
```

but there is no corresponding import for `y`, so in theory there could be some situation where `x` wasn't a basestring (whatever that is) but `y` was.  ?  Otherwise looks good.


---

Comment by kcrisman created at 2015-04-02 16:28:22

Otherwise all looks good and passes all tests in `sage/rings`.


---

Comment by jdemeyer created at 2015-04-03 08:15:53

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-04-03 08:15:53

Replying to [comment:3 kcrisman]:
> Only one question:
> {{{
> +        if isinstance(x, basestring):
> +            from sage.misc.sage_eval import sage_eval
> }}}
> but there is no corresponding import for `y`, so in theory there could be some situation where `x` wasn't a basestring (whatever that is) but `y` was.  ?

Good catch. Interestingly, that error was caught by the `except NameError:`...


---

Comment by git created at 2015-04-03 08:21:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-04-03 08:31:12

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2015-04-03 14:41:34

> Good catch. 
Otherwise all is well.
> Interestingly, that error was caught by the `except NameError:`...
LOL


---

Comment by kcrisman created at 2015-04-03 14:41:34

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-14 19:43:19

Resolution: fixed
