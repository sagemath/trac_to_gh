# Issue 34637: Move dev documentation hosting to new sagemath netlify account

Issue created by migration from https://trac.sagemath.org/ticket/34874

Original creator: @tobiasdiez

Original creation time: 2022-12-22 14:14:11

CC:  dimpase mkoeppe schilly was

I'm currently hosting the dev-preview of the docs in my private netlify account. In general, this is not a problem. However, I now regularly get warnings that I've used above 50% of the free bandwidth. For example, at the 22nd Dec I've used 59GB of the free 100GB.

To not run in problems that my other projects are not accessible anymore (they currently use less then 1GB of monthly traffic), I would ask if someone could create a new netlify account in the name of sage and host the docs there.

Moreover, I would suggest someone should investigate why the docs are taking so much traffic. It looks like MathJax is the main issue, loading quite a few files (some of them even multiple times in one request?) and not caching them between requests. Is there a reason not to use MathJax's CDN (for the online build)?


---

Comment by dimpase created at 2022-12-22 14:34:16

Do you host MathJax ? Naturally this is not a good idea for a server, that's what CDNs are for.


---

Comment by @tobiasdiez created at 2022-12-23 07:29:31

Replying to [comment:1 Dima Pasechnik]:
> Do you host MathJax ? Naturally this is not a good idea for a server, that's what CDNs are for.

I "host" the complete documentation, which includes MathJax as a static asset. This is the same as for the production documentation, where the mathjax js file is at https://doc.sagemath.org/html/en/reference/_static/mathjax/tex-chtml.js and the fonts at https://doc.sagemath.org/html/en/reference/_static/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff. 

Another, but similar, "issue" is that the jupyter manager is downloaded from https://unpkg.com/`@`jupyter-widgets/html-manager`@`0.20.2/dist/embed-amd.js instead of from a "proper" cdn such as https://cdn.jsdelivr.net/npm/`@`jupyter-widgets/html-manager`@`0.20.2/dist/embed-amd.js

Yet another standard optimization would be to bundle the css and js files, but I'm not sure how easy this would be with sphinx.
