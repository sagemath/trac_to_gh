# Issue 29907: tox.ini / tox.yml: Move code for tagging/pushing docker images into tox.ini

archive/issues_029907.json:
```json
{
    "body": "CC:  @kliem dimpase\n\nCurrently, some builds on [GitHub](GitHub) Actions time out and then no docker images are pushed. \n\nWe integrate this code into `tox.ini` so that the pushing happens after each of the steps defined by `DOCKER_TARGETS`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30144\n\n",
    "created_at": "2020-07-14T17:39:14Z",
    "labels": [
        "porting",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "tox.ini / tox.yml: Move code for tagging/pushing docker images into tox.ini",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29907",
    "user": "mkoeppe"
}
```
CC:  @kliem dimpase

Currently, some builds on [GitHub](GitHub) Actions time out and then no docker images are pushed. 

We integrate this code into `tox.ini` so that the pushing happens after each of the steps defined by `DOCKER_TARGETS`.

Issue created by migration from https://trac.sagemath.org/ticket/30144





---

archive/issue_comments_424810.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-12T22:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424810",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_424811.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-12T22:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424811",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_424812.json:
```json
{
    "body": "This seems to work well (see for example https://github.com/mkoeppe/sage/runs/978681914); needs review",
    "created_at": "2020-08-14T12:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424812",
    "user": "mkoeppe"
}
```

This seems to work well (see for example https://github.com/mkoeppe/sage/runs/978681914); needs review



---

archive/issue_comments_424813.json:
```json
{
    "body": "Let's get this in please.",
    "created_at": "2020-08-18T13:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424813",
    "user": "mkoeppe"
}
```

Let's get this in please.



---

archive/issue_comments_424814.json:
```json
{
    "body": "Is this to worry about?\n\n\n```\n WARNING! Your password will be stored unencrypted in /home/runner/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\n```\n\n\nOtherwise looks fine.",
    "created_at": "2020-08-18T19:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424814",
    "user": "@kliem"
}
```

Is this to worry about?


```
 WARNING! Your password will be stored unencrypted in /home/runner/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
```


Otherwise looks fine.



---

archive/issue_comments_424815.json:
```json
{
    "body": "This warning is not new, it used to appear in the \"push docker images step\".\n\nThe \"password\" here is a token specifically created for the GitHub packages repository. I don't have a major concern about storing it in cleartext.\n\nSee also https://github.com/docker/build-push-action/issues/53, where the same issue is open for Docker's official actions.",
    "created_at": "2020-08-18T20:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424815",
    "user": "mkoeppe"
}
```

This warning is not new, it used to appear in the "push docker images step".

The "password" here is a token specifically created for the GitHub packages repository. I don't have a major concern about storing it in cleartext.

See also https://github.com/docker/build-push-action/issues/53, where the same issue is open for Docker's official actions.



---

archive/issue_comments_424816.json:
```json
{
    "body": "I figured it was something like this. Just wanted to make sure.",
    "created_at": "2020-08-18T20:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424816",
    "user": "@kliem"
}
```

I figured it was something like this. Just wanted to make sure.



---

archive/issue_comments_424817.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-18T20:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424817",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_424818.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-08-18T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424818",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_424819.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-20T22:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29907#issuecomment-424819",
    "user": "vbraun"
}
```

Resolution: fixed
