# Issue 29907: tox.ini / tox.yml: Move code for tagging/pushing docker images into tox.ini

Issue created by migration from https://trac.sagemath.org/ticket/30144

Original creator: mkoeppe

Original creation time: 2020-07-14 17:39:14

CC:  @kliem dimpase

Currently, some builds on [GitHub](GitHub) Actions time out and then no docker images are pushed. 

We integrate this code into `tox.ini` so that the pushing happens after each of the steps defined by `DOCKER_TARGETS`.


---

Comment by mkoeppe created at 2020-08-12 22:40:04

New commits:


---

Comment by mkoeppe created at 2020-08-12 22:40:04

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-08-14 12:01:21

This seems to work well (see for example https://github.com/mkoeppe/sage/runs/978681914); needs review


---

Comment by mkoeppe created at 2020-08-18 13:58:51

Let's get this in please.


---

Comment by @kliem created at 2020-08-18 19:54:31

Is this to worry about?


```
 WARNING! Your password will be stored unencrypted in /home/runner/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
```


Otherwise looks fine.


---

Comment by mkoeppe created at 2020-08-18 20:20:54

This warning is not new, it used to appear in the "push docker images step".

The "password" here is a token specifically created for the GitHub packages repository. I don't have a major concern about storing it in cleartext.

See also https://github.com/docker/build-push-action/issues/53, where the same issue is open for Docker's official actions.


---

Comment by @kliem created at 2020-08-18 20:36:28

I figured it was something like this. Just wanted to make sure.


---

Comment by @kliem created at 2020-08-18 20:36:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-08-18 20:45:59

Thanks!


---

Comment by vbraun created at 2020-08-20 22:23:17

Resolution: fixed
