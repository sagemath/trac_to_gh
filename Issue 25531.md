# Issue 25531: py3: fix auxiliary graph in link.py

archive/issues_025531.json:
```json
{
    "body": "CC:  tscrim embray jdemeyer\n\nSo that it can work in python3.\n\nThis currently means that all vertices should be comparable, so we turn integer vertices to tuples of length 1.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25768\n\n",
    "created_at": "2018-07-04T11:43:50Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "py3: fix auxiliary graph in link.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25531",
    "user": "chapoton"
}
```
CC:  tscrim embray jdemeyer

So that it can work in python3.

This currently means that all vertices should be comparable, so we turn integer vertices to tuples of length 1.

Issue created by migration from https://trac.sagemath.org/ticket/25768





---

archive/issue_comments_359998.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-07-04T11:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-359998",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_359999.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-07-04T11:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-359999",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_360000.json:
```json
{
    "body": "That is a clever workaround, but I am not sure we should/need to do this. We do want to remove the forced sorting on graphs, which is generic problem. So I am a little hesitant to make the code more complicated for this reason.",
    "created_at": "2018-07-09T14:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360000",
    "user": "tscrim"
}
```

That is a clever workaround, but I am not sure we should/need to do this. We do want to remove the forced sorting on graphs, which is generic problem. So I am a little hesitant to make the code more complicated for this reason.



---

archive/issue_comments_360001.json:
```json
{
    "body": "indeed. The issue here will probably be fixed (in a smarter way) in #25769",
    "created_at": "2018-07-09T16:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360001",
    "user": "chapoton"
}
```

indeed. The issue here will probably be fixed (in a smarter way) in #25769



---

archive/issue_comments_360002.json:
```json
{
    "body": "I don't get it.  Why `len(x) == 3`?",
    "created_at": "2018-07-10T10:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360002",
    "user": "embray"
}
```

I don't get it.  Why `len(x) == 3`?



---

archive/issue_comments_360003.json:
```json
{
    "body": "The Python 3 version of the `pprint` module sorts objects safely e.g. like how it sorts dicts: https://github.com/python/cpython/blob/3.7/Lib/pprint.py#L180 by using a [_safe_key](https://github.com/python/cpython/blob/3.7/Lib/pprint.py#L72) class which basically wraps objects in such a way that restores Python 2-style comparison.\n\nWhat we really need is a version of this in Sage.  It's too bad the one in Python is just an internal implementation detail in a relatively obscure module.  But it's easy enough to replicate.  We can also provide a `safe_sorted` which ensures each sort key is automatically wrapped.",
    "created_at": "2018-07-10T10:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360003",
    "user": "embray"
}
```

The Python 3 version of the `pprint` module sorts objects safely e.g. like how it sorts dicts: https://github.com/python/cpython/blob/3.7/Lib/pprint.py#L180 by using a [_safe_key](https://github.com/python/cpython/blob/3.7/Lib/pprint.py#L72) class which basically wraps objects in such a way that restores Python 2-style comparison.

What we really need is a version of this in Sage.  It's too bad the one in Python is just an internal implementation detail in a relatively obscure module.  But it's easy enough to replicate.  We can also provide a `safe_sorted` which ensures each sort key is automatically wrapped.



---

archive/issue_comments_360004.json:
```json
{
    "body": "Replying to [ticket:25768 chapoton]:\n> This currently means that all vertices should be comparable, so we turn integer vertices to tuples of length 1.\n\n??? That's not a real solution.",
    "created_at": "2018-07-10T11:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360004",
    "user": "jdemeyer"
}
```

Replying to [ticket:25768 chapoton]:
> This currently means that all vertices should be comparable, so we turn integer vertices to tuples of length 1.

??? That's not a real solution.



---

archive/issue_comments_360005.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-07-10T11:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360005",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_360006.json:
```json
{
    "body": "The real solution is already done in #25769",
    "created_at": "2018-07-10T11:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360006",
    "user": "chapoton"
}
```

The real solution is already done in #25769



---

archive/issue_comments_360007.json:
```json
{
    "body": "I don't think that's a \"real solution\" either (although I do believe it's a useful feature).",
    "created_at": "2018-07-10T12:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360007",
    "user": "embray"
}
```

I don't think that's a "real solution" either (although I do believe it's a useful feature).



---

archive/issue_comments_360008.json:
```json
{
    "body": "milestone update 8.3 -> 8.4",
    "created_at": "2018-08-03T19:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360008",
    "user": "vdelecroix"
}
```

milestone update 8.3 -> 8.4



---

archive/issue_comments_360009.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-08-11T08:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360009",
    "user": "chapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_360010.json:
```json
{
    "body": "Here is a new proposal.\n----\nNew commits:",
    "created_at": "2018-08-11T08:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360010",
    "user": "chapoton"
}
```

Here is a new proposal.
----
New commits:



---

archive/issue_comments_360011.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-11T08:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360011",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_360012.json:
```json
{
    "body": "LGTM. Thanks.",
    "created_at": "2018-08-11T08:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360012",
    "user": "tscrim"
}
```

LGTM. Thanks.



---

archive/issue_comments_360013.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-17T21:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25531",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25531#issuecomment-360013",
    "user": "vbraun"
}
```

Resolution: fixed
