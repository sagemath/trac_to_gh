# Issue 13694: OSX build failure in mercurial with FSF GCC

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-01-01 20:55:41

Assignee: tbd

As reported on https://groups.google.com/d/topic/sage-devel/kfXamuej_Gs/discussion

```
gcc -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -O2 -g -m64 
-I/opt/sage/sage-5.6.beta1/local/include/python2.7 -c mercurial/osutil.c 
-o build/temp.macosx-10.8-x86_64-2.7/mercurial/osutil.o 
In file included from 
/System/Library/Frameworks/Foundation.framework/Headers/NSObject.h:5:0, 
                  from /usr/include/os/object.h:74, 
                  from /usr/include/dispatch/dispatch.h:48, 
                  from 
/System/Library/Frameworks/CoreFoundation.framework/Headers/CFMessagePort.h:11, 
                  from 
/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:68, 
                  from 
/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/CarbonCore.h:18, 
                  from 
/System/Library/Frameworks/CoreServices.framework/Frameworks/AE.framework/Headers/AE.h:20, 
                  from 
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:18, 
                  from 
/System/Library/Frameworks/ApplicationServices.framework/Headers/ApplicationServices.h:24, 
                  from mercurial/osutil.c:523: 
/System/Library/Frameworks/Foundation.framework/Headers/NSObjCRuntime.h:409:1: 
Fehler: verirrtes »`@`« im Programm 
```



---

Comment by vbraun created at 2013-01-01 21:01:59

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-01-01 21:02:34

diff for review only


---

Attachment

The spkg obviously looks fine. But we need to check that this actually fixes the problem.


---

Comment by zeier created at 2013-01-07 10:49:05

diff for review only


---

Attachment

diff for review only


---

Attachment

I have tested all three patches also with sage-5.6.beta2


---

Comment by jhpalmieri created at 2013-01-10 21:55:19

One data point: on an OS X 10.8.2 machine on which I had no problems before, everything still works after using these spkgs.


---

Comment by zeier created at 2013-01-14 15:49:52

I have just tested the three provided spkg files with sage-5.6.rc0 on OS X 10.8.2. Everything compiles.


---

Attachment

diff for review


---

Comment by zeier created at 2013-04-24 07:23:00

diff for review


---

Attachment

Updated spkgs and diffs for python and r are included as they have changed in the meantime. The new ones build on python-2.7.3.p6 and r-2.15-2-p1. They can be applied to sage-5.9.beta5.


---

Comment by vbraun created at 2013-04-24 09:41:37

The Python spkg needs to be rebased on top of #14423. And I'm not going to do it, I fixed it once and nobody reviewed it.


---

Comment by vbraun created at 2013-04-24 09:41:53

Changing status from needs_review to needs_work.


---

Comment by jhpalmieri created at 2014-01-31 19:35:27

I think this can be closed, since we no longer distribute Mercurial.


---

Comment by jhpalmieri created at 2014-01-31 19:35:27

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-01-31 19:42:02

Resolution: wontfix
