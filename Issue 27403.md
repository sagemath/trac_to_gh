# Issue 27403: Shi arrangement for other types

archive/issues_027403.json:
```json
{
    "body": "CC:  vivianepons @tscrim\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27640\n\n",
    "created_at": "2019-04-11T09:04:19Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Shi arrangement for other types",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27403",
    "user": "etzanaki"
}
```
CC:  vivianepons @tscrim



Issue created by migration from https://trac.sagemath.org/ticket/27640





---

archive/issue_comments_386348.json:
```json
{
    "body": "Changing keywords from \"\" to \"#days98\".",
    "created_at": "2019-04-11T09:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386348",
    "user": "etzanaki"
}
```

Changing keywords from "" to "#days98".



---

archive/issue_comments_386349.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2019-04-11T09:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386349",
    "user": "etzanaki"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_386350.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-04-12T08:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386350",
    "user": "@tscrim"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_386351.json:
```json
{
    "body": "Changing keywords from \"#days98\" to \"days98\".",
    "created_at": "2019-04-12T08:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386351",
    "user": "@tscrim"
}
```

Changing keywords from "#days98" to "days98".



---

archive/issue_comments_386352.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386352",
    "user": "etzanaki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_386353.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386353",
    "user": "etzanaki"
}
```

New commits:



---

archive/issue_comments_386354.json:
```json
{
    "body": "Some PEP8 and other misc small comments:\n\n\n```diff\n-    def Shi(self, data, K=QQ, names=None, m = 1):\n+    def Shi(self, data, K=QQ, names=None, m=1):\n```\n\n\n```diff\n         The characteristic polynomial is pre-computed using the results of\n-         [Ath1996]_ .\n+        [Ath1996]_.\n```\n\n\n```diff\n         if data in NN:\n-            cartan_type = CartanType([\"A\",data -1])\n+            cartan_type = CartanType(['A', data-1])\n```\n\n\n```diff\n         for a in PR:\n             for const in range(-m+1,m+1):\n-                hyperplanes.append(sum(a[j]*x[j] for j in range(d\n-                ))-const)\n+                hyperplanes.append(sum(a[j]*x[j] for j in range(d))-const)\n```\n\n(the 80 char/line is much more of a guideline and you should never sacrifice readability for it IMO).\n\n```diff\n-        charpoly = (x**(d-n))*(x-m*h)**n\n+        charpoly = x**(d-n) * (x - m*h)**n\n```\n\n\nIt would also be nice to remove those added blanklines at the end of the file.\n----\nNew commits:",
    "created_at": "2019-04-13T08:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386354",
    "user": "@tscrim"
}
```

Some PEP8 and other misc small comments:


```diff
-    def Shi(self, data, K=QQ, names=None, m = 1):
+    def Shi(self, data, K=QQ, names=None, m=1):
```


```diff
         The characteristic polynomial is pre-computed using the results of
-         [Ath1996]_ .
+        [Ath1996]_.
```


```diff
         if data in NN:
-            cartan_type = CartanType(["A",data -1])
+            cartan_type = CartanType(['A', data-1])
```


```diff
         for a in PR:
             for const in range(-m+1,m+1):
-                hyperplanes.append(sum(a[j]*x[j] for j in range(d
-                ))-const)
+                hyperplanes.append(sum(a[j]*x[j] for j in range(d))-const)
```

(the 80 char/line is much more of a guideline and you should never sacrifice readability for it IMO).

```diff
-        charpoly = (x**(d-n))*(x-m*h)**n
+        charpoly = x**(d-n) * (x - m*h)**n
```


It would also be nice to remove those added blanklines at the end of the file.
----
New commits:



---

archive/issue_comments_386355.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-13T09:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386355",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386356.json:
```json
{
    "body": "It looks like the bot is happy. I have fixed the small things pointed by Travis. \n\nEleni wrote the initial code and I helped with the design and details. The code extends the previous functionalities of the function. The previous usage is still valid and works exactly the same (we haven't changed those tests) and now we have more options (with Cartan types and m parameter), all documented. Eleni checked the math quite carefully. \n\nSo Travis, I let you have a look and hopefully, we can have a positive review soon.",
    "created_at": "2019-04-13T10:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386356",
    "user": "@VivianePons"
}
```

It looks like the bot is happy. I have fixed the small things pointed by Travis. 

Eleni wrote the initial code and I helped with the design and details. The code extends the previous functionalities of the function. The previous usage is still valid and works exactly the same (we haven't changed those tests) and now we have more options (with Cartan types and m parameter), all documented. Eleni checked the math quite carefully. 

So Travis, I let you have a look and hopefully, we can have a positive review soon.



---

archive/issue_comments_386357.json:
```json
{
    "body": "- avoid using unicode \"\u2013\" in the references, just use - (minus)\n\n- in the doctests, write `h = hyperplane`, namely add space around =\n\n- do not repeat the \"EXAMPLES::\"\n\notherwise, looks good",
    "created_at": "2019-04-13T11:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386357",
    "user": "@fchapoton"
}
```

- avoid using unicode "â€“" in the references, just use - (minus)

- in the doctests, write `h = hyperplane`, namely add space around =

- do not repeat the "EXAMPLES::"

otherwise, looks good



---

archive/issue_comments_386358.json:
```json
{
    "body": "and this line is useless, as told by the patchbot:\n\n```\nR = RootSystem(cartan_type)\n```\n",
    "created_at": "2019-04-13T11:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386358",
    "user": "@fchapoton"
}
```

and this line is useless, as told by the patchbot:

```
R = RootSystem(cartan_type)
```




---

archive/issue_comments_386359.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-13T11:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386359",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386360.json:
```json
{
    "body": "All done!",
    "created_at": "2019-04-13T11:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386360",
    "user": "@VivianePons"
}
```

All done!



---

archive/issue_comments_386361.json:
```json
{
    "body": "ok, thx",
    "created_at": "2019-04-13T14:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386361",
    "user": "@fchapoton"
}
```

ok, thx



---

archive/issue_comments_386362.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-13T14:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386362",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_386363.json:
```json
{
    "body": "Viviane, I added you as an author based on comment:9. If you feel you closer to a reviewer, feel free to move yourself over.",
    "created_at": "2019-04-13T15:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386363",
    "user": "@tscrim"
}
```

Viviane, I added you as an author based on comment:9. If you feel you closer to a reviewer, feel free to move yourself over.



---

archive/issue_comments_386364.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-15T17:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27403#issuecomment-386364",
    "user": "@vbraun"
}
```

Resolution: fixed
