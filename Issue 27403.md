# Issue 27403: Shi arrangement for other types

Issue created by migration from https://trac.sagemath.org/ticket/27640

Original creator: etzanaki

Original creation time: 2019-04-11 09:04:19

CC:  vivianepons tscrim




---

Comment by etzanaki created at 2019-04-11 09:09:33

Changing keywords from "" to "#days98".


---

Comment by etzanaki created at 2019-04-11 09:09:33

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by tscrim created at 2019-04-12 08:31:02

Changing type from PLEASE CHANGE to enhancement.


---

Comment by tscrim created at 2019-04-12 08:31:02

Changing keywords from "#days98" to "days98".


---

Comment by etzanaki created at 2019-04-13 07:17:31

Changing status from new to needs_review.


---

Comment by etzanaki created at 2019-04-13 07:17:31

New commits:


---

Comment by tscrim created at 2019-04-13 08:49:27

Some PEP8 and other misc small comments:


```diff
-    def Shi(self, data, K=QQ, names=None, m = 1):
+    def Shi(self, data, K=QQ, names=None, m=1):
```


```diff
         The characteristic polynomial is pre-computed using the results of
-         [Ath1996]_ .
+        [Ath1996]_.
```


```diff
         if data in NN:
-            cartan_type = CartanType(["A",data -1])
+            cartan_type = CartanType(['A', data-1])
```


```diff
         for a in PR:
             for const in range(-m+1,m+1):
-                hyperplanes.append(sum(a[j]*x[j] for j in range(d
-                ))-const)
+                hyperplanes.append(sum(a[j]*x[j] for j in range(d))-const)
```

(the 80 char/line is much more of a guideline and you should never sacrifice readability for it IMO).

```diff
-        charpoly = (x**(d-n))*(x-m*h)**n
+        charpoly = x**(d-n) * (x - m*h)**n
```


It would also be nice to remove those added blanklines at the end of the file.
----
New commits:


---

Comment by git created at 2019-04-13 09:12:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by VivianePons created at 2019-04-13 10:53:59

It looks like the bot is happy. I have fixed the small things pointed by Travis. 

Eleni wrote the initial code and I helped with the design and details. The code extends the previous functionalities of the function. The previous usage is still valid and works exactly the same (we haven't changed those tests) and now we have more options (with Cartan types and m parameter), all documented. Eleni checked the math quite carefully. 

So Travis, I let you have a look and hopefully, we can have a positive review soon.


---

Comment by chapoton created at 2019-04-13 11:25:29

- avoid using unicode "â€“" in the references, just use - (minus)

- in the doctests, write `h = hyperplane`, namely add space around =

- do not repeat the "EXAMPLES::"

otherwise, looks good


---

Comment by chapoton created at 2019-04-13 11:28:44

and this line is useless, as told by the patchbot:

```
R = RootSystem(cartan_type)
```



---

Comment by git created at 2019-04-13 11:59:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by VivianePons created at 2019-04-13 11:59:33

All done!


---

Comment by chapoton created at 2019-04-13 14:02:32

ok, thx


---

Comment by chapoton created at 2019-04-13 14:02:32

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-04-13 15:16:00

Viviane, I added you as an author based on comment:9. If you feel you closer to a reviewer, feel free to move yourself over.


---

Comment by vbraun created at 2019-04-15 17:47:59

Resolution: fixed
