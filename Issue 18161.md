# Issue 18161: Automate Branching Rules for IntegrableRepresentations

archive/issues_018161.json:
```json
{
    "body": "CC:  sage-combinat\n\nCurrently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18398\n\n",
    "created_at": "2015-05-10T22:09:34Z",
    "labels": [
        "combinatorics",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Automate Branching Rules for IntegrableRepresentations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18161",
    "user": "bump"
}
```
CC:  sage-combinat

Currently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.

Issue created by migration from https://trac.sagemath.org/ticket/18398





---

archive/issue_comments_244940.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-11T04:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244940",
    "user": "bump"
}
```

New commits:



---

archive/issue_comments_244941.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-11T18:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244941",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244942.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-11T18:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244942",
    "user": "bump"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244943.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-05-11T18:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244943",
    "user": "bump"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_244944.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-11T23:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244944",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244945.json:
```json
{
    "body": "I think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?",
    "created_at": "2015-06-23T07:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244945",
    "user": "tscrim"
}
```

I think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?



---

archive/issue_comments_244946.json:
```json
{
    "body": "This patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.\n\nSo although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.\n\n> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. \n\nFollowing a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. \n\n\n```\nsage: R1=branching_rule(\"E7\",\"A7\",\"extended\")\nsage: type(R1)\n<class 'sage.combinat.root_system.branching_rules.BranchingRule'>\nsage: R2=branching_rule(\"A7\",\"A3xA3\",\"levi\")\nsage: R1*R2\ncomposite branching rule E7 => (extended) A7 => (levi) A3xA3\n```\n\n\nOne could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.",
    "created_at": "2015-09-13T02:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244946",
    "user": "bump"
}
```

This patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.

So although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.

> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. 

Following a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. 


```
sage: R1=branching_rule("E7","A7","extended")
sage: type(R1)
<class 'sage.combinat.root_system.branching_rules.BranchingRule'>
sage: R2=branching_rule("A7","A3xA3","levi")
sage: R1*R2
composite branching rule E7 => (extended) A7 => (levi) A3xA3
```


One could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.



---

archive/issue_comments_244947.json:
```json
{
    "body": "We could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.",
    "created_at": "2015-10-12T18:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244947",
    "user": "tscrim"
}
```

We could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.



---

archive/issue_comments_244948.json:
```json
{
    "body": "multiple doctests fail, cf. patchbot",
    "created_at": "2017-01-05T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244948",
    "user": "cheuberg"
}
```

multiple doctests fail, cf. patchbot



---

archive/issue_comments_244949.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244949",
    "user": "cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_244950.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-12T20:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18161#issuecomment-244950",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
