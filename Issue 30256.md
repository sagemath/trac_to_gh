# Issue 30256: bug in border case in highest weight vectors of tensor product of crystals

Issue created by migration from https://trac.sagemath.org/ticket/30493

Original creator: mantepse

Original creation time: 2020-09-02 14:39:22

CC:  tscrim


```
sage: CW = CartanType("G", 2)
sage: C = crystals.Letters(CW)
sage: C.highest_weight_vectors()
(1,)
sage: T = crystals.TensorProduct(C)
sage: T.highest_weight_vectors()
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-33-feba30ccc2e6> in <module>()
----> 1 T.highest_weight_vectors()

/home/martin/sage-develop/local/lib/python3.7/site-packages/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)()
   2308         if self.cache is None:
   2309             f = self.f
-> 2310             self.cache = f(self._instance)
   2311         return self.cache
   2312 

/home/martin/sage-develop/local/lib/python3.7/site-packages/sage/categories/highest_weight_crystals.py in highest_weight_vectors(self)
    713                      [[[-2]], [[1, 1], [2, 2]]])
    714                 """
--> 715                 return tuple(self.highest_weight_vectors_iterator())
    716 
    717             def highest_weight_vectors_iterator(self):

/home/martin/sage-develop/local/lib/python3.7/site-packages/sage/categories/highest_weight_crystals.py in highest_weight_vectors_iterator(self)
    786                     T_phi = [None]*(m-1) + [{i: b.phi(i) for i in I}]
    787                     while T_pos < m:
--> 788                         if T_cur[T_pos] == T_len[T_pos]:
    789                             T_cur[T_pos] = 0
    790                             T_pos += 1

IndexError: list index out of range
sage: T = crystals.TensorProduct(C, C)
sage: T.highest_weight_vectors()
([1, 1], [2, 1], [0, 1], [-1, 1])
```



---

Comment by tscrim created at 2020-09-03 04:07:11

Simple fix to handle the corner case.
----
New commits:


---

Comment by tscrim created at 2020-09-03 04:07:11

Changing status from new to needs_review.


---

Comment by mantepse created at 2020-09-03 10:02:17

Thank you!


---

Comment by mantepse created at 2020-09-03 10:02:17

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-09-23 21:27:46

Resolution: fixed
