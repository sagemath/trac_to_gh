# Issue 24179: GeneralDiscreteDistribution broken when entries >= 10^309

archive/issues_024179.json:
```json
{
    "body": "Keywords: thursdaysbdx\n\n\n```\nsage: from collections import Counter\n```\n\n\nThis is ok:\n\n```\nsage: X = GeneralDiscreteDistribution([1,2,10^308])\nsage: Counter(X.get_random_element() for _ in range(100))\nCounter({2: 100})\nsage: Counter(X.get_random_element() for _ in range(100))\nCounter({2: 100})\n```\n\n\nThis is not ok:\n\n```\nsage: X = GeneralDiscreteDistribution([1,2,10^309])\nsage: Counter(X.get_random_element() for _ in range(100))\nCounter({2: 66, 0: 34})\nsage: Counter(X.get_random_element() for _ in range(100))\nCounter({2: 67, 0: 33})\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24416\n\n",
    "created_at": "2017-12-21T15:21:21Z",
    "labels": [
        "component: statistics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "GeneralDiscreteDistribution broken when entries >= 10^309",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24179",
    "user": "https://github.com/seblabbe"
}
```
Keywords: thursdaysbdx


```
sage: from collections import Counter
```


This is ok:

```
sage: X = GeneralDiscreteDistribution([1,2,10^308])
sage: Counter(X.get_random_element() for _ in range(100))
Counter({2: 100})
sage: Counter(X.get_random_element() for _ in range(100))
Counter({2: 100})
```


This is not ok:

```
sage: X = GeneralDiscreteDistribution([1,2,10^309])
sage: Counter(X.get_random_element() for _ in range(100))
Counter({2: 66, 0: 34})
sage: Counter(X.get_random_element() for _ in range(100))
Counter({2: 67, 0: 33})
```


Issue created by migration from https://trac.sagemath.org/ticket/24416





---

archive/issue_comments_338378.json:
```json
{
    "body": "... replacing `10^309` by `2^1024`",
    "created_at": "2017-12-21T15:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338378",
    "user": "https://github.com/seblabbe"
}
```

... replacing `10^309` by `2^1024`



---

archive/issue_comments_338379.json:
```json
{
    "body": "The proposed fix simply does what `GeneralDiscreteDistribution?` says:\n\n\n```\n* \"P\" - list of probabilities. The list will automatically be\n  normalised if \"sum(P)\" is not equal to 1. \n```\n\n----\nNew commits:",
    "created_at": "2018-05-01T08:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338379",
    "user": "https://github.com/seblabbe"
}
```

The proposed fix simply does what `GeneralDiscreteDistribution?` says:


```
* "P" - list of probabilities. The list will automatically be
  normalised if "sum(P)" is not equal to 1. 
```

----
New commits:



---

archive/issue_comments_338380.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-01T08:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338380",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338381.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-01T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338381",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_338382.json:
```json
{
    "body": "Na\u00efsse!",
    "created_at": "2018-05-01T12:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338382",
    "user": "https://github.com/videlec"
}
```

Naïsse!



---

archive/issue_comments_338383.json:
```json
{
    "body": "Merci.\n\nEt si tu es motiv\u00e9, tu peux terminer le review de #25125 qui prolonge le #24315 que tu avais d\u00e9j\u00e0 review\u00e9",
    "created_at": "2018-05-01T13:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338383",
    "user": "https://github.com/seblabbe"
}
```

Merci.

Et si tu es motivé, tu peux terminer le review de #25125 qui prolonge le #24315 que tu avais déjà reviewé



---

archive/issue_events_022590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:26:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24179#event-22590"
}
```



---

archive/issue_comments_338384.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24179#issuecomment-338384",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
