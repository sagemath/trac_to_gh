# Issue 28568: Remove sagenb from DOC_DEPENDENCIES

archive/issues_028568.json:
```json
{
    "body": "CC:  @jhpalmieri @embray @isuruf @timokau\n\nWe took care of removing all the dependencies to sagenb during build, in particular, the build of documentation. We also have switched to python3 by default but sagenb is still installed in python3 builds because of its presence in `DOC_DEPENDENCIES`. It should be removed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28805\n\n",
    "closed_at": "2019-11-29T23:57:41Z",
    "created_at": "2019-11-25T22:56:14Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Remove sagenb from DOC_DEPENDENCIES",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28568",
    "user": "https://github.com/kiwifb"
}
```
CC:  @jhpalmieri @embray @isuruf @timokau

We took care of removing all the dependencies to sagenb during build, in particular, the build of documentation. We also have switched to python3 by default but sagenb is still installed in python3 builds because of its presence in `DOC_DEPENDENCIES`. It should be removed.

Issue created by migration from https://trac.sagemath.org/ticket/28805





---

archive/issue_comments_402872.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-11-25T23:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402872",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_402873.json:
```json
{
    "body": "And with this commit `sagenb` is well and truly optional. Its installation will require manual intervention.\n\n---\nNew commits:",
    "created_at": "2019-11-25T23:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402873",
    "user": "https://github.com/kiwifb"
}
```

And with this commit `sagenb` is well and truly optional. Its installation will require manual intervention.

---
New commits:



---

archive/issue_comments_402874.json:
```json
{
    "body": "I'm seeing doctest failures in `tests/cmdline.py` because the script `sage-rst2txt` tries to import `sagenb`. I guess that test should be tagged `# py2`. Actually, should many of the `py2` tags in that file be changed to `optional: sagenb`?\n\nMaybe it's better to keep them as `py2` so that we can find them and delete them more easily, once we drop support for Python 2.",
    "created_at": "2019-11-26T04:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402874",
    "user": "https://github.com/jhpalmieri"
}
```

I'm seeing doctest failures in `tests/cmdline.py` because the script `sage-rst2txt` tries to import `sagenb`. I guess that test should be tagged `# py2`. Actually, should many of the `py2` tags in that file be changed to `optional: sagenb`?

Maybe it's better to keep them as `py2` so that we can find them and delete them more easily, once we drop support for Python 2.



---

archive/issue_comments_402875.json:
```json
{
    "body": "Actually I removed all those from sage-on-gentoo. I was wondering why I was the only one seemingly seeing these failures.\n\n---\nNew commits:",
    "created_at": "2019-11-26T05:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402875",
    "user": "https://github.com/kiwifb"
}
```

Actually I removed all those from sage-on-gentoo. I was wondering why I was the only one seemingly seeing these failures.

---
New commits:



---

archive/issue_comments_402876.json:
```json
{
    "body": "looks good to me. Any other opinion ?",
    "created_at": "2019-11-27T08:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402876",
    "user": "https://github.com/fchapoton"
}
```

looks good to me. Any other opinion ?



---

archive/issue_comments_402877.json:
```json
{
    "body": "It works for me. I'm happy with the basic setup, so someone should review my commit.",
    "created_at": "2019-11-27T17:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402877",
    "user": "https://github.com/jhpalmieri"
}
```

It works for me. I'm happy with the basic setup, so someone should review my commit.



---

archive/issue_comments_402878.json:
```json
{
    "body": "does `rst2txt` need Pyhton2, or sagenb? and if yes, why?",
    "created_at": "2019-11-27T18:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402878",
    "user": "https://github.com/dimpase"
}
```

does `rst2txt` need Pyhton2, or sagenb? and if yes, why?



---

archive/issue_comments_402879.json:
```json
{
    "body": "The script `sage-rst2txt` contains the line\n\n```\nfrom sagenb.notebook.docHTMLProcessor import docutilsHTMLProcessor\n```\nand that import is in fact used.\n\nAs I said in comment:2, we could tag the relevant tests as `# optional - sagenb`, but I think we will eventually want to delete tests marked `# py2`, and then we might forget to deal with tests marked with `sagenb` instead.",
    "created_at": "2019-11-27T18:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402879",
    "user": "https://github.com/jhpalmieri"
}
```

The script `sage-rst2txt` contains the line

```
from sagenb.notebook.docHTMLProcessor import docutilsHTMLProcessor
```
and that import is in fact used.

As I said in comment:2, we could tag the relevant tests as `# optional - sagenb`, but I think we will eventually want to delete tests marked `# py2`, and then we might forget to deal with tests marked with `sagenb` instead.



---

archive/issue_comments_402880.json:
```json
{
    "body": "`docutilsHTMLProcessor` can be trivially pulled out of sagenb. I don't know whether it's of any use though, but still...",
    "created_at": "2019-11-27T19:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402880",
    "user": "https://github.com/dimpase"
}
```

`docutilsHTMLProcessor` can be trivially pulled out of sagenb. I don't know whether it's of any use though, but still...



---

archive/issue_comments_402881.json:
```json
{
    "body": "Replying to [comment:9 dimpase]:\n> `docutilsHTMLProcessor` can be trivially pulled out of sagenb. I don't know whether it's of any use though, but still...\n\n\nThe purpose of `sage-rst2txt` is \"Translate a rst file into a worksheet txt file.\" I'm not sure what a \"worksheet txt file\" is, but I think it's for SageNB. So I don't see the point of separating `sage-rst2txt` from `sagenb`.",
    "created_at": "2019-11-27T20:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402881",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:9 dimpase]:
> `docutilsHTMLProcessor` can be trivially pulled out of sagenb. I don't know whether it's of any use though, but still...


The purpose of `sage-rst2txt` is "Translate a rst file into a worksheet txt file." I'm not sure what a "worksheet txt file" is, but I think it's for SageNB. So I don't see the point of separating `sage-rst2txt` from `sagenb`.



---

archive/issue_comments_402882.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-27T20:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402882",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_402883.json:
```json
{
    "body": "OK, fine, I should have read the output of `sage --rst2txt`, sorry. Thanks.",
    "created_at": "2019-11-27T20:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402883",
    "user": "https://github.com/dimpase"
}
```

OK, fine, I should have read the output of `sage --rst2txt`, sorry. Thanks.



---

archive/issue_events_072791.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-29T23:57:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28568#event-72791"
}
```



---

archive/issue_comments_402884.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-29T23:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28568#issuecomment-402884",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
