# Issue 17672: Rankin Cohen brackets for (quasi) modular forms for Hecke triangle groups

Issue created by migration from https://trac.sagemath.org/ticket/17909

Original creator: jj

Original creation time: 2015-03-07 15:15:27

CC:  mraum vdelecroix cremona

Keywords: modular forms hecke triangle groups rankin cohen bracket

This ticket (will) add support for Rankin Cohen brackets for (quasi) modular forms.
The formulas shouldn't changefor Hecke triangle groups.

See:

- http://arxiv.org/abs/math/0509653
- http://arxiv.org/abs/1306.3634v2

Todo:
- Check more general analytic types (quasi weak/meromorphic forms)
- Add validation of parameters (s,t)
- Explore the algebraic nature of the bracket:
  If s or t is None the bracket is no longer bilinear but it satisfy a Leibnitz rule
- More documentation and tests
- Explore alternative brackets


---

Comment by git created at 2015-03-07 22:10:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jj created at 2015-03-07 22:14:53

Changing status from new to needs_review.


---

Comment by git created at 2015-03-12 19:17:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-12 22:50:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-04-16 16:42:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jj created at 2015-04-16 16:43:49

Rebase on u/jj/theta_coercion


---

Comment by git created at 2015-10-15 17:44:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-11-12 23:20:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-12-23 22:34:52

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jj created at 2015-12-24 02:39:21

Changing priority from minor to major.


---

Comment by chapoton created at 2016-08-28 14:59:10

I just changed a broken import
----
New commits:


---

Comment by chapoton created at 2017-04-17 08:31:17

ping ?


---

Comment by jj created at 2017-04-17 13:19:18

rebased on develop, applied chapoton's commit
----
New commits:


---

Comment by jj created at 2017-04-17 13:19:18

Changing priority from major to minor.


---

Comment by git created at 2017-04-17 15:10:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-17 15:27:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-25 05:22:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-05-02 19:57:06

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-08-10 20:00:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-08-30 19:43:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-11-07 20:40:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2018-11-08 20:57:43

* fix the pyflakes warning (see patchbot plugin)

* use the `:arxiv:`math/0509653v2`` syntax for the links

* There should be a double colon here:

```
+                EXAMPLES:
+
```


* this 

```
+        if len(laurent_series.exponents()) == 0:
```

could be just

```
+        if not laurent_series.exponents():
```


* I do not like the change from "Basis matrix:" to "User basis matrix:"

* Here you should insert a blank line between the 2 lines

```
+        Return [self,g]_m, the ``m``th Rankin Cohen bracket of ``self`` with ``g``.
+        See ``self.parent().rankin_cohen_bracket`` for more information.
```

same here:

```
+        Return the summands of ``self`` divided by their depths.
+        This assumes that ``self`` has a depth (see :meth:`has_depth`).
```

* Avoid using `m=ZZ(1)` inside the function arguments. Use m=None there, and set m to 1 inside the function, if m is None.


---

Comment by git created at 2018-11-14 22:43:33

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jj created at 2018-11-14 22:44:17

hi chapoton

Thanks for the review. I tried to fix as much as possible.

Regarding the "User basis matrix":
That's due to the change "ambient_space._module.submodule" -> "ambient_space._module.submodule_with_basis". This is from like 4 years ago but I remember having had a very good reason for the change (it's a bugfix which I included in this change). If I recall correctly it just makes more sense to have coordinates with respect to the given basis. Why don't you like the change?

I executed pyflakes modform_hecketriangle/*.py and tried to fix most, what should I put in all.py and __init__.py?

Regards
Jonas


---

Comment by chapoton created at 2018-11-17 20:28:41

ok, thanks for the explanation about User basis matrix. I am no longer opposed to this change.

Concerning pyflakes, there is nothing to fix in all.py and __init__.py. I was only refering to the pyflakes plugin (that you can see in some but not all of the patchbot reports): it was complaining about

```
+src/sage/modular/modform_hecketriangle/abstract_space.py:87:
local variable 'numerator_parent' is assigned to but never used
```

Did you fix that ?


---

Comment by jj created at 2018-11-18 22:11:34

Yes, I removed all other warnings.


---

Comment by git created at 2018-11-21 18:44:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-12-05 20:56:26

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-01-13 11:42:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2019-03-25 10:56:15

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)


---

Comment by git created at 2019-04-23 20:25:38

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-04-24 18:51:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-05-20 20:35:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-06-25 20:46:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jj created at 2019-06-25 20:46:52

New commits:


---

Comment by jj created at 2019-06-25 20:48:49

The ticket is in status needs review since 4 years.
Will it never be reviewed/merged?


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by chapoton created at 2020-06-03 16:46:02

red branch


---

Comment by chapoton created at 2020-06-03 16:46:02

Changing status from needs_review to needs_work.


---

Comment by jj created at 2020-06-03 18:06:54

Why did this change to needs_work?
It was green the last time I worked on it and it was ready for review since over 5 years (it keeps breaking over time for other changes in sage and I have to keep fixing it :().
Also I somehow don't find my branch anymore??

I'm just a bit frustrated with the process here...


---

Comment by chapoton created at 2020-06-03 18:23:39

Hello,

I set the ticket to "needs works" because the branch turned red, which indicates a merge conflict with the latest beta release.

I can hear and understand your frustration. Because we are so few active people, it is very difficult for authors of tickets to get their code reviewed. And even more because of the mathematical nature of the tickets, that requires some mathematical understanding from the reviewer. It seems that most of the people that were very active on modular forms at the beginning of sage have left the boat, and turned to other interests.

Maybe you could contact people active with lmfdb.org and ask them if they could find somebody (some expert) to review your ticket ? I have added John Cremona in cc here ; maybe he can help somehow.


---

Comment by jj created at 2020-06-03 18:39:22

Oh wow, that was a fast answer.
I am no longer in academics since ~5 years, I now work as a software engineer. So I don't need this to be merged. I just wanted to provide the work to sage / not to just get lost. If someone is still interested to have it merged I can fix it again. It seems the way how to handle git has changed. What do I do to checkout my branch + fix/push it?


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
