# Issue 12902: Implementation of TableauTuples

Issue created by migration from https://trac.sagemath.org/ticket/13074

Original creator: andrew.mathas

Original creation time: 2012-06-01 11:39:46

Assignee: Andrew Mathas

CC:  sage-combinat

Keywords: Tableaux, PartitionTuple

Implement (standard) tableaux of shape a PartitionTuple. That is, tableau with shape a tuple of partitions, together with standard functions for these objects.

Hope to upload patch soon.


---

Comment by andrew.mathas created at 2012-07-06 16:22:06

Changing status from new to needs_review.


---

Comment by andrew.mathas created at 2012-07-31 00:10:17

Should now apply cleanly to 5.2 (on top of #9265 and #13072)

Apply: trac_13074-tuples-of-tableaux-am.patch


---

Comment by andrew.mathas created at 2012-07-31 00:10:17

Changing priority from minor to major.


---

Comment by andrew.mathas created at 2012-08-03 10:36:23

New version of patch which has tuple code in partition_tuple.py and tableau_tuple.py


---

Comment by hivert created at 2012-10-08 20:42:04

Hi Andrews,

First of all, many thanks form implementing tuple of tableaux. This is
definitely a useful addition to Sage.

I didn't try to review your patch, but, when compiling the doc on
Sage-Combinat queue, I noticed a bunch of warning from your file. Looking
shortly at the patch, there is indeed many problems. You should to try to
compile the doc with

```
sage -docbuild reference html
```

and then look into you browser to the compiled files. A few years ago, I wrote
a page on the wiki to help writing the doc. It is at

```
http://wiki.sagemath.org/combinat/HelpOnTheDoc
```

Maybe it could help you. Also, be warned that it may be outdated.

Cheers,

Florent


---

Comment by andrew.mathas created at 2012-10-08 22:42:38

Hi Florent,

I accept that there are warnings when you build the documentation but I don't see any errors in either the python source or in the html output. As you said that you can see many errors in the doc strings in the patch, could you please point out a few of them so that I know what to look for? Otherwise I will waste a lot of time on this.

There doesn't seem to be any documentation on trouble shooting the documentation and, unfortunately,  the warnings produced when compiling the documentation do not seem to be that helpful. For example, my patch produces the following warnings in partition.py

```
/usr/local/src/sage/sage-5.3/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition:13: WARNING: Block quote ends without a blank line; unexpected unindent.
/usr/local/src/sage/sage-5.3/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition:18: WARNING: Block quote ends without a blank line; unexpected unindent.
/usr/local/src/sage/sage-5.3/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition:23: WARNING: Block quote ends without a blank line; unexpected unindent.
/usr/local/src/sage/sage-5.3/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition:28: WARNING: Block quote ends without a blank line; unexpected unindent.
```

However, when I look at lines 13, 18, 23 and 28 of partition.py I don't see anything wrong -- and indeed, my patch does not appear to touch these lines (but these warning do not appear before my patch is applied...). 

Presumably the line numbers above are not literal line numbers inside the file, and instead they are just relative line numbers in particular doc-strings, but I do not see how to find which doc strings the warnings refer to. Any hints that you can give would be much appreciated!

Andrew


---

Comment by tscrim created at 2012-10-13 17:00:32

Hey Andrew,

Yes, those line numbers are not literal, I think they are some sort of offset from the start of methods which cause the problem. In short, the warnings are generally useless.

There's a fair amount of documentation that I feel needs to be tweaked, so I'll write a review patch with my proposed changes.

Best,

Travis


---

Comment by andrew.mathas created at 2012-10-15 00:50:24

Thanks for doing this Travis. I think that I am now very much in your debt! I feel that you are again going over my documentation and fixing it up for me. Would it be better for me to have a first bash at improving it now that I understand a little better what it should like?

Andrew


---

Comment by tscrim created at 2012-10-15 14:58:16

Sure, go ahead. Thanks.

Travis


---

Comment by tscrim created at 2012-11-18 06:44:39

Looks good to me now. I believe the startup failure is acceptable since we are creating a new module so I'm setting this to a positive review. If anyone disagrees and has a way around this, please let me know.


---

Comment by tscrim created at 2012-11-18 06:44:39

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-12-17 07:32:15

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-12-17 07:32:15

There are some problems with the documentation formatting:

```
/release/merger/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition.Partition_class.top_garnir_tableau:4: WARNING: Inline interpreted text or phrase reference start-string without end-string.
/release/merger/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/combinat/partition_tuple.py:docstring of sage.combinat.partition_tuple.PartitionTuple.top_garnir_tableau:5: WARNING: Inline interpreted text or phrase reference start-string without end-string.
```



---

Comment by tscrim created at 2012-12-17 07:49:39

Replying to [comment:17 jdemeyer]:
> There are some problems with the documentation formatting:
> {{{
> /release/merger/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/combinat/partition.py:docstring of sage.combinat.partition.Partition_class.top_garnir_tableau:4: WARNING: Inline interpreted text or phrase reference start-string without end-string.
> /release/merger/sage-5.6.beta0/local/lib/python2.7/site-packages/sage/combinat/partition_tuple.py:docstring of sage.combinat.partition_tuple.PartitionTuple.top_garnir_tableau:5: WARNING: Inline interpreted text or phrase reference start-string without end-string.
> }}}
I believe the problem is ``top Garnir tableaux'` which should be `'top Garnir tableaux'` (unfortunately we can't strictly copy and paste our latex XP).


---

Comment by andrew.mathas created at 2012-12-17 12:47:50

Thanks Travis (and Jeronen). I'll upload the easy fix shortly.


---

Comment by tscrim created at 2012-12-17 18:21:03

Thanks Andrew.


---

Comment by tscrim created at 2012-12-17 18:21:03

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2012-12-19 07:47:41

On `sage.math` (Linux x86_64):

```
sage -t  --long -force_lib devel/sage/sage/combinat/tableau_tuple.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***

         [1800.3 s]
```


Also, the header of the patch file is messed up.


---

Comment by jdemeyer created at 2012-12-19 07:47:41

Changing status from positive_review to needs_work.


---

Comment by andrew.mathas created at 2012-12-21 11:31:04

This was caused by the test (on line 2193):

  all(correct_number(mu) for mu in PartitionTuples  (4,12)) # long time

which does pass but which takes a really long time. I have changed the 12 to an 8 which completes fast enough to make the automatic test happy.

I have also fixed up the header. As the doctest now passes I'll change it back to positive review. Hope that's OK as the patchbot will be able to verify this.



---

Comment by andrew.mathas created at 2012-12-21 12:49:15

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2012-12-21 13:55:40

Preferably, doctests should take 30 seconds at most with 60 seconds as absolute maximum (measured on sage.math).


---

Comment by jdemeyer created at 2012-12-21 15:06:39

So this is still way too much:

```
sage: correct_number=lambda mu : StandardTableauTuples(mu).cardinality()==len(StandardTableauTuples(mu).list())
sage: time all(correct_number(mu) for mu in PartitionTuples(4,8))
True
Time: CPU 457.57 s, Wall: 457.57 s
```



---

Comment by jdemeyer created at 2012-12-21 22:59:30

Changing status from positive_review to needs_work.


---

Comment by andrew.mathas created at 2012-12-22 11:23:18

Replying to [comment:24 jdemeyer]:

> Preferably, doctests should take 30 seconds at most with 60 seconds as absolute maximum (measured on sage.math).


I thought that the whole point of the *#long time* tag is to allow for longer tests? If you like I can take it out but as it is marked with *#long time* my first preference would be to leave it in place.

Please advise.

Andrew



---

Comment by andrew.mathas created at 2012-12-22 13:34:58

Changing status from needs_work to positive_review.


---

Comment by andrew.mathas created at 2012-12-22 13:34:58

I found the relevant section of the development guide and see that your comments actually refer to the* #long time* tests, so I have removed the long test.

Cheers,
Andrew


---

Comment by jdemeyer created at 2012-12-27 11:56:51

Fixed patch header properly (re-exported by Mercurial).


---

Attachment

Removing long doc test


---

Comment by jdemeyer created at 2012-12-27 12:04:12

Also, stuff like

```
#Relies on patch trac_13072-tuples-of-partitions_am.patch which implements a PartitionTuple class.
```

doesn't need to be mentioned in the commit message, since it's not useful information after the patch has been merged into Sage.


---

Comment by jdemeyer created at 2012-12-29 19:31:15

Resolution: fixed


---

Comment by andrew.mathas created at 2012-12-30 11:16:42

Thanks for fixing these two things for me.
A.
