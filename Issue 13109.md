# Issue 13109: gurobi backend has no copy(), and creates named constraints since v5

archive/issues_013109.json:
```json
{
    "body": "Assignee: ncohen\n\nCC:  ncohen\n\ninstalling `Gurobi` switches the default LP solver to `Gurobi`, leading to doctest failure in `mip.pyx`\n\n```\nFile \"/usr/local/src/sage/sage-5.2.rc0/devel/sage-main/sage/numerical/mip.pyx\", line 298:\n    sage: q = copy(p)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage/sage-5.2.rc0/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/local/src/sage/sage-5.2.rc0/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/local/src/sage/sage-5.2.rc0/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[4]>\", line 1, in <module>\n        q = copy(p)###line 298:\n    sage: q = copy(p)\n      File \"/usr/local/src/sage/sage-5.2.rc0/local/lib/python2.7/copy.py\", line 80, in copy\n        return copier(x)\n      File \"mip.pyx\", line 320, in sage.numerical.mip.MixedIntegerLinearProgram.__copy__ (sage/numerical/mip.c:2352)\n        p._backend = (<GenericBackend> self._backend).copy()\n    AttributeError: 'sage.numerical.backends.gurobi_backend.GurobiBacke' object has no attribute 'copy'\n```\n\n\nAnd indeed, there is no copy() in gurobi backend.\n\nAnother bunch of tests that fail in a similar fashion, due to Gurobi (version 5) automatically naming constraints, and so \none gets \n\n```\nFile \"/usr/local/src/sage/sage-5.2.rc0/devel/sage-main/sage/numerical/mip.pyx\", line 1132:\n    sage: p.show()\nExpected:\n    Maximization:\n    <BLANKLINE>\n    Constraints:\n      x_0 + x_1 <= 10.0\n      x_0 - x_1 <= 0.0\n      x_0 <= 4.0\n    ...\nGot:\n    Maximization:\n    <BLANKLINE>\n    Constraints:\n      R0: x_0 + x_1 <= 10.0\n      R1: x_0 - x_1 <= 0.0\n      R2: x_0 <= 4.0\n    Variables:\n      x_0 is a continuous variable (min=0.0, max=+oo)\n      x_1 is a continuous variable (min=0.0, max=+oo)\n```\n\nand other similar failures from `show()`.\n\nOne particular way to fix this would be to set the solver to be `GLPK` in all these tests, and create similar\noptional tests for `Gurobi`.\n\nAnd, lastly, Gurobi version 5 on OSX 10.6 outputs `[-0.0, 3.0]` rather than `[0.0, 3.0]` in a doctest in `gurobi_backend.pyx`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13281\n\n",
    "created_at": "2012-07-22T14:45:03Z",
    "labels": [
        "linear programming",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "gurobi backend has no copy(), and creates named constraints since v5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13109",
    "user": "dimpase"
}
```
Assignee: ncohen

CC:  ncohen

installing `Gurobi` switches the default LP solver to `Gurobi`, leading to doctest failure in `mip.pyx`

```
File "/usr/local/src/sage/sage-5.2.rc0/devel/sage-main/sage/numerical/mip.pyx", line 298:
    sage: q = copy(p)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage/sage-5.2.rc0/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.2.rc0/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.2.rc0/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[4]>", line 1, in <module>
        q = copy(p)###line 298:
    sage: q = copy(p)
      File "/usr/local/src/sage/sage-5.2.rc0/local/lib/python2.7/copy.py", line 80, in copy
        return copier(x)
      File "mip.pyx", line 320, in sage.numerical.mip.MixedIntegerLinearProgram.__copy__ (sage/numerical/mip.c:2352)
        p._backend = (<GenericBackend> self._backend).copy()
    AttributeError: 'sage.numerical.backends.gurobi_backend.GurobiBacke' object has no attribute 'copy'
```


And indeed, there is no copy() in gurobi backend.

Another bunch of tests that fail in a similar fashion, due to Gurobi (version 5) automatically naming constraints, and so 
one gets 

```
File "/usr/local/src/sage/sage-5.2.rc0/devel/sage-main/sage/numerical/mip.pyx", line 1132:
    sage: p.show()
Expected:
    Maximization:
    <BLANKLINE>
    Constraints:
      x_0 + x_1 <= 10.0
      x_0 - x_1 <= 0.0
      x_0 <= 4.0
    ...
Got:
    Maximization:
    <BLANKLINE>
    Constraints:
      R0: x_0 + x_1 <= 10.0
      R1: x_0 - x_1 <= 0.0
      R2: x_0 <= 4.0
    Variables:
      x_0 is a continuous variable (min=0.0, max=+oo)
      x_1 is a continuous variable (min=0.0, max=+oo)
```

and other similar failures from `show()`.

One particular way to fix this would be to set the solver to be `GLPK` in all these tests, and create similar
optional tests for `Gurobi`.

And, lastly, Gurobi version 5 on OSX 10.6 outputs `[-0.0, 3.0]` rather than `[0.0, 3.0]` in a doctest in `gurobi_backend.pyx`.

Issue created by migration from https://trac.sagemath.org/ticket/13281





---

archive/issue_comments_159490.json:
```json
{
    "body": "Duplicate of #12973",
    "created_at": "2013-05-11T18:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13109#issuecomment-159490",
    "user": "vbraun"
}
```

Duplicate of #12973



---

archive/issue_comments_159491.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-11T18:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13109#issuecomment-159491",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_159492.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-11T19:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13109#issuecomment-159492",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_159493.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2013-05-14T06:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13109#issuecomment-159493",
    "user": "jdemeyer"
}
```

Resolution: duplicate
