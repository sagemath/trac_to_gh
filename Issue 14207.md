# Issue 14207: Disjoint Sets --> iter

archive/issues_014207.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  florent.hivert@lri.fr slabbe\n\nHi,\n\nI want append a simple method for iter elements of the class : DisjointSet.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14411\n\n",
    "created_at": "2013-04-04T15:05:15Z",
    "labels": [
        "graph theory",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Disjoint Sets --> iter",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14207",
    "user": "elixyre"
}
```
Assignee: jason, ncohen, rlm

CC:  florent.hivert@lri.fr slabbe

Hi,

I want append a simple method for iter elements of the class : DisjointSet.

Issue created by migration from https://trac.sagemath.org/ticket/14411





---

archive/issue_comments_178696.json:
```json
{
    "body": "Attachment\n\nshortcut DisjointSet.__iter__",
    "created_at": "2013-04-04T15:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178696",
    "user": "elixyre"
}
```

Attachment

shortcut DisjointSet.__iter__



---

archive/issue_comments_178697.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-04-05T22:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178697",
    "user": "tscrim"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_178698.json:
```json
{
    "body": "A few things I would like to see:\n\n- Reference the ticket number in the commit message\n- Use double quotes instead of single quotes for consistency\n- Since dictionaries are non-deterministic in their ordering, could you change the last test to something like\n\n```\nsage: L = [s for s in d]\nsage: len(L)\n3\n```\n\nAlso you probably could just return `self.root_to_elements_dict().itervalues()` since it is an iterator object (it avoids a level of indirection).\n\nThanks,\n\nTravis\n\nPS - I'm assuming this was suppose to be set to needs_review. Sorry if it wasn't.",
    "created_at": "2013-04-05T22:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178698",
    "user": "tscrim"
}
```

A few things I would like to see:

- Reference the ticket number in the commit message
- Use double quotes instead of single quotes for consistency
- Since dictionaries are non-deterministic in their ordering, could you change the last test to something like

```
sage: L = [s for s in d]
sage: len(L)
3
```

Also you probably could just return `self.root_to_elements_dict().itervalues()` since it is an iterator object (it avoids a level of indirection).

Thanks,

Travis

PS - I'm assuming this was suppose to be set to needs_review. Sorry if it wasn't.



---

archive/issue_comments_178699.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-05T22:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178699",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178700.json:
```json
{
    "body": "Changing component from graph theory to misc.",
    "created_at": "2013-04-05T22:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178700",
    "user": "tscrim"
}
```

Changing component from graph theory to misc.



---

archive/issue_comments_178701.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-04-29T08:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178701",
    "user": "elixyre"
}
```

Attachment



---

archive/issue_comments_178702.json:
```json
{
    "body": "I made a new version. It's ok with that?\n\nFurthermore, I added a new method ``_getitem_`` which return the set associated to the argument:\n\n```\nsage: d =  DisjointSet(range(4))\nsage: d.union(1,2); d\n{{0}, {1,2}, {3}}\nsage: d[2]\n[1,2]\n```\n\n\n(My opinion is when we write ``d.find(2)`` we expect ``[1,2]`` and not ``1`` (that means nothing for user) but I don't want reimplement all so... what is your opinion about that?)\n\nThanks,\n\nJean-Baptiste",
    "created_at": "2013-04-29T08:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178702",
    "user": "elixyre"
}
```

I made a new version. It's ok with that?

Furthermore, I added a new method ``_getitem_`` which return the set associated to the argument:

```
sage: d =  DisjointSet(range(4))
sage: d.union(1,2); d
{{0}, {1,2}, {3}}
sage: d[2]
[1,2]
```


(My opinion is when we write ``d.find(2)`` we expect ``[1,2]`` and not ``1`` (that means nothing for user) but I don't want reimplement all so... what is your opinion about that?)

Thanks,

Jean-Baptiste



---

archive/issue_comments_178703.json:
```json
{
    "body": "From the [wikipedia page](http://en.wikipedia.org/wiki/Disjoint-set_data_structure:), `find()` returns *the* representative of the subset, not the entire subset. As such, to be consistent with `find()` and the expected behavior of `DisjointSet`, I think `__getitem__()` should return the representative as well.\n\nThanks,\n\nTravis",
    "created_at": "2013-04-30T21:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178703",
    "user": "tscrim"
}
```

From the [wikipedia page](http://en.wikipedia.org/wiki/Disjoint-set_data_structure:), `find()` returns *the* representative of the subset, not the entire subset. As such, to be consistent with `find()` and the expected behavior of `DisjointSet`, I think `__getitem__()` should return the representative as well.

Thanks,

Travis



---

archive/issue_comments_178704.json:
```json
{
    "body": "> (My opinion is when we write ``d.find(2)`` we expect ``[1,2]`` and not ``1`` (that means nothing for user) but I don't want reimplement all so... what is your opinion about that?)\n\nThe data structure is made so that knowing if two elements ``a`` and ``b`` are in the same subset is optimal in time complexity : ``d.find(a) == d.find(b)``. Returning the whole subset containing the element ``2`` is another question and its time complexity is very different (you need to call ``find`` on every elements...).\n\nAre you sure you need the union-find data structure for your problem?",
    "created_at": "2013-05-01T10:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178704",
    "user": "slabbe"
}
```

> (My opinion is when we write ``d.find(2)`` we expect ``[1,2]`` and not ``1`` (that means nothing for user) but I don't want reimplement all so... what is your opinion about that?)

The data structure is made so that knowing if two elements ``a`` and ``b`` are in the same subset is optimal in time complexity : ``d.find(a) == d.find(b)``. Returning the whole subset containing the element ``2`` is another question and its time complexity is very different (you need to call ``find`` on every elements...).

Are you sure you need the union-find data structure for your problem?



---

archive/issue_comments_178705.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-05-02T07:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178705",
    "user": "elixyre"
}
```

Attachment



---

archive/issue_comments_178706.json:
```json
{
    "body": "No i'm okay with that. So I modify my patch to be consistent.",
    "created_at": "2013-05-02T07:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178706",
    "user": "elixyre"
}
```

No i'm okay with that. So I modify my patch to be consistent.



---

archive/issue_comments_178707.json:
```json
{
    "body": "I still think `__getitem__` should be the same as `find()`. In particular, I'd just set\n\n```\n__getitem__ = find\n```\n\nand add a doctest to the class/module doc. If you want a method to return the full subset, you should call it something like `get_subset()`. Also could you make the first line of your comment message be a short description of the patch.\n\nThanks,\n\nTravis",
    "created_at": "2013-05-02T14:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178707",
    "user": "tscrim"
}
```

I still think `__getitem__` should be the same as `find()`. In particular, I'd just set

```
__getitem__ = find
```

and add a doctest to the class/module doc. If you want a method to return the full subset, you should call it something like `get_subset()`. Also could you make the first line of your comment message be a short description of the patch.

Thanks,

Travis



---

archive/issue_comments_178708.json:
```json
{
    "body": "Hi,\n\nLast time I answered little bit quickly (and my code is false). For me, a disjoint union is roughly a list of list (set of disjoint sets) with two particular method `union` and `find`. It seems natural (and consistent with the representation), if there is a `_getitem_` method that returns one of these lists. It will be disturbing and irrelevant to have \n\n```\n__getitem__ = find\n```\n\nAnd if you are agree with that my question is : what's the input? An element in the union of the sets or an indice? I think it could be interesting to have an element.\n(I imagine a disjoint sets on all permutations of size `k`, it seems cool and agradable to visualize easily the class of a particular permutation)\n\nThanks,\n\nJean-Baptiste",
    "created_at": "2013-05-04T16:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178708",
    "user": "elixyre"
}
```

Hi,

Last time I answered little bit quickly (and my code is false). For me, a disjoint union is roughly a list of list (set of disjoint sets) with two particular method `union` and `find`. It seems natural (and consistent with the representation), if there is a `_getitem_` method that returns one of these lists. It will be disturbing and irrelevant to have 

```
__getitem__ = find
```

And if you are agree with that my question is : what's the input? An element in the union of the sets or an indice? I think it could be interesting to have an element.
(I imagine a disjoint sets on all permutations of size `k`, it seems cool and agradable to visualize easily the class of a particular permutation)

Thanks,

Jean-Baptiste



---

archive/issue_comments_178709.json:
```json
{
    "body": "You're forgetting that this is not a dijoint union as a *mathematical* object but a specific *data structure* of `DisjointSet` which is not a list of lists. In some sense, there is less structure as `DisjointSet` is better described as a map from elements to a representative (in particular the subsets are not ordered). Thus the most logical behavior to me is that `__getitem__()` should match `find()`.\n\nActually considering that, the iterator should the representatives (i.e. the `iterkeys()`) and not the subsets.\n\nTo reiterate, this is a tool (class) used to solve problems efficiently, not to represent a mathematical structure. The mathematical structure you're after would either be `DisjointUnionEnumeratedSets` or `SetPartitions`. If you really want to return the whole subset from an element, this should get its own specialized method.\n\nBest,\n\nTravis",
    "created_at": "2013-05-04T20:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178709",
    "user": "tscrim"
}
```

You're forgetting that this is not a dijoint union as a *mathematical* object but a specific *data structure* of `DisjointSet` which is not a list of lists. In some sense, there is less structure as `DisjointSet` is better described as a map from elements to a representative (in particular the subsets are not ordered). Thus the most logical behavior to me is that `__getitem__()` should match `find()`.

Actually considering that, the iterator should the representatives (i.e. the `iterkeys()`) and not the subsets.

To reiterate, this is a tool (class) used to solve problems efficiently, not to represent a mathematical structure. The mathematical structure you're after would either be `DisjointUnionEnumeratedSets` or `SetPartitions`. If you really want to return the whole subset from an element, this should get its own specialized method.

Best,

Travis



---

archive/issue_comments_178710.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-20T11:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178710",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_178711.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-22T20:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178711",
    "user": "slabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_178712.json:
```json
{
    "body": "I suggest to close this ticket as a duplicate of #20057.",
    "created_at": "2016-08-22T20:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178712",
    "user": "slabbe"
}
```

I suggest to close this ticket as a duplicate of #20057.



---

archive/issue_comments_178713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-22T22:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178713",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178714.json:
```json
{
    "body": "Determined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178714",
    "user": "embray"
}
```

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).



---

archive/issue_comments_178715.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14207#issuecomment-178715",
    "user": "embray"
}
```

Resolution: wontfix
