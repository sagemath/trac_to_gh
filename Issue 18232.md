# Issue 18232: Tensor product of crystals does not handle -inf for epsilon/phi correctly

Issue created by migration from https://trac.sagemath.org/ticket/18469

Original creator: tscrim

Original creation time: 2015-05-22 05:43:18

Assignee: sage-combinat

CC:  sage-combinat bsalisbury1 aschilling

Keywords: crystals, tensor product

This does not work:

```
sage: E1 = crystals.elementary.B(['A',2], 1)
sage: E2 = crystals.elementary.B(['A',2], 2)
sage: T = crystals.TensorProduct(E1, E2)
sage: x = T(E1.module_generators[0], E2.module_generators[0]); x
[0, 0]
sage: x.f(1)
[-1, 0]
sage: x.e(1)
[1, 0]
```

The reason is because we try and be clever with how we compute the `_sig` and do an `epsilon_(k) - phi_i(k-1)`. If one of these (in particular, the phi) is `-inf`, then the computation breaks down. Instead, we have to bite the bullet and do the partial sums of the weight pairings to make sure we cover these cases.


---

Comment by tscrim created at 2015-05-22 05:44:52

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-05-22 05:44:52

New commits:


---

Comment by git created at 2015-05-22 05:45:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by bsalisbury1 created at 2015-05-22 19:24:39

Thanks, Travis.


---

Comment by bsalisbury1 created at 2015-05-22 19:24:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-23 19:53:39

Resolution: fixed
