# Issue 18232: Tensor product of crystals does not handle -inf for epsilon/phi correctly

archive/issues_018232.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat bsalisbury1 aschilling\n\nKeywords: crystals, tensor product\n\nThis does not work:\n\n```\nsage: E1 = crystals.elementary.B(['A',2], 1)\nsage: E2 = crystals.elementary.B(['A',2], 2)\nsage: T = crystals.TensorProduct(E1, E2)\nsage: x = T(E1.module_generators[0], E2.module_generators[0]); x\n[0, 0]\nsage: x.f(1)\n[-1, 0]\nsage: x.e(1)\n[1, 0]\n```\n\nThe reason is because we try and be clever with how we compute the `_sig` and do an `epsilon_(k) - phi_i(k-1)`. If one of these (in particular, the phi) is `-inf`, then the computation breaks down. Instead, we have to bite the bullet and do the partial sums of the weight pairings to make sure we cover these cases.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18469\n\n",
    "created_at": "2015-05-22T05:43:18Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "title": "Tensor product of crystals does not handle -inf for epsilon/phi correctly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18232",
    "user": "tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat bsalisbury1 aschilling

Keywords: crystals, tensor product

This does not work:

```
sage: E1 = crystals.elementary.B(['A',2], 1)
sage: E2 = crystals.elementary.B(['A',2], 2)
sage: T = crystals.TensorProduct(E1, E2)
sage: x = T(E1.module_generators[0], E2.module_generators[0]); x
[0, 0]
sage: x.f(1)
[-1, 0]
sage: x.e(1)
[1, 0]
```

The reason is because we try and be clever with how we compute the `_sig` and do an `epsilon_(k) - phi_i(k-1)`. If one of these (in particular, the phi) is `-inf`, then the computation breaks down. Instead, we have to bite the bullet and do the partial sums of the weight pairings to make sure we cover these cases.

Issue created by migration from https://trac.sagemath.org/ticket/18469





---

archive/issue_comments_246253.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-22T05:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246253",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_246254.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-22T05:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246254",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_246255.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-22T05:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246255",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_246256.json:
```json
{
    "body": "Thanks, Travis.",
    "created_at": "2015-05-22T19:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246256",
    "user": "bsalisbury1"
}
```

Thanks, Travis.



---

archive/issue_comments_246257.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-22T19:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246257",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_246258.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-23T19:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18232#issuecomment-246258",
    "user": "vbraun"
}
```

Resolution: fixed
