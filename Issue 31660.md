# Issue 31660: A dense implementation for the Lazy Laurent Series

archive/issues_031660.json:
```json
{
    "body": "CC:  mantepse tscrim\n\nKeywords: LazyPowerSeries, FormalSeries, GSoC\n\nA dense implementation of the Lazy Laurent Series using Lazy Lists.\n\nThis ticket is part of the meta ticket #31651\n\nIssue created by migration from https://trac.sagemath.org/ticket/31897\n\n",
    "created_at": "2021-06-03T17:35:14Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "A dense implementation for the Lazy Laurent Series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31660",
    "user": "@tejasvicsr1"
}
```
CC:  mantepse tscrim

Keywords: LazyPowerSeries, FormalSeries, GSoC

A dense implementation of the Lazy Laurent Series using Lazy Lists.

This ticket is part of the meta ticket #31651

Issue created by migration from https://trac.sagemath.org/ticket/31897





---

archive/issue_comments_452134.json:
```json
{
    "body": "Changing keywords from \"LazyPowerSeries, FormalSeries, GSoC\" to \"LazyPowerSeries, FormalSeries, GSoC21\".",
    "created_at": "2021-06-04T07:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452134",
    "user": "mantepse"
}
```

Changing keywords from "LazyPowerSeries, FormalSeries, GSoC" to "LazyPowerSeries, FormalSeries, GSoC21".



---

archive/issue_comments_452135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-05T19:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452135",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452136.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-06T19:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452136",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452137.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T17:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452137",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452138.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-07T17:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452138",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452139.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-08T18:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452139",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452140.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T13:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452140",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452141.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-09T18:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452141",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452142.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-16T15:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452142",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452143.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-17T14:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452143",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452144.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-17T16:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452144",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452145.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-17T17:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452145",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452146.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-18T13:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452146",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452147.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-18T14:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452147",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452148.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-18T14:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452148",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452149.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-25T17:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452149",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452150.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-27T13:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452150",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452151.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T14:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452151",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452152.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T21:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452152",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452153.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T22:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452153",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452154.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T22:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452154",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452155.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-08T13:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452155",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452156.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-08T14:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452156",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T18:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452157",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452158.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T21:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452158",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452159.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-10T18:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452159",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452160.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T20:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452160",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452161.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T07:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452161",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452162.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T10:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452162",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452163.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T20:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452163",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452164.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T21:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452164",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452165.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-14T21:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452165",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452166.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-15T05:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452166",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452167.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-15T07:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452167",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452168.json:
```json
{
    "body": "I have fixed the pickling issue, some bugs I found in `_element_constructor_` in addition to what Martin pointed out, implemented slices (for `LLS` only to keep the `LLS_aux` classes fast with `__getitem__`), and ported over the doctests for `define`. We just need composition implemented in order to check the last test there.\n----\nNew commits:",
    "created_at": "2021-07-16T01:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452168",
    "user": "tscrim"
}
```

I have fixed the pickling issue, some bugs I found in `_element_constructor_` in addition to what Martin pointed out, implemented slices (for `LLS` only to keep the `LLS_aux` classes fast with `__getitem__`), and ported over the doctests for `define`. We just need composition implemented in order to check the last test there.
----
New commits:



---

archive/issue_comments_452169.json:
```json
{
    "body": "Accidental double post...",
    "created_at": "2021-07-16T06:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452169",
    "user": "tscrim"
}
```

Accidental double post...



---

archive/issue_comments_452170.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T21:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452170",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452171.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-20T21:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452171",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452172.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-22T07:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452172",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452173.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-25T19:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452173",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452174.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-26T02:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452174",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452175.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-26T22:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452175",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452176.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-27T23:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452176",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452177.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-31T13:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452177",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452178.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-01T14:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452178",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452179.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-03T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452179",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452180.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-03T21:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452180",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452181.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-03T21:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452181",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452182.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-04T04:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452182",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452183.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-04T04:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452183",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_452184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-04T07:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452184",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452185.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-04T11:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452185",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452186.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-07T19:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452186",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452187.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-08T03:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452187",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452188.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-08T03:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452188",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452189.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T04:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452189",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452190.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T04:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452190",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452191.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T15:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452191",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452192.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T15:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452192",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452193.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T15:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452193",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452194.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-08T16:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452194",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452195.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-09T02:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452195",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452196.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-09T13:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452196",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452197.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-09T18:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452197",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452198.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-09T19:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452198",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452199.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-10T19:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452199",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452200.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-10T22:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452200",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452201.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-10T23:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452201",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452202.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-11T09:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452202",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452203.json:
```json
{
    "body": "That's a good idea, and it made me catch a potential corner case in `CS_map_coefficients`.\n----\nNew commits:",
    "created_at": "2021-08-11T12:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452203",
    "user": "tscrim"
}
```

That's a good idea, and it made me catch a potential corner case in `CS_map_coefficients`.
----
New commits:



---

archive/issue_comments_452204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-11T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452205.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T00:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452205",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452206.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T00:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452206",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452207.json:
```json
{
    "body": "Changing keywords from \"LazyPowerSeries, FormalSeries, GSoC21\" to \"LazyPowerSeries, FormalSeries, gsoc2021\".",
    "created_at": "2021-08-12T00:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452207",
    "user": "tscrim"
}
```

Changing keywords from "LazyPowerSeries, FormalSeries, GSoC21" to "LazyPowerSeries, FormalSeries, gsoc2021".



---

archive/issue_comments_452208.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-12T08:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452208",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452209.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-13T09:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452209",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_452210.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T11:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452210",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452211.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T12:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452211",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452212.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T13:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452212",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452213.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T09:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452213",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452214.json:
```json
{
    "body": "From my point of view this is ready to go, under the assumption that #32324 is going to get in next.\n\nTravis, please set it to positive review if you agree.",
    "created_at": "2021-08-14T11:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452214",
    "user": "mantepse"
}
```

From my point of view this is ready to go, under the assumption that #32324 is going to get in next.

Travis, please set it to positive review if you agree.



---

archive/issue_comments_452215.json:
```json
{
    "body": "Yes, let's work on finishing #32324 next. Thank you both very much for your hard work on this.\n\nI pushed one trivial fix to take care of an unneeded import from pyflakes. I am allowing myself to set this to a positive review since the clean patchbot, and I double-checked with my last commit locally.\n----\nNew commits:",
    "created_at": "2021-08-14T12:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452215",
    "user": "tscrim"
}
```

Yes, let's work on finishing #32324 next. Thank you both very much for your hard work on this.

I pushed one trivial fix to take care of an unneeded import from pyflakes. I am allowing myself to set this to a positive review since the clean patchbot, and I double-checked with my last commit locally.
----
New commits:



---

archive/issue_comments_452216.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-14T12:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452216",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452217.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-08-15T21:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452217",
    "user": "slelievre"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_452218.json:
```json
{
    "body": "Sorry to jump in with some naive questions and comments,\nfeel free to ignore. Or to set back to positive review\nand to open a follow-up ticket instead.\n\nThese class names mix camel case and underscores:\n\n```\nCoefficientStream_add\nCoefficientStream_cauchy_product\nCoefficientStream_sub\nCoefficientStream_composition\nCoefficientStream_lmul\nCoefficientStream_rmul\nCoefficientStream_neg\nCoefficientStream_cauchy_inverse\nCoefficientStream_map_coefficients\nCoefficientStream_zero\nCoefficientStream_exact\nCoefficientStream_uninitialized\nCoefficientStream_shift\n```\n\nIs that usual? Naively I would have expected:\n\n```\nCoefficientStreamAdd\nCoefficientStreamCauchyProduct\nCoefficientStreamSub\nCoefficientStreamComposition\nCoefficientStreamLmul\nCoefficientStreamRmul\nCoefficientStreamNeg\nCoefficientStreamCauchyInverse\nCoefficientStreamMapCoefficients\nCoefficientStreamZero\nCoefficientStreamExact\nCoefficientStreamUninitialized\nCoefficientStreamShift\n```\n\n\nI'm sure it's just my ignorance and you'll point me\nto other examples.\n\nCould names be shortened by using Stream\ninstead of CoefficientStream?\n\nChange which L is capitalised:\n\n```diff\n-The coefficient stream can be used to build up a Lazy laurent series::\n+The coefficient stream can be used to build up a lazy Laurent series::\n```\n\n\nUnclear syntax:\n\n\n```\nTwo coefficient streams can be composed (depending on whether it exists)::\n```\n\n\nTypo:\n\n\n```diff\n         The default is to always return ``False`` as it\n-        cannot be decided or they are equal.\n+        cannot be decided whether they are equal.\n```\n\n\nIn comments, use sentences with initial capital\nand final period, and regular indentation\n(with additional minor rephrasing suggestions).\n\n\n```diff\n             # We cannot pickle a generator object, so we remove it and\n-            #   the cache from the pickle information.\n+            # the cache from the pickle information.\n```\n\n\n\n```diff\n         # We do not insist that the last entry of initial_coefficients\n-        #   is different from constant in case comparisons can be\n-        #   expensive such as in the symbolic ring\n+        # is different from constant in case comparisons can be\n+        # expensive such as in the symbolic ring.\n```\n\n\n\n```diff\n-            # the constant part makes no contribution to the negative\n-            # we need this for the case so self._neg_powers[0][n] => 0\n+            # The constant part makes no contribution to the negative.\n+            # We need this for the case so self._neg_powers[0][n] => 0.\n```\n\n\n\n```diff\n-        v = self._approximate_order  # shorthand name\n+        v = self._approximate_order  # shorthand name for this \"order\" or \"valuation\"\n-        n = 0  # Counts the number of places from the order\n+        n = 0  # shift from the \"order\" position\n         yield self._ainv\n+        # Note that first entry of the cache will correspond to z^v\n+        # The first entry of the cache is the coefficient of z^v\n```\n\n\n\n```diff\n-        # We don't hash the function in case that happens to not be hashable\n+        # We don't hash the function as it might not be hashable.\n```\n\n\nIn examples blocks, end introductory sentences with `::` or `. ::`\nbut not `.::` (as I think that would render as \".:\" -- please check).\n\n\n```diff\n-generating functions for sequences arising in combinatorics.::\n+generating functions for sequences arising in combinatorics.::\n```\n\n\n\n```diff\n-that are needed are computed.::\n+that are needed are computed. ::\n```\n\n\n\n```diff\n-coefficient are computed.::\n+coefficient are computed. ::\n```\n\n\nTypos.\n\n\n```diff\n-    Two sequences can be subracted::\n+    Two sequences can be subtracted::\n```\n\n\n\n```diff\n-explcitly\n+explicitly\n```\n\n\nIncorrect capitalisation (several occurrences):\n\n\n```diff\n-        Dense Implementation::\n+        Dense implementation::\n```\n\n\n\n```diff\n-        Sparse Implementation::\n+        Sparse implementation::\n```\n\n\nCapitalise Laurent and end with period:\n\n\n```diff\n-                # One of the lazy laurent series is not known to eventually be constant\n+                # One of the lazy Laurent series is not known to eventually be constant.\n```\n\n\nRephrase:\n\n\n```diff\n-        # the product is exact if and only if both of the factors are\n-        # exact, and one has eventually 0 coefficients:\n+        # The product is exact if and only if both factors are exact\n+        # and one of the factors has eventually 0 coefficients:\n         #   (p + a x^d/(1-x))(q + b x^e/(1-x))\n         #   = p q + (a x^d q + b x^e p)/(1-x) + a b x^(d+e)/(1-x)^2\n```\n\n\nRephrase and fix typo in \"coeffcients\"\n\n\n```\n-            # (a x^d q)/(1-x) has constant a q(1), and the initial\n-            # values are the cumulative sums of the coeffcients of q\n+            # The series `(a * x^d * q) / (1 - x)` has constant term\n+            # `a * q(1)`, and initial values the cumulative sums\n+            # of the coefficients of `q`.\n```\n\n\nIn several docstrings, \"if\" should be \"whether\", e.g.\n\n\n```diff\n+        Return if ``self`` is sparse or not.\n+        Return whether ``self`` is sparse.\n```\n\n\nNote you can check which files were touched by this ticket with\n\n\n```\n$ git diff --name-only 9.4.rc0 HEAD\nsrc/doc/en/reference/data_structures/index.rst\nsrc/doc/en/reference/power_series/index.rst\nsrc/sage/categories/unital_algebras.py\nsrc/sage/data_structures/coefficient_stream.py\nsrc/sage/rings/lazy_laurent_series.py\nsrc/sage/rings/lazy_laurent_series_operator.py\nsrc/sage/rings/lazy_laurent_series_ring.py\nsrc/sage/rings/polynomial/polynomial_element.pyx\nsrc/sage/rings/polynomial/polynomial_element_generic.py\nsrc/sage/rings/polynomial/polynomial_integer_dense_flint.pyx\nsrc/sage/rings/polynomial/polynomial_integer_dense_ntl.pyx\n```\n\n\nand then run tox on these files\n(except `src/sage/rings/lazy_laurent_series_operator.py`\nwhich was removed):\n\n\n```\n./sage -tox -- \\\nsrc/doc/en/reference/data_structures/index.rst \\\nsrc/doc/en/reference/power_series/index.rst \\\nsrc/sage/categories/unital_algebras.py \\\nsrc/sage/data_structures/coefficient_stream.py \\\nsrc/sage/rings/lazy_laurent_series.py \\\nsrc/sage/rings/lazy_laurent_series_ring.py \\\nsrc/sage/rings/polynomial/polynomial_element.pyx \\\nsrc/sage/rings/polynomial/polynomial_element_generic.py \\\nsrc/sage/rings/polynomial/polynomial_integer_dense_flint.pyx \\\nsrc/sage/rings/polynomial/polynomial_integer_dense_ntl.pyx\n```\n\n\nwhich runs tests and some sanity checks\nincluding pycodestyle which detects\ninvalid escape sequences, and codespell \nwhich detects some typos.\n\nIn particular codespell makes these suggestions,\nsome silly, some useful:\n\n\n```\nsage/categories/unital_algebras.py:132: mor ==> more\nsage/categories/unital_algebras.py:133: mor ==> more\nsage/categories/unital_algebras.py:134: mor ==> more\nsage/categories/unital_algebras.py:136: mor ==> more\nsage/categories/unital_algebras.py:242: mor ==> more\nsage/categories/unital_algebras.py:244: mor ==> more\nsage/categories/unital_algebras.py:257: mor ==> more\nsage/categories/unital_algebras.py:260: mor ==> more\nsage/rings/lazy_laurent_series.py:133: subracted ==> subtracted\nsage/rings/lazy_laurent_series.py:1045: coeffcients ==> coefficients\nsage/rings/lazy_laurent_series_ring.py:382: convertable ==> convertible\nsage/rings/polynomial/polynomial_element.pyx:2533: overriden ==> overridden\nsage/rings/polynomial/polynomial_element.pyx:4375: Hart ==> Heart, harm\n```\n",
    "created_at": "2021-08-15T21:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452218",
    "user": "slelievre"
}
```

Sorry to jump in with some naive questions and comments,
feel free to ignore. Or to set back to positive review
and to open a follow-up ticket instead.

These class names mix camel case and underscores:

```
CoefficientStream_add
CoefficientStream_cauchy_product
CoefficientStream_sub
CoefficientStream_composition
CoefficientStream_lmul
CoefficientStream_rmul
CoefficientStream_neg
CoefficientStream_cauchy_inverse
CoefficientStream_map_coefficients
CoefficientStream_zero
CoefficientStream_exact
CoefficientStream_uninitialized
CoefficientStream_shift
```

Is that usual? Naively I would have expected:

```
CoefficientStreamAdd
CoefficientStreamCauchyProduct
CoefficientStreamSub
CoefficientStreamComposition
CoefficientStreamLmul
CoefficientStreamRmul
CoefficientStreamNeg
CoefficientStreamCauchyInverse
CoefficientStreamMapCoefficients
CoefficientStreamZero
CoefficientStreamExact
CoefficientStreamUninitialized
CoefficientStreamShift
```


I'm sure it's just my ignorance and you'll point me
to other examples.

Could names be shortened by using Stream
instead of CoefficientStream?

Change which L is capitalised:

```diff
-The coefficient stream can be used to build up a Lazy laurent series::
+The coefficient stream can be used to build up a lazy Laurent series::
```


Unclear syntax:


```
Two coefficient streams can be composed (depending on whether it exists)::
```


Typo:


```diff
         The default is to always return ``False`` as it
-        cannot be decided or they are equal.
+        cannot be decided whether they are equal.
```


In comments, use sentences with initial capital
and final period, and regular indentation
(with additional minor rephrasing suggestions).


```diff
             # We cannot pickle a generator object, so we remove it and
-            #   the cache from the pickle information.
+            # the cache from the pickle information.
```



```diff
         # We do not insist that the last entry of initial_coefficients
-        #   is different from constant in case comparisons can be
-        #   expensive such as in the symbolic ring
+        # is different from constant in case comparisons can be
+        # expensive such as in the symbolic ring.
```



```diff
-            # the constant part makes no contribution to the negative
-            # we need this for the case so self._neg_powers[0][n] => 0
+            # The constant part makes no contribution to the negative.
+            # We need this for the case so self._neg_powers[0][n] => 0.
```



```diff
-        v = self._approximate_order  # shorthand name
+        v = self._approximate_order  # shorthand name for this "order" or "valuation"
-        n = 0  # Counts the number of places from the order
+        n = 0  # shift from the "order" position
         yield self._ainv
+        # Note that first entry of the cache will correspond to z^v
+        # The first entry of the cache is the coefficient of z^v
```



```diff
-        # We don't hash the function in case that happens to not be hashable
+        # We don't hash the function as it might not be hashable.
```


In examples blocks, end introductory sentences with `::` or `. ::`
but not `.::` (as I think that would render as ".:" -- please check).


```diff
-generating functions for sequences arising in combinatorics.::
+generating functions for sequences arising in combinatorics.::
```



```diff
-that are needed are computed.::
+that are needed are computed. ::
```



```diff
-coefficient are computed.::
+coefficient are computed. ::
```


Typos.


```diff
-    Two sequences can be subracted::
+    Two sequences can be subtracted::
```



```diff
-explcitly
+explicitly
```


Incorrect capitalisation (several occurrences):


```diff
-        Dense Implementation::
+        Dense implementation::
```



```diff
-        Sparse Implementation::
+        Sparse implementation::
```


Capitalise Laurent and end with period:


```diff
-                # One of the lazy laurent series is not known to eventually be constant
+                # One of the lazy Laurent series is not known to eventually be constant.
```


Rephrase:


```diff
-        # the product is exact if and only if both of the factors are
-        # exact, and one has eventually 0 coefficients:
+        # The product is exact if and only if both factors are exact
+        # and one of the factors has eventually 0 coefficients:
         #   (p + a x^d/(1-x))(q + b x^e/(1-x))
         #   = p q + (a x^d q + b x^e p)/(1-x) + a b x^(d+e)/(1-x)^2
```


Rephrase and fix typo in "coeffcients"


```
-            # (a x^d q)/(1-x) has constant a q(1), and the initial
-            # values are the cumulative sums of the coeffcients of q
+            # The series `(a * x^d * q) / (1 - x)` has constant term
+            # `a * q(1)`, and initial values the cumulative sums
+            # of the coefficients of `q`.
```


In several docstrings, "if" should be "whether", e.g.


```diff
+        Return if ``self`` is sparse or not.
+        Return whether ``self`` is sparse.
```


Note you can check which files were touched by this ticket with


```
$ git diff --name-only 9.4.rc0 HEAD
src/doc/en/reference/data_structures/index.rst
src/doc/en/reference/power_series/index.rst
src/sage/categories/unital_algebras.py
src/sage/data_structures/coefficient_stream.py
src/sage/rings/lazy_laurent_series.py
src/sage/rings/lazy_laurent_series_operator.py
src/sage/rings/lazy_laurent_series_ring.py
src/sage/rings/polynomial/polynomial_element.pyx
src/sage/rings/polynomial/polynomial_element_generic.py
src/sage/rings/polynomial/polynomial_integer_dense_flint.pyx
src/sage/rings/polynomial/polynomial_integer_dense_ntl.pyx
```


and then run tox on these files
(except `src/sage/rings/lazy_laurent_series_operator.py`
which was removed):


```
./sage -tox -- \
src/doc/en/reference/data_structures/index.rst \
src/doc/en/reference/power_series/index.rst \
src/sage/categories/unital_algebras.py \
src/sage/data_structures/coefficient_stream.py \
src/sage/rings/lazy_laurent_series.py \
src/sage/rings/lazy_laurent_series_ring.py \
src/sage/rings/polynomial/polynomial_element.pyx \
src/sage/rings/polynomial/polynomial_element_generic.py \
src/sage/rings/polynomial/polynomial_integer_dense_flint.pyx \
src/sage/rings/polynomial/polynomial_integer_dense_ntl.pyx
```


which runs tests and some sanity checks
including pycodestyle which detects
invalid escape sequences, and codespell 
which detects some typos.

In particular codespell makes these suggestions,
some silly, some useful:


```
sage/categories/unital_algebras.py:132: mor ==> more
sage/categories/unital_algebras.py:133: mor ==> more
sage/categories/unital_algebras.py:134: mor ==> more
sage/categories/unital_algebras.py:136: mor ==> more
sage/categories/unital_algebras.py:242: mor ==> more
sage/categories/unital_algebras.py:244: mor ==> more
sage/categories/unital_algebras.py:257: mor ==> more
sage/categories/unital_algebras.py:260: mor ==> more
sage/rings/lazy_laurent_series.py:133: subracted ==> subtracted
sage/rings/lazy_laurent_series.py:1045: coeffcients ==> coefficients
sage/rings/lazy_laurent_series_ring.py:382: convertable ==> convertible
sage/rings/polynomial/polynomial_element.pyx:2533: overriden ==> overridden
sage/rings/polynomial/polynomial_element.pyx:4375: Hart ==> Heart, harm
```




---

archive/issue_comments_452219.json:
```json
{
    "body": "Thank you for looking at this and for your suggestions!  Indeed, stream is better than corfficientstream. I am currently without Computer, but I will fix these in about four hours from now.",
    "created_at": "2021-08-16T06:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452219",
    "user": "mantepse"
}
```

Thank you for looking at this and for your suggestions!  Indeed, stream is better than corfficientstream. I am currently without Computer, but I will fix these in about four hours from now.



---

archive/issue_comments_452220.json:
```json
{
    "body": "Travis, please feel free to set to positive review!\n----\nNew commits:",
    "created_at": "2021-08-17T07:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452220",
    "user": "mantepse"
}
```

Travis, please feel free to set to positive review!
----
New commits:



---

archive/issue_comments_452221.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-17T07:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452221",
    "user": "mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-17T10:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452222",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452223.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-18T04:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452223",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452224.json:
```json
{
    "body": "This will be fine. I am setting this to a positive review. Any further improvements can be done on subsequent tickets.\n\nThere is a strong precedent for having classes names `MainClassName_other_info`. See matrices and polynomials. I agree it is a break from the usual Python conventions, but in some ways I see it as a way around not having an analog of C++ namespaces. We also get oddities like `StreamRmul`. However, this isn't something I care that strongly about.\n\nI am also a -1 on enforcement of comments being proper sentences. Simple clauses can be more useful as it expresses the most pertinent information. The indentation does serve a purpose; it tells you that it is part of the same comment. (I have had to put 3 different unrelated comment blocks together, but it takes a little bit of thought to understand they are actually unrelated. This gives a visual cue they are unrelated.)",
    "created_at": "2021-08-18T04:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452224",
    "user": "tscrim"
}
```

This will be fine. I am setting this to a positive review. Any further improvements can be done on subsequent tickets.

There is a strong precedent for having classes names `MainClassName_other_info`. See matrices and polynomials. I agree it is a break from the usual Python conventions, but in some ways I see it as a way around not having an analog of C++ namespaces. We also get oddities like `StreamRmul`. However, this isn't something I care that strongly about.

I am also a -1 on enforcement of comments being proper sentences. Simple clauses can be more useful as it expresses the most pertinent information. The indentation does serve a purpose; it tells you that it is part of the same comment. (I have had to put 3 different unrelated comment blocks together, but it takes a little bit of thought to understand they are actually unrelated. This gives a visual cue they are unrelated.)



---

archive/issue_comments_452225.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-08-18T08:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452225",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_452226.json:
```json
{
    "body": "Martin and I discussed this a bit more, and we decided to go back to the `Stream_info` format.",
    "created_at": "2021-08-18T08:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452226",
    "user": "tscrim"
}
```

Martin and I discussed this a bit more, and we decided to go back to the `Stream_info` format.



---

archive/issue_comments_452227.json:
```json
{
    "body": "In the meantime I (re)discovered `IntegerMod_abstract`\nand I'm sure there are many more.\n\nAlso, one can always `import CoefficientStream as Stream`\nif you prefer specific names.\n\nThanks for making some of the suggested changes\nand for explaining your position on others.",
    "created_at": "2021-08-18T09:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452227",
    "user": "slelievre"
}
```

In the meantime I (re)discovered `IntegerMod_abstract`
and I'm sure there are many more.

Also, one can always `import CoefficientStream as Stream`
if you prefer specific names.

Thanks for making some of the suggested changes
and for explaining your position on others.



---

archive/issue_comments_452228.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-19T08:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452228",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452229.json:
```json
{
    "body": "Setting this boldly to positive review, since all reviewers agreed to the (trivial) change.",
    "created_at": "2021-08-19T08:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452229",
    "user": "mantepse"
}
```

Setting this boldly to positive review, since all reviewers agreed to the (trivial) change.



---

archive/issue_comments_452230.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-08-19T08:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452230",
    "user": "mantepse"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_452231.json:
```json
{
    "body": "The single failing doctest reported by the patchbot has almost certainly nothing to do with this ticket.",
    "created_at": "2021-08-19T13:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452231",
    "user": "mantepse"
}
```

The single failing doctest reported by the patchbot has almost certainly nothing to do with this ticket.



---

archive/issue_comments_452232.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-08-27T12:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452232",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_452233.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-08-27T12:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452233",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_452234.json:
```json
{
    "body": "Boldly setting this back to positive review, because the changes are trivial.",
    "created_at": "2021-08-27T12:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452234",
    "user": "mantepse"
}
```

Boldly setting this back to positive review, because the changes are trivial.



---

archive/issue_comments_452235.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-27T12:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452235",
    "user": "mantepse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452236.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-08-27T12:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452236",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_452237.json:
```json
{
    "body": "This is a nontrivial change that definitely needs to be reviewed. That should have been done on a followup ticket; hopefully this branch has not already been merged and the commit won't be lost.",
    "created_at": "2021-08-27T12:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452237",
    "user": "tscrim"
}
```

This is a nontrivial change that definitely needs to be reviewed. That should have been done on a followup ticket; hopefully this branch has not already been merged and the commit won't be lost.



---

archive/issue_comments_452238.json:
```json
{
    "body": "OK, can I somehow remove the push and push it into a followup?\n\n(It looked trivial to me, please forgive)",
    "created_at": "2021-08-27T12:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452238",
    "user": "mantepse"
}
```

OK, can I somehow remove the push and push it into a followup?

(It looked trivial to me, please forgive)



---

archive/issue_comments_452239.json:
```json
{
    "body": "This is changing the behavior, so I consider it to be nontrivial.\n\nWhat we can do is just reset the branch back to the commit that we positively reviewed. We could just plow ahead too since it is unlikely the next beta will be cut soon and have this ticket included. (Commits have been lost this way before.) Plus since we are doing followup tickets that we have included the later commits, they definitely won't get lost. Your choice now.\n\n----\n\nComments on your changes:\n\nIn the test `L(0).map_coefficients(lambda c: c + 1)`, we should actually check the resulting stream is `Stream_zero`.\n\nWe should also better handle `truncate` and `__pow__` (with the special `0^0` returning `1`).\n\n\n```diff\n-return - other\n+return -other\n```\n",
    "created_at": "2021-08-27T12:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452239",
    "user": "tscrim"
}
```

This is changing the behavior, so I consider it to be nontrivial.

What we can do is just reset the branch back to the commit that we positively reviewed. We could just plow ahead too since it is unlikely the next beta will be cut soon and have this ticket included. (Commits have been lost this way before.) Plus since we are doing followup tickets that we have included the later commits, they definitely won't get lost. Your choice now.

----

Comments on your changes:

In the test `L(0).map_coefficients(lambda c: c + 1)`, we should actually check the resulting stream is `Stream_zero`.

We should also better handle `truncate` and `__pow__` (with the special `0^0` returning `1`).


```diff
-return - other
+return -other
```




---

archive/issue_comments_452240.json:
```json
{
    "body": "OK, then I'd rather leave my mistake as it is, especially since you are evidently already reviewing.\n\nConcerning `L(0).map_coefficients(lambda c: c + 1)`, I decided against it, because the test would look really ugly, and, more importantly, `Stream_exact` would actually raise an error (at least it should).  So, in fact an output `0` (without the `O(z^7)`) is a promise that the stream is zero.\n\n`__pow__` actually does the right thing: if `self` is 0, then it calls `generic_power`, which calls `_mul_`, which returns `0`.  I will add a test, however.",
    "created_at": "2021-08-27T12:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452240",
    "user": "mantepse"
}
```

OK, then I'd rather leave my mistake as it is, especially since you are evidently already reviewing.

Concerning `L(0).map_coefficients(lambda c: c + 1)`, I decided against it, because the test would look really ugly, and, more importantly, `Stream_exact` would actually raise an error (at least it should).  So, in fact an output `0` (without the `O(z^7)`) is a promise that the stream is zero.

`__pow__` actually does the right thing: if `self` is 0, then it calls `generic_power`, which calls `_mul_`, which returns `0`.  I will add a test, however.



---

archive/issue_comments_452241.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-27T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452241",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452242.json:
```json
{
    "body": "Replying to [comment:123 mantepse]:\n> Concerning `L(0).map_coefficients(lambda c: c + 1)`, I decided against it, because the test would look really ugly,\n\nIt is a test, and it would make it clear what behavior we expect.\n\n> and, more importantly, `Stream_exact` would actually raise an error (at least it should).  So, in fact an output `0` (without the `O(z^7)`) is a promise that the stream is zero.\n\nIt is possible we optimize out some of the checks for `Stream_exact` that ends up allowing this to sneak through. So it makes the test more robust.\n\n> `__pow__` actually does the right thing: if `self` is 0, then it calls `generic_power`, which calls `_mul_`, which returns `0`.  I will add a test, however.\n\nI agree that it does the right thing, but we can certainly optimize it.",
    "created_at": "2021-08-27T13:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452242",
    "user": "tscrim"
}
```

Replying to [comment:123 mantepse]:
> Concerning `L(0).map_coefficients(lambda c: c + 1)`, I decided against it, because the test would look really ugly,

It is a test, and it would make it clear what behavior we expect.

> and, more importantly, `Stream_exact` would actually raise an error (at least it should).  So, in fact an output `0` (without the `O(z^7)`) is a promise that the stream is zero.

It is possible we optimize out some of the checks for `Stream_exact` that ends up allowing this to sneak through. So it makes the test more robust.

> `__pow__` actually does the right thing: if `self` is 0, then it calls `generic_power`, which calls `_mul_`, which returns `0`.  I will add a test, however.

I agree that it does the right thing, but we can certainly optimize it.



---

archive/issue_comments_452243.json:
```json
{
    "body": "Hm, I have a question about 0 actually: can we make something like the following work:\n\n\n```\nsage: L.<z> = LazyLaurentSeriesRing(QQ)\nsage: L(0) is L.zero()\n```\n",
    "created_at": "2021-08-27T13:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452243",
    "user": "mantepse"
}
```

Hm, I have a question about 0 actually: can we make something like the following work:


```
sage: L.<z> = LazyLaurentSeriesRing(QQ)
sage: L(0) is L.zero()
```




---

archive/issue_comments_452244.json:
```json
{
    "body": "One further thought:\n\nI'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.\n\nIn case you do not agree, did you have a test as follows in mind:\n\n```\n            sage: from sage.data_structures.stream import Stream_zero\n            sage: L.<z> = LazyLaurentSeriesRing(ZZ)\n            sage: s = L(0).map_coefficients(lambda c: c + 1); s\n            0\n            sage: isinstance(s._coeff_stream, Stream_zero)\n            True\n```\n",
    "created_at": "2021-08-27T13:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452244",
    "user": "mantepse"
}
```

One further thought:

I'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.

In case you do not agree, did you have a test as follows in mind:

```
            sage: from sage.data_structures.stream import Stream_zero
            sage: L.<z> = LazyLaurentSeriesRing(ZZ)
            sage: s = L(0).map_coefficients(lambda c: c + 1); s
            0
            sage: isinstance(s._coeff_stream, Stream_zero)
            True
```




---

archive/issue_comments_452245.json:
```json
{
    "body": "Replying to [comment:127 mantepse]:\n> One further thought:\n> \n> I'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.\n\nRunning that argument further, `Stream_exact` and `Stream_inexact` could be seen as an implementation detail. All the user sees is the element of the lazy Laurent series. It is the developers that see more (as they need to).\n\nHere we are actually wanting to test something about the implementation. Plus `Stream_zero` is a very special object because it is the only thing that will have a non-integer (approximate) order.\n\nI don't think we should test `foo(L(0)) is L.zero()` as we cannot (nor should) presume there is a unique `zero` instance. Although this would be highly desirable.\n\n> In case you do not agree, did you have a test as follows in mind:\n> {{{\n>             sage: from sage.data_structures.stream import Stream_zero\n>             sage: L.<z> = LazyLaurentSeriesRing(ZZ)\n>             sage: s = L(0).map_coefficients(lambda c: c + 1); s\n>             0\n>             sage: isinstance(s._coeff_stream, Stream_zero)\n>             True\n> }}}\n\nYes, that would be the test I would want to run here.",
    "created_at": "2021-08-27T17:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452245",
    "user": "tscrim"
}
```

Replying to [comment:127 mantepse]:
> One further thought:
> 
> I'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.

Running that argument further, `Stream_exact` and `Stream_inexact` could be seen as an implementation detail. All the user sees is the element of the lazy Laurent series. It is the developers that see more (as they need to).

Here we are actually wanting to test something about the implementation. Plus `Stream_zero` is a very special object because it is the only thing that will have a non-integer (approximate) order.

I don't think we should test `foo(L(0)) is L.zero()` as we cannot (nor should) presume there is a unique `zero` instance. Although this would be highly desirable.

> In case you do not agree, did you have a test as follows in mind:
> {{{
>             sage: from sage.data_structures.stream import Stream_zero
>             sage: L.<z> = LazyLaurentSeriesRing(ZZ)
>             sage: s = L(0).map_coefficients(lambda c: c + 1); s
>             0
>             sage: isinstance(s._coeff_stream, Stream_zero)
>             True
> }}}

Yes, that would be the test I would want to run here.



---

archive/issue_comments_452246.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-28T13:20:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452246",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452247.json:
```json
{
    "body": "Replying to [comment:128 tscrim]:\n> Replying to [comment:127 mantepse]:\n> > One further thought:\n> > \n> > I'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.\n> \n> Running that argument further, `Stream_exact` and `Stream_inexact` could be seen as an implementation detail. All the user sees is the element of the lazy Laurent series. It is the developers that see more (as they need to).\n> \n> Here we are actually wanting to test something about the implementation. Plus `Stream_zero` is a very special object because it is the only thing that will have a non-integer (approximate) order.\n\nI have done the requested change.  The remainder of this comment is only for our personal enjoyment:\n\nI think that there is quite a fundamental - and in fact user-visible - difference between `Stream_exact` and `Stream_inexact`.  It is user visible, since the big-O term is missing from the output.  It is fundamental, because we can decide equality.\n\nI agree with your argument that `Stream_zero` is a very special object because of its infinite order.",
    "created_at": "2021-08-28T13:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452247",
    "user": "mantepse"
}
```

Replying to [comment:128 tscrim]:
> Replying to [comment:127 mantepse]:
> > One further thought:
> > 
> > I'm not quite sure we should really insist in the doctests on a difference between `Stream_exact` and `Stream_zero`.  It looks like an implementation detail to me.  I think that from the user's perspective, there should be absolutely no difference in behaviour between the two - in contrast to any `Stream_inexact`.
> 
> Running that argument further, `Stream_exact` and `Stream_inexact` could be seen as an implementation detail. All the user sees is the element of the lazy Laurent series. It is the developers that see more (as they need to).
> 
> Here we are actually wanting to test something about the implementation. Plus `Stream_zero` is a very special object because it is the only thing that will have a non-integer (approximate) order.

I have done the requested change.  The remainder of this comment is only for our personal enjoyment:

I think that there is quite a fundamental - and in fact user-visible - difference between `Stream_exact` and `Stream_inexact`.  It is user visible, since the big-O term is missing from the output.  It is fundamental, because we can decide equality.

I agree with your argument that `Stream_zero` is a very special object because of its infinite order.



---

archive/issue_comments_452248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-28T13:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452248",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452249.json:
```json
{
    "body": "I'm not sure whether you will hate me for this :-)\n\nI think we should change the order of the optional arguments.  Currently, we have:\n\n```\n    def _element_constructor_(self, x=None, valuation=None, constant=None, degree=None):\n```\n\nI think\n\n```\n    def _element_constructor_(self, x=None, valuation=None, degree=None, constant=None):\n```\n\nwould be more logical.  As I mentioned on #32309, we should also give the user the possibility to be explicit whether the argument is supposed to be interpreted as a polynomial or a function that yields the coefficients.  It appears to me, that the least disruptive way is\n\n```\n    def _element_constructor_(self, x=None, valuation=None, degree=None, constant=None, coefficients=None):\n```\n\n\nNote that the original code does only allows a single value as argument to the element constructor, which then returns a constant series.",
    "created_at": "2021-08-28T14:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452249",
    "user": "mantepse"
}
```

I'm not sure whether you will hate me for this :-)

I think we should change the order of the optional arguments.  Currently, we have:

```
    def _element_constructor_(self, x=None, valuation=None, constant=None, degree=None):
```

I think

```
    def _element_constructor_(self, x=None, valuation=None, degree=None, constant=None):
```

would be more logical.  As I mentioned on #32309, we should also give the user the possibility to be explicit whether the argument is supposed to be interpreted as a polynomial or a function that yields the coefficients.  It appears to me, that the least disruptive way is

```
    def _element_constructor_(self, x=None, valuation=None, degree=None, constant=None, coefficients=None):
```


Note that the original code does only allows a single value as argument to the element constructor, which then returns a constant series.



---

archive/issue_comments_452250.json:
```json
{
    "body": "Ping?",
    "created_at": "2021-08-31T05:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452250",
    "user": "mantepse"
}
```

Ping?



---

archive/issue_comments_452251.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-31T06:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452251",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452252.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-31T06:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452252",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452253.json:
```json
{
    "body": "Should we insist that valuation is an integer?\n\nWe currently test that it is not `None`, but I think it would be better to test `in ZZ`.  Of course, that won't help with silliness of `True`, but `isinstance(valuation, Integer)` seems a bit strict to me.",
    "created_at": "2021-08-31T06:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452253",
    "user": "mantepse"
}
```

Should we insist that valuation is an integer?

We currently test that it is not `None`, but I think it would be better to test `in ZZ`.  Of course, that won't help with silliness of `True`, but `isinstance(valuation, Integer)` seems a bit strict to me.



---

archive/issue_comments_452254.json:
```json
{
    "body": "Sorry, busy with teaching at the start of the week.\n\ncomment:132:\n\nI don't think we should have a separate `coefficients` input; it is too problematic for a user to input things. We probably want to change the logic order to handle the case when the input is a callable before we check if we can convert to the Laurent polynomial ring.\n\nPutting `degree` before `constant` is a good idea. We just have to tweak the logic for parsing the old input format.\n\ncomment:136:\n\nI don't think we really need to make sure all input is valid. So we could trust the user with good input (and the result will fail at some point). However, I am not opposed to adding this `in ZZ` test, but it should be within the `is not None` check as it should raise an error if that extra check fails.",
    "created_at": "2021-08-31T06:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452254",
    "user": "tscrim"
}
```

Sorry, busy with teaching at the start of the week.

comment:132:

I don't think we should have a separate `coefficients` input; it is too problematic for a user to input things. We probably want to change the logic order to handle the case when the input is a callable before we check if we can convert to the Laurent polynomial ring.

Putting `degree` before `constant` is a good idea. We just have to tweak the logic for parsing the old input format.

comment:136:

I don't think we really need to make sure all input is valid. So we could trust the user with good input (and the result will fail at some point). However, I am not opposed to adding this `in ZZ` test, but it should be within the `is not None` check as it should raise an error if that extra check fails.



---

archive/issue_comments_452255.json:
```json
{
    "body": "Sorry to put extra burden on you.\n\nConcerning coefficients: there is no way to distinguish between coefficients and polynomials, since polynomials are callable.",
    "created_at": "2021-08-31T06:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452255",
    "user": "mantepse"
}
```

Sorry to put extra burden on you.

Concerning coefficients: there is no way to distinguish between coefficients and polynomials, since polynomials are callable.



---

archive/issue_comments_452256.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-31T07:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452256",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452257.json:
```json
{
    "body": "I'm afraid we should also do something about `series`.  The old signature was:\n\n```\n series(coefficient, valuation, constant=None)\n\n    Return a lazy Laurent series.\n\n    INPUT:\n\n        coefficient \u2013 Python function that computes coefficients\n\n        valuation \u2013 integer; approximate valuation of the series\n\n        constant \u2013 either None or pair of an element of the base ring and an integer\n```\n\nCurrently, the signature is\n\n```\n    def series(self, coefficient, valuation, constant=None, degree=None):\n```\n\nwhich is confusing.\n\nShould we make it \n\n```\n    def series(self, coefficient, valuation, degree=None, constant=None):\n```\n\nand allow `degree` to be a pair `(constant, degree)` or\n\n```\n    def series(self, coefficient, valuation, constant=None):\n```\n\n?\n\n(perhaps it would be better to deprecate this method anyway)",
    "created_at": "2021-08-31T09:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452257",
    "user": "mantepse"
}
```

I'm afraid we should also do something about `series`.  The old signature was:

```
 series(coefficient, valuation, constant=None)

    Return a lazy Laurent series.

    INPUT:

        coefficient – Python function that computes coefficients

        valuation – integer; approximate valuation of the series

        constant – either None or pair of an element of the base ring and an integer
```

Currently, the signature is

```
    def series(self, coefficient, valuation, constant=None, degree=None):
```

which is confusing.

Should we make it 

```
    def series(self, coefficient, valuation, degree=None, constant=None):
```

and allow `degree` to be a pair `(constant, degree)` or

```
    def series(self, coefficient, valuation, constant=None):
```

?

(perhaps it would be better to deprecate this method anyway)



---

archive/issue_comments_452258.json:
```json
{
    "body": "Don't worry about it; I just might not be able to always push changes so quickly this week.\n\nWe still don't have a good replacement for what the `series` method does. However, I agree with changing the signature and allowing the pair input. I also did the same if someone does `constant=(a,b)`.\n\nI thought a bit more about the `coefficients` attributes for the `_element_constructor_`. I think you're right that there is not really a better solution. I implemented something that is more minimal of a change to avoid duplication and to minimize the impact. Although on this ticket, it is likely not necessary as we cannot (easily) demonstrate a case where we must use the option.\n\nI also added the checks for `valuation in ZZ`.\n----\nNew commits:",
    "created_at": "2021-09-01T00:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452258",
    "user": "tscrim"
}
```

Don't worry about it; I just might not be able to always push changes so quickly this week.

We still don't have a good replacement for what the `series` method does. However, I agree with changing the signature and allowing the pair input. I also did the same if someone does `constant=(a,b)`.

I thought a bit more about the `coefficients` attributes for the `_element_constructor_`. I think you're right that there is not really a better solution. I implemented something that is more minimal of a change to avoid duplication and to minimize the impact. Although on this ticket, it is likely not necessary as we cannot (easily) demonstrate a case where we must use the option.

I also added the checks for `valuation in ZZ`.
----
New commits:



---

archive/issue_comments_452259.json:
```json
{
    "body": "Thank you! Looks OK, if you agree, please set it back to 'positive review'!",
    "created_at": "2021-09-01T07:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452259",
    "user": "mantepse"
}
```

Thank you! Looks OK, if you agree, please set it back to 'positive review'!



---

archive/issue_comments_452260.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-01T07:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452260",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452261.json:
```json
{
    "body": "Thank you. Now back to work on Dirichlet series.",
    "created_at": "2021-09-01T07:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452261",
    "user": "tscrim"
}
```

Thank you. Now back to work on Dirichlet series.



---

archive/issue_comments_452262.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-05T21:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31660#issuecomment-452262",
    "user": "vbraun"
}
```

Resolution: fixed
