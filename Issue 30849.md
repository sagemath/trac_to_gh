# Issue 30849: Fix tensor product of dense matrix by sparse matrix

Issue created by migration from https://trac.sagemath.org/ticket/31086

Original creator: slelievre

Original creation time: 2020-12-20 02:31:48

CC:  slelievre

Keywords: matrix, tensor_product, dense, sparse

The tensor product of a dense matrix by a sparse matrix
fails for some base rings including cyclotomic fields.
Everything works fine over `ZZ` or `QQ`.

Illustration in Sage 9.3.beta4:

```
sage: k = CyclotomicField(3)
sage: I = identity_matrix(k, 2)
sage: J = identity_matrix(k, 2, sparse=True)
sage: J.tensor_product(J)
[1 0|0 0]
[0 1|0 0]
[---+---]
[0 0|1 0]
[0 0|0 1]
sage: J.tensor_product(I)
[1 0|0 0]
[0 1|0 0]
[---+---]
[0 0|1 0]
[0 0|0 1]
sage: I.tensor_product(I)
[1 0|0 0]
[0 1|0 0]
[---+---]
[0 0|1 0]
[0 0|0 1]
sage: I.tensor_product(J)
Traceback (most recent call last)
...
AttributeError: 'sage.matrix.matrix_generic_sparse.Matrix_generic_sparse'
object has no attribute '_rational_matrix'
```


Initial report by Will Orrick at

- [Ask Sage question 54762](https://ask.sagemath.org/question/54762)


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
