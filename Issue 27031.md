# Issue 27031: py3: fix FriCAS interface

Issue created by migration from https://trac.sagemath.org/ticket/27268

Original creator: mantepse

Original creation time: 2019-02-12 20:31:16

CC:  chapoton




---

Comment by mantepse created at 2019-02-12 20:37:51

Changing type from PLEASE CHANGE to defect.


---

Comment by mantepse created at 2019-02-12 20:37:51

Changing status from new to needs_review.


---

Comment by mantepse created at 2019-02-12 20:37:51

Changing component from PLEASE CHANGE to python3.


---

Comment by mantepse created at 2019-02-12 20:37:51

New commits:


---

Comment by slelievre created at 2019-02-15 03:55:26

Might this help with #17908 and #25905? Should there also be a `register_symbol` for `abs`?


---

Comment by mantepse created at 2019-02-15 16:51:19

* #25905 has a bad description - the bug is further down the comments, and is a true fricas bug

* I didn't know about #17908, thank you for notifying me! Yes, the cure is very likely now simply adding the translation of `abs`, I'll keep this in mind.

* this ticket is unrelated to the two above, it only provides a python3 fix.  However, to avoid merge conflicts, I'd like to get in this ticket and #26068 first, I'll then do #17908.


---

Comment by slelievre created at 2019-02-15 17:11:57

Replying to [comment:4 mantepse]:
> ... thank you for notifying me! ...

You can query Trac for all tickets whose summary contains "fricas":

- https://trac.sagemath.org/query?order=id&desc=1&summary=~fricas.


---

Comment by mantepse created at 2019-02-15 17:45:04

Changing keywords from "" to "FriCAS".


---

Comment by git created at 2019-02-15 19:42:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-02-16 17:21:39

Actually, the problem is this line: `(var, poly) = rootOf.items()[i]`. The result of `items()` is a view, which does not support indexing (in a way, think of it like an iterator). However, since your changes work and the code looks cleaner, positive review.


---

Comment by tscrim created at 2019-02-16 17:21:39

Changing status from needs_review to positive_review.


---

Comment by mantepse created at 2019-02-16 17:39:19

Replying to [comment:8 tscrim]:
> Actually, the problem is this line: `(var, poly) = rootOf.items()[i]`.

Yes, the error message and trace did show that.

> The result of `items()` is a view, which does not support indexing (in a way, think of it like an iterator). However, since your changes work and the code looks cleaner, positive review.

General question: should I modify the ticket description once I know the root of the problem?  The downside is that the history how the bugfix developed is sometimes not as easy to understand anymore.


---

Comment by tscrim created at 2019-02-16 17:40:56

Yes, in this case it probably is better to modify it so that people have an easier time seeing the issue (rather than reading the comments).


---

Comment by vbraun created at 2019-02-22 22:01:38

Resolution: fixed
