# Issue 34312: speed up conversion of lrcalc partitions to sage partitions

Issue created by migration from https://trac.sagemath.org/ticket/34549

Original creator: mantepse

Original creation time: 2022-09-17 15:15:45




---

Comment by mantepse created at 2022-09-17 15:27:16

Changing keywords from "" to "performance".


---

Comment by mantepse created at 2022-09-17 15:27:16

Changing type from PLEASE CHANGE to enhancement.


---

Comment by mantepse created at 2022-09-17 15:27:16

However, the current branch is incorrect, we want elements in `ZZ`, not python `int`
----
New commits:


---

Comment by mantepse created at 2022-09-17 15:27:16

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by git created at 2022-09-18 20:27:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mantepse created at 2022-09-18 20:28:51

Comparison:

```
sage: from sage.libs.lrcalc.lrcalc import mult
sage: n=10; l = [(la, mu) for la in Partitions(n) for mu in Partitions(n)]
sage: %timeit [mult(la, mu) for la, mu in l]
1.9 s ± 321 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit [mult(la, mu) for la, mu in l]
2.12 s ± 40.4 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit [mult(la, mu) for la, mu in l]
2.08 s ± 19 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```

vs. old:

```
sage: from sage.libs.lrcalc.lrcalc import mult
sage: n=10; l = [(la, mu) for la in Partitions(n) for mu in Partitions(n)]
sage: %timeit [mult(la, mu) for la, mu in l]
2.98 s ± 212 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit [mult(la, mu) for la, mu in l]
2.64 s ± 478 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
sage: %timeit [mult(la, mu) for la, mu in l]
2.42 s ± 433 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```



---

Comment by mantepse created at 2022-09-18 20:30:17

Changing status from new to needs_review.
