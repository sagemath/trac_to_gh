# Issue 30996: Categories for Homset of Manifolds do not meet

Issue created by migration from https://trac.sagemath.org/ticket/31233

Original creator: @mjungmath

Original creation time: 2021-01-13 18:36:59

CC:  tscrim egourgoulhon

Here is a minimal example:

```
sage: R3 = EuclideanSpace(3) 
....: S2 = R3.sphere(coordinates='stereographic'); S2                           
2-sphere S^2 of radius 1 smoothly embedded in the Euclidean space E^3                                                   
sage: I = S2.identity_map()                                                     
sage: iota = S2.embedding()                                                     
sage: iota * I                                                                  
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-5-2ed3e7f8e656> in <module>
----> 1 iota * I

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map.__mul__ (build/cythonized/sage/categories/map.c:7680)()
    895         if right.codomain() != self.domain():
    896             raise TypeError("self (=%s) domain must equal right (=%s) codomain" % (self, right))
--> 897         return self._composition(right)
    898 
    899     def _composition(self, right):

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map._composition (build/cythonized/sage/categories/map.c:7854)()
    935         """
    936         category = self.category_for()._meet_(right.category_for())
--> 937         H = homset.Hom(right.domain(), self._codomain, category)
    938         return self._composition_(right, H)
    939 

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/homset.py in Hom(X, Y, category, check)
    416                     # available for the following error message. It simply
    417                     # belongs to the wrong category.
--> 418                     raise ValueError("{} is not in {}".format(O, category))
    419 
    420         # Construct H

ValueError: Euclidean space E^3 is not in Join of Category of compact topological spaces and Category of smooth manifolds over Real Field with 53 bits of precision and Category of complete metric spaces
```



---

Comment by @mjungmath created at 2021-01-13 19:01:50

New commits:


---

Comment by @mjungmath created at 2021-01-13 19:01:50

Changing status from new to needs_review.


---

Comment by @mjungmath created at 2021-01-13 20:58:18

There are some failed doctests in `integrated_curve.py` on `__recude__`. However, I think this is the proper way to do it. Just overwrite the docstrings?


---

Comment by tscrim created at 2021-01-14 05:20:04

It depends on what the failures are. In this case, it seems like the best thing is to just change them.

This is probably the right solution. It feels slightly strange to weaken the type of morphism, but this doesn't make so much sense at the category level I think.


---

Comment by git created at 2021-01-14 08:59:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-14 13:09:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-01-14 16:36:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mjungmath created at 2021-01-14 16:37:23

Even mathematically it makes more sense to restrict the categories.

This should be it. Wait for green patchbot.


---

Comment by tscrim created at 2021-01-15 03:00:28

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-01-15 03:00:28

LGTM.


---

Comment by @mjungmath created at 2021-01-15 09:37:06

Thanks!


---

Comment by vbraun created at 2021-01-24 10:37:09

Resolution: fixed
