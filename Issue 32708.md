# Issue 32708: Cygwin: notebook spkg installation hangs in pip dependency resolution

Issue created by migration from https://trac.sagemath.org/ticket/32945

Original creator: mkoeppe

Original creation time: 2021-11-28 19:17:14

CC:  slelievre dimpase jhpalmieri


```
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pyrsistent-0.18.0-cp38-cp38-cygwin_3_3_2_x86_64.whl
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/Pygments-2.10.0-py3-none-any.whl
INFO: pip is looking at multiple versions of pandocfilters to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pandocfilters-1.4.3-py3-none-any.whl
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of attrs to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/attrs-21.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: https://pip.pypa.io/surveys/backtracking
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of jsonschema to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/jsonschema-3.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. 
...
```


Unchanged after the IPython/Jupyter upgrade #32930.


---

Comment by mkoeppe created at 2021-11-28 19:23:03

`@`slelievre, do you see this in the logs of `notebook` also in your local build?


---

Comment by mkoeppe created at 2021-11-28 21:07:46

There are some upcoming changes to `pip` that might fix this issue https://github.com/pypa/pip/pull/10574/files

https://pip.pypa.io/en/latest/news/


---

Comment by slelievre created at 2021-11-28 21:53:20

No such thing in `logs/pkgs/notebook-6.4.3.log` here.


---

Comment by mkoeppe created at 2021-11-28 21:59:39

New commits:


---

Comment by git created at 2021-11-28 23:57:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-11-29 05:29:48

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-11-29 05:29:48

This fixes the problem, as can be seen in https://github.com/mkoeppe/sage/runs/4349318130?check_suite_focus=true


---

Comment by mkoeppe created at 2021-11-29 05:30:57

Changing priority from critical to blocker.


---

Comment by dimpase created at 2021-12-02 21:59:38

not yet released pip, where this megapatch  is from, is dropping python 3.6.

Can we either follow the suit, or make this patch cygwin only?


---

Comment by slelievre created at 2021-12-02 22:06:24

We dropped support for Python 3.6 in #30551.

Dropping support for Python 3.7 is #32937.


---

Comment by dimpase created at 2021-12-02 22:37:02

OK, cool.


---

Comment by dimpase created at 2021-12-02 22:37:02

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-02 23:54:28

Thanks!


---

Comment by vbraun created at 2021-12-12 15:09:25

Resolution: fixed
