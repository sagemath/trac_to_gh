# Issue 32708: Cygwin: notebook spkg installation hangs in pip dependency resolution

archive/issues_032708.json:
```json
{
    "body": "CC:  slelievre dimpase jhpalmieri\n\n\n```\nINFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pyrsistent-0.18.0-cp38-cp38-cygwin_3_3_2_x86_64.whl\nINFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/Pygments-2.10.0-py3-none-any.whl\nINFO: pip is looking at multiple versions of pandocfilters to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pandocfilters-1.4.3-py3-none-any.whl\nINFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.\nINFO: pip is looking at multiple versions of attrs to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/attrs-21.2.0-py2.py3-none-any.whl\nINFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: https://pip.pypa.io/surveys/backtracking\nINFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.\nINFO: pip is looking at multiple versions of jsonschema to determine which version is compatible with other requirements. This could take a while.\nProcessing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/jsonschema-3.2.0-py2.py3-none-any.whl\nINFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. \n...\n```\n\n\nUnchanged after the IPython/Jupyter upgrade #32930.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32945\n\n",
    "created_at": "2021-11-28T19:17:14Z",
    "labels": [
        "build",
        "critical",
        "bug"
    ],
    "title": "Cygwin: notebook spkg installation hangs in pip dependency resolution",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32708",
    "user": "mkoeppe"
}
```
CC:  slelievre dimpase jhpalmieri


```
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pyrsistent-0.18.0-cp38-cp38-cygwin_3_3_2_x86_64.whl
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/Pygments-2.10.0-py3-none-any.whl
INFO: pip is looking at multiple versions of pandocfilters to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/pandocfilters-1.4.3-py3-none-any.whl
INFO: pip is looking at multiple versions of pyrsistent to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of attrs to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/attrs-21.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: https://pip.pypa.io/surveys/backtracking
INFO: pip is looking at multiple versions of pygments to determine which version is compatible with other requirements. This could take a while.
INFO: pip is looking at multiple versions of jsonschema to determine which version is compatible with other requirements. This could take a while.
Processing /opt/sage-cc60cfebc4576fed8b01f0fc487271bdee3cefed/var/lib/sage/wheels/jsonschema-3.2.0-py2.py3-none-any.whl
INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. 
...
```


Unchanged after the IPython/Jupyter upgrade #32930.

Issue created by migration from https://trac.sagemath.org/ticket/32945





---

archive/issue_comments_466573.json:
```json
{
    "body": "`@`slelievre, do you see this in the logs of `notebook` also in your local build?",
    "created_at": "2021-11-28T19:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466573",
    "user": "mkoeppe"
}
```

`@`slelievre, do you see this in the logs of `notebook` also in your local build?



---

archive/issue_comments_466574.json:
```json
{
    "body": "There are some upcoming changes to `pip` that might fix this issue https://github.com/pypa/pip/pull/10574/files\n\nhttps://pip.pypa.io/en/latest/news/",
    "created_at": "2021-11-28T21:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466574",
    "user": "mkoeppe"
}
```

There are some upcoming changes to `pip` that might fix this issue https://github.com/pypa/pip/pull/10574/files

https://pip.pypa.io/en/latest/news/



---

archive/issue_comments_466575.json:
```json
{
    "body": "No such thing in `logs/pkgs/notebook-6.4.3.log` here.",
    "created_at": "2021-11-28T21:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466575",
    "user": "slelievre"
}
```

No such thing in `logs/pkgs/notebook-6.4.3.log` here.



---

archive/issue_comments_466576.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-11-28T21:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466576",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_466577.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-28T23:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466577",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_466578.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-11-29T05:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466578",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_466579.json:
```json
{
    "body": "This fixes the problem, as can be seen in https://github.com/mkoeppe/sage/runs/4349318130?check_suite_focus=true",
    "created_at": "2021-11-29T05:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466579",
    "user": "mkoeppe"
}
```

This fixes the problem, as can be seen in https://github.com/mkoeppe/sage/runs/4349318130?check_suite_focus=true



---

archive/issue_comments_466580.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2021-11-29T05:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466580",
    "user": "mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_466581.json:
```json
{
    "body": "not yet released pip, where this megapatch  is from, is dropping python 3.6.\n\nCan we either follow the suit, or make this patch cygwin only?",
    "created_at": "2021-12-02T21:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466581",
    "user": "dimpase"
}
```

not yet released pip, where this megapatch  is from, is dropping python 3.6.

Can we either follow the suit, or make this patch cygwin only?



---

archive/issue_comments_466582.json:
```json
{
    "body": "We dropped support for Python 3.6 in #30551.\n\nDropping support for Python 3.7 is #32937.",
    "created_at": "2021-12-02T22:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466582",
    "user": "slelievre"
}
```

We dropped support for Python 3.6 in #30551.

Dropping support for Python 3.7 is #32937.



---

archive/issue_comments_466583.json:
```json
{
    "body": "OK, cool.",
    "created_at": "2021-12-02T22:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466583",
    "user": "dimpase"
}
```

OK, cool.



---

archive/issue_comments_466584.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-02T22:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466584",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_466585.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-12-02T23:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466585",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_466586.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-12T15:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32708#issuecomment-466586",
    "user": "vbraun"
}
```

Resolution: fixed
