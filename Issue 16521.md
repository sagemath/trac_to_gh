# Issue 16521: FiniteStateMachine.composition: check types

Issue created by migration from https://trac.sagemath.org/ticket/16758

Original creator: cheuberg

Original creation time: 2014-08-04 16:51:32

CC:  skropf dkrenn

Keywords: composition

The output of an automaton should not be feedable into a transducer (because there is none); when composing an automaton with a transducer, the result should be an automaton.

The aim would be:


```         
sage: from sage.combinat.finite_state_machine import (
....:     is_Automaton, is_Transducer)
sage: T = Transducer([(0, 0, 0, 0)], initial_states=[0])
sage: A = Automaton([(0, 0, 0)], initial_states=[0])
sage: T.composition(A, algorithm='direct')
Traceback (most recent call last):
...
TypeError: Composition with automaton is not possible.
sage: T.composition(A, algorithm='explorative')
Traceback (most recent call last):
...
TypeError: Composition with automaton is not possible.
sage: A.composition(A, algorithm='direct')
Traceback (most recent call last):
...
TypeError: Composition with automaton is not possible.
sage: A.composition(A, algorithm='explorative')
Traceback (most recent call last):
...
TypeError: Composition with automaton is not possible.
sage: is_Automaton(A.composition(T, algorithm='direct'))
True
sage: is_Automaton(A.composition(T, algorithm='explorative'))
True
```


I'll prepare a patch.


---

Comment by cheuberg created at 2014-08-04 19:23:28

New commits:


---

Comment by cheuberg created at 2014-08-04 19:23:28

Changing status from new to needs_review.


---

Comment by dkrenn created at 2014-08-05 08:14:10

Changing status from needs_review to positive_review.


---

Comment by dkrenn created at 2014-08-05 08:14:10

Fine for me.


---

Comment by vbraun created at 2014-08-06 12:07:20

Resolution: fixed
