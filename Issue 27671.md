# Issue 27671: py3: fix doctests in multi_polynomial_ideal and toy_buchberger

archive/issues_027671.json:
```json
{
    "body": "This ticket fixes all the doctests in `multi_polynomial_ideal` and `toy_buchberger`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27908\n\n",
    "created_at": "2019-05-31T19:21:26Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "py3: fix doctests in multi_polynomial_ideal and toy_buchberger",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27671",
    "user": "https://github.com/mwageringel"
}
```
This ticket fixes all the doctests in `multi_polynomial_ideal` and `toy_buchberger`.

Issue created by migration from https://trac.sagemath.org/ticket/27908





---

archive/issue_comments_390243.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390243",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_390244.json:
```json
{
    "body": "The hash of polynomials intenionally makes use of the string hash of its variable names. This differs in each Python 3 session, so that the order of polynomials when iterating over sets is not consistent. Sets are used both in the implementation of `random_element()` and `buchberger()`, so this is the root reason for all the doctest failures fixed in this ticket.\n\nIn `toy_buchberger` I chose to keep the protocol output of `buchberger()` by declaring it random, as it seems educationally useful. I could have used a py2 directive, but chose not to mainly to keep the test from being removed when Python 2 support is dropped. I removed the protocol output for `buchberger_improved()` and only test for the number of reductions-to-zero, as it seems enough to see the protocol once in the docs.\n\nI also fixed most of the PEP warnings in `toy_buchberger`.\n----\nNew commits:",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390244",
    "user": "https://github.com/mwageringel"
}
```

The hash of polynomials intenionally makes use of the string hash of its variable names. This differs in each Python 3 session, so that the order of polynomials when iterating over sets is not consistent. Sets are used both in the implementation of `random_element()` and `buchberger()`, so this is the root reason for all the doctest failures fixed in this ticket.

In `toy_buchberger` I chose to keep the protocol output of `buchberger()` by declaring it random, as it seems educationally useful. I could have used a py2 directive, but chose not to mainly to keep the test from being removed when Python 2 support is dropped. I removed the protocol output for `buchberger_improved()` and only test for the number of reductions-to-zero, as it seems enough to see the protocol once in the docs.

I also fixed most of the PEP warnings in `toy_buchberger`.
----
New commits:



---

archive/issue_comments_390245.json:
```json
{
    "body": "Could you please make the same branch without the pep changes ? I see that you have separated commits, and the pep changes only make it more difficult to understand what you really do. Thanks!",
    "created_at": "2019-06-12T07:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390245",
    "user": "https://github.com/fchapoton"
}
```

Could you please make the same branch without the pep changes ? I see that you have separated commits, and the pep changes only make it more difficult to understand what you really do. Thanks!



---

archive/issue_comments_390246.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-06-12T17:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_390247.json:
```json
{
    "body": "Of course. I have removed the last commit and will create a new ticket for it, once this one is merged.",
    "created_at": "2019-06-12T17:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390247",
    "user": "https://github.com/mwageringel"
}
```

Of course. I have removed the last commit and will create a new ticket for it, once this one is merged.



---

archive/issue_comments_390248.json:
```json
{
    "body": "ok, thanks. This looks good enough. I am setting to positive.",
    "created_at": "2019-06-12T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390248",
    "user": "https://github.com/fchapoton"
}
```

ok, thanks. This looks good enough. I am setting to positive.



---

archive/issue_comments_390249.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-12T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390249",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_390250.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-27T20:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390250",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_390251.json:
```json
{
    "body": "Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27671",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27671#issuecomment-390251",
    "user": "https://github.com/embray"
}
```

Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.
