# Issue 27671: py3: fix doctests in multi_polynomial_ideal and toy_buchberger

Issue created by migration from https://trac.sagemath.org/ticket/27908

Original creator: @mwageringel

Original creation time: 2019-05-31 19:21:26

This ticket fixes all the doctests in `multi_polynomial_ideal` and `toy_buchberger`.


---

Comment by @mwageringel created at 2019-05-31 19:59:20

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2019-05-31 19:59:20

The hash of polynomials intenionally makes use of the string hash of its variable names. This differs in each Python 3 session, so that the order of polynomials when iterating over sets is not consistent. Sets are used both in the implementation of `random_element()` and `buchberger()`, so this is the root reason for all the doctest failures fixed in this ticket.

In `toy_buchberger` I chose to keep the protocol output of `buchberger()` by declaring it random, as it seems educationally useful. I could have used a py2 directive, but chose not to mainly to keep the test from being removed when Python 2 support is dropped. I removed the protocol output for `buchberger_improved()` and only test for the number of reductions-to-zero, as it seems enough to see the protocol once in the docs.

I also fixed most of the PEP warnings in `toy_buchberger`.
----
New commits:


---

Comment by chapoton created at 2019-06-12 07:52:54

Could you please make the same branch without the pep changes ? I see that you have separated commits, and the pep changes only make it more difficult to understand what you really do. Thanks!


---

Comment by git created at 2019-06-12 17:31:41

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mwageringel created at 2019-06-12 17:36:39

Of course. I have removed the last commit and will create a new ticket for it, once this one is merged.


---

Comment by chapoton created at 2019-06-12 19:08:59

ok, thanks. This looks good enough. I am setting to positive.


---

Comment by chapoton created at 2019-06-12 19:08:59

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-06-27 20:13:24

Resolution: fixed


---

Comment by embray created at 2019-07-03 11:34:48

Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were _actually_ included, especially when closing tickets.
