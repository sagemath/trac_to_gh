# Issue 23939: Implement formal Set comprehension

Issue created by migration from https://trac.sagemath.org/ticket/24176

Original creator: rws

Original creation time: 2017-11-08 16:54:30

CC:  tscrim mantepse

In order to be able to express solution sets from SymPy's `solveset` a set comprehension constructor as equivalent to SymPy's imageset is needed. As the arguments are symbolic the most natural way to do this would be a formal symbolic function named like `set_of_all` taking a term argument and a list argument containing `element_of(...)` function expressions.


---

Comment by rws created at 2017-11-10 08:01:18

Accepting lists requires the function being a `GinacFunction`.


---

Comment by rws created at 2017-11-21 16:40:11

New commits:


---

Comment by mkoeppe created at 2021-06-09 03:04:31

Rebased on top of rebased #24171
----
New commits:


---

Comment by git created at 2021-06-09 03:59:00

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mkoeppe created at 2021-06-09 04:03:54

Rebased on top of updated #24171, which cherry-picked 1 commit from here.

Not sure about the changes on this ticket marked 24171. They are either from a newer or older version of 24171.


---

Comment by mkoeppe created at 2021-06-09 04:19:46

The fix to `RealSet.__bool__` in 6995d1e/2a9c49a can go to #31941 (Make empty `RealSet` false).

Unclear to me whether 6995d1e (make `RealSet` inherit from `Set_generic`) should be done


---

Comment by mkoeppe created at 2021-06-10 03:06:55

I think the approach on the current branch may be tied a bit too closely to `SR` functions.

I think it's better to first implement:

- `ImageSubset` (as an abstract subobject of the codomain) for arbitrary `Map`s -- this would be a generalization of `ImageManifoldSubset` (#31653). No relation to `SR` (but by relaxing the code from #24171 that only allows some sets to be coerced to `SR`, one would be able to coerce it to `SR`).

- `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.


---

Comment by mkoeppe created at 2021-06-19 03:19:27

Replying to [comment:14 mkoeppe]:
> - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.

more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)


---

Comment by mkoeppe created at 2021-07-02 02:45:33

Replying to [comment:16 mkoeppe]:
> Replying to [comment:14 mkoeppe]:
> > - `ConditionSet` (as an abstract subobject of a parent in the `Sets` category) - defined via the element constructor of the parent and an `SR` expression with truth value.
> 
> more precisely... an element of `CallableSymbolicExpression` (see #32008 for making this safer)

This is now implemented in #32089.


---

Comment by mkoeppe created at 2021-07-04 02:41:03

`ImageSet` is essentially the same as the (deprecated?) `sage.combinat.combinat.MapCombinatorialClass`, except that we would not insist that the map is injective.


---

Comment by mkoeppe created at 2021-07-04 03:10:30

Opened #32121 Replace `MapCombinatorialClass`


---

Comment by mantepse created at 2021-07-06 06:31:02

`@`mkoeppe: since you put me into the CC list, would this include symbolic roots of polynomials, given by the minimal polynomial?

I am guessing (because I'm not an expert there) that these would really need a special treatment, because one can compute with them quite well.


---

Comment by mkoeppe created at 2022-03-05 00:14:40

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-03-05 00:14:40

With #32121 merged, this is now finished


---

Comment by tscrim created at 2022-03-05 23:05:24

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-03-05 23:05:24

Agreed.


---

Comment by mantepse created at 2022-03-06 10:33:52

Does #32121 provide a possibility to specify the set of roots of a polynomial?


---

Comment by mkoeppe created at 2022-05-11 02:14:43

Resolution: invalid
