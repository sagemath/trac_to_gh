# Issue 20908: deprecate some cmp keyword in favor of key in factorizations

Issue created by migration from https://trac.sagemath.org/ticket/21145

Original creator: chapoton

Original creation time: 2016-08-01 19:01:09

CC:  tscrim jmantysalo jdemeyer

as a step towards python3

let us try to get rid of `cmp=` in factorizations


---

Comment by chapoton created at 2016-08-01 19:20:34

Changing status from new to needs_info.


---

Comment by chapoton created at 2016-08-01 19:20:34

New commits:


---

Comment by git created at 2016-08-02 07:57:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-02 09:26:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-08-02 09:30:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-08-02 12:23:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-08-02 12:23:52

Changing status from needs_info to needs_review.


---

Comment by chapoton created at 2016-08-02 14:47:36

bot is green !


---

Comment by aapitzsch created at 2016-08-02 20:51:33

Calls like `self.__x.sort(cmp=_cmp)` will crash in python 3. I suggest you use `cmp_to_key()` from [functools](https://docs.python.org/2/library/functools.html):  
`self.__x.sort(key=cmp_to_key(_cmp))`


---

Comment by tscrim created at 2016-08-03 01:22:25

LGTM.

`@`aapitzsch Those should go away by the time we switch to Python3 (hopefully we will be there before EOL for Python2).


---

Comment by tscrim created at 2016-08-03 01:22:25

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-08-03 13:55:24

Actually, I now understand Andre's comment, we should change

```diff
-self.__x.sort(cmp=_cmp)
+self.__x.sort(key=cmp_to_key(_cmp))
```

in the deprecated code to be python2/3 compatible now (I interpreted it as a long-term, sorry!).


---

Comment by tscrim created at 2016-08-03 13:55:24

Changing status from positive_review to needs_work.


---

Comment by git created at 2016-08-03 14:06:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-08-03 14:07:15

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2016-08-03 14:24:00

Thanks, and sorry I didn't understand it earlier.


---

Comment by tscrim created at 2016-08-03 14:24:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-08-07 20:00:41

Resolution: fixed
