# Issue 17752: Double Affine Hecke Algebra

archive/issues_017752.json:
```json
{
    "body": "CC:  sage-combinat @anneschilling @dwbump\n\nKeywords: daha, days64\n\nThis ticket implements the Double Affine Hecke Algebra, with multiple bases, ...\n\nIssue created by migration from https://trac.sagemath.org/ticket/17989\n\n",
    "created_at": "2015-03-18T21:08:43Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Double Affine Hecke Algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17752",
    "user": "@nthiery"
}
```
CC:  sage-combinat @anneschilling @dwbump

Keywords: daha, days64

This ticket implements the Double Affine Hecke Algebra, with multiple bases, ...

Issue created by migration from https://trac.sagemath.org/ticket/17989





---

archive/issue_comments_237794.json:
```json
{
    "body": "Some notes from the discussion at SD64:\n\n* Generic features to be extracted from #15375\n\n- Exp functor:\n\n  Currently in sage/groups/exp.py ; could be sage/monoids/exp.py\n\n      class Exp(...)\n         def log(self):\n             return self._log\n\n      sage: Exp(my_additive_group)\n      sage: Exp(additive_group_morphism)\n\n      sage: my_additive_group.exp()  # return the associated multiplicative group\n\n  Possibly make it a functorial construction (can be postponed to later):\n\n      Create sage.categories.additive_group_exp along the lines of\n      sage.categories.cartesian_product\n\n      class AdditiveMagmas:\n          class Exp:\n              class ParentMethods:\n                   `@`abstract_method\n                   def log(self):\n                       ...\n              class ElementMethods:\n                   def _mul_(self, other):\n                       return self.parent()(self.value+other.value)\n\n          class Unital:\n              class Exp:\n                  class ParentMethods:\n                       def one():\n                           return self(self.log().zero())\n      ....\n\n- Semidirect product of groups:\n  Put Mark's implementation in sage.groups.semidirect_product.SemiDirectProduct\n\n  Have Groups.ParentMethods.semidirect_product call it (currently it\n  says NotImplemented)\n\n  Bonus: if PermutationGroup.semidirect_product is called with the\n  second group not being a permutation group, call the generic\n  implementation. Same for finitely presented groups.\n\n\n* Generic features to be extracted from #17989 (Daha)\n\n- Improvements to tensor products\n\n- Tensor product of morphisms (see ticket by Nicolas Borie?)\n\n- Tensor products without flattening? For tensor product of algebras\n\n  What happens in Sage if you one does a tensor product of algebras\n  that are themselves tensor products? *boom*\n\n  To be further discussed; probably tensor_product should take a flag flatten=True\n\n- Smash product",
    "created_at": "2015-03-18T21:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237794",
    "user": "@nthiery"
}
```

Some notes from the discussion at SD64:

* Generic features to be extracted from #15375

- Exp functor:

  Currently in sage/groups/exp.py ; could be sage/monoids/exp.py

      class Exp(...)
         def log(self):
             return self._log

      sage: Exp(my_additive_group)
      sage: Exp(additive_group_morphism)

      sage: my_additive_group.exp()  # return the associated multiplicative group

  Possibly make it a functorial construction (can be postponed to later):

      Create sage.categories.additive_group_exp along the lines of
      sage.categories.cartesian_product

      class AdditiveMagmas:
          class Exp:
              class ParentMethods:
                   `@`abstract_method
                   def log(self):
                       ...
              class ElementMethods:
                   def _mul_(self, other):
                       return self.parent()(self.value+other.value)

          class Unital:
              class Exp:
                  class ParentMethods:
                       def one():
                           return self(self.log().zero())
      ....

- Semidirect product of groups:
  Put Mark's implementation in sage.groups.semidirect_product.SemiDirectProduct

  Have Groups.ParentMethods.semidirect_product call it (currently it
  says NotImplemented)

  Bonus: if PermutationGroup.semidirect_product is called with the
  second group not being a permutation group, call the generic
  implementation. Same for finitely presented groups.


* Generic features to be extracted from #17989 (Daha)

- Improvements to tensor products

- Tensor product of morphisms (see ticket by Nicolas Borie?)

- Tensor products without flattening? For tensor product of algebras

  What happens in Sage if you one does a tensor product of algebras
  that are themselves tensor products? *boom*

  To be further discussed; probably tensor_product should take a flag flatten=True

- Smash product



---

archive/issue_comments_237795.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-06-15T17:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237795",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_237796.json:
```json
{
    "body": "This is still messed up, specifically deciding the right category for tensor products.\nHowever most doctests pass.",
    "created_at": "2015-06-15T17:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237796",
    "user": "mshimo"
}
```

This is still messed up, specifically deciding the right category for tensor products.
However most doctests pass.



---

archive/issue_comments_237797.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T00:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237797",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237798.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T12:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237798",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237799.json:
```json
{
    "body": "Mainly to cc myself (and a completely shameless plug for the related #18631).\n\nAlso #15375 is a dependency, but are there currently others (in particular, #15874)?",
    "created_at": "2015-06-17T15:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237799",
    "user": "@tscrim"
}
```

Mainly to cc myself (and a completely shameless plug for the related #18631).

Also #15375 is a dependency, but are there currently others (in particular, #15874)?



---

archive/issue_comments_237800.json:
```json
{
    "body": "Travis,\n\nI had a patch bomb for the DAHA.\nAt some point I forgot to factor out the smash product.",
    "created_at": "2015-06-18T06:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237800",
    "user": "mshimo"
}
```

Travis,

I had a patch bomb for the DAHA.
At some point I forgot to factor out the smash product.



---

archive/issue_comments_237801.json:
```json
{
    "body": "I suppose I could try to look at the diff and factor out the smash product.",
    "created_at": "2015-06-18T06:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237801",
    "user": "mshimo"
}
```

I suppose I could try to look at the diff and factor out the smash product.



---

archive/issue_comments_237802.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T16:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237802",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237803.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T18:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237803",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237804.json:
```json
{
    "body": "Isn't all of the code for the smash product on #15874? If so, then we'd only have to merge that in and mark that as a dependency. Or is that not necessary for your DAHA code? If that's the case, then we definitely should factor that out.",
    "created_at": "2015-06-18T18:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237804",
    "user": "@tscrim"
}
```

Isn't all of the code for the smash product on #15874? If so, then we'd only have to merge that in and mark that as a dependency. Or is that not necessary for your DAHA code? If that's the case, then we definitely should factor that out.



---

archive/issue_comments_237805.json:
```json
{
    "body": "I will try. I didn't support that branch and just fixed a DAHA branch. So I will have to do some serious checking of versions.",
    "created_at": "2015-06-18T19:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237805",
    "user": "mshimo"
}
```

I will try. I didn't support that branch and just fixed a DAHA branch. So I will have to do some serious checking of versions.



---

archive/issue_comments_237806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T19:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237806",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-06-18T21:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237807",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_237808.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-26T19:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237808",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237809.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-11T15:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237809",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237810.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-11T15:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237810",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_237811.json:
```json
{
    "body": "Here is a version rebased on 8.2.beta5. It still has some bitrot on it, so things don't really work, but it is a step in the right direction. Although in hindsight, it probably would have been better to take #15874 and rebase that (and its dependency #15832) and work that in, but I forgotten that #15874 was suppose to be a dependency. I have now marked it as such.",
    "created_at": "2018-02-10T22:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237811",
    "user": "@tscrim"
}
```

Here is a version rebased on 8.2.beta5. It still has some bitrot on it, so things don't really work, but it is a step in the right direction. Although in hindsight, it probably would have been better to take #15874 and rebase that (and its dependency #15832) and work that in, but I forgotten that #15874 was suppose to be a dependency. I have now marked it as such.



---

archive/issue_comments_237812.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-02-10T22:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17752#issuecomment-237812",
    "user": "@tscrim"
}
```

New commits:
