# Issue 26146: Include missing patch for openblas from #24669

archive/issues_026146.json:
```json
{
    "body": "CC:  @vbraun\n\nMy branch for #24669 originally included this patch (the patch is even mentioned in the ticket description).  But when I rebased the branch on 8.4.beta0 it looks like I somehow dropped the commit that included the patch.\n\nI have good reason to believe this is what caused the Cygwin buildbot to hang, but I am in the process of rebuilding with the patch now in order to test.\n\nI just discovered this issue or obviously I would have reported sooner.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26383\n\n",
    "created_at": "2018-10-02T09:56:51Z",
    "labels": [
        "component: porting: cygwin",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Include missing patch for openblas from #24669",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26146",
    "user": "https://github.com/embray"
}
```
CC:  @vbraun

My branch for #24669 originally included this patch (the patch is even mentioned in the ticket description).  But when I rebased the branch on 8.4.beta0 it looks like I somehow dropped the commit that included the patch.

I have good reason to believe this is what caused the Cygwin buildbot to hang, but I am in the process of rebuilding with the patch now in order to test.

I just discovered this issue or obviously I would have reported sooner.

Issue created by migration from https://trac.sagemath.org/ticket/26383





---

archive/issue_comments_368158.json:
```json
{
    "body": "Not sure if I should bump the patch level or not.  The main body of the patch itself only impacts Cygwin (everything it changes is protected by an `#ifdef`), but it also updates one test that will run on other platforms.\n\nI just manually rebuilt openblas with `SAGE_CHECK=yes` and this patch on my Ubuntu machine and it passed, but maybe it should run on the other buildbots as well...?\n\nThe additional test is a less important part of the patch, and can be removed if it is a problem.",
    "created_at": "2018-10-02T10:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368158",
    "user": "https://github.com/embray"
}
```

Not sure if I should bump the patch level or not.  The main body of the patch itself only impacts Cygwin (everything it changes is protected by an `#ifdef`), but it also updates one test that will run on other platforms.

I just manually rebuilt openblas with `SAGE_CHECK=yes` and this patch on my Ubuntu machine and it passed, but maybe it should run on the other buildbots as well...?

The additional test is a less important part of the patch, and can be removed if it is a problem.



---

archive/issue_comments_368159.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-02T12:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_368160.json:
```json
{
    "body": "Went ahead and bumped the package version.\n\nI confirmed that this fixed cases of code which uses openblas hanging on Cygwin (which is a relief, since after the last time I fixed this I had a hard time imagining what else could be broken unless there was some deep bug in Cygwin).",
    "created_at": "2018-10-02T13:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368160",
    "user": "https://github.com/embray"
}
```

Went ahead and bumped the package version.

I confirmed that this fixed cases of code which uses openblas hanging on Cygwin (which is a relief, since after the last time I fixed this I had a hard time imagining what else could be broken unless there was some deep bug in Cygwin).



---

archive/issue_comments_368161.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-02T13:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368161",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368162.json:
```json
{
    "body": "Can you please add documentation to the patch? What is the upstreaming status?",
    "created_at": "2018-10-02T15:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368162",
    "user": "https://github.com/timokau"
}
```

Can you please add documentation to the patch? What is the upstreaming status?



---

archive/issue_comments_368163.json:
```json
{
    "body": "Replying to [comment:4 gh-timokau]:\n> Can you please add documentation to the patch? What is the upstreaming status?\n\nAs I wrote on the original ticket, this fix is already accepted upstream and is in a later release.  Next time we update the openblas package for Sage we can probably drop it.",
    "created_at": "2018-10-03T10:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368163",
    "user": "https://github.com/embray"
}
```

Replying to [comment:4 gh-timokau]:
> Can you please add documentation to the patch? What is the upstreaming status?

As I wrote on the original ticket, this fix is already accepted upstream and is in a later release.  Next time we update the openblas package for Sage we can probably drop it.



---

archive/issue_comments_368164.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-03T10:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368164",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_368165.json:
```json
{
    "body": "Fine. I added a comment to the patch file.  Note, you can also always look at the git log for the file to see where it came from.  But I agree it's often more convenient to have it right in the file.",
    "created_at": "2018-10-03T10:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368165",
    "user": "https://github.com/embray"
}
```

Fine. I added a comment to the patch file.  Note, you can also always look at the git log for the file to see where it came from.  But I agree it's often more convenient to have it right in the file.



---

archive/issue_comments_368166.json:
```json
{
    "body": "Thank you! Yes its usually possible to find the origin of a patch with git-log, but its far from pleasant. We should document at least all new patches. Its a bit less urgent when its already accepted upstream, but its still nice to be able to see that immediately.\n\nLGTM now, positive review pending on local tests.",
    "created_at": "2018-10-03T16:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368166",
    "user": "https://github.com/timokau"
}
```

Thank you! Yes its usually possible to find the origin of a patch with git-log, but its far from pleasant. We should document at least all new patches. Its a bit less urgent when its already accepted upstream, but its still nice to be able to see that immediately.

LGTM now, positive review pending on local tests.



---

archive/issue_comments_368167.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-03T17:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368167",
    "user": "https://github.com/timokau"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_024293.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-10-04T21:54:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26146#event-24293"
}
```



---

archive/issue_comments_368168.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-04T21:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26146#issuecomment-368168",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
