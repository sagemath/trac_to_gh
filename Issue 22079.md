# Issue 22079: Implementing the Tadpole graph and the Dipole graph

Issue created by migration from Trac.

Original creator: pelegm

Original creation time: 2017-02-06 15:34:16

Keywords: barbell,dipole,lollipop,tadpole

See conversation here:

https://groups.google.com/forum/#!topic/sage-devel/SkWSPKoyNxw

While doing so, I also move the `LollipopGraph` into the `families` module.


---

Comment by git created at 2017-02-06 15:56:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2017-02-06 21:41:44

Set assignee to pelegm.


---

Comment by pelegm created at 2017-02-06 21:41:44

Changing component from PLEASE CHANGE to graph theory.


---

Comment by git created at 2017-03-10 09:09:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-03-10 09:57:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2017-03-10 09:58:28

Changing status from new to needs_review.


---

Comment by dcoudert created at 2017-03-10 15:14:07

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2017-03-10 15:14:07

In method `TadpoleGraph`:
- You don't need networkx here. You can use:

```
G = Graph(pos=pos_dict, name="Tadpole graph")
G.add_cycle(list(range(n1)))
G.add_path(list(range(G.order(),G.order()+n2)))
return G
```

- The tests proposed are certainly too complicated. Also, you should test that with parameters (0,5) you have a path with 5 nodes, with (5,0) you get a cycle of order 5, etc.


In method `DipoleGraph`:
- no need to import networkx. You don't use it.
- what if `n==0`?
- The method could be simply (except may be for the case `n==0`): `return G = Graph([[0,1], [(0,1)]*n], name="Dipole graph", multiedges=True)`


---

Comment by pelegm created at 2017-03-11 12:22:40

Thanks for your review.

* I was using `networkx` since I've seen that in previous implementations of other graph families this is a common behaviour. But sure, I've modified that.
* What tests exactly are too complicated? I have removed the test of begin connected.
* I have added tests for extreme cases.
* Removed non-used call for `networkx` in `DipoleGraph`
* Removed the test for chromatic number
* The dipole graph is defined well for `n=0`. I have added relevant tests.
* I have adopted your shorter implementation for the dipole graph.

I have also rebased to develop. I am currently running tests, and after that I will push.


---

Comment by git created at 2017-03-11 12:36:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by pelegm created at 2017-03-11 12:36:57

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2017-03-11 14:07:42

The use of networkx is historical. There is now no need to create a networkx graph and then convert it to a sage graph when we can avoid it. Actually, we should rewrite the lollipop method, among others, without networkx.


In method tadpole, the example that creates several tadpole graphs in a Sage graphics array is long to test and does not provide useful information. Actually, I have the same remark for lollipop graphs. I don't understand the need for long tests here.


In methods dipolegraph and tadpole, please use the following format.

```
EXAMPLES: 

Construct and show a dipole graph with 13 edges::

    sage: g = graphs.DipoleGraph(13)
    sage: g.show() # long time
```


you can also update method lollipop.


---

Comment by dcoudert created at 2017-03-11 14:07:51

Changing status from needs_review to needs_work.


---

Comment by pelegm created at 2017-03-11 16:05:47

OK, so I will:
* remove the sage graphics array examples (I agree that it is not very useful)
* rewrite the lollipop graph so it will not use `networkx`
* use the proposed format for the dipole and tadpole graphs

Will hopefully happen tomorrow.


---

Comment by pelegm created at 2017-03-11 17:28:59

Apparently, the current implementations are not safe with respect to wrong (negative, noninteger) parameters.  I guess I should raise `ValueError` with some error message, such as `the number of vertices in the cycle/path must be a nonnegative integer`.


---

Comment by dcoudert created at 2017-03-11 18:16:49

right, at least ask for nonnegative values.


---

Comment by git created at 2017-03-12 10:00:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-03-12 10:23:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-03-12 10:31:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2017-03-12 10:31:20

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2017-03-12 14:06:28

add tests on the validity of the parameters for lollipop graphs

Don't use 

```
EXAMPLES: Construct and show a tadpole graph Cycle = 13, Stick = 4::
```

but

```
EXAMPLES: 

Construct and show a tadpole graph Cycle = 13, Stick = 4::
```


We are clearly missing a `add_clique` method. I have open ticket #22586 for this issue.


---

Comment by dcoudert created at 2017-03-12 14:06:28

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-03-12 14:18:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2017-03-12 14:18:27

Done.


---

Comment by pelegm created at 2017-03-12 14:18:27

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2017-03-12 15:03:46

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2017-03-12 15:03:46

For me this patch is good to go (passes all tests, docbuild properly).


---

Comment by vbraun created at 2017-04-01 11:05:35

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-04-01 11:05:35

Merge conflict...


---

Comment by pelegm created at 2017-04-01 14:29:56

Thanks for checking, I'll handle this.


---

Comment by git created at 2017-04-02 10:11:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by pelegm created at 2017-04-02 10:14:28

This is now rebased to 8.0.beta0. Wasn't sure if I should switch it to **needs review** or to **positive review**... I chose needs review as I am not even sure whether I should recompile 8beta and do all tests again.


---

Comment by pelegm created at 2017-04-02 10:14:28

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2017-04-02 10:27:03

Better to test again, and I'm using 8beta0.
The patch passes all tests on `src/sage/graphs/` and the doc builds properly.


---

Comment by dcoudert created at 2017-04-02 10:27:03

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-04-02 18:43:50

This is going to conflict with #22734, I think


---

Comment by dcoudert created at 2017-04-03 06:50:26

So, what do you suggest?


---

Comment by tscrim created at 2017-04-03 06:52:53

I would merge in #22734 and mark it as a depenedency.


---

Comment by dcoudert created at 2017-04-03 08:34:39

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2017-04-03 08:34:39

I set back to needs work.
Peleg, you know how to proceed to rebase on top of #22734 and fix potential issues ?


---

Comment by pelegm created at 2017-04-06 09:44:40

Sure, I'll do that.


---

Comment by git created at 2017-04-06 09:57:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pelegm created at 2017-04-06 09:58:37

Actually, I am not that good with rebases; but I have merged 8ac16ab into u/pelegm/tadpole. Do you think that will suffice? I will later recompile and do some tests.
----
New commits:


---

Comment by dcoudert created at 2017-04-06 10:47:40

I don't know if it's the right way to do it. Frédéric, can you help here ?


---

Comment by tscrim created at 2017-04-06 16:18:50

Changing status from needs_work to positive_review.


---

Comment by tscrim created at 2017-04-06 16:18:50

This should be okay. (For future reference, I always recommend merging the branch.)


---

Comment by vbraun created at 2017-04-08 17:12:46

Resolution: fixed
