# Issue 12044: Coercion to CC via _complex_mpfr_field_ can lead to infinite loop

archive/issues_012044.json:
```json
{
    "body": "Assignee: @robertwb\n\nKeywords: CC, LazyWrapper\n\nI encountered this when working on #9439. Creating an element with parent and providing the method _complex_mpfr_field_ for conversion into CC can lead to an infinite loop, if said method returns a non-trivial element of CC.\n\nI couldn't find a minimal example, but as I said it occured when I worked on #9439, where points in HH should be convertible into CC.\n\nThe reason seems to be that the coercion framework tries to use CLF first. The application of the corresponding LazyWrapperMorphism leads to an element of CLF, that then cannot be evaluated correctly, because .eval of this elements calls CC._element_constructor_, which in turn calls .eval of that element (via _complex_mpfr_field_ of this element).\n\nIssue created by migration from https://trac.sagemath.org/ticket/12216\n\n",
    "created_at": "2011-12-21T20:56:50Z",
    "labels": [
        "component: coercion",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Coercion to CC via _complex_mpfr_field_ can lead to infinite loop",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12044",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```
Assignee: @robertwb

Keywords: CC, LazyWrapper

I encountered this when working on #9439. Creating an element with parent and providing the method _complex_mpfr_field_ for conversion into CC can lead to an infinite loop, if said method returns a non-trivial element of CC.

I couldn't find a minimal example, but as I said it occured when I worked on #9439, where points in HH should be convertible into CC.

The reason seems to be that the coercion framework tries to use CLF first. The application of the corresponding LazyWrapperMorphism leads to an element of CLF, that then cannot be evaluated correctly, because .eval of this elements calls CC._element_constructor_, which in turn calls .eval of that element (via _complex_mpfr_field_ of this element).

Issue created by migration from https://trac.sagemath.org/ticket/12216





---

archive/issue_events_032550.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32550"
}
```



---

archive/issue_events_032551.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32551"
}
```



---

archive/issue_events_032552.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32552"
}
```



---

archive/issue_events_032553.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32553"
}
```



---

archive/issue_events_032554.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32554"
}
```



---

archive/issue_events_032555.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32555"
}
```



---

archive/issue_events_032556.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12044",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12044#event-32556"
}
```
