# Issue 25939: SageKernelSpec doctests fail in non-standard setups

Issue created by migration from https://trac.sagemath.org/ticket/26176

Original creator: saraedum

Original creation time: 2018-09-02 14:58:19

CC:  @timokau jdemeyer

In Debian's setup most `SageKernelSpec` doctests fail because Sage isn't installed in the final location when the doctest run and therefore `_mkdirs()` fails as it can't write to `/usr/share`.

In any case, `setup.py` installs into `install_data` but the doctests don't run there. We could probably just have the tests run there as well but also much of the tests that perform writes don't work there and are therefore disabled. I can see why the tests are the way they are but I don't think it's worth it. I think it's easier for packagers and good enough for [SageMath](SageMath) to just run all the tests in temporary places.


---

Comment by saraedum created at 2018-09-02 15:00:00

Changing status from new to needs_review.


---

Comment by saraedum created at 2018-09-02 15:00:00

New commits:


---

Comment by @timokau created at 2018-09-02 15:26:27

I'm confused, isn't that the same fix as in #25722?


---

Comment by saraedum created at 2018-09-02 17:20:08

Yes, sort of. But #25722 only does that for the symlinks. Here I do the same for all the `_mkdirs()` calls.


---

Comment by jdemeyer created at 2018-09-03 08:18:25

Changing status from needs_review to positive_review.


---

Comment by saraedum created at 2018-09-03 11:26:50

Changing status from positive_review to needs_work.


---

Comment by git created at 2018-09-03 12:01:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-09-03 12:02:48

Sorry, I had missed this confusing invocation.


---

Comment by saraedum created at 2018-09-03 12:02:48

Changing status from needs_work to needs_review.


---

Comment by fbissey created at 2018-10-25 01:48:50

I think this can be safely put back to positive review.


---

Comment by fbissey created at 2018-10-25 01:48:50

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-10-26 22:16:00

Resolution: fixed
