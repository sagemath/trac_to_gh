# Issue 22744: py3: get rid of cmp() in element.pyx

archive/issues_022744.json:
```json
{
    "body": "So that this file cythonize correctly with python3\n\nThis will be handled more seriously in #22297 later.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22981\n\n",
    "created_at": "2017-05-11T14:37:17Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: get rid of cmp() in element.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22744",
    "user": "https://github.com/fchapoton"
}
```
So that this file cythonize correctly with python3

This will be handled more seriously in #22297 later.

Issue created by migration from https://trac.sagemath.org/ticket/22981





---

archive/issue_comments_317199.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-05-11T14:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317199",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_317200.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-11T14:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317200",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317201.json:
```json
{
    "body": "You have changed what you are comparing. Before, it was the coerced objects `cmp(left, right)`, but now you are only comparing the types of the objects `if tl < tr:`. I believe this should be `if left < right`.",
    "created_at": "2017-05-11T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317201",
    "user": "https://github.com/tscrim"
}
```

You have changed what you are comparing. Before, it was the coerced objects `cmp(left, right)`, but now you are only comparing the types of the objects `if tl < tr:`. I believe this should be `if left < right`.



---

archive/issue_comments_317202.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T14:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317203.json:
```json
{
    "body": "right, sorry for that. Correction done",
    "created_at": "2017-05-11T14:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317203",
    "user": "https://github.com/fchapoton"
}
```

right, sorry for that. Correction done



---

archive/issue_comments_317204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T14:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317205.json:
```json
{
    "body": "and simplified a bit",
    "created_at": "2017-05-11T14:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317205",
    "user": "https://github.com/fchapoton"
}
```

and simplified a bit



---

archive/issue_comments_317206.json:
```json
{
    "body": "If the patchbot comes back green, then you can set a positive review.",
    "created_at": "2017-05-11T15:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317206",
    "user": "https://github.com/tscrim"
}
```

If the patchbot comes back green, then you can set a positive review.



---

archive/issue_comments_317207.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-11T16:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317207",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317208.json:
```json
{
    "body": "ok, bot is essentially green, setting to positive",
    "created_at": "2017-05-11T16:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317208",
    "user": "https://github.com/fchapoton"
}
```

ok, bot is essentially green, setting to positive



---

archive/issue_comments_317209.json:
```json
{
    "body": "Green bot does not mean that the ticket makes sense! This is not going to help us porting to Python 3, see #22297 for a long discussion.",
    "created_at": "2017-05-11T18:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317209",
    "user": "https://github.com/jdemeyer"
}
```

Green bot does not mean that the ticket makes sense! This is not going to help us porting to Python 3, see #22297 for a long discussion.



---

archive/issue_comments_317210.json:
```json
{
    "body": "See also #22029 (which contains the long discussion that I meant).",
    "created_at": "2017-05-11T18:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317210",
    "user": "https://github.com/jdemeyer"
}
```

See also #22029 (which contains the long discussion that I meant).



---

archive/issue_comments_317211.json:
```json
{
    "body": "Oh, come on, Jeroen, please. Could you please explain why you think that this does not make sense, instead of changing the milestone to invalid like that ? \n\nBy the way, this ticket is not meant as a replacement to #22297, but as a temporary fix. I am still planning to do the job at #22297. But I also would like to have all pyx files fixed. This can be achieved here at no cost and I do not understand why you object so strongly.",
    "created_at": "2017-05-11T18:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317211",
    "user": "https://github.com/fchapoton"
}
```

Oh, come on, Jeroen, please. Could you please explain why you think that this does not make sense, instead of changing the milestone to invalid like that ? 

By the way, this ticket is not meant as a replacement to #22297, but as a temporary fix. I am still planning to do the job at #22297. But I also would like to have all pyx files fixed. This can be achieved here at no cost and I do not understand why you object so strongly.



---

archive/issue_comments_317212.json:
```json
{
    "body": "Could you try with a `raise NotImplementedError` instead of the old code calling `cmp()`, similar that what we did for lazy imports in #21247.",
    "created_at": "2017-05-11T18:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317212",
    "user": "https://github.com/jdemeyer"
}
```

Could you try with a `raise NotImplementedError` instead of the old code calling `cmp()`, similar that what we did for lazy imports in #21247.



---

archive/issue_comments_317213.json:
```json
{
    "body": "like that ?\n----\nNew commits:",
    "created_at": "2017-05-11T18:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317213",
    "user": "https://github.com/fchapoton"
}
```

like that ?
----
New commits:



---

archive/issue_comments_317214.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-05-11T18:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317214",
    "user": "https://github.com/fchapoton"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_317215.json:
```json
{
    "body": "Thinking more about it, the original branch wasn't so bad. It just replaces one call to `cmp()` with almost equivalent Python code. So I retract my comment [comment:9].\n\nStill, if the `raise NotImplementError` works, that would be even better since it would be one less case to worry about in future tickets.",
    "created_at": "2017-05-11T21:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317215",
    "user": "https://github.com/jdemeyer"
}
```

Thinking more about it, the original branch wasn't so bad. It just replaces one call to `cmp()` with almost equivalent Python code. So I retract my comment [comment:9].

Still, if the `raise NotImplementError` works, that would be even better since it would be one less case to worry about in future tickets.



---

archive/issue_comments_317216.json:
```json
{
    "body": "bot is essentially green; please review",
    "created_at": "2017-05-12T06:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317216",
    "user": "https://github.com/fchapoton"
}
```

bot is essentially green; please review



---

archive/issue_comments_317217.json:
```json
{
    "body": "ping ?",
    "created_at": "2017-05-12T14:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317217",
    "user": "https://github.com/fchapoton"
}
```

ping ?



---

archive/issue_comments_317218.json:
```json
{
    "body": "**ping ?**",
    "created_at": "2017-05-12T19:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317218",
    "user": "https://github.com/fchapoton"
}
```

**ping ?**



---

archive/issue_comments_317219.json:
```json
{
    "body": "Jeroen, if you have any more objections, then feel free to revert the positive review.",
    "created_at": "2017-05-13T00:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317219",
    "user": "https://github.com/tscrim"
}
```

Jeroen, if you have any more objections, then feel free to revert the positive review.



---

archive/issue_comments_317220.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-13T00:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317220",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317221.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-14T08:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22744#issuecomment-317221",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_021377.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-05-14T08:19:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22744",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22744#event-21377"
}
```
