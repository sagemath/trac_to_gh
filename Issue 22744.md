# Issue 22744: py3: get rid of cmp() in element.pyx

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-05-11 14:37:17

So that this file cythonize correctly with python3

This will be handled more seriously in #22297 later.


---

Comment by chapoton created at 2017-05-11 14:37:39

New commits:


---

Comment by chapoton created at 2017-05-11 14:37:39

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-05-11 14:42:29

You have changed what you are comparing. Before, it was the coerced objects `cmp(left, right)`, but now you are only comparing the types of the objects `if tl < tr:`. I believe this should be `if left < right`.


---

Comment by git created at 2017-05-11 14:45:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-05-11 14:46:03

right, sorry for that. Correction done


---

Comment by git created at 2017-05-11 14:47:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-05-11 14:47:21

and simplified a bit


---

Comment by tscrim created at 2017-05-11 15:07:32

If the patchbot comes back green, then you can set a positive review.


---

Comment by chapoton created at 2017-05-11 16:56:47

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-05-11 16:56:47

ok, bot is essentially green, setting to positive


---

Comment by jdemeyer created at 2017-05-11 18:12:59

Green bot does not mean that the ticket makes sense! This is not going to help us porting to Python 3, see #22297 for a long discussion.


---

Comment by jdemeyer created at 2017-05-11 18:15:49

See also #22029 (which contains the long discussion that I meant).


---

Comment by chapoton created at 2017-05-11 18:18:04

Oh, come on, Jeroen, please. Could you please explain why you think that this does not make sense, instead of changing the milestone to invalid like that ? 

By the way, this ticket is not meant as a replacement to #22297, but as a temporary fix. I am still planning to do the job at #22297. But I also would like to have all pyx files fixed. This can be achieved here at no cost and I do not understand why you object so strongly.


---

Comment by jdemeyer created at 2017-05-11 18:21:43

Could you try with a `raise NotImplementedError` instead of the old code calling `cmp()`, similar that what we did for lazy imports in #21247.


---

Comment by chapoton created at 2017-05-11 18:28:59

like that ?
----
New commits:


---

Comment by chapoton created at 2017-05-11 18:33:44

Changing status from positive_review to needs_review.


---

Comment by jdemeyer created at 2017-05-11 21:16:21

Thinking more about it, the original branch wasn't so bad. It just replaces one call to `cmp()` with almost equivalent Python code. So I retract my comment [comment:9].

Still, if the `raise NotImplementError` works, that would be even better since it would be one less case to worry about in future tickets.


---

Comment by chapoton created at 2017-05-12 06:13:18

bot is essentially green; please review


---

Comment by chapoton created at 2017-05-12 14:31:10

ping ?


---

Comment by chapoton created at 2017-05-12 19:08:17

**ping ?**


---

Comment by tscrim created at 2017-05-13 00:15:35

Jeroen, if you have any more objections, then feel free to revert the positive review.


---

Comment by tscrim created at 2017-05-13 00:15:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-14 08:19:46

Resolution: fixed
