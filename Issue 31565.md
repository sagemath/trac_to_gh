# Issue 31565: Bug in plotting 3d polyhedron with rays

archive/issues_031565.json:
```json
{
    "body": "CC:  @mkoeppe @fchapoton @dcoudert @slel @jplab\n\nVisually, there is no different between the two plots:\n\n```\np = Polyhedron(rays=[(0, 0, 1)],lines=[(1, 0, 0), (0, 1, 0)])\np.plot()\nq = Polyhedron(lines=[(1, 0, 0), (0, 1, 0)])\nq.plot()\n```\n\nThe bug seems to be caused by `sage.geometry.polyhedron.Projection._init_solid_3d`, which discards the rays. There might also be a bug in `sage.geometry.polyhedron.Projection._init_lines_arrows`, but I'm not sure how to plot the arrows in this example.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31802\n\n",
    "created_at": "2021-05-09T14:59:54Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Bug in plotting 3d polyhedron with rays",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31565",
    "user": "https://github.com/yuan-zhou"
}
```
CC:  @mkoeppe @fchapoton @dcoudert @slel @jplab

Visually, there is no different between the two plots:

```
p = Polyhedron(rays=[(0, 0, 1)],lines=[(1, 0, 0), (0, 1, 0)])
p.plot()
q = Polyhedron(lines=[(1, 0, 0), (0, 1, 0)])
q.plot()
```

The bug seems to be caused by `sage.geometry.polyhedron.Projection._init_solid_3d`, which discards the rays. There might also be a bug in `sage.geometry.polyhedron.Projection._init_lines_arrows`, but I'm not sure how to plot the arrows in this example.

Issue created by migration from https://trac.sagemath.org/ticket/31802





---

archive/issue_comments_450531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-05-11T05:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_450532.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T07:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_450533.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T08:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_450534.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-11T08:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450534",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_450535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T23:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_450536.json:
```json
{
    "body": "`@`mkoeppe, `@`yzh: Can you please add you polyhedral tickets to https://trac.sagemath.org/wiki/SagePolyhedralGeometry.\n\nThat makes it easier to see what is going on and we also use this for the release notes.",
    "created_at": "2021-05-12T07:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450536",
    "user": "https://github.com/kliem"
}
```

`@`mkoeppe, `@`yzh: Can you please add you polyhedral tickets to https://trac.sagemath.org/wiki/SagePolyhedralGeometry.

That makes it easier to see what is going on and we also use this for the release notes.



---

archive/issue_comments_450537.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450537",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_450538.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450538",
    "user": "https://github.com/mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_450539.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-01-23T19:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450539",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_450540.json:
```json
{
    "body": "red branch => needs_work",
    "created_at": "2022-01-23T19:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450540",
    "user": "https://github.com/fchapoton"
}
```

red branch => needs_work



---

archive/issue_comments_450541.json:
```json
{
    "body": "Rebased on current beta\n----\nNew commits:",
    "created_at": "2022-04-02T18:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450541",
    "user": "https://github.com/mkoeppe"
}
```

Rebased on current beta
----
New commits:



---

archive/issue_comments_450542.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-02T18:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450542",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_450543.json:
```json
{
    "body": "The new rainbow option should be documented.\n\nThe changes to `point_opts`, `line_opts` need to be motivated",
    "created_at": "2022-04-02T18:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450543",
    "user": "https://github.com/mkoeppe"
}
```

The new rainbow option should be documented.

The changes to `point_opts`, `line_opts` need to be motivated



---

archive/issue_comments_450544.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-04-02T18:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450544",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_450545.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-04T10:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450545",
    "user": "https://github.com/yuan-zhou"
}
```

New commits:



---

archive/issue_comments_450546.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-04T10:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450546",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_450547.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-04-04T17:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450547",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_450548.json:
```json
{
    "body": "patchbot indicates doctest failure",
    "created_at": "2022-04-04T17:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450548",
    "user": "https://github.com/mkoeppe"
}
```

patchbot indicates doctest failure



---

archive/issue_comments_450549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-04T18:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_450550.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-05T18:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_450551.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-05T18:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450551",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_450552.json:
```json
{
    "body": "This seems to work well.\n----\nNew commits:",
    "created_at": "2022-04-05T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450552",
    "user": "https://github.com/mkoeppe"
}
```

This seems to work well.
----
New commits:



---

archive/issue_comments_450553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-05T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450553",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_450554.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-10T13:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31565#issuecomment-450554",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_028791.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-10T13:12:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31565",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31565#event-28791"
}
```
