# Issue 23787: Update other packages to using the sage-dist-helpers functions where applicable

archive/issues_023787.json:
```json
{
    "body": "This is a meta-ticket for tickets that address updating other packages to use the helper functions in `sage-dist-helpers` where possible.  There are\na few advantages to doing this:\n\n* In general it simplifies these scripts and reduces a lot of boilerplate.  As more functions get written even more boilerplate can be removed, but even the existing functions help a lot.\n* Although this requires irritating bulk updates to packages now, it reduces the overall need for such bulk updates in the future, since many packages that have similar build and installation steps can be be updated at once by updates to the applicable helper functions.\n\nThe second bullet point is especially motivated right now by #22509.  Since it requires updates to nearly every package in Sage anyways, it makes more sense to update most packages to use the helper functions, and then add `DESTDIR` support through the helper functions.  In particular, the vast majority of Python and autotools packages can be given `DESTDIR` support en masse by this approach.\n\n* #24014 -- Update Python packages that are installed with `pip` to use `sdh_pip_install`\n* #????? -- Update \"trival\" autotools packages to use `sdh_configure`, `sdh_make`, and `sdh_install`.  By \"trivial\" I mean packages with very simple build scripts that can be mechanically updated with simple replacements.\n* #????? -- Update \"trickier\" autotools packages that take a little extra care for some reason.  I'm not even sure if there are any like this yet.\n* #????? -- Handle miscellaneous non-autotools packages.  There are some like this that may still be applicable (e.g. they don't use `configure` but they still use `make` in such a way that can be replaced with `sdh_make`).  It might also be possible to narrow down one or two other classes of packages that can be simplified with new helper functions.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24024\n\n",
    "created_at": "2017-10-12T15:00:05Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Update other packages to using the sage-dist-helpers functions where applicable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23787",
    "user": "@embray"
}
```
This is a meta-ticket for tickets that address updating other packages to use the helper functions in `sage-dist-helpers` where possible.  There are
a few advantages to doing this:

* In general it simplifies these scripts and reduces a lot of boilerplate.  As more functions get written even more boilerplate can be removed, but even the existing functions help a lot.
* Although this requires irritating bulk updates to packages now, it reduces the overall need for such bulk updates in the future, since many packages that have similar build and installation steps can be be updated at once by updates to the applicable helper functions.

The second bullet point is especially motivated right now by #22509.  Since it requires updates to nearly every package in Sage anyways, it makes more sense to update most packages to use the helper functions, and then add `DESTDIR` support through the helper functions.  In particular, the vast majority of Python and autotools packages can be given `DESTDIR` support en masse by this approach.

* #24014 -- Update Python packages that are installed with `pip` to use `sdh_pip_install`
* #????? -- Update "trival" autotools packages to use `sdh_configure`, `sdh_make`, and `sdh_install`.  By "trivial" I mean packages with very simple build scripts that can be mechanically updated with simple replacements.
* #????? -- Update "trickier" autotools packages that take a little extra care for some reason.  I'm not even sure if there are any like this yet.
* #????? -- Handle miscellaneous non-autotools packages.  There are some like this that may still be applicable (e.g. they don't use `configure` but they still use `make` in such a way that can be replaced with `sdh_make`).  It might also be possible to narrow down one or two other classes of packages that can be simplified with new helper functions.

Issue created by migration from https://trac.sagemath.org/ticket/24024





---

archive/issue_comments_333233.json:
```json
{
    "body": "Set assignee to @embray.",
    "created_at": "2017-10-12T15:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333233",
    "user": "@embray"
}
```

Set assignee to @embray.



---

archive/issue_comments_333234.json:
```json
{
    "body": "Note that for #22509 there will have be a second round of updates to DESTDIR support for some packages that manually copy files to locations in `$SAGE_LOCAL`.  However, making these updates first still significantly reduces that number of packages that will require additional treatment.",
    "created_at": "2017-10-12T15:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333234",
    "user": "@embray"
}
```

Note that for #22509 there will have be a second round of updates to DESTDIR support for some packages that manually copy files to locations in `$SAGE_LOCAL`.  However, making these updates first still significantly reduces that number of packages that will require additional treatment.



---

archive/issue_comments_333235.json:
```json
{
    "body": "Added classifications to several of the packages that still need to be converted over to sdh-helpers/SAGE_DESTDIR support.  Still not an exhaustive list.",
    "created_at": "2018-02-02T14:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333235",
    "user": "@embray"
}
```

Added classifications to several of the packages that still need to be converted over to sdh-helpers/SAGE_DESTDIR support.  Still not an exhaustive list.



---

archive/issue_comments_333236.json:
```json
{
    "body": "cysignals should be easy... it is only unusual because it uses autoconf in a Python package but `sdh_configure` should just work anyway.",
    "created_at": "2018-03-19T11:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333236",
    "user": "@jdemeyer"
}
```

cysignals should be easy... it is only unusual because it uses autoconf in a Python package but `sdh_configure` should just work anyway.



---

archive/issue_comments_333237.json:
```json
{
    "body": "Replying to [comment:8 jdemeyer]:\n> cysignals should be easy... it is only unusual because it uses autoconf in a Python package but `sdh_configure` should just work anyway.\n\nIndeed.  Most of them *are* easy and are already done in my old branch for this.  The only reason many of these packages were separated out from #24025 is that they required one or two more other changes.",
    "created_at": "2018-03-19T12:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333237",
    "user": "@embray"
}
```

Replying to [comment:8 jdemeyer]:
> cysignals should be easy... it is only unusual because it uses autoconf in a Python package but `sdh_configure` should just work anyway.

Indeed.  Most of them *are* easy and are already done in my old branch for this.  The only reason many of these packages were separated out from #24025 is that they required one or two more other changes.



---

archive/issue_comments_333238.json:
```json
{
    "body": "At this point, now that DESTDIR support *is* available, there's no reason not to handle adding DESTDIR support, at least at a basic level, at the same time as implementing use of sage-dist-helpers.",
    "created_at": "2018-03-26T11:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333238",
    "user": "@embray"
}
```

At this point, now that DESTDIR support *is* available, there's no reason not to handle adding DESTDIR support, at least at a basic level, at the same time as implementing use of sage-dist-helpers.



---

archive/issue_comments_333239.json:
```json
{
    "body": "`zn_poly` is *not* autotools.",
    "created_at": "2018-04-03T09:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333239",
    "user": "@embray"
}
```

`zn_poly` is *not* autotools.



---

archive/issue_comments_333240.json:
```json
{
    "body": "Working on DESTDIR install for gap_packages as part of #26856.",
    "created_at": "2018-12-20T14:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333240",
    "user": "@embray"
}
```

Working on DESTDIR install for gap_packages as part of #26856.



---

archive/issue_comments_333241.json:
```json
{
    "body": "Retargeting some of my tickets.",
    "created_at": "2018-12-28T14:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333241",
    "user": "@embray"
}
```

Retargeting some of my tickets.



---

archive/issue_comments_333242.json:
```json
{
    "body": "gdb already done in #24692",
    "created_at": "2019-01-10T12:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333242",
    "user": "@embray"
}
```

gdb already done in #24692



---

archive/issue_comments_333243.json:
```json
{
    "body": "tides was done in #26021",
    "created_at": "2019-01-10T13:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333243",
    "user": "@embray"
}
```

tides was done in #26021



---

archive/issue_comments_333244.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-10T13:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333244",
    "user": "@embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_333245.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-10T13:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333245",
    "user": "@embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_333246.json:
```json
{
    "body": "This should really be in needs work status.",
    "created_at": "2019-01-10T13:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333246",
    "user": "@embray"
}
```

This should really be in needs work status.



---

archive/issue_comments_333247.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333247",
    "user": "@embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_333248.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333248",
    "user": "@embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_333249.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333249",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_333250.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23787#issuecomment-333250",
    "user": "@mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.
