# Issue 31312: add support for dynamical systems over function field in function  all_rational_preimages

Issue created by migration from https://trac.sagemath.org/ticket/31549

Original creator: @Saher-Amasha

Original creation time: 2021-03-24 17:27:43

CC:  bhutz

we modified the if so that it doesn't throw an error when working with 
 dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field


---

Comment by mkoeppe created at 2021-03-27 02:13:38

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by @Saher-Amasha created at 2021-03-27 14:21:05

Changing status from new to needs_review.


---

Comment by @Saher-Amasha created at 2021-03-27 14:21:05

New commits:


---

Comment by bhutz created at 2021-04-16 15:09:11

I can take a look at this change, but it probably won't be until next week.

just a quick comment. The commit message should be short (one line) with the more detailed description in a following paragraph.


---

Comment by bhutz created at 2021-04-21 14:44:52

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2021-04-21 14:44:52

On the surface this functionality works, but the details need a little work.

In the code itself there are a number of white space issues. For example


```
[(1/t)*x^2 + y^2  ,y^2])
```

should be

```
[(1/t)*x^2 + y^2, y^2])
```


In the new if line as well, you're missing a space after the comma and have an extra space before the closing ).

The example code should be improved in a number of ways:

- I'd suggest saving a line and removing K and just defining the function field over the finite field directly.
- The variables base and CF are not used so should not be in the example.
- D is not needed: P is already the domain of DS.
- Instead of calling normalize, just define the dynamical system as you want it to be defined as.

While adding support for function fields, seems like you should also allow finite fields, since that also requires no other changes.


---

Comment by git created at 2021-05-28 18:56:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @Saher-Amasha created at 2021-05-30 18:01:35

Changing status from needs_work to needs_review.


---

Comment by bhutz created at 2021-06-08 18:47:16

There is a doctest failure. Looks like you might need to use "sorted" for that doctest.

Also, why did you not also allow finite fields as requested?

The whitespace issues were fixed in the example, but the example no longer is a true function field example as the function and all the points are over the base field. The example should use the function field variable 't'.


---

Comment by bhutz created at 2021-06-08 18:47:16

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.


---

Comment by @EnderWannabe created at 2021-08-10 21:57:02

Changing component from algebra to dynamics.
