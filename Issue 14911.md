# Issue 14911: Make count_points() faster

Issue created by migration from Trac.

Original creator: goncalves

Original creation time: 2013-09-03 13:42:47

CC:  defeo

I use Harvey's algorithm


---

Comment by jantuitman created at 2013-09-23 10:00:59

When you only want the number of rational points (and not the complete zeta function) you can use a (g times) lower precision. In this case you shouldn't use .frobenius_polynomial but ._frobenius_matrix and compute the trace of this matrix.

It is not necessary to exclude the case n>2g, but in this case (and already for n>=g) it is probably better to use .frobenius_polynomial and compute the number of points by expanding a power series (as we discussed in Rennes).

So: 

1) for n<g use ._frobenius_matrix to compute matrix F and compute the traces of F, ... ,F^n.

2) for n>=g use .frobenius_polynomial and compute the coefficients of the log of the zeta function.

Would you like to change this, or can I give it a try? (I'm at SAGE days this week, trying to do something useful)


---

Comment by jpflori created at 2013-09-25 13:45:16

Changing keywords from "" to "sd53 hyperelliptic curve".


---

Comment by jpflori created at 2013-09-26 15:54:19

Changing status from new to needs_review.


---

Comment by git created at 2013-09-26 16:06:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2013-09-26 16:32:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2013-09-26 17:42:03

See #11980 for a follow-up.


---

Comment by jen created at 2013-09-29 16:08:30

This looks good to me.


---

Comment by jen created at 2013-09-29 16:08:30

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-21 23:54:48

This ticket leads to some test failures (did you check long doctests?). Please fix...

http://build.sagemath.org/sage/builders/%20%20fast%20Volker%20Desktop%20%28Fedora%2019%20x86_64%29%20incremental/builds/22/steps/shell_3/logs/stdio


---

Comment by jpflori created at 2013-12-23 14:50:40

I thought so... I'll try to fix the failures tonight.


---

Comment by jpflori created at 2013-12-23 14:50:40

Changing status from positive_review to needs_work.


---

Comment by jpflori created at 2013-12-23 15:40:19

I think that the doctest failure are caused by #15108 which makes base extension of hyperellipticurves smarter and triggers use of the new code for hyperelliptic curves introduced here and which wasn't used for more general schemes...
The fix should be trivial.


---

Comment by jpflori created at 2013-12-23 16:43:30

And of course I cannot built the latest versions of Sage on my laptop because of glibc's bug in scanf.


---

Comment by git created at 2013-12-23 22:21:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2013-12-23 23:18:59

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-12-23 23:18:59

Tests and some doc (trivially) updated.
Passes all tests (on POWER7...).


---

Comment by jpflori created at 2014-01-30 13:56:28

For a potential reviewer, the ticket used to be positively reviewed, and the latest changes are really trivial, taking the inclusion of another ticket into account.


---

Comment by git created at 2014-03-06 17:30:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-04-08 23:44:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-09 09:39:23

Resolution: fixed
