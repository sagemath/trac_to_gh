# Issue 19053: MatroidUnion _rank accept any iterator, partition accept empty partition

archive/issues_019053.json:
```json
{
    "body": "CC:  stefan yomcat rudi\n\nCurrently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.\n\nThe PartitionMatroid can't handle empty partition. \n\nIssue created by migration from https://trac.sagemath.org/ticket/19290\n\n",
    "closed_at": "2017-07-13T07:54:31Z",
    "created_at": "2015-09-24T23:47:11Z",
    "labels": [
        "component: matroid theory",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "MatroidUnion _rank accept any iterator, partition accept empty partition",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19053",
    "user": "https://github.com/chaoxu"
}
```
CC:  stefan yomcat rudi

Currently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.

The PartitionMatroid can't handle empty partition. 

Issue created by migration from https://trac.sagemath.org/ticket/19290





---

archive/issue_comments_261026.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261026",
    "user": "https://github.com/chaoxu"
}
```

New commits:



---

archive/issue_comments_261027.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261027",
    "user": "https://github.com/chaoxu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261028.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to matroid theory.",
    "created_at": "2015-10-03T13:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261028",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing component from PLEASE CHANGE to matroid theory.



---

archive/issue_comments_261029.json:
```json
{
    "body": "Hi Chao,\n\nIt is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  \n\nSo unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.",
    "created_at": "2015-10-03T13:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261029",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

It is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  

So unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.



---

archive/issue_comments_261030.json:
```json
{
    "body": "See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.\n\nIn addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261030",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.

In addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.



---

archive/issue_comments_261031.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261031",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_053435.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:55:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19053#event-53435"
}
```



---

archive/issue_comments_261032.json:
```json
{
    "body": "The first issue is not a bug; the second issue is now #23213",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261032",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

The first issue is not a bug; the second issue is now #23213



---

archive/issue_comments_261033.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261033",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_053436.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-13T07:54:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19053#event-53436"
}
```



---

archive/issue_comments_261034.json:
```json
{
    "body": "Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261034",
    "user": "https://github.com/embray"
}
```

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).



---

archive/issue_comments_261035.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261035",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
