# Issue 19053: MatroidUnion _rank accept any iterator, partition accept empty partition

Issue created by migration from Trac.

Original creator: chaoxu

Original creation time: 2015-09-24 23:47:11

CC:  stefan yomcat rudi

Currently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.

The PartitionMatroid can't handle empty partition. 


---

Comment by chaoxu created at 2015-09-24 23:48:18

New commits:


---

Comment by chaoxu created at 2015-09-24 23:48:18

Changing status from new to needs_review.


---

Comment by Rudi created at 2015-10-03 13:16:30

Changing component from PLEASE CHANGE to matroid theory.


---

Comment by Rudi created at 2015-10-03 13:16:30

Hi Chao,

It is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  

So unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.


---

Comment by Stefan created at 2016-03-08 17:02:25

See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.

In addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.


---

Comment by Stefan created at 2016-03-08 17:02:25

Changing status from needs_review to needs_work.


---

Comment by Stefan created at 2017-06-11 01:55:39

The first issue is not a bug; the second issue is now #23213


---

Comment by Stefan created at 2017-06-11 01:55:39

Changing status from needs_work to positive_review.


---

Comment by embray created at 2017-07-13 07:54:31

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).


---

Comment by embray created at 2017-07-13 07:54:31

Resolution: wontfix
