# Issue 19053: MatroidUnion _rank accept any iterator, partition accept empty partition

archive/issues_019053.json:
```json
{
    "body": "CC:  stefan yomcat rudi\n\nCurrently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.\n\nThe PartitionMatroid can't handle empty partition. \n\nIssue created by migration from https://trac.sagemath.org/ticket/19290\n\n",
    "created_at": "2015-09-24T23:47:11Z",
    "labels": [
        "PLEASE CHANGE",
        "trivial",
        "bug"
    ],
    "title": "MatroidUnion _rank accept any iterator, partition accept empty partition",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19053",
    "user": "chaoxu"
}
```
CC:  stefan yomcat rudi

Currently, in MatroidUnion `_rank(X)` can only accept objects `X` that we can take the set difference with another frozenset. There are objects having `frozenset` interface, but cannot be used in taking differences.

The PartitionMatroid can't handle empty partition. 

Issue created by migration from https://trac.sagemath.org/ticket/19290





---

archive/issue_comments_261336.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261336",
    "user": "chaoxu"
}
```

New commits:



---

archive/issue_comments_261337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-24T23:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261337",
    "user": "chaoxu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261338.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to matroid theory.",
    "created_at": "2015-10-03T13:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261338",
    "user": "Rudi"
}
```

Changing component from PLEASE CHANGE to matroid theory.



---

archive/issue_comments_261339.json:
```json
{
    "body": "Hi Chao,\n\nIt is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  \n\nSo unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.",
    "created_at": "2015-10-03T13:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261339",
    "user": "Rudi"
}
```

Hi Chao,

It is OK if underscored methods like ._rank are picky about the kind of input they can handle. The idea behind having both .rank() and ._rank() is that .rank() should be convenient to use (by checking the input, possibly reformatting it), and ._rank() as efficient as possible (by assuming the input is of the right form).  

So unless there is no efficiency hit whatsoever, I don't like the idea of adjusting ._rank to accept more varied input.



---

archive/issue_comments_261340.json:
```json
{
    "body": "See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.\n\nIn addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261340",
    "user": "Stefan"
}
```

See http://doc.sagemath.org/html/en/reference/matroids/sage/matroids/matroid.html#sage.matroids.matroid.Matroid for an explanation of what we normally assume about inputs to our underscored functions. I agree with Rudi in this case, it is the responsibility of the caller to provide something with set interface to _rank, not the responsibility of _rank.

In addition, please keep your tickets to one issue per ticket: the PartitionMatroid fix is fine, but can't go in because of the first issue.



---

archive/issue_comments_261341.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-08T17:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261341",
    "user": "Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_261342.json:
```json
{
    "body": "The first issue is not a bug; the second issue is now #23213",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261342",
    "user": "Stefan"
}
```

The first issue is not a bug; the second issue is now #23213



---

archive/issue_comments_261343.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-06-11T01:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261343",
    "user": "Stefan"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_261344.json:
```json
{
    "body": "Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261344",
    "user": "embray"
}
```

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).



---

archive/issue_comments_261345.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2017-07-13T07:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19053#issuecomment-261345",
    "user": "embray"
}
```

Resolution: wontfix
