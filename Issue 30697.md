# Issue 30697: Use system python for generation of conway_polynomials and elliptic_curves

Issue created by migration from https://trac.sagemath.org/ticket/30934

Original creator: @tobiasdiez

Original creation time: 2020-11-18 10:04:28

CC:  mkoeppe

Instead of sage's python, the installation of conway_polynomials and elliptic_curves now uses the system python. This enables one to call `make conway_polynomials` without a prior compilation of python (which is helpful for #30371). Since the installation of these packages uses python only to convert files into the right format, using the system python should be fine.


---

Comment by @tobiasdiez created at 2020-11-18 10:04:35

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-11-18 21:50:32

These packages declare `$(PYTHON)` as a dependency, so they are allowed to use Sage's python.

`sage-system-python` is not the correct choice here. It can be a wide range of Python versions (including 2.x), and certainly existence of the sqlite module in that python, as required in `build/pkgs/elliptic_curves/spkg-install.py`, is not guaranteed.
(Note #30627 renames this script to `sage-bootstrap-python`.)


---

Comment by @tobiasdiez created at 2020-11-18 21:59:14

Thanks for the feedback. So what is the correct choice if the user does have a suitable system python?


---

Comment by mkoeppe created at 2020-11-18 22:36:11

When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.


---

Comment by git created at 2020-11-19 08:41:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @tobiasdiez created at 2020-11-19 08:42:06

Replying to [comment:4 mkoeppe]:
> When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.


Thanks! I've now used `python3` and it works indeed in the context of #30371.


---

Comment by mkoeppe created at 2020-11-25 18:00:40

This change should not be done for one package but uniformly for all packages - in #30731.
You can push the branch from here to that ticket to get it started.


---

Comment by @tobiasdiez created at 2020-11-25 19:38:53

Changing status from needs_review to positive_review.


---

Comment by @tobiasdiez created at 2020-11-25 19:38:53

Ok, then close this ticket here, although I don't really see why #30731 could't build upon this ticket.


---

Comment by mkoeppe created at 2020-11-25 19:41:55

Because this ticket on its own makes the codebase less uniform.


---

Comment by git created at 2020-12-18 22:37:24

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-12-18 22:37:24

Changing status from positive_review to needs_review.


---

Comment by @tobiasdiez created at 2020-12-18 22:44:00

Changing status from needs_review to positive_review.


---

Comment by git created at 2020-12-19 03:29:51

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-12-19 03:29:51

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2020-12-19 03:31:55

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-12-19 18:11:42

Resolution: duplicate
