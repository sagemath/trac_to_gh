# Issue 30697: Use system python for generation of conway_polynomials and elliptic_curves

archive/issues_030697.json:
```json
{
    "body": "CC:  @mkoeppe\n\nInstead of sage's python, the installation of conway_polynomials and elliptic_curves now uses the system python. This enables one to call `make conway_polynomials` without a prior compilation of python (which is helpful for #30371). Since the installation of these packages uses python only to convert files into the right format, using the system python should be fine.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30934\n\n",
    "created_at": "2020-11-18T10:04:28Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Use system python for generation of conway_polynomials and elliptic_curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30697",
    "user": "https://github.com/tobiasdiez"
}
```
CC:  @mkoeppe

Instead of sage's python, the installation of conway_polynomials and elliptic_curves now uses the system python. This enables one to call `make conway_polynomials` without a prior compilation of python (which is helpful for #30371). Since the installation of these packages uses python only to convert files into the right format, using the system python should be fine.

Issue created by migration from https://trac.sagemath.org/ticket/30934





---

archive/issue_comments_438365.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-18T10:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438365",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438366.json:
```json
{
    "body": "These packages declare `$(PYTHON)` as a dependency, so they are allowed to use Sage's python.\n\n`sage-system-python` is not the correct choice here. It can be a wide range of Python versions (including 2.x), and certainly existence of the sqlite module in that python, as required in `build/pkgs/elliptic_curves/spkg-install.py`, is not guaranteed.\n(Note #30627 renames this script to `sage-bootstrap-python`.)",
    "created_at": "2020-11-18T21:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438366",
    "user": "https://github.com/mkoeppe"
}
```

These packages declare `$(PYTHON)` as a dependency, so they are allowed to use Sage's python.

`sage-system-python` is not the correct choice here. It can be a wide range of Python versions (including 2.x), and certainly existence of the sqlite module in that python, as required in `build/pkgs/elliptic_curves/spkg-install.py`, is not guaranteed.
(Note #30627 renames this script to `sage-bootstrap-python`.)



---

archive/issue_comments_438367.json:
```json
{
    "body": "Thanks for the feedback. So what is the correct choice if the user does have a suitable system python?",
    "created_at": "2020-11-18T21:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438367",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks for the feedback. So what is the correct choice if the user does have a suitable system python?



---

archive/issue_comments_438368.json:
```json
{
    "body": "When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.",
    "created_at": "2020-11-18T22:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438368",
    "user": "https://github.com/mkoeppe"
}
```

When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.



---

archive/issue_comments_438369.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-19T08:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438369",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438370.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.\n\n\nThanks! I've now used `python3` and it works indeed in the context of #30371.",
    "created_at": "2020-11-19T08:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438370",
    "user": "https://github.com/tobiasdiez"
}
```

Replying to [comment:4 mkoeppe]:
> When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.


Thanks! I've now used `python3` and it works indeed in the context of #30371.



---

archive/issue_comments_438371.json:
```json
{
    "body": "This change should not be done for one package but uniformly for all packages - in #30731.\nYou can push the branch from here to that ticket to get it started.",
    "created_at": "2020-11-25T18:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438371",
    "user": "https://github.com/mkoeppe"
}
```

This change should not be done for one package but uniformly for all packages - in #30731.
You can push the branch from here to that ticket to get it started.



---

archive/issue_comments_438372.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438372",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438373.json:
```json
{
    "body": "Ok, then close this ticket here, although I don't really see why #30731 could't build upon this ticket.",
    "created_at": "2020-11-25T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438373",
    "user": "https://github.com/tobiasdiez"
}
```

Ok, then close this ticket here, although I don't really see why #30731 could't build upon this ticket.



---

archive/issue_comments_438374.json:
```json
{
    "body": "Because this ticket on its own makes the codebase less uniform.",
    "created_at": "2020-11-25T19:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438374",
    "user": "https://github.com/mkoeppe"
}
```

Because this ticket on its own makes the codebase less uniform.



---

archive/issue_comments_438375.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-18T22:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438375",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_438376.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-18T22:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438376",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_438377.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-18T22:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438377",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438378.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-19T03:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_438379.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-19T03:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438379",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_438380.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-19T03:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438380",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438381.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2020-12-19T18:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438381",
    "user": "https://github.com/fchapoton"
}
```

Resolution: duplicate
