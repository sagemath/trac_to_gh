# Issue 30697: Use system python for generation of conway_polynomials and elliptic_curves

archive/issues_030697.json:
```json
{
    "body": "CC:  mkoeppe\n\nInstead of sage's python, the installation of conway_polynomials and elliptic_curves now uses the system python. This enables one to call `make conway_polynomials` without a prior compilation of python (which is helpful for #30371). Since the installation of these packages uses python only to convert files into the right format, using the system python should be fine.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30934\n\n",
    "created_at": "2020-11-18T10:04:28Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "title": "Use system python for generation of conway_polynomials and elliptic_curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30697",
    "user": "@tobiasdiez"
}
```
CC:  mkoeppe

Instead of sage's python, the installation of conway_polynomials and elliptic_curves now uses the system python. This enables one to call `make conway_polynomials` without a prior compilation of python (which is helpful for #30371). Since the installation of these packages uses python only to convert files into the right format, using the system python should be fine.

Issue created by migration from https://trac.sagemath.org/ticket/30934





---

archive/issue_comments_438871.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-18T10:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438871",
    "user": "@tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438872.json:
```json
{
    "body": "These packages declare `$(PYTHON)` as a dependency, so they are allowed to use Sage's python.\n\n`sage-system-python` is not the correct choice here. It can be a wide range of Python versions (including 2.x), and certainly existence of the sqlite module in that python, as required in `build/pkgs/elliptic_curves/spkg-install.py`, is not guaranteed.\n(Note #30627 renames this script to `sage-bootstrap-python`.)",
    "created_at": "2020-11-18T21:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438872",
    "user": "mkoeppe"
}
```

These packages declare `$(PYTHON)` as a dependency, so they are allowed to use Sage's python.

`sage-system-python` is not the correct choice here. It can be a wide range of Python versions (including 2.x), and certainly existence of the sqlite module in that python, as required in `build/pkgs/elliptic_curves/spkg-install.py`, is not guaranteed.
(Note #30627 renames this script to `sage-bootstrap-python`.)



---

archive/issue_comments_438873.json:
```json
{
    "body": "Thanks for the feedback. So what is the correct choice if the user does have a suitable system python?",
    "created_at": "2020-11-18T21:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438873",
    "user": "@tobiasdiez"
}
```

Thanks for the feedback. So what is the correct choice if the user does have a suitable system python?



---

archive/issue_comments_438874.json:
```json
{
    "body": "When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.",
    "created_at": "2020-11-18T22:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438874",
    "user": "mkoeppe"
}
```

When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.



---

archive/issue_comments_438875.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-19T08:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438875",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438876.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.\n\n\nThanks! I've now used `python3` and it works indeed in the context of #30371.",
    "created_at": "2020-11-19T08:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438876",
    "user": "@tobiasdiez"
}
```

Replying to [comment:4 mkoeppe]:
> When there is a suitable system python3, then Sage creates a venv over it, so `python3` works. When there is no suitable system python3, then Sage builds one, so `python3` also works.


Thanks! I've now used `python3` and it works indeed in the context of #30371.



---

archive/issue_comments_438877.json:
```json
{
    "body": "This change should not be done for one package but uniformly for all packages - in #30731.\nYou can push the branch from here to that ticket to get it started.",
    "created_at": "2020-11-25T18:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438877",
    "user": "mkoeppe"
}
```

This change should not be done for one package but uniformly for all packages - in #30731.
You can push the branch from here to that ticket to get it started.



---

archive/issue_comments_438878.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438878",
    "user": "@tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438879.json:
```json
{
    "body": "Ok, then close this ticket here, although I don't really see why #30731 could't build upon this ticket.",
    "created_at": "2020-11-25T19:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438879",
    "user": "@tobiasdiez"
}
```

Ok, then close this ticket here, although I don't really see why #30731 could't build upon this ticket.



---

archive/issue_comments_438880.json:
```json
{
    "body": "Because this ticket on its own makes the codebase less uniform.",
    "created_at": "2020-11-25T19:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438880",
    "user": "mkoeppe"
}
```

Because this ticket on its own makes the codebase less uniform.



---

archive/issue_comments_438881.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-18T22:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438881",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_438882.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-18T22:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438882",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_438883.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-18T22:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438883",
    "user": "@tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438884.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-19T03:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438884",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_438885.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-19T03:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438885",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_438886.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-19T03:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438886",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438887.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2020-12-19T18:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30697",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30697#issuecomment-438887",
    "user": "chapoton"
}
```

Resolution: duplicate
