# Issue 16665: Advertise sig_check() better in the developers manual

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2014-08-29 11:46:49




---

Comment by jdemeyer created at 2014-08-29 15:11:54

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-08-29 15:11:54

New commits:


---

Comment by vdelecroix created at 2014-08-29 17:53:45

Changing status from needs_review to needs_info.


---

Comment by vdelecroix created at 2014-08-29 17:53:45

1) `sig_on/sig_off` is Sage specific or is it included within Cython? It would be worth mentioning it. If it is Sage specific, why is that? and how do people coding in Cython do? (seems to be `with nogil`). If it is shipped with Cython, there should a pointer toward its documentation.

2) I am not sure that the following example is relevant.

```
def stack_sig_on():
    sig_on()
    sig_on()
    sig_on()
    # (some code)
    sig_off()
    sig_off()
    sig_off()
```

I mean, what would be the purpose of such code? If it is none, it is still interesting to mention it within a stack of calls like

```
def f1():
    sig_on()
    x = f2()
    sig_off()
    # ...

def f2():
    sig_on()
    # ...
    sig_off()
    return ans
```


3) The section `Releasing the Global Interpreter Lock (GIL)` was a bit obscure to me. It would be nice to have one sentence to say what it is. I guess it is related to my remark 1.

4) After reading the implementation of `alarm` I wonder why using `alarm` in doctests rather than directly the `setitimer` from the `signal` library? It is basically in `TESTS` blocks that such test
would appear, and involving there the `signal` library is not ugly (and people reading it will learn about it instead of learning Sage wrapper!)

I learned many things reading it!
Thanks!
Vincent


---

Comment by jdemeyer created at 2014-08-29 18:52:08

Replying to [comment:3 vdelecroix]:
> 1) `sig_on/sig_off` is Sage specific or is it included within Cython? It would be worth mentioning it. If it is Sage specific, why is that? and how do people coding in Cython do? (seems to be `with nogil`). If it is shipped with Cython, there should a pointer toward its documentation.
It is completely Sage-specific, I guess other people writing Cython code do not care about interrupts. There has been talking about putting these in Cython, but that has not happened yet.

> 2) If it is none, it is still interesting to mention it within a stack of calls like
> {{{
> def f1():
>     sig_on()
>     x = f2()
>     sig_off()
>     # ...
> 
> def f2():
>     sig_on()
>     # ...
>     sig_off()
>     return ans
> }}}
Good suggestion!

> 3) The section `Releasing the Global Interpreter Lock (GIL)` was a bit obscure to me. It would be nice to have one sentence to say what it is. I guess it is related to my remark 1.
It is one of those things where, if you don't know it, you don't need to care. But I can put a link to the Cython documentation.

> 4) After reading the implementation of `alarm` I wonder why using `alarm` in doctests rather than directly the `setitimer` from the `signal` library?
Because `alarm()` is much cleaner.

> It is basically in `TESTS` blocks that such test
> would appear, and involving there the `signal` library is not ugly
Why is it not ugly?

> and people reading it will learn about it instead of learning Sage wrapper!
If people care about Sage's wrapper, they can still figure out the implementation and can find out about `setitimer` that way.


---

Comment by git created at 2014-08-29 19:24:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-08-29 19:24:44

New commits:


---

Comment by jdemeyer created at 2014-08-29 19:24:44

Changing status from needs_info to needs_review.


---

Comment by vdelecroix created at 2014-08-29 19:43:26

Nothing more to say. You can set to positive review or ask another signal newbie to reread it!

Vincent


---

Comment by jdemeyer created at 2014-08-30 07:43:41

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2014-08-30 19:46:24

my complaint about the change is about the line

```
or possibly the next Python code.
```

this is too vague (and grammatically weird - it should better be `Python statement`). 

Does it mean that one need reach a Python exception? Or any Python statement?
And what is the role of the word `possible` there? I don't get it.


---

Comment by dimpase created at 2014-08-30 19:55:15

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2014-08-30 20:01:40

Replying to [comment:9 dimpase]:
> it should better be `Python statement`.
I could change this.

> Or any Python statement?
> And what is the role of the word `possible` there? I don't get it.
I mean that Python code can sometimes raise a `KeyboardInterrupt`, but I also don't know exactly when this happens. For example, the following can be interrupted:

```
cython('while True: print "foo"')
```

But the following cannot be interrupted:

```
cython('while True: x = ["foo"] * 100')
```



---

Comment by dimpase created at 2014-08-30 21:16:36

Replying to [comment:11 jdemeyer]:
> Replying to [comment:9 dimpase]:
> > it should better be `Python statement`.
> I could change this.
yes please.

> 
> > Or any Python statement?
> > And what is the role of the word `possible` there? I don't get it.
> I mean that Python code can sometimes raise a `KeyboardInterrupt`, but I also don't know exactly when this happens. For example, the following can be interrupted:
> {{{
> cython('while True: print "foo"')
> }}}
> But the following cannot be interrupted:
> {{{
> cython('while True: x = ["foo"] * 100')
> }}}

Do you mean to say that Python won't be able to catch the interrupt in the former case, but not in the latter case (i.e. the latter loop will keep running)?


---

Comment by jdemeyer created at 2014-08-30 21:19:13

Replying to [comment:12 dimpase]:
> Replying to [comment:11 jdemeyer]:
> > Replying to [comment:9 dimpase]:
> > > it should better be `Python statement`.
> > I could change this.
> yes please.
> 
> > 
> > > Or any Python statement?
> > > And what is the role of the word `possible` there? I don't get it.
> > I mean that Python code can sometimes raise a `KeyboardInterrupt`, but I also don't know exactly when this happens. For example, the following can be interrupted:
> > {{{
> > cython('while True: print "foo"')
> > }}}
> > But the following cannot be interrupted:
> > {{{
> > cython('while True: x = ["foo"] * 100')
> > }}}
> 
> Do you mean to say that Python won't be able to catch the interrupt in the former case, but not in the latter case (i.e. the latter loop will keep running)?
I mean that the loop in the last case will keep running because Python doesn't check for interrupts when executing `x = ["foo"] * 100`.


---

Comment by dimpase created at 2014-08-30 21:46:01

Replying to [comment:13 jdemeyer]:
> Replying to [comment:12 dimpase]:
> > Replying to [comment:11 jdemeyer]:
> > > Replying to [comment:9 dimpase]:
> > > > it should better be `Python statement`.
> > > I could change this.
> > yes please.
> > 
> > > 
> > > > Or any Python statement?
> > > > And what is the role of the word `possible` there? I don't get it.
> > > I mean that Python code can sometimes raise a `KeyboardInterrupt`, but I also don't know exactly when this happens. For example, the following can be interrupted:
> > > {{{
> > > cython('while True: print "foo"')
> > > }}}
> > > But the following cannot be interrupted:
> > > {{{
> > > cython('while True: x = ["foo"] * 100')
> > > }}}
> > 
> > Do you mean to say that Python won't be able to catch the interrupt in the former case, but not in the latter case (i.e. the latter loop will keep running)?
> I mean that the loop in the last case will keep running because Python doesn't check for interrupts when executing `x = ["foo"] * 100`.

Whereas if the next statement after the latter was also cython, it would be terminated?
Is this what you mean by `possibly`?


---

Comment by jdemeyer created at 2014-08-30 22:21:31

Replying to [comment:14 dimpase]:
> Whereas if the next statement after the latter was also cython, it would be terminated?
No, that's not what I mean. Pure Cython statements (which do not involve Python library calls) can never be interrupted.


---

Comment by git created at 2014-08-30 22:35:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-08-30 22:36:09

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2014-08-30 22:59:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-09-05 16:55:15


```
File "src/doc/en/developer/coding_in_cython.rst", line 253, in doc.en.developer.coding_in_cython
Failed example:
    cython('print "Hello"')
Expected nothing
Got:
    Hello
```



---

Comment by vbraun created at 2014-09-05 16:55:15

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2014-09-05 19:27:31

Obviously :-)


---

Comment by git created at 2014-09-05 19:44:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-09-05 20:00:37

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-09-08 08:48:56

Resolution: fixed


---

Comment by jdemeyer created at 2014-09-30 17:33:27

Built documentation
