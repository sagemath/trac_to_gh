# Issue 19273: asymptotic expansion generator for binomial(kn, n)

archive/issues_019273.json:
```json
{
    "body": "CC:  behackl cheuberg\n\nImplement a generator for `binomial(k*n, n)`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19510\n\n",
    "created_at": "2015-11-01T18:10:01Z",
    "labels": [
        "asymptotic expansions",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "asymptotic expansion generator for binomial(kn, n)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19273",
    "user": "dkrenn"
}
```
CC:  behackl cheuberg

Implement a generator for `binomial(k*n, n)`.

Issue created by migration from https://trac.sagemath.org/ticket/19510





---

archive/issue_comments_264529.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-11-04T16:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264529",
    "user": "dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_264530.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-11-05T02:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264530",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_264531.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-05T02:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264531",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264532.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-05T02:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264532",
    "user": "dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264533.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-07T00:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264533",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264534.json:
```json
{
    "body": "Merged latest version of #19306 to avoid doctest failure.\n----\nNew commits:",
    "created_at": "2016-01-22T05:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264534",
    "user": "cheuberg"
}
```

Merged latest version of #19306 to avoid doctest failure.
----
New commits:



---

archive/issue_comments_264535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-23T18:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264535",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264536.json:
```json
{
    "body": "Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n\nI am not happy with the growth group of the output:\n- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n- `log(n)^(Symbolic Constants Subring)` will never occur.\n- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264536",
    "user": "cheuberg"
}
```

Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.

I am not happy with the growth group of the output:
- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
- `log(n)^(Symbolic Constants Subring)` will never occur.
- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.



---

archive/issue_comments_264537.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264537",
    "user": "cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_264538.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264538",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264539.json:
```json
{
    "body": "Replying to [comment:11 cheuberg]:\n> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n> \n> I am not happy with the growth group of the output:\n> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n> - `log(n)^(Symbolic Constants Subring)` will never occur.\n> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. \n\nMore or less complete rewrite of function.\n----\nLast 10 new commits:",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264539",
    "user": "dkrenn"
}
```

Replying to [comment:11 cheuberg]:
> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.
> 
> I am not happy with the growth group of the output:
> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
> - `log(n)^(Symbolic Constants Subring)` will never occur.
> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. 

More or less complete rewrite of function.
----
Last 10 new commits:



---

archive/issue_comments_264540.json:
```json
{
    "body": "I reviewed this version. \n\nI merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.\n----\nLast 10 new commits:",
    "created_at": "2016-01-27T11:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264540",
    "user": "cheuberg"
}
```

I reviewed this version. 

I merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.
----
Last 10 new commits:



---

archive/issue_comments_264541.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-27T12:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264541",
    "user": "dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264542.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264542",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_264543.json:
```json
{
    "body": "http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio\n\n```\nsage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotic_expansion_generators.py\", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\nFailed example:\n    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])\nExpected:\n    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]\nGot:\n    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\n    [45 tests, 1 failure, 8.78 s]\n```\n",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264543",
    "user": "vbraun"
}
```

http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio

```
sage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_expansion_generators.py", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
Failed example:
    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])
Expected:
    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]
Got:
    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]
**********************************************************************
1 item had failures:
   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
    [45 tests, 1 failure, 8.78 s]
```




---

archive/issue_comments_264544.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T14:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264544",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264545.json:
```json
{
    "body": "Added relative tolerance.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264545",
    "user": "cheuberg"
}
```

Added relative tolerance.



---

archive/issue_comments_264546.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264546",
    "user": "cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264547.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264547",
    "user": "dkrenn"
}
```

New commits:



---

archive/issue_comments_264548.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264548",
    "user": "dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264549.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-31T13:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264549",
    "user": "vbraun"
}
```

Resolution: fixed
