# Issue 19273: asymptotic expansion generator for binomial(kn, n)

archive/issues_019273.json:
```json
{
    "body": "CC:  @behackl @cheuberg\n\nImplement a generator for `binomial(k*n, n)`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19510\n\n",
    "created_at": "2015-11-01T18:10:01Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "asymptotic expansion generator for binomial(kn, n)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19273",
    "user": "https://github.com/dkrenn"
}
```
CC:  @behackl @cheuberg

Implement a generator for `binomial(k*n, n)`.

Issue created by migration from https://trac.sagemath.org/ticket/19510





---

archive/issue_comments_264214.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-11-04T16:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264214",
    "user": "https://github.com/dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_264215.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-11-05T02:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_264216.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-05T02:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264217.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-05T02:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264217",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264218.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-07T00:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264218",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264219.json:
```json
{
    "body": "Merged latest version of #19306 to avoid doctest failure.\n\n---\nNew commits:",
    "created_at": "2016-01-22T05:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264219",
    "user": "https://github.com/cheuberg"
}
```

Merged latest version of #19306 to avoid doctest failure.

---
New commits:



---

archive/issue_events_053780.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2016-01-22T05:13:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19273#event-53780"
}
```



---

archive/issue_comments_264220.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-23T18:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264221.json:
```json
{
    "body": "Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n\nI am not happy with the growth group of the output:\n- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n- `log(n)^(Symbolic Constants Subring)` will never occur.\n- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264221",
    "user": "https://github.com/cheuberg"
}
```

Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.

I am not happy with the growth group of the output:
- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
- `log(n)^(Symbolic Constants Subring)` will never occur.
- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.



---

archive/issue_comments_264222.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264222",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_264223.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264223",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264224.json:
```json
{
    "body": "Replying to [comment:11 cheuberg]:\n> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n> \n> I am not happy with the growth group of the output:\n> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n> - `log(n)^(Symbolic Constants Subring)` will never occur.\n> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. \n\n\nMore or less complete rewrite of function.\n\n---\nLast 10 new commits:",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264224",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:11 cheuberg]:
> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.
> 
> I am not happy with the growth group of the output:
> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
> - `log(n)^(Symbolic Constants Subring)` will never occur.
> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. 


More or less complete rewrite of function.

---
Last 10 new commits:



---

archive/issue_comments_264225.json:
```json
{
    "body": "I reviewed this version. \n\nI merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.\n\n---\nLast 10 new commits:",
    "created_at": "2016-01-27T11:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264225",
    "user": "https://github.com/cheuberg"
}
```

I reviewed this version. 

I merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.

---
Last 10 new commits:



---

archive/issue_comments_264226.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-27T12:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264226",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264227.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264227",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_264228.json:
```json
{
    "body": "http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio\n\n```\nsage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotic_expansion_generators.py\", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\nFailed example:\n    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])\nExpected:\n    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]\nGot:\n    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\n    [45 tests, 1 failure, 8.78 s]\n```",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264228",
    "user": "https://github.com/vbraun"
}
```

http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio

```
sage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_expansion_generators.py", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
Failed example:
    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])
Expected:
    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]
Got:
    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]
**********************************************************************
1 item had failures:
   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
    [45 tests, 1 failure, 8.78 s]
```



---

archive/issue_comments_264229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T14:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264230.json:
```json
{
    "body": "Added relative tolerance.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264230",
    "user": "https://github.com/cheuberg"
}
```

Added relative tolerance.



---

archive/issue_comments_264231.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264231",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264232.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264232",
    "user": "https://github.com/dkrenn"
}
```

New commits:



---

archive/issue_comments_264233.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264233",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-31T13:31:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19273#event-53781"
}
```



---

archive/issue_comments_264234.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-31T13:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19273#issuecomment-264234",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
