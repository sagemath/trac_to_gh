# Issue 20607: py3 division in ell_rational_field

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2016-06-18 11:13:52

CC:  cremona jdemeyer

as a step towards python3

there are currently in this file three occurences of 3/2 that are certainly not intended to be 0 (py2 value)


---

Comment by chapoton created at 2016-06-18 11:14:40

New commits:


---

Comment by chapoton created at 2016-06-18 11:14:40

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-06-18 11:14:40

Changing keywords from "" to "python3".


---

Comment by cremona created at 2016-06-18 13:23:57

Well spotted!  I still have a branch which I have not worked on for 2 years which fixes several bugs in the integral point code, by the way.  Note  that one substantive thing which happened as a result of your fix is that in one curve in a doctest it looks at linear combination of generators with coefficient bound 9 instead of 8.  In the example, no more integral points were found, but it is easy to imagine that in other examples the bug you fixed might have led to lost solutions.


---

Comment by chapoton created at 2016-06-21 12:31:49

bot is green. Is there any objection against this ticket ?


---

Comment by cremona created at 2016-06-21 12:58:04

No -- but I did not test it, I only looked at the code changes.
Am I right in thinking that with the old code 3/2 rounded down to 0, while with the new Z(3)/2 is is an exact rational?  Or a float 1.5?  In all three places, a float would be sufficient, in case that is better.


---

Comment by chapoton created at 2016-06-21 13:01:48

3/2 was previously rounded to 1, and is now the rational 3/2.

I think everything will become a float at some point, but there should be no need to
do that too early.


---

Comment by chapoton created at 2016-06-24 18:58:05

`@`cremona, do you want to test more thoroughly before saying ok ? The bot is green, which
means that all our doctests pass. Now you may want to check against a larger test set of your own, maybe ?


---

Comment by cremona created at 2016-06-24 19:33:33

No I do not want to test more, and will give this a positive review.  The reason is that I know there are other bugs in the integral point code, with other tickets open, and there is no reason why this bug-fix should wait.


---

Comment by cremona created at 2016-06-24 19:33:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-06-26 07:30:37

Resolution: fixed
