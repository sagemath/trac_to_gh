# Issue 13806: Add `__call__` method to FreeGroupElement

archive/issues_013806.json:
```json
{
    "body": "Assignee: joyner\n\nCopy-paste from #12339:\n\nI have some comments regarding the set of patches in #12339. I myself can not give much technical input, but I have a colleague here who has been trying to use this and has come across some inconsistencies.\n\n1. Is there a reason why a `FreeGroupElement` does not have the `__call__` method? A `FreeMonoidElement` does have the `__call__` method. This is needed to make the following work\n\n```python\nsage: G.<a,b> = FreeGroup()\nsage: a.subs(a=1,b=2) # We would expect the answer to be 1\na\n```\n\n2. Related to the implementation of the `__call__` method is the following problem. Suppose in order to make `subs()` work, we implement the `__call__` method. The current code has to call `a.Tietze()` to get the index of the free generator `a` and its exponent. For a more complicated expression the output is as follows, and we would have to go along and parse the output tuple to find out the exponent by counting. Is there any method (maybe in GAP) which outputs just a list of tuples `[(generator1, exponent1), (generator2, exponent2),...]`. This is again how `FreeMonoid` is implemented.\n\n```\nsage: (a^2 * b^-3).Tietze()\n(1, 1, -2, -2, -2)\nsage: (a^2 * b^-3).some_function() # some function which gives (generator, exponent) tuples\n[(a, 2), (b, -3)]\n```\n\n3. There is also this inconsistency in the output of the following two functions. In language, they say the same thing, but they are not mathematically equal (according to the current implementation):\n\n```python\nsage: G.<a,b> = FreeGroup()\nsage: test = (a).fox_derivative(a)\nsage: f = test.parent()\nsage: g = GroupAlgebra(G, ZZ)\nsage: print f\nGroup algebra of Free Group on generators {a, b, c, d, e} over Integer Ring\nsage: print g\nGroup algebra of group \"Free Group on generators {a, b, c, d, e}\" over base ring Integer Ring\nsage: print f == g\nFalse\n```\n\n\n----\n\nRelated discussion in [combinat-devel](https://groups.google.com/d/topic/sage-combinat-devel/f_Und2NDyFE/discussion).\n\nIssue created by migration from https://trac.sagemath.org/ticket/14010\n\n",
    "created_at": "2013-01-25T14:36:39Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Add `__call__` method to FreeGroupElement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13806",
    "user": "https://github.com/ppurka"
}
```
Assignee: joyner

Copy-paste from #12339:

I have some comments regarding the set of patches in #12339. I myself can not give much technical input, but I have a colleague here who has been trying to use this and has come across some inconsistencies.

1. Is there a reason why a `FreeGroupElement` does not have the `__call__` method? A `FreeMonoidElement` does have the `__call__` method. This is needed to make the following work

```python
sage: G.<a,b> = FreeGroup()
sage: a.subs(a=1,b=2) # We would expect the answer to be 1
a
```

2. Related to the implementation of the `__call__` method is the following problem. Suppose in order to make `subs()` work, we implement the `__call__` method. The current code has to call `a.Tietze()` to get the index of the free generator `a` and its exponent. For a more complicated expression the output is as follows, and we would have to go along and parse the output tuple to find out the exponent by counting. Is there any method (maybe in GAP) which outputs just a list of tuples `[(generator1, exponent1), (generator2, exponent2),...]`. This is again how `FreeMonoid` is implemented.

```
sage: (a^2 * b^-3).Tietze()
(1, 1, -2, -2, -2)
sage: (a^2 * b^-3).some_function() # some function which gives (generator, exponent) tuples
[(a, 2), (b, -3)]
```

3. There is also this inconsistency in the output of the following two functions. In language, they say the same thing, but they are not mathematically equal (according to the current implementation):

```python
sage: G.<a,b> = FreeGroup()
sage: test = (a).fox_derivative(a)
sage: f = test.parent()
sage: g = GroupAlgebra(G, ZZ)
sage: print f
Group algebra of Free Group on generators {a, b, c, d, e} over Integer Ring
sage: print g
Group algebra of group "Free Group on generators {a, b, c, d, e}" over base ring Integer Ring
sage: print f == g
False
```


----

Related discussion in [combinat-devel](https://groups.google.com/d/topic/sage-combinat-devel/f_Und2NDyFE/discussion).

Issue created by migration from https://trac.sagemath.org/ticket/14010





---

archive/issue_comments_171240.json:
```json
{
    "body": "Only one issue per ticket please. I've opened #14012 for your other issue.",
    "created_at": "2013-01-25T17:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171240",
    "user": "https://github.com/vbraun"
}
```

Only one issue per ticket please. I've opened #14012 for your other issue.



---

archive/issue_comments_171241.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-25T18:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171241",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_171242.json:
```json
{
    "body": "Does that work for you?",
    "created_at": "2013-01-25T18:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171242",
    "user": "https://github.com/vbraun"
}
```

Does that work for you?



---

archive/issue_comments_171243.json:
```json
{
    "body": "Replying to [comment:2 vbraun]:\n> Does that work for you?\nFantastic! It looks like a final patch to me! Do you plan to add anything else? It works nicely here (substituting matrices also works).",
    "created_at": "2013-01-26T05:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171243",
    "user": "https://github.com/ppurka"
}
```

Replying to [comment:2 vbraun]:
> Does that work for you?
Fantastic! It looks like a final patch to me! Do you plan to add anything else? It works nicely here (substituting matrices also works).



---

archive/issue_comments_171244.json:
```json
{
    "body": "Attachment [trac_14010_syllables.patch](tarball://root/attachments/some-uuid/ticket14010/trac_14010_syllables.patch) by @vbraun created at 2013-01-26 12:12:24\n\nUpdated patch",
    "created_at": "2013-01-26T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171244",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_14010_syllables.patch](tarball://root/attachments/some-uuid/ticket14010/trac_14010_syllables.patch) by @vbraun created at 2013-01-26 12:12:24

Updated patch



---

archive/issue_comments_171245.json:
```json
{
    "body": "I've added a check for finitely presented groups that the values do satisfy the relations. Also, more documentation. I'm fine with the ticket, its your job to review now ;-)",
    "created_at": "2013-01-26T12:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171245",
    "user": "https://github.com/vbraun"
}
```

I've added a check for finitely presented groups that the values do satisfy the relations. Also, more documentation. I'm fine with the ticket, its your job to review now ;-)



---

archive/issue_comments_171246.json:
```json
{
    "body": "The changes are good in my opinion. I am just waiting for my colleague, who is actually using these set of patches, to give me relevant feedback. If his feedback is positive then I will set this to a positive review.",
    "created_at": "2013-01-27T10:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171246",
    "user": "https://github.com/ppurka"
}
```

The changes are good in my opinion. I am just waiting for my colleague, who is actually using these set of patches, to give me relevant feedback. If his feedback is positive then I will set this to a positive review.



---

archive/issue_comments_171247.json:
```json
{
    "body": "Ok. My friend (doesn't have an account here) is happy with this implementation. So, setting it to positive review.",
    "created_at": "2013-01-28T13:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171247",
    "user": "https://github.com/ppurka"
}
```

Ok. My friend (doesn't have an account here) is happy with this implementation. So, setting it to positive review.



---

archive/issue_comments_171248.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-28T13:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171248",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_171249.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-09T12:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13806#issuecomment-171249",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
