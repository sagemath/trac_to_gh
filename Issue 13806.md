# Issue 13806: Add `__call__` method to FreeGroupElement

Issue created by migration from Trac.

Original creator: ppurka

Original creation time: 2013-01-25 14:36:39

Assignee: joyner

Copy-paste from #12339:

I have some comments regarding the set of patches in #12339. I myself can not give much technical input, but I have a colleague here who has been trying to use this and has come across some inconsistencies.

1. Is there a reason why a `FreeGroupElement` does not have the `__call__` method? A `FreeMonoidElement` does have the `__call__` method. This is needed to make the following work

```python
sage: G.<a,b> = FreeGroup()
sage: a.subs(a=1,b=2) # We would expect the answer to be 1
a
```

2. Related to the implementation of the `__call__` method is the following problem. Suppose in order to make `subs()` work, we implement the `__call__` method. The current code has to call `a.Tietze()` to get the index of the free generator `a` and its exponent. For a more complicated expression the output is as follows, and we would have to go along and parse the output tuple to find out the exponent by counting. Is there any method (maybe in GAP) which outputs just a list of tuples `[(generator1, exponent1), (generator2, exponent2),...]`. This is again how `FreeMonoid` is implemented.

```
sage: (a^2 * b^-3).Tietze()
(1, 1, -2, -2, -2)
sage: (a^2 * b^-3).some_function() # some function which gives (generator, exponent) tuples
[(a, 2), (b, -3)]
```

3. There is also this inconsistency in the output of the following two functions. In language, they say the same thing, but they are not mathematically equal (according to the current implementation):

```python
sage: G.<a,b> = FreeGroup()
sage: test = (a).fox_derivative(a)
sage: f = test.parent()
sage: g = GroupAlgebra(G, ZZ)
sage: print f
Group algebra of Free Group on generators {a, b, c, d, e} over Integer Ring
sage: print g
Group algebra of group "Free Group on generators {a, b, c, d, e}" over base ring Integer Ring
sage: print f == g
False
```


----

Related discussion in [combinat-devel](https://groups.google.com/d/topic/sage-combinat-devel/f_Und2NDyFE/discussion).


---

Comment by vbraun created at 2013-01-25 17:48:36

Only one issue per ticket please. I've opened #14012 for your other issue.


---

Comment by vbraun created at 2013-01-25 18:39:47

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-01-25 18:39:47

Does that work for you?


---

Comment by ppurka created at 2013-01-26 05:19:01

Replying to [comment:2 vbraun]:
> Does that work for you?
Fantastic! It looks like a final patch to me! Do you plan to add anything else? It works nicely here (substituting matrices also works).


---

Attachment

Updated patch


---

Comment by vbraun created at 2013-01-26 12:13:48

I've added a check for finitely presented groups that the values do satisfy the relations. Also, more documentation. I'm fine with the ticket, its your job to review now ;-)


---

Comment by ppurka created at 2013-01-27 10:49:28

The changes are good in my opinion. I am just waiting for my colleague, who is actually using these set of patches, to give me relevant feedback. If his feedback is positive then I will set this to a positive review.


---

Comment by ppurka created at 2013-01-28 13:26:10

Ok. My friend (doesn't have an account here) is happy with this implementation. So, setting it to positive review.


---

Comment by ppurka created at 2013-01-28 13:26:10

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-02-09 12:15:03

Resolution: fixed
