# Issue 24757: convert mandelbrot/julia interact to jupyter notebook

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2018-03-17 14:01:55

CC:  bbarros bhutz atowsley kcrisman embray jdemeyer jmantysalo

as another step to python3


---

Comment by chapoton created at 2018-03-17 14:42:51

work in progress, not yet working as expected..
----
New commits:


---

Comment by git created at 2018-03-17 15:34:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-17 15:56:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-17 16:27:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-03-17 16:28:29

ok, working now. Except 3 failing doctests that I just fail to write using ellipsis !


---

Comment by chapoton created at 2018-03-17 16:28:29

Changing status from new to needs_review.


---

Comment by git created at 2018-03-17 19:26:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-17 20:32:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2018-03-19 20:41:01

This is bad:

```
M = mandelbrot_interact
...adjust various attributes of M...
return M
```


The problem is that you are changing and returning a unique global object. Instead of having

```
`@`interact.widget
def mandelbrot_interact(...
```

it would be better to just define `mandelbrot_interact` as an ordinary function and call `interact.widget()` inside the `mandelbrot_plot` function. That way, you end up with non-unique widgets.

Can you explain the `<CSI-2K>` appearing in the doctests? I feel uncomfortable accepting that without knowing where it comes from.


---

Comment by jdemeyer created at 2018-03-19 20:41:01

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-03-21 16:25:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-03-21 16:26:31

Better like that ?


---

Comment by chapoton created at 2018-03-21 16:26:31

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-03-27 15:26:23

ping ?


---

Comment by chapoton created at 2018-04-01 18:47:39

*ping* ?


---

Comment by chapoton created at 2018-04-04 12:10:14

review, please ?


---

Comment by chapoton created at 2018-04-13 06:17:45

ping again


---

Comment by chapoton created at 2018-04-16 12:25:20

Could please someone have a look at the result here ? This seems to work well, and is a good step in getting rid of the dependencies to sagenb.


---

Comment by embray created at 2018-04-17 16:02:56

It looks good to me. I had just moved the imports from `sagenb` inline, but this is obviously a more complete approach.  I haven't tested it, but if you say it works it's good enough for me.


---

Comment by chapoton created at 2018-04-17 16:20:25

It seems not to be working anymore.. :(


---

Comment by chapoton created at 2018-04-17 16:32:07

Jeroen, any idea of what should be done, please ?


---

Comment by chapoton created at 2018-04-17 18:56:28

Here is the message I get (once disactivating the image):

```
Failed to display Jupyter Widget of type sage_interactive.

If you're reading this message in the Jupyter Notebook or JupyterLab Notebook, it may mean that the widgets JavaScript is still loading. If this message persists, it likely means that the widgets JavaScript library is either not installed or not enabled. See the Jupyter Widgets Documentation for setup instructions.

If you're reading this message in another frontend (for example, a static rendering on GitHub or NBViewer), it may mean that your frontend doesn't currently support widgets.
```

This is not specific to the widget built here. Simple basic widgets have the same issue. Could someone confirm this issue ?

```
import ipywidgets as widgets
widgets.Checkbox()
```



---

Comment by jmantysalo created at 2018-04-26 06:27:37

I can see no problem with `mandelbrot_plot(interact=True)` on `sage --notebook=ipython`; another thing is `sage --notebook=sagenb` which just says "Interactive function <function mandelbrot_interact . . ."

But the main idea of fractal does not work when there is no widget for infinite zooming.


---

Comment by chapoton created at 2018-04-26 06:31:27

If it works for you (in which version of sage ?), then one can probably set this to positive review. My install should be somehow broken.

Yes, this is a pity that there is no good clickable-picture widget. But the main aim here is to move towards python3 by geeting rid of all imports of sagenb.


---

Comment by jmantysalo created at 2018-04-26 06:34:06

Replying to [comment:23 chapoton]:

> If it works for you (in which version of sage ?), then one can probably set this to positive review. My install should be somehow broken.

I had 8.2rc4, and with `git trac checkout...` of this ticket I got 8.2beta8. So should I try to merge this to newest beta/rc version?

> Yes, this is a pity that there is no good clickable-picture widget. But the main aim here is to move towards python3 by geeting rid of all imports of sagenb.

OK.


---

Comment by jmantysalo created at 2018-04-26 06:59:28

Replying to [comment:24 jmantysalo]:
> So should I try to merge this to newest beta/rc version?

I did this. No changes, it wotks.


---

Comment by chapoton created at 2018-04-26 07:03:35

Thanks a lot. Feel free to set to positive, then.


---

Comment by jmantysalo created at 2018-04-26 07:07:35

Hmm... I don't know about those widgets. The code seems clear. Jeroen, have you checked this?


---

Comment by jdemeyer created at 2018-04-26 08:44:43

Replying to [comment:27 jmantysalo]:
> Jeroen, have you checked this?

No, but I guess I should...


---

Comment by jdemeyer created at 2018-04-26 10:14:38

I'm not so happy that the input to `mandelbrot_plot()` is now completely ignored when `interact=True` is given. I'll try to work on this.

I will rebase on #25074. That's not strictly needed, but it's good to test against the newest version of ipywidgets.


---

Comment by jdemeyer created at 2018-04-26 10:14:38

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-04-26 10:14:38

Changing component from python3 to notebook.


---

Comment by git created at 2018-04-26 10:15:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2018-05-15 15:34:17

Is this still "needing work", Jeroen ?

This is the place where docbuild currently fails on the python3 patchbot. See

https://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-05-15%2012:37:45?plugin=docbuild


---

Comment by chapoton created at 2018-05-16 10:01:28

This is working fine, the only issue is comment:29


---

Comment by git created at 2018-05-16 10:44:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-05-16 10:51:44

OK, I'll work on this today.


---

Comment by git created at 2018-05-16 12:57:07

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-05-16 13:29:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-05-16 13:59:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-05-16 13:59:56

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-05-23 15:46:38

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2018-05-23 15:46:38

I think I can reasonably set this to positive now.


---

Comment by vbraun created at 2018-05-27 17:01:43

Resolution: fixed
