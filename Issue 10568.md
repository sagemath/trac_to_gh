# Issue 10568: Make Conic class able to find points over number fields

archive/issues_010568.json:
```json
{
    "body": "Assignee: mhampton\n\nCC:  mstreng\n\nKeywords: rational point points conic quadratic form number field\n\nThe patch at #727 is very big and most of it does not need #9334, so I will move all number field functionality here.\n\nRequires #727, #2329, #9334\n\nIssue created by migration from https://trac.sagemath.org/ticket/10621\n\n",
    "created_at": "2011-01-13T14:15:44Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "title": "Make Conic class able to find points over number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10568",
    "user": "mstreng"
}
```
Assignee: mhampton

CC:  mstreng

Keywords: rational point points conic quadratic form number field

The patch at #727 is very big and most of it does not need #9334, so I will move all number field functionality here.

Requires #727, #2329, #9334

Issue created by migration from https://trac.sagemath.org/ticket/10621





---

archive/issue_comments_110497.json:
```json
{
    "body": "Attachment\n\nRequires #727, #2329, #9334. Then apply trac_10621_conics_over_number_fields.patch",
    "created_at": "2011-01-13T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110497",
    "user": "mstreng"
}
```

Attachment

Requires #727, #2329, #9334. Then apply trac_10621_conics_over_number_fields.patch



---

archive/issue_comments_110498.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-01-13T15:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110498",
    "user": "mstreng"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_110499.json:
```json
{
    "body": "Changing component from geometry to number fields.",
    "created_at": "2011-01-24T11:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110499",
    "user": "mstreng"
}
```

Changing component from geometry to number fields.



---

archive/issue_comments_110500.json:
```json
{
    "body": "apply trac_10621_conics_number_fields.patch only",
    "created_at": "2011-02-06T13:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110500",
    "user": "mstreng"
}
```

apply trac_10621_conics_number_fields.patch only



---

archive/issue_comments_110501.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-06T13:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110501",
    "user": "mstreng"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_110502.json:
```json
{
    "body": "Attachment\n\nMoved methods for local solubility to #10742, so this ticket now only depends on #727, #2329",
    "created_at": "2011-02-06T13:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110502",
    "user": "mstreng"
}
```

Attachment

Moved methods for local solubility to #10742, so this ticket now only depends on #727, #2329



---

archive/issue_comments_110503.json:
```json
{
    "body": "See also #11455, which extends this ticket.",
    "created_at": "2011-06-09T15:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110503",
    "user": "mstreng"
}
```

See also #11455, which extends this ticket.



---

archive/issue_comments_110504.json:
```json
{
    "body": "Apply to Sage 4.7 or higher (or see above for the dependencies).\n\nPlease review, a student will need #11455 in September.",
    "created_at": "2011-08-18T12:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110504",
    "user": "mstreng"
}
```

Apply to Sage 4.7 or higher (or see above for the dependencies).

Please review, a student will need #11455 in September.



---

archive/issue_comments_110505.json:
```json
{
    "body": "Sorry I didn't make the September deadline...\n\nLooks basically good, but I get some doctest failures after applying (successfully) to 4.8.alpha4:\n\n```\n\tsage -t -long devel/sage-main/sage/schemes/plane_conics/con_rational_field.py # 1 doctests failed\n\tsage -t -long devel/sage-main/sage/schemes/plane_conics/con_field.py # 2 doctests failed\n\tsage -t -long devel/sage-main/sage/schemes/plane_conics/con_number_field.py # 6 doctests failed\n```\n\nMostly they are this:\n\n```\n     File \"/home/jec/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/plane_conics/con_number_field.py\", line 249, in has_rational_point\n        pt = self.point(T*vector([KtoB(isnorm[1][0]),\n    NameError: global name 'vector' is not defined\n```\n\nand also there is this:\n\n```\nFile \"/home/jec/sage-4.8.alpha4/devel/sage-main/sage/schemes/plane_conics/con_number_field.py\", line 290:\n    sage: f = (2*O).factor(); f\nExpected:\n    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))\nGot:\n    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (a^2 - 2*a + 3))\n```\n\nwhich is of course trivial, and probably due to a Pari change in the interim. \n\nFix these and I'll give it a positive review!",
    "created_at": "2011-12-15T16:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110505",
    "user": "cremona"
}
```

Sorry I didn't make the September deadline...

Looks basically good, but I get some doctest failures after applying (successfully) to 4.8.alpha4:

```
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_rational_field.py # 1 doctests failed
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_field.py # 2 doctests failed
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_number_field.py # 6 doctests failed
```

Mostly they are this:

```
     File "/home/jec/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/plane_conics/con_number_field.py", line 249, in has_rational_point
        pt = self.point(T*vector([KtoB(isnorm[1][0]),
    NameError: global name 'vector' is not defined
```

and also there is this:

```
File "/home/jec/sage-4.8.alpha4/devel/sage-main/sage/schemes/plane_conics/con_number_field.py", line 290:
    sage: f = (2*O).factor(); f
Expected:
    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))
Got:
    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (a^2 - 2*a + 3))
```

which is of course trivial, and probably due to a Pari change in the interim. 

Fix these and I'll give it a positive review!



---

archive/issue_comments_110506.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-15T16:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110506",
    "user": "cremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_110507.json:
```json
{
    "body": "a few fixes compared to the previous file, apply only this one",
    "created_at": "2011-12-15T21:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110507",
    "user": "mstreng"
}
```

a few fixes compared to the previous file, apply only this one



---

archive/issue_comments_110508.json:
```json
{
    "body": "Attachment\n\napply 10621_conics_number_fields.patch only",
    "created_at": "2011-12-15T21:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110508",
    "user": "mstreng"
}
```

Attachment

apply 10621_conics_number_fields.patch only



---

archive/issue_comments_110509.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-12-15T21:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110509",
    "user": "mstreng"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_110510.json:
```json
{
    "body": "Changes (to `con_number_field.py` only):\n\n```\n> +            from sage.modules.free_module_element import vector\n\n< +            sage: f = (2*O).factor(); f\n< +            (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))\n> +            sage: f = (2*O).factor()\n```\n",
    "created_at": "2011-12-15T21:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110510",
    "user": "mstreng"
}
```

Changes (to `con_number_field.py` only):

```
> +            from sage.modules.free_module_element import vector

< +            sage: f = (2*O).factor(); f
< +            (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))
> +            sage: f = (2*O).factor()
```




---

archive/issue_comments_110511.json:
```json
{
    "body": "Changing keywords from \"rational point points conic quadratic form number field\" to \"rational point points conic quadratic form number field sd35\".",
    "created_at": "2011-12-15T21:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110511",
    "user": "mstreng"
}
```

Changing keywords from "rational point points conic quadratic form number field" to "rational point points conic quadratic form number field sd35".



---

archive/issue_comments_110512.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-16T20:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110512",
    "user": "cremona"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_110513.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-22T13:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10568#issuecomment-110513",
    "user": "jdemeyer"
}
```

Resolution: fixed
