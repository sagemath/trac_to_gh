# Issue 10568: Make Conic class able to find points over number fields

Issue created by migration from https://trac.sagemath.org/ticket/10621

Original creator: mstreng

Original creation time: 2011-01-13 14:15:44

Assignee: mhampton

CC:  mstreng

Keywords: rational point points conic quadratic form number field

The patch at #727 is very big and most of it does not need #9334, so I will move all number field functionality here.

Requires #727, #2329, #9334


---

Attachment

Requires #727, #2329, #9334. Then apply trac_10621_conics_over_number_fields.patch


---

Comment by mstreng created at 2011-01-13 15:02:53

Changing status from new to needs_work.


---

Comment by mstreng created at 2011-01-24 11:53:34

Changing component from geometry to number fields.


---

Comment by mstreng created at 2011-02-06 13:02:23

apply trac_10621_conics_number_fields.patch only


---

Comment by mstreng created at 2011-02-06 13:07:55

Changing status from needs_work to needs_review.


---

Attachment

Moved methods for local solubility to #10742, so this ticket now only depends on #727, #2329


---

Comment by mstreng created at 2011-06-09 15:02:34

See also #11455, which extends this ticket.


---

Comment by mstreng created at 2011-08-18 12:48:18

Apply to Sage 4.7 or higher (or see above for the dependencies).

Please review, a student will need #11455 in September.


---

Comment by cremona created at 2011-12-15 16:49:24

Sorry I didn't make the September deadline...

Looks basically good, but I get some doctest failures after applying (successfully) to 4.8.alpha4:

```
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_rational_field.py # 1 doctests failed
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_field.py # 2 doctests failed
	sage -t -long devel/sage-main/sage/schemes/plane_conics/con_number_field.py # 6 doctests failed
```

Mostly they are this:

```
     File "/home/jec/sage-4.8.alpha4/local/lib/python/site-packages/sage/schemes/plane_conics/con_number_field.py", line 249, in has_rational_point
        pt = self.point(T*vector([KtoB(isnorm[1][0]),
    NameError: global name 'vector' is not defined
```

and also there is this:

```
File "/home/jec/sage-4.8.alpha4/devel/sage-main/sage/schemes/plane_conics/con_number_field.py", line 290:
    sage: f = (2*O).factor(); f
Expected:
    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))
Got:
    (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (a^2 - 2*a + 3))
```

which is of course trivial, and probably due to a Pari change in the interim. 

Fix these and I'll give it a positive review!


---

Comment by cremona created at 2011-12-15 16:49:24

Changing status from needs_review to needs_work.


---

Comment by mstreng created at 2011-12-15 21:03:40

a few fixes compared to the previous file, apply only this one


---

Attachment

apply 10621_conics_number_fields.patch only


---

Comment by mstreng created at 2011-12-15 21:14:14

Changing status from needs_work to needs_review.


---

Comment by mstreng created at 2011-12-15 21:14:14

Changes (to `con_number_field.py` only):

```
> +            from sage.modules.free_module_element import vector

< +            sage: f = (2*O).factor(); f
< +            (Fractional ideal (-a^2 - a + 1)) * (Fractional ideal (-a^2 + 2*a - 3))
> +            sage: f = (2*O).factor()
```



---

Comment by mstreng created at 2011-12-15 21:14:14

Changing keywords from "rational point points conic quadratic form number field" to "rational point points conic quadratic form number field sd35".


---

Comment by cremona created at 2011-12-16 20:44:48

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-22 13:06:01

Resolution: fixed
