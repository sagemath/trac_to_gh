# Issue 21543: Implements change_ring() for Polynomial Sequence

archive/issues_021543.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/21780\n\n",
    "created_at": "2016-10-28T23:19:55Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Implements change_ring() for Polynomial Sequence",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21543",
    "user": "@rusydi"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/21780





---

archive/issue_comments_299064.json:
```json
{
    "body": "Changing keywords from \"\" to \"PolynomialSequence\".",
    "created_at": "2016-10-29T21:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299064",
    "user": "@rusydi"
}
```

Changing keywords from "" to "PolynomialSequence".



---

archive/issue_comments_299065.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-10-29T21:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299065",
    "user": "@rusydi"
}
```

New commits:



---

archive/issue_comments_299066.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-10-29T21:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299066",
    "user": "@rusydi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_299067.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-29T21:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299067",
    "user": "@rusydi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299068.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to commutative algebra.",
    "created_at": "2016-10-29T21:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299068",
    "user": "@rusydi"
}
```

Changing component from PLEASE CHANGE to commutative algebra.



---

archive/issue_comments_299069.json:
```json
{
    "body": "Hello,\n\nYou would better follow the dosctring convention: a *short* one line summary followed by an optional description paragraph.\n\nV.",
    "created_at": "2016-10-31T14:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299069",
    "user": "@videlec"
}
```

Hello,

You would better follow the dosctring convention: a *short* one line summary followed by an optional description paragraph.

V.



---

archive/issue_comments_299070.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-31T17:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299070",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299071.json:
```json
{
    "body": "Replying to [comment:3 vdelecroix]:\n> Hello,\n> \n> You would better follow the dosctring convention: a *short* one line summary followed by an optional description paragraph.\n> \n> V.\n\nThanks Vincent, the fix has been made in the last commit.\n\nCheers,\nRusydi",
    "created_at": "2016-11-01T09:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299071",
    "user": "@rusydi"
}
```

Replying to [comment:3 vdelecroix]:
> Hello,
> 
> You would better follow the dosctring convention: a *short* one line summary followed by an optional description paragraph.
> 
> V.

Thanks Vincent, the fix has been made in the last commit.

Cheers,
Rusydi



---

archive/issue_comments_299072.json:
```json
{
    "body": "The behavior of the method does not correspond to what the documentation says. In the following example, the base ring is not isomorphic at all.\n\n```\nsage: P.<x, y, z> = GF(31)[]\nsage: F = Sequence([x*y, z])\nsage: F.change_ring(ZZ)\n[x*y, z]\nsage: F.change_ring(ZZ).universe()\nMultivariate Polynomial Ring in x, y, z over Integer Ring\n```\n\nAs this is the natural behavior for `change_ring`, I would keep it and adapt the documentation.",
    "created_at": "2016-11-01T21:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299072",
    "user": "@videlec"
}
```

The behavior of the method does not correspond to what the documentation says. In the following example, the base ring is not isomorphic at all.

```
sage: P.<x, y, z> = GF(31)[]
sage: F = Sequence([x*y, z])
sage: F.change_ring(ZZ)
[x*y, z]
sage: F.change_ring(ZZ).universe()
Multivariate Polynomial Ring in x, y, z over Integer Ring
```

As this is the natural behavior for `change_ring`, I would keep it and adapt the documentation.



---

archive/issue_comments_299073.json:
```json
{
    "body": "Replying to [comment:6 vdelecroix]:\n> The behavior of the method does not correspond to what the documentation says. In the following example, the base ring is not isomorphic at all.\n> {{{\n> sage: P.<x, y, z> = GF(31)[]\n> sage: F = Sequence([x*y, z])\n> sage: F.change_ring(ZZ)\n> [x*y, z]\n> sage: F.change_ring(ZZ).universe()\n> Multivariate Polynomial Ring in x, y, z over Integer Ring\n> }}}\n> As this is the natural behavior for `change_ring`, I would keep it and adapt the documentation.\n\nHi Vincent,\n\nI see your point. I initially wrote the documentation by referring to the documentation of `change_ring()` in `MPolynomialRing_generic` class\n\n```\nsage: P.<x, y, z> = ZZ[]\nsage: P.change_ring?\nDocstring:\n   Return a new multivariate polynomial ring which isomorphic to self,\n   but has a different ordering given by the parameter 'order' or\n   names given by the parameter 'names'.\n\n   INPUT:\n\n   * \"base_ring\" -- a base ring\n\n   * \"names\" -- variable names\n\n   * \"order\" -- a term order\n\n   EXAMPLES:\n\n      sage: P.<x,y,z> = PolynomialRing(GF(127),3,order='lex')\n      sage: x > y^2\n      True\n      sage: Q.<x,y,z> = P.change_ring(order='degrevlex')\n      sage: x > y^2\n      False\n```\n\nI will make the change in docstring accordingly. But in that case, should the docstring of `change_ring()` of `MPolynomialRing_generic` class must be changed too ? Do you agree ?\n\nRegards,\nRusydi",
    "created_at": "2016-11-01T22:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299073",
    "user": "@rusydi"
}
```

Replying to [comment:6 vdelecroix]:
> The behavior of the method does not correspond to what the documentation says. In the following example, the base ring is not isomorphic at all.
> {{{
> sage: P.<x, y, z> = GF(31)[]
> sage: F = Sequence([x*y, z])
> sage: F.change_ring(ZZ)
> [x*y, z]
> sage: F.change_ring(ZZ).universe()
> Multivariate Polynomial Ring in x, y, z over Integer Ring
> }}}
> As this is the natural behavior for `change_ring`, I would keep it and adapt the documentation.

Hi Vincent,

I see your point. I initially wrote the documentation by referring to the documentation of `change_ring()` in `MPolynomialRing_generic` class

```
sage: P.<x, y, z> = ZZ[]
sage: P.change_ring?
Docstring:
   Return a new multivariate polynomial ring which isomorphic to self,
   but has a different ordering given by the parameter 'order' or
   names given by the parameter 'names'.

   INPUT:

   * "base_ring" -- a base ring

   * "names" -- variable names

   * "order" -- a term order

   EXAMPLES:

      sage: P.<x,y,z> = PolynomialRing(GF(127),3,order='lex')
      sage: x > y^2
      True
      sage: Q.<x,y,z> = P.change_ring(order='degrevlex')
      sage: x > y^2
      False
```

I will make the change in docstring accordingly. But in that case, should the docstring of `change_ring()` of `MPolynomialRing_generic` class must be changed too ? Do you agree ?

Regards,
Rusydi



---

archive/issue_comments_299074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T00:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299074",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299075.json:
```json
{
    "body": "You are definitely right. It would make sense to also modify the documentation of `MPolynomialRing_generic` accordingly. Could you do it simultaneously in this ticket?\n\nIn both docstrings it would be good to say that each argument is optional. Your examples are well chosen to illustrate the behavior.\n\nNote that when `base_ring`\u00a0is not specified, then the new polynomial ring is actually isomorphic.",
    "created_at": "2016-11-02T07:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299075",
    "user": "@videlec"
}
```

You are definitely right. It would make sense to also modify the documentation of `MPolynomialRing_generic` accordingly. Could you do it simultaneously in this ticket?

In both docstrings it would be good to say that each argument is optional. Your examples are well chosen to illustrate the behavior.

Note that when `base_ring`Â is not specified, then the new polynomial ring is actually isomorphic.



---

archive/issue_comments_299076.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T10:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299076",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299077.json:
```json
{
    "body": "I just pushed some very minor corrections.\n----\nNew commits:",
    "created_at": "2016-11-02T15:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299077",
    "user": "@defeo"
}
```

I just pushed some very minor corrections.
----
New commits:



---

archive/issue_comments_299078.json:
```json
{
    "body": "Note that the behaviour of this new `change_ring` method is somewhat inconsistent with the one of ideals:\n\n\n```\nsage: A.<x,y,z> = QQ[]\nsage: I = A.ideal(x^3-x*y+z^4-1, x*z*y-9)\nsage: G = I.groebner_basis()\nsage: G.change_ring(order='lex')\n[x^4*y - x^2*y^2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]\nsage: I.change_ring(A.change_ring(order='lex'))\nIdeal (x^3 - x*y + z^4 - 1, x*y*z - 9) of Multivariate Polynomial Ring in x, y, z over Rational Field\nsage: I.change_ring(order='lex')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-7c629b59d8c9> in <module>()\n----> 1 I.change_ring(order='lex')\n\nTypeError: change_ring() got an unexpected keyword argument 'order'\n```\n\n\nIn my opinion, polynomial sequences should behave like ideals.",
    "created_at": "2016-11-02T15:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299078",
    "user": "@defeo"
}
```

Note that the behaviour of this new `change_ring` method is somewhat inconsistent with the one of ideals:


```
sage: A.<x,y,z> = QQ[]
sage: I = A.ideal(x^3-x*y+z^4-1, x*z*y-9)
sage: G = I.groebner_basis()
sage: G.change_ring(order='lex')
[x^4*y - x^2*y^2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]
sage: I.change_ring(A.change_ring(order='lex'))
Ideal (x^3 - x*y + z^4 - 1, x*y*z - 9) of Multivariate Polynomial Ring in x, y, z over Rational Field
sage: I.change_ring(order='lex')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-7c629b59d8c9> in <module>()
----> 1 I.change_ring(order='lex')

TypeError: change_ring() got an unexpected keyword argument 'order'
```


In my opinion, polynomial sequences should behave like ideals.



---

archive/issue_comments_299079.json:
```json
{
    "body": "Replying to [comment:13 defeo]:\n> Note that the behaviour of this new `change_ring` method is somewhat inconsistent with the one of ideals:\n> \n> {{{\n> sage: A.<x,y,z> = QQ[]\n> sage: I = A.ideal(x<sup>3-x*y+z</sup>4-1, x*z*y-9)\n> sage: G = I.groebner_basis()\n> sage: G.change_ring(order='lex')\n> [x^4*y - x<sup>2*y</sup>2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]\n> sage: I.change_ring(A.change_ring(order='lex'))\n> Ideal (x^3 - x*y + z^4 - 1, x*y*z - 9) of Multivariate Polynomial Ring in x, y, z over Rational Field\n> sage: I.change_ring(order='lex')\n> ---------------------------------------------------------------------------\n> TypeError                                 Traceback (most recent call last)\n> <ipython-input-6-7c629b59d8c9> in <module>()\n> ----> 1 I.change_ring(order='lex')\n> \n> TypeError: change_ring() got an unexpected keyword argument 'order'\n> }}}\n> \n> In my opinion, polynomial sequences should behave like ideals.\n\n\nI feel this behaviour of `change_ring()` in Ideal, which takes a ring as input, is too restrictive. The main purpose of calling `change_ring()` in `PolynomialSequence()` using optional arguments is to simplify how users can modify a set of polynomials. There should not be any need to explicitly construct a new ring when one only wants to change, say, the term ordering while keeping the rest (variable names and base ring).",
    "created_at": "2016-11-02T16:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299079",
    "user": "@rusydi"
}
```

Replying to [comment:13 defeo]:
> Note that the behaviour of this new `change_ring` method is somewhat inconsistent with the one of ideals:
> 
> {{{
> sage: A.<x,y,z> = QQ[]
> sage: I = A.ideal(x<sup>3-x*y+z</sup>4-1, x*z*y-9)
> sage: G = I.groebner_basis()
> sage: G.change_ring(order='lex')
> [x^4*y - x<sup>2*y</sup>2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]
> sage: I.change_ring(A.change_ring(order='lex'))
> Ideal (x^3 - x*y + z^4 - 1, x*y*z - 9) of Multivariate Polynomial Ring in x, y, z over Rational Field
> sage: I.change_ring(order='lex')
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-6-7c629b59d8c9> in <module>()
> ----> 1 I.change_ring(order='lex')
> 
> TypeError: change_ring() got an unexpected keyword argument 'order'
> }}}
> 
> In my opinion, polynomial sequences should behave like ideals.


I feel this behaviour of `change_ring()` in Ideal, which takes a ring as input, is too restrictive. The main purpose of calling `change_ring()` in `PolynomialSequence()` using optional arguments is to simplify how users can modify a set of polynomials. There should not be any need to explicitly construct a new ring when one only wants to change, say, the term ordering while keeping the rest (variable names and base ring).



---

archive/issue_comments_299080.json:
```json
{
    "body": "I'm not saying that ideals do the right thing, I'm just saying that we want the interfaces to be consistent. Think of a user who already knows how to change the ordering of ideals, and discovers this new `.change_ring` method on polynomial sequences. She might tempted to do\n\n\n```\nsage: A.<x,y,z> = QQ[]\nsage: I = A.ideal(x^3-x*y+z^4-1, x*z*y-9)\nsage: G = I.groebner_basis()\nsage: H = G.change_ring(A.change_ring(order='lex'))\nsage: H\n[x^4*y - x^2*y^2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]\nsage: H.ring()\nMultivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in x, y, z over Rational Field\n```\n\n\nOops!\n\nI don't know why `MPolynomialIdeal.change_ring` was designed this way. We may think of changing it, however this would require a deprecation process.\n\nIn my opinion `change_ring` is a misnomer in the first place. It would have been much less error prone to have methods `change_order` and `change_names`, then we would have had no ambiguity on what these methods do.\n\nIt might be worth asking on sage-devel what other developers involved in multivariate polynomial rings think of this.",
    "created_at": "2016-11-02T17:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299080",
    "user": "@defeo"
}
```

I'm not saying that ideals do the right thing, I'm just saying that we want the interfaces to be consistent. Think of a user who already knows how to change the ordering of ideals, and discovers this new `.change_ring` method on polynomial sequences. She might tempted to do


```
sage: A.<x,y,z> = QQ[]
sage: I = A.ideal(x^3-x*y+z^4-1, x*z*y-9)
sage: G = I.groebner_basis()
sage: H = G.change_ring(A.change_ring(order='lex'))
sage: H
[x^4*y - x^2*y^2 - x*y + 9*z^3, x^3 - x*y + z^4 - 1, x*y*z - 9]
sage: H.ring()
Multivariate Polynomial Ring in x, y, z over Multivariate Polynomial Ring in x, y, z over Rational Field
```


Oops!

I don't know why `MPolynomialIdeal.change_ring` was designed this way. We may think of changing it, however this would require a deprecation process.

In my opinion `change_ring` is a misnomer in the first place. It would have been much less error prone to have methods `change_order` and `change_names`, then we would have had no ambiguity on what these methods do.

It might be worth asking on sage-devel what other developers involved in multivariate polynomial rings think of this.



---

archive/issue_comments_299081.json:
```json
{
    "body": "Yeah, I got your point about consistency issue. I have sent an email to sage-devel. Lets see what others opinion about it. Btw, thanks alot for pointing out this issue! Otherwise, it might go unnoticed :-)\n\nCheers.\nRusydi",
    "created_at": "2016-11-03T19:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299081",
    "user": "@rusydi"
}
```

Yeah, I got your point about consistency issue. I have sent an email to sage-devel. Lets see what others opinion about it. Btw, thanks alot for pointing out this issue! Otherwise, it might go unnoticed :-)

Cheers.
Rusydi



---

archive/issue_comments_299082.json:
```json
{
    "body": "\n```\nHello,\n\nIdeals are not restricted to polynomial rings (e.g. order in number\nfields). Hence \"change_ring\" in that case should be generic enough.\n\nFor me,\n * it would be better to have \"change_ring\" consistent everywhere\n(possibly using *args and/or **kwds)\n * if not possible, it would be better to have consistency of\n\"change_ring\" for Polynomial, MPolynomial and PolynomialSequence\nrather than with ideal\n\nVincent\n```\n\n\nFrom Vincent's reply, I dont see any need to make this implementation to be consistent with Ideal. But I have to disagree with his second suggestion because the method `change_ring()` in `Polynomial` and `MPolynomial` has different purpose than I originally intended for `PolynomialSequence`. From the documentation, `change_ring()` in Polynomial and MPolynomial only changes the coefficients. This essentially only change the base ring. So, I don't think this is a good reason to make change_ring() consistent with the one implemented for Polynomial and MPolynomial.\n\nSo since `PolynomialSequence` is not as generic as `Ideal` and also with the reason that I mentioned above, I would suggest to keep the patch in this ticket as it is for the moment.\n\nRegards,",
    "created_at": "2016-11-04T10:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299082",
    "user": "@rusydi"
}
```


```
Hello,

Ideals are not restricted to polynomial rings (e.g. order in number
fields). Hence "change_ring" in that case should be generic enough.

For me,
 * it would be better to have "change_ring" consistent everywhere
(possibly using *args and/or **kwds)
 * if not possible, it would be better to have consistency of
"change_ring" for Polynomial, MPolynomial and PolynomialSequence
rather than with ideal

Vincent
```


From Vincent's reply, I dont see any need to make this implementation to be consistent with Ideal. But I have to disagree with his second suggestion because the method `change_ring()` in `Polynomial` and `MPolynomial` has different purpose than I originally intended for `PolynomialSequence`. From the documentation, `change_ring()` in Polynomial and MPolynomial only changes the coefficients. This essentially only change the base ring. So, I don't think this is a good reason to make change_ring() consistent with the one implemented for Polynomial and MPolynomial.

So since `PolynomialSequence` is not as generic as `Ideal` and also with the reason that I mentioned above, I would suggest to keep the patch in this ticket as it is for the moment.

Regards,



---

archive/issue_comments_299083.json:
```json
{
    "body": "So, to summarize, there are two different concepts that are called //\"changing ring\"// in Sage:\n\n- Changing the **coefficient** ring (or, more generally, //base ring// in Sage jargon),\n- Changing the **ambient** ring.\n\nDepending on the object, the method `change_ring()` does one or the other. I know by experience that this causes a lot of confusion to students. In my opinion it would have been better to have two different and more explicit names (e.g., `change_base_ring()` and `change_parent_ring()`)\n\nFor **univariate** and **multivariate polynomials** `change_ring()` changes the coefficient ring. Changing the ambient ring is easily done by changing parent:\n\n\n```\nsage: A.<X> = QQ[]\nsage: X.change_ring(RR).parent()\nUnivariate Polynomial Ring in X over Real Field with 53 bits of precision\nsage: B = QQ['X,Y']\nsage: B(X).parent()\nMultivariate Polynomial Ring in X, Y over Rational Field\n```\n\n\nFor **ideals of multivariate polynomials** `change_ring()` changes the ambient ring. This can be used to change the coefficient ring too:\n\n\n```\nsage: A.<X,Y> = QQ[]\nsage: I = A.ideal(X)\nsage: B = QQ['X,Y,Z']\nsage: I.change_ring(B).ring()\nMultivariate Polynomial Ring in X, Y, Z over Rational Field\nsage: C = RR['X,Y']\nsage: I.change_ring(C).ring()\nMultivariate Polynomial Ring in X, Y over Real Field with 53 bits of precision\n```\n\n\n**Ideals of univariate polynomials** have no `change_ring()` method.\n\nPolynomial sequences are similar to ideals in the fact that **their parent is not the ring**:\n\n\n```\nsage: A.<X,Y> = QQ[]\nsage: S = Sequence([X,X^2])\nsage: I = S.ideal()\nsage: S.parent()\n<class 'sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic'>\nsage: I.parent()\nMonoid of ideals of Multivariate Polynomial Ring in X, Y over Rational Field\nsage: S.ring()\nMultivariate Polynomial Ring in X, Y over Rational Field\nsage: I.ring()\nMultivariate Polynomial Ring in X, Y over Rational Field\n```\n\n\nSo we cannot use coercion to change their ambient ring. However polynomial sequences are different from ideals in that they're not an algebraic structure per se; in this respect they are more similar to polynomials.\n\nIf we want to be consistent with Vincent's proposal, we should make polynomial sequences behave as much as possible like polynomials. To that extent:\n\n- the `parent()` of a polynomial sequence should be the ring,\n- `change_ring()` should change the **coefficient ring**.\n\nNote that in this case the only way to change the **ambient ring** would be a list comprehension, or something similar.\n\nIf we want to be consistent with my proposal, we should make polynomial sequences behave as much as possible like ideals. To that extent:\n\n- `parent()` will stay not well defined,\n- `change_ring()` should change the **ambient ring**.\n\nThe **coefficient** ring could then be changed via `change_ring()`, like for ideals.\n\nI say \"Vincent's\" and \"my\" proposal, but I'm actually quite undecided myself. I would like if more devs stepped up and gave strong arguments for one or the other. There might also be other objects to keep into account, and inconsistencies I haven't thought of.\n\nIn the end, I think my preferred solution would be to deprecate `change_ring()`, and have two methods with more explicit names. This requires even more consensus, however.\n\nP.S.: Sorry for delaying your ticket, `@`ruhm. It looks like you opened a can of worms :)",
    "created_at": "2016-11-09T12:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299083",
    "user": "@defeo"
}
```

So, to summarize, there are two different concepts that are called //"changing ring"// in Sage:

- Changing the **coefficient** ring (or, more generally, //base ring// in Sage jargon),
- Changing the **ambient** ring.

Depending on the object, the method `change_ring()` does one or the other. I know by experience that this causes a lot of confusion to students. In my opinion it would have been better to have two different and more explicit names (e.g., `change_base_ring()` and `change_parent_ring()`)

For **univariate** and **multivariate polynomials** `change_ring()` changes the coefficient ring. Changing the ambient ring is easily done by changing parent:


```
sage: A.<X> = QQ[]
sage: X.change_ring(RR).parent()
Univariate Polynomial Ring in X over Real Field with 53 bits of precision
sage: B = QQ['X,Y']
sage: B(X).parent()
Multivariate Polynomial Ring in X, Y over Rational Field
```


For **ideals of multivariate polynomials** `change_ring()` changes the ambient ring. This can be used to change the coefficient ring too:


```
sage: A.<X,Y> = QQ[]
sage: I = A.ideal(X)
sage: B = QQ['X,Y,Z']
sage: I.change_ring(B).ring()
Multivariate Polynomial Ring in X, Y, Z over Rational Field
sage: C = RR['X,Y']
sage: I.change_ring(C).ring()
Multivariate Polynomial Ring in X, Y over Real Field with 53 bits of precision
```


**Ideals of univariate polynomials** have no `change_ring()` method.

Polynomial sequences are similar to ideals in the fact that **their parent is not the ring**:


```
sage: A.<X,Y> = QQ[]
sage: S = Sequence([X,X^2])
sage: I = S.ideal()
sage: S.parent()
<class 'sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic'>
sage: I.parent()
Monoid of ideals of Multivariate Polynomial Ring in X, Y over Rational Field
sage: S.ring()
Multivariate Polynomial Ring in X, Y over Rational Field
sage: I.ring()
Multivariate Polynomial Ring in X, Y over Rational Field
```


So we cannot use coercion to change their ambient ring. However polynomial sequences are different from ideals in that they're not an algebraic structure per se; in this respect they are more similar to polynomials.

If we want to be consistent with Vincent's proposal, we should make polynomial sequences behave as much as possible like polynomials. To that extent:

- the `parent()` of a polynomial sequence should be the ring,
- `change_ring()` should change the **coefficient ring**.

Note that in this case the only way to change the **ambient ring** would be a list comprehension, or something similar.

If we want to be consistent with my proposal, we should make polynomial sequences behave as much as possible like ideals. To that extent:

- `parent()` will stay not well defined,
- `change_ring()` should change the **ambient ring**.

The **coefficient** ring could then be changed via `change_ring()`, like for ideals.

I say "Vincent's" and "my" proposal, but I'm actually quite undecided myself. I would like if more devs stepped up and gave strong arguments for one or the other. There might also be other objects to keep into account, and inconsistencies I haven't thought of.

In the end, I think my preferred solution would be to deprecate `change_ring()`, and have two methods with more explicit names. This requires even more consensus, however.

P.S.: Sorry for delaying your ticket, `@`ruhm. It looks like you opened a can of worms :)



---

archive/issue_comments_299084.json:
```json
{
    "body": "The branch doesn't merge cleanly.",
    "created_at": "2019-07-26T07:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299084",
    "user": "@simon-king-jena"
}
```

The branch doesn't merge cleanly.



---

archive/issue_comments_299085.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-26T07:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21543#issuecomment-299085",
    "user": "@simon-king-jena"
}
```

Changing status from needs_review to needs_work.
