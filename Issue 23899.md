# Issue 23899: py3: fix pickling of integers

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-10-31 16:10:03

CC:  jdemeyer embray

namely fix make_integer and _reduce_set in integer.pyx

in python3-build sage:

```
sage: make_integer(b'-29')
-73
sage: make_integer(73.str(32))
Traceback (most recent call last)
<ipython-input-33-d2fb0cccba3c> in <module>()
----> 1 make_integer(Integer(73).str(Integer(32)))

/home/chapoton/sage3/src/sage/rings/integer.pyx in sage.rings.integer.make_integer (build/cythonized/sage/rings/integer.c:43646)()

/home/chapoton/sage3/src/sage/rings/integer.pyx in sage.rings.integer.Integer._reduce_set (build/cythonized/sage/rings/integer.c:6857)()

TypeError: expected bytes, str found
```



---

Comment by chapoton created at 2017-10-31 20:27:36

Changing keywords from "" to "unicode".


---

Comment by chapoton created at 2017-11-04 08:43:36

This is closely related to #23812


---

Comment by embray created at 2017-11-16 10:28:27

Cool, I'll address this.  I'm going to post a big ticket full of string fixes soon.


---

Comment by embray created at 2017-11-16 10:28:27

Set assignee to embray.


---

Comment by chapoton created at 2018-01-12 13:51:31

Has this been adressed elsehwere, Erik ?


---

Comment by chapoton created at 2018-01-12 13:51:31

Changing status from new to needs_review.


---

Comment by embray created at 2018-01-19 10:25:17

I actually haven't.  Let's keep this ticket open and I'll use it to place string-related fixes for sage.rings.integer.


---

Comment by embray created at 2018-01-19 10:25:17

Changing status from needs_review to needs_work.


---

Comment by embray created at 2018-01-19 15:42:45

This was a small change, so I folded into #24223.  Once that's closed this can be closed as fixed.


---

Comment by chapoton created at 2018-02-10 07:16:57

so please close this one now


---

Comment by chapoton created at 2018-02-10 07:17:05

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2018-02-10 11:33:59

Resolution: duplicate
