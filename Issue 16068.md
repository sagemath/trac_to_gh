# Issue 16068: sage-env must wait longer before setting MPLCONFIGDIR

archive/issues_016068.json:
```json
{
    "body": "CC:  @jhpalmieri @nexttime\n\nWhen the environment variable `MPLCONFIGDIR` is set by `sage-env`, other important bits of initialisation on which it depends has not been done yet; see comment:17:ticket:15901 and follow-up comments.  We should move this part of `sage-env` further down.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16305\n\n",
    "created_at": "2014-05-07T21:04:18Z",
    "labels": [
        "component: distribution",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "sage-env must wait longer before setting MPLCONFIGDIR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16068",
    "user": "https://github.com/pjbruin"
}
```
CC:  @jhpalmieri @nexttime

When the environment variable `MPLCONFIGDIR` is set by `sage-env`, other important bits of initialisation on which it depends has not been done yet; see comment:17:ticket:15901 and follow-up comments.  We should move this part of `sage-env` further down.

Issue created by migration from https://trac.sagemath.org/ticket/16305





---

archive/issue_comments_208954.json:
```json
{
    "body": "Should we just move the `MPLCONFIGDIR` part to the very end?  This solves the problem for me.",
    "created_at": "2014-05-07T21:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208954",
    "user": "https://github.com/pjbruin"
}
```

Should we just move the `MPLCONFIGDIR` part to the very end?  This solves the problem for me.



---

archive/issue_comments_208955.json:
```json
{
    "body": "I'd just swap the parts I've cited; first set `LD_LIBRARY_PATH`, then `MPLCONFIGDIR`.",
    "created_at": "2014-05-07T21:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208955",
    "user": "https://github.com/nexttime"
}
```

I'd just swap the parts I've cited; first set `LD_LIBRARY_PATH`, then `MPLCONFIGDIR`.



---

archive/issue_comments_208956.json:
```json
{
    "body": "(plus the Darwin stuff)",
    "created_at": "2014-05-07T21:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208956",
    "user": "https://github.com/nexttime"
}
```

(plus the Darwin stuff)



---

archive/issue_comments_208957.json:
```json
{
    "body": "OK, that also solves the problem for me.",
    "created_at": "2014-05-07T21:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208957",
    "user": "https://github.com/pjbruin"
}
```

OK, that also solves the problem for me.



---

archive/issue_comments_208958.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-07T21:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208958",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208959.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-07T22:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208959",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_208960.json:
```json
{
    "body": "WFM2.",
    "created_at": "2014-05-07T22:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208960",
    "user": "https://github.com/nexttime"
}
```

WFM2.



---

archive/issue_comments_208961.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-08T11:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-208961",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_015634.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-08T11:50:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16068#event-15634"
}
```
