# Issue 15764: Make the tensor functorial construction work for crystals

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2014-03-23 19:47:51

Assignee: sage-combinat

CC:  sage-combinat nthiery aschilling bsalisbury1

Keywords: tensor products construction

So we don't have to use `TensorProductOfCrystals` (or with #15882 `crystals.TensorProduct`).

```
sage: B = CrystalOfTableaux(['A',2], shape=[2,1])
sage: tensor([B, B]) # currently doesn't work
```



---

Comment by tscrim created at 2014-03-23 20:41:32

New commits:


---

Comment by tscrim created at 2014-03-23 20:41:32

Changing status from new to needs_review.


---

Comment by nthiery created at 2014-03-24 08:28:36

Hi Travis!

Thanks for the feature, we want it!

I know the math tradition of calling this a tensor, and see the point of being kind to the user there, but it's still an abuse: in term of functorial construction, it's a cartesian product and I believe it should really be *implemented* as such for consistency with the rest of the infrastructure. For example, this would have the following desirable consequences:

- Inheriting features from cartesian products (counting, enumeration, ...)
- When we will start working more intensively on the linear span of cristals, the tensor product thereof will call the cartesian product on the basis, not the tensor product, so you would not get the crystal structure on the basis
- For someone not knowing crystals, that's more informative
- ...

Also we might want some day to endow a vector space with a crystal structure, in which case there would be an ambiguity about the meaning of the tensor product. But I don't have a serious use case.

So, to accomodate the user, it's probably possible to introduce a little trick so that calling `tensor` on a bunch of crystals automatically builds their cartesian product.

Cheers,

                                    Nicolas

PS: It's not exactly the same situation, but it's a bit like direct sums of vector spaces that are actually implemented as what they are in terms of construction on sets, namely cartesian products.


---

Comment by tscrim created at 2014-03-24 16:58:27

This is an attempt at me doing category theory with Lang's _Algebra_ in front of me, so I hope it's not too far off.

I don't think this is a (Cartesian) product (in the category of crystals) since there are not natural projection maps (crystal morphisms) onto the factors as the weight/epsilons/phis are not preserved. In the category of crystals, I believe "multi-linearity" is defined by the tensor product rule, so it is a tensor product.

For vector spaces, the direct sum does correspond to the category theoretic product. So when we want to consider this as a basis indexing _set_ for a free module and take a tensor product of those modules, we will want to consider the product, but only after applying the forgetful functor to the crystal. I think we'd want to do this in other situations where we have a concrete category that doesn't have a product.

However I think the situation is a bit different as a U<sub>q</sub>(*g*)-module in category _O_ when we want to use the crystal structure to construct the canonical basis. I'm currently doing this in #14901. Although I will need to override the tensor product construction to pass to the corresponding tensor product of crystals in order to use that structure.

Now onto code. I do agree it would be nice to have `TensorProdutOfCrystals` inherit from Cartesian products when thought of as sets, but I think there would only be three methods that we'd need to duplicate (`__iter__()`, `__contains__()`, and `cardinality()`). Unless you can think of others? Maybe we should keep the class of `CartesianProduct` (of sets) around as a way to inherit these features?

Please correct me if I'm wrong on any of the above.

Best,

Travis


---

Comment by git created at 2014-04-16 14:24:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-16 18:23:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-25 13:56:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bsalisbury1 created at 2014-09-25 15:41:17

Changing status from needs_review to positive_review.


---

Comment by bsalisbury1 created at 2014-09-25 15:41:17

Looks good!  Thanks, Travis.


---

Comment by aschilling created at 2014-09-25 16:04:06

There seem to be misspellings and broken links!

:class:`RiggedConfiguraitons`


---

Comment by aschilling created at 2014-09-25 16:04:26

Changing status from positive_review to needs_work.


---

Comment by bsalisbury1 created at 2014-09-25 16:15:18

Good catch!  Each :class:`RiggedConfiguraitons` should be replaced with :class:`RiggedConfigurations`.


---

Comment by aschilling created at 2014-09-25 16:32:26

Also, there is a test in the new code

```
   sage: C = crystals.Letters(['A', 3])
   sage: B = crystals.infinity.Tableaux(['A',2])
   sage: T = C.tensor(C, B); T
```

What does it mean to take tensor products of crystals of different Cartan type? The documentation of crystals.TensorProduct explicitly says that the Cartan type needs to be the same!


---

Comment by git created at 2014-09-25 16:45:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-09-25 16:47:37

Documentation is fixed.

Replying to [comment:13 aschilling]:
> Also, there is a test in the new code
> {{{
>    sage: C = crystals.Letters(['A', 3])
>    sage: B = crystals.infinity.Tableaux(['A',2])
>    sage: T = C.tensor(C, B); T
> }}}
> What does it mean to take tensor products of crystals of different Cartan type? The documentation of crystals.TensorProduct explicitly says that the Cartan type needs to be the same!

I've added a test to explicitly check this in the constructor (for such a quick and important test, it's somewhat surprising it wasn't there beforehand). I've also changed that specific test to have the same Cartan type.


---

Comment by tscrim created at 2014-09-25 16:47:37

Changing status from needs_work to needs_review.


---

Comment by aschilling created at 2014-09-25 18:22:33

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-09-27 12:57:10

Resolution: fixed
