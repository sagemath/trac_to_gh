# Issue 16324: Derivations for function fields

archive/issues_016324.json:
```json
{
    "body": "Keywords: sd59\n\nThis ticket implements derivations for extensions of function fields.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16561\n\n",
    "created_at": "2014-06-27T03:03:26Z",
    "labels": [
        "commutative algebra",
        "minor",
        "enhancement"
    ],
    "title": "Derivations for function fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16324",
    "user": "saraedum"
}
```
Keywords: sd59

This ticket implements derivations for extensions of function fields.

Issue created by migration from https://trac.sagemath.org/ticket/16561





---

archive/issue_comments_213858.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-06-27T05:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213858",
    "user": "saraedum"
}
```

New commits:



---

archive/issue_comments_213859.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-27T05:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213859",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213860.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-27T05:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213860",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_213861.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-23T17:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213861",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213862.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-30T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213862",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213863.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-15T07:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213863",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-15T07:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213864",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213865.json:
```json
{
    "body": "Hello Julian,\n\nIt seems that the only derivation you are testing is `y^2 - x`. I have nothing against the square root but it would be cool to have a bit more diversity in the doctests. And it would be cool to have somewhere non trivial examples of\n\n```\nsage: d(p+q) == d(p) + d(q)\nTrue\nsage: d(p*q) == d(p)*q + p*d(q)\nTrue\n```\n\n\nIn the `ALGORITHM` block, I would rather use `formula` instead of `algorithm`. And you mentioned the non-separable case that this ticket is not about.\n\nBeyond documentation, everything looks good to me.\n\nVincent",
    "created_at": "2015-08-16T10:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213865",
    "user": "vdelecroix"
}
```

Hello Julian,

It seems that the only derivation you are testing is `y^2 - x`. I have nothing against the square root but it would be cool to have a bit more diversity in the doctests. And it would be cool to have somewhere non trivial examples of

```
sage: d(p+q) == d(p) + d(q)
True
sage: d(p*q) == d(p)*q + p*d(q)
True
```


In the `ALGORITHM` block, I would rather use `formula` instead of `algorithm`. And you mentioned the non-separable case that this ticket is not about.

Beyond documentation, everything looks good to me.

Vincent



---

archive/issue_comments_213866.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-16T10:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213866",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213867.json:
```json
{
    "body": "Thanks for the comments. I will try to make some changes.",
    "created_at": "2015-08-16T14:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213867",
    "user": "saraedum"
}
```

Thanks for the comments. I will try to make some changes.



---

archive/issue_comments_213868.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-16T22:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213868",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213869.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-16T22:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213869",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213870.json:
```json
{
    "body": "`CartesianProduct` is likely to be deprecated (#15425 and #18411). If you want to iterate over the pairs you would better use `product` from itertools as\n\n```\nsage: from itertools import product\nsage: for pair in product(S, repeat=2):\n....:     # do what you want\n```\n",
    "created_at": "2015-08-17T13:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213870",
    "user": "vdelecroix"
}
```

`CartesianProduct` is likely to be deprecated (#15425 and #18411). If you want to iterate over the pairs you would better use `product` from itertools as

```
sage: from itertools import product
sage: for pair in product(S, repeat=2):
....:     # do what you want
```




---

archive/issue_comments_213871.json:
```json
{
    "body": "Now that #18411, it definitely needs to be done.",
    "created_at": "2015-11-28T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213871",
    "user": "vdelecroix"
}
```

Now that #18411, it definitely needs to be done.



---

archive/issue_comments_213872.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-28T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213872",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213873.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-13T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213873",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-13T14:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213874",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213875.json:
```json
{
    "body": "New commits:\n----\nNew commits:",
    "created_at": "2016-11-13T14:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213875",
    "user": "saraedum"
}
```

New commits:
----
New commits:



---

archive/issue_comments_213876.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-13T14:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213876",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213877.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-24T14:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213877",
    "user": "klee"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213878.json:
```json
{
    "body": "Apply failed.",
    "created_at": "2016-12-24T14:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213878",
    "user": "klee"
}
```

Apply failed.



---

archive/issue_comments_213879.json:
```json
{
    "body": "I just fixed merge conflict with the current beta. A few comments\n\n- In `function_field.py`:\n\n```\nIt is also possible to work with function fields over an imperfect base field::\n\n    sage: N.<u> = FunctionField(K)\n```\n\nIs `K` imperfect here? Isn't it a finite field?\n- In `derivation` method:\n\n```\n        The general inseparable case is not implemented yet (see :trac:`16562`,\n        :trac:`16564`.)`\n```\n\nA comment like this is better to be removed as it can soon become false (because of you :-)\n----\nNew commits:",
    "created_at": "2016-12-25T21:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213879",
    "user": "klee"
}
```

I just fixed merge conflict with the current beta. A few comments

- In `function_field.py`:

```
It is also possible to work with function fields over an imperfect base field::

    sage: N.<u> = FunctionField(K)
```

Is `K` imperfect here? Isn't it a finite field?
- In `derivation` method:

```
        The general inseparable case is not implemented yet (see :trac:`16562`,
        :trac:`16564`.)`
```

A comment like this is better to be removed as it can soon become false (because of you :-)
----
New commits:



---

archive/issue_comments_213880.json:
```json
{
    "body": "Replying to [comment:22 klee]:\n> I just fixed merge conflict with the current beta. A few comments\n> \n> - In `function_field.py`:\n> {{{\n> It is also possible to work with function fields over an imperfect base field::\n> \n>     sage: N.<u> = FunctionField(K)\n> }}}\n> Is `K` imperfect here? Isn't it a finite field?\nNo, `K` is a function field.\n\n> - In `derivation` method:\n> {{{\n>         The general inseparable case is not implemented yet (see :trac:`16562`,\n>         :trac:`16564`.)`\n> }}}\n> A comment like this is better to be removed as it can soon become false (because of you :-)\nMy experience with this has been that there is virtually no movement in function fields in Sage. So, I'd like to point people to places where they can help if they'd like.\n----\nNew commits:",
    "created_at": "2017-01-27T21:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213880",
    "user": "saraedum"
}
```

Replying to [comment:22 klee]:
> I just fixed merge conflict with the current beta. A few comments
> 
> - In `function_field.py`:
> {{{
> It is also possible to work with function fields over an imperfect base field::
> 
>     sage: N.<u> = FunctionField(K)
> }}}
> Is `K` imperfect here? Isn't it a finite field?
No, `K` is a function field.

> - In `derivation` method:
> {{{
>         The general inseparable case is not implemented yet (see :trac:`16562`,
>         :trac:`16564`.)`
> }}}
> A comment like this is better to be removed as it can soon become false (because of you :-)
My experience with this has been that there is virtually no movement in function fields in Sage. So, I'd like to point people to places where they can help if they'd like.
----
New commits:



---

archive/issue_comments_213881.json:
```json
{
    "body": "I can of course remove the ticket references if you have strong feelings about it.",
    "created_at": "2017-01-27T21:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213881",
    "user": "saraedum"
}
```

I can of course remove the ticket references if you have strong feelings about it.



---

archive/issue_comments_213882.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-27T21:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213882",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213883.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-27T21:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213883",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213884.json:
```json
{
    "body": "Some comments:\n\n`derivation` method: The return value is a derivation uniquely determined from the derivation of the base rational function field that maps x to 1. How about simply saying the return value is a derivation, rather than a generator of the space of derivations or endofunction (in `OUPUT` block). The term generator has a programming meaning in Sage and endofunction is obscure.\n\nREFERENCES block: We now have a master bibliography file. See \n\nhttp://doc.sagemath.org/html/en/developer/coding_basics.html#sage-s-master-bibliography-file",
    "created_at": "2017-01-30T09:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213884",
    "user": "klee"
}
```

Some comments:

`derivation` method: The return value is a derivation uniquely determined from the derivation of the base rational function field that maps x to 1. How about simply saying the return value is a derivation, rather than a generator of the space of derivations or endofunction (in `OUPUT` block). The term generator has a programming meaning in Sage and endofunction is obscure.

REFERENCES block: We now have a master bibliography file. See 

http://doc.sagemath.org/html/en/developer/coding_basics.html#sage-s-master-bibliography-file



---

archive/issue_comments_213885.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-30T09:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213885",
    "user": "klee"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213886.json:
```json
{
    "body": "Replying to [comment:24 saraedum]:\n> My experience with this has been that there is virtually no movement in function fields in Sage. So, I'd like to point people to places where they can help if they'd like.\n\nOk. I agree that function fields part of Sage needs much attention. I had been forced to move to Magma because of this at some point and was surprised when I returned to Sage to find that there was not much changed in that situation :-(",
    "created_at": "2017-01-30T09:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213886",
    "user": "klee"
}
```

Replying to [comment:24 saraedum]:
> My experience with this has been that there is virtually no movement in function fields in Sage. So, I'd like to point people to places where they can help if they'd like.

Ok. I agree that function fields part of Sage needs much attention. I had been forced to move to Magma because of this at some point and was surprised when I returned to Sage to find that there was not much changed in that situation :-(



---

archive/issue_comments_213887.json:
```json
{
    "body": "Hi Julian,\n\nI am interested in pushing this ticket. If you do not have a plan to work on this, then I could work. Would this be ok with you?",
    "created_at": "2017-03-16T10:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213887",
    "user": "klee"
}
```

Hi Julian,

I am interested in pushing this ticket. If you do not have a plan to work on this, then I could work. Would this be ok with you?



---

archive/issue_comments_213888.json:
```json
{
    "body": "Yes, hooray! Please go ahead. Let me know if you need any help :)",
    "created_at": "2017-03-16T11:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213888",
    "user": "saraedum"
}
```

Yes, hooray! Please go ahead. Let me know if you need any help :)



---

archive/issue_comments_213889.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-01T20:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213889",
    "user": "klee"
}
```

New commits:



---

archive/issue_comments_213890.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-02T04:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213890",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213891.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-04T16:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213891",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-22T15:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213892",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213893.json:
```json
{
    "body": "IMO, a better idiom for the `_test_derivative` is instead of catching the `NotImplementedError` and returning as normal would be to let it raise the error and instead explicit skip the test:\n\n```\nTestSuite(X).run(skip='_test_derivative')\n```\n",
    "created_at": "2017-05-11T15:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213893",
    "user": "tscrim"
}
```

IMO, a better idiom for the `_test_derivative` is instead of catching the `NotImplementedError` and returning as normal would be to let it raise the error and instead explicit skip the test:

```
TestSuite(X).run(skip='_test_derivative')
```




---

archive/issue_comments_213894.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T20:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213894",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213895.json:
```json
{
    "body": "I think this is good to go, so I'm setting it to a positive review. If there are any objections, feel free to set it back.",
    "created_at": "2017-05-12T13:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213895",
    "user": "tscrim"
}
```

I think this is good to go, so I'm setting it to a positive review. If there are any objections, feel free to set it back.



---

archive/issue_comments_213896.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-12T13:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213896",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213897.json:
```json
{
    "body": "I have no objection :-) Thank you!",
    "created_at": "2017-05-12T13:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213897",
    "user": "klee"
}
```

I have no objection :-) Thank you!



---

archive/issue_comments_213898.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-15T22:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16324",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16324#issuecomment-213898",
    "user": "vbraun"
}
```

Resolution: fixed
