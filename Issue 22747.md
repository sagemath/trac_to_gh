# Issue 22747: Upgrade normaliz to 3.3.0 and pynormaliz to 1.7

archive/issues_022747.json:
```json
{
    "body": "CC:  winfried tmonteil @videlec @tscrim @jplab @sebasguts\n\n... (when these versions are released)\n\nAmong other things this will make computations interruptible with `^C`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22984\n\n",
    "created_at": "2017-05-11T22:07:21Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Upgrade normaliz to 3.3.0 and pynormaliz to 1.7",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22747",
    "user": "@mkoeppe"
}
```
CC:  winfried tmonteil @videlec @tscrim @jplab @sebasguts

... (when these versions are released)

Among other things this will make computations interruptible with `^C`.

Issue created by migration from https://trac.sagemath.org/ticket/22984





---

archive/issue_comments_317694.json:
```json
{
    "body": "Tested on Mac OS X. Works well except for interrupting (may require newer pynormaliz...) and the doctest failures reported in #23586 (fixing broken pynormaliz doctests). \n----\nNew commits:",
    "created_at": "2017-08-26T23:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317694",
    "user": "@mkoeppe"
}
```

Tested on Mac OS X. Works well except for interrupting (may require newer pynormaliz...) and the doctest failures reported in #23586 (fixing broken pynormaliz doctests). 
----
New commits:



---

archive/issue_comments_317695.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-29T19:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317695",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-03-03T17:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317696",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_317697.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-03T17:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317697",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317698.json:
```json
{
    "body": "I am now getting this crash (looks like an upstream problem):\n\n```\nsage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0], [0, 0, 2, 0, -1, 0, 0, 0, 0],\n....:         [1, -1, 0, 2, -1, 0, 0, 0, 0], [0, 0, -1, -1, 2, -1, 0, 0, 0],\n....:         [0, 0, 0, 0, -1, 2, -1, 0, 0], [0, 0, 0, 0, 0, -1, 2, -1, 0],\n....:         [0, 0, 0, 0, 0, 0, -1, 2, -1], [2, 0, 0, 0, 0, 0, 0, -1, 2],\n....:         [0, -1, 0, 0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0, 0, 0, 0],\n....:         [0, 0, 0, -1, 0, 0, 0, 0, 0], [0, 0, 0, 0, -1, 0, 0, 0, 0],\n....:         [0, 0, 0, 0, 0, -1, 0, 0, 0], [0, 0, 0, 0, 0, 0, -1, 0, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, -1, 0], [0, 0, 0, 0, 0, 0, 0, 0, -1],\n....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1], [3, 1, 0, 0, 0, 0, 0, 0, 0],\n....:         [4, 0, 1, 0, 0, 0, 0, 0, 0], [6, 0, 0, 1, 0, 0, 0, 0, 0],\n....:         [8, 0, 0, 0, 1, 0, 0, 0, 0], [6, 0, 0, 0, 0, 1, 0, 0, 0],\n....:         [4, 0, 0, 0, 0, 0, 1, 0, 0], [2, 0, 0, 0, 0, 0, 0, 1, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, 0, 1]]\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz')\nsage: P.integral_points()\npython2: ./libnormaliz/matrix.cpp:2901: libnormaliz::Matrix<Integer> libnormaliz::Matrix<Integer>::LLL_red(libnormaliz::Matrix<Integer>&, libnormaliz::Matrix<Integer>&) const [with Integer = double]: Assertion `(int) rank()==n' failed.\n------------------------------------------------------------------------\n/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x574b)[0x7fa5afdf274b]\n/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x57b5)[0x7fa5afdf27b5]\n/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x849a)[0x7fa5afdf549a]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7fa5bcd37390]\n/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7fa5bc991428]\n/lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7fa5bc99302a]\n/lib/x86_64-linux-gnu/libc.so.6(+0x2dbd7)[0x7fa5bc989bd7]\n/lib/x86_64-linux-gnu/libc.so.6(+0x2dc82)[0x7fa5bc989c82]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZNK11libnormaliz6MatrixIdE7LLL_redERS1_S2_+0x5b9)[0x7fa47314f4a9]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZNK11libnormaliz6MatrixIdE17LLL_red_transposeERS1_S2_+0x83)[0x7fa47314fdc3]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz15LLL_coordinatesIxdEENS_25Sublattice_RepresentationIT_EERKNS_6MatrixIT0_EE+0x56)[0x7fa4730cfde6]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz31LLL_coordinates_without_1st_colIxxEEvRNS_25Sublattice_RepresentationIT_EENS_6MatrixIT0_EES7_b+0x291)[0x7fa4730d0881]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz14ProjectAndLiftIxxE7computeEbb+0x194)[0x7fa473104e54]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE16project_and_liftERNS_14ConePropertiesERNS_6MatrixIS4_EERKS9_SA_b+0x839)[0x7fa473179b69]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE31try_approximation_or_projectionERNS_14ConePropertiesE+0xf00)[0x7fa4731f5370]\n/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE7computeENS_14ConePropertiesE+0x1e1)[0x7fa4731e8671]\n/home/travis/sage-build/local/lib/python2.7/site-packages/PyNormaliz_cpp.so(_Z14_NmzResultImplI10__gmp_exprIA1_12__mpz_structS2_EEP7_objectPN11libnormaliz4ConeIT_EES5_+0x75)[0x7fa4734f6cc5]\n/home/travis/sage-build/local/lib/python2.7/site-packages/PyNormaliz_cpp.so(_Z10_NmzResultP7_objectS0_+0x150)[0x7fa4734ed890]\n```\n\nOriginally found by\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[3,2]])\nsage: len(RC.module_generators)\npython2: ./libnormaliz/matrix.cpp:2901: libnormaliz::Matrix<Integer> libnormaliz::Matrix<Integer>::LLL_red(libnormaliz::Matrix<Integer>&, libnormaliz::Matrix<Integer>&) const [with Integer = double]: Assertion `(int) rank()==n' failed.\n```\n\n(Mathematical note, through trying to find a smaller example, I am noticing that E<sub>8</sub><sup>(1)</sup> is special in that it is the only place where I see non-full-dimensional non-empty polytopes in my computations. Well, I also see a 0-dimensional polytope for type D<sub>4</sub><sup>(3)</sup>, but that doesn't cause a crash as it is likely special-cased.)\n\n----\n\nAlso can you update the comment before `--enable-flint` to also say you enable flint as it is part of the standard packages of Sage?",
    "created_at": "2018-03-03T23:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317698",
    "user": "@tscrim"
}
```

I am now getting this crash (looks like an upstream problem):

```
sage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0], [0, 0, 2, 0, -1, 0, 0, 0, 0],
....:         [1, -1, 0, 2, -1, 0, 0, 0, 0], [0, 0, -1, -1, 2, -1, 0, 0, 0],
....:         [0, 0, 0, 0, -1, 2, -1, 0, 0], [0, 0, 0, 0, 0, -1, 2, -1, 0],
....:         [0, 0, 0, 0, 0, 0, -1, 2, -1], [2, 0, 0, 0, 0, 0, 0, -1, 2],
....:         [0, -1, 0, 0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0, 0, 0, 0],
....:         [0, 0, 0, -1, 0, 0, 0, 0, 0], [0, 0, 0, 0, -1, 0, 0, 0, 0],
....:         [0, 0, 0, 0, 0, -1, 0, 0, 0], [0, 0, 0, 0, 0, 0, -1, 0, 0],
....:         [0, 0, 0, 0, 0, 0, 0, -1, 0], [0, 0, 0, 0, 0, 0, 0, 0, -1],
....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1], [3, 1, 0, 0, 0, 0, 0, 0, 0],
....:         [4, 0, 1, 0, 0, 0, 0, 0, 0], [6, 0, 0, 1, 0, 0, 0, 0, 0],
....:         [8, 0, 0, 0, 1, 0, 0, 0, 0], [6, 0, 0, 0, 0, 1, 0, 0, 0],
....:         [4, 0, 0, 0, 0, 0, 1, 0, 0], [2, 0, 0, 0, 0, 0, 0, 1, 0],
....:         [0, 0, 0, 0, 0, 0, 0, 0, 1]]
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz')
sage: P.integral_points()
python2: ./libnormaliz/matrix.cpp:2901: libnormaliz::Matrix<Integer> libnormaliz::Matrix<Integer>::LLL_red(libnormaliz::Matrix<Integer>&, libnormaliz::Matrix<Integer>&) const [with Integer = double]: Assertion `(int) rank()==n' failed.
------------------------------------------------------------------------
/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x574b)[0x7fa5afdf274b]
/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x57b5)[0x7fa5afdf27b5]
/home/travis/sage-build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x849a)[0x7fa5afdf549a]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7fa5bcd37390]
/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38)[0x7fa5bc991428]
/lib/x86_64-linux-gnu/libc.so.6(abort+0x16a)[0x7fa5bc99302a]
/lib/x86_64-linux-gnu/libc.so.6(+0x2dbd7)[0x7fa5bc989bd7]
/lib/x86_64-linux-gnu/libc.so.6(+0x2dc82)[0x7fa5bc989c82]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZNK11libnormaliz6MatrixIdE7LLL_redERS1_S2_+0x5b9)[0x7fa47314f4a9]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZNK11libnormaliz6MatrixIdE17LLL_red_transposeERS1_S2_+0x83)[0x7fa47314fdc3]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz15LLL_coordinatesIxdEENS_25Sublattice_RepresentationIT_EERKNS_6MatrixIT0_EE+0x56)[0x7fa4730cfde6]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz31LLL_coordinates_without_1st_colIxxEEvRNS_25Sublattice_RepresentationIT_EENS_6MatrixIT0_EES7_b+0x291)[0x7fa4730d0881]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz14ProjectAndLiftIxxE7computeEbb+0x194)[0x7fa473104e54]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE16project_and_liftERNS_14ConePropertiesERNS_6MatrixIS4_EERKS9_SA_b+0x839)[0x7fa473179b69]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE31try_approximation_or_projectionERNS_14ConePropertiesE+0xf00)[0x7fa4731f5370]
/home/travis/sage-build/local/lib/libnormaliz.so.3(_ZN11libnormaliz4ConeI10__gmp_exprIA1_12__mpz_structS3_EE7computeENS_14ConePropertiesE+0x1e1)[0x7fa4731e8671]
/home/travis/sage-build/local/lib/python2.7/site-packages/PyNormaliz_cpp.so(_Z14_NmzResultImplI10__gmp_exprIA1_12__mpz_structS2_EEP7_objectPN11libnormaliz4ConeIT_EES5_+0x75)[0x7fa4734f6cc5]
/home/travis/sage-build/local/lib/python2.7/site-packages/PyNormaliz_cpp.so(_Z10_NmzResultP7_objectS0_+0x150)[0x7fa4734ed890]
```

Originally found by

```
sage: RC = RiggedConfigurations(['E',8,1], [[3,2]])
sage: len(RC.module_generators)
python2: ./libnormaliz/matrix.cpp:2901: libnormaliz::Matrix<Integer> libnormaliz::Matrix<Integer>::LLL_red(libnormaliz::Matrix<Integer>&, libnormaliz::Matrix<Integer>&) const [with Integer = double]: Assertion `(int) rank()==n' failed.
```

(Mathematical note, through trying to find a smaller example, I am noticing that E<sub>8</sub><sup>(1)</sup> is special in that it is the only place where I see non-full-dimensional non-empty polytopes in my computations. Well, I also see a 0-dimensional polytope for type D<sub>4</sub><sup>(3)</sup>, but that doesn't cause a crash as it is likely special-cased.)

----

Also can you update the comment before `--enable-flint` to also say you enable flint as it is part of the standard packages of Sage?



---

archive/issue_comments_317699.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-03T23:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317699",
    "user": "@tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317700.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-04T00:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317700",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317701.json:
```json
{
    "body": "I can confirm this crash. Here on Mac OS X, this actually becomes an unhandled SIGABRT:\n\n```\nAssertion failed: ((int) rank()==n), function LLL_red, file ./libnormaliz/matrix.cpp, line 2901.\n------------------------------------------------------------------------\n0   signals.so                          0x000000010af572d8 print_backtrace + 40\n1   ???                                 0x000000010dcac1e0 0x0 + 4526359008\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n```\n",
    "created_at": "2018-03-04T00:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317701",
    "user": "@mkoeppe"
}
```

I can confirm this crash. Here on Mac OS X, this actually becomes an unhandled SIGABRT:

```
Assertion failed: ((int) rank()==n), function LLL_red, file ./libnormaliz/matrix.cpp, line 2901.
------------------------------------------------------------------------
0   signals.so                          0x000000010af572d8 print_backtrace + 40
1   ???                                 0x000000010dcac1e0 0x0 + 4526359008
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
```




---

archive/issue_comments_317702.json:
```json
{
    "body": "Upstream master branch (8db5b68491a105b9185a01c29c2f126f5115e238) has different behavior but does not fix this.",
    "created_at": "2018-03-04T03:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317702",
    "user": "@mkoeppe"
}
```

Upstream master branch (8db5b68491a105b9185a01c29c2f126f5115e238) has different behavior but does not fix this.



---

archive/issue_comments_317703.json:
```json
{
    "body": "I confirm that the packages build and pass self-tests and doctests correctly on both 64 and 32 bit architectures on Debian stretch. I also comfirm that there is a crash on both architectures regarding the test provided by Travis (which should be added in our doctests, once the issue is fixed).",
    "created_at": "2018-03-04T10:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317703",
    "user": "tmonteil"
}
```

I confirm that the packages build and pass self-tests and doctests correctly on both 64 and 32 bit architectures on Debian stretch. I also comfirm that there is a crash on both architectures regarding the test provided by Travis (which should be added in our doctests, once the issue is fixed).



---

archive/issue_comments_317704.json:
```json
{
    "body": "I am not sure what the matrix ieqs represents. My interpretation: inhomogeneous inequalities, and we want to compute the lattice points in the polytope they define. Under this assumption I have made a Normaliz input file rash.in\n\n\n```\namb_space auto\ninhom_inequalities\n[[0, 2, 0, -1, 0, 0, 0, 0, 0],\n...\n[0, 0, 0, 0, 0, 0, 0, 0, 1]]\nHilbertBasis\n```\n\n\nThen a run of \n\n\n```\nnormaliz -c crash.in\n```\n\n\nfinishes without any problems in 3.5.1 and the intended 3.5.2. It turns out that the polytope is empty:\n\n\n```\n0 module generators\n1252 Hilbert basis elements of recession monoid\n0 vertices of polyhedron\n39 extreme rays of recession cone\n11 support hyperplanes of polyhedron (homogenized)\n\nembedding dimension = 9\naffine dimension of the polyhedron = -1\nrank of recession monoid = 8\n...\n```\n\n\nIs my interpretation of the input correct?",
    "created_at": "2018-03-04T16:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317704",
    "user": "Winfried"
}
```

I am not sure what the matrix ieqs represents. My interpretation: inhomogeneous inequalities, and we want to compute the lattice points in the polytope they define. Under this assumption I have made a Normaliz input file rash.in


```
amb_space auto
inhom_inequalities
[[0, 2, 0, -1, 0, 0, 0, 0, 0],
...
[0, 0, 0, 0, 0, 0, 0, 0, 1]]
HilbertBasis
```


Then a run of 


```
normaliz -c crash.in
```


finishes without any problems in 3.5.1 and the intended 3.5.2. It turns out that the polytope is empty:


```
0 module generators
1252 Hilbert basis elements of recession monoid
0 vertices of polyhedron
39 extreme rays of recession cone
11 support hyperplanes of polyhedron (homogenized)

embedding dimension = 9
affine dimension of the polyhedron = -1
rank of recession monoid = 8
...
```


Is my interpretation of the input correct?



---

archive/issue_comments_317705.json:
```json
{
    "body": "Of course, if the matrix represents inhomogeneous inequalities, what is the RHS? My input above assumes it is the last coordinate. I will now try with the first.",
    "created_at": "2018-03-04T16:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317705",
    "user": "Winfried"
}
```

Of course, if the matrix represents inhomogeneous inequalities, what is the RHS? My input above assumes it is the last coordinate. I will now try with the first.



---

archive/issue_comments_317706.json:
```json
{
    "body": "Unfortunately Normaliz crashes when coordinate 1 is interpreted as the RHS. Will take care of it.",
    "created_at": "2018-03-04T17:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317706",
    "user": "Winfried"
}
```

Unfortunately Normaliz crashes when coordinate 1 is interpreted as the RHS. Will take care of it.



---

archive/issue_comments_317707.json:
```json
{
    "body": "The problem is solved. Replace line 323 of source/libnormaliz/sublattice_representation.h\n\nby\n\n\n```\n    if(Vertices.nr_of_rows()==0 || Vertices.rank()<EmbDim){ // use Supps for LLL coordinates\n```\n\n\ni.e., delete \"-1\" in this line.",
    "created_at": "2018-03-04T20:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317707",
    "user": "Winfried"
}
```

The problem is solved. Replace line 323 of source/libnormaliz/sublattice_representation.h

by


```
    if(Vertices.nr_of_rows()==0 || Vertices.rank()<EmbDim){ // use Supps for LLL coordinates
```


i.e., delete "-1" in this line.



---

archive/issue_comments_317708.json:
```json
{
    "body": "Replying to [comment:20 Winfried]:\n> The problem is solved. Replace line 323 of source/libnormaliz/sublattice_representation.h\n> \n> by\n> \n> {{{\n>     if(Vertices.nr_of_rows()==0 || Vertices.rank()<EmbDim){ // use Supps for LLL coordinates\n> }}}\n> \n> i.e., delete \"-1\" in this line.\n\nGreat, thank you for figuring it out. I am guessing you are in the process of making a commit upstream or should I do a pull request?",
    "created_at": "2018-03-04T22:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317708",
    "user": "@tscrim"
}
```

Replying to [comment:20 Winfried]:
> The problem is solved. Replace line 323 of source/libnormaliz/sublattice_representation.h
> 
> by
> 
> {{{
>     if(Vertices.nr_of_rows()==0 || Vertices.rank()<EmbDim){ // use Supps for LLL coordinates
> }}}
> 
> i.e., delete "-1" in this line.

Great, thank you for figuring it out. I am guessing you are in the process of making a commit upstream or should I do a pull request?



---

archive/issue_comments_317709.json:
```json
{
    "body": "I've pushed a branch with a fix for this problem. However, I have now come across another crash:\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[4,2]])\nsage: len(RC.module_generators)\npython2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.\n------------------------------------------------------------------------\n```\n\nI have verified that this did at least not crash before (well, up to my patience level of 2 minutes).\n\nHowever, **much** more worrying is this:\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[5,2]])\nsage: %time len(RC.module_generators)\nCPU times: user 25 s, sys: 52 ms, total: 25 s\nWall time: 6.95 s\n6009\n```\n\nversus before\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[5,2]])\nsage: %time len(RC.module_generators)\nCPU times: user 1min 11s, sys: 320 ms, total: 1min 11s\nWall time: 14.6 s\n7066\n```\n\nAlthough the `[5,1]` example both returns 75.\n\nI will extract the polytopes and find out which one gives a different number of lattice points. Give me a few minutes.\n----\nNew commits:",
    "created_at": "2018-03-04T23:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317709",
    "user": "@tscrim"
}
```

I've pushed a branch with a fix for this problem. However, I have now come across another crash:

```
sage: RC = RiggedConfigurations(['E',8,1], [[4,2]])
sage: len(RC.module_generators)
python2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.
------------------------------------------------------------------------
```

I have verified that this did at least not crash before (well, up to my patience level of 2 minutes).

However, **much** more worrying is this:

```
sage: RC = RiggedConfigurations(['E',8,1], [[5,2]])
sage: %time len(RC.module_generators)
CPU times: user 25 s, sys: 52 ms, total: 25 s
Wall time: 6.95 s
6009
```

versus before

```
sage: RC = RiggedConfigurations(['E',8,1], [[5,2]])
sage: %time len(RC.module_generators)
CPU times: user 1min 11s, sys: 320 ms, total: 1min 11s
Wall time: 14.6 s
7066
```

Although the `[5,1]` example both returns 75.

I will extract the polytopes and find out which one gives a different number of lattice points. Give me a few minutes.
----
New commits:



---

archive/issue_comments_317710.json:
```json
{
    "body": "Okay, here is the `[4,1]` computation to completion:\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[4,2]])\nsage: %time len(RC.module_generators)\nCPU times: user 19min 37s, sys: 5.2 s, total: 19min 42s\nWall time: 4min 37s\n288299\n```\n",
    "created_at": "2018-03-04T23:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317710",
    "user": "@tscrim"
}
```

Okay, here is the `[4,1]` computation to completion:

```
sage: RC = RiggedConfigurations(['E',8,1], [[4,2]])
sage: %time len(RC.module_generators)
CPU times: user 19min 37s, sys: 5.2 s, total: 19min 42s
Wall time: 4min 37s
288299
```




---

archive/issue_comments_317711.json:
```json
{
    "body": "Okay, here is at least the first polytope that goes wrong:\n\n```\nsage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0],\n....:         [0, 0, 2, 0, -1, 0, 0, 0, 0],\n....:         [1, -1, 0, 2, -1, 0, 0, 0, 0],\n....:         [0, 0, -1, -1, 2, -1, 0, 0, 0],\n....:         [0, 0, 0, 0, -1, 2, -1, 0, 0],\n....:         [0, 0, 0, 0, 0, -1, 2, -1, 0],\n....:         [1, 0, 0, 0, 0, 0, -1, 2, -1],\n....:         [0, 0, 0, 0, 0, 0, 0, -1, 2],\n....:         [0, -1, 0, 0, 0, 0, 0, 0, 0],\n....:         [0, 0, -1, 0, 0, 0, 0, 0, 0],\n....:         [0, 0, 0, -1, 0, 0, 0, 0, 0],\n....:         [0, 0, 0, 0, -1, 0, 0, 0, 0],\n....:         [0, 0, 0, 0, 0, -1, 0, 0, 0],\n....:         [0, 0, 0, 0, 0, 0, -1, 0, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, -1, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, 0, -1],\n....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1],\n....:         [2, 1, 0, 0, 0, 0, 0, 0, 0],\n....:         [4, 0, 1, 0, 0, 0, 0, 0, 0],\n....:         [4, 0, 0, 1, 0, 0, 0, 0, 0],\n....:         [7, 0, 0, 0, 1, 0, 0, 0, 0],\n....:         [6, 0, 0, 0, 0, 1, 0, 0, 0],\n....:         [4, 0, 0, 0, 0, 0, 1, 0, 0],\n....:         [2, 0, 0, 0, 0, 0, 0, 1, 0],\n....:         [1, 0, 0, 0, 0, 0, 0, 0, 1]]\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz')\nsage: P.integral_points()\n((-2, -2, -4, -5, -4, -3, -2, -1),\n (-2, -2, -4, -5, -4, -3, -2, 0),\n (-1, -2, -3, -4, -3, -2, -2, -1),\n (-1, -2, -3, -4, -3, -2, -1, 0),\n (-1, -1, -2, -2, -2, -2, -2, -1),\n (-1, -1, -2, -2, -1, -1, -1, 0),\n (-1, -1, -2, -2, -1, 0, 0, 0),\n (-1, 0, -2, -2, -2, -2, -2, -1),\n (0, -1, -1, -2, -2, -2, -2, -1),\n (0, 0, -1, -1, -1, -1, -1, 0))\nsage: P\nA 8-dimensional polyhedron in QQ^8 defined as the convex hull of 134 vertices\n```\n\nversus the new version with the patch:\n\n```\nsage: P.integral_points()\n((-1, -2, -3, -4, -3, -2, -1, 0), (0, -1, -1, -2, -2, -2, -2, -1))\n```\n",
    "created_at": "2018-03-04T23:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317711",
    "user": "@tscrim"
}
```

Okay, here is at least the first polytope that goes wrong:

```
sage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0],
....:         [0, 0, 2, 0, -1, 0, 0, 0, 0],
....:         [1, -1, 0, 2, -1, 0, 0, 0, 0],
....:         [0, 0, -1, -1, 2, -1, 0, 0, 0],
....:         [0, 0, 0, 0, -1, 2, -1, 0, 0],
....:         [0, 0, 0, 0, 0, -1, 2, -1, 0],
....:         [1, 0, 0, 0, 0, 0, -1, 2, -1],
....:         [0, 0, 0, 0, 0, 0, 0, -1, 2],
....:         [0, -1, 0, 0, 0, 0, 0, 0, 0],
....:         [0, 0, -1, 0, 0, 0, 0, 0, 0],
....:         [0, 0, 0, -1, 0, 0, 0, 0, 0],
....:         [0, 0, 0, 0, -1, 0, 0, 0, 0],
....:         [0, 0, 0, 0, 0, -1, 0, 0, 0],
....:         [0, 0, 0, 0, 0, 0, -1, 0, 0],
....:         [0, 0, 0, 0, 0, 0, 0, -1, 0],
....:         [0, 0, 0, 0, 0, 0, 0, 0, -1],
....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1],
....:         [2, 1, 0, 0, 0, 0, 0, 0, 0],
....:         [4, 0, 1, 0, 0, 0, 0, 0, 0],
....:         [4, 0, 0, 1, 0, 0, 0, 0, 0],
....:         [7, 0, 0, 0, 1, 0, 0, 0, 0],
....:         [6, 0, 0, 0, 0, 1, 0, 0, 0],
....:         [4, 0, 0, 0, 0, 0, 1, 0, 0],
....:         [2, 0, 0, 0, 0, 0, 0, 1, 0],
....:         [1, 0, 0, 0, 0, 0, 0, 0, 1]]
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz')
sage: P.integral_points()
((-2, -2, -4, -5, -4, -3, -2, -1),
 (-2, -2, -4, -5, -4, -3, -2, 0),
 (-1, -2, -3, -4, -3, -2, -2, -1),
 (-1, -2, -3, -4, -3, -2, -1, 0),
 (-1, -1, -2, -2, -2, -2, -2, -1),
 (-1, -1, -2, -2, -1, -1, -1, 0),
 (-1, -1, -2, -2, -1, 0, 0, 0),
 (-1, 0, -2, -2, -2, -2, -2, -1),
 (0, -1, -1, -2, -2, -2, -2, -1),
 (0, 0, -1, -1, -1, -1, -1, 0))
sage: P
A 8-dimensional polyhedron in QQ^8 defined as the convex hull of 134 vertices
```

versus the new version with the patch:

```
sage: P.integral_points()
((-1, -2, -3, -4, -3, -2, -1, 0), (0, -1, -1, -2, -2, -2, -2, -1))
```




---

archive/issue_comments_317712.json:
```json
{
    "body": "Here's also the example that causes the new crash:\n\n```\nsage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0],\n....:         [0, 0, 2, 0, -1, 0, 0, 0, 0],\n....:         [0, -1, 0, 2, -1, 0, 0, 0, 0],\n....:         [1, 0, -1, -1, 2, -1, 0, 0, 0],\n....:         [0, 0, 0, 0, -1, 2, -1, 0, 0],\n....:         [0, 0, 0, 0, 0, -1, 2, -1, 0],\n....:         [1, 0, 0, 0, 0, 0, -1, 2, -1],\n....:         [0, 0, 0, 0, 0, 0, 0, -1, 2],\n....:         [0, -1, 0, 0, 0, 0, 0, 0, 0],\n....:         [0, 0, -1, 0, 0, 0, 0, 0, 0],\n....:         [0, 0, 0, -1, 0, 0, 0, 0, 0],\n....:         [0, 0, 0, 0, -1, 0, 0, 0, 0],\n....:         [0, 0, 0, 0, 0, -1, 0, 0, 0],\n....:         [0, 0, 0, 0, 0, 0, -1, 0, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, -1, 0],\n....:         [0, 0, 0, 0, 0, 0, 0, 0, -1],\n....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1],\n....:         [3, 1, 0, 0, 0, 0, 0, 0, 0],\n....:         [4, 0, 1, 0, 0, 0, 0, 0, 0],\n....:         [6, 0, 0, 1, 0, 0, 0, 0, 0],\n....:         [8, 0, 0, 0, 1, 0, 0, 0, 0],\n....:         [6, 0, 0, 0, 0, 1, 0, 0, 0],\n....:         [4, 0, 0, 0, 0, 0, 1, 0, 0],\n....:         [2, 0, 0, 0, 0, 0, 0, 1, 0],\n....:         [1, 0, 0, 0, 0, 0, 0, 0, 1]]\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz')\nsage: P.integral_points()\npython2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.\n------------------------------------------------------------------------\n```\n",
    "created_at": "2018-03-04T23:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317712",
    "user": "@tscrim"
}
```

Here's also the example that causes the new crash:

```
sage: ieqs = [[0, 2, 0, -1, 0, 0, 0, 0, 0],
....:         [0, 0, 2, 0, -1, 0, 0, 0, 0],
....:         [0, -1, 0, 2, -1, 0, 0, 0, 0],
....:         [1, 0, -1, -1, 2, -1, 0, 0, 0],
....:         [0, 0, 0, 0, -1, 2, -1, 0, 0],
....:         [0, 0, 0, 0, 0, -1, 2, -1, 0],
....:         [1, 0, 0, 0, 0, 0, -1, 2, -1],
....:         [0, 0, 0, 0, 0, 0, 0, -1, 2],
....:         [0, -1, 0, 0, 0, 0, 0, 0, 0],
....:         [0, 0, -1, 0, 0, 0, 0, 0, 0],
....:         [0, 0, 0, -1, 0, 0, 0, 0, 0],
....:         [0, 0, 0, 0, -1, 0, 0, 0, 0],
....:         [0, 0, 0, 0, 0, -1, 0, 0, 0],
....:         [0, 0, 0, 0, 0, 0, -1, 0, 0],
....:         [0, 0, 0, 0, 0, 0, 0, -1, 0],
....:         [0, 0, 0, 0, 0, 0, 0, 0, -1],
....:         [-1, -1, -1, -1, -1, -1, -1, -1, -1],
....:         [3, 1, 0, 0, 0, 0, 0, 0, 0],
....:         [4, 0, 1, 0, 0, 0, 0, 0, 0],
....:         [6, 0, 0, 1, 0, 0, 0, 0, 0],
....:         [8, 0, 0, 0, 1, 0, 0, 0, 0],
....:         [6, 0, 0, 0, 0, 1, 0, 0, 0],
....:         [4, 0, 0, 0, 0, 0, 1, 0, 0],
....:         [2, 0, 0, 0, 0, 0, 0, 1, 0],
....:         [1, 0, 0, 0, 0, 0, 0, 0, 1]]
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz')
sage: P.integral_points()
python2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.
------------------------------------------------------------------------
```




---

archive/issue_comments_317713.json:
```json
{
    "body": "A hint: If you use `P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)`, the `PyNormaliz` invocations are shown, making it easier for upstream",
    "created_at": "2018-03-04T23:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317713",
    "user": "@mkoeppe"
}
```

A hint: If you use `P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)`, the `PyNormaliz` invocations are shown, making it easier for upstream



---

archive/issue_comments_317714.json:
```json
{
    "body": "I wasn't aware of that, thank you. Although it does not yield much more information on the new crash:\n\n```\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)\n# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',\n [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],\n [-1, 0, 2, -1, 0, 0, 0, 0, 0], [0, -1, -1, 2, -1, 0, 0, 0, 1],\n [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],\n [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],\n [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],\n [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],\n [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 3],\n [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 6],\n [0, 0, 0, 1, 0, 0, 0, 0, 8], [0, 0, 0, 0, 1, 0, 0, 0, 6],\n [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],\n [0, 0, 0, 0, 0, 0, 0, 1, 1]]])\nsage: P.integral_points()\npython2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.\n------------------------------------------------------------------------\n```\n\n\nHere is also the output for the lattice point computation:\n\n```\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)\n# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',\n [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],\n [-1, 0, 2, -1, 0, 0, 0, 0, 1], [0, -1, -1, 2, -1, 0, 0, 0, 0],\n [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],\n [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],\n [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],\n [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],\n [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 2],\n [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 4],\n [0, 0, 0, 1, 0, 0, 0, 0, 7], [0, 0, 0, 0, 1, 0, 0, 0, 6],\n [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],\n [0, 0, 0, 0, 0, 0, 0, 1, 1]]])\nsage: P.integral_points()\n((-1, -2, -3, -4, -3, -2, -1, 0), (0, -1, -1, -2, -2, -2, -2, -1))\n```\n",
    "created_at": "2018-03-05T00:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317714",
    "user": "@tscrim"
}
```

I wasn't aware of that, thank you. Although it does not yield much more information on the new crash:

```
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)
# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',
 [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],
 [-1, 0, 2, -1, 0, 0, 0, 0, 0], [0, -1, -1, 2, -1, 0, 0, 0, 1],
 [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],
 [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],
 [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],
 [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 3],
 [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 6],
 [0, 0, 0, 1, 0, 0, 0, 0, 8], [0, 0, 0, 0, 1, 0, 0, 0, 6],
 [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],
 [0, 0, 0, 0, 0, 0, 0, 1, 1]]])
sage: P.integral_points()
python2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.
------------------------------------------------------------------------
```


Here is also the output for the lattice point computation:

```
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)
# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',
 [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],
 [-1, 0, 2, -1, 0, 0, 0, 0, 1], [0, -1, -1, 2, -1, 0, 0, 0, 0],
 [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],
 [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],
 [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],
 [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 2],
 [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 4],
 [0, 0, 0, 1, 0, 0, 0, 0, 7], [0, 0, 0, 0, 1, 0, 0, 0, 6],
 [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],
 [0, 0, 0, 0, 0, 0, 0, 1, 1]]])
sage: P.integral_points()
((-1, -2, -3, -4, -3, -2, -1, 0), (0, -1, -1, -2, -2, -2, -2, -1))
```




---

archive/issue_comments_317715.json:
```json
{
    "body": "PS - That means the docstring for `Polyhedron` needs a minor adjustment:\n\n```\n    - ``verbose`` -- boolean (default: ``False``). Whether to print\n      verbose output for debugging purposes. Only supported by the cdd\n      backends.\n```\n",
    "created_at": "2018-03-05T00:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317715",
    "user": "@tscrim"
}
```

PS - That means the docstring for `Polyhedron` needs a minor adjustment:

```
    - ``verbose`` -- boolean (default: ``False``). Whether to print
      verbose output for debugging purposes. Only supported by the cdd
      backends.
```




---

archive/issue_comments_317716.json:
```json
{
    "body": "The wrong number of lattice points is a more severe problem. I don't have an explanation for it.\n\nThe (first and solved) problem in sublattice_representation.h has nothing to do with it. After the change in sublattice_representation.h:323 a second problem has become visible there in Normaliz' own tests. One must change line 325 to\n\n\n```\n        if(SuppHelp.rank()<EmbDim-1)\n```\n\n\nBut againthis has nothing to do with the wrong number of lattice points.",
    "created_at": "2018-03-05T00:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317716",
    "user": "Winfried"
}
```

The wrong number of lattice points is a more severe problem. I don't have an explanation for it.

The (first and solved) problem in sublattice_representation.h has nothing to do with it. After the change in sublattice_representation.h:323 a second problem has become visible there in Normaliz' own tests. One must change line 325 to


```
        if(SuppHelp.rank()<EmbDim-1)
```


But againthis has nothing to do with the wrong number of lattice points.



---

archive/issue_comments_317717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-05T03:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317717",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317718.json:
```json
{
    "body": "Replying to [comment:29 Winfried]:\n> The wrong number of lattice points is a more severe problem. I don't have an explanation for it.\n\nI am afraid all I can do is give you examples from my use-case as I do not understand too much about how Normaliz works. Thank you for your continued efforts and quick responses.\n\n> The (first and solved) problem in sublattice_representation.h has nothing to do with it. After the change in sublattice_representation.h:323 a second problem has become visible there in Normaliz' own tests. One must change line 325 to\n> \n> {{{\n>         if(SuppHelp.rank()<EmbDim-1)\n> }}}\n> \n> But again this has nothing to do with the wrong number of lattice points.\n\nI added that to the patch, but (as you might be aware) I am now getting yet another crash with the same example as in comment:25:\n\n```\nsage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)\n# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',\n [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],\n [-1, 0, 2, -1, 0, 0, 0, 0, 0], [0, -1, -1, 2, -1, 0, 0, 0, 1],\n [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],\n [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],\n [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],\n [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],\n [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 3],\n [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 6],\n [0, 0, 0, 1, 0, 0, 0, 0, 8], [0, 0, 0, 0, 1, 0, 0, 0, 6],\n [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],\n [0, 0, 0, 0, 0, 0, 0, 1, 1]]])\nsage: P\nA 8-dimensional polyhedron in QQ^8 defined as the convex hull of 132 vertices\nsage: P.integral_points()\npython2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.\n------------------------------------------------------------------------\n```\n\n\nAddendum - It is the same error as before.",
    "created_at": "2018-03-05T03:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317718",
    "user": "@tscrim"
}
```

Replying to [comment:29 Winfried]:
> The wrong number of lattice points is a more severe problem. I don't have an explanation for it.

I am afraid all I can do is give you examples from my use-case as I do not understand too much about how Normaliz works. Thank you for your continued efforts and quick responses.

> The (first and solved) problem in sublattice_representation.h has nothing to do with it. After the change in sublattice_representation.h:323 a second problem has become visible there in Normaliz' own tests. One must change line 325 to
> 
> {{{
>         if(SuppHelp.rank()<EmbDim-1)
> }}}
> 
> But again this has nothing to do with the wrong number of lattice points.

I added that to the patch, but (as you might be aware) I am now getting yet another crash with the same example as in comment:25:

```
sage: P = Polyhedron(ieqs=ieqs, backend='normaliz', verbose=True)
# Calling PyNormaliz.NmzCone(['inhom_equations', [], 'inhom_inequalities',
 [[2, 0, -1, 0, 0, 0, 0, 0, 0], [0, 2, 0, -1, 0, 0, 0, 0, 0],
 [-1, 0, 2, -1, 0, 0, 0, 0, 0], [0, -1, -1, 2, -1, 0, 0, 0, 1],
 [0, 0, 0, -1, 2, -1, 0, 0, 0], [0, 0, 0, 0, -1, 2, -1, 0, 0],
 [0, 0, 0, 0, 0, -1, 2, -1, 1], [0, 0, 0, 0, 0, 0, -1, 2, 0],
 [-1, 0, 0, 0, 0, 0, 0, 0, 0], [0, -1, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, -1, 0, 0, 0, 0, 0, 0], [0, 0, 0, -1, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, -1, 0, 0], [0, 0, 0, 0, 0, 0, 0, -1, 0],
 [-1, -1, -1, -1, -1, -1, -1, -1, -1], [1, 0, 0, 0, 0, 0, 0, 0, 3],
 [0, 1, 0, 0, 0, 0, 0, 0, 4], [0, 0, 1, 0, 0, 0, 0, 0, 6],
 [0, 0, 0, 1, 0, 0, 0, 0, 8], [0, 0, 0, 0, 1, 0, 0, 0, 6],
 [0, 0, 0, 0, 0, 1, 0, 0, 4], [0, 0, 0, 0, 0, 0, 1, 0, 2],
 [0, 0, 0, 0, 0, 0, 0, 1, 1]]])
sage: P
A 8-dimensional polyhedron in QQ^8 defined as the convex hull of 132 vertices
sage: P.integral_points()
python2: ./libnormaliz/project_and_lift.cpp:75: std::vector<long unsigned int> libnormaliz::ProjectAndLift<IntegerPL, IntegerRet>::order_supps(const libnormaliz::Matrix<Integer>&) [with IntegerPL = long long int; IntegerRet = long long int]: Assertion `Supps.nr_of_rows()>0' failed.
------------------------------------------------------------------------
```


Addendum - It is the same error as before.



---

archive/issue_comments_317719.json:
```json
{
    "body": "I think all the observed problems are solved. More tomorrow.",
    "created_at": "2018-03-05T06:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317719",
    "user": "Winfried"
}
```

I think all the observed problems are solved. More tomorrow.



---

archive/issue_comments_317720.json:
```json
{
    "body": "Great, thank you!",
    "created_at": "2018-03-05T06:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317720",
    "user": "@tscrim"
}
```

Great, thank you!



---

archive/issue_comments_317721.json:
```json
{
    "body": "The problem with the wrong number of lattice points (or a failing assertion) was not caused by a severe problem, but by a silly bug. As a temporary fix I suggest to include as lines cone.cpp:3804 and 3805\n\n\n```\n    if(!is_parallelotope)\n        Pair.clear();\n```\n\n\nSo with some surrounding the code there should be\n\n\n```\n            is_Computed.set(ConeProperty::IsPointed);\n        }\n    }\n    \n    if(!is_parallelotope)\n        Pair.clear();\n    \n    if(!inhomogeneous && !isComputed(ConeProperty::Grading))\n        return;\n```\n\n\nI plan to release 3.5.2 at the end of this week. It will contain a more conceptual solution.\n\nPlease test.",
    "created_at": "2018-03-05T18:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317721",
    "user": "Winfried"
}
```

The problem with the wrong number of lattice points (or a failing assertion) was not caused by a severe problem, but by a silly bug. As a temporary fix I suggest to include as lines cone.cpp:3804 and 3805


```
    if(!is_parallelotope)
        Pair.clear();
```


So with some surrounding the code there should be


```
            is_Computed.set(ConeProperty::IsPointed);
        }
    }
    
    if(!is_parallelotope)
        Pair.clear();
    
    if(!inhomogeneous && !isComputed(ConeProperty::Grading))
        return;
```


I plan to release 3.5.2 at the end of this week. It will contain a more conceptual solution.

Please test.



---

archive/issue_comments_317722.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-05T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317722",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317723.json:
```json
{
    "body": "Thank you. I have verified that I get again\n\n```\nsage: RC = RiggedConfigurations(['E',8,1], [[5,2]])\nsage: %time len(RC.module_generators)\nCPU times: user 27.6 s, sys: 68 ms, total: 27.7 s\nWall time: 7.8 s\n7066\nsage: RC = RiggedConfigurations(['E',8,1], [[4,2]])\nsage: %time len(RC.module_generators)\nCPU times: user 5min 6s, sys: 944 ms, total: 5min 7s\nWall time: 1min 36s\n288299\n```\n\nand the >2x speedup is very impressive. :) I've updated the patch accordingly.\n\n`@`mkoeppe Perhaps we should just wait on this upgrade until 3.5.2 is released to avoid the patch since it will be in just a few days?\n\nAs far as adding tests go, I think we should explicitly add the polytopes mentioned above rather than the RC code. They are isolated and much faster to test.",
    "created_at": "2018-03-05T22:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317723",
    "user": "@tscrim"
}
```

Thank you. I have verified that I get again

```
sage: RC = RiggedConfigurations(['E',8,1], [[5,2]])
sage: %time len(RC.module_generators)
CPU times: user 27.6 s, sys: 68 ms, total: 27.7 s
Wall time: 7.8 s
7066
sage: RC = RiggedConfigurations(['E',8,1], [[4,2]])
sage: %time len(RC.module_generators)
CPU times: user 5min 6s, sys: 944 ms, total: 5min 7s
Wall time: 1min 36s
288299
```

and the >2x speedup is very impressive. :) I've updated the patch accordingly.

`@`mkoeppe Perhaps we should just wait on this upgrade until 3.5.2 is released to avoid the patch since it will be in just a few days?

As far as adding tests go, I think we should explicitly add the polytopes mentioned above rather than the RC code. They are isolated and much faster to test.



---

archive/issue_comments_317724.json:
```json
{
    "body": "Replying to [comment:36 tscrim]:\n> `@`mkoeppe Perhaps we should just wait on this upgrade until 3.5.2 is released to avoid the patch since it will be in just a few days?\n\nYes, I think so too.\n\n> As far as adding tests go, I think we should explicitly add the polytopes mentioned above rather than the RC code. They are isolated and much faster to test.\n\nI agree.",
    "created_at": "2018-03-05T22:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317724",
    "user": "@mkoeppe"
}
```

Replying to [comment:36 tscrim]:
> `@`mkoeppe Perhaps we should just wait on this upgrade until 3.5.2 is released to avoid the patch since it will be in just a few days?

Yes, I think so too.

> As far as adding tests go, I think we should explicitly add the polytopes mentioned above rather than the RC code. They are isolated and much faster to test.

I agree.



---

archive/issue_comments_317725.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-14T02:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317725",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317726.json:
```json
{
    "body": "Here is with 3.5.2 and the tests I did above now work. Where would a good place be to add the doctests?",
    "created_at": "2018-03-14T02:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317726",
    "user": "@tscrim"
}
```

Here is with 3.5.2 and the tests I did above now work. Where would a good place be to add the doctests?



---

archive/issue_comments_317727.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2018-03-14T02:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317727",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_317728.json:
```json
{
    "body": "I would think the doctests should go to `Polyhedron_normaliz.integral_points`.",
    "created_at": "2018-03-15T00:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317728",
    "user": "@mkoeppe"
}
```

I would think the doctests should go to `Polyhedron_normaliz.integral_points`.



---

archive/issue_comments_317729.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2018-03-15T00:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317729",
    "user": "@mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_317730.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-15T07:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317730",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317731.json:
```json
{
    "body": "Okay, done.",
    "created_at": "2018-03-15T07:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317731",
    "user": "@tscrim"
}
```

Okay, done.



---

archive/issue_comments_317732.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-15T07:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317732",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317733.json:
```json
{
    "body": "ping",
    "created_at": "2018-03-21T07:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317733",
    "user": "@tscrim"
}
```

ping



---

archive/issue_comments_317734.json:
```json
{
    "body": "S. Gutsche informs us that we should upgrade pynormaliz to 1.12",
    "created_at": "2018-04-02T14:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317734",
    "user": "@mkoeppe"
}
```

S. Gutsche informs us that we should upgrade pynormaliz to 1.12



---

archive/issue_comments_317735.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-02T14:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317735",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317736.json:
```json
{
    "body": "All tests passed with sage8.2.beta8.\n\n`@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?\n\nOtherwise, it seems that we need to wait for 1.12 of pynormaliz check everything one last time.",
    "created_at": "2018-04-02T16:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317736",
    "user": "@jplab"
}
```

All tests passed with sage8.2.beta8.

`@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?

Otherwise, it seems that we need to wait for 1.12 of pynormaliz check everything one last time.



---

archive/issue_comments_317737.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-04-02T17:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317737",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_317738.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-02T17:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317738",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317739.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-04-02T17:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317739",
    "user": "@jplab"
}
```

New commits:



---

archive/issue_comments_317740.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-02T17:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317740",
    "user": "@jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317741.json:
```json
{
    "body": "It looks good to me now and all tests pass in the polyhedron folder.",
    "created_at": "2018-04-02T17:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317741",
    "user": "@jplab"
}
```

It looks good to me now and all tests pass in the polyhedron folder.



---

archive/issue_comments_317742.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-04-02T21:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317742",
    "user": "@mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_317743.json:
```json
{
    "body": "Compilation errors with a specific gcc version with PyNormaliz. Fixed in normaliz 3.5.3",
    "created_at": "2018-04-02T21:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317743",
    "user": "@mkoeppe"
}
```

Compilation errors with a specific gcc version with PyNormaliz. Fixed in normaliz 3.5.3



---

archive/issue_comments_317744.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-04-02T21:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317744",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_317745.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-02T21:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317745",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317746.json:
```json
{
    "body": "Install the latest normaliz and got:\n\n\n```\n~/sage/src/sage/geometry/polyhedron$ sage -t *.py\nUsing --optional=4ti2,bliss,latte_int,lidia,lrslib,mpir,normaliz,pynormaliz,python2,sage\nDoctesting 25 files.\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n",
    "created_at": "2018-04-02T21:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317746",
    "user": "@jplab"
}
```

Install the latest normaliz and got:


```
~/sage/src/sage/geometry/polyhedron$ sage -t *.py
Using --optional=4ti2,bliss,latte_int,lidia,lrslib,mpir,normaliz,pynormaliz,python2,sage
Doctesting 25 files.
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```




---

archive/issue_comments_317747.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-02T22:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317747",
    "user": "@jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317748.json:
```json
{
    "body": "Replying to [comment:46 jipilab]:\n> `@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?\n\nIt can be on a separate ticket, but the docstring for `verbose` should also say it is supported for the normaliz backend as well.",
    "created_at": "2018-04-02T22:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317748",
    "user": "@tscrim"
}
```

Replying to [comment:46 jipilab]:
> `@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?

It can be on a separate ticket, but the docstring for `verbose` should also say it is supported for the normaliz backend as well.



---

archive/issue_comments_317749.json:
```json
{
    "body": "Replying to [comment:57 tscrim]:\n> Replying to [comment:46 jipilab]:\n> > `@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?\n> \n> It can be on a separate ticket, but the docstring for `verbose` should also say it is supported for the normaliz backend as well.\n\nI went ahead and made the change already... I realized it was not a big deal.",
    "created_at": "2018-04-02T23:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317749",
    "user": "@jplab"
}
```

Replying to [comment:57 tscrim]:
> Replying to [comment:46 jipilab]:
> > `@`Travis: Do you still want to add a comment about the verbose of `Polyhedron`?
> 
> It can be on a separate ticket, but the docstring for `verbose` should also say it is supported for the normaliz backend as well.

I went ahead and made the change already... I realized it was not a big deal.



---

archive/issue_comments_317750.json:
```json
{
    "body": "Ah, thanks. I didn't look at the diffs.",
    "created_at": "2018-04-02T23:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317750",
    "user": "@tscrim"
}
```

Ah, thanks. I didn't look at the diffs.



---

archive/issue_comments_317751.json:
```json
{
    "body": "Merged the forgotten commit.\n----\nNew commits:",
    "created_at": "2018-04-03T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317751",
    "user": "@jplab"
}
```

Merged the forgotten commit.
----
New commits:



---

archive/issue_comments_317752.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-04-03T14:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317752",
    "user": "@jplab"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_317753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-03T17:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317753",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317754.json:
```json
{
    "body": "Changing keywords from \"\" to \"IMA-PolyGeom\".",
    "created_at": "2018-04-04T00:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317754",
    "user": "@mkoeppe"
}
```

Changing keywords from "" to "IMA-PolyGeom".



---

archive/issue_comments_317755.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22747#issuecomment-317755",
    "user": "@vbraun"
}
```

Resolution: fixed
