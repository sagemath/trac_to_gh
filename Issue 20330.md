# Issue 20330: live documentation in sage notebook is broken

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2016-05-07 12:45:57

CC:  vbraun kcrisman jdemeyer

See https://groups.google.com/forum/#!topic/sage-devel/k1c4Ea4lH6o


---

Comment by jdemeyer created at 2016-05-09 14:25:06

Changing status from new to needs_review.


---

Comment by vbraun created at 2016-05-09 16:11:31

Branch?


---

Comment by vbraun created at 2016-05-09 16:11:31

Changing priority from blocker to major.


---

Comment by jdemeyer created at 2016-05-09 16:39:46

New commits:


---

Comment by fbissey created at 2016-05-09 22:49:05

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2016-05-09 22:49:05

Looks good to me.


---

Comment by vdelecroix created at 2016-05-10 00:20:21

Actually, I installed the new package and try to ran the live documentation. I still got the same error

```
[Errno 2] No such file or directory: u'/opt/sage/local/share/doc/sage/html/en/thematic_tutorials/_static/default.css'
Traceback (most recent call last):
  File "/opt/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/opt/sage/local/lib/python2.7/site-packages/sagenb-0.11.7-py2.7.egg/sagenb/flask_version/decorators.py", line 22, in wrapper
    return f(*args, **kwds)
  File "/opt/sage/local/lib/python2.7/site-packages/sagenb-0.11.7-py2.7.egg/sagenb/flask_version/doc.py", line 73, in doc_live
    return send_file(filename)
  File "/opt/sage/local/lib/python2.7/site-packages/Flask-0.10.1-py2.7.egg/flask/helpers.py", line 520, in send_file
    file = open(filename, 'rb')
IOError: [Errno 2] No such file or directory: u'/opt/sage/local/share/doc/sage/html/en/thematic_tutorials/_static/default.css'
```

What is the procedure to properly reinstall the sage notebook?

For reference I did

```
$ git checkout -b sagenb
$ git fetch trac u/jdemeyer/live_documentation_in_sage_notebook_is_broken
$ git merge FETCH_HEAD
$ make build
```

Doing the above the package is *not* reinstalled. It seems that the script is actually stopped after "cunningham_tables"

```
checking package versions... 
    4ti2-1.6.7
    alabaster-0.7.7
    arb-2.8.1.p0
    atlas-3.10.2.p2
    autotools-20141105
    babel-2.2.0
    backports_abc-0.4
    backports_ssl_match_hostname-3.5.0.1
    benzene-20130630
    bliss-0.73
    boost_cropped-1.58.0
    brial-0.8.4.3
    buckygen-1.0
    bzip2-1.0.6-20150304
    cbc-2.9.4
    ccache-3.2.2
    cddlib-094g.p0
    cephes-2.8.p1
    certifi-2016.2.28
    cliquer-1.21.p3
    cmake-3.2.3
    combinatorial_designs-20140630
    compilerwrapper-1.2
    configure-162
    conway_polynomials-0.4.p0
    coxeter3-1.1
    cryptominisat-2.9.6
"/opt/sage/build/pkgs/cunningham_tables/type" is missing.
    csdp-6.2
"/opt/sage/build/pkgs/cunningham_tables/type" is missing.
"/opt/sage/build/pkgs/cunningham_tables/type" is missing.
"/opt/sage/build/pkgs/cunningham_tables/type" is missing.
"/opt/sage/build/pkgs/cunningham_tables/type" is missing.
checking that generated files are newer than configure... done
```


And there are other problems that we can read from the log

```
ln: failed to create symbolic link 'mathjax/mathjax': File exists
```



---

Comment by vdelecroix created at 2016-05-10 00:20:21

Changing status from positive_review to needs_info.


---

Comment by fbissey created at 2016-05-10 00:55:32

I see you have `/opt/sage/local/lib/python2.7/site-packages/sagenb-0.11.7-py2.7.egg` those eggs files are becoming a problem.


---

Comment by fbissey created at 2016-05-10 01:18:11

`cunningham_tables` is not an optional package I see in the sage tree, is this coming from another ticket?


---

Comment by vdelecroix created at 2016-05-10 04:13:33

`cunningham_tables` is indeed some optional package. But whose installation just fails

```
$ sage -i cunningham_tables
...
cp: cannot create directory '/cunningham_tables': Permission denied
...
```


EDIT: related to #15813


---

Comment by fbissey created at 2016-05-10 04:26:25

OK so your failure seems to be due to #15813, things should improve if you remove it.


---

Comment by vdelecroix created at 2016-05-10 05:20:26

Changing status from needs_info to positive_review.


---

Comment by vdelecroix created at 2016-05-10 05:20:26

Indeed, `cunningham_tables` completely broke everything! Thanks for helping debugging.


---

Comment by vbraun created at 2016-05-19 22:38:38

Resolution: fixed
