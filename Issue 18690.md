# Issue 18690: Upgrade Cython to 0.23

archive/issues_018690.json:
```json
{
    "body": "CC:  @robertwb @kiwifb borassi\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18927\n\n",
    "created_at": "2015-07-20T10:05:01Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Upgrade Cython to 0.23",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18690",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @robertwb @kiwifb borassi



Issue created by migration from https://trac.sagemath.org/ticket/18927





---

archive/issue_comments_254416.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-05T17:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_254417.json:
```json
{
    "body": "And it is now officially released. I am ready to put this to positive review once we have a tarball.",
    "created_at": "2015-08-09T08:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254417",
    "user": "https://github.com/kiwifb"
}
```

And it is now officially released. I am ready to put this to positive review once we have a tarball.



---

archive/issue_comments_254418.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-09T20:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_254419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-09T20:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254419",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254420.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-09T21:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254420",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254421.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-11T11:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254421",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017867.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-11T11:23:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18690#event-17867"
}
```



---

archive/issue_comments_254422.json:
```json
{
    "body": "The testsuite fails on 32-bit for the record: http://trac.cython.org/ticket/857",
    "created_at": "2015-08-11T11:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254422",
    "user": "https://github.com/vbraun"
}
```

The testsuite fails on 32-bit for the record: http://trac.cython.org/ticket/857



---

archive/issue_comments_254423.json:
```json
{
    "body": "Reopening as it fails on some buildbots with `error: reference to \u2018uint64_t\u2019 is ambiguous`. I asked at https://groups.google.com/d/msg/cython-users/nOaoFjt8BLo/RI3vtsOMDwAJ for advice.",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254423",
    "user": "https://github.com/vbraun"
}
```

Reopening as it fails on some buildbots with `error: reference to ‘uint64_t’ is ambiguous`. I asked at https://groups.google.com/d/msg/cython-users/nOaoFjt8BLo/RI3vtsOMDwAJ for advice.



---

archive/issue_comments_254424.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254424",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_017868.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-11T19:03:29Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18690#event-17868"
}
```



---

archive/issue_comments_254425.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254425",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_254426.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-08-11T19:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254426",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_254427.json:
```json
{
    "body": "Regardless of how the cython list answers we should get rid of the global using namespace statements.\n----\nNew commits:",
    "created_at": "2015-08-11T19:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254427",
    "user": "https://github.com/vbraun"
}
```

Regardless of how the cython list answers we should get rid of the global using namespace statements.
----
New commits:



---

archive/issue_comments_254428.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-11T19:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254428",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254429.json:
```json
{
    "body": "I think it is a good idea but I cannot check the impact on a 32bit platform.",
    "created_at": "2015-08-11T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254429",
    "user": "https://github.com/kiwifb"
}
```

I think it is a good idea but I cannot check the impact on a 32bit platform.



---

archive/issue_comments_254430.json:
```json
{
    "body": "This shouldn't have any impact on 32-bit platforms, it just avoids kneecapping the compilation unit from the get-go.",
    "created_at": "2015-08-13T20:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254430",
    "user": "https://github.com/vbraun"
}
```

This shouldn't have any impact on 32-bit platforms, it just avoids kneecapping the compilation unit from the get-go.



---

archive/issue_comments_254431.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-22T18:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254432.json:
```json
{
    "body": "Can somebody click on positive review?",
    "created_at": "2015-08-22T18:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254432",
    "user": "https://github.com/vbraun"
}
```

Can somebody click on positive review?



---

archive/issue_comments_254433.json:
```json
{
    "body": "There.",
    "created_at": "2015-08-22T20:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254433",
    "user": "https://github.com/kiwifb"
}
```

There.



---

archive/issue_comments_254434.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-22T20:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254434",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254435.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-08-23T02:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_254436.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-08-23T02:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_254437.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-23T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254437",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254438.json:
```json
{
    "body": "In the meantime more stuff without namespace appeared...",
    "created_at": "2015-08-23T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254438",
    "user": "https://github.com/vbraun"
}
```

In the meantime more stuff without namespace appeared...



---

archive/issue_comments_254439.json:
```json
{
    "body": "Marginally related in a way. Should we have a separate audit of namespace and include a bit about them in the review section of the documentation?",
    "created_at": "2015-08-23T02:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254439",
    "user": "https://github.com/kiwifb"
}
```

Marginally related in a way. Should we have a separate audit of namespace and include a bit about them in the review section of the documentation?



---

archive/issue_comments_254440.json:
```json
{
    "body": "Really we should put C++ Sage stuff into a `sage` namespace, then its safe to pull symbols in via using declarations\n\n```\nnamespace sage {\n    namespace graph {\n        using std::vector;\n        using boost:make_iterator_property_map;\n        [...]\n    }\n}\n```\n",
    "created_at": "2015-08-23T02:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254440",
    "user": "https://github.com/vbraun"
}
```

Really we should put C++ Sage stuff into a `sage` namespace, then its safe to pull symbols in via using declarations

```
namespace sage {
    namespace graph {
        using std::vector;
        using boost:make_iterator_property_map;
        [...]
    }
}
```




---

archive/issue_comments_254441.json:
```json
{
    "body": "hum... Definitely need the namespace(s), that's just asking to be clobbered.",
    "created_at": "2015-08-23T03:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254441",
    "user": "https://github.com/kiwifb"
}
```

hum... Definitely need the namespace(s), that's just asking to be clobbered.



---

archive/issue_comments_254442.json:
```json
{
    "body": "Hello!\n\nThank you very much for telling me that `using namespace` is bad practice, and for correcting my code in `boost_interface.cpp`.\n\nHowever, I have used vectors also in Cython, in files `boost_graph.pyx` and `boost_graph.pxd`, and I haven't used namespaces (for instance, by writing `vector` and not `std::vector`). Is it fine? Otherwise, what is the correct way to do it?\n\nBest,\n\nMichele",
    "created_at": "2015-08-23T07:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254442",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Hello!

Thank you very much for telling me that `using namespace` is bad practice, and for correcting my code in `boost_interface.cpp`.

However, I have used vectors also in Cython, in files `boost_graph.pyx` and `boost_graph.pxd`, and I haven't used namespaces (for instance, by writing `vector` and not `std::vector`). Is it fine? Otherwise, what is the correct way to do it?

Best,

Michele



---

archive/issue_comments_254443.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T11:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254443",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_017869.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-23T11:35:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18690#event-17869"
}
```



---

archive/issue_comments_254444.json:
```json
{
    "body": "In Python its ok to import into the module namespace \"from libcpp.vector cimport vector\". Since there are no `#include` statements this will not cause conflicts in third-party headers. Its only in C++ that\n\n```\nusing namespace foo;\n#include <bar>\n```\n\nwill then make bar see all of foo's symbols (and potentially trip over some).\n\nActuall in Cython you have pxi files which behave like #include, but you shouldn't use them if you can avoid it; they are mostly for historical reasons.",
    "created_at": "2015-08-23T11:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254444",
    "user": "https://github.com/vbraun"
}
```

In Python its ok to import into the module namespace "from libcpp.vector cimport vector". Since there are no `#include` statements this will not cause conflicts in third-party headers. Its only in C++ that

```
using namespace foo;
#include <bar>
```

will then make bar see all of foo's symbols (and potentially trip over some).

Actuall in Cython you have pxi files which behave like #include, but you shouldn't use them if you can avoid it; they are mostly for historical reasons.
