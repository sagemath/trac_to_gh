# Issue 18690: Upgrade Cython to 0.23

archive/issues_018690.json:
```json
{
    "body": "CC:  @robertwb @kiwifb borassi\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18927\n\n",
    "created_at": "2015-07-20T10:05:01Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Upgrade Cython to 0.23",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18690",
    "user": "@jdemeyer"
}
```
CC:  @robertwb @kiwifb borassi



Issue created by migration from https://trac.sagemath.org/ticket/18927





---

archive/issue_comments_254723.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-05T17:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254723",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_254724.json:
```json
{
    "body": "And it is now officially released. I am ready to put this to positive review once we have a tarball.",
    "created_at": "2015-08-09T08:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254724",
    "user": "@kiwifb"
}
```

And it is now officially released. I am ready to put this to positive review once we have a tarball.



---

archive/issue_comments_254725.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-09T20:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254725",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_254726.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-09T20:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254726",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254727.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-09T21:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254727",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254728.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-11T11:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254728",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_254729.json:
```json
{
    "body": "The testsuite fails on 32-bit for the record: http://trac.cython.org/ticket/857",
    "created_at": "2015-08-11T11:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254729",
    "user": "@vbraun"
}
```

The testsuite fails on 32-bit for the record: http://trac.cython.org/ticket/857



---

archive/issue_comments_254730.json:
```json
{
    "body": "Reopening as it fails on some buildbots with `error: reference to \u2018uint64_t\u2019 is ambiguous`. I asked at https://groups.google.com/d/msg/cython-users/nOaoFjt8BLo/RI3vtsOMDwAJ for advice.",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254730",
    "user": "@vbraun"
}
```

Reopening as it fails on some buildbots with `error: reference to ‘uint64_t’ is ambiguous`. I asked at https://groups.google.com/d/msg/cython-users/nOaoFjt8BLo/RI3vtsOMDwAJ for advice.



---

archive/issue_comments_254731.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254731",
    "user": "@vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_254732.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2015-08-11T19:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254732",
    "user": "@vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_254733.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-08-11T19:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254733",
    "user": "@vbraun"
}
```

New commits:



---

archive/issue_comments_254734.json:
```json
{
    "body": "Regardless of how the cython list answers we should get rid of the global using namespace statements.\n----\nNew commits:",
    "created_at": "2015-08-11T19:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254734",
    "user": "@vbraun"
}
```

Regardless of how the cython list answers we should get rid of the global using namespace statements.
----
New commits:



---

archive/issue_comments_254735.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-11T19:32:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254735",
    "user": "@vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254736.json:
```json
{
    "body": "I think it is a good idea but I cannot check the impact on a 32bit platform.",
    "created_at": "2015-08-11T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254736",
    "user": "@kiwifb"
}
```

I think it is a good idea but I cannot check the impact on a 32bit platform.



---

archive/issue_comments_254737.json:
```json
{
    "body": "This shouldn't have any impact on 32-bit platforms, it just avoids kneecapping the compilation unit from the get-go.",
    "created_at": "2015-08-13T20:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254737",
    "user": "@vbraun"
}
```

This shouldn't have any impact on 32-bit platforms, it just avoids kneecapping the compilation unit from the get-go.



---

archive/issue_comments_254738.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-22T18:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254738",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254739.json:
```json
{
    "body": "Can somebody click on positive review?",
    "created_at": "2015-08-22T18:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254739",
    "user": "@vbraun"
}
```

Can somebody click on positive review?



---

archive/issue_comments_254740.json:
```json
{
    "body": "There.",
    "created_at": "2015-08-22T20:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254740",
    "user": "@kiwifb"
}
```

There.



---

archive/issue_comments_254741.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-22T20:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254741",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254742.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-08-23T02:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254742",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_254743.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-08-23T02:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254743",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_254744.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-23T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254744",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254745.json:
```json
{
    "body": "In the meantime more stuff without namespace appeared...",
    "created_at": "2015-08-23T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254745",
    "user": "@vbraun"
}
```

In the meantime more stuff without namespace appeared...



---

archive/issue_comments_254746.json:
```json
{
    "body": "Marginally related in a way. Should we have a separate audit of namespace and include a bit about them in the review section of the documentation?",
    "created_at": "2015-08-23T02:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254746",
    "user": "@kiwifb"
}
```

Marginally related in a way. Should we have a separate audit of namespace and include a bit about them in the review section of the documentation?



---

archive/issue_comments_254747.json:
```json
{
    "body": "Really we should put C++ Sage stuff into a `sage` namespace, then its safe to pull symbols in via using declarations\n\n```\nnamespace sage {\n    namespace graph {\n        using std::vector;\n        using boost:make_iterator_property_map;\n        [...]\n    }\n}\n```\n",
    "created_at": "2015-08-23T02:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254747",
    "user": "@vbraun"
}
```

Really we should put C++ Sage stuff into a `sage` namespace, then its safe to pull symbols in via using declarations

```
namespace sage {
    namespace graph {
        using std::vector;
        using boost:make_iterator_property_map;
        [...]
    }
}
```




---

archive/issue_comments_254748.json:
```json
{
    "body": "hum... Definitely need the namespace(s), that's just asking to be clobbered.",
    "created_at": "2015-08-23T03:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254748",
    "user": "@kiwifb"
}
```

hum... Definitely need the namespace(s), that's just asking to be clobbered.



---

archive/issue_comments_254749.json:
```json
{
    "body": "Hello!\n\nThank you very much for telling me that `using namespace` is bad practice, and for correcting my code in `boost_interface.cpp`.\n\nHowever, I have used vectors also in Cython, in files `boost_graph.pyx` and `boost_graph.pxd`, and I haven't used namespaces (for instance, by writing `vector` and not `std::vector`). Is it fine? Otherwise, what is the correct way to do it?\n\nBest,\n\nMichele",
    "created_at": "2015-08-23T07:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254749",
    "user": "borassi"
}
```

Hello!

Thank you very much for telling me that `using namespace` is bad practice, and for correcting my code in `boost_interface.cpp`.

However, I have used vectors also in Cython, in files `boost_graph.pyx` and `boost_graph.pxd`, and I haven't used namespaces (for instance, by writing `vector` and not `std::vector`). Is it fine? Otherwise, what is the correct way to do it?

Best,

Michele



---

archive/issue_comments_254750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T11:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254750",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_254751.json:
```json
{
    "body": "In Python its ok to import into the module namespace \"from libcpp.vector cimport vector\". Since there are no `#include` statements this will not cause conflicts in third-party headers. Its only in C++ that\n\n```\nusing namespace foo;\n#include <bar>\n```\n\nwill then make bar see all of foo's symbols (and potentially trip over some).\n\nActuall in Cython you have pxi files which behave like #include, but you shouldn't use them if you can avoid it; they are mostly for historical reasons.",
    "created_at": "2015-08-23T11:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18690#issuecomment-254751",
    "user": "@vbraun"
}
```

In Python its ok to import into the module namespace "from libcpp.vector cimport vector". Since there are no `#include` statements this will not cause conflicts in third-party headers. Its only in C++ that

```
using namespace foo;
#include <bar>
```

will then make bar see all of foo's symbols (and potentially trip over some).

Actuall in Cython you have pxi files which behave like #include, but you shouldn't use them if you can avoid it; they are mostly for historical reasons.
