# Issue 24042: Deprecation process for part of code in `RelativeFiniteFieldExtension`

Issue created by migration from https://trac.sagemath.org/ticket/24279

Original creator: klee

Original creation time: 2017-11-24 16:25:13

CC:  jsrn defeo jpflori dlucas

The ticket #24170 takes some core functionality implemented in #20284, aka `RelativeFiniteFieldExtension`, into an improved `vector_space` method of finite fields. The intention is to provide an easily accessible interface for the functionality. 

Thus in effect, (part of) the code introduced by #20284 for linear codes became redundant and possibly could be deprecated. The present ticket is created to discuss the deprecation process.


---

Comment by klee created at 2019-08-13 05:09:49

Changing type from defect to enhancement.


---

Comment by klee created at 2019-08-13 05:09:49

Changing component from finite rings to coding theory.


---

Comment by git created at 2019-08-13 05:10:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2019-08-13 05:11:17

Changing status from new to needs_review.


---

Comment by jsrn created at 2019-08-13 09:00:32

This is great - I had completely forgotten, that you had made #24170!

I've just played around with the `vector_space()` method, and there's one thing confusing me: it seems that the returned vector space representation is unique, as in only created once even if `vector_space` is called multiple timpes, but I can't seem to figure out why:


```
sage: F = GF(2^25)
sage: Fbig = F.extension(10)
sage: V = Fbig.vector_space(F)
sage: V2 = Fbig.vector_space(F)
sage: V is V2
True
```



---

Comment by klee created at 2019-08-13 09:45:02

Replying to [comment:6 jsrn]:
> This is great - I had completely forgotten, that you had made #24170!
> 
> I've just played around with the `vector_space()` method, and there's one thing confusing me: it seems that the returned vector space representation is unique, as in only created once even if `vector_space` is called multiple timpes, but I can't seem to figure out why:
> 
> {{{
> sage: F = GF(2^25)
> sage: Fbig = F.extension(10)
> sage: V = Fbig.vector_space(F)
> sage: V2 = Fbig.vector_space(F)
> sage: V is V2
> True
> }}}

Why is it confusing? This is normal behavior:


```
sage: F**2 is F**2
True
sage: F**2
Vector space of dimension 2 over Finite Field in z25 of size 2^25
```



---

Comment by jsrn created at 2019-08-13 10:03:40

Yes, I know. I'm trying to figure out how it got that behaviour. I thought that one had to subclass `UniqueRepresentation`, but your vector spaces don't seem to do that (neither does `FiniteField` for that matter, so there's just something about the structure of these parent objects that I don't understand).


---

Comment by jsrn created at 2019-08-13 10:12:29

Ah, now I see. I was confused. The vector space you return is simply a normal vector space as in `F**2`. What's special is the maps you compute, and the matrices stored in these - and they are *not* unique. In other words, every time you call `vector_space`, these matrices will be recomputed.

As was the case with `RelativeFiniteFieldExtension`, if this `vector_space` is used somewhere inside an object, across multiple method calls to that object, then it's the objects' job to store those maps as private fields.

This is a bit inelegant, but I guess something for the future, and not really relevant to this ticket. The solution we had envisioned in #21413, but where we admittedly didn't get far, would use an algebra-representation (instead of just a vector space), and this parent would store those maps inside it.


---

Comment by klee created at 2019-08-14 00:47:35

Replying to [comment:9 jsrn]:
> Ah, now I see. I was confused. The vector space you return is simply a normal vector space as in `F**2`. What's special is the maps you compute, and the matrices stored in these - and they are *not* unique. In other words, every time you call `vector_space`, these matrices will be recomputed.

Right.
 
> As was the case with `RelativeFiniteFieldExtension`, if this `vector_space` is used somewhere inside an object, across multiple method calls to that object, then it's the objects' job to store those maps as private fields.

It is so now.
> 
> This is a bit inelegant, but I guess something for the future, and not really relevant to this ticket. The solution we had envisioned in #21413, but where we admittedly didn't get far, would use an algebra-representation (instead of just a vector space), and this parent would store those maps inside it.

I don't have a clear idea on this issue. I just feel that instead of inventing extensions as in #21413, using (or improving if necessary) the general conversion mechanism in Sage is better. So a "conversion model" keeps all those maps and return one when requested...


---

Comment by jsrn created at 2019-08-14 07:31:46

Replying to [comment:10 klee]:
> I don't have a clear idea on this issue. I just feel that instead of inventing extensions as in #21413, using (or improving if necessary) the general conversion mechanism in Sage is better. So a "conversion model" keeps all those maps and return one when requested...

Well, #21413 tries to make it possible to represent a mathematical object (ring extensions as algebras over the base ring), which is not currently possible to represent. In that sense it is much more ambitious than #24170. But of course, that same ambition seems to also have killed its progress.

Anyway, all of that has nothing to do with this ticket.


---

Comment by git created at 2019-08-19 00:45:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by klee created at 2019-08-23 21:26:31

Anything to do?


---

Comment by git created at 2019-09-16 07:14:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by klee created at 2019-12-04 08:15:52

Changing status from needs_review to needs_work.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by git created at 2021-05-28 01:10:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by klee created at 2021-05-28 01:12:41

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.


---

Comment by git created at 2022-01-05 01:59:55

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by klee created at 2022-01-05 02:04:06

It is a shame that we have this cleaning ticket still open for years.

Please let this get in.


---

Comment by vdelecroix created at 2022-01-05 16:47:14

Looks reasonable.


---

Comment by vdelecroix created at 2022-01-05 16:47:14

Changing status from needs_review to positive_review.


---

Comment by klee created at 2022-01-06 00:34:25

Thanks!


---

Comment by vbraun created at 2022-02-16 23:56:52

Resolution: fixed
