# Issue 11930: Make bzip2 a standard (instead of base) package

archive/issues_011930.json:
```json
{
    "body": "Assignee: tbd\n\nIf we add support for gzipped files to `sage-spkg`, we can easily make `bzip2` a standard package instead of a base package.  This fits well with the theme of #11073.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12102\n\n",
    "created_at": "2011-11-30T11:11:37Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Make bzip2 a standard (instead of base) package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11930",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd

If we add support for gzipped files to `sage-spkg`, we can easily make `bzip2` a standard package instead of a base package.  This fits well with the theme of #11073.

Issue created by migration from https://trac.sagemath.org/ticket/12102





---

archive/issue_comments_136648.json:
```json
{
    "body": "Attachment [12102_bzip2_standard.patch](tarball://root/attachments/some-uuid/ticket12102/12102_bzip2_standard.patch) by @jdemeyer created at 2012-03-23 14:26:23",
    "created_at": "2012-03-23T14:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136648",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [12102_bzip2_standard.patch](tarball://root/attachments/some-uuid/ticket12102/12102_bzip2_standard.patch) by @jdemeyer created at 2012-03-23 14:26:23



---

archive/issue_comments_136649.json:
```json
{
    "body": "Is this ready for review?",
    "created_at": "2012-03-23T15:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136649",
    "user": "https://github.com/jhpalmieri"
}
```

Is this ready for review?



---

archive/issue_comments_136650.json:
```json
{
    "body": "If you want, it's ready for review.  But to be honest, I haven't really tested it.",
    "created_at": "2012-03-23T15:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136650",
    "user": "https://github.com/jdemeyer"
}
```

If you want, it's ready for review.  But to be honest, I haven't really tested it.



---

archive/issue_comments_136651.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-25T09:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136651",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_136652.json:
```json
{
    "body": "I see that the old package compiles with commands like this:\n\n```\ngcc -fPIC -c blocksort.c\n```\n\nwhile the new one compiles with\n\n```\ngcc -fPIC -O2 -g  -c blocksort.c\n```\n\n`-O2` seems like a fine idea, but do we need `-g`? I don't know much about debugging: since this is a pretty well-established package, there aren't like to be bugs in it, so can we omit `-g`, or would that mess up debugging for other parts of Sage? Should we add a test for `SAGE_DEBUG` so that we at least have the option to turn it off? I notice that the new `libbz2.a` is more than twice the size of the old one, at least on sage.math.",
    "created_at": "2012-03-26T21:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136652",
    "user": "https://github.com/jhpalmieri"
}
```

I see that the old package compiles with commands like this:

```
gcc -fPIC -c blocksort.c
```

while the new one compiles with

```
gcc -fPIC -O2 -g  -c blocksort.c
```

`-O2` seems like a fine idea, but do we need `-g`? I don't know much about debugging: since this is a pretty well-established package, there aren't like to be bugs in it, so can we omit `-g`, or would that mess up debugging for other parts of Sage? Should we add a test for `SAGE_DEBUG` so that we at least have the option to turn it off? I notice that the new `libbz2.a` is more than twice the size of the old one, at least on sage.math.



---

archive/issue_comments_136653.json:
```json
{
    "body": "Replying to [comment:10 jhpalmieri]:\n> `-O2` seems like a fine idea, but do we need `-g`?\nI thought it was \"standard practice\" to compile all Sage packages using `-g` (regardless of `SAGE_DEBUG`).  With GCC, files only get larger when compiled with debug information, but the code is exactly the same.  So programs should run equally fast with or without debugging information (except for the I/O effects of having larger files).",
    "created_at": "2012-03-27T06:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136653",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:10 jhpalmieri]:
> `-O2` seems like a fine idea, but do we need `-g`?
I thought it was "standard practice" to compile all Sage packages using `-g` (regardless of `SAGE_DEBUG`).  With GCC, files only get larger when compiled with debug information, but the code is exactly the same.  So programs should run equally fast with or without debugging information (except for the I/O effects of having larger files).



---

archive/issue_comments_136654.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-27T17:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136654",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136655.json:
```json
{
    "body": "It looks to me as though `SAGE_DEBUG` is used somewhat inconsistently. Since William (among others) is concerned about the size of the Sage distribution, I think at some point we should consider not using `-g`. Maybe don't use it for `bdists`? Anyway, this is not something that should be decided here, and I'm happy with the changes in this ticket.",
    "created_at": "2012-03-27T17:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136655",
    "user": "https://github.com/jhpalmieri"
}
```

It looks to me as though `SAGE_DEBUG` is used somewhat inconsistently. Since William (among others) is concerned about the size of the Sage distribution, I think at some point we should consider not using `-g`. Maybe don't use it for `bdists`? Anyway, this is not something that should be decided here, and I'm happy with the changes in this ticket.



---

archive/issue_comments_136656.json:
```json
{
    "body": "Let me mention that I also tested upgrading from sage-4.5 and sage-4.8, no problems.",
    "created_at": "2012-03-27T20:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136656",
    "user": "https://github.com/jdemeyer"
}
```

Let me mention that I also tested upgrading from sage-4.5 and sage-4.8, no problems.



---

archive/issue_events_011980.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T10:04:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11930#event-11980"
}
```



---

archive/issue_comments_136657.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-28T10:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136657",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_136658.json:
```json
{
    "body": "By the way, the file `spkg/base/README.txt` should be modified to reflect this change. Is the directory `spkg/base` going to disappear altogether soon? If so, we don't have to worry about this.",
    "created_at": "2012-04-03T18:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136658",
    "user": "https://github.com/jhpalmieri"
}
```

By the way, the file `spkg/base/README.txt` should be modified to reflect this change. Is the directory `spkg/base` going to disappear altogether soon? If so, we don't have to worry about this.



---

archive/issue_comments_136659.json:
```json
{
    "body": "Replying to [comment:16 jhpalmieri]:\n> By the way, the file `spkg/base/README.txt` should be modified to reflect this change.\nGoing to do this in #12631.\n\n> Is the directory `spkg/base` going to disappear altogether soon?\nProbably not.  Eventually, I would like prereq to become a top-level `./configure` for Sage, but I haven't thought nearly enough about this to see how that would work.",
    "created_at": "2012-04-04T07:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11930#issuecomment-136659",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:16 jhpalmieri]:
> By the way, the file `spkg/base/README.txt` should be modified to reflect this change.
Going to do this in #12631.

> Is the directory `spkg/base` going to disappear altogether soon?
Probably not.  Eventually, I would like prereq to become a top-level `./configure` for Sage, but I haven't thought nearly enough about this to see how that would work.
