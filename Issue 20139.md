# Issue 20139: LoggingBackend - delegating MIP backend class that logs input/output to backend methods

Issue created by migration from Trac.

Original creator: mkoeppe

Original creation time: 2016-04-06 21:26:41

CC:  dimpase vdelecroix vbraun nthiery

Keywords: lp

This is a debugging tool. The delegating class looks much like `HybridBackend` from #18735.

The logging should be done (optionally) in a way that testcases using `MixedIntegerLinearProgram` such as the the one reported in #18572 are translated to testcases for backends, suitable for copy-pasting into new `_test` methods (#20323).


---

Comment by git created at 2016-04-10 07:42:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-04-10 07:53:18

The branch is on top of #20406.
The `_test` methods that this class generates mimic the ones written in #20323, which is why I mark it as a dependency.


---

Comment by git created at 2016-04-15 00:29:49

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mkoeppe created at 2016-04-15 00:31:44

rebased on top of current #20406.


---

Comment by mkoeppe created at 2016-04-15 00:31:44

Changing status from new to needs_review.


---

Comment by dimpase created at 2016-04-18 08:27:18

it would be great to have a concrete explained example in the docs like "suppose we want to test that foo does baz. Then we..."


---

Comment by git created at 2016-04-27 08:07:09

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2016-04-27 08:07:48

I've added a better example.


---

Comment by dimpase created at 2016-04-27 09:01:57

there is no trace of this backend in the docs. You probably want to add it to some index in an rst file...


---

Comment by git created at 2016-04-27 20:19:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-04-27 20:21:57

Thanks for the reminder; I've added it to the documentation index.


---

Comment by dimpase created at 2016-04-28 00:13:26

in 

```
call `compute_something` in the doctest
```

`compute_something` is being typeset in the doc as a maths expression. I guess it needs `:func:` prefix.

As well, after EXAMPLES there is a long list

```
add_col(*args, **kwdargs)
add_linear_constraint(*args, **kwdargs)
...
write_mps(*args, **kwdargs)
```

Is it how it is meant to look?


---

Comment by git created at 2016-04-28 00:48:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-04-28 00:52:29

I've fixed the markup of that function, actually using double-backquotes.

The long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. 
I also don't know how to remove the strange stuff at the very bottom of that page.


---

Comment by dimpase created at 2016-04-28 08:14:22

patchbots complain

```
Missing doctests in numerical/backends/logging_backend.py: 1 / 5 = 20%
```



---

Comment by dimpase created at 2016-04-28 08:52:36

Replying to [comment:15 mkoeppe]:
> The long list is a list of all instrumented methods that comes from the backend. I don't know if it should be suppressed, and if yes, how. 

You can place `.. auto***` directives in the docstrings of classes; although I don't exactly know how to achieve what we want. See the doc here:
http://www.sphinx-doc.org/en/stable/ext/autodoc.html#confval-autoclass_content

and there are examples in src/sage/ doing something like this: `grep -R "\.\. auto" *` will show a lot...


> I also don't know how to remove the strange stuff at the very bottom of that page. 
no idea either...


---

Comment by git created at 2016-04-29 22:11:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by mkoeppe created at 2016-04-29 22:13:54

Found  a solution for the documentation.


---

Comment by git created at 2016-04-29 22:54:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-29 23:47:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-30 00:01:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2016-05-03 19:41:47

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2016-05-03 19:41:47

looks good to me. By the way, you use deprecated `db()` stuff. Are you going to undo #2536 ?


---

Comment by mkoeppe created at 2016-05-03 19:47:07

I'm not using it.
The `LoggingBackend` simply instruments every method that the backend has, including stuff that I never heard of or that was deprecated a decade ago.


---

Comment by dimpase created at 2016-05-03 19:49:18

Ah, OK, never mind then (I had a quick look at generated docs, and saw that `db()` there...)


---

Comment by vbraun created at 2016-05-04 17:10:38

Resolution: fixed
