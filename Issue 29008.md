# Issue 29008: spkg-configure for fplll

Issue created by migration from https://trac.sagemath.org/ticket/29245

Original creator: mjo

Original creation time: 2020-02-24 17:40:44

CC:  embray dimpase mkoeppe â€‹isuruf fbissey

fplll ships a pkg-config file, is slow to build, and has only one dependency that was already spkg-configurified.

It is packaged for a few distros, so let's use it.


---

Comment by mjo created at 2020-02-24 17:46:03

Changing status from new to needs_review.


---

Comment by mjo created at 2020-02-24 17:46:03

New commits:


---

Comment by mkoeppe created at 2020-02-24 18:01:22

Could you add `build/pkgs/fplll/distros/` please (see #29129)?


---

Comment by git created at 2020-02-24 18:20:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2020-02-24 18:26:00

Sure. I'll add the others if people can tell me what to stick in the text files. For example I'm pretty sure you need both the main package and -dev on Debian, but who knows. I'm also pretty sure that someone is going to tell me the pc file is missing somewhere and make me do a header/library search...


---

Comment by mkoeppe created at 2020-02-24 18:33:26

https://repology.org/ has the info you need


---

Comment by mkoeppe created at 2020-02-24 18:34:13

And this all can be tested using tox.


---

Comment by dimpase created at 2020-02-25 10:38:37

on debian one needs `libfplll-dev` and (probably) `fplll-tools`
- the latter is very small, so it doesn't hurt to ask for it be installed.


---

Comment by git created at 2020-02-25 15:10:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2020-02-27 07:10:00

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2020-02-27 07:10:00

Debian fplll package is broken - fplll/pruner/ headers are missing.
So one gets 

```
[fpylll-0.5.1dev]     building 'fpylll.fplll.integer_matrix' extension
[fpylll-0.5.1dev]     creating build/temp.linux-x86_64-2.7/build/src/fpylll/fplll
[fpylll-0.5.1dev]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -Isrc/fpylll/fplll -I/home/dimpase/sage/local/lib/python2.7/site-packages/cysignals -I/home/dimpase/sage/local/include -I/home/dimpase/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dimpase/sage/local/include/python2.7 -c build/src/fpylll/fplll/integer_matrix.cpp -o build/temp.linux-x86_64-2.7/build/src/fpylll/fplll/integer_matrix.o -std=c++11
[fpylll-0.5.1dev]     build/src/fpylll/fplll/integer_matrix.cpp:698:10: fatal error: fplll/pruner/pruner.h: No such file or directory
[fpylll-0.5.1dev]      #include "fplll/pruner/pruner.h"
[fpylll-0.5.1dev]               ^~~~~~~~~~~~~~~~~~~~~~~
[fpylll-0.5.1dev]     compilation terminated.
[fpylll-0.5.1dev]     error: command 'gcc' failed with exit status 1
```

I propose to include a check for this header in the macro.


---

Comment by dimpase created at 2020-02-27 07:16:03

In fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3

so, just updating the minimal version will do.


---

Comment by git created at 2020-02-27 13:00:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2020-02-27 13:00:42

Replying to [comment:10 dimpase]:
> In fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3
> 
> so, just updating the minimal version will do.

Thanks, fixed.


---

Comment by dimpase created at 2020-03-02 03:44:43

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2020-03-03 23:21:22

Resolution: fixed
