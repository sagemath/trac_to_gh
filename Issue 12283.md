# Issue 12283: Make Airy functions symbolical

archive/issues_012283.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @kcrisman @burcin @benjaminfjones @fredrik-johansson @eviatarbach\n\nKeywords: Airy functions\n\nCurrently sage can evaluate airy functions numerically:\n\n```\nsage: airy_ai(1.4)\n0.0820380498076\n```\n\n\nbut it doesn't work symbolically\n\n\n```\nsage: airy_ai(x)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/oscar/Escritorio/tesis/calculos/<ipython console> in <module>()\n\n/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/functions/special.pyc in airy_ai(x)\n    621    \"\"\"\n    622    _init()\n--> 623    return RDF(meval(\"airy_ai(%s)\"%RDF(x)))\n    624 \n    625 def airy_bi(x):\n\n/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7102)()\n\n/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4221)()\n\n/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._real_double_ (sage/symbolic/expression.cpp:5391)()\n\n/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._eval_self (sage/symbolic/expression.cpp:4898)()\n\nTypeError: Cannot evaluate symbolic expression to a numeric value.\n```\n\n\nWe should make it symbolical for both airy_ai and airy_bi, as well as their derivatives.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12455\n\n",
    "created_at": "2012-02-07T04:47:04Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Make Airy functions symbolical",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12283",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```
Assignee: tbd

CC:  @kcrisman @burcin @benjaminfjones @fredrik-johansson @eviatarbach

Keywords: Airy functions

Currently sage can evaluate airy functions numerically:

```
sage: airy_ai(1.4)
0.0820380498076
```


but it doesn't work symbolically


```
sage: airy_ai(x)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/oscar/Escritorio/tesis/calculos/<ipython console> in <module>()

/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/functions/special.pyc in airy_ai(x)
    621    """
    622    _init()
--> 623    return RDF(meval("airy_ai(%s)"%RDF(x)))
    624 
    625 def airy_bi(x):

/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:7102)()

/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.NamedConvertMap._call_ (sage/structure/coerce_maps.c:4221)()

/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._real_double_ (sage/symbolic/expression.cpp:5391)()

/home/oscar/sage/sage-4.7.1/local/lib/python2.6/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._eval_self (sage/symbolic/expression.cpp:4898)()

TypeError: Cannot evaluate symbolic expression to a numeric value.
```


We should make it symbolical for both airy_ai and airy_bi, as well as their derivatives.

Issue created by migration from https://trac.sagemath.org/ticket/12455





---

archive/issue_comments_144259.json:
```json
{
    "body": "Changing assignee from tbd to @burcin.",
    "created_at": "2012-02-07T04:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144259",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing assignee from tbd to @burcin.



---

archive/issue_comments_144260.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to symbolics.",
    "created_at": "2012-02-07T04:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144260",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing component from PLEASE CHANGE to symbolics.



---

archive/issue_comments_144261.json:
```json
{
    "body": "Changing assignee from @burcin to olazo.",
    "created_at": "2012-02-07T04:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144261",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing assignee from @burcin to olazo.



---

archive/issue_comments_144262.json:
```json
{
    "body": "Attachment [trac_12455-symbolic_airy.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy.patch) by olazo created at 2012-02-07 08:05:17\n\nI've added a patch, which should do the job, but it has a few shortcomings:\n\n1.-The resulting symbolic functions seem to remain on hold:\n\n```\nsage: airy_ai(1.0)\nairy_ai(1.00000000000000)\n```\n\nYou need to force it to evaluate:\n\n```\nsage: airy_ai(1.0).n()\n0.135292416313\n```\n\n\n2.- This doesn't work:\n\n```\nsage: airy_ai(2.0).n(digits=100)\n0.0349241304233\n```\n\n3.- There is no evaluation for airy_ai_prime or airy_bi_prime\n\n4.- I'm not sure about how should the functions be called, some possible schemes are\n\n{ai,bi,aip,bip}\n{ai,bai,aip,baip}\n{airy_ai,airy_bi,airy_ai_prime,airy_bi_prime}\n\nAnd also whether the latex representation should be capitalized or not. I chose the third scheme, and capitalized typesetting.",
    "created_at": "2012-02-07T08:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144262",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Attachment [trac_12455-symbolic_airy.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy.patch) by olazo created at 2012-02-07 08:05:17

I've added a patch, which should do the job, but it has a few shortcomings:

1.-The resulting symbolic functions seem to remain on hold:

```
sage: airy_ai(1.0)
airy_ai(1.00000000000000)
```

You need to force it to evaluate:

```
sage: airy_ai(1.0).n()
0.135292416313
```


2.- This doesn't work:

```
sage: airy_ai(2.0).n(digits=100)
0.0349241304233
```

3.- There is no evaluation for airy_ai_prime or airy_bi_prime

4.- I'm not sure about how should the functions be called, some possible schemes are

{ai,bi,aip,bip}
{ai,bai,aip,baip}
{airy_ai,airy_bi,airy_ai_prime,airy_bi_prime}

And also whether the latex representation should be capitalized or not. I chose the third scheme, and capitalized typesetting.



---

archive/issue_comments_144263.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-07T08:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144263",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_144264.json:
```json
{
    "body": "Good start.  A few responses.\n* You'll need to have more methods.  We should probably use [mpmath](http://mpmath.googlecode.com/svn/trunk/doc/build/functions/bessel.html#airy-and-scorer-functions) to evaluate these functions in general, though using [the SciPy version](http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.airy.html) could be useful over RDF.  See #11888 for a very recent example of this kind of thing and how to implement it.\n* That should also fix precision issues, if properly done, I think.\n* SciPy has evaluation for the airy primes.  I think that Maxima has these too.  (Cc:ing FJ in case he has plans to add these to mpmath.)\n* We should have translations of these to Maxima and friends.  That will probably help us name them.   What do Mathematica and Maple call them?\n* All methods, including initialization methods, need doctests.  Many of the new symbolic functions added at [symbolics](symbolics)/functions will have nice models to follow.\n\nThanks for getting us a start on this!   That's great.",
    "created_at": "2012-02-07T13:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144264",
    "user": "https://github.com/kcrisman"
}
```

Good start.  A few responses.
* You'll need to have more methods.  We should probably use [mpmath](http://mpmath.googlecode.com/svn/trunk/doc/build/functions/bessel.html#airy-and-scorer-functions) to evaluate these functions in general, though using [the SciPy version](http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.airy.html) could be useful over RDF.  See #11888 for a very recent example of this kind of thing and how to implement it.
* That should also fix precision issues, if properly done, I think.
* SciPy has evaluation for the airy primes.  I think that Maxima has these too.  (Cc:ing FJ in case he has plans to add these to mpmath.)
* We should have translations of these to Maxima and friends.  That will probably help us name them.   What do Mathematica and Maple call them?
* All methods, including initialization methods, need doctests.  Many of the new symbolic functions added at [symbolics](symbolics)/functions will have nice models to follow.

Thanks for getting us a start on this!   That's great.



---

archive/issue_comments_144265.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-07T13:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144265",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144266.json:
```json
{
    "body": "mpmath has the derivatives (as well as integrals) -- just use the optional 'derivative' parameter.",
    "created_at": "2012-02-07T14:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144266",
    "user": "https://github.com/fredrik-johansson"
}
```

mpmath has the derivatives (as well as integrals) -- just use the optional 'derivative' parameter.



---

archive/issue_comments_144267.json:
```json
{
    "body": "> mpmath has the derivatives (as well as integrals) -- just use the optional 'derivative' parameter.\nOk, I didn't realize that was what that parameter was about.  Though in retrospect it seems obvious!",
    "created_at": "2012-02-07T14:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144267",
    "user": "https://github.com/kcrisman"
}
```

> mpmath has the derivatives (as well as integrals) -- just use the optional 'derivative' parameter.
Ok, I didn't realize that was what that parameter was about.  Though in retrospect it seems obvious!



---

archive/issue_comments_144268.json:
```json
{
    "body": "On second thought, I think it would be better to use the airy equation to calculate derivatives or order higher than 1. Like\n\n\n```\nsage: airy_ai(2,x)\nx*airy_ai(x)\nsage: airy_ai(3,x)\nairy_ai(x)+x*airy_ai_prime(x)\nsage: diff(airy_ai(x),x,2)\nx*airy_ai(x)\nsage: diff(airy_ai(x),x,3)\nairy_ai(x)+x*airy_ai_prime(x)\n```\n\n\nwhich is very likey to be the way mpmath calculates higher order derivatives. Integrals however, would be returned as:\n\n\n```\nsage: airy_ai(-1,x)\nairy_ai(-1,x)\nsage: integral(airy_ai(x),x)\nairy_ai(-1,x)\n```\n\n\nwhat do you think?",
    "created_at": "2012-02-07T22:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144268",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

On second thought, I think it would be better to use the airy equation to calculate derivatives or order higher than 1. Like


```
sage: airy_ai(2,x)
x*airy_ai(x)
sage: airy_ai(3,x)
airy_ai(x)+x*airy_ai_prime(x)
sage: diff(airy_ai(x),x,2)
x*airy_ai(x)
sage: diff(airy_ai(x),x,3)
airy_ai(x)+x*airy_ai_prime(x)
```


which is very likey to be the way mpmath calculates higher order derivatives. Integrals however, would be returned as:


```
sage: airy_ai(-1,x)
airy_ai(-1,x)
sage: integral(airy_ai(x),x)
airy_ai(-1,x)
```


what do you think?



---

archive/issue_comments_144269.json:
```json
{
    "body": "Attachment [trac_12455-symbolic_airy2.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy2.patch) by olazo created at 2012-02-19 01:01:55\n\nI just added a new patch. The new version includes generalized derivatives, evaluation with mpmath, and special values of the functions and their derivatives. Just a one doubt, the coverage is:\n\n\n```\noscar@oscar-netbook:~$ sage -coverage airy.py\nSCORE /home/oscar/sage/my_patches/airy.py: 76% (20 of 26)\n\nMissing documentation:\n\t * __init__(self):\n\t * __init__(self):\n\t * __init__(self):\n\t * __init__(self):\n\t * __init__(self):\n\t * __init__(self):\n\n\nPossibly wrong (function name doesn't occur in doctests):\n\t * _derivative_(self, x, diff_param=None):\n\t * _eval_(self, x):\n\t * _evalf_(self, x, parent=None):\n\t * _derivative_(self, x, diff_param=None):\n\t * _eval_(self, x):\n\t * _evalf_(self, x, parent=None):\n\t * _derivative_(self, alpha, *args, **kwds):\n\t * _eval_(self, alpha, *args):\n\t * _evalf_(self, alpha, x, parent=None):\n\t * _derivative_(self, x, diff_param=None):\n\t * _eval_(self, x):\n\t * _evalf_(self, x, parent=None):\n\t * _derivative_(self, x, diff_param=None):\n\t * _eval_(self, x):\n\t * _evalf_(self, x, parent=None):\n\t * _derivative_(self, alpha, *args, **kwds):\n\t * _eval_(self, alpha, *args):\n\t * _evalf_(self, alpha, x, parent=None):\n```\n\n\nIs that important?",
    "created_at": "2012-02-19T01:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144269",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Attachment [trac_12455-symbolic_airy2.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy2.patch) by olazo created at 2012-02-19 01:01:55

I just added a new patch. The new version includes generalized derivatives, evaluation with mpmath, and special values of the functions and their derivatives. Just a one doubt, the coverage is:


```
oscar@oscar-netbook:~$ sage -coverage airy.py
SCORE /home/oscar/sage/my_patches/airy.py: 76% (20 of 26)

Missing documentation:
	 * __init__(self):
	 * __init__(self):
	 * __init__(self):
	 * __init__(self):
	 * __init__(self):
	 * __init__(self):


Possibly wrong (function name doesn't occur in doctests):
	 * _derivative_(self, x, diff_param=None):
	 * _eval_(self, x):
	 * _evalf_(self, x, parent=None):
	 * _derivative_(self, x, diff_param=None):
	 * _eval_(self, x):
	 * _evalf_(self, x, parent=None):
	 * _derivative_(self, alpha, *args, **kwds):
	 * _eval_(self, alpha, *args):
	 * _evalf_(self, alpha, x, parent=None):
	 * _derivative_(self, x, diff_param=None):
	 * _eval_(self, x):
	 * _evalf_(self, x, parent=None):
	 * _derivative_(self, x, diff_param=None):
	 * _eval_(self, x):
	 * _evalf_(self, x, parent=None):
	 * _derivative_(self, alpha, *args, **kwds):
	 * _eval_(self, alpha, *args):
	 * _evalf_(self, alpha, x, parent=None):
```


Is that important?



---

archive/issue_comments_144270.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-19T01:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144270",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144271.json:
```json
{
    "body": "> Is that important?\nThe second part isn't, as you are implicitly testing these 'hidden' functions.  By the way,\n\n```\nExamples::\n```\n\nshould be \n\n```\nEXAMPLES::\n```\n\nHowever, the first part (the initialization methods) is important for our coverage.   You can just do a couple from the big examples that you have.\n\nDo these pass doctests?  I'm surprised that \n\n```\nsage: airy_ai_simple= FunctionAiryAiSimple()\n```\n\nwould work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.\n\nAnyway, overall on a quick glance this looks great; unfortunately, I won't have time to review it properly soon - hopefully someone else will, because you put a lot of great work into it and we should totally have these symbolic.  Thanks!",
    "created_at": "2012-02-19T01:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144271",
    "user": "https://github.com/kcrisman"
}
```

> Is that important?
The second part isn't, as you are implicitly testing these 'hidden' functions.  By the way,

```
Examples::
```

should be 

```
EXAMPLES::
```

However, the first part (the initialization methods) is important for our coverage.   You can just do a couple from the big examples that you have.

Do these pass doctests?  I'm surprised that 

```
sage: airy_ai_simple= FunctionAiryAiSimple()
```

would work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.

Anyway, overall on a quick glance this looks great; unfortunately, I won't have time to review it properly soon - hopefully someone else will, because you put a lot of great work into it and we should totally have these symbolic.  Thanks!



---

archive/issue_comments_144272.json:
```json
{
    "body": "> Do these pass doctests?  I'm surprised that \n> {{{\n> sage: airy_ai_simple= FunctionAiryAiSimple()\n> }}}\n> would work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.\n\nIt looks like they do:\n\n```\noscar@oscar-netbook:~$ sage -coverage airy.py\nsage -t  \"/home/oscar/sage/my_patches/airy.py\"              \n\t [51.5 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 51.7 seconds\n```\n\nWhy shouldn't they? I'll take care of the __init__ functions.",
    "created_at": "2012-02-19T02:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144272",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

> Do these pass doctests?  I'm surprised that 
> {{{
> sage: airy_ai_simple= FunctionAiryAiSimple()
> }}}
> would work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.

It looks like they do:

```
oscar@oscar-netbook:~$ sage -coverage airy.py
sage -t  "/home/oscar/sage/my_patches/airy.py"              
	 [51.5 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 51.7 seconds
```

Why shouldn't they? I'll take care of the __init__ functions.



---

archive/issue_comments_144273.json:
```json
{
    "body": "I'm sorry, that should be:\n\n```\noscar@oscar-netbook:~$ sage -t airy.py\nsage -t  \"/home/oscar/sage/my_patches/airy.py\"              \n\t [51.5 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 51.7 seconds\n```\n\n(the command was sage -t)",
    "created_at": "2012-02-19T02:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144273",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

I'm sorry, that should be:

```
oscar@oscar-netbook:~$ sage -t airy.py
sage -t  "/home/oscar/sage/my_patches/airy.py"              
	 [51.5 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 51.7 seconds
```

(the command was sage -t)



---

archive/issue_comments_144274.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-19T03:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144274",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144275.json:
```json
{
    "body": "\n```\nsage: airy_ai_simple= FunctionAiryAiSimple()\n```\n\n> would work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.\n\nI'm just surprised this doesn't cause trouble.  \n\nOn another note, this apparently does something weird when applied to 5.0.beta4.   Namely, Sage won't start:\n\n```\n---> 65 from sage.functions.all import sin, cos\n\nImportError: cannot import name sin\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\n\nI'll spare you the rest of the traceback.  I think there is some kind of circular import thing going on here, but I don't understand imports that well.  Perhaps moving the import of airy to further down (after trig functions) would help - that's a totally uninformed guess, of course.",
    "created_at": "2012-02-19T03:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144275",
    "user": "https://github.com/kcrisman"
}
```


```
sage: airy_ai_simple= FunctionAiryAiSimple()
```

> would work when you run tests, assuming you didn't import `FunctionAiryAiSimple` into the global namespace.

I'm just surprised this doesn't cause trouble.  

On another note, this apparently does something weird when applied to 5.0.beta4.   Namely, Sage won't start:

```
---> 65 from sage.functions.all import sin, cos

ImportError: cannot import name sin
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```

I'll spare you the rest of the traceback.  I think there is some kind of circular import thing going on here, but I don't understand imports that well.  Perhaps moving the import of airy to further down (after trig functions) would help - that's a totally uninformed guess, of course.



---

archive/issue_comments_144276.json:
```json
{
    "body": "Attachment [trac_12455-symbolic_airy3.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy3.patch) by olazo created at 2012-02-21 18:44:12\n\nI just added a new patch, now with 100 % test coverage, but I still get this message:\n\n\n```\noscar@oscar-netbook:~$ sage -coverage /home/oscar/sage/my_patches/airy.py ----------------------------------------------------------------------\n/home/oscar/sage/my_patches/airy.py\nERROR: Please add a `TestSuite(s).run()` doctest.\nSCORE /home/oscar/sage/my_patches/airy.py: 100% (26 of 26)\n----------------------------------------------------------------------\n```\n\n\nWhat is this TestSuite thing? I also changed the order in which functions are initialized, so that airy_ai_general is initialized first. Doing it last made some symbolic operations, such as simplify not work (It said something about airy_ai requiring 2 arguments).",
    "created_at": "2012-02-21T18:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144276",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Attachment [trac_12455-symbolic_airy3.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-symbolic_airy3.patch) by olazo created at 2012-02-21 18:44:12

I just added a new patch, now with 100 % test coverage, but I still get this message:


```
oscar@oscar-netbook:~$ sage -coverage /home/oscar/sage/my_patches/airy.py ----------------------------------------------------------------------
/home/oscar/sage/my_patches/airy.py
ERROR: Please add a `TestSuite(s).run()` doctest.
SCORE /home/oscar/sage/my_patches/airy.py: 100% (26 of 26)
----------------------------------------------------------------------
```


What is this TestSuite thing? I also changed the order in which functions are initialized, so that airy_ai_general is initialized first. Doing it last made some symbolic operations, such as simplify not work (It said something about airy_ai requiring 2 arguments).



---

archive/issue_comments_144277.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-21T18:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144277",
    "user": "https://trac.sagemath.org/admin/accounts/users/olazo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144278.json:
```json
{
    "body": "Hi Oscar,\nI haven't looked over your patch very closely yet, but I plan to. One comment on first glance: in several places you call\n\n\n```\nreturn mpmath_utils.call(airy_bi_mpmath, x, derivative=1, parent=RR) \n```\n\n\nbut I think we want to preserve the parent of `x` instead of forcing it to be `RR`. Importing the `parent` function from `sage.structure.coerce` using a different name like `sage_parent` (because as burcin pointed out in one of my tickets, parent is the name of the parameter in `_evalf_`) and doing something like\n\n\n```\nfrom sage.structure.coerce import parent as sage_parent\nR = parent or sage_parent(x)\nreturn mpmath_utils.call(airy_bi_mpmath, x, derivative=1, parent=R)\n```\n\n\nwould do the trick I think. \n\nOther comment: can we add conversions to Maxima along with the Mma conversion you included? Here is a link to the appropriate chapter in the manual: http://maxima.sourceforge.net/docs/manual/en/maxima_15.html#SEC80",
    "created_at": "2012-02-21T19:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144278",
    "user": "https://github.com/benjaminfjones"
}
```

Hi Oscar,
I haven't looked over your patch very closely yet, but I plan to. One comment on first glance: in several places you call


```
return mpmath_utils.call(airy_bi_mpmath, x, derivative=1, parent=RR) 
```


but I think we want to preserve the parent of `x` instead of forcing it to be `RR`. Importing the `parent` function from `sage.structure.coerce` using a different name like `sage_parent` (because as burcin pointed out in one of my tickets, parent is the name of the parameter in `_evalf_`) and doing something like


```
from sage.structure.coerce import parent as sage_parent
R = parent or sage_parent(x)
return mpmath_utils.call(airy_bi_mpmath, x, derivative=1, parent=R)
```


would do the trick I think. 

Other comment: can we add conversions to Maxima along with the Mma conversion you included? Here is a link to the appropriate chapter in the manual: http://maxima.sourceforge.net/docs/manual/en/maxima_15.html#SEC80



---

archive/issue_comments_144279.json:
```json
{
    "body": "The patch applies to 5.0.beta6 cleanly, but upon `sage -br` I get an import error ending with:\n\n\n```\n/home/jonesbe/sage/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/gsl/dft.py in <module>()\n     63 from sage.rings.real_mpfr import RR\n     64 from sage.rings.all import I\n---> 65 from sage.functions.all import sin, cos\n     66 from sage.gsl.fft import FastFourierTransform\n     67 from sage.gsl.dwt import WaveletTransform\n\nImportError: cannot import name sin\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\n\n\nSeems like the same thing kcrisman ran into with the previous patch applied to 5.0.beta4.",
    "created_at": "2012-02-29T02:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144279",
    "user": "https://github.com/benjaminfjones"
}
```

The patch applies to 5.0.beta6 cleanly, but upon `sage -br` I get an import error ending with:


```
/home/jonesbe/sage/sage-5.0.beta6/local/lib/python2.7/site-packages/sage/gsl/dft.py in <module>()
     63 from sage.rings.real_mpfr import RR
     64 from sage.rings.all import I
---> 65 from sage.functions.all import sin, cos
     66 from sage.gsl.fft import FastFourierTransform
     67 from sage.gsl.dwt import WaveletTransform

ImportError: cannot import name sin
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```


Seems like the same thing kcrisman ran into with the previous patch applied to 5.0.beta4.



---

archive/issue_comments_144280.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-29T02:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144280",
    "user": "https://github.com/benjaminfjones"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144281.json:
```json
{
    "body": "I found the cause of the problem in comment [comment:17]. There is a circular import going on because\n\n```\nfrom airy import airy_ai, airy_bi\n```\n\noccurs at the top of `sage/functions/all.py`. If you move it to the bottom of the file, sage starts just fine.\n\nThere a several doctests that fail, however. Oscar, I think that running `sage -coverage` only checks to see if there are doctest for every function, it doesn't actually run the tests. Use\n\n\n```\nsage -t devel/sage/sage/functions/airy.py\n```\n\n\nto run the tests and get feedback.",
    "created_at": "2012-03-24T16:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144281",
    "user": "https://github.com/benjaminfjones"
}
```

I found the cause of the problem in comment [comment:17]. There is a circular import going on because

```
from airy import airy_ai, airy_bi
```

occurs at the top of `sage/functions/all.py`. If you move it to the bottom of the file, sage starts just fine.

There a several doctests that fail, however. Oscar, I think that running `sage -coverage` only checks to see if there are doctest for every function, it doesn't actually run the tests. Use


```
sage -t devel/sage/sage/functions/airy.py
```


to run the tests and get feedback.



---

archive/issue_comments_144282.json:
```json
{
    "body": "Here at SD 40.5, we're going to pick this ticket up, do the work, and get it into sage.",
    "created_at": "2012-05-26T17:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144282",
    "user": "https://github.com/benjaminfjones"
}
```

Here at SD 40.5, we're going to pick this ticket up, do the work, and get it into sage.



---

archive/issue_comments_144283.json:
```json
{
    "body": "Changing keywords from \"Airy functions\" to \"Airy functions sd40.5\".",
    "created_at": "2012-05-26T17:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144283",
    "user": "https://github.com/benjaminfjones"
}
```

Changing keywords from "Airy functions" to "Airy functions sd40.5".



---

archive/issue_comments_144284.json:
```json
{
    "body": "Okay, I'm posting this for future reference.  I've attempted to preserve as much as possible of the original code while switching to the \"new-style\" dictionary-argument .n() approach we're working on in #12289, but I'm setting it to \"needs work\" myself while we think through some of the consequences of the switch.  Some of the _evalf_ stuff violates DRY and I'm not yet sure of the best way to deal with it.\n\nAs well, the patch currently segfaults in testing when it computes beta(0.5, 0.5) due to some problem with the current #12289 package, which I suspect is unrelated.  But I think the new approach is beginning to take shape.",
    "created_at": "2012-05-29T05:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144284",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

Okay, I'm posting this for future reference.  I've attempted to preserve as much as possible of the original code while switching to the "new-style" dictionary-argument .n() approach we're working on in #12289, but I'm setting it to "needs work" myself while we think through some of the consequences of the switch.  Some of the _evalf_ stuff violates DRY and I'm not yet sure of the best way to deal with it.

As well, the patch currently segfaults in testing when it computes beta(0.5, 0.5) due to some problem with the current #12289 package, which I suspect is unrelated.  But I think the new approach is beginning to take shape.



---

archive/issue_comments_144285.json:
```json
{
    "body": "Attachment [trac_12455_newstyle_airy.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455_newstyle_airy.patch) by dsm created at 2012-05-29 05:12:12\n\nnewstyle rewrite, version 1",
    "created_at": "2012-05-29T05:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144285",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

Attachment [trac_12455_newstyle_airy.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455_newstyle_airy.patch) by dsm created at 2012-05-29 05:12:12

newstyle rewrite, version 1



---

archive/issue_comments_144286.json:
```json
{
    "body": "Oh, yeah: and #13028 was a significant nuisance while working on this.",
    "created_at": "2012-05-29T05:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144286",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

Oh, yeah: and #13028 was a significant nuisance while working on this.



---

archive/issue_comments_144287.json:
```json
{
    "body": "Attachment [trac_12455_newstyle_airy2.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455_newstyle_airy2.patch) by @eviatarbach created at 2013-06-19 00:03:27",
    "created_at": "2013-06-19T00:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144287",
    "user": "https://github.com/eviatarbach"
}
```

Attachment [trac_12455_newstyle_airy2.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455_newstyle_airy2.patch) by @eviatarbach created at 2013-06-19 00:03:27



---

archive/issue_comments_144288.json:
```json
{
    "body": "New patch, which should pass all doctests once #12289 is merged.\n\nIt makes the following changes:\n* Changing an incorrect `airy_bi` identity\n* Adding `airy.py` to the documentation\n* Checking whether `n` is an integer (for some reason mpmath is able to evaluate numerically with non-integral `n`)\n* Formatting changes\n* Removing the parent's precision check because it wasn't used\n* Removing the check for the `parent` keyword because Burcin told me to\n\nPatchbot apply trac_12455_newstyle_airy.patch trac_12455_newstyle_airy2.patch",
    "created_at": "2013-06-19T00:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144288",
    "user": "https://github.com/eviatarbach"
}
```

New patch, which should pass all doctests once #12289 is merged.

It makes the following changes:
* Changing an incorrect `airy_bi` identity
* Adding `airy.py` to the documentation
* Checking whether `n` is an integer (for some reason mpmath is able to evaluate numerically with non-integral `n`)
* Formatting changes
* Removing the parent's precision check because it wasn't used
* Removing the check for the `parent` keyword because Burcin told me to

Patchbot apply trac_12455_newstyle_airy.patch trac_12455_newstyle_airy2.patch



---

archive/issue_comments_144289.json:
```json
{
    "body": "Changing keywords from \"Airy functions sd40.5\" to \"Airy functions sd40.5 sd48\".",
    "created_at": "2013-06-19T00:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144289",
    "user": "https://github.com/eviatarbach"
}
```

Changing keywords from "Airy functions sd40.5" to "Airy functions sd40.5 sd48".



---

archive/issue_comments_144290.json:
```json
{
    "body": "Needs review, then?  Note that I had to rebase #12289.",
    "created_at": "2013-06-19T01:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144290",
    "user": "https://github.com/kcrisman"
}
```

Needs review, then?  Note that I had to rebase #12289.



---

archive/issue_comments_144291.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-19T01:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144291",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144292.json:
```json
{
    "body": "Patchbot apply trac_12455-newstyle-airy-rebase.patch and trac_12455_newstyle_airy2.patch\n\nI don't know that either of the needs work issues are still there...",
    "created_at": "2013-06-19T20:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144292",
    "user": "https://github.com/kcrisman"
}
```

Patchbot apply trac_12455-newstyle-airy-rebase.patch and trac_12455_newstyle_airy2.patch

I don't know that either of the needs work issues are still there...



---

archive/issue_comments_144293.json:
```json
{
    "body": "This needs a trivial extra patch to fix\n\n```\n\nsage -t sage/functions/special.py\n**********************************************************************\nFile \"sage/functions/special.py\", line 389, in sage.functions.special._init\nFailed example:\n    spherical_harmonic(3,2,1,2)\nExpected:\n    15/4*sqrt(7/30)*e^(4*I)*sin(1)^2*cos(1)/sqrt(pi)\nGot:\n    15/4*sqrt(7/30)*cos(1)*e^(4*I)*sin(1)^2/sqrt(pi)\n**********************************************************************\n```\n\nwhich is really a rebase issue off of #9880, no worries.",
    "created_at": "2013-06-19T20:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144293",
    "user": "https://github.com/kcrisman"
}
```

This needs a trivial extra patch to fix

```

sage -t sage/functions/special.py
**********************************************************************
File "sage/functions/special.py", line 389, in sage.functions.special._init
Failed example:
    spherical_harmonic(3,2,1,2)
Expected:
    15/4*sqrt(7/30)*e^(4*I)*sin(1)^2*cos(1)/sqrt(pi)
Got:
    15/4*sqrt(7/30)*cos(1)*e^(4*I)*sin(1)^2/sqrt(pi)
**********************************************************************
```

which is really a rebase issue off of #9880, no worries.



---

archive/issue_comments_144294.json:
```json
{
    "body": "Okay, a little more rebasing for #12289.  Patches coming up.",
    "created_at": "2013-06-19T21:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144294",
    "user": "https://github.com/kcrisman"
}
```

Okay, a little more rebasing for #12289.  Patches coming up.



---

archive/issue_comments_144295.json:
```json
{
    "body": "Apply trac_12455-newstyle-airy-rebase.patch and trac_12455-newstyle-airy2-rebase.patch",
    "created_at": "2013-06-19T21:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144295",
    "user": "https://github.com/kcrisman"
}
```

Apply trac_12455-newstyle-airy-rebase.patch and trac_12455-newstyle-airy2-rebase.patch



---

archive/issue_comments_144296.json:
```json
{
    "body": "Eviatar, how much would you say still needs to be reviewed?  (In the sense that you have not yet given it positive review.)  Just your patch?\n\n(I'm running doctests now.)",
    "created_at": "2013-06-19T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144296",
    "user": "https://github.com/kcrisman"
}
```

Eviatar, how much would you say still needs to be reviewed?  (In the sense that you have not yet given it positive review.)  Just your patch?

(I'm running doctests now.)



---

archive/issue_comments_144297.json:
```json
{
    "body": "I made some mistake while rebasing - one moment.",
    "created_at": "2013-06-19T21:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144297",
    "user": "https://github.com/kcrisman"
}
```

I made some mistake while rebasing - one moment.



---

archive/issue_comments_144298.json:
```json
{
    "body": "I think I was fairly thorough, but I haven't positive-reviewed since my patch hasn't been looked at by someone else.",
    "created_at": "2013-06-19T21:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144298",
    "user": "https://github.com/eviatarbach"
}
```

I think I was fairly thorough, but I haven't positive-reviewed since my patch hasn't been looked at by someone else.



---

archive/issue_comments_144299.json:
```json
{
    "body": "Attachment [trac_12455-newstyle-airy-rebase.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-newstyle-airy-rebase.patch) by @kcrisman created at 2013-06-19 21:55:13\n\nOkay, now I have to fix something in the other one... sigh.  Final version coming soon, it *does* pass tests!",
    "created_at": "2013-06-19T21:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144299",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12455-newstyle-airy-rebase.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-newstyle-airy-rebase.patch) by @kcrisman created at 2013-06-19 21:55:13

Okay, now I have to fix something in the other one... sigh.  Final version coming soon, it *does* pass tests!



---

archive/issue_comments_144300.json:
```json
{
    "body": "Attachment [trac_12455-newstyle-airy2-rebase.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-newstyle-airy2-rebase.patch) by @kcrisman created at 2013-06-19 21:55:58",
    "created_at": "2013-06-19T21:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144300",
    "user": "https://github.com/kcrisman"
}
```

Attachment [trac_12455-newstyle-airy2-rebase.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-newstyle-airy2-rebase.patch) by @kcrisman created at 2013-06-19 21:55:58



---

archive/issue_comments_144301.json:
```json
{
    "body": "Patchbot, apply trac_12455-newstyle-airy-rebase.patch and trac_12455-newstyle-airy2-rebase.patch",
    "created_at": "2013-06-19T21:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144301",
    "user": "https://github.com/kcrisman"
}
```

Patchbot, apply trac_12455-newstyle-airy-rebase.patch and trac_12455-newstyle-airy2-rebase.patch



---

archive/issue_comments_144302.json:
```json
{
    "body": "> (for some reason mpmath is able to evaluate numerically with non-integral n)\nBut this is even in the documentation you wrote!\n\n```\nReturn the `\\alpha`-th order fractional derivative with respect to `z`.\n```\n\n\"Fractional\", right?  So ... ?  Plus, you do *not* make this change in airy_bi, only airy_ai, for some reason.\n\nAnother question:\n\n```\nsage: (plot(airy_bi(x), (x, -10, 5)) +\\ \n```\n\nAre we allowing this kind of continuation in doctests still?  I can't remember but seem to recall something about this being a problem.\n\nOtherwise this all seems fine.",
    "created_at": "2013-06-19T22:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144302",
    "user": "https://github.com/kcrisman"
}
```

> (for some reason mpmath is able to evaluate numerically with non-integral n)
But this is even in the documentation you wrote!

```
Return the `\alpha`-th order fractional derivative with respect to `z`.
```

"Fractional", right?  So ... ?  Plus, you do *not* make this change in airy_bi, only airy_ai, for some reason.

Another question:

```
sage: (plot(airy_bi(x), (x, -10, 5)) +\ 
```

Are we allowing this kind of continuation in doctests still?  I can't remember but seem to recall something about this being a problem.

Otherwise this all seems fine.



---

archive/issue_comments_144303.json:
```json
{
    "body": "I didn't write it. But looking at the mpmath documentation, it should work. It didn't work for most values before my patch anyway, but I'll see what I can do.",
    "created_at": "2013-06-19T23:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144303",
    "user": "https://github.com/eviatarbach"
}
```

I didn't write it. But looking at the mpmath documentation, it should work. It didn't work for most values before my patch anyway, but I'll see what I can do.



---

archive/issue_comments_144304.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-19T23:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144304",
    "user": "https://github.com/eviatarbach"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144305.json:
```json
{
    "body": "> I didn't write it. \nGood point, sorry!  In fact, it's just copied from [the mpmath doc](http://mpmath.googlecode.com/svn/tags/0.17/doc/build/functions/bessel.html#airyai).  But now you have taken charge :-)  Unfortunately, I can't find a lot of independent implementations of this...",
    "created_at": "2013-06-19T23:29:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144305",
    "user": "https://github.com/kcrisman"
}
```

> I didn't write it. 
Good point, sorry!  In fact, it's just copied from [the mpmath doc](http://mpmath.googlecode.com/svn/tags/0.17/doc/build/functions/bessel.html#airyai).  But now you have taken charge :-)  Unfortunately, I can't find a lot of independent implementations of this...



---

archive/issue_comments_144306.json:
```json
{
    "body": "Attachment [trac_12455-airy_review.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-airy_review.patch) by @burcin created at 2013-06-20 01:33:04",
    "created_at": "2013-06-20T01:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144306",
    "user": "https://github.com/burcin"
}
```

Attachment [trac_12455-airy_review.patch](tarball://root/attachments/some-uuid/ticket12455/trac_12455-airy_review.patch) by @burcin created at 2013-06-20 01:33:04



---

archive/issue_comments_144307.json:
```json
{
    "body": "[attachment:trac_12455-airy_review.patch] fixes a couple of problems:\n\n* `airy_{a,b}i_general` should evaluate to `airy_{a,b}i_simple`, `airy_{a,b}i_prime`, etc. depending on the first parameter\n\n* differentiating `airy_{a,b}i_general` in the first parameter is not allowed\n\n* `_evalf_` should not raise errors for unrecognized algorithm argument\n\n\nThis is still needs work because we use indirect doctests everywhere. There is no reason to go through the `airy_{a,b}i` wrapper functions. We should call the symbolic functions directly in the doctests. There are also a lot of code paths that are not tested. I changed the fractional order behavior, but didn't need to change any doctests.\n\nIt would be great if someone else can fix/add doctests. I will move on to something else now.",
    "created_at": "2013-06-20T01:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144307",
    "user": "https://github.com/burcin"
}
```

[attachment:trac_12455-airy_review.patch] fixes a couple of problems:

* `airy_{a,b}i_general` should evaluate to `airy_{a,b}i_simple`, `airy_{a,b}i_prime`, etc. depending on the first parameter

* differentiating `airy_{a,b}i_general` in the first parameter is not allowed

* `_evalf_` should not raise errors for unrecognized algorithm argument


This is still needs work because we use indirect doctests everywhere. There is no reason to go through the `airy_{a,b}i` wrapper functions. We should call the symbolic functions directly in the doctests. There are also a lot of code paths that are not tested. I changed the fractional order behavior, but didn't need to change any doctests.

It would be great if someone else can fix/add doctests. I will move on to something else now.



---

archive/issue_events_033564.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33564"
}
```



---

archive/issue_comments_144308.json:
```json
{
    "body": "This patch depends on a new release of Pynac and other fixes to make the `algorithm` keyword work sensibly. Also, I don't see much point in having the Maxima implementation as an option, considering the fact that it doesn't accept complex input, doesn't have arbitrary precision, and is slower than mpmath (doesn't appear to scale better either).\n\nI'd hate to delay this patch longer, especially considering that the Airy functions are probably among the most-used special functions. Could we remove the Maxima option for now and perhaps add it in the future, maybe along with a patch that adds a SciPy option as suggested in one of the comments?",
    "created_at": "2013-09-10T03:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144308",
    "user": "https://github.com/eviatarbach"
}
```

This patch depends on a new release of Pynac and other fixes to make the `algorithm` keyword work sensibly. Also, I don't see much point in having the Maxima implementation as an option, considering the fact that it doesn't accept complex input, doesn't have arbitrary precision, and is slower than mpmath (doesn't appear to scale better either).

I'd hate to delay this patch longer, especially considering that the Airy functions are probably among the most-used special functions. Could we remove the Maxima option for now and perhaps add it in the future, maybe along with a patch that adds a SciPy option as suggested in one of the comments?



---

archive/issue_comments_144309.json:
```json
{
    "body": "I'm fine with removing Maxima from the options for numerical evaluation (numerical is not generally where Maxima shines). I agree with `@`burcin, though, that indirect doctests should be fixed wherever possible and become direct tests and that the branch coverage should be higher.\n\nWhat exactly is the issue with having the Maxima option? Is it the limited precision and domain? We could always check that inputs are okay whenever Maxima is selected and raise an exception otherwise.",
    "created_at": "2013-09-10T06:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144309",
    "user": "https://github.com/benjaminfjones"
}
```

I'm fine with removing Maxima from the options for numerical evaluation (numerical is not generally where Maxima shines). I agree with `@`burcin, though, that indirect doctests should be fixed wherever possible and become direct tests and that the branch coverage should be higher.

What exactly is the issue with having the Maxima option? Is it the limited precision and domain? We could always check that inputs are okay whenever Maxima is selected and raise an exception otherwise.



---

archive/issue_events_033565.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33565"
}
```



---

archive/issue_events_033566.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33566"
}
```



---

archive/issue_events_033567.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33567"
}
```



---

archive/issue_events_033568.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33568"
}
```



---

archive/issue_comments_144310.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-24T08:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144311.json:
```json
{
    "body": "Replying to [comment:43 benjaminfjones]:\n> What exactly is the issue with having the Maxima option? Is it the limited precision and domain? We could always check that inputs are okay whenever Maxima is selected and raise an exception otherwise.\nIt's useless, especially when scipy is implemented as algorithm. OTOH, it introduces more code paths to test and deepens a dependency that is unwanted.\n\nOh, and scipy is a bit faster:\n\n```\nsage: timeit(\"airy_bi(2).n(algorithm='maxima')\")\n625 loops, best of 3: 685 \u00b5s per loop\nsage: timeit(\"airy_bi(2).n(algorithm='scipy')\")\n625 loops, best of 3: 124 \u00b5s per loop\n```\n",
    "created_at": "2014-07-24T08:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144311",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:43 benjaminfjones]:
> What exactly is the issue with having the Maxima option? Is it the limited precision and domain? We could always check that inputs are okay whenever Maxima is selected and raise an exception otherwise.
It's useless, especially when scipy is implemented as algorithm. OTOH, it introduces more code paths to test and deepens a dependency that is unwanted.

Oh, and scipy is a bit faster:

```
sage: timeit("airy_bi(2).n(algorithm='maxima')")
625 loops, best of 3: 685 µs per loop
sage: timeit("airy_bi(2).n(algorithm='scipy')")
625 loops, best of 3: 124 µs per loop
```




---

archive/issue_comments_144312.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-24T15:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144313.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-24T15:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144313",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144314.json:
```json
{
    "body": "Everything was reviewed up to my recent changes:\n\n* merged develop\n* removal of maxima and inclusion of scipy for numerics\n* replacement of indirect with direct doctests (still 100% coverage)\n* removal of hold_derivate keyword from `airy_ai/bi_general()` where it wasn't implemented (it is still in `airy_ai/bi()` wrapper functions\n* small index at the top of documentation for orientation, because of confusing presentation order of functions, which cannot be controlled, sadly\n\nSo please review.",
    "created_at": "2014-07-24T15:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144314",
    "user": "https://github.com/rwst"
}
```

Everything was reviewed up to my recent changes:

* merged develop
* removal of maxima and inclusion of scipy for numerics
* replacement of indirect with direct doctests (still 100% coverage)
* removal of hold_derivate keyword from `airy_ai/bi_general()` where it wasn't implemented (it is still in `airy_ai/bi()` wrapper functions
* small index at the top of documentation for orientation, because of confusing presentation order of functions, which cannot be controlled, sadly

So please review.



---

archive/issue_events_033569.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33569"
}
```



---

archive/issue_events_033570.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33570"
}
```



---

archive/issue_comments_144315.json:
```json
{
    "body": "one failing doctest, see patchbot report",
    "created_at": "2014-08-23T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144315",
    "user": "https://github.com/fchapoton"
}
```

one failing doctest, see patchbot report



---

archive/issue_comments_144316.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-23T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144316",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144317.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-26T11:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144318.json:
```json
{
    "body": "Changing assignee from olazo to @rwst.",
    "created_at": "2014-08-26T11:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144318",
    "user": "https://github.com/rwst"
}
```

Changing assignee from olazo to @rwst.



---

archive/issue_comments_144319.json:
```json
{
    "body": "Changing assignee from @rwst to olazo.",
    "created_at": "2014-08-26T11:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144319",
    "user": "https://github.com/rwst"
}
```

Changing assignee from @rwst to olazo.



---

archive/issue_comments_144320.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-26T11:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144320",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144321.json:
```json
{
    "body": "Rebased on 6.4.beta3, and add a few `# rel tol` to the scipy results.\n----\nNew commits:",
    "created_at": "2014-09-25T19:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144321",
    "user": "https://github.com/fchapoton"
}
```

Rebased on 6.4.beta3, and add a few `# rel tol` to the scipy results.
----
New commits:



---

archive/issue_comments_144322.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-28T07:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144323.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-30T14:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144324.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-30T14:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144325.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-02T09:21:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144325",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_144326.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/functions/airy.py\n**********************************************************************\nFile \"src/sage/functions/airy.py\", line 404, in sage.functions.airy.airy_ai\nFailed example:\n    plot(airy_ai(x), (x, -10, 5)) + plot(airy_ai_prime(x),\n     (x, -10, 5), color='red')\nExpected nothing\nGot:\n    Graphics object consisting of 2 graphics primitives\n**********************************************************************\nFile \"src/sage/functions/airy.py\", line 799, in sage.functions.airy.airy_bi\nFailed example:\n    plot(airy_bi(x), (x, -10, 5)) + plot(airy_bi_prime(x),\n     (x, -10, 5), color='red')\nExpected nothing\nGot:\n    Graphics object consisting of 2 graphics primitives\n```\n",
    "created_at": "2014-10-02T09:21:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144326",
    "user": "https://github.com/rwst"
}
```


```
sage -t --long src/sage/functions/airy.py
**********************************************************************
File "src/sage/functions/airy.py", line 404, in sage.functions.airy.airy_ai
Failed example:
    plot(airy_ai(x), (x, -10, 5)) + plot(airy_ai_prime(x),
     (x, -10, 5), color='red')
Expected nothing
Got:
    Graphics object consisting of 2 graphics primitives
**********************************************************************
File "src/sage/functions/airy.py", line 799, in sage.functions.airy.airy_bi
Failed example:
    plot(airy_bi(x), (x, -10, 5)) + plot(airy_bi_prime(x),
     (x, -10, 5), color='red')
Expected nothing
Got:
    Graphics object consisting of 2 graphics primitives
```




---

archive/issue_comments_144327.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-03T14:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144328.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-03T14:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144328",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144329.json:
```json
{
    "body": "Just to make you aware: this conflicts with #17130. When either of these tickets gets positive_review, the other should be rebased.",
    "created_at": "2014-10-11T18:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144329",
    "user": "https://github.com/jdemeyer"
}
```

Just to make you aware: this conflicts with #17130. When either of these tickets gets positive_review, the other should be rebased.



---

archive/issue_comments_144330.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-10-11T18:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144330",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_144331.json:
```json
{
    "body": "And why the change to `def hypergeometric_U`? The new code seems quite hackish, why is it needed and how does it relate to this ticket?",
    "created_at": "2014-10-11T18:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144331",
    "user": "https://github.com/jdemeyer"
}
```

And why the change to `def hypergeometric_U`? The new code seems quite hackish, why is it needed and how does it relate to this ticket?



---

archive/issue_comments_144332.json:
```json
{
    "body": "These should be an error:\n\n```\nsage: airy_ai(3).n(algorithm='scipy', prec=200)\n0.006591139357460719\nsage: airy_ai(3).n(algorithm='whatever')\n0.00659113935746072\n```\n\n\nAnd I don't like this either (parent should be `RR`):\n\n```\nsage: parent(airy_ai(3).n(algorithm='scipy'))\nReal Double Field\n```\n",
    "created_at": "2014-10-11T19:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144332",
    "user": "https://github.com/jdemeyer"
}
```

These should be an error:

```
sage: airy_ai(3).n(algorithm='scipy', prec=200)
0.006591139357460719
sage: airy_ai(3).n(algorithm='whatever')
0.00659113935746072
```


And I don't like this either (parent should be `RR`):

```
sage: parent(airy_ai(3).n(algorithm='scipy'))
Real Double Field
```




---

archive/issue_comments_144333.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-10-11T19:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144333",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_144334.json:
```json
{
    "body": "What's the point of\n\n```\nif len(args) > 0:\n   raise TypeError((\"symbolic function airy_ai takes at most 3 arguments \"\n      \"({} given)\").format(len(args) + 3))\n```\n\nwhy not simply remove `*args` completely then?",
    "created_at": "2014-10-11T19:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144334",
    "user": "https://github.com/jdemeyer"
}
```

What's the point of

```
if len(args) > 0:
   raise TypeError(("symbolic function airy_ai takes at most 3 arguments "
      "({} given)").format(len(args) + 3))
```

why not simply remove `*args` completely then?



---

archive/issue_comments_144335.json:
```json
{
    "body": "Replying to [comment:66 jdemeyer]:\n> And why the change to `def hypergeometric_U`? The new code seems quite hackish, why is it needed and how does it relate to this ticket?\nI think that unrelated patch can be safely removed because scipy evaluation is replaced by mpmath in #14896 (of course hoping that that gets reviewed at some time).",
    "created_at": "2014-10-12T16:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144335",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:66 jdemeyer]:
> And why the change to `def hypergeometric_U`? The new code seems quite hackish, why is it needed and how does it relate to this ticket?
I think that unrelated patch can be safely removed because scipy evaluation is replaced by mpmath in #14896 (of course hoping that that gets reviewed at some time).



---

archive/issue_comments_144336.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-13T14:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144337.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-13T14:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144337",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144338.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-29T15:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144339.json:
```json
{
    "body": "Fr\u00e9d\u00e9ric, how much of this did you positively review up to now?  In principle you and rws can review each other's contributions here.  It would take me a while to get up to speed here.",
    "created_at": "2015-02-03T02:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144339",
    "user": "https://github.com/kcrisman"
}
```

Frédéric, how much of this did you positively review up to now?  In principle you and rws can review each other's contributions here.  It would take me a while to get up to speed here.



---

archive/issue_comments_144340.json:
```json
{
    "body": "a typo in line 5 of the doc:\n\n```\nAiry functions are solutions to the differential equation `f''(z) +f(z)x=0`.\n```\n\nThe differential equation is wrong, should be `f'' - x f = 0`",
    "created_at": "2015-03-10T20:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144340",
    "user": "https://github.com/fchapoton"
}
```

a typo in line 5 of the doc:

```
Airy functions are solutions to the differential equation `f''(z) +f(z)x=0`.
```

The differential equation is wrong, should be `f'' - x f = 0`



---

archive/issue_comments_144341.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-11T13:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144342.json:
```json
{
    "body": "Changing assignee from olazo to @rwst.",
    "created_at": "2015-03-11T13:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144342",
    "user": "https://github.com/rwst"
}
```

Changing assignee from olazo to @rwst.



---

archive/issue_events_033571.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-11T13:59:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33571"
}
```



---

archive/issue_events_033572.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-03-11T13:59:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33572"
}
```



---

archive/issue_comments_144343.json:
```json
{
    "body": "x should be z in the differential equation",
    "created_at": "2015-03-12T10:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144343",
    "user": "https://github.com/mezzarobba"
}
```

x should be z in the differential equation



---

archive/issue_comments_144344.json:
```json
{
    "body": "What exactly still needs review here?\n\nThe code looks pretty good to me overall, but there are lots of things I don't understand in detail. (For a simple example, what is the motivation for splitting the implementation in so many unrelated classes?) And yet I'm tempted to give this ticket positive review (leaving possible remaining issues for later), since many other people have looked at it and it is clearly an improvement over what sage currently has.",
    "created_at": "2015-03-12T10:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144344",
    "user": "https://github.com/mezzarobba"
}
```

What exactly still needs review here?

The code looks pretty good to me overall, but there are lots of things I don't understand in detail. (For a simple example, what is the motivation for splitting the implementation in so many unrelated classes?) And yet I'm tempted to give this ticket positive review (leaving possible remaining issues for later), since many other people have looked at it and it is clearly an improvement over what sage currently has.



---

archive/issue_comments_144345.json:
```json
{
    "body": "More nitpicking, not necessarily for this ticket:\n* Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.\n* Is it necessary to special-case `alpha == 0` etc. in `FunctionAiryAiGeneral._evalf_`?",
    "created_at": "2015-03-12T11:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144345",
    "user": "https://github.com/mezzarobba"
}
```

More nitpicking, not necessarily for this ticket:
* Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.
* Is it necessary to special-case `alpha == 0` etc. in `FunctionAiryAiGeneral._evalf_`?



---

archive/issue_comments_144346.json:
```json
{
    "body": "Replying to [comment:80 mmezzarobba]:\n> * Is it necessary to special-case `alpha == 0` etc. in `FunctionAiryAiGeneral._evalf_`?\n\nScratch that, I misread the code.",
    "created_at": "2015-03-12T12:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144346",
    "user": "https://github.com/mezzarobba"
}
```

Replying to [comment:80 mmezzarobba]:
> * Is it necessary to special-case `alpha == 0` etc. in `FunctionAiryAiGeneral._evalf_`?

Scratch that, I misread the code.



---

archive/issue_comments_144347.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-12T12:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144348.json:
```json
{
    "body": "One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?",
    "created_at": "2015-03-12T13:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144348",
    "user": "https://github.com/mezzarobba"
}
```

One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?



---

archive/issue_comments_144349.json:
```json
{
    "body": "Replying to [comment:80 mmezzarobba]:\n> x should be z in the differential equation\nStrange typo.\n> * Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.\nA quick look at old and new code shows 1. `ValueError`, 2. `NotImplementedError`, 3. `assert`. So, this needs to be unified to `NotImplementedError`.\n> One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?\nI believe the code of this ticket is the only one that has such a parameter, so please feel free to improve it.\n\nI have looked at your patch and it's fine, so if you think the rest is OK please set positive.",
    "created_at": "2015-03-12T14:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144349",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:80 mmezzarobba]:
> x should be z in the differential equation
Strange typo.
> * Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.
A quick look at old and new code shows 1. `ValueError`, 2. `NotImplementedError`, 3. `assert`. So, this needs to be unified to `NotImplementedError`.
> One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?
I believe the code of this ticket is the only one that has such a parameter, so please feel free to improve it.

I have looked at your patch and it's fine, so if you think the rest is OK please set positive.



---

archive/issue_comments_144350.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-03-12T14:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_144351.json:
```json
{
    "body": "Replying to [comment:84 rws]:\n> > * Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.\n> A quick look at old and new code shows 1. `ValueError`, 2. `NotImplementedError`, 3. `assert`. So, this needs to be unified to `NotImplementedError`.\n> > One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?\n> I believe the code of this ticket is the only one that has such a parameter, so please feel free to improve it.\n\nBoth done (now rather than later to avoid breaking the interface).\n\n> I have looked at your patch and it's fine, so if you think the rest is OK please set positive.\n\nI'm okay with everything prior to my commits. Could you (or someone else) have a quick look at my last changes and set the ticket to positive review? Thanks!",
    "created_at": "2015-03-12T15:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144351",
    "user": "https://github.com/mezzarobba"
}
```

Replying to [comment:84 rws]:
> > * Raising a `ValueError` in `FunctionAiryAiGeneral._derivative_` when `diff_param == 0` may not be the most appropriate, since (if I'm not mistaken) the partial derivative would make sense mathematically.
> A quick look at old and new code shows 1. `ValueError`, 2. `NotImplementedError`, 3. `assert`. So, this needs to be unified to `NotImplementedError`.
> > One last thing: IMO `hold_derivative` should be `True` by default in `airy_ai` and `airy_bi`, except perhaps when the differentiation order is one. But I don't know if that's consistent with the way things are done in other parts of sage symbolics. Thoughts?
> I believe the code of this ticket is the only one that has such a parameter, so please feel free to improve it.

Both done (now rather than later to avoid breaking the interface).

> I have looked at your patch and it's fine, so if you think the rest is OK please set positive.

I'm okay with everything prior to my commits. Could you (or someone else) have a quick look at my last changes and set the ticket to positive review? Thanks!



---

archive/issue_comments_144352.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-12T15:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144352",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_144353.json:
```json
{
    "body": "Is fine and passes tests in `functions/`. Thank you too.",
    "created_at": "2015-03-12T15:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144353",
    "user": "https://github.com/rwst"
}
```

Is fine and passes tests in `functions/`. Thank you too.



---

archive/issue_comments_144354.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-12T23:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12283#issuecomment-144354",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_033573.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-12T23:06:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12283",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12283#event-33573"
}
```
