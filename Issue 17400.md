# Issue 17400: Stopgap for IntegerListsLex

Issue created by migration from https://trac.sagemath.org/ticket/17637

Original creator: ncohen

Original creation time: 2015-01-15 15:48:27

As reported on #17548, the class `IntegerListsLex` returns wrong result. Until this is fixed, we need a stopgap to warn users.


---

Comment by ncohen created at 2015-01-15 15:49:23

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-01-15 15:49:23

Changing priority from major to blocker.


---

Comment by git created at 2015-01-15 15:49:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-02-07 15:53:42

Since #17548 is about `min_slope`, shouldn't the warning be only if the `min_slope` argument was given?


---

Comment by jdemeyer created at 2015-02-07 15:53:42

Changing status from needs_review to needs_info.


---

Comment by ncohen created at 2015-02-07 16:06:03

Changing status from needs_info to needs_review.


---

Comment by ncohen created at 2015-02-07 16:06:03

> Since #17548 is about `min_slope`, shouldn't the warning be only if the `min_slope` argument was given?

In the code, it is said that the constraints are "assumed to be correct". I have no idea what happens if `min_slope` is not defined by `max_slope` is, or `max_part` or anything.  If you believe that there is a situation in which the code will never return anything wrong you can adapt the error message.

Nathann


---

Comment by jdemeyer created at 2015-02-07 18:19:33

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-02-07 23:59:31

Thanks

Nathann


---

Comment by vbraun created at 2015-02-08 09:30:57

Reviewer name missing


---

Comment by vbraun created at 2015-02-08 09:30:57

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2015-02-08 10:06:08

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-02-08 15:26:17

Resolution: fixed


---

Comment by aschilling created at 2015-03-04 23:47:19

As far as I can see from #17548 there are actually no known bugs with regards to IntegerListsLex. So I find it a total overreaction to put a stopgap as the limitations of IntegerListsLex are correctly documented. Now warnings appear in many parts of the code which are completely unrelated to this issue (and as I said, there does not appear to be a bug). For example

```
sage: K = crystals.KirillovReshetikhin(['D',4,1],1,1)
/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/partition.py:4827:
********************************************************************************
This code contains bugs and may be mathematically unreliable.
This issue is being tracked at http://trac.sagemath.org/sage_trac/ticket/17548.
********************************************************************************
```

or

```
sage: Partitions(3,max_part=2)
/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/partition.py:6622:
********************************************************************************
This code contains bugs and may be mathematically unreliable.
This issue is being tracked at http://trac.sagemath.org/sage_trac/ticket/17548.
********************************************************************************
Partitions of 3 having parts less than or equal to 2
```

both of which are totally fine!

Best,

Anne


---

Comment by ncohen created at 2015-03-05 06:57:32

Dear Anne,

> As far as I can see from #17548 there are actually no known bugs with regards to IntegerListsLex.

What about those examples from #17548 ?


```
sage: Partitions(5, min_slope=1).list()
ValueError: [2, 4] is not a valid partition
sage: IntegerListsLex(5, length=3, max_slope=0).list()   # 0 is allowed in the partition
[[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]
sage: IntegerListsLex(5, max_slope=0).list()             # now its not
[[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]
```


I will answer other points on #17898.

Nathann


---

Comment by aschilling created at 2015-03-05 07:05:19

Replying to [comment:11 ncohen]:
> Dear Anne,
> 
> > As far as I can see from #17548 there are actually no known bugs with regards to IntegerListsLex.
> 
> What about those examples from #17548 ?
> 
> {{{
> sage: Partitions(5, min_slope=1).list()
> ValueError: [2, 4] is not a valid partition
> sage: IntegerListsLex(5, length=3, max_slope=0).list()   # 0 is allowed in the partition
> [[5, 0, 0], [4, 1, 0], [3, 2, 0], [3, 1, 1], [2, 2, 1]]
> sage: IntegerListsLex(5, max_slope=0).list()             # now its not
> [[5], [4, 1], [3, 2], [3, 1, 1], [2, 2, 1], [2, 1, 1, 1], [1, 1, 1, 1, 1]]
> }}}
> 
> I will answer other points on #17898.
> 
> Nathann

Read the answers that Travis gave on that ticket. They are consistent with the specifications or bad user input.

Anne
