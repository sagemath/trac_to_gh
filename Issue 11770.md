# Issue 11770: segfault on Graph().connected_component_containing_vertex('')

archive/issues_011770.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nAs title.\n\n\n```\nfs@zhenghe /tmp $ sage -c \"Graph().connected_component_containing_vertex('')\"\n/opt/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f14e1a96df2]\n/opt/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f14e1a96e24]\n/opt/sage/local/lib/libcsage.so(sage_signal_handler+0x20c)[0x7f14e1a96a72]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xf020)[0x7f14e31fa020]\n/opt/sage/local/lib/python2.6/site-packages/sage/graphs/base/c_graph.so(+0x11aa1)[0x7f14be4d8aa1]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0x75876)[0x7f14e347c876]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0x75b92)[0x7f14e347cb92]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0xa0f08)[0x7f14e34a7f08]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7f14e3451cd3]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x395d)[0x7f14e34e835d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x602d)[0x7f14e34eaa2d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]\n/opt/sage/local/lib/libpython2.6.so.1.0(+0xdb07e)[0x7f14e34e207e]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4f8d)[0x7f14e34e998d]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7f14e350d9b0]\n/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdf)[0x7f14e350e3ef]\n/opt/sage/local/lib/libpython2.6.so.1.0(Py_Main+0xb23)[0x7f14e351b693]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7f14e27fcead]\npython[0x4006a1]\n\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\n/opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval \"$@\"\nfs@zhenghe /tmp $ \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11942\n\n",
    "created_at": "2011-10-21T05:55:24Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "title": "segfault on Graph().connected_component_containing_vertex('')",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11770",
    "user": "kini"
}
```
Assignee: jason, ncohen, rlm

As title.


```
fs@zhenghe /tmp $ sage -c "Graph().connected_component_containing_vertex('')"
/opt/sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7f14e1a96df2]
/opt/sage/local/lib/libcsage.so(sigdie+0x14)[0x7f14e1a96e24]
/opt/sage/local/lib/libcsage.so(sage_signal_handler+0x20c)[0x7f14e1a96a72]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xf020)[0x7f14e31fa020]
/opt/sage/local/lib/python2.6/site-packages/sage/graphs/base/c_graph.so(+0x11aa1)[0x7f14be4d8aa1]
/opt/sage/local/lib/libpython2.6.so.1.0(+0x75876)[0x7f14e347c876]
/opt/sage/local/lib/libpython2.6.so.1.0(+0x75b92)[0x7f14e347cb92]
/opt/sage/local/lib/libpython2.6.so.1.0(+0xa0f08)[0x7f14e34a7f08]
/opt/sage/local/lib/libpython2.6.so.1.0(PyObject_Call+0x53)[0x7f14e3451cd3]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x395d)[0x7f14e34e835d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x602d)[0x7f14e34eaa2d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]
/opt/sage/local/lib/libpython2.6.so.1.0(+0xdb07e)[0x7f14e34e207e]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalFrameEx+0x4f8d)[0x7f14e34e998d]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCodeEx+0x879)[0x7f14e34eb549]
/opt/sage/local/lib/libpython2.6.so.1.0(PyEval_EvalCode+0x32)[0x7f14e34eb642]
/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_FileExFlags+0xb0)[0x7f14e350d9b0]
/opt/sage/local/lib/libpython2.6.so.1.0(PyRun_SimpleFileExFlags+0xdf)[0x7f14e350e3ef]
/opt/sage/local/lib/libpython2.6.so.1.0(Py_Main+0xb23)[0x7f14e351b693]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7f14e27fcead]
python[0x4006a1]

------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
/opt/sage/local/bin/sage-sage: line 772: 19065 Segmentation fault      sage-eval "$@"
fs@zhenghe /tmp $ 
```


Issue created by migration from https://trac.sagemath.org/ticket/11942





---

archive/issue_comments_134269.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-10-21T15:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134269",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_134270.json:
```json
{
    "body": "Right ! `:-p`\n\nThis comes from an unchecked operation at the beginning of BFS/DFS. Fixed in the following patch `:-)`\n\nNathann",
    "created_at": "2011-10-21T15:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134270",
    "user": "ncohen"
}
```

Right ! `:-p`

This comes from an unchecked operation at the beginning of BFS/DFS. Fixed in the following patch `:-)`

Nathann



---

archive/issue_comments_134271.json:
```json
{
    "body": "Wow, that was fast! :D I have a couple of questions, though. `Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch. Currently investigating why...\n\nAlso, your exception is a `ValueError` - shouldn't it be a `KeyError`? Shouldn't the current error for vertex `0` be a `KeyError` too instead of a (!?) `RuntimeError`? The [Python docs](http://docs.python.org/library/exceptions.html#exceptions.Exception) say:\n\n> This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.",
    "created_at": "2011-10-22T07:31:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134271",
    "user": "kini"
}
```

Wow, that was fast! :D I have a couple of questions, though. `Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch. Currently investigating why...

Also, your exception is a `ValueError` - shouldn't it be a `KeyError`? Shouldn't the current error for vertex `0` be a `KeyError` too instead of a (!?) `RuntimeError`? The [Python docs](http://docs.python.org/library/exceptions.html#exceptions.Exception) say:

> This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.



---

archive/issue_comments_134272.json:
```json
{
    "body": "Hellooooooo ! \n\n> > This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.\n\nOh ? That's a pity, I really use it a lot `:-)`\n\nI immediately update the patch to return a KeyError `:-)`\n\nNathann",
    "created_at": "2011-10-27T17:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134272",
    "user": "ncohen"
}
```

Hellooooooo ! 

> > This exception is mostly a relic from a previous version of the interpreter; it is not used very much any more.

Oh ? That's a pity, I really use it a lot `:-)`

I immediately update the patch to return a KeyError `:-)`

Nathann



---

archive/issue_comments_134273.json:
```json
{
    "body": "Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.",
    "created_at": "2011-10-27T17:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134273",
    "user": "kini"
}
```

Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.



---

archive/issue_comments_134274.json:
```json
{
    "body": "> Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.\n\nArgggggg !!!\n\nPatch reverted to the former one `:-D`\n\nNathann",
    "created_at": "2011-10-27T18:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134274",
    "user": "ncohen"
}
```

> Oh, `ValueError` is still used a lot but it is `RuntimeError` which is not used much anymore.

Argggggg !!!

Patch reverted to the former one `:-D`

Nathann



---

archive/issue_comments_134275.json:
```json
{
    "body": "Attachment\n\n... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`\n\nAnyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.",
    "created_at": "2011-10-27T18:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134275",
    "user": "kini"
}
```

Attachment

... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`

Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.



---

archive/issue_comments_134276.json:
```json
{
    "body": "Replying to [comment:6 kini]:\n> ... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`\n\nArggggggggggg !!!\n\n> Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.\n\nGood !! THaaaaanks ! `:-)`\n\nNathann",
    "created_at": "2011-10-27T18:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134276",
    "user": "ncohen"
}
```

Replying to [comment:6 kini]:
> ... but... even though `ValueError` is used a lot, the correct one to use here is `KeyError`... `D:`

Arggggggggggg !!!

> Anyway don't worry about it, I'll do that in another patch later :) Sorry, didn't get much time to look at this earlier this week.

Good !! THaaaaanks ! `:-)`

Nathann



---

archive/issue_comments_134277.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134277",
    "user": "jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_comments_134278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-10T20:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134278",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_134279.json:
```json
{
    "body": "I don't understand why you have both stopped the discussion without concluding on the status of this patch.\n\nI have no problem when installing the patch and building the documentation.\nThe function tests correctly that the parameter is or is not a vertex of the graph.\n\nFor me the patch is correct, so I give a positive review. \n\nBest,\nDavid.",
    "created_at": "2011-12-10T20:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134279",
    "user": "dcoudert"
}
```

I don't understand why you have both stopped the discussion without concluding on the status of this patch.

I have no problem when installing the patch and building the documentation.
The function tests correctly that the parameter is or is not a vertex of the graph.

For me the patch is correct, so I give a positive review. 

Best,
David.



---

archive/issue_comments_134280.json:
```json
{
    "body": "Please read the comments. The ValueError needs to be changed to KeyError, and also I wanted to understand the following before giving it a positive review, as possibly the fix could be improved (multiple code paths for a single purpose is bad design):\n\n>`Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch.\n\nSorry for neglecting this ticket for so long.",
    "created_at": "2011-12-10T20:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134280",
    "user": "kini"
}
```

Please read the comments. The ValueError needs to be changed to KeyError, and also I wanted to understand the following before giving it a positive review, as possibly the fix could be improved (multiple code paths for a single purpose is bad design):

>`Graph().connected_component_containing_vertex(0)` already produces an exception, which includes the number 0 in the message. This is still true with your patch.

Sorry for neglecting this ticket for so long.



---

archive/issue_comments_134281.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-12-10T20:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134281",
    "user": "kini"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_134282.json:
```json
{
    "body": "Changing keywords from \"\" to \"segfault cython\".",
    "created_at": "2012-01-04T01:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134282",
    "user": "kini"
}
```

Changing keywords from "" to "segfault cython".



---

archive/issue_comments_134283.json:
```json
{
    "body": "Well, I'm still not sure about the multiple code paths. But here is a patch to use better exceptions throughout the file in question, though that's sort of tangential to the original purpose of the ticket. This ticket has been sitting around too long for me to delay it any further just because of my ignorance of the Cython graphs code, especially since it fixes a segfault, so I will give a positive review to Nathann's part. Maybe someone can review my exceptions patch? It passes `make ptestlong` on my machine fwiw.",
    "created_at": "2012-01-04T01:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134283",
    "user": "kini"
}
```

Well, I'm still not sure about the multiple code paths. But here is a patch to use better exceptions throughout the file in question, though that's sort of tangential to the original purpose of the ticket. This ticket has been sitting around too long for me to delay it any further just because of my ignorance of the Cython graphs code, especially since it fixes a segfault, so I will give a positive review to Nathann's part. Maybe someone can review my exceptions patch? It passes `make ptestlong` on my machine fwiw.



---

archive/issue_comments_134284.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-04T01:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134284",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_134285.json:
```json
{
    "body": "Well, what about setting the message to what it was before, and just change the exception's name if yo feels it should be ? The former message was way clearer, especially when the exception is thrown by a submethod of the method run by the user.\n\nNathann",
    "created_at": "2012-01-04T23:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134285",
    "user": "ncohen"
}
```

Well, what about setting the message to what it was before, and just change the exception's name if yo feels it should be ? The former message was way clearer, especially when the exception is thrown by a submethod of the method run by the user.

Nathann



---

archive/issue_comments_134286.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-04T23:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134286",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_134287.json:
```json
{
    "body": "`ValueError`'s constructor accepts a string representing a message, but `KeyError`'s constructor accepts an object representing the key which was not found in some collection. So this is the \"correct\" way to raise the exception here. The traceback call stack should theoretically give you all the info that was in the error message before. I noticed this because `raise ValueError('foo')` gives you a message \"ValueError: foo\" whereas `raise KeyError('foo')` gives you a message \"KeyError: 'foo'\" (note the quotation marks). I asked about it on the Python IRC channel and the above is the answer I got.",
    "created_at": "2012-01-05T04:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134287",
    "user": "kini"
}
```

`ValueError`'s constructor accepts a string representing a message, but `KeyError`'s constructor accepts an object representing the key which was not found in some collection. So this is the "correct" way to raise the exception here. The traceback call stack should theoretically give you all the info that was in the error message before. I noticed this because `raise ValueError('foo')` gives you a message "ValueError: foo" whereas `raise KeyError('foo')` gives you a message "KeyError: 'foo'" (note the quotation marks). I asked about it on the Python IRC channel and the above is the answer I got.



---

archive/issue_comments_134288.json:
```json
{
    "body": "Well, for me this modification just makes the error message harder to understand, and I do not see the point of losing that if the only gain is to respect some standard we did not know even existed two weeks ago.",
    "created_at": "2012-01-05T09:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134288",
    "user": "ncohen"
}
```

Well, for me this modification just makes the error message harder to understand, and I do not see the point of losing that if the only gain is to respect some standard we did not know even existed two weeks ago.



---

archive/issue_comments_134289.json:
```json
{
    "body": "Hmm. OK, I'll just put back the messages and still use KeyError. The quotation marks are a bit weird, but not such a big deal, I guess - we are not actually trying to catch these exceptions and do anything with them anyway.",
    "created_at": "2012-01-05T10:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134289",
    "user": "kini"
}
```

Hmm. OK, I'll just put back the messages and still use KeyError. The quotation marks are a bit weird, but not such a big deal, I guess - we are not actually trying to catch these exceptions and do anything with them anyway.



---

archive/issue_comments_134290.json:
```json
{
    "body": "Hello,\nIt would be nice if the KeyError method could take an extra argument to describe the error. For instance KeyError(key, 'You should add some tests to your algorithm!'). \nUnfortunately, I'm not able to find the documentation of the KeyError function.\n\nHowever, according to the documentation of Python, the raise method can handle multiple arguments: \n`raise_stmt ::=  \"raise\" [expression [\",\" expression [\",\" expression]]]`\nSee: http://docs.python.org/reference/simple_stmts.html#raise\nIt may help satisfying both of you ;-)\n\nBest,\nDavid.",
    "created_at": "2012-01-05T10:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134290",
    "user": "dcoudert"
}
```

Hello,
It would be nice if the KeyError method could take an extra argument to describe the error. For instance KeyError(key, 'You should add some tests to your algorithm!'). 
Unfortunately, I'm not able to find the documentation of the KeyError function.

However, according to the documentation of Python, the raise method can handle multiple arguments: 
`raise_stmt ::=  "raise" [expression ["," expression ["," expression]]]`
See: http://docs.python.org/reference/simple_stmts.html#raise
It may help satisfying both of you ;-)

Best,
David.



---

archive/issue_comments_134291.json:
```json
{
    "body": "Thank you, David! I agree with you, that would be great. Unfortunately it is not supported by Python. The documentation you linked about the `raise` statement is unfortunately not so helpful - there must be between 1 and 3 arguments, and they have special meanings. Actually, the multiple-argument syntax for `raise` is there in order to provide backwards compatibility with old versions of Python in which Exceptions were not objects with constructors. Now we would do something like \n\n`raise HALError(\"I can't let you do that, Dave\")`\n\nbut before you would write\n\n`raise HALError, \"I can't let you do that, Dave\"`\n\nbecause the `HALError(foo)` syntax didn't exist. So the multiple arguments basically allows you to still use the old syntax. Unfortunately this doesn't mean that we can just raise multiple exceptions...",
    "created_at": "2012-01-05T10:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134291",
    "user": "kini"
}
```

Thank you, David! I agree with you, that would be great. Unfortunately it is not supported by Python. The documentation you linked about the `raise` statement is unfortunately not so helpful - there must be between 1 and 3 arguments, and they have special meanings. Actually, the multiple-argument syntax for `raise` is there in order to provide backwards compatibility with old versions of Python in which Exceptions were not objects with constructors. Now we would do something like 

`raise HALError("I can't let you do that, Dave")`

but before you would write

`raise HALError, "I can't let you do that, Dave"`

because the `HALError(foo)` syntax didn't exist. So the multiple arguments basically allows you to still use the old syntax. Unfortunately this doesn't mean that we can just raise multiple exceptions...



---

archive/issue_comments_134292.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage",
    "created_at": "2012-01-05T10:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134292",
    "user": "kini"
}
```

apply to $SAGE_ROOT/devel/sage



---

archive/issue_comments_134293.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-05T10:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134293",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_134294.json:
```json
{
    "body": "Attachment\n\nNew patch up. Sorry about all this noise, I should really have just made a different ticket for this exception stuff.",
    "created_at": "2012-01-05T10:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134294",
    "user": "kini"
}
```

Attachment

New patch up. Sorry about all this noise, I should really have just made a different ticket for this exception stuff.



---

archive/issue_comments_134295.json:
```json
{
    "body": "Hellooooo !!!\n\nWell, thank you for this new version `:-)`\n\nIt passes all tests, so this ticket can go !\n\nNathann",
    "created_at": "2012-01-05T13:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134295",
    "user": "ncohen"
}
```

Hellooooo !!!

Well, thank you for this new version `:-)`

It passes all tests, so this ticket can go !

Nathann



---

archive/issue_comments_134296.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-05T13:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134296",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_134297.json:
```json
{
    "body": "Hurrah! Thanks for the review (and the original patch)!\n\nBTW, I botched that 2001 quote above... it should be \"I'm sorry, Dave, I'm afraid I can't do that\", of course `:P`",
    "created_at": "2012-01-05T14:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134297",
    "user": "kini"
}
```

Hurrah! Thanks for the review (and the original patch)!

BTW, I botched that 2001 quote above... it should be "I'm sorry, Dave, I'm afraid I can't do that", of course `:P`



---

archive/issue_comments_134298.json:
```json
{
    "body": "> BTW, I botched that 2001 quote above... it should be \"I'm sorry, Dave, I'm afraid I can't do that\", of course `:P`\n\nNo harm done, we both watched the french version of it `:-D`",
    "created_at": "2012-01-05T14:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134298",
    "user": "ncohen"
}
```

> BTW, I botched that 2001 quote above... it should be "I'm sorry, Dave, I'm afraid I can't do that", of course `:P`

No harm done, we both watched the french version of it `:-D`



---

archive/issue_comments_134299.json:
```json
{
    "body": "Use LookupError instead of ValueError or KeyError",
    "created_at": "2012-01-05T14:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134299",
    "user": "jdemeyer"
}
```

Use LookupError instead of ValueError or KeyError



---

archive/issue_comments_134300.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-01-05T14:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134300",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_134301.json:
```json
{
    "body": "Attachment\n\nSince `KeyError` is specifically about dicts, I think the more general `LookupError` is better.  Needs review.",
    "created_at": "2012-01-05T14:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134301",
    "user": "jdemeyer"
}
```

Attachment

Since `KeyError` is specifically about dicts, I think the more general `LookupError` is better.  Needs review.



---

archive/issue_comments_134302.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-05T14:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134302",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_134303.json:
```json
{
    "body": "Oh, I was under the impression that those base classes shouldn't be instantiated, but that seems to be unfounded after reading the docs. Looks good to me! Lines 855-856 of `$SAGE_ROOT/devel/sage/sage/graphs/base/graph_backends.py` contains another exception which seems like it should be a `LookupError` but I'm not sure I understand why the current exception is imported from !NetworkX. Maybe there is a good reason for it?",
    "created_at": "2012-01-05T14:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134303",
    "user": "kini"
}
```

Oh, I was under the impression that those base classes shouldn't be instantiated, but that seems to be unfounded after reading the docs. Looks good to me! Lines 855-856 of `$SAGE_ROOT/devel/sage/sage/graphs/base/graph_backends.py` contains another exception which seems like it should be a `LookupError` but I'm not sure I understand why the current exception is imported from !NetworkX. Maybe there is a good reason for it?



---

archive/issue_comments_134304.json:
```json
{
    "body": "Whoops, didn't mean to change the milestone.",
    "created_at": "2012-01-05T14:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134304",
    "user": "kini"
}
```

Whoops, didn't mean to change the milestone.



---

archive/issue_comments_134305.json:
```json
{
    "body": "Well, these lines are contained in the NetworkX backend, so it may mean that they define their own Exceptions in the NetworkX project. I do not think this class is still used in Sage anyway.\n\nNathann",
    "created_at": "2012-01-05T15:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134305",
    "user": "ncohen"
}
```

Well, these lines are contained in the NetworkX backend, so it may mean that they define their own Exceptions in the NetworkX project. I do not think this class is still used in Sage anyway.

Nathann



---

archive/issue_comments_134306.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-05T15:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134306",
    "user": "kini"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_134307.json:
```json
{
    "body": "But didn't Sage developers write that NetworkX backend wrapper? Well, never mind, if it's not used in Sage anymore.",
    "created_at": "2012-01-05T15:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134307",
    "user": "kini"
}
```

But didn't Sage developers write that NetworkX backend wrapper? Well, never mind, if it's not used in Sage anymore.



---

archive/issue_comments_134308.json:
```json
{
    "body": "Well yes, and that's most probably this class. But if you run some code made for NetworkX on a Sage graph with our own exception it may break the NetworkX code. I guess this was the point of importing exceptions. Thank you for the patch Jeroen !\n\nNathann",
    "created_at": "2012-01-05T15:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134308",
    "user": "ncohen"
}
```

Well yes, and that's most probably this class. But if you run some code made for NetworkX on a Sage graph with our own exception it may break the NetworkX code. I guess this was the point of importing exceptions. Thank you for the patch Jeroen !

Nathann



---

archive/issue_comments_134309.json:
```json
{
    "body": "Replying to [comment:29 ncohen]:\n> if you run some code made for NetworkX on a Sage graph\n\nAha, now I get it. And yes, thanks Jeroen :)",
    "created_at": "2012-01-05T15:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134309",
    "user": "kini"
}
```

Replying to [comment:29 ncohen]:
> if you run some code made for NetworkX on a Sage graph

Aha, now I get it. And yes, thanks Jeroen :)



---

archive/issue_comments_134310.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-01-15T21:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11770",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11770#issuecomment-134310",
    "user": "jdemeyer"
}
```

Resolution: fixed
