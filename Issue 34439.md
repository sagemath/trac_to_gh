# Issue 34439: Upgrade pip 22.3 and various other Python packages

archive/issues_034439.json:
```json
{
    "body": "and introduce new standard packages \n\n- `hatch_fancy_pypi_readme`: Fancy PyPI READMEs with Hatch\n\n- `hatch_vcs`: Hatch plugin for versioning with your preferred VCS\n\nbecause of the dependencies changes originated from \n\n\u200bhttps://github.com/python-jsonschema/jsonschema/blob/main/pyproject.toml#L1\n\nhttps://github.com/platformdirs/platformdirs/blob/main/pyproject.toml#L1\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34676\n\n",
    "closed_at": "2022-11-07T20:25:31Z",
    "created_at": "2022-10-18T06:33:38Z",
    "labels": [
        "component: packages: standard",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Upgrade pip 22.3 and various other Python packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34439",
    "user": "https://github.com/mkoeppe"
}
```
and introduce new standard packages 

- `hatch_fancy_pypi_readme`: Fancy PyPI READMEs with Hatch

- `hatch_vcs`: Hatch plugin for versioning with your preferred VCS

because of the dependencies changes originated from 

​https://github.com/python-jsonschema/jsonschema/blob/main/pyproject.toml#L1

https://github.com/platformdirs/platformdirs/blob/main/pyproject.toml#L1


Issue created by migration from https://trac.sagemath.org/ticket/34676





---

archive/issue_comments_487293.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-10-18T07:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487293",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487294.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2022-10-18T07:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487294",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_487295.json:
```json
{
    "body": "argon2_cffi no longer depends on six, see #34419",
    "created_at": "2022-10-18T18:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487295",
    "user": "https://github.com/fchapoton"
}
```

argon2_cffi no longer depends on six, see #34419



---

archive/issue_comments_487296.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-18T20:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487297.json:
```json
{
    "body": "dropped the argon2_cffi upgrade, which is on #34419",
    "created_at": "2022-10-20T03:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487297",
    "user": "https://github.com/mkoeppe"
}
```

dropped the argon2_cffi upgrade, which is on #34419



---

archive/issue_comments_487298.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-10-20T03:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_487299.json:
```json
{
    "body": "Would you explain these dependencies changes\n\n```diff\n--- a/build/pkgs/jsonschema/dependencies\n+++ b/build/pkgs/jsonschema/dependencies\n@@ -1,4 +1,4 @@\n-$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling\n+$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling hatch_fancy_pypi_readme\n```\n\n```diff\n--- a/build/pkgs/platformdirs/dependencies\n+++ b/build/pkgs/platformdirs/dependencies\n@@ -1,4 +1,4 @@\n-$(PYTHON) | $(PYTHON_TOOLCHAIN)\n+$(PYTHON) setuptools_scm | $(PYTHON_TOOLCHAIN) hatchling hatch_vcs\n```\nOr how can I check them?",
    "created_at": "2022-10-20T05:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487299",
    "user": "https://github.com/kwankyu"
}
```

Would you explain these dependencies changes

```diff
--- a/build/pkgs/jsonschema/dependencies
+++ b/build/pkgs/jsonschema/dependencies
@@ -1,4 +1,4 @@
-$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling
+$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling hatch_fancy_pypi_readme
```

```diff
--- a/build/pkgs/platformdirs/dependencies
+++ b/build/pkgs/platformdirs/dependencies
@@ -1,4 +1,4 @@
-$(PYTHON) | $(PYTHON_TOOLCHAIN)
+$(PYTHON) setuptools_scm | $(PYTHON_TOOLCHAIN) hatchling hatch_vcs
```
Or how can I check them?



---

archive/issue_comments_487300.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-10-30T21:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_487301.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T21:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487302.json:
```json
{
    "body": "Replying to [comment:8 Kwankyu Lee]:\n> Would you explain these dependencies changes\n> \n> ```diff\n> --- a/build/pkgs/jsonschema/dependencies\n> +++ b/build/pkgs/jsonschema/dependencies\n> @@ -1,4 +1,4 @@\n> -$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling\n> +$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling hatch_fancy_pypi_readme\n> ```\n\n\nThis is from https://github.com/python-jsonschema/jsonschema/blob/main/pyproject.toml#L1, but in fact we also need `hatch_vcs` here\n\n\n> {{{#!diff\n> --- a/build/pkgs/platformdirs/dependencies\n> +++ b/build/pkgs/platformdirs/dependencies\n> `@``@` -1,4 +1,4 `@``@`\n> -$(PYTHON) | $(PYTHON_TOOLCHAIN)\n> +$(PYTHON) setuptools_scm | $(PYTHON_TOOLCHAIN) hatchling hatch_vcs\n> }}}\n> Or how can I check them?\n> \n\n\nThis is from https://github.com/platformdirs/platformdirs/blob/main/pyproject.toml#L1",
    "created_at": "2022-10-30T21:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487302",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:8 Kwankyu Lee]:
> Would you explain these dependencies changes
> 
> ```diff
> --- a/build/pkgs/jsonschema/dependencies
> +++ b/build/pkgs/jsonschema/dependencies
> @@ -1,4 +1,4 @@
> -$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling
> +$(PYTHON) vcversioner attrs importlib_metadata pyrsistent | $(PYTHON_TOOLCHAIN) hatchling hatch_fancy_pypi_readme
> ```


This is from https://github.com/python-jsonschema/jsonschema/blob/main/pyproject.toml#L1, but in fact we also need `hatch_vcs` here


> {{{#!diff
> --- a/build/pkgs/platformdirs/dependencies
> +++ b/build/pkgs/platformdirs/dependencies
> `@``@` -1,4 +1,4 `@``@`
> -$(PYTHON) | $(PYTHON_TOOLCHAIN)
> +$(PYTHON) setuptools_scm | $(PYTHON_TOOLCHAIN) hatchling hatch_vcs
> }}}
> Or how can I check them?
> 


This is from https://github.com/platformdirs/platformdirs/blob/main/pyproject.toml#L1



---

archive/issue_comments_487303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T21:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487304.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_487305.json:
```json
{
    "body": "Currently we don't have better infrastructure for doing upgrades than trying the upgrade & watching for error messages while doing a build with high parallelization",
    "created_at": "2022-10-30T22:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487305",
    "user": "https://github.com/mkoeppe"
}
```

Currently we don't have better infrastructure for doing upgrades than trying the upgrade & watching for error messages while doing a build with high parallelization



---

archive/issue_comments_487306.json:
```json
{
    "body": "Replying to [comment:14 Matthias K\u00f6ppe]:\n> Currently we don't have better infrastructure for doing upgrades than trying the upgrade & watching for error messages while doing a build with high parallelization\n\n\nI understand. Hence the author is most informed of the sources of dependencies changes. I think it should be a norm that the author provides the information at least when the change is the reason to introduce new standard packages, perhaps in the ticket description.",
    "created_at": "2022-10-31T01:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487306",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:14 Matthias Köppe]:
> Currently we don't have better infrastructure for doing upgrades than trying the upgrade & watching for error messages while doing a build with high parallelization


I understand. Hence the author is most informed of the sources of dependencies changes. I think it should be a norm that the author provides the information at least when the change is the reason to introduce new standard packages, perhaps in the ticket description.



---

archive/issue_comments_487307.json:
```json
{
    "body": "Thanks, the ticket description is a good place for this (in addition to the commit messages)",
    "created_at": "2022-10-31T02:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487307",
    "user": "https://github.com/mkoeppe"
}
```

Thanks, the ticket description is a good place for this (in addition to the commit messages)



---

archive/issue_comments_487308.json:
```json
{
    "body": "LGTM. Thanks.",
    "created_at": "2022-10-31T03:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487308",
    "user": "https://github.com/kwankyu"
}
```

LGTM. Thanks.



---

archive/issue_comments_487309.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-10-31T03:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487309",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487310.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-10-31T07:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487310",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_events_089736.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-11-07T20:25:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/34439#event-89736"
}
```



---

archive/issue_comments_487311.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-11-07T20:25:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34439#issuecomment-487311",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
