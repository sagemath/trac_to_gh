# Issue 25900: Summing indicator functions

Issue created by migration from https://trac.sagemath.org/ticket/26137

Original creator: pelegm

Original creation time: 2018-08-27 06:14:01

Keywords: sum,kronecker_delta,unit_step

I am trying to define and sum indicator functions in several ways, some seem to be wrong, some are not implemented.

The first attempt was using the `n==1` expression:

```python
sage: sum(n==1, n, 0, infinity)
```

This may be too naive, and in fact raises a ValueError:

```pytb
#0: simplify_sum(expr='sum(_SAGE_VAR_n,_SAGE_VAR_n,0,inf))
#1: simplify_sum(expr='sum(_SAGE_VAR_n,_SAGE_VAR_n,0,inf) = inf)
Traceback (most recent call last):
  File "<ipython-input-118-f15294379754>", line 1, in <module>
    sum((n==Integer(1))(n), n, Integer(0), infinity)
  File "/.../sage/local/lib/python2.7/site-packages/sage/misc/functional.py", line 575, in symbolic_sum
    return expression.sum(*args, **kwds)
  File "sage/symbolic/expression.pyx", line 12269, in sage.symbolic.expression.Expression.sum (build/cythonized/sage/symbolic/expression.cpp:68969)
    return symbolic_sum(self, *args, **kwds)
  File "/.../sage/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 611, in symbolic_sum
    return maxima.sr_sum(expression,v,a,b)
  File "/.../sage/local/lib/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 898, in sr_sum
    raise ValueError("Sum is divergent.")
ValueError: Sum is divergent.
```


The second attempt was using the `kronecker_delta` function:

```python
sage: sum(kronecker_delta(n, 1), n, 0, infinity)
sum(kronecker_delta(1, n), n, 0, +Infinity)
```

but this was not evaluated.

The third attempt was a tweak on `unit_step`:

```python
sage: p(n) = (unit_step(n)+unit_step(-n)-1)
sage: sum(p(n), n, 0, infinity)
sum(unit_step(n) - 1, n, 0, +Infinity)
```

but this also wasn't evaluated.

Any ideas of how to do so? It is possible that this ticket is in fact a feature request (evaluating sums of these generalised functions).
