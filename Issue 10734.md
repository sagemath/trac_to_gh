# Issue 10734: typo in Sequence

Issue created by migration from https://trac.sagemath.org/ticket/10800

Original creator: dsm

Original creation time: 2011-02-18 14:01:21

Assignee: tbd

If you try to hash a mutable sequence, Sage complains that immutable sequences are unhashable..


```
sage: hash(a)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/Applications/sage_devel/<ipython console> in <module>()

/Applications/sage/local/lib/python2.6/site-packages/sage/structure/sequence.pyc in __hash__(self)
    517         """
    518         if not self._is_immutable:
--> 519             raise ValueError, "immutable sequences are unhashable"
    520         if self.__hash is None:
    521             self.__hash = hash(tuple(self))

ValueError: immutable sequences are unhashable
```


which is backwards; immutable sequences are the only ones that are hashable.


---

Comment by dsm created at 2011-02-18 14:05:22

Patch attached (mostly to see if I've got the mercurial-queue-to-patch process right.)


---

Comment by dsm created at 2011-02-18 19:14:37

Changing component from PLEASE CHANGE to misc.


---

Comment by dsm created at 2011-02-18 19:14:37

[Going with "misc" because I have no idea what to call this, and I'm tired of looking at "please change"..]


---

Comment by dsm created at 2011-02-18 19:14:37

Changing assignee from tbd to jason.


---

Comment by dsm created at 2011-03-06 15:45:49

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2011-03-06 17:34:42

Changing status from needs_review to positive_review.


---

Comment by aapitzsch created at 2011-03-06 18:01:38

Sorry, positive review was a bit too fast.

Could you change syntax of

```
raise ValueError, "mutable sequences are unhashable"
```

to

```
raise ValueError("mutable sequences are unhashable")
```

So we don't have to do it when porting sage to python3.


---

Comment by aapitzsch created at 2011-03-06 18:01:38

Changing status from positive_review to needs_work.


---

Comment by aapitzsch created at 2011-03-06 18:13:14

dsm, please add your e-mail address to the patch file.
http://www.sagemath.org/doc/developer/walk_through.html#submitting-a-change


---

Comment by dsm created at 2011-03-07 08:33:52

Changing status from needs_work to needs_review.


---

Attachment

Replying to [comment:6 aapitzsch]:
> {{{
> raise ValueError("mutable sequences are unhashable")
> }}}
> So we don't have to do it when porting sage to python3.

Done, but since 2to3 handles this automatically, I'd've thought it made more sense to leave these alone until then.

I've also added an email address.  I won't throw anyone under the bus, but I didn't conclude that names were mandatory while email addresses were merely preferred on my own. `:-)`


---

Comment by aapitzsch created at 2011-03-07 09:37:08

Changing status from needs_review to positive_review.


---

Comment by aapitzsch created at 2011-03-07 09:37:08

Thanks


---

Comment by jdemeyer created at 2011-03-08 09:20:00

This needs to be rebased to apply on top of #1819.


---

Comment by jdemeyer created at 2011-03-08 09:20:00

Changing status from positive_review to needs_work.


---

Attachment


---

Comment by dsm created at 2011-03-08 11:06:11

Lots of work to remove two characters from an error message! `;^)`  Rebased patch attached.


---

Comment by dsm created at 2011-03-08 11:06:11

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2011-03-08 11:11:44

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-03-08 21:47:36

Resolution: fixed
