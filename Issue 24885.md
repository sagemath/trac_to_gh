# Issue 24885: Construct RationalPolyhedralFan from possibly overlapping cones

Issue created by migration from Trac.

Original creator: yzh

Original creation time: 2018-04-08 19:47:57

CC:  novoselt vbraun moritz jipilab mkoeppe




---

Comment by novoselt created at 2018-04-09 01:44:42

What the result should be? The coarsest subdivision? And in what situations is it necessary?


---

Comment by yzh created at 2018-04-09 03:36:38

Changing keywords from "" to "RationalPolyhedralFan, cone arrangement, IMA-PolyGeom".


---

Comment by yzh created at 2018-04-09 16:47:48

New commits:


---

Comment by yzh created at 2018-04-09 16:47:48

Changing status from new to needs_review.


---

Comment by moritz created at 2018-04-10 01:20:58

Please put your name as an author, yzh


---

Comment by mkoeppe created at 2018-04-16 11:25:33

`allow_arrangement` is misspelled once in the documentation


---

Comment by git created at 2018-04-16 16:08:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-05-01 18:16:15

Moving some tickets to 9.2. This is not a promise that I will be working on them.


---

Comment by mkoeppe created at 2020-06-10 21:28:26

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-06-10 21:28:26


```
**********************************************************************
File "src/sage/geometry/fan.py", line 510, in sage.geometry.fan.?
Failed example:
    for cone in fan.generating_cones(): print(cone.rays())
Expected:
    N(1, 0),
    N(2, 1)
    in 2-d lattice N
    N(1, 2),
    N(2, 1)
    in 2-d lattice N
    N(1, 2),
    N(0, 1)
    in 2-d lattice N
    N(-1, -2)
    in 2-d lattice N
Got:
    N(2, 1),
    N(1, 0)
    in 2-d lattice N
    N(1, 2),
    N(2, 1)
    in 2-d lattice N
    N(1, 2),
    N(0, 1)
    in 2-d lattice N
    N(-1, -2)
    in 2-d lattice N
**********************************************************************
```

This doctest should be rewritten so it does not depend on the unspecified orders of cones in the fan and rays in the cones.


---

Comment by mkoeppe created at 2021-03-15 22:07:04

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-03-25 17:57:56

Rebased on 9.3.beta6
----
New commits:


---

Comment by mkoeppe created at 2021-03-25 17:59:07

Changing status from needs_work to needs_review.


---

Comment by git created at 2021-03-25 19:47:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-03-25 19:48:15

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-04-07 19:29:15

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.


---

Comment by vbraun created at 2021-05-11 22:33:53


```
**********************************************************************
File "src/sage/geometry/fan.py", line 512, in sage.geometry.fan.?
Failed example:
    for cone in sorted(fan.generating_cones()): print(sorted(cone.rays()))
Expected:
    N(1, 0),
    N(2, 1)
    in 2-d lattice N
    N(1, 2),
    N(2, 1)
    in 2-d lattice N
    N(0, 1),
    N(1, 2)
    in 2-d lattice N
    N(-1, -2)
    in 2-d lattice N
Got:
    [N(-1, -2)]
    [N(0, 1), N(1, 2)]
    [N(1, 0), N(2, 1)]
    [N(1, 2), N(2, 1)]
**********************************************************************
1 item had failures:
   1 of  52 in sage.geometry.fan.?
    [523 tests, 1 failure, 3.67 s]
----------------------------------------------------------------------
sage -t --long --warn-long 43.7 --random-seed=0 src/sage/geometry/fan.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

Comment by vbraun created at 2021-05-11 22:33:53

Changing status from positive_review to needs_work.


---

Comment by yzh created at 2021-05-11 23:56:25

New commits:


---

Comment by yzh created at 2021-05-11 23:56:25

Changing status from needs_work to needs_review.


---

Comment by git created at 2021-05-12 00:08:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-05-12 00:20:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-05-27 20:29:25

Resolution: fixed
