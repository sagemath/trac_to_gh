# Issue 30186: F-Matrix Factory

archive/issues_030186.json:
```json
{
    "body": "CC:  tscrim sage-combinat bump @willieab @physicstravels\n\nKeywords: Fusion Ring\n\nThe FusionRing and its methods contain nearly complete information about the underlying modular tensor category. However information is lost about the associator, and this is captured by the F-matrix or 6j symbols. This ticket adds a method to compute the F-matrices.\n\nThis may be tested on the rank <=4 examples in the paper of Rowell, Stong and Wang (arXiv:0712.1377). It is able to compute F-matrices for these examples except the last one, G2 at level 2.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30423\n\n",
    "created_at": "2020-08-23T21:56:11Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "F-Matrix Factory",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30186",
    "user": "bump"
}
```
CC:  tscrim sage-combinat bump @willieab @physicstravels

Keywords: Fusion Ring

The FusionRing and its methods contain nearly complete information about the underlying modular tensor category. However information is lost about the associator, and this is captured by the F-matrix or 6j symbols. This ticket adds a method to compute the F-matrices.

This may be tested on the rank <=4 examples in the paper of Rowell, Stong and Wang (arXiv:0712.1377). It is able to compute F-matrices for these examples except the last one, G2 at level 2.

Issue created by migration from https://trac.sagemath.org/ticket/30423





---

archive/issue_comments_430197.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-23T21:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430197",
    "user": "bump"
}
```

New commits:



---

archive/issue_comments_430198.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-23T23:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430198",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430199.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T00:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430199",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430200.json:
```json
{
    "body": "Just a quick comment: you can use `itertools.product` rather than the nested `for` loops in `hexagon` and `pentagon`:\n\n```\nsage: from itertools import product\nsage: list(product([1,2], repeat=3))                                                                                           \n[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2),\n (2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2)]\n```\n",
    "created_at": "2020-08-24T03:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430200",
    "user": "tscrim"
}
```

Just a quick comment: you can use `itertools.product` rather than the nested `for` loops in `hexagon` and `pentagon`:

```
sage: from itertools import product
sage: list(product([1,2], repeat=3))                                                                                           
[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2),
 (2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2)]
```




---

archive/issue_comments_430201.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T12:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430201",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430202.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T15:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430202",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430203.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T17:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430203",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-25T00:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430205.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-25T00:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430205",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430206.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-25T20:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430206",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-28T02:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430207",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430208.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430208",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_430209.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n\n> Setting new milestone based on a cursory review of ticket status, priority, and last modification date.\n\nThe main obstacle to finishing this ticket was removed by #31284. \n\nWillie Aboumrad has substantial improvements. His working code is much faster. I hope that a new version of the code will be available soon (maybe within a week). It would be good to get this into Sage 9.3 since applications to quantum computing require working F-matrix code.",
    "created_at": "2021-02-14T00:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430209",
    "user": "bump"
}
```

Replying to [comment:13 mkoeppe]:

> Setting new milestone based on a cursory review of ticket status, priority, and last modification date.

The main obstacle to finishing this ticket was removed by #31284. 

Willie Aboumrad has substantial improvements. His working code is much faster. I hope that a new version of the code will be available soon (maybe within a week). It would be good to get this into Sage 9.3 since applications to quantum computing require working F-matrix code.



---

archive/issue_comments_430210.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-02-19T22:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430210",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_430211.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-20T00:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430211",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430212.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-24T21:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430212",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430213.json:
```json
{
    "body": "The code is now working to compute F-matrices.\n\nFunctionality to compute braid group representations is now a method of the FusionRing.\n\nDocstrings need work but the example at the beginning of f_matrix.py.\nCoercions may need work.",
    "created_at": "2021-02-24T21:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430213",
    "user": "bump"
}
```

The code is now working to compute F-matrices.

Functionality to compute braid group representations is now a method of the FusionRing.

Docstrings need work but the example at the beginning of f_matrix.py.
Coercions may need work.



---

archive/issue_comments_430214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-26T17:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430214",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430215.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-26T20:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430215",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430216.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-26T22:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430216",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430217.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-26T23:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430217",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430218.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-27T00:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430218",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430219.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-27T20:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430219",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430220.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-28T18:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430220",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430221.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-28T22:58:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430221",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-28T23:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430222",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430223.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-02T16:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430223",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430224.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-05T22:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430224",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430225.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-06T19:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430225",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430226.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-08T22:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430226",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430227.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-09T00:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430227",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430228.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-13T00:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430228",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-13T15:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430229",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430230.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-14T23:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430230",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430231.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-16T18:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430231",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430232.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-17T01:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430232",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-17T23:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430233",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-19T15:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430234",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430235.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-19T15:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430235",
    "user": "bump"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_430236.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-20T03:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430236",
    "user": "bump"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_430237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-24T23:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430238.json:
```json
{
    "body": "With rebasing to the development branch, we currently have a segfault due to #30537:\n\n```\nsage: fm=FMatrix(FusionRing(\"A1\",4,fusion_labels=\"a\",inject_variables=True))\nsage: fm.find_orthogonal_solution()\nComputing F-symbols for The Fusion Ring of Type A1 and level 4 with\nInteger Ring coefficients with 238 variables...\nException in thread Thread-3:\nTraceback (most recent call last):\n  File \"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/threading.py\", line 954, in _bootstrap_inner\n      self.run()\n  File \"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/threading.py\", line 892, in run\n      self._target(*self._args, **self._kwargs)\n  File \"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/pool.py\", line 576, in _handle_results\n      task = get()\n  File \"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/connection.py\", line 256, in recv\n      return _ForkingPickler.loads(buf.getbuffer())\n  File \"sage/structure/factory.pyx\", line 714, in sage.structure.factory.generic_factory_unpickle (build/cythonized/sage/structure/factory.c:4331)\n  File \"sage/structure/factory.pyx\", line 371, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:3187)\n  File \"sage/structure/factory.pyx\", line 406, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:2465)\n  File \"sage/misc/weak_dict.pyx\", line 702, in sage.misc.weak_dict.WeakValueDictionary.__getitem__ (build/cythonized/sage/misc/weak_dict.c:3712)\n  File \"sage/rings/real_lazy.pyx\", line 1379, in sage.rings.real_lazy.LazyNamedUnop.__hash__ (build/cythonized/sage/rings/real_lazy.c:15866)\n  File \"sage/rings/real_lazy.pyx\", line 803, in sage.rings.real_lazy.LazyFieldElement.__complex__ (build/cythonized/sage/rings/real_lazy.c:10067)\n  File \"sage/rings/real_lazy.pyx\", line 1333, in sage.rings.real_lazy.LazyNamedUnop.eval (build/cythonized/sage/rings/real_lazy.c:15306)\n  File \"sage/rings/real_lazy.pyx\", line 1110, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:12998)\n  File \"sage/rings/real_lazy.pyx\", line 1111, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:13010)\n  File \"sage/rings/real_lazy.pyx\", line 1628, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18284)\n  File \"sage/rings/real_lazy.pyx\", line 1654, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18435)\n  File \"sage/rings/polynomial/polynomial_element.pyx\", line 7943, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64135)\n  File \"/Users/bump/sagemath/sage/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py\", line 258, in complex_roots rts = cfac.roots(multiplicities=False)\n  File \"sage/rings/polynomial/polynomial_element.pyx\", line 7849, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61466)\n  File \"sage/rings/polynomial/polynomial_element.pyx\", line 6127, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49925)\n  File \"sage/rings/polynomial/polynomial_element.pyx\", line 6180, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50330)\n  File \"sage/rings/complex_mpfr.pyx\", line 1393, in sage.rings.complex_mpfr.ComplexNumber.__pari__ (build/cythonized/sage/rings/complex_mpfr.c:14704)\n File \"sage/rings/real_mpfr.pyx\", line 3383, in sage.rings.real_mpfr.RealNumber.__pari__ (build/cythonized/sage/rings/real_mpfr.c:24175)\ncysignals.signals.SignalError: Segmentation Fault\n```\n",
    "created_at": "2021-03-25T23:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430238",
    "user": "tscrim"
}
```

With rebasing to the development branch, we currently have a segfault due to #30537:

```
sage: fm=FMatrix(FusionRing("A1",4,fusion_labels="a",inject_variables=True))
sage: fm.find_orthogonal_solution()
Computing F-symbols for The Fusion Ring of Type A1 and level 4 with
Integer Ring coefficients with 238 variables...
Exception in thread Thread-3:
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/threading.py", line 954, in _bootstrap_inner
      self.run()
  File "/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/threading.py", line 892, in run
      self._target(*self._args, **self._kwargs)
  File "/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/pool.py", line 576, in _handle_results
      task = get()
  File "/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/connection.py", line 256, in recv
      return _ForkingPickler.loads(buf.getbuffer())
  File "sage/structure/factory.pyx", line 714, in sage.structure.factory.generic_factory_unpickle (build/cythonized/sage/structure/factory.c:4331)
  File "sage/structure/factory.pyx", line 371, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:3187)
  File "sage/structure/factory.pyx", line 406, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:2465)
  File "sage/misc/weak_dict.pyx", line 702, in sage.misc.weak_dict.WeakValueDictionary.__getitem__ (build/cythonized/sage/misc/weak_dict.c:3712)
  File "sage/rings/real_lazy.pyx", line 1379, in sage.rings.real_lazy.LazyNamedUnop.__hash__ (build/cythonized/sage/rings/real_lazy.c:15866)
  File "sage/rings/real_lazy.pyx", line 803, in sage.rings.real_lazy.LazyFieldElement.__complex__ (build/cythonized/sage/rings/real_lazy.c:10067)
  File "sage/rings/real_lazy.pyx", line 1333, in sage.rings.real_lazy.LazyNamedUnop.eval (build/cythonized/sage/rings/real_lazy.c:15306)
  File "sage/rings/real_lazy.pyx", line 1110, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:12998)
  File "sage/rings/real_lazy.pyx", line 1111, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:13010)
  File "sage/rings/real_lazy.pyx", line 1628, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18284)
  File "sage/rings/real_lazy.pyx", line 1654, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18435)
  File "sage/rings/polynomial/polynomial_element.pyx", line 7943, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64135)
  File "/Users/bump/sagemath/sage/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py", line 258, in complex_roots rts = cfac.roots(multiplicities=False)
  File "sage/rings/polynomial/polynomial_element.pyx", line 7849, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61466)
  File "sage/rings/polynomial/polynomial_element.pyx", line 6127, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49925)
  File "sage/rings/polynomial/polynomial_element.pyx", line 6180, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50330)
  File "sage/rings/complex_mpfr.pyx", line 1393, in sage.rings.complex_mpfr.ComplexNumber.__pari__ (build/cythonized/sage/rings/complex_mpfr.c:14704)
 File "sage/rings/real_mpfr.pyx", line 3383, in sage.rings.real_mpfr.RealNumber.__pari__ (build/cythonized/sage/rings/real_mpfr.c:24175)
cysignals.signals.SignalError: Segmentation Fault
```




---

archive/issue_comments_430239.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-25T23:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430239",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430240.json:
```json
{
    "body": "Thanks for the ping from #30537. This almost certainly comes from the enabling of threads in pari. While it has been applied for a while in distros you must have come to a point where it is important in the interface.",
    "created_at": "2021-03-25T23:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430240",
    "user": "fbissey"
}
```

Thanks for the ping from #30537. This almost certainly comes from the enabling of threads in pari. While it has been applied for a while in distros you must have come to a point where it is important in the interface.



---

archive/issue_comments_430241.json:
```json
{
    "body": "We have seen crashes from combining Python multiprocessing together with libraries' use of threads in many circumstances, in particular in the parallel docbuild, see #31344,  #30351, #28483.",
    "created_at": "2021-03-26T01:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430241",
    "user": "mkoeppe"
}
```

We have seen crashes from combining Python multiprocessing together with libraries' use of threads in many circumstances, in particular in the parallel docbuild, see #31344,  #30351, #28483.



---

archive/issue_comments_430242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-26T15:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430243.json:
```json
{
    "body": "Here is a minimal example of the problem caused by ticket #30537\n\n\n```\nfrom multiprocessing import Pool, set_start_method\n\ndef problem_child(chil_id):\n    return pari(2)\n\nif __name__ == '__main__':\n    set_start_method('fork')\n    pool = Pool()\n\n    recv = pool.map(problem_child, range(pool._processes))\n    print(\"success!\")\n```\n\n\nThis runs with older versions of sage but not beta8 or later. The latest version of the code in the public/new_fmatrix-30423 branch contains a workaround but it would be better not to have to do this.",
    "created_at": "2021-03-26T22:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430243",
    "user": "bump"
}
```

Here is a minimal example of the problem caused by ticket #30537


```
from multiprocessing import Pool, set_start_method

def problem_child(chil_id):
    return pari(2)

if __name__ == '__main__':
    set_start_method('fork')
    pool = Pool()

    recv = pool.map(problem_child, range(pool._processes))
    print("success!")
```


This runs with older versions of sage but not beta8 or later. The latest version of the code in the public/new_fmatrix-30423 branch contains a workaround but it would be better not to have to do this.



---

archive/issue_comments_430244.json:
```json
{
    "body": "If we instead do\n\n```python\ndef problem_child(chil_id):\n    pari(2)\n    return 5\n```\n\nthen there is no problem. We can also pass something from the parent process to the child process without a segfault.",
    "created_at": "2021-03-26T22:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430244",
    "user": "tscrim"
}
```

If we instead do

```python
def problem_child(chil_id):
    pari(2)
    return 5
```

then there is no problem. We can also pass something from the parent process to the child process without a segfault.



---

archive/issue_comments_430245.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-26T23:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430245",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430246.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-03-27T16:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430246",
    "user": "bump"
}
```

New commits:



---

archive/issue_comments_430247.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-27T16:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430247",
    "user": "bump"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_430248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-05T23:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430248",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430249.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-06T23:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430249",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430250.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-06T23:20:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430250",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430251.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-07T03:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430251",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430252.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-07T17:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430252",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430253.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-07T18:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430253",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430254.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-07T20:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430254",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430255.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-04-10T08:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430255",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_430256.json:
```json
{
    "body": "First, you will need your real names as authors.\n\nI am making my way though this. The first commit will be more trivial stuff with formatting and a speedup of `get_variable_degrees` and `degree`:\n\n```\n7.66 \u00b5s \u00b1 21.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\nvs before\n\n```\n7.88 \u00b5s \u00b1 21.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```\n\n(at least it doesn't seem to make it worse).\n\nHowever, this is going to needs work because I am getting doctest failures when running the files individually:\n\n```\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 397, in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation\nFailed example:\n    A21.test_braid_representation(max_strands=4)\n    ...\n    TypeError: Cannot convert tuple to sage.rings.number_field.number_field_element.NumberFieldElement_absolute\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 400, in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation\nFailed example:\n    B22.test_braid_representation()      # long time\n    ...\n    TypeError: unsupported operand parent(s) for *: 'Full MatrixSpace of 10 by 10 sparse matrices over Cyclotomic Field of order 40 and degree 16' and 'Full MatrixSpace of 9 by 10 sparse matrices over Cyclotomic Field of order 40 and degree 16'\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 1199, in sage.combinat.root_system.fusion_ring.FusionRing._emap\nFailed example:\n    FR.fmats.find_orthogonal_solution(verbose=False)\n    ...\n    ValueError: The dimension of the ideal is 1, but it should be 0\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 1200, in sage.combinat.root_system.fusion_ring.FusionRing._emap\nFailed example:\n    len(FR._emap('odd_one_out',(a1,a1,7)))\n    ...\n    AttributeError: 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular' object has no attribute 'list'\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 1296, in sage.combinat.root_system.fusion_ring.FusionRing.?\nFailed example:\n    A14.gens_satisfy_braid_gp_rels(sig)                                 # long time\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 1362, in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels\nFailed example:\n    comp, sig = F41.get_braid_generators(f1,f0,4,verbose=False)\n    ...\n    ValueError: The dimension of the ideal is 1, but it should be 0\n**********************************************************************\nFile \"src/sage/combinat/root_system/fusion_ring.py\", line 1363, in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels\nFailed example:\n    F41.gens_satisfy_braid_gp_rels(sig)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels[3]>\", line 1, in <module>\n        F41.gens_satisfy_braid_gp_rels(sig)\n    NameError: name 'sig' is not defined\n**********************************************************************\n4 items had failures:\n   1 of   9 in sage.combinat.root_system.fusion_ring.FusionRing.?\n   2 of   9 in sage.combinat.root_system.fusion_ring.FusionRing._emap\n   2 of   5 in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels\n   2 of   5 in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation\n    [221 tests, 7 failures, 29.09 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long --random-seed=0 src/sage/combinat/root_system/fusion_ring.py  # 7 doctests failed\n----------------------------------------------------------------------\n```\n\n\n```\n**********************************************************************\nFile \"src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx\", line 353, in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb\nFailed example:\n    partition = f._partition_eqns()  # long time\nExpected:\n    Partitioned 261 equations into 57 components of size:\n    [24, 12, 12, 12, 12, 12, 12, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,\n     4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,\n     1, 1, 1, 1, 1]\nGot:\n    Partitioned 242 equations into 57 components of size:\n    [24, 12, 12, 12, 12, 12, 12, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1]\n**********************************************************************\nFile \"src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx\", line 362, in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb\nFailed example:\n    [f._tup_to_fpoly(_unflatten_coeffs(f._field,t)) for t in collect_eqns(0)]  # long time\nExpected:\n    [fx83*fx154 - fx111,\n     fx29^2*fx154 + fx29,\n     fx29*fx148 - fx40,\n     fx29*fx154^2 + fx154,\n     fx83*fx148 + fx29*fx154,\n     fx40*fx83 - fx29,\n     fx111*fx148 - fx154,\n     fx40*fx154 + fx148,\n     fx40*fx111 - fx29*fx154,\n     fx29*fx111 + fx83]\nGot:\n    [fx29*fx83*fx154 + fx83,\n     fx29^2*fx154 + fx29,\n     fx29*fx148 - fx40,\n     fx111^2*fx148 - fx83*fx154^2,\n     fx83^2*fx154 - fx83*fx111,\n     fx111*fx148^2 - fx148*fx154,\n     fx83*fx148 + fx29*fx154,\n     fx29*fx154^2 + fx111*fx148,\n     fx40*fx83 - fx29,\n     fx40*fx154 + fx148,\n     fx40*fx111 - fx29*fx154,\n     fx29*fx111 + fx83]\n**********************************************************************\nFile \"src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx\", line 430, in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats\nFailed example:\n    f._triangular_elim(worker_pool=pool)          # indirect doctest\nExpected:\n    Elimination epoch completed... 10 eqns remain in ideal basis\n    Elimination epoch completed... 0 eqns remain in ideal basis\nGot:\n    Elimination epoch completed... 18 eqns remain in ideal basis\n    Elimination epoch completed... 3 eqns remain in ideal basis\n**********************************************************************\nFile \"src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx\", line 433, in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats\nFailed example:\n    f.ideal_basis\nExpected:\n    []\nGot:\n    [(((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0),\n       (1,)),\n      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0),\n       (-1,))),\n     (((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0),\n       (1,)),\n      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),\n       (1,))),\n     (((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),\n       (1,)),\n      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),\n       (1,)))]\n**********************************************************************\n2 items had failures:\n   2 of  11 in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb\n   2 of  13 in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats\n    [90 tests, 4 failures, 6.71 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long --random-seed=0 src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx  # 4 doctests failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2021-04-10T08:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430256",
    "user": "tscrim"
}
```

First, you will need your real names as authors.

I am making my way though this. The first commit will be more trivial stuff with formatting and a speedup of `get_variable_degrees` and `degree`:

```
7.66 µs ± 21.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

vs before

```
7.88 µs ± 21.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```

(at least it doesn't seem to make it worse).

However, this is going to needs work because I am getting doctest failures when running the files individually:

```
File "src/sage/combinat/root_system/fusion_ring.py", line 397, in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation
Failed example:
    A21.test_braid_representation(max_strands=4)
    ...
    TypeError: Cannot convert tuple to sage.rings.number_field.number_field_element.NumberFieldElement_absolute
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 400, in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation
Failed example:
    B22.test_braid_representation()      # long time
    ...
    TypeError: unsupported operand parent(s) for *: 'Full MatrixSpace of 10 by 10 sparse matrices over Cyclotomic Field of order 40 and degree 16' and 'Full MatrixSpace of 9 by 10 sparse matrices over Cyclotomic Field of order 40 and degree 16'
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 1199, in sage.combinat.root_system.fusion_ring.FusionRing._emap
Failed example:
    FR.fmats.find_orthogonal_solution(verbose=False)
    ...
    ValueError: The dimension of the ideal is 1, but it should be 0
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 1200, in sage.combinat.root_system.fusion_ring.FusionRing._emap
Failed example:
    len(FR._emap('odd_one_out',(a1,a1,7)))
    ...
    AttributeError: 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular' object has no attribute 'list'
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 1296, in sage.combinat.root_system.fusion_ring.FusionRing.?
Failed example:
    A14.gens_satisfy_braid_gp_rels(sig)                                 # long time
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 1362, in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels
Failed example:
    comp, sig = F41.get_braid_generators(f1,f0,4,verbose=False)
    ...
    ValueError: The dimension of the ideal is 1, but it should be 0
**********************************************************************
File "src/sage/combinat/root_system/fusion_ring.py", line 1363, in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels
Failed example:
    F41.gens_satisfy_braid_gp_rels(sig)
Exception raised:
    Traceback (most recent call last):
      File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/uqtscrim/sage-build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels[3]>", line 1, in <module>
        F41.gens_satisfy_braid_gp_rels(sig)
    NameError: name 'sig' is not defined
**********************************************************************
4 items had failures:
   1 of   9 in sage.combinat.root_system.fusion_ring.FusionRing.?
   2 of   9 in sage.combinat.root_system.fusion_ring.FusionRing._emap
   2 of   5 in sage.combinat.root_system.fusion_ring.FusionRing.gens_satisfy_braid_gp_rels
   2 of   5 in sage.combinat.root_system.fusion_ring.FusionRing.test_braid_representation
    [221 tests, 7 failures, 29.09 s]
----------------------------------------------------------------------
sage -t --long --warn-long --random-seed=0 src/sage/combinat/root_system/fusion_ring.py  # 7 doctests failed
----------------------------------------------------------------------
```


```
**********************************************************************
File "src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx", line 353, in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb
Failed example:
    partition = f._partition_eqns()  # long time
Expected:
    Partitioned 261 equations into 57 components of size:
    [24, 12, 12, 12, 12, 12, 12, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
     4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
     1, 1, 1, 1, 1]
Got:
    Partitioned 242 equations into 57 components of size:
    [24, 12, 12, 12, 12, 12, 12, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1]
**********************************************************************
File "src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx", line 362, in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb
Failed example:
    [f._tup_to_fpoly(_unflatten_coeffs(f._field,t)) for t in collect_eqns(0)]  # long time
Expected:
    [fx83*fx154 - fx111,
     fx29^2*fx154 + fx29,
     fx29*fx148 - fx40,
     fx29*fx154^2 + fx154,
     fx83*fx148 + fx29*fx154,
     fx40*fx83 - fx29,
     fx111*fx148 - fx154,
     fx40*fx154 + fx148,
     fx40*fx111 - fx29*fx154,
     fx29*fx111 + fx83]
Got:
    [fx29*fx83*fx154 + fx83,
     fx29^2*fx154 + fx29,
     fx29*fx148 - fx40,
     fx111^2*fx148 - fx83*fx154^2,
     fx83^2*fx154 - fx83*fx111,
     fx111*fx148^2 - fx148*fx154,
     fx83*fx148 + fx29*fx154,
     fx29*fx154^2 + fx111*fx148,
     fx40*fx83 - fx29,
     fx40*fx154 + fx148,
     fx40*fx111 - fx29*fx154,
     fx29*fx111 + fx83]
**********************************************************************
File "src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx", line 430, in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats
Failed example:
    f._triangular_elim(worker_pool=pool)          # indirect doctest
Expected:
    Elimination epoch completed... 10 eqns remain in ideal basis
    Elimination epoch completed... 0 eqns remain in ideal basis
Got:
    Elimination epoch completed... 18 eqns remain in ideal basis
    Elimination epoch completed... 3 eqns remain in ideal basis
**********************************************************************
File "src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx", line 433, in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats
Failed example:
    f.ideal_basis
Expected:
    []
Got:
    [(((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0),
       (1,)),
      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0),
       (-1,))),
     (((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0),
       (1,)),
      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
       (1,))),
     (((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
       (1,)),
      ((0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
       (1,)))]
**********************************************************************
2 items had failures:
   2 of  11 in sage.combinat.root_system.fast_parallel_fmats_methods.compute_gb
   2 of  13 in sage.combinat.root_system.fast_parallel_fmats_methods.update_child_fmats
    [90 tests, 4 failures, 6.71 s]
----------------------------------------------------------------------
sage -t --long --warn-long --random-seed=0 src/sage/combinat/root_system/fast_parallel_fmats_methods.pyx  # 4 doctests failed
----------------------------------------------------------------------
```




---

archive/issue_comments_430257.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-10T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430257",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430258.json:
```json
{
    "body": "Changing keywords from \"Fusion Ring\" to \"Fusion Ring, F-matrix\".",
    "created_at": "2021-04-10T12:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430258",
    "user": "@willieab"
}
```

Changing keywords from "Fusion Ring" to "Fusion Ring, F-matrix".



---

archive/issue_comments_430259.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-10T21:55:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430259",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430260.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-12T21:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430260",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430261.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-12T22:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430261",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430262.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T20:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430262",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430263.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T21:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430263",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430264.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-16T17:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430264",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430265.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-21T21:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430265",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-21T21:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430266",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430267.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-21T22:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430267",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430268.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-23T21:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430268",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430269.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-27T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430269",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430270.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-30T20:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430270",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430271.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-30T20:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430271",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-30T22:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430272",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430273.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-30T22:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430273",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430274.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-03T06:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430274",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430275.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-03T21:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430275",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430276.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T20:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430276",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430277.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-17T20:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430277",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430278.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-17T20:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430278",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430279.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-18T18:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430279",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430280.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-19T16:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430280",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430281.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-21T18:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430281",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430282.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-25T02:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430282",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430283.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-25T19:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430283",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-26T20:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430284",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430285.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-28T21:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430285",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430286.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T01:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430286",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430287.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-06-29T01:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430287",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_430288.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T01:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430288",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430289.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-29T01:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430289",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_430290.json:
```json
{
    "body": "Sorry for taking so long to get this done. I have moved the files to a new folder for fusion rings. I also fixed an issue with the `fusiontree.png` not displaying. I made a few small code tweaks; mainly unrolling some `product` as the iterated loops are faster (even working as Python-only objects).\n\nPlease check my changes are good. Once that is done, this very impressive block of code can be positively reviewed.",
    "created_at": "2021-06-29T01:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430290",
    "user": "tscrim"
}
```

Sorry for taking so long to get this done. I have moved the files to a new folder for fusion rings. I also fixed an issue with the `fusiontree.png` not displaying. I made a few small code tweaks; mainly unrolling some `product` as the iterated loops are faster (even working as Python-only objects).

Please check my changes are good. Once that is done, this very impressive block of code can be positively reviewed.



---

archive/issue_comments_430291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-30T18:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430291",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430292.json:
```json
{
    "body": "I built this branch and looked everything over. I confirmed that the tests pass (including long) and that the documentation looks good.",
    "created_at": "2021-06-30T18:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430292",
    "user": "bump"
}
```

I built this branch and looked everything over. I confirmed that the tests pass (including long) and that the documentation looks good.



---

archive/issue_comments_430293.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-01T00:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430293",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_430294.json:
```json
{
    "body": "Thank you. Your last change LGTM.",
    "created_at": "2021-07-01T00:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430294",
    "user": "tscrim"
}
```

Thank you. Your last change LGTM.



---

archive/issue_comments_430295.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-06T21:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430295",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_430296.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2021-07-17T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430296",
    "user": "vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_430297.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2021-07-17T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430297",
    "user": "vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_430298.json:
```json
{
    "body": "This causes random segfaults, mostly observed on OSX:\n\n```\nsage -t --long --warn-long 81.8 --random-seed=0 src/sage/algebras/fusion_rings/f_matrix.py\n**********************************************************************\nFile \"src/sage/algebras/fusion_rings/f_matrix.py\", line 2425, in sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons\nFailed example:\n    f.find_orthogonal_solution()      # long time\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[1]>\", line 1, in <module>\n        f.find_orthogonal_solution()      # long time\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 2214, in find_orthogonal_solution\n        self._get_explicit_solution(verbose=verbose)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 1978, in _get_explicit_solution\n        roots = univ_poly.roots(multiplicities=False)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 8093, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:65823)\n        return self._roots_from_factorization(self.factor(), multiplicities)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 4428, in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:36027)\n        return R._factor_univariate_polynomial(self, **kwargs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/number_field/number_field.py\", line 10210, in _factor_univariate_polynomial\n        f = poly._pari_with_name()\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 6254, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50347)\n        vals = [x.__pari__() for x in self.list()]\n      File \"sage/rings/number_field/number_field_element.pyx\", line 714, in sage.rings.number_field.number_field_element.NumberFieldElement.__pari__ (build/cythonized/sage/rings/number_field/number_field_element.cpp:10745)\n        f = self._pari_polynomial(name)\n      File \"sage/rings/number_field/number_field_element.pyx\", line 615, in sage.rings.number_field.number_field_element.NumberFieldElement._pari_polynomial (build/cythonized/sage/rings/number_field/number_field_element.cpp:10449)\n        f = pari(self._coefficients()).Polrev()\n      File \"cypari2/pari_instance.pyx\", line 841, in cypari2.pari_instance.Pari.__call__\n      File \"cypari2/gen.pyx\", line 4824, in cypari2.gen.objtogen\n      File \"cypari2/gen.pyx\", line 4697, in cypari2.gen.list_of_Gens_to_Gen\n    cysignals.signals.SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/algebras/fusion_rings/f_matrix.py\", line 2443, in sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons\nFailed example:\n    f.certify_pentagons()            # long time (~1.5s)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[2]>\", line 1, in <module>\n        f.certify_pentagons()            # long time (~1.5s)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 2446, in certify_pentagons\n        fvars_copy = deepcopy(self._fvars)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 172, in deepcopy\n        y = _reconstruct(x, memo, *rv)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 264, in _reconstruct\n        y = func(*args)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 263, in <genexpr>\n        args = (deepcopy(arg, memo) for arg in args)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 172, in deepcopy\n        y = _reconstruct(x, memo, *rv)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 264, in _reconstruct\n        y = func(*args)\n      File \"sage/structure/factory.pyx\", line 714, in sage.structure.factory.generic_factory_unpickle (build/cythonized/sage/structure/factory.c:4331)\n        return F.get_object(*args)\n      File \"sage/structure/factory.pyx\", line 371, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:3187)\n        cpdef get_object(self, version, key, extra_args):\n      File \"sage/structure/factory.pyx\", line 406, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:2465)\n        return self._cache[version, cache_key]\n      File \"sage/misc/weak_dict.pyx\", line 702, in sage.misc.weak_dict.WeakValueDictionary.__getitem__ (build/cythonized/sage/misc/weak_dict.c:3712)\n        cdef PyObject* wr = PyDict_GetItemWithError(self, k)\n      File \"sage/rings/real_lazy.pyx\", line 1379, in sage.rings.real_lazy.LazyNamedUnop.__hash__ (build/cythonized/sage/rings/real_lazy.c:15864)\n        return hash(complex(self))\n      File \"sage/rings/real_lazy.pyx\", line 803, in sage.rings.real_lazy.LazyFieldElement.__complex__ (build/cythonized/sage/rings/real_lazy.c:10065)\n        return self.eval(complex)\n      File \"sage/rings/real_lazy.pyx\", line 1333, in sage.rings.real_lazy.LazyNamedUnop.eval (build/cythonized/sage/rings/real_lazy.c:15304)\n        arg = self._arg.eval(R)\n      File \"sage/rings/real_lazy.pyx\", line 1110, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:12996)\n        left = self._left.eval(R)\n      File \"sage/rings/real_lazy.pyx\", line 1111, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:13008)\n        right = self._right.eval(R)\n      File \"sage/rings/real_lazy.pyx\", line 1627, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18257)\n        self.eval(self.parent().interval_field(64)) # up the prec\n      File \"sage/rings/real_lazy.pyx\", line 1653, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18408)\n        roots = self._poly.roots(ring = AA if isinstance(self._parent, RealLazyField_class) else QQbar)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 8043, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64585)\n        rts = complex_roots(self, retval='algebraic')\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py\", line 258, in complex_roots\n        rts = cfac.roots(multiplicities=False)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 7949, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61916)\n        ext_rts = self.__pari__().polroots(precision=L.prec())\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 6201, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49942)\n        return self._pari_with_name(self._parent.variable_name())\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 6255, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50386)\n        return pari(vals).Polrev(name)\n      File \"cypari2/pari_instance.pyx\", line 841, in cypari2.pari_instance.Pari.__call__\n      File \"cypari2/gen.pyx\", line 4824, in cypari2.gen.objtogen\n      File \"cypari2/gen.pyx\", line 4697, in cypari2.gen.list_of_Gens_to_Gen\n    cysignals.signals.SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/algebras/fusion_rings/f_matrix.py\", line 2473, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal\nFailed example:\n    f = FMatrix(FusionRing(\"D4\", 1))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[0]>\", line 1, in <module>\n        f = FMatrix(FusionRing(\"D4\", Integer(1)))\n      File \"sage/misc/lazy_import.pyx\", line 362, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:4036)\n        return self.get_object()(*args, **kwds)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 295, in __init__\n        r = self._field.defining_polynomial().roots(ring=QQbar, multiplicities=False)[0]\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 8043, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64585)\n        rts = complex_roots(self, retval='algebraic')\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py\", line 258, in complex_roots\n        rts = cfac.roots(multiplicities=False)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 7949, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61916)\n        ext_rts = self.__pari__().polroots(precision=L.prec())\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 6201, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49942)\n        return self._pari_with_name(self._parent.variable_name())\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 6255, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50386)\n        return pari(vals).Polrev(name)\n      File \"cypari2/pari_instance.pyx\", line 841, in cypari2.pari_instance.Pari.__call__\n      File \"cypari2/gen.pyx\", line 4824, in cypari2.gen.objtogen\n      File \"cypari2/gen.pyx\", line 4697, in cypari2.gen.list_of_Gens_to_Gen\n    cysignals.signals.SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/algebras/fusion_rings/f_matrix.py\", line 2474, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal\nFailed example:\n    f.find_orthogonal_solution(verbose=False)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[1]>\", line 1, in <module>\n        f.find_orthogonal_solution(verbose=False)\n    NameError: name 'f' is not defined\n**********************************************************************\nFile \"src/sage/algebras/fusion_rings/f_matrix.py\", line 2475, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal\nFailed example:\n    f.fmats_are_orthogonal()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[2]>\", line 1, in <module>\n        f.fmats_are_orthogonal()\n    NameError: name 'f' is not defined\n    Killed due to segmentation fault\n**********************************************************************\nTests run before process (pid=64708) failed:\nsage: I = FusionRing(\"E8\",2,conjugate=True) ## line 162 ##\nsage: I.fusion_labels([\"i0\",\"p\",\"s\"],inject_variables=True) ## line 163 ##\nsage: f = FMatrix(I,inject_variables=True); f ## line 164 ##\ncreating variables fx1..fx14\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13\nF-Matrix factory for The Fusion Ring of Type E8 and level 2 with Integer Ring coefficients\nsage: f.fmatrix(s,s,s,s) ## line 182 ##\n[fx10 fx11]\n[fx12 fx13]\nsage: f.f_from(s,s,s,s), f.f_to(s,s,s,s) ## line 199 ##\n([i0, p], [i0, p])\nsage: sorted(f.get_defining_equations(\"pentagons\"))[1:3] ## line 216 ##\n[fx9*fx12 - fx2*fx13, fx4*fx11 - fx2*fx13]\nsage: sorted(f.get_defining_equations(\"hexagons\"))[1:3] ## line 218 ##\n[fx6 - 1, fx2 + 1]\nsage: sorted(f.get_orthogonality_constraints())[1:3] ## line 220 ##\n[fx10*fx11 + fx12*fx13, fx10*fx11 + fx12*fx13]\nsage: f.find_cyclotomic_solution() ## line 238 ##\nSetting up hexagons and pentagons...\nFinding a Groebner basis...\nSolving...\nFixing the gauge...\nadding equation... fx1 - 1\nadding equation... fx11 - 1\nDone!\nsage: f.fmatrix(s,s,s,s) ## line 250 ##\n[(-1/2*zeta128^48 + 1/2*zeta128^16)                                  1]\n[                               1/2  (1/2*zeta128^48 - 1/2*zeta128^16)]\nsage: f.fmat(s,s,s,s,p,p) ## line 253 ##\n(1/2*zeta128^48 - 1/2*zeta128^16)\nsage: f = FMatrix(FusionRing(\"B3\",2)) ## line 270 ##\nsage: f = FMatrix(FusionRing(\"G2\",2)) ## line 275 ##\nsage: f.find_orthogonal_solution(verbose=False) # long time (~11 s) ## line 276 ##\nsage: f.field()                                 # long time ## line 277 ##\nAlgebraic Field\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 279 ##\n0\nsage: FMatrix(FusionRing(\"B2\", 1)) ## line 317 ##\nF-Matrix factory for The Fusion Ring of Type B2 and level 1 with Integer Ring coefficients\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 319 ##\n0\nsage: f = FMatrix(FusionRing(\"E6\", 1)) ## line 328 ##\nsage: f.get_defining_equations('hexagons', output=False) ## line 329 ##\nsage: len(f.ideal_basis) ## line 330 ##\n6\nsage: f.clear_equations() ## line 332 ##\nsage: len(f.ideal_basis) == 0 ## line 333 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 335 ##\n0\nsage: f = FMatrix(FusionRing(\"C4\", 1)) ## line 344 ##\nsage: fvars = f.get_fvars() ## line 345 ##\nsage: some_key = sorted(fvars)[0] ## line 346 ##\nsage: fvars[some_key] ## line 347 ##\nfx0\nsage: fvars[some_key] = 1 ## line 349 ##\nsage: f.get_fvars()[some_key] ## line 350 ##\n1\nsage: f.clear_vars() ## line 352 ##\nsage: f.get_fvars()[some_key] ## line 353 ##\nfx0\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 355 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 366 ##\nsage: f._reset_solver_state() ## line 367 ##\nsage: K = f.field() ## line 368 ##\nsage: len(f._nnz.nonzero_positions()) ## line 369 ##\n1\nsage: f.find_orthogonal_solution(verbose=False) ## line 371 ##\nsage: K == f.field() ## line 372 ##\nFalse\nsage: f._reset_solver_state() ## line 374 ##\nsage: K == f.field() ## line 375 ##\nTrue\nsage: f.FR()._basecoer is None ## line 377 ##\nTrue\nsage: f._poly_ring.base_ring() == K ## line 379 ##\nTrue\nsage: sum(f._solved) == 0 ## line 381 ##\nTrue\nsage: len(f.ideal_basis) == 0 ## line 383 ##\nTrue\nsage: for k, v in f._ks.items():\n    k ## line 385 ##\nsage: len(f._nnz.nonzero_positions()) == 1 ## line 388 ##\nTrue\nsage: all(len(x.q_dimension.cache) == 0 for x in f.FR().basis()) ## line 390 ##\nTrue\nsage: len(f.FR().r_matrix.cache) == 0 ## line 392 ##\nTrue\nsage: len(f.FR().s_ij.cache) == 0 ## line 394 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 396 ##\n0\nsage: f=FMatrix(FusionRing(\"G2\", 1, fusion_labels=(\"i0\",\"t\"), inject_variables=True)) ## line 422 ##\nsage: [f.fmat(t,t,t,t,x,y) for x in f._FR.basis() for y in f._FR.basis()] ## line 423 ##\n[fx1, fx2, fx3, fx4]\nsage: f.find_cyclotomic_solution(output=True) ## line 425 ##\nSetting up hexagons and pentagons...\nFinding a Groebner basis...\nSolving...\nFixing the gauge...\nadding equation... fx2 - 1\nDone!\n{(t, t, t, i0, t, t): 1,\n (t, t, t, t, i0, i0): (-zeta60^14 + zeta60^6 + zeta60^4 - 1),\n (t, t, t, t, i0, t): 1,\n (t, t, t, t, t, i0): (-zeta60^14 + zeta60^6 + zeta60^4 - 1),\n (t, t, t, t, t, t): (zeta60^14 - zeta60^6 - zeta60^4 + 1)}\nsage: [f.fmat(t,t,t,t,x,y) for x in f._FR.basis() for y in f._FR.basis()] ## line 437 ##\n[(-zeta60^14 + zeta60^6 + zeta60^4 - 1),\n 1,\n (-zeta60^14 + zeta60^6 + zeta60^4 - 1),\n (zeta60^14 - zeta60^6 - zeta60^4 + 1)]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 442 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 2, fusion_labels=\"c\", inject_variables=True)) ## line 482 ##\nsage: f.fmatrix(c1,c1,c1,c1) ## line 483 ##\n[fx0 fx1]\n[fx2 fx3]\nsage: f.find_cyclotomic_solution(verbose=False); ## line 486 ##\nadding equation... fx4 - 1\nadding equation... fx10 - 1\nsage: f.f_from(c1,c1,c1,c1) ## line 489 ##\n[c0, c2]\nsage: f.f_to(c1,c1,c1,c1) ## line 491 ##\n[c0, c2]\nsage: f.fmatrix(c1,c1,c1,c1) ## line 493 ##\n[ (1/2*zeta32^12 - 1/2*zeta32^4) (-1/2*zeta32^12 + 1/2*zeta32^4)]\n[ (1/2*zeta32^12 - 1/2*zeta32^4)  (1/2*zeta32^12 - 1/2*zeta32^4)]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 496 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\",1)) ## line 529 ##\nsage: f.field() ## line 530 ##\nCyclotomic Field of order 60 and degree 16\nsage: f.find_orthogonal_solution(verbose=False) ## line 532 ##\nsage: f.field() ## line 533 ##\nNumber Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1\nsage: phi = f.get_qqbar_embedding() ## line 535 ##\nsage: [phi(r).n() for r in f.get_non_cyclotomic_roots()] ## line 536 ##\n[-0.786151377757423 - 8.92806368517581e-31*I]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 545 ##\n0\nsage: f = FMatrix(FusionRing(\"D3\",1)) ## line 554 ##\nsage: f.FR() ## line 555 ##\nThe Fusion Ring of Type D3 and level 1 with Integer Ring coefficients\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 557 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1, fusion_labels=(\"i0\",\"t\"))) ## line 570 ##\nsage: f.findcases() ## line 571 ##\n5\nsage: f.findcases(output=True) ## line 573 ##\n({0: (t, t, t, i0, t, t),\n  1: (t, t, t, t, i0, i0),\n  2: (t, t, t, t, i0, t),\n  3: (t, t, t, t, t, i0),\n  4: (t, t, t, t, t, t)},\n {(t, t, t, i0, t, t): fx0,\n  (t, t, t, t, i0, i0): fx1,\n  (t, t, t, t, i0, t): fx2,\n  (t, t, t, t, t, i0): fx3,\n  (t, t, t, t, t, t): fx4})\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 584 ##\n0\nsage: fr = FusionRing(\"A1\", 3, fusion_labels=\"a\", inject_variables=True) ## line 617 ##\nsage: f = FMatrix(fr) ## line 618 ##\nsage: f.fmatrix(a1,a1,a2,a2) ## line 619 ##\n[fx6 fx7]\n[fx8 fx9]\nsage: f.f_from(a1,a1,a2,a2) ## line 622 ##\n[a0, a2]\nsage: f.f_to(a1,a1,a2,a2) ## line 624 ##\n[a1, a3]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 626 ##\n0\nsage: b22 = FusionRing(\"B2\", 2) ## line 641 ##\nsage: b22.fusion_labels(\"b\", inject_variables=True) ## line 642 ##\nsage: B=FMatrix(b22) ## line 643 ##\nsage: B.fmatrix(b2, b4, b2, b4) ## line 644 ##\n[fx266 fx267 fx268]\n[fx269 fx270 fx271]\n[fx272 fx273 fx274]\nsage: B.f_from(b2, b4, b2, b4) ## line 648 ##\n[b1, b3, b5]\nsage: B.f_to(b2, b4, b2, b4) ## line 650 ##\n[b1, b3, b5]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 652 ##\n0\nsage: f = FMatrix(FusionRing(\"A2\", 1), inject_variables=True) ## line 672 ##\ncreating variables fx1..fx8\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7\nsage: f.get_fvars()[(f1, f1, f1, f0, f2, f2)] ## line 675 ##\nfx0\nsage: f.find_orthogonal_solution(verbose=False) ## line 677 ##\nsage: f.get_fvars()[(f1, f1, f1, f0, f2, f2)] ## line 678 ##\n1\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 680 ##\n0\nsage: f = FMatrix(FusionRing(\"B6\", 1)) ## line 689 ##\nsage: f.get_poly_ring() ## line 690 ##\nMultivariate Polynomial Ring in fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13 over Cyclotomic Field of order 96 and degree 32\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 693 ##\n0\nsage: f = FMatrix(FusionRing(\"E6\", 1)) ## line 713 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 714 ##\nsage: f.field() == f.FR().field() ## line 715 ##\nTrue\nsage: f.get_non_cyclotomic_roots() ## line 717 ##\n[]\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 719 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 720 ##\nsage: f.field() == f.FR().field() ## line 721 ##\nFalse\nsage: phi = f.get_qqbar_embedding() ## line 723 ##\nsage: [phi(r).n() for r in f.get_non_cyclotomic_roots()] ## line 724 ##\n[-0.786151377757423 - 8.92806368517581e-31*I]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 730 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1), fusion_label=\"g\", inject_variables=True) ## line 747 ##\ncreating variables fx1..fx5\nDefining fx0, fx1, fx2, fx3, fx4\nsage: f.find_orthogonal_solution() ## line 750 ##\nComputing F-symbols for The Fusion Ring of Type G2 and level 1 with Integer Ring coefficients with 5 variables...\nSet up 10 hex and orthogonality constraints...\nPartitioned 10 equations into 2 components of size:\n[4, 1]\nElimination epoch completed... 0 eqns remain in ideal basis\nHex elim step solved for 4 / 5 variables\nSet up 0 reduced pentagons...\nPent elim step solved for 4 / 5 variables\nPartitioned 0 equations into 0 components of size:\n[]\nPartitioned 1 equations into 1 components of size:\n[1]\nComputing appropriate NumberField...\nsage: phi = f.get_qqbar_embedding() ## line 764 ##\nsage: phi(f.fmat(g1,g1,g1,g1,g1,g1)).n() ## line 765 ##\n-0.618033988749895 + 1.46674215951686e-29*I\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 767 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 780 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 781 ##\nsage: f.FR().field() ## line 782 ##\nCyclotomic Field of order 60 and degree 16\nsage: f.field() ## line 784 ##\nNumber Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1\nsage: phi = f.get_coerce_map_from_fr_cyclotomic_field() ## line 786 ##\nsage: phi.domain() == f.FR().field() ## line 787 ##\nTrue\nsage: phi.codomain() == f.field() ## line 789 ##\nTrue\nsage: f = FMatrix(FusionRing(\"A2\", 1)) ## line 800 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 801 ##\nsage: phi = f.get_coerce_map_from_fr_cyclotomic_field() ## line 802 ##\nsage: f.field() ## line 803 ##\nCyclotomic Field of order 48 and degree 16\nsage: f.field() == f.FR().field() ## line 805 ##\nTrue\nsage: phi.domain() == f.field() ## line 807 ##\nTrue\nsage: phi.is_identity() ## line 809 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 811 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1), fusion_label=\"g\", inject_variables=True) ## line 831 ##\ncreating variables fx1..fx5\nDefining fx0, fx1, fx2, fx3, fx4\nsage: f.find_orthogonal_solution(verbose=False) ## line 834 ##\nsage: f.field() ## line 835 ##\nNumber Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1\nsage: f.get_fvars_in_alg_field() ## line 837 ##\n{(g1, g1, g1, g0, g1, g1): 1,\n (g1, g1, g1, g1, g0, g0): 0.61803399? + 0.?e-8*I,\n (g1, g1, g1, g1, g0, g1): -0.7861514? + 0.?e-8*I,\n (g1, g1, g1, g1, g1, g0): -0.7861514? + 0.?e-8*I,\n (g1, g1, g1, g1, g1, g1): -0.61803399? + 0.?e-8*I}\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 843 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 852 ##\nsage: f.FR().fusion_labels(\"g\", inject_variables=True) ## line 853 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 854 ##\nsage: radical_fvars = f.get_radical_expression()       # long time (~1.5s) ## line 855 ##\nsage: radical_fvars[g1, g1, g1, g1, g1, g0]            # long time ## line 856 ##\n-sqrt(1/2*sqrt(5) - 1/2)\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 858 ##\n0\nsage: f = FMatrix(FusionRing(\"D4\", 1)) ## line 872 ##\nsage: f._reset_solver_state() ## line 873 ##\nsage: len(f._get_known_vals()) == 0 ## line 874 ##\nTrue\nsage: f.find_orthogonal_solution(verbose=False) ## line 876 ##\nsage: len(f._get_known_vals()) == f._poly_ring.ngens() ## line 877 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 879 ##\n0\nsage: f = FMatrix(FusionRing(\"D5\", 1))  # indirect doctest ## line 893 ##\nsage: f._reset_solver_state() ## line 894 ##\nsage: f._nnz ## line 895 ##\n(100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100)\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 898 ##\n0\nsage: f = FMatrix(FusionRing(\"B3\", 2)) ## line 914 ##\nsage: f.largest_fmat_size() ## line 915 ##\n4\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 917 ##\n0\nsage: f = FMatrix(FusionRing(\"A2\",2), inject_variables=True) ## line 941 ##\ncreating variables fx1..fx287\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26, fx27, fx28, fx29, fx30, fx31, fx32, fx33, fx34, fx35, fx36, fx37, fx38, fx39, fx40, fx41, fx42, fx43, fx44, fx45, fx46, fx47, fx48, fx49, fx50, fx51, fx52, fx53, fx54, fx55, fx56, fx57, fx58, fx59, fx60, fx61, fx62, fx63, fx64, fx65, fx66, fx67, fx68, fx69, fx70, fx71, fx72, fx73, fx74, fx75, fx76, fx77, fx78, fx79, fx80, fx81, fx82, fx83, fx84, fx85, fx86, fx87, fx88, fx89, fx90, fx91, fx92, fx93, fx94, fx95, fx96, fx97, fx98, fx99, fx100, fx101, fx102, fx103, fx104, fx105, fx106, fx107, fx108, fx109, fx110, fx111, fx112, fx113, fx114, fx115, fx116, fx117, fx118, fx119, fx120, fx121, fx122, fx123, fx124, fx125, fx126, fx127, fx128, fx129, fx130, fx131, fx132, fx133, fx134, fx135, fx136, fx137, fx138, fx139, fx140, fx141, fx142, fx143, fx144, fx145, fx146, fx147, fx148, fx149, fx150, fx151, fx152, fx153, fx154, fx155, fx156, fx157, fx158, fx159, fx160, fx161, fx162, fx163, fx164, fx165, fx166, fx167, fx168, fx169, fx170, fx171, fx172, fx173, fx174, fx175, fx176, fx177, fx178, fx179, fx180, fx181, fx182, fx183, fx184, fx185, fx186, fx187, fx188, fx189, fx190, fx191, fx192, fx193, fx194, fx195, fx196, fx197, fx198, fx199, fx200, fx201, fx202, fx203, fx204, fx205, fx206, fx207, fx208, fx209, fx210, fx211, fx212, fx213, fx214, fx215, fx216, fx217, fx218, fx219, fx220, fx221, fx222, fx223, fx224, fx225, fx226, fx227, fx228, fx229, fx230, fx231, fx232, fx233, fx234, fx235, fx236, fx237, fx238, fx239, fx240, fx241, fx242, fx243, fx244, fx245, fx246, fx247, fx248, fx249, fx250, fx251, fx252, fx253, fx254, fx255, fx256, fx257, fx258, fx259, fx260, fx261, fx262, fx263, fx264, fx265, fx266, fx267, fx268, fx269, fx270, fx271, fx272, fx273, fx274, fx275, fx276, fx277, fx278, fx279, fx280, fx281, fx282, fx283, fx284, fx285, fx286\nsage: f.largest_fmat_size() ## line 944 ##\n2\nsage: f.get_fvars_by_size(2) ## line 946 ##\n{(f2, f2, f2, f4, f1, f1),\n (f2, f2, f2, f4, f1, f5),\n (f2, f2, f2, f4, f5, f1),\n (f2, f2, f2, f4, f5, f5),\n (f2, f2, f1, f2, f1, f0),\n (f2, f2, f1, f2, f1, f4),\n (f2, f2, f1, f2, f5, f0),\n (f2, f2, f1, f2, f5, f4),\n (f2, f2, f4, f1, f1, f2),\n (f2, f2, f4, f1, f1, f3),\n (f2, f2, f4, f1, f5, f2),\n (f2, f2, f4, f1, f5, f3),\n (f2, f1, f2, f2, f0, f0),\n (f2, f1, f2, f2, f0, f4),\n (f2, f1, f2, f2, f4, f0),\n (f2, f1, f2, f2, f4, f4),\n (f2, f1, f1, f1, f0, f2),\n (f2, f1, f1, f1, f0, f3),\n (f2, f1, f1, f1, f4, f2),\n (f2, f1, f1, f1, f4, f3),\n (f2, f1, f4, f4, f0, f1),\n (f2, f1, f4, f4, f0, f5),\n (f2, f1, f4, f4, f4, f1),\n (f2, f1, f4, f4, f4, f5),\n (f2, f4, f2, f1, f2, f2),\n (f2, f4, f2, f1, f2, f3),\n (f2, f4, f2, f1, f3, f2),\n (f2, f4, f2, f1, f3, f3),\n (f2, f4, f1, f4, f2, f1),\n (f2, f4, f1, f4, f2, f5),\n (f2, f4, f1, f4, f3, f1),\n (f2, f4, f1, f4, f3, f5),\n (f2, f4, f4, f2, f2, f0),\n (f2, f4, f4, f2, f2, f4),\n (f2, f4, f4, f2, f3, f0),\n (f2, f4, f4, f2, f3, f4),\n (f1, f2, f2, f2, f0, f1),\n (f1, f2, f2, f2, f0, f5),\n (f1, f2, f2, f2, f4, f1),\n (f1, f2, f2, f2, f4, f5),\n (f1, f2, f1, f1, f0, f0),\n (f1, f2, f1, f1, f0, f4),\n (f1, f2, f1, f1, f4, f0),\n (f1, f2, f1, f1, f4, f4),\n (f1, f2, f4, f4, f0, f2),\n (f1, f2, f4, f4, f0, f3),\n (f1, f2, f4, f4, f4, f2),\n (f1, f2, f4, f4, f4, f3),\n (f1, f1, f2, f1, f2, f0),\n (f1, f1, f2, f1, f2, f4),\n (f1, f1, f2, f1, f3, f0),\n (f1, f1, f2, f1, f3, f4),\n (f1, f1, f1, f4, f2, f2),\n (f1, f1, f1, f4, f2, f3),\n (f1, f1, f1, f4, f3, f2),\n (f1, f1, f1, f4, f3, f3),\n (f1, f1, f4, f2, f2, f1),\n (f1, f1, f4, f2, f2, f5),\n (f1, f1, f4, f2, f3, f1),\n (f1, f1, f4, f2, f3, f5),\n (f1, f4, f2, f4, f1, f2),\n (f1, f4, f2, f4, f1, f3),\n (f1, f4, f2, f4, f5, f2),\n (f1, f4, f2, f4, f5, f3),\n (f1, f4, f1, f2, f1, f1),\n (f1, f4, f1, f2, f1, f5),\n (f1, f4, f1, f2, f5, f1),\n (f1, f4, f1, f2, f5, f5),\n (f1, f4, f4, f1, f1, f0),\n (f1, f4, f4, f1, f1, f4),\n (f1, f4, f4, f1, f5, f0),\n (f1, f4, f4, f1, f5, f4),\n (f4, f2, f2, f1, f2, f1),\n (f4, f2, f2, f1, f2, f5),\n (f4, f2, f2, f1, f3, f1),\n (f4, f2, f2, f1, f3, f5),\n (f4, f2, f1, f4, f2, f0),\n (f4, f2, f1, f4, f2, f4),\n (f4, f2, f1, f4, f3, f0),\n (f4, f2, f1, f4, f3, f4),\n (f4, f2, f4, f2, f2, f2),\n (f4, f2, f4, f2, f2, f3),\n (f4, f2, f4, f2, f3, f2),\n (f4, f2, f4, f2, f3, f3),\n (f4, f1, f2, f4, f1, f0),\n (f4, f1, f2, f4, f1, f4),\n (f4, f1, f2, f4, f5, f0),\n (f4, f1, f2, f4, f5, f4),\n (f4, f1, f1, f2, f1, f2),\n (f4, f1, f1, f2, f1, f3),\n (f4, f1, f1, f2, f5, f2),\n (f4, f1, f1, f2, f5, f3),\n (f4, f1, f4, f1, f1, f1),\n (f4, f1, f4, f1, f1, f5),\n (f4, f1, f4, f1, f5, f1),\n (f4, f1, f4, f1, f5, f5),\n (f4, f4, f2, f2, f0, f2),\n (f4, f4, f2, f2, f0, f3),\n (f4, f4, f2, f2, f4, f2),\n (f4, f4, f2, f2, f4, f3),\n (f4, f4, f1, f1, f0, f1),\n (f4, f4, f1, f1, f0, f5),\n (f4, f4, f1, f1, f4, f1),\n (f4, f4, f1, f1, f4, f5),\n (f4, f4, f4, f4, f0, f0),\n (f4, f4, f4, f4, f0, f4),\n (f4, f4, f4, f4, f4, f0),\n (f4, f4, f4, f4, f4, f4)}\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 952 ##\n0\nsage: f = FMatrix(FusionRing(\"A2\", 1)) ## line 1000 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 1001 ##\nsage: fvars = f.get_fvars() ## line 1002 ##\nsage: K = f.field() ## line 1003 ##\nsage: filename = f.get_fr_str() + \"_solver_results.pickle\" ## line 1004 ##\nsage: f.save_fvars(filename) ## line 1005 ##\nsage: del f ## line 1006 ##\nsage: f2 = FMatrix(FusionRing(\"A2\",1)) ## line 1007 ##\nsage: f2.load_fvars(filename) ## line 1008 ##\nsage: fvars == f2.get_fvars() ## line 1009 ##\nTrue\nsage: K == f2.field() ## line 1011 ##\nTrue\nsage: os.remove(filename) ## line 1013 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1014 ##\n0\nsage: f = FMatrix(FusionRing(\"A2\",1)) ## line 1032 ##\nsage: f.find_orthogonal_solution(verbose=False) ## line 1033 ##\nsage: fvars = f.get_fvars() ## line 1034 ##\nsage: K = f.field() ## line 1035 ##\nsage: filename = f.get_fr_str() + \"_solver_results.pickle\" ## line 1036 ##\nsage: f.save_fvars(filename) ## line 1037 ##\nsage: del f ## line 1038 ##\nsage: f2 = FMatrix(FusionRing(\"A2\",1)) ## line 1039 ##\nsage: f2.load_fvars(filename) ## line 1040 ##\nsage: fvars == f2.get_fvars() ## line 1041 ##\nTrue\nsage: K == f2.field() ## line 1043 ##\nTrue\nsage: os.remove(filename) ## line 1045 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1054 ##\n0\nsage: f = FMatrix(FusionRing(\"B3\", 1)) ## line 1068 ##\nsage: f.get_fr_str() ## line 1069 ##\n'B31'\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1071 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 1081 ##\nsage: f._reset_solver_state() ## line 1082 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1083 ##\nsage: f.get_defining_equations('hexagons',output=False) ## line 1084 ##\nsage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1085 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1086 ##\nsage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1087 ##\nsage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1088 ##\nsage: n = f._poly_ring.ngens() ## line 1089 ##\nsage: f._fvars = FvarsHandler(n,f._field,f._idx_to_sextuple,init_data=f._fvars) ## line 1090 ##\nsage: f._triangular_elim(verbose=False) ## line 1091 ##\nsage: f._update_reduction_params() ## line 1092 ##\nsage: f._checkpoint(do_chkpt=True,status=2) ## line 1093 ##\nCheckpoint 2 reached!\nsage: del f ## line 1095 ##\nsage: f = FMatrix(FusionRing(\"A1\",3)) ## line 1096 ##\nsage: f.find_orthogonal_solution(warm_start=\"fmatrix_solver_checkpoint_A13.pickle\") ## line 1097 ##\nComputing F-symbols for The Fusion Ring of Type A1 and level 3 with Integer Ring coefficients with 71 variables...\nSet up 121 reduced pentagons...\nElimination epoch completed... 18 eqns remain in ideal basis\nElimination epoch completed... 5 eqns remain in ideal basis\nPent elim step solved for 64 / 71 variables\nPartitioned 5 equations into 1 components of size:\n[4]\nElimination epoch completed... 0 eqns remain in ideal basis\nPartitioned 6 equations into 6 components of size:\n[1, 1, 1, 1, 1, 1]\nComputing appropriate NumberField...\nsage: f._chkpt_status == 7 ## line 1109 ##\nTrue\nsage: sum(f._solved) == f._poly_ring.ngens() ## line 1111 ##\nTrue\nsage: os.remove(\"fmatrix_solver_checkpoint_A13.pickle\") ## line 1113 ##\nsage: f = FMatrix(FusionRing(\"A1\",2)) ## line 1114 ##\nsage: f._reset_solver_state() ## line 1115 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1116 ##\nsage: f.get_defining_equations('hexagons',output=False) ## line 1117 ##\nsage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1118 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey ## line 1119 ##\nsage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1120 ##\nsage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1121 ##\nsage: n = f._poly_ring.ngens() ## line 1122 ##\nsage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1123 ##\nsage: f._triangular_elim(verbose=False) ## line 1124 ##\nsage: f._update_reduction_params() ## line 1125 ##\nsage: f.get_defining_equations('pentagons',output=False) ## line 1126 ##\nsage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1127 ##\nsage: f._triangular_elim(verbose=False) ## line 1128 ##\nsage: f._checkpoint(do_chkpt=True,status=4) ## line 1129 ##\nCheckpoint 4 reached!\nsage: del f ## line 1131 ##\nsage: f = FMatrix(FusionRing(\"A1\", 2)) ## line 1132 ##\nsage: f.find_orthogonal_solution(warm_start=\"fmatrix_solver_checkpoint_A12.pickle\") ## line 1133 ##\nComputing F-symbols for The Fusion Ring of Type A1 and level 2 with Integer Ring coefficients with 14 variables...\nPartitioned 0 equations into 0 components of size:\n[]\nPartitioned 2 equations into 2 components of size:\n[1, 1]\nsage: f._chkpt_status == 7 ## line 1139 ##\nTrue\nsage: sum(f._solved) == f._poly_ring.ngens() ## line 1141 ##\nTrue\nsage: os.remove(\"fmatrix_solver_checkpoint_A12.pickle\") ## line 1143 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1144 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 2)) ## line 1160 ##\nsage: f._reset_solver_state() ## line 1161 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1162 ##\nsage: f.get_defining_equations('hexagons', output=False) ## line 1163 ##\nsage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1164 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1165 ##\nsage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1166 ##\nsage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1167 ##\nsage: n = f._poly_ring.ngens() ## line 1168 ##\nsage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1169 ##\nsage: f._triangular_elim(verbose=False) ## line 1170 ##\nsage: f._update_reduction_params() ## line 1171 ##\nsage: fvars = f._fvars ## line 1172 ##\nsage: ib = f.ideal_basis ## line 1173 ##\nsage: solved = f._solved ## line 1174 ##\nsage: ks = f._ks ## line 1175 ##\nsage: status = f._chkpt_status ## line 1176 ##\nsage: f._checkpoint(do_chkpt=True, status=2) ## line 1177 ##\nCheckpoint 2 reached!\nsage: del f ## line 1179 ##\nsage: f = FMatrix(FusionRing(\"A1\", 2)) ## line 1180 ##\nsage: f._reset_solver_state() ## line 1181 ##\nsage: f._restore_state(\"fmatrix_solver_checkpoint_A12.pickle\") ## line 1182 ##\nsage: for sextuple, fvar in fvars.items():\n    assert fvar == f._fvars[sextuple] ## line 1183 ##\nsage: ib == f.ideal_basis ## line 1186 ##\nTrue\nsage: ks == f._ks ## line 1188 ##\nTrue\nsage: solved == f._solved ## line 1190 ##\nTrue\nsage: 2 == f._chkpt_status ## line 1192 ##\nTrue\nsage: os.remove(\"fmatrix_solver_checkpoint_A12.pickle\") ## line 1194 ##\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 1198 ##\nsage: f.find_orthogonal_solution(save_results=\"test.pickle\",verbose=False)   # long time ## line 1199 ##\nsage: del f ## line 1200 ##\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 1201 ##\nsage: f.find_orthogonal_solution(warm_start=\"test.pickle\")                   # long time ## line 1202 ##\nsage: f._chkpt_status == 7                                                   # long time ## line 1203 ##\nTrue\nsage: os.remove(\"test.pickle\")                                               # long time ## line 1205 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1206 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 1257 ##\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1258 ##\nsage: he = f.get_defining_equations('hexagons') ## line 1259 ##\nsage: sorted(he) ## line 1260 ##\n[fx0 - 1,\n fx2*fx3 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx4^2 + (zeta60^6)*fx4,\n fx1*fx3 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx3*fx4 + (zeta60^14 - zeta60^4)*fx3,\n fx1*fx2 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx2*fx4 + (zeta60^14 - zeta60^4)*fx2,\n fx1^2 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx2*fx3 + (-zeta60^12)*fx1]\nsage: pe = f.get_defining_equations('pentagons') ## line 1266 ##\nsage: f.shutdown_worker_pool() ## line 1267 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1281 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 1341 ##\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1342 ##\nsage: he = f.get_defining_equations('hexagons') ## line 1343 ##\nsage: f.shutdown_worker_pool() ## line 1344 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1345 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 2)) ## line 1378 ##\nsage: f._reset_solver_state() ## line 1379 ##\nsage: len(f._map_triv_reduce('get_reduced_hexagons',[(0,1,False)])) ## line 1380 ##\n11\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1382 ##\nsage: if is_shared_memory_available:\n    mp_params = [(i,f.pool._processes,True) for i in range(f.pool._processes)]\nelse:\n    mp_params = [(0,1,True)] ## line 1383 ##\nsage: len(f._map_triv_reduce('get_reduced_pentagons',mp_params,worker_pool=f.pool,chunksize=1,mp_thresh=0)) ## line 1387 ##\n33\nsage: f.shutdown_worker_pool() ## line 1389 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1390 ##\n0\nsage: f = FMatrix(FusionRing(\"B4\", 1)) ## line 1440 ##\nsage: f.get_orthogonality_constraints() ## line 1441 ##\n[fx0^2 - 1,\n fx1^2 - 1,\n fx2^2 - 1,\n fx3^2 - 1,\n fx4^2 - 1,\n fx5^2 - 1,\n fx6^2 - 1,\n fx7^2 - 1,\n fx8^2 - 1,\n fx9^2 - 1,\n fx10^2 + fx12^2 - 1,\n fx10*fx11 + fx12*fx13,\n fx10*fx11 + fx12*fx13,\n fx11^2 + fx13^2 - 1]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1456 ##\n0\nsage: f = FMatrix(FusionRing(\"B2\", 1)) ## line 1496 ##\nsage: sorted(f.get_defining_equations('hexagons')) ## line 1497 ##\n[fx7 + 1,\n fx6 - 1,\n fx2 + 1,\n fx0 - 1,\n fx11*fx12 + (-zeta32^8)*fx13^2 + (zeta32^12)*fx13,\n fx10*fx12 + (-zeta32^8)*fx12*fx13 + (zeta32^4)*fx12,\n fx10*fx11 + (-zeta32^8)*fx11*fx13 + (zeta32^4)*fx11,\n fx10^2 + (-zeta32^8)*fx11*fx12 + (-zeta32^12)*fx10,\n fx4*fx9 + fx7,\n fx3*fx8 - fx6,\n fx1*fx5 + fx2]\nsage: pe = f.get_defining_equations('pentagons') ## line 1509 ##\nsage: len(pe) ## line 1510 ##\n33\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1512 ##\n0\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_to_tup ## line 1544 ##\nsage: f = FMatrix(FusionRing(\"C3\", 1)) ## line 1545 ##\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1546 ##\nsage: he = f.get_defining_equations('hexagons') ## line 1547 ##\nsage: all(f._tup_to_fpoly(poly_to_tup(h)) for h in he) ## line 1548 ##\nTrue\nsage: f.shutdown_worker_pool() ## line 1550 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1551 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 1560 ##\nsage: f._reset_solver_state() ## line 1561 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1562 ##\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1563 ##\nsage: f.get_defining_equations('hexagons', output=False) ## line 1564 ##\nsage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1565 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1566 ##\nsage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1567 ##\nsage: f.mp_thresh = 0 ## line 1568 ##\nsage: if is_shared_memory_available:\n    f._fvars = f._shared_fvars\nelse:\n    from sage.algebras.fusion_rings.shm_managers import FvarsHandler\n    f._fvars = FvarsHandler(f._poly_ring.ngens(),f._field,f._idx_to_sextuple,init_data=f._fvars) ## line 1569 ##\nsage: f._triangular_elim(verbose=False)  # indirect doctest ## line 1574 ##\nsage: f.ideal_basis ## line 1575 ##\n[]\nsage: f.shutdown_worker_pool() ## line 1577 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1578 ##\n0\nsage: f = FMatrix(FusionRing(\"D3\", 1)) ## line 1609 ##\nsage: f.get_defining_equations('hexagons', output=False) ## line 1610 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1611 ##\nsage: gb = f._par_graph_gb(verbose=False) ## line 1612 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1613 ##\nsage: f.ideal_basis = sorted(gb, key=poly_tup_sortkey) ## line 1614 ##\nsage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1615 ##\nsage: n = f._poly_ring.ngens() ## line 1616 ##\nsage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1617 ##\nsage: f._triangular_elim() ## line 1618 ##\nElimination epoch completed... 0 eqns remain in ideal basis\nsage: f.ideal_basis ## line 1620 ##\n[]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1622 ##\n0\nsage: f = FMatrix(FusionRing(\"A3\", 1)) ## line 1691 ##\nsage: f.get_poly_ring().ngens() ## line 1692 ##\n27\nsage: he = f.get_defining_equations('hexagons') ## line 1694 ##\nsage: graph = f.equations_graph(he) ## line 1695 ##\nsage: graph.connected_components_sizes() ## line 1696 ##\n[6, 3, 3, 3, 3, 3, 3, 1, 1, 1]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1698 ##\n0\nsage: f = FMatrix(FusionRing(\"C2\",1)) ## line 1735 ##\nsage: f.get_defining_equations('hexagons',output=False) ## line 1736 ##\nsage: partition = f._partition_eqns() ## line 1737 ##\nPartitioned 11 equations into 5 components of size:\n[4, 3, 3, 3, 1]\nsage: from sage.algebras.fusion_rings.poly_tup_engine import variables ## line 1740 ##\nsage: for c, e in partition.items():\n    assert set(v for eq_tup in e for v in variables(eq_tup)) == set(c) ## line 1741 ##\nsage: vars_in_partition = set() ## line 1743 ##\nsage: eqns_in_partition = set() ## line 1744 ##\nsage: for c, e in partition.items():\n    vars_in_partition.update(c)\n    eqns_in_partition.update(e) ## line 1745 ##\nsage: vars_in_partition == set(v for eq_tup in f.ideal_basis for v in variables(eq_tup)) ## line 1748 ##\nTrue\nsage: eqns_in_partition == set(f.ideal_basis) ## line 1750 ##\nTrue\nsage: from itertools import product ## line 1752 ##\nsage: for e1, e2 in product(partition.values(),repeat=2):\n    assert e1 == e2 or set(e1).isdisjoint(set(e2)) ## line 1753 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1755 ##\n0\nsage: f = FMatrix(FusionRing(\"F4\",1)) ## line 1783 ##\nsage: f._reset_solver_state() ## line 1784 ##\nsage: f.get_orthogonality_constraints(output=False) ## line 1785 ##\nsage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1786 ##\nsage: f.get_defining_equations('hexagons',output=False) ## line 1787 ##\nsage: gb = f._par_graph_gb() ## line 1788 ##\nPartitioned 10 equations into 2 components of size:\n[4, 1]\nsage: from sage.algebras.fusion_rings.poly_tup_engine import _unflatten_coeffs ## line 1791 ##\nsage: ret = [f._tup_to_fpoly(_unflatten_coeffs(f.field(), t)) for t in gb] ## line 1792 ##\nsage: ret.sort(); ret ## line 1793 ##\n[fx4 + (-zeta80^24 + zeta80^16),\n fx2 - fx3,\n fx1 + (zeta80^24 - zeta80^16),\n fx0 - 1,\n fx3^2 + (zeta80^24 - zeta80^16)]\nsage: f.shutdown_worker_pool() ## line 1799 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1800 ##\n0\nsage: f = FMatrix(FusionRing(\"G2\", 2)) ## line 1841 ##\nsage: is_shared_memory_available = f.start_worker_pool()                     # Requires Python 3.8+ ## line 1842 ##\nsage: f.get_defining_equations('hexagons', output=False)                     # long time ## line 1843 ##\nsage: f.shutdown_worker_pool() ## line 1844 ##\nsage: partition = f._partition_eqns()                                        # long time ## line 1845 ##\nPartitioned 327 equations into 35 components of size:\n[27, 27, 27, 24, 24, 16, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 9, 9, 6, 6, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1]\nsage: c = (216, 292, 319) ## line 1849 ##\nsage: from sage.algebras.fusion_rings.poly_tup_engine import poly_to_tup ## line 1850 ##\nsage: eqns = partition[c] + [poly_to_tup(f._poly_ring.gen(216)-1)]           # long time ## line 1851 ##\nsage: f._get_component_variety(c, eqns)                                      # long time ## line 1852 ##\n[{216: -1, 292: -1, 319: 1}]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1854 ##\n0\nsage: f = FMatrix(FusionRing(\"F4\", 2)) ## line 1890 ##\nsage: f.attempt_number_field_computation() ## line 1891 ##\nFalse\nsage: f = FMatrix(FusionRing(\"G2\", 1)) ## line 1893 ##\nsage: f.attempt_number_field_computation() ## line 1894 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1905 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 3))  # indirect doctest ## line 1935 ##\nsage: f.find_orthogonal_solution()     # long time ## line 1936 ##\nComputing F-symbols for The Fusion Ring of Type A1 and level 3 with Integer Ring coefficients with 71 variables...\nSet up 134 hex and orthogonality constraints...\nPartitioned 134 equations into 17 components of size:\n[12, 12, 6, 6, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1]\nElimination epoch completed... 10 eqns remain in ideal basis\nElimination epoch completed... 0 eqns remain in ideal basis\nHex elim step solved for 51 / 71 variables\nSet up 121 reduced pentagons...\nElimination epoch completed... 18 eqns remain in ideal basis\nElimination epoch completed... 5 eqns remain in ideal basis\nPent elim step solved for 64 / 71 variables\nPartitioned 5 equations into 1 components of size:\n[4]\nElimination epoch completed... 0 eqns remain in ideal basis\nPartitioned 6 equations into 6 components of size:\n[1, 1, 1, 1, 1, 1]\nComputing appropriate NumberField...\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1954 ##\n0\nsage: f = FMatrix(FusionRing(\"B5\", 1), fusion_label=\"b\", inject_variables=True) ## line 2095 ##\ncreating variables fx1..fx14\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13\nsage: f.find_orthogonal_solution() ## line 2098 ##\nComputing F-symbols for The Fusion Ring of Type B5 and level 1 with Integer Ring coefficients with 14 variables...\nSet up 25 hex and orthogonality constraints...\nPartitioned 25 equations into 5 components of size:\n[4, 3, 3, 3, 1]\nElimination epoch completed... 0 eqns remain in ideal basis\nHex elim step solved for 10 / 14 variables\nSet up 7 reduced pentagons...\nElimination epoch completed... 0 eqns remain in ideal basis\nPent elim step solved for 12 / 14 variables\nPartitioned 0 equations into 0 components of size:\n[]\nPartitioned 2 equations into 2 components of size:\n[1, 1]\nsage: f.fmatrix(b2, b2, b2, b2) ## line 2112 ##\n[ 1/2*zeta80^30 - 1/2*zeta80^10 -1/2*zeta80^30 + 1/2*zeta80^10]\n[ 1/2*zeta80^30 - 1/2*zeta80^10  1/2*zeta80^30 - 1/2*zeta80^10]\nsage: f.fmat(b2, b2, b2, b2, b0, b1) ## line 2115 ##\n-1/2*zeta80^30 + 1/2*zeta80^10\nsage: f.fmats_are_orthogonal() ## line 2124 ##\nTrue\nsage: f.fvars_are_real() ## line 2126 ##\nTrue\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2139 ##\n0\nsage: f = FMatrix(FusionRing(\"A3\", 1)) ## line 2239 ##\nsage: f._reset_solver_state()             # long time ## line 2240 ##\nsage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()}  # long time ## line 2241 ##\nsage: eqns = f.get_defining_equations(\"hexagons\")+f.get_defining_equations(\"pentagons\")  # long time ## line 2242 ##\nsage: f.ideal_basis = set(Ideal(eqns).groebner_basis())   # long time ## line 2243 ##\nsage: _, _ = f._substitute_degree_one()                   # long time ## line 2244 ##\nsage: f._fix_gauge()                                      # long time ## line 2245 ##\nadding equation... fx1 - 1\nadding equation... fx18 - 1\nadding equation... fx21 - 1\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2249 ##\n0\nsage: f = FMatrix(FusionRing(\"D3\", 1), inject_variables=True) ## line 2272 ##\ncreating variables fx1..fx27\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26\nsage: f._reset_solver_state() ## line 2275 ##\nsage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()} ## line 2276 ##\nsage: f.ideal_basis = [fx0 - 8, fx4**2 - 3, fx4 + fx10 + 3, fx4 + fx9] ## line 2277 ##\nsage: _, _ = f._substitute_degree_one() ## line 2278 ##\nsage: f._fvars[f._var_to_sextuple[fx0]] ## line 2279 ##\n8\nsage: f._fvars[f._var_to_sextuple[fx4]] ## line 2281 ##\n-fx9\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2283 ##\n0\nsage: f = FMatrix(FusionRing(\"D3\", 1), inject_variables=True) ## line 2312 ##\ncreating variables fx1..fx27\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26\nsage: f._reset_solver_state() ## line 2315 ##\nsage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()} ## line 2316 ##\nsage: f.ideal_basis = [fx0 - 8, fx4 + fx9, fx4**2 + fx3 - fx9**2] ## line 2317 ##\nsage: _, _ = f._substitute_degree_one() ## line 2318 ##\nsage: f._update_equations() ## line 2319 ##\nsage: f.ideal_basis ## line 2320 ##\n{fx3}\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2322 ##\n0\nsage: f = FMatrix(FusionRing(\"A2\", 1, fusion_labels=\"a\", inject_variables=True), inject_variables=True) ## line 2349 ##\ncreating variables fx1..fx8\nDefining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7\nsage: f.find_cyclotomic_solution(output=True) ## line 2352 ##\nSetting up hexagons and pentagons...\nFinding a Groebner basis...\nSolving...\nFixing the gauge...\nadding equation... fx4 - 1\nDone!\n{(a2, a2, a2, a0, a1, a1): 1,\n (a2, a2, a1, a2, a1, a0): 1,\n (a2, a1, a2, a2, a0, a0): 1,\n (a2, a1, a1, a1, a0, a2): 1,\n (a1, a2, a2, a2, a0, a1): 1,\n (a1, a2, a1, a1, a0, a0): 1,\n (a1, a1, a2, a1, a2, a0): 1,\n (a1, a1, a1, a0, a2, a2): 1}\nsage: f.get_defining_equations(\"hexagons\") ## line 2376 ##\n[]\nsage: f.get_defining_equations(\"pentagons\") ## line 2378 ##\n[]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2380 ##\n0\nsage: f = FMatrix(FusionRing(\"C3\", 1)) ## line 2424 ##\nsage: f.find_orthogonal_solution()      # long time ## line 2425 ##\nComputing F-symbols for The Fusion Ring of Type C3 and level 1 with Integer Ring coefficients with 71 variables...\nSet up 134 hex and orthogonality constraints...\nPartitioned 134 equations into 17 components of size:\n[12, 12, 6, 6, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1]\nElimination epoch completed... 10 eqns remain in ideal basis\nElimination epoch completed... 0 eqns remain in ideal basis\nHex elim step solved for 51 / 71 variables\nSet up 121 reduced pentagons...\nElimination epoch completed... 18 eqns remain in ideal basis\nElimination epoch completed... 5 eqns remain in ideal basis\nPent elim step solved for 64 / 71 variables\nPartitioned 5 equations into 1 components of size:\n[4]\nElimination epoch completed... 0 eqns remain in ideal basis\nPartitioned 6 equations into 6 components of size:\n[1, 1, 1, 1, 1, 1]\ndoctest:warning\n  File \"/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests\", line 144, in <module>\n    err = DC.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n    self.run_doctests()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n    self.dispatcher.dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n    self.parallel_dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n    w.start()  # This might take some time\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2211, in start\n    super(DocTestWorker, self).start()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 224, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 277, in _Popen\n    return Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n    code = process_obj._bootstrap(parent_sentinel=child_r)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2183, in run\n    task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2512, in __call__\n    doctests, extras = self._run(runner, options, results)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2559, in _run\n    result = runner.run(test)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 910, in run\n    return self._run(test, compileflags, out)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n    self.compile_and_execute(example, compiler, test.globs)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n    exec(compiled, globs)\n  File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[1]>\", line 1, in <module>\n    f.find_orthogonal_solution()      # long time\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 2214, in find_orthogonal_solution\n    self._get_explicit_solution(verbose=verbose)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 1978, in _get_explicit_solution\n    roots = univ_poly.roots(multiplicities=False)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/number_field/number_field.py\", line 10210, in _factor_univariate_polynomial\n    f = poly._pari_with_name()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n    sw(msg.message, msg.category, msg.filename, msg.lineno,\n:\nRuntimeWarning: cypari2 leaked 112 bytes on the PARI stack\nsage: f.certify_pentagons()            # long time (~1.5s) ## line 2443 ##\ndoctest:warning\n  File \"/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests\", line 144, in <module>\n    err = DC.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n    self.run_doctests()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n    self.dispatcher.dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n    self.parallel_dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n    w.start()  # This might take some time\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2211, in start\n    super(DocTestWorker, self).start()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 224, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 277, in _Popen\n    return Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n    code = process_obj._bootstrap(parent_sentinel=child_r)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2183, in run\n    task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2512, in __call__\n    doctests, extras = self._run(runner, options, results)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2559, in _run\n    result = runner.run(test)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 910, in run\n    return self._run(test, compileflags, out)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n    self.compile_and_execute(example, compiler, test.globs)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n    exec(compiled, globs)\n  File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[2]>\", line 1, in <module>\n    f.certify_pentagons()            # long time (~1.5s)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 2446, in certify_pentagons\n    fvars_copy = deepcopy(self._fvars)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 172, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 264, in _reconstruct\n    y = func(*args)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 263, in <genexpr>\n    args = (deepcopy(arg, memo) for arg in args)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 172, in deepcopy\n    y = _reconstruct(x, memo, *rv)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py\", line 264, in _reconstruct\n    y = func(*args)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py\", line 258, in complex_roots\n    rts = cfac.roots(multiplicities=False)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n    sw(msg.message, msg.category, msg.filename, msg.lineno,\n:\nRuntimeWarning: cypari2 leaked 32 bytes on the PARI stack\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2445 ##\n0\nsage: f = FMatrix(FusionRing(\"D4\", 1)) ## line 2473 ##\ndoctest:warning\n  File \"/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests\", line 144, in <module>\n    err = DC.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n    self.run_doctests()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n    self.dispatcher.dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n    self.parallel_dispatch()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n    w.start()  # This might take some time\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2211, in start\n    super(DocTestWorker, self).start()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 224, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py\", line 277, in _Popen\n    return Popen(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n    code = process_obj._bootstrap(parent_sentinel=child_r)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2183, in run\n    task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2512, in __call__\n    doctests, extras = self._run(runner, options, results)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2559, in _run\n    result = runner.run(test)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 910, in run\n    return self._run(test, compileflags, out)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 718, in _run\n    self.compile_and_execute(example, compiler, test.globs)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n    exec(compiled, globs)\n  File \"<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[0]>\", line 1, in <module>\n    f = FMatrix(FusionRing(\"D4\", Integer(1)))\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py\", line 295, in __init__\n    r = self._field.defining_polynomial().roots(ring=QQbar, multiplicities=False)[0]\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py\", line 258, in complex_roots\n    rts = cfac.roots(multiplicities=False)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py\", line 109, in _showwarnmsg\n    sw(msg.message, msg.category, msg.filename, msg.lineno,\n:\nRuntimeWarning: cypari2 leaked 208 bytes on the PARI stack\nsage: f.find_orthogonal_solution(verbose=False) ## line 2474 ##\nsage: f.fmats_are_orthogonal() ## line 2475 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2477 ##\n0\nsage: f = FMatrix(FusionRing(\"A1\", 3)) ## line 2490 ##\nsage: f.find_orthogonal_solution(verbose=False) # long time ## line 2491 ##\n------------------------------------------------------------------------\n0   signals.cpython-39-darwin.so        0x0000000111f1f412 print_backtrace + 66\n1   signals.cpython-39-darwin.so        0x0000000111f23097 sigdie + 39\n2   signals.cpython-39-darwin.so        0x0000000111f22f84 cysigs_signal_handler + 404\n3   libsystem_platform.dylib            0x00007fff6bb885fd _sigtramp + 29\n4   ???                                 0x00007fbbd000e4a0 0x0 + 140444625331360\n5   libpython3.9.dylib                  0x000000010fe42a31 _PyObject_Malloc + 17\n6   libpython3.9.dylib                  0x000000010ff3a9a0 _PyObject_GC_Alloc + 80\n7   libpython3.9.dylib                  0x000000010ff3ab91 _PyObject_GC_NewVar + 49\n8   libpython3.9.dylib                  0x000000010fe4ce79 PyTuple_New + 153\n9   _pickle.cpython-39-darwin.so        0x0000000110831db6 load + 774\n10  _pickle.cpython-39-darwin.so        0x000000011082a0e3 _pickle_loads + 723\n11  libpython3.9.dylib                  0x000000010fe3c144 cfunction_vectorcall_FASTCALL_KEYWORDS + 132\n12  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n13  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n14  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n15  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n16  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n17  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n18  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n19  libpython3.9.dylib                  0x000000010fed9de5 _PyEval_EvalFrameDefault + 28885\n20  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n21  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n22  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n23  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n24  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n25  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n26  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n27  libpython3.9.dylib                  0x000000010fe012fa method_vectorcall + 330\n28  libpython3.9.dylib                  0x000000010ff74616 t_bootstrap + 70\n29  libpython3.9.dylib                  0x000000010ff29549 pythread_wrapper + 25\n30  libsystem_pthread.dylib             0x00007fff6bb94109 _pthread_start + 148\n31  libsystem_pthread.dylib             0x00007fff6bb8fb8b thread_start + 15\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\nProcess ForkPoolWorker-1:223:\n------------------------------------------------------------------------\n0   signals.cpython-39-darwin.so        0x0000000111f1f412 print_backtrace + 66\n1   signals.cpython-39-darwin.so        0x0000000111f23097 sigdie + 39\n2   signals.cpython-39-darwin.so        0x0000000111f22f84 cysigs_signal_handler + 404\n3   libsystem_platform.dylib            0x00007fff6bb885fd _sigtramp + 29\n4   ???                                 0x0000000000000000 0x0 + 0\n5   libpython3.9.dylib                  0x000000010fe42a31 _PyObject_Malloc + 17\n6   libpython3.9.dylib                  0x000000010fe64122 PyUnicode_New + 130\n7   libpython3.9.dylib                  0x000000010fe65d23 _PyUnicode_FromASCII + 67\n8   libpython3.9.dylib                  0x000000010ff824f9 _textiowrapper_readline + 1161\n9   libpython3.9.dylib                  0x000000010ff80fdf textiowrapper_iternext + 223\n10  libpython3.9.dylib                  0x000000010fe1b6f5 list_extend + 661\n11  libpython3.9.dylib                  0x000000010fe0772d method_vectorcall_O + 141\n12  libpython3.9.dylib                  0x000000010fe00369 object_vacall + 489\n13  libpython3.9.dylib                  0x000000010fe005da _PyObject_CallMethodIdObjArgs + 250\nProcess ForkPoolWorker-1:222:\n14  libpython3.9.dylib                  0x000000010ff77a86 _io__IOBase_readlines + 278\n15  libpython3.9.dylib                  0x000000010fe0746c method_vectorcall_FASTCALL + 140\n16  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n17  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n18  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n19  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n20  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n21  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n22  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n23  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n24  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n25  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n26  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n27  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n28  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n29  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n30  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n31  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n32  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n33  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n34  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n35  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n36  libpython3.9.dylib                  0x000000010fe081d3 property_descr_get + 115\n37  libpython3.9.dylib                  0x000000010fe405a1 _PyObject_GenericGetAttrWithDict + 177\n38  libpython3.9.dylib                  0x000000010fed7c91 _PyEval_EvalFrameDefault + 20353\n39  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n40  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n41  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n42  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n43  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n44  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\nTraceback (most recent call last):\n45  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py\", line 131, in worker\n    put((job, i, result))\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py\", line 378, in put\n    self._writer.send_bytes(obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 205, in send_bytes\n    self._send_bytes(m[offset:offset + size])\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 416, in _send_bytes\n    self._send(header + buf)\n46  libpython3.9.dylib                  0x000000010fdfe4ed _PyObject_FastCallDictTstate + 173\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 373, in _send\n    n = write(self._handle, buf)\nBrokenPipeError: [Errno 32] Broken pipe\n47  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py\", line 136, in worker\n    put((job, i, (False, wrapped)))\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py\", line 378, in put\n    self._writer.send_bytes(obj)\n48  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 205, in send_bytes\n    self._send_bytes(m[offset:offset + size])\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 416, in _send_bytes\n    self._send(header + buf)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 373, in _send\n    n = write(self._handle, buf)\nBrokenPipeError: [Errno 32] Broken pipe\n49  libpython3.9.dylib                  0x000000010fe52684 type_call + 340\n50  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375\n51  libpython3.9.dylib                  0x000000010fedc940 call_function + 624\n52  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n53  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n54  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n55  libpython3.9.dylib                  0x000000010fdfeb5b PyVectorcall_Call + 155\n56  libpython3.9.dylib                  0x000000010fed9de5 _PyEval_EvalFrameDefault + 28885\n57  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n58  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n59  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n60  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n61  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n62  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n63  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n64  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n65  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n66  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n67  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n68  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n69  libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258\n70  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139\n71  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205\n72  libpython3.9.dylib                  0x000000010fe52684 type_call + 340\n73  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375\n74  libpython3.9.dylib                  0x000000010fedc940 call_function + 624\n75  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n76  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n77  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n78  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n79  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n80  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n81  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n82  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n83  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n84  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n85  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n86  libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n87  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n88  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n89  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n90  libpython3.9.dylib                  0x000000010fdfe4ed _PyObject_FastCallDictTstate + 173\n91  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139\n92  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205\n93  libpython3.9.dylib                  0x000000010fe52684 type_call + 340\n94  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375\n95  libpython3.9.dylib                  0x000000010fedc940 call_function + 624\n96  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n97  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n98  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n99  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n100 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n101 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n102 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n103 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n104 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n105 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n106 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n107 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n108 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n109 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n110 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n111 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n112 libpython3.9.dylib                  0x000000010fed2c17 PyEval_EvalCode + 87\n113 libpython3.9.dylib                  0x000000010fecfc5f builtin_exec + 575\n114 libpython3.9.dylib                  0x000000010fe3c077 cfunction_vectorcall_FASTCALL + 215\n115 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n116 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n117 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n118 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n119 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n120 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n121 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n122 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n123 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n124 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n125 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n126 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n127 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n128 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n129 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n130 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n131 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n132 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n133 libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258\n134 libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139\n135 libpython3.9.dylib                  0x000000010fe59147 slot_tp_call + 199\n136 libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375\n137 libpython3.9.dylib                  0x000000010fedc940 call_function + 624\n138 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n139 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n140 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n141 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n142 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n143 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n144 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n145 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n146 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022\n147 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n148 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n149 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n150 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n151 libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258\n152 libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139\n153 libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205\n154 libpython3.9.dylib                  0x000000010fe52684 type_call + 340\n155 libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375\n156 libpython3.9.dylib                  0x000000010fedc940 call_function + 624\n157 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841\n158 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n159 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n160 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n161 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n162 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n163 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n164 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n165 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204\n166 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n167 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668\n168 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n169 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n170 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n171 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n172 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n173 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256\n174 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n175 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n176 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n177 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n178 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n179 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n180 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n181 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n182 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229\n183 libpython3.9.dylib                  0x000000010fedc86b call_function + 411\n184 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636\n185 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184\n186 libpython3.9.dylib                  0x000000010fed2c17 PyEval_EvalCode + 87\n187 libpython3.9.dylib                  0x000000010ff1e18f pyrun_file + 367\n188 libpython3.9.dylib                  0x000000010ff1c4e1 PyRun_SimpleFileExFlags + 721\n189 libpython3.9.dylib                  0x000000010ff38b66 Py_RunMain + 1926\n190 libpython3.9.dylib                  0x000000010ff3901c pymain_main + 348\n191 libpython3.9.dylib                  0x000000010ff3906b Py_BytesMain + 43\n192 libdyld.dylib                       0x00007fff6b98bcc9 start + 1\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\nProcess ForkPoolWorker-1:219:\nTraceback (most recent call last):\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py\", line 131, in worker\n    put((job, i, result))\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py\", line 378, in put\n    self._writer.send_bytes(obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 205, in send_bytes\n    self._send_bytes(m[offset:offset + size])\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 416, in _send_bytes\n    self._send(header + buf)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 373, in _send\n    n = write(self._handle, buf)\nBrokenPipeError: [Errno 32] Broken pipe\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n    self.run()\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py\", line 136, in worker\n    put((job, i, (False, wrapped)))\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py\", line 378, in put\n    self._writer.send_bytes(obj)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 205, in send_bytes\n    self._send_bytes(m[offset:offset + size])\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 416, in _send_bytes\n    self._send(header + buf)\n  File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py\", line 373, in _send\n    n = write(self._handle, buf)\nBrokenPipeError: [Errno 32] Broken pipe\n\n**********************************************************************\n----------------------------------------------------------------------\nsage -t --long --warn-long 81.8 --random-seed=0 src/sage/algebras/fusion_rings/f_matrix.py  # Killed due to segmentation fault\n----------------------------------------------------------------------\n```\n",
    "created_at": "2021-07-17T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430298",
    "user": "vbraun"
}
```

This causes random segfaults, mostly observed on OSX:

```
sage -t --long --warn-long 81.8 --random-seed=0 src/sage/algebras/fusion_rings/f_matrix.py
**********************************************************************
File "src/sage/algebras/fusion_rings/f_matrix.py", line 2425, in sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons
Failed example:
    f.find_orthogonal_solution()      # long time
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[1]>", line 1, in <module>
        f.find_orthogonal_solution()      # long time
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 2214, in find_orthogonal_solution
        self._get_explicit_solution(verbose=verbose)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 1978, in _get_explicit_solution
        roots = univ_poly.roots(multiplicities=False)
      File "sage/rings/polynomial/polynomial_element.pyx", line 8093, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:65823)
        return self._roots_from_factorization(self.factor(), multiplicities)
      File "sage/rings/polynomial/polynomial_element.pyx", line 4428, in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:36027)
        return R._factor_univariate_polynomial(self, **kwargs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/number_field/number_field.py", line 10210, in _factor_univariate_polynomial
        f = poly._pari_with_name()
      File "sage/rings/polynomial/polynomial_element.pyx", line 6254, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50347)
        vals = [x.__pari__() for x in self.list()]
      File "sage/rings/number_field/number_field_element.pyx", line 714, in sage.rings.number_field.number_field_element.NumberFieldElement.__pari__ (build/cythonized/sage/rings/number_field/number_field_element.cpp:10745)
        f = self._pari_polynomial(name)
      File "sage/rings/number_field/number_field_element.pyx", line 615, in sage.rings.number_field.number_field_element.NumberFieldElement._pari_polynomial (build/cythonized/sage/rings/number_field/number_field_element.cpp:10449)
        f = pari(self._coefficients()).Polrev()
      File "cypari2/pari_instance.pyx", line 841, in cypari2.pari_instance.Pari.__call__
      File "cypari2/gen.pyx", line 4824, in cypari2.gen.objtogen
      File "cypari2/gen.pyx", line 4697, in cypari2.gen.list_of_Gens_to_Gen
    cysignals.signals.SignalError: Segmentation fault
**********************************************************************
File "src/sage/algebras/fusion_rings/f_matrix.py", line 2443, in sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons
Failed example:
    f.certify_pentagons()            # long time (~1.5s)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[2]>", line 1, in <module>
        f.certify_pentagons()            # long time (~1.5s)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 2446, in certify_pentagons
        fvars_copy = deepcopy(self._fvars)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 172, in deepcopy
        y = _reconstruct(x, memo, *rv)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 264, in _reconstruct
        y = func(*args)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 263, in <genexpr>
        args = (deepcopy(arg, memo) for arg in args)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 172, in deepcopy
        y = _reconstruct(x, memo, *rv)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 264, in _reconstruct
        y = func(*args)
      File "sage/structure/factory.pyx", line 714, in sage.structure.factory.generic_factory_unpickle (build/cythonized/sage/structure/factory.c:4331)
        return F.get_object(*args)
      File "sage/structure/factory.pyx", line 371, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:3187)
        cpdef get_object(self, version, key, extra_args):
      File "sage/structure/factory.pyx", line 406, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:2465)
        return self._cache[version, cache_key]
      File "sage/misc/weak_dict.pyx", line 702, in sage.misc.weak_dict.WeakValueDictionary.__getitem__ (build/cythonized/sage/misc/weak_dict.c:3712)
        cdef PyObject* wr = PyDict_GetItemWithError(self, k)
      File "sage/rings/real_lazy.pyx", line 1379, in sage.rings.real_lazy.LazyNamedUnop.__hash__ (build/cythonized/sage/rings/real_lazy.c:15864)
        return hash(complex(self))
      File "sage/rings/real_lazy.pyx", line 803, in sage.rings.real_lazy.LazyFieldElement.__complex__ (build/cythonized/sage/rings/real_lazy.c:10065)
        return self.eval(complex)
      File "sage/rings/real_lazy.pyx", line 1333, in sage.rings.real_lazy.LazyNamedUnop.eval (build/cythonized/sage/rings/real_lazy.c:15304)
        arg = self._arg.eval(R)
      File "sage/rings/real_lazy.pyx", line 1110, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:12996)
        left = self._left.eval(R)
      File "sage/rings/real_lazy.pyx", line 1111, in sage.rings.real_lazy.LazyBinop.eval (build/cythonized/sage/rings/real_lazy.c:13008)
        right = self._right.eval(R)
      File "sage/rings/real_lazy.pyx", line 1627, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18257)
        self.eval(self.parent().interval_field(64)) # up the prec
      File "sage/rings/real_lazy.pyx", line 1653, in sage.rings.real_lazy.LazyAlgebraic.eval (build/cythonized/sage/rings/real_lazy.c:18408)
        roots = self._poly.roots(ring = AA if isinstance(self._parent, RealLazyField_class) else QQbar)
      File "sage/rings/polynomial/polynomial_element.pyx", line 8043, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64585)
        rts = complex_roots(self, retval='algebraic')
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py", line 258, in complex_roots
        rts = cfac.roots(multiplicities=False)
      File "sage/rings/polynomial/polynomial_element.pyx", line 7949, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61916)
        ext_rts = self.__pari__().polroots(precision=L.prec())
      File "sage/rings/polynomial/polynomial_element.pyx", line 6201, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49942)
        return self._pari_with_name(self._parent.variable_name())
      File "sage/rings/polynomial/polynomial_element.pyx", line 6255, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50386)
        return pari(vals).Polrev(name)
      File "cypari2/pari_instance.pyx", line 841, in cypari2.pari_instance.Pari.__call__
      File "cypari2/gen.pyx", line 4824, in cypari2.gen.objtogen
      File "cypari2/gen.pyx", line 4697, in cypari2.gen.list_of_Gens_to_Gen
    cysignals.signals.SignalError: Segmentation fault
**********************************************************************
File "src/sage/algebras/fusion_rings/f_matrix.py", line 2473, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal
Failed example:
    f = FMatrix(FusionRing("D4", 1))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[0]>", line 1, in <module>
        f = FMatrix(FusionRing("D4", Integer(1)))
      File "sage/misc/lazy_import.pyx", line 362, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:4036)
        return self.get_object()(*args, **kwds)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 295, in __init__
        r = self._field.defining_polynomial().roots(ring=QQbar, multiplicities=False)[0]
      File "sage/rings/polynomial/polynomial_element.pyx", line 8043, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:64585)
        rts = complex_roots(self, retval='algebraic')
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py", line 258, in complex_roots
        rts = cfac.roots(multiplicities=False)
      File "sage/rings/polynomial/polynomial_element.pyx", line 7949, in sage.rings.polynomial.polynomial_element.Polynomial.roots (build/cythonized/sage/rings/polynomial/polynomial_element.c:61916)
        ext_rts = self.__pari__().polroots(precision=L.prec())
      File "sage/rings/polynomial/polynomial_element.pyx", line 6201, in sage.rings.polynomial.polynomial_element.Polynomial.__pari__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:49942)
        return self._pari_with_name(self._parent.variable_name())
      File "sage/rings/polynomial/polynomial_element.pyx", line 6255, in sage.rings.polynomial.polynomial_element.Polynomial._pari_with_name (build/cythonized/sage/rings/polynomial/polynomial_element.c:50386)
        return pari(vals).Polrev(name)
      File "cypari2/pari_instance.pyx", line 841, in cypari2.pari_instance.Pari.__call__
      File "cypari2/gen.pyx", line 4824, in cypari2.gen.objtogen
      File "cypari2/gen.pyx", line 4697, in cypari2.gen.list_of_Gens_to_Gen
    cysignals.signals.SignalError: Segmentation fault
**********************************************************************
File "src/sage/algebras/fusion_rings/f_matrix.py", line 2474, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal
Failed example:
    f.find_orthogonal_solution(verbose=False)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[1]>", line 1, in <module>
        f.find_orthogonal_solution(verbose=False)
    NameError: name 'f' is not defined
**********************************************************************
File "src/sage/algebras/fusion_rings/f_matrix.py", line 2475, in sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal
Failed example:
    f.fmats_are_orthogonal()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[2]>", line 1, in <module>
        f.fmats_are_orthogonal()
    NameError: name 'f' is not defined
    Killed due to segmentation fault
**********************************************************************
Tests run before process (pid=64708) failed:
sage: I = FusionRing("E8",2,conjugate=True) ## line 162 ##
sage: I.fusion_labels(["i0","p","s"],inject_variables=True) ## line 163 ##
sage: f = FMatrix(I,inject_variables=True); f ## line 164 ##
creating variables fx1..fx14
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13
F-Matrix factory for The Fusion Ring of Type E8 and level 2 with Integer Ring coefficients
sage: f.fmatrix(s,s,s,s) ## line 182 ##
[fx10 fx11]
[fx12 fx13]
sage: f.f_from(s,s,s,s), f.f_to(s,s,s,s) ## line 199 ##
([i0, p], [i0, p])
sage: sorted(f.get_defining_equations("pentagons"))[1:3] ## line 216 ##
[fx9*fx12 - fx2*fx13, fx4*fx11 - fx2*fx13]
sage: sorted(f.get_defining_equations("hexagons"))[1:3] ## line 218 ##
[fx6 - 1, fx2 + 1]
sage: sorted(f.get_orthogonality_constraints())[1:3] ## line 220 ##
[fx10*fx11 + fx12*fx13, fx10*fx11 + fx12*fx13]
sage: f.find_cyclotomic_solution() ## line 238 ##
Setting up hexagons and pentagons...
Finding a Groebner basis...
Solving...
Fixing the gauge...
adding equation... fx1 - 1
adding equation... fx11 - 1
Done!
sage: f.fmatrix(s,s,s,s) ## line 250 ##
[(-1/2*zeta128^48 + 1/2*zeta128^16)                                  1]
[                               1/2  (1/2*zeta128^48 - 1/2*zeta128^16)]
sage: f.fmat(s,s,s,s,p,p) ## line 253 ##
(1/2*zeta128^48 - 1/2*zeta128^16)
sage: f = FMatrix(FusionRing("B3",2)) ## line 270 ##
sage: f = FMatrix(FusionRing("G2",2)) ## line 275 ##
sage: f.find_orthogonal_solution(verbose=False) # long time (~11 s) ## line 276 ##
sage: f.field()                                 # long time ## line 277 ##
Algebraic Field
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 279 ##
0
sage: FMatrix(FusionRing("B2", 1)) ## line 317 ##
F-Matrix factory for The Fusion Ring of Type B2 and level 1 with Integer Ring coefficients
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 319 ##
0
sage: f = FMatrix(FusionRing("E6", 1)) ## line 328 ##
sage: f.get_defining_equations('hexagons', output=False) ## line 329 ##
sage: len(f.ideal_basis) ## line 330 ##
6
sage: f.clear_equations() ## line 332 ##
sage: len(f.ideal_basis) == 0 ## line 333 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 335 ##
0
sage: f = FMatrix(FusionRing("C4", 1)) ## line 344 ##
sage: fvars = f.get_fvars() ## line 345 ##
sage: some_key = sorted(fvars)[0] ## line 346 ##
sage: fvars[some_key] ## line 347 ##
fx0
sage: fvars[some_key] = 1 ## line 349 ##
sage: f.get_fvars()[some_key] ## line 350 ##
1
sage: f.clear_vars() ## line 352 ##
sage: f.get_fvars()[some_key] ## line 353 ##
fx0
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 355 ##
0
sage: f = FMatrix(FusionRing("G2", 1)) ## line 366 ##
sage: f._reset_solver_state() ## line 367 ##
sage: K = f.field() ## line 368 ##
sage: len(f._nnz.nonzero_positions()) ## line 369 ##
1
sage: f.find_orthogonal_solution(verbose=False) ## line 371 ##
sage: K == f.field() ## line 372 ##
False
sage: f._reset_solver_state() ## line 374 ##
sage: K == f.field() ## line 375 ##
True
sage: f.FR()._basecoer is None ## line 377 ##
True
sage: f._poly_ring.base_ring() == K ## line 379 ##
True
sage: sum(f._solved) == 0 ## line 381 ##
True
sage: len(f.ideal_basis) == 0 ## line 383 ##
True
sage: for k, v in f._ks.items():
    k ## line 385 ##
sage: len(f._nnz.nonzero_positions()) == 1 ## line 388 ##
True
sage: all(len(x.q_dimension.cache) == 0 for x in f.FR().basis()) ## line 390 ##
True
sage: len(f.FR().r_matrix.cache) == 0 ## line 392 ##
True
sage: len(f.FR().s_ij.cache) == 0 ## line 394 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 396 ##
0
sage: f=FMatrix(FusionRing("G2", 1, fusion_labels=("i0","t"), inject_variables=True)) ## line 422 ##
sage: [f.fmat(t,t,t,t,x,y) for x in f._FR.basis() for y in f._FR.basis()] ## line 423 ##
[fx1, fx2, fx3, fx4]
sage: f.find_cyclotomic_solution(output=True) ## line 425 ##
Setting up hexagons and pentagons...
Finding a Groebner basis...
Solving...
Fixing the gauge...
adding equation... fx2 - 1
Done!
{(t, t, t, i0, t, t): 1,
 (t, t, t, t, i0, i0): (-zeta60^14 + zeta60^6 + zeta60^4 - 1),
 (t, t, t, t, i0, t): 1,
 (t, t, t, t, t, i0): (-zeta60^14 + zeta60^6 + zeta60^4 - 1),
 (t, t, t, t, t, t): (zeta60^14 - zeta60^6 - zeta60^4 + 1)}
sage: [f.fmat(t,t,t,t,x,y) for x in f._FR.basis() for y in f._FR.basis()] ## line 437 ##
[(-zeta60^14 + zeta60^6 + zeta60^4 - 1),
 1,
 (-zeta60^14 + zeta60^6 + zeta60^4 - 1),
 (zeta60^14 - zeta60^6 - zeta60^4 + 1)]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 442 ##
0
sage: f = FMatrix(FusionRing("A1", 2, fusion_labels="c", inject_variables=True)) ## line 482 ##
sage: f.fmatrix(c1,c1,c1,c1) ## line 483 ##
[fx0 fx1]
[fx2 fx3]
sage: f.find_cyclotomic_solution(verbose=False); ## line 486 ##
adding equation... fx4 - 1
adding equation... fx10 - 1
sage: f.f_from(c1,c1,c1,c1) ## line 489 ##
[c0, c2]
sage: f.f_to(c1,c1,c1,c1) ## line 491 ##
[c0, c2]
sage: f.fmatrix(c1,c1,c1,c1) ## line 493 ##
[ (1/2*zeta32^12 - 1/2*zeta32^4) (-1/2*zeta32^12 + 1/2*zeta32^4)]
[ (1/2*zeta32^12 - 1/2*zeta32^4)  (1/2*zeta32^12 - 1/2*zeta32^4)]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 496 ##
0
sage: f = FMatrix(FusionRing("G2",1)) ## line 529 ##
sage: f.field() ## line 530 ##
Cyclotomic Field of order 60 and degree 16
sage: f.find_orthogonal_solution(verbose=False) ## line 532 ##
sage: f.field() ## line 533 ##
Number Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1
sage: phi = f.get_qqbar_embedding() ## line 535 ##
sage: [phi(r).n() for r in f.get_non_cyclotomic_roots()] ## line 536 ##
[-0.786151377757423 - 8.92806368517581e-31*I]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 545 ##
0
sage: f = FMatrix(FusionRing("D3",1)) ## line 554 ##
sage: f.FR() ## line 555 ##
The Fusion Ring of Type D3 and level 1 with Integer Ring coefficients
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 557 ##
0
sage: f = FMatrix(FusionRing("G2", 1, fusion_labels=("i0","t"))) ## line 570 ##
sage: f.findcases() ## line 571 ##
5
sage: f.findcases(output=True) ## line 573 ##
({0: (t, t, t, i0, t, t),
  1: (t, t, t, t, i0, i0),
  2: (t, t, t, t, i0, t),
  3: (t, t, t, t, t, i0),
  4: (t, t, t, t, t, t)},
 {(t, t, t, i0, t, t): fx0,
  (t, t, t, t, i0, i0): fx1,
  (t, t, t, t, i0, t): fx2,
  (t, t, t, t, t, i0): fx3,
  (t, t, t, t, t, t): fx4})
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 584 ##
0
sage: fr = FusionRing("A1", 3, fusion_labels="a", inject_variables=True) ## line 617 ##
sage: f = FMatrix(fr) ## line 618 ##
sage: f.fmatrix(a1,a1,a2,a2) ## line 619 ##
[fx6 fx7]
[fx8 fx9]
sage: f.f_from(a1,a1,a2,a2) ## line 622 ##
[a0, a2]
sage: f.f_to(a1,a1,a2,a2) ## line 624 ##
[a1, a3]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 626 ##
0
sage: b22 = FusionRing("B2", 2) ## line 641 ##
sage: b22.fusion_labels("b", inject_variables=True) ## line 642 ##
sage: B=FMatrix(b22) ## line 643 ##
sage: B.fmatrix(b2, b4, b2, b4) ## line 644 ##
[fx266 fx267 fx268]
[fx269 fx270 fx271]
[fx272 fx273 fx274]
sage: B.f_from(b2, b4, b2, b4) ## line 648 ##
[b1, b3, b5]
sage: B.f_to(b2, b4, b2, b4) ## line 650 ##
[b1, b3, b5]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 652 ##
0
sage: f = FMatrix(FusionRing("A2", 1), inject_variables=True) ## line 672 ##
creating variables fx1..fx8
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7
sage: f.get_fvars()[(f1, f1, f1, f0, f2, f2)] ## line 675 ##
fx0
sage: f.find_orthogonal_solution(verbose=False) ## line 677 ##
sage: f.get_fvars()[(f1, f1, f1, f0, f2, f2)] ## line 678 ##
1
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 680 ##
0
sage: f = FMatrix(FusionRing("B6", 1)) ## line 689 ##
sage: f.get_poly_ring() ## line 690 ##
Multivariate Polynomial Ring in fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13 over Cyclotomic Field of order 96 and degree 32
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 693 ##
0
sage: f = FMatrix(FusionRing("E6", 1)) ## line 713 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 714 ##
sage: f.field() == f.FR().field() ## line 715 ##
True
sage: f.get_non_cyclotomic_roots() ## line 717 ##
[]
sage: f = FMatrix(FusionRing("G2", 1)) ## line 719 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 720 ##
sage: f.field() == f.FR().field() ## line 721 ##
False
sage: phi = f.get_qqbar_embedding() ## line 723 ##
sage: [phi(r).n() for r in f.get_non_cyclotomic_roots()] ## line 724 ##
[-0.786151377757423 - 8.92806368517581e-31*I]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 730 ##
0
sage: f = FMatrix(FusionRing("G2", 1), fusion_label="g", inject_variables=True) ## line 747 ##
creating variables fx1..fx5
Defining fx0, fx1, fx2, fx3, fx4
sage: f.find_orthogonal_solution() ## line 750 ##
Computing F-symbols for The Fusion Ring of Type G2 and level 1 with Integer Ring coefficients with 5 variables...
Set up 10 hex and orthogonality constraints...
Partitioned 10 equations into 2 components of size:
[4, 1]
Elimination epoch completed... 0 eqns remain in ideal basis
Hex elim step solved for 4 / 5 variables
Set up 0 reduced pentagons...
Pent elim step solved for 4 / 5 variables
Partitioned 0 equations into 0 components of size:
[]
Partitioned 1 equations into 1 components of size:
[1]
Computing appropriate NumberField...
sage: phi = f.get_qqbar_embedding() ## line 764 ##
sage: phi(f.fmat(g1,g1,g1,g1,g1,g1)).n() ## line 765 ##
-0.618033988749895 + 1.46674215951686e-29*I
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 767 ##
0
sage: f = FMatrix(FusionRing("G2", 1)) ## line 780 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 781 ##
sage: f.FR().field() ## line 782 ##
Cyclotomic Field of order 60 and degree 16
sage: f.field() ## line 784 ##
Number Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1
sage: phi = f.get_coerce_map_from_fr_cyclotomic_field() ## line 786 ##
sage: phi.domain() == f.FR().field() ## line 787 ##
True
sage: phi.codomain() == f.field() ## line 789 ##
True
sage: f = FMatrix(FusionRing("A2", 1)) ## line 800 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 801 ##
sage: phi = f.get_coerce_map_from_fr_cyclotomic_field() ## line 802 ##
sage: f.field() ## line 803 ##
Cyclotomic Field of order 48 and degree 16
sage: f.field() == f.FR().field() ## line 805 ##
True
sage: phi.domain() == f.field() ## line 807 ##
True
sage: phi.is_identity() ## line 809 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 811 ##
0
sage: f = FMatrix(FusionRing("G2", 1), fusion_label="g", inject_variables=True) ## line 831 ##
creating variables fx1..fx5
Defining fx0, fx1, fx2, fx3, fx4
sage: f.find_orthogonal_solution(verbose=False) ## line 834 ##
sage: f.field() ## line 835 ##
Number Field in a with defining polynomial y^32 - 6*y^30 - 7*y^28 + 62*y^26 - 52*y^24 - 308*y^22 + 831*y^20 + 7496*y^18 + 18003*y^16 - 2252*y^14 + 42259*y^12 - 65036*y^10 + 29368*y^8 - 3894*y^6 + 377*y^4 - 22*y^2 + 1
sage: f.get_fvars_in_alg_field() ## line 837 ##
{(g1, g1, g1, g0, g1, g1): 1,
 (g1, g1, g1, g1, g0, g0): 0.61803399? + 0.?e-8*I,
 (g1, g1, g1, g1, g0, g1): -0.7861514? + 0.?e-8*I,
 (g1, g1, g1, g1, g1, g0): -0.7861514? + 0.?e-8*I,
 (g1, g1, g1, g1, g1, g1): -0.61803399? + 0.?e-8*I}
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 843 ##
0
sage: f = FMatrix(FusionRing("G2", 1)) ## line 852 ##
sage: f.FR().fusion_labels("g", inject_variables=True) ## line 853 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 854 ##
sage: radical_fvars = f.get_radical_expression()       # long time (~1.5s) ## line 855 ##
sage: radical_fvars[g1, g1, g1, g1, g1, g0]            # long time ## line 856 ##
-sqrt(1/2*sqrt(5) - 1/2)
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 858 ##
0
sage: f = FMatrix(FusionRing("D4", 1)) ## line 872 ##
sage: f._reset_solver_state() ## line 873 ##
sage: len(f._get_known_vals()) == 0 ## line 874 ##
True
sage: f.find_orthogonal_solution(verbose=False) ## line 876 ##
sage: len(f._get_known_vals()) == f._poly_ring.ngens() ## line 877 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 879 ##
0
sage: f = FMatrix(FusionRing("D5", 1))  # indirect doctest ## line 893 ##
sage: f._reset_solver_state() ## line 894 ##
sage: f._nnz ## line 895 ##
(100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100)
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 898 ##
0
sage: f = FMatrix(FusionRing("B3", 2)) ## line 914 ##
sage: f.largest_fmat_size() ## line 915 ##
4
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 917 ##
0
sage: f = FMatrix(FusionRing("A2",2), inject_variables=True) ## line 941 ##
creating variables fx1..fx287
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26, fx27, fx28, fx29, fx30, fx31, fx32, fx33, fx34, fx35, fx36, fx37, fx38, fx39, fx40, fx41, fx42, fx43, fx44, fx45, fx46, fx47, fx48, fx49, fx50, fx51, fx52, fx53, fx54, fx55, fx56, fx57, fx58, fx59, fx60, fx61, fx62, fx63, fx64, fx65, fx66, fx67, fx68, fx69, fx70, fx71, fx72, fx73, fx74, fx75, fx76, fx77, fx78, fx79, fx80, fx81, fx82, fx83, fx84, fx85, fx86, fx87, fx88, fx89, fx90, fx91, fx92, fx93, fx94, fx95, fx96, fx97, fx98, fx99, fx100, fx101, fx102, fx103, fx104, fx105, fx106, fx107, fx108, fx109, fx110, fx111, fx112, fx113, fx114, fx115, fx116, fx117, fx118, fx119, fx120, fx121, fx122, fx123, fx124, fx125, fx126, fx127, fx128, fx129, fx130, fx131, fx132, fx133, fx134, fx135, fx136, fx137, fx138, fx139, fx140, fx141, fx142, fx143, fx144, fx145, fx146, fx147, fx148, fx149, fx150, fx151, fx152, fx153, fx154, fx155, fx156, fx157, fx158, fx159, fx160, fx161, fx162, fx163, fx164, fx165, fx166, fx167, fx168, fx169, fx170, fx171, fx172, fx173, fx174, fx175, fx176, fx177, fx178, fx179, fx180, fx181, fx182, fx183, fx184, fx185, fx186, fx187, fx188, fx189, fx190, fx191, fx192, fx193, fx194, fx195, fx196, fx197, fx198, fx199, fx200, fx201, fx202, fx203, fx204, fx205, fx206, fx207, fx208, fx209, fx210, fx211, fx212, fx213, fx214, fx215, fx216, fx217, fx218, fx219, fx220, fx221, fx222, fx223, fx224, fx225, fx226, fx227, fx228, fx229, fx230, fx231, fx232, fx233, fx234, fx235, fx236, fx237, fx238, fx239, fx240, fx241, fx242, fx243, fx244, fx245, fx246, fx247, fx248, fx249, fx250, fx251, fx252, fx253, fx254, fx255, fx256, fx257, fx258, fx259, fx260, fx261, fx262, fx263, fx264, fx265, fx266, fx267, fx268, fx269, fx270, fx271, fx272, fx273, fx274, fx275, fx276, fx277, fx278, fx279, fx280, fx281, fx282, fx283, fx284, fx285, fx286
sage: f.largest_fmat_size() ## line 944 ##
2
sage: f.get_fvars_by_size(2) ## line 946 ##
{(f2, f2, f2, f4, f1, f1),
 (f2, f2, f2, f4, f1, f5),
 (f2, f2, f2, f4, f5, f1),
 (f2, f2, f2, f4, f5, f5),
 (f2, f2, f1, f2, f1, f0),
 (f2, f2, f1, f2, f1, f4),
 (f2, f2, f1, f2, f5, f0),
 (f2, f2, f1, f2, f5, f4),
 (f2, f2, f4, f1, f1, f2),
 (f2, f2, f4, f1, f1, f3),
 (f2, f2, f4, f1, f5, f2),
 (f2, f2, f4, f1, f5, f3),
 (f2, f1, f2, f2, f0, f0),
 (f2, f1, f2, f2, f0, f4),
 (f2, f1, f2, f2, f4, f0),
 (f2, f1, f2, f2, f4, f4),
 (f2, f1, f1, f1, f0, f2),
 (f2, f1, f1, f1, f0, f3),
 (f2, f1, f1, f1, f4, f2),
 (f2, f1, f1, f1, f4, f3),
 (f2, f1, f4, f4, f0, f1),
 (f2, f1, f4, f4, f0, f5),
 (f2, f1, f4, f4, f4, f1),
 (f2, f1, f4, f4, f4, f5),
 (f2, f4, f2, f1, f2, f2),
 (f2, f4, f2, f1, f2, f3),
 (f2, f4, f2, f1, f3, f2),
 (f2, f4, f2, f1, f3, f3),
 (f2, f4, f1, f4, f2, f1),
 (f2, f4, f1, f4, f2, f5),
 (f2, f4, f1, f4, f3, f1),
 (f2, f4, f1, f4, f3, f5),
 (f2, f4, f4, f2, f2, f0),
 (f2, f4, f4, f2, f2, f4),
 (f2, f4, f4, f2, f3, f0),
 (f2, f4, f4, f2, f3, f4),
 (f1, f2, f2, f2, f0, f1),
 (f1, f2, f2, f2, f0, f5),
 (f1, f2, f2, f2, f4, f1),
 (f1, f2, f2, f2, f4, f5),
 (f1, f2, f1, f1, f0, f0),
 (f1, f2, f1, f1, f0, f4),
 (f1, f2, f1, f1, f4, f0),
 (f1, f2, f1, f1, f4, f4),
 (f1, f2, f4, f4, f0, f2),
 (f1, f2, f4, f4, f0, f3),
 (f1, f2, f4, f4, f4, f2),
 (f1, f2, f4, f4, f4, f3),
 (f1, f1, f2, f1, f2, f0),
 (f1, f1, f2, f1, f2, f4),
 (f1, f1, f2, f1, f3, f0),
 (f1, f1, f2, f1, f3, f4),
 (f1, f1, f1, f4, f2, f2),
 (f1, f1, f1, f4, f2, f3),
 (f1, f1, f1, f4, f3, f2),
 (f1, f1, f1, f4, f3, f3),
 (f1, f1, f4, f2, f2, f1),
 (f1, f1, f4, f2, f2, f5),
 (f1, f1, f4, f2, f3, f1),
 (f1, f1, f4, f2, f3, f5),
 (f1, f4, f2, f4, f1, f2),
 (f1, f4, f2, f4, f1, f3),
 (f1, f4, f2, f4, f5, f2),
 (f1, f4, f2, f4, f5, f3),
 (f1, f4, f1, f2, f1, f1),
 (f1, f4, f1, f2, f1, f5),
 (f1, f4, f1, f2, f5, f1),
 (f1, f4, f1, f2, f5, f5),
 (f1, f4, f4, f1, f1, f0),
 (f1, f4, f4, f1, f1, f4),
 (f1, f4, f4, f1, f5, f0),
 (f1, f4, f4, f1, f5, f4),
 (f4, f2, f2, f1, f2, f1),
 (f4, f2, f2, f1, f2, f5),
 (f4, f2, f2, f1, f3, f1),
 (f4, f2, f2, f1, f3, f5),
 (f4, f2, f1, f4, f2, f0),
 (f4, f2, f1, f4, f2, f4),
 (f4, f2, f1, f4, f3, f0),
 (f4, f2, f1, f4, f3, f4),
 (f4, f2, f4, f2, f2, f2),
 (f4, f2, f4, f2, f2, f3),
 (f4, f2, f4, f2, f3, f2),
 (f4, f2, f4, f2, f3, f3),
 (f4, f1, f2, f4, f1, f0),
 (f4, f1, f2, f4, f1, f4),
 (f4, f1, f2, f4, f5, f0),
 (f4, f1, f2, f4, f5, f4),
 (f4, f1, f1, f2, f1, f2),
 (f4, f1, f1, f2, f1, f3),
 (f4, f1, f1, f2, f5, f2),
 (f4, f1, f1, f2, f5, f3),
 (f4, f1, f4, f1, f1, f1),
 (f4, f1, f4, f1, f1, f5),
 (f4, f1, f4, f1, f5, f1),
 (f4, f1, f4, f1, f5, f5),
 (f4, f4, f2, f2, f0, f2),
 (f4, f4, f2, f2, f0, f3),
 (f4, f4, f2, f2, f4, f2),
 (f4, f4, f2, f2, f4, f3),
 (f4, f4, f1, f1, f0, f1),
 (f4, f4, f1, f1, f0, f5),
 (f4, f4, f1, f1, f4, f1),
 (f4, f4, f1, f1, f4, f5),
 (f4, f4, f4, f4, f0, f0),
 (f4, f4, f4, f4, f0, f4),
 (f4, f4, f4, f4, f4, f0),
 (f4, f4, f4, f4, f4, f4)}
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 952 ##
0
sage: f = FMatrix(FusionRing("A2", 1)) ## line 1000 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 1001 ##
sage: fvars = f.get_fvars() ## line 1002 ##
sage: K = f.field() ## line 1003 ##
sage: filename = f.get_fr_str() + "_solver_results.pickle" ## line 1004 ##
sage: f.save_fvars(filename) ## line 1005 ##
sage: del f ## line 1006 ##
sage: f2 = FMatrix(FusionRing("A2",1)) ## line 1007 ##
sage: f2.load_fvars(filename) ## line 1008 ##
sage: fvars == f2.get_fvars() ## line 1009 ##
True
sage: K == f2.field() ## line 1011 ##
True
sage: os.remove(filename) ## line 1013 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1014 ##
0
sage: f = FMatrix(FusionRing("A2",1)) ## line 1032 ##
sage: f.find_orthogonal_solution(verbose=False) ## line 1033 ##
sage: fvars = f.get_fvars() ## line 1034 ##
sage: K = f.field() ## line 1035 ##
sage: filename = f.get_fr_str() + "_solver_results.pickle" ## line 1036 ##
sage: f.save_fvars(filename) ## line 1037 ##
sage: del f ## line 1038 ##
sage: f2 = FMatrix(FusionRing("A2",1)) ## line 1039 ##
sage: f2.load_fvars(filename) ## line 1040 ##
sage: fvars == f2.get_fvars() ## line 1041 ##
True
sage: K == f2.field() ## line 1043 ##
True
sage: os.remove(filename) ## line 1045 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1054 ##
0
sage: f = FMatrix(FusionRing("B3", 1)) ## line 1068 ##
sage: f.get_fr_str() ## line 1069 ##
'B31'
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1071 ##
0
sage: f = FMatrix(FusionRing("A1", 3)) ## line 1081 ##
sage: f._reset_solver_state() ## line 1082 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1083 ##
sage: f.get_defining_equations('hexagons',output=False) ## line 1084 ##
sage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1085 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1086 ##
sage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1087 ##
sage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1088 ##
sage: n = f._poly_ring.ngens() ## line 1089 ##
sage: f._fvars = FvarsHandler(n,f._field,f._idx_to_sextuple,init_data=f._fvars) ## line 1090 ##
sage: f._triangular_elim(verbose=False) ## line 1091 ##
sage: f._update_reduction_params() ## line 1092 ##
sage: f._checkpoint(do_chkpt=True,status=2) ## line 1093 ##
Checkpoint 2 reached!
sage: del f ## line 1095 ##
sage: f = FMatrix(FusionRing("A1",3)) ## line 1096 ##
sage: f.find_orthogonal_solution(warm_start="fmatrix_solver_checkpoint_A13.pickle") ## line 1097 ##
Computing F-symbols for The Fusion Ring of Type A1 and level 3 with Integer Ring coefficients with 71 variables...
Set up 121 reduced pentagons...
Elimination epoch completed... 18 eqns remain in ideal basis
Elimination epoch completed... 5 eqns remain in ideal basis
Pent elim step solved for 64 / 71 variables
Partitioned 5 equations into 1 components of size:
[4]
Elimination epoch completed... 0 eqns remain in ideal basis
Partitioned 6 equations into 6 components of size:
[1, 1, 1, 1, 1, 1]
Computing appropriate NumberField...
sage: f._chkpt_status == 7 ## line 1109 ##
True
sage: sum(f._solved) == f._poly_ring.ngens() ## line 1111 ##
True
sage: os.remove("fmatrix_solver_checkpoint_A13.pickle") ## line 1113 ##
sage: f = FMatrix(FusionRing("A1",2)) ## line 1114 ##
sage: f._reset_solver_state() ## line 1115 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1116 ##
sage: f.get_defining_equations('hexagons',output=False) ## line 1117 ##
sage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1118 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey ## line 1119 ##
sage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1120 ##
sage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1121 ##
sage: n = f._poly_ring.ngens() ## line 1122 ##
sage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1123 ##
sage: f._triangular_elim(verbose=False) ## line 1124 ##
sage: f._update_reduction_params() ## line 1125 ##
sage: f.get_defining_equations('pentagons',output=False) ## line 1126 ##
sage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1127 ##
sage: f._triangular_elim(verbose=False) ## line 1128 ##
sage: f._checkpoint(do_chkpt=True,status=4) ## line 1129 ##
Checkpoint 4 reached!
sage: del f ## line 1131 ##
sage: f = FMatrix(FusionRing("A1", 2)) ## line 1132 ##
sage: f.find_orthogonal_solution(warm_start="fmatrix_solver_checkpoint_A12.pickle") ## line 1133 ##
Computing F-symbols for The Fusion Ring of Type A1 and level 2 with Integer Ring coefficients with 14 variables...
Partitioned 0 equations into 0 components of size:
[]
Partitioned 2 equations into 2 components of size:
[1, 1]
sage: f._chkpt_status == 7 ## line 1139 ##
True
sage: sum(f._solved) == f._poly_ring.ngens() ## line 1141 ##
True
sage: os.remove("fmatrix_solver_checkpoint_A12.pickle") ## line 1143 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1144 ##
0
sage: f = FMatrix(FusionRing("A1", 2)) ## line 1160 ##
sage: f._reset_solver_state() ## line 1161 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1162 ##
sage: f.get_defining_equations('hexagons', output=False) ## line 1163 ##
sage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1164 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1165 ##
sage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1166 ##
sage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1167 ##
sage: n = f._poly_ring.ngens() ## line 1168 ##
sage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1169 ##
sage: f._triangular_elim(verbose=False) ## line 1170 ##
sage: f._update_reduction_params() ## line 1171 ##
sage: fvars = f._fvars ## line 1172 ##
sage: ib = f.ideal_basis ## line 1173 ##
sage: solved = f._solved ## line 1174 ##
sage: ks = f._ks ## line 1175 ##
sage: status = f._chkpt_status ## line 1176 ##
sage: f._checkpoint(do_chkpt=True, status=2) ## line 1177 ##
Checkpoint 2 reached!
sage: del f ## line 1179 ##
sage: f = FMatrix(FusionRing("A1", 2)) ## line 1180 ##
sage: f._reset_solver_state() ## line 1181 ##
sage: f._restore_state("fmatrix_solver_checkpoint_A12.pickle") ## line 1182 ##
sage: for sextuple, fvar in fvars.items():
    assert fvar == f._fvars[sextuple] ## line 1183 ##
sage: ib == f.ideal_basis ## line 1186 ##
True
sage: ks == f._ks ## line 1188 ##
True
sage: solved == f._solved ## line 1190 ##
True
sage: 2 == f._chkpt_status ## line 1192 ##
True
sage: os.remove("fmatrix_solver_checkpoint_A12.pickle") ## line 1194 ##
sage: f = FMatrix(FusionRing("A1", 3)) ## line 1198 ##
sage: f.find_orthogonal_solution(save_results="test.pickle",verbose=False)   # long time ## line 1199 ##
sage: del f ## line 1200 ##
sage: f = FMatrix(FusionRing("A1", 3)) ## line 1201 ##
sage: f.find_orthogonal_solution(warm_start="test.pickle")                   # long time ## line 1202 ##
sage: f._chkpt_status == 7                                                   # long time ## line 1203 ##
True
sage: os.remove("test.pickle")                                               # long time ## line 1205 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1206 ##
0
sage: f = FMatrix(FusionRing("G2", 1)) ## line 1257 ##
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1258 ##
sage: he = f.get_defining_equations('hexagons') ## line 1259 ##
sage: sorted(he) ## line 1260 ##
[fx0 - 1,
 fx2*fx3 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx4^2 + (zeta60^6)*fx4,
 fx1*fx3 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx3*fx4 + (zeta60^14 - zeta60^4)*fx3,
 fx1*fx2 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx2*fx4 + (zeta60^14 - zeta60^4)*fx2,
 fx1^2 + (zeta60^14 + zeta60^12 - zeta60^6 - zeta60^4 + 1)*fx2*fx3 + (-zeta60^12)*fx1]
sage: pe = f.get_defining_equations('pentagons') ## line 1266 ##
sage: f.shutdown_worker_pool() ## line 1267 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1281 ##
0
sage: f = FMatrix(FusionRing("A1", 3)) ## line 1341 ##
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1342 ##
sage: he = f.get_defining_equations('hexagons') ## line 1343 ##
sage: f.shutdown_worker_pool() ## line 1344 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1345 ##
0
sage: f = FMatrix(FusionRing("A1", 2)) ## line 1378 ##
sage: f._reset_solver_state() ## line 1379 ##
sage: len(f._map_triv_reduce('get_reduced_hexagons',[(0,1,False)])) ## line 1380 ##
11
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1382 ##
sage: if is_shared_memory_available:
    mp_params = [(i,f.pool._processes,True) for i in range(f.pool._processes)]
else:
    mp_params = [(0,1,True)] ## line 1383 ##
sage: len(f._map_triv_reduce('get_reduced_pentagons',mp_params,worker_pool=f.pool,chunksize=1,mp_thresh=0)) ## line 1387 ##
33
sage: f.shutdown_worker_pool() ## line 1389 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1390 ##
0
sage: f = FMatrix(FusionRing("B4", 1)) ## line 1440 ##
sage: f.get_orthogonality_constraints() ## line 1441 ##
[fx0^2 - 1,
 fx1^2 - 1,
 fx2^2 - 1,
 fx3^2 - 1,
 fx4^2 - 1,
 fx5^2 - 1,
 fx6^2 - 1,
 fx7^2 - 1,
 fx8^2 - 1,
 fx9^2 - 1,
 fx10^2 + fx12^2 - 1,
 fx10*fx11 + fx12*fx13,
 fx10*fx11 + fx12*fx13,
 fx11^2 + fx13^2 - 1]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1456 ##
0
sage: f = FMatrix(FusionRing("B2", 1)) ## line 1496 ##
sage: sorted(f.get_defining_equations('hexagons')) ## line 1497 ##
[fx7 + 1,
 fx6 - 1,
 fx2 + 1,
 fx0 - 1,
 fx11*fx12 + (-zeta32^8)*fx13^2 + (zeta32^12)*fx13,
 fx10*fx12 + (-zeta32^8)*fx12*fx13 + (zeta32^4)*fx12,
 fx10*fx11 + (-zeta32^8)*fx11*fx13 + (zeta32^4)*fx11,
 fx10^2 + (-zeta32^8)*fx11*fx12 + (-zeta32^12)*fx10,
 fx4*fx9 + fx7,
 fx3*fx8 - fx6,
 fx1*fx5 + fx2]
sage: pe = f.get_defining_equations('pentagons') ## line 1509 ##
sage: len(pe) ## line 1510 ##
33
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1512 ##
0
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_to_tup ## line 1544 ##
sage: f = FMatrix(FusionRing("C3", 1)) ## line 1545 ##
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1546 ##
sage: he = f.get_defining_equations('hexagons') ## line 1547 ##
sage: all(f._tup_to_fpoly(poly_to_tup(h)) for h in he) ## line 1548 ##
True
sage: f.shutdown_worker_pool() ## line 1550 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1551 ##
0
sage: f = FMatrix(FusionRing("A1", 3)) ## line 1560 ##
sage: f._reset_solver_state() ## line 1561 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1562 ##
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1563 ##
sage: f.get_defining_equations('hexagons', output=False) ## line 1564 ##
sage: f.ideal_basis = f._par_graph_gb(verbose=False) ## line 1565 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1566 ##
sage: f.ideal_basis.sort(key=poly_tup_sortkey) ## line 1567 ##
sage: f.mp_thresh = 0 ## line 1568 ##
sage: if is_shared_memory_available:
    f._fvars = f._shared_fvars
else:
    from sage.algebras.fusion_rings.shm_managers import FvarsHandler
    f._fvars = FvarsHandler(f._poly_ring.ngens(),f._field,f._idx_to_sextuple,init_data=f._fvars) ## line 1569 ##
sage: f._triangular_elim(verbose=False)  # indirect doctest ## line 1574 ##
sage: f.ideal_basis ## line 1575 ##
[]
sage: f.shutdown_worker_pool() ## line 1577 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1578 ##
0
sage: f = FMatrix(FusionRing("D3", 1)) ## line 1609 ##
sage: f.get_defining_equations('hexagons', output=False) ## line 1610 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1611 ##
sage: gb = f._par_graph_gb(verbose=False) ## line 1612 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_tup_sortkey, poly_to_tup ## line 1613 ##
sage: f.ideal_basis = sorted(gb, key=poly_tup_sortkey) ## line 1614 ##
sage: from sage.algebras.fusion_rings.shm_managers import FvarsHandler ## line 1615 ##
sage: n = f._poly_ring.ngens() ## line 1616 ##
sage: f._fvars = FvarsHandler(n, f._field, f._idx_to_sextuple, init_data=f._fvars) ## line 1617 ##
sage: f._triangular_elim() ## line 1618 ##
Elimination epoch completed... 0 eqns remain in ideal basis
sage: f.ideal_basis ## line 1620 ##
[]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1622 ##
0
sage: f = FMatrix(FusionRing("A3", 1)) ## line 1691 ##
sage: f.get_poly_ring().ngens() ## line 1692 ##
27
sage: he = f.get_defining_equations('hexagons') ## line 1694 ##
sage: graph = f.equations_graph(he) ## line 1695 ##
sage: graph.connected_components_sizes() ## line 1696 ##
[6, 3, 3, 3, 3, 3, 3, 1, 1, 1]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1698 ##
0
sage: f = FMatrix(FusionRing("C2",1)) ## line 1735 ##
sage: f.get_defining_equations('hexagons',output=False) ## line 1736 ##
sage: partition = f._partition_eqns() ## line 1737 ##
Partitioned 11 equations into 5 components of size:
[4, 3, 3, 3, 1]
sage: from sage.algebras.fusion_rings.poly_tup_engine import variables ## line 1740 ##
sage: for c, e in partition.items():
    assert set(v for eq_tup in e for v in variables(eq_tup)) == set(c) ## line 1741 ##
sage: vars_in_partition = set() ## line 1743 ##
sage: eqns_in_partition = set() ## line 1744 ##
sage: for c, e in partition.items():
    vars_in_partition.update(c)
    eqns_in_partition.update(e) ## line 1745 ##
sage: vars_in_partition == set(v for eq_tup in f.ideal_basis for v in variables(eq_tup)) ## line 1748 ##
True
sage: eqns_in_partition == set(f.ideal_basis) ## line 1750 ##
True
sage: from itertools import product ## line 1752 ##
sage: for e1, e2 in product(partition.values(),repeat=2):
    assert e1 == e2 or set(e1).isdisjoint(set(e2)) ## line 1753 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1755 ##
0
sage: f = FMatrix(FusionRing("F4",1)) ## line 1783 ##
sage: f._reset_solver_state() ## line 1784 ##
sage: f.get_orthogonality_constraints(output=False) ## line 1785 ##
sage: is_shared_memory_available = f.start_worker_pool()     # Requires Python 3.8+ ## line 1786 ##
sage: f.get_defining_equations('hexagons',output=False) ## line 1787 ##
sage: gb = f._par_graph_gb() ## line 1788 ##
Partitioned 10 equations into 2 components of size:
[4, 1]
sage: from sage.algebras.fusion_rings.poly_tup_engine import _unflatten_coeffs ## line 1791 ##
sage: ret = [f._tup_to_fpoly(_unflatten_coeffs(f.field(), t)) for t in gb] ## line 1792 ##
sage: ret.sort(); ret ## line 1793 ##
[fx4 + (-zeta80^24 + zeta80^16),
 fx2 - fx3,
 fx1 + (zeta80^24 - zeta80^16),
 fx0 - 1,
 fx3^2 + (zeta80^24 - zeta80^16)]
sage: f.shutdown_worker_pool() ## line 1799 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1800 ##
0
sage: f = FMatrix(FusionRing("G2", 2)) ## line 1841 ##
sage: is_shared_memory_available = f.start_worker_pool()                     # Requires Python 3.8+ ## line 1842 ##
sage: f.get_defining_equations('hexagons', output=False)                     # long time ## line 1843 ##
sage: f.shutdown_worker_pool() ## line 1844 ##
sage: partition = f._partition_eqns()                                        # long time ## line 1845 ##
Partitioned 327 equations into 35 components of size:
[27, 27, 27, 24, 24, 16, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 9, 9, 6, 6, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1]
sage: c = (216, 292, 319) ## line 1849 ##
sage: from sage.algebras.fusion_rings.poly_tup_engine import poly_to_tup ## line 1850 ##
sage: eqns = partition[c] + [poly_to_tup(f._poly_ring.gen(216)-1)]           # long time ## line 1851 ##
sage: f._get_component_variety(c, eqns)                                      # long time ## line 1852 ##
[{216: -1, 292: -1, 319: 1}]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1854 ##
0
sage: f = FMatrix(FusionRing("F4", 2)) ## line 1890 ##
sage: f.attempt_number_field_computation() ## line 1891 ##
False
sage: f = FMatrix(FusionRing("G2", 1)) ## line 1893 ##
sage: f.attempt_number_field_computation() ## line 1894 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1905 ##
0
sage: f = FMatrix(FusionRing("A1", 3))  # indirect doctest ## line 1935 ##
sage: f.find_orthogonal_solution()     # long time ## line 1936 ##
Computing F-symbols for The Fusion Ring of Type A1 and level 3 with Integer Ring coefficients with 71 variables...
Set up 134 hex and orthogonality constraints...
Partitioned 134 equations into 17 components of size:
[12, 12, 6, 6, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1]
Elimination epoch completed... 10 eqns remain in ideal basis
Elimination epoch completed... 0 eqns remain in ideal basis
Hex elim step solved for 51 / 71 variables
Set up 121 reduced pentagons...
Elimination epoch completed... 18 eqns remain in ideal basis
Elimination epoch completed... 5 eqns remain in ideal basis
Pent elim step solved for 64 / 71 variables
Partitioned 5 equations into 1 components of size:
[4]
Elimination epoch completed... 0 eqns remain in ideal basis
Partitioned 6 equations into 6 components of size:
[1, 1, 1, 1, 1, 1]
Computing appropriate NumberField...
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 1954 ##
0
sage: f = FMatrix(FusionRing("B5", 1), fusion_label="b", inject_variables=True) ## line 2095 ##
creating variables fx1..fx14
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13
sage: f.find_orthogonal_solution() ## line 2098 ##
Computing F-symbols for The Fusion Ring of Type B5 and level 1 with Integer Ring coefficients with 14 variables...
Set up 25 hex and orthogonality constraints...
Partitioned 25 equations into 5 components of size:
[4, 3, 3, 3, 1]
Elimination epoch completed... 0 eqns remain in ideal basis
Hex elim step solved for 10 / 14 variables
Set up 7 reduced pentagons...
Elimination epoch completed... 0 eqns remain in ideal basis
Pent elim step solved for 12 / 14 variables
Partitioned 0 equations into 0 components of size:
[]
Partitioned 2 equations into 2 components of size:
[1, 1]
sage: f.fmatrix(b2, b2, b2, b2) ## line 2112 ##
[ 1/2*zeta80^30 - 1/2*zeta80^10 -1/2*zeta80^30 + 1/2*zeta80^10]
[ 1/2*zeta80^30 - 1/2*zeta80^10  1/2*zeta80^30 - 1/2*zeta80^10]
sage: f.fmat(b2, b2, b2, b2, b0, b1) ## line 2115 ##
-1/2*zeta80^30 + 1/2*zeta80^10
sage: f.fmats_are_orthogonal() ## line 2124 ##
True
sage: f.fvars_are_real() ## line 2126 ##
True
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2139 ##
0
sage: f = FMatrix(FusionRing("A3", 1)) ## line 2239 ##
sage: f._reset_solver_state()             # long time ## line 2240 ##
sage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()}  # long time ## line 2241 ##
sage: eqns = f.get_defining_equations("hexagons")+f.get_defining_equations("pentagons")  # long time ## line 2242 ##
sage: f.ideal_basis = set(Ideal(eqns).groebner_basis())   # long time ## line 2243 ##
sage: _, _ = f._substitute_degree_one()                   # long time ## line 2244 ##
sage: f._fix_gauge()                                      # long time ## line 2245 ##
adding equation... fx1 - 1
adding equation... fx18 - 1
adding equation... fx21 - 1
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2249 ##
0
sage: f = FMatrix(FusionRing("D3", 1), inject_variables=True) ## line 2272 ##
creating variables fx1..fx27
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26
sage: f._reset_solver_state() ## line 2275 ##
sage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()} ## line 2276 ##
sage: f.ideal_basis = [fx0 - 8, fx4**2 - 3, fx4 + fx10 + 3, fx4 + fx9] ## line 2277 ##
sage: _, _ = f._substitute_degree_one() ## line 2278 ##
sage: f._fvars[f._var_to_sextuple[fx0]] ## line 2279 ##
8
sage: f._fvars[f._var_to_sextuple[fx4]] ## line 2281 ##
-fx9
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2283 ##
0
sage: f = FMatrix(FusionRing("D3", 1), inject_variables=True) ## line 2312 ##
creating variables fx1..fx27
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7, fx8, fx9, fx10, fx11, fx12, fx13, fx14, fx15, fx16, fx17, fx18, fx19, fx20, fx21, fx22, fx23, fx24, fx25, fx26
sage: f._reset_solver_state() ## line 2315 ##
sage: f._var_to_sextuple = {f._poly_ring.gen(i): s for i, s in f._idx_to_sextuple.items()} ## line 2316 ##
sage: f.ideal_basis = [fx0 - 8, fx4 + fx9, fx4**2 + fx3 - fx9**2] ## line 2317 ##
sage: _, _ = f._substitute_degree_one() ## line 2318 ##
sage: f._update_equations() ## line 2319 ##
sage: f.ideal_basis ## line 2320 ##
{fx3}
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2322 ##
0
sage: f = FMatrix(FusionRing("A2", 1, fusion_labels="a", inject_variables=True), inject_variables=True) ## line 2349 ##
creating variables fx1..fx8
Defining fx0, fx1, fx2, fx3, fx4, fx5, fx6, fx7
sage: f.find_cyclotomic_solution(output=True) ## line 2352 ##
Setting up hexagons and pentagons...
Finding a Groebner basis...
Solving...
Fixing the gauge...
adding equation... fx4 - 1
Done!
{(a2, a2, a2, a0, a1, a1): 1,
 (a2, a2, a1, a2, a1, a0): 1,
 (a2, a1, a2, a2, a0, a0): 1,
 (a2, a1, a1, a1, a0, a2): 1,
 (a1, a2, a2, a2, a0, a1): 1,
 (a1, a2, a1, a1, a0, a0): 1,
 (a1, a1, a2, a1, a2, a0): 1,
 (a1, a1, a1, a0, a2, a2): 1}
sage: f.get_defining_equations("hexagons") ## line 2376 ##
[]
sage: f.get_defining_equations("pentagons") ## line 2378 ##
[]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2380 ##
0
sage: f = FMatrix(FusionRing("C3", 1)) ## line 2424 ##
sage: f.find_orthogonal_solution()      # long time ## line 2425 ##
Computing F-symbols for The Fusion Ring of Type C3 and level 1 with Integer Ring coefficients with 71 variables...
Set up 134 hex and orthogonality constraints...
Partitioned 134 equations into 17 components of size:
[12, 12, 6, 6, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1]
Elimination epoch completed... 10 eqns remain in ideal basis
Elimination epoch completed... 0 eqns remain in ideal basis
Hex elim step solved for 51 / 71 variables
Set up 121 reduced pentagons...
Elimination epoch completed... 18 eqns remain in ideal basis
Elimination epoch completed... 5 eqns remain in ideal basis
Pent elim step solved for 64 / 71 variables
Partitioned 5 equations into 1 components of size:
[4]
Elimination epoch completed... 0 eqns remain in ideal basis
Partitioned 6 equations into 6 components of size:
[1, 1, 1, 1, 1, 1]
doctest:warning
  File "/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests", line 144, in <module>
    err = DC.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
    self.run_doctests()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
    self.dispatcher.dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2044, in dispatch
    self.parallel_dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
    w.start()  # This might take some time
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2211, in start
    super(DocTestWorker, self).start()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 121, in start
    self._popen = self._Popen(self)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 224, in _Popen
    return _default_context.get_context().Process._Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 277, in _Popen
    return Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
    self._launch(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
    code = process_obj._bootstrap(parent_sentinel=child_r)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2183, in run
    task(self.options, self.outtmpfile, msgpipe, self.result_queue)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2512, in __call__
    doctests, extras = self._run(runner, options, results)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2559, in _run
    result = runner.run(test)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 910, in run
    return self._run(test, compileflags, out)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
    self.compile_and_execute(example, compiler, test.globs)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
    exec(compiled, globs)
  File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[1]>", line 1, in <module>
    f.find_orthogonal_solution()      # long time
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 2214, in find_orthogonal_solution
    self._get_explicit_solution(verbose=verbose)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 1978, in _get_explicit_solution
    roots = univ_poly.roots(multiplicities=False)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/number_field/number_field.py", line 10210, in _factor_univariate_polynomial
    f = poly._pari_with_name()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py", line 109, in _showwarnmsg
    sw(msg.message, msg.category, msg.filename, msg.lineno,
:
RuntimeWarning: cypari2 leaked 112 bytes on the PARI stack
sage: f.certify_pentagons()            # long time (~1.5s) ## line 2443 ##
doctest:warning
  File "/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests", line 144, in <module>
    err = DC.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
    self.run_doctests()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
    self.dispatcher.dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2044, in dispatch
    self.parallel_dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
    w.start()  # This might take some time
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2211, in start
    super(DocTestWorker, self).start()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 121, in start
    self._popen = self._Popen(self)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 224, in _Popen
    return _default_context.get_context().Process._Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 277, in _Popen
    return Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
    self._launch(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
    code = process_obj._bootstrap(parent_sentinel=child_r)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2183, in run
    task(self.options, self.outtmpfile, msgpipe, self.result_queue)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2512, in __call__
    doctests, extras = self._run(runner, options, results)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2559, in _run
    result = runner.run(test)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 910, in run
    return self._run(test, compileflags, out)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
    self.compile_and_execute(example, compiler, test.globs)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
    exec(compiled, globs)
  File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.certify_pentagons[2]>", line 1, in <module>
    f.certify_pentagons()            # long time (~1.5s)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 2446, in certify_pentagons
    fvars_copy = deepcopy(self._fvars)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 172, in deepcopy
    y = _reconstruct(x, memo, *rv)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 264, in _reconstruct
    y = func(*args)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 263, in <genexpr>
    args = (deepcopy(arg, memo) for arg in args)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 172, in deepcopy
    y = _reconstruct(x, memo, *rv)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/copy.py", line 264, in _reconstruct
    y = func(*args)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py", line 258, in complex_roots
    rts = cfac.roots(multiplicities=False)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py", line 109, in _showwarnmsg
    sw(msg.message, msg.category, msg.filename, msg.lineno,
:
RuntimeWarning: cypari2 leaked 32 bytes on the PARI stack
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2445 ##
0
sage: f = FMatrix(FusionRing("D4", 1)) ## line 2473 ##
doctest:warning
  File "/Users/buildbot-sage/slave/sage_git/build/src/bin/sage-runtests", line 144, in <module>
    err = DC.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
    self.run_doctests()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
    self.dispatcher.dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2044, in dispatch
    self.parallel_dispatch()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
    w.start()  # This might take some time
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2211, in start
    super(DocTestWorker, self).start()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 121, in start
    self._popen = self._Popen(self)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 224, in _Popen
    return _default_context.get_context().Process._Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/context.py", line 277, in _Popen
    return Popen(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
    self._launch(process_obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
    code = process_obj._bootstrap(parent_sentinel=child_r)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2183, in run
    task(self.options, self.outtmpfile, msgpipe, self.result_queue)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2512, in __call__
    doctests, extras = self._run(runner, options, results)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2559, in _run
    result = runner.run(test)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 910, in run
    return self._run(test, compileflags, out)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 718, in _run
    self.compile_and_execute(example, compiler, test.globs)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
    exec(compiled, globs)
  File "<doctest sage.algebras.fusion_rings.f_matrix.FMatrix.fmats_are_orthogonal[0]>", line 1, in <module>
    f = FMatrix(FusionRing("D4", Integer(1)))
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/algebras/fusion_rings/f_matrix.py", line 295, in __init__
    r = self._field.defining_polynomial().roots(ring=QQbar, multiplicities=False)[0]
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/sage/rings/polynomial/complex_roots.py", line 258, in complex_roots
    rts = cfac.roots(multiplicities=False)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/warnings.py", line 109, in _showwarnmsg
    sw(msg.message, msg.category, msg.filename, msg.lineno,
:
RuntimeWarning: cypari2 leaked 208 bytes on the PARI stack
sage: f.find_orthogonal_solution(verbose=False) ## line 2474 ##
sage: f.fmats_are_orthogonal() ## line 2475 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 2477 ##
0
sage: f = FMatrix(FusionRing("A1", 3)) ## line 2490 ##
sage: f.find_orthogonal_solution(verbose=False) # long time ## line 2491 ##
------------------------------------------------------------------------
0   signals.cpython-39-darwin.so        0x0000000111f1f412 print_backtrace + 66
1   signals.cpython-39-darwin.so        0x0000000111f23097 sigdie + 39
2   signals.cpython-39-darwin.so        0x0000000111f22f84 cysigs_signal_handler + 404
3   libsystem_platform.dylib            0x00007fff6bb885fd _sigtramp + 29
4   ???                                 0x00007fbbd000e4a0 0x0 + 140444625331360
5   libpython3.9.dylib                  0x000000010fe42a31 _PyObject_Malloc + 17
6   libpython3.9.dylib                  0x000000010ff3a9a0 _PyObject_GC_Alloc + 80
7   libpython3.9.dylib                  0x000000010ff3ab91 _PyObject_GC_NewVar + 49
8   libpython3.9.dylib                  0x000000010fe4ce79 PyTuple_New + 153
9   _pickle.cpython-39-darwin.so        0x0000000110831db6 load + 774
10  _pickle.cpython-39-darwin.so        0x000000011082a0e3 _pickle_loads + 723
11  libpython3.9.dylib                  0x000000010fe3c144 cfunction_vectorcall_FASTCALL_KEYWORDS + 132
12  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
13  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
14  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
15  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
16  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
17  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
18  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
19  libpython3.9.dylib                  0x000000010fed9de5 _PyEval_EvalFrameDefault + 28885
20  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
21  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
22  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
23  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
24  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
25  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
26  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
27  libpython3.9.dylib                  0x000000010fe012fa method_vectorcall + 330
28  libpython3.9.dylib                  0x000000010ff74616 t_bootstrap + 70
29  libpython3.9.dylib                  0x000000010ff29549 pythread_wrapper + 25
30  libsystem_pthread.dylib             0x00007fff6bb94109 _pthread_start + 148
31  libsystem_pthread.dylib             0x00007fff6bb8fb8b thread_start + 15
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
Process ForkPoolWorker-1:223:
------------------------------------------------------------------------
0   signals.cpython-39-darwin.so        0x0000000111f1f412 print_backtrace + 66
1   signals.cpython-39-darwin.so        0x0000000111f23097 sigdie + 39
2   signals.cpython-39-darwin.so        0x0000000111f22f84 cysigs_signal_handler + 404
3   libsystem_platform.dylib            0x00007fff6bb885fd _sigtramp + 29
4   ???                                 0x0000000000000000 0x0 + 0
5   libpython3.9.dylib                  0x000000010fe42a31 _PyObject_Malloc + 17
6   libpython3.9.dylib                  0x000000010fe64122 PyUnicode_New + 130
7   libpython3.9.dylib                  0x000000010fe65d23 _PyUnicode_FromASCII + 67
8   libpython3.9.dylib                  0x000000010ff824f9 _textiowrapper_readline + 1161
9   libpython3.9.dylib                  0x000000010ff80fdf textiowrapper_iternext + 223
10  libpython3.9.dylib                  0x000000010fe1b6f5 list_extend + 661
11  libpython3.9.dylib                  0x000000010fe0772d method_vectorcall_O + 141
12  libpython3.9.dylib                  0x000000010fe00369 object_vacall + 489
13  libpython3.9.dylib                  0x000000010fe005da _PyObject_CallMethodIdObjArgs + 250
Process ForkPoolWorker-1:222:
14  libpython3.9.dylib                  0x000000010ff77a86 _io__IOBase_readlines + 278
15  libpython3.9.dylib                  0x000000010fe0746c method_vectorcall_FASTCALL + 140
16  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
17  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
18  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
19  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
20  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
21  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
22  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
23  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
24  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
25  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
26  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
27  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
28  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
29  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
30  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
31  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
32  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
33  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
34  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
35  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
36  libpython3.9.dylib                  0x000000010fe081d3 property_descr_get + 115
37  libpython3.9.dylib                  0x000000010fe405a1 _PyObject_GenericGetAttrWithDict + 177
38  libpython3.9.dylib                  0x000000010fed7c91 _PyEval_EvalFrameDefault + 20353
39  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
40  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
41  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
42  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
43  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
44  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
Traceback (most recent call last):
45  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py", line 131, in worker
    put((job, i, result))
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py", line 378, in put
    self._writer.send_bytes(obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 205, in send_bytes
    self._send_bytes(m[offset:offset + size])
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 416, in _send_bytes
    self._send(header + buf)
46  libpython3.9.dylib                  0x000000010fdfe4ed _PyObject_FastCallDictTstate + 173
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 373, in _send
    n = write(self._handle, buf)
BrokenPipeError: [Errno 32] Broken pipe
47  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py", line 136, in worker
    put((job, i, (False, wrapped)))
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py", line 378, in put
    self._writer.send_bytes(obj)
48  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 205, in send_bytes
    self._send_bytes(m[offset:offset + size])
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 416, in _send_bytes
    self._send(header + buf)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 373, in _send
    n = write(self._handle, buf)
BrokenPipeError: [Errno 32] Broken pipe
49  libpython3.9.dylib                  0x000000010fe52684 type_call + 340
50  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375
51  libpython3.9.dylib                  0x000000010fedc940 call_function + 624
52  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
53  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
54  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
55  libpython3.9.dylib                  0x000000010fdfeb5b PyVectorcall_Call + 155
56  libpython3.9.dylib                  0x000000010fed9de5 _PyEval_EvalFrameDefault + 28885
57  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
58  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
59  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
60  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
61  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
62  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
63  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
64  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
65  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
66  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
67  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
68  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
69  libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258
70  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139
71  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205
72  libpython3.9.dylib                  0x000000010fe52684 type_call + 340
73  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375
74  libpython3.9.dylib                  0x000000010fedc940 call_function + 624
75  libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
76  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
77  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
78  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
79  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
80  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
81  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
82  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
83  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
84  libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
85  libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
86  libpython3.9.dylib                  0x000000010fedc86b call_function + 411
87  libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
88  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
89  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
90  libpython3.9.dylib                  0x000000010fdfe4ed _PyObject_FastCallDictTstate + 173
91  libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139
92  libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205
93  libpython3.9.dylib                  0x000000010fe52684 type_call + 340
94  libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375
95  libpython3.9.dylib                  0x000000010fedc940 call_function + 624
96  libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
97  libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
98  libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
99  libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
100 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
101 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
102 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
103 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
104 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
105 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
106 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
107 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
108 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
109 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
110 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
111 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
112 libpython3.9.dylib                  0x000000010fed2c17 PyEval_EvalCode + 87
113 libpython3.9.dylib                  0x000000010fecfc5f builtin_exec + 575
114 libpython3.9.dylib                  0x000000010fe3c077 cfunction_vectorcall_FASTCALL + 215
115 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
116 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
117 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
118 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
119 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
120 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
121 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
122 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
123 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
124 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
125 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
126 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
127 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
128 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
129 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
130 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
131 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
132 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
133 libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258
134 libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139
135 libpython3.9.dylib                  0x000000010fe59147 slot_tp_call + 199
136 libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375
137 libpython3.9.dylib                  0x000000010fedc940 call_function + 624
138 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
139 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
140 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
141 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
142 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
143 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
144 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
145 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
146 libpython3.9.dylib                  0x000000010fed9a86 _PyEval_EvalFrameDefault + 28022
147 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
148 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
149 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
150 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
151 libpython3.9.dylib                  0x000000010fdfe542 _PyObject_FastCallDictTstate + 258
152 libpython3.9.dylib                  0x000000010fdff25b _PyObject_Call_Prepend + 139
153 libpython3.9.dylib                  0x000000010fe5a84d slot_tp_init + 205
154 libpython3.9.dylib                  0x000000010fe52684 type_call + 340
155 libpython3.9.dylib                  0x000000010fdfe717 _PyObject_MakeTpCall + 375
156 libpython3.9.dylib                  0x000000010fedc940 call_function + 624
157 libpython3.9.dylib                  0x000000010fed99d1 _PyEval_EvalFrameDefault + 27841
158 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
159 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
160 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
161 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
162 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
163 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
164 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
165 libpython3.9.dylib                  0x000000010fe0127c method_vectorcall + 204
166 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
167 libpython3.9.dylib                  0x000000010fed9924 _PyEval_EvalFrameDefault + 27668
168 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
169 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
170 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
171 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
172 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
173 libpython3.9.dylib                  0x000000010fdfee90 _PyFunction_Vectorcall + 256
174 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
175 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
176 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
177 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
178 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
179 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
180 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
181 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
182 libpython3.9.dylib                  0x000000010fdfef85 function_code_fastcall + 229
183 libpython3.9.dylib                  0x000000010fedc86b call_function + 411
184 libpython3.9.dylib                  0x000000010fed9904 _PyEval_EvalFrameDefault + 27636
185 libpython3.9.dylib                  0x000000010fedd498 _PyEval_EvalCode + 2184
186 libpython3.9.dylib                  0x000000010fed2c17 PyEval_EvalCode + 87
187 libpython3.9.dylib                  0x000000010ff1e18f pyrun_file + 367
188 libpython3.9.dylib                  0x000000010ff1c4e1 PyRun_SimpleFileExFlags + 721
189 libpython3.9.dylib                  0x000000010ff38b66 Py_RunMain + 1926
190 libpython3.9.dylib                  0x000000010ff3901c pymain_main + 348
191 libpython3.9.dylib                  0x000000010ff3906b Py_BytesMain + 43
192 libdyld.dylib                       0x00007fff6b98bcc9 start + 1
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
Process ForkPoolWorker-1:219:
Traceback (most recent call last):
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py", line 131, in worker
    put((job, i, result))
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py", line 378, in put
    self._writer.send_bytes(obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 205, in send_bytes
    self._send_bytes(m[offset:offset + size])
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 416, in _send_bytes
    self._send(header + buf)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 373, in _send
    n = write(self._handle, buf)
BrokenPipeError: [Errno 32] Broken pipe

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/pool.py", line 136, in worker
    put((job, i, (False, wrapped)))
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/queues.py", line 378, in put
    self._writer.send_bytes(obj)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 205, in send_bytes
    self._send_bytes(m[offset:offset + size])
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 416, in _send_bytes
    self._send(header + buf)
  File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/multiprocessing/connection.py", line 373, in _send
    n = write(self._handle, buf)
BrokenPipeError: [Errno 32] Broken pipe

**********************************************************************
----------------------------------------------------------------------
sage -t --long --warn-long 81.8 --random-seed=0 src/sage/algebras/fusion_rings/f_matrix.py  # Killed due to segmentation fault
----------------------------------------------------------------------
```




---

archive/issue_comments_430299.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-18T23:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430299",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430300.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-24T18:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430300",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430301.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T19:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430301",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430302.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-09T21:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430302",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-09T22:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430303",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430304.json:
```json
{
    "body": "You can set a dependency on #32937 to get Python 3.8",
    "created_at": "2022-05-15T03:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430304",
    "user": "mkoeppe"
}
```

You can set a dependency on #32937 to get Python 3.8



---

archive/issue_comments_430305.json:
```json
{
    "body": "The possibly related cypari2 issue within multithreaded environment is supposedly solved at https://github.com/sagemath/cypari2/pull/116. Though your code needs to explicitely construct a `PariThreadPool` and call `PariThreadPool.initializer` inside each thread.",
    "created_at": "2022-05-19T12:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430305",
    "user": "vdelecroix"
}
```

The possibly related cypari2 issue within multithreaded environment is supposedly solved at https://github.com/sagemath/cypari2/pull/116. Though your code needs to explicitely construct a `PariThreadPool` and call `PariThreadPool.initializer` inside each thread.



---

archive/issue_comments_430306.json:
```json
{
    "body": "Though I am not sure it will help in your case. You are using shared memory between different processes.",
    "created_at": "2022-05-19T12:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430306",
    "user": "vdelecroix"
}
```

Though I am not sure it will help in your case. You are using shared memory between different processes.



---

archive/issue_comments_430307.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-28T21:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430307",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430308.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-01T22:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430308",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430309.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-01T22:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430309",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430310.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-02T00:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430310",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430311.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-05T05:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430311",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430312.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-07T06:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430312",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_430313.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-10T07:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430313",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430314.json:
```json
{
    "body": "I made some small changes to try and simplify things. However, I do need something from you. In the `shm_managers.pyx`, the `INPUT:` for both classes is wrong. Can you fix this?\n\nAlso, I made them run a `TestSuite`, which pickling fails. For `KSHandler`, I expected this to work because it implements `__eq__` (unlike for `FvarsHandler`). If you do not expect this to work or be meaningful, you can just do `TestSuite(X).run(skip=\"_test_pickling\")`.\n\nI might have a few more changes, but they should basically be really minor, such as PEP8 stuff.",
    "created_at": "2022-08-10T07:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430314",
    "user": "tscrim"
}
```

I made some small changes to try and simplify things. However, I do need something from you. In the `shm_managers.pyx`, the `INPUT:` for both classes is wrong. Can you fix this?

Also, I made them run a `TestSuite`, which pickling fails. For `KSHandler`, I expected this to work because it implements `__eq__` (unlike for `FvarsHandler`). If you do not expect this to work or be meaningful, you can just do `TestSuite(X).run(skip="_test_pickling")`.

I might have a few more changes, but they should basically be really minor, such as PEP8 stuff.



---

archive/issue_comments_430315.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T21:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430315",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430316.json:
```json
{
    "body": "Sage now requires a minimum Python version of 3.8 since #32937 is merged. So you can reorganize/remove any code/doc that is dealing with handling earlier versions. For example\n\n```\n    Multiprocessing requires Python 3.8+, since we must import the\n    ``multiprocessing.shared_memory`` module. Attempting to initialize\n    when ``multiprocessing.shared_memory`` is not available results in\n    an ``ImportError``.\n```\n\nis not necessary.",
    "created_at": "2022-08-24T01:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430316",
    "user": "tscrim"
}
```

Sage now requires a minimum Python version of 3.8 since #32937 is merged. So you can reorganize/remove any code/doc that is dealing with handling earlier versions. For example

```
    Multiprocessing requires Python 3.8+, since we must import the
    ``multiprocessing.shared_memory`` module. Attempting to initialize
    when ``multiprocessing.shared_memory`` is not available results in
    an ``ImportError``.
```

is not necessary.



---

archive/issue_comments_430317.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-26T02:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430317",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430318.json:
```json
{
    "body": "I just have one last  big thing, but unfortunately it is a bit of a pain to change it:\n\nI think we should not import `FMatrix` into the global namespace; it is a bit too specific with a fairly generic name. I think we should add a hook to `FusionRing` by\n\n```python\ndef f_matrix(self, *args, **kwds):\n    from sage.algebras.fusion_rings.f_matrix import FMatrix\n    return FMatrix(self, *args, **kwds)\n```\n\nNot only will this not pollute the global namespace, it also is a lot more discoverable by tab completion.\n\n----\n\nSome other small things:\n\n- `fvars_field()` returns `None` if not multiplicity free. I think this should raise an error instead.\n- PEP8 for comments `# foo` instead of `#foo` (easy sed command) and some other things like `foo(bar, baz)` instead of `foo(bar,baz)` (possibly harder to do automatically, but I think every comma not followed by a newline/space can be followed by a space without any problems).\n- Be consistent about your capitalization in \"titles\" of modules; in particular, `poly_tup_engine.pyx`.",
    "created_at": "2022-09-20T03:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430318",
    "user": "tscrim"
}
```

I just have one last  big thing, but unfortunately it is a bit of a pain to change it:

I think we should not import `FMatrix` into the global namespace; it is a bit too specific with a fairly generic name. I think we should add a hook to `FusionRing` by

```python
def f_matrix(self, *args, **kwds):
    from sage.algebras.fusion_rings.f_matrix import FMatrix
    return FMatrix(self, *args, **kwds)
```

Not only will this not pollute the global namespace, it also is a lot more discoverable by tab completion.

----

Some other small things:

- `fvars_field()` returns `None` if not multiplicity free. I think this should raise an error instead.
- PEP8 for comments `# foo` instead of `#foo` (easy sed command) and some other things like `foo(bar, baz)` instead of `foo(bar,baz)` (possibly harder to do automatically, but I think every comma not followed by a newline/space can be followed by a space without any problems).
- Be consistent about your capitalization in "titles" of modules; in particular, `poly_tup_engine.pyx`.



---

archive/issue_comments_430319.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-19T19:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430319",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430320.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-24T01:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430320",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430321.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-28T21:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430321",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430322.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-28T21:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430322",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430323.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T05:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430323",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430324.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T06:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430324",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430325.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T17:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430325",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430326.json:
```json
{
    "body": "The commit 589a5b8 changed the behavior of the root_of_unity method, causing a doctest failure, so I reverted this change.",
    "created_at": "2022-10-30T17:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430326",
    "user": "bump"
}
```

The commit 589a5b8 changed the behavior of the root_of_unity method, causing a doctest failure, so I reverted this change.



---

archive/issue_comments_430327.json:
```json
{
    "body": "I am going to insist that this raise a `ValueError` as `None` as the latter does not make sense to be returned. It *should* fail because the input doesn't make sense (unless you are not going to special case it, in which case the garbage-in-garbage-out rule applies). I am going to change the test.\n\nCuriously, this was not failing for me when I was running the tests yesterday via\n\n```\n./sage -btp --long --warn-long src/sage/algebras/fusion_rings/\n```\n\nbut now I can reproduce the failure.",
    "created_at": "2022-10-30T23:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430327",
    "user": "tscrim"
}
```

I am going to insist that this raise a `ValueError` as `None` as the latter does not make sense to be returned. It *should* fail because the input doesn't make sense (unless you are not going to special case it, in which case the garbage-in-garbage-out rule applies). I am going to change the test.

Curiously, this was not failing for me when I was running the tests yesterday via

```
./sage -btp --long --warn-long src/sage/algebras/fusion_rings/
```

but now I can reproduce the failure.



---

archive/issue_comments_430328.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-10-30T23:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430328",
    "user": "tscrim"
}
```

New commits:



---

archive/issue_comments_430329.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-30T23:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430329",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430330.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-31T06:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430330",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430331.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-01T06:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430331",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_430332.json:
```json
{
    "body": "Checked by Dan and Willie.",
    "created_at": "2022-11-01T06:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430332",
    "user": "tscrim"
}
```

Checked by Dan and Willie.



---

archive/issue_comments_430333.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-11-07T20:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430333",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_430334.json:
```json
{
    "body": "this broke the linter by adding final empty lines, see #34781",
    "created_at": "2022-11-24T08:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30186#issuecomment-430334",
    "user": "chapoton"
}
```

this broke the linter by adding final empty lines, see #34781
