# Issue 20179: Various callers of MixedIntegerLinearProgram should accept and pass through a solver argument

Issue created by migration from https://trac.sagemath.org/ticket/20416

Original creator: mkoeppe

Original creation time: 2016-04-11 05:21:21

CC:  dimpase vdelecroix jdemeyer dcoudert jmantysalo

Keywords: lp


```
src/sage/combinat/designs/orthogonal_arrays.py:1446:    p = MixedIntegerLinearProgram()
src/sage/combinat/designs/orthogonal_arrays_build_recursive.py:365:    p = MixedIntegerLinearProgram()
src/sage/combinat/integer_vector.py:361:          p = MixedIntegerLinearProgram()
src/sage/combinat/posets/posets.py:2730:            p = MixedIntegerLinearProgram(constraint_generation=True)
src/sage/geometry/cone.py:4328:        p = MixedIntegerLinearProgram(maximization=False)
src/sage/graphs/comparability.pyx:439:    p = MixedIntegerLinearProgram()
src/sage/graphs/digraph.py:1498:            p = MixedIntegerLinearProgram(constraint_generation = True,
src/sage/graphs/generic_graph.py:7137:            p = MixedIntegerLinearProgram(maximization = False,
src/sage/graphs/generic_graph.py:7589:            p = MixedIntegerLinearProgram(constraint_generation = True,
src/sage/matroids/matroid.pyx:7041:        MIP = MixedIntegerLinearProgram(maximization=False)
src/sage/numerical/optimize.py:801:    p=MixedIntegerLinearProgram()
src/sage/sat/solvers/sat_lp.py:33:        self._LP = MixedIntegerLinearProgram()
```




---

Comment by dcoudert created at 2018-03-14 08:46:25

It's certainly better to make different tickets to avoid conflicts since we will touch different modules. Furthermore, we can take the opportunity to improve some codes. For instance in `src/sage/numerical/optimize.py`, the `binpacking` method needs some polishing.


---

Comment by dcoudert created at 2018-03-14 16:44:01

#24975 treat method `binpacking` from `src/sage/numerical/optimize.py`


---

Comment by dcoudert created at 2018-03-14 17:13:58

#24976 for several methods in `src/sage/graphs/comparability.pyx`


---

Comment by dcoudert created at 2018-03-14 17:43:24

#24977 for method `flat_cover` of `src/sage/matroids/matroid.pyx`


---

Comment by dcoudert created at 2018-03-14 17:59:24

#24978 for class `SatLP` of `src/sage/sat/solvers/sat_lp.py`.

The parameter solver was here but not used.


---

Comment by dcoudert created at 2018-06-27 07:09:45

We have added parameter `solver` to all calls to `MixedIntegerLinearProgram`. The last possible improvement is to allow to give the parameters `solver` and `verbose` to methods calling methods calling methods calling `MixedIntegerLinearProgram`. For instance, method `is_hamiltonian` calls `traveling_salesman_problem` without allowing to give the parameters.
Do you think we should (try to) do it ? I don't know to trace calls to methods...


---

Comment by dimpase created at 2018-06-27 10:18:04

Replying to [comment:7 dcoudert]:
> We have added parameter `solver` to all calls to `MixedIntegerLinearProgram`. The last possible improvement is to allow to give the parameters `solver` and `verbose` 

> to methods calling methods calling methods calling 

no typo here? this looks scary...

>`MixedIntegerLinearProgram`. For instance, method `is_hamiltonian` calls `traveling_salesman_problem` without allowing to give the parameters.
> Do you think we should (try to) do it ? I don't know to trace calls to methods...
one way would be to add print statements and then watch doctests failing...

Probably there are some static code analysis tools to help here too, but I'm no expert in these.


---

Comment by dcoudert created at 2018-06-28 14:29:24

I added parameter solver to many methods in `graphs/`. I have certainly missed some, but it's already an improvement. Not sure if I should do the same for other modules in this ticket. it's already a lot of modifications...
----
Last 10 new commits:


---

Comment by dcoudert created at 2018-06-28 14:29:24

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4


---

Comment by git created at 2018-08-16 10:51:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-09-09 11:41:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-09-09 11:43:42

I fixed the conflicts with 8.4.beta4.


---

Comment by jmantysalo created at 2018-09-10 06:11:43

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2018-09-10 06:11:43

Seems to be OK. Tests fail, but they are marked as `# optional - magma`, so are not related to this patch.


---

Comment by vbraun created at 2018-09-11 21:40:56

Resolution: fixed
