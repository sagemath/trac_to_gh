# Issue 17025: Update to gcc 4.9.2

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-10-30 15:27:25

CC:  fbissey jpflori




---

Comment by vbraun created at 2014-10-30 15:29:58

Changing type from PLEASE CHANGE to enhancement.


---

Comment by vbraun created at 2014-10-30 15:29:58

Changing component from PLEASE CHANGE to packages: standard.


---

Comment by vbraun created at 2014-10-30 17:42:28

New commits:


---

Comment by vbraun created at 2014-10-30 17:42:28

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2014-10-30 18:40:25

On two OS X systems (one 10.9, one 10.10) this builds successfully but takes longer to build than previous gcc's. Is that the nature of version 4.9, or are we building extra stuff?

The time difference: on an old slow machine, it took 58 minutes to build 4.7.3 and 101 minutes to build this. On a newer faster machine, it took 16 minutes to build 4.7.3 and 21 minutes to build this. This time increase was also true with version 4.9.1. Do you see this on other platforms?


---

Comment by vbraun created at 2014-10-30 18:45:32

Sounds about right. Also includes the C -> C++ switch and C++ is definitely slower to compile since it is a much richer language.


---

Comment by fbissey created at 2014-10-31 08:48:03

Replying to [comment:4 jhpalmieri]:
> On two OS X systems (one 10.9, one 10.10) this builds successfully but takes longer to build than previous gcc's. Is that the nature of version 4.9, or are we building extra stuff?
> 
> The time difference: on an old slow machine, it took 58 minutes to build 4.7.3 and 101 minutes to build this. On a newer faster machine, it took 16 minutes to build 4.7.3 and 21 minutes to build this. This time increase was also true with version 4.9.1. Do you see this on other platforms?

Apart from the switch to c++ you may also be building a few more things compared to 4.7.3. Useful things like the sanitizer, more conformance to C++11, some C++14, support for latest openmp specification. All those take a bit of time.


---

Comment by jdemeyer created at 2014-10-31 14:08:46

New commits:


---

Comment by jdemeyer created at 2014-10-31 14:08:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-10-31 14:14:05

Some of the failure logs people posted on sage-devel were due to homebrew's isl in /usr/local, which is apparently good enough to be detected but not good enough to compile gcc. I think we should just disable isl/cloog/graphite on Darwin, its unlikely that anybody will have working libraries to build graphite... thoughts?


---

Comment by vbraun created at 2014-10-31 15:07:17

New commits:


---

Comment by vbraun created at 2014-10-31 15:07:17

Changing status from positive_review to needs_review.


---

Comment by vbraun created at 2014-10-31 15:29:42

Also, gcc 4.6.3 in Ubuntu 12.04 doesn't work: https://groups.google.com/d/msg/sage-release/xgmJ3nAcUOY/jH8OZjftYRsJ

Since we already shitlisted 4.6.1 and 4.6.2, how about we build gcc for all 4.6.x versions?


---

Comment by git created at 2014-10-31 15:36:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-10-31 15:36:40

Done!


---

Comment by jdemeyer created at 2014-10-31 16:49:00

Instead of blacklisting GCC 4.6 specifically, would it not make more sense to simply declare all GCC versions <= 4.6 as "old"?


---

Comment by vbraun created at 2014-10-31 17:02:45

I thought about it, but then nobody complained about it. It might actually work ;-)


---

Comment by dimpase created at 2014-10-31 17:25:44

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2014-10-31 17:25:44

this `fi;;` should go!

```
diff --git a/build/install b/build/install
index a5fae62..abe04d7 100755
--- a/build/install
+++ b/build/install
`@``@` -147,7 +147,6 `@``@` else
                 echo >&2 "Installing GCC because you have $CXX version $GCCVERSION."
                 echo >&2 "gcc-4.6.* has known bugs affecting Sage."
                 need_to_install_gcc=yes;;
-                fi;;
             4.7.0)
                 # GCC 4.7.0 is very broken on ia64, see
                 # http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48496
```



---

Comment by git created at 2014-10-31 18:25:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-10-31 18:25:16

Oops, fixed!


---

Comment by dimpase created at 2014-10-31 20:37:21

anything else not done here? Can it be reviewed?


---

Comment by dimpase created at 2014-10-31 20:37:21

Changing status from needs_work to needs_info.


---

Comment by vbraun created at 2014-10-31 21:56:19

As far as I'm concerned its good to go. Positive review to Jeroen's commits...


---

Comment by vbraun created at 2014-10-31 21:56:19

Changing status from needs_info to needs_review.


---

Comment by jdemeyer created at 2014-10-31 22:08:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-01 18:36:21

Resolution: fixed
