# Issue 28024: provide better labels for intersection poset of a hyperplane arrangement

archive/issues_028024.json:
```json
{
    "body": "CC:  @saliola galen-dorp @tscrim @trevorkarn\n\nKeywords: days99, IMA Coding Sprints, hyperplane arrangements, intersection poset\n\nThe elements of the intersection poset of a hyperplane arrangement are labelled 0 ... cardinality of intersection poset, but this does not provide information about the intersections.\n\nWe'll be posting a fix soon.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28261\n\n",
    "created_at": "2019-07-25T16:16:28Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "provide better labels for intersection poset of a hyperplane arrangement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28024",
    "user": "https://github.com/saliola"
}
```
CC:  @saliola galen-dorp @tscrim @trevorkarn

Keywords: days99, IMA Coding Sprints, hyperplane arrangements, intersection poset

The elements of the intersection poset of a hyperplane arrangement are labelled 0 ... cardinality of intersection poset, but this does not provide information about the intersections.

We'll be posting a fix soon.

Issue created by migration from https://trac.sagemath.org/ticket/28261





---

archive/issue_comments_395679.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2019-07-25T16:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395679",
    "user": "https://github.com/saliola"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_395680.json:
```json
{
    "body": "Should we really keep the previous output, or should we change it to a new default?\n----\nNew commits:",
    "created_at": "2019-07-25T16:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395680",
    "user": "https://github.com/saliola"
}
```

Should we really keep the previous output, or should we change it to a new default?
----
New commits:



---

archive/issue_comments_395681.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-25T16:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395681",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_395682.json:
```json
{
    "body": "This doctest:\n\n```\n+            sage: map(sorted, L.level_sets())\n+            [[0], [1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]]\n```\n\nwill probably not work on py3 because `map` has been changed to return an iterator. Better rewrite as a list comprehension.",
    "created_at": "2019-07-25T16:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395682",
    "user": "https://github.com/mkoeppe"
}
```

This doctest:

```
+            sage: map(sorted, L.level_sets())
+            [[0], [1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]]
```

will probably not work on py3 because `map` has been changed to return an iterator. Better rewrite as a list comprehension.



---

archive/issue_comments_395683.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-25T16:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395683",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_395684.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-25T22:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_395685.json:
```json
{
    "body": "Thanks for catching that! I've replaced it with a list comprehension.",
    "created_at": "2019-07-25T22:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395685",
    "user": "https://github.com/saliola"
}
```

Thanks for catching that! I've replaced it with a list comprehension.



---

archive/issue_comments_395686.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-25T22:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395686",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_395687.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395687",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_395688.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395688",
    "user": "https://github.com/mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_395689.json:
```json
{
    "body": "Looks good to me. Regarding doctests, I have two comments:\n\nYou are writing `sorted(L, key=sorted)` at few places in doctests. I have never seen something like this. Why just `sorted(L)` is not sufficient?\n\nYou are writing `. ::` at the end of paragraphs. I think this creates consecutive punctuations `. :` in the html doc. If the `::` appears on its own line, then no `:` are created in place of it in the html doc. Please tell me if I am wrong about this or please inform me so that I improve my knowledge of the Restructured text syntax.",
    "created_at": "2020-08-14T13:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395689",
    "user": "https://github.com/seblabbe"
}
```

Looks good to me. Regarding doctests, I have two comments:

You are writing `sorted(L, key=sorted)` at few places in doctests. I have never seen something like this. Why just `sorted(L)` is not sufficient?

You are writing `. ::` at the end of paragraphs. I think this creates consecutive punctuations `. :` in the html doc. If the `::` appears on its own line, then no `:` are created in place of it in the html doc. Please tell me if I am wrong about this or please inform me so that I improve my knowledge of the Restructured text syntax.



---

archive/issue_comments_395690.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-14T13:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395690",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_395691.json:
```json
{
    "body": "La syntaxe avec `. ::` est correcte, voir\n\nhttps://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#literal-blocks\n\nL'utilisation de `sorted(L, ley=sorted)` me semble ok pour un ensemble d'ensembles.\n\nPar contre, le doctest de la ligne 811 ne passe pas chez moi. ==> **Needs Work**",
    "created_at": "2020-09-16T18:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395691",
    "user": "https://github.com/fchapoton"
}
```

La syntaxe avec `. ::` est correcte, voir

https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#literal-blocks

L'utilisation de `sorted(L, ley=sorted)` me semble ok pour un ensemble d'ensembles.

Par contre, le doctest de la ligne 811 ne passe pas chez moi. ==> **Needs Work**



---

archive/issue_comments_395692.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395692",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_395693.json:
```json
{
    "body": "The doctest on line 811 fails because the two coordinate hyperplanes (the rank-1 elements of the lattice) are swapped. In the doctest, the hyperplane with normal vector [1,0] is written to appear before the hyperplane with normal vector [0,1], while the `._list` attribute, called by `sorted`, lists the hyperplane with normal vector [0,1] before the other. \n\nSo it seems to me like the fix is to fix the doctest, not any bugs in the code.",
    "created_at": "2021-06-03T20:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395693",
    "user": "https://github.com/trevorkarn"
}
```

The doctest on line 811 fails because the two coordinate hyperplanes (the rank-1 elements of the lattice) are swapped. In the doctest, the hyperplane with normal vector [1,0] is written to appear before the hyperplane with normal vector [0,1], while the `._list` attribute, called by `sorted`, lists the hyperplane with normal vector [0,1] before the other. 

So it seems to me like the fix is to fix the doctest, not any bugs in the code.



---

archive/issue_comments_395694.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-03T20:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395694",
    "user": "https://github.com/trevorkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_395695.json:
```json
{
    "body": "I agree with just modifying the doctest.\n\nHere is a slightly modified version where we build the Hasse diagram of the intersection poset at the same time as we build the poset to avoid comparisons of the affine subspaces. So this should be faster, but I haven't run any tests.\n----\nNew commits:",
    "created_at": "2021-06-04T07:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395695",
    "user": "https://github.com/tscrim"
}
```

I agree with just modifying the doctest.

Here is a slightly modified version where we build the Hasse diagram of the intersection poset at the same time as we build the poset to avoid comparisons of the affine subspaces. So this should be faster, but I haven't run any tests.
----
New commits:



---

archive/issue_comments_395696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-08T00:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_395697.json:
```json
{
    "body": "This should deal with the fact that we were trying to sort a poset. This should give it a linear order (coming from that matrices have a linear ordering).",
    "created_at": "2021-06-08T00:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395697",
    "user": "https://github.com/tscrim"
}
```

This should deal with the fact that we were trying to sort a poset. This should give it a linear order (coming from that matrices have a linear ordering).



---

archive/issue_comments_395698.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2021-06-09T02:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395698",
    "user": "https://github.com/trevorkarn"
}
```

Looks good to me.



---

archive/issue_comments_395699.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-09T02:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395699",
    "user": "https://github.com/trevorkarn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_395700.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-20T08:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28024#issuecomment-395700",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_025984.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28024",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28024#event-25984"
}
```
