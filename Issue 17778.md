# Issue 17778: Empty graph latex fails

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2015-03-20 20:13:22

CC:  rbeezer ncohen


```
sage: Graph()
Graph on 0 vertices
sage: view(Graph())
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-5-2dc28ec90e82> in <module>()
----> 1 view(Graph())

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/latex.pyc in view(objects, title, debug, sep, tiny, pdflatex, engine, viewer, tightpage, mode, combine_all, **kwds)
   2160     else:
   2161         latex_options = {}
-> 2162     s = _latex_file_(objects, title=title, sep=sep, tiny=tiny, debug=debug, **latex_options)
   2163     if engine is None:
   2164         engine = _Latex_prefs._option["engine"]

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/latex.pyc in _latex_file_(objects, title, debug, sep, tiny, math_left, math_right, extra_preamble)
   1770         for i in range(len(objects)):
   1771             x = objects[i]
-> 1772             L = latex(x)
   1773             if not '\\begin{verbatim}' in L:
   1774                 s += '%s%s%s'%(math_left, L, math_right)

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/latex.pyc in __call__(self, x, combine_all)
    918         """
    919         if has_latex_attr(x):
--> 920             return LatexExpr(x._latex_())
    921         try:
    922             f = latex_table[type(x)]

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in _latex_(self)
    715         setup_latex_preamble()
    716 
--> 717         return self.latex_options().latex()
    718 
    719     def _matrix_(self, R=None):

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/graph_latex.pyc in latex(self)
   1301         format = self.get_option('format')
   1302         if format  == "tkz_graph":
-> 1303             return self.tkz_picture()
   1304         elif format == "dot2tex":
   1305             return self.dot2tex_picture()

/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/graphs/graph_latex.pyc in tkz_picture(self)
   1556         # layouts get put in the middle of the bounding box by setting the
   1557         # scaling to a constant value on a midline
-> 1558         xspread = xmax - xmin
   1559         if xspread == 0:
   1560             x_scale = 0.0

UnboundLocalError: local variable 'xmin' referenced before assignment
```



---

Comment by @jfraymond created at 2019-02-06 21:28:12

When the graph is empty, `xmax` and `ymax` were both set to 0 but none of `xmin` and `ymin` were assigned, resulting in an error when computing `xmax - xmin` or `ymax - ymin`.

I simply defined `xmin` and `ymin` to 0 when there are no vertices.

With this change the output of `view(Graph())` is a pdf of dimensions 0x0.
----
New commits:


---

Comment by @jfraymond created at 2019-02-06 21:29:49

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-02-06 23:58:39

Can you add a doctest showing this passes (corner cases like this are really good to have as doctests IMO)? Also, you will need to add your (real) name to the authors field.


---

Comment by git created at 2019-02-07 11:42:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @jfraymond created at 2019-02-07 11:43:54

Done!


---

Comment by tscrim created at 2019-02-07 14:17:05

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-02-07 14:17:05

Thank you.


---

Comment by vbraun created at 2019-02-08 12:35:55

Resolution: fixed
