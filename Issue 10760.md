# Issue 10760: Make numpy support SAGE_SPKG_INSTALL_DOCS

archive/issues_010760.json:
```json
{
    "body": "Assignee: tbd\n\nThis ticket implements #10823 for numpy.  New spkg at http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)\n\nIssue created by migration from https://trac.sagemath.org/ticket/10826\n\n",
    "created_at": "2011-02-23T01:54:25Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "Make numpy support SAGE_SPKG_INSTALL_DOCS",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10760",
    "user": "jason"
}
```
Assignee: tbd

This ticket implements #10823 for numpy.  New spkg at http://sage.math.washington.edu/home/jason/numpy-1.5.1.p0.spkg (depends on #10792)

Issue created by migration from https://trac.sagemath.org/ticket/10826





---

archive/issue_comments_113756.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-02-23T01:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113756",
    "user": "jason"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_113757.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-03-01T15:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113757",
    "user": "drkirkby"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_113758.json:
```json
{
    "body": "See comments on #10828",
    "created_at": "2011-03-01T15:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113758",
    "user": "drkirkby"
}
```

See comments on #10828



---

archive/issue_comments_113759.json:
```json
{
    "body": "FYI Only---already applied to spkg.",
    "created_at": "2011-03-01T19:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113759",
    "user": "jason"
}
```

FYI Only---already applied to spkg.



---

archive/issue_comments_113760.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-01T19:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113760",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_113761.json:
```json
{
    "body": "Attachment [10826.patch](tarball://root/attachments/some-uuid/ticket10826/10826.patch) by jason created at 2011-03-01 19:14:21",
    "created_at": "2011-03-01T19:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113761",
    "user": "jason"
}
```

Attachment [10826.patch](tarball://root/attachments/some-uuid/ticket10826/10826.patch) by jason created at 2011-03-01 19:14:21



---

archive/issue_comments_113762.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-03-02T01:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113762",
    "user": "drkirkby"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_113763.json:
```json
{
    "body": "See my comments on #10828 \nI'm not saying this needs work, as it might not do, but if its anything like the matplotlib case, a lot of unnecessary files get copied. \n\nWe should clarify this before marking this for review.\n\nDave",
    "created_at": "2011-03-02T01:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113763",
    "user": "drkirkby"
}
```

See my comments on #10828 
I'm not saying this needs work, as it might not do, but if its anything like the matplotlib case, a lot of unnecessary files get copied. 

We should clarify this before marking this for review.

Dave



---

archive/issue_comments_113764.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-03-02T03:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113764",
    "user": "jason"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_113765.json:
```json
{
    "body": "The numpy docs that are copied contain just the standalone built files, not the full doc source directory.",
    "created_at": "2011-03-02T03:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113765",
    "user": "jason"
}
```

The numpy docs that are copied contain just the standalone built files, not the full doc source directory.



---

archive/issue_comments_113766.json:
```json
{
    "body": "I'm surprised there's a data file objects.inv, but overall it looks fine.\n\nDave",
    "created_at": "2011-03-02T05:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113766",
    "user": "drkirkby"
}
```

I'm surprised there's a data file objects.inv, but overall it looks fine.

Dave



---

archive/issue_comments_113767.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-02T05:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113767",
    "user": "drkirkby"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113768.json:
```json
{
    "body": "According to http://sphinx.pocoo.org/ext/intersphinx.html, that file helps Sphinx provide interlinking between documentation.  I think you're probably right that it isn't strictly necessary, but I'll bet there is a way to provide interlinking between Sage's, Scipy's, and numpy's documentation if we have that file (as a future project).",
    "created_at": "2011-03-02T06:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113768",
    "user": "jason"
}
```

According to http://sphinx.pocoo.org/ext/intersphinx.html, that file helps Sphinx provide interlinking between documentation.  I think you're probably right that it isn't strictly necessary, but I'll bet there is a way to provide interlinking between Sage's, Scipy's, and numpy's documentation if we have that file (as a future project).



---

archive/issue_comments_113769.json:
```json
{
    "body": "Why is the milestone now a \"sage-feature\"? Is there any reason it can't go into 4.7, given it has a positive review? \n\nDave",
    "created_at": "2011-03-07T00:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113769",
    "user": "drkirkby"
}
```

Why is the milestone now a "sage-feature"? Is there any reason it can't go into 4.7, given it has a positive review? 

Dave



---

archive/issue_comments_113770.json:
```json
{
    "body": "I use sage-feature as a placeholder for tickets with positive review which can't or won't be merged.  This ticket depends on #10792 which does not have positive review, so it can't be merged yet.  Sorry, I should have mentioned this.",
    "created_at": "2011-03-07T10:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113770",
    "user": "jdemeyer"
}
```

I use sage-feature as a placeholder for tickets with positive review which can't or won't be merged.  This ticket depends on #10792 which does not have positive review, so it can't be merged yet.  Sorry, I should have mentioned this.



---

archive/issue_comments_113771.json:
```json
{
    "body": "Replying to [comment:11 jdemeyer]:\n> I use sage-feature as a placeholder for tickets with positive review which can't or won't be merged.  This ticket depends on #10792 which does not have positive review, so it can't be merged yet.  Sorry, I should have mentioned this.\n\nIf one click' on sage-feature, one gets *This is the \"big feature\" milestone. Tickets assigned here should have somebody responsible for the issue. Once a feature is ready to go in please retag the ticket to the next appropriate milestone and attach a patch/bundle/link to an spkg.*\n\nThe above description of \"sage-feature\" does not match the situation on here. Perhaps a new milestone should be created, specifically to address the case of tickets with positive review, but depending on other tickets. \n\nDave",
    "created_at": "2011-03-07T11:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113771",
    "user": "drkirkby"
}
```

Replying to [comment:11 jdemeyer]:
> I use sage-feature as a placeholder for tickets with positive review which can't or won't be merged.  This ticket depends on #10792 which does not have positive review, so it can't be merged yet.  Sorry, I should have mentioned this.

If one click' on sage-feature, one gets *This is the "big feature" milestone. Tickets assigned here should have somebody responsible for the issue. Once a feature is ready to go in please retag the ticket to the next appropriate milestone and attach a patch/bundle/link to an spkg.*

The above description of "sage-feature" does not match the situation on here. Perhaps a new milestone should be created, specifically to address the case of tickets with positive review, but depending on other tickets. 

Dave



---

archive/issue_comments_113772.json:
```json
{
    "body": "Or in the longer term, maybe we should install a trac dependency tracker.  For example, something like this: \n\nhttp://trac-hacks.org/wiki/MasterTicketsPlugin\n\nor this\n\nhttp://trac-hacks.org/wiki/TracDependencyPlugin",
    "created_at": "2011-03-07T11:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113772",
    "user": "jason"
}
```

Or in the longer term, maybe we should install a trac dependency tracker.  For example, something like this: 

http://trac-hacks.org/wiki/MasterTicketsPlugin

or this

http://trac-hacks.org/wiki/TracDependencyPlugin



---

archive/issue_comments_113773.json:
```json
{
    "body": "#10792 now has positive review.",
    "created_at": "2011-03-18T13:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113773",
    "user": "kcrisman"
}
```

#10792 now has positive review.



---

archive/issue_comments_113774.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-18T19:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113774",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_113775.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2011-04-13T07:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113775",
    "user": "jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_113776.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2011-04-13T07:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113776",
    "user": "jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_comments_113777.json:
```json
{
    "body": "Dan Drake wrote on sage-devel:\n\nHrm. There is a problem with numpy when SAGE_SPKG_INSTALL_DOCS is set.\nHere's the relevant part of the log:\n\n\n```\n    make[2]: Entering directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'\n    mkdir -p build\n    touch build/generate-stamp\n    mkdir -p build/html build/doctrees\n    LANG=C sphinx-build -b html -d build/doctrees   source build/html \n    /bin/sh: sphinx-build: not found\n    make[2]: *** [html] Error 127\n    make[2]: Leaving directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'\n    Error building numpy docs.\n```\n\n\nThis is a fresh build from source. It looks like we need to alter the\nbuild dependencies to get Sphinx built early. Or perhaps the spkg\ninstallation script could check to see if the INSTALL_DOCS variable is\nset, and if so, check that Sphinx is built? \n\nThe tricky thing here seems to be that the build deps are different if \nSAGE_SPKG_INSTALL_DOCS is set.\n\nI installed the Sphinx spkg and restarted the build, but now I get:\n\n\n```\n    make[2]: Entering directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'\n    mkdir -p build\n    touch build/generate-stamp\n    mkdir -p build/html build/doctrees\n    LANG=C sphinx-build -b html -d build/doctrees   source build/html \n    Traceback (most recent call last):\n      File \"/home/drake/s/sage-4.7.alpha4/local/bin/sphinx-build\", line 6, in <module>\n        import sage.all\n    ImportError: No module named sage.all\n    make[2]: *** [html] Error 1\n    make[2]: Leaving directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'\n    Error building numpy docs.\n```\n\n \nYikes. Do we need the Sage library before we can build any Sphinx\ndocuments? Do we need to build documents *after* the usual build process\nis done?",
    "created_at": "2011-04-13T07:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113777",
    "user": "jdemeyer"
}
```

Dan Drake wrote on sage-devel:

Hrm. There is a problem with numpy when SAGE_SPKG_INSTALL_DOCS is set.
Here's the relevant part of the log:


```
    make[2]: Entering directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'
    mkdir -p build
    touch build/generate-stamp
    mkdir -p build/html build/doctrees
    LANG=C sphinx-build -b html -d build/doctrees   source build/html 
    /bin/sh: sphinx-build: not found
    make[2]: *** [html] Error 127
    make[2]: Leaving directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'
    Error building numpy docs.
```


This is a fresh build from source. It looks like we need to alter the
build dependencies to get Sphinx built early. Or perhaps the spkg
installation script could check to see if the INSTALL_DOCS variable is
set, and if so, check that Sphinx is built? 

The tricky thing here seems to be that the build deps are different if 
SAGE_SPKG_INSTALL_DOCS is set.

I installed the Sphinx spkg and restarted the build, but now I get:


```
    make[2]: Entering directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'
    mkdir -p build
    touch build/generate-stamp
    mkdir -p build/html build/doctrees
    LANG=C sphinx-build -b html -d build/doctrees   source build/html 
    Traceback (most recent call last):
      File "/home/drake/s/sage-4.7.alpha4/local/bin/sphinx-build", line 6, in <module>
        import sage.all
    ImportError: No module named sage.all
    make[2]: *** [html] Error 1
    make[2]: Leaving directory `/home/drake/s/sage-4.7.alpha4/spkg/build/numpy-1.5.1.p0/src/doc'
    Error building numpy docs.
```

 
Yikes. Do we need the Sage library before we can build any Sphinx
documents? Do we need to build documents *after* the usual build process
is done?



---

archive/issue_comments_113778.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-04-13T07:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113778",
    "user": "jdemeyer"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_113779.json:
```json
{
    "body": "See #11197 for bulding docs after the sage build",
    "created_at": "2011-04-14T13:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113779",
    "user": "jason"
}
```

See #11197 for bulding docs after the sage build



---

archive/issue_comments_113780.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd32\".",
    "created_at": "2011-08-24T23:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113780",
    "user": "was"
}
```

Changing keywords from "" to "sd32".



---

archive/issue_comments_113781.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-02T01:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113781",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_113782.json:
```json
{
    "body": "outdated, should close",
    "created_at": "2021-12-02T01:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113782",
    "user": "mkoeppe"
}
```

outdated, should close



---

archive/issue_comments_113783.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-03T17:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113783",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_113784.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-12-03T18:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10760#issuecomment-113784",
    "user": "mkoeppe"
}
```

Resolution: invalid
