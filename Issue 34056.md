# Issue 34056: rubiks: Work around build failure with XCode

Issue created by migration from https://trac.sagemath.org/ticket/34293

Original creator: mkoeppe

Original creation time: 2022-08-06 19:02:11

CC:  jhpalmieri

On Apple clang version 13.1.6 (clang-1316.0.21.2.5), building `g++ -std=gnu++11 -g -O2  -c mcube.cpp` appears to hang forever.

We work around this by reducing the optimization level on macOS.



---

Comment by mkoeppe created at 2022-08-06 19:06:58

New commits:


---

Comment by mkoeppe created at 2022-08-06 19:06:58

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-08-06 20:38:56

Thank you, this works for me. A vaguely related question: after installing `rubiks`, if I do `./sage -t src/sage/groups/perm_gps/cubegroup.py`, then it runs tests marked `optional - rubiks`, but it says `Features detected for doctesting: <blank>` at the end. The appropriate "Feature" says that rubiks is present. Why doesn't it list `rubiks` among the features?


---

Comment by jhpalmieri created at 2022-08-06 20:38:56

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-08-06 20:46:44

When `rubiks` is installed through the Sage distribution, the Sage doctester sees the installation record in `local/lib/sage/installed/` and adds rubiks to the optional tags. It does not run the Feature test.


---

Comment by mkoeppe created at 2022-08-06 20:48:12

See ticket:33823#comment:22 for a more detailed explanation


---

Comment by mkoeppe created at 2022-08-07 23:54:46

Changing priority from major to blocker.


---

Comment by vbraun created at 2022-08-29 11:24:51

Resolution: fixed
