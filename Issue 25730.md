# Issue 25730: Optimize is_constructible_by_doublings

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2018-07-29 08:52:02

CC:  chapoton tscrim

(TBD after currently waiting tickets are merged to `hasse_diagram.py`.)

A lattice can be built from lower pseudo-intervals iff `|Ji(L)| = |Ji (Con L)|`. But we can not have `|Ji(L)| < |Ji (Con L)|`. Hence we can stop when we found two principal congruences to be the same.


---

Comment by jmantysalo created at 2018-09-06 08:51:59

New commits:


---

Comment by jmantysalo created at 2018-09-06 08:51:59

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-09-06 09:26:04

Rather than using `SetPartition`, it would be better to use lower-level Python objects:

```diff
-S = SetPartition(H.congruence([This is the Trac macro *v, next* that was inherited from the migration called with arguments (H.neighbor_out_iterator)](https://trac.sagemath.org/wiki/WikiMacros#v, next-macro)))
+S = frozenset(map(frozenset, H.congruence([This is the Trac macro *v, next* that was inherited from the migration called with arguments (H.neighbor_out_iterator)](https://trac.sagemath.org/wiki/WikiMacros#v, next-macro))))
```

to avoid the overhead, including constructing the parent, all of this is in Python, and the checks of `SetPartition`.

Otherwise LGTM


---

Comment by git created at 2018-09-06 10:15:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2018-09-06 10:16:30

Replying to [comment:3 tscrim]:
> Rather than using `SetPartition`, it would be better to use lower-level Python objects:

True, this gave another 8 % more speed.


---

Comment by tscrim created at 2018-09-06 13:43:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-09-08 17:55:46

Resolution: fixed
