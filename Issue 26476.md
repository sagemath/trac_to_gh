# Issue 26476: Compile on OSX without /usr/include

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2018-11-18 10:28:57

CC:  dimpase slelievre

Starting with OSX 10.14, /usr/include is the latest victim in Apple's quest to store every file at a non-standard location. For now, the very intuitive (and irreversible)

```
open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg 
```

barfs various missing files into the filesystem but this is only a bandaid and will no longer be provided in the future. 

XCode clang has the new header location compiled in, so most software should not notice. What seems to go wrong is bootstrapping compilers, and gfortran doesn't compile any more. 


---

Comment by dimpase created at 2018-12-05 09:22:09

On #26286 I'm trying to see how feasible is to switch to building Sage under Homebrew. Obviously it's getting untenable to keep supporting OSX the way we do now.


---

Comment by vbraun created at 2018-12-05 15:59:49

I wouldn't want to rely on homebrew since it cannot be used without root (must install into /usr/local). 

IMHO a better choice is to rely on the conda toolchain https://conda.io/docs/user-guide/tasks/build-packages/compiler-tools.html. Just make a private conda env in Sage if no suitable compiler can be found.


---

Comment by dimpase created at 2018-12-05 16:13:31

not being able to be root makes things too complicated, in particular on a platform where 99.9% of users it's a personal machine where they can either be root or at least tell the sysadmin to chown /usr/local to them.

Homebrew is very popular, so we'd have to support it. I guess the difference with conda is not big, and doing both won't be a big burden. One has to start somewhere...


---

Comment by dimpase created at 2018-12-15 08:32:34

see also #26899, essentially a duplicate.


---

Comment by jhpalmieri created at 2018-12-15 18:11:29

Replying to [comment:5 dimpase]:
> see also #26899, essentially a duplicate.

You keep asserting this, but saying it many times does not make it true.


---

Comment by slelievre created at 2019-03-31 10:24:15

Changing keywords from "" to "macos".


---

Comment by slelievre created at 2019-03-31 10:24:15

Now that #26899 is in, we can decide whether it also fixes the issue here.


---

Comment by dimpase created at 2019-03-31 13:11:32

no, #26899 is just a band-aid.


---

Comment by embray created at 2019-06-14 14:54:19

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).


---

Comment by mkoeppe created at 2020-04-18 06:04:28

It seems that this ticket is outdated. Can it be closed?


---

Comment by jhpalmieri created at 2020-04-18 17:42:54

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2020-04-18 17:42:54

Yes, I think this has now been fixed.


---

Comment by dimpase created at 2020-04-19 01:38:51

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-04-29 10:58:07

Resolution: invalid
