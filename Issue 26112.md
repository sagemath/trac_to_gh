# Issue 26112: Memory leaks with matrix multiplication over GF(2)

archive/issues_026112.json:
```json
{
    "body": "Keywords: memory leaks\n\nSee https://ask.sagemath.org/question/43769/memory-leaks-with-matrix-multiplication-over-gf2/\n\nIssue created by migration from https://trac.sagemath.org/ticket/26349\n\n",
    "created_at": "2018-09-26T11:48:24Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Memory leaks with matrix multiplication over GF(2)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26112",
    "user": "https://github.com/antoine06"
}
```
Keywords: memory leaks

See https://ask.sagemath.org/question/43769/memory-leaks-with-matrix-multiplication-over-gf2/

Issue created by migration from https://trac.sagemath.org/ticket/26349





---

archive/issue_comments_367703.json:
```json
{
    "body": "It would seem the memory management on these objects is rather fundamentally broken.\nAlso with lines like `Y= M+M` or `Y=X+X` I am seeing similar leaking behaviour.",
    "created_at": "2018-09-28T13:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367703",
    "user": "https://github.com/nbruin"
}
```

It would seem the memory management on these objects is rather fundamentally broken.
Also with lines like `Y= M+M` or `Y=X+X` I am seeing similar leaking behaviour.



---

archive/issue_comments_367704.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-07T17:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367704",
    "user": "https://github.com/black-stones"
}
```

Changing status from new to needs_review.



---

archive/issue_events_065539.json:
```json
{
    "actor": "https://github.com/black-stones",
    "created_at": "2019-05-07T17:21:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65539"
}
```



---

archive/issue_comments_367705.json:
```json
{
    "body": "Tested this on Sage 8.7, macOS Mojave and Ubuntu 19.04, and the problem seems to be fixed.\n\nIf someone else could confirm this on another OS (the person on ask used debian buster) then we can probably close this as wontfix.",
    "created_at": "2019-05-07T17:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367705",
    "user": "https://github.com/black-stones"
}
```

Tested this on Sage 8.7, macOS Mojave and Ubuntu 19.04, and the problem seems to be fixed.

If someone else could confirm this on another OS (the person on ask used debian buster) then we can probably close this as wontfix.



---

archive/issue_comments_367706.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-08T08:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367706",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_367707.json:
```json
{
    "body": "Confirmed on Ubuntu 16.04 that I am not seeing a leak.",
    "created_at": "2019-05-08T08:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367707",
    "user": "https://github.com/tscrim"
}
```

Confirmed on Ubuntu 16.04 that I am not seeing a leak.



---

archive/issue_events_065540.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2019-05-13T17:51:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65540"
}
```



---

archive/issue_events_065541.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2019-05-13T17:51:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65541"
}
```



---

archive/issue_comments_367708.json:
```json
{
    "body": "I'm still seeing suspicious behaviour on sage 8.8.beta3 / python3, on Fedora:\n\nIf I set a vmem limit of 10 gigabyte and execute\n\n```\nn = 1000\nX = zero_vector(GF(2), n)\nM = zero_matrix(GF(2), n, n)\n\nfor _ in range(10000000):\n    Y = M + M\n```\nsage still crashes for me (whereas a small number of iterations does run without problem).",
    "created_at": "2019-05-13T17:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367708",
    "user": "https://github.com/nbruin"
}
```

I'm still seeing suspicious behaviour on sage 8.8.beta3 / python3, on Fedora:

If I set a vmem limit of 10 gigabyte and execute

```
n = 1000
X = zero_vector(GF(2), n)
M = zero_matrix(GF(2), n, n)

for _ in range(10000000):
    Y = M + M
```
sage still crashes for me (whereas a small number of iterations does run without problem).



---

archive/issue_comments_367709.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-05-13T17:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367709",
    "user": "https://github.com/nbruin"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_events_065542.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65542"
}
```



---

archive/issue_events_065543.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65543"
}
```



---

archive/issue_comments_367710.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367710",
    "user": "https://github.com/embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_065544.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65544"
}
```



---

archive/issue_events_065545.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65545"
}
```



---

archive/issue_comments_367711.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367711",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_367712.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-25T16:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367712",
    "user": "https://github.com/sn-d"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_367713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-25T23:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367713",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_367714.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-04-25T23:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367714",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_events_065546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-02T21:58:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26112#event-65546"
}
```



---

archive/issue_comments_367715.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-02T21:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26112",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26112#issuecomment-367715",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
