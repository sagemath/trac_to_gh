# Issue 15711: DynkinDiagram with crossed nodes and labels

Issue created by migration from Trac.

Original creator: vittucek

Original creation time: 2014-03-15 22:17:49

CC:  nthiery bump

This patch adds set_crossed_nodes and set_node_labels methods to (non-affine) Dynkin Diagrams and modifies the _latex_dynkin_diagram (currently only in type A) so the data are actually used by latex.

This convenient notation is used quite often in certain subbranch of differential geometry, see e.g. http://arxiv.org/abs/1303.1307

Moreover, there are two small bugfixes:

 1. Documentation is wrong about our convention for arrows in Dynkin diagrams.
 1. Dynkin diagrams for D and E series contain a special character in the node name of tikzpicture which TeX doesn't like.


---

Comment by git created at 2014-03-16 00:57:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-03-16 01:01:55

I believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).

However I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:

```
if x is None:
    pass

if x is not None:
    pass
```


I'll check against Kac tonight. Dan and Nicolas might have some more comments as well.

Best,

Travis
----
Last 10 new commits:


---

Comment by nthiery created at 2014-03-16 06:59:42

Hi Vít!

Thanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?

Cheers,
                                      Nicolas


---

Comment by vittucek created at 2014-03-16 10:15:23

Replying to [comment:4 tscrim]:
> I believe it is useful to have the ability to cross out particular nodes for Dynkin diagrams (I believe the same/similar convention is used for Lie superalgebras to denote even/odd indices).
> 

I'm glad to hear that.

>
> However I think the `node_label` is redundant to the `label` and you are assuming your indexing set is `1, 2, ..., n`, often which it is not. Similarly, I'm planning to make Dynkin diagrams more immutable (#15739), so I'd rather have it return a new `DynkinDiagram` when changing the crossed out nodes. One last point from a quick look-through, for comparisons with `None` you should do:
> {{{
> if x is None:
>     pass
> 
> if x is not None:
>     pass
> }}}
> 

The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?

As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?

>
> I'll check against Kac tonight. Dan and Nicolas might have some more comments as well.
> 
> Best,

> Travis


---

Comment by vittucek created at 2014-03-16 10:17:54

Replying to [comment:6 nthiery]:
>     Hi Vít!
> 
> Thanks for your work on this. I agree with Travis. Furthermore the current implementation introduces quite some duplication, inside the type-specific latex methods and inbetween them. I guess this duplication could be avoided by factoring out a method, say `_latex_node(node, x,y)` that would handle the writing of the latex string for the node (label, crossing out, ...), and then make the type-specific latex methods use it. What do you think?
> 
> Cheers,
>                                       Nicolas

The duplication was always there. I just made it more apparent. ;) I myself thought about creating such a method when I was coding type E. I'll make that change now.


---

Comment by git created at 2014-03-16 13:41:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-03-16 16:12:03

Replying to [comment:7 vittucek]:
> The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?
> 
> As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?

If you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as

```python
def relabel(self, relabeling):
    return DynkinDiagram(self._cartan_type.relabel(relabeling))
```

This would result in:

```
sage: D = DynkinDiagram(['A',4,1])
sage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])
sage: DL
2
O-----------+
O---O---O---O
-1   -2   -3   4
A4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}
sage: latex(_)
\begin{tikzpicture}[scale=0.5]
\draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \text{ relabelled by } \left\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\right\}$};
\draw (0 cm,0) -- (6 cm,0);
\draw (0 cm,0) -- (3.0 cm, 1.2 cm);
\draw (3.0 cm, 1.2 cm) -- (6 cm, 0);
\draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};
\draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};
\draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};
\draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};
\draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};
\end{tikzpicture}
```

I agree that we should add the following semantic to `CartanType`:

```
sage: CartanType(['A',2], labels=[-1,-2])
```

(or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.
|           |
|           |
I feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?

Furthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).

Thanks for your work on this,

Travis


---

Comment by vittucek created at 2014-03-16 18:19:11

Replying to [comment:10 tscrim]:
> Replying to [comment:7 vittucek]:
> > The labels which are implemented so far are intended for people who doesn't want to use Bourbaki convention. I think, this feature is not very well documented. My labels are purely a decoration of nodes, which can be used i.e. to denote a homogeneous vector bundle over $G/P$. So I guess the correct thing to do here is to change `node_labels[i]` to `node_labels[label(i)]`, right?
> > 
> > As for immutability issue, will it be OK, if I just add crossed_nodes and node_labels to the constructor and get rid of the setters?
> 
> If you feel the `label` is not well documented, then you should document it better. However the best thing to do would be to override the Dynkin diagram's relabel as
> {{{#!python
> def relabel(self, relabeling):
>     return DynkinDiagram(self._cartan_type.relabel(relabeling))
> }}}
> This would result in:
> {{{
> sage: D = DynkinDiagram(['A',4,1])
> sage: DL = DynkinDiagram(D._cartan_type.relabel([2,-1,-2,-3,4])) # This would be D.relabel([2,-1,-2,-3,4])
> sage: DL
> 2
> O-----------+
> |           |
> |           |
> O---O---O---O
> -1   -2   -3   4
> A4~ relabelled by {0: 2, 1: -1, 2: -2, 3: -3, 4: 4}
> sage: latex(_)
> \begin{tikzpicture}[scale=0.5]
> \draw (-1,0) node[anchor=east] {$A_{4}^{(1)} \text{ relabelled by } \left\{0 : 2, 1 : -1, 2 : -2, 3 : -3, 4 : 4\right\}$};
> \draw (0 cm,0) -- (6 cm,0);
> \draw (0 cm,0) -- (3.0 cm, 1.2 cm);
> \draw (3.0 cm, 1.2 cm) -- (6 cm, 0);
> \draw[fill=white] (0 cm, 0) circle (.25cm) node[below=4pt]{$-1$};
> \draw[fill=white] (2 cm, 0) circle (.25cm) node[below=4pt]{$-2$};
> \draw[fill=white] (4 cm, 0) circle (.25cm) node[below=4pt]{$-3$};
> \draw[fill=white] (6 cm, 0) circle (.25cm) node[below=4pt]{$4$};
> \draw[fill=white] (3.0 cm, 1.2 cm) circle (.25cm) node[anchor=south east]{$2$};
> \end{tikzpicture}
> }}}
> I agree that we should add the following semantic to `CartanType`:
> {{{
> sage: CartanType(['A',2], labels=[-1,-2])
> }}}
> (or perhaps `label` or `labeling` or...) and for `crossed_nodes`. Yet we should also have an additional method which allows us to set the crossed nodes.

There are two problems. First that I do not understand current labeling mechanism properly (code nor use cases -- does anybode use `label` at all?) and second that the semantics here are really different. My `node_labels` represent some other object that has a priori nothing to do with how we label the basis of our Cartan algebra. In reality these `node_labels` denote a highest weight of the Levi part of a standard parabolic subalgebra and thus it should really be a mapping that assigns natural numbers to labels. So perhaps `node_labels` should really be a dictionary with keys `label(i) for i in self.index_set()`  What about this?


```python
def set_node_labels(self, node_labels):
    if isinstance(node_labels, list):
        self.node_labels = {i : node_labels[label(i)-1] for i in self.index_set()}
    else:
         self.node_labels = node_labels
```


> 
> I feel like we should add `type_crossed.py` which keeps/prints this data and uses the same mechanic that the relabeled Cartan types use. Nicolas, do you agree?

As with `label` I am not sure what is the use case here. What is wrong with CartanType having labels, node_labels and crossed out nodes as instance variables?

> 
> Furthermore, I don't like the current state of your printing method. Your iteration of the string is wrong because your assuming your labeling is nice (i.e. `[0, 1, ..., k]`). However that is somewhat moot because I think you should only have one method for printing the individual nodes, as per Nicolas' suggestion, because it is overkill (it's basically just a for loop).

Did you look at my last commit? (http://git.sagemath.org/sage.git/commit/?id=454c0ac306ca5ab92951fb72099fd8ce94985785)

> 
> Thanks for your work on this,

> Travis

Thanks for feedback. ;)


---

Comment by git created at 2014-03-19 12:41:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vittucek created at 2014-03-19 12:43:06

Replying to [comment:12 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[2233007](http://git.sagemath.org/sage.git/commit/?id=2233007f07555e90b2976ab840061bf74f8b2e4a)||`BUGFIX: latex() of affine types work again`||

I don't understand why that waning gets printed twice.


---

Comment by git created at 2014-03-25 21:42:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vittucek created at 2014-03-25 22:07:50

OK. I've fixed some bugs and now the patch doesn't cause any breakage and works in fulfilling my needs. 

There is still some work to be done. Namely:

1. Modify `repr` so that it prints also node_labels and crossed nodes. (I don't see a point in doing ascii graphics; two simple prints after the current output should do just fine.)
2. Add doctests illustrating the new funcionality.
3. Get rid of setters and move thiese features  to `__init__` in order to help`DynkinDiagram` become immutable.

Is there an interest in getting this patch into sage? Are there some remaining issues that I missed?


---

Comment by tscrim created at 2014-03-26 02:52:47

Yes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).

I'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.

EDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.


---

Comment by vittucek created at 2014-03-26 12:36:54

Replying to [comment:16 tscrim]:
> Yes there is, but finals week trumps Sage work. However from looking at the code, I think there is significant issues when dealing with non-standard indexing sets (which we should support).
> 

Would it help to refactor node_labels` and `crossed_nodes` into dictionaries as I suggested in comment 11?

> I'm going to cannibalize your branch into a new one where I'm going to create a new class in `type_marked.py` for types with marked nodes and add a proper relabel to `DynkinDiagram`. I should have it done in an hour or so.
> 
> EDIT - So basically we want relabellings and markings to act as decorator classes (as per the design pattern). This will take some (moderate) refactoring, but it will simplify the resulting code and make it easier for similar future additions.

Great. Thank you. I am just not sure how do we accomplish crossed nodes and weight labels at the same time. Multiple inheritance? 

By the way, last week I've stumbled upon some articles about nilpotent orbits where they use Dynkin diagrams with labels and call them Weighted Dynking diagrams. So maybe use `WeightedCartanType` and `WeightedDynkinDiagram` for the guys with labels and `MarkedCartanType` & `MarkedDynkinDiagram` for crossed nodes? I can imagine that someone would want to use different markings than crosses which would amount to another round of digging into the TikZ documentation and parameter tweaking in all those `_latex_...` methods.


---

Comment by tscrim created at 2014-03-26 23:02:39

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-03-26 23:02:39

Okay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.

I've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as

```
dual <- relabelled <- marked
```

where the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.
----
New commits:


---

Comment by vittucek created at 2014-03-31 20:32:31

Great!

Replying to [comment:18 tscrim]:
> Okay, done with the refactor and creating the `type_marked`. I couldn't get your latex to work, so I just implemented a custom help for the marks (cross outs). It's now setup so it's easy enough to add additional functionality if anyone wants it.
> 

Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 

You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).

> I've also done some fixing up of the way we print the Dynkin diagram ascii art, so with labels up to length 3 (almost 4 really), it looks nice. I refactored `type_dual` and `type_relabeled` to inherit from a common class `CartanType_decorator` which acts as a decorator class and redirects most methods to the base Cartan type. I've set the (implicit) order of the decorators as
> {{{
> dual <- relabelled <- marked
> }}}
> where the first one was what was there previously. I also gave a `relabel` method to Dynkin diagrams and Cartan matrices. I think that's all, but I might be forgetting something. If we're happy with my changes, then it's a positive review.

Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)

I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?


---

Comment by tscrim created at 2014-04-04 15:35:30

Replying to [comment:19 vittucek]:
> Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 

Yes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).

> You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).

I'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).

> Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)
>
> I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?

IMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.


---

Comment by vittucek created at 2014-04-04 16:15:27

Replying to [comment:20 tscrim]:
> Replying to [comment:19 vittucek]:
> > Is this feature discoverable by a user? Shouldn't we add some examples to `CartanType`'s docstring? 
> 
> Yes via `marked_nodes`. However we should add something to the doc of `CartanType` (I thought I did, but I guess not).

While you are at it, there is a small typo in `type_marked.py`: substitute `latex_relabel` by `latex_marked` in in the docstring.

> 
> > You've missed the bugfix for docstring regarding our convention for Dynkin diagrams (see commit 74c6d23eb28fd192b70e2219030d6ad60fcb9f0f).
> 
> I'm not convinced yet that it is incorrect, much less that your proposal makes anything better. I will look at it more closely and think about it today/tomorrow (unless Dan or Nicolas, you have an opinion on this?).

Most texts on Lie algebras I've encountered define the arrows by saying that they point from the shorter vector to the longer one (or vice versa). Dynkin diagrams are first and foremost convenient graphical representation (don't you agree?) and as such the "direction of the arrow" should naturally mean the direction in the graphical representation and not the way how we define it using Cartan matrix. I for one was quite confused by the current docs and had to dig up Bourbaki to check it.

> 
> > Would it be possible to add one more layer for weighted Cartan types? I mean my original motivation for this patch was to be able to produce diagrams for representation of homogeneous vector bundles which I can't really do now. :)
> >
> > I'd add this feature myself, but I am still struggling with understanding the current code. Is there some documentation for programmers or  design documents that would help me?
> 
> IMO we should do this in a follow-up ticket as this one has a lot going on to begin with. However it should be easy enough to do by adding a class/file similar to `type_marked.py` and another method to the base `CartanType_abstract` class.

OK. I would have already tried that if it weren't for build failures that the rebasing on beta5 brought me. ;) As soon as I will get sage to build again I'm gonna give it a shot.


---

Comment by git created at 2014-04-09 01:44:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2014-05-16 06:07:05

Merge conflict.


---

Comment by rws created at 2014-05-16 06:07:05

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-06-16 17:43:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-06-16 17:46:37

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-06-16 17:46:37

Hey Vit,

Sorry for falling behind on this.

For the Dynkin diagram documentation, I reread it and agree that the word _convention_ could be misleading. I've tweaked that sentence, so how do you feel about it now?

I've also fixed the merge conflicts and the typo. If everything is okay, then we can set this to positive review (as a cross review) and get onto the followups.

Best,

Travis


---

Comment by tscrim created at 2014-07-07 23:43:39

**Ping**


---

Comment by tscrim created at 2014-07-27 04:33:06

Since there's no response from Vit -- Dan or Nicolas (or someone else), could you do a final look over of my last commit da0fc02? It's the only thing we need in order to set this to positive review.


---

Comment by vittucek created at 2014-07-27 09:28:51

Hi,
 sorry, I was on vacation. 

The sentence is much better now, but I think it would not harm to add another one ensuring the user that the (graphical representation of the) Dynkin diagram itself is the same as in Bourbaki. But maybe it's superfluous... Does Kac have the same diagrams as Bourbaki? If so, then adding more explanations to the docstring might actually lead to more confusion. :)


---

Comment by tscrim created at 2014-07-27 22:11:32

AFAIK, the diagrams are all the same (the long roots point towards the short and `0---0---0=<=0` is type C<sub>4</sub>), it's just translating that into the Cartan matrix that the convention can differ, which is what that paragraph is about. So I don't think we need to add anything more.


---

Comment by vittucek created at 2014-07-28 15:59:28

Great. Then I think that we can give this patch a positive review. I'm not sure what's the proper protocol here, so I'll leave that up to you. I've took the liberty and changed the name of the patch and its description.


---

Comment by tscrim created at 2014-07-28 16:57:40

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-07-28 16:57:40

All you'd need to do is set the ticket to positive review.


---

Comment by vbraun created at 2014-07-28 21:58:57

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-07-28 21:58:57

Various doctests fail...


---

Comment by git created at 2014-07-29 17:24:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-29 17:26:56

I'm taking care of this - the non-symmetric Macdonalds are strangely sensitive to the class heirarchy.


---

Comment by git created at 2014-07-29 17:52:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-29 17:56:13

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-07-29 17:56:13

Fixed - I had accidentally changed the behavior of `.type()` for dual types. I also merged in #16380 in order to speed up testing. I also fixed an issue with the ambient space for marked Cartan types and implemented the `basic_untwisted`. It needs another look-over.


---

Comment by jdemeyer created at 2014-10-01 08:44:07

I know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?

```
sage: CartanType(['H',3]).dual()
...
AssertionError: 
```

(note: I don't really care about this ticket, I just hate it when people abuse `assert`)


---

Comment by tscrim created at 2014-10-01 18:50:14

Replying to [comment:39 jdemeyer]:
> I know you didn't introduce this bug, but could you by chance fix this to raise a proper exception?
> {{{
> sage: CartanType(['H',3]).dual()
> ...
> AssertionError: 
> }}}
> (note: I don't really care about this ticket, I just hate it when people abuse `assert`)

I've created #17084 for this and will upload a branch there later today.


---

Comment by git created at 2014-11-06 02:58:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-11-06 03:01:08

Rebased. Could someone do the last little bit of review of commits 7ce8285 and 66ad2bb?


---

Comment by vittucek created at 2014-11-08 01:12:16

Thanks for keeping this branch alive!

I've tried to doctest this on cloud.sagemath.org and it behaves rather strangely. The parallel doctests (e.g. ./sage -tp 12 src/sage/combinat/root_system/) run just fine but when I try to doctest a single file such as ./sage -t src/sage/combinat/root_system/cartan_type.py it spews


```
7 items had failures:
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._ascii_art_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract._latex_draw_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_abstract.marked_nodes
   1 of   5 in sage.combinat.root_system.cartan_type.CartanType_affine._ascii_art_node
   1 of   4 in sage.combinat.root_system.cartan_type.CartanType_affine._latex_draw_node
   1 of   2 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.i
   2 of   3 in sage.combinat.root_system.cartan_type.CartanType_crystallographic.index_set_bipartition
    [432 tests, 8 failures, 1.89 s]
```

with errors such as


```
    AttributeError: 'CartanType_with_superclass' object has no attribute '_ascii_art_node'
```

I guess I must be doing something wrong.


---

Comment by tscrim created at 2014-11-08 01:42:29

Hmmm...that's very strange. I tested the single files on my machine and it works okay. Unfortunately I don't know enough about how SMC does things to be able to help (which might be based on your specific config). Even stranger is that I don't think I changed anything that would cause such a failure. Since it passes in parallel, I'm tempted to say it's based on your current setup, but let me see the full output from the test.


---

Comment by vittucek created at 2014-11-10 17:48:10

Actually, it seems I've just forgotten `./` in front of `sage`.  Sorry!


---

Comment by vittucek created at 2014-11-10 17:48:10

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-11-10 22:22:02

Thank you for your work on this!


---

Comment by vbraun created at 2014-11-14 21:01:33

Resolution: fixed
