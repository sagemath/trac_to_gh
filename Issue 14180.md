# Issue 14180: Support version number literals.

archive/issues_014180.json:
```json
{
    "body": "Assignee: @jasongrout\n\nCC:  @roed314\n\nThis can be done as we already have preparser hacks for real literals and numeric attributes. \n\nhttps://github.com/robertwb/sage/commits/versions\n\nIssue created by migration from https://trac.sagemath.org/ticket/14384\n\n",
    "created_at": "2013-03-30T00:17:42Z",
    "labels": [
        "misc",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Support version number literals.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14180",
    "user": "@robertwb"
}
```
Assignee: @jasongrout

CC:  @roed314

This can be done as we already have preparser hacks for real literals and numeric attributes. 

https://github.com/robertwb/sage/commits/versions

Issue created by migration from https://trac.sagemath.org/ticket/14384





---

archive/issue_comments_178223.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-30T05:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178223",
    "user": "@robertwb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178224.json:
```json
{
    "body": "Here is a doctest you can use:\n\n\n```\n\"\"\"\n    sage: 3 - 1 - 6\n    -4\n    sage: 3-1-6\n    3-1-6\n\"\"\"\n```\n\n\nAnyone who writes subtraction without spaces is a barbarian so this shouldn't cause any ambiguity.",
    "created_at": "2013-03-31T05:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178224",
    "user": "@kini"
}
```

Here is a doctest you can use:


```
"""
    sage: 3 - 1 - 6
    -4
    sage: 3-1-6
    3-1-6
"""
```


Anyone who writes subtraction without spaces is a barbarian so this shouldn't cause any ambiguity.



---

archive/issue_comments_178225.json:
```json
{
    "body": "> {{{\n> \"\"\"\n>     sage: 3 - 1 - 6\n>     -4\n>     sage: 3-1-6\n>     3-1-6\n> \"\"\"\n> }}}\n> \n> Anyone who writes subtraction without spaces is a barbarian so this shouldn't cause any ambiguity.\nI hope this is a joke at Leif's expense intended to point out that Singular's scheme would be hard to support... but the internet is not a subtle medium :(",
    "created_at": "2013-04-02T17:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178225",
    "user": "@kcrisman"
}
```

> {{{
> """
>     sage: 3 - 1 - 6
>     -4
>     sage: 3-1-6
>     3-1-6
> """
> }}}
> 
> Anyone who writes subtraction without spaces is a barbarian so this shouldn't cause any ambiguity.
I hope this is a joke at Leif's expense intended to point out that Singular's scheme would be hard to support... but the internet is not a subtle medium :(



---

archive/issue_comments_178226.json:
```json
{
    "body": "Well, it was certainly a joke, but I wouldn't say it was at Leif's expense since he was joking too :) (We were talking about this ticket on the IRC channel.) In fact, if I hadn't been in the room when Robert wrote his patch, I would have thought Robert was joking as well! :P",
    "created_at": "2013-04-02T17:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178226",
    "user": "@kini"
}
```

Well, it was certainly a joke, but I wouldn't say it was at Leif's expense since he was joking too :) (We were talking about this ticket on the IRC channel.) In fact, if I hadn't been in the room when Robert wrote his patch, I would have thought Robert was joking as well! :P



---

archive/issue_comments_178227.json:
```json
{
    "body": "\n```\n<_leif> btw, it's not April 1st yet -- not even down under\n<kini> david roe is probably waiting for april 1 before setting it to positive review :P\n<_leif> Changes (by leif):\n   * work_issues:  => Support Singular's versioning scheme as well\n (I didn't set it to \"needs work\" though.)\n Another enhancement:\n sage: #14323 in 5.9.beta2\n True\n```\n",
    "created_at": "2013-04-02T17:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178227",
    "user": "@nexttime"
}
```


```
<_leif> btw, it's not April 1st yet -- not even down under
<kini> david roe is probably waiting for april 1 before setting it to positive review :P
<_leif> Changes (by leif):
   * work_issues:  => Support Singular's versioning scheme as well
 (I didn't set it to "needs work" though.)
 Another enhancement:
 sage: #14323 in 5.9.beta2
 True
```




---

archive/issue_comments_178228.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-02T19:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178228",
    "user": "@roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178229.json:
```json
{
    "body": "Looks good to me.  I can't think of a good way to support Singular's system, so let's hold off on that for another ticket.",
    "created_at": "2013-04-02T19:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178229",
    "user": "@roed314"
}
```

Looks good to me.  I can't think of a good way to support Singular's system, so let's hold off on that for another ticket.



---

archive/issue_comments_178230.json:
```json
{
    "body": "We should probably only support Singular's system on April 1, so maybe we need to add a date check to the code? ;)\n\n(just kidding!)",
    "created_at": "2013-04-02T20:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178230",
    "user": "@jasongrout"
}
```

We should probably only support Singular's system on April 1, so maybe we need to add a date check to the code? ;)

(just kidding!)



---

archive/issue_comments_178231.json:
```json
{
    "body": "So we're seriously going to do this?\n\nSome comments:\n1. Move `class VersionNumber` somewhere else (probably `sage/misc/versionnumber.py` for lack of a better place)\n2. How can I get the raw patch for this commit from github?\n3. Error messages are going to be very confusing, try\n\n```\nsage: x = 4.5\nsage: x.denominator()\n```\n",
    "created_at": "2013-04-03T08:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178231",
    "user": "@jdemeyer"
}
```

So we're seriously going to do this?

Some comments:
1. Move `class VersionNumber` somewhere else (probably `sage/misc/versionnumber.py` for lack of a better place)
2. How can I get the raw patch for this commit from github?
3. Error messages are going to be very confusing, try

```
sage: x = 4.5
sage: x.denominator()
```




---

archive/issue_comments_178232.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-04-03T08:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178232",
    "user": "@jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_178233.json:
```json
{
    "body": "I have to admit I was actually thinking this whole ticket was a joke until Keshav clarified. B)\n\n(I really liked the type `sage.rings.real_mpfr.VersionNumber`. ;-) )",
    "created_at": "2013-04-03T10:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178233",
    "user": "@nexttime"
}
```

I have to admit I was actually thinking this whole ticket was a joke until Keshav clarified. B)

(I really liked the type `sage.rings.real_mpfr.VersionNumber`. ;-) )



---

archive/issue_comments_178234.json:
```json
{
    "body": "I thought the whole ticket was a joke too.  What's the rationale for doing this, other than \"we can\"?  I don't see a compelling reason for having version number literals.",
    "created_at": "2013-04-03T12:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178234",
    "user": "@jasongrout"
}
```

I thought the whole ticket was a joke too.  What's the rationale for doing this, other than "we can"?  I don't see a compelling reason for having version number literals.



---

archive/issue_comments_178235.json:
```json
{
    "body": "> I thought the whole ticket was a joke too. What's the rationale for doing this, other than \"we can\"? \nThank the Lord.",
    "created_at": "2013-04-03T12:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178235",
    "user": "@kcrisman"
}
```

> I thought the whole ticket was a joke too. What's the rationale for doing this, other than "we can"? 
Thank the Lord.



---

archive/issue_comments_178236.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-04-03T12:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178236",
    "user": "@kcrisman"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_178237.json:
```json
{
    "body": "Wait, now I'm really confused.  Does that conclusively settle it?",
    "created_at": "2013-04-03T13:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178237",
    "user": "@jasongrout"
}
```

Wait, now I'm really confused.  Does that conclusively settle it?



---

archive/issue_comments_178238.json:
```json
{
    "body": "Apparently you have a rather authoritative-sounding voice, Jason :P\n\nAs for the rationale for doing this, well, I can recall approximately the conversation which led to this patch:\n\n>Should we tag our releases as just bare numbers like 5.9 or should we put a v in front like v5.9?\n\n>Well, I think it should be just 5.9 since I'm going to type stuff like `vanilla(5.9)` into the Sage prompt and expect it to just work.\n\n>Is it that much trouble to write `vanilla('v5.9')`... wait, you're going to call `vanilla` with a *float*?\n\n>Yes! Why not?\n\n>Well then what about 4.7.2? That isn't a float...\n\n>True. But it could be an MPFR real! *hack hack*\n\n>!?\n\n>Behold, the first git-based trac ticket!\n\nBy the way, Jeroen, I noticed you semi-recently (8 months ago) merged a ticket by pulling a branch rather than applying a patch: #418. So while this might be the first git-based ticket, it's not the first pull request to the modern Sage codebase. Does this mean we could already be using a pull-request based model right now, for the Sage library at least? :)",
    "created_at": "2013-04-03T17:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178238",
    "user": "@kini"
}
```

Apparently you have a rather authoritative-sounding voice, Jason :P

As for the rationale for doing this, well, I can recall approximately the conversation which led to this patch:

>Should we tag our releases as just bare numbers like 5.9 or should we put a v in front like v5.9?

>Well, I think it should be just 5.9 since I'm going to type stuff like `vanilla(5.9)` into the Sage prompt and expect it to just work.

>Is it that much trouble to write `vanilla('v5.9')`... wait, you're going to call `vanilla` with a *float*?

>Yes! Why not?

>Well then what about 4.7.2? That isn't a float...

>True. But it could be an MPFR real! *hack hack*

>!?

>Behold, the first git-based trac ticket!

By the way, Jeroen, I noticed you semi-recently (8 months ago) merged a ticket by pulling a branch rather than applying a patch: #418. So while this might be the first git-based ticket, it's not the first pull request to the modern Sage codebase. Does this mean we could already be using a pull-request based model right now, for the Sage library at least? :)



---

archive/issue_comments_178239.json:
```json
{
    "body": "Replying to [comment:14 kini]:\n> Does this mean we could already be using a pull-request based model right now, for the Sage library at least? :)\nYes, but not using github :-)",
    "created_at": "2013-04-03T18:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178239",
    "user": "@jdemeyer"
}
```

Replying to [comment:14 kini]:
> Does this mean we could already be using a pull-request based model right now, for the Sage library at least? :)
Yes, but not using github :-)



---

archive/issue_comments_178240.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-04-03T18:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178240",
    "user": "@roed314"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_178241.json:
```json
{
    "body": "I don't think we should mark it as won't-fix yet.  Let's see what Robert says about Jeroen's suggestions first.",
    "created_at": "2013-04-03T18:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178241",
    "user": "@roed314"
}
```

I don't think we should mark it as won't-fix yet.  Let's see what Robert says about Jeroen's suggestions first.



---

archive/issue_comments_178242.json:
```json
{
    "body": "Replying to [comment:16 roed]:\n> I don't think we should mark it as won't-fix yet.  Let's see what Robert says about Jeroen's suggestions first.\n\nI don't think it makes sense to support software version numbers (i.e., literals of that type) as a \"native\" type in a CAS;  nobody will mind adding a *class* for versions, its constructor(s) taking a string (or probably also a float) argument, but this ticket is (currently) about the former.\n\nPrepending a \"v\" could perhaps be a compromise, avoiding trouble (i.e., ambiguities) with floating-point literals, but I personally wouldn't like it either.",
    "created_at": "2013-04-03T19:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178242",
    "user": "@nexttime"
}
```

Replying to [comment:16 roed]:
> I don't think we should mark it as won't-fix yet.  Let's see what Robert says about Jeroen's suggestions first.

I don't think it makes sense to support software version numbers (i.e., literals of that type) as a "native" type in a CAS;  nobody will mind adding a *class* for versions, its constructor(s) taking a string (or probably also a float) argument, but this ticket is (currently) about the former.

Prepending a "v" could perhaps be a compromise, avoiding trouble (i.e., ambiguities) with floating-point literals, but I personally wouldn't like it either.



---

archive/issue_comments_178243.json:
```json
{
    "body": "I have to say I got a little confused seeing something associated with mpfr that had alphabet characters in it too.\n\nPersonally, I think it's not worth the cost (confusion, yet another incompatibility, etc.) to introduce these to the preparser.",
    "created_at": "2013-04-03T21:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178243",
    "user": "@jasongrout"
}
```

I have to say I got a little confused seeing something associated with mpfr that had alphabet characters in it too.

Personally, I think it's not worth the cost (confusion, yet another incompatibility, etc.) to introduce these to the preparser.



---

archive/issue_comments_178244.json:
```json
{
    "body": "As much as I hate to be a spoilsport, I have to agree :)\n\nHowever, the modifications to preparser.py fix a bug and are worthwhile.",
    "created_at": "2013-04-03T21:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178244",
    "user": "@kini"
}
```

As much as I hate to be a spoilsport, I have to agree :)

However, the modifications to preparser.py fix a bug and are worthwhile.



---

archive/issue_comments_178245.json:
```json
{
    "body": "It started out as a joke, but then we realized we had enough hooks in the preparser to actually do such a crazy thing without bending the langauge. `x.denominator()` can be fixed, but I understand if this is too weird to go in. Otherwise, I'll move `VersionNumber` to misc and make a patch.",
    "created_at": "2013-04-06T05:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178245",
    "user": "@robertwb"
}
```

It started out as a joke, but then we realized we had enough hooks in the preparser to actually do such a crazy thing without bending the langauge. `x.denominator()` can be fixed, but I understand if this is too weird to go in. Otherwise, I'll move `VersionNumber` to misc and make a patch.



---

archive/issue_comments_178246.json:
```json
{
    "body": "Okay, here's my vote:\n\n-1 to going into standard Sage\n\n+1 to going into \"cool hacks you can do in Sage\"\n\n+1 to going into the Sage April Fools collection",
    "created_at": "2013-04-06T12:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178246",
    "user": "@jasongrout"
}
```

Okay, here's my vote:

-1 to going into standard Sage

+1 to going into "cool hacks you can do in Sage"

+1 to going into the Sage April Fools collection



---

archive/issue_comments_178247.json:
```json
{
    "body": "> -1 to going into standard Sage\nYes.\n> +1 to going into \"cool hacks you can do in Sage\"\nIf we ever move the useful constructions into the reference manual and get rid of the constructions thing, we could replace it with \"cool Sage hacks\".\n> +1 to going into the Sage April Fools collection\nOh, like the move to Lisp...",
    "created_at": "2013-04-06T14:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178247",
    "user": "@kcrisman"
}
```

> -1 to going into standard Sage
Yes.
> +1 to going into "cool hacks you can do in Sage"
If we ever move the useful constructions into the reference manual and get rid of the constructions thing, we could replace it with "cool Sage hacks".
> +1 to going into the Sage April Fools collection
Oh, like the move to Lisp...



---

archive/issue_comments_178248.json:
```json
{
    "body": "Replying to [comment:22 kcrisman]:\n> > -1 to going into standard Sage\n\nI'm +1 for going into standard Sage, but I don't feel strongly enough about it to argue.\n\n> > +1 to going into \"cool hacks you can do in Sage\"\n> If we ever move the useful constructions into the reference manual and get rid of the constructions thing, we could replace it with \"cool Sage hacks\".\n\nSure.\n\n> > +1 to going into the Sage April Fools collection\n> Oh, like the move to Lisp...\n\nI don't think this works as well as an April Fools e-mail, since it's not actually a very major change.  And we'd have to wait almost a year anyway.  ;-)",
    "created_at": "2013-04-06T21:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14180",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14180#issuecomment-178248",
    "user": "@roed314"
}
```

Replying to [comment:22 kcrisman]:
> > -1 to going into standard Sage

I'm +1 for going into standard Sage, but I don't feel strongly enough about it to argue.

> > +1 to going into "cool hacks you can do in Sage"
> If we ever move the useful constructions into the reference manual and get rid of the constructions thing, we could replace it with "cool Sage hacks".

Sure.

> > +1 to going into the Sage April Fools collection
> Oh, like the move to Lisp...

I don't think this works as well as an April Fools e-mail, since it's not actually a very major change.  And we'd have to wait almost a year anyway.  ;-)
