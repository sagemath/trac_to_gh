# Issue 28354: convert chain complexes from Macaulay2 to Sage

archive/issues_028354.json:
```json
{
    "body": "CC:  @saliola @dimpase @antonleykin\n\nKeywords: macaulay2, IMA Coding Sprint\n\nThis ticket implements conversion of chain complexes from Macaulay2 to Sage, for example:\n\n```\n            sage: R = ZZ['a,b,c']\n            sage: C = macaulay2(ideal(R.gens())).resolution()\n            sage: unicode_art(C.sage())\n                                   \u239b-b  0 -c\u239e     \u239b c\u239e\n                                   \u239c a -c  0\u239f     \u239c a\u239f\n                       (a b c)     \u239d 0  b  a\u23a0     \u239d-b\u23a0\n             0 \u27f5\u2500\u2500 C_0 \u27f5\u2500\u2500\u2500\u2500\u2500\u2500 C_1 \u27f5\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 C_2 \u27f5\u2500\u2500\u2500 C_3 \u27f5\u2500\u2500 0\n```\n\n\nThis ticket also fixes an issue where matrices of size 0\u00d7n failed to convert correctly.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28591\n\n",
    "created_at": "2019-10-11T00:08:58Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "convert chain complexes from Macaulay2 to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28354",
    "user": "@mwageringel"
}
```
CC:  @saliola @dimpase @antonleykin

Keywords: macaulay2, IMA Coding Sprint

This ticket implements conversion of chain complexes from Macaulay2 to Sage, for example:

```
            sage: R = ZZ['a,b,c']
            sage: C = macaulay2(ideal(R.gens())).resolution()
            sage: unicode_art(C.sage())
                                   ⎛-b  0 -c⎞     ⎛ c⎞
                                   ⎜ a -c  0⎟     ⎜ a⎟
                       (a b c)     ⎝ 0  b  a⎠     ⎝-b⎠
             0 ⟵── C_0 ⟵────── C_1 ⟵───────── C_2 ⟵─── C_3 ⟵── 0
```


This ticket also fixes an issue where matrices of size 0×n failed to convert correctly.

Issue created by migration from https://trac.sagemath.org/ticket/28591





---

archive/issue_comments_400393.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to interfaces: optional.",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400393",
    "user": "@mwageringel"
}
```

Changing component from PLEASE CHANGE to interfaces: optional.



---

archive/issue_comments_400394.json:
```json
{
    "body": "With this, we could add a method `resolution(algorithm=macaulay2)` to ideals.\n----\nNew commits:",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400394",
    "user": "@mwageringel"
}
```

With this, we could add a method `resolution(algorithm=macaulay2)` to ideals.
----
New commits:



---

archive/issue_comments_400395.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400395",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_400396.json:
```json
{
    "body": "you need to add the standard utf8 encoding line at the top of\n\nsrc/sage/interfaces/macaulay2.py\n\nnamely\n\n\n```\n# -*- coding: utf-8 -*-\n```\n",
    "created_at": "2019-10-11T19:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400396",
    "user": "@fchapoton"
}
```

you need to add the standard utf8 encoding line at the top of

src/sage/interfaces/macaulay2.py

namely


```
# -*- coding: utf-8 -*-
```




---

archive/issue_comments_400397.json:
```json
{
    "body": "and an optional tag is missing here:\n\n```\nsrc/sage/interfaces/macaulay2.py\", line 1554\n```\n",
    "created_at": "2019-10-14T14:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400397",
    "user": "@fchapoton"
}
```

and an optional tag is missing here:

```
src/sage/interfaces/macaulay2.py", line 1554
```




---

archive/issue_comments_400398.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-10-15T01:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400398",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_400399.json:
```json
{
    "body": "Thank you for catching that. It should be fixed now.",
    "created_at": "2019-10-15T01:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400399",
    "user": "@mwageringel"
}
```

Thank you for catching that. It should be fixed now.



---

archive/issue_comments_400400.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2019-10-15T19:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400400",
    "user": "@fchapoton"
}
```

ok, let it be



---

archive/issue_comments_400401.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-15T19:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400401",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400402.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2019-10-15T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400402",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_400403.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-15T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400403",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400404.json:
```json
{
    "body": "I guess this got to wait till next beta.",
    "created_at": "2019-10-15T23:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400404",
    "user": "@dimpase"
}
```

I guess this got to wait till next beta.



---

archive/issue_comments_400405.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-22T08:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400405",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400406.json:
```json
{
    "body": "rebased - it was conflicting with M2 Graphs interface\n----\nNew commits:",
    "created_at": "2019-10-22T08:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400406",
    "user": "@dimpase"
}
```

rebased - it was conflicting with M2 Graphs interface
----
New commits:



---

archive/issue_comments_400407.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-22T17:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400407",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400408.json:
```json
{
    "body": "back to the bots",
    "created_at": "2019-10-22T17:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400408",
    "user": "@dimpase"
}
```

back to the bots



---

archive/issue_comments_400409.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-22T17:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400409",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400410.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-26T22:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400410",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400411.json:
```json
{
    "body": "The pdf docs don't build\n\n```\n[docpdf] ! Package inputenc Error: Unicode character \u27f5 (U+27F5)\n[docpdf] (inputenc)                not set up for use with LaTeX.\n[docpdf] \n[docpdf] See the inputenc package documentation for explanation.\n[docpdf] Type  H <return>  for immediate help.\n[docpdf]  ...                                              \n[docpdf]                                                   \n[docpdf] l.8925 ...}2 \u27f5\u2500\u2500\u2500 C\\PYGZus{}3 \u27f5\u2500\u2500 0}\n[docpdf]                                                   \n[docpdf] ? \n[docpdf] ! Emergency stop.\n```\n",
    "created_at": "2019-10-26T22:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400411",
    "user": "@vbraun"
}
```

The pdf docs don't build

```
[docpdf] ! Package inputenc Error: Unicode character ⟵ (U+27F5)
[docpdf] (inputenc)                not set up for use with LaTeX.
[docpdf] 
[docpdf] See the inputenc package documentation for explanation.
[docpdf] Type  H <return>  for immediate help.
[docpdf]  ...                                              
[docpdf]                                                   
[docpdf] l.8925 ...}2 ⟵─── C\PYGZus{}3 ⟵── 0}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```




---

archive/issue_comments_400412.json:
```json
{
    "body": "maybe use ascii_art instead for the moment ?",
    "created_at": "2019-10-27T07:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400412",
    "user": "@fchapoton"
}
```

maybe use ascii_art instead for the moment ?



---

archive/issue_comments_400413.json:
```json
{
    "body": "this looks like wrong `_` symbol...",
    "created_at": "2019-10-27T08:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400413",
    "user": "@dimpase"
}
```

this looks like wrong `_` symbol...



---

archive/issue_comments_400414.json:
```json
{
    "body": "no, sorry, that's fine. Why not just add convesrion of U+27F5 the way it's done for several other UTF characters? (There is a place where these translations are set, but I can't recall where...)",
    "created_at": "2019-10-27T08:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400414",
    "user": "@dimpase"
}
```

no, sorry, that's fine. Why not just add convesrion of U+27F5 the way it's done for several other UTF characters? (There is a place where these translations are set, but I can't recall where...)



---

archive/issue_comments_400415.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-27T18:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400415",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400416.json:
```json
{
    "body": "The correct place for that seems to be `src/sage/docs/conf.py`, but I am not sure what the correct latex code would be to make the arrows line up correctly. I switched to using `ascii_art` instead, as the use of unicode is not essential here. Now, both the pdf and html docs build, on my end.",
    "created_at": "2019-10-27T18:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400416",
    "user": "@mwageringel"
}
```

The correct place for that seems to be `src/sage/docs/conf.py`, but I am not sure what the correct latex code would be to make the arrows line up correctly. I switched to using `ascii_art` instead, as the use of unicode is not essential here. Now, both the pdf and html docs build, on my end.



---

archive/issue_comments_400417.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-27T18:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400417",
    "user": "@mwageringel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400418.json:
```json
{
    "body": "OK, this works (in  pdf docs too).",
    "created_at": "2019-10-27T21:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400418",
    "user": "@dimpase"
}
```

OK, this works (in  pdf docs too).



---

archive/issue_comments_400419.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-27T21:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400419",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400420.json:
```json
{
    "body": "Thank you.",
    "created_at": "2019-10-27T21:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400420",
    "user": "@mwageringel"
}
```

Thank you.



---

archive/issue_comments_400421.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-28T23:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28354#issuecomment-400421",
    "user": "@vbraun"
}
```

Resolution: fixed
