# Issue 28354: convert chain complexes from Macaulay2 to Sage

Issue created by migration from https://trac.sagemath.org/ticket/28591

Original creator: @mwageringel

Original creation time: 2019-10-11 00:08:58

CC:  saliola dimpase @antonleykin

Keywords: macaulay2, IMA Coding Sprint

This ticket implements conversion of chain complexes from Macaulay2 to Sage, for example:

```
            sage: R = ZZ['a,b,c']
            sage: C = macaulay2(ideal(R.gens())).resolution()
            sage: unicode_art(C.sage())
                                   ⎛-b  0 -c⎞     ⎛ c⎞
                                   ⎜ a -c  0⎟     ⎜ a⎟
                       (a b c)     ⎝ 0  b  a⎠     ⎝-b⎠
             0 ⟵── C_0 ⟵────── C_1 ⟵───────── C_2 ⟵─── C_3 ⟵── 0
```


This ticket also fixes an issue where matrices of size 0×n failed to convert correctly.


---

Comment by @mwageringel created at 2019-10-11 00:16:10

Changing component from PLEASE CHANGE to interfaces: optional.


---

Comment by @mwageringel created at 2019-10-11 00:16:10

With this, we could add a method `resolution(algorithm=macaulay2)` to ideals.
----
New commits:


---

Comment by @mwageringel created at 2019-10-11 00:16:10

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-10-11 19:19:37

you need to add the standard utf8 encoding line at the top of

src/sage/interfaces/macaulay2.py

namely


```
# -*- coding: utf-8 -*-
```



---

Comment by chapoton created at 2019-10-14 14:31:51

and an optional tag is missing here:

```
src/sage/interfaces/macaulay2.py", line 1554
```



---

Comment by git created at 2019-10-15 01:38:35

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by @mwageringel created at 2019-10-15 01:40:32

Thank you for catching that. It should be fixed now.


---

Comment by chapoton created at 2019-10-15 19:03:48

ok, let it be


---

Comment by chapoton created at 2019-10-15 19:03:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-10-15 22:46:27

Merge conflict


---

Comment by vbraun created at 2019-10-15 22:46:27

Changing status from positive_review to needs_work.


---

Comment by dimpase created at 2019-10-15 23:24:30

I guess this got to wait till next beta.


---

Comment by dimpase created at 2019-10-22 08:25:04

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2019-10-22 08:25:04

rebased - it was conflicting with M2 Graphs interface
----
New commits:


---

Comment by git created at 2019-10-22 17:52:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2019-10-22 17:53:31

back to the bots


---

Comment by dimpase created at 2019-10-22 17:53:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-10-26 22:19:54

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2019-10-26 22:19:54

The pdf docs don't build

```
[docpdf] ! Package inputenc Error: Unicode character ⟵ (U+27F5)
[docpdf] (inputenc)                not set up for use with LaTeX.
[docpdf] 
[docpdf] See the inputenc package documentation for explanation.
[docpdf] Type  H <return>  for immediate help.
[docpdf]  ...                                              
[docpdf]                                                   
[docpdf] l.8925 ...}2 ⟵─── C\PYGZus{}3 ⟵── 0}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

Comment by chapoton created at 2019-10-27 07:28:31

maybe use ascii_art instead for the moment ?


---

Comment by dimpase created at 2019-10-27 08:10:51

this looks like wrong `_` symbol...


---

Comment by dimpase created at 2019-10-27 08:57:41

no, sorry, that's fine. Why not just add convesrion of U+27F5 the way it's done for several other UTF characters? (There is a place where these translations are set, but I can't recall where...)


---

Comment by git created at 2019-10-27 18:12:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @mwageringel created at 2019-10-27 18:13:36

The correct place for that seems to be `src/sage/docs/conf.py`, but I am not sure what the correct latex code would be to make the arrows line up correctly. I switched to using `ascii_art` instead, as the use of unicode is not essential here. Now, both the pdf and html docs build, on my end.


---

Comment by @mwageringel created at 2019-10-27 18:13:44

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2019-10-27 21:12:26

OK, this works (in  pdf docs too).


---

Comment by dimpase created at 2019-10-27 21:12:26

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2019-10-27 21:37:05

Thank you.


---

Comment by vbraun created at 2019-10-28 23:51:25

Resolution: fixed
