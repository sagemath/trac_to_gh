# Issue 11843: L-series attached to general Euler products

archive/issues_011843.json:
```json
{
    "body": "Assignee: @williamstein\n\nCC:  @jdemeyer\n\nKeywords: sd35.5, lseries\n\nThis summer I wrote a package for psage (see http://code.google.com/p/purplesage/source/browse/psage/lseries/eulerprod.py) that allows one to compute with L-series attached to general Euler products, and implemented many cases, included everything supported in Sage, and a lot more.  This also did things that worked instead of the buggier #11631.   This code is similar to the L-series package in Magma, I guess (http://magma.maths.usyd.edu.au/magma/handbook/text/1503). \n\nIt would be useful to have a stable version of this code in Sage, at least the parts that don't depend on 64-bit only stuff in psage (like smalljac).   The point of this ticket is to to do that. \n\nIssue created by migration from https://trac.sagemath.org/ticket/12015\n\n",
    "created_at": "2011-11-12T18:20:39Z",
    "labels": [
        "component: number theory"
    ],
    "title": "L-series attached to general Euler products",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11843",
    "user": "https://github.com/williamstein"
}
```
Assignee: @williamstein

CC:  @jdemeyer

Keywords: sd35.5, lseries

This summer I wrote a package for psage (see http://code.google.com/p/purplesage/source/browse/psage/lseries/eulerprod.py) that allows one to compute with L-series attached to general Euler products, and implemented many cases, included everything supported in Sage, and a lot more.  This also did things that worked instead of the buggier #11631.   This code is similar to the L-series package in Magma, I guess (http://magma.maths.usyd.edu.au/magma/handbook/text/1503). 

It would be useful to have a stable version of this code in Sage, at least the parts that don't depend on 64-bit only stuff in psage (like smalljac).   The point of this ticket is to to do that. 

Issue created by migration from https://trac.sagemath.org/ticket/12015





---

archive/issue_comments_135304.json:
```json
{
    "body": "Attachment [trac_12015-part1.patch](tarball://root/attachments/some-uuid/ticket12015/trac_12015-part1.patch) by @williamstein created at 2011-11-12 20:30:59\n\nfirst patch -- this implements all functionality for first version and passes all its tests.  Unfortunately, the doctest coverage score is 36%.  To finish this ticket, I have to get it to 100% and deal with the bugs that getting the coverage up reveals.",
    "created_at": "2011-11-12T20:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135304",
    "user": "https://github.com/williamstein"
}
```

Attachment [trac_12015-part1.patch](tarball://root/attachments/some-uuid/ticket12015/trac_12015-part1.patch) by @williamstein created at 2011-11-12 20:30:59

first patch -- this implements all functionality for first version and passes all its tests.  Unfortunately, the doctest coverage score is 36%.  To finish this ticket, I have to get it to 100% and deal with the bugs that getting the coverage up reveals.



---

archive/issue_comments_135305.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd35.5\".",
    "created_at": "2012-01-10T03:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135305",
    "user": "https://github.com/kcrisman"
}
```

Changing keywords from "" to "sd35.5".



---

archive/issue_comments_135306.json:
```json
{
    "body": "Attachment [trac_12015-part1_updated.patch](tarball://root/attachments/some-uuid/ticket12015/trac_12015-part1_updated.patch) by cassiew1 created at 2012-01-12 03:47:51\n\nSecond patch - Added a small function an, the class LSeriesTripleProduct, and some new doctests.  Unfortunately, adding more code outbalanced the new doctests so the coverage is still very low.  Noticed some bugs as well, such as zeros not being implemented, anlist allowing negative inputs, and taylor_series failing on some cases where it shouldn't.  Much work yet to be done.",
    "created_at": "2012-01-12T03:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135306",
    "user": "https://trac.sagemath.org/admin/accounts/users/cassiew1"
}
```

Attachment [trac_12015-part1_updated.patch](tarball://root/attachments/some-uuid/ticket12015/trac_12015-part1_updated.patch) by cassiew1 created at 2012-01-12 03:47:51

Second patch - Added a small function an, the class LSeriesTripleProduct, and some new doctests.  Unfortunately, adding more code outbalanced the new doctests so the coverage is still very low.  Noticed some bugs as well, such as zeros not being implemented, anlist allowing negative inputs, and taylor_series failing on some cases where it shouldn't.  Much work yet to be done.



---

archive/issue_comments_135307.json:
```json
{
    "body": "The patch trac_12015-part1_updated.patch has some issues:\n  \n1. It patches a file called `sage/lfunctions/eulerprod_with_tripleprod.py` that is not even in my patch.   I'm guessing you took some old file from Sage days I had provided and started working on it.  However, that has little to do with the code in the patch I posted to this ticket. \n\n2. Why was this change made?\n\n```\n        118\t \tsage: K.<a> = NumberField(x^2-x-1) \n \t119\t        sage: K.<a> = NumberField(x^2+1) \n```\n\n3. The code needs to be indented here, but isn't (in your patch):\n\n```\n        174\t        EXAMPLES:: \n \t175\t \n \t176\t        sage: from sage.lfunctions.eulerprod import LSeries \n \t177\t        sage: from sage.lfunctions.eulerprod import LSeriesDerivative \n \t178\t        sage: K.<a>=NumberField(x^2+1) \n \t179\t        sage: L=LSeries(K); L \n```\n\n4. Here in your patch the code is indented (good), but there is only one colon (instead of two) after EXAMPLES:\n\n```\n \t508\t        EXAMPLES: \n \t509\t \n \t510\t            sage: from sage.lfunctions.eulerprod import LSeriesAbstract \n \t511\t            sage: L1 = LSeriesAbstract(conductor=1, hodge_numbers=[0], weight=1, epsilon=1, poles=[1], residues=[-1], base_field=QQ) \n```",
    "created_at": "2012-02-05T17:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135307",
    "user": "https://github.com/williamstein"
}
```

The patch trac_12015-part1_updated.patch has some issues:
  
1. It patches a file called `sage/lfunctions/eulerprod_with_tripleprod.py` that is not even in my patch.   I'm guessing you took some old file from Sage days I had provided and started working on it.  However, that has little to do with the code in the patch I posted to this ticket. 

2. Why was this change made?

```
        118	 	sage: K.<a> = NumberField(x^2-x-1) 
 	119	        sage: K.<a> = NumberField(x^2+1) 
```

3. The code needs to be indented here, but isn't (in your patch):

```
        174	        EXAMPLES:: 
 	175	 
 	176	        sage: from sage.lfunctions.eulerprod import LSeries 
 	177	        sage: from sage.lfunctions.eulerprod import LSeriesDerivative 
 	178	        sage: K.<a>=NumberField(x^2+1) 
 	179	        sage: L=LSeries(K); L 
```

4. Here in your patch the code is indented (good), but there is only one colon (instead of two) after EXAMPLES:

```
 	508	        EXAMPLES: 
 	509	 
 	510	            sage: from sage.lfunctions.eulerprod import LSeriesAbstract 
 	511	            sage: L1 = LSeriesAbstract(conductor=1, hodge_numbers=[0], weight=1, epsilon=1, poles=[1], residues=[-1], base_field=QQ) 
```



---

archive/issue_events_031862.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31862"
}
```



---

archive/issue_events_031863.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31863"
}
```



---

archive/issue_events_031864.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31864"
}
```



---

archive/issue_events_031865.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31865"
}
```



---

archive/issue_events_031866.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31866"
}
```



---

archive/issue_events_031867.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31867"
}
```



---

archive/issue_events_031868.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31868"
}
```



---

archive/issue_comments_135308.json:
```json
{
    "body": "I have made a git commit with the first patch, and also a commit updating and fixing the existing doctests. The coverage score is still 36%, though.\n\n---\nNew commits:",
    "created_at": "2014-09-03T14:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135308",
    "user": "https://github.com/tornaria"
}
```

I have made a git commit with the first patch, and also a commit updating and fixing the existing doctests. The coverage score is still 36%, though.

---
New commits:



---

archive/issue_events_031869.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-19T19:29:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31869"
}
```



---

archive/issue_events_031870.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-19T19:29:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31870"
}
```



---

archive/issue_comments_135309.json:
```json
{
    "body": "Changing keywords from \"sd35.5\" to \"sd35.5, lseries\".",
    "created_at": "2019-02-19T19:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135309",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "sd35.5" to "sd35.5, lseries".



---

archive/issue_comments_135310.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135310",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_031871.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31871"
}
```



---

archive/issue_events_031872.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31872"
}
```



---

archive/issue_comments_135311.json:
```json
{
    "body": "adapted to python3\n\n---\nNew commits:",
    "created_at": "2019-04-27T17:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135311",
    "user": "https://github.com/fchapoton"
}
```

adapted to python3

---
New commits:



---

archive/issue_comments_135312.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_135313.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T19:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135313",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_135314.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T19:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135314",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_135315.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-27T19:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_135316.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-30T20:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_031873.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11843#event-31873"
}
```



---

archive/issue_comments_135317.json:
```json
{
    "body": "As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135317",
    "user": "https://github.com/embray"
}
```

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_135318.json:
```json
{
    "body": "There is a pari syntax error appearing in the doctests..",
    "created_at": "2019-08-24T19:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135318",
    "user": "https://github.com/fchapoton"
}
```

There is a pari syntax error appearing in the doctests..



---

archive/issue_comments_135319.json:
```json
{
    "body": "I fixed a couple of tests that I had locally at https://github.com/alexjbest/psage . I think one major problem here still is the mix of things defined in eulerprod.py vs. dockchitser.py many functions like residues, epsilon should probably be for any dockchitser L-function if they are calling pari, with a wrapper in the LSeriesAbstract class?\n\n---\nNew commits:",
    "created_at": "2019-09-05T17:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135319",
    "user": "https://github.com/alexjbest"
}
```

I fixed a couple of tests that I had locally at https://github.com/alexjbest/psage . I think one major problem here still is the mix of things defined in eulerprod.py vs. dockchitser.py many functions like residues, epsilon should probably be for any dockchitser L-function if they are calling pari, with a wrapper in the LSeriesAbstract class?

---
New commits:



---

archive/issue_comments_135320.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-07T06:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11843#issuecomment-135320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
