# Issue 16743: Extend IsogenyClass_EC to work over number fields

archive/issues_016506.json:
```json
{
    "assignees": [],
    "body": "If E is an elliptic curve over QQ then E.isogeny_class() is an object of type (class) IsogenyClass_EC which which one can work in a nice way.  This should be extended to number fields.  Two reasons why this is notn-trivial (and hence was not done at the same time as over QQ):  (1) bounding the possible primes degrees of isogenies;  (2) handling curves with CM.  For (1),  the module `gal_reps_number_field` does what is required.  For (2) new code has been written.\n\nDepends on #11327\nDepends on #16764\nDepends on #16806\n\nKeywords: **isogeny class**\n\nBranch/Commit: **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**\n\nReviewer: **Jeroen Demeyer, Chris Wuthrich**\n\nAuthor: **John Cremona**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16743_\n\n",
    "closed_at": "2014-11-15T16:22:41Z",
    "created_at": "2014-07-30T13:20:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Extend IsogenyClass_EC to work over number fields",
    "type": "issue",
    "updated_at": "2014-11-15T16:22:41Z",
    "url": "https://github.com/sagemath/sage/issues/16743",
    "user": "https://github.com/JohnCremona"
}
```
If E is an elliptic curve over QQ then E.isogeny_class() is an object of type (class) IsogenyClass_EC which which one can work in a nice way.  This should be extended to number fields.  Two reasons why this is notn-trivial (and hence was not done at the same time as over QQ):  (1) bounding the possible primes degrees of isogenies;  (2) handling curves with CM.  For (1),  the module `gal_reps_number_field` does what is required.  For (2) new code has been written.

Depends on #11327
Depends on #16764
Depends on #16806

Keywords: **isogeny class**

Branch/Commit: **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**

Reviewer: **Jeroen Demeyer, Chris Wuthrich**

Author: **John Cremona**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/16743_





---

archive/issue_events_237134.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-07-30T13:20:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237134"
}
```



---

archive/issue_events_237135.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-07-30T13:20:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237135"
}
```



---

archive/issue_events_237136.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-07-30T13:20:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237136"
}
```



---

archive/issue_events_237137.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-07-30T13:20:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237137"
}
```



---

archive/issue_events_237138.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237138"
}
```



---

archive/issue_events_237139.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237139"
}
```



---

archive/issue_comments_219123.json:
```json
{
    "body": "Dependencies: **#11327, #16764**",
    "created_at": "2014-08-11T11:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219123",
    "user": "https://github.com/JohnCremona"
}
```

Dependencies: **#11327, #16764**



---

archive/issue_comments_219124.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dff2965d46e6f1e6b25d7b9b950f3d3525a7418\"><code>8dff296</code></a></td><td><code>#16764: CM detection over number fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/caf41e68e76a753268ce4f4dae36555f0003017b\"><code>caf41e6</code></a></td><td><code>#16764 revert changes to isogeny_class.py which belong in #16743</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93ef887148635ea9e9c7379c3be8b7135bb53f4c\"><code>93ef887</code></a></td><td><code>Merge branch 'develop' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e043ae8eeb0ed3b12f748131904d5e0e0476a83e\"><code>e043ae8</code></a></td><td><code>#11327,#16779: improvements to isogeny class internals and docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7763359bf664835e0b2fad18d7b7e033a8f6e905\"><code>7763359</code></a></td><td><code>Merge branch 'isogs' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c89a6a620cdd484bce61f81cfbc7429c53438e60\"><code>c89a6a6</code></a></td><td><code>#16743 in progress</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e203af8213626f39376cfca7742943bbb19c8c4\"><code>8e203af</code></a></td><td><code>Merge branch 'develop' into cm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cacdb2fe8a32114e13c26f50c3556800b4668fe\"><code>3cacdb2</code></a></td><td><code>#16764: adjustments after review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a7495952d74fd046c36d4cfa87d70341dd969b5\"><code>8a74959</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/ticket/16764' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95\"><code>3c96a71</code></a></td><td><code>#16743: elliptic curve isogeny classes over number fields</code></td></tr></table>\n",
    "created_at": "2014-08-13T14:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219124",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dff2965d46e6f1e6b25d7b9b950f3d3525a7418"><code>8dff296</code></a></td><td><code>#16764: CM detection over number fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/caf41e68e76a753268ce4f4dae36555f0003017b"><code>caf41e6</code></a></td><td><code>#16764 revert changes to isogeny_class.py which belong in #16743</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93ef887148635ea9e9c7379c3be8b7135bb53f4c"><code>93ef887</code></a></td><td><code>Merge branch 'develop' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e043ae8eeb0ed3b12f748131904d5e0e0476a83e"><code>e043ae8</code></a></td><td><code>#11327,#16779: improvements to isogeny class internals and docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7763359bf664835e0b2fad18d7b7e033a8f6e905"><code>7763359</code></a></td><td><code>Merge branch 'isogs' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c89a6a620cdd484bce61f81cfbc7429c53438e60"><code>c89a6a6</code></a></td><td><code>#16743 in progress</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e203af8213626f39376cfca7742943bbb19c8c4"><code>8e203af</code></a></td><td><code>Merge branch 'develop' into cm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cacdb2fe8a32114e13c26f50c3556800b4668fe"><code>3cacdb2</code></a></td><td><code>#16764: adjustments after review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a7495952d74fd046c36d4cfa87d70341dd969b5"><code>8a74959</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/ticket/16764' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95"><code>3c96a71</code></a></td><td><code>#16743: elliptic curve isogeny classes over number fields</code></td></tr></table>




---

archive/issue_events_237140.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-08-13T14:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237140"
}
```



---

archive/issue_comments_219125.json:
```json
{
    "body": "Commit: **[`3c96a71`](https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95)**",
    "created_at": "2014-08-13T14:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219125",
    "user": "https://github.com/JohnCremona"
}
```

Commit: **[`3c96a71`](https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95)**



---

archive/issue_comments_219126.json:
```json
{
    "body": "Branch: **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)**",
    "created_at": "2014-08-13T14:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219126",
    "user": "https://github.com/JohnCremona"
}
```

Branch: **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)**



---

archive/issue_comments_219127.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nTo potential reviewers:  don't be put off by the large number of commits listed, that is just because of the dependencies.  Once the dependencies are accepted there is just one commit which is relevant (3c96a71 #16743: elliptic curve isogeny classes over number fields).",
    "created_at": "2014-08-13T14:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219127",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:4" align="right">comment:4</div>

To potential reviewers:  don't be put off by the large number of commits listed, that is just because of the dependencies.  Once the dependencies are accepted there is just one commit which is relevant (3c96a71 #16743: elliptic curve isogeny classes over number fields).



---

archive/issue_comments_219128.json:
```json
{
    "body": "Changed commit from **[`3c96a71`](https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95)** to **[`e543565`](https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b)**",
    "created_at": "2014-08-27T14:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219128",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c96a71`](https://github.com/sagemath/sagetrac-mirror/commit/3c96a7131c23e700d7311162361c3c77fa5bef95)** to **[`e543565`](https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b)**



---

archive/issue_comments_219129.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5\"><code>ea410d4</code></a></td><td><code>Revert \"Updated Sage version to 6.3\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b1a2d4ece0914fff47dae5ee4210dcf5745c217\"><code>4b1a2d4</code></a></td><td><code>Revert \"Revert \"Updated Sage version to 6.3\"\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12c6f0162ff02ab4800f969f23f40942c6852c0d\"><code>12c6f01</code></a></td><td><code>comitting because git wants me to?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1\"><code>dc0185c</code></a></td><td><code>sorted out now?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87718324fe607636d420d0fa25874d7e1de67009\"><code>8771832</code></a></td><td><code>forgot to import Set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c33261a5b07e29a12f6fbf364d79290a199c3e\"><code>d7c3326</code></a></td><td><code>Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cadd58f3290e1c9e44b86d30195ce921c0f5db95\"><code>cadd58f</code></a></td><td><code>Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into larson</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828ed6fee261a575c27e996d84c11c2bc7dabac0\"><code>828ed6f</code></a></td><td><code>#16806: reviewer's patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77ac99415f04b6aa157988334f3adced4f0bd4ed\"><code>77ac994</code></a></td><td><code>Merge branch 'larson' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b\"><code>e543565</code></a></td><td><code>#16743: now use reducible_primes from #16806</code></td></tr></table>\n",
    "created_at": "2014-08-27T14:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219129",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5"><code>ea410d4</code></a></td><td><code>Revert "Updated Sage version to 6.3"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b1a2d4ece0914fff47dae5ee4210dcf5745c217"><code>4b1a2d4</code></a></td><td><code>Revert "Revert "Updated Sage version to 6.3""</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12c6f0162ff02ab4800f969f23f40942c6852c0d"><code>12c6f01</code></a></td><td><code>comitting because git wants me to?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1"><code>dc0185c</code></a></td><td><code>sorted out now?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87718324fe607636d420d0fa25874d7e1de67009"><code>8771832</code></a></td><td><code>forgot to import Set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c33261a5b07e29a12f6fbf364d79290a199c3e"><code>d7c3326</code></a></td><td><code>Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cadd58f3290e1c9e44b86d30195ce921c0f5db95"><code>cadd58f</code></a></td><td><code>Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into larson</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828ed6fee261a575c27e996d84c11c2bc7dabac0"><code>828ed6f</code></a></td><td><code>#16806: reviewer's patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77ac99415f04b6aa157988334f3adced4f0bd4ed"><code>77ac994</code></a></td><td><code>Merge branch 'larson' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b"><code>e543565</code></a></td><td><code>#16743: now use reducible_primes from #16806</code></td></tr></table>




---

archive/issue_comments_219130.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI added #16806 as a dependency: that ticket concerns Gal Reps over number fields and provides an isogeny_bound() function (method) for those, to which I have added a function reducible_primes() for compatibility with the class for Gal Reps over QQ, which takes the primes in isogeny_bounds() and actually checks if there are isogenies of those degrees.  At the same time I simplified the reducible_primes() method for the Gap Reps class over Q so that it does not compute the whole isogeny class but is slightly more clever, since apart from 2,3,5,7,13 one can tell by looking at a list of special j-invariants.\n\nTODO (but not on this ticket):  unify the two GaloisRepresentation classes!  Perhaps there should be a base class which is rather abstract but defines the interface, with child classes for Galois Reps attached to (1) elliptic curves over number fields, (1') same over QQ, (2) modular forms, etc etc.",
    "created_at": "2014-08-27T14:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219130",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:6" align="right">comment:6</div>

I added #16806 as a dependency: that ticket concerns Gal Reps over number fields and provides an isogeny_bound() function (method) for those, to which I have added a function reducible_primes() for compatibility with the class for Gal Reps over QQ, which takes the primes in isogeny_bounds() and actually checks if there are isogenies of those degrees.  At the same time I simplified the reducible_primes() method for the Gap Reps class over Q so that it does not compute the whole isogeny class but is slightly more clever, since apart from 2,3,5,7,13 one can tell by looking at a list of special j-invariants.

TODO (but not on this ticket):  unify the two GaloisRepresentation classes!  Perhaps there should be a base class which is rather abstract but defines the interface, with child classes for Galois Reps attached to (1) elliptic curves over number fields, (1') same over QQ, (2) modular forms, etc etc.



---

archive/issue_comments_219131.json:
```json
{
    "body": "Changed dependencies from **#11327, #16764** to **#11327, #16764, #16806**",
    "created_at": "2014-08-27T14:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219131",
    "user": "https://github.com/JohnCremona"
}
```

Changed dependencies from **#11327, #16764** to **#11327, #16764, #16806**



---

archive/issue_comments_219132.json:
```json
{
    "body": "Changed commit from **[`e543565`](https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b)** to **[`06d9eb2`](https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca)**",
    "created_at": "2014-09-24T12:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219132",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e543565`](https://github.com/sagemath/sagetrac-mirror/commit/e54356510afe82102e9dc66a08683476f0ab7d7b)** to **[`06d9eb2`](https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca)**



---

archive/issue_comments_219133.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fe066e775c63857fce89c8ae7b42bed921bbaf4\"><code>3fe066e</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/15767' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f4e30b76c98a83fdf8a060f80502a884dcc3d00\"><code>0f4e30b</code></a></td><td><code>Merge branch 'develop' into larson</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be81f80ca53d936ef7fe763753d3e6a34c0bc944\"><code>be81f80</code></a></td><td><code>#16806: minor changes after review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c93be1145e2a898b59b33b536faa47b74f9b0f9\"><code>7c93be1</code></a></td><td><code>Merge branch 'larson' into isogs-ecnf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca\"><code>06d9eb2</code></a></td><td><code>#16743: tweak to ideal comparison function</code></td></tr></table>\n",
    "created_at": "2014-09-24T12:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219133",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fe066e775c63857fce89c8ae7b42bed921bbaf4"><code>3fe066e</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/15767' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f4e30b76c98a83fdf8a060f80502a884dcc3d00"><code>0f4e30b</code></a></td><td><code>Merge branch 'develop' into larson</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be81f80ca53d936ef7fe763753d3e6a34c0bc944"><code>be81f80</code></a></td><td><code>#16806: minor changes after review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c93be1145e2a898b59b33b536faa47b74f9b0f9"><code>7c93be1</code></a></td><td><code>Merge branch 'larson' into isogs-ecnf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca"><code>06d9eb2</code></a></td><td><code>#16743: tweak to ideal comparison function</code></td></tr></table>




---

archive/issue_comments_219134.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe last push only does one small thing really, the rest being to merge in other branches which have positive review or are merged.  The actual change (\"tweak\") is to the comparison of ideals in number fields using the HNF: we were comparing the values of I.pari_hnf() which is a wrapped Pari GEN, and did not agree with what was intended, which comes from comparing I.pari_hnf().sage().\n\nThis is actually important for the purpose of ordering the primes in a number field, first by norm and then by their HNF.  The observant reviewer may notice one doctest change in the prime_ideals() function, but this is a red herring caused by merging in the pari upgrade to 2.7.1 which gives a different generator for one ideal.  For an actual change which the tweak causes you can look at the two primes of norm 17 in Q(i).",
    "created_at": "2014-09-24T12:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219134",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

The last push only does one small thing really, the rest being to merge in other branches which have positive review or are merged.  The actual change ("tweak") is to the comparison of ideals in number fields using the HNF: we were comparing the values of I.pari_hnf() which is a wrapped Pari GEN, and did not agree with what was intended, which comes from comparing I.pari_hnf().sage().

This is actually important for the purpose of ordering the primes in a number field, first by norm and then by their HNF.  The observant reviewer may notice one doctest change in the prime_ideals() function, but this is a red herring caused by merging in the pari upgrade to 2.7.1 which gives a different generator for one ideal.  For an actual change which the tweak causes you can look at the two primes of norm 17 in Q(i).



---

archive/issue_comments_219135.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSorry to bother, but it really would be much better to add the functions which have nothing to do with elliptic curves to the relevant places. For example, `prime_ideals()` should really be a method `prime_ideals_of_bounded_norm()` of `NumberField`. We don't want another #11905.",
    "created_at": "2014-09-24T13:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219135",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Sorry to bother, but it really would be much better to add the functions which have nothing to do with elliptic curves to the relevant places. For example, `prime_ideals()` should really be a method `prime_ideals_of_bounded_norm()` of `NumberField`. We don't want another #11905.



---

archive/issue_comments_219136.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nGood point, will do.  It's clear for prime_ideals() and hnf_cmp() BUT in the latter case there is already a cmp function for ideals which is very similar but not good for my purposes:  it does not first compare norms, and it uses the pari_hnf directly.  So The simplest thing to do (replace the existing ideal cmp with mine) may cause a lot of annoying doctest changes.  I'll try and see.\n\ncurve_cmp() can be a method of the class for elliptic curves over number fields, or even (almost) for generic elliptic curves as it uses no special number field stuff, just compares the list of a-invariants. Not quite since I replace each ai with its list of coefficients and flatten to get a list of 5*d rational numbers where d is the degree of the field.\n\ncurve_cmp_cm() is a bit of an experiment:  for curves with (rational) CM only.\n\nI really need these comparison functions for ordering of the elliptic curves in a single isogeny class in a deterministic way.  For CM isogeny classes it is nicer to group together the curves whose Endomorphism ring is the same (they are all orders in the same imaginary quadratic field, but can have different indices in the maximal order).  So curve_cmp_cm() is only really relevant in the context of isogeny classes.  Comments?\n\nLastly there are a couple of utility functions concerning binary quadratic forms, which I will put elsewhere.",
    "created_at": "2014-09-24T13:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219136",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

Good point, will do.  It's clear for prime_ideals() and hnf_cmp() BUT in the latter case there is already a cmp function for ideals which is very similar but not good for my purposes:  it does not first compare norms, and it uses the pari_hnf directly.  So The simplest thing to do (replace the existing ideal cmp with mine) may cause a lot of annoying doctest changes.  I'll try and see.

curve_cmp() can be a method of the class for elliptic curves over number fields, or even (almost) for generic elliptic curves as it uses no special number field stuff, just compares the list of a-invariants. Not quite since I replace each ai with its list of coefficients and flatten to get a list of 5*d rational numbers where d is the degree of the field.

curve_cmp_cm() is a bit of an experiment:  for curves with (rational) CM only.

I really need these comparison functions for ordering of the elliptic curves in a single isogeny class in a deterministic way.  For CM isogeny classes it is nicer to group together the curves whose Endomorphism ring is the same (they are all orders in the same imaginary quadratic field, but can have different indices in the maximal order).  So curve_cmp_cm() is only really relevant in the context of isogeny classes.  Comments?

Lastly there are a couple of utility functions concerning binary quadratic forms, which I will put elsewhere.



---

archive/issue_events_237141.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-24T13:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237141"
}
```



---

archive/issue_events_237142.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-24T13:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237142"
}
```



---

archive/issue_comments_219137.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOK, so I would like some feedback on the change in ideal comparison.  Quite a lot of doctests will need changing in sage/rings/number_field (I have not yet gone further), which looks bad BUT thee seem to be all due not to the addition of using a norm comparison first, but in the change from comparing pari_hfn() and pari_hnf().sage(), which in particular causes the primes in factorizations to be ordered differently.  This looks like a big negative -- but see my earlier remark:  I don't think we can trust the comparison of two Pari-GEN objects to mean what we think, so that although the old comparison appears to be comaring the HNFs of the ideals, it is not really doing that as far as I can see.",
    "created_at": "2014-09-24T13:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219137",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">comment:11</div>

OK, so I would like some feedback on the change in ideal comparison.  Quite a lot of doctests will need changing in sage/rings/number_field (I have not yet gone further), which looks bad BUT thee seem to be all due not to the addition of using a norm comparison first, but in the change from comparing pari_hfn() and pari_hnf().sage(), which in particular causes the primes in factorizations to be ordered differently.  This looks like a big negative -- but see my earlier remark:  I don't think we can trust the comparison of two Pari-GEN objects to mean what we think, so that although the old comparison appears to be comaring the HNFs of the ideals, it is not really doing that as far as I can see.



---

archive/issue_comments_219138.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@JohnCremona](#comment:10):\n> Good point, will do.  It's clear for prime_ideals() and hnf_cmp() BUT in the latter case there is already a cmp function for ideals which is very similar but not good for my purposes:  it does not first compare norms, and it uses the pari_hnf directly.  So The simplest thing to do (replace the existing ideal cmp with mine) may cause a lot of annoying doctest changes.  I'll try and see.\n\nI don't think this should be the default `cmp()` for ideals (it's more expensive to compute), but it should be function defined in `rings/number_field/number_field_ideal.py`. And why do you need\n\n```\ncmp(I.pari_hnf().sage(), J.pari_hnf().sage())\n```\nas opposed to\n\n```\ncmp(I.pari_hnf(), J.pari_hnf())\n```\nThat's not clear to me...\n\nFinally, a Python tip: you can shorten\n\n```\nt = int(I.norm() - J.norm())\nif t:\n    return cmp(t,0)\n\nreturn cmp(I.pari_hnf().sage(), J.pari_hnf().sage())\n```\nto\n\n```\nreturn cmp(I.norm(), J.norm()) or cmp(I.pari_hnf().sage(), J.pari_hnf().sage())\n```",
    "created_at": "2014-09-24T13:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219138",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@JohnCremona](#comment:10):
> Good point, will do.  It's clear for prime_ideals() and hnf_cmp() BUT in the latter case there is already a cmp function for ideals which is very similar but not good for my purposes:  it does not first compare norms, and it uses the pari_hnf directly.  So The simplest thing to do (replace the existing ideal cmp with mine) may cause a lot of annoying doctest changes.  I'll try and see.

I don't think this should be the default `cmp()` for ideals (it's more expensive to compute), but it should be function defined in `rings/number_field/number_field_ideal.py`. And why do you need

```
cmp(I.pari_hnf().sage(), J.pari_hnf().sage())
```
as opposed to

```
cmp(I.pari_hnf(), J.pari_hnf())
```
That's not clear to me...

Finally, a Python tip: you can shorten

```
t = int(I.norm() - J.norm())
if t:
    return cmp(t,0)

return cmp(I.pari_hnf().sage(), J.pari_hnf().sage())
```
to

```
return cmp(I.norm(), J.norm()) or cmp(I.pari_hnf().sage(), J.pari_hnf().sage())
```



---

archive/issue_comments_219139.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@JohnCremona](#comment:11):\n> I don't think we can trust the comparison of two Pari-GEN objects to mean what we think\n\nWhat do you think that comparing HNFs should mean? I don't see a meaningful comparison, we just need it to be consistent.",
    "created_at": "2014-09-24T13:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219139",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@JohnCremona](#comment:11):
> I don't think we can trust the comparison of two Pari-GEN objects to mean what we think

What do you think that comparing HNFs should mean? I don't see a meaningful comparison, we just need it to be consistent.



---

archive/issue_comments_219140.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nConcerning comparisons, there is also #16127 and #17026.",
    "created_at": "2014-09-24T13:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219140",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Concerning comparisons, there is also #16127 and #17026.



---

archive/issue_comments_219141.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOK, so here is an example:\n\n```\nsage: K.<i> = QuadraticField(-1)\nsage: I = K.ideal(4+i)\nsage: J = K.ideal(4-i)\nsage: HI = I.pari_hnf()\nsage: HJ = J.pari_hnf()\nsage: HIS = HI.sage()\nsage: HJS = HJ.sage()\nsage: cmp(HI,HJ)\n1\nsage: cmp(HIS,HJS)\n-1\n```\nso they diagree.  We have\n\n```\nsage: HI, HJ\n([17, 4; 0, 1], [17, 13; 0, 1])\nsage: HIS, HJS\n(\n[17  4]  [17 13]\n[ 0  1], [ 0  1]\n)\n```\nand I think that I should come before J but using the pari_hnf as is gives the reverse.\n\nBackground: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.  This is a special case: two conjugate primes above a rational prime p which plsits in a quadratic field.  I need to order these, and want to do so using the HNFs which only differ in one entry.  Using pari_hnf is not consistent!  (Try the ideals (2+i) and (2-i) and the pari_hnf's compare \"correctly\".)\n\nI'll have to look at those two other tickets, certainly.  Yet another quagmire!",
    "created_at": "2014-09-24T13:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219141",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:15" align="right">comment:15</div>

OK, so here is an example:

```
sage: K.<i> = QuadraticField(-1)
sage: I = K.ideal(4+i)
sage: J = K.ideal(4-i)
sage: HI = I.pari_hnf()
sage: HJ = J.pari_hnf()
sage: HIS = HI.sage()
sage: HJS = HJ.sage()
sage: cmp(HI,HJ)
1
sage: cmp(HIS,HJS)
-1
```
so they diagree.  We have

```
sage: HI, HJ
([17, 4; 0, 1], [17, 13; 0, 1])
sage: HIS, HJS
(
[17  4]  [17 13]
[ 0  1], [ 0  1]
)
```
and I think that I should come before J but using the pari_hnf as is gives the reverse.

Background: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.  This is a special case: two conjugate primes above a rational prime p which plsits in a quadratic field.  I need to order these, and want to do so using the HNFs which only differ in one entry.  Using pari_hnf is not consistent!  (Try the ideals (2+i) and (2-i) and the pari_hnf's compare "correctly".)

I'll have to look at those two other tickets, certainly.  Yet another quagmire!



---

archive/issue_comments_219142.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jdemeyer](#comment:12):\n> Finally, a Python tip: you can shorten\n> \n> ```\n> t = int(I.norm() - J.norm())\n> if t:\n>     return cmp(t,0)\n> \n> return cmp(I.pari_hnf().sage(), J.pari_hnf().sage())\n> ```\n> to\n> \n> ```\n> return cmp(I.norm(), J.norm()) or cmp(I.pari_hnf().sage(), J.pari_hnf().sage())\n> ```\n\nBetter yet: define a sorting *key* instead of a comparison function, this is the only(!) way in Python 3 and already works now. Your key would then be the tuple `(norm,hnf)`. See [http://python3porting.com/preparing.html#when-sorting-use-key-instead-of-cmp](http://python3porting.com/preparing.html#when-sorting-use-key-instead-of-cmp)",
    "created_at": "2014-09-24T14:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219142",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jdemeyer](#comment:12):
> Finally, a Python tip: you can shorten
> 
> ```
> t = int(I.norm() - J.norm())
> if t:
>     return cmp(t,0)
> 
> return cmp(I.pari_hnf().sage(), J.pari_hnf().sage())
> ```
> to
> 
> ```
> return cmp(I.norm(), J.norm()) or cmp(I.pari_hnf().sage(), J.pari_hnf().sage())
> ```

Better yet: define a sorting *key* instead of a comparison function, this is the only(!) way in Python 3 and already works now. Your key would then be the tuple `(norm,hnf)`. See [http://python3porting.com/preparing.html#when-sorting-use-key-instead-of-cmp](http://python3porting.com/preparing.html#when-sorting-use-key-instead-of-cmp)



---

archive/issue_comments_219143.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@JohnCremona](#comment:15):\n> I'll have to look at those two other tickets, certainly.\n\nI think that those will solve your problem, since matrices would be compared entry-wise, starting with the first column (top-left entry first, then the one below that).",
    "created_at": "2014-09-24T14:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219143",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@JohnCremona](#comment:15):
> I'll have to look at those two other tickets, certainly.

I think that those will solve your problem, since matrices would be compared entry-wise, starting with the first column (top-left entry first, then the one below that).



---

archive/issue_comments_219144.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jdemeyer](#comment:17):\n> Replying to [@JohnCremona](#comment:15):\n> > I'll have to look at those two other tickets, certainly.\n\n> I think that those will solve your problem, since matrices would be compared entry-wise, starting with the first column (top-left entry first, then the one below that).\n\nRight, so I have some work to do, and this ticket will acqure another dependency or two -- I hope those two tickets are not going to get held up!",
    "created_at": "2014-09-24T14:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219144",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jdemeyer](#comment:17):
> Replying to [@JohnCremona](#comment:15):
> > I'll have to look at those two other tickets, certainly.

> I think that those will solve your problem, since matrices would be compared entry-wise, starting with the first column (top-left entry first, then the one below that).

Right, so I have some work to do, and this ticket will acqure another dependency or two -- I hope those two tickets are not going to get held up!



---

archive/issue_comments_219145.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThanks a lot for your help and suggestions.  I did not need that ideal comparison for this ticket anyway, so I have left alone the ideal comparison function except to tidy the code as you suggested.  the two elliptic curve comparison functions have gone, replaced by little key comparison functions in the code where they are used -- much better and shorter and faster!\n\nI am doing some final testing and then will upload a new branch in which you will find no utility functions in the wrong place.\n\nIn the other tickets where you are dealing with comparing pari objects, good luck:  if you have not already discovered this, you will find that hunderds of number field factorizations have their orders changed....",
    "created_at": "2014-09-24T14:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219145",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:19" align="right">comment:19</div>

Thanks a lot for your help and suggestions.  I did not need that ideal comparison for this ticket anyway, so I have left alone the ideal comparison function except to tidy the code as you suggested.  the two elliptic curve comparison functions have gone, replaced by little key comparison functions in the code where they are used -- much better and shorter and faster!

I am doing some final testing and then will upload a new branch in which you will find no utility functions in the wrong place.

In the other tickets where you are dealing with comparing pari objects, good luck:  if you have not already discovered this, you will find that hunderds of number field factorizations have their orders changed....



---

archive/issue_comments_219146.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@JohnCremona](#comment:15):\n> Background: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.\n\nBefore worrying about ideals, first consider the ring O_K. Since the HNF is essentially coordinates w.r.t. to a basis, the chosen Z-basis of O_K also matters a lot. For quadratic fields, one can easily define a canonical basis, but in higher degree that gets a lot more tricky.",
    "created_at": "2014-09-24T15:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219146",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@JohnCremona](#comment:15):
> Background: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.

Before worrying about ideals, first consider the ring O_K. Since the HNF is essentially coordinates w.r.t. to a basis, the chosen Z-basis of O_K also matters a lot. For quadratic fields, one can easily define a canonical basis, but in higher degree that gets a lot more tricky.



---

archive/issue_comments_219147.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment:20):\n> Replying to [@JohnCremona](#comment:15):\n> > Background: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.\n\n> Before worrying about ideals, first consider the ring O_K. Since the HNF is essentially coordinates w.r.t. to a basis, the chosen Z-basis of O_K also matters a lot. For quadratic fields, one can easily define a canonical basis, but in higher degree that gets a lot more tricky.\n\nAbsolutely right!   We have had alot of such discussions with the LMFDB project.  Personally, I will stick to quadratic fields at least as far as making databases of elliptic curves is concerned (though the LMFDB does have some over the cubic field of discriminant -23).....",
    "created_at": "2014-09-24T15:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219147",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment:20):
> Replying to [@JohnCremona](#comment:15):
> > Background: I am making databases of things like elliptic curves over number fields, and am having to be very explicit indeed about how various objects are ordered.

> Before worrying about ideals, first consider the ring O_K. Since the HNF is essentially coordinates w.r.t. to a basis, the chosen Z-basis of O_K also matters a lot. For quadratic fields, one can easily define a canonical basis, but in higher degree that gets a lot more tricky.

Absolutely right!   We have had alot of such discussions with the LMFDB project.  Personally, I will stick to quadratic fields at least as far as making databases of elliptic curves is concerned (though the LMFDB does have some over the cubic field of discriminant -23).....



---

archive/issue_comments_219148.json:
```json
{
    "body": "Changed commit from **[`06d9eb2`](https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca)** to **[`c9bd242`](https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd)**",
    "created_at": "2014-09-24T15:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219148",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`06d9eb2`](https://github.com/sagemath/sagetrac-mirror/commit/06d9eb2226151a35bb2d3779e5309f4d066af8ca)** to **[`c9bd242`](https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd)**



---

archive/issue_comments_219149.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd\"><code>c9bd242</code></a></td><td><code>#16743: moved or deleted various utility functions and simplified come sorting</code></td></tr></table>\n",
    "created_at": "2014-09-24T15:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219149",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd"><code>c9bd242</code></a></td><td><code>#16743: moved or deleted various utility functions and simplified come sorting</code></td></tr></table>




---

archive/issue_comments_219150.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI hope I have done what was wanted.  On testing the whole library I find some doctest failures which I think were caused by merging the pari 2.7.1 upgrade branch, and I hope they will go away by themselves.  I see that ticket #15767 is merged, but I am not sure whether all of the relevant branch is already merged here.",
    "created_at": "2014-09-24T15:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219150",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:23" align="right">comment:23</div>

I hope I have done what was wanted.  On testing the whole library I find some doctest failures which I think were caused by merging the pari 2.7.1 upgrade branch, and I hope they will go away by themselves.  I see that ticket #15767 is merged, but I am not sure whether all of the relevant branch is already merged here.



---

archive/issue_events_237143.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-24T15:48:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237143"
}
```



---

archive/issue_events_237144.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-24T15:48:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237144"
}
```



---

archive/issue_comments_219151.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0\"><code>cfd3f54</code></a></td><td><code>#16743: corrected sorting in primes_of_bounded_norm</code></td></tr></table>\n",
    "created_at": "2014-09-24T16:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219151",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0"><code>cfd3f54</code></a></td><td><code>#16743: corrected sorting in primes_of_bounded_norm</code></td></tr></table>




---

archive/issue_comments_219152.json:
```json
{
    "body": "Changed commit from **[`c9bd242`](https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd)** to **[`cfd3f54`](https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0)**",
    "created_at": "2014-09-24T16:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219152",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9bd242`](https://github.com/sagemath/sagetrac-mirror/commit/c9bd24241141693a9984668f64a104cecdf7ebbd)** to **[`cfd3f54`](https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0)**



---

archive/issue_comments_219153.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOops, forgot to sort the primes using a dual key (norm,ideal).  Note that the order will change after the comparison of pari gen objects changes.",
    "created_at": "2014-09-24T16:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219153",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:26" align="right">comment:26</div>

Oops, forgot to sort the primes using a dual key (norm,ideal).  Note that the order will change after the comparison of pari gen objects changes.



---

archive/issue_events_237145.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T18:53:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237145"
}
```



---

archive/issue_events_237146.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T18:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237146"
}
```



---

archive/issue_comments_219154.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nShaks -> Shanks",
    "created_at": "2014-09-24T18:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219154",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Shaks -> Shanks



---

archive/issue_comments_219155.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHurwitx -> Hurwitz",
    "created_at": "2014-09-24T18:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219155",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Hurwitx -> Hurwitz



---

archive/issue_comments_219156.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIn the implementation of `quadclassunit()`, using `0` for `prec` is wrong. Usually, `prec` arguments are set to `prec_bits_to_words(precision)` where `long precision=0` is the last argument of the Sage method. The `flag` is obsolete and `tech` should best be left alone, so I don't mind that you don't allow to set those.",
    "created_at": "2014-09-24T19:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219156",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

In the implementation of `quadclassunit()`, using `0` for `prec` is wrong. Usually, `prec` arguments are set to `prec_bits_to_words(precision)` where `long precision=0` is the last argument of the Sage method. The `flag` is obsolete and `tech` should best be left alone, so I don't mind that you don't allow to set those.



---

archive/issue_comments_219157.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe `EXAMPLES::` blocks in `BinaryQF.solve()` and in `small_prime_value()` are badly indented.",
    "created_at": "2014-09-24T19:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219157",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

The `EXAMPLES::` blocks in `BinaryQF.solve()` and in `small_prime_value()` are badly indented.



---

archive/issue_comments_219158.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIn this `solve()` method, I would prefer it made more clear that you're solving for integers (as opposed to, say, rationals). For example, replace the first line by\n\n```\nSolve `Q(x,y) = n` in integers `x` and `y` where `Q` is this quadratic form.\n```\nIn the light of a future `solve()` for rationals, it might even be good to rename this method `solve_integer()`",
    "created_at": "2014-09-24T19:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219158",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

In this `solve()` method, I would prefer it made more clear that you're solving for integers (as opposed to, say, rationals). For example, replace the first line by

```
Solve `Q(x,y) = n` in integers `x` and `y` where `Q` is this quadratic form.
```
In the light of a future `solve()` for rationals, it might even be good to rename this method `solve_integer()`



---

archive/issue_comments_219159.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nObvious failure:\n\n```\nsage -t src/sage/rings/number_field/number_field.py\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field.py\", line 3073, in sage.rings.number_field.number_field.NumberField_generic.primes_of_bounded_norm\nFailed example:\n    K.primes_of_bounded_norm(10)\nExpected:\n    [Fractional ideal (i + 1), Fractional ideal (3), Fractional ideal (-i - 2), Fractional ideal (2*i + 1)]\nGot:\n    [Fractional ideal (i + 1), Fractional ideal (-i - 2), Fractional ideal (2*i + 1), Fractional ideal (3)]\n**********************************************************************\n```",
    "created_at": "2014-09-24T19:15:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219159",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Obvious failure:

```
sage -t src/sage/rings/number_field/number_field.py
**********************************************************************
File "src/sage/rings/number_field/number_field.py", line 3073, in sage.rings.number_field.number_field.NumberField_generic.primes_of_bounded_norm
Failed example:
    K.primes_of_bounded_norm(10)
Expected:
    [Fractional ideal (i + 1), Fractional ideal (3), Fractional ideal (-i - 2), Fractional ideal (2*i + 1)]
Got:
    [Fractional ideal (i + 1), Fractional ideal (-i - 2), Fractional ideal (2*i + 1), Fractional ideal (3)]
**********************************************************************
```



---

archive/issue_comments_219160.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nYou can simplify\n\n```\nfrom sage.misc.all import flatten\nP = flatten([pp for pp in [self.primes_above(p) for p in primes(B+1)]])\n```\nby\n\n```\nP = [pp for p in primes(B+1) for pp in self.primes_above(p)]\n```\n(note the order of the `for` statements!)",
    "created_at": "2014-09-24T19:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219160",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

You can simplify

```
from sage.misc.all import flatten
P = flatten([pp for pp in [self.primes_above(p) for p in primes(B+1)]])
```
by

```
P = [pp for p in primes(B+1) for pp in self.primes_above(p)]
```
(note the order of the `for` statements!)



---

archive/issue_comments_219161.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nIn `primes_of_bounded_norm()`, why `B.ceil()`? This would disallow Python `int`s for no good reason. I think you can remove the whole block\n\n```\ntry:\n    B = ZZ(B.ceil())\nexcept (TypeError, AttributeError):\n    raise TypeError(\"%s is not valid bound on prime ideals\" % B)\n```",
    "created_at": "2014-09-24T19:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219161",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

In `primes_of_bounded_norm()`, why `B.ceil()`? This would disallow Python `int`s for no good reason. I think you can remove the whole block

```
try:
    B = ZZ(B.ceil())
except (TypeError, AttributeError):
    raise TypeError("%s is not valid bound on prime ideals" % B)
```



---

archive/issue_comments_219162.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI'll make a reviewer patch with these changes...",
    "created_at": "2014-09-24T19:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219162",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

I'll make a reviewer patch with these changes...



---

archive/issue_comments_219163.json:
```json
{
    "body": "Changed branch from **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)** to **[u/jdemeyer/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16743)**",
    "created_at": "2014-09-24T20:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219163",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)** to **[u/jdemeyer/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16743)**



---

archive/issue_comments_219164.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThese are some reviewer fixes, however I do not intend to fully review this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920\"><code>29d2784</code></a></td><td><code>Various reviewer fixes</code></td></tr></table>\n",
    "created_at": "2014-09-24T20:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219164",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

These are some reviewer fixes, however I do not intend to fully review this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920"><code>29d2784</code></a></td><td><code>Various reviewer fixes</code></td></tr></table>




---

archive/issue_comments_219165.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-09-24T20:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219165",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_237147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T20:24:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237147"
}
```



---

archive/issue_events_237148.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T20:24:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237148"
}
```



---

archive/issue_comments_219166.json:
```json
{
    "body": "Changed commit from **[`cfd3f54`](https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0)** to **[`29d2784`](https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920)**",
    "created_at": "2014-09-24T20:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219166",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`cfd3f54`](https://github.com/sagemath/sagetrac-mirror/commit/cfd3f54410084eaa0d051b8da6a618d8e65074b0)** to **[`29d2784`](https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920)**



---

archive/issue_comments_219167.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThanks a lot for tidying various things up ( at least some of which were not introduced by me, I think!).\n\nWe do need someone with a good knowledge of isogenies to check this.  In writing the code I had to work out quite a lot of mathematics for which I do not know a good source (in the CM and potential CM cases).  I am actually using the code a lot all the time now, on many thousands of curves, which is a good test, but the field degrees are small.\n\nI have merged your changes into my branch so if I make any further changes the branch name will go back to what it was (not that it really matters).  I did this using\n\n```\ngit remote update\ngit merge trac/u/jdemeyer/ticket/16743\nmake\n```\n(in my own local branch), for the record.",
    "created_at": "2014-09-25T08:13:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219167",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:38" align="right">comment:38</div>

Thanks a lot for tidying various things up ( at least some of which were not introduced by me, I think!).

We do need someone with a good knowledge of isogenies to check this.  In writing the code I had to work out quite a lot of mathematics for which I do not know a good source (in the CM and potential CM cases).  I am actually using the code a lot all the time now, on many thousands of curves, which is a good test, but the field degrees are small.

I have merged your changes into my branch so if I make any further changes the branch name will go back to what it was (not that it really matters).  I did this using

```
git remote update
git merge trac/u/jdemeyer/ticket/16743
make
```
(in my own local branch), for the record.



---

archive/issue_comments_219168.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI usually use `./sage -dev` and then you can simply do `./sage -dev pull`.",
    "created_at": "2014-09-25T09:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219168",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

I usually use `./sage -dev` and then you can simply do `./sage -dev pull`.



---

archive/issue_comments_219169.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d\"><code>2d89c05</code></a></td><td><code>Add # long time is 2 places where it was needed</code></td></tr></table>\n",
    "created_at": "2014-09-25T09:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219169",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d"><code>2d89c05</code></a></td><td><code>Add # long time is 2 places where it was needed</code></td></tr></table>




---

archive/issue_comments_219170.json:
```json
{
    "body": "Changed commit from **[`29d2784`](https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920)** to **[`2d89c05`](https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d)**",
    "created_at": "2014-09-25T09:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219170",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`29d2784`](https://github.com/sagemath/sagetrac-mirror/commit/29d278401dd44cbdcdc7579d380dda0217dc4920)** to **[`2d89c05`](https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d)**



---

archive/issue_comments_219171.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@sagetrac-git](#comment:40):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d\"><code>2d89c05</code></a></td><td><code>Add # long time is 2 places where it was needed</code></td></tr></table>\n\nIt's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.",
    "created_at": "2014-09-25T09:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219171",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@sagetrac-git](#comment:40):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d"><code>2d89c05</code></a></td><td><code>Add # long time is 2 places where it was needed</code></td></tr></table>

It's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.



---

archive/issue_comments_219172.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@JohnCremona](#comment:41):\n> It's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.\n\nNo no, it is because those 2 tests depend on an earlier `# long time` test. The following doesn't work:\n\n```\nsage: x = answer_to_the_ultimate_question()  # long time (7.5 million years)\nsage: x\n42\n```\nIf you run this without `--long` the first line will be skipped and the second line will therefore fail.",
    "created_at": "2014-09-25T09:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219172",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@JohnCremona](#comment:41):
> It's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.

No no, it is because those 2 tests depend on an earlier `# long time` test. The following doesn't work:

```
sage: x = answer_to_the_ultimate_question()  # long time (7.5 million years)
sage: x
42
```
If you run this without `--long` the first line will be skipped and the second line will therefore fail.



---

archive/issue_comments_219173.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@jdemeyer](#comment:42):\n> Replying to [@JohnCremona](#comment:41):\n> > It's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.\n\n> No no, it is because those 2 tests depend on an earlier `# long time` test. The following doesn't work:\n> \n> ```\n> sage: x = answer_to_the_ultimate_question()  # long time (7.5 million years)\n> sage: x\n> 42\n> ```\n> If you run this without `--long` the first line will be skipped and the second line will therefore fail.\n\nOf course, my stupidity.",
    "created_at": "2014-09-25T12:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219173",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@jdemeyer](#comment:42):
> Replying to [@JohnCremona](#comment:41):
> > It's pretty shocking that to take a list of 4 elliptic curves and compute their j-invariants and count the distinct ones takes a long time!  Even if it is over a number field of degree 6.  But so be it.

> No no, it is because those 2 tests depend on an earlier `# long time` test. The following doesn't work:
> 
> ```
> sage: x = answer_to_the_ultimate_question()  # long time (7.5 million years)
> sage: x
> 42
> ```
> If you run this without `--long` the first line will be skipped and the second line will therefore fail.

Of course, my stupidity.



---

archive/issue_comments_219174.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nNote to potential reviewers:  Jeroen has reviewed the Sage-technical aspects of this, but we need someone to vouch for its mathematical correctness.  For curves without CM there was little to do given the dependent tickets (now closed) which give the finite list of prime degrees to test, as the structure of the code already existed for curves over Q.  The main thing which needs to be looked at is the CM case, where I had to work out several things myself, not knowing of suitable references.",
    "created_at": "2014-09-25T12:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219174",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:44" align="right">comment:44</div>

Note to potential reviewers:  Jeroen has reviewed the Sage-technical aspects of this, but we need someone to vouch for its mathematical correctness.  For curves without CM there was little to do given the dependent tickets (now closed) which give the finite list of prime degrees to test, as the structure of the code already existed for curves over Q.  The main thing which needs to be looked at is the CM case, where I had to work out several things myself, not knowing of suitable references.



---

archive/issue_comments_219175.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI spotted that one of the commits of #16806 does not seem to be included in this :\n\nhttps://github.com/sagemath/sagetrac-mirror/commits/8c9301671b354f7ba6c24d48f28d0e2b0698f39f\n\nNot sure this is important, but it seems the right thing to include it if it is depending on that ticket.\n\nI fear I won't have time to check the maths anytime soon. But I put it on my list of things to do.",
    "created_at": "2014-09-25T13:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219175",
    "user": "https://github.com/categorie"
}
```

<div id="comment:45" align="right">comment:45</div>

I spotted that one of the commits of #16806 does not seem to be included in this :

https://github.com/sagemath/sagetrac-mirror/commits/8c9301671b354f7ba6c24d48f28d0e2b0698f39f

Not sure this is important, but it seems the right thing to include it if it is depending on that ticket.

I fear I won't have time to check the maths anytime soon. But I put it on my list of things to do.



---

archive/issue_comments_219176.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@JohnCremona](#comment:44):\n> Note to potential reviewers:  Jeroen has reviewed the Sage-technical aspects of this\n\nTo be more precise, let's say I reviewed everything outside of `src/sage/schemes/elliptic_curves`\n\nWhile skimming through the rest of the patch, I just noticed several `# not tested` for the graphs. Any reason?",
    "created_at": "2014-09-25T13:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219176",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@JohnCremona](#comment:44):
> Note to potential reviewers:  Jeroen has reviewed the Sage-technical aspects of this

To be more precise, let's say I reviewed everything outside of `src/sage/schemes/elliptic_curves`

While skimming through the rest of the patch, I just noticed several `# not tested` for the graphs. Any reason?



---

archive/issue_comments_219177.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nYou are right, and while  think the system would deal with this automatically (it's your addition to include new stuff in the ref manual, right?) I'll merge that in.",
    "created_at": "2014-09-25T13:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219177",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:47" align="right">comment:47</div>

You are right, and while  think the system would deal with this automatically (it's your addition to include new stuff in the ref manual, right?) I'll merge that in.



---

archive/issue_comments_219178.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16743)** to **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)**",
    "created_at": "2014-09-25T13:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219178",
    "user": "https://github.com/JohnCremona"
}
```

Changed branch from **[u/jdemeyer/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16743)** to **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)**



---

archive/issue_comments_219179.json:
```json
{
    "body": "Changed commit from **[`2d89c05`](https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d)** to **[`4d69051`](https://github.com/sagemath/sagetrac-mirror/commit/4d69051c2d2d9b1929ee1c58c3040f75b06804a6)**",
    "created_at": "2014-09-25T13:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219179",
    "user": "https://github.com/JohnCremona"
}
```

Changed commit from **[`2d89c05`](https://github.com/sagemath/sagetrac-mirror/commit/2d89c050dc89bc4dcb760e3558304c7c61cf119d)** to **[`4d69051`](https://github.com/sagemath/sagetrac-mirror/commit/4d69051c2d2d9b1929ee1c58c3040f75b06804a6)**



---

archive/issue_comments_219180.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nSorry, my comment was in reply to Chris.  I have merged in the commit he mentioned (and then switched back the branch of this ticket to my name, ha ha).\n\nTo answer Jeroen:  I think I was under the impression that displaying graphs during testing would create problems, while it is nice to have the examples in the manual.  If it is harmless then we can remove these tags.",
    "created_at": "2014-09-25T13:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219180",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:48" align="right">comment:48</div>

Sorry, my comment was in reply to Chris.  I have merged in the commit he mentioned (and then switched back the branch of this ticket to my name, ha ha).

To answer Jeroen:  I think I was under the impression that displaying graphs during testing would create problems, while it is nice to have the examples in the manual.  If it is harmless then we can remove these tags.



---

archive/issue_comments_219181.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nA quick look at the doc output shows quite a few problems in isogeny_class of elliptic curves over number fields.",
    "created_at": "2014-09-25T14:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219181",
    "user": "https://github.com/categorie"
}
```

<div id="comment:49" align="right">comment:49</div>

A quick look at the doc output shows quite a few problems in isogeny_class of elliptic curves over number fields.



---

archive/issue_comments_219182.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@categorie](#comment:49):\n> A quick look at the doc output shows quite a few problems in isogeny_class of elliptic curves over number fields.\n\nApologies.  I will sort that out, no need for you to.",
    "created_at": "2014-09-25T14:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219182",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@categorie](#comment:49):
> A quick look at the doc output shows quite a few problems in isogeny_class of elliptic curves over number fields.

Apologies.  I will sort that out, no need for you to.



---

archive/issue_events_237149.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-25T14:31:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237149"
}
```



---

archive/issue_events_237150.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-25T14:31:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237150"
}
```



---

archive/issue_comments_219183.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@JohnCremona](#comment:48):\n> I was under the impression that displaying graphs during testing would create problems, while it is nice to have the examples in the manual.  If it is harmless then we can remove these tags.\n\nPlease do! Graphics objects are doctested by plotting them to a temporary file. It's good to have those tests, since they check that plotting works (to some extent, it's not checked how the picture looks like).\n\nNote that this plotting machinery might take a while, so it would be prudent to add `# long time` to those plotting tests.",
    "created_at": "2014-09-25T14:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219183",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@JohnCremona](#comment:48):
> I was under the impression that displaying graphs during testing would create problems, while it is nice to have the examples in the manual.  If it is harmless then we can remove these tags.

Please do! Graphics objects are doctested by plotting them to a temporary file. It's good to have those tests, since they check that plotting works (to some extent, it's not checked how the picture looks like).

Note that this plotting machinery might take a while, so it would be prudent to add `# long time` to those plotting tests.



---

archive/issue_comments_219184.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097\"><code>542460d</code></a></td><td><code>#16743: fix doc output problem and turn on isogeny graph tests</code></td></tr></table>\n",
    "created_at": "2014-09-25T15:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219184",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097"><code>542460d</code></a></td><td><code>#16743: fix doc output problem and turn on isogeny graph tests</code></td></tr></table>




---

archive/issue_comments_219185.json:
```json
{
    "body": "Changed commit from **[`4d69051`](https://github.com/sagemath/sagetrac-mirror/commit/4d69051c2d2d9b1929ee1c58c3040f75b06804a6)** to **[`542460d`](https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097)**",
    "created_at": "2014-09-25T15:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219185",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d69051`](https://github.com/sagemath/sagetrac-mirror/commit/4d69051c2d2d9b1929ee1c58c3040f75b06804a6)** to **[`542460d`](https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097)**



---

archive/issue_events_237151.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-25T15:51:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237151"
}
```



---

archive/issue_events_237152.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2014-09-25T15:51:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237152"
}
```



---

archive/issue_comments_219186.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nOK, I fixed the documentation display problem in ell_number_field (and a typo), and changed the \"not tested\" graph displays with \"long time\" which revealed 2 typos there which have been fixed (I had a matplotlib parameter as \"edges_labels\" twice.\n\nNext!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097\"><code>542460d</code></a></td><td><code>#16743: fix doc output problem and turn on isogeny graph tests</code></td></tr></table>\n",
    "created_at": "2014-09-25T15:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219186",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:53" align="right">comment:53</div>

OK, I fixed the documentation display problem in ell_number_field (and a typo), and changed the "not tested" graph displays with "long time" which revealed 2 typos there which have been fixed (I had a matplotlib parameter as "edges_labels" twice.

Next!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097"><code>542460d</code></a></td><td><code>#16743: fix doc output problem and turn on isogeny graph tests</code></td></tr></table>




---

archive/issue_comments_219187.json:
```json
{
    "body": "Changed commit from **[`542460d`](https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097)** to **[`33da411`](https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99)**",
    "created_at": "2014-09-29T13:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219187",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`542460d`](https://github.com/sagemath/sagetrac-mirror/commit/542460ddf2df2783fd1a9beb43922467c9a08097)** to **[`33da411`](https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99)**



---

archive/issue_comments_219188.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99\"><code>33da411</code></a></td><td><code>Merge branch 'develop' into isogs-ecnf</code></td></tr></table>\n",
    "created_at": "2014-09-29T13:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219188",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99"><code>33da411</code></a></td><td><code>Merge branch 'develop' into isogs-ecnf</code></td></tr></table>




---

archive/issue_comments_219189.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nping!",
    "created_at": "2014-10-28T13:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219189",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:55" align="right">comment:55</div>

ping!



---

archive/issue_comments_219190.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Chris Wuthrich**",
    "created_at": "2014-10-30T12:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219190",
    "user": "https://github.com/categorie"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Chris Wuthrich**



---

archive/issue_comments_219191.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\npong!\n\nI thought I would improve the documentation a little bit by including the isogeny class file into it. Other than that I can't see any reason to object against this ticket.\n\nI am running the tests now.\n\nAs to the mathematics in here. Well, there is a lot and not all is trivial. I have read most of the new code, but I won't be able to verify everything. So my review is to confirm that John does very good work and that I have no doubts that it is as good as it can be. \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3cca91fba11797402fe60a98be7380edd6b7b22\"><code>a3cca91</code></a></td><td><code>Merge branch 'develop' into ticket/16743</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da\"><code>79fee2d</code></a></td><td><code>trac 16743: changes to doc</code></td></tr></table>\n",
    "created_at": "2014-10-30T12:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219191",
    "user": "https://github.com/categorie"
}
```

<div id="comment:56" align="right">comment:56</div>

pong!

I thought I would improve the documentation a little bit by including the isogeny class file into it. Other than that I can't see any reason to object against this ticket.

I am running the tests now.

As to the mathematics in here. Well, there is a lot and not all is trivial. I have read most of the new code, but I won't be able to verify everything. So my review is to confirm that John does very good work and that I have no doubts that it is as good as it can be. 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3cca91fba11797402fe60a98be7380edd6b7b22"><code>a3cca91</code></a></td><td><code>Merge branch 'develop' into ticket/16743</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da"><code>79fee2d</code></a></td><td><code>trac 16743: changes to doc</code></td></tr></table>




---

archive/issue_comments_219192.json:
```json
{
    "body": "Changed commit from **[`33da411`](https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99)** to **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**",
    "created_at": "2014-10-30T12:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219192",
    "user": "https://github.com/categorie"
}
```

Changed commit from **[`33da411`](https://github.com/sagemath/sagetrac-mirror/commit/33da411070c800462911a248c7c9270649697d99)** to **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**



---

archive/issue_comments_219193.json:
```json
{
    "body": "Changed branch from **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)** to **[u/wuthrich/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/16743)**",
    "created_at": "2014-10-30T12:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219193",
    "user": "https://github.com/categorie"
}
```

Changed branch from **[u/cremona/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/ticket/16743)** to **[u/wuthrich/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/16743)**



---

archive/issue_comments_219194.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThanks, Chris.    Of course there may well still be bugs, as always.  The code was tested against completely independent determination of complete isogeny classes for a lot of curves over Q(sqrt(5)) and the cubic field of discriminant -23, and we find the same curves.  That did not test the hardest part (namely the CM cases) though where I have done some systematic testing over imaginary quadratic fields of class number 1.",
    "created_at": "2014-10-30T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219194",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:57" align="right">comment:57</div>

Thanks, Chris.    Of course there may well still be bugs, as always.  The code was tested against completely independent determination of complete isogeny classes for a lot of curves over Q(sqrt(5)) and the cubic field of discriminant -23, and we find the same curves.  That did not test the hardest part (namely the CM cases) though where I have done some systematic testing over imaginary quadratic fields of class number 1.



---

archive/issue_comments_219195.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThe tests passed.\n\nI also played a bit around. Seems all ok to me.",
    "created_at": "2014-10-30T17:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219195",
    "user": "https://github.com/categorie"
}
```

<div id="comment:58" align="right">comment:58</div>

The tests passed.

I also played a bit around. Seems all ok to me.



---

archive/issue_events_237153.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-10-30T17:25:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237153"
}
```



---

archive/issue_events_237154.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-10-30T17:25:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237154"
}
```



---

archive/issue_events_237155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-15T16:22:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237155"
}
```



---

archive/issue_events_237156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1e4c7a64e2470cabc3e66d81c96020176fadd86b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-11-15T16:22:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16743#event-237156"
}
```



---

archive/issue_comments_219196.json:
```json
{
    "body": "Changed branch from **[u/wuthrich/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/16743)** to **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**",
    "created_at": "2014-11-15T16:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16743#issuecomment-219196",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/wuthrich/ticket/16743](https://github.com/sagemath/sagetrac-mirror/tree/u/wuthrich/ticket/16743)** to **[`79fee2d`](https://github.com/sagemath/sagetrac-mirror/commit/79fee2d40805b8278b9d0afeaccf50eb101990da)**
