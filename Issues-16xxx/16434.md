# Issue 16434: Package d3.js

archive/issues_016197.json:
```json
{
    "assignees": [],
    "body": "#14953 uses online `3d.js` script. The aim of this ticket is to provide it as a package for offline use.\n\nThe source tarball can be downloaded at https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz\n\n\nAssignee: **tmonteil**\n\nCC:  @nathanncohen bonfroy\n\nKeywords: **d3.js, sdl**\n\nBranch/Commit: **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Thierry Monteil**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16434_\n\n",
    "closed_at": "2014-06-06T11:00:40Z",
    "created_at": "2014-06-03T19:09:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Package d3.js",
    "type": "issue",
    "updated_at": "2019-08-27T19:45:19Z",
    "url": "https://github.com/sagemath/sage/issues/16434",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
#14953 uses online `3d.js` script. The aim of this ticket is to provide it as a package for offline use.

The source tarball can be downloaded at https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz


Assignee: **tmonteil**

CC:  @nathanncohen bonfroy

Keywords: **d3.js, sdl**

Branch/Commit: **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**

Reviewer: **Nathann Cohen**

Author: **Thierry Monteil**

_Issue created by migration from https://trac.sagemath.org/ticket/16434_





---

archive/issue_events_209333.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-03T19:09:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209333"
}
```



---

archive/issue_events_209334.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-03T19:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209334"
}
```



---

archive/issue_events_209335.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-03T19:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209335"
}
```



---

archive/issue_events_209336.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-03T19:09:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209336"
}
```



---

archive/issue_comments_214745.json:
```json
{
    "body": "Branch: **[u/tmonteil/package_d3_js](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/package_d3_js)**",
    "created_at": "2014-06-04T09:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214745",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/package_d3_js](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/package_d3_js)**



---

archive/issue_comments_214746.json:
```json
{
    "body": "Commit: **[85c4ce7](https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72)**",
    "created_at": "2014-06-04T09:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214746",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[85c4ce7](https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72)**



---

archive/issue_events_209337.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-04T09:38:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209337"
}
```



---

archive/issue_events_209338.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-04T09:38:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209338"
}
```



---

archive/issue_events_209339.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-04T09:38:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209339"
}
```



---

archive/issue_comments_214747.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThe tarball (which was produced with sage-src) can be downloaded from https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72\">85c4ce7</a></td><td><code>d3js package creation</code></td></tr></table>\n",
    "created_at": "2014-06-04T09:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214747",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:2'>Comment 2:</a>
The tarball (which was produced with sage-src) can be downloaded from https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72">85c4ce7</a></td><td><code>d3js package creation</code></td></tr></table>




---

archive/issue_comments_214748.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nYo !\n\nLooks like you should not \"move\" an archive to upstream/. It looked a bit weird to be, and it seems that other sage-src script only fill the \"src\" directory with the right stuff. Like for ecl/ or ntl/ ...\n\nNathann",
    "created_at": "2014-06-04T12:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214748",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'>Comment 3:</a>
Yo !

Looks like you should not "move" an archive to upstream/. It looked a bit weird to be, and it seems that other sage-src script only fill the "src" directory with the right stuff. Like for ecl/ or ntl/ ...

Nathann



---

archive/issue_comments_214749.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nWell, i need to have the tarball in upstream/ to compute the new checksums.ini automatically. To my understanding [the spkg-src script](http://www.sagemath.org/doc/developer/packaging.html#section-spkg-src) is used by the maintainer to ease rebuilding future versions, this is why i put the whole build process here (i also hesitated to create a ticket, push changes and ask for review on the fly ;). If you want, i can move it back to the work/ directory after building checksums.ini, but this does only affect the maintainer's upstream/ directory.",
    "created_at": "2014-06-04T13:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214749",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:4'>Comment 4:</a>
Well, i need to have the tarball in upstream/ to compute the new checksums.ini automatically. To my understanding [the spkg-src script](http://www.sagemath.org/doc/developer/packaging.html#section-spkg-src) is used by the maintainer to ease rebuilding future versions, this is why i put the whole build process here (i also hesitated to create a ticket, push changes and ask for review on the fly ;). If you want, i can move it back to the work/ directory after building checksums.ini, but this does only affect the maintainer's upstream/ directory.



---

archive/issue_comments_214750.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nYo !\n\n> Well, i need to have the tarball in upstream/ to compute the new checksums.ini automatically.\n\nNone of the other spkg do that.\n\n> To my understanding [the spkg-src script](http://www.sagemath.org/doc/developer/packaging.html#section-spkg-src) is used by the maintainer to ease rebuilding future versions, this is why i put the whole build process here (i also hesitated to create a ticket, push changes and ask for review on the fly ;). If you want, i can move it back to the work/ directory after building checksums.ini, but this does only affect the maintainer's upstream/ directory.\n\nFirst I think that it is meant to be the \"src\" directory, not the \"work/\" directory. Isn't sage -pkg meant to deal with that ? Either way I guess that the solution here should be global. If every package tries to solve this in a different way we are going nowhere `O_o`\n\nNathann",
    "created_at": "2014-06-04T13:08:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214750",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'>Comment 5:</a>
Yo !

> Well, i need to have the tarball in upstream/ to compute the new checksums.ini automatically.

None of the other spkg do that.

> To my understanding [the spkg-src script](http://www.sagemath.org/doc/developer/packaging.html#section-spkg-src) is used by the maintainer to ease rebuilding future versions, this is why i put the whole build process here (i also hesitated to create a ticket, push changes and ask for review on the fly ;). If you want, i can move it back to the work/ directory after building checksums.ini, but this does only affect the maintainer's upstream/ directory.

First I think that it is meant to be the "src" directory, not the "work/" directory. Isn't sage -pkg meant to deal with that ? Either way I guess that the solution here should be global. If every package tries to solve this in a different way we are going nowhere `O_o`

Nathann



---

archive/issue_events_209340.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-04T14:36:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209340"
}
```



---

archive/issue_events_209341.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-04T14:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209341"
}
```



---

archive/issue_comments_214751.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@nathanncohen](#comment%3A5):\n> Yo !\n\nHi Nathann and thanks for caring,\n\nit is fun that i asked myself all those questions yesterday night, and i\ncould not find an answer within the existing spkgs or the doc (another was\nwhether i should call the spkg d3, d3js or d3_js).\n\n    find -name spkg-src -exec echo '{}' \\; -exec cat '{}' \\; | less\n\nThere seem to be no rule concerning the spkg-src script. The patterns you\nmay discover between some of the spkg-src scripts only come from the fact\nthat pieces are copied from one to another. For example, some script\nhardcode the version (e.g. ecl, so it needs to be modified by hand before\nbeing run), some write 'Run this after extracting the upstream sources in\nsrc/' (e.g. iml), some use curl (e.g ntl), other wget (e.g. cddlib), some\ncreate the final tarball (e.g. gap), some only fill a src/ directory (e.g.\nntl), some apply patches while it is supposed to happen during spkg\ninstallation (e.g. lrcalc), some are written in python (e.g. maxima).\n\n\n> First I think that it is meant to be the \"src\" directory, not the\n> \"work/\" directory. \n\nActually, the semantics of what represents 'src' is not even constant\namong existing scripts, which is more confusing than each having a\ndifferent name. Some download the tarball within the src/ directory and\nwork in there (e.g. singular), some extract the source in src/, some\nextract outside and move interesting stuff in src/ (e.g. gap_packages),\nsome work directly within the upstream/ directory (e.g. autotools, which\nby the way lets the tarball in the maintainer's upstream/ directory).\n\nHere, it is clear that work/ is where the script works (stuff that come\nhere will not necessarily end in the produced tarball), it should even be\ncalled tmp_work/. I do not like to fetch things directely within the spkg\ndirectory, because then i have to remove them one by one (it is easier to\nremove a single subdirectory). I could create a src/ directory within the\nwork/ directory, this would make sense, but since the tarball contains\nonly two files ('d3.min.js' and 'LICENSE') i didn't think it was worth\nputting them in a separate directory before creating the tarball, but it\nis possible if you think it may help.\n\n> > Well, i need to have the tarball in upstream/ to compute the new\n> > checksums.ini automatically.\n\n> \n> None of the other spkg do that.\n\nActually, autotools spkg-src already puts its tarball in the upstream/\ndirectory.\n\nIf some other maintainers like to do some complementary work by hand, it\nis fine, if they want me to do this as well by having only part of the\nmaintenance script made public within spkg-src, then i can write my own\nproprietary meta-spkg-src script so that other maintainers of this package\nwill also have to write their own, or work by hand.\n\nI think this is in the spirit of the documentation that says : \"This not\nonly serves as documentation but also makes it easier to apply the same\nmodifications to future versions\". So, let us be the first to add this\nfeature, so that future spkgs could benefit from this example and will\nhave less hand work at each new release.\n\n> Either way I guess that the solution here should be global. If every\n> package tries to solve this in a different way we are going nowhere\n> `O_o`\n\nI totally agree, but this is already the case. Adding confusion by using a\nname which already has different purposes only adds confusion.\n\nInstead, we could have a specification somewhere since existing spkg-src\nare far from being consistent.\n\n> Isn't sage -pkg meant to deal with that ?\n\nThe sage-pkg script seems to be used for old-style spkg as it still uses\nmercurial.",
    "created_at": "2014-06-04T15:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214751",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@nathanncohen](#comment%3A5):
> Yo !

Hi Nathann and thanks for caring,

it is fun that i asked myself all those questions yesterday night, and i
could not find an answer within the existing spkgs or the doc (another was
whether i should call the spkg d3, d3js or d3_js).

    find -name spkg-src -exec echo '{}' \; -exec cat '{}' \; | less

There seem to be no rule concerning the spkg-src script. The patterns you
may discover between some of the spkg-src scripts only come from the fact
that pieces are copied from one to another. For example, some script
hardcode the version (e.g. ecl, so it needs to be modified by hand before
being run), some write 'Run this after extracting the upstream sources in
src/' (e.g. iml), some use curl (e.g ntl), other wget (e.g. cddlib), some
create the final tarball (e.g. gap), some only fill a src/ directory (e.g.
ntl), some apply patches while it is supposed to happen during spkg
installation (e.g. lrcalc), some are written in python (e.g. maxima).


> First I think that it is meant to be the "src" directory, not the
> "work/" directory. 

Actually, the semantics of what represents 'src' is not even constant
among existing scripts, which is more confusing than each having a
different name. Some download the tarball within the src/ directory and
work in there (e.g. singular), some extract the source in src/, some
extract outside and move interesting stuff in src/ (e.g. gap_packages),
some work directly within the upstream/ directory (e.g. autotools, which
by the way lets the tarball in the maintainer's upstream/ directory).

Here, it is clear that work/ is where the script works (stuff that come
here will not necessarily end in the produced tarball), it should even be
called tmp_work/. I do not like to fetch things directely within the spkg
directory, because then i have to remove them one by one (it is easier to
remove a single subdirectory). I could create a src/ directory within the
work/ directory, this would make sense, but since the tarball contains
only two files ('d3.min.js' and 'LICENSE') i didn't think it was worth
putting them in a separate directory before creating the tarball, but it
is possible if you think it may help.

> > Well, i need to have the tarball in upstream/ to compute the new
> > checksums.ini automatically.

> 
> None of the other spkg do that.

Actually, autotools spkg-src already puts its tarball in the upstream/
directory.

If some other maintainers like to do some complementary work by hand, it
is fine, if they want me to do this as well by having only part of the
maintenance script made public within spkg-src, then i can write my own
proprietary meta-spkg-src script so that other maintainers of this package
will also have to write their own, or work by hand.

I think this is in the spirit of the documentation that says : "This not
only serves as documentation but also makes it easier to apply the same
modifications to future versions". So, let us be the first to add this
feature, so that future spkgs could benefit from this example and will
have less hand work at each new release.

> Either way I guess that the solution here should be global. If every
> package tries to solve this in a different way we are going nowhere
> `O_o`

I totally agree, but this is already the case. Adding confusion by using a
name which already has different purposes only adds confusion.

Instead, we could have a specification somewhere since existing spkg-src
are far from being consistent.

> Isn't sage -pkg meant to deal with that ?

The sage-pkg script seems to be used for old-style spkg as it still uses
mercurial.



---

archive/issue_comments_214752.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nYoooooooo !\n\n> Hi Nathann and thanks for caring,\n\nMy pleasure. I am so sick of watching all my patches in needs_review and all the code I have yet to submit stuck because of endless nitpicking that I am actually glad to participate to some honest work... `>_<`\n\n> it is fun that i asked myself all those questions yesterday night, and i\n> could not find an answer within the existing spkgs or the doc (another was\n> whether i should call the spkg d3, d3js or d3_js).\n> \n>     find -name spkg-src -exec echo '{}' \\; -exec cat '{}' \\; | less\n\nHey by the way... Once a student of mine showed me a different way to do stuff like that, which is actually MUCH more powerful :\n\n```\nfind . -iname \"spkg-src\" | while read line; do echo $line; cat $line; done\n```\n\n> There seem to be no rule concerning the spkg-src script. The patterns you\n> may discover between some of the spkg-src scripts only come from the fact\n> that pieces are copied from one to another.\n\nOkayokay.\n\n> remove a single subdirectory). I could create a src/ directory within the\n> work/ directory, this would make sense, but since the tarball contains\n> only two files ('d3.min.js' and 'LICENSE') i didn't think it was worth\n> putting them in a separate directory before creating the tarball, but it\n> is possible if you think it may help.\n\nWell, I see no reason, you did the work right...\n\n> Actually, autotools spkg-src already puts its tarball in the upstream/\n> directory.\n\nI see. Could you use SAGE_ROOT/upstream instead of ../../../../ btw ? I did this kind of things a long time ago and several generations of release managers cursed me for it `:-P`\n\nNathann",
    "created_at": "2014-06-04T17:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214752",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'>Comment 8:</a>
Yoooooooo !

> Hi Nathann and thanks for caring,

My pleasure. I am so sick of watching all my patches in needs_review and all the code I have yet to submit stuck because of endless nitpicking that I am actually glad to participate to some honest work... `>_<`

> it is fun that i asked myself all those questions yesterday night, and i
> could not find an answer within the existing spkgs or the doc (another was
> whether i should call the spkg d3, d3js or d3_js).
> 
>     find -name spkg-src -exec echo '{}' \; -exec cat '{}' \; | less

Hey by the way... Once a student of mine showed me a different way to do stuff like that, which is actually MUCH more powerful :

```
find . -iname "spkg-src" | while read line; do echo $line; cat $line; done
```

> There seem to be no rule concerning the spkg-src script. The patterns you
> may discover between some of the spkg-src scripts only come from the fact
> that pieces are copied from one to another.

Okayokay.

> remove a single subdirectory). I could create a src/ directory within the
> work/ directory, this would make sense, but since the tarball contains
> only two files ('d3.min.js' and 'LICENSE') i didn't think it was worth
> putting them in a separate directory before creating the tarball, but it
> is possible if you think it may help.

Well, I see no reason, you did the work right...

> Actually, autotools spkg-src already puts its tarball in the upstream/
> directory.

I see. Could you use SAGE_ROOT/upstream instead of ../../../../ btw ? I did this kind of things a long time ago and several generations of release managers cursed me for it `:-P`

Nathann



---

archive/issue_comments_214753.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nJust tried it, works for me. It woudl be cool if you can replace this ../../../ by a SAGE_ROOT, and then it can go.\n\nNathann",
    "created_at": "2014-06-04T17:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214753",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'>Comment 9:</a>
Just tried it, works for me. It woudl be cool if you can replace this ../../../ by a SAGE_ROOT, and then it can go.

Nathann



---

archive/issue_comments_214754.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nHmm, it does not work for me, did you set `SAGE_ROOT` somewhere ? Or did you run the script within `sage -sh` ?",
    "created_at": "2014-06-04T19:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214754",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:10'>Comment 10:</a>
Hmm, it does not work for me, did you set `SAGE_ROOT` somewhere ? Or did you run the script within `sage -sh` ?



---

archive/issue_comments_214755.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nTry `$SAGE_ROOT`.",
    "created_at": "2014-06-04T19:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214755",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'>Comment 11:</a>
Try `$SAGE_ROOT`.



---

archive/issue_comments_214756.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07\">596e59a</a></td><td><code>#16434 : use $SAGE_ROOT instead of ../../../../</code></td></tr></table>\n",
    "created_at": "2014-06-04T20:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214756",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07">596e59a</a></td><td><code>#16434 : use $SAGE_ROOT instead of ../../../../</code></td></tr></table>




---

archive/issue_comments_214757.json:
```json
{
    "body": "Changed commit from **[85c4ce7](https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72)** to **[596e59a](https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07)**",
    "created_at": "2014-06-04T20:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214757",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[85c4ce7](https://github.com/sagemath/sagetrac-mirror/commit/85c4ce7fd63d638545e65e05e73d7c84a2cc0e72)** to **[596e59a](https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07)**



---

archive/issue_events_209342.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-04T20:10:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209342"
}
```



---

archive/issue_events_209343.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2014-06-04T20:10:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209343"
}
```



---

archive/issue_comments_214758.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nDone. The script forges `SAGE_ROOT` as `\"$(pwd)/../../../\"` in case the variable is not set as a backup. I also add `set -e` at the beginning in order not to mess everything up if something get wrong (e.g. if the archive can not be fetched by lack of network).",
    "created_at": "2014-06-04T20:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214758",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:13'>Comment 13:</a>
Done. The script forges `SAGE_ROOT` as `"$(pwd)/../../../"` in case the variable is not set as a backup. I also add `set -e` at the beginning in order not to mess everything up if something get wrong (e.g. if the archive can not be fetched by lack of network).



---

archive/issue_comments_214759.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nFunny, I did not know this option `:-)`\n\nNathann",
    "created_at": "2014-06-05T07:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214759",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'>Comment 14:</a>
Funny, I did not know this option `:-)`

Nathann



---

archive/issue_events_209344.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T07:02:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209344"
}
```



---

archive/issue_events_209345.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T07:02:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209345"
}
```



---

archive/issue_comments_214760.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-06-05T07:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214760",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_214761.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThanks for this patch !\n\nNathann",
    "created_at": "2014-06-05T07:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214761",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'>Comment 15:</a>
Thanks for this patch !

Nathann



---

archive/issue_comments_214762.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nArggggggg.... Sorry I just noticed something... Could you build your package in a different way ? Right now when you run \"tar xvzf tar xzvf d3js-3.4.8.tar.gz\" the files are extracted into the current directory, and that's a bit messy `:-/`\n\nNathann",
    "created_at": "2014-06-05T07:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214762",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'>Comment 16:</a>
Arggggggg.... Sorry I just noticed something... Could you build your package in a different way ? Right now when you run "tar xvzf tar xzvf d3js-3.4.8.tar.gz" the files are extracted into the current directory, and that's a bit messy `:-/`

Nathann



---

archive/issue_events_209346.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-06-05T10:03:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209346"
}
```



---

archive/issue_events_209347.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-06-05T10:03:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209347"
}
```



---

archive/issue_comments_214763.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df\">e0a214c</a></td><td><code>#16434 files in tarball are in a d3js-$VERSION subdirectory</code></td></tr></table>\n",
    "created_at": "2014-06-05T10:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214763",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df">e0a214c</a></td><td><code>#16434 files in tarball are in a d3js-$VERSION subdirectory</code></td></tr></table>




---

archive/issue_comments_214764.json:
```json
{
    "body": "Changed commit from **[596e59a](https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07)** to **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**",
    "created_at": "2014-06-05T10:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214764",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[596e59a](https://github.com/sagemath/sagetrac-mirror/commit/596e59a597b3f8e499f604f7bd50393e08f83a07)** to **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**



---

archive/issue_comments_214765.json:
```json
{
    "body": "Author: **Thierry Monteil**",
    "created_at": "2014-06-05T10:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214765",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Author: **Thierry Monteil**



---

archive/issue_comments_214766.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n #14953 uses online `3d.js` script. The aim of this ticket is to provide it as a package for offline use.\n \n+The source tarball can be downloaded at https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz\n+\n``````\n",
    "created_at": "2014-06-05T10:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214766",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 #14953 uses online `3d.js` script. The aim of this ticket is to provide it as a package for offline use.
 
+The source tarball can be downloaded at https://lipn.univ-paris13.fr/~monteil/hebergement/sage/d3js-3.4.8.tar.gz
+
``````




---

archive/issue_comments_214767.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nYou are right, for two files i was thinking that is was not an issue since the build dir get destroyed anyway, but i didn-t think a human could be interested in unpacking the tarball. I updated the source tarball accordingly.",
    "created_at": "2014-06-05T10:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214767",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:18'>Comment 18:</a>
You are right, for two files i was thinking that is was not an issue since the build dir get destroyed anyway, but i didn-t think a human could be interested in unpacking the tarball. I updated the source tarball accordingly.



---

archive/issue_events_209348.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T10:42:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209348"
}
```



---

archive/issue_events_209349.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T10:42:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209349"
}
```



---

archive/issue_comments_214768.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThanks ! It still works, sooo.... `:-)`\n\nNathann",
    "created_at": "2014-06-05T10:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214768",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'>Comment 19:</a>
Thanks ! It still works, sooo.... `:-)`

Nathann



---

archive/issue_comments_214769.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/package_d3_js](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/package_d3_js)** to **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**",
    "created_at": "2014-06-06T11:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214769",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tmonteil/package_d3_js](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/package_d3_js)** to **[e0a214c](https://github.com/sagemath/sagetrac-mirror/commit/e0a214cc3324d36a5b87b6969acacc806c5427df)**



---

archive/issue_events_209350.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-06T11:00:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209350"
}
```



---

archive/issue_events_209351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5d4858d8e6a99a41dfac5feb40d448e93041766d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-06T11:00:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16434#event-209351"
}
```



---

archive/issue_comments_214770.json:
```json
{
    "body": "Changed keywords from **d3.js** to **d3.js, sdl**",
    "created_at": "2019-08-27T19:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16434",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16434#issuecomment-214770",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed keywords from **d3.js** to **d3.js, sdl**
