# Issue 16187: Show (all) installed versions of optional/experimental packages in sage-list-packages

archive/issues_015950.json:
```json
{
    "assignees": [],
    "body": "The version of an already installed package may differ from what's available from a Sage package server; don't say \"not installed\" in that case, but show its version (whether older or more recent) instead, in a more readable form.\n\n---\n\nNot a perfect fix, but at least we don't forget any actually installed packages when just versions differ.\n\n\nKeywords: **--optional --experimental SAGE_SERVER**\n\nBranch/Commit: **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**\n\nReviewer: **Leif Leonhardy**\n\nAuthor: **Volker Braun**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16187_\n\n",
    "closed_at": "2014-04-20T16:43:57Z",
    "created_at": "2014-04-18T10:55:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Show (all) installed versions of optional/experimental packages in sage-list-packages",
    "type": "issue",
    "updated_at": "2014-04-20T16:43:57Z",
    "url": "https://github.com/sagemath/sage/issues/16187",
    "user": "https://github.com/vbraun"
}
```
The version of an already installed package may differ from what's available from a Sage package server; don't say "not installed" in that case, but show its version (whether older or more recent) instead, in a more readable form.

---

Not a perfect fix, but at least we don't forget any actually installed packages when just versions differ.


Keywords: **--optional --experimental SAGE_SERVER**

Branch/Commit: **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**

Reviewer: **Leif Leonhardy**

Author: **Volker Braun**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/16187_





---

archive/issue_events_231085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T10:55:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231085"
}
```



---

archive/issue_events_231086.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T10:55:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231086"
}
```



---

archive/issue_comments_206804.json:
```json
{
    "body": "Branch: **[u/vbraun/exclude_legacy_from_sage_list_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/exclude_legacy_from_sage_list_packages)**",
    "created_at": "2014-04-18T11:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206804",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/exclude_legacy_from_sage_list_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/exclude_legacy_from_sage_list_packages)**



---

archive/issue_comments_206805.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2014-04-18T11:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206805",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_206806.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335\">5a52e8b</a></td><td><code>list all installed packages</code></td></tr></table>\n",
    "created_at": "2014-04-18T11:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206806",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335">5a52e8b</a></td><td><code>list all installed packages</code></td></tr></table>




---

archive/issue_events_231087.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T11:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231087"
}
```



---

archive/issue_comments_206807.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Not a perfect fix, but at least we don't forget any actually installed packages.\n``````\n",
    "created_at": "2014-04-18T11:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206807",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Not a perfect fix, but at least we don't forget any actually installed packages.
``````




---

archive/issue_comments_206808.json:
```json
{
    "body": "Commit: **[`5a52e8b`](https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335)**",
    "created_at": "2014-04-18T11:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206808",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`5a52e8b`](https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335)**



---

archive/issue_events_231088.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T11:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231088"
}
```



---

archive/issue_events_231089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T11:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231089"
}
```



---

archive/issue_comments_206809.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWYAI<sup>1</sup>, change `\"Using SAGE Server %s\"` to `\"Using Sage Server %s\"`. ;-)\n\nDealing with package versions is SFFT<sup>2</sup>.\n\nOtherwise LGTM, but HTI<sup>3</sup>.\n\n---\n\n<sup>1</sup> while you're at it\n\n<sup>2</sup> something for a follow-up ticket\n\n<sup>3</sup> haven't tested it",
    "created_at": "2014-04-18T12:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206809",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:3" align="right">comment:3</div>

WYAI<sup>1</sup>, change `"Using SAGE Server %s"` to `"Using Sage Server %s"`. ;-)

Dealing with package versions is SFFT<sup>2</sup>.

Otherwise LGTM, but HTI<sup>3</sup>.

---

<sup>1</sup> while you're at it

<sup>2</sup> something for a follow-up ticket

<sup>3</sup> haven't tested it



---

archive/issue_comments_206810.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nP.S.:  Title of the ticket and branch doesn't match the change, IMHO.",
    "created_at": "2014-04-18T12:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206810",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

P.S.:  Title of the ticket and branch doesn't match the change, IMHO.



---

archive/issue_comments_206811.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYes, I first thought we should rip out the legacy spgks but then went for a more minimal change.",
    "created_at": "2014-04-18T13:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206811",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Yes, I first thought we should rip out the legacy spgks but then went for a more minimal change.



---

archive/issue_events_231090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-18T13:13:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "title_is": "Show all installed packages in sage-list-packages",
    "title_was": "exclude legacy from sage-list-packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231090"
}
```



---

archive/issue_comments_206812.json:
```json
{
    "body": "Changed commit from **[`5a52e8b`](https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335)** to **[`4149103`](https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22)**",
    "created_at": "2014-04-18T13:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5a52e8b`](https://github.com/sagemath/sagetrac-mirror/commit/5a52e8b4a38ecfaff0ec571ed6aac03d02c76335)** to **[`4149103`](https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22)**



---

archive/issue_comments_206813.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22\">4149103</a></td><td><code>SAGE->Sage</code></td></tr></table>\n",
    "created_at": "2014-04-18T13:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22">4149103</a></td><td><code>SAGE->Sage</code></td></tr></table>




---

archive/issue_comments_206814.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHmmm, I'm not very happy with the (lengthy and potentially confusing) output of `sage --{optional,experimental}`.\n\nPerhaps we could at least drop the banner and instead replace `INSTALLED:` by `All installed packages:`  and `NOT INSTALLED:` by `{Optional,Experimental} packages not installed:` (at your taste uppercase \"all\", \"not\" etc.).\n\n\n\n\nWe'll see whether I'll find the time to implement some nicer output, listing all available optional / experimental packages, and if appropriate, the *installed* version *next to each* (not listing packages that are installed but not optional or experimental).  ;-)",
    "created_at": "2014-04-19T15:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206814",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

Hmmm, I'm not very happy with the (lengthy and potentially confusing) output of `sage --{optional,experimental}`.

Perhaps we could at least drop the banner and instead replace `INSTALLED:` by `All installed packages:`  and `NOT INSTALLED:` by `{Optional,Experimental} packages not installed:` (at your taste uppercase "all", "not" etc.).




We'll see whether I'll find the time to implement some nicer output, listing all available optional / experimental packages, and if appropriate, the *installed* version *next to each* (not listing packages that are installed but not optional or experimental).  ;-)



---

archive/issue_comments_206815.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSooner or later we will drop the \"legacy optional\" packages. You are welcome to open your own ticket if/when you find the time to beautify the output.",
    "created_at": "2014-04-19T15:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206815",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

Sooner or later we will drop the "legacy optional" packages. You are welcome to open your own ticket if/when you find the time to beautify the output.



---

archive/issue_comments_206816.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHow about this:\n\n```\n$ ./sage --optional\nUsing Sage Server http://www.sagemath.org/packages\n\nOptional packages:\n\n                                4ti2-1.6\tnot installed\n                       PyQt_x11-4.9.1.p0\tnot installed\n                           TOPCOM-0.17.4\tnot installed\n                      autotools-20121217\tnot installed\n                     beautifulsoup-3.2.1\tnot installed\n                        benzene-20130630\tnot installed\n                          biopython-1.61\tnot installed\n                          brian-1.4.1.p0\tnot installed\n                         buckygen-1.0.p1\tnot installed\n                            cbc-2.8.1.p0\tnot installed\n                            ccache-3.1.9\tnot installed\n                       chomp-20130518.p1\tnot installed\n                        cluster_seed-1.0\tnot installed\n                            coxeter3-1.1\tnot installed\n                     cryptominisat-2.9.6\tnot installed\n                   cunningham_tables-1.0\tnot installed\n      database_cremona_ellcurve-20121022\tnot installed\n                      database_gap-4.6.4\tinstalled version: 4.7.4\n              database_jones_numfield-v4\tnot installed\n                 database_kohel-20060803\tnot installed\n                   database_odlyzko_zeta\tnot installed\n                  database_pari-20130516\tnot installed\n          database_stein_watkins_mini.p0\tnot installed\n         database_symbolic_data-20070206\tnot installed\n                        dot2tex-2.8.7.p2\tnot installed\n                     extra_docs-20070208\tnot installed\n                   gap_packages-4.6.4.p1\tinstalled version: 4.7.4\n                               gcc-4.6.4\tnot installed\n                              gdbm-1.8.3\tnot installed\n                       ginv-1.9-20080723\tnot installed\n                         git-1.7.12.2.p0\tinstalled version: 1.8.4.4\n                           gnuplotpy-1.8\tnot installed\n                             guppy-0.1.8\tnot installed\n                         java3d-20070901\tnot installed\n                     kash3-2008-07-31.p0\talready installed\n                         knoboo-20080411\tnot installed\n                            libogg-1.1.4\tnot installed\n                         libtheora-1.1.1\tnot installed\n                            lie-2.2.2.p5\tnot installed\n                             lrs-4.2b.p1\tnot installed\n                            mpi4py-1.2.2\tnot installed\n                                nauty-25\tnot installed\n                         normaliz-2.8.p0\tnot installed\n                              nose-1.1.2\tnot installed\n                            nzmath-1.1.0\tnot installed\n                           openmpi-1.4.3\tnot installed\n             p_group_cohomology-2.1.4.p1\tnot installed\n                          patchbot-2.0.1\tnot installed\n                           phc-2.3.65.p0\tnot installed\n                         pybtex-20120618\tnot installed\n               pycryptoplus-20100809-git\tnot installed\n                       pyopenssl-0.13.p0\tnot installed\n                                pyx-0.10\tnot installed\n                         pyzmq-2.1.11.p1\tnot installed\n                            qhull-2010.1\tnot installed\n                          sage_mode-0.10\tnot installed\n                           sip-4.13.2.p0\tnot installed\n                          trac-0.11.5.p0\tnot installed\n                       valgrind-3.8.1.p0\tnot installed\n                         zeromq-3.2.0.p0\tnot installed\n\nType 'sage -i package_name' to download and install a package.\n```\n\nOr maybe with the package names aligned to the left with dots to the right column?",
    "created_at": "2014-04-19T17:21:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206816",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

How about this:

```
$ ./sage --optional
Using Sage Server http://www.sagemath.org/packages

Optional packages:

                                4ti2-1.6	not installed
                       PyQt_x11-4.9.1.p0	not installed
                           TOPCOM-0.17.4	not installed
                      autotools-20121217	not installed
                     beautifulsoup-3.2.1	not installed
                        benzene-20130630	not installed
                          biopython-1.61	not installed
                          brian-1.4.1.p0	not installed
                         buckygen-1.0.p1	not installed
                            cbc-2.8.1.p0	not installed
                            ccache-3.1.9	not installed
                       chomp-20130518.p1	not installed
                        cluster_seed-1.0	not installed
                            coxeter3-1.1	not installed
                     cryptominisat-2.9.6	not installed
                   cunningham_tables-1.0	not installed
      database_cremona_ellcurve-20121022	not installed
                      database_gap-4.6.4	installed version: 4.7.4
              database_jones_numfield-v4	not installed
                 database_kohel-20060803	not installed
                   database_odlyzko_zeta	not installed
                  database_pari-20130516	not installed
          database_stein_watkins_mini.p0	not installed
         database_symbolic_data-20070206	not installed
                        dot2tex-2.8.7.p2	not installed
                     extra_docs-20070208	not installed
                   gap_packages-4.6.4.p1	installed version: 4.7.4
                               gcc-4.6.4	not installed
                              gdbm-1.8.3	not installed
                       ginv-1.9-20080723	not installed
                         git-1.7.12.2.p0	installed version: 1.8.4.4
                           gnuplotpy-1.8	not installed
                             guppy-0.1.8	not installed
                         java3d-20070901	not installed
                     kash3-2008-07-31.p0	already installed
                         knoboo-20080411	not installed
                            libogg-1.1.4	not installed
                         libtheora-1.1.1	not installed
                            lie-2.2.2.p5	not installed
                             lrs-4.2b.p1	not installed
                            mpi4py-1.2.2	not installed
                                nauty-25	not installed
                         normaliz-2.8.p0	not installed
                              nose-1.1.2	not installed
                            nzmath-1.1.0	not installed
                           openmpi-1.4.3	not installed
             p_group_cohomology-2.1.4.p1	not installed
                          patchbot-2.0.1	not installed
                           phc-2.3.65.p0	not installed
                         pybtex-20120618	not installed
               pycryptoplus-20100809-git	not installed
                       pyopenssl-0.13.p0	not installed
                                pyx-0.10	not installed
                         pyzmq-2.1.11.p1	not installed
                            qhull-2010.1	not installed
                          sage_mode-0.10	not installed
                           sip-4.13.2.p0	not installed
                          trac-0.11.5.p0	not installed
                       valgrind-3.8.1.p0	not installed
                         zeromq-3.2.0.p0	not installed

Type 'sage -i package_name' to download and install a package.
```

Or maybe with the package names aligned to the left with dots to the right column?



---

archive/issue_comments_206817.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nexttime](#comment:9):\n> Or maybe with the package names aligned to the left with dots to the right column?\n\nLike this (which I prefer):\n\n```\n$ ./sage --optional\nUsing Sage Server http://www.sagemath.org/packages\n\nOptional packages:\n\n4ti2-1.6 ................................ not installed\nPyQt_x11-4.9.1.p0 ....................... not installed\nTOPCOM-0.17.4 ........................... not installed\nautotools-20121217 ...................... not installed\nbeautifulsoup-3.2.1 ..................... not installed\nbenzene-20130630 ........................ not installed\nbiopython-1.61 .......................... not installed\nbrian-1.4.1.p0 .......................... not installed\nbuckygen-1.0.p1 ......................... not installed\ncbc-2.8.1.p0 ............................ not installed\nccache-3.1.9 ............................ not installed\nchomp-20130518.p1 ....................... not installed\ncluster_seed-1.0 ........................ not installed\ncoxeter3-1.1 ............................ not installed\ncryptominisat-2.9.6 ..................... not installed\ncunningham_tables-1.0 ................... not installed\ndatabase_cremona_ellcurve-20121022 ...... not installed\ndatabase_gap-4.6.4 ...................... installed version: 4.7.4\ndatabase_jones_numfield-v4 .............. not installed\ndatabase_kohel-20060803 ................. not installed\ndatabase_odlyzko_zeta ................... not installed\ndatabase_pari-20130516 .................. not installed\ndatabase_stein_watkins_mini.p0 .......... not installed\ndatabase_symbolic_data-20070206 ......... not installed\ndot2tex-2.8.7.p2 ........................ not installed\nextra_docs-20070208 ..................... not installed\ngap_packages-4.6.4.p1 ................... installed version: 4.7.4\ngcc-4.6.4 ............................... not installed\ngdbm-1.8.3 .............................. not installed\nginv-1.9-20080723 ....................... not installed\ngit-1.7.12.2.p0 ......................... installed version: 1.8.4.4\ngnuplotpy-1.8 ........................... not installed\nguppy-0.1.8 ............................. not installed\njava3d-20070901 ......................... not installed\nkash3-2008-07-31.p0 ..................... already installed\nknoboo-20080411 ......................... not installed\nlibogg-1.1.4 ............................ not installed\nlibtheora-1.1.1 ......................... not installed\nlie-2.2.2.p5 ............................ not installed\nlrs-4.2b.p1 ............................. not installed\nmpi4py-1.2.2 ............................ not installed\nnauty-25 ................................ not installed\nnormaliz-2.8.p0 ......................... not installed\nnose-1.1.2 .............................. not installed\nnzmath-1.1.0 ............................ not installed\nopenmpi-1.4.3 ........................... not installed\np_group_cohomology-2.1.4.p1 ............. not installed\npatchbot-2.0.1 .......................... not installed\nphc-2.3.65.p0 ........................... not installed\npybtex-20120618 ......................... not installed\npycryptoplus-20100809-git ............... not installed\npyopenssl-0.13.p0 ....................... not installed\npyx-0.10 ................................ not installed\npyzmq-2.1.11.p1 ......................... not installed\nqhull-2010.1 ............................ not installed\nsage_mode-0.10 .......................... not installed\nsip-4.13.2.p0 ........................... not installed\ntrac-0.11.5.p0 .......................... not installed\nvalgrind-3.8.1.p0 ....................... not installed\nzeromq-3.2.0.p0 ......................... not installed\n\nType 'sage -i package_name' to download and install a package.\n```",
    "created_at": "2014-04-19T17:35:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206817",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nexttime](#comment:9):
> Or maybe with the package names aligned to the left with dots to the right column?

Like this (which I prefer):

```
$ ./sage --optional
Using Sage Server http://www.sagemath.org/packages

Optional packages:

4ti2-1.6 ................................ not installed
PyQt_x11-4.9.1.p0 ....................... not installed
TOPCOM-0.17.4 ........................... not installed
autotools-20121217 ...................... not installed
beautifulsoup-3.2.1 ..................... not installed
benzene-20130630 ........................ not installed
biopython-1.61 .......................... not installed
brian-1.4.1.p0 .......................... not installed
buckygen-1.0.p1 ......................... not installed
cbc-2.8.1.p0 ............................ not installed
ccache-3.1.9 ............................ not installed
chomp-20130518.p1 ....................... not installed
cluster_seed-1.0 ........................ not installed
coxeter3-1.1 ............................ not installed
cryptominisat-2.9.6 ..................... not installed
cunningham_tables-1.0 ................... not installed
database_cremona_ellcurve-20121022 ...... not installed
database_gap-4.6.4 ...................... installed version: 4.7.4
database_jones_numfield-v4 .............. not installed
database_kohel-20060803 ................. not installed
database_odlyzko_zeta ................... not installed
database_pari-20130516 .................. not installed
database_stein_watkins_mini.p0 .......... not installed
database_symbolic_data-20070206 ......... not installed
dot2tex-2.8.7.p2 ........................ not installed
extra_docs-20070208 ..................... not installed
gap_packages-4.6.4.p1 ................... installed version: 4.7.4
gcc-4.6.4 ............................... not installed
gdbm-1.8.3 .............................. not installed
ginv-1.9-20080723 ....................... not installed
git-1.7.12.2.p0 ......................... installed version: 1.8.4.4
gnuplotpy-1.8 ........................... not installed
guppy-0.1.8 ............................. not installed
java3d-20070901 ......................... not installed
kash3-2008-07-31.p0 ..................... already installed
knoboo-20080411 ......................... not installed
libogg-1.1.4 ............................ not installed
libtheora-1.1.1 ......................... not installed
lie-2.2.2.p5 ............................ not installed
lrs-4.2b.p1 ............................. not installed
mpi4py-1.2.2 ............................ not installed
nauty-25 ................................ not installed
normaliz-2.8.p0 ......................... not installed
nose-1.1.2 .............................. not installed
nzmath-1.1.0 ............................ not installed
openmpi-1.4.3 ........................... not installed
p_group_cohomology-2.1.4.p1 ............. not installed
patchbot-2.0.1 .......................... not installed
phc-2.3.65.p0 ........................... not installed
pybtex-20120618 ......................... not installed
pycryptoplus-20100809-git ............... not installed
pyopenssl-0.13.p0 ....................... not installed
pyx-0.10 ................................ not installed
pyzmq-2.1.11.p1 ......................... not installed
qhull-2010.1 ............................ not installed
sage_mode-0.10 .......................... not installed
sip-4.13.2.p0 ........................... not installed
trac-0.11.5.p0 .......................... not installed
valgrind-3.8.1.p0 ....................... not installed
zeromq-3.2.0.p0 ......................... not installed

Type 'sage -i package_name' to download and install a package.
```



---

archive/issue_comments_206818.json:
```json
{
    "body": "Changed branch from **[u/vbraun/exclude_legacy_from_sage_list_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/exclude_legacy_from_sage_list_packages)** to **[u/leif/ticket/16187](https://github.com/sagemath/sagetrac-mirror/tree/u/leif/ticket/16187)**",
    "created_at": "2014-04-19T21:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206818",
    "user": "https://github.com/nexttime"
}
```

Changed branch from **[u/vbraun/exclude_legacy_from_sage_list_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/exclude_legacy_from_sage_list_packages)** to **[u/leif/ticket/16187](https://github.com/sagemath/sagetrac-mirror/tree/u/leif/ticket/16187)**



---

archive/issue_comments_206819.json:
```json
{
    "body": "Changed keywords from none to **--optional --experimental SAGE_SERVER**",
    "created_at": "2014-04-19T21:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206819",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **--optional --experimental SAGE_SERVER**



---

archive/issue_comments_206820.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n... going with the latter.\n\nIf you're ok with my changes, just set the ticket to positive review.  (The implementation is perhaps suboptimal, but the output is fancy! ;-) )\n\n---\nNew commits:\n<table><tr><td>[49b8b4c](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)</td><td><code>`Ticket #16187 reviewer patch: Beautify output of sage --{optional,experimental`}</code></td></tr></table>\n",
    "created_at": "2014-04-19T21:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206820",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

... going with the latter.

If you're ok with my changes, just set the ticket to positive review.  (The implementation is perhaps suboptimal, but the output is fancy! ;-) )

---
New commits:
<table><tr><td>[49b8b4c](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)</td><td><code>`Ticket #16187 reviewer patch: Beautify output of sage --{optional,experimental`}</code></td></tr></table>




---

archive/issue_comments_206821.json:
```json
{
    "body": "Reviewer: **Leif Leonhardy**",
    "created_at": "2014-04-19T21:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206821",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Leif Leonhardy**



---

archive/issue_comments_206822.json:
```json
{
    "body": "Changed commit from **[`4149103`](https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22)** to **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**",
    "created_at": "2014-04-19T21:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206822",
    "user": "https://github.com/nexttime"
}
```

Changed commit from **[`4149103`](https://github.com/sagemath/sagetrac-mirror/commit/4149103bb498f2940c2d3ae5bf84d7bb155e2a22)** to **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**



---

archive/issue_events_231091.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-19T22:43:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231091"
}
```



---

archive/issue_events_231092.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-19T22:43:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231092"
}
```



---

archive/issue_comments_206823.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThere is no need to mention the ticket number in the commit message FYI. Of course you can write anything, but in general there is no guarantee that the ticket number in the commit ends up being the ticket number that merges said commit.",
    "created_at": "2014-04-19T22:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206823",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

There is no need to mention the ticket number in the commit message FYI. Of course you can write anything, but in general there is no guarantee that the ticket number in the commit ends up being the ticket number that merges said commit.



---

archive/issue_comments_206824.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-Not a perfect fix, but at least we don't forget any actually installed packages.\n+The version of an already installed package may differ from what's available from a Sage package server; don't say \"not installed\" in that case, but show its version (whether older or more recent) instead, in a more readable form.\n+\n+---\n+\n+Not a perfect fix, but at least we don't forget any actually installed packages when just versions differ.\n+\n``````\n",
    "created_at": "2014-04-19T23:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206824",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-Not a perfect fix, but at least we don't forget any actually installed packages.
+The version of an already installed package may differ from what's available from a Sage package server; don't say "not installed" in that case, but show its version (whether older or more recent) instead, in a more readable form.
+
+---
+
+Not a perfect fix, but at least we don't forget any actually installed packages when just versions differ.
+
``````




---

archive/issue_events_231093.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2014-04-19T23:32:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "title_is": "Show (all) installed versions of optional/experimental packages in sage-list-packages",
    "title_was": "Show all installed packages in sage-list-packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231093"
}
```



---

archive/issue_comments_206825.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMinor issue:\n\nIn case one has multiple versions of an spkg \"installed\", the version shown is rather random (but still *one* of those listed in `$SAGE_ROOT/local/var/lib/sage/installed/`).\n\nAFAIK we never delete files there, unless the installation of a *specific version* failed, so older or previously installed versions \"accumulate\".\n\n(*Moments later:*) ... Oh, that's quite new (in `sage-spkg`):\n\n```sh\n##################################################################\n# Remove install markers for any other versions of this spkg.\n##################################################################\n\nrm -f \"$SAGE_SPKG_INST/$PKG_BASE-\"*\n```\n\n(I tested by *faking* the installation of other versions of some packages, so at least `sage-list-packages` doesn't bail out if `.../installed/` got messed up.  And the above doesn't work for packages without a [proper] version, i.e., lacking the dash.)",
    "created_at": "2014-04-20T00:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206825",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Minor issue:

In case one has multiple versions of an spkg "installed", the version shown is rather random (but still *one* of those listed in `$SAGE_ROOT/local/var/lib/sage/installed/`).

AFAIK we never delete files there, unless the installation of a *specific version* failed, so older or previously installed versions "accumulate".

(*Moments later:*) ... Oh, that's quite new (in `sage-spkg`):

```sh
##################################################################
# Remove install markers for any other versions of this spkg.
##################################################################

rm -f "$SAGE_SPKG_INST/$PKG_BASE-"*
```

(I tested by *faking* the installation of other versions of some packages, so at least `sage-list-packages` doesn't bail out if `.../installed/` got messed up.  And the above doesn't work for packages without a [proper] version, i.e., lacking the dash.)



---

archive/issue_comments_206826.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHello,\n\nIt is much better now! Some comments about the output (I did not read carefully the code for getting the values).\n\n- Trailing whitespaces line 19 and 76.\n- I would prefer use .format as it is cleaner, i.e. replace line 76 with\n\n   ```\n   print \"{:.<40}{}\".format(fullname, status)\n   ```\n- To be Python 3 compatible, it would be nice to replace `print X` with `print(X)` and `raise Error, \"Message\"` with `raise Error(\"Message\")`.",
    "created_at": "2014-04-20T08:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206826",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Hello,

It is much better now! Some comments about the output (I did not read carefully the code for getting the values).

- Trailing whitespaces line 19 and 76.
- I would prefer use .format as it is cleaner, i.e. replace line 76 with

   ```
   print "{:.<40}{}".format(fullname, status)
   ```
- To be Python 3 compatible, it would be nice to replace `print X` with `print(X)` and `raise Error, "Message"` with `raise Error("Message")`.



---

archive/issue_comments_206827.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@videlec](#comment:16):\n> - I would prefer use .format as it is cleaner, i.e. replace line 76 with\n> \n>    ```\n>    print \"{:.<40}{}\".format(fullname, status)\n>    ```\n\nThat's not Python3-compatible. B)",
    "created_at": "2014-04-20T11:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206827",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@videlec](#comment:16):
> - I would prefer use .format as it is cleaner, i.e. replace line 76 with
> 
>    ```
>    print "{:.<40}{}".format(fullname, status)
>    ```

That's not Python3-compatible. B)



---

archive/issue_events_231094.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-20T16:43:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231094"
}
```



---

archive/issue_events_231095.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6aac28f59bd2fce55f1c70f89337f4d4d1c18181",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-04-20T16:43:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16187#event-231095"
}
```



---

archive/issue_comments_206828.json:
```json
{
    "body": "Changed branch from **[u/leif/ticket/16187](https://github.com/sagemath/sagetrac-mirror/tree/u/leif/ticket/16187)** to **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**",
    "created_at": "2014-04-20T16:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16187",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16187#issuecomment-206828",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/leif/ticket/16187](https://github.com/sagemath/sagetrac-mirror/tree/u/leif/ticket/16187)** to **[`49b8b4c`](https://github.com/sagemath/sagetrac-mirror/commit/49b8b4ced71fd942193f22281255aeefdb7b0eb3)**
