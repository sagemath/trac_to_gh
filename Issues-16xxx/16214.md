# Issue 16214: Bug in is_hamiltonian: non-simple digraphs

archive/issues_015977.json:
```json
{
    "assignees": [],
    "body": "On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.\n\nWith this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.\n\nNathann\n\nDepends on #16210\n\n**Branch/Commit:** [86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/16214\n\n",
    "closed_at": "2014-04-25T14:20:42Z",
    "created_at": "2014-04-23T08:45:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in is_hamiltonian: non-simple digraphs",
    "type": "issue",
    "updated_at": "2014-04-25T14:20:42Z",
    "url": "https://github.com/sagemath/sage/issues/16214",
    "user": "https://github.com/nathanncohen"
}
```
On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.

With this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.

Nathann

Depends on #16210

**Branch/Commit:** [86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)

**Reviewer:** Vincent Delecroix

**Author:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/16214





---

archive/issue_events_197622.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197622"
}
```



---

archive/issue_events_197623.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197623"
}
```



---

archive/issue_events_197624.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197624"
}
```



---

archive/issue_comments_209636.json:
```json
{
    "body": "**Branch:** [u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)",
    "created_at": "2014-04-23T08:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209636",
    "user": "https://github.com/nathanncohen"
}
```

**Branch:** [u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)



---

archive/issue_events_197625.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:46:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197625"
}
```



---

archive/issue_comments_209637.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a\">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967\">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375\">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4\">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr></table>\n",
    "created_at": "2014-04-23T08:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209637",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr></table>




---

archive/issue_comments_209638.json:
```json
{
    "body": "**Commit:** [0198a936873f762ecaea1a72fd716d0b6e9323f4](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)",
    "created_at": "2014-04-23T08:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209638",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [0198a936873f762ecaea1a72fd716d0b6e9323f4](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)



---

archive/issue_comments_209639.json:
```json
{
    "body": "**Changing branch** from \"[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)\" to \"[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)\".",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209639",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)" to "[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)".



---

archive/issue_comments_209640.json:
```json
{
    "body": "**Changing commit** from \"[0198a936873f762ecaea1a72fd716d0b6e9323f4](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)\" to \"[4c94ca78acfedee224aa17771a17927a0a5df352](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)\".",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209640",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[0198a936873f762ecaea1a72fd716d0b6e9323f4](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)" to "[4c94ca78acfedee224aa17771a17927a0a5df352](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)".



---

archive/issue_comments_209641.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nHmmmmm\n\n```\nsage: G = DiGraph(loops=True, multiedges=True)\nsage: G.add_vertex(0)\nsage: G.add_edge(0,0,1)\nsage: G.add_edge(0,0,2)\nsage: G.traveling_salesman_problem(use_edge_labels=True)\nTraceback (most recent call last):\n...\nTypeError: Density is not well-defined for multigraphs.\n```\nPlease start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352\">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr></table>\n",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209641",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'>**Comment 3:**</a>
Hmmmmm

```
sage: G = DiGraph(loops=True, multiedges=True)
sage: G.add_vertex(0)
sage: G.add_edge(0,0,1)
sage: G.add_edge(0,0,2)
sage: G.traveling_salesman_problem(use_edge_labels=True)
Traceback (most recent call last):
...
TypeError: Density is not well-defined for multigraphs.
```
Please start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr></table>




---

archive/issue_events_197626.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T10:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197626"
}
```



---

archive/issue_events_197627.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T10:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197627"
}
```



---

archive/issue_comments_209642.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2014-04-23T10:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209642",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_209643.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-04-23T13:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209643",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>**Comment 5:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>




---

archive/issue_comments_209644.json:
```json
{
    "body": "**Changing commit** from \"[4c94ca78acfedee224aa17771a17927a0a5df352](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)\" to \"[2c23fd7aa45b19efe453a64322a5ac196501eb61](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)\".",
    "created_at": "2014-04-23T13:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209644",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4c94ca78acfedee224aa17771a17927a0a5df352](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)" to "[2c23fd7aa45b19efe453a64322a5ac196501eb61](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)".



---

archive/issue_events_197628.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T13:40:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197628"
}
```



---

archive/issue_events_197629.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197629"
}
```



---

archive/issue_comments_209645.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nHere it is !\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-04-23T13:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209645",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'>**Comment 6:**</a>
Here it is !

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>




---

archive/issue_comments_209646.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nhmmmmmmmmmmmmmmm\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\n```\nMaybe I am wrong on the definition of hamiltonicity...",
    "created_at": "2014-04-23T13:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209646",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>**Comment 7:**</a>
hmmmmmmmmmmmmmmm

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
```
Maybe I am wrong on the definition of hamiltonicity...



---

archive/issue_comments_209647.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nEven better\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\nsage: G.allow_loops(False)\nsage: G.is_hamiltonian()\nFalse\n```",
    "created_at": "2014-04-23T13:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209647",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'>**Comment 8:**</a>
Even better

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
sage: G.allow_loops(False)
sage: G.is_hamiltonian()
False
```



---

archive/issue_events_197630.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T13:53:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197630"
}
```



---

archive/issue_events_197631.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T13:53:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197631"
}
```



---

archive/issue_comments_209648.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n...........\n\nNo you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n\nI cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\nNathann",
    "created_at": "2014-04-23T13:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209648",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'>**Comment 9:**</a>
...........

No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.

I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.

Nathann



---

archive/issue_comments_209649.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nReplying to [@nathanncohen](#comment%3A9):\n> ...........\n> \n> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n> \n> I cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\nMy last example is a digraph not a multigraph... isn't it?",
    "created_at": "2014-04-23T13:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209649",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'>**Comment 10:**</a>
Replying to [@nathanncohen](#comment%3A9):
> ...........
> 
> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.
> 
> I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.

My last example is a digraph not a multigraph... isn't it?



---

archive/issue_comments_209650.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nNo it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :\n\n```\nsage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()\n```\n\nUnfortunately, not only does it NOT return \"True\" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.\n\nNathann",
    "created_at": "2014-04-23T13:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209650",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'>**Comment 11:**</a>
No it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :

```
sage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()
```

Unfortunately, not only does it NOT return "True" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.

Nathann



---

archive/issue_comments_209651.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b\">ecf6e1b</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209651",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>**Comment 12:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b">ecf6e1b</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>




---

archive/issue_comments_209652.json:
```json
{
    "body": "**Changing commit** from \"[2c23fd7aa45b19efe453a64322a5ac196501eb61](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)\" to \"[ecf6e1b6e6a792874b5995ebeadccf142879628b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)\".",
    "created_at": "2014-04-23T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209652",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2c23fd7aa45b19efe453a64322a5ac196501eb61](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)" to "[ecf6e1b6e6a792874b5995ebeadccf142879628b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)".



---

archive/issue_events_197632.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:29:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197632"
}
```



---

archive/issue_events_197633.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197633"
}
```



---

archive/issue_comments_209653.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nIt's ugly as hell and I do not know how I could write it better.\n\nSome of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.\n\nNathann",
    "created_at": "2014-04-23T14:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209653",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>**Comment 13:**</a>
It's ugly as hell and I do not know how I could write it better.

Some of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.

Nathann



---

archive/issue_events_197634.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:32:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197634"
}
```



---

archive/issue_events_197635.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:32:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197635"
}
```



---

archive/issue_comments_209654.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d\">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T14:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209654",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>**Comment 15:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>




---

archive/issue_comments_209655.json:
```json
{
    "body": "**Changing commit** from \"[ecf6e1b6e6a792874b5995ebeadccf142879628b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)\" to \"[3d0f21d564bee94bb12b408e30d84cbaef065c9d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)\".",
    "created_at": "2014-04-23T14:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209655",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ecf6e1b6e6a792874b5995ebeadccf142879628b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)" to "[3d0f21d564bee94bb12b408e30d84cbaef065c9d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)".



---

archive/issue_events_197636.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:44:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197636"
}
```



---

archive/issue_events_197637.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197637"
}
```



---

archive/issue_comments_209656.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\n1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.\n\n2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.",
    "created_at": "2014-04-23T16:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209656",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'>**Comment 17:**</a>
1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.

2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.



---

archive/issue_events_197638.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T16:50:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197638"
}
```



---

archive/issue_events_197639.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T16:50:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197639"
}
```



---

archive/issue_comments_209657.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c\">1f3562f</a></td><td><code>Graphs on 1 vertex</code></td></tr></table>\n",
    "created_at": "2014-04-23T16:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209657",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c">1f3562f</a></td><td><code>Graphs on 1 vertex</code></td></tr></table>




---

archive/issue_comments_209658.json:
```json
{
    "body": "**Changing commit** from \"[3d0f21d564bee94bb12b408e30d84cbaef065c9d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)\" to \"[1f3562fcd7b173955dc3d575aefbf9169e3b100c](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)\".",
    "created_at": "2014-04-23T16:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209658",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3d0f21d564bee94bb12b408e30d84cbaef065c9d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)" to "[1f3562fcd7b173955dc3d575aefbf9169e3b100c](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)".



---

archive/issue_comments_209659.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nWell... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For \"order == 0\", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.\n\nNathann",
    "created_at": "2014-04-23T18:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209659",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'>**Comment 19:**</a>
Well... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For "order == 0", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.

Nathann



---

archive/issue_comments_209660.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a\">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967\">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375\">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4\">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352\">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d\">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e\">4f49511</a></td><td><code>16205: Raise an error for TSP with less then 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209660",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>**Comment 20:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e">4f49511</a></td><td><code>16205: Raise an error for TSP with less then 2 vertices</code></td></tr></table>




---

archive/issue_comments_209661.json:
```json
{
    "body": "**Changing commit** from \"[1f3562fcd7b173955dc3d575aefbf9169e3b100c](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)\" to \"[4f495115258d54b6061f07c05129a72d27501b8e](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)\".",
    "created_at": "2014-04-23T19:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209661",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1f3562fcd7b173955dc3d575aefbf9169e3b100c](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)" to "[4f495115258d54b6061f07c05129a72d27501b8e](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)".



---

archive/issue_comments_209662.json:
```json
{
    "body": "**Changing commit** from \"[4f495115258d54b6061f07c05129a72d27501b8e](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)\" to \"[7ee8e68af9da755bb88ae45cad7af49f546c7bf3](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)\".",
    "created_at": "2014-04-23T19:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209662",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4f495115258d54b6061f07c05129a72d27501b8e](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)" to "[7ee8e68af9da755bb88ae45cad7af49f546c7bf3](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)".



---

archive/issue_comments_209663.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0174081956989489785d578124675f22be0ed84c\">0174081</a></td><td><code>simpler implementation + corrected doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3\">7ee8e68</a></td><td><code>Merge branch 'public/16210' of trac.sagemath.org:sage into 16214-is_hamiltonian_for_non_simple_digraphs</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209663",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>**Comment 21:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0174081956989489785d578124675f22be0ed84c">0174081</a></td><td><code>simpler implementation + corrected doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3">7ee8e68</a></td><td><code>Merge branch 'public/16210' of trac.sagemath.org:sage into 16214-is_hamiltonian_for_non_simple_digraphs</code></td></tr></table>




---

archive/issue_comments_209664.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7\">b055425</a></td><td><code>corrected doctest line 17483</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209664",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>**Comment 22:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7">b055425</a></td><td><code>corrected doctest line 17483</code></td></tr></table>




---

archive/issue_comments_209665.json:
```json
{
    "body": "**Changing commit** from \"[7ee8e68af9da755bb88ae45cad7af49f546c7bf3](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)\" to \"[b055425a32af29a6e624a1dbef0f25dc577951f7](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)\".",
    "created_at": "2014-04-23T19:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209665",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7ee8e68af9da755bb88ae45cad7af49f546c7bf3](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)" to "[b055425a32af29a6e624a1dbef0f25dc577951f7](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)".



---

archive/issue_comments_209666.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nI am waiting for the doctests... but what about\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.",
    "created_at": "2014-04-23T19:33:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209666",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'>**Comment 23:**</a>
I am waiting for the doctests... but what about

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.



---

archive/issue_comments_209667.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nOh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\nNathann",
    "created_at": "2014-04-23T19:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209667",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'>**Comment 24:**</a>
Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`

Nathann



---

archive/issue_comments_209668.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [@nathanncohen](#comment%3A24):\n> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\nYes. Doing work in the back of the user is not good practice. So possibilities are\n- 1) \"1 if l is None else l\" (we save one word with that version)\n- 2) simply remove weight\nI am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?",
    "created_at": "2014-04-23T19:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209668",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [@nathanncohen](#comment%3A24):
> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`

Yes. Doing work in the back of the user is not good practice. So possibilities are
- 1) "1 if l is None else l" (we save one word with that version)
- 2) simply remove weight
I am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?



---

archive/issue_comments_209669.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nThe algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.\n\nI think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.\n\nNathann",
    "created_at": "2014-04-23T19:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209669",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'>**Comment 26:**</a>
The algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.

I think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.

Nathann



---

archive/issue_comments_209670.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nOkay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.\n\nVincent",
    "created_at": "2014-04-23T20:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209670",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'>**Comment 27:**</a>
Okay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.

Vincent



---

archive/issue_comments_209671.json:
```json
{
    "body": "**Changing commit** from \"[b055425a32af29a6e624a1dbef0f25dc577951f7](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)\" to \"[7564f552b37cdbdd25d6b24b3c8b8962873cc1b1](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)\".",
    "created_at": "2014-04-23T21:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209671",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b055425a32af29a6e624a1dbef0f25dc577951f7](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)" to "[7564f552b37cdbdd25d6b24b3c8b8962873cc1b1](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)".



---

archive/issue_comments_209672.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1\">7564f55</a></td><td><code>Modify weight in traveling_salesman in order to be less intrusive</code></td></tr></table>\n",
    "created_at": "2014-04-23T21:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209672",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'>**Comment 28:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1">7564f55</a></td><td><code>Modify weight in traveling_salesman in order to be less intrusive</code></td></tr></table>




---

archive/issue_comments_209673.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nOk, done... needs review.",
    "created_at": "2014-04-23T21:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209673",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'>**Comment 29:**</a>
Ok, done... needs review.



---

archive/issue_events_197640.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T21:58:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197640"
}
```



---

archive/issue_events_197641.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T21:58:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197641"
}
```



---

archive/issue_comments_209674.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990\">86a556d</a></td><td><code>trac #16214: Typo</code></td></tr></table>\n",
    "created_at": "2014-04-23T22:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209674",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>**Comment 30:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990">86a556d</a></td><td><code>trac #16214: Typo</code></td></tr></table>




---

archive/issue_comments_209675.json:
```json
{
    "body": "**Changing commit** from \"[7564f552b37cdbdd25d6b24b3c8b8962873cc1b1](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)\" to \"[86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)\".",
    "created_at": "2014-04-23T22:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209675",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7564f552b37cdbdd25d6b24b3c8b8962873cc1b1](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)" to "[86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)".



---

archive/issue_comments_209676.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nAll tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !\n\nNathann",
    "created_at": "2014-04-23T22:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209676",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'>**Comment 31:**</a>
All tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !

Nathann



---

archive/issue_events_197642.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T22:16:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197642"
}
```



---

archive/issue_events_197643.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T22:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197643"
}
```



---

archive/issue_comments_209677.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nPerfect! Your english is better than mine!\n\nVincent",
    "created_at": "2014-04-23T22:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209677",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'>**Comment 32:**</a>
Perfect! Your english is better than mine!

Vincent



---

archive/issue_events_197644.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-25T14:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197644"
}
```



---

archive/issue_events_197645.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "66005070a0b28b5abcc3bee1385c2eff3d0c4cce",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-04-25T14:20:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-197645"
}
```



---

archive/issue_comments_209678.json:
```json
{
    "body": "**Changing branch** from \"[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)\" to \"[86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)\".",
    "created_at": "2014-04-25T14:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209678",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)" to "[86a556da34a2d62ff127c8ea41599f98dd123990](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)".
