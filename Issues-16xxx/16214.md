# Issue 16214: Bug in is_hamiltonian: non-simple digraphs

archive/issues_015977.json:
```json
{
    "assignees": [],
    "body": "On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.\n\nWith this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.\n\nNathann\n\nDepends on #16210\n\nBranch/Commit: **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16214_\n\n",
    "closed_at": "2014-04-25T14:20:42Z",
    "created_at": "2014-04-23T08:45:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in is_hamiltonian: non-simple digraphs",
    "type": "issue",
    "updated_at": "2014-04-25T14:20:42Z",
    "url": "https://github.com/sagemath/sage/issues/16214",
    "user": "https://github.com/nathanncohen"
}
```
On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.

With this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.

Nathann

Depends on #16210

Branch/Commit: **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**

Reviewer: **Vincent Delecroix**

Author: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/16214_





---

archive/issue_events_213921.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213921"
}
```



---

archive/issue_events_213922.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213922"
}
```



---

archive/issue_events_213923.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213923"
}
```



---

archive/issue_events_213924.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213924"
}
```



---

archive/issue_comments_209688.json:
```json
{
    "body": "Branch: **[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)**",
    "created_at": "2014-04-23T08:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209688",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)**



---

archive/issue_events_213925.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T08:46:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213925"
}
```



---

archive/issue_comments_209689.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a\">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967\">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375\">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4\">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr></table>\n",
    "created_at": "2014-04-23T08:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209689",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr></table>




---

archive/issue_comments_209690.json:
```json
{
    "body": "Commit: **[0198a93](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)**",
    "created_at": "2014-04-23T08:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209690",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[0198a93](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)**



---

archive/issue_comments_209691.json:
```json
{
    "body": "Changed branch from **[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)** to **[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)**",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209691",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/ncohen/16214](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16214)** to **[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)**



---

archive/issue_comments_209692.json:
```json
{
    "body": "Changed commit from **[0198a93](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)** to **[4c94ca7](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)**",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209692",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[0198a93](https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4)** to **[4c94ca7](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)**



---

archive/issue_comments_209693.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nHmmmmm\n\n```\nsage: G = DiGraph(loops=True, multiedges=True)\nsage: G.add_vertex(0)\nsage: G.add_edge(0,0,1)\nsage: G.add_edge(0,0,2)\nsage: G.traveling_salesman_problem(use_edge_labels=True)\nTraceback (most recent call last):\n...\nTypeError: Density is not well-defined for multigraphs.\n```\nPlease start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352\">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr></table>\n",
    "created_at": "2014-04-23T10:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209693",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">Comment 3</div>

Hmmmmm

```
sage: G = DiGraph(loops=True, multiedges=True)
sage: G.add_vertex(0)
sage: G.add_edge(0,0,1)
sage: G.add_edge(0,0,2)
sage: G.traveling_salesman_problem(use_edge_labels=True)
Traceback (most recent call last):
...
TypeError: Density is not well-defined for multigraphs.
```
Please start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr></table>




---

archive/issue_events_213926.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T10:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213926"
}
```



---

archive/issue_events_213927.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T10:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213927"
}
```



---

archive/issue_comments_209694.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2014-04-23T10:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209694",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_209695.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-04-23T13:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>




---

archive/issue_comments_209696.json:
```json
{
    "body": "Changed commit from **[4c94ca7](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)** to **[2c23fd7](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)**",
    "created_at": "2014-04-23T13:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c94ca7](https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352)** to **[2c23fd7](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)**



---

archive/issue_events_213928.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T13:40:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213928"
}
```



---

archive/issue_events_213929.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213929"
}
```



---

archive/issue_comments_209697.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nHere it is !\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>\n",
    "created_at": "2014-04-23T13:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209697",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">Comment 6</div>

Here it is !

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr></table>




---

archive/issue_comments_209698.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nhmmmmmmmmmmmmmmm\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\n```\nMaybe I am wrong on the definition of hamiltonicity...",
    "created_at": "2014-04-23T13:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209698",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">Comment 7</div>

hmmmmmmmmmmmmmmm

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
```
Maybe I am wrong on the definition of hamiltonicity...



---

archive/issue_comments_209699.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nEven better\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\nsage: G.allow_loops(False)\nsage: G.is_hamiltonian()\nFalse\n```",
    "created_at": "2014-04-23T13:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209699",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">Comment 8</div>

Even better

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
sage: G.allow_loops(False)
sage: G.is_hamiltonian()
False
```



---

archive/issue_events_213930.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T13:53:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213930"
}
```



---

archive/issue_events_213931.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T13:53:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213931"
}
```



---

archive/issue_comments_209700.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\n...........\n\nNo you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n\nI cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\nNathann",
    "created_at": "2014-04-23T13:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209700",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">Comment 9</div>

...........

No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.

I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.

Nathann



---

archive/issue_comments_209701.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@nathanncohen](#comment%3A9):\n> ...........\n> \n> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n> \n> I cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\nMy last example is a digraph not a multigraph... isn't it?",
    "created_at": "2014-04-23T13:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209701",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@nathanncohen](#comment%3A9):
> ...........
> 
> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.
> 
> I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.

My last example is a digraph not a multigraph... isn't it?



---

archive/issue_comments_209702.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nNo it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :\n\n```\nsage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()\n```\n\nUnfortunately, not only does it NOT return \"True\" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.\n\nNathann",
    "created_at": "2014-04-23T13:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209702",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">Comment 11</div>

No it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :

```
sage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()
```

Unfortunately, not only does it NOT return "True" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.

Nathann



---

archive/issue_comments_209703.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b\">ecf6e1b</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209703",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b">ecf6e1b</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>




---

archive/issue_comments_209704.json:
```json
{
    "body": "Changed commit from **[2c23fd7](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)** to **[ecf6e1b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)**",
    "created_at": "2014-04-23T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209704",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2c23fd7](https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61)** to **[ecf6e1b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)**



---

archive/issue_events_213932.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:29:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213932"
}
```



---

archive/issue_events_213933.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213933"
}
```



---

archive/issue_comments_209705.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nIt's ugly as hell and I do not know how I could write it better.\n\nSome of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.\n\nNathann",
    "created_at": "2014-04-23T14:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209705",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">Comment 13</div>

It's ugly as hell and I do not know how I could write it better.

Some of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.

Nathann



---

archive/issue_events_213934.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:32:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213934"
}
```



---

archive/issue_events_213935.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:32:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213935"
}
```



---

archive/issue_comments_209706.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d\">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T14:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr></table>




---

archive/issue_comments_209707.json:
```json
{
    "body": "Changed commit from **[ecf6e1b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)** to **[3d0f21d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)**",
    "created_at": "2014-04-23T14:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ecf6e1b](https://github.com/sagemath/sagetrac-mirror/commit/ecf6e1b6e6a792874b5995ebeadccf142879628b)** to **[3d0f21d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)**



---

archive/issue_events_213936.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:44:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213936"
}
```



---

archive/issue_events_213937.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-23T14:44:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213937"
}
```



---

archive/issue_comments_209708.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\n1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.\n\n2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.",
    "created_at": "2014-04-23T16:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209708",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">Comment 17</div>

1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.

2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.



---

archive/issue_events_213938.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T16:50:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213938"
}
```



---

archive/issue_events_213939.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T16:50:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213939"
}
```



---

archive/issue_comments_209709.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c\">1f3562f</a></td><td><code>Graphs on 1 vertex</code></td></tr></table>\n",
    "created_at": "2014-04-23T16:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209709",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c">1f3562f</a></td><td><code>Graphs on 1 vertex</code></td></tr></table>




---

archive/issue_comments_209710.json:
```json
{
    "body": "Changed commit from **[3d0f21d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)** to **[1f3562f](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)**",
    "created_at": "2014-04-23T16:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3d0f21d](https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d)** to **[1f3562f](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)**



---

archive/issue_comments_209711.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWell... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For \"order == 0\", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.\n\nNathann",
    "created_at": "2014-04-23T18:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209711",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">Comment 19</div>

Well... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For "order == 0", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.

Nathann



---

archive/issue_comments_209712.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a\">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967\">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375\">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4\">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352\">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61\">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d\">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e\">4f49511</a></td><td><code>16205: Raise an error for TSP with less then 2 vertices</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209712",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18122c535b0fe163cfa58d044b69c8b79849503a">18122c5</a></td><td><code>trac #16210: Bug in is_hamiltonian: wrong exceptions are caught</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf44a1c35b3b1724ad6325d50d67a693365c3967">bf44a1c</a></td><td><code>trac #16210:: Merge into 6.2.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69303cb818b864cc4d2ac95ccfb17f4cf9bf375">d69303c</a></td><td><code>trac #16210: Broken doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0198a936873f762ecaea1a72fd716d0b6e9323f4">0198a93</a></td><td><code>trac #16214: Bug in is_hamiltonian: non-simple digraphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c94ca78acfedee224aa17771a17927a0a5df352">4c94ca7</a></td><td><code>16214: A new doctest that fails</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c23fd7aa45b19efe453a64322a5ac196501eb61">2c23fd7</a></td><td><code>trac #16214: Broken doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d0f21d564bee94bb12b408e30d84cbaef065c9d">3d0f21d</a></td><td><code>trac #16214: graphs on 2 vertices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e">4f49511</a></td><td><code>16205: Raise an error for TSP with less then 2 vertices</code></td></tr></table>




---

archive/issue_comments_209713.json:
```json
{
    "body": "Changed commit from **[1f3562f](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)** to **[4f49511](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)**",
    "created_at": "2014-04-23T19:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209713",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1f3562f](https://github.com/sagemath/sagetrac-mirror/commit/1f3562fcd7b173955dc3d575aefbf9169e3b100c)** to **[4f49511](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)**



---

archive/issue_comments_209714.json:
```json
{
    "body": "Changed commit from **[4f49511](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)** to **[7ee8e68](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)**",
    "created_at": "2014-04-23T19:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4f49511](https://github.com/sagemath/sagetrac-mirror/commit/4f495115258d54b6061f07c05129a72d27501b8e)** to **[7ee8e68](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)**



---

archive/issue_comments_209715.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0174081956989489785d578124675f22be0ed84c\">0174081</a></td><td><code>simpler implementation + corrected doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3\">7ee8e68</a></td><td><code>Merge branch 'public/16210' of trac.sagemath.org:sage into 16214-is_hamiltonian_for_non_simple_digraphs</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209715",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0174081956989489785d578124675f22be0ed84c">0174081</a></td><td><code>simpler implementation + corrected doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3">7ee8e68</a></td><td><code>Merge branch 'public/16210' of trac.sagemath.org:sage into 16214-is_hamiltonian_for_non_simple_digraphs</code></td></tr></table>




---

archive/issue_comments_209716.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7\">b055425</a></td><td><code>corrected doctest line 17483</code></td></tr></table>\n",
    "created_at": "2014-04-23T19:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209716",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7">b055425</a></td><td><code>corrected doctest line 17483</code></td></tr></table>




---

archive/issue_comments_209717.json:
```json
{
    "body": "Changed commit from **[7ee8e68](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)** to **[b055425](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)**",
    "created_at": "2014-04-23T19:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ee8e68](https://github.com/sagemath/sagetrac-mirror/commit/7ee8e68af9da755bb88ae45cad7af49f546c7bf3)** to **[b055425](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)**



---

archive/issue_comments_209718.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI am waiting for the doctests... but what about\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.",
    "created_at": "2014-04-23T19:33:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209718",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

I am waiting for the doctests... but what about

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.



---

archive/issue_comments_209719.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nOh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\nNathann",
    "created_at": "2014-04-23T19:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209719",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">Comment 24</div>

Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`

Nathann



---

archive/issue_comments_209720.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@nathanncohen](#comment%3A24):\n> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\nYes. Doing work in the back of the user is not good practice. So possibilities are\n- 1) \"1 if l is None else l\" (we save one word with that version)\n- 2) simply remove weight\nI am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?",
    "created_at": "2014-04-23T19:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209720",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@nathanncohen](#comment%3A24):
> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`

Yes. Doing work in the back of the user is not good practice. So possibilities are
- 1) "1 if l is None else l" (we save one word with that version)
- 2) simply remove weight
I am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?



---

archive/issue_comments_209721.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nThe algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.\n\nI think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.\n\nNathann",
    "created_at": "2014-04-23T19:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209721",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">Comment 26</div>

The algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.

I think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.

Nathann



---

archive/issue_comments_209722.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nOkay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.\n\nVincent",
    "created_at": "2014-04-23T20:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209722",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">Comment 27</div>

Okay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.

Vincent



---

archive/issue_comments_209723.json:
```json
{
    "body": "Changed commit from **[b055425](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)** to **[7564f55](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)**",
    "created_at": "2014-04-23T21:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209723",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b055425](https://github.com/sagemath/sagetrac-mirror/commit/b055425a32af29a6e624a1dbef0f25dc577951f7)** to **[7564f55](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)**



---

archive/issue_comments_209724.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1\">7564f55</a></td><td><code>Modify weight in traveling_salesman in order to be less intrusive</code></td></tr></table>\n",
    "created_at": "2014-04-23T21:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209724",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1">7564f55</a></td><td><code>Modify weight in traveling_salesman in order to be less intrusive</code></td></tr></table>




---

archive/issue_comments_209725.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nOk, done... needs review.",
    "created_at": "2014-04-23T21:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209725",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">Comment 29</div>

Ok, done... needs review.



---

archive/issue_events_213940.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T21:58:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213940"
}
```



---

archive/issue_events_213941.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T21:58:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213941"
}
```



---

archive/issue_comments_209726.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990\">86a556d</a></td><td><code>trac #16214: Typo</code></td></tr></table>\n",
    "created_at": "2014-04-23T22:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209726",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990">86a556d</a></td><td><code>trac #16214: Typo</code></td></tr></table>




---

archive/issue_comments_209727.json:
```json
{
    "body": "Changed commit from **[7564f55](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)** to **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**",
    "created_at": "2014-04-23T22:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7564f55](https://github.com/sagemath/sagetrac-mirror/commit/7564f552b37cdbdd25d6b24b3c8b8962873cc1b1)** to **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**



---

archive/issue_comments_209728.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nAll tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !\n\nNathann",
    "created_at": "2014-04-23T22:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209728",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:31" align="right">Comment 31</div>

All tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !

Nathann



---

archive/issue_events_213942.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T22:16:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213942"
}
```



---

archive/issue_events_213943.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-04-23T22:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213943"
}
```



---

archive/issue_comments_209729.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nPerfect! Your english is better than mine!\n\nVincent",
    "created_at": "2014-04-23T22:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209729",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">Comment 32</div>

Perfect! Your english is better than mine!

Vincent



---

archive/issue_events_213944.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-25T14:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213944"
}
```



---

archive/issue_events_213945.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "66005070a0b28b5abcc3bee1385c2eff3d0c4cce",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-04-25T14:20:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16214#event-213945"
}
```



---

archive/issue_comments_209730.json:
```json
{
    "body": "Changed branch from **[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)** to **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**",
    "created_at": "2014-04-25T14:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16214#issuecomment-209730",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16214](https://github.com/sagemath/sagetrac-mirror/tree/public/16214)** to **[86a556d](https://github.com/sagemath/sagetrac-mirror/commit/86a556da34a2d62ff127c8ea41599f98dd123990)**
