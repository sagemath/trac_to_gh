# Issue 16214: Bug in is_hamiltonian: non-simple digraphs

archive/issues_015977.json:
```json
{
    "body": "On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.\n\nWith this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.\n\nNathann\n\nReviewer: Vincent Delecroix\n\nAuthor: Nathann Cohen\n\nBranch: 86a556da34a2d62ff127c8ea41599f98dd123990\n\nDependencies: #16210\n\nCommit: 86a556da34a2d62ff127c8ea41599f98dd123990\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16214\n\n",
    "closed_at": "2014-04-25T14:20:42Z",
    "created_at": "2014-04-23T08:45:56Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Bug in is_hamiltonian: non-simple digraphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16214",
    "user": "https://github.com/nathanncohen"
}
```
On top of #16210, there was a problem is `traveling_salesman_problem` for digraphs : the code reordered edges as it was meant for graphs only by applied to generic graphs.

With this fix, the `_scream_if_not_simple` can be removed as the function applies to all graphs.

Nathann

Reviewer: Vincent Delecroix

Author: Nathann Cohen

Branch: 86a556da34a2d62ff127c8ea41599f98dd123990

Dependencies: #16210

Commit: 86a556da34a2d62ff127c8ea41599f98dd123990

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16214





---

archive/issue_comments_207056.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-23T08:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207056",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_207057.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T08:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207058.json:
```json
{
    "body": "<a id='comment:3'></a>Hmmmmm\n\n```\nsage: G = DiGraph(loops=True, multiedges=True)\nsage: G.add_vertex(0)\nsage: G.add_edge(0,0,1)\nsage: G.add_edge(0,0,2)\nsage: G.traveling_salesman_problem(use_edge_labels=True)\nTraceback (most recent call last):\n...\nTypeError: Density is not well-defined for multigraphs.\n```\nPlease start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).\n\n---\nNew commits:",
    "created_at": "2014-04-23T10:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207058",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Hmmmmm

```
sage: G = DiGraph(loops=True, multiedges=True)
sage: G.add_vertex(0)
sage: G.add_edge(0,0,1)
sage: G.add_edge(0,0,2)
sage: G.traveling_salesman_problem(use_edge_labels=True)
Traceback (most recent call last):
...
TypeError: Density is not well-defined for multigraphs.
```
Please start from the public branch, I started some correction in the doc and added the doctest above (that you **have** to modify).

---
New commits:



---

archive/issue_comments_207059.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-23T10:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207059",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207060.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T13:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207061.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-23T13:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207061",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207062.json:
```json
{
    "body": "<a id='comment:6'></a>Here it is !\n\nNathann\n\n---\nNew commits:",
    "created_at": "2014-04-23T13:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207062",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>Here it is !

Nathann

---
New commits:



---

archive/issue_comments_207063.json:
```json
{
    "body": "<a id='comment:7'></a>hmmmmmmmmmmmmmmm\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\n```\nMaybe I am wrong on the definition of hamiltonicity...",
    "created_at": "2014-04-23T13:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207063",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>hmmmmmmmmmmmmmmm

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
```
Maybe I am wrong on the definition of hamiltonicity...



---

archive/issue_comments_207064.json:
```json
{
    "body": "<a id='comment:8'></a>Even better\n\n```\nsage: G = DiGraph(loops=True)\nsage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops\nsage: G.is_hamiltonian()\nFalse\nsage: G.remove_loops()\nsage: G.is_hamiltonian()\nTrue\nsage: G.allow_loops(False)\nsage: G.is_hamiltonian()\nFalse\n```",
    "created_at": "2014-04-23T13:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207064",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>Even better

```
sage: G = DiGraph(loops=True)
sage: G.add_edges([(0,0),(0,1),(1,1),(1,0)])  # i.e. complete digraph with loops
sage: G.is_hamiltonian()
False
sage: G.remove_loops()
sage: G.is_hamiltonian()
True
sage: G.allow_loops(False)
sage: G.is_hamiltonian()
False
```



---

archive/issue_comments_207065.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-23T13:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207065",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207066.json:
```json
{
    "body": "<a id='comment:9'></a>...........\n\nNo you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n\nI cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\nNathann",
    "created_at": "2014-04-23T13:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207066",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>...........

No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.

I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.

Nathann



---

archive/issue_comments_207067.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 ncohen]:\n> ...........\n> \n> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.\n> \n> I cannot express how much I hate to make code messy just because of those #(*&%\u00f4*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.\n\n\nMy last example is a digraph not a multigraph... isn't it?",
    "created_at": "2014-04-23T13:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207067",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>Replying to [comment:9 ncohen]:
> ...........
> 
> No you are right, we are not allowed to remove parallel edges when the graph has exactly two vertices.
> 
> I cannot express how much I hate to make code messy just because of those #(*&%ô*&%&*(#(*&^ MULTIGRAPHS. Cannot stand that.


My last example is a digraph not a multigraph... isn't it?



---

archive/issue_comments_207068.json:
```json
{
    "body": "<a id='comment:11'></a>No it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :\n\n```\nsage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()\n```\n\nUnfortunately, not only does it NOT return \"True\" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.\n\nNathann",
    "created_at": "2014-04-23T13:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207068",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>No it isn't,my latest comment was a mistake. Because I was thinking of how the code is written, and it made me think that it would return False on the following instance :

```
sage: Graph([(0,1),(0,1)],multiedges=True).is_hamiltonian()
```

Unfortunately, not only does it NOT return "True" as it should, but it produces another bug. And I am sick and tired of fixing bugs for graphs I never ever use, i.e. f**** looped graphs with multiples edges.

Nathann



---

archive/issue_comments_207069.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T14:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207070.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-23T14:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207070",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207071.json:
```json
{
    "body": "<a id='comment:13'></a>It's ugly as hell and I do not know how I could write it better.\n\nSome of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.\n\nNathann",
    "created_at": "2014-04-23T14:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207071",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>It's ugly as hell and I do not know how I could write it better.

Some of the LP below assume that parallel edges will never be used. And this is true, except when the input has exactly two vertices.

Nathann



---

archive/issue_comments_207072.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-23T14:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207072",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207073.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-23T14:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207073",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_207074.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-23T14:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207074",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207075.json:
```json
{
    "body": "<a id='comment:17'></a>1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.\n\n2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.",
    "created_at": "2014-04-23T16:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207075",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>1) You forgot graphs on 1 vertex. As I was sure you would complain (and I am a smart guy) I did it.

2) You forgot the graph on 0 vertex. For this one, the hamiltonicity depends on the definition of cycle. For me an empty cycle is a vertex, but this is perhaps not common in the graph community. So please further edit my commit.

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set `use_edge_labels=True` then my `0` will automatically become `1`.



---

archive/issue_comments_207076.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-23T16:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207076",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207077.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T16:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207078.json:
```json
{
    "body": "<a id='comment:19'></a>Well... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For \"order == 0\", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.\n\nNathann",
    "created_at": "2014-04-23T18:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207078",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>Well... For me a graph with a single vertex and no edges is hamiltonian too. But really I could not care less, I am pretty sure that all softwares implement different conventions. For "order == 0", please return the graph itself. It is just not defined... Actually I would say that for `order < 2` the best is to raise an exception, saying that we have no idea what to do with those inputs ... If there is no clear definition, the best is to tell the user that he should settle the draw by himself.

Nathann



---

archive/issue_comments_207079.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T19:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207079",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207080.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T19:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207080",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207081.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T19:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207081",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207082.json:
```json
{
    "body": "<a id='comment:23'></a>I am waiting for the doctests... but what about\n\n3) I am not convinced with\n\n```\nweight = lambda l : l if (l is not None and l) else 1\n```\nFirst of all as None evaluates to False, hence you can shorten it as\n\n```\nweight = lambda l: l if l else 1\n```\nwhich I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.",
    "created_at": "2014-04-23T19:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207082",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>I am waiting for the doctests... but what about

3) I am not convinced with

```
weight = lambda l : l if (l is not None and l) else 1
```
First of all as None evaluates to False, hence you can shorten it as

```
weight = lambda l: l if l else 1
```
which I definitely love ;-) On the other hand, it is not written anywhere that if I put a weight 0 and set use_edge_labels=True then my 0 will automatically become 1.



---

archive/issue_comments_207083.json:
```json
{
    "body": "<a id='comment:24'></a>Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\nNathann",
    "created_at": "2014-04-23T19:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207083",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`

Nathann



---

archive/issue_comments_207084.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 ncohen]:\n> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write \"l if l is not None else 1\". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`\n\n\nYes. Doing work in the back of the user is not good practice. So possibilities are\n- 1) \"1 if l is None else l\" (we save one word with that version)\n- 2) simply remove weight\nI am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?",
    "created_at": "2014-04-23T19:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207084",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>Replying to [comment:24 ncohen]:
> Oh. You are right there, a 0 should mean 0 and nothing else. There was also this problem of NetworkX graph whose default edge label is a `{}`, it caused us some trouble. I think we should write "l if l is not None else 1". But really, changing those None to 1 is already going too far to repair a badly formatted input `:-/`


Yes. Doing work in the back of the user is not good practice. So possibilities are
- 1) "1 if l is None else l" (we save one word with that version)
- 2) simply remove weight
I am in favor of 2). I did not check if the algorithm actually work if there are some `0`, do you know if it does?



---

archive/issue_comments_207085.json:
```json
{
    "body": "<a id='comment:26'></a>The algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.\n\nI think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.\n\nNathann",
    "created_at": "2014-04-23T19:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207085",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>The algorithm works with zeroes, with negative numbers, with anything. The Linear Program really do not care what the weights are, as long as they can be converted into floats.

I think that we could live well with 1) (especially since this problem occurs in several different functions). You can chose 2 if you prefer, but some doctests may break.

Nathann



---

archive/issue_comments_207086.json:
```json
{
    "body": "<a id='comment:27'></a>Okay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.\n\nVincent",
    "created_at": "2014-04-23T20:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207086",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>Okay. Let's go for 1). If you do not do the change in the next hour I will do it (my sage is compiling again... grrr). And if you do, add some spec in the doc.

Vincent



---

archive/issue_comments_207087.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T21:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207088.json:
```json
{
    "body": "<a id='comment:29'></a>Ok, done... needs review.",
    "created_at": "2014-04-23T21:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207088",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>Ok, done... needs review.



---

archive/issue_comments_207089.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-23T21:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207089",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207090.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-23T22:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207091.json:
```json
{
    "body": "<a id='comment:31'></a>All tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !\n\nNathann",
    "created_at": "2014-04-23T22:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207091",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'></a>All tests pass. If you agree with this last commit, you can set the patch to `positive_review`. Thank you for your help !

Nathann



---

archive/issue_comments_207092.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-23T22:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207092",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_207093.json:
```json
{
    "body": "<a id='comment:32'></a>Perfect! Your english is better than mine!\n\nVincent",
    "created_at": "2014-04-23T22:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207093",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'></a>Perfect! Your english is better than mine!

Vincent



---

archive/issue_events_047790.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-25T14:20:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16214#event-47790"
}
```



---

archive/issue_comments_207094.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-25T14:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16214#issuecomment-207094",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
