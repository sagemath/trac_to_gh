# Issue 16342: DirichletGroup broken over rings with unhashable coefficients

archive/issues_016105.json:
```json
{
    "body": "The following fails\n\n```\nsage: K.<a> = Qq(9)\nsage: DirichletGroup(1,zeta=K(-1),base_ring=K,zeta_order=2)\nTypeError\n```\n\nKeywords: days71\n\nWork Issues: probably does not work anymore\n\nReviewer: Aly Deines\n\nAuthor: Julian R\u00fcth\n\nBranch: u/saraedum/ticket/16342\n\nStatus: needs_work\n\nDependencies: #16317, #15692\n\nCommit: b3f50f1d949fa86e10b856e371a45e7a634331fc\n\nIssue created by migration from https://trac.sagemath.org/ticket/16342\n\n",
    "created_at": "2014-05-12T23:34:08Z",
    "labels": [
        "component: modular forms",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "DirichletGroup broken over rings with unhashable coefficients",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16342",
    "user": "https://github.com/saraedum"
}
```
The following fails

```
sage: K.<a> = Qq(9)
sage: DirichletGroup(1,zeta=K(-1),base_ring=K,zeta_order=2)
TypeError
```

Keywords: days71

Work Issues: probably does not work anymore

Reviewer: Aly Deines

Author: Julian RÃ¼th

Branch: u/saraedum/ticket/16342

Status: needs_work

Dependencies: #16317, #15692

Commit: b3f50f1d949fa86e10b856e371a45e7a634331fc

Issue created by migration from https://trac.sagemath.org/ticket/16342





---

archive/issue_comments_268279.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/ticket/16342\"",
    "created_at": "2014-05-13T00:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268279",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/ticket/16342"



---

archive/issue_comments_268280.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#16317\"",
    "created_at": "2014-05-13T00:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268280",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "" to "#16317"



---

archive/issue_comments_268281.json:
```json
{
    "body": "Changing author from \"\" to \"Julian Rueth\"",
    "created_at": "2014-05-13T00:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268281",
    "user": "https://github.com/saraedum"
}
```

Changing author from "" to "Julian Rueth"



---

archive/issue_comments_268282.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-13T00:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268282",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_events_048166.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16342#event-48166"
}
```



---

archive/issue_comments_268283.json:
```json
{
    "body": "Changing commit from \"\" to \"8b7a3f64dc447cc1fe5b65b52d6e60eeae337548\"",
    "created_at": "2015-05-06T09:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268283",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "8b7a3f64dc447cc1fe5b65b52d6e60eeae337548"



---

archive/issue_comments_268284.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhat's the relation between #16342 and #16258? In any case, needs rebasing.",
    "created_at": "2015-05-06T09:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268284",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
What's the relation between #16342 and #16258? In any case, needs rebasing.



---

archive/issue_comments_268285.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-06T09:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268285",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_268286.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[69c1cdc](http://git.sagemath.org/sage.git/commit/?id=69c1cdc0033ce32d12700f829bd10afc7ce35e5e)|`Merge branch 'develop' into t/16342/ticket/16342`|\n|[677a927](http://git.sagemath.org/sage.git/commit/?id=677a9271e765b67702a2859d6345eaeb9ed65948)|`Made output of DirichletGroup test case stable`|",
    "created_at": "2015-10-04T22:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[69c1cdc](http://git.sagemath.org/sage.git/commit/?id=69c1cdc0033ce32d12700f829bd10afc7ce35e5e)|`Merge branch 'develop' into t/16342/ticket/16342`|
|[677a927](http://git.sagemath.org/sage.git/commit/?id=677a9271e765b67702a2859d6345eaeb9ed65948)|`Made output of DirichletGroup test case stable`|



---

archive/issue_comments_268287.json:
```json
{
    "body": "Changing commit from \"8b7a3f64dc447cc1fe5b65b52d6e60eeae337548\" to \"677a9271e765b67702a2859d6345eaeb9ed65948\"",
    "created_at": "2015-10-04T22:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8b7a3f64dc447cc1fe5b65b52d6e60eeae337548" to "677a9271e765b67702a2859d6345eaeb9ed65948"



---

archive/issue_comments_268288.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-04T22:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268288",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_268289.json:
```json
{
    "body": "<a id='comment:9'></a>\nNote: this also appears to be fixed by #6018.",
    "created_at": "2015-10-05T10:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268289",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:9'></a>
Note: this also appears to be fixed by #6018.



---

archive/issue_comments_268290.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-05T10:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268290",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_268291.json:
```json
{
    "body": "<a id='comment:10'></a>\nThere are doctest failures, see the patchbot report.",
    "created_at": "2015-10-05T10:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268291",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:10'></a>
There are doctest failures, see the patchbot report.



---

archive/issue_comments_268292.json:
```json
{
    "body": "Changing dependencies from \"#16317\" to \"#16317, #15692\"",
    "created_at": "2015-10-10T02:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268292",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#16317" to "#16317, #15692"



---

archive/issue_comments_268293.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe cache can currently not be pickled if it contains p-adics. #15692 sort of fixes this, but once this gets merged, I need to change the `__setstate__` in here to restore the cache.",
    "created_at": "2015-10-10T02:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268293",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>
The cache can currently not be pickled if it contains p-adics. #15692 sort of fixes this, but once this gets merged, I need to change the `__setstate__` in here to restore the cache.



---

archive/issue_comments_268294.json:
```json
{
    "body": "Changing commit from \"677a9271e765b67702a2859d6345eaeb9ed65948\" to \"f0d91d4a0519d080b414b35de2f5462a63fb82fa\"",
    "created_at": "2016-03-23T01:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "677a9271e765b67702a2859d6345eaeb9ed65948" to "f0d91d4a0519d080b414b35de2f5462a63fb82fa"



---

archive/issue_comments_268295.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[f0d91d4](http://git.sagemath.org/sage.git/commit/?id=f0d91d4a0519d080b414b35de2f5462a63fb82fa)|`Merge branch 'develop' into t/16342/ticket/16342`|",
    "created_at": "2016-03-23T01:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[f0d91d4](http://git.sagemath.org/sage.git/commit/?id=f0d91d4a0519d080b414b35de2f5462a63fb82fa)|`Merge branch 'develop' into t/16342/ticket/16342`|



---

archive/issue_comments_268296.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-23T01:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268296",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_268297.json:
```json
{
    "body": "<a id='comment:14'></a>\nLooks good.",
    "created_at": "2016-03-23T12:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268297",
    "user": "https://github.com/adeines"
}
```

<a id='comment:14'></a>
Looks good.



---

archive/issue_comments_268298.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Aly Deines\"",
    "created_at": "2016-03-23T12:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268298",
    "user": "https://github.com/adeines"
}
```

Changing reviewer from "" to "Aly Deines"



---

archive/issue_comments_268299.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-23T12:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268299",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_268300.json:
```json
{
    "body": "Changing keywords from \"\" to \"days71\".",
    "created_at": "2016-03-31T16:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268300",
    "user": "https://github.com/jbalakrishnan"
}
```

Changing keywords from "" to "days71".



---

archive/issue_comments_268301.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-04-12T22:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268301",
    "user": "https://github.com/pjbruin"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_268302.json:
```json
{
    "body": "<a id='comment:16'></a>\nMerge conflict with #6018.",
    "created_at": "2016-04-12T22:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268302",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:16'></a>
Merge conflict with #6018.



---

archive/issue_comments_268303.json:
```json
{
    "body": "Changing commit from \"f0d91d4a0519d080b414b35de2f5462a63fb82fa\" to \"b3f50f1d949fa86e10b856e371a45e7a634331fc\"",
    "created_at": "2017-07-21T19:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f0d91d4a0519d080b414b35de2f5462a63fb82fa" to "b3f50f1d949fa86e10b856e371a45e7a634331fc"



---

archive/issue_comments_268304.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[b3f50f1](https://git.sagemath.org/sage.git/commit/?id=b3f50f1d949fa86e10b856e371a45e7a634331fc)|`Merge remote-tracking branch 'origin/develop' into t/16342/ticket/16342`|",
    "created_at": "2017-07-21T19:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[b3f50f1](https://git.sagemath.org/sage.git/commit/?id=b3f50f1d949fa86e10b856e371a45e7a634331fc)|`Merge remote-tracking branch 'origin/develop' into t/16342/ticket/16342`|



---

archive/issue_comments_268305.json:
```json
{
    "body": "<a id='comment:18'></a>\nNew commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[b3f50f1](https://git.sagemath.org/sage.git/commit?id=b3f50f1d949fa86e10b856e371a45e7a634331fc)|`Merge remote-tracking branch 'origin/develop' into t/16342/ticket/16342`|",
    "created_at": "2017-07-21T19:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268305",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:18'></a>
New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[b3f50f1](https://git.sagemath.org/sage.git/commit?id=b3f50f1d949fa86e10b856e371a45e7a634331fc)|`Merge remote-tracking branch 'origin/develop' into t/16342/ticket/16342`|



---

archive/issue_comments_268306.json:
```json
{
    "body": "Changing work_issues from \"\" to \"probably does not work anymore\"",
    "created_at": "2017-07-21T19:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268306",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "probably does not work anymore"



---

archive/issue_comments_268307.json:
```json
{
    "body": "Changing author from \"Julian Rueth\" to \"Julian R\u00fcth\"",
    "created_at": "2017-07-21T19:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16342",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16342#issuecomment-268307",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Julian Rueth" to "Julian RÃ¼th"
