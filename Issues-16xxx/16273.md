# Issue 16273: update README

archive/issues_016036.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/16273\n\n",
    "closed_at": "2014-05-04T13:56:22Z",
    "created_at": "2014-05-01T18:28:26Z",
    "labels": [
        "component: documentation",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "update README",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16273",
    "user": "https://github.com/vbraun"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/16273





---

archive/issue_comments_208288.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-05-01T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208288",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_208289.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-05-01T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208289",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_208290.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to documentation.",
    "created_at": "2014-05-01T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208290",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to documentation.



---

archive/issue_comments_208291.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-01T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208291",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208292.json:
```json
{
    "body": "Fantastic!  Here's a few very small remarks/typos (see below).  Once addressed, this should get a positive review.\n\n- Could we change \"6. OPTIONAL: Type \"make ptest\" to test all examples in the documentation (over 93,000 lines of input!)\" to \"6. OPTIONAL: Type \"make ptest\" to test all examples in the documentation (over 200,000 lines of input!)\", since:\n\n```\n/usr/local/sage/current/src/sage$ grep -r sage: * | grep -v \\.c: | grep -v \\.cpp | wc -l\n212574\n```\n\n- \"First, install OpenSSL and the OpenSSL development headers on your system if they are not already.\" --> \"First, install OpenSSL and the OpenSSL development headers on your system if they are not already installed.\" \n\n- \"install.log       Full intall log\" -> \"install.log       Full install log\"\n\n- I'm glad there is a \"DIRECTORY LAYOUT\" section.  It's not quite perfect, though.   For example, my first question to sage-devel is \"where is the temporary build directory when installing packages? (used to be spkg/build)\". Looking at DIRECTORY LAYOUT one finds that SAGE_ROOT/tmp is described as \"Temporary files when building Sage\", which suggests that should be the answer to my question.  However, it just isn't, since, e.g., R is built in \"local/var/tmp/sage/build/r-3.0.2.p1\".  And there's no symlink involved here either.   This question isn't answered either: \"where are the databases? (used to be data/)\".",
    "created_at": "2014-05-01T19:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208292",
    "user": "https://github.com/williamstein"
}
```

Fantastic!  Here's a few very small remarks/typos (see below).  Once addressed, this should get a positive review.

- Could we change "6. OPTIONAL: Type "make ptest" to test all examples in the documentation (over 93,000 lines of input!)" to "6. OPTIONAL: Type "make ptest" to test all examples in the documentation (over 200,000 lines of input!)", since:

```
/usr/local/sage/current/src/sage$ grep -r sage: * | grep -v \.c: | grep -v \.cpp | wc -l
212574
```

- "First, install OpenSSL and the OpenSSL development headers on your system if they are not already." --> "First, install OpenSSL and the OpenSSL development headers on your system if they are not already installed." 

- "install.log       Full intall log" -> "install.log       Full install log"

- I'm glad there is a "DIRECTORY LAYOUT" section.  It's not quite perfect, though.   For example, my first question to sage-devel is "where is the temporary build directory when installing packages? (used to be spkg/build)". Looking at DIRECTORY LAYOUT one finds that SAGE_ROOT/tmp is described as "Temporary files when building Sage", which suggests that should be the answer to my question.  However, it just isn't, since, e.g., R is built in "local/var/tmp/sage/build/r-3.0.2.p1".  And there's no symlink involved here either.   This question isn't answered either: "where are the databases? (used to be data/)".



---

archive/issue_comments_208293.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-01T19:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208293",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_208294.json:
```json
{
    "body": "I just don't think that many people want to hear where temporary files are during build. If something goes wrong then the error log already tells you where to go to try to fix it up.",
    "created_at": "2014-05-01T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208294",
    "user": "https://github.com/vbraun"
}
```

I just don't think that many people want to hear where temporary files are during build. If something goes wrong then the error log already tells you where to go to try to fix it up.



---

archive/issue_comments_208295.json:
```json
{
    "body": "I actually don't think `SAGE_ROOT/tmp` is used in the build process (anymore?). At least I don't recall seeing anything about it (other than its creation) when working on the git transition.",
    "created_at": "2014-05-01T19:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208295",
    "user": "https://github.com/ohanar"
}
```

I actually don't think `SAGE_ROOT/tmp` is used in the build process (anymore?). At least I don't recall seeing anything about it (other than its creation) when working on the git transition.



---

archive/issue_comments_208296.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T19:53:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208297.json:
```json
{
    "body": "Replying to [comment:6 ohanar]:\n> I actually don't think `SAGE_ROOT/tmp` is used in the build process \n\n\nAgree, seems to be unnecessary.",
    "created_at": "2014-05-01T19:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208297",
    "user": "https://github.com/vbraun"
}
```

Replying to [comment:6 ohanar]:
> I actually don't think `SAGE_ROOT/tmp` is used in the build process 


Agree, seems to be unnecessary.



---

archive/issue_comments_208298.json:
```json
{
    "body": "The build directory is documented (somewhat) in the installation guide, but it's out-of-date: look at http://www.sagemath.org/doc/installation/source.html#environment-variables, under `SAGE_BUILD_DIR` and also `SAGE_KEEP_BUILT_SPKGS`. (The discussion of the variable `SAGE_SERVER` also refers to the `spkg` directory, by the way, and there are two references to the `devel` directory.) That should be fixed, too. Here? Another ticket?",
    "created_at": "2014-05-01T20:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208298",
    "user": "https://github.com/jhpalmieri"
}
```

The build directory is documented (somewhat) in the installation guide, but it's out-of-date: look at http://www.sagemath.org/doc/installation/source.html#environment-variables, under `SAGE_BUILD_DIR` and also `SAGE_KEEP_BUILT_SPKGS`. (The discussion of the variable `SAGE_SERVER` also refers to the `spkg` directory, by the way, and there are two references to the `devel` directory.) That should be fixed, too. Here? Another ticket?



---

archive/issue_comments_208299.json:
```json
{
    "body": "Here are some suggested changes to the installation guide. \n\n```diff\ndiff --git a/src/doc/en/installation/source.rst b/src/doc/en/installation/source.rst\nindex a848cc2..a7d2c2b 100644\n--- a/src/doc/en/installation/source.rst\n+++ b/src/doc/en/installation/source.rst\n@@ -886,9 +886,10 @@ Here are some of the more commonly used variables affecting the build process:\n   and uses more memory and disk space than using MathJax.\n \n - :envvar:`SAGE_BUILD_DIR` - the default behavior is to build each spkg in a\n-  subdirectory of :file:`$SAGE_ROOT/spkg/build/`; for example, build\n+  subdirectory of :file:`$SAGE_ROOT/local/var/tmp/sage/build/`; for\n+  example, build\n   :file:`atlas-3.8.3.p12.spkg` in the directory\n-  :file:`$SAGE_ROOT/spkg/build/atlas-3.8.3.p12/`.\n+  :file:`$SAGE_ROOT/local/var/tmp/sage/build/atlas-3.8.3.p12/`.\n   If this variable is set, then build in\n   :file:`$SAGE_BUILD_DIR/atlas-3.8.3.p12/` instead.\n   If the directory :file:`$SAGE_BUILD_DIR` does not exist, it is created.\n@@ -909,7 +910,8 @@ Here are some of the more commonly used variables affecting the build process:\n \n - :envvar:`SAGE_KEEP_BUILT_SPKGS` - the default behavior is to delete each\n   build directory -- the appropriate subdirectory of\n-  :file:`$SAGE_ROOT/spkg/build` or :file:`$SAGE_BUILD_DIR` -- after each spkg\n+  :file:`$SAGE_ROOT/local/var/tmp/sage/build` or\n+  :file:`$SAGE_BUILD_DIR` -- after each spkg\n   is successfully built, and to keep it if there were errors installing the\n   spkg.\n   Set this variable to ``yes`` to keep the subdirectory regardless.\n@@ -917,7 +919,8 @@ Here are some of the more commonly used variables affecting the build process:\n   corresponding subdirectory, for example left over from a previous build,\n   then the default behavior is to delete that old subdirectory.\n   If this variable is set to ``yes``, then the old subdirectory is moved to\n-  :file:`$SAGE_ROOT/spkg/build/old/` (or :file:`$SAGE_BUILD_DIR/old`),\n+  :file:`$SAGE_ROOT/local/var/tmp/sage/build/old/`\n+  (or :file:`$SAGE_BUILD_DIR/old`),\n   overwriting any already existing file or directory with the same name.\n \n   .. note::\n@@ -1106,13 +1109,13 @@ Sage uses the following environment variables when it runs:\n   If you wish to set up your own server, then note that Sage will search the\n   directories:\n \n-  - ``SAGE_SERVER/packages/standard/``,\n-  - ``SAGE_SERVER/packages/optional/``,\n-  - ``SAGE_SERVER/packages/experimental/``,\n-  - and ``SAGE_SERVER/packages/archive/``\n+  - ``SAGE_SERVER/spkg/standard/``,\n+  - ``SAGE_SERVER/spkg/optional/``,\n+  - ``SAGE_SERVER/spkg/experimental/``,\n+  - and ``SAGE_SERVER/spkg/archive/``\n \n   for packages.\n-  See the script :file:`$SAGE_ROOT/spkg/bin/sage-spkg` for the implementation.\n+  See the script :file:`$SAGE_ROOT/src/bin/sage-spkg` for the implementation.\n \n - :envvar:`SAGE_PATH` - a colon-separated list of directories which Sage\n   searches when trying to locate Python libraries.\n@@ -1129,7 +1132,7 @@ Sage uses the following environment variables when it runs:\n   set the :envvar:`DYLD_LIBRARY_PATH` variable.\n \n - :envvar:`SAGE_CBLAS` - used in the file\n-  :file:`SAGE_ROOT/devel/sage/sage/misc/cython.py`.\n+  :file:`SAGE_ROOT/src/sage/misc/cython.py`.\n   Set this to the base name of the BLAS library file on your system if you want\n   to override the default setting.\n   That is, if the relevant file is called :file:`libcblas_new.so` or\n@@ -1159,7 +1162,7 @@ Variables dealing with doctesting:\n   jar, set this to something non-empty and run the doctest suite.\n   See the documentation for the functions :func:`picklejar` and\n   :func:`unpickle_all` in\n-  :file:`$SAGE_ROOT/devel/sage/sage/structure/sage_object.pyx`, online\n+  :file:`$SAGE_ROOT/src/sage/structure/sage_object.pyx`, online\n   `here (picklejar)\n   <http://sagemath.org/doc/reference/sage/structure/sage_object.html#sage.structure.sage_object.picklejar>`_\n   and `here (unpickle_all)\n@@ -1287,4 +1290,4 @@ would be appropriate if you have a Core i3/5/7 processor with AVX support.\n \n \n \n-**This page was last updated in October 2013 (Sage 5.12).**\n+**This page was last updated in May 2014 (Sage 6.2).**\n```\nThere are other parts which are probably outdated:\n\n```\n  As of this writing (Sage 4.8), when building the standard Sage packages,\n  1.5 gigabytes of free space are required in this directory (or more if\n  ``SAGE_KEEP_BUILT_SPKGS=yes`` -- see below); the exact amount of required\n  space varies from platform to platform.\n```\nand\n\n```\n      After a full build of Sage (as of version 4.8), these subdirectories can\n      take up to 6 gigabytes of storage, in total, depending on the platform\n      and the block size of the file system.\n```\nI don't know what these storage requirements should be now, but it's not as important as the other changes being discussed here.",
    "created_at": "2014-05-01T20:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208299",
    "user": "https://github.com/jhpalmieri"
}
```

Here are some suggested changes to the installation guide. 

```diff
diff --git a/src/doc/en/installation/source.rst b/src/doc/en/installation/source.rst
index a848cc2..a7d2c2b 100644
--- a/src/doc/en/installation/source.rst
+++ b/src/doc/en/installation/source.rst
@@ -886,9 +886,10 @@ Here are some of the more commonly used variables affecting the build process:
   and uses more memory and disk space than using MathJax.
 
 - :envvar:`SAGE_BUILD_DIR` - the default behavior is to build each spkg in a
-  subdirectory of :file:`$SAGE_ROOT/spkg/build/`; for example, build
+  subdirectory of :file:`$SAGE_ROOT/local/var/tmp/sage/build/`; for
+  example, build
   :file:`atlas-3.8.3.p12.spkg` in the directory
-  :file:`$SAGE_ROOT/spkg/build/atlas-3.8.3.p12/`.
+  :file:`$SAGE_ROOT/local/var/tmp/sage/build/atlas-3.8.3.p12/`.
   If this variable is set, then build in
   :file:`$SAGE_BUILD_DIR/atlas-3.8.3.p12/` instead.
   If the directory :file:`$SAGE_BUILD_DIR` does not exist, it is created.
@@ -909,7 +910,8 @@ Here are some of the more commonly used variables affecting the build process:
 
 - :envvar:`SAGE_KEEP_BUILT_SPKGS` - the default behavior is to delete each
   build directory -- the appropriate subdirectory of
-  :file:`$SAGE_ROOT/spkg/build` or :file:`$SAGE_BUILD_DIR` -- after each spkg
+  :file:`$SAGE_ROOT/local/var/tmp/sage/build` or
+  :file:`$SAGE_BUILD_DIR` -- after each spkg
   is successfully built, and to keep it if there were errors installing the
   spkg.
   Set this variable to ``yes`` to keep the subdirectory regardless.
@@ -917,7 +919,8 @@ Here are some of the more commonly used variables affecting the build process:
   corresponding subdirectory, for example left over from a previous build,
   then the default behavior is to delete that old subdirectory.
   If this variable is set to ``yes``, then the old subdirectory is moved to
-  :file:`$SAGE_ROOT/spkg/build/old/` (or :file:`$SAGE_BUILD_DIR/old`),
+  :file:`$SAGE_ROOT/local/var/tmp/sage/build/old/`
+  (or :file:`$SAGE_BUILD_DIR/old`),
   overwriting any already existing file or directory with the same name.
 
   .. note::
@@ -1106,13 +1109,13 @@ Sage uses the following environment variables when it runs:
   If you wish to set up your own server, then note that Sage will search the
   directories:
 
-  - ``SAGE_SERVER/packages/standard/``,
-  - ``SAGE_SERVER/packages/optional/``,
-  - ``SAGE_SERVER/packages/experimental/``,
-  - and ``SAGE_SERVER/packages/archive/``
+  - ``SAGE_SERVER/spkg/standard/``,
+  - ``SAGE_SERVER/spkg/optional/``,
+  - ``SAGE_SERVER/spkg/experimental/``,
+  - and ``SAGE_SERVER/spkg/archive/``
 
   for packages.
-  See the script :file:`$SAGE_ROOT/spkg/bin/sage-spkg` for the implementation.
+  See the script :file:`$SAGE_ROOT/src/bin/sage-spkg` for the implementation.
 
 - :envvar:`SAGE_PATH` - a colon-separated list of directories which Sage
   searches when trying to locate Python libraries.
@@ -1129,7 +1132,7 @@ Sage uses the following environment variables when it runs:
   set the :envvar:`DYLD_LIBRARY_PATH` variable.
 
 - :envvar:`SAGE_CBLAS` - used in the file
-  :file:`SAGE_ROOT/devel/sage/sage/misc/cython.py`.
+  :file:`SAGE_ROOT/src/sage/misc/cython.py`.
   Set this to the base name of the BLAS library file on your system if you want
   to override the default setting.
   That is, if the relevant file is called :file:`libcblas_new.so` or
@@ -1159,7 +1162,7 @@ Variables dealing with doctesting:
   jar, set this to something non-empty and run the doctest suite.
   See the documentation for the functions :func:`picklejar` and
   :func:`unpickle_all` in
-  :file:`$SAGE_ROOT/devel/sage/sage/structure/sage_object.pyx`, online
+  :file:`$SAGE_ROOT/src/sage/structure/sage_object.pyx`, online
   `here (picklejar)
   <http://sagemath.org/doc/reference/sage/structure/sage_object.html#sage.structure.sage_object.picklejar>`_
   and `here (unpickle_all)
@@ -1287,4 +1290,4 @@ would be appropriate if you have a Core i3/5/7 processor with AVX support.
 
 
 
-**This page was last updated in October 2013 (Sage 5.12).**
+**This page was last updated in May 2014 (Sage 6.2).**
```
There are other parts which are probably outdated:

```
  As of this writing (Sage 4.8), when building the standard Sage packages,
  1.5 gigabytes of free space are required in this directory (or more if
  ``SAGE_KEEP_BUILT_SPKGS=yes`` -- see below); the exact amount of required
  space varies from platform to platform.
```
and

```
      After a full build of Sage (as of version 4.8), these subdirectories can
      take up to 6 gigabytes of storage, in total, depending on the platform
      and the block size of the file system.
```
I don't know what these storage requirements should be now, but it's not as important as the other changes being discussed here.



---

archive/issue_comments_208300.json:
```json
{
    "body": "John: sounds good to me, are you going to push your branch?",
    "created_at": "2014-05-01T21:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208300",
    "user": "https://github.com/vbraun"
}
```

John: sounds good to me, are you going to push your branch?



---

archive/issue_comments_208301.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2014-05-01T22:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208301",
    "user": "https://github.com/vbraun"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_208302.json:
```json
{
    "body": "Okay, here are my changes. Does this still need work, or have the issues been fixed?\n\n---\nNew commits:",
    "created_at": "2014-05-01T23:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208302",
    "user": "https://github.com/jhpalmieri"
}
```

Okay, here are my changes. Does this still need work, or have the issues been fixed?

---
New commits:



---

archive/issue_comments_208303.json:
```json
{
    "body": "Sorry, I'm still not used to git. I thought my branch would include Volker's original changes, but it didn't. What should I have done differently?",
    "created_at": "2014-05-01T23:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208303",
    "user": "https://github.com/jhpalmieri"
}
```

Sorry, I'm still not used to git. I thought my branch would include Volker's original changes, but it didn't. What should I have done differently?



---

archive/issue_comments_208304.json:
```json
{
    "body": "No, you did everything correctly. Your commit is on top of mine...",
    "created_at": "2014-05-02T19:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208304",
    "user": "https://github.com/vbraun"
}
```

No, you did everything correctly. Your commit is on top of mine...



---

archive/issue_comments_208305.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-05-02T19:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208305",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_047983.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-04T13:56:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16273#event-47983"
}
```



---

archive/issue_comments_208306.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-04T13:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208306",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_208307.json:
```json
{
    "body": "Did anything here help with #5505?  Just askin'.",
    "created_at": "2014-05-20T18:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16273#issuecomment-208307",
    "user": "https://github.com/kcrisman"
}
```

Did anything here help with #5505?  Just askin'.
