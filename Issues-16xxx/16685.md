# Issue 16685: power series reversion using flint

archive/issues_016448.json:
```json
{
    "body": "Adds series reversion for integer and rational flint polynomials\nwhich is much faster than the current implementation for series\nreversion (sage/pari).\n\nSince it is implemented as a method for polynomials the change is\nrather small and non-intrusive (in particular it doesn't require\nto implement power series using flint).\n\nTo use it for power series reversion (at the moment) the series has\nto be converted to a (flint) polynomial first, reverted using\n\"revert_series(n=prec)\" and later be converted back to a power series.\n\nAcknowledgements: Thanks for the help on IRC!\n\nCC:  jpflori\n\nKeywords: flint power series reversion\n\nBranch/Commit: c243b5d90ba31cb21dad55df65981ecca7f93575\n\nReviewer: Jean-Pierre Flori\n\nAuthor: Jonas Jermann\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16685\n\n",
    "closed_at": "2014-07-28T16:27:00Z",
    "created_at": "2014-07-19T23:02:42Z",
    "labels": [
        "component: number theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "power series reversion using flint",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16685",
    "user": "https://github.com/jjermann"
}
```
Adds series reversion for integer and rational flint polynomials
which is much faster than the current implementation for series
reversion (sage/pari).

Since it is implemented as a method for polynomials the change is
rather small and non-intrusive (in particular it doesn't require
to implement power series using flint).

To use it for power series reversion (at the moment) the series has
to be converted to a (flint) polynomial first, reverted using
"revert_series(n=prec)" and later be converted back to a power series.

Acknowledgements: Thanks for the help on IRC!

CC:  jpflori

Keywords: flint power series reversion

Branch/Commit: c243b5d90ba31cb21dad55df65981ecca7f93575

Reviewer: Jean-Pierre Flori

Author: Jonas Jermann

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16685





---

archive/issue_comments_273688.json:
```json
{
    "body": "<a id='comment:1'></a>\nHello,\n\nI have made a new branch based on yours, with a few small cleanup changes.\n\nYou have to put your real name in the `author` field of the ticket (here above).\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[c26bac1](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)|`trac #16685 reviewer patch, adding doctest and putting ValueError in py3 style`|",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273688",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
Hello,

I have made a new branch based on yours, with a few small cleanup changes.

You have to put your real name in the `author` field of the ticket (here above).

---
New commits:
|                                                                                                                                          |                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[c26bac1](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)|`trac #16685 reviewer patch, adding doctest and putting ValueError in py3 style`|



---

archive/issue_comments_273689.json:
```json
{
    "body": "Changing commit from \"36f13335c2a6e11b0cf423d87880312e0ab4a77e\" to \"c26bac1016c12b7ff440886c7bf69a18026a642e\"",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273689",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "36f13335c2a6e11b0cf423d87880312e0ab4a77e" to "c26bac1016c12b7ff440886c7bf69a18026a642e"



---

archive/issue_comments_273690.json:
```json
{
    "body": "Changing branch from \"u/jj/revert_series\" to \"public/ticket/16685\"",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273690",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/jj/revert_series" to "public/ticket/16685"



---

archive/issue_comments_273691.json:
```json
{
    "body": "Changing author from \"jj\" to \"Jonas Jermann\"",
    "created_at": "2014-07-20T16:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273691",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "jj" to "Jonas Jermann"



---

archive/issue_comments_273692.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-07-20T16:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273692",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273693.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-22T08:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273693",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273694.json:
```json
{
    "body": "<a id='comment:3'></a>\nA few remarks:\n* this looks strange:\n\n```\n...revert_series(5+1)\n```\nwhy not put 6 in there?\n* please beautify the docstring `f(self(x)) = ...` using sphinx syntax.\n* the variable name of the power series could be used in `and +1 or -1 as the coefficient for x^1`\n* please put `sig_on/sig_off` around the calls to the FLINT C function calls (unless you're sure it will always be super fast, but I fear it won't be the case for series with a large number of terms/polynomials of high degree).",
    "created_at": "2014-07-22T08:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273694",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
A few remarks:
* this looks strange:

```
...revert_series(5+1)
```
why not put 6 in there?
* please beautify the docstring `f(self(x)) = ...` using sphinx syntax.
* the variable name of the power series could be used in `and +1 or -1 as the coefficient for x^1`
* please put `sig_on/sig_off` around the calls to the FLINT C function calls (unless you're sure it will always be super fast, but I fear it won't be the case for series with a large number of terms/polynomials of high degree).



---

archive/issue_comments_273695.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jean-Pierre Flori\"",
    "created_at": "2014-07-22T08:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273695",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Jean-Pierre Flori"



---

archive/issue_comments_273696.json:
```json
{
    "body": "Changing commit from \"c26bac1016c12b7ff440886c7bf69a18026a642e\" to \"f86776fa69730c79f364d99a1e2514b23ebd31b7\"",
    "created_at": "2014-07-22T11:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c26bac1016c12b7ff440886c7bf69a18026a642e" to "f86776fa69730c79f364d99a1e2514b23ebd31b7"



---

archive/issue_comments_273697.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|\n|[f86776f](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)|`improved documentation/doctests and added sig_on/sig_off, following the suggestions of the review`|",
    "created_at": "2014-07-22T11:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
|[f86776f](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)|`improved documentation/doctests and added sig_on/sig_off, following the suggestions of the review`|



---

archive/issue_comments_273698.json:
```json
{
    "body": "revert_series for finite fields (fails!)",
    "created_at": "2014-07-22T13:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273698",
    "user": "https://github.com/jjermann"
}
```

revert_series for finite fields (fails!)



---

archive/issue_comments_273699.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [zmod_fails.diff](tarball://root/attachments/some-uuid/ticket16685/zmod_fails.diff) by git created at 2014-07-22 14:00:46\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|\n|[315b136](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)|`added support for flint's revert_series over finite fields, more documentation improvements`|",
    "created_at": "2014-07-22T14:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Attachment [zmod_fails.diff](tarball://root/attachments/some-uuid/ticket16685/zmod_fails.diff) by git created at 2014-07-22 14:00:46

Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
|[315b136](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)|`added support for flint's revert_series over finite fields, more documentation improvements`|



---

archive/issue_comments_273700.json:
```json
{
    "body": "Changing commit from \"f86776fa69730c79f364d99a1e2514b23ebd31b7\" to \"315b136a87cd93815bfc43c4455b8e9ec816c921\"",
    "created_at": "2014-07-22T14:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f86776fa69730c79f364d99a1e2514b23ebd31b7" to "315b136a87cd93815bfc43c4455b8e9ec816c921"



---

archive/issue_comments_273701.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-22T14:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273701",
    "user": "https://github.com/jjermann"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273702.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-28T10:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273702",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273703.json:
```json
{
    "body": "<a id='comment:7'></a>\nLooks quite ok.\nLast rant: please use Python 3 string formatting.",
    "created_at": "2014-07-28T10:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273703",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Looks quite ok.
Last rant: please use Python 3 string formatting.



---

archive/issue_comments_273704.json:
```json
{
    "body": "Changing commit from \"315b136a87cd93815bfc43c4455b8e9ec816c921\" to \"c243b5d90ba31cb21dad55df65981ecca7f93575\"",
    "created_at": "2014-07-28T11:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "315b136a87cd93815bfc43c4455b8e9ec816c921" to "c243b5d90ba31cb21dad55df65981ecca7f93575"



---

archive/issue_comments_273705.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[c243b5d](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)|`using python3 string formatting`|",
    "created_at": "2014-07-28T11:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[c243b5d](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)|`using python3 string formatting`|



---

archive/issue_comments_273706.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-28T11:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273706",
    "user": "https://github.com/jjermann"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273707.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-28T11:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273707",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273708.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-28T16:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273708",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_063386.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-28T16:27:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16685#event-63386"
}
```



---

archive/issue_comments_273709.json:
```json
{
    "body": "Changing branch from \"public/ticket/16685\" to \"c243b5d90ba31cb21dad55df65981ecca7f93575\"",
    "created_at": "2014-07-28T16:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16685#issuecomment-273709",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/ticket/16685" to "c243b5d90ba31cb21dad55df65981ecca7f93575"
