# Issue 16364: Installing ChomP causes ChainComplex to return incorrect answers

archive/issues_016127.json:
```json
{
    "body": "Installing the ChomP package causes `ChainComplex` to give different (and basically wrong) answers.  Here are two examples from the doctests:\n\n```\nsage: C = ChainComplex([matrix(ZZ, 1, 1, [2]), matrix(ZZ, 1, 1), matrix(1, 1, [3])])\nsage: C.torsion_list(5)\n[(2, []), (3, [])]   # Should be [(2, [1]), (3, [3])]\nsage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])\nsage: S.homology(1)\n0    # Should be C140183\n```\nMay be related to #12607 where installing ChomP causes certain 0 dimensional homology groups not to be reported.\n\nCC:  @jhpalmieri @kini\n\nKeywords: chomp\n\nUpstream: Reported upstream. No feedback yet.\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16364\n\n",
    "closed_at": "2015-08-14T07:34:43Z",
    "created_at": "2014-05-16T16:38:33Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Installing ChomP causes ChainComplex to return incorrect answers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16364",
    "user": "https://github.com/NathanDunfield"
}
```
Installing the ChomP package causes `ChainComplex` to give different (and basically wrong) answers.  Here are two examples from the doctests:

```
sage: C = ChainComplex([matrix(ZZ, 1, 1, [2]), matrix(ZZ, 1, 1), matrix(1, 1, [3])])
sage: C.torsion_list(5)
[(2, []), (3, [])]   # Should be [(2, [1]), (3, [3])]
sage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])
sage: S.homology(1)
0    # Should be C140183
```
May be related to #12607 where installing ChomP causes certain 0 dimensional homology groups not to be reported.

CC:  @jhpalmieri @kini

Keywords: chomp

Upstream: Reported upstream. No feedback yet.

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16364





---

archive/issue_events_054838.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54838"
}
```



---

archive/issue_comments_273402.json:
```json
{
    "body": "<a id='comment:2'></a>\nI poked around a bit.  In the first example, the issue seems to be that the wrapper is misparsing the correct output of \"homchain\".  In the second example, \"homchain\" outputs the following abort message (due to integer overflow, I think) which is ignored by the wrapper. \n\n[Tech info: chain 24, addr 8, intgr 2.]\nReading a chain complex from 'bad.txt'...\nTime used so far: 0.00 sec (0.000 min).\nThe ring of coefficients is the ring of integers.\nComputing the homology of the chain complex...\nReducing D_1: 0 +ERROR: Number out of range (*).",
    "created_at": "2015-02-02T14:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273402",
    "user": "https://github.com/NathanDunfield"
}
```

<a id='comment:2'></a>
I poked around a bit.  In the first example, the issue seems to be that the wrapper is misparsing the correct output of "homchain".  In the second example, "homchain" outputs the following abort message (due to integer overflow, I think) which is ignored by the wrapper. 

[Tech info: chain 24, addr 8, intgr 2.]
Reading a chain complex from 'bad.txt'...
Time used so far: 0.00 sec (0.000 min).
The ring of coefficients is the ring of integers.
Computing the homology of the chain complex...
Reducing D_1: 0 +ERROR: Number out of range (*).



---

archive/issue_comments_273403.json:
```json
{
    "body": "<a id='comment:3'></a>\nPossibly related: http://ask.sagemath.org/question/26550/make-ptest-best-way-to-fix-errors/",
    "created_at": "2015-04-19T01:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273403",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
Possibly related: http://ask.sagemath.org/question/26550/make-ptest-best-way-to-fix-errors/



---

archive/issue_comments_273404.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2015-07-07T20:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273404",
    "user": "https://github.com/jhpalmieri"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_273405.json:
```json
{
    "body": "<a id='comment:4'></a>\nSeveral comments: first, there is a new version of CHomP: see https://github.com/shaunharker/CHomP, but it does not fix these problems (at least the second one: the first is a problem with Sage's interface with CHomP, so that's our fault). Second, because of the second problem, we obviously need to catch this kind of error to avoid producing nonsensical answers. (It would also be nice to fix CHomP. I'll email the developer.)",
    "created_at": "2015-07-07T20:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273405",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Several comments: first, there is a new version of CHomP: see https://github.com/shaunharker/CHomP, but it does not fix these problems (at least the second one: the first is a problem with Sage's interface with CHomP, so that's our fault). Second, because of the second problem, we obviously need to catch this kind of error to avoid producing nonsensical answers. (It would also be nice to fix CHomP. I'll email the developer.)



---

archive/issue_comments_273406.json:
```json
{
    "body": "<a id='comment:5'></a>\nWe probably should fix #12607 now that optional spkgs are always tested, and we can do a version bump of CHomP (along with making it a new-style spkg).",
    "created_at": "2015-07-07T21:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273406",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
We probably should fix #12607 now that optional spkgs are always tested, and we can do a version bump of CHomP (along with making it a new-style spkg).



---

archive/issue_comments_273407.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt would also be good to deal with #15202, but that's a more complicated project.",
    "created_at": "2015-07-08T21:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273407",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
It would also be good to deal with #15202, but that's a more complicated project.



---

archive/issue_comments_273408.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe first problem is solved by the branch at #12607, that needs review.",
    "created_at": "2015-07-20T10:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273408",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
The first problem is solved by the branch at #12607, that needs review.



---

archive/issue_comments_273409.json:
```json
{
    "body": "Changing keywords from \"\" to \"chomp\".",
    "created_at": "2015-07-20T10:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273409",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "chomp".



---

archive/issue_comments_273410.json:
```json
{
    "body": "<a id='comment:9'></a>\nAnd the second looks indeed like an overflow error in a product inside CHomP. This works\n\n```\nsage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])\nsage: S.homology(algorithm='chomp',verbose=True,base_ring=GF(103))\n```\nHow should we catch the errors of CHomP ?",
    "created_at": "2015-07-20T11:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273410",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
And the second looks indeed like an overflow error in a product inside CHomP. This works

```
sage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])
sage: S.homology(algorithm='chomp',verbose=True,base_ring=GF(103))
```
How should we catch the errors of CHomP ?



---

archive/issue_comments_273411.json:
```json
{
    "body": "<a id='comment:10'></a>\nI am taking care of the second problem also in ticket #12607",
    "created_at": "2015-07-20T12:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273411",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
I am taking care of the second problem also in ticket #12607



---

archive/issue_events_054839.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-20T12:35:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54839"
}
```



---

archive/issue_events_054840.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-20T12:35:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54840"
}
```



---

archive/issue_comments_273412.json:
```json
{
    "body": "<a id='comment:12'></a>\nEverything should be taken care of in #12607",
    "created_at": "2015-07-29T06:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273412",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
Everything should be taken care of in #12607



---

archive/issue_events_054841.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:39:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54841"
}
```



---

archive/issue_events_054842.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:39:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54842"
}
```



---

archive/issue_comments_273413.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-29T20:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273413",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273414.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-29T20:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273414",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273415.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-14T07:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16364#issuecomment-273415",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054843.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-14T07:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16364",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16364#event-54843"
}
```
