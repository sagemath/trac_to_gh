# Issue 16364: Installing ChomP causes ChainComplex to return incorrect answers

archive/issues_016127.json:
```json
{
    "assignees": [],
    "body": "Installing the ChomP package causes `ChainComplex` to give different (and basically wrong) answers.  Here are two examples from the doctests:\n\n```\nsage: C = ChainComplex([matrix(ZZ, 1, 1, [2]), matrix(ZZ, 1, 1), matrix(1, 1, [3])])\nsage: C.torsion_list(5)\n[(2, []), (3, [])]   # Should be [(2, [1]), (3, [3])]\nsage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])\nsage: S.homology(1)\n0    # Should be C140183\n```\nMay be related to #12607 where installing ChomP causes certain 0 dimensional homology groups not to be reported.\n\nCC:  @jhpalmieri @kini\n\nKeywords: **chomp**\n\nUpstream: **Reported upstream. No feedback yet.**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16364_\n\n",
    "closed_at": "2015-08-14T07:34:43Z",
    "created_at": "2014-05-16T16:38:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Installing ChomP causes ChainComplex to return incorrect answers",
    "type": "issue",
    "updated_at": "2015-08-14T07:34:43Z",
    "url": "https://github.com/sagemath/sage/issues/16364",
    "user": "https://github.com/NathanDunfield"
}
```
Installing the ChomP package causes `ChainComplex` to give different (and basically wrong) answers.  Here are two examples from the doctests:

```
sage: C = ChainComplex([matrix(ZZ, 1, 1, [2]), matrix(ZZ, 1, 1), matrix(1, 1, [3])])
sage: C.torsion_list(5)
[(2, []), (3, [])]   # Should be [(2, [1]), (3, [3])]
sage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])
sage: S.homology(1)
0    # Should be C140183
```
May be related to #12607 where installing ChomP causes certain 0 dimensional homology groups not to be reported.

CC:  @jhpalmieri @kini

Keywords: **chomp**

Upstream: **Reported upstream. No feedback yet.**

_Issue created by migration from https://trac.sagemath.org/ticket/16364_





---

archive/issue_events_216228.json:
```json
{
    "actor": "https://github.com/NathanDunfield",
    "created_at": "2014-05-16T16:38:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216228"
}
```



---

archive/issue_events_216229.json:
```json
{
    "actor": "https://github.com/NathanDunfield",
    "created_at": "2014-05-16T16:38:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216229"
}
```



---

archive/issue_events_216230.json:
```json
{
    "actor": "https://github.com/NathanDunfield",
    "created_at": "2014-05-16T16:38:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216230"
}
```



---

archive/issue_events_216231.json:
```json
{
    "actor": "https://github.com/NathanDunfield",
    "created_at": "2014-05-16T16:38:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216231"
}
```



---

archive/issue_events_216232.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216232"
}
```



---

archive/issue_events_216233.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216233"
}
```



---

archive/issue_comments_213578.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI poked around a bit.  In the first example, the issue seems to be that the wrapper is misparsing the correct output of \"homchain\".  In the second example, \"homchain\" outputs the following abort message (due to integer overflow, I think) which is ignored by the wrapper. \n\n[Tech info: chain 24, addr 8, intgr 2.]\nReading a chain complex from 'bad.txt'...\nTime used so far: 0.00 sec (0.000 min).\nThe ring of coefficients is the ring of integers.\nComputing the homology of the chain complex...\nReducing D_1: 0 +ERROR: Number out of range (*).",
    "created_at": "2015-02-02T14:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213578",
    "user": "https://github.com/NathanDunfield"
}
```

<div id="comment:2" align="right">Comment 2</div>

I poked around a bit.  In the first example, the issue seems to be that the wrapper is misparsing the correct output of "homchain".  In the second example, "homchain" outputs the following abort message (due to integer overflow, I think) which is ignored by the wrapper. 

[Tech info: chain 24, addr 8, intgr 2.]
Reading a chain complex from 'bad.txt'...
Time used so far: 0.00 sec (0.000 min).
The ring of coefficients is the ring of integers.
Computing the homology of the chain complex...
Reducing D_1: 0 +ERROR: Number out of range (*).



---

archive/issue_comments_213579.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nPossibly related: http://ask.sagemath.org/question/26550/make-ptest-best-way-to-fix-errors/",
    "created_at": "2015-04-19T01:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213579",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">Comment 3</div>

Possibly related: http://ask.sagemath.org/question/26550/make-ptest-best-way-to-fix-errors/



---

archive/issue_comments_213580.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2015-07-07T20:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213580",
    "user": "https://github.com/jhpalmieri"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_213581.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nSeveral comments: first, there is a new version of CHomP: see https://github.com/shaunharker/CHomP, but it does not fix these problems (at least the second one: the first is a problem with Sage's interface with CHomP, so that's our fault). Second, because of the second problem, we obviously need to catch this kind of error to avoid producing nonsensical answers. (It would also be nice to fix CHomP. I'll email the developer.)",
    "created_at": "2015-07-07T20:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213581",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">Comment 4</div>

Several comments: first, there is a new version of CHomP: see https://github.com/shaunharker/CHomP, but it does not fix these problems (at least the second one: the first is a problem with Sage's interface with CHomP, so that's our fault). Second, because of the second problem, we obviously need to catch this kind of error to avoid producing nonsensical answers. (It would also be nice to fix CHomP. I'll email the developer.)



---

archive/issue_comments_213582.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nWe probably should fix #12607 now that optional spkgs are always tested, and we can do a version bump of CHomP (along with making it a new-style spkg).",
    "created_at": "2015-07-07T21:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213582",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">Comment 5</div>

We probably should fix #12607 now that optional spkgs are always tested, and we can do a version bump of CHomP (along with making it a new-style spkg).



---

archive/issue_comments_213583.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nIt would also be good to deal with #15202, but that's a more complicated project.",
    "created_at": "2015-07-08T21:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213583",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">Comment 6</div>

It would also be good to deal with #15202, but that's a more complicated project.



---

archive/issue_comments_213584.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nThe first problem is solved by the branch at #12607, that needs review.",
    "created_at": "2015-07-20T10:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213584",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

The first problem is solved by the branch at #12607, that needs review.



---

archive/issue_comments_213585.json:
```json
{
    "body": "Changed keywords from **** to **chomp**",
    "created_at": "2015-07-20T10:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213585",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from **** to **chomp**



---

archive/issue_comments_213586.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAnd the second looks indeed like an overflow error in a product inside CHomP. This works\n\n```\nsage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])\nsage: S.homology(algorithm='chomp',verbose=True,base_ring=GF(103))\n```\nHow should we catch the errors of CHomP ?",
    "created_at": "2015-07-20T11:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213586",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

And the second looks indeed like an overflow error in a product inside CHomP. This works

```
sage: S = simplicial_complexes.SumComplex(17, [0, 1, 4])
sage: S.homology(algorithm='chomp',verbose=True,base_ring=GF(103))
```
How should we catch the errors of CHomP ?



---

archive/issue_comments_213587.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI am taking care of the second problem also in ticket #12607",
    "created_at": "2015-07-20T12:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213587",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">Comment 10</div>

I am taking care of the second problem also in ticket #12607



---

archive/issue_events_216234.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-20T12:35:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216234"
}
```



---

archive/issue_events_216235.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-20T12:35:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216235"
}
```



---

archive/issue_comments_213588.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nEverything should be taken care of in #12607",
    "created_at": "2015-07-29T06:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16364#issuecomment-213588",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">Comment 12</div>

Everything should be taken care of in #12607



---

archive/issue_events_216236.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:39:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216236"
}
```



---

archive/issue_events_216237.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:39:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216237"
}
```



---

archive/issue_events_216238.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:39:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216238"
}
```



---

archive/issue_events_216239.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-07-29T20:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216239"
}
```



---

archive/issue_events_216240.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-07-29T20:11:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216240"
}
```



---

archive/issue_events_216241.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-07-29T20:11:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216241"
}
```



---

archive/issue_events_216242.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-14T07:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216242"
}
```



---

archive/issue_events_216243.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-14T07:34:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16364",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16364#event-216243"
}
```
