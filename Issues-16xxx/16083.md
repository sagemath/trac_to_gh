# Issue 16083: MCQD to compute max cliques

archive/issues_015846.json:
```json
{
    "body": "Jernej reported that this solver was faster than cliquer on some instances.\n\nSo we need it `:-P`\n\nNathann\n\nInstall the new (optional) spkg : [attachment:mcqd-1.0.tar.bz2]\n\n**CC:**  azi\n\n**Branch/Commit:** [c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)\n\n**Reviewer:** Jernej Azarija\n\n**Author:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/16083\n\n",
    "closed_at": "2014-05-30T11:35:44Z",
    "created_at": "2014-04-07T14:15:57Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "title": "MCQD to compute max cliques",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16083",
    "user": "https://github.com/nathanncohen"
}
```
Jernej reported that this solver was faster than cliquer on some instances.

So we need it `:-P`

Nathann

Install the new (optional) spkg : [attachment:mcqd-1.0.tar.bz2]

**CC:**  azi

**Branch/Commit:** [c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)

**Reviewer:** Jernej Azarija

**Author:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/16083





---

archive/issue_comments_207414.json:
```json
{
    "body": "**Changing commit** from \"[66d0e3b709bdf9d06014b487e54ee1e9c0d3e595](https://github.com/sagemath/sagetrac-mirror/commit/66d0e3b709bdf9d06014b487e54ee1e9c0d3e595)\" to \"[c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e](https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e)\".",
    "created_at": "2014-04-07T14:18:10Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[66d0e3b709bdf9d06014b487e54ee1e9c0d3e595](https://github.com/sagemath/sagetrac-mirror/commit/66d0e3b709bdf9d06014b487e54ee1e9c0d3e595)" to "[c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e](https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e)".



---

archive/attachments_020525.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "mcqd-1.0.tar.bz2",
    "asset_url": "tarball://root/attachments/ticket16083/mcqd-1.0.tar.bz2",
    "created_at": "2014-04-07T14:18:10Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket16083/mcqd-1.0.tar.bz2",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```



---

archive/issue_comments_207415.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [mcqd-1.0.tar.bz2](https://github.com/sagemath/sage/files/ticket16083/mcqd-1.0.tar.bz2) by git created at 2014-04-07 14:18:10\n\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e\">c2dc8ce</a></td><td><code>trac #16083: mcqd solver for max cliques</code></td></tr></table>\n",
    "created_at": "2014-04-07T14:18:10Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Attachment [mcqd-1.0.tar.bz2](https://github.com/sagemath/sage/files/ticket16083/mcqd-1.0.tar.bz2) by git created at 2014-04-07 14:18:10

**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e">c2dc8ce</a></td><td><code>trac #16083: mcqd solver for max cliques</code></td></tr></table>




---

archive/issue_comments_207416.json:
```json
{
    "body": "**Changing commit** from \"[c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e](https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e)\" to \"[ad90443749baad49c5b0e0919b7fed13cf2324cc](https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc)\".",
    "created_at": "2014-04-07T14:35:28Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e](https://github.com/sagemath/sagetrac-mirror/commit/c2dc8ce055b4005bc68f59d90e24f835f9ff9b1e)" to "[ad90443749baad49c5b0e0919b7fed13cf2324cc](https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc)".



---

archive/issue_comments_207417.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc\">ad90443</a></td><td><code>trac #16083: mcqd solver for max cliques</code></td></tr></table>\n",
    "created_at": "2014-04-07T14:35:28Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc">ad90443</a></td><td><code>trac #16083: mcqd solver for max cliques</code></td></tr></table>




---

archive/issue_comments_207418.json:
```json
{
    "body": "<a id='comment:3'></a>\nHello,\n\nhow do I install the mcqd package? The attached tar.bz2 for one appears to be corrupt..\n\n```\nazi@bodysnatcher:/tmp$ mv mcqd-1.0.tar.bz2.1 mcqd-1.0.tar.bz2\nazi@bodysnatcher:/tmp$ tar -xf mcqd-1.0.tar.bz2 \nbzip2: (stdin) is not a bzip2 file.\n```",
    "created_at": "2014-04-13T10:17:53Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207418",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:3'></a>
Hello,

how do I install the mcqd package? The attached tar.bz2 for one appears to be corrupt..

```
azi@bodysnatcher:/tmp$ mv mcqd-1.0.tar.bz2.1 mcqd-1.0.tar.bz2
azi@bodysnatcher:/tmp$ tar -xf mcqd-1.0.tar.bz2 
bzip2: (stdin) is not a bzip2 file.
```



---

archive/issue_comments_207419.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe file looks good to me ...\n\n```\n/tmp$ tar -xf mcqd-1.0.tar.bz2 \n/tmp$ \n```\n\nNathann",
    "created_at": "2014-04-22T13:46:36Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207419",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
The file looks good to me ...

```
/tmp$ tar -xf mcqd-1.0.tar.bz2 
/tmp$ 
```

Nathann



---

archive/issue_events_143269.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-06T13:24:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143269"
}
```



---

archive/issue_comments_207420.json:
```json
{
    "body": "<a id='comment:5'></a>\nGod. I had forgotten to set it to `needs_review`.. That's dangerous `O_O;;;;`",
    "created_at": "2014-05-06T13:24:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207420",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
God. I had forgotten to set it to `needs_review`.. That's dangerous `O_O;;;;`



---

archive/issue_events_143270.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143270"
}
```



---

archive/issue_events_143271.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143271"
}
```



---

archive/issue_comments_207421.json:
```json
{
    "body": "<a id='comment:7'></a>\nNathann,\n\nas promised here are my comments !\n\n1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?\n\n2. Following are some comments about the code/politics:\n\n   2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? This way we can also tweak the file a bit (I'd like to remove debug stuff and unnecessary verbosity counters that are present in the code)\n\n   2.2 (mcqd.pyx) The variable c0 is a pointer to c. Hence I am wondering, why do you need to allocate memory ? On line 39 you assign the ptr c to it and lose the reference to the allocated space.  \n\n   2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?\n\n   2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?\n\n   2.5 (mcqd.pyx) At the very end C should be deleted.",
    "created_at": "2014-05-25T17:05:59Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207421",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:7'></a>
Nathann,

as promised here are my comments !

1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?

2. Following are some comments about the code/politics:

   2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? This way we can also tweak the file a bit (I'd like to remove debug stuff and unnecessary verbosity counters that are present in the code)

   2.2 (mcqd.pyx) The variable c0 is a pointer to c. Hence I am wondering, why do you need to allocate memory ? On line 39 you assign the ptr c to it and lose the reference to the allocated space.  

   2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?

   2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?

   2.5 (mcqd.pyx) At the very end C should be deleted.



---

archive/issue_comments_207422.json:
```json
{
    "body": "<a id='comment:8'></a>\nYoooooooooooo !\n\n> 1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?\n\n\nSave it in SAGE_ROOT/upstream/ and run \"sage -f mcqd\" (on the right branch)\n\n>    2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? \n\n\nYes : the code has not been reviewed. And it \"may\" be updated, which is why we try not to change third-party code.\n\n>    2.2 (mcqd.pyx) The variable c0 is a pointer to c.\n\n\n?... No, it is not `O_o`\n\nc0 is a pointer to `n*n` booleans.\n\n>    2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?\n\n\nRight. Done\n\n>    2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?\n\n\nDone.\n\n>    2.5 (mcqd.pyx) At the very end C should be deleted.\n\n\nWhy ? This is done automatically, isn't it ? You don't have to dealloc objects when nothing else points toward them.\n\nNathann",
    "created_at": "2014-05-26T11:41:28Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207422",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Yoooooooooooo !

> 1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?


Save it in SAGE_ROOT/upstream/ and run "sage -f mcqd" (on the right branch)

>    2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? 


Yes : the code has not been reviewed. And it "may" be updated, which is why we try not to change third-party code.

>    2.2 (mcqd.pyx) The variable c0 is a pointer to c.


?... No, it is not `O_o`

c0 is a pointer to `n*n` booleans.

>    2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?


Right. Done

>    2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?


Done.

>    2.5 (mcqd.pyx) At the very end C should be deleted.


Why ? This is done automatically, isn't it ? You don't have to dealloc objects when nothing else points toward them.

Nathann



---

archive/issue_comments_207423.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55e2922145310cfa4b0823ae56645f0dd855ad3a\">55e2922</a></td><td><code>trac #16083: Merged with 6.3.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b\">303de89</a></td><td><code>trac #16083: Reviewer's comments</code></td></tr></table>\n",
    "created_at": "2014-05-26T11:41:45Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55e2922145310cfa4b0823ae56645f0dd855ad3a">55e2922</a></td><td><code>trac #16083: Merged with 6.3.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b">303de89</a></td><td><code>trac #16083: Reviewer's comments</code></td></tr></table>




---

archive/issue_comments_207424.json:
```json
{
    "body": "**Changing commit** from \"[ad90443749baad49c5b0e0919b7fed13cf2324cc](https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc)\" to \"[303de8966e0c76f31f33b135370cee22edb12b9b](https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b)\".",
    "created_at": "2014-05-26T11:41:45Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ad90443749baad49c5b0e0919b7fed13cf2324cc](https://github.com/sagemath/sagetrac-mirror/commit/ad90443749baad49c5b0e0919b7fed13cf2324cc)" to "[303de8966e0c76f31f33b135370cee22edb12b9b](https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b)".



---

archive/issue_comments_207425.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [ncohen](#comment%3A8):\n> Yoooooooooooo !\n> \n> > 1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?\n  \n> \n> Save it in SAGE_ROOT/upstream/ and run \"sage -f mcqd\" (on the right branch)\n\nThanks I'll check that out and report back!\n> \n> >    2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? \n  \n> \n> Yes : the code has not been reviewed. And it \"may\" be updated, which is why we try not to change third-party code.\n> \n> >    2.2 (mcqd.pyx) The variable c0 is a pointer to c.\n\n> \n> ?... No, it is not `O_o`\n  \nNevermind about that I was talking nonsense.\n> \n> c0 is a pointer to `n*n` booleans.\n> \n> >    2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?\n\n> \n> Right. Done\n> \n> >    2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?\n\n> \n> Done.\n> \n> >    2.5 (mcqd.pyx) At the very end C should be deleted.\n\n> \n> Why ? This is done automatically, isn't it ? You don't have to dealloc objects when nothing else points toward them.\n\nNo I am not sure this is done. In C++ there is no garbage collector so whatever you allocate with new you have to dealocate with delete()\n> \n> Nathann\n",
    "created_at": "2014-05-26T13:57:00Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207425",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:10'></a>
Replying to [ncohen](#comment%3A8):
> Yoooooooooooo !
> 
> > 1. I was not able to test the code since I cannot figure out how to install the module. What am I supposed to do with the tar.bz2?
  
> 
> Save it in SAGE_ROOT/upstream/ and run "sage -f mcqd" (on the right branch)

Thanks I'll check that out and report back!
> 
> >    2.1. The program mcqd consists of a single .h file. Since the author of the code agrees that we can use the program in Sage, is there any reason not to simply put this .h file along with the .pyx module? 
  
> 
> Yes : the code has not been reviewed. And it "may" be updated, which is why we try not to change third-party code.
> 
> >    2.2 (mcqd.pyx) The variable c0 is a pointer to c.

> 
> ?... No, it is not `O_o`
  
Nevermind about that I was talking nonsense.
> 
> c0 is a pointer to `n*n` booleans.
> 
> >    2.3  (mcqd.pyx) Lines 30-37. Can they be made shorter by using the fact (is it true ????) that sage_free(NULL) is legal?

> 
> Right. Done
> 
> >    2.4 (mcqd.pyx) Can we get rid of the memset by using sage_calloc on c?

> 
> Done.
> 
> >    2.5 (mcqd.pyx) At the very end C should be deleted.

> 
> Why ? This is done automatically, isn't it ? You don't have to dealloc objects when nothing else points toward them.

No I am not sure this is done. In C++ there is no garbage collector so whatever you allocate with new you have to dealocate with delete()
> 
> Nathann




---

archive/issue_comments_207426.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6\">a555604</a></td><td><code>trac #16083: \"del C\"</code></td></tr></table>\n",
    "created_at": "2014-05-26T14:29:43Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6">a555604</a></td><td><code>trac #16083: "del C"</code></td></tr></table>




---

archive/issue_comments_207427.json:
```json
{
    "body": "**Changing commit** from \"[303de8966e0c76f31f33b135370cee22edb12b9b](https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b)\" to \"[a555604888f8f5fd3ab4846a379c8719ae7a7de6](https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6)\".",
    "created_at": "2014-05-26T14:29:43Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[303de8966e0c76f31f33b135370cee22edb12b9b](https://github.com/sagemath/sagetrac-mirror/commit/303de8966e0c76f31f33b135370cee22edb12b9b)" to "[a555604888f8f5fd3ab4846a379c8719ae7a7de6](https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6)".



---

archive/issue_comments_207428.json:
```json
{
    "body": "<a id='comment:12'></a>\nBTW, are you sure del is good? Shouldn't you use C++'s delete?",
    "created_at": "2014-05-26T14:34:29Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207428",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:12'></a>
BTW, are you sure del is good? Shouldn't you use C++'s delete?



---

archive/issue_comments_207429.json:
```json
{
    "body": "<a id='comment:13'></a>\n> BTW, are you sure del is good? Shouldn't you use C++'s delete?\n\n\nhttp://docs.cython.org/src/userguide/wrapping_CPlusPlus.html\nC++ objects can now be dynamically allocated with new and del keywords.\n\nNathann",
    "created_at": "2014-05-26T14:35:45Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207429",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
> BTW, are you sure del is good? Shouldn't you use C++'s delete?


http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html
C++ objects can now be dynamically allocated with new and del keywords.

Nathann



---

archive/issue_comments_207430.json:
```json
{
    "body": "<a id='comment:14'></a>\nI am still not able to run the code :-(\n\n```\nazi@bodysnatcher:~/sage$ sage -f mcqd\nFound local metadata for mcqd-1.0\nFound local sources at /home/azi/sage/upstream/mcqd-1.0.tar.bz2\n.......blahblah............\nFinished installing mcqd-1.0.spkg\n```\nand then\n\n```\nazi@bodysnatcher:~/sage$ sage\n.........blahblah............\nDone updating paths.\nsage: G = graphs.PetersenGraph()\nsage: G.clique_number(algorithm='mcqd')\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-2-99d3195b7504> in <module>()\n----> 1 G.clique_number(algorithm='mcqd')\n\n\nImportError: Please install the mcqd package\n\n```\n\nThe new code looks good except for a minor question:\n\nWhy you use  double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?",
    "created_at": "2014-05-26T20:45:32Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207430",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:14'></a>
I am still not able to run the code :-(

```
azi@bodysnatcher:~/sage$ sage -f mcqd
Found local metadata for mcqd-1.0
Found local sources at /home/azi/sage/upstream/mcqd-1.0.tar.bz2
.......blahblah............
Finished installing mcqd-1.0.spkg
```
and then

```
azi@bodysnatcher:~/sage$ sage
.........blahblah............
Done updating paths.
sage: G = graphs.PetersenGraph()
sage: G.clique_number(algorithm='mcqd')
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-99d3195b7504> in <module>()
----> 1 G.clique_number(algorithm='mcqd')


ImportError: Please install the mcqd package

```

The new code looks good except for a minor question:

Why you use  double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?



---

archive/issue_comments_207431.json:
```json
{
    "body": "<a id='comment:15'></a>\nOkay, so I was missing the step of running sage -b. Thanks Nathann for the private email.\n\nAs for this ticket I'd just like to hear the answer to \n\n*Why you use double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?* \n\n(as posted above) and if sage -t works for you then we are good to go!!",
    "created_at": "2014-05-26T20:52:35Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207431",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:15'></a>
Okay, so I was missing the step of running sage -b. Thanks Nathann for the private email.

As for this ticket I'd just like to hear the answer to 

*Why you use double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?* 

(as posted above) and if sage -t works for you then we are good to go!!



---

archive/issue_comments_207432.json:
```json
{
    "body": "<a id='comment:16'></a>\nYo !\n\n> As for this ticket I'd just like to hear the answer to \n> \n> *Why you use double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?* \n\n\nWhat do you mean by \"double variables\" ? Do you mean that I allocate both \"c\" (linear size) and \"c0\" (quadratic size) ?\n\nIf so, that is because what MCQD expects is the vector `c`, which  points toward the entries of `c0`.\n\nNathann",
    "created_at": "2014-05-27T09:11:50Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207432",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Yo !

> As for this ticket I'd just like to hear the answer to 
> 
> *Why you use double variables for the adjacency matrix? Is there any benefit from allocating a n*n matrix and using a nested for loop to fill it?* 


What do you mean by "double variables" ? Do you mean that I allocate both "c" (linear size) and "c0" (quadratic size) ?

If so, that is because what MCQD expects is the vector `c`, which  points toward the entries of `c0`.

Nathann



---

archive/issue_comments_207433.json:
```json
{
    "body": "<a id='comment:17'></a>\nYes, I am quite confused by that. Following is how I used to (successfully) call mcqd from a *.pyx file, but I don't seem to be using the same convention as you say. I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))\n\n```\ndef clique_number_fast(G):\n    n = G.order()\n\n    cpdef bool **adj\n    cpdef int clorder\n    cpdef int *clverts\n\n    adj= <bool **> malloc(sizeof(bool *)*n)\n    for i in xrange(n):\n        adj[i] = <bool *> calloc(n, sizeof(bool))    \n    \n    # Warning we are assuming the vertices are labeled from 0...n-1\n    for i,j in G.edges(labels=False):\n        adj[i][j] = True\n        adj[j][i] = True\n\n    cpdef Maxclique *m = new_Maxclique(adj,n,0.025)\n    m.mcqdyn(clverts, clorder); \n    # Yes, I am supposed to free the entire array but the above is just an indication of what is causing the error\n    for i in xrange(n): free(adj[i])\n    \n    free(adj)\n\n    return clorder\n```",
    "created_at": "2014-05-27T09:15:27Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207433",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:17'></a>
Yes, I am quite confused by that. Following is how I used to (successfully) call mcqd from a *.pyx file, but I don't seem to be using the same convention as you say. I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))

```
def clique_number_fast(G):
    n = G.order()

    cpdef bool **adj
    cpdef int clorder
    cpdef int *clverts

    adj= <bool **> malloc(sizeof(bool *)*n)
    for i in xrange(n):
        adj[i] = <bool *> calloc(n, sizeof(bool))    
    
    # Warning we are assuming the vertices are labeled from 0...n-1
    for i,j in G.edges(labels=False):
        adj[i][j] = True
        adj[j][i] = True

    cpdef Maxclique *m = new_Maxclique(adj,n,0.025)
    m.mcqdyn(clverts, clorder); 
    # Yes, I am supposed to free the entire array but the above is just an indication of what is causing the error
    for i in xrange(n): free(adj[i])
    
    free(adj)

    return clorder
```



---

archive/issue_comments_207434.json:
```json
{
    "body": "<a id='comment:18'></a>\nHello !\n\n> Yes, I am quite confused by that. Following is how I used to (successfully) call mcqd from a *.pyx file, but I don't seem to be using the same convention as you say. I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))\n\n\nI do exactly what you did. The only difference is that I  only do ONE memory allocation while you allocate n vectors (all your `adj[i]`). Now, you should write a check that all vectors have been correctly allocated, and if not deallocate them all, and this is what I wanted to avoid by allocating just one big vector of size n*n and making adj point toward pieces of it.\n\nNathann",
    "created_at": "2014-05-27T09:19:07Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207434",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
Hello !

> Yes, I am quite confused by that. Following is how I used to (successfully) call mcqd from a *.pyx file, but I don't seem to be using the same convention as you say. I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))


I do exactly what you did. The only difference is that I  only do ONE memory allocation while you allocate n vectors (all your `adj[i]`). Now, you should write a check that all vectors have been correctly allocated, and if not deallocate them all, and this is what I wanted to avoid by allocating just one big vector of size n*n and making adj point toward pieces of it.

Nathann



---

archive/issue_comments_207435.json:
```json
{
    "body": "<a id='comment:19'></a>\n> I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))\n\n\nThis is precisely the reviewer's job `:-P`\n\nNathann",
    "created_at": "2014-05-27T09:20:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207435",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
> I hope I am not bothering you with this  I'd just like to understand what I was doing here and what you're doing in your code :)))


This is precisely the reviewer's job `:-P`

Nathann



---

archive/issue_comments_207436.json:
```json
{
    "body": "<a id='comment:20'></a>\nOh I see it now. OK. \n\nThen as far as I am concerned the code is good to go once you confirm that sage -t passes through for you!",
    "created_at": "2014-05-27T09:27:18Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207436",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:20'></a>
Oh I see it now. OK. 

Then as far as I am concerned the code is good to go once you confirm that sage -t passes through for you!



---

archive/issue_comments_207437.json:
```json
{
    "body": "<a id='comment:21'></a>\nWell, it does in the graph/ folder, and clearly no  other code calls that.\n\nNathann",
    "created_at": "2014-05-27T09:29:25Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207437",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
Well, it does in the graph/ folder, and clearly no  other code calls that.

Nathann



---

archive/issue_events_143272.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/azi",
    "created_at": "2014-05-27T09:32:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143272"
}
```



---

archive/issue_events_143273.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/azi",
    "created_at": "2014-05-27T09:32:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143273"
}
```



---

archive/issue_comments_207438.json:
```json
{
    "body": "**Reviewer:** Jernej Azarija",
    "created_at": "2014-05-27T09:32:21Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207438",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

**Reviewer:** Jernej Azarija



---

archive/issue_comments_207439.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n Nathann\n \n+Install the new (optional) spkg : [attachment:mcqd-1.0.tar.bz2]\n``````\n",
    "created_at": "2014-05-27T09:33:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207439",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 Nathann
 
+Install the new (optional) spkg : [attachment:mcqd-1.0.tar.bz2]
``````




---

archive/issue_comments_207440.json:
```json
{
    "body": "<a id='comment:23'></a>\nThaaaaaaaaaaaaanks! `:-)`",
    "created_at": "2014-05-27T09:33:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207440",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
Thaaaaaaaaaaaaanks! `:-)`



---

archive/issue_comments_207441.json:
```json
{
    "body": "<a id='comment:24'></a>\nActually, thank you for doing all this patches and stuff !!!!!!",
    "created_at": "2014-05-27T09:35:19Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207441",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

<a id='comment:24'></a>
Actually, thank you for doing all this patches and stuff !!!!!!



---

archive/issue_comments_207442.json:
```json
{
    "body": "<a id='comment:25'></a>\n> Actually, thank you for doing all this patches and stuff !!!!!!\n\n\n`:-D`\n\nNathann",
    "created_at": "2014-05-27T09:40:35Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207442",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>
> Actually, thank you for doing all this patches and stuff !!!!!!


`:-D`

Nathann



---

archive/issue_events_143274.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T12:41:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143274"
}
```



---

archive/issue_events_143275.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T12:41:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143275"
}
```



---

archive/issue_comments_207443.json:
```json
{
    "body": "<a id='comment:26'></a>\n\n```\nsage -t --long src/sage/graphs/mcqd.pyx\n**********************************************************************\nFile \"src/sage/graphs/mcqd.pyx\", line 15, in sage.graphs.mcqd.mcqd\nFailed example:\n    from sage.graphs.mcqd import mcqd\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.graphs.mcqd.mcqd[0]>\", line 1, in <module>\n        from sage.graphs.mcqd import mcqd\n    ImportError: No module named mcqd\n**********************************************************************\n```",
    "created_at": "2014-05-29T12:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207443",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>

```
sage -t --long src/sage/graphs/mcqd.pyx
**********************************************************************
File "src/sage/graphs/mcqd.pyx", line 15, in sage.graphs.mcqd.mcqd
Failed example:
    from sage.graphs.mcqd import mcqd
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.mcqd.mcqd[0]>", line 1, in <module>
        from sage.graphs.mcqd import mcqd
    ImportError: No module named mcqd
**********************************************************************
```



---

archive/issue_comments_207444.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049\">c0158ed</a></td><td><code>trac #16083: Broken doctest</code></td></tr></table>\n",
    "created_at": "2014-05-29T16:51:21Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049">c0158ed</a></td><td><code>trac #16083: Broken doctest</code></td></tr></table>




---

archive/issue_comments_207445.json:
```json
{
    "body": "**Changing commit** from \"[a555604888f8f5fd3ab4846a379c8719ae7a7de6](https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6)\" to \"[c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)\".",
    "created_at": "2014-05-29T16:51:21Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a555604888f8f5fd3ab4846a379c8719ae7a7de6](https://github.com/sagemath/sagetrac-mirror/commit/a555604888f8f5fd3ab4846a379c8719ae7a7de6)" to "[c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)".



---

archive/issue_comments_207446.json:
```json
{
    "body": "<a id='comment:28'></a>\nSorry.. All the lines except the import statement were tagged with \"optional\" `:-/`\n\nNathann",
    "created_at": "2014-05-29T16:52:16Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207446",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
Sorry.. All the lines except the import statement were tagged with "optional" `:-/`

Nathann



---

archive/issue_events_143276.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-29T16:52:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143276"
}
```



---

archive/issue_events_143277.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-29T16:52:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143277"
}
```



---

archive/issue_comments_207447.json:
```json
{
    "body": "**Changing branch** from \"[public/mcqd](https://github.com/sagemath/sagetrac-mirror/tree/public/mcqd)\" to \"[c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)\".",
    "created_at": "2014-05-30T11:35:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16083#issuecomment-207447",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/mcqd](https://github.com/sagemath/sagetrac-mirror/tree/public/mcqd)" to "[c0158edff1516bbca93ff330acbec1d1a5238049](https://github.com/sagemath/sagetrac-mirror/commit/c0158edff1516bbca93ff330acbec1d1a5238049)".



---

archive/issue_events_143278.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-30T11:35:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143278"
}
```



---

archive/issue_events_143279.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-30T11:35:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16083",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16083#event-143279"
}
```
