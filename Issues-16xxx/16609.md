# Issue 16609: Warn about overly long doctests

archive/issues_016372.json:
```json
{
    "body": "This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.\n* Make the `--warn-long` option a warning \n* Enable it by default (with 60s time limit)\n\n\nBranch/Commit: 483c6d1b9594c6171204170a35e0454eb2c1f318\n\nReviewer: Punarbasu Purkayastha\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16609\n\n",
    "closed_at": "2014-08-11T12:07:31Z",
    "created_at": "2014-07-03T15:06:06Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Warn about overly long doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16609",
    "user": "https://github.com/vbraun"
}
```
This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.
* Make the `--warn-long` option a warning 
* Enable it by default (with 60s time limit)


Branch/Commit: 483c6d1b9594c6171204170a35e0454eb2c1f318

Reviewer: Punarbasu Purkayastha

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16609





---

archive/issue_comments_228856.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.\n+* Make the ``--warn-long`` option a warning \n+* Enable it by default (with 60s time limit)\n \n \n Comment: 1\n``````\n",
    "created_at": "2014-07-28T19:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228856",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.
+* Make the ``--warn-long`` option a warning 
+* Enable it by default (with 60s time limit)
 
 
 Comment: 1
``````




---

archive/issue_comments_228857.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-07-28T19:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228857",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_228858.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-07-28T19:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228858",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_228859.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to doctest framework.",
    "created_at": "2014-07-28T19:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228859",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to doctest framework.



---

archive/issue_comments_228860.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-07-28T19:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228860",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_228861.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.\n+* Make the `--warn-long` option a warning \n+* Enable it by default (with 60s time limit)\n \n \n Comment: 1\n``````\n",
    "created_at": "2014-07-28T19:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228861",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+This ticket aims to raise awareness for slow doctests. Some are very time consuming just because the author wants to show off the capabilities of their code, and will sooner or later hurt our ability to run the testsuite. Really, doctests should be as fast as possible while providing adequate coverage.
+* Make the `--warn-long` option a warning 
+* Enable it by default (with 60s time limit)
 
 
 Comment: 1
``````




---

archive/issue_comments_228862.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-28T20:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228863.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-29T02:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228864.json:
```json
{
    "body": "<a id='comment:7'></a>I never heard of this `--warn-long` before. And it is not present in `sage --advanced` either.",
    "created_at": "2014-07-29T05:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228864",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:7'></a>I never heard of this `--warn-long` before. And it is not present in `sage --advanced` either.



---

archive/issue_comments_228865.json:
```json
{
    "body": "<a id='comment:8'></a>Well you learn something new every day ;-) It is documented in the developer guide, though. I don't think we gain anything by adding it to the command line help, its not something that you are going to be looking for. Especially after it is active by default.",
    "created_at": "2014-07-29T12:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228865",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>Well you learn something new every day ;-) It is documented in the developer guide, though. I don't think we gain anything by adding it to the command line help, its not something that you are going to be looking for. Especially after it is active by default.



---

archive/issue_comments_228866.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 vbraun]:\n> I don't think we gain anything by adding it to the command line help, its not something that you are going to be looking for. Especially after it is active by default.\n\n\nEspecially when it is active by default one may want to turn it off and my first place to look would definitely be `sage --help` and `sage --advanced`. I think there's value in keeping those complete wrt. command line options. If there are options there that are too complicated to document fully, you can provide a pointer to other doc.",
    "created_at": "2014-07-29T18:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228866",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:9'></a>Replying to [comment:8 vbraun]:
> I don't think we gain anything by adding it to the command line help, its not something that you are going to be looking for. Especially after it is active by default.


Especially when it is active by default one may want to turn it off and my first place to look would definitely be `sage --help` and `sage --advanced`. I think there's value in keeping those complete wrt. command line options. If there are options there that are too complicated to document fully, you can provide a pointer to other doc.



---

archive/issue_comments_228867.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-29T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228868.json:
```json
{
    "body": "<a id='comment:11'></a>I've added it to the command line help.",
    "created_at": "2014-07-29T18:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228868",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>I've added it to the command line help.



---

archive/issue_comments_228869.json:
```json
{
    "body": "<a id='comment:12'></a>How come I didn't get any warnings from the plot code on my machine?\n\n```\n~/Installations/sage\u00bb sage -tp --long src/sage/plot\ntoo few successful tests, not using stored timings\nRunning doctests with ID 2014-07-30-21-55-39-c73cabe8.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 51 files using 4 threads.\nsage -t --long src/sage/plot/plot3d/implicit_plot3d.py\n    [57 tests, 38.81 s]\nsage -t --long src/sage/plot/line.py\n    [79 tests, 30.21 s]\nsage -t --long src/sage/plot/contour_plot.py\n    [124 tests, 74.20 s]\nsage -t --long src/sage/plot/complex_plot.pyx\n    [31 tests, 18.51 s]\nsage -t --long src/sage/plot/plot3d/plot3d.py\n    [227 tests, 29.81 s]\nsage -t --long src/sage/plot/point.py\n    [81 tests, 18.62 s]\nsage -t --long src/sage/plot/matrix_plot.py\n    [62 tests, 21.48 s]\nsage -t --long src/sage/plot/plot3d/base.pyx\n    [269 tests, 18.75 s]\nsage -t --long src/sage/plot/animate.py\n    [99 tests, 15.09 s]\nsage -t --long src/sage/plot/polygon.py\n    [71 tests, 12.92 s]\nsage -t --long src/sage/plot/graphics.py\n    [411 tests, 144.22 s]\nsage -t --long src/sage/plot/circle.py\n    [54 tests, 12.51 s]\nsage -t --long src/sage/plot/arrow.py\n    [66 tests, 11.34 s]\nsage -t --long src/sage/plot/plot3d/parametric_plot3d.py\n    [196 tests, 12.56 s]\nsage -t --long src/sage/plot/plot_field.py\n    [53 tests, 10.58 s]\nsage -t --long src/sage/plot/plot3d/shapes2.py\n    [109 tests, 7.47 s]\nsage -t --long src/sage/plot/plot3d/plot_field3d.py\n    [8 tests, 10.75 s]\nsage -t --long src/sage/plot/density_plot.py\n    [35 tests, 11.37 s]\nsage -t --long src/sage/plot/plot.py\n    [389 tests, 171.63 s]\nsage -t --long src/sage/plot/plot3d/parametric_surface.pyx\n    [85 tests, 8.70 s]\nsage -t --long src/sage/plot/plot3d/tachyon.py\n    [315 tests, 7.29 s]\nsage -t --long src/sage/plot/text.py\n    [42 tests, 6.63 s]\nsage -t --long src/sage/plot/disk.py\n    [55 tests, 6.23 s]\nsage -t --long src/sage/plot/bezier_path.py\n    [37 tests, 6.33 s]\nsage -t --long src/sage/plot/misc.py\n    [42 tests, 6.15 s]\nsage -t --long src/sage/plot/plot3d/revolution_plot3d.py\n    [20 tests, 5.41 s]\nsage -t --long src/sage/plot/ellipse.py\n    [35 tests, 5.74 s]\nsage -t --long src/sage/plot/arc.py\n    [39 tests, 5.54 s]\nsage -t --long src/sage/plot/bar_chart.py\n    [22 tests, 4.54 s]\nsage -t --long src/sage/plot/colors.py\n    [248 tests, 4.09 s]\nsage -t --long src/sage/plot/plot3d/list_plot3d.py\n    [37 tests, 3.53 s]\nsage -t --long src/sage/plot/scatter_plot.py\n    [19 tests, 3.50 s]\nsage -t --long src/sage/plot/plot3d/shapes.pyx\n    [159 tests, 6.00 s]\nsage -t --long src/sage/plot/step.py\n    [4 tests, 2.15 s]\nsage -t --long src/sage/plot/plot3d/transform.pyx\n    [25 tests, 3.23 s]\nsage -t --long src/sage/plot/hyperbolic_arc.py\n    [8 tests, 2.84 s]\nsage -t --long src/sage/plot/plot3d/platonic.py\n    [41 tests, 1.87 s]\nsage -t --long src/sage/plot/plot3d/tri_plot.py\n    [70 tests, 0.78 s]\nsage -t --long src/sage/plot/primitive.py\n    [43 tests, 1.78 s]\nsage -t --long src/sage/plot/hyperbolic_triangle.py\n    [8 tests, 1.57 s]\nsage -t --long src/sage/plot/plot3d/examples.py\n    [4 tests, 0.35 s]\nsage -t --long src/sage/plot/plot3d/point_c.pxi\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/plot3d/implicit_surface.pyx\n    [93 tests, 2.44 s]\nsage -t --long src/sage/plot/java3d.py\n    [1 test, 0.01 s]\nsage -t --long src/sage/plot/plot3d/help.pyx\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/plot3d/all.py\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/plot3d/__init__.py\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/all.py\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/__init__.py\n    [0 tests, 0.00 s]\nsage -t --long src/sage/plot/plot3d/texture.py\n    [61 tests, 0.53 s]\nsage -t --long src/sage/plot/plot3d/index_face_set.pyx\n    [48 tests, 0.92 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 194.0 seconds\n    cpu time: 673.5 seconds\n    cumulative wall time: 769.0 seconds\n```\n\n**Edit** Ah! Sorry. Didn't notice the first line of the output.",
    "created_at": "2014-07-30T14:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228869",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:12'></a>How come I didn't get any warnings from the plot code on my machine?

```
~/Installations/sage» sage -tp --long src/sage/plot
too few successful tests, not using stored timings
Running doctests with ID 2014-07-30-21-55-39-c73cabe8.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 51 files using 4 threads.
sage -t --long src/sage/plot/plot3d/implicit_plot3d.py
    [57 tests, 38.81 s]
sage -t --long src/sage/plot/line.py
    [79 tests, 30.21 s]
sage -t --long src/sage/plot/contour_plot.py
    [124 tests, 74.20 s]
sage -t --long src/sage/plot/complex_plot.pyx
    [31 tests, 18.51 s]
sage -t --long src/sage/plot/plot3d/plot3d.py
    [227 tests, 29.81 s]
sage -t --long src/sage/plot/point.py
    [81 tests, 18.62 s]
sage -t --long src/sage/plot/matrix_plot.py
    [62 tests, 21.48 s]
sage -t --long src/sage/plot/plot3d/base.pyx
    [269 tests, 18.75 s]
sage -t --long src/sage/plot/animate.py
    [99 tests, 15.09 s]
sage -t --long src/sage/plot/polygon.py
    [71 tests, 12.92 s]
sage -t --long src/sage/plot/graphics.py
    [411 tests, 144.22 s]
sage -t --long src/sage/plot/circle.py
    [54 tests, 12.51 s]
sage -t --long src/sage/plot/arrow.py
    [66 tests, 11.34 s]
sage -t --long src/sage/plot/plot3d/parametric_plot3d.py
    [196 tests, 12.56 s]
sage -t --long src/sage/plot/plot_field.py
    [53 tests, 10.58 s]
sage -t --long src/sage/plot/plot3d/shapes2.py
    [109 tests, 7.47 s]
sage -t --long src/sage/plot/plot3d/plot_field3d.py
    [8 tests, 10.75 s]
sage -t --long src/sage/plot/density_plot.py
    [35 tests, 11.37 s]
sage -t --long src/sage/plot/plot.py
    [389 tests, 171.63 s]
sage -t --long src/sage/plot/plot3d/parametric_surface.pyx
    [85 tests, 8.70 s]
sage -t --long src/sage/plot/plot3d/tachyon.py
    [315 tests, 7.29 s]
sage -t --long src/sage/plot/text.py
    [42 tests, 6.63 s]
sage -t --long src/sage/plot/disk.py
    [55 tests, 6.23 s]
sage -t --long src/sage/plot/bezier_path.py
    [37 tests, 6.33 s]
sage -t --long src/sage/plot/misc.py
    [42 tests, 6.15 s]
sage -t --long src/sage/plot/plot3d/revolution_plot3d.py
    [20 tests, 5.41 s]
sage -t --long src/sage/plot/ellipse.py
    [35 tests, 5.74 s]
sage -t --long src/sage/plot/arc.py
    [39 tests, 5.54 s]
sage -t --long src/sage/plot/bar_chart.py
    [22 tests, 4.54 s]
sage -t --long src/sage/plot/colors.py
    [248 tests, 4.09 s]
sage -t --long src/sage/plot/plot3d/list_plot3d.py
    [37 tests, 3.53 s]
sage -t --long src/sage/plot/scatter_plot.py
    [19 tests, 3.50 s]
sage -t --long src/sage/plot/plot3d/shapes.pyx
    [159 tests, 6.00 s]
sage -t --long src/sage/plot/step.py
    [4 tests, 2.15 s]
sage -t --long src/sage/plot/plot3d/transform.pyx
    [25 tests, 3.23 s]
sage -t --long src/sage/plot/hyperbolic_arc.py
    [8 tests, 2.84 s]
sage -t --long src/sage/plot/plot3d/platonic.py
    [41 tests, 1.87 s]
sage -t --long src/sage/plot/plot3d/tri_plot.py
    [70 tests, 0.78 s]
sage -t --long src/sage/plot/primitive.py
    [43 tests, 1.78 s]
sage -t --long src/sage/plot/hyperbolic_triangle.py
    [8 tests, 1.57 s]
sage -t --long src/sage/plot/plot3d/examples.py
    [4 tests, 0.35 s]
sage -t --long src/sage/plot/plot3d/point_c.pxi
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/plot3d/implicit_surface.pyx
    [93 tests, 2.44 s]
sage -t --long src/sage/plot/java3d.py
    [1 test, 0.01 s]
sage -t --long src/sage/plot/plot3d/help.pyx
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/plot3d/all.py
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/plot3d/__init__.py
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/all.py
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/__init__.py
    [0 tests, 0.00 s]
sage -t --long src/sage/plot/plot3d/texture.py
    [61 tests, 0.53 s]
sage -t --long src/sage/plot/plot3d/index_face_set.pyx
    [48 tests, 0.92 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 194.0 seconds
    cpu time: 673.5 seconds
    cumulative wall time: 769.0 seconds
```

**Edit** Ah! Sorry. Didn't notice the first line of the output.



---

archive/issue_comments_228870.json:
```json
{
    "body": "<a id='comment:13'></a>I tried this on a different machine. I was expecting a summary at the end of the modules that are taking too\nmuch time. Currently, the output has to be visually inspected.\n\n```\n~/Installations/sage [t/16609/doctest] $ sage -tp --long src/sage/plot\nRunning doctests with ID 2014-07-30-22-26-45-7bc2417c. \nSorting sources by runtime so that slower doctests are run first....\nDoctesting 51 files using 24 threads.\nsage -t --long --warn-long 36.6 src/sage/plot/bezier_path.py\n    [37 tests, 4.60 s]\nsage -t --long --warn-long 36.6 src/sage/plot/arc.py   \n    [39 tests, 5.52 s]\nsage -t --long --warn-long 36.6 src/sage/plot/misc.py  \n    [42 tests, 5.63 s]\nsage -t --long --warn-long 36.6 src/sage/plot/text.py  \n    [42 tests, 6.01 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/parametric_surface.pyx\n    [85 tests, 6.65 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/base.pyx\n    [269 tests, 7.20 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/plot_field3d.py\n    [8 tests, 7.59 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/shapes2.py\n    [109 tests, 7.70 s]\nsage -t --long --warn-long 36.6 src/sage/plot/density_plot.py\n    [35 tests, 8.78 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/revolution_plot3d.py\n    [20 tests, 3.57 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot_field.py\n    [53 tests, 9.59 s]\nsage -t --long --warn-long 36.6 src/sage/plot/bar_chart.py\n    [22 tests, 3.54 s]\nsage -t --long --warn-long 36.6 src/sage/plot/circle.py\n    [54 tests, 10.13 s]\nsage -t --long --warn-long 36.6 src/sage/plot/arrow.py \n    [66 tests, 10.21 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/parametric_plot3d.py\n    [196 tests, 10.38 s]\nsage -t --long --warn-long 36.6 src/sage/plot/polygon.py\n    [71 tests, 10.50 s]\nsage -t --long --warn-long 36.6 src/sage/plot/scatter_plot.py\n    [19 tests, 2.79 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/tachyon.py\n    [315 tests, 2.98 s]\nsage -t --long --warn-long 36.6 src/sage/plot/ellipse.py\n    [35 tests, 5.79 s]\nsage -t --long --warn-long 36.6 src/sage/plot/disk.py  \n    [55 tests, 5.12 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/shapes.pyx\n    [159 tests, 3.67 s]\nsage -t --long --warn-long 36.6 src/sage/plot/java3d.py\n    [1 test, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/point_c.pxi\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/examples.py\n    [4 tests, 0.38 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/help.pyx\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/index_face_set.pyx\n    [48 tests, 0.44 s]\nsage -t --long --warn-long 36.6 src/sage/plot/__init__.py\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/all.py\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/all.py\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/__init__.py\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/tri_plot.py\n    [70 tests, 0.54 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/texture.py\n    [61 tests, 0.29 s]\nsage -t --long --warn-long 36.6 src/sage/plot/colors.py\n    [248 tests, 4.55 s]\nsage -t --long --warn-long 36.6 src/sage/plot/step.py\n    [4 tests, 1.82 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/platonic.py\n    [41 tests, 1.37 s]\nsage -t --long --warn-long 36.6 src/sage/plot/hyperbolic_triangle.py\n    [8 tests, 1.20 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/list_plot3d.py\n    [37 tests, 2.19 s]\nsage -t --long --warn-long 36.6 src/sage/plot/hyperbolic_arc.py\n    [8 tests, 2.32 s]\nsage -t --long --warn-long 36.6 src/sage/plot/primitive.py\n    [43 tests, 1.67 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/transform.pyx\n    [25 tests, 3.27 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/implicit_surface.pyx\n    [93 tests, 1.92 s]\nsage -t --long --warn-long 36.6 src/sage/plot/animate.py\n    [99 tests, 12.60 s]\nsage -t --long --warn-long 36.6 src/sage/plot/point.py\n    [81 tests, 14.69 s]\nsage -t --long --warn-long 36.6 src/sage/plot/complex_plot.pyx\n    [31 tests, 15.37 s]\nsage -t --long --warn-long 36.6 src/sage/plot/matrix_plot.py\n    [62 tests, 15.64 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/plot3d.py\n    [227 tests, 17.53 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot3d/implicit_plot3d.py\n    [57 tests, 19.67 s]\nsage -t --long --warn-long 36.6 src/sage/plot/line.py\n    [79 tests, 20.96 s]\nsage -t --long --warn-long 36.6 src/sage/plot/contour_plot.py\n    [124 tests, 43.19 s]\nsage -t --long --warn-long 36.6 src/sage/plot/graphics.py\n    [411 tests, 80.43 s]\nsage -t --long --warn-long 36.6 src/sage/plot/plot.py\n    [389 tests, 95.00 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 95.2 seconds\n    cpu time: 471.7 seconds\n    cumulative wall time: 495.0 seconds\n```\n\nFor the summary, I have something like this in mind (the output may be\nsorted or unsorted according to the highest time)\n\n```\nThe following files took more than 36.6 s to doctest:\n[43.19 s] src/sage/plot/contour_plot.py\n[80.43 s] src/sage/plot/graphics.py\n[95.00 s] src/sage/plot/plot.py\n```\nI haven't had a close look at the code, so I am not sure if it is possible\nto provide a summary like this.",
    "created_at": "2014-07-30T14:40:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228870",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:13'></a>I tried this on a different machine. I was expecting a summary at the end of the modules that are taking too
much time. Currently, the output has to be visually inspected.

```
~/Installations/sage [t/16609/doctest] $ sage -tp --long src/sage/plot
Running doctests with ID 2014-07-30-22-26-45-7bc2417c. 
Sorting sources by runtime so that slower doctests are run first....
Doctesting 51 files using 24 threads.
sage -t --long --warn-long 36.6 src/sage/plot/bezier_path.py
    [37 tests, 4.60 s]
sage -t --long --warn-long 36.6 src/sage/plot/arc.py   
    [39 tests, 5.52 s]
sage -t --long --warn-long 36.6 src/sage/plot/misc.py  
    [42 tests, 5.63 s]
sage -t --long --warn-long 36.6 src/sage/plot/text.py  
    [42 tests, 6.01 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/parametric_surface.pyx
    [85 tests, 6.65 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/base.pyx
    [269 tests, 7.20 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/plot_field3d.py
    [8 tests, 7.59 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/shapes2.py
    [109 tests, 7.70 s]
sage -t --long --warn-long 36.6 src/sage/plot/density_plot.py
    [35 tests, 8.78 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/revolution_plot3d.py
    [20 tests, 3.57 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot_field.py
    [53 tests, 9.59 s]
sage -t --long --warn-long 36.6 src/sage/plot/bar_chart.py
    [22 tests, 3.54 s]
sage -t --long --warn-long 36.6 src/sage/plot/circle.py
    [54 tests, 10.13 s]
sage -t --long --warn-long 36.6 src/sage/plot/arrow.py 
    [66 tests, 10.21 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/parametric_plot3d.py
    [196 tests, 10.38 s]
sage -t --long --warn-long 36.6 src/sage/plot/polygon.py
    [71 tests, 10.50 s]
sage -t --long --warn-long 36.6 src/sage/plot/scatter_plot.py
    [19 tests, 2.79 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/tachyon.py
    [315 tests, 2.98 s]
sage -t --long --warn-long 36.6 src/sage/plot/ellipse.py
    [35 tests, 5.79 s]
sage -t --long --warn-long 36.6 src/sage/plot/disk.py  
    [55 tests, 5.12 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/shapes.pyx
    [159 tests, 3.67 s]
sage -t --long --warn-long 36.6 src/sage/plot/java3d.py
    [1 test, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/point_c.pxi
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/examples.py
    [4 tests, 0.38 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/help.pyx
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/index_face_set.pyx
    [48 tests, 0.44 s]
sage -t --long --warn-long 36.6 src/sage/plot/__init__.py
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/all.py
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/all.py
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/__init__.py
    [0 tests, 0.00 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/tri_plot.py
    [70 tests, 0.54 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/texture.py
    [61 tests, 0.29 s]
sage -t --long --warn-long 36.6 src/sage/plot/colors.py
    [248 tests, 4.55 s]
sage -t --long --warn-long 36.6 src/sage/plot/step.py
    [4 tests, 1.82 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/platonic.py
    [41 tests, 1.37 s]
sage -t --long --warn-long 36.6 src/sage/plot/hyperbolic_triangle.py
    [8 tests, 1.20 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/list_plot3d.py
    [37 tests, 2.19 s]
sage -t --long --warn-long 36.6 src/sage/plot/hyperbolic_arc.py
    [8 tests, 2.32 s]
sage -t --long --warn-long 36.6 src/sage/plot/primitive.py
    [43 tests, 1.67 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/transform.pyx
    [25 tests, 3.27 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/implicit_surface.pyx
    [93 tests, 1.92 s]
sage -t --long --warn-long 36.6 src/sage/plot/animate.py
    [99 tests, 12.60 s]
sage -t --long --warn-long 36.6 src/sage/plot/point.py
    [81 tests, 14.69 s]
sage -t --long --warn-long 36.6 src/sage/plot/complex_plot.pyx
    [31 tests, 15.37 s]
sage -t --long --warn-long 36.6 src/sage/plot/matrix_plot.py
    [62 tests, 15.64 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/plot3d.py
    [227 tests, 17.53 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot3d/implicit_plot3d.py
    [57 tests, 19.67 s]
sage -t --long --warn-long 36.6 src/sage/plot/line.py
    [79 tests, 20.96 s]
sage -t --long --warn-long 36.6 src/sage/plot/contour_plot.py
    [124 tests, 43.19 s]
sage -t --long --warn-long 36.6 src/sage/plot/graphics.py
    [411 tests, 80.43 s]
sage -t --long --warn-long 36.6 src/sage/plot/plot.py
    [389 tests, 95.00 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 95.2 seconds
    cpu time: 471.7 seconds
    cumulative wall time: 495.0 seconds
```

For the summary, I have something like this in mind (the output may be
sorted or unsorted according to the highest time)

```
The following files took more than 36.6 s to doctest:
[43.19 s] src/sage/plot/contour_plot.py
[80.43 s] src/sage/plot/graphics.py
[95.00 s] src/sage/plot/plot.py
```
I haven't had a close look at the code, so I am not sure if it is possible
to provide a summary like this.



---

archive/issue_comments_228871.json:
```json
{
    "body": "<a id='comment:14'></a>The time limit is per doctest, not per file.\n\nI don't mind a summary at the end but I don't think its necessary for this ticket. If you want to implement it be my guest, but I don't plan on doing it.",
    "created_at": "2014-07-30T23:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228871",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>The time limit is per doctest, not per file.

I don't mind a summary at the end but I don't think its necessary for this ticket. If you want to implement it be my guest, but I don't plan on doing it.



---

archive/issue_comments_228872.json:
```json
{
    "body": "<a id='comment:15'></a>Sorry, took me some time to look through all this since I am not familiar with the code in `sage/doctest`. This sequence of patches looks good to me. I don't see any problems.",
    "created_at": "2014-08-08T06:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228872",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:15'></a>Sorry, took me some time to look through all this since I am not familiar with the code in `sage/doctest`. This sequence of patches looks good to me. I don't see any problems.



---

archive/issue_comments_228873.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-08T06:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228873",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_048720.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16609#event-48720"
}
```



---

archive/issue_events_048721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T12:07:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16609#event-48721"
}
```



---

archive/issue_comments_228874.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-11T12:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16609#issuecomment-228874",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
