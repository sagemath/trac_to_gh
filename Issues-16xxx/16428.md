# Issue 16428: Cleanup/reorganization of FLINT imports

archive/issues_016191.json:
```json
{
    "body": "Rename the FLINT `.pxi` files to `.pxd` files. Create a new file `src/sage/libs/flint/types.pxd` with just the type declarations (similar to GMP, very useful to avoid circular imports).\n\nReviewer: William Stein, Jean-Pierre Flori\n\nAuthor: R. Andrew Ohana, Jeroen Demeyer\n\nBranch: b69be0da26e43f9454e676867afb54de530d2a58\n\nCommit: b69be0da26e43f9454e676867afb54de530d2a58\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16428\n\n",
    "closed_at": "2014-10-16T21:10:26Z",
    "created_at": "2014-06-03T08:36:12Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Cleanup/reorganization of FLINT imports",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16428",
    "user": "https://github.com/ohanar"
}
```
Rename the FLINT `.pxi` files to `.pxd` files. Create a new file `src/sage/libs/flint/types.pxd` with just the type declarations (similar to GMP, very useful to avoid circular imports).

Reviewer: William Stein, Jean-Pierre Flori

Author: R. Andrew Ohana, Jeroen Demeyer

Branch: b69be0da26e43f9454e676867afb54de530d2a58

Commit: b69be0da26e43f9454e676867afb54de530d2a58

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16428





---

archive/issue_comments_211101.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-03T08:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211101",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211102.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-07T04:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_048329.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16428#event-48329"
}
```



---

archive/issue_comments_211103.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-01T12:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211103",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_048330.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-13T18:41:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16428#event-48330"
}
```



---

archive/issue_comments_211104.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2014-10-13T18:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211104",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_comments_211105.json:
```json
{
    "body": "Resolution changed from invalid to ",
    "created_at": "2014-10-13T18:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211105",
    "user": "https://github.com/jdemeyer"
}
```

Resolution changed from invalid to 



---

archive/issue_comments_211106.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-10-13T18:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211106",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_events_048331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-13T18:41:26Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16428#event-48331"
}
```



---

archive/issue_comments_211107.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T18:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211108.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T19:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211108",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211109.json:
```json
{
    "body": "<a id='comment:12'></a>Argh, I basically have a branch doing the same thing...",
    "created_at": "2014-10-13T19:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211109",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>Argh, I basically have a branch doing the same thing...



---

archive/issue_comments_211110.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T19:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211111.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T20:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211112.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T20:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211113.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T20:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211114.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T20:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211115.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T21:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211116.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T21:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211117.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T21:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211118.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-13T21:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211119.json:
```json
{
    "body": "<a id='comment:23'></a>With the current patch, the Sage library compiles but I get\n\n```\n$ ./sage --python\nPython 2.7.8 (default, Oct 13 2014, 21:11:06) \n[GCC 4.6.4] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sage.all\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/all.py\", line 87, in <module>\n    from sage.misc.all       import *         # takes a while\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/all.py\", line 89, in <module>\n    from functional import (additive_order,\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/functional.py\", line 32, in <module>\n    import sage.interfaces.expect\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 60, in <module>\n    from sage.interfaces.interface import Interface, InterfaceElement, InterfaceFunction, InterfaceFunctionElement, AsciiArtString\n  File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 42, in <module>\n    from sage.structure.parent_base import ParentWithBase\n  File \"sage/structure/parent_base.pyx\", line 1, in init sage.structure.parent_base (build/cythonized/sage/structure/parent_base.c:2134)\n  File \"sage/structure/parent_old.pyx\", line 1, in init sage.structure.parent_old (build/cythonized/sage/structure/parent_old.c:8811)\n  File \"sage/structure/element.pxd\", line 12, in init sage.structure.parent (build/cythonized/sage/structure/parent.c:28430)\n  File \"sage/structure/element.pyx\", line 3096, in init sage.structure.element (build/cythonized/sage/structure/element.c:34908)\n  File \"sage/categories/action.pxd\", line 6, in init sage.structure.coerce (build/cythonized/sage/structure/coerce.c:17114)\nImportError: dynamic module does not define init function (initaction)\n```",
    "created_at": "2014-10-13T22:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211119",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>With the current patch, the Sage library compiles but I get

```
$ ./sage --python
Python 2.7.8 (default, Oct 13 2014, 21:11:06) 
[GCC 4.6.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sage.all
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/all.py", line 87, in <module>
    from sage.misc.all       import *         # takes a while
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/all.py", line 89, in <module>
    from functional import (additive_order,
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/misc/functional.py", line 32, in <module>
    import sage.interfaces.expect
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 60, in <module>
    from sage.interfaces.interface import Interface, InterfaceElement, InterfaceFunction, InterfaceFunctionElement, AsciiArtString
  File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 42, in <module>
    from sage.structure.parent_base import ParentWithBase
  File "sage/structure/parent_base.pyx", line 1, in init sage.structure.parent_base (build/cythonized/sage/structure/parent_base.c:2134)
  File "sage/structure/parent_old.pyx", line 1, in init sage.structure.parent_old (build/cythonized/sage/structure/parent_old.c:8811)
  File "sage/structure/element.pxd", line 12, in init sage.structure.parent (build/cythonized/sage/structure/parent.c:28430)
  File "sage/structure/element.pyx", line 3096, in init sage.structure.element (build/cythonized/sage/structure/element.c:34908)
  File "sage/categories/action.pxd", line 6, in init sage.structure.coerce (build/cythonized/sage/structure/coerce.c:17114)
ImportError: dynamic module does not define init function (initaction)
```



---

archive/issue_comments_211120.json:
```json
{
    "body": "<a id='comment:24'></a>Very nice error, I think I got the same issue with some of my code.\nIt had something to do with cython compiled stuff.",
    "created_at": "2014-10-14T09:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211120",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>Very nice error, I think I got the same issue with some of my code.
It had something to do with cython compiled stuff.



---

archive/issue_comments_211121.json:
```json
{
    "body": "<a id='comment:25'></a>I'm not really found of moving everything to a \"decl\" subdir though I'm aware of the fmpz_poly files issue.\nI would slightly find it better to move the \"Fmpz_poly\" class stuff somewhere else and keep the real FLINT C/Cython glue directly in \"sage/libs/flint\", but I won't fight for such a solution or another one though.",
    "created_at": "2014-10-14T09:13:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211121",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>I'm not really found of moving everything to a "decl" subdir though I'm aware of the fmpz_poly files issue.
I would slightly find it better to move the "Fmpz_poly" class stuff somewhere else and keep the real FLINT C/Cython glue directly in "sage/libs/flint", but I won't fight for such a solution or another one though.



---

archive/issue_comments_211122.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 jpflori]:\n> I would slightly find it better to move the \"Fmpz_poly\" class stuff somewhere else and keep the real FLINT C/Cython glue directly in \"sage/libs/flint\"\n\nWould you prefer to move the `Fmpz_poly` class and the `fmpz_poly()` declarations in the same `.pxd` file?",
    "created_at": "2014-10-14T09:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211122",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>Replying to [comment:25 jpflori]:
> I would slightly find it better to move the "Fmpz_poly" class stuff somewhere else and keep the real FLINT C/Cython glue directly in "sage/libs/flint"

Would you prefer to move the `Fmpz_poly` class and the `fmpz_poly()` declarations in the same `.pxd` file?



---

archive/issue_comments_211123.json:
```json
{
    "body": "<a id='comment:27'></a>Anyway, my first concern now is having something which works.",
    "created_at": "2014-10-14T09:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211123",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Anyway, my first concern now is having something which works.



---

archive/issue_comments_211124.json:
```json
{
    "body": "<a id='comment:28'></a>Sure, the fmpz_poly thing is a low priority issue (and no, I don't want to see it in the fmpz_poly.pxd file, actually I did something in my branch as you first did, i.e. add some suffix, you chose old, I chose class.)",
    "created_at": "2014-10-14T09:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211124",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>Sure, the fmpz_poly thing is a low priority issue (and no, I don't want to see it in the fmpz_poly.pxd file, actually I did something in my branch as you first did, i.e. add some suffix, you chose old, I chose class.)



---

archive/issue_comments_211125.json:
```json
{
    "body": "<a id='comment:29'></a>Scary, the problem is fixed by `./sage -ba`",
    "created_at": "2014-10-14T09:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211125",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Scary, the problem is fixed by `./sage -ba`



---

archive/issue_comments_211126.json:
```json
{
    "body": "<a id='comment:30'></a>This is not very helpful but when the same issue happened to me, my browser history tells me I had a look at:\n* http://stackoverflow.com/questions/8024805/cython-compiled-c-extension-importerror-dynamic-module-does-not-define-init-fu\n* http://stackoverflow.com/questions/24226001/importerror-dynamic-module-does-not-define-init-function-initfizzbuzz\nand I also remember it kind of got away randomly.\nMaybe it was caused by old compiled files (a lot of files changed names or were moved...)",
    "created_at": "2014-10-14T09:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211126",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>This is not very helpful but when the same issue happened to me, my browser history tells me I had a look at:
* http://stackoverflow.com/questions/8024805/cython-compiled-c-extension-importerror-dynamic-module-does-not-define-init-fu
* http://stackoverflow.com/questions/24226001/importerror-dynamic-module-does-not-define-init-function-initfizzbuzz
and I also remember it kind of got away randomly.
Maybe it was caused by old compiled files (a lot of files changed names or were moved...)



---

archive/issue_comments_211127.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:28 jpflori]:\n> and no, I don't want to see it in the fmpz_poly.pxd file\n\nActually, why not? It's perhaps not what I would have designed initially, but maybe it's the best solution given the current situation (I don't like renaming Cython modules just for the sake of it).",
    "created_at": "2014-10-14T09:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211127",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Replying to [comment:28 jpflori]:
> and no, I don't want to see it in the fmpz_poly.pxd file

Actually, why not? It's perhaps not what I would have designed initially, but maybe it's the best solution given the current situation (I don't like renaming Cython modules just for the sake of it).



---

archive/issue_comments_211128.json:
```json
{
    "body": "<a id='comment:32'></a>Yeah, that might be the solution with the less side effects.\nExcept that doing `from sage.libs.fmpz_poly cimport *` which should basically do nothing for a `pxd` file just being glue for a C header will now (potentially) pull a bunch of actual Cython dependencies.",
    "created_at": "2014-10-14T10:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211128",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>Yeah, that might be the solution with the less side effects.
Except that doing `from sage.libs.fmpz_poly cimport *` which should basically do nothing for a `pxd` file just being glue for a C header will now (potentially) pull a bunch of actual Cython dependencies.



---

archive/issue_comments_211129.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-14T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211130.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-10-14T13:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_211131.json:
```json
{
    "body": "<a id='comment:36'></a>I see some `mpz_...` functions defined in Sage files have been deleted.\nI guess it's because FLINT now provides similar functionalities, or at least the functions using them in Sage have changed to use other flitn functions?",
    "created_at": "2014-10-14T14:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211131",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:36'></a>I see some `mpz_...` functions defined in Sage files have been deleted.
I guess it's because FLINT now provides similar functionalities, or at least the functions using them in Sage have changed to use other flitn functions?



---

archive/issue_comments_211132.json:
```json
{
    "body": "<a id='comment:37'></a>Oops...",
    "created_at": "2014-10-14T14:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211132",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:37'></a>Oops...



---

archive/issue_comments_211133.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-14T14:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211133",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211134.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:36 jpflori]:\n> I see some `mpz_...` functions defined in Sage files have been deleted.\n\nThey were unused. Some of them are actually copied to a proper `.pyx` file where they belong.",
    "created_at": "2014-10-14T14:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211134",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Replying to [comment:36 jpflori]:
> I see some `mpz_...` functions defined in Sage files have been deleted.

They were unused. Some of them are actually copied to a proper `.pyx` file where they belong.



---

archive/issue_comments_211135.json:
```json
{
    "body": "<a id='comment:40'></a>Eventually the whole file `gmp.pxi` (and other similar ones) should be gone.",
    "created_at": "2014-10-14T14:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211135",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>Eventually the whole file `gmp.pxi` (and other similar ones) should be gone.



---

archive/issue_comments_211136.json:
```json
{
    "body": "<a id='comment:41'></a>The array things are in the wrong places in the definition of the `nmod...` types in `types.pxd`. Apart from that it looks ok.\n\nCould you correct that in a new commit (that is not doing a forced push).\nI'm currently testing the branch in a personal branch using more stuff from flint and merging forced push can be a pain sometimes.\n\nI'll restest everything on top of a vanilla `trac/develop` branch a little later.",
    "created_at": "2014-10-14T16:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211136",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:41'></a>The array things are in the wrong places in the definition of the `nmod...` types in `types.pxd`. Apart from that it looks ok.

Could you correct that in a new commit (that is not doing a forced push).
I'm currently testing the branch in a personal branch using more stuff from flint and merging forced push can be a pain sometimes.

I'll restest everything on top of a vanilla `trac/develop` branch a little later.



---

archive/issue_comments_211137.json:
```json
{
    "body": "<a id='comment:42'></a>In fact the array stuff was already misplaced before...",
    "created_at": "2014-10-14T16:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211137",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>In fact the array stuff was already misplaced before...



---

archive/issue_comments_211138.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:41 jpflori]:\n> I'm currently testing the branch in a personal branch using more stuff from flint and merging forced push can be a pain sometimes.\n\nConcerning forced pushes: in my mind (this is not official policy), forced pushes are fine *before* setting a ticket to needs_review. The alternative is not pushing until you have something ready for review, which is worse.",
    "created_at": "2014-10-15T06:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211138",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>Replying to [comment:41 jpflori]:
> I'm currently testing the branch in a personal branch using more stuff from flint and merging forced push can be a pain sometimes.

Concerning forced pushes: in my mind (this is not official policy), forced pushes are fine *before* setting a ticket to needs_review. The alternative is not pushing until you have something ready for review, which is worse.



---

archive/issue_comments_211139.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:41 jpflori]:\n> The array things are in the wrong places in the definition of the `nmod...` types in `types.pxd`.\n\nPlease clarify (or post a reviewer patch), I have no idea what you mean.",
    "created_at": "2014-10-15T06:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211139",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>Replying to [comment:41 jpflori]:
> The array things are in the wrong places in the definition of the `nmod...` types in `types.pxd`.

Please clarify (or post a reviewer patch), I have no idea what you mean.



---

archive/issue_comments_211140.json:
```json
{
    "body": "<a id='comment:45'></a>There are some\n\n```\nctypedef nmod_poly_struct[1] nmod_poly_t\n```\nor variations and similar\nwhich should be\n\n```\nctypedef nmod_poly_struct nmod_poly_t[1]\n```",
    "created_at": "2014-10-15T08:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211140",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:45'></a>There are some

```
ctypedef nmod_poly_struct[1] nmod_poly_t
```
or variations and similar
which should be

```
ctypedef nmod_poly_struct nmod_poly_t[1]
```



---

archive/issue_comments_211141.json:
```json
{
    "body": "<a id='comment:46'></a>I'm basically happy with Jeroen work.\n\nJeroen: can you double check my latest changes?\nIf they suit you, lgtm.\n\n---\nNew commits:",
    "created_at": "2014-10-15T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211141",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:46'></a>I'm basically happy with Jeroen work.

Jeroen: can you double check my latest changes?
If they suit you, lgtm.

---
New commits:



---

archive/issue_comments_211142.json:
```json
{
    "body": "<a id='comment:47'></a>Sorry, I have no idea what to do (as reviewer) with [http://git.sagemath.org/sage.git/commit/?id=fc177409e274f01611a4bb7ae71623ee48ce655d](http://git.sagemath.org/sage.git/commit/?id=fc177409e274f01611a4bb7ae71623ee48ce655d)\n\nThe other 2 commits obviously make sense.",
    "created_at": "2014-10-15T20:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211142",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>Sorry, I have no idea what to do (as reviewer) with [http://git.sagemath.org/sage.git/commit/?id=fc177409e274f01611a4bb7ae71623ee48ce655d](http://git.sagemath.org/sage.git/commit/?id=fc177409e274f01611a4bb7ae71623ee48ce655d)

The other 2 commits obviously make sense.



---

archive/issue_comments_211143.json:
```json
{
    "body": "<a id='comment:48'></a>Oops.\nIn fact `mpir` should read `sage-6.4.beta6` and I just merged your branch into it...",
    "created_at": "2014-10-15T21:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211143",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:48'></a>Oops.
In fact `mpir` should read `sage-6.4.beta6` and I just merged your branch into it...



---

archive/issue_comments_211144.json:
```json
{
    "body": "<a id='comment:49'></a>So positive_review I assume.",
    "created_at": "2014-10-15T21:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211144",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:49'></a>So positive_review I assume.



---

archive/issue_comments_211145.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-15T21:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211145",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_211146.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-16T21:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16428#issuecomment-211146",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048332.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-16T21:10:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16428#event-48332"
}
```
