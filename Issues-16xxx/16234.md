# Issue 16234: Assorted fixes and optimizations in sage-combinat (mostly partitions and tableaux)

archive/issues_015997.json:
```json
{
    "body": "- Improve documentation of promotion operators (there are three of them in Sage) on SSYTs.\n\n- Add doc to Lascoux-Sch\u00fctzenberger action on tableaux.\n\n- Add a few more `@`combinatorial_map decorators on tableaux, partitions, posets.\n\n- Fix doc of the Greene-Kleitman partition method on finite posets.\n\n- Speed up `is_column_strict` and three further methods on tableaux. PSA: don't use `copy.deepcopy` unless you really don't know the internal structure of the objects you are copying.\n\n- Fix a bug in the iterator of `Partitions(..., outer=a)` that caused `a` to be mutated occasionally, and that required `a` to be a list (as opposed to, more reasonably, a partition or tuple):\n\n```\nsage: a = [4,2,1,1,1,1,1]\nsage: for p in Partitions(8, outer=a, min_slope=-1):\n    print p\n....:     \n[3, 2, 1, 1, 1]\n[2, 2, 1, 1, 1, 1]\n[2, 1, 1, 1, 1, 1, 1]\nsage: a\n[3, 2, 1, 1, 1, 1, 1]\n```\n\nCC:  @jessicapalencia @tscrim @anneschilling sage-combinat stumpc5 vivianepons @nthiery gchatel\n\nKeywords: combinat, tableaux, partitions, findstat, documentation, integer_list, mutability\n\nBranch/Commit: be05e3c425f97b94cb07aae5e83e5a04a12ea58e\n\nReviewer: Viviane Pons\n\nAuthor: Darij Grinberg\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16234\n\n",
    "closed_at": "2014-10-29T10:39:10Z",
    "created_at": "2014-04-25T06:44:46Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Assorted fixes and optimizations in sage-combinat (mostly partitions and tableaux)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16234",
    "user": "https://github.com/darijgr"
}
```
- Improve documentation of promotion operators (there are three of them in Sage) on SSYTs.

- Add doc to Lascoux-Sch√ºtzenberger action on tableaux.

- Add a few more `@`combinatorial_map decorators on tableaux, partitions, posets.

- Fix doc of the Greene-Kleitman partition method on finite posets.

- Speed up `is_column_strict` and three further methods on tableaux. PSA: don't use `copy.deepcopy` unless you really don't know the internal structure of the objects you are copying.

- Fix a bug in the iterator of `Partitions(..., outer=a)` that caused `a` to be mutated occasionally, and that required `a` to be a list (as opposed to, more reasonably, a partition or tuple):

```
sage: a = [4,2,1,1,1,1,1]
sage: for p in Partitions(8, outer=a, min_slope=-1):
    print p
....:     
[3, 2, 1, 1, 1]
[2, 2, 1, 1, 1, 1]
[2, 1, 1, 1, 1, 1, 1]
sage: a
[3, 2, 1, 1, 1, 1, 1]
```

CC:  @jessicapalencia @tscrim @anneschilling sage-combinat stumpc5 vivianepons @nthiery gchatel

Keywords: combinat, tableaux, partitions, findstat, documentation, integer_list, mutability

Branch/Commit: be05e3c425f97b94cb07aae5e83e5a04a12ea58e

Reviewer: Viviane Pons

Author: Darij Grinberg

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16234





---

archive/issue_comments_264749.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-25T06:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264749",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264750.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2014-04-25T06:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264750",
    "user": "https://github.com/darijgr"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_events_047847.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16234#event-47847"
}
```



---

archive/issue_events_047848.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16234#event-47848"
}
```



---

archive/issue_events_047849.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16234#event-47849"
}
```



---

archive/issue_comments_264751.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|\n|[3f7cec5](http://git.sagemath.org/sage.git/commit/?id=3f7cec5dbde81eb9d885953400a6b8abca98a6ba)|`Merge branch 'public/combinat/tableaux-et-al-doc' of git://trac.sagemath.org/sage into morestat`|\n|[c9d051f](http://git.sagemath.org/sage.git/commit/?id=c9d051fe916310d5dcfefe691193b5d44a9f9870)|`minor improvements to semistandardness testing`|",
    "created_at": "2014-10-16T15:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
|[3f7cec5](http://git.sagemath.org/sage.git/commit/?id=3f7cec5dbde81eb9d885953400a6b8abca98a6ba)|`Merge branch 'public/combinat/tableaux-et-al-doc' of git://trac.sagemath.org/sage into morestat`|
|[c9d051f](http://git.sagemath.org/sage.git/commit/?id=c9d051fe916310d5dcfefe691193b5d44a9f9870)|`minor improvements to semistandardness testing`|



---

archive/issue_comments_264752.json:
```json
{
    "body": "Changing commit from \"462e427a6c0f3a45d15d08f4630cc981b3609102\" to \"c9d051fe916310d5dcfefe691193b5d44a9f9870\"",
    "created_at": "2014-10-16T15:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "462e427a6c0f3a45d15d08f4630cc981b3609102" to "c9d051fe916310d5dcfefe691193b5d44a9f9870"



---

archive/issue_comments_264753.json:
```json
{
    "body": "Changing commit from \"c9d051fe916310d5dcfefe691193b5d44a9f9870\" to \"045ada00385e37ac746b7320388d13c2e0d9d5a2\"",
    "created_at": "2014-10-25T00:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c9d051fe916310d5dcfefe691193b5d44a9f9870" to "045ada00385e37ac746b7320388d13c2e0d9d5a2"



---

archive/issue_comments_264754.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[dd76d7d](http://git.sagemath.org/sage.git/commit/?id=dd76d7df7c11597793771a333417af928ef63589)|`floor and ceiling mutability for integer lists fixed`|\n|[045ada0](http://git.sagemath.org/sage.git/commit/?id=045ada00385e37ac746b7320388d13c2e0d9d5a2)|`remove deprecated and hideously confusing list function`|",
    "created_at": "2014-10-25T00:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[dd76d7d](http://git.sagemath.org/sage.git/commit/?id=dd76d7df7c11597793771a333417af928ef63589)|`floor and ceiling mutability for integer lists fixed`|
|[045ada0](http://git.sagemath.org/sage.git/commit/?id=045ada00385e37ac746b7320388d13c2e0d9d5a2)|`remove deprecated and hideously confusing list function`|



---

archive/issue_comments_264755.json:
```json
{
    "body": "Changing keywords from \"combinat, tableaux, partitions, findstat, documentation\" to \"combinat, tableaux, partitions, findstat, documentation, integer_list, mutability\".",
    "created_at": "2014-10-25T00:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264755",
    "user": "https://github.com/darijgr"
}
```

Changing keywords from "combinat, tableaux, partitions, findstat, documentation" to "combinat, tableaux, partitions, findstat, documentation, integer_list, mutability".



---

archive/issue_comments_264756.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,17 @@\n - Fix doc of the Greene-Kleitman partition method on finite posets.\n \n - Speed up `is_column_strict` and three further methods on tableaux. PSA: don't use `copy.deepcopy` unless you really don't know the internal structure of the objects you are copying.\n+\n+- Fix a bug in the iterator of `Partitions(..., outer=a)` that caused `a` to be mutated occasionally, and that required `a` to be a list (as opposed to, more reasonably, a partition or tuple):\n+\n+```\n+sage: a = [4,2,1,1,1,1,1]\n+sage: for p in Partitions(8, outer=a, min_slope=-1):\n+    print p\n+....:     \n+[3, 2, 1, 1, 1]\n+[2, 2, 1, 1, 1, 1]\n+[2, 1, 1, 1, 1, 1, 1]\n+sage: a\n+[3, 2, 1, 1, 1, 1, 1]\n+```\n``````\n",
    "created_at": "2014-10-25T00:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264756",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,17 @@
 - Fix doc of the Greene-Kleitman partition method on finite posets.
 
 - Speed up `is_column_strict` and three further methods on tableaux. PSA: don't use `copy.deepcopy` unless you really don't know the internal structure of the objects you are copying.
+
+- Fix a bug in the iterator of `Partitions(..., outer=a)` that caused `a` to be mutated occasionally, and that required `a` to be a list (as opposed to, more reasonably, a partition or tuple):
+
+```
+sage: a = [4,2,1,1,1,1,1]
+sage: for p in Partitions(8, outer=a, min_slope=-1):
+    print p
+....:     
+[3, 2, 1, 1, 1]
+[2, 2, 1, 1, 1, 1]
+[2, 1, 1, 1, 1, 1, 1]
+sage: a
+[3, 2, 1, 1, 1, 1, 1]
+```
``````




---

archive/issue_comments_264757.json:
```json
{
    "body": "<a id='comment:10'></a>\nHi Darij, thank you very much for this work!\n\n\nThere is something wrong with the documentation of `symmetric_group_action_on_values`. I must say that I didn't know this operation, so I don't know its definition. But from the code, it seems that your documentation doesn't quite correspond to what is done in the code. When you write this:\n\n\n```\n        Then, let `a` be the number of opening\n        parentheses in the word, and `b` the number of closing\n        parentheses (notice that all opening parentheses are left of\n        all closing parentheses). Replace the first `b` parentheses\n        by the letters `i+1`, and replace the remaining `a` parentheses\n        by the letters `i`.\n```\n\n\nIndeed, the action of `s_1` on `[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)` should give `[This is the Trac macro *2,1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#2,1-macro)` which is not a semi-standard tableau... (you obtain the unmatched parenthesizes `)(`).  The code answers `[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)`, I must say that it is quite obscure and I don't understand what they're doing. But obviously, the documentation does not explain it correctly. Do you have the paper reference where this operation is described? \n\nApart from that, it seems good to me.",
    "created_at": "2014-10-27T13:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264757",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:10'></a>
Hi Darij, thank you very much for this work!


There is something wrong with the documentation of `symmetric_group_action_on_values`. I must say that I didn't know this operation, so I don't know its definition. But from the code, it seems that your documentation doesn't quite correspond to what is done in the code. When you write this:


```
        Then, let `a` be the number of opening
        parentheses in the word, and `b` the number of closing
        parentheses (notice that all opening parentheses are left of
        all closing parentheses). Replace the first `b` parentheses
        by the letters `i+1`, and replace the remaining `a` parentheses
        by the letters `i`.
```


Indeed, the action of `s_1` on `[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)` should give `[This is the Trac macro *2,1* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#2,1-macro)` which is not a semi-standard tableau... (you obtain the unmatched parenthesizes `)(`).  The code answers `[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)`, I must say that it is quite obscure and I don't understand what they're doing. But obviously, the documentation does not explain it correctly. Do you have the paper reference where this operation is described? 

Apart from that, it seems good to me.



---

archive/issue_comments_264758.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-27T13:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264758",
    "user": "https://github.com/VivianePons"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_264759.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[be05e3c](http://git.sagemath.org/sage.git/commit/?id=be05e3c425f97b94cb07aae5e83e5a04a12ea58e)|`fix the documentation blunder Viviane found`|",
    "created_at": "2014-10-27T14:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[be05e3c](http://git.sagemath.org/sage.git/commit/?id=be05e3c425f97b94cb07aae5e83e5a04a12ea58e)|`fix the documentation blunder Viviane found`|



---

archive/issue_comments_264760.json:
```json
{
    "body": "Changing commit from \"045ada00385e37ac746b7320388d13c2e0d9d5a2\" to \"be05e3c425f97b94cb07aae5e83e5a04a12ea58e\"",
    "created_at": "2014-10-27T14:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "045ada00385e37ac746b7320388d13c2e0d9d5a2" to "be05e3c425f97b94cb07aae5e83e5a04a12ea58e"



---

archive/issue_comments_264761.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you -- this should be fixed now.",
    "created_at": "2014-10-27T14:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264761",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'></a>
Thank you -- this should be fixed now.



---

archive/issue_comments_264762.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-27T14:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264762",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_264763.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Viviane Pons\"",
    "created_at": "2014-10-28T13:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264763",
    "user": "https://github.com/VivianePons"
}
```

Changing reviewer from "" to "Viviane Pons"



---

archive/issue_comments_264764.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-28T13:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264764",
    "user": "https://github.com/VivianePons"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264765.json:
```json
{
    "body": "<a id='comment:14'></a>\nWell, this is mostly doc improvement. I read everything and it seems quite fine for me. I run the tests on every changed files and built the documentation.",
    "created_at": "2014-10-28T13:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264765",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:14'></a>
Well, this is mostly doc improvement. I read everything and it seems quite fine for me. I run the tests on every changed files and built the documentation.



---

archive/issue_comments_264766.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for the review!",
    "created_at": "2014-10-28T16:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264766",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>
Thanks for the review!



---

archive/issue_comments_264767.json:
```json
{
    "body": "Changing branch from \"public/combinat/tableaux-et-al-doc\" to \"be05e3c425f97b94cb07aae5e83e5a04a12ea58e\"",
    "created_at": "2014-10-29T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264767",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/tableaux-et-al-doc" to "be05e3c425f97b94cb07aae5e83e5a04a12ea58e"



---

archive/issue_comments_264768.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-29T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16234#issuecomment-264768",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_047850.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-29T10:39:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16234",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16234#event-47850"
}
```
