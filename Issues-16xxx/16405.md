# Issue 16405: Cartesian product of rings

archive/issues_016168.json:
```json
{
    "body": "This ticket lifts up cartesian product features to the categories recently created in #10963, where they belong. Thanks to this and to the definition of CartesianProducts for the Distributive axiom, we have now:\n\n```\nsage: Fields().CartesianProducts()\nJoin of Category of rings\n    and Category of Cartesian products of distributive magmas and additive magmas\n    and Category of Cartesian products of semigroups \n    and Category of Cartesian products of unital magmas\n    and Category of Cartesian products of additive inverse additive unital additive magmas \n    and Category of Cartesian products of additive commutative additive magmas \n    and Category of Cartesian products of additive semigroups\n```\n\nAnd this works smoothly for all variants of rings (semirings, ...).\n\nThis fixes a piece of : #15425.\n\nCC:  sage-combinat @nathanncohen @videlec @dimpase\n\nKeywords: cartesian product\n\nBranch/Commit: eced39e483d11838ad826694a7fd29e26c3cdf64\n\nReviewer: Nathann Cohen\n\nAuthor: Nicolas M. Thi\u00e9ry\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16405\n\n",
    "closed_at": "2014-06-02T15:56:26Z",
    "created_at": "2014-05-27T14:51:35Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Cartesian product of rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16405",
    "user": "https://github.com/nthiery"
}
```
This ticket lifts up cartesian product features to the categories recently created in #10963, where they belong. Thanks to this and to the definition of CartesianProducts for the Distributive axiom, we have now:

```
sage: Fields().CartesianProducts()
Join of Category of rings
    and Category of Cartesian products of distributive magmas and additive magmas
    and Category of Cartesian products of semigroups 
    and Category of Cartesian products of unital magmas
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```

And this works smoothly for all variants of rings (semirings, ...).

This fixes a piece of : #15425.

CC:  sage-combinat @nathanncohen @videlec @dimpase

Keywords: cartesian product

Branch/Commit: eced39e483d11838ad826694a7fd29e26c3cdf64

Reviewer: Nathann Cohen

Author: Nicolas M. Thi√©ry

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16405





---

archive/issue_comments_269853.json:
```json
{
    "body": "Changing branch from \"\" to \"u/nthiery/cartesian_product_of_rings\"",
    "created_at": "2014-05-27T14:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269853",
    "user": "https://github.com/nthiery"
}
```

Changing branch from "" to "u/nthiery/cartesian_product_of_rings"



---

archive/issue_comments_269854.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-05-27T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269854",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_269855.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-27T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269855",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_269856.json:
```json
{
    "body": "Changing commit from \"\" to \"8b547db0ecdae108a3fa94b69010b579edb0d149\"",
    "created_at": "2014-05-27T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269856",
    "user": "https://github.com/nthiery"
}
```

Changing commit from "" to "8b547db0ecdae108a3fa94b69010b579edb0d149"



---

archive/issue_comments_269857.json:
```json
{
    "body": "<a id='comment:3'></a>Is it normal that we see \n\n```\n    and Category of Cartesian products of additive inverse additive unital additive magmas \n    and Category of Cartesian products of additive commutative additive magmas \n    and Category of Cartesian products of additive semigroups\n```\n\ninstead of \"Additive Group\" ?\n\nNathann",
    "created_at": "2014-05-27T16:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269857",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>Is it normal that we see 

```
    and Category of Cartesian products of additive inverse additive unital additive magmas 
    and Category of Cartesian products of additive commutative additive magmas 
    and Category of Cartesian products of additive semigroups
```

instead of "Additive Group" ?

Nathann



---

archive/issue_comments_269858.json:
```json
{
    "body": "<a id='comment:4'></a>Helloooooooooooo !!\n\nSome comments/questions:\n\n- What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?\n\n- consistancy -> consistency\n\n- class nesting is cool and everything but you have to scroll non-stop with\n  stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub\n  class you are writing your code ?\n\n- You implement the `neg` function for cartesian product of AdditiveInverse\n  Magma, but don't you also need to say somewhere what exactly is the \"1\"\n  element of a cartesian product of UnitalMagma ?\n\n- You do things like :\n  {{{\nMagmas().Unital().Inverse()\n  }}}\n\n  It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?\n\n- maybe I misread but you seem to implement `__invert__` in\n  `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in\n  `Magmas().Unital().Inverse().CartesianProduct()` ?\n\nNathann",
    "created_at": "2014-05-27T17:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269858",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Helloooooooooooo !!

Some comments/questions:

- What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?

- consistancy -> consistency

- class nesting is cool and everything but you have to scroll non-stop with
  stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
  class you are writing your code ?

- You implement the `neg` function for cartesian product of AdditiveInverse
  Magma, but don't you also need to say somewhere what exactly is the "1"
  element of a cartesian product of UnitalMagma ?

- You do things like :
  {{{
Magmas().Unital().Inverse()
  }}}

  It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?

- maybe I misread but you seem to implement `__invert__` in
  `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
  `Magmas().Unital().Inverse().CartesianProduct()` ?

Nathann



---

archive/issue_comments_269859.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-05-27T17:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269859",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_269860.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-28T08:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269860",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269861.json:
```json
{
    "body": "Changing commit from \"8b547db0ecdae108a3fa94b69010b579edb0d149\" to \"27f6c9aa0206d77349f4759062b85ce4fc8f737a\"",
    "created_at": "2014-05-28T08:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8b547db0ecdae108a3fa94b69010b579edb0d149" to "27f6c9aa0206d77349f4759062b85ce4fc8f737a"



---

archive/issue_comments_269862.json:
```json
{
    "body": "<a id='comment:7'></a>Salut Nathann,\n\nThanks for the quick review!\n\nReplying to [comment:4 ncohen]:\n> Some comments/questions:\n> \n> - What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?\n> - maybe I misread but you seem to implement `__invert__` in\n>   `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in\n>   `Magmas().Unital().Inverse().CartesianProduct()` ?\n\n\nThe notion of inverse (resp. negation) can be defined as soon as there\nis a unit, thought some elements might not have inverses, or have non\nunique inverses. So the method `__invert__` (resp. `__neg__`) makes\nsense, even if it's only partially defined.\n\nI just pushed a fix that better handles those partially defined\ninverse / negation for cartesian products, and clarifies the\ndocumentation.\n\n> - consistancy -> consistency\n\n\nFixed!\n\n> - class nesting is cool and everything but you have to scroll non-stop with\n>   stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub\n>   class you are writing your code ?\n\n\nAlas no. Code folding is really a life saver here, but I still need to\ndig through the emacs packages to find one that implements such\nfolding with a reasonable interface.\n\n> - You implement the `neg` function for cartesian product of AdditiveInverse\n>   Magma, but don't you also need to say somewhere what exactly is the \"1\"\n>   element of a cartesian product of UnitalMagma ?\n\n\nI think this was there. In any cases, right now we have:\n\n```\nMagmas.Unital.CartesianProducts.ParentMethods.one\nMagmas.Unital.CartesianProducts.ElementMethods.__invert__\n\nAdditiveMagmas.AdditiveUnital.CartesianProducts.ParentMethods.zero\nAdditiveMagmas.AdditiveUnital.CartesianProducts.ElementMethods._neg_\n```\n\n> - You do things like :\n>   {{{\n> Magmas().Unital().Inverse()\n>   }}}\n> \n>   It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?\n\n\nYou mean `Magmas().Inverse()` as a shorthand for\n`Magmas().Unital().Inverse()`? I wondered about this, but so far\npreferred to only define the Inverse axiom if there exists a unit.\n\nOne thing is that there exist a notion of `inverse semigroups` where\nan element is only requested to have a \"local\" inverse (technically it\nhas to be invertible in some submonoid whose unit need not be a unit\nfor the whole semigroup). So I'd rather leave the room free for future\nextensions.\n\nCheers,\n                                    Nicolas\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|\n|[27f6c9a](http://git.sagemath.org/sage.git/commit/?id=27f6c9aa0206d77349f4759062b85ce4fc8f737a)|`16405: better handling and documentation of partially defined __neg__ and __invert__`|\n---\nNew commits:",
    "created_at": "2014-05-28T08:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269862",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>Salut Nathann,

Thanks for the quick review!

Replying to [comment:4 ncohen]:
> Some comments/questions:
> 
> - What are sub/neg doing in `AdditiveMagma().AdditiveUnital()` ?
> - maybe I misread but you seem to implement `__invert__` in
>   `Magmas().Unital().CartesianProduct()`. Shouldn't it be several lines above, in
>   `Magmas().Unital().Inverse().CartesianProduct()` ?


The notion of inverse (resp. negation) can be defined as soon as there
is a unit, thought some elements might not have inverses, or have non
unique inverses. So the method `__invert__` (resp. `__neg__`) makes
sense, even if it's only partially defined.

I just pushed a fix that better handles those partially defined
inverse / negation for cartesian products, and clarifies the
documentation.

> - consistancy -> consistency


Fixed!

> - class nesting is cool and everything but you have to scroll non-stop with
>   stuff like emacs.... Do you have a trick to know in which sub/sub/sub/sub
>   class you are writing your code ?


Alas no. Code folding is really a life saver here, but I still need to
dig through the emacs packages to find one that implements such
folding with a reasonable interface.

> - You implement the `neg` function for cartesian product of AdditiveInverse
>   Magma, but don't you also need to say somewhere what exactly is the "1"
>   element of a cartesian product of UnitalMagma ?


I think this was there. In any cases, right now we have:

```
Magmas.Unital.CartesianProducts.ParentMethods.one
Magmas.Unital.CartesianProducts.ElementMethods.__invert__

AdditiveMagmas.AdditiveUnital.CartesianProducts.ParentMethods.zero
AdditiveMagmas.AdditiveUnital.CartesianProducts.ElementMethods._neg_
```

> - You do things like :
>   {{{
> Magmas().Unital().Inverse()
>   }}}
> 
>   It feels like the syntax should be `Magmas().Unital().Inverse()`, which would imply Unital. What do you think ?


You mean `Magmas().Inverse()` as a shorthand for
`Magmas().Unital().Inverse()`? I wondered about this, but so far
preferred to only define the Inverse axiom if there exists a unit.

One thing is that there exist a notion of `inverse semigroups` where
an element is only requested to have a "local" inverse (technically it
has to be invertible in some submonoid whose unit need not be a unit
for the whole semigroup). So I'd rather leave the room free for future
extensions.

Cheers,
                                    Nicolas

---
New commits:
|                                                                                                                                          |                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
|[27f6c9a](http://git.sagemath.org/sage.git/commit/?id=27f6c9aa0206d77349f4759062b85ce4fc8f737a)|`16405: better handling and documentation of partially defined __neg__ and __invert__`|
---
New commits:



---

archive/issue_comments_269863.json:
```json
{
    "body": "Changing commit from \"27f6c9aa0206d77349f4759062b85ce4fc8f737a\" to \"eced39e483d11838ad826694a7fd29e26c3cdf64\"",
    "created_at": "2014-06-02T08:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27f6c9aa0206d77349f4759062b85ce4fc8f737a" to "eced39e483d11838ad826694a7fd29e26c3cdf64"



---

archive/issue_comments_269864.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-02T08:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_269865.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2014-06-02T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269865",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_269866.json:
```json
{
    "body": "<a id='comment:9'></a>Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !\n\nI agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.\n\nThanks for this patch !\n\nNathann",
    "created_at": "2014-06-02T11:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269866",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !

I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.

Thanks for this patch !

Nathann



---

archive/issue_comments_269867.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 ncohen]:\n> Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !\n\n\nPretty cool tool indeed! Thanks for finding it! (for the curious emacs users: if you enable this minor mode by customizing which-function-mode, the name of the class / function the cursor is in is printed in the status bar; works better with emacs 24). \n\n> I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.\n\n\nYou are definitely learning it quick :-)\n\n> Thanks for this patch !\n\n\nThanks for the review!",
    "created_at": "2014-06-02T15:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269867",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>Replying to [comment:9 ncohen]:
> Ahahahaah. Reviewing this code is *MUCH* easier with emacs' which-function-mode. Night and day !


Pretty cool tool indeed! Thanks for finding it! (for the curious emacs users: if you enable this minor mode by customizing which-function-mode, the name of the class / function the cursor is in is printed in the status bar; works better with emacs 24). 

> I agree with it, knowing that I am not all-knowledeagle on category stuff. But I do pay attention, I do try, and I may eventually learn.


You are definitely learning it quick :-)

> Thanks for this patch !


Thanks for the review!



---

archive/issue_events_048290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-02T15:56:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16405#event-48290"
}
```



---

archive/issue_comments_269868.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-02T15:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269868",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_269869.json:
```json
{
    "body": "Changing branch from \"u/nthiery/cartesian_product_of_rings\" to \"eced39e483d11838ad826694a7fd29e26c3cdf64\"",
    "created_at": "2014-06-02T15:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16405#issuecomment-269869",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/nthiery/cartesian_product_of_rings" to "eced39e483d11838ad826694a7fd29e26c3cdf64"
