# Issue 16580: FiniteStateMachine: cleanup code

archive/issues_016343.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\n#16067 introduced some changes into the finite state machine code by rewritting several instances of filter into list comprehensions. When re-reading the resulting code, I had the impression that the code can be simplified somewhat by combining it with the next lines (two occurrences). So I simplified these two occurrences.\n\nAnother occurrence touched very inefficient code in `_latex_` which was scheduled to be rewritten at some state anyway. So this is now done. Unfortunately, this changes the order of the transitions in the latex output, so the output in a few corresponding doctests had to be reordered, too.\n\nFurthermore, when #15990 rewrote the raise statement for Python 3 compatibility, one occurrence of the old syntax was re-introduced in a separate branch. Fixed this.\n\nFinally, added two doctests where I wanted to make sure that two methods work as promised.\n\nDepends on #16557\n\nCC:  @dkrenn @sagetrac-skropf\n\nComponent: **finite state machines**\n\nAuthor: **Clemens Heuberger**\n\nBranch/Commit: **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**\n\nReviewer: **Daniel Krenn**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16580_\n\n",
    "closed_at": "2014-07-31T00:44:26Z",
    "created_at": "2014-06-28T05:59:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20finite%20state%20machines",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20finite%20state%20machines"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "FiniteStateMachine: cleanup code",
    "type": "issue",
    "updated_at": "2014-07-31T00:44:26Z",
    "url": "https://github.com/sagemath/sage/issues/16580",
    "user": "https://github.com/cheuberg"
}
```
<div id="comment:0"></div>

#16067 introduced some changes into the finite state machine code by rewritting several instances of filter into list comprehensions. When re-reading the resulting code, I had the impression that the code can be simplified somewhat by combining it with the next lines (two occurrences). So I simplified these two occurrences.

Another occurrence touched very inefficient code in `_latex_` which was scheduled to be rewritten at some state anyway. So this is now done. Unfortunately, this changes the order of the transitions in the latex output, so the output in a few corresponding doctests had to be reordered, too.

Furthermore, when #15990 rewrote the raise statement for Python 3 compatibility, one occurrence of the old syntax was re-introduced in a separate branch. Fixed this.

Finally, added two doctests where I wanted to make sure that two methods work as promised.

Depends on #16557

CC:  @dkrenn @sagetrac-skropf

Component: **finite state machines**

Author: **Clemens Heuberger**

Branch/Commit: **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**

Reviewer: **Daniel Krenn**

_Issue created by migration from https://trac.sagemath.org/ticket/16580_





---

archive/issue_events_234811.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234811"
}
```



---

archive/issue_events_234812.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20finite%20state%20machines",
    "label_color": "0000ff",
    "label_name": "c: finite state machines",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234812"
}
```



---

archive/issue_events_234813.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234813"
}
```



---

archive/issue_events_234814.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234814"
}
```



---

archive/issue_events_234815.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20finite%20state%20machines",
    "label_color": "0000ff",
    "label_name": "c: finite state machines",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234815"
}
```



---

archive/issue_events_234816.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-06-28T05:59:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234816"
}
```



---

archive/issue_comments_215694.json:
```json
{
    "body": "Reviewer: **Daniel Krenn**",
    "created_at": "2014-07-19T17:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215694",
    "user": "https://github.com/dkrenn"
}
```

Reviewer: **Daniel Krenn**



---

archive/issue_events_234817.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-19T17:49:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234817"
}
```



---

archive/issue_events_234818.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-19T17:49:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234818"
}
```



---

archive/issue_comments_215695.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReviewed the patch...looks fine.",
    "created_at": "2014-07-19T17:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215695",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:2" align="right">comment:2</div>

Reviewed the patch...looks fine.



---

archive/issue_comments_215696.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFails on OSX:\n\n```\nsage -t --long src/sage/combinat/finite_state_machine.py\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 3318, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    latex(T)\nExpected:\n    \\begin{tikzpicture}[auto, initial text=, >=latex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid {\\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{3}}$} (v2.201.57);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v2) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{1}}$} (v3.298.69);\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-2}}$} (v0.51.31);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v1.328.43);\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-3}}$} (v0.21.57);\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-1}}$} (v0.118.69);\n    \\path[->] (v0) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{2}}$} (v4.231.31);\n    \\end{tikzpicture}\nGot:\n    \\begin{tikzpicture}[auto, initial text=, >=latex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid {\\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{3}}$} (v2.201.57);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{2}}$} (v4.231.31);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{1}}$} (v3.298.69);\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-2}}$} (v0.51.31);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v1.328.43);\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-3}}$} (v0.21.57);\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-1}}$} (v0.118.69);\n    \\path[->] (v0) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v2) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\end{tikzpicture}\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 3352, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    latex(T)\nExpected:\n    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\\$ \\mid \\varepsilon$} ++(180.00:10ex);\n    \\node[state] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid w_{0} w_{0}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\\mid w_{0} w_{3}$} (v2.201.57);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v2) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\\mid w_{0} w_{1}$} (v3.298.69);\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\\mid w_{0} w_{-2}$} (v0.51.31);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\\mid w_{0} w_{0}$} (v1.328.43);\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\\mid w_{0} w_{-3}$} (v0.21.57);\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\\mid w_{0} w_{-1}$} (v0.118.69);\n    \\path[->] (v0) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\\mid w_{0} w_{0}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\\mid w_{0} w_{2}$} (v4.231.31);\n    \\end{tikzpicture}\nGot:\n    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\\$ \\mid \\varepsilon$} ++(180.00:10ex);\n    \\node[state] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid w_{0} w_{0}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\\mid w_{0} w_{3}$} (v2.201.57);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\\mid w_{0} w_{2}$} (v4.231.31);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\\mid w_{0} w_{1}$} (v3.298.69);\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\\mid w_{0} w_{-2}$} (v0.51.31);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\\mid w_{0} w_{0}$} (v1.328.43);\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\\mid w_{0} w_{-3}$} (v0.21.57);\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\\mid w_{0} w_{-1}$} (v0.118.69);\n    \\path[->] (v0) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\\mid w_{0} w_{0}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v2) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\end{tikzpicture}\n**********************************************************************\n1 item had failures:\n   2 of 132 in sage.combinat.finite_state_machine.FiniteStateMachine.?\n    [1234 tests, 2 failures, 3.75 s]\n```",
    "created_at": "2014-07-20T03:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215696",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>

Fails on OSX:

```
sage -t --long src/sage/combinat/finite_state_machine.py
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 3318, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    latex(T)
Expected:
    \begin{tikzpicture}[auto, initial text=, >=latex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid {\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{3}}$} (v2.201.57);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v2) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{1}}$} (v3.298.69);
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-2}}$} (v0.51.31);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v1.328.43);
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-3}}$} (v0.21.57);
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-1}}$} (v0.118.69);
    \path[->] (v0) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{2}}$} (v4.231.31);
    \end{tikzpicture}
Got:
    \begin{tikzpicture}[auto, initial text=, >=latex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid {\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{3}}$} (v2.201.57);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{2}}$} (v4.231.31);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{1}}$} (v3.298.69);
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-2}}$} (v0.51.31);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v1.328.43);
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-3}}$} (v0.21.57);
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-1}}$} (v0.118.69);
    \path[->] (v0) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v2) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \end{tikzpicture}
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 3352, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    latex(T)
Expected:
    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\$ \mid \varepsilon$} ++(180.00:10ex);
    \node[state] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid w_{0} w_{0}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\mid w_{0} w_{3}$} (v2.201.57);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\mid w_{0}$} ();
    \path[->] (v2) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\mid w_{0} w_{1}$} (v3.298.69);
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\mid w_{0} w_{-2}$} (v0.51.31);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\mid w_{0} w_{0}$} (v1.328.43);
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\mid w_{0} w_{-3}$} (v0.21.57);
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\mid w_{0} w_{-1}$} (v0.118.69);
    \path[->] (v0) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\mid w_{0}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\mid w_{0} w_{0}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\mid w_{0} w_{2}$} (v4.231.31);
    \end{tikzpicture}
Got:
    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\$ \mid \varepsilon$} ++(180.00:10ex);
    \node[state] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid w_{0} w_{0}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\mid w_{0} w_{3}$} (v2.201.57);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\mid w_{0}$} ();
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\mid w_{0} w_{2}$} (v4.231.31);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\mid w_{0} w_{1}$} (v3.298.69);
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\mid w_{0} w_{-2}$} (v0.51.31);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\mid w_{0} w_{0}$} (v1.328.43);
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\mid w_{0} w_{-3}$} (v0.21.57);
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\mid w_{0} w_{-1}$} (v0.118.69);
    \path[->] (v0) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\mid w_{0}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\mid w_{0} w_{0}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v2) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \end{tikzpicture}
**********************************************************************
1 item had failures:
   2 of 132 in sage.combinat.finite_state_machine.FiniteStateMachine.?
    [1234 tests, 2 failures, 3.75 s]
```



---

archive/issue_events_234819.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-20T03:22:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234819"
}
```



---

archive/issue_events_234820.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-20T03:22:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234820"
}
```



---

archive/issue_comments_215697.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@vbraun](#comment%3A3):\n> Fails on OSX: [...]\n\nChecked again; works on my Debian. It seem that the output is correct, but the lines are permutated.",
    "created_at": "2014-07-20T07:22:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215697",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@vbraun](#comment%3A3):
> Fails on OSX: [...]

Checked again; works on my Debian. It seem that the output is correct, but the lines are permutated.



---

archive/issue_comments_215698.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51\"><code>4eef9c8</code></a></td><td><code>trac #16580: use OrderedDict instead of dict to have non-random output</code></td></tr></table>\n",
    "created_at": "2014-07-21T08:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215698",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51"><code>4eef9c8</code></a></td><td><code>trac #16580: use OrderedDict instead of dict to have non-random output</code></td></tr></table>




---

archive/issue_comments_215699.json:
```json
{
    "body": "Changed commit from **[`fd618dc`](https://github.com/sagemath/sagetrac-mirror/commit/fd618dcb88bf9771419caf8d86ce617b644e6e54)** to **[`4eef9c8`](https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51)**",
    "created_at": "2014-07-21T08:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd618dc`](https://github.com/sagemath/sagetrac-mirror/commit/fd618dcb88bf9771419caf8d86ce617b644e6e54)** to **[`4eef9c8`](https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51)**



---

archive/issue_events_234821.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-07-21T08:59:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234821"
}
```



---

archive/issue_events_234822.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-07-21T08:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234822"
}
```



---

archive/issue_comments_215700.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI now replaced a `dict` by an `OrderedDict` in order to avoid the problem that the order of the output seems to be architecture-dependent. The performance overhead should be bearable as we sort anyway to collect transitions between the same pairs of states.",
    "created_at": "2014-07-21T08:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215700",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:7" align="right">comment:7</div>

I now replaced a `dict` by an `OrderedDict` in order to avoid the problem that the order of the output seems to be architecture-dependent. The performance overhead should be bearable as we sort anyway to collect transitions between the same pairs of states.



---

archive/issue_events_234823.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-21T09:35:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234823"
}
```



---

archive/issue_events_234824.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-21T09:35:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234824"
}
```



---

archive/issue_events_234825.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-22T14:15:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234825"
}
```



---

archive/issue_events_234826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-22T14:15:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234826"
}
```



---

archive/issue_comments_215701.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nStill fails on osx\n\n```\nsage -t --long src/sage/combinat/finite_state_machine.py\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 3699, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    latex(T)\nExpected:\n    \\begin{tikzpicture}[auto, initial text=, >=latex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid {\\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-1}}$} (v0.118.69);\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-2}}$} (v0.51.31);\n    \\path[->] (v2) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-3}}$} (v0.21.57);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v1.328.43);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{1}}$} (v3.298.69);\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{2}}$} (v4.231.31);\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{3}}$} (v2.201.57);\n    \\path[->] (v0) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\end{tikzpicture}\nGot:\n    \\begin{tikzpicture}[auto, initial text=, >=latex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid {\\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v1.328.43);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{1}}$} (v3.298.69);\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{2}}$} (v4.231.31);\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{3}}$} (v2.201.57);\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{0}}$} (v0.148.43);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-1}}$} (v0.118.69);\n    \\path[->] (v3) edge[loop above] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-2}}$} (v0.51.31);\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0} w_{-3}}$} (v0.21.57);\n    \\path[->] (v2) edge[loop below] node {${\\scriptstyle w_{0}}\\mid {\\scriptstyle w_{0}}$} ();\n    \\end{tikzpicture}\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 3733, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    latex(T)\nExpected:\n    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\\$ \\mid \\varepsilon$} ++(180.00:10ex);\n    \\node[state] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid w_{0} w_{0}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\\mid w_{0} w_{0}$} (v0.148.43);\n    \\path[->] (v3) edge[loop above] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\\mid w_{0} w_{-1}$} (v0.118.69);\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\\mid w_{0} w_{-2}$} (v0.51.31);\n    \\path[->] (v2) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\\mid w_{0} w_{-3}$} (v0.21.57);\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\\mid w_{0} w_{0}$} (v1.328.43);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\\mid w_{0} w_{1}$} (v3.298.69);\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\\mid w_{0} w_{2}$} (v4.231.31);\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\\mid w_{0} w_{3}$} (v2.201.57);\n    \\path[->] (v0) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\end{tikzpicture}\nGot:\n    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]\n    \\node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\\mathcal{I}$};\n    \\node[state] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\\$ \\mid \\varepsilon$} ++(180.00:10ex);\n    \\node[state] (v2) at (6.000000, 3.000000) {$\\mathbf{3}$};\n    \\path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\\$ \\mid w_{0} w_{0}$} ++(45.00:10ex);\n    \\node[state] (v3) at (-2.000000, 3.000000) {$\\mathbf{1}$};\n    \\node[state] (v4) at (2.000000, 3.000000) {$\\mathbf{2}$};\n    \\path[->] (v0) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\\mid w_{0} w_{0}$} (v1.328.43);\n    \\path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\\mid w_{0} w_{1}$} (v3.298.69);\n    \\path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\\mid w_{0} w_{2}$} (v4.231.31);\n    \\path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\\mid w_{0} w_{3}$} (v2.201.57);\n    \\path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\\mid w_{0} w_{0}$} (v0.148.43);\n    \\path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\\mid w_{0} w_{-1}$} (v0.118.69);\n    \\path[->] (v3) edge[loop above] node {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\\mid w_{0} w_{-2}$} (v0.51.31);\n    \\path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\\mid w_{0}$} ();\n    \\path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\\mid w_{0} w_{-3}$} (v0.21.57);\n    \\path[->] (v2) edge[loop below] node {$w_{0}\\mid w_{0}$} ();\n    \\end{tikzpicture}\n**********************************************************************\n1 item had failures:\n   2 of 132 in sage.combinat.finite_state_machine.FiniteStateMachine.?\n    [1249 tests, 2 failures, 3.23 s]\n```",
    "created_at": "2014-07-22T14:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215701",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Still fails on osx

```
sage -t --long src/sage/combinat/finite_state_machine.py
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 3699, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    latex(T)
Expected:
    \begin{tikzpicture}[auto, initial text=, >=latex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid {\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-1}}$} (v0.118.69);
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-2}}$} (v0.51.31);
    \path[->] (v2) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-3}}$} (v0.21.57);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v1.328.43);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{1}}$} (v3.298.69);
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{2}}$} (v4.231.31);
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{3}}$} (v2.201.57);
    \path[->] (v0) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \end{tikzpicture}
Got:
    \begin{tikzpicture}[auto, initial text=, >=latex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state, accepting, accepting where=left] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \node[state, accepting, accepting where=45] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid {\scriptstyle w_{0} w_{0}}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v1.328.43);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{1}}$} (v3.298.69);
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{2}}$} (v4.231.31);
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{3}}$} (v2.201.57);
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{0}}$} (v0.148.43);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-1}}$} (v0.118.69);
    \path[->] (v3) edge[loop above] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-2}}$} (v0.51.31);
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0} w_{-3}}$} (v0.21.57);
    \path[->] (v2) edge[loop below] node {${\scriptstyle w_{0}}\mid {\scriptstyle w_{0}}$} ();
    \end{tikzpicture}
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 3733, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    latex(T)
Expected:
    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\$ \mid \varepsilon$} ++(180.00:10ex);
    \node[state] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid w_{0} w_{0}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\mid w_{0}$} ();
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\mid w_{0} w_{0}$} (v0.148.43);
    \path[->] (v3) edge[loop above] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\mid w_{0} w_{-1}$} (v0.118.69);
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\mid w_{0}$} ();
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\mid w_{0} w_{-2}$} (v0.51.31);
    \path[->] (v2) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\mid w_{0} w_{-3}$} (v0.21.57);
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\mid w_{0} w_{0}$} (v1.328.43);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\mid w_{0} w_{1}$} (v3.298.69);
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\mid w_{0} w_{2}$} (v4.231.31);
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\mid w_{0} w_{3}$} (v2.201.57);
    \path[->] (v0) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \end{tikzpicture}
Got:
    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]
    \node[state, initial, initial where=above] (v0) at (0.000000, 0.000000) {$\mathcal{I}$};
    \node[state] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\$ \mid \varepsilon$} ++(180.00:10ex);
    \node[state] (v2) at (6.000000, 3.000000) {$\mathbf{3}$};
    \path[->] (v2.45.00) edge node[rotate=45.00, anchor=south] {$\$ \mid w_{0} w_{0}$} ++(45.00:10ex);
    \node[state] (v3) at (-2.000000, 3.000000) {$\mathbf{1}$};
    \node[state] (v4) at (2.000000, 3.000000) {$\mathbf{2}$};
    \path[->] (v0) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v0.158.43) edge node[rotate=333.43, anchor=north] {$w_{0}\mid w_{0} w_{0}$} (v1.328.43);
    \path[->] (v0.128.69) edge node[rotate=303.69, anchor=north] {$w_{0}\mid w_{0} w_{1}$} (v3.298.69);
    \path[->] (v0.61.31) edge node[rotate=56.31, anchor=south] {$w_{0}\mid w_{0} w_{2}$} (v4.231.31);
    \path[->] (v0.31.57) edge node[rotate=26.57, anchor=south] {$w_{0}\mid w_{0} w_{3}$} (v2.201.57);
    \path[->] (v1.-21.57) edge node[rotate=-26.57, anchor=south] {$w_{0}\mid w_{0} w_{0}$} (v0.148.43);
    \path[->] (v1) edge[loop left] node[rotate=90, anchor=south] {$w_{0}\mid w_{0}$} ();
    \path[->] (v3.-51.31) edge node[rotate=-56.31, anchor=south] {$w_{0}\mid w_{0} w_{-1}$} (v0.118.69);
    \path[->] (v3) edge[loop above] node {$w_{0}\mid w_{0}$} ();
    \path[->] (v4.-118.69) edge node[rotate=56.31, anchor=north] {$w_{0}\mid w_{0} w_{-2}$} (v0.51.31);
    \path[->] (v4) edge[loop right] node[rotate=90, anchor=north] {$w_{0}\mid w_{0}$} ();
    \path[->] (v2.-148.43) edge node[rotate=26.57, anchor=north] {$w_{0}\mid w_{0} w_{-3}$} (v0.21.57);
    \path[->] (v2) edge[loop below] node {$w_{0}\mid w_{0}$} ();
    \end{tikzpicture}
**********************************************************************
1 item had failures:
   2 of 132 in sage.combinat.finite_state_machine.FiniteStateMachine.?
    [1249 tests, 2 failures, 3.23 s]
```



---

archive/issue_comments_215702.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThere seems to be a problem that 0<'I' does not always give the same answer; see\nhttps://groups.google.com/d/topic/sage-devel/zzVpd5yZ_Rw/discussion .",
    "created_at": "2014-07-22T17:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215702",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:10" align="right">comment:10</div>

There seems to be a problem that 0<'I' does not always give the same answer; see
https://groups.google.com/d/topic/sage-devel/zzVpd5yZ_Rw/discussion .



---

archive/issue_comments_215703.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWouldn't a doctest template like this:\n\n```\n    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]\n...\n    \\node[state] (v1) at (-6.000000, 3.000000) {$\\mathbf{0}$};\n    \\path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\\$ \\mid \\varepsilon$} ++(180.00:10ex);\n...\n    \\end{tikzpicture}\n```\nbe good enough? Then the whole order thing gets avoided and we're still testing that the output has some of the desired characteristics.",
    "created_at": "2014-07-22T19:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215703",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

Wouldn't a doctest template like this:

```
    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, accepting/.style=accepting by arrow, accepting distance=10ex]
...
    \node[state] (v1) at (-6.000000, 3.000000) {$\mathbf{0}$};
    \path[->] (v1.180.00) edge node[rotate=360.00, anchor=south] {$\$ \mid \varepsilon$} ++(180.00:10ex);
...
    \end{tikzpicture}
```
be good enough? Then the whole order thing gets avoided and we're still testing that the output has some of the desired characteristics.



---

archive/issue_comments_215704.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOr compare sets\n\n```\nsage: expected = \"\"\"\n....:    \\begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, \n....:    ...\n....:    \\end{tikzpicture}\n....: \"\"\"\nsage: set(latex(T).splitlines()) == set(expected.splitlines())\n```\nOr write a convenience funtion to do the comparison and import it into the doctest.",
    "created_at": "2014-07-22T22:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215704",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Or compare sets

```
sage: expected = """
....:    \begin{tikzpicture}[auto, initial text=, >=latex, accepting text=, 
....:    ...
....:    \end{tikzpicture}
....: """
sage: set(latex(T).splitlines()) == set(expected.splitlines())
```
Or write a convenience funtion to do the comparison and import it into the doctest.



---

archive/issue_comments_215705.json:
```json
{
    "body": "Changed commit from **[`4eef9c8`](https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51)** to **[`6dc0eca`](https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47)**",
    "created_at": "2014-07-23T06:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4eef9c8`](https://github.com/sagemath/sagetrac-mirror/commit/4eef9c8be87f02a8e100899a471cb1e6e5841a51)** to **[`6dc0eca`](https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47)**



---

archive/issue_comments_215706.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47\"><code>6dc0eca</code></a></td><td><code>trac #16580: only use integer labels in doctests for latex_options</code></td></tr></table>\n",
    "created_at": "2014-07-23T06:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47"><code>6dc0eca</code></a></td><td><code>trac #16580: only use integer labels in doctests for latex_options</code></td></tr></table>




---

archive/issue_comments_215707.json:
```json
{
    "body": "Changed commit from **[`6dc0eca`](https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47)** to **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**",
    "created_at": "2014-07-23T06:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6dc0eca`](https://github.com/sagemath/sagetrac-mirror/commit/6dc0eca28f10488f8a0430cba8cdc6c5902d6b47)** to **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**



---

archive/issue_comments_215708.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04\"><code>102be36</code></a></td><td><code>Merge commit '1bfb513ca3a9dc11a232bdd6ee31625fe5822572' (#16557) of trac.sagemath.org:sage into fsm/code-cleanup-post-16067</code></td></tr></table>\n",
    "created_at": "2014-07-23T06:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04"><code>102be36</code></a></td><td><code>Merge commit '1bfb513ca3a9dc11a232bdd6ee31625fe5822572' (#16557) of trac.sagemath.org:sage into fsm/code-cleanup-post-16067</code></td></tr></table>




---

archive/issue_comments_215709.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThank you for your comments, here and on sage-devel.\n\nSo I understand that the result of `0 < 'I'` is intentionally random.\n\nFor the particular two sometimes failing doctests (I now could reproduce the failure by calling `sage -t` via a Makefile), the solution seems to be actually quite simple: In the sample transducer, I renamed the state `'I'` to `4`, now we are sorting integers and that should be well-defined.\n\nThis required merging of #16557 in order to avoid a merge conflict.\n\nTrac's automerge is still unhappy, but I cannot see the reason.",
    "created_at": "2014-07-23T06:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215709",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:15" align="right">comment:15</div>

Thank you for your comments, here and on sage-devel.

So I understand that the result of `0 < 'I'` is intentionally random.

For the particular two sometimes failing doctests (I now could reproduce the failure by calling `sage -t` via a Makefile), the solution seems to be actually quite simple: In the sample transducer, I renamed the state `'I'` to `4`, now we are sorting integers and that should be well-defined.

This required merging of #16557 in order to avoid a merge conflict.

Trac's automerge is still unhappy, but I cannot see the reason.



---

archive/issue_events_234827.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-07-23T06:27:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234827"
}
```



---

archive/issue_events_234828.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-07-23T06:27:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234828"
}
```



---

archive/issue_comments_215710.json:
```json
{
    "body": "Dependencies: **#16557**",
    "created_at": "2014-07-23T06:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215710",
    "user": "https://github.com/cheuberg"
}
```

Dependencies: **#16557**



---

archive/issue_comments_215711.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReviewed the changes. It's a positive_review for me.\n\nCan someone test it on osx and if tests pass give it a positive review?",
    "created_at": "2014-07-23T07:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215711",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:16" align="right">comment:16</div>

Reviewed the changes. It's a positive_review for me.

Can someone test it on osx and if tests pass give it a positive review?



---

archive/issue_comments_215712.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt was now tested on osx as well (thanks to R.B.).",
    "created_at": "2014-07-30T10:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215712",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:17" align="right">comment:17</div>

It was now tested on osx as well (thanks to R.B.).



---

archive/issue_events_234829.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-30T10:54:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234829"
}
```



---

archive/issue_events_234830.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2014-07-30T10:54:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234830"
}
```



---

archive/issue_events_234831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-31T00:44:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234831"
}
```



---

archive/issue_events_234832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cc22a404c9b6e51b38b177650c689804d6744f0b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-31T00:44:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16580#event-234832"
}
```



---

archive/issue_comments_215713.json:
```json
{
    "body": "Changed branch from **[u/cheuberg/fsm/code-cleanup-post-16067](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/code-cleanup-post-16067)** to **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**",
    "created_at": "2014-07-31T00:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16580",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16580#issuecomment-215713",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/cheuberg/fsm/code-cleanup-post-16067](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/code-cleanup-post-16067)** to **[`102be36`](https://github.com/sagemath/sagetrac-mirror/commit/102be36393c29989a9c8a2346c1f087e5c03ad04)**
