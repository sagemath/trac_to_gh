# Issue 16806: Isogeny Bounds for Elliptic Curves over Number Fields

archive/issues_016569.json:
```json
{
    "body": "\n\nCC:  @JohnCremona @categorie\n\nBranch/Commit: 8c9301671b354f7ba6c24d48f28d0e2b0698f39f\n\nReviewer: John Cremona, Chris Wuthrich\n\nAuthor: Eric Larson\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16806\n\n",
    "closed_at": "2014-09-25T12:05:22Z",
    "created_at": "2014-08-12T18:33:26Z",
    "labels": [
        "component: elliptic curves",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Isogeny Bounds for Elliptic Curves over Number Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16806",
    "user": "https://github.com/elarson314"
}
```


CC:  @JohnCremona @categorie

Branch/Commit: 8c9301671b354f7ba6c24d48f28d0e2b0698f39f

Reviewer: John Cremona, Chris Wuthrich

Author: Eric Larson

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16806





---

archive/issue_comments_276496.json:
```json
{
    "body": "Changing branch from \"\" to \"u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields\"",
    "created_at": "2014-08-12T18:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276496",
    "user": "https://github.com/elarson314"
}
```

Changing branch from "" to "u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields"



---

archive/issue_events_063696.json:
```json
{
    "actor": "https://github.com/elarson314",
    "created_at": "2014-08-12T18:35:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16806#event-63696"
}
```



---

archive/issue_comments_276497.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-12T18:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276497",
    "user": "https://github.com/elarson314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_276498.json:
```json
{
    "body": "Changing commit from \"\" to \"00199fb220aa173d8585b9e90654dafd3247d82d\"",
    "created_at": "2014-08-12T18:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276498",
    "user": "https://github.com/elarson314"
}
```

Changing commit from "" to "00199fb220aa173d8585b9e90654dafd3247d82d"



---

archive/issue_comments_276499.json:
```json
{
    "body": "Changing author from \"\" to \"Eric Larson\"",
    "created_at": "2014-08-12T20:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276499",
    "user": "https://github.com/JohnCremona"
}
```

Changing author from "" to "Eric Larson"



---

archive/issue_comments_276500.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[fdbb133](https://github.com/sagemath/sagetrac-mirror/commit/fdbb13305246209ffe9e6adf78968091c4b3e5ed)|`Added code to bound isogenies to the GaloisRepresentation class`|",
    "created_at": "2014-08-13T16:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[fdbb133](https://github.com/sagemath/sagetrac-mirror/commit/fdbb13305246209ffe9e6adf78968091c4b3e5ed)|`Added code to bound isogenies to the GaloisRepresentation class`|



---

archive/issue_comments_276501.json:
```json
{
    "body": "Changing commit from \"00199fb220aa173d8585b9e90654dafd3247d82d\" to \"fdbb13305246209ffe9e6adf78968091c4b3e5ed\"",
    "created_at": "2014-08-13T16:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "00199fb220aa173d8585b9e90654dafd3247d82d" to "fdbb13305246209ffe9e6adf78968091c4b3e5ed"



---

archive/issue_comments_276502.json:
```json
{
    "body": "Changing commit from \"fdbb13305246209ffe9e6adf78968091c4b3e5ed\" to \"ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5\"",
    "created_at": "2014-08-13T16:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fdbb13305246209ffe9e6adf78968091c4b3e5ed" to "ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5"



---

archive/issue_comments_276503.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[ea410d4](https://github.com/sagemath/sagetrac-mirror/commit/ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5)|`Revert \"Updated Sage version to 6.3\"`|",
    "created_at": "2014-08-13T16:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[ea410d4](https://github.com/sagemath/sagetrac-mirror/commit/ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5)|`Revert "Updated Sage version to 6.3"`|



---

archive/issue_comments_276504.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[4b1a2d4](https://github.com/sagemath/sagetrac-mirror/commit/4b1a2d4ece0914fff47dae5ee4210dcf5745c217)|`Revert \"Revert \"Updated Sage version to 6.3\"\"`|",
    "created_at": "2014-08-13T16:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[4b1a2d4](https://github.com/sagemath/sagetrac-mirror/commit/4b1a2d4ece0914fff47dae5ee4210dcf5745c217)|`Revert "Revert "Updated Sage version to 6.3""`|



---

archive/issue_comments_276505.json:
```json
{
    "body": "Changing commit from \"ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5\" to \"4b1a2d4ece0914fff47dae5ee4210dcf5745c217\"",
    "created_at": "2014-08-13T16:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea410d47cdf63f26bf4b7dacf255b90b3f9d13d5" to "4b1a2d4ece0914fff47dae5ee4210dcf5745c217"



---

archive/issue_comments_276506.json:
```json
{
    "body": "Changing commit from \"4b1a2d4ece0914fff47dae5ee4210dcf5745c217\" to \"12c6f0162ff02ab4800f969f23f40942c6852c0d\"",
    "created_at": "2014-08-13T17:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b1a2d4ece0914fff47dae5ee4210dcf5745c217" to "12c6f0162ff02ab4800f969f23f40942c6852c0d"



---

archive/issue_comments_276507.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[12c6f01](https://github.com/sagemath/sagetrac-mirror/commit/12c6f0162ff02ab4800f969f23f40942c6852c0d)|`comitting because git wants me to?`|",
    "created_at": "2014-08-13T17:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[12c6f01](https://github.com/sagemath/sagetrac-mirror/commit/12c6f0162ff02ab4800f969f23f40942c6852c0d)|`comitting because git wants me to?`|



---

archive/issue_comments_276508.json:
```json
{
    "body": "Changing commit from \"12c6f0162ff02ab4800f969f23f40942c6852c0d\" to \"dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1\"",
    "created_at": "2014-08-13T17:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "12c6f0162ff02ab4800f969f23f40942c6852c0d" to "dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1"



---

archive/issue_comments_276509.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[dc0185c](https://github.com/sagemath/sagetrac-mirror/commit/dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1)|`sorted out now?`|",
    "created_at": "2014-08-13T17:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[dc0185c](https://github.com/sagemath/sagetrac-mirror/commit/dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1)|`sorted out now?`|



---

archive/issue_comments_276510.json:
```json
{
    "body": "Changing commit from \"dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1\" to \"87718324fe607636d420d0fa25874d7e1de67009\"",
    "created_at": "2014-08-13T17:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dc0185c5b11d7ce7347bd4a724efc1bf7bf6a4f1" to "87718324fe607636d420d0fa25874d7e1de67009"



---

archive/issue_comments_276511.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[8771832](https://github.com/sagemath/sagetrac-mirror/commit/87718324fe607636d420d0fa25874d7e1de67009)|`forgot to import Set`|",
    "created_at": "2014-08-13T17:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[8771832](https://github.com/sagemath/sagetrac-mirror/commit/87718324fe607636d420d0fa25874d7e1de67009)|`forgot to import Set`|



---

archive/issue_comments_276512.json:
```json
{
    "body": "<a id='comment:10'></a>\nOK -- branch now works, I successfully merged it into my own working branch for #16743 (which does not yet use this new code).",
    "created_at": "2014-08-13T19:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276512",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
OK -- branch now works, I successfully merged it into my own working branch for #16743 (which does not yet use this new code).



---

archive/issue_comments_276513.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Cremona\"",
    "created_at": "2014-08-27T12:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276513",
    "user": "https://github.com/JohnCremona"
}
```

Changing reviewer from "" to "John Cremona"



---

archive/issue_comments_276514.json:
```json
{
    "body": "Changing branch from \"u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields\" to \"u/cremona/ticket/16806\"",
    "created_at": "2014-08-27T12:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276514",
    "user": "https://github.com/JohnCremona"
}
```

Changing branch from "u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields" to "u/cremona/ticket/16806"



---

archive/issue_comments_276515.json:
```json
{
    "body": "<a id='comment:11'></a>\nI made some rather superficial changes to the new function and added a couple more examples.  The changes simlify the code while retaining exactly the same logic.   I had to rename the branch on trac (it is now u/cremona/ticket/16806) as that's the way it has to be (I cannot edit a u/elarson3 branch).\n\nMy edits were superficial, otherwise I give the original new code a positive review.  That means that if you are happy with my additional changes we can jointly give it a positive review.  Before that I'll merge in the current develop branch and re-upload, but the changes I made should all be visible already in the commit 828ed6f.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|\n|[cadd58f](https://github.com/sagemath/sagetrac-mirror/commit/cadd58f3290e1c9e44b86d30195ce921c0f5db95)|`Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into larson`|\n|[828ed6f](https://github.com/sagemath/sagetrac-mirror/commit/828ed6fee261a575c27e996d84c11c2bc7dabac0)|`#16806: reviewer's patch`|",
    "created_at": "2014-08-27T12:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276515",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'></a>
I made some rather superficial changes to the new function and added a couple more examples.  The changes simlify the code while retaining exactly the same logic.   I had to rename the branch on trac (it is now u/cremona/ticket/16806) as that's the way it has to be (I cannot edit a u/elarson3 branch).

My edits were superficial, otherwise I give the original new code a positive review.  That means that if you are happy with my additional changes we can jointly give it a positive review.  Before that I'll merge in the current develop branch and re-upload, but the changes I made should all be visible already in the commit 828ed6f.

---
New commits:
|                                                                                                                                          |                                                                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|
|[cadd58f](https://github.com/sagemath/sagetrac-mirror/commit/cadd58f3290e1c9e44b86d30195ce921c0f5db95)|`Merge remote-tracking branch 'trac/u/elarson3/isogeny_bounds_for_elliptic_curves_over_number_fields' into larson`|
|[828ed6f](https://github.com/sagemath/sagetrac-mirror/commit/828ed6fee261a575c27e996d84c11c2bc7dabac0)|`#16806: reviewer's patch`|



---

archive/issue_comments_276516.json:
```json
{
    "body": "Changing commit from \"87718324fe607636d420d0fa25874d7e1de67009\" to \"828ed6fee261a575c27e996d84c11c2bc7dabac0\"",
    "created_at": "2014-08-27T12:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276516",
    "user": "https://github.com/JohnCremona"
}
```

Changing commit from "87718324fe607636d420d0fa25874d7e1de67009" to "828ed6fee261a575c27e996d84c11c2bc7dabac0"



---

archive/issue_comments_276517.json:
```json
{
    "body": "<a id='comment:12'></a>\nForget the last part of my previous comment:  I had already done the merge, as you can see from the list of new commits (first the merge, then my reviewer's patch).  So this is ready for re-review by the original author!\n\nI have now made #16743 dependent on this (isogeny classes of elliptic curves over number fields), which means that I am keener than ever to get this merged.",
    "created_at": "2014-08-27T12:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276517",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'></a>
Forget the last part of my previous comment:  I had already done the merge, as you can see from the list of new commits (first the merge, then my reviewer's patch).  So this is ready for re-review by the original author!

I have now made #16743 dependent on this (isogeny classes of elliptic curves over number fields), which means that I am keener than ever to get this merged.



---

archive/issue_comments_276518.json:
```json
{
    "body": "<a id='comment:14'></a>\nA few comments:\n* The docstring of the main function reads \"\"Returns a list of primes `p` including all primes for which the mod-`p` representation might not be contained in a Borel.\"\" Isn't it the complement, i.e., all those that \"may be contained in a Borel\" ?\n\n* I thought  \"try: ...  except `ValueError`: return [0]\"  is not what we should do. If the long and convoluted line in try produces a `ValueError`, that could have many reasons, and we should not just ignore this and send back [0] but pass the error on.\n\n* It is a shame that this function will not be available for curves over Q. But I guess it should be a separate ticket to merge the two classes dealing with Galois Reps together at some point.",
    "created_at": "2014-09-16T14:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276518",
    "user": "https://github.com/categorie"
}
```

<a id='comment:14'></a>
A few comments:
* The docstring of the main function reads ""Returns a list of primes `p` including all primes for which the mod-`p` representation might not be contained in a Borel."" Isn't it the complement, i.e., all those that "may be contained in a Borel" ?

* I thought  "try: ...  except `ValueError`: return [0]"  is not what we should do. If the long and convoluted line in try produces a `ValueError`, that could have many reasons, and we should not just ignore this and send back [0] but pass the error on.

* It is a shame that this function will not be available for curves over Q. But I guess it should be a separate ticket to merge the two classes dealing with Galois Reps together at some point.



---

archive/issue_comments_276519.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [wuthrich](#comment%3A14):\n> A few comments:\n> * The docstring of the main function reads \"\"Returns a list of primes `p` including all primes for which the mod-`p` representation might not be contained in a Borel.\"\" Isn't it the complement, i.e., all those that \"may be contained in a Borel\" ?\n> \n\n\nYou are right.\n\n> * I thought  \"try: ...  except `ValueError`: return [0]\"  is not what we should do. If the long and convoluted line in try produces a `ValueError`, that could have many reasons, and we should not just ignore this and send back [0] but pass the error on.\n\n\nI'm to blame for the long line -- the original version had this split over many lines.   The set we return is the union of (1) primes of additive reduction (found as factors of gcd(c4,Delta) in effect; (2) primes ramified in the field; (3) the ones returned by _semistable_reducible_primes.  The latter function uses [0] to denote CM.  So I cannot see what circumstances will lead to a ValueError, and suggest we can simplify this.\n\n> \n> * It is a shame that this function will not be available for curves over Q. But I guess it should be a separate ticket to merge the two classes dealing with Galois Reps together at some point.\n\n\nAgreed.  I said so myself somewhere.\n\nI will revise the branch to take into account your first two points...",
    "created_at": "2014-09-16T14:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276519",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:15'></a>
Replying to [wuthrich](#comment%3A14):
> A few comments:
> * The docstring of the main function reads ""Returns a list of primes `p` including all primes for which the mod-`p` representation might not be contained in a Borel."" Isn't it the complement, i.e., all those that "may be contained in a Borel" ?
> 


You are right.

> * I thought  "try: ...  except `ValueError`: return [0]"  is not what we should do. If the long and convoluted line in try produces a `ValueError`, that could have many reasons, and we should not just ignore this and send back [0] but pass the error on.


I'm to blame for the long line -- the original version had this split over many lines.   The set we return is the union of (1) primes of additive reduction (found as factors of gcd(c4,Delta) in effect; (2) primes ramified in the field; (3) the ones returned by _semistable_reducible_primes.  The latter function uses [0] to denote CM.  So I cannot see what circumstances will lead to a ValueError, and suggest we can simplify this.

> 
> * It is a shame that this function will not be available for curves over Q. But I guess it should be a separate ticket to merge the two classes dealing with Galois Reps together at some point.


Agreed.  I said so myself somewhere.

I will revise the branch to take into account your first two points...



---

archive/issue_comments_276520.json:
```json
{
    "body": "Changing commit from \"828ed6fee261a575c27e996d84c11c2bc7dabac0\" to \"be81f80ca53d936ef7fe763753d3e6a34c0bc944\"",
    "created_at": "2014-09-17T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "828ed6fee261a575c27e996d84c11c2bc7dabac0" to "be81f80ca53d936ef7fe763753d3e6a34c0bc944"



---

archive/issue_comments_276521.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[0f4e30b](https://github.com/sagemath/sagetrac-mirror/commit/0f4e30b76c98a83fdf8a060f80502a884dcc3d00)|`Merge branch 'develop' into larson`|\n|[be81f80](https://github.com/sagemath/sagetrac-mirror/commit/be81f80ca53d936ef7fe763753d3e6a34c0bc944)|`#16806: minor changes after review`|",
    "created_at": "2014-09-17T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[0f4e30b](https://github.com/sagemath/sagetrac-mirror/commit/0f4e30b76c98a83fdf8a060f80502a884dcc3d00)|`Merge branch 'develop' into larson`|
|[be81f80](https://github.com/sagemath/sagetrac-mirror/commit/be81f80ca53d936ef7fe763753d3e6a34c0bc944)|`#16806: minor changes after review`|



---

archive/issue_comments_276522.json:
```json
{
    "body": "<a id='comment:17'></a>\nI made cosmetic changes in line with Chris's comments:  various tidying of docstrings (including fixing that double negative) and simplifying (making clearer I hope) the two long lines where various sets of primes are collected.  It turned out that a try/except is needed since the function _semistable_reducible_primes() does raise a ValueError if given a CM curve.\n\nReady for a new review!",
    "created_at": "2014-09-17T10:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276522",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:17'></a>
I made cosmetic changes in line with Chris's comments:  various tidying of docstrings (including fixing that double negative) and simplifying (making clearer I hope) the two long lines where various sets of primes are collected.  It turned out that a try/except is needed since the function _semistable_reducible_primes() does raise a ValueError if given a CM curve.

Ready for a new review!



---

archive/issue_comments_276523.json:
```json
{
    "body": "Changing commit from \"be81f80ca53d936ef7fe763753d3e6a34c0bc944\" to \"8c9301671b354f7ba6c24d48f28d0e2b0698f39f\"",
    "created_at": "2014-09-17T11:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276523",
    "user": "https://github.com/categorie"
}
```

Changing commit from "be81f80ca53d936ef7fe763753d3e6a34c0bc944" to "8c9301671b354f7ba6c24d48f28d0e2b0698f39f"



---

archive/issue_comments_276524.json:
```json
{
    "body": "Changing branch from \"u/cremona/ticket/16806\" to \"u/wuthrich/ticket/16806\"",
    "created_at": "2014-09-17T11:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276524",
    "user": "https://github.com/categorie"
}
```

Changing branch from "u/cremona/ticket/16806" to "u/wuthrich/ticket/16806"



---

archive/issue_comments_276525.json:
```json
{
    "body": "<a id='comment:18'></a>\nAm I right that the file does not appear in the reference manual ?\n\nI added this and modified the starting docstring so that the reference manual builds. \n\nStarting testing now. Except a positive review soon. \n\n---\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[8c93016](https://github.com/sagemath/sagetrac-mirror/commit/8c9301671b354f7ba6c24d48f28d0e2b0698f39f)|`trac 16806: include in documentation`|",
    "created_at": "2014-09-17T11:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276525",
    "user": "https://github.com/categorie"
}
```

<a id='comment:18'></a>
Am I right that the file does not appear in the reference manual ?

I added this and modified the starting docstring so that the reference manual builds. 

Starting testing now. Except a positive review soon. 

---
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[8c93016](https://github.com/sagemath/sagetrac-mirror/commit/8c9301671b354f7ba6c24d48f28d0e2b0698f39f)|`trac 16806: include in documentation`|



---

archive/issue_comments_276526.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks.  I seem to have forgotten to check that building the docs worked, but that would have been null anyway until you added it to the manual.  Good!",
    "created_at": "2014-09-17T12:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276526",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:19'></a>
Thanks.  I seem to have forgotten to check that building the docs worked, but that would have been null anyway until you added it to the manual.  Good!



---

archive/issue_comments_276527.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-17T14:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276527",
    "user": "https://github.com/categorie"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_276528.json:
```json
{
    "body": "Changing reviewer from \"John Cremona\" to \"John Cremona, Chris Wuthrich\"",
    "created_at": "2014-09-17T14:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276528",
    "user": "https://github.com/categorie"
}
```

Changing reviewer from "John Cremona" to "John Cremona, Chris Wuthrich"



---

archive/issue_comments_276529.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks!",
    "created_at": "2014-09-17T14:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276529",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'></a>
Thanks!



---

archive/issue_events_063697.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T11:23:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16806#event-63697"
}
```



---

archive/issue_events_063698.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-24T11:23:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16806#event-63698"
}
```



---

archive/issue_comments_276530.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-25T12:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276530",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_276531.json:
```json
{
    "body": "Changing branch from \"u/wuthrich/ticket/16806\" to \"8c9301671b354f7ba6c24d48f28d0e2b0698f39f\"",
    "created_at": "2014-09-25T12:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16806#issuecomment-276531",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/wuthrich/ticket/16806" to "8c9301671b354f7ba6c24d48f28d0e2b0698f39f"



---

archive/issue_events_063699.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-25T12:05:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16806#event-63699"
}
```
