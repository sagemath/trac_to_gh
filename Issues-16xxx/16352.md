# Issue 16352: TransitiveIdeal -> RecursivelyEnumeratedSet in the sage library

archive/issues_016115.json:
```json
{
    "body": "`TransitiveIdeal` and `TransitiveIealGraded` are used in the code of `sage/combinat`, `sage/categories` and `sage/groups` at least. These should be replaced by `RecursivelyEnumeratedSet` for speed improvements and also to avoid issues explained in #6637.\n\nThis is a follow up of #6637 where `TransitiveIdeal` and `TransitiveIealGraded` have been deprecated.\n\nMore precisely, occurences of\n\n   `TransitiveIdeal(succ, seeds)`\n   `TransitiveIdealGraded(succ, seeds, max_depth)`\n\nare replaced (respectively) by:\n\n   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`\n   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`\n\nIndeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before and I am assuming the structure is not graded.\n\n**CC:**  @anneschilling @tscrim\n\n**Keywords:** sd66\n\n**Branch/Commit:** [0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)\n\n**Reviewer:** Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** S\u00e9bastien Labb\u00e9\n\nIssue created by migration from https://trac.sagemath.org/ticket/16352\n\n",
    "closed_at": "2015-05-01T18:46:02Z",
    "created_at": "2014-05-13T20:02:35Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "title": "TransitiveIdeal -> RecursivelyEnumeratedSet in the sage library",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16352",
    "user": "https://github.com/seblabbe"
}
```
`TransitiveIdeal` and `TransitiveIealGraded` are used in the code of `sage/combinat`, `sage/categories` and `sage/groups` at least. These should be replaced by `RecursivelyEnumeratedSet` for speed improvements and also to avoid issues explained in #6637.

This is a follow up of #6637 where `TransitiveIdeal` and `TransitiveIealGraded` have been deprecated.

More precisely, occurences of

   `TransitiveIdeal(succ, seeds)`
   `TransitiveIdealGraded(succ, seeds, max_depth)`

are replaced (respectively) by:

   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`
   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`

Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before and I am assuming the structure is not graded.

**CC:**  @anneschilling @tscrim

**Keywords:** sd66

**Branch/Commit:** [0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)

**Reviewer:** Vincent Delecroix, Frédéric Chapoton

**Author:** Sébastien Labbé

Issue created by migration from https://trac.sagemath.org/ticket/16352





---

archive/issue_events_146064.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146064"
}
```



---

archive/issue_events_146065.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146065"
}
```



---

archive/issue_comments_213246.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,23 @@\n `TransitiveIdeal` and `TransitiveIealGraded` are used in the code of `sage/combinat`, `sage/categories` and `sage/groups` at least. These should be replaced by `RecursivelyEnumeratedSet` for speed improvements and also to avoid issues explained in #6637.\n \n This is a follow up of #6637 where `TransitiveIdeal` and `TransitiveIealGraded` have been deprecated.\n+\n+More precisely, occurences of\n+\n+   `TransitiveIdeal(succ, seeds)`\n+\n+are replaced by:\n+\n+   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`\n+\n+and occurences of\n+\n+   `TransitiveIdealGraded(succ, seeds, max_depth)`\n+\n+are replaced by:\n+\n+   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`\n+\n+Indeed, old transitive ideal *graded* was not using the hypothesis of being graded in the code. This is why the structure is set to `None` now. Of course, if people have *really* a graded structure, then the structure should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems.\n+\n+\n``````\n",
    "created_at": "2015-04-03T13:55:10Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213246",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,23 @@
 `TransitiveIdeal` and `TransitiveIealGraded` are used in the code of `sage/combinat`, `sage/categories` and `sage/groups` at least. These should be replaced by `RecursivelyEnumeratedSet` for speed improvements and also to avoid issues explained in #6637.
 
 This is a follow up of #6637 where `TransitiveIdeal` and `TransitiveIealGraded` have been deprecated.
+
+More precisely, occurences of
+
+   `TransitiveIdeal(succ, seeds)`
+
+are replaced by:
+
+   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`
+
+and occurences of
+
+   `TransitiveIdealGraded(succ, seeds, max_depth)`
+
+are replaced by:
+
+   `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`
+
+Indeed, old transitive ideal *graded* was not using the hypothesis of being graded in the code. This is why the structure is set to `None` now. Of course, if people have *really* a graded structure, then the structure should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems.
+
+
``````




---

archive/issue_comments_213247.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,19 +5,11 @@\n More precisely, occurences of\n \n    `TransitiveIdeal(succ, seeds)`\n+   `TransitiveIdealGraded(succ, seeds, max_depth)`\n \n-are replaced by:\n+are replaced (respectively) by:\n \n    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`\n-\n-and occurences of\n-\n-   `TransitiveIdealGraded(succ, seeds, max_depth)`\n-\n-are replaced by:\n-\n    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`\n \n-Indeed, old transitive ideal *graded* was not using the hypothesis of being graded in the code. This is why the structure is set to `None` now. Of course, if people have *really* a graded structure, then the structure should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems.\n-\n-\n+Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems and also because it seems that `TransitiveIdealGraded` was used in places where the structure was not graded...\n``````\n",
    "created_at": "2015-04-03T13:58:58Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213247",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,19 +5,11 @@
 More precisely, occurences of
 
    `TransitiveIdeal(succ, seeds)`
+   `TransitiveIdealGraded(succ, seeds, max_depth)`
 
-are replaced by:
+are replaced (respectively) by:
 
    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`
-
-and occurences of
-
-   `TransitiveIdealGraded(succ, seeds, max_depth)`
-
-are replaced by:
-
    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`
 
-Indeed, old transitive ideal *graded* was not using the hypothesis of being graded in the code. This is why the structure is set to `None` now. Of course, if people have *really* a graded structure, then the structure should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems.
-
-
+Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems and also because it seems that `TransitiveIdealGraded` was used in places where the structure was not graded...
``````




---

archive/issue_comments_213248.json:
```json
{
    "body": "**Commit:** [7956b77bd2eb0f3af9ab65450919d54c441e7f8f](https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f)",
    "created_at": "2015-04-03T14:22:30Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213248",
    "user": "https://github.com/seblabbe"
}
```

**Commit:** [7956b77bd2eb0f3af9ab65450919d54c441e7f8f](https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f)



---

archive/issue_comments_213249.json:
```json
{
    "body": "**Branch:** [u/slabbe/16352](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/16352)",
    "created_at": "2015-04-03T14:22:30Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213249",
    "user": "https://github.com/seblabbe"
}
```

**Branch:** [u/slabbe/16352](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/16352)



---

archive/issue_comments_213250.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f\">7956b77</a></td><td><code>replacing TransitiveIdeal by RecursivelyEnumeratedSet in sage library</code></td></tr></table>\n",
    "created_at": "2015-04-03T14:22:30Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213250",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f">7956b77</a></td><td><code>replacing TransitiveIdeal by RecursivelyEnumeratedSet in sage library</code></td></tr></table>




---

archive/issue_comments_213251.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd66\".",
    "created_at": "2015-04-03T14:28:25Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213251",
    "user": "https://github.com/seblabbe"
}
```

**Changing keywords** from "" to "sd66".



---

archive/issue_comments_213252.json:
```json
{
    "body": "**Changing commit** from \"[7956b77bd2eb0f3af9ab65450919d54c441e7f8f](https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f)\" to \"[67e950df6d8ad3d35d3bac1113cba4091ef3fbf1](https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1)\".",
    "created_at": "2015-04-03T14:40:50Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7956b77bd2eb0f3af9ab65450919d54c441e7f8f](https://github.com/sagemath/sagetrac-mirror/commit/7956b77bd2eb0f3af9ab65450919d54c441e7f8f)" to "[67e950df6d8ad3d35d3bac1113cba4091ef3fbf1](https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1)".



---

archive/issue_comments_213253.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1\">67e950d</a></td><td><code>replacing TransitiveIdeal by RecursivelyEnumeratedSet in sage library</code></td></tr></table>\n",
    "created_at": "2015-04-03T14:40:50Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1">67e950d</a></td><td><code>replacing TransitiveIdeal by RecursivelyEnumeratedSet in sage library</code></td></tr></table>




---

archive/issue_events_146066.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-03T14:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146066"
}
```



---

archive/issue_comments_213254.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`\n    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`\n \n-Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems and also because it seems that `TransitiveIdealGraded` was used in places where the structure was not graded...\n+Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before and I am assuming the structure is not graded.\n``````\n",
    "created_at": "2015-04-07T19:21:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213254",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='naive')`
    `RecursivelyEnumeratedSet(seeds, succ, structure=None, enumeration='breadth', max_depth=max_depth)`
 
-Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before to avoid problems and also because it seems that `TransitiveIdealGraded` was used in places where the structure was not graded...
+Indeed, deprecated `TransitiveIdealGraded` class was not using the hypothesis of being graded in its code. This is why the structure is set to `None` for now. Of course, if people have *really* a graded structure, then the structure argument should be set to `'graded'`... For now, I am keeping the behavior like it was before and I am assuming the structure is not graded.
``````




---

archive/issue_events_146067.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-10T18:24:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146067"
}
```



---

archive/issue_events_146068.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-10T18:24:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146068"
}
```



---

archive/issue_comments_213255.json:
```json
{
    "body": "<a id='comment:9'></a>\nSalut S\u00e9bastien,\n\nYour branch is based on sage-6.5!! Would you mind rebasing on sage-6.6.rc2?\n\nYour iterator for infinite conjugacy classes is wrong\n\n```\nsage: a = matrix(ZZ,2,[1,1,0,1])\nsage: b = matrix(ZZ,2,[1,0,1,1])\nsage: G = MatrixGroup([a,b])\nsage: a = G(a)\nsage: b = G(b)\nsage: C = ConjugacyClass(G, a)\nsage: m1 = b * a * ~b\nsage: m2 = ~b * a * b\nsage: any(x == m1 for x in C)\nTrue\nsage: any(x == m2 for x in C)\n... can wait forever ...\n```\nI think that adding also inverses of generators would work. I.e. just replace `self._parent.gens()` with `self._parent.semigroup_generators()`. And please add the above test in the documentation.\n\nBest,\nVincent",
    "created_at": "2015-04-10T18:24:51Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213255",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Salut Sébastien,

Your branch is based on sage-6.5!! Would you mind rebasing on sage-6.6.rc2?

Your iterator for infinite conjugacy classes is wrong

```
sage: a = matrix(ZZ,2,[1,1,0,1])
sage: b = matrix(ZZ,2,[1,0,1,1])
sage: G = MatrixGroup([a,b])
sage: a = G(a)
sage: b = G(b)
sage: C = ConjugacyClass(G, a)
sage: m1 = b * a * ~b
sage: m2 = ~b * a * b
sage: any(x == m1 for x in C)
True
sage: any(x == m2 for x in C)
... can wait forever ...
```
I think that adding also inverses of generators would work. I.e. just replace `self._parent.gens()` with `self._parent.semigroup_generators()`. And please add the above test in the documentation.

Best,
Vincent



---

archive/issue_comments_213256.json:
```json
{
    "body": "**Changing commit** from \"[67e950df6d8ad3d35d3bac1113cba4091ef3fbf1](https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1)\" to \"[c272b7f4300d1f6c6f61322e29fc6910d8b66a03](https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03)\".",
    "created_at": "2015-04-12T13:51:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[67e950df6d8ad3d35d3bac1113cba4091ef3fbf1](https://github.com/sagemath/sagetrac-mirror/commit/67e950df6d8ad3d35d3bac1113cba4091ef3fbf1)" to "[c272b7f4300d1f6c6f61322e29fc6910d8b66a03](https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03)".



---

archive/issue_comments_213257.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d7ce659458f83aca8e74b95567d699fa5d01599\">7d7ce65</a></td><td><code>Merge branch 'u/slabbe/16352' on top of sage-6.6.rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03\">c272b7f</a></td><td><code>Trac #16352: Fixed referee comment</code></td></tr></table>\n",
    "created_at": "2015-04-12T13:51:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d7ce659458f83aca8e74b95567d699fa5d01599">7d7ce65</a></td><td><code>Merge branch 'u/slabbe/16352' on top of sage-6.6.rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03">c272b7f</a></td><td><code>Trac #16352: Fixed referee comment</code></td></tr></table>




---

archive/issue_events_146069.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-12T13:54:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146069"
}
```



---

archive/issue_events_146070.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-12T13:54:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146070"
}
```



---

archive/issue_comments_213258.json:
```json
{
    "body": "<a id='comment:11'></a>\nI used `monoid_generators` instead of `semigroup_generators` since it does not contain the identity. It is good because when the group is finite, it just returns the gens without their inverses.\n\nNeeds review again!",
    "created_at": "2015-04-12T13:54:13Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213258",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'></a>
I used `monoid_generators` instead of `semigroup_generators` since it does not contain the identity. It is good because when the group is finite, it just returns the gens without their inverses.

Needs review again!



---

archive/issue_comments_213259.json:
```json
{
    "body": "<a id='comment:12'></a>\nShouldn't you remove the second `todo` in `combinat/backtrack.py`?",
    "created_at": "2015-04-12T15:11:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213259",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Shouldn't you remove the second `todo` in `combinat/backtrack.py`?



---

archive/issue_comments_213260.json:
```json
{
    "body": "**Changing commit** from \"[c272b7f4300d1f6c6f61322e29fc6910d8b66a03](https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03)\" to \"[0832bbc90db342d49171de443e1de1bed839e02a](https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a)\".",
    "created_at": "2015-04-12T16:14:15Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c272b7f4300d1f6c6f61322e29fc6910d8b66a03](https://github.com/sagemath/sagetrac-mirror/commit/c272b7f4300d1f6c6f61322e29fc6910d8b66a03)" to "[0832bbc90db342d49171de443e1de1bed839e02a](https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a)".



---

archive/issue_comments_213261.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a\">0832bbc</a></td><td><code>Trac #16352: removed a TODO in backtrac.py</code></td></tr></table>\n",
    "created_at": "2015-04-12T16:14:15Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a">0832bbc</a></td><td><code>Trac #16352: removed a TODO in backtrac.py</code></td></tr></table>




---

archive/issue_comments_213262.json:
```json
{
    "body": "**Author:** S\u00e9bastien Labb\u00e9",
    "created_at": "2015-04-12T21:28:57Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213262",
    "user": "https://github.com/videlec"
}
```

**Author:** Sébastien Labbé



---

archive/issue_comments_213263.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2015-04-12T21:28:57Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213263",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_events_146071.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-12T21:28:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146071"
}
```



---

archive/issue_events_146072.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-12T21:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146072"
}
```



---

archive/issue_events_146073.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-12T21:28:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146073"
}
```



---

archive/issue_events_146074.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-12T21:28:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146074"
}
```



---

archive/issue_comments_213264.json:
```json
{
    "body": "<a id='comment:15'></a>\nMerge conflict, try with 6.7.beta0 when its out",
    "created_at": "2015-04-14T20:00:19Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213264",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
Merge conflict, try with 6.7.beta0 when its out



---

archive/issue_events_146075.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-14T20:00:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146075"
}
```



---

archive/issue_events_146076.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-14T20:00:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146076"
}
```



---

archive/issue_comments_213265.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec\">cecda32</a></td><td><code>Trac #16352: solving conflicts with 6.7.beta0 in categories/finite_semigroups.py</code></td></tr></table>\n",
    "created_at": "2015-04-16T12:00:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec">cecda32</a></td><td><code>Trac #16352: solving conflicts with 6.7.beta0 in categories/finite_semigroups.py</code></td></tr></table>




---

archive/issue_comments_213266.json:
```json
{
    "body": "**Changing commit** from \"[0832bbc90db342d49171de443e1de1bed839e02a](https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a)\" to \"[cecda3246fdbbf96cfb8461ee426dc9d079910ec](https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec)\".",
    "created_at": "2015-04-16T12:00:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0832bbc90db342d49171de443e1de1bed839e02a](https://github.com/sagemath/sagetrac-mirror/commit/0832bbc90db342d49171de443e1de1bed839e02a)" to "[cecda3246fdbbf96cfb8461ee426dc9d079910ec](https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec)".



---

archive/issue_events_146077.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-16T12:03:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146077"
}
```



---

archive/issue_events_146078.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-04-16T12:03:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146078"
}
```



---

archive/issue_comments_213267.json:
```json
{
    "body": "<a id='comment:17'></a>\n(the code using `TransitiveIdeal` in the file `finite_semigroups.py` was deleted in 6.7.beta0, that was the reason for the conflict)",
    "created_at": "2015-04-16T12:03:56Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213267",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:17'></a>
(the code using `TransitiveIdeal` in the file `finite_semigroups.py` was deleted in 6.7.beta0, that was the reason for the conflict)



---

archive/issue_events_146079.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-16T16:38:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146079"
}
```



---

archive/issue_events_146080.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-16T16:38:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146080"
}
```



---

archive/issue_comments_213268.json:
```json
{
    "body": "<a id='comment:18'></a>\ngot\n\n```\nsage -t --long src/sage/combinat/dyck_word.py\n**********************************************************************\nFile \"src/sage/combinat/dyck_word.py\", line 3501, in sage.combinat.dyck_word.DyckWords_size.__init__\nFailed example:\n    TestSuite(DyckWords(4,2)).run()\nExpected nothing\n--\n    The following tests failed: _test_enumerated_set_iter_cardinality\n**********************************************************************\n```",
    "created_at": "2015-04-16T16:38:53Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213268",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
got

```
sage -t --long src/sage/combinat/dyck_word.py
**********************************************************************
File "src/sage/combinat/dyck_word.py", line 3501, in sage.combinat.dyck_word.DyckWords_size.__init__
Failed example:
    TestSuite(DyckWords(4,2)).run()
Expected nothing
--
    The following tests failed: _test_enumerated_set_iter_cardinality
**********************************************************************
```



---

archive/issue_events_146081.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-17T15:28:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146081"
}
```



---

archive/issue_events_146082.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-17T15:28:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146082"
}
```



---

archive/issue_comments_213269.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [vdelecroix](#comment%3A18):\n> got\n> \n> ```\n> sage -t --long src/sage/combinat/dyck_word.py\n> ...\n> ```\n\n\nSorry, seems to be a problem on my computer.\n\nVincent",
    "created_at": "2015-04-17T15:28:59Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213269",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
Replying to [vdelecroix](#comment%3A18):
> got
> 
> ```
> sage -t --long src/sage/combinat/dyck_word.py
> ...
> ```


Sorry, seems to be a problem on my computer.

Vincent



---

archive/issue_comments_213270.json:
```json
{
    "body": "<a id='comment:20'></a>\nI think that it is necessary to keep the \"graded\" keyword whenever `TransitiveIdealGraded` was used.\nOtherwise, you are losing information, that may never come back.\n\nSo I propose to try putting \"graded\" wherever it already was, and see what happens.",
    "created_at": "2015-04-21T19:17:16Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213270",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>
I think that it is necessary to keep the "graded" keyword whenever `TransitiveIdealGraded` was used.
Otherwise, you are losing information, that may never come back.

So I propose to try putting "graded" wherever it already was, and see what happens.



---

archive/issue_comments_213271.json:
```json
{
    "body": "<a id='comment:21'></a>\nOk, I agree, let's have this discussion. I first tried to replace every occurences of `TransitiveIdealGraded` by `RecursivelyEnumeratedSet(..., structure='graded')`, but then I got infinite loops.\n\nThe reason is that if a structure is graded, the enumeration currently done in `RecursivelyEnumeratedSet` saves in memory only two grades (the current one and the precedent one). If the structure is not graded and we use the graded argument for `RecursivelyEnumeratedSet`, then we may get infinite loops and elements that are genereated twice or infinitely often.\n\nI won't have access to my machine until Tuesday for redoing those tests and tell you exactly where were the infinite loops happening...\n\nMeanwhile, I would like to know for each occurences of `TransitiveIdealGraded` in the sage library weather the structure was really graded. I recall that `TransitiveIdealGraded` was not using the graded hypothesis at all since it was saving *all* of the generated elements.\n\nA) There were three files where `TransitiveIdealGraded` was used:\n\nFile `src/sage/categories/crystals.py`\n\n```python\nclass Crystals(Category_singleton):\n    class ParentMethods:\n        def __iter__(self, index_set=None, max_depth=float('inf')):\n            from sage.combinat.backtrack import TransitiveIdealGraded\n            from sage.combinat.backtrack import TransitiveIdeal\n            # was using both ???\n\n        def subcrystal(self, index_set=None, generators=None, max_depth=float(\"inf\"),\n            from sage.combinat.backtrack import TransitiveIdealGraded\n```\n\nFile `src/sage/categories/highest_weight_crystals.py`\n\n```python\nclass HighestWeightCrystals(Category_singleton):\n    class ParentMethods:\n        def __iter__(self, index_set=None, max_depth = float(\"inf\")):\n            from sage.combinat.backtrack import TransitiveIdealGraded\n```\n\n\nFile `src/sage/combinat/root_system/root_lattice_realizations.py`\n\n```python\nfrom sage.combinat.backtrack import TransitiveIdeal, TransitiveIdealGraded\nclass RootLatticeRealizations(Category_over_base_ring):\n    class ParentMethods:\n        @cached_method\n        def positive_roots(self, index_set=None):\n            return TransitiveIdealGraded(attrcall('pred', index_set=index_set),\n                                         [self.simple_root(i) for i in index_set])\n        def positive_real_roots(self):\n            if self.cartan_type().is_finite():\n                return tuple(TransitiveIdealGraded(attrcall('pred'), self.simple_roots()))\n\n        @cached_method\n        def positive_roots_parabolic(self, index_set = None):\n            return TransitiveIdealGraded(parabolic_covers, generators)\n\n    class ElementMethods:\n        def orbit(self):\n            return [x for x in TransitiveIdealGraded(attrcall('simple_reflections'), [self])]\n\n        def greater(self):\n            return [x for x in TransitiveIdeal(attrcall('succ'), [self])]\n\n        def smaller(self):\n            return [x for x in TransitiveIdeal(attrcall('pred'), [self])]\n```\n\nB) For reference, below are the files where only `TransitiveIdeal` was used.\n\nFile `src/sage/groups/conjugacy_classes.py`\n\n```python\nclass ConjugacyClass(Parent):\n    @cached_method\n    def set(self):\n        from sage.combinat.backtrack import TransitiveIdeal\n```\n\nFile `src/sage/combinat/rigged_configurations/kr_tableaux.py`\n\n```python\nclass KirillovReshetikhinTableaux(CrystalOfWords):\n    def __iter__(self):\n        from sage.combinat.backtrack import TransitiveIdeal\n```\n\nFile `src/sage/combinat/rigged_configurations/rigged_configurations.py`\n\n```python\nclass RiggedConfigurations(Parent, UniqueRepresentation):\n    def __iter__(self):\n        from sage.combinat.backtrack import TransitiveIdeal\n```\n\nFile `src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py`\n\n```python\nclass TensorProductOfKirillovReshetikhinTableaux(FullTensorProductOfRegularCrystals):\n    def __iter__(self):\n        from sage.combinat.backtrack import TransitiveIdeal\n```\n\nFile `src/sage/combinat/root_system/pieri_factors.py`\n\n```python\nfrom sage.combinat.backtrack import TransitiveIdeal\nclass PieriFactors(UniqueRepresentation, Parent):\n    @cached_method\n    def elements(self):\n        return TransitiveIdeal(attrcall('bruhat_lower_covers'), self.maximal_elements())\n```",
    "created_at": "2015-04-22T08:35:09Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213271",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>
Ok, I agree, let's have this discussion. I first tried to replace every occurences of `TransitiveIdealGraded` by `RecursivelyEnumeratedSet(..., structure='graded')`, but then I got infinite loops.

The reason is that if a structure is graded, the enumeration currently done in `RecursivelyEnumeratedSet` saves in memory only two grades (the current one and the precedent one). If the structure is not graded and we use the graded argument for `RecursivelyEnumeratedSet`, then we may get infinite loops and elements that are genereated twice or infinitely often.

I won't have access to my machine until Tuesday for redoing those tests and tell you exactly where were the infinite loops happening...

Meanwhile, I would like to know for each occurences of `TransitiveIdealGraded` in the sage library weather the structure was really graded. I recall that `TransitiveIdealGraded` was not using the graded hypothesis at all since it was saving *all* of the generated elements.

A) There were three files where `TransitiveIdealGraded` was used:

File `src/sage/categories/crystals.py`

```python
class Crystals(Category_singleton):
    class ParentMethods:
        def __iter__(self, index_set=None, max_depth=float('inf')):
            from sage.combinat.backtrack import TransitiveIdealGraded
            from sage.combinat.backtrack import TransitiveIdeal
            # was using both ???

        def subcrystal(self, index_set=None, generators=None, max_depth=float("inf"),
            from sage.combinat.backtrack import TransitiveIdealGraded
```

File `src/sage/categories/highest_weight_crystals.py`

```python
class HighestWeightCrystals(Category_singleton):
    class ParentMethods:
        def __iter__(self, index_set=None, max_depth = float("inf")):
            from sage.combinat.backtrack import TransitiveIdealGraded
```


File `src/sage/combinat/root_system/root_lattice_realizations.py`

```python
from sage.combinat.backtrack import TransitiveIdeal, TransitiveIdealGraded
class RootLatticeRealizations(Category_over_base_ring):
    class ParentMethods:
        @cached_method
        def positive_roots(self, index_set=None):
            return TransitiveIdealGraded(attrcall('pred', index_set=index_set),
                                         [self.simple_root(i) for i in index_set])
        def positive_real_roots(self):
            if self.cartan_type().is_finite():
                return tuple(TransitiveIdealGraded(attrcall('pred'), self.simple_roots()))

        @cached_method
        def positive_roots_parabolic(self, index_set = None):
            return TransitiveIdealGraded(parabolic_covers, generators)

    class ElementMethods:
        def orbit(self):
            return [x for x in TransitiveIdealGraded(attrcall('simple_reflections'), [self])]

        def greater(self):
            return [x for x in TransitiveIdeal(attrcall('succ'), [self])]

        def smaller(self):
            return [x for x in TransitiveIdeal(attrcall('pred'), [self])]
```

B) For reference, below are the files where only `TransitiveIdeal` was used.

File `src/sage/groups/conjugacy_classes.py`

```python
class ConjugacyClass(Parent):
    @cached_method
    def set(self):
        from sage.combinat.backtrack import TransitiveIdeal
```

File `src/sage/combinat/rigged_configurations/kr_tableaux.py`

```python
class KirillovReshetikhinTableaux(CrystalOfWords):
    def __iter__(self):
        from sage.combinat.backtrack import TransitiveIdeal
```

File `src/sage/combinat/rigged_configurations/rigged_configurations.py`

```python
class RiggedConfigurations(Parent, UniqueRepresentation):
    def __iter__(self):
        from sage.combinat.backtrack import TransitiveIdeal
```

File `src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py`

```python
class TensorProductOfKirillovReshetikhinTableaux(FullTensorProductOfRegularCrystals):
    def __iter__(self):
        from sage.combinat.backtrack import TransitiveIdeal
```

File `src/sage/combinat/root_system/pieri_factors.py`

```python
from sage.combinat.backtrack import TransitiveIdeal
class PieriFactors(UniqueRepresentation, Parent):
    @cached_method
    def elements(self):
        return TransitiveIdeal(attrcall('bruhat_lower_covers'), self.maximal_elements())
```



---

archive/issue_comments_213272.json:
```json
{
    "body": "<a id='comment:22'></a>\nI would say that crystal things are usually graded, but it would be better if crystal people can opt in and say their word about the matter. Travis ? Anne ?",
    "created_at": "2015-04-22T08:38:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213272",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
I would say that crystal things are usually graded, but it would be better if crystal people can opt in and say their word about the matter. Travis ? Anne ?



---

archive/issue_comments_213273.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/16352](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/16352)\" to \"[public/ticket/16352](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16352)\".",
    "created_at": "2015-04-22T14:37:35Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213273",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/slabbe/16352](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/16352)" to "[public/ticket/16352](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16352)".



---

archive/issue_comments_213274.json:
```json
{
    "body": "<a id='comment:23'></a>\nI have tried putting 'graded' in src/sage/categories/highest_weight_crystals.py\nand it worked fine. I tested the file itself and the combinat/crystals folder.\n\nI have tried putting 'graded' in src/sage/combinat/root_system/root_lattice_realizations.py and it worked fine. I tested the src/sage/combinat/root_system folder. Seems to be quicker by the way.\n\nLet us see if the bot founds a problem with these two changes.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73b4ec2c11a21f72ba3d204e564bf28e27831d37\">73b4ec2</a></td><td><code>Merge branch 'u/slabbe/16352' into 6.7.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b831c1be4f01e0b25b9c05c822ab4334b4c41e0\">1b831c1</a></td><td><code>trac #16352 'graded' in src/sage/categories/highest_weight_crystals.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a\">1a1a6cc</a></td><td><code>trac #16352 'graded' in root_lattice_realizations.py</code></td></tr></table>\n",
    "created_at": "2015-04-22T14:37:35Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213274",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>
I have tried putting 'graded' in src/sage/categories/highest_weight_crystals.py
and it worked fine. I tested the file itself and the combinat/crystals folder.

I have tried putting 'graded' in src/sage/combinat/root_system/root_lattice_realizations.py and it worked fine. I tested the src/sage/combinat/root_system folder. Seems to be quicker by the way.

Let us see if the bot founds a problem with these two changes.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73b4ec2c11a21f72ba3d204e564bf28e27831d37">73b4ec2</a></td><td><code>Merge branch 'u/slabbe/16352' into 6.7.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b831c1be4f01e0b25b9c05c822ab4334b4c41e0">1b831c1</a></td><td><code>trac #16352 'graded' in src/sage/categories/highest_weight_crystals.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a">1a1a6cc</a></td><td><code>trac #16352 'graded' in root_lattice_realizations.py</code></td></tr></table>




---

archive/issue_comments_213275.json:
```json
{
    "body": "**Changing commit** from \"[cecda3246fdbbf96cfb8461ee426dc9d079910ec](https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec)\" to \"[1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a](https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a)\".",
    "created_at": "2015-04-22T14:37:35Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213275",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[cecda3246fdbbf96cfb8461ee426dc9d079910ec](https://github.com/sagemath/sagetrac-mirror/commit/cecda3246fdbbf96cfb8461ee426dc9d079910ec)" to "[1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a](https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a)".



---

archive/issue_comments_213276.json:
```json
{
    "body": "<a id='comment:24'></a>\nok, no problem so far, the bot is happy.\n\nThere remains only the case of src/sage/categories/crystals.py\n\nAnne, Travis ? What about affine crystals for example ? can we used \"graded\" ?",
    "created_at": "2015-04-22T16:05:02Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213276",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
ok, no problem so far, the bot is happy.

There remains only the case of src/sage/categories/crystals.py

Anne, Travis ? What about affine crystals for example ? can we used "graded" ?



---

archive/issue_comments_213277.json:
```json
{
    "body": "<a id='comment:25'></a>\nI can now confirm that the each of the two remaining instances runs into infinite loops\nwhen given the 'graded' argument.\n\nTherefore this ticket is good to go.\n\nIf you agree, set this to positive review.",
    "created_at": "2015-04-22T18:46:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213277",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
I can now confirm that the each of the two remaining instances runs into infinite loops
when given the 'graded' argument.

Therefore this ticket is good to go.

If you agree, set this to positive review.



---

archive/issue_comments_213278.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [chapoton](#comment%3A24):\n> ok, no problem so far, the bot is happy.\n> \n> There remains only the case of src/sage/categories/crystals.py\n> \n> Anne, Travis ? What about affine crystals for example ? can we used \"graded\" ?\n\n\nAffine crystals are not necessarily graded. They can be cyclic.",
    "created_at": "2015-04-22T18:49:47Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213278",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:26'></a>
Replying to [chapoton](#comment%3A24):
> ok, no problem so far, the bot is happy.
> 
> There remains only the case of src/sage/categories/crystals.py
> 
> Anne, Travis ? What about affine crystals for example ? can we used "graded" ?


Affine crystals are not necessarily graded. They can be cyclic.



---

archive/issue_comments_213279.json:
```json
{
    "body": "<a id='comment:27'></a>\nThanks !\n\nAnd are we safe with using 'graded' for highest weight crystals, as it seems ?\n\nBy the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?",
    "created_at": "2015-04-22T19:55:34Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213279",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
Thanks !

And are we safe with using 'graded' for highest weight crystals, as it seems ?

By the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?



---

archive/issue_comments_213280.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [chapoton](#comment%3A27):\n> Thanks !\n> \n> And are we safe with using 'graded' for highest weight crystals, as it seems ?\n\n\nYes.\n\n> By the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?\n\n\nI am not sure. For postdocs with a permanent position?",
    "created_at": "2015-04-22T20:02:32Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213280",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:28'></a>
Replying to [chapoton](#comment%3A27):
> Thanks !
> 
> And are we safe with using 'graded' for highest weight crystals, as it seems ?


Yes.

> By the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?


I am not sure. For postdocs with a permanent position?



---

archive/issue_comments_213281.json:
```json
{
    "body": "<a id='comment:29'></a>\n> > By the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?\n\n> \n> I am not sure. For postdocs with a permanent position?\n\n\nYes, hum. I am afraid that it is like looking for an element in the empty set. But maybe you could have somebody in mind.. Young, with a position, willing to spend time in Lyon, likes algebraic combinatorics. Not so easy to find, indeed.",
    "created_at": "2015-04-22T20:05:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213281",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
> > By the way, Anne, have you seen my Fulbright call on sage-combinat-devel ?

> 
> I am not sure. For postdocs with a permanent position?


Yes, hum. I am afraid that it is like looking for an element in the empty set. But maybe you could have somebody in mind.. Young, with a position, willing to spend time in Lyon, likes algebraic combinatorics. Not so easy to find, indeed.



---

archive/issue_comments_213282.json:
```json
{
    "body": "<a id='comment:30'></a>\n> There remains only the case of src/sage/categories/crystals.py\n\n\nThere was four occurences of `TransitiveIdealGraded` in the file `src/sage/combinat/root_system/root_lattice_realizations.py` but you set `structure='graded'` in only one of them. Can you also check (mathematically + doctests) whether we can add the graded hypothesis for the three others also?",
    "created_at": "2015-04-22T20:48:10Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213282",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:30'></a>
> There remains only the case of src/sage/categories/crystals.py


There was four occurences of `TransitiveIdealGraded` in the file `src/sage/combinat/root_system/root_lattice_realizations.py` but you set `structure='graded'` in only one of them. Can you also check (mathematically + doctests) whether we can add the graded hypothesis for the three others also?



---

archive/issue_comments_213283.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916\">0beb042</a></td><td><code>trac #16352 more 'graded' in root_lattice_realizations.py</code></td></tr></table>\n",
    "created_at": "2015-04-23T06:40:55Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916">0beb042</a></td><td><code>trac #16352 more 'graded' in root_lattice_realizations.py</code></td></tr></table>




---

archive/issue_comments_213284.json:
```json
{
    "body": "**Changing commit** from \"[1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a](https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a)\" to \"[0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)\".",
    "created_at": "2015-04-23T06:40:55Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a](https://github.com/sagemath/sagetrac-mirror/commit/1a1a6ccc6c1e731c2506cd527c7de6e331af4b0a)" to "[0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)".



---

archive/issue_comments_213285.json:
```json
{
    "body": "<a id='comment:32'></a>\nIt seems to be ok for two of them, but not for the third one, which is an orbit.\n\nBut, damn, tests for this file are so long ...",
    "created_at": "2015-04-23T06:42:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213285",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>
It seems to be ok for two of them, but not for the third one, which is an orbit.

But, damn, tests for this file are so long ...



---

archive/issue_comments_213286.json:
```json
{
    "body": "<a id='comment:33'></a>\nIt seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..",
    "created_at": "2015-04-23T11:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213286",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
It seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..



---

archive/issue_events_146083.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-23T11:45:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146083"
}
```



---

archive/issue_events_146084.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-23T11:45:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146084"
}
```



---

archive/issue_comments_213287.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [chapoton](#comment%3A33):\n> It seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..\n\n\nOkay, I will take a look at this.",
    "created_at": "2015-04-28T11:39:45Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213287",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:35'></a>
Replying to [chapoton](#comment%3A33):
> It seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..


Okay, I will take a look at this.



---

archive/issue_comments_213288.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [chapoton](#comment%3A33):\n> It seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..\n\n\nRunning `sage -t src/sage/combinat/root_system/root_lattice_realizations.py` three times on 6.7.beta3, I get:\n\n```\n[575 tests, 10.62 s]\n[575 tests, 10.62 s]\n[575 tests, 10.70 s]\n```\n\nRunning the same command three times on the same file with this branch, I get:\n\n```\n[575 tests, 10.62 s]\n[575 tests, 10.59 s]\n[575 tests, 10.59 s]\n```\n\nSo I can't confirm that tests take any longer with this ticket. Needs review!",
    "created_at": "2015-04-29T15:03:39Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213288",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:36'></a>
Replying to [chapoton](#comment%3A33):
> It seems that tests take slightly longer in `root_lattice_realizations.py` with this branch..


Running `sage -t src/sage/combinat/root_system/root_lattice_realizations.py` three times on 6.7.beta3, I get:

```
[575 tests, 10.62 s]
[575 tests, 10.62 s]
[575 tests, 10.70 s]
```

Running the same command three times on the same file with this branch, I get:

```
[575 tests, 10.62 s]
[575 tests, 10.59 s]
[575 tests, 10.59 s]
```

So I can't confirm that tests take any longer with this ticket. Needs review!



---

archive/issue_comments_213289.json:
```json
{
    "body": "**Changing reviewer** from \"Vincent Delecroix\" to \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2015-04-29T18:37:23Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213289",
    "user": "https://github.com/fchapoton"
}
```

**Changing reviewer** from "Vincent Delecroix" to "Vincent Delecroix, Frédéric Chapoton".



---

archive/issue_events_146085.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-29T18:37:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146085"
}
```



---

archive/issue_events_146086.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-04-29T18:37:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146086"
}
```



---

archive/issue_comments_213290.json:
```json
{
    "body": "<a id='comment:37'></a>\nok, avanti !",
    "created_at": "2015-04-29T18:37:23Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213290",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
ok, avanti !



---

archive/issue_comments_213291.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/16352](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16352)\" to \"[0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)\".",
    "created_at": "2015-05-01T18:46:02Z",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16352#issuecomment-213291",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/16352](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16352)" to "[0beb0422ac4482d67e670340ce7c26b2a927d916](https://github.com/sagemath/sagetrac-mirror/commit/0beb0422ac4482d67e670340ce7c26b2a927d916)".



---

archive/issue_events_146087.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-01T18:46:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146087"
}
```



---

archive/issue_events_146088.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a686bc92b8aa13ae9523ec0919ee802e5bc1b181",
    "created_at": "2015-05-01T18:46:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16352",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16352#event-146088"
}
```
