# Issue 16777: Track pyx files in citation modules/ reorganize it

archive/issues_016540.json:
```json
{
    "assignees": [],
    "body": "cProfile does not track c-calls.  Google performance tools do so, hand have been wrapped up recently.  This integrates the gperftools into sage.misc.citation, reorganizes code for future development, and fixes one issue with globals. Concerning the latter, Cython was used wrongly, in as far as it's globals() are incorrect in the currenct version. The inspect module is the right way to go, guaranteed to work in future versions as well.\n\nCC:  @mwhansen @nathanncohen\n\nBranch/Commit: **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777) @ [`b423bfe`](https://github.com/sagemath/sagetrac-mirror/commit/b423bfee14e0799831aa5584b917b54eb80c2a7d)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Martin Raum**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16777_\n\n",
    "closed_at": "2014-08-11T18:16:56Z",
    "created_at": "2014-08-07T06:39:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Track pyx files in citation modules/ reorganize it",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/16777",
    "user": "https://github.com/sagetrac-mraum"
}
```
cProfile does not track c-calls.  Google performance tools do so, hand have been wrapped up recently.  This integrates the gperftools into sage.misc.citation, reorganizes code for future development, and fixes one issue with globals. Concerning the latter, Cython was used wrongly, in as far as it's globals() are incorrect in the currenct version. The inspect module is the right way to go, guaranteed to work in future versions as well.

CC:  @mwhansen @nathanncohen

Branch/Commit: **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777) @ [`b423bfe`](https://github.com/sagemath/sagetrac-mirror/commit/b423bfee14e0799831aa5584b917b54eb80c2a7d)**

Reviewer: **Volker Braun**

Author: **Martin Raum**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/16777_





---

archive/issue_events_240899.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-07T06:39:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240899"
}
```



---

archive/issue_events_240900.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-07T06:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240900"
}
```



---

archive/issue_events_240901.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-07T06:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240901"
}
```



---

archive/issue_comments_219740.json:
```json
{
    "body": "Branch: **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**",
    "created_at": "2014-08-07T07:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219740",
    "user": "https://github.com/sagetrac-mraum"
}
```

Branch: **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**



---

archive/issue_comments_219741.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bd0d5c9305e54826a64509d3fd3503bd2311d2b\"><code>1bd0d5c</code></a></td><td><code>Increase profile frequency to catch all pyx calls.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc9955c26b0d42f1872c6c00484e91471eefe4fc\"><code>bc9955c</code></a></td><td><code>Correct parsing of gperftools output.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5296d27a0bf4d57f692781f4c3bd8bde04ab687d\"><code>5296d27</code></a></td><td><code>Redict stderr of gperftools.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2c99c10fdd16280cb8361a125ae96ae35c6f485\"><code>e2c99c1</code></a></td><td><code>Decrease profiling frequency and ignore warnings.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/920545b583411a953b0d76f4f2f752094700e04e\"><code>920545b</code></a></td><td><code>Reorganize names in citation module.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5da28f088875c8fe8d1cb33e6e1407f2295c8aa9\"><code>5da28f0</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ae588f28c21c0602bf34897b87e548371f98b89\"><code>2ae588f</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d2ba32de0b035a46efe158abeec885d3275fe57\"><code>3d2ba32</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d2e8e4169107bc76dcf76122fcc0d3798b5f57\"><code>b1d2e8e</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c\"><code>7e9194a</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr></table>\n",
    "created_at": "2014-08-07T07:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219741",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bd0d5c9305e54826a64509d3fd3503bd2311d2b"><code>1bd0d5c</code></a></td><td><code>Increase profile frequency to catch all pyx calls.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc9955c26b0d42f1872c6c00484e91471eefe4fc"><code>bc9955c</code></a></td><td><code>Correct parsing of gperftools output.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5296d27a0bf4d57f692781f4c3bd8bde04ab687d"><code>5296d27</code></a></td><td><code>Redict stderr of gperftools.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2c99c10fdd16280cb8361a125ae96ae35c6f485"><code>e2c99c1</code></a></td><td><code>Decrease profiling frequency and ignore warnings.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/920545b583411a953b0d76f4f2f752094700e04e"><code>920545b</code></a></td><td><code>Reorganize names in citation module.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5da28f088875c8fe8d1cb33e6e1407f2295c8aa9"><code>5da28f0</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ae588f28c21c0602bf34897b87e548371f98b89"><code>2ae588f</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d2ba32de0b035a46efe158abeec885d3275fe57"><code>3d2ba32</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d2e8e4169107bc76dcf76122fcc0d3798b5f57"><code>b1d2e8e</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c"><code>7e9194a</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr></table>




---

archive/issue_comments_219742.json:
```json
{
    "body": "Commit: **[`7e9194a`](https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c)**",
    "created_at": "2014-08-07T07:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219742",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`7e9194a`](https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c)**



---

archive/issue_comments_219743.json:
```json
{
    "body": "Dependencies: **16778**",
    "created_at": "2014-08-07T08:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219743",
    "user": "https://github.com/sagetrac-mraum"
}
```

Dependencies: **16778**



---

archive/issue_events_240902.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-07T08:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240902"
}
```



---

archive/issue_comments_219744.json:
```json
{
    "body": "Changed commit from **[`7e9194a`](https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c)** to **[`0131486`](https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2)**",
    "created_at": "2014-08-08T06:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219744",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e9194a`](https://github.com/sagemath/sagetrac-mirror/commit/7e9194a0aaa238381e5eace3e71474f72429e76c)** to **[`0131486`](https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2)**



---

archive/issue_comments_219745.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4bf79a54fa37aadfe15438e6028ed5dacea4871\"><code>f4bf79a</code></a></td><td><code>Decrease profiling frequency and ignore warnings.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2413e6459ab8bdacd26b7d5c4eedf0d44c009e3\"><code>c2413e6</code></a></td><td><code>Reorganize names in citation module.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c37720c86a6358fbdd0409596d8834d020ad22b4\"><code>c37720c</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f67a8b92038bab69e38cb803886878396c270a4\"><code>2f67a8b</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d112736d803604de95e479f55be82348581d87fc\"><code>d112736</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/450275bad8b49161af1a6a27e20cfb94d2891d7d\"><code>450275b</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff8a926e473c87fd83237559a0871dbb83362de6\"><code>ff8a926</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ea516364caf48a7b590d239cf8e6ba2fc2ee42\"><code>e1ea516</code></a></td><td><code>Use gprofiler by directly saving to tmp file.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f72e4beccf61353f0e96745469899cabd514679\"><code>6f72e4b</code></a></td><td><code>Add citations module to documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2\"><code>0131486</code></a></td><td><code>Fix documentation.</code></td></tr></table>\n",
    "created_at": "2014-08-08T06:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219745",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4bf79a54fa37aadfe15438e6028ed5dacea4871"><code>f4bf79a</code></a></td><td><code>Decrease profiling frequency and ignore warnings.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2413e6459ab8bdacd26b7d5c4eedf0d44c009e3"><code>c2413e6</code></a></td><td><code>Reorganize names in citation module.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c37720c86a6358fbdd0409596d8834d020ad22b4"><code>c37720c</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f67a8b92038bab69e38cb803886878396c270a4"><code>2f67a8b</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d112736d803604de95e479f55be82348581d87fc"><code>d112736</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/450275bad8b49161af1a6a27e20cfb94d2891d7d"><code>450275b</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff8a926e473c87fd83237559a0871dbb83362de6"><code>ff8a926</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ea516364caf48a7b590d239cf8e6ba2fc2ee42"><code>e1ea516</code></a></td><td><code>Use gprofiler by directly saving to tmp file.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f72e4beccf61353f0e96745469899cabd514679"><code>6f72e4b</code></a></td><td><code>Add citations module to documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2"><code>0131486</code></a></td><td><code>Fix documentation.</code></td></tr></table>




---

archive/issue_comments_219746.json:
```json
{
    "body": "Changed dependencies from **16778** to none",
    "created_at": "2014-08-08T07:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219746",
    "user": "https://github.com/sagetrac-mraum"
}
```

Changed dependencies from **16778** to none



---

archive/issue_comments_219747.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI removed dependence on #16778 by directly loading the profiling output.",
    "created_at": "2014-08-08T07:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219747",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:5" align="right">comment:5</div>

I removed dependence on #16778 by directly loading the profiling output.



---

archive/issue_comments_219748.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\none doctest failing, see patchbot report",
    "created_at": "2014-08-09T14:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219748",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

one doctest failing, see patchbot report



---

archive/issue_events_240903.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-08-09T14:53:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240903"
}
```



---

archive/issue_events_240904.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-08-09T14:53:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240904"
}
```



---

archive/issue_events_240905.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240905"
}
```



---

archive/issue_events_240906.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240906"
}
```



---

archive/issue_comments_219749.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d294a4be6f05bdcd43f13b1230e1d5e22d73dfa\"><code>5d294a4</code></a></td><td><code>Fix doctest failure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8\"><code>87bcd1f</code></a></td><td><code>Merge tag '6.3' into citation branch.</code></td></tr></table>\n",
    "created_at": "2014-08-11T06:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d294a4be6f05bdcd43f13b1230e1d5e22d73dfa"><code>5d294a4</code></a></td><td><code>Fix doctest failure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8"><code>87bcd1f</code></a></td><td><code>Merge tag '6.3' into citation branch.</code></td></tr></table>




---

archive/issue_comments_219750.json:
```json
{
    "body": "Changed commit from **[`0131486`](https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2)** to **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**",
    "created_at": "2014-08-11T06:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0131486`](https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2)** to **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**



---

archive/issue_comments_219751.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI fixed that, and also merged 6.3.",
    "created_at": "2014-08-11T06:08:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219751",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:9" align="right">comment:9</div>

I fixed that, and also merged 6.3.



---

archive/issue_events_240907.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-11T06:08:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240907"
}
```



---

archive/issue_events_240908.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-11T06:08:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240908"
}
```



---

archive/issue_comments_219752.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nlgtm",
    "created_at": "2014-08-11T15:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219752",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

lgtm



---

archive/issue_events_240909.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T15:00:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240909"
}
```



---

archive/issue_events_240910.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T15:00:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240910"
}
```



---

archive/issue_comments_219753.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2014-08-11T15:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219753",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_240911.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T18:16:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240911"
}
```



---

archive/issue_events_240912.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T18:16:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240912"
}
```



---

archive/issue_comments_219754.json:
```json
{
    "body": "Changed branch from **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)** to **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**",
    "created_at": "2014-08-11T18:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219754",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)** to **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**



---

archive/issue_comments_219755.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis failed on my desktop with:\n\n```\nsage -t --long src/sage/misc/citation.py\n    Killed due to signal 27\n**********************************************************************\nTests run before process (pid=15468) failed:\nsage: with citations():\n      var('y')\n      integrate(y^2, y, 0, 1) ## line 15 ##\ny\n1/3\nThe computation used the following components.\nAccess them as a list by calling latest_citations().\n    ginac, Maxima\nsage: latest_citations() ## line 31 ##\n[ginac, Maxima]\nsage: record = [] ## line 40 ##\nsage: with citations(record):\n      K = QuadraticField(-3, 'a') ## line 41 ##\nsage: record ## line 43 ##\n[GAP, GMP, MPFI, MPFR, NTL]\nsage: with citations(record):\n      integrate(y^2, y, 0, 1) ## line 45 ##\n1/3\nsage: record ## line 48 ##\n[GAP, GMP, MPFI, MPFR, NTL, ginac, Maxima]\nsage: eval_citations(\"integrate(y^2, y, 0, 10)\") ## line 55 ##\n[ginac, Maxima]\nsage: sig_on_count() ## line 61 ##\n0\nsage: a = var('a') ## line 83 ##\nsage: with citations():\n      h = ((a+1)^2).expand() ## line 84 ##\nThe computation used the following components.\nAccess them as a list by calling latest_citations().\n    ginac, GMP\nsage: latest_citations() ## line 89 ##\n[ginac, GMP]\nsage: sig_on_count() ## line 91 ##\n0\nsage: R.<x,y,z> = QQ[] ## line 109 ##\nsage: I = R.ideal(x^2+y^2, z^2+y) ## line 110 ##\nsage: with citations():\n      I.primary_decomposition() ## line 111 ##\n[Ideal (z^2 + y, x^2 + y^2) of Multivariate Polynomial Ring in x, y, z over Rational Field]\nThe computation used the following components.\nAccess them as a list by calling latest_citations().\n    Macaulay2, Singular\nsage: latest_citations() ## line 117 ##\n[Macaulay2, Singular]\nsage: sig_on_count() ## line 119 ##\n0\nsage: s = eval_citations( \"integrate(x^2, x)\" ); #priming coercion model ## line 221 ##\nsage: eval_citations('integrate(x^2, x)') ## line 222 ##\n```\nSignal 27 = SIGTTOU? Maybe there is a signal handler race?",
    "created_at": "2014-08-11T21:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219755",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">comment:13</div>

This failed on my desktop with:

```
sage -t --long src/sage/misc/citation.py
    Killed due to signal 27
**********************************************************************
Tests run before process (pid=15468) failed:
sage: with citations():
      var('y')
      integrate(y^2, y, 0, 1) ## line 15 ##
y
1/3
The computation used the following components.
Access them as a list by calling latest_citations().
    ginac, Maxima
sage: latest_citations() ## line 31 ##
[ginac, Maxima]
sage: record = [] ## line 40 ##
sage: with citations(record):
      K = QuadraticField(-3, 'a') ## line 41 ##
sage: record ## line 43 ##
[GAP, GMP, MPFI, MPFR, NTL]
sage: with citations(record):
      integrate(y^2, y, 0, 1) ## line 45 ##
1/3
sage: record ## line 48 ##
[GAP, GMP, MPFI, MPFR, NTL, ginac, Maxima]
sage: eval_citations("integrate(y^2, y, 0, 10)") ## line 55 ##
[ginac, Maxima]
sage: sig_on_count() ## line 61 ##
0
sage: a = var('a') ## line 83 ##
sage: with citations():
      h = ((a+1)^2).expand() ## line 84 ##
The computation used the following components.
Access them as a list by calling latest_citations().
    ginac, GMP
sage: latest_citations() ## line 89 ##
[ginac, GMP]
sage: sig_on_count() ## line 91 ##
0
sage: R.<x,y,z> = QQ[] ## line 109 ##
sage: I = R.ideal(x^2+y^2, z^2+y) ## line 110 ##
sage: with citations():
      I.primary_decomposition() ## line 111 ##
[Ideal (z^2 + y, x^2 + y^2) of Multivariate Polynomial Ring in x, y, z over Rational Field]
The computation used the following components.
Access them as a list by calling latest_citations().
    Macaulay2, Singular
sage: latest_citations() ## line 117 ##
[Macaulay2, Singular]
sage: sig_on_count() ## line 119 ##
0
sage: s = eval_citations( "integrate(x^2, x)" ); #priming coercion model ## line 221 ##
sage: eval_citations('integrate(x^2, x)') ## line 222 ##
```
Signal 27 = SIGTTOU? Maybe there is a signal handler race?



---

archive/issue_comments_219756.json:
```json
{
    "body": "Changed commit from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to none",
    "created_at": "2014-08-11T21:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219756",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to none



---

archive/issue_comments_219757.json:
```json
{
    "body": "Changed branch from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**",
    "created_at": "2014-08-11T21:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219757",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**



---

archive/issue_events_240913.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T21:47:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240913"
}
```



---

archive/issue_comments_219758.json:
```json
{
    "body": "Commit: **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**",
    "created_at": "2014-08-11T21:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219758",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)**



---

archive/issue_comments_219759.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAlso, Nathan told me that pprof sometimes dies because we don't stop profiling under certain circumstances. Might be related, though I don't know how...\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c37720c86a6358fbdd0409596d8834d020ad22b4\"><code>c37720c</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f67a8b92038bab69e38cb803886878396c270a4\"><code>2f67a8b</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d112736d803604de95e479f55be82348581d87fc\"><code>d112736</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/450275bad8b49161af1a6a27e20cfb94d2891d7d\"><code>450275b</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff8a926e473c87fd83237559a0871dbb83362de6\"><code>ff8a926</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ea516364caf48a7b590d239cf8e6ba2fc2ee42\"><code>e1ea516</code></a></td><td><code>Use gprofiler by directly saving to tmp file.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f72e4beccf61353f0e96745469899cabd514679\"><code>6f72e4b</code></a></td><td><code>Add citations module to documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2\"><code>0131486</code></a></td><td><code>Fix documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d294a4be6f05bdcd43f13b1230e1d5e22d73dfa\"><code>5d294a4</code></a></td><td><code>Fix doctest failure.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8\"><code>87bcd1f</code></a></td><td><code>Merge tag '6.3' into citation branch.</code></td></tr></table>\n",
    "created_at": "2014-08-11T21:47:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219759",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

Also, Nathan told me that pprof sometimes dies because we don't stop profiling under certain circumstances. Might be related, though I don't know how...

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c37720c86a6358fbdd0409596d8834d020ad22b4"><code>c37720c</code></a></td><td><code>Rename helper functions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f67a8b92038bab69e38cb803886878396c270a4"><code>2f67a8b</code></a></td><td><code>Add doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d112736d803604de95e479f55be82348581d87fc"><code>d112736</code></a></td><td><code>Add documentation and doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/450275bad8b49161af1a6a27e20cfb94d2891d7d"><code>450275b</code></a></td><td><code>Add documentation, doctests, fix language.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff8a926e473c87fd83237559a0871dbb83362de6"><code>ff8a926</code></a></td><td><code>Insert ticket number for deprecation warning.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ea516364caf48a7b590d239cf8e6ba2fc2ee42"><code>e1ea516</code></a></td><td><code>Use gprofiler by directly saving to tmp file.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f72e4beccf61353f0e96745469899cabd514679"><code>6f72e4b</code></a></td><td><code>Add citations module to documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/013148662683119a39ec5631b6764fb7e3b364d2"><code>0131486</code></a></td><td><code>Fix documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d294a4be6f05bdcd43f13b1230e1d5e22d73dfa"><code>5d294a4</code></a></td><td><code>Fix doctest failure.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8"><code>87bcd1f</code></a></td><td><code>Merge tag '6.3' into citation branch.</code></td></tr></table>




---

archive/issue_comments_219760.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae\"><code>ddc10e4</code></a></td><td><code>Redirect stdout and stderr while profiling.</code></td></tr></table>\n",
    "created_at": "2014-08-12T09:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219760",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae"><code>ddc10e4</code></a></td><td><code>Redirect stdout and stderr while profiling.</code></td></tr></table>




---

archive/issue_comments_219761.json:
```json
{
    "body": "Changed commit from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to **[`ddc10e4`](https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae)**",
    "created_at": "2014-08-12T09:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219761",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87bcd1f`](https://github.com/sagemath/sagetrac-mirror/commit/87bcd1f73ee5ca4782527e85af41089fd7ccadc8)** to **[`ddc10e4`](https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae)**



---

archive/issue_comments_219762.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI can reproduce this when letting sage -t citation.py run 100 times. I tried redirecting stdout and stderr, but this didn't fix the problem. Any ideas on how to solve this?",
    "created_at": "2014-08-12T09:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219762",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:16" align="right">comment:16</div>

I can reproduce this when letting sage -t citation.py run 100 times. I tried redirecting stdout and stderr, but this didn't fix the problem. Any ideas on how to solve this?



---

archive/issue_comments_219763.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nPprof probably mucks with the signals. Assuming that it temporarily changes the signal mask, there would be a window where SIGTTOU would come from a subprocess. Just redirecting stdin/out doesn't change the fact that there is flow control. One might try to disable TOSTOP but I think that'll just leave the race open for other signals. IMHO a better solution would be to (re-)compile Sage with Cython profiling turned on and then use CProfiler.",
    "created_at": "2014-08-12T12:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219763",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

Pprof probably mucks with the signals. Assuming that it temporarily changes the signal mask, there would be a window where SIGTTOU would come from a subprocess. Just redirecting stdin/out doesn't change the fact that there is flow control. One might try to disable TOSTOP but I think that'll just leave the race open for other signals. IMHO a better solution would be to (re-)compile Sage with Cython profiling turned on and then use CProfiler.



---

archive/issue_comments_219764.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI'm happy to change the code so that we don't use gperftools. But I don't think I have the legitimation to change global compilation parameters. I even don't know what to change so that cProfile will include pyx files.\n\nCan you, Volker, deal with the compilation. I'll make necessary changes to the citation system in a separate ticket, if required.",
    "created_at": "2014-08-13T06:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219764",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:18" align="right">comment:18</div>

I'm happy to change the code so that we don't use gperftools. But I don't think I have the legitimation to change global compilation parameters. I even don't know what to change so that cProfile will include pyx files.

Can you, Volker, deal with the compilation. I'll make necessary changes to the citation system in a separate ticket, if required.



---

archive/issue_comments_219765.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5150a5ceaeb6765f83bf7b8ad9c8a02f533f8388\"><code>5150a5c</code></a></td><td><code>Revert \"Redirect stdout ... while profiling.\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8\"><code>3487e5c</code></a></td><td><code>Remove support for gperftools in citation system.</code></td></tr></table>\n",
    "created_at": "2014-08-13T07:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219765",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5150a5ceaeb6765f83bf7b8ad9c8a02f533f8388"><code>5150a5c</code></a></td><td><code>Revert "Redirect stdout ... while profiling."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8"><code>3487e5c</code></a></td><td><code>Remove support for gperftools in citation system.</code></td></tr></table>




---

archive/issue_comments_219766.json:
```json
{
    "body": "Changed commit from **[`ddc10e4`](https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae)** to **[`3487e5c`](https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8)**",
    "created_at": "2014-08-13T07:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219766",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ddc10e4`](https://github.com/sagemath/sagetrac-mirror/commit/ddc10e4f206aafcba05292c75c69d6b034f6afae)** to **[`3487e5c`](https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8)**



---

archive/issue_events_240914.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-13T07:14:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240914"
}
```



---

archive/issue_events_240915.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2014-08-13T07:14:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240915"
}
```



---

archive/issue_comments_219767.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWhile this seems subject of ongoing discussion, I have already pushed separate changes -- BibTeX facilities -- to #16854.",
    "created_at": "2014-08-19T18:41:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219767",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:21" align="right">comment:21</div>

While this seems subject of ongoing discussion, I have already pushed separate changes -- BibTeX facilities -- to #16854.



---

archive/issue_comments_219768.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI have made a small commit, to change a few lines to the new docstyle continuation using `....:`\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68029f3eceea50b712d7d7d316a1524f69f87f8c\"><code>68029f3</code></a></td><td><code>Merge branch 'u/mraum/ticket/16777' of ssh://trac.sagemath.org:22/sage into 16777</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5\"><code>7964470</code></a></td><td><code>trac #16777 using new-style of doctest continuation</code></td></tr></table>\n",
    "created_at": "2014-08-20T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219768",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

I have made a small commit, to change a few lines to the new docstyle continuation using `....:`

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68029f3eceea50b712d7d7d316a1524f69f87f8c"><code>68029f3</code></a></td><td><code>Merge branch 'u/mraum/ticket/16777' of ssh://trac.sagemath.org:22/sage into 16777</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5"><code>7964470</code></a></td><td><code>trac #16777 using new-style of doctest continuation</code></td></tr></table>




---

archive/issue_comments_219769.json:
```json
{
    "body": "Changed branch from **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)** to **[public/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16777)**",
    "created_at": "2014-08-20T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219769",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)** to **[public/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16777)**



---

archive/issue_comments_219770.json:
```json
{
    "body": "Changed commit from **[`3487e5c`](https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8)** to **[`7964470`](https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5)**",
    "created_at": "2014-08-20T08:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219770",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`3487e5c`](https://github.com/sagemath/sagetrac-mirror/commit/3487e5ca3703219d1096404cc1f7a6bcc6b895c8)** to **[`7964470`](https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5)**



---

archive/issue_comments_219771.json:
```json
{
    "body": "Changed branch from **[public/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16777)** to **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**",
    "created_at": "2014-11-20T10:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219771",
    "user": "https://github.com/sagetrac-mraum"
}
```

Changed branch from **[public/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16777)** to **[u/mraum/ticket/16777](https://github.com/sagemath/sagetrac-mirror/tree/u/mraum/ticket/16777)**



---

archive/issue_comments_219772.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThis implements the approach that was suggested by Volker, reasoning that branch prediction will avoid slow down in critical (e.g. Cython or C) code. The test suite runs, on my computer, 1.3% slower. I have also tested a more critical part, sage/rings, which runs 2.8% slower.\n\nSee https://groups.google.com/d/msg/sage-devel/xoPszCcMtns/Y5UYdOr-WVsJ for a discussion. As a remark, I want to say also here: If we want to have citations (which I strongly believe is a question of publication ethics), either we need the profiling approach (which does not interoperate well with the Sage ecosystem) or we have to accept a minor slow down.",
    "created_at": "2014-11-20T10:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219772",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:24" align="right">comment:24</div>

This implements the approach that was suggested by Volker, reasoning that branch prediction will avoid slow down in critical (e.g. Cython or C) code. The test suite runs, on my computer, 1.3% slower. I have also tested a more critical part, sage/rings, which runs 2.8% slower.

See https://groups.google.com/d/msg/sage-devel/xoPszCcMtns/Y5UYdOr-WVsJ for a discussion. As a remark, I want to say also here: If we want to have citations (which I strongly believe is a question of publication ethics), either we need the profiling approach (which does not interoperate well with the Sage ecosystem) or we have to accept a minor slow down.



---

archive/issue_comments_219773.json:
```json
{
    "body": "Changed commit from **[`7964470`](https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5)** to **[`b423bfe`](https://github.com/sagemath/sagetrac-mirror/commit/b423bfee14e0799831aa5584b917b54eb80c2a7d)**",
    "created_at": "2014-11-20T10:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219773",
    "user": "https://github.com/sagetrac-mraum"
}
```

Changed commit from **[`7964470`](https://github.com/sagemath/sagetrac-mirror/commit/7964470c314603a36795169b2348220a6c34a7f5)** to **[`b423bfe`](https://github.com/sagemath/sagetrac-mirror/commit/b423bfee14e0799831aa5584b917b54eb80c2a7d)**



---

archive/issue_events_240916.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-23T19:33:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240916"
}
```



---

archive/issue_events_240917.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-02-23T19:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240917"
}
```



---

archive/issue_comments_219774.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nBranch does not apply",
    "created_at": "2015-02-23T19:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219774",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

Branch does not apply



---

archive/issue_comments_219775.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIs anybody still interested in this ticket? Note that the ticket description no longer reflects the code.",
    "created_at": "2017-06-06T13:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16777#issuecomment-219775",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Is anybody still interested in this ticket? Note that the ticket description no longer reflects the code.



---

archive/issue_events_240918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16777",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16777#event-240918"
}
```
