# Issue 16171: Sort cone facets

archive/issues_015934.json:
```json
{
    "body": "Cones already make sure that 1-d faces are sorted in the same way as rays. Let's also make facets listed in the same order as facet normals: the first of these lists is stored as is and the second one is sorted, no matter in which order they are computed (facets can be determined from the ambient structure without normals). The corner case when facets are rays is handled as well by sorting facet normals immediately.\n\nCC:  @vbraun jkeitel\n\nKeywords: toric\n\nBranch/Commit: 9688ff146df01e1838f3734e193ade5531bc0886\n\nReviewer: Jan Keitel\n\nAuthor: Andrey Novoseltsev\n\nDependencies: #16180\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16171\n\n",
    "closed_at": "2014-07-25T22:19:02Z",
    "created_at": "2014-04-15T22:18:55Z",
    "labels": [
        "component: geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Sort cone facets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16171",
    "user": "https://github.com/novoselt"
}
```
Cones already make sure that 1-d faces are sorted in the same way as rays. Let's also make facets listed in the same order as facet normals: the first of these lists is stored as is and the second one is sorted, no matter in which order they are computed (facets can be determined from the ambient structure without normals). The corner case when facets are rays is handled as well by sorting facet normals immediately.

CC:  @vbraun jkeitel

Keywords: toric

Branch/Commit: 9688ff146df01e1838f3734e193ade5531bc0886

Reviewer: Jan Keitel

Author: Andrey Novoseltsev

Dependencies: #16180

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16171





---

archive/issue_comments_220467.json:
```json
{
    "body": "Changing keywords from \"\" to \"toric\".",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220467",
    "user": "https://github.com/novoselt"
}
```

Changing keywords from "" to "toric".



---

archive/issue_comments_220468.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220468",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_220469.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Cones already make sure that 1-d faces are sorted in the same way as rays. Let's also make facets listed in the same order as facet normals: the first of these lists is stored as is and the second one is sorted, no matter in which order they are computed (facets can be determined from the ambient structure without normals). The corner case when facets are rays is handled as well by sorting facet normals immediately.\n \n Comment: 1\n \n```\n",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220469",
    "user": "https://github.com/novoselt"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Cones already make sure that 1-d faces are sorted in the same way as rays. Let's also make facets listed in the same order as facet normals: the first of these lists is stored as is and the second one is sorted, no matter in which order they are computed (facets can be determined from the ambient structure without normals). The corner case when facets are rays is handled as well by sorting facet normals immediately.
 
 Comment: 1
 
```




---

archive/issue_comments_220470.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220470",
    "user": "https://github.com/novoselt"
}
```

Changing priority from major to minor.



---

archive/issue_comments_220471.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220471",
    "user": "https://github.com/novoselt"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_220472.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220472",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_220473.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2014-04-16T00:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220473",
    "user": "https://github.com/novoselt"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_events_047641.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16171#event-47641"
}
```



---

archive/issue_comments_220474.json:
```json
{
    "body": "<a id='comment:4'></a>Hi Jan - in case you have nothing else to do, there are a few toric-related tickets ready for review ;-)",
    "created_at": "2014-06-21T19:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220474",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'></a>Hi Jan - in case you have nothing else to do, there are a few toric-related tickets ready for review ;-)



---

archive/issue_comments_220475.json:
```json
{
    "body": "<a id='comment:5'></a>The worldcup has started! ;-) No, on a more serious note: I'm busy for the next two weeks, but I promise to take a look after that.",
    "created_at": "2014-06-21T22:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220475",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:5'></a>The worldcup has started! ;-) No, on a more serious note: I'm busy for the next two weeks, but I promise to take a look after that.



---

archive/issue_comments_220476.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-24T12:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220476",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_220477.json:
```json
{
    "body": "<a id='comment:6'></a>I'm not entirely sure what this is needed for, but at least it makes things more consistent. Since the code looks good and works, I'm putting this to positive review.",
    "created_at": "2014-07-24T12:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220477",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:6'></a>I'm not entirely sure what this is needed for, but at least it makes things more consistent. Since the code looks good and works, I'm putting this to positive review.



---

archive/issue_comments_220478.json:
```json
{
    "body": "<a id='comment:7'></a>That's exactly what this is needed for - consistency. My plan is to rewrite faces of `LatticePolytope` in the same fashion as it is done for cones and while I was looking at details I decided to change things here first. Thanks for taking a look!",
    "created_at": "2014-07-24T15:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220478",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>That's exactly what this is needed for - consistency. My plan is to rewrite faces of `LatticePolytope` in the same fashion as it is done for cones and while I was looking at details I decided to change things here first. Thanks for taking a look!



---

archive/issue_comments_220479.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-07-25T02:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220479",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_220480.json:
```json
{
    "body": "<a id='comment:8'></a>\n```\nsage -t --long src/sage/geometry/fan.py\n**********************************************************************\nFile \"src/sage/geometry/fan.py\", line 1716, in sage.geometry.fan.?._subdivide_stellar\nFailed example:\n    [cone.ambient_ray_indices() for cone in F]\nExpected:\n    [(0, 1, 3), (0, 2, 3)]\nGot:\n    [(0, 2, 3), (0, 1, 3)]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.geometry.fan.?._subdivide_stellar\n```",
    "created_at": "2014-07-25T02:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220480",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>
```
sage -t --long src/sage/geometry/fan.py
**********************************************************************
File "src/sage/geometry/fan.py", line 1716, in sage.geometry.fan.?._subdivide_stellar
Failed example:
    [cone.ambient_ray_indices() for cone in F]
Expected:
    [(0, 1, 3), (0, 2, 3)]
Got:
    [(0, 2, 3), (0, 1, 3)]
**********************************************************************
1 item had failures:
   1 of  13 in sage.geometry.fan.?._subdivide_stellar
```



---

archive/issue_comments_220481.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-07-25T07:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220481",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_220482.json:
```json
{
    "body": "<a id='comment:9'></a>Sorry Volker, that one obviously came from #16180. I've merged in #16180 and fixed the doctest.\n\n---\nNew commits:",
    "created_at": "2014-07-25T07:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220482",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:9'></a>Sorry Volker, that one obviously came from #16180. I've merged in #16180 and fixed the doctest.

---
New commits:



---

archive/issue_events_047642.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-25T22:19:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16171#event-47642"
}
```



---

archive/issue_comments_220483.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-25T22:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16171#issuecomment-220483",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
