# Issue 16107: Meta ticket: unified sequence/lazy list objects

archive/issues_015870.json:
```json
{
    "assignees": [],
    "body": "Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when\n\n* #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)\n* `class Sequence`: maybe renaming to `FiniteSequence`\n* #16137: extend lazy_list: lazy_list from various input data\n* #19895: extend lazy_list: various improvements and generalizations, new sublists\n* #19896: implementation of `class InfiniteSequence`\n* let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`\n* #18565: catalog of sequences\n* #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`\n* if obsolete close #6800\n\n\nDepends on #15852\nDepends on #15673\nDepends on #16137\nDepends on #18565\nDepends on #19895\nDepends on #19896\n\nCC:  @MatthieuDien @videlec @nthiery @mantepse\n\nKeywords: **days57, LazyPowerSeries**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16107_\n\n",
    "created_at": "2014-04-09T07:07:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Meta ticket: unified sequence/lazy list objects",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/16107",
    "user": "https://github.com/rwst"
}
```
Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when

* #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)
* `class Sequence`: maybe renaming to `FiniteSequence`
* #16137: extend lazy_list: lazy_list from various input data
* #19895: extend lazy_list: various improvements and generalizations, new sublists
* #19896: implementation of `class InfiniteSequence`
* let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`
* #18565: catalog of sequences
* #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`
* if obsolete close #6800


Depends on #15852
Depends on #15673
Depends on #16137
Depends on #18565
Depends on #19895
Depends on #19896

CC:  @MatthieuDien @videlec @nthiery @mantepse

Keywords: **days57, LazyPowerSeries**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/16107_





---

archive/issue_events_230024.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-09T07:07:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230024"
}
```



---

archive/issue_events_230025.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-09T07:07:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230025"
}
```



---

archive/issue_events_230026.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-09T07:07:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230026"
}
```



---

archive/issue_events_230027.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-09T07:07:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230027"
}
```



---

archive/issue_comments_205409.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2014-04-09T10:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205409",
    "user": "https://github.com/MatthieuDien"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_205410.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFot the last point : I did a benchmark between it and the current implementation and [ticket:6800 #6800] was really slow (and have some bugs).\n\nFor now, I have to do a benchmark between [ticket:15673 #15673] and another implementation, so I willl look for look for other points",
    "created_at": "2014-04-09T10:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205410",
    "user": "https://github.com/MatthieuDien"
}
```

<div id="comment:1" align="right">comment:1</div>

Fot the last point : I did a benchmark between it and the current implementation and [ticket:6800 #6800] was really slow (and have some bugs).

For now, I have to do a benchmark between [ticket:15673 #15673] and another implementation, so I willl look for look for other points



---

archive/issue_comments_205411.json:
```json
{
    "body": "Changed keywords from none to **days57**",
    "created_at": "2014-04-09T10:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205411",
    "user": "https://github.com/MatthieuDien"
}
```

Changed keywords from none to **days57**



---

archive/issue_comments_205412.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAfter some tests, `sage.misc.lazy_list` seems to be faster than `sage.structure.sequence` and `sage.combinat.species.*stream` because it it cythonized.\n\nWe will try to do an implementation of `sage.combinat.species.series_stream` over `sage.misc.lazy_list`",
    "created_at": "2014-04-09T22:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205412",
    "user": "https://github.com/MatthieuDien"
}
```

<div id="comment:5" align="right">comment:5</div>

After some tests, `sage.misc.lazy_list` seems to be faster than `sage.structure.sequence` and `sage.combinat.species.*stream` because it it cythonized.

We will try to do an implementation of `sage.combinat.species.series_stream` over `sage.misc.lazy_list`



---

archive/issue_comments_205413.json:
```json
{
    "body": "Changed dependencies from **#15852, #15673** to **#15852, #15673, #16107**",
    "created_at": "2014-04-13T08:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205413",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#15852, #15673** to **#15852, #15673, #16107**



---

archive/issue_comments_205414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,7 @@\n \n * the `class Sequence` has a parent from the category `Sets` implemented, maybe with renaming to `FiniteSequence` (#15852)\n * implementation of `class InfiniteSequence`\n-* let both use `sage.misc.lazy_list` (as default implementation? do benchmark)\n-* refactor code in `combinat.species.*stream` to use `Sequence`\n-* how does the hypothetical `combinat.species.series.LazyPowerSeries` (#6800) fit in?\n+* let both use `sage.misc.lazy_list`\n+* refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)\n+* if obsolete close #6800\n \n-Major improvements in `combinat.species.*stream` are planned in #15673.\n``````\n",
    "created_at": "2014-04-13T08:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205414",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,7 @@
 
 * the `class Sequence` has a parent from the category `Sets` implemented, maybe with renaming to `FiniteSequence` (#15852)
 * implementation of `class InfiniteSequence`
-* let both use `sage.misc.lazy_list` (as default implementation? do benchmark)
-* refactor code in `combinat.species.*stream` to use `Sequence`
-* how does the hypothetical `combinat.species.series.LazyPowerSeries` (#6800) fit in?
+* let both use `sage.misc.lazy_list`
+* refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)
+* if obsolete close #6800
 
-Major improvements in `combinat.species.*stream` are planned in #15673.
``````




---

archive/issue_events_230028.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230028"
}
```



---

archive/issue_events_230029.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230029"
}
```



---

archive/issue_comments_205415.json:
```json
{
    "body": "Changed dependencies from **#15852, #15673, #16107** to **#15852, #15673, #16137**",
    "created_at": "2014-06-10T11:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205415",
    "user": "https://github.com/mantepse"
}
```

Changed dependencies from **#15852, #15673, #16107** to **#15852, #15673, #16137**



---

archive/issue_comments_205416.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think you meant to add #16137, since #16107 is this ticket.",
    "created_at": "2014-06-10T11:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205416",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">comment:8</div>

I think you meant to add #16137, since #16107 is this ticket.



---

archive/issue_events_230030.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230030"
}
```



---

archive/issue_events_230031.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230031"
}
```



---

archive/issue_comments_205417.json:
```json
{
    "body": "Changed keywords from **days57** to **days57, LazyPowerSeries**",
    "created_at": "2014-12-16T10:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205417",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from **days57** to **days57, LazyPowerSeries**



---

archive/issue_comments_205418.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when\n \n-* the `class Sequence` has a parent from the category `Sets` implemented, maybe with renaming to `FiniteSequence` (#15852)\n+* the `class Sequence` has a parent from the category `Sets` implemented (#15852 uncouple sequence from categories), maybe with renaming to `FiniteSequence`\n * implementation of `class InfiniteSequence`\n * let both use `sage.misc.lazy_list`\n * refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)\n``````\n",
    "created_at": "2016-01-06T18:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205418",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when
 
-* the `class Sequence` has a parent from the category `Sets` implemented, maybe with renaming to `FiniteSequence` (#15852)
+* the `class Sequence` has a parent from the category `Sets` implemented (#15852 uncouple sequence from categories), maybe with renaming to `FiniteSequence`
 * implementation of `class InfiniteSequence`
 * let both use `sage.misc.lazy_list`
 * refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)
``````




---

archive/issue_comments_205419.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when\n \n-* the `class Sequence` has a parent from the category `Sets` implemented (#15852 uncouple sequence from categories), maybe with renaming to `FiniteSequence`\n+* #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)\n+* `class Sequence`: maybe renaming to `FiniteSequence`\n+* #16137: extend lazy_list: lazy_list from various input data\n * implementation of `class InfiniteSequence`\n-* let both use `sage.misc.lazy_list`\n-* refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)\n+* let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`\n+* #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`\n * if obsolete close #6800\n \n``````\n",
    "created_at": "2016-01-11T18:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205419",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 Several (maybe specialized) implementations of lazy lists exist. This meta ticket can be considered closed when
 
-* the `class Sequence` has a parent from the category `Sets` implemented (#15852 uncouple sequence from categories), maybe with renaming to `FiniteSequence`
+* #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)
+* `class Sequence`: maybe renaming to `FiniteSequence`
+* #16137: extend lazy_list: lazy_list from various input data
 * implementation of `class InfiniteSequence`
-* let both use `sage.misc.lazy_list`
-* refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list` (#15673)
+* let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`
+* #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`
 * if obsolete close #6800
 
``````




---

archive/issue_events_230032.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2016-01-11T18:48:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "title_is": "unified sequence/lazy list objects",
    "title_was": "unified sequence/lazy list objects in category tree",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230032"
}
```



---

archive/issue_comments_205420.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've updated the description. Please add here what else should be done; maybe something in words? ...or for lazy power series?",
    "created_at": "2016-01-11T18:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205420",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:14" align="right">comment:14</div>

I've updated the description. Please add here what else should be done; maybe something in words? ...or for lazy power series?



---

archive/issue_events_230033.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2016-01-11T18:50:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "title_is": "Meta ticket: unified sequence/lazy list objects",
    "title_was": "unified sequence/lazy list objects",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230033"
}
```



---

archive/issue_comments_205421.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI am thinking about implementing InfiniteSequences and have the following design issue with the two possibilites (it is not restricted to the infinite sequences, but is similar for other classes like words, stream in the species, etc., as well):\n\n1. make `lazy_list_generic` a base class of `InfiniteSequence`\n\n2. make an attribute `values` (or similar) in the class `InfiniteSequence` which will be an instance of `lazy_list_generic`\n\nBoth have advantages and disadvantages:\n\n- `Sequence` uses list as a base class, thus `InfiniteSequence` should use `lazy_list`\n- With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)\n- With 2. you need to write methods for all the things you like from the lazy lists (like building slices etc.). And even then, it is not a lazy list, but just behaves like one.\n\nWhat do you think?",
    "created_at": "2016-01-11T19:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205421",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:16" align="right">comment:16</div>

I am thinking about implementing InfiniteSequences and have the following design issue with the two possibilites (it is not restricted to the infinite sequences, but is similar for other classes like words, stream in the species, etc., as well):

1. make `lazy_list_generic` a base class of `InfiniteSequence`

2. make an attribute `values` (or similar) in the class `InfiniteSequence` which will be an instance of `lazy_list_generic`

Both have advantages and disadvantages:

- `Sequence` uses list as a base class, thus `InfiniteSequence` should use `lazy_list`
- With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)
- With 2. you need to write methods for all the things you like from the lazy lists (like building slices etc.). And even then, it is not a lazy list, but just behaves like one.

What do you think?



---

archive/issue_comments_205422.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI just realized that `sage.combinat.species.series_stream` actually implements streams of coefficients of lazy power series.  I'll have to experiment there, too,...\n\nShould `InfiniteSequence` be the same?  What is the algebraic structure?",
    "created_at": "2016-01-12T08:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205422",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:17" align="right">comment:17</div>

I just realized that `sage.combinat.species.series_stream` actually implements streams of coefficients of lazy power series.  I'll have to experiment there, too,...

Should `InfiniteSequence` be the same?  What is the algebraic structure?



---

archive/issue_comments_205423.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@dkrenn](#comment:16):\n> - With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)\n\nCould you explain?  What does it mean that you cannot use a derived class directly?",
    "created_at": "2016-01-12T08:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205423",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@dkrenn](#comment:16):
> - With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)

Could you explain?  What does it mean that you cannot use a derived class directly?



---

archive/issue_comments_205424.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mantepse](#comment:18):\n> Replying to [@dkrenn](#comment:16):\n> > - With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)\n\n> \n> Could you explain?  What does it mean that you cannot use a derived class directly?\n\n```\nclass InfiniteSequence(SageObject, lazy_list_generic)\n```\nBut when using the factory `lazy_list`, I may get a `lazy_list_iterator` or similar, so AFAIK I cannot use it in `InfiniteSequence` directly. I need to do either\n- create `class InfiniteSequenceIterator(InfiniteSequence, lazy_list_iterator)` (and have to do this for all possible `lazy_list_*` or\n- create a `lazy_list_generic` (`InfiniteSequence`), which uses the data of the `lazy_list_iterator`, i.e., tracks `lazy_list_iterator`. Thus having always two `lazy_list_*` instances instantiated.",
    "created_at": "2016-01-12T08:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205424",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mantepse](#comment:18):
> Replying to [@dkrenn](#comment:16):
> > - With 1. you can only use `lazy_list_generic`, but no derived class like `lazy_list_iterator` directly; you have to create a `lazy_list_generic` which tracks the other (as its `master` attribute; is already implemented since used with slices)

> 
> Could you explain?  What does it mean that you cannot use a derived class directly?

```
class InfiniteSequence(SageObject, lazy_list_generic)
```
But when using the factory `lazy_list`, I may get a `lazy_list_iterator` or similar, so AFAIK I cannot use it in `InfiniteSequence` directly. I need to do either
- create `class InfiniteSequenceIterator(InfiniteSequence, lazy_list_iterator)` (and have to do this for all possible `lazy_list_*` or
- create a `lazy_list_generic` (`InfiniteSequence`), which uses the data of the `lazy_list_iterator`, i.e., tracks `lazy_list_iterator`. Thus having always two `lazy_list_*` instances instantiated.



---

archive/issue_comments_205425.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mantepse](#comment:17):\n> I just realized that `sage.combinat.species.series_stream` actually implements streams of coefficients of lazy power series.  I'll have to experiment there, too,...\n> \n> Should `InfiniteSequence` be the same?  What is the algebraic structure?\n\nNo algebraic strcture (due to the discussion on #15852 about (finite) sequences).",
    "created_at": "2016-01-12T08:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205425",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mantepse](#comment:17):
> I just realized that `sage.combinat.species.series_stream` actually implements streams of coefficients of lazy power series.  I'll have to experiment there, too,...
> 
> Should `InfiniteSequence` be the same?  What is the algebraic structure?

No algebraic strcture (due to the discussion on #15852 about (finite) sequences).



---

archive/issue_comments_205426.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@dkrenn](#comment:20):\n> Replying to [@mantepse](#comment:17):\n\n> > Should `InfiniteSequence` be the same?  What is the algebraic structure?\n\n> \n> No algebraic strcture (due to the discussion on #15852 about (finite) sequences).\n\nAh, but then what is the difference between `lazy_list` and `InfiniteSequence`?",
    "created_at": "2016-01-12T08:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205426",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@dkrenn](#comment:20):
> Replying to [@mantepse](#comment:17):

> > Should `InfiniteSequence` be the same?  What is the algebraic structure?

> 
> No algebraic strcture (due to the discussion on #15852 about (finite) sequences).

Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?



---

archive/issue_comments_205427.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@mantepse](#comment:21):\n> Replying to [@dkrenn](#comment:20):\n> > Replying to [@mantepse](#comment:17):\n\n> \n> > > Should `InfiniteSequence` be the same?  What is the algebraic structure?\n\n> > \n> > No algebraic strcture (due to the discussion on #15852 about (finite) sequences).\n\n> \n> Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?\n\nSequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.",
    "created_at": "2016-01-12T08:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205427",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@mantepse](#comment:21):
> Replying to [@dkrenn](#comment:20):
> > Replying to [@mantepse](#comment:17):

> 
> > > Should `InfiniteSequence` be the same?  What is the algebraic structure?

> > 
> > No algebraic strcture (due to the discussion on #15852 about (finite) sequences).

> 
> Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?

Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.



---

archive/issue_comments_205428.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@dkrenn](#comment:22):\n> > Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?\n\n> \n> Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.\n\nOK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)",
    "created_at": "2016-01-12T08:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205428",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@dkrenn](#comment:22):
> > Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?

> 
> Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.

OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)



---

archive/issue_comments_205429.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mantepse](#comment:23):\n> Replying to [@dkrenn](#comment:22):\n> > > Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?\n\n> > \n> > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.\n\n> \n> OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)\n\nSo your question back to you: What characterizes a stream on your sense?\nAnd why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).",
    "created_at": "2016-01-12T08:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205429",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mantepse](#comment:23):
> Replying to [@dkrenn](#comment:22):
> > > Ah, but then what is the difference between `lazy_list` and `InfiniteSequence`?

> > 
> > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.

> 
> OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)

So your question back to you: What characterizes a stream on your sense?
And why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).



---

archive/issue_comments_205430.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n> > > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.\n\n> > \n> > OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)\n\n> \n> So your question back to you: What characterizes a stream on your sense?\n> And why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).\n\n(I assume you mean stream of coefficients?)\n\nI want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.",
    "created_at": "2016-01-12T08:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205430",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:25" align="right">comment:25</div>

> > > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.

> > 
> > OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)

> 
> So your question back to you: What characterizes a stream on your sense?
> And why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).

(I assume you mean stream of coefficients?)

I want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.



---

archive/issue_comments_205431.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mantepse](#comment:25):\n> > > > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.\n\n> > > \n> > > OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)\n\n> > \n> > So your question back to you: What characterizes a stream on your sense?\n> > And why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).\n\n> \n> (I assume you mean stream of coefficients?)\n\nYes.\n\n> I want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.\n\nWhat operations are allowed on streams then? (I assume point-wise addition; what do you need multiplication for?)",
    "created_at": "2016-01-12T08:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205431",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mantepse](#comment:25):
> > > > Sequences have a common universe for all the elements of the lazy list and they are (in contrast to lazy list) a `SageObject` and not only Python's `object`.

> > > 
> > > OK, so in particular this answers my question: a stream of coefficients should not inherit from `lazy_list_generic` :-)  (and thanks for pointing out that `lazy_list` is not a class!)

> > 
> > So your question back to you: What characterizes a stream on your sense?
> > And why not using `lazy_list_generic` as base? (To point this out: It works; has advantages and disadvantages).

> 
> (I assume you mean stream of coefficients?)

Yes.

> I want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.

What operations are allowed on streams then? (I assume point-wise addition; what do you need multiplication for?)



---

archive/issue_comments_205432.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@mantepse](#comment:25):\n> I want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.\n\nSo your streams seem to be a more specialized than my sequences. In this way, would it be an option for you that streams have sequences as a base class?\nIs a stream of you a Sage `Element`? (I would guess so).",
    "created_at": "2016-01-12T09:02:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205432",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@mantepse](#comment:25):
> I want both a common universe and an algebraic structure: all coefficients are from a ring - in particular, I absolutely need a (recognisable!) zero.

So your streams seem to be a more specialized than my sequences. In this way, would it be an option for you that streams have sequences as a base class?
Is a stream of you a Sage `Element`? (I would guess so).



---

archive/issue_comments_205433.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> What operations are allowed on streams then? (I assume point-wise addition; what do you need multiplication for?)\n\nWell, I really want to keep them relatively general, mainly because I won't gain anything by requiring certain operation.  I do think that it makes sense to require that the coefficients are from a (possibly noncommutative) ring.  I can't think of any applications where we do not have this.  I need the recognisable zero to be able to do the trick with recursive definition.\n\n> So your streams seem to be a more specialized than my sequences. In this way, would it be an option for you that streams have sequences as a base class?\n\nYes, certainly.\n\n> Is a stream of you a Sage `Element`? (I would guess so).\n\nYes.",
    "created_at": "2016-01-12T14:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205433",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:28" align="right">comment:28</div>

> What operations are allowed on streams then? (I assume point-wise addition; what do you need multiplication for?)

Well, I really want to keep them relatively general, mainly because I won't gain anything by requiring certain operation.  I do think that it makes sense to require that the coefficients are from a (possibly noncommutative) ring.  I can't think of any applications where we do not have this.  I need the recognisable zero to be able to do the trick with recursive definition.

> So your streams seem to be a more specialized than my sequences. In this way, would it be an option for you that streams have sequences as a base class?

Yes, certainly.

> Is a stream of you a Sage `Element`? (I would guess so).

Yes.



---

archive/issue_comments_205434.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,8 @@\n * #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)\n * `class Sequence`: maybe renaming to `FiniteSequence`\n * #16137: extend lazy_list: lazy_list from various input data\n-* implementation of `class InfiniteSequence`\n+* #19895: extent lazy_list: various improvements and generalizations, new sublists\n+* #19896: implementation of `class InfiniteSequence`\n * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`\n * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`\n * if obsolete close #6800\n``````\n",
    "created_at": "2016-01-15T10:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205434",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,8 @@
 * #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)
 * `class Sequence`: maybe renaming to `FiniteSequence`
 * #16137: extend lazy_list: lazy_list from various input data
-* implementation of `class InfiniteSequence`
+* #19895: extent lazy_list: various improvements and generalizations, new sublists
+* #19896: implementation of `class InfiniteSequence`
 * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`
 * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`
 * if obsolete close #6800
``````




---

archive/issue_comments_205435.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n * #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)\n * `class Sequence`: maybe renaming to `FiniteSequence`\n * #16137: extend lazy_list: lazy_list from various input data\n-* #19895: extent lazy_list: various improvements and generalizations, new sublists\n+* #19895: extend lazy_list: various improvements and generalizations, new sublists\n * #19896: implementation of `class InfiniteSequence`\n * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`\n * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`\n``````\n",
    "created_at": "2016-01-15T10:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205435",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 * #15852: uncouple sequence from categories (was earlier: the `class Sequence` has a parent from the category `Sets` implemented)
 * `class Sequence`: maybe renaming to `FiniteSequence`
 * #16137: extend lazy_list: lazy_list from various input data
-* #19895: extent lazy_list: various improvements and generalizations, new sublists
+* #19895: extend lazy_list: various improvements and generalizations, new sublists
 * #19896: implementation of `class InfiniteSequence`
 * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`
 * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`
``````




---

archive/issue_comments_205436.json:
```json
{
    "body": "Changed dependencies from **#15852, #15673, #16137** to **#15852, #15673, #16137, #19895, #19896**",
    "created_at": "2016-01-15T10:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205436",
    "user": "https://github.com/dkrenn"
}
```

Changed dependencies from **#15852, #15673, #16137** to **#15852, #15673, #16137, #19895, #19896**



---

archive/issue_comments_205437.json:
```json
{
    "body": "Changed dependencies from **#15852, #15673, #16137, #19895, #19896** to **#15852, #15673, #16137, #18565, #19895, #19896**",
    "created_at": "2016-01-17T11:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205437",
    "user": "https://github.com/dkrenn"
}
```

Changed dependencies from **#15852, #15673, #16137, #19895, #19896** to **#15852, #15673, #16137, #18565, #19895, #19896**



---

archive/issue_comments_205438.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,7 @@\n * #19895: extend lazy_list: various improvements and generalizations, new sublists\n * #19896: implementation of `class InfiniteSequence`\n * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`\n+* #18565: catalog of sequences\n * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`\n * if obsolete close #6800\n \n``````\n",
    "created_at": "2016-01-17T11:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16107#issuecomment-205438",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,7 @@
 * #19895: extend lazy_list: various improvements and generalizations, new sublists
 * #19896: implementation of `class InfiniteSequence`
 * let both (`class Sequence`, `class InfiniteSequence`) use `sage.misc.lazy_list`
+* #18565: catalog of sequences
 * #15673: refactor code in `combinat.species.*stream` to use `sage.misc.lazy_list`
 * if obsolete close #6800
 
``````




---

archive/issue_events_230034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16107",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16107#event-230034"
}
```
