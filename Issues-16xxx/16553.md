# Issue 16553: Clean IncidenceStructure

archive/issues_016316.json:
```json
{
    "assignees": [],
    "body": "In #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:\n- to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)\n- ... (maybe more)\n\nsee also: #16534\n\nCC:  @nathanncohen @brettpim\n\nBranch/Commit: **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**\n\nReviewer: **Nathann Cohen, Vincent Delecroix**\n\nAuthor: **Nathann Cohen, Vincent Delecroix**\n\nComponent: **combinatorial designs**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16553_\n\n",
    "closed_at": "2014-07-01T21:55:18Z",
    "created_at": "2014-06-26T12:25:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Clean IncidenceStructure",
    "type": "issue",
    "updated_at": "2014-07-01T21:55:18Z",
    "url": "https://github.com/sagemath/sage/issues/16553",
    "user": "https://github.com/videlec"
}
```
In #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:
- to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)
- ... (maybe more)

see also: #16534

CC:  @nathanncohen @brettpim

Branch/Commit: **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**

Reviewer: **Nathann Cohen, Vincent Delecroix**

Author: **Nathann Cohen, Vincent Delecroix**

Component: **combinatorial designs**

_Issue created by migration from https://trac.sagemath.org/ticket/16553_





---

archive/issue_events_236422.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-26T12:25:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236422"
}
```



---

archive/issue_events_236423.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-26T12:25:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236423"
}
```



---

archive/issue_events_236424.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-26T12:25:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236424"
}
```



---

archive/issue_events_236425.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-26T12:25:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236425"
}
```



---

archive/issue_comments_214873.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSome more remarks:\n\n- I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n\n- A better name for `IncidenceStructure` would be `Design`... and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n\n- to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n\n  ```\n  class Design:\n      def rank_point(self, point):    # index of ``point``\n      def unrank_point(self, n):      # ``n``-th point\n      def rank_block(self, block):    # index of ``block``\n      def unrank_block(self, n):      # ``n``-th block\n  ```",
    "created_at": "2014-06-26T13:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214873",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Some more remarks:

- I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.

- A better name for `IncidenceStructure` would be `Design`... and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.

- to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`

  ```
  class Design:
      def rank_point(self, point):    # index of ``point``
      def unrank_point(self, n):      # ``n``-th point
      def rank_block(self, block):    # index of ``block``
      def unrank_block(self, n):      # ``n``-th block
  ```



---

archive/issue_comments_214874.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYo !\n\n> - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n\nWell, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.\n\nANd of course, the blocks would be .. Sets of points from the ground set ?\n\nThat's what we want, isn't it ?\n\n> - A better name for `IncidenceStructure` would be `Design`...\n\nOr hypergraph ?... A friend of mine says \"geometry\" instead of \"hypergraph\". Truth it, an incidence structure is a pretty general thing :\n\nhttp://en.wikipedia.org/wiki/Incidence_structure\n\n> and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n\nWell, we may need to have \".groups()\" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...\n\nThe main problem is that orthogonal arrays are not really designs in this sense.\n\n> - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n> \n>   ```\n>   class Design:\n>       def rank_point(self, point):    # index of ``point``\n>       def unrank_point(self, n):      # ``n``-th point\n>       def rank_block(self, block):    # index of ``block``\n>       def unrank_block(self, n):      # ``n``-th block\n>   ```\n\nReally ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !\n\nNathann",
    "created_at": "2014-06-26T13:14:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214874",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

Yo !

> - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.

Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.

ANd of course, the blocks would be .. Sets of points from the ground set ?

That's what we want, isn't it ?

> - A better name for `IncidenceStructure` would be `Design`...

Or hypergraph ?... A friend of mine says "geometry" instead of "hypergraph". Truth it, an incidence structure is a pretty general thing :

http://en.wikipedia.org/wiki/Incidence_structure

> and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.

Well, we may need to have ".groups()" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...

The main problem is that orthogonal arrays are not really designs in this sense.

> - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`
> 
>   ```
>   class Design:
>       def rank_point(self, point):    # index of ``point``
>       def unrank_point(self, n):      # ``n``-th point
>       def rank_block(self, block):    # index of ``block``
>       def unrank_block(self, n):      # ``n``-th block
>   ```

Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !

Nathann



---

archive/issue_comments_214875.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@nathanncohen](#comment:2):\n> Yo !\n> \n> > - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.\n\n> \n> Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.\n\n> ANd of course, the blocks would be .. Sets of points from the ground set ?\n\nThis is confusing. Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\nOne option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n> \n> > - A better name for `IncidenceStructure` would be `Design`...\n\n> \n> Or hypergraph ?... A friend of mine says \"geometry\" instead of \"hypergraph\". Truth it, an incidence structure is a pretty general thing :\n> \n> http://en.wikipedia.org/wiki/Incidence_structure\n\n>\n\nYes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?\n\n> > and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.\n\n> \n> Well, we may need to have \".groups()\" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...\n> \n> The main problem is that orthogonal arrays are not really designs in this sense.\n> \n> > - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`\n> > \n> >   ```\n> >   class Design:\n> >       def rank_point(self, point):    # index of ``point``\n> >       def unrank_point(self, n):      # ``n``-th point\n> >       def rank_block(self, block):    # index of ``block``\n> >       def unrank_block(self, n):      # ``n``-th block\n> >   ```\n\n> \n> Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !\n\nAll right.\n\nVincent",
    "created_at": "2014-06-26T13:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214875",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@nathanncohen](#comment:2):
> Yo !
> 
> > - I think we also want another bijection `blocks <-> {0, ..., b-1}` to have well defined incidence matrices. It would also help to choose proper labels for the dual incidence structure.

> 
> Well, the points of the dual incidence structure could be ... Sets ?.. Or tuples. I mean, the labels of the points of a dual incidence structure could be the blocks of the original incidence structure.

> ANd of course, the blocks would be .. Sets of points from the ground set ?

This is confusing. Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

> 
> > - A better name for `IncidenceStructure` would be `Design`...

> 
> Or hypergraph ?... A friend of mine says "geometry" instead of "hypergraph". Truth it, an incidence structure is a pretty general thing :
> 
> http://en.wikipedia.org/wiki/Incidence_structure

>

Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?

> > and we also need a class for `GroupDivisibleDesign` and for them we need an other bijection `groups <-> {0, ..., g-1}`.

> 
> Well, we may need to have ".groups()" indeed. We would have GDD at the bottom, them PBD, BIBD, transversal designs...
> 
> The main problem is that orthogonal arrays are not really designs in this sense.
> 
> > - to fit with enumerated set the natural terminology for the bijection would be `rank/unrank`
> > 
> >   ```
> >   class Design:
> >       def rank_point(self, point):    # index of ``point``
> >       def unrank_point(self, n):      # ``n``-th point
> >       def rank_block(self, block):    # index of ``block``
> >       def unrank_block(self, n):      # ``n``-th block
> >   ```

> 
> Really ? Ewww.. Honestly I'd be glad to avoid things like that and keep the integer names internal. Users do not need to see that !

All right.

Vincent



---

archive/issue_comments_214876.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n> This is confusing.\n\nWhat is confusing ? That blocks are sets of points ? `O_o`\n\n> Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\nWhy doesn't it work with duals ?\n \n> One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n............\n\nYeah, let's make it impossible to iterate on blocks. That will be better.\n\n> Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?\n\nForget about hypergraphs for the moment. Nobody but I knows it exists, and it can do nothing useful except displaying stuff, and once more I am the only one who knows that it does that `:-P`\n\nIncidence Structure will be the most basic thing we have. Then we will have GDD, then all we need above that.\n\nNathann",
    "created_at": "2014-06-26T13:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214876",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

> This is confusing.

What is confusing ? That blocks are sets of points ? `O_o`

> Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

Why doesn't it work with duals ?
 
> One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

............

Yeah, let's make it impossible to iterate on blocks. That will be better.

> Yes, we need `Hypergraph.to_incidence_structure` and `IncidenceStructure.to_hypergraph`... or only one class?

Forget about hypergraphs for the moment. Nobody but I knows it exists, and it can do nothing useful except displaying stuff, and once more I am the only one who knows that it does that `:-P`

Incidence Structure will be the most basic thing we have. Then we will have GDD, then all we need above that.

Nathann



---

archive/issue_comments_214877.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@nathanncohen](#comment:4):\n> > This is confusing.\n\n> \n> What is confusing ? That blocks are sets of points ? `O_o`\n\nNo, that points are blocks of the dual!\n\n> > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\n> \n> Why doesn't it work with duals ?\n\nBecause the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.\n\n> > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n> \n> ............\n> \n> Yeah, let's make it impossible to iterate on blocks. That will be better.\n\nAll right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?\n\nVincent",
    "created_at": "2014-06-26T14:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214877",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@nathanncohen](#comment:4):
> > This is confusing.

> 
> What is confusing ? That blocks are sets of points ? `O_o`

No, that points are blocks of the dual!

> > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

> 
> Why doesn't it work with duals ?

Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.

> > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

> 
> ............
> 
> Yeah, let's make it impossible to iterate on blocks. That will be better.

All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?

Vincent



---

archive/issue_comments_214878.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?\n\nNo. What I want is to stop trying to solve problems that already have an easy solution, especially when what you call \"solving them\" means sacrificing definitely useful stuff like being able to iterate on blocks. We can just make the `.dual()` function return a design along with a dictionary associating a vertex with the block it has become.\n\nNathann",
    "created_at": "2014-06-26T14:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214878",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

> All right, then we need a class `DualDesign` whose points and blocks would be wrappers. Is it what you want?

No. What I want is to stop trying to solve problems that already have an easy solution, especially when what you call "solving them" means sacrificing definitely useful stuff like being able to iterate on blocks. We can just make the `.dual()` function return a design along with a dictionary associating a vertex with the block it has become.

Nathann



---

archive/issue_comments_214879.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@videlec](#comment:5):\n> Replying to [@nathanncohen](#comment:4):\n> > > This is confusing.\n\n> > \n> > What is confusing ? That blocks are sets of points ? `O_o`\n\n> \n> No, that points are blocks of the dual!\n> \n> > > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.\n\n> > \n> > Why doesn't it work with duals ?\n\n> \n> Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.\n> \n> > > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.\n\n> > \n> > ............\n> > \n> > Yeah, let's make it impossible to iterate on blocks. That will be better.\n\nAll right: what about intersection? do we want `b1.intersection(b2)` available?",
    "created_at": "2014-06-26T15:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214879",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@videlec](#comment:5):
> Replying to [@nathanncohen](#comment:4):
> > > This is confusing.

> > 
> > What is confusing ? That blocks are sets of points ? `O_o`

> 
> No, that points are blocks of the dual!
> 
> > > Basically, we do not care too much about the data type of the blocks as soon as `__len__`, `__iter__` and `__contains__` are correctly implemented, right... But it does not work with dual.

> > 
> > Why doesn't it work with duals ?

> 
> Because the blocks of the duals are the point. And the dual of the dual is (canonically isomorphic) to the initial design.
> 
> > > One option is to do like posets where the ordering is implemented in the poset itself and not in the elements. We would implement the incidence structure at the level of `IncidenceStructure` and not at the level of points/blocks. In other words we would forbid `p in block`.

> > 
> > ............
> > 
> > Yeah, let's make it impossible to iterate on blocks. That will be better.

All right: what about intersection? do we want `b1.intersection(b2)` available?



---

archive/issue_comments_214880.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n> All right: what about intersection? do we want `b1.intersection(b2)` available?\n\nWhy we would need that ?...\n\nNathann",
    "created_at": "2014-06-26T15:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214880",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

> All right: what about intersection? do we want `b1.intersection(b2)` available?

Why we would need that ?...

Nathann



---

archive/issue_comments_214881.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nathanncohen](#comment:8):\n> > All right: what about intersection? do we want `b1.intersection(b2)` available?\n\n> \n> Why we would need that ?...\n\nTo compute the intersection numbers (see definition 1.5 of the Handbook).",
    "created_at": "2014-06-26T15:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214881",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nathanncohen](#comment:8):
> > All right: what about intersection? do we want `b1.intersection(b2)` available?

> 
> Why we would need that ?...

To compute the intersection numbers (see definition 1.5 of the Handbook).



---

archive/issue_comments_214882.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> To compute the intersection numbers (see definition 1.5 of the Handbook).\n\nThat's not a reason to restrict the input. If we need to compute stuff like that we can copy the data in whatever structure we need to make it go faster, but that is not sufficient to change the input of the whole class.\n\nNathann",
    "created_at": "2014-06-26T15:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214882",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

> To compute the intersection numbers (see definition 1.5 of the Handbook).

That's not a reason to restrict the input. If we need to compute stuff like that we can copy the data in whatever structure we need to make it go faster, but that is not sufficient to change the input of the whole class.

Nathann



---

archive/issue_comments_214883.json:
```json
{
    "body": "Branch: **[public/16553](https://github.com/sagemath/sagetrac-mirror/tree/public/16553)**",
    "created_at": "2014-06-26T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214883",
    "user": "https://github.com/videlec"
}
```

Branch: **[public/16553](https://github.com/sagemath/sagetrac-mirror/tree/public/16553)**



---

archive/issue_comments_214884.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf\">a5c4dbc</a></td><td><code>trac #16553: reimplement IncidenceStructure</code></td></tr></table>\n",
    "created_at": "2014-06-26T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214884",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf">a5c4dbc</a></td><td><code>trac #16553: reimplement IncidenceStructure</code></td></tr></table>




---

archive/issue_events_236426.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-26T21:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236426"
}
```



---

archive/issue_comments_214885.json:
```json
{
    "body": "Commit: **[`a5c4dbc`](https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf)**",
    "created_at": "2014-06-26T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214885",
    "user": "https://github.com/videlec"
}
```

Commit: **[`a5c4dbc`](https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf)**



---

archive/issue_comments_214886.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI did not know what to do with `def block_design_checker(self, t, v, k, lmbda, type=None):`... help!\n\nVincent",
    "created_at": "2014-06-26T21:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214886",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

I did not know what to do with `def block_design_checker(self, t, v, k, lmbda, type=None):`... help!

Vincent



---

archive/issue_comments_214887.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nVincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.\n\nFirst, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.\n\nThen, things like \"return len(self.blocks())\" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`\n\n\nYou also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.\n\nYou seem to remove classes without deprecation, like `BlockDesign`.\n\nNathann",
    "created_at": "2014-06-27T07:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214887",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.

First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.

Then, things like "return len(self.blocks())" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`


You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.

You seem to remove classes without deprecation, like `BlockDesign`.

Nathann



---

archive/issue_events_236427.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-27T07:20:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236427"
}
```



---

archive/issue_events_236428.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-27T07:20:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236428"
}
```



---

archive/issue_comments_214888.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nathanncohen](#comment:13):\n> Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.\n\nI can do that. But I am not sure you want to know the real history of my commits.\n\n> First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.\n\nThe definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n\n> Then, things like \"return len(self.blocks())\" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`\n\nRight!\n\n> You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.\n\nThe only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n\n> You seem to remove classes without deprecation, like `BlockDesign`.\n\nNope. It is now a complete synonym of `IncidenceStructure` without any further check.\n\nVincent",
    "created_at": "2014-06-27T07:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214888",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nathanncohen](#comment:13):
> Vincent, it would be cool if you could say what you did in there, because you do a thousand things at once and it is difficult to list them all while reading the patch. You should have done several thematic commits.

I can do that. But I am not sure you want to know the real history of my commits.

> First, why do you rename `BlockDesign` to `TDesign` ? A GDD is not exactly a 2-design (although it's admittedly not far) so we will not be able to use TDesign as a base class for our methods later.

The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.

> Then, things like "return len(self.blocks())" is criminal as it requires to build the whole list only to compute its lengths. Given that you are writing methods of the very class you are allowed to use private variables, you know ? `:-P`

Right!

> You also seem to add methods and this should go into a different patch. Really, it is very hard to understand what you do here from the diff file, so it is not the place to ad new stuff that will have to be discussed.

The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).

> You seem to remove classes without deprecation, like `BlockDesign`.

Nope. It is now a complete synonym of `IncidenceStructure` without any further check.

Vincent



---

archive/issue_comments_214889.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYo !\n\n> I can do that. But I am not sure you want to know the real history of my commits.\n\nNot \"the real history\". That's why we create several patches for several things, and that's why we can add several commits in the same ticket : so that we may present the changes in a way that makes them easy to review. You didn't want to see the real history of my design commits eithers `:-P`\n\n> The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n\nWell, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this \"t\" is a variable.... What about tDesign ?\n\nWhat I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. \n\n> The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n\nI have never heard of \"t indices\" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...\n\nNathann",
    "created_at": "2014-06-27T07:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214889",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Yo !

> I can do that. But I am not sure you want to know the real history of my commits.

Not "the real history". That's why we create several patches for several things, and that's why we can add several commits in the same ticket : so that we may present the changes in a way that makes them easy to review. You didn't want to see the real history of my design commits eithers `:-P`

> The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.

Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this "t" is a variable.... What about tDesign ?

What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. 

> The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).

I have never heard of "t indices" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...

Nathann



---

archive/issue_comments_214890.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nathanncohen](#comment:15):\n> Yo !\n> \n> > The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.\n\n> \n> Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this \"t\" is a variable.... What about tDesign ?\n\n> What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. \n\nI propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).\n\n> > The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).\n\n> \n> I have never heard of \"t indices\" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...\n\nHandbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.",
    "created_at": "2014-06-27T08:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214890",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nathanncohen](#comment:15):
> Yo !
> 
> > The definition of block design used in Sage is wrong. A block design is a synonym for incidence structure (as it can be checked on wikipedia or the Handbok of combinatorial designs). What was considered are t-designs for which you have well defined parameters `t-(v,k,\lambda)`. It is a particular case of block design. Hopefully right now there is only one class and making `BlockDesign = IncidenceStructure` looks safe enough to me.

> 
> Well, right now tdesign returns an incidence structure too. Okay, one question : should we deprecate BlockDesign in favor of IncidenceStructure ? Also, it seems weird to have an upper case T in TDesign, given that this "t" is a variable.... What about tDesign ?

> What I don't like about this is that we do not need a tDesign class at all, so why would we create one ? We create classes for the wrong reason and we have nothing to put in them. 

I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).

> > The only stuff I added is just to simplify the `is_t_design` function (like `t_indices`, `replication_numbers`, etc).

> 
> I have never heard of "t indices" anywhere. Where did you find this terminology ? It just seems to be the degree of a point, taken as a hypergraph ...

Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.



---

archive/issue_comments_214891.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYo !\n\n> I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).\n\nWorks for me.\n\n> Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.\n\n+1 to degree. However having a \"degree\" method is a bit of a lie given that the data structure of IncidenceStructure is not at all meant to compute the degree of points... Unless we cache it ?\n\nNathann",
    "created_at": "2014-06-27T08:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214891",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Yo !

> I propose to remove tDesign and have `IncidenceStructure` (in `incidence_structure.py`) and set `BlockDesign = IncidenceStructure` as an alias (in `block_design.py`).

Works for me.

> Handbook definition I.1.5. If it is not standard I can change it. To me, `degree` looks more natural.

+1 to degree. However having a "degree" method is a bit of a lie given that the data structure of IncidenceStructure is not at all meant to compute the degree of points... Unless we cache it ?

Nathann



---

archive/issue_comments_214892.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThere is right now the possibility of having repeated elements in the blocks. The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?\n\nVincent",
    "created_at": "2014-06-27T08:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214892",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

There is right now the possibility of having repeated elements in the blocks. The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?

Vincent



---

archive/issue_comments_214893.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYo !\n\n> There is right now the possibility of having repeated elements in the blocks.\n\n`>_<`\n\n> The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?\n\nLet's remove this. It does not appear in what is commonly accepted as an incidence structure. Those things are meant to be sets.\n\nNathann",
    "created_at": "2014-06-27T08:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214893",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Yo !

> There is right now the possibility of having repeated elements in the blocks.

`>_<`

> The `block_design_checker(binary=True)` answers if it is. It is used nowhere... what should we do with that?

Let's remove this. It does not appear in what is commonly accepted as an incidence structure. Those things are meant to be sets.

Nathann



---

archive/issue_comments_214894.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAnother question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n\n```\nsage: S3_9 = designs.steiner_triple_system(9)\nsage: S3_9.is_t_design(return_parameters=True)\n(True, [2, 9, 3, 1])\n\nsage: blocks = designs.steiner_quadruple_system(8)\nsage: S8 = designs.IncidenceStructure(8, blocks)\nsage: S8.is_t_design(return_parameters=True)\n(True, [3, 8, 4, 1])\n```",
    "created_at": "2014-06-27T08:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214894",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest

```
sage: S3_9 = designs.steiner_triple_system(9)
sage: S3_9.is_t_design(return_parameters=True)
(True, [2, 9, 3, 1])

sage: blocks = designs.steiner_quadruple_system(8)
sage: S8 = designs.IncidenceStructure(8, blocks)
sage: S8.is_t_design(return_parameters=True)
(True, [3, 8, 4, 1])
```



---

archive/issue_comments_214895.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYo !\n\n> Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n\nJust because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.\n\nBy the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without \"knowing\" the value of `t`. There is no such thing as \"the largest t such that a design is a `t`-design.\n\nNathann",
    "created_at": "2014-06-27T08:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214895",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Yo !

> Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest

Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.

By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without "knowing" the value of `t`. There is no such thing as "the largest t such that a design is a `t`-design.

Nathann



---

archive/issue_comments_214896.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@nathanncohen](#comment:21):\n> Yo !\n> \n> > Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest\n\n> \n> Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.\n> \n> By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without \"knowing\" the value of `t`. There is no such thing as \"the largest t such that a design is a `t`-design.\n\nWhy not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n\n```\nlambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n```\n(Handbook theorem II.4.8)\n\nI think that we should forbid lambda=0, that's all.",
    "created_at": "2014-06-27T08:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214896",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@nathanncohen](#comment:21):
> Yo !
> 
> > Another question: why steiner triple systems are incidence structure but quadruple ones are tuples of tuples? It is ugly in the doctest

> 
> Just because I hate classes. You can make them BlockDesign if you like, Dima will be happy too.
> 
> By the way, `is_t_design` is wrong as it is written. Turns out that you cannot write this function without "knowing" the value of `t`. There is no such thing as "the largest t such that a design is a `t`-design.

Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 

```
lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
```
(Handbook theorem II.4.8)

I think that we should forbid lambda=0, that's all.



---

archive/issue_comments_214897.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n> Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n> \n> ```\n> lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n> ```\n> (Handbook theorem II.4.8)\n> \n> I think that we should forbid lambda=0, that's all.\n\nHmmmmmm... Makes total sense, sorry `O_o`\n\nNathann",
    "created_at": "2014-06-27T08:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214897",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

> Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 
> 
> ```
> lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
> ```
> (Handbook theorem II.4.8)
> 
> I think that we should forbid lambda=0, that's all.

Hmmmmmm... Makes total sense, sorry `O_o`

Nathann



---

archive/issue_comments_214898.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAlso, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?\n\nNathann",
    "created_at": "2014-06-27T09:12:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214898",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?

Nathann



---

archive/issue_comments_214899.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nathanncohen](#comment:24):\n> Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?\n> \n> Nathann\n\nI would love that!",
    "created_at": "2014-06-27T09:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214899",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nathanncohen](#comment:24):
> Also, what would you think of deprecating `dual_design` and `dual_incidence_structure` in favor of... `.dual()` ?
> 
> Nathann

I would love that!



---

archive/issue_comments_214900.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAlso, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`\n\nNathann",
    "created_at": "2014-06-27T09:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214900",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`

Nathann



---

archive/issue_comments_214901.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nathanncohen](#comment:26):\n> Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`\n\nmight be the `SageObject`. I can remove the inheritance.",
    "created_at": "2014-06-27T09:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214901",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nathanncohen](#comment:26):
> Also, do you know where on earth `IncidenceStructure.args`, `IncidenceStructure.keywords` and `IncidenceStructure.func` come from ? `O_O;;;;`

might be the `SageObject`. I can remove the inheritance.



---

archive/issue_comments_214902.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nathanncohen](#comment:23):\n> > Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with \n> > \n> > ```\n> > lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).\n> > ```\n> > (Handbook theorem II.4.8)\n> > \n> > I think that we should forbid lambda=0, that's all.\n\n> \n> Hmmmmmm... Makes total sense, sorry `O_o`\n\nAnd actually:\n- a design whose blocks have all the same lenght is a 0-design\n- a 0-design for which each point has the same degree is a 1-design\n\nI should modify the function to take care of that...",
    "created_at": "2014-06-27T09:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214902",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nathanncohen](#comment:23):
> > Why not? It is well defined as soon as `t` is assumed to be smaller than the block size. Note that if you have a t-(v,k,lambda) design it is also a s-(v,k,lambda_s) design with 
> > 
> > ```
> > lambda_s = lambda binomial(v-s,t-s) / binomial(k-s,t-s).
> > ```
> > (Handbook theorem II.4.8)
> > 
> > I think that we should forbid lambda=0, that's all.

> 
> Hmmmmmm... Makes total sense, sorry `O_o`

And actually:
- a design whose blocks have all the same lenght is a 0-design
- a 0-design for which each point has the same degree is a 1-design

I should modify the function to take care of that...



---

archive/issue_comments_214903.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> might be the `SageObject`. I can remove the inheritance.\n\nGood idea ! It will also remove these 9 functions we don't need \n\n```\nSageObject.category    SageObject.dump        SageObject.mro         SageObject.reset_name  SageObject.version     \nSageObject.db          SageObject.dumps       SageObject.rename      SageObject.save        \n```\n\nNathann",
    "created_at": "2014-06-27T09:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214903",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

> might be the `SageObject`. I can remove the inheritance.

Good idea ! It will also remove these 9 functions we don't need 

```
SageObject.category    SageObject.dump        SageObject.mro         SageObject.reset_name  SageObject.version     
SageObject.db          SageObject.dumps       SageObject.rename      SageObject.save        
```

Nathann



---

archive/issue_comments_214904.json:
```json
{
    "body": "Changed commit from **[`a5c4dbc`](https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf)** to **[`6cc8889`](https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e)**",
    "created_at": "2014-06-27T11:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a5c4dbc`](https://github.com/sagemath/sagetrac-mirror/commit/a5c4dbc9d1b77315d90dd3dd7a8ccea780f59ecf)** to **[`6cc8889`](https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e)**



---

archive/issue_comments_214905.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e\">6cc8889</a></td><td><code>trac #16553: reimplement IncidenceStructure</code></td></tr></table>\n",
    "created_at": "2014-06-27T11:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e">6cc8889</a></td><td><code>trac #16553: reimplement IncidenceStructure</code></td></tr></table>




---

archive/issue_comments_214906.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nHi Nathann,\n\nAs I completely rewrote the infrastructure it does not make much sense to have separated commits. I decided to implement a `t_design_parameters` (as a cached method) and a `is_t_design`. It is much more readable that way.\n\nI am not sure what to do with the caching of degrees... for sure we do not want to do it on startup. And for now, as the datastructure is still in basic state I vote for keeping it the way it is. If we will cache it in the future then we should remove the `@cached_method` on `t_design_parameters`.\n\nNeeeeeds review!\n\nVincent",
    "created_at": "2014-06-27T11:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214906",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Hi Nathann,

As I completely rewrote the infrastructure it does not make much sense to have separated commits. I decided to implement a `t_design_parameters` (as a cached method) and a `is_t_design`. It is much more readable that way.

I am not sure what to do with the caching of degrees... for sure we do not want to do it on startup. And for now, as the datastructure is still in basic state I vote for keeping it the way it is. If we will cache it in the future then we should remove the `@cached_method` on `t_design_parameters`.

Neeeeeds review!

Vincent



---

archive/issue_events_236429.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T11:12:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236429"
}
```



---

archive/issue_events_236430.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T11:12:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236430"
}
```



---

archive/issue_comments_214907.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036\">3e01acb</a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a\">81b9448</a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432\">0fa89d5</a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b\">828ff22</a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705\">8ebd21b</a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154\">0175134</a></td><td><code>trac #16347: doc + simplifications</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d799820bff6235af85b2974a6e29fc602771238\">0d79982</a></td><td><code>trac #16446: merge #16347</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6559eec9b16565ca1ab3f3469455f011305f1819\">6559eec</a></td><td><code>trac #16446: fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16a0c5db37a0d4e92b74e0f60a6586eea6eb3e50\">16a0c5d</a></td><td><code>trac #16446: use deprecated_function_alias instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76\">9243ef1</a></td><td><code>trac #16553: merge #16446</code></td></tr></table>\n",
    "created_at": "2014-06-27T11:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036">3e01acb</a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a">81b9448</a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432">0fa89d5</a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b">828ff22</a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705">8ebd21b</a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154">0175134</a></td><td><code>trac #16347: doc + simplifications</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d799820bff6235af85b2974a6e29fc602771238">0d79982</a></td><td><code>trac #16446: merge #16347</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6559eec9b16565ca1ab3f3469455f011305f1819">6559eec</a></td><td><code>trac #16446: fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16a0c5db37a0d4e92b74e0f60a6586eea6eb3e50">16a0c5d</a></td><td><code>trac #16446: use deprecated_function_alias instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76">9243ef1</a></td><td><code>trac #16553: merge #16446</code></td></tr></table>




---

archive/issue_comments_214908.json:
```json
{
    "body": "Changed commit from **[`6cc8889`](https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e)** to **[`9243ef1`](https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76)**",
    "created_at": "2014-06-27T11:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6cc8889`](https://github.com/sagemath/sagetrac-mirror/commit/6cc8889f344f5cefb72ed123190838b25487ce4e)** to **[`9243ef1`](https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76)**



---

archive/issue_comments_214909.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nthere was small conflicts with #16446 so I did the merge.",
    "created_at": "2014-06-27T11:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214909",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

there was small conflicts with #16446 so I did the merge.



---

archive/issue_comments_214910.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nFirst passe review:\n\n- Deprecated argument for `BlockDesign(test=...)`\n- `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy\n- `is_block_design` -> `t_design_parameters` O_o ??? `is_t_design` ?\n- Why remove `OA_to_projective_plane` ?\n- Why this ?\n\n```\n-    A 3-design::\n-\n-        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))\n-        sage: D.is_block_design()\n-        (True, [3, 32, 4, 1])\n```\n\n- lines `t_design_parameters` with an optional flag ? Why ?\n\n- WHy this ?\n\n```\n-        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)\n-        sage: BD.is_block_design()         # optional - gap_packages (design package)\n-        (True, [5, 12, 6, 1])\n```\n\n- `IncidenceStructure(matrix)` broken ?\n\n- function that builds *and* incidence structure from a matrix\n\n- The doc of IncidenceStructure needs an INPUT block. It is useless to have one\n  in `__init__`, nobody sees it and it does not appear in the html doc.\n\n- \"point -- the points\" is not very informative. Especially when you handle\n  integers or iterables.\n\n- Instead of doing\n\n```\n+            for i in range(b):\n+                for j in range(v):\n+                    if not M[j,i].is_zero():\n+                        blocks[i].append(j)\n```\n\n  You can use matrix methods, like rows() columns() dans their to_dictionary()\n  function (you get the nonzero entries easily)\n\n\n- `self.points() == other.points() and self.blocks() == other.blocks()` :\n  compare private variables immediately, possibly avoids a copy\n\n- What is the point of `__ne__` when you have `__eq__` ?\n\n- `points()` and `blocks()` for the classes I am implementing I thought we\n  should make them COPY the data instead of return it immediately by default,\n  otherwise the users can change what is inside of them. With a `copy=False`\n  flag to prevent this. What do you think ?\n\n- replication_number -> degree ?\n\n- intersection_number -> needs a definition\n\n- intersection_number -> use itertools.combination\n\n- `Note that the dual of a block design may not be a block design.` --> ?\n\n- `replication_number`, `intersection_number`, `degrees` --> another ticket. By\n  the way, the implementation of `degrees` is ridiculous. Think of the\n  algorithmics behind instead of using fancy \"reduce\" functions.\n\n- `is_t_design` and `t_design_parameters` should be the same function. Let's\n  just have optional `t,v,k,l` parameters in `is_t_design`.\n\nNathann",
    "created_at": "2014-06-27T12:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214910",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>

First passe review:

- Deprecated argument for `BlockDesign(test=...)`
- `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy
- `is_block_design` -> `t_design_parameters` O_o ??? `is_t_design` ?
- Why remove `OA_to_projective_plane` ?
- Why this ?

```
-    A 3-design::
-
-        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))
-        sage: D.is_block_design()
-        (True, [3, 32, 4, 1])
```

- lines `t_design_parameters` with an optional flag ? Why ?

- WHy this ?

```
-        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)
-        sage: BD.is_block_design()         # optional - gap_packages (design package)
-        (True, [5, 12, 6, 1])
```

- `IncidenceStructure(matrix)` broken ?

- function that builds *and* incidence structure from a matrix

- The doc of IncidenceStructure needs an INPUT block. It is useless to have one
  in `__init__`, nobody sees it and it does not appear in the html doc.

- "point -- the points" is not very informative. Especially when you handle
  integers or iterables.

- Instead of doing

```
+            for i in range(b):
+                for j in range(v):
+                    if not M[j,i].is_zero():
+                        blocks[i].append(j)
```

  You can use matrix methods, like rows() columns() dans their to_dictionary()
  function (you get the nonzero entries easily)


- `self.points() == other.points() and self.blocks() == other.blocks()` :
  compare private variables immediately, possibly avoids a copy

- What is the point of `__ne__` when you have `__eq__` ?

- `points()` and `blocks()` for the classes I am implementing I thought we
  should make them COPY the data instead of return it immediately by default,
  otherwise the users can change what is inside of them. With a `copy=False`
  flag to prevent this. What do you think ?

- replication_number -> degree ?

- intersection_number -> needs a definition

- intersection_number -> use itertools.combination

- `Note that the dual of a block design may not be a block design.` --> ?

- `replication_number`, `intersection_number`, `degrees` --> another ticket. By
  the way, the implementation of `degrees` is ridiculous. Think of the
  algorithmics behind instead of using fancy "reduce" functions.

- `is_t_design` and `t_design_parameters` should be the same function. Let's
  just have optional `t,v,k,l` parameters in `is_t_design`.

Nathann



---

archive/issue_events_236431.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-27T12:13:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236431"
}
```



---

archive/issue_events_236432.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-27T12:13:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236432"
}
```



---

archive/issue_comments_214911.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0883515673f74d1f1dfa067081d96f82f2d2deaa\">0883515</a></td><td><code>trac #16553: reviewer comments 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7d3e7993b807a1fba2be7d36639cde42ed33de6\">c7d3e79</a></td><td><code>trac #16553: better degree implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099\">428113c</a></td><td><code>trac #16553: remove t_design_parameters</code></td></tr></table>\n",
    "created_at": "2014-06-27T14:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214911",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0883515673f74d1f1dfa067081d96f82f2d2deaa">0883515</a></td><td><code>trac #16553: reviewer comments 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7d3e7993b807a1fba2be7d36639cde42ed33de6">c7d3e79</a></td><td><code>trac #16553: better degree implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099">428113c</a></td><td><code>trac #16553: remove t_design_parameters</code></td></tr></table>




---

archive/issue_comments_214912.json:
```json
{
    "body": "Changed commit from **[`9243ef1`](https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76)** to **[`428113c`](https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099)**",
    "created_at": "2014-06-27T14:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9243ef1`](https://github.com/sagemath/sagetrac-mirror/commit/9243ef16bf0e7ad800bca41fa6d5001042859d76)** to **[`428113c`](https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099)**



---

archive/issue_comments_214913.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI adressed the issues you mentioned. I only answer to those for which there was a problem\n\n> - `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy\n\ndone. But it is not clear to me:\n- are we allowed to modify the output of `blocks`?\n- are we allowed to modify the output of `__iter__`?\n\nIf both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n\n> - Why remove `OA_to_projective_plane` ?\n\nSorry, I should have said this: it was *completely* broken!!\n\n> - Why this ?\n> \n> ```\n> -    A 3-design::\n> -\n> -        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))\n> -        sage: D.is_block_design()\n> -        (True, [3, 32, 4, 1])\n> ```\n\nIt has nothing to do here (in the doc of `AffineGeometryDesign`).\n\n> - Why this ?\n> \n> ```\n> -        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)\n> -        sage: BD.is_block_design()         # optional - gap_packages (design package)\n> -        (True, [5, 12, 6, 1])\n> ```\n\nThe same test above is copied I guess 5 times all over the place. \n\n> - What is the point of `__ne__` when you have `__eq__` ?\n\nIt is not automatically set up to `not __eq__`. You should learn your python\n\n```\nsage: class A(object):\n....:     def __eq__(self, other):\n....:         return True\n....:     \nsage: a = A()\nsage: b = A()\nsage: a == b\nTrue\nsage: a != b\nTrue\n```\n \n> - `IncidenceStructure(matrix)` broken ?\n\nIt was. Now if the input is a matrix there is a check\n\n> - replication_number -> degree ?\n\nremoved, it was equivalent to .degrees(1)\n\n> - intersection_number -> needs a definition\n> - intersection_number -> use itertools.combination\n\nremoved, it was equivalent to .degrees(2)\n\n> - `replication_number`, `intersection_number`, `degrees` --> another ticket. By\n>   the way, the implementation of `degrees` is ridiculous. Think of the\n>   algorithmics behind instead of using fancy \"reduce\" functions.\n\ndegrees can not be in another commit since it is used in `.is_t_design`. I\nimplemented a more reasonable version (but a bit ugly because of the cached_method\nover an iterator...)\n\nVincent",
    "created_at": "2014-06-27T14:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214913",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

I adressed the issues you mentioned. I only answer to those for which there was a problem

> - `_relabel_bibd(BalancedIncompleteBlockDesign(N,k).blocks(),N)` remove `.blocks()`, avoids a copy

done. But it is not clear to me:
- are we allowed to modify the output of `blocks`?
- are we allowed to modify the output of `__iter__`?

If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).

> - Why remove `OA_to_projective_plane` ?

Sorry, I should have said this: it was *completely* broken!!

> - Why this ?
> 
> ```
> -    A 3-design::
> -
> -        sage: D = IncidenceStructure(range(32),designs.steiner_quadruple_system(32))
> -        sage: D.is_block_design()
> -        (True, [3, 32, 4, 1])
> ```

It has nothing to do here (in the doc of `AffineGeometryDesign`).

> - Why this ?
> 
> ```
> -        sage: BD = designs.WittDesign(12)  # optional - gap_packages (design package)
> -        sage: BD.is_block_design()         # optional - gap_packages (design package)
> -        (True, [5, 12, 6, 1])
> ```

The same test above is copied I guess 5 times all over the place. 

> - What is the point of `__ne__` when you have `__eq__` ?

It is not automatically set up to `not __eq__`. You should learn your python

```
sage: class A(object):
....:     def __eq__(self, other):
....:         return True
....:     
sage: a = A()
sage: b = A()
sage: a == b
True
sage: a != b
True
```
 
> - `IncidenceStructure(matrix)` broken ?

It was. Now if the input is a matrix there is a check

> - replication_number -> degree ?

removed, it was equivalent to .degrees(1)

> - intersection_number -> needs a definition
> - intersection_number -> use itertools.combination

removed, it was equivalent to .degrees(2)

> - `replication_number`, `intersection_number`, `degrees` --> another ticket. By
>   the way, the implementation of `degrees` is ridiculous. Think of the
>   algorithmics behind instead of using fancy "reduce" functions.

degrees can not be in another commit since it is used in `.is_t_design`. I
implemented a more reasonable version (but a bit ugly because of the cached_method
over an iterator...)

Vincent



---

archive/issue_comments_214914.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nYo !\n\n> done. But it is not clear to me:\n> - are we allowed to modify the output of `blocks`?\n> - are we allowed to modify the output of `__iter__`?\n> \n> If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n\nThe point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.\n\nFor `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.\n\nIdeally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.\n\nWe can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.\n\n> Sorry, I should have said this: it was *completely* broken!!\n\nAnd it wasn't used anywhere ? Why on earth did we write this in the first place ? `O_o`\n\n> It has nothing to do here (in the doc of `AffineGeometryDesign`).\n\nOkay\n\n> The same test above is copied I guess 5 times all over the place. \n\nOkay.\n\nThose two things are the kind of stuff that is pretty hard to find out while looking at the diff file unless you explain it....\n\n> > - `IncidenceStructure(matrix)` broken ?\n\n> \n> It was. Now if the input is a matrix there is a check\n\nOkayyy...\n\n> degrees can not be in another commit since it is used in `.is_t_design`.\n\nThis function was already implemented before.\n\nNathann",
    "created_at": "2014-06-27T14:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214914",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

Yo !

> done. But it is not clear to me:
> - are we allowed to modify the output of `blocks`?
> - are we allowed to modify the output of `__iter__`?
> 
> If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).

The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.

For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.

Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.

We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.

> Sorry, I should have said this: it was *completely* broken!!

And it wasn't used anywhere ? Why on earth did we write this in the first place ? `O_o`

> It has nothing to do here (in the doc of `AffineGeometryDesign`).

Okay

> The same test above is copied I guess 5 times all over the place. 

Okay.

Those two things are the kind of stuff that is pretty hard to find out while looking at the diff file unless you explain it....

> > - `IncidenceStructure(matrix)` broken ?

> 
> It was. Now if the input is a matrix there is a check

Okayyy...

> degrees can not be in another commit since it is used in `.is_t_design`.

This function was already implemented before.

Nathann



---

archive/issue_comments_214915.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nIt all looks good to me, thanks for all the work ! There is only this `degrees` thing to solve now. I don't believe that we should have such a function. The \"degree\" is usually defined for a point. You can define it for larger things, but certainly not make it the default... Especially when you don't have a way to compute the degree of a vertex..\n\nI mean.. Really, that's an internal function ...\n\nNathann",
    "created_at": "2014-06-27T14:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214915",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:40" align="right">comment:40</div>

It all looks good to me, thanks for all the work ! There is only this `degrees` thing to solve now. I don't believe that we should have such a function. The "degree" is usually defined for a point. You can define it for larger things, but certainly not make it the default... Especially when you don't have a way to compute the degree of a vertex..

I mean.. Really, that's an internal function ...

Nathann



---

archive/issue_comments_214916.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAbout `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.\n\nAbout `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.\n\nNathann",
    "created_at": "2014-06-27T15:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214916",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:41" align="right">comment:41</div>

About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.

About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.

Nathann



---

archive/issue_comments_214917.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nBy the way I do not get what you want to do with this \"degrees\" function. The work was already done in the previous version of this function. Why did you break it into a \"degrees\" function ?\n\nThat's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?\n\nNathann",
    "created_at": "2014-06-27T15:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214917",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">comment:42</div>

By the way I do not get what you want to do with this "degrees" function. The work was already done in the previous version of this function. Why did you break it into a "degrees" function ?

That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?

Nathann



---

archive/issue_comments_214918.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@nathanncohen](#comment:39):\n> Yo !\n> \n> > done. But it is not clear to me:\n> > - are we allowed to modify the output of `blocks`?\n> > - are we allowed to modify the output of `__iter__`?\n> > \n> > If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).\n\n> \n> The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.\n> \n> For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.\n> \n> Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.\n> \n> We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.\n\nEasiest way: store everything as tuple of tuples. Is it ok for you?\n\nReplying to [@nathanncohen](#comment:41):\n> About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.\n> \n> About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.\n\nagreed. I will modify that.\n\nReplying to [@nathanncohen](#comment:42):\n> By the way I do not get what you want to do with this \"degrees\" function. The work was already done in the previous version of this function. Why did you break it into a \"degrees\" function ?\n\nI thought it might be useful to have degrees. But on the other hand, you are right, it is not very nice within this datastructure.\n \n> That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?\n\nIt was badly implemented. You can cut the last loop on `t` quickly most of the time.\n\nVincent",
    "created_at": "2014-06-27T15:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214918",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@nathanncohen](#comment:39):
> Yo !
> 
> > done. But it is not clear to me:
> > - are we allowed to modify the output of `blocks`?
> > - are we allowed to modify the output of `__iter__`?
> > 
> > If both answers are yes, then there are copy anyway (I did not implement the copy=False idea).

> 
> The point is that we cannot cache any answer unless the design is immutable. Then, if it is immutable we can do things like store the blocks internally as tuples. This way we can write `__iter__` by returning the blocks directly, and they will not be modified by the user.
> 
> For `.blocks()`, we can (by default) return a copy of them or (if the user asks) return the thing directly.
> 
> Ideally, we could have `copy=True/False` arguments in the constructor and in `blocks()`. This way, if the user (=us, the developpers) say `copy=False` it means that we know that we are doing and that no copy occurs.
> 
> We can also do this when we compute a design without this class wrapping, then return the design. We can set `copy=False` and return the new design as we know that nobody else will modify the lists afterwards.

Easiest way: store everything as tuple of tuples. Is it ok for you?

Replying to [@nathanncohen](#comment:41):
> About `_degree_iterator(self):` : I have no idea of what this function does, there is absolutely no documentation.
> 
> About `_t_design_parameters` and `is_t_design` : if I want to know whether my design is a 2-design, I sure as hell don't want Sage to beging enumerating 5-tuples, even if my design is a 5-design.

agreed. I will modify that.

Replying to [@nathanncohen](#comment:42):
> By the way I do not get what you want to do with this "degrees" function. The work was already done in the previous version of this function. Why did you break it into a "degrees" function ?

I thought it might be useful to have degrees. But on the other hand, you are right, it is not very nice within this datastructure.
 
> That's why it is good to explain what you do in the commits. I mean. Yeah, why did you break this function ? What was wrong with it ?

It was badly implemented. You can cut the last loop on `t` quickly most of the time.

Vincent



---

archive/issue_comments_214919.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n> Easiest way: store everything as tuple of tuples. Is it ok for you?\n\nYeah yeah but it would be nice to not HAVE to copy stuff if we don't want to... I hate classes `T_T`\n\n> It was badly implemented. You can cut the last loop on `t` quickly most of the time.\n\nIsn't it possible to just fix that ?..\n\nNathann",
    "created_at": "2014-06-27T15:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214919",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

> Easiest way: store everything as tuple of tuples. Is it ok for you?

Yeah yeah but it would be nice to not HAVE to copy stuff if we don't want to... I hate classes `T_T`

> It was badly implemented. You can cut the last loop on `t` quickly most of the time.

Isn't it possible to just fix that ?..

Nathann



---

archive/issue_comments_214920.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531\">d697009</a></td><td><code>trac #16553: make everything tuples and hide _degree stuff</code></td></tr></table>\n",
    "created_at": "2014-06-27T16:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214920",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531">d697009</a></td><td><code>trac #16553: make everything tuples and hide _degree stuff</code></td></tr></table>




---

archive/issue_comments_214921.json:
```json
{
    "body": "Changed commit from **[`428113c`](https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099)** to **[`d697009`](https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531)**",
    "created_at": "2014-06-27T16:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214921",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`428113c`](https://github.com/sagemath/sagetrac-mirror/commit/428113c0bef095a97189239435c6fb4a92dbe099)** to **[`d697009`](https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531)**



---

archive/issue_comments_214922.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHi Nathann,\n\nEverything are now tuples of tuples. I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.\n\nVincent",
    "created_at": "2014-06-27T16:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214922",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Hi Nathann,

Everything are now tuples of tuples. I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.

Vincent



---

archive/issue_events_236433.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T16:37:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236433"
}
```



---

archive/issue_events_236434.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T16:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236434"
}
```



---

archive/issue_comments_214923.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n> Everything are now tuples of tuples.\n\nWHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? \n\nWhy not only what belongs to a mutable class or is cached ? \n\nThis does not maky ANY sense :\n\n```\nself._points = tuple(range(v))\n```\n\nWhy are you converting this to a tuple given that you created it yourself ? Nobody will change it !\n\n> I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.\n\nTell me where.\n\nNathann",
    "created_at": "2014-06-27T16:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214923",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:48" align="right">comment:48</div>

> Everything are now tuples of tuples.

WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? 

Why not only what belongs to a mutable class or is cached ? 

This does not maky ANY sense :

```
self._points = tuple(range(v))
```

Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !

> I do not know how to do cleaner for `is_t_design` rather than having three cached method. If you see let me know. The previous version was broken in several places.

Tell me where.

Nathann



---

archive/issue_comments_214924.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from [comment:42](#comment:42).\n\nNathann",
    "created_at": "2014-06-27T16:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214924",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:49" align="right">comment:49</div>

I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from [comment:42](#comment:42).

Nathann



---

archive/issue_events_236435.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T16:54:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236435"
}
```



---

archive/issue_events_236436.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T16:54:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236436"
}
```



---

archive/issue_comments_214925.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@nathanncohen](#comment:49):\n> I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from [comment:42](#comment:42).\n\nThis one is a `0-(4,0,3)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[],[],[]])\nsage: I.is_block_design()\n(False, [0, 0, 0, 0])\n```\nAnd this one is a `0-(4,1,2)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[0],[1]])\nsage: I.is_block_design()\nFalse\n```\nAnd this one is a `1-(4,1,1)` design\n\n```\nsage: I = IncidenceStructure(range(4), [[0],[1],[2],[3]])\nsage: I.is_block_design()\n(False, [0, 0, 0, 0])\n```\n\nI broke it into several pieces in order to allow an argument `t` to the function. But I agree that comparing to the old version I can do much better with the degree stuff...\n\nVincent",
    "created_at": "2014-06-27T16:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214925",
    "user": "https://github.com/videlec"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@nathanncohen](#comment:49):
> I mean : tell me where the function which is implemented in the last release of Sage is broken. And why you broke it into several functions, i.e. the question from [comment:42](#comment:42).

This one is a `0-(4,0,3)` design

```
sage: I = IncidenceStructure(range(4), [[],[],[]])
sage: I.is_block_design()
(False, [0, 0, 0, 0])
```
And this one is a `0-(4,1,2)` design

```
sage: I = IncidenceStructure(range(4), [[0],[1]])
sage: I.is_block_design()
False
```
And this one is a `1-(4,1,1)` design

```
sage: I = IncidenceStructure(range(4), [[0],[1],[2],[3]])
sage: I.is_block_design()
(False, [0, 0, 0, 0])
```

I broke it into several pieces in order to allow an argument `t` to the function. But I agree that comparing to the old version I can do much better with the degree stuff...

Vincent



---

archive/issue_comments_214926.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nYo !\n\n> This one is a `0-(4,0,3)` design\n\n>\n> And this one is a `0-(4,1,2)` design\n>\n> And this one is a `1-(4,1,1)` design\n\n....\n\nWell, that's hardly a problem, is it ? Handling the trivial cases is usually done separately at the beginning of the function\n\n> I broke it into several pieces in order to allow an argument `t` to the function.\n\n....\n\nWhat about this ?..\n\n```\n-        for t in range(2,min(v,k+1)):\n+        for t in (range(2,min(v,k+1)) if t is None else [t]):\n```\n\nNathann",
    "created_at": "2014-06-27T16:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214926",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:51" align="right">comment:51</div>

Yo !

> This one is a `0-(4,0,3)` design

>
> And this one is a `0-(4,1,2)` design
>
> And this one is a `1-(4,1,1)` design

....

Well, that's hardly a problem, is it ? Handling the trivial cases is usually done separately at the beginning of the function

> I broke it into several pieces in order to allow an argument `t` to the function.

....

What about this ?..

```
-        for t in range(2,min(v,k+1)):
+        for t in (range(2,min(v,k+1)) if t is None else [t]):
```

Nathann



---

archive/issue_comments_214927.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@nathanncohen](#comment:48):\n> > Everything are now tuples of tuples.\n\n> \n> WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? \n> \n> Why not only what belongs to a mutable class or is cached ? \n> \n> This does not maky ANY sense :\n> \n> ```\n> self._points = tuple(range(v))\n> ```\n> \n> Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !\n\nand then\n\n```\nsage: BD = designs.IncidenceStructure(4)\nsage: BD.points().append(19)\nsage: BD.points()\n[0, 1, 2, 3, 19]\n```\nShould we do a copy each time somebody asked for points?",
    "created_at": "2014-06-27T17:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214927",
    "user": "https://github.com/videlec"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@nathanncohen](#comment:48):
> > Everything are now tuples of tuples.

> 
> WHYYYYYYYYYYYYYYYYYYYYY everything ?????? Even `incomplete_orthogonal_array` ? WHy ???? And why steiner triple systems too ???? 
> 
> Why not only what belongs to a mutable class or is cached ? 
> 
> This does not maky ANY sense :
> 
> ```
> self._points = tuple(range(v))
> ```
> 
> Why are you converting this to a tuple given that you created it yourself ? Nobody will change it !

and then

```
sage: BD = designs.IncidenceStructure(4)
sage: BD.points().append(19)
sage: BD.points()
[0, 1, 2, 3, 19]
```
Should we do a copy each time somebody asked for points?



---

archive/issue_comments_214928.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n> and then\n> \n> ```\n> sage: BD = designs.IncidenceStructure(4)\n> sage: BD.points().append(19)\n> sage: BD.points()\n> [0, 1, 2, 3, 19]\n> ```\n> Should we do a copy each time somebody asked for points?\n\nThat's hardly a problem if we do a copy for blocks anyway. Plus one can directly access `._points` to avoid that. But agreed, it's not a very bad problem anyway.\n\nNathann",
    "created_at": "2014-06-27T17:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214928",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:53" align="right">comment:53</div>

> and then
> 
> ```
> sage: BD = designs.IncidenceStructure(4)
> sage: BD.points().append(19)
> sage: BD.points()
> [0, 1, 2, 3, 19]
> ```
> Should we do a copy each time somebody asked for points?

That's hardly a problem if we do a copy for blocks anyway. Plus one can directly access `._points` to avoid that. But agreed, it's not a very bad problem anyway.

Nathann



---

archive/issue_comments_214929.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0\">b51512d</a></td><td><code>trac #16553: less stupid implementation of _t_design_parameters</code></td></tr></table>\n",
    "created_at": "2014-06-27T17:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214929",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0">b51512d</a></td><td><code>trac #16553: less stupid implementation of _t_design_parameters</code></td></tr></table>




---

archive/issue_comments_214930.json:
```json
{
    "body": "Changed commit from **[`d697009`](https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531)** to **[`b51512d`](https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0)**",
    "created_at": "2014-06-27T17:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d697009`](https://github.com/sagemath/sagetrac-mirror/commit/d69700920609cd6112d2496b8858f94da3642531)** to **[`b51512d`](https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0)**



---

archive/issue_comments_214931.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHi Nathann,\n\nSorry, I was being stupid... With the last commit, it is back to normal.\n\nI still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n\n```\ndef make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n    ....\n```\nbut I prefer the current version. Better idea?\n\nEDIT: possibility, have only one parameter in `is_t_design`. But I think that it is very cool to have all of them available.\n\nVincent",
    "created_at": "2014-06-27T17:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214931",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

Hi Nathann,

Sorry, I was being stupid... With the last commit, it is back to normal.

I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":

```
def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
    ....
```
but I prefer the current version. Better idea?

EDIT: possibility, have only one parameter in `is_t_design`. But I think that it is very cool to have all of them available.

Vincent



---

archive/issue_events_236437.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T17:24:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236437"
}
```



---

archive/issue_events_236438.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-27T17:24:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236438"
}
```



---

archive/issue_comments_214932.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nHello !\n\n> I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n> \n> ```\n> def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n>     ....\n> ```\n> but I prefer the current version. Better idea?\n\nWhat do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?\n\nIt would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?\n\nIt is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that \"t must be defined if lambda is defined\". I don't think anybody would complain.\n\nIt can be implemented anyway if needed, it will just be ugly.\n\nNathann",
    "created_at": "2014-06-27T17:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214932",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:57" align="right">comment:57</div>

Hello !

> I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":
> 
> ```
> def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
>     ....
> ```
> but I prefer the current version. Better idea?

What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?

It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?

It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that "t must be defined if lambda is defined". I don't think anybody would complain.

It can be implemented anyway if needed, it will just be ugly.

Nathann



---

archive/issue_comments_214933.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@nathanncohen](#comment:57):\n> Hello !\n> \n> > I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an \"output wrapper\":\n> > \n> > ```\n> > def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):\n> >     ....\n> > ```\n> > but I prefer the current version. Better idea?\n\n> \n> What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?\n> It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?\n\nI would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n\n```\nif m.is_even():\n    print \"m is even\"\n```\nbad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n\n> It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that \"t must be defined if lambda is defined\". I don't think anybody would complain.\n> \n> It can be implemented anyway if needed, it will just be ugly.\n\nIt is implemented, not very ugly and not very useful!\n\nVincent",
    "created_at": "2014-06-27T17:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214933",
    "user": "https://github.com/videlec"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@nathanncohen](#comment:57):
> Hello !
> 
> > I still have a `_t_design_parameters(self,t)` (that only depends on `t`) and a `is_t_design(self,t,v,k,l)`. We can always make only one function using an "output wrapper":
> > 
> > ```
> > def make_the_output_the_user_want(t,v,k,l,vv,tt,kk,ll,return_parameters):
> >     ....
> > ```
> > but I prefer the current version. Better idea?

> 
> What do you think of having only a `is_t_design(t=None,v=None,k=None,l=None)` ?
> It would return pairs `(a_boolean,(t,v,k,l))`, such that the parameter is equal to the parameter given as input unless it was equal to `None` ?

I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:

```
if m.is_even():
    print "m is even"
```
bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).

> It is easy to guess `v,k`, you already did the job for `t`, and as I don't think anybody will want to compute `B.is_t_design(l=395)` I guess we can say that "t must be defined if lambda is defined". I don't think anybody would complain.
> 
> It can be implemented anyway if needed, it will just be ugly.

It is implemented, not very ugly and not very useful!

Vincent



---

archive/issue_comments_214934.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n> I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n> \n> ```\n> if m.is_even():\n>     print \"m is even\"\n> ```\n> bad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n\n`return_parameters=True`...\n\n> It is implemented, not very ugly and not very useful!\n\nWhat about all the stuff you converted to tuples ?..\n\nNathann",
    "created_at": "2014-06-27T17:39:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214934",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:59" align="right">comment:59</div>

> I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:
> 
> ```
> if m.is_even():
>     print "m is even"
> ```
> bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).

`return_parameters=True`...

> It is implemented, not very ugly and not very useful!

What about all the stuff you converted to tuples ?..

Nathann



---

archive/issue_comments_214935.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@nathanncohen](#comment:59):\n> > I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:\n> > \n> > ```\n> > if m.is_even():\n> >     print \"m is even\"\n> > ```\n> > bad luck: `.is_even()` return a pair \"(boolean, m divided by 2)\" (remember the concrete example in #16464).\n\n> \n> `return_parameters=True`...\n> \n> > It is implemented, not very ugly and not very useful!\n\n> \n> What about all the stuff you converted to tuples ?..\n\nI do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n\nIf you want to propose some code, do it! I am lost!\n\nVincent",
    "created_at": "2014-06-27T17:43:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214935",
    "user": "https://github.com/videlec"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@nathanncohen](#comment:59):
> > I would like it for sure if its purpose was only to return a boolean! A function that starts with `is` must return a boolean, otherwise it is a mess:
> > 
> > ```
> > if m.is_even():
> >     print "m is even"
> > ```
> > bad luck: `.is_even()` return a pair "(boolean, m divided by 2)" (remember the concrete example in #16464).

> 
> `return_parameters=True`...
> 
> > It is implemented, not very ugly and not very useful!

> 
> What about all the stuff you converted to tuples ?..

I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.

If you want to propose some code, do it! I am lost!

Vincent



---

archive/issue_comments_214936.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\n> I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n\nI never had anything again `return_parameters` flags `O_o`\n\nThat's what I always do when I need a test function which can also return useful information it already computed...\n\n> If you want to propose some code, do it! I am lost!\n\nAhahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???\n\nDo you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?\n\nNathann",
    "created_at": "2014-06-27T17:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214936",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:61" align="right">comment:61</div>

> I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.

I never had anything again `return_parameters` flags `O_o`

That's what I always do when I need a test function which can also return useful information it already computed...

> If you want to propose some code, do it! I am lost!

Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???

Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?

Nathann



---

archive/issue_comments_214937.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@nathanncohen](#comment:61):\n> > I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.\n\n> \n> I never had anything again `return_parameters` flags `O_o`\n> \n> That's what I always do when I need a test function which can also return useful information it already computed...\n> \n> > If you want to propose some code, do it! I am lost!\n\n> \n> Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???\n> \n> Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?\n\nfine.",
    "created_at": "2014-06-27T17:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214937",
    "user": "https://github.com/videlec"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@nathanncohen](#comment:61):
> > I do not understand your point, in [comment:58] you proposed `is_t_design(self,t,v,k,l)`. Now, you want to keep the `return_parameters=False/True`. Fine, but it will be ugly if you make only one function.

> 
> I never had anything again `return_parameters` flags `O_o`
> 
> That's what I always do when I need a test function which can also return useful information it already computed...
> 
> > If you want to propose some code, do it! I am lost!

> 
> Ahahah. And how do you think I am ? Your branch has something like 8 commits that undo each other, and you still haven't answered important things like : why do you convert everything to tuples ???
> 
> Do you mind if I rewrite history just a bit and merge all your commits into one, on top of #16466 ?

fine.



---

archive/issue_comments_214938.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\n> fine.\n\nIt is located at `public/16553v2`\n\nNathann",
    "created_at": "2014-06-27T18:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214938",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:63" align="right">comment:63</div>

> fine.

It is located at `public/16553v2`

Nathann



---

archive/issue_comments_214939.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@nathanncohen](#comment:63):\n> > fine.\n\n> \n> It is located at `public/16553v2`\n\nThanks. What should we do for `is_t_design`?",
    "created_at": "2014-06-27T18:05:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214939",
    "user": "https://github.com/videlec"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@nathanncohen](#comment:63):
> > fine.

> 
> It is located at `public/16553v2`

Thanks. What should we do for `is_t_design`?



---

archive/issue_comments_214940.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\n> Thanks. What should we do for `is_t_design`?\n\nWell the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?\n\nAlso, what about all the tuple stuff ? I think I asked this question 3 times already.\n\nNathann",
    "created_at": "2014-06-27T18:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214940",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:65" align="right">comment:65</div>

> Thanks. What should we do for `is_t_design`?

Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?

Also, what about all the tuple stuff ? I think I asked this question 3 times already.

Nathann



---

archive/issue_comments_214941.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@nathanncohen](#comment:65):\n> > Thanks. What should we do for `is_t_design`?\n\n> \n> Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?\n\nHmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.\n\n> Also, what about all the tuple stuff ? I think I asked this question 3 times already.\n\nYes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?\n\nVincent",
    "created_at": "2014-06-27T18:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214941",
    "user": "https://github.com/videlec"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@nathanncohen](#comment:65):
> > Thanks. What should we do for `is_t_design`?

> 
> Well the interface is nice, so why don't we just move the code of `_t_design_parameters` into it ?

Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.

> Also, what about all the tuple stuff ? I think I asked this question 3 times already.

Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?

Vincent



---

archive/issue_comments_214942.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\n> Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.\n\nOkay I will give it a try then.\n\n> Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?\n\nAbout  incomplete_orthogonal_array` and steiner triple systems, for instance ?...\n\nNathann",
    "created_at": "2014-06-27T18:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214942",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:67" align="right">comment:67</div>

> Hmmmm. There are plenty of `if condition: return blah` in `_t_design_parameters`. Duplicating the code in `is_t_design` as many times would be awful.

Okay I will give it a try then.

> Yes, yes, yes. Either we hold immutable stuff or we copy on output. Note that I introduced the keyword copy which allows you to feed it with list. What do you want?

About  incomplete_orthogonal_array` and steiner triple systems, for instance ?...

Nathann



---

archive/issue_comments_214943.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nOh, steiner triple systems are probably incidence structures already, so that's okay.\n\nNathann",
    "created_at": "2014-06-27T18:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214943",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:68" align="right">comment:68</div>

Oh, steiner triple systems are probably incidence structures already, so that's okay.

Nathann



---

archive/issue_comments_214944.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nBTW I am working on the `is_t_design` function right now.\n\nNathann",
    "created_at": "2014-06-27T18:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214944",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:69" align="right">comment:69</div>

BTW I am working on the `is_t_design` function right now.

Nathann



---

archive/issue_comments_214945.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@nathanncohen](#comment:69):\n> BTW I am working on the `is_t_design` function right now.\n\nYes. This is what I understod and I am working on #16535",
    "created_at": "2014-06-27T18:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214945",
    "user": "https://github.com/videlec"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@nathanncohen](#comment:69):
> BTW I am working on the `is_t_design` function right now.

Yes. This is what I understod and I am working on #16535



---

archive/issue_comments_214946.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nDId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?\n\nI'm removing all this t=0,1 shit. t>=2.\n\nNathann",
    "created_at": "2014-06-27T19:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214946",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:71" align="right">comment:71</div>

DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?

I'm removing all this t=0,1 shit. t>=2.

Nathann



---

archive/issue_comments_214947.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@nathanncohen](#comment:71):\n> DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?\n> \n> I'm removing all this t=0,1 shit. t>=2.\n\nAll right.\n\nVincent",
    "created_at": "2014-06-27T19:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214947",
    "user": "https://github.com/videlec"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@nathanncohen](#comment:71):
> DId you notice that ALL incidence structures are 0-designs ? And so that `.is_t_design()` ALWAYS return True ?
> 
> I'm removing all this t=0,1 shit. t>=2.

All right.

Vincent



---

archive/issue_comments_214948.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nThe code at `public/16553v2` works for all cases. Et ca m'a completement niqu\u00e9 la soir\u00e9e. Deux heures a me payer des cas de merde de t=0 et t=1 dont tout le monde se branle.\n\nNathann",
    "created_at": "2014-06-27T20:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214948",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:73" align="right">comment:73</div>

The code at `public/16553v2` works for all cases. Et ca m'a completement niqué la soirée. Deux heures a me payer des cas de merde de t=0 et t=1 dont tout le monde se branle.

Nathann



---

archive/issue_comments_214949.json:
```json
{
    "body": "Changed commit from **[`b51512d`](https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0)** to **[`ad9f241`](https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315)**",
    "created_at": "2014-06-27T20:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214949",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`b51512d`](https://github.com/sagemath/sagetrac-mirror/commit/b51512d642a603ea91d9358ea3d7877f184938d0)** to **[`ad9f241`](https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315)**



---

archive/issue_comments_214950.json:
```json
{
    "body": "Changed branch from **[public/16553](https://github.com/sagemath/sagetrac-mirror/tree/public/16553)** to **[public/16553v2](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v2)**",
    "created_at": "2014-06-27T20:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214950",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[public/16553](https://github.com/sagemath/sagetrac-mirror/tree/public/16553)** to **[public/16553v2](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v2)**



---

archive/issue_comments_214951.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff72248b89697ebc63ce170e600b3b7764c7c178\">ff72248</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315\">ad9f241</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>\n",
    "created_at": "2014-06-27T20:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214951",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:74"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff72248b89697ebc63ce170e600b3b7764c7c178">ff72248</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315">ad9f241</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>




---

archive/issue_comments_214952.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nOkay, three questions :\n\n- Should BlockDesign be deprecated ?\n- is `self._degrees_cache` used anywhere ? If not, remove it\n- `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix\n- `is_simple()` does not work when the input is not copied and not necessarily sorted.\n\nNathann",
    "created_at": "2014-06-27T20:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214952",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:75" align="right">comment:75</div>

Okay, three questions :

- Should BlockDesign be deprecated ?
- is `self._degrees_cache` used anywhere ? If not, remove it
- `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix
- `is_simple()` does not work when the input is not copied and not necessarily sorted.

Nathann



---

archive/issue_comments_214953.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nI will add commit to remove ten lines I had forgotten to remove in my last commit.\n\nNathann",
    "created_at": "2014-06-27T20:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214953",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:76" align="right">comment:76</div>

I will add commit to remove ten lines I had forgotten to remove in my last commit.

Nathann



---

archive/issue_comments_214954.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860\">b8012e7</a></td><td><code>trac #16553: Forgotten lines</code></td></tr></table>\n",
    "created_at": "2014-06-27T20:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214954",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860">b8012e7</a></td><td><code>trac #16553: Forgotten lines</code></td></tr></table>




---

archive/issue_comments_214955.json:
```json
{
    "body": "Changed commit from **[`ad9f241`](https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315)** to **[`b8012e7`](https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860)**",
    "created_at": "2014-06-27T20:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214955",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ad9f241`](https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315)** to **[`b8012e7`](https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860)**



---

archive/issue_comments_214956.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nAnd of course you need to review my code too.\n\nNathann",
    "created_at": "2014-06-27T20:34:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214956",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:78" align="right">comment:78</div>

And of course you need to review my code too.

Nathann



---

archive/issue_comments_214957.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@nathanncohen](#comment:75):\n> Okay, three questions :\n> \n> - Should BlockDesign be deprecated ?\n\nIt is cool to have as an alias for incidence structure. If you find confusing to have an alias, then yes we should deprecate it.\n\n> - is `self._degrees_cache` used anywhere ? If not, remove it\n\nNot anymore. I will.\n\n> - `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix\n\nYes, because of the reordering of the columns. But we can avoid reordering the columns and keep the matrix. But then, matrices are mutable... hopefully, we can do `m.set_immutable()` as soon as we use it.\n\n> - `is_simple()` does not work when the input is not copied and not necessarily sorted.\n\nAnd the implementation is stupid, if the blocks are sorted, one would do\n\n```\nB = self._blocks\nreturn any(B[i] == B[i+1] for i in xrange(len(B)-1))\n```\n\n\nAnd... Haaaa.... it is very bad to reorder the blocks:\n\n```\nsage: D = designs.IncidenceStructure(2, [[0]])\nsage: D == D.dual().dual()\nFalse\n```\nTaking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n\nVincent",
    "created_at": "2014-06-27T20:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214957",
    "user": "https://github.com/videlec"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@nathanncohen](#comment:75):
> Okay, three questions :
> 
> - Should BlockDesign be deprecated ?

It is cool to have as an alias for incidence structure. If you find confusing to have an alias, then yes we should deprecate it.

> - is `self._degrees_cache` used anywhere ? If not, remove it

Not anymore. I will.

> - `self._incidence_matrix` is set to None even when the Incidence Structure has been defined from the incidence matrix

Yes, because of the reordering of the columns. But we can avoid reordering the columns and keep the matrix. But then, matrices are mutable... hopefully, we can do `m.set_immutable()` as soon as we use it.

> - `is_simple()` does not work when the input is not copied and not necessarily sorted.

And the implementation is stupid, if the blocks are sorted, one would do

```
B = self._blocks
return any(B[i] == B[i+1] for i in xrange(len(B)-1))
```


And... Haaaa.... it is very bad to reorder the blocks:

```
sage: D = designs.IncidenceStructure(2, [[0]])
sage: D == D.dual().dual()
False
```
Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")

Vincent



---

archive/issue_comments_214958.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nYo !\n\n> Yes, because of the reordering of the columns.\n\nOk !\n\n> And the implementation is stupid, if the blocks are sorted, one would do\n\nYep.\n\n> And... Haaaa.... it is very bad to reorder the blocks:\n> Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n\nYou should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.\n\nAccept that.\n\nNathann",
    "created_at": "2014-06-27T21:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214958",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:80" align="right">comment:80</div>

Yo !

> Yes, because of the reordering of the columns.

Ok !

> And the implementation is stupid, if the blocks are sorted, one would do

Yep.

> And... Haaaa.... it is very bad to reorder the blocks:
> Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")

You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.

Accept that.

Nathann



---

archive/issue_comments_214959.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@nathanncohen](#comment:80):\n> Yo !\n> \n> > Yes, because of the reordering of the columns.\n\n> \n> Ok !\n> \n> > And the implementation is stupid, if the blocks are sorted, one would do\n\n> Yep.\n> \n> > And... Haaaa.... it is very bad to reorder the blocks:\n> > Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question \"sorting each block\")\n\n> \n> You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.\n> \n> Accept that.\n\nNo. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)! But, for the sake of that ticket let say that I do accept that.",
    "created_at": "2014-06-27T21:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214959",
    "user": "https://github.com/videlec"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@nathanncohen](#comment:80):
> Yo !
> 
> > Yes, because of the reordering of the columns.

> 
> Ok !
> 
> > And the implementation is stupid, if the blocks are sorted, one would do

> Yep.
> 
> > And... Haaaa.... it is very bad to reorder the blocks:
> > Taking dual should just be matrix transposition!! One question: what do you think of **not** reordering the blocks? (which is a different from the question "sorting each block")

> 
> You should stop letting this function decide of how we should implement everything else. An incidence structure is isomorphic to its double dual and that's cool. We have more things to care about than making the vertex set equal to the set of blocks when we take the dual : anyway we cannot do that without losing the ability to iterate on the elements of a block.
> 
> Accept that.

No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)! But, for the sake of that ticket let say that I do accept that.



---

archive/issue_comments_214960.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\n> No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)!\n\nMathematicians in book say \"let us take a bijection between two things\". But they are the same guys who, in front of the computer, want their vertices to be correctly labelled.\n\n> But, for the sake of that ticket let say that I do accept that.\n\nExcellent ! `:-P`\n\nNathann",
    "created_at": "2014-06-27T21:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214960",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:82" align="right">comment:82</div>

> No. It is more than isomorphic. There is a canonical isomorphism (that is lost because of the reordering)!

Mathematicians in book say "let us take a bijection between two things". But they are the same guys who, in front of the computer, want their vertices to be correctly labelled.

> But, for the sake of that ticket let say that I do accept that.

Excellent ! `:-P`

Nathann



---

archive/issue_comments_214961.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nBy the way we will have an `IncidenceStructure.relabel` function someday.",
    "created_at": "2014-06-28T08:30:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214961",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:83" align="right">comment:83</div>

By the way we will have an `IncidenceStructure.relabel` function someday.



---

archive/issue_comments_214962.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nBy the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?\n\nNathann",
    "created_at": "2014-06-28T08:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214962",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:84" align="right">comment:84</div>

By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?

Nathann



---

archive/issue_comments_214963.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@nathanncohen](#comment:84):\n> By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?\n\nDoes not work.\n\nAre you done with your changes?",
    "created_at": "2014-06-28T08:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214963",
    "user": "https://github.com/videlec"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@nathanncohen](#comment:84):
> By the way this ticket was supposed to deal with ground sets different from `{0,...,n-1}`. What happened with that ?

Does not work.

Are you done with your changes?



---

archive/issue_comments_214964.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\n> Does not work.\n\nI see.\n\n> Are you done with your changes?\n\nWhich changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?\n\nNathann",
    "created_at": "2014-06-28T08:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214964",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:86" align="right">comment:86</div>

> Does not work.

I see.

> Are you done with your changes?

Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?

Nathann



---

archive/issue_comments_214965.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,4 @@\n In #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:\n-- to deal with other ground sets than integers (but with a fixed bijection `points <-> {0, ..., v-1}`)\n - to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)\n - ... (maybe more)\n \n``````\n",
    "created_at": "2014-06-28T08:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214965",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,4 @@
 In #16552 we discovered that `IncidenceStructure` is not adapted to deal with projective spaces. The class should be able:
-- to deal with other ground sets than integers (but with a fixed bijection `points <-> {0, ..., v-1}`)
 - to be a base class for inheritance to create other designs (like `GDD` or specialized one such as `DesarguesianProjectivePlane`)
 - ... (maybe more)
 
``````




---

archive/issue_comments_214966.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@nathanncohen](#comment:86):\n> > Does not work.\n\n> I see.\n> \n> > Are you done with your changes?\n\n> \n> Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?\n\nBut Sage does not start. Is that what you want?\n\nI will start from where it is!\n\nVincent",
    "created_at": "2014-06-28T08:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214966",
    "user": "https://github.com/videlec"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@nathanncohen](#comment:86):
> > Does not work.

> I see.
> 
> > Are you done with your changes?

> 
> Which changes ? The `.is_t_design` function works, it's all I had to do, wasn't it ?

But Sage does not start. Is that what you want?

I will start from where it is!

Vincent



---

archive/issue_comments_214967.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nArg. I hadn't noticed that `_t_design_parameters` was an alias of something\n\n```\n parameters = deprecated_function_alias(16553, _t_design_parameters)\n```\n\nNathann",
    "created_at": "2014-06-28T08:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214967",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:89" align="right">comment:89</div>

Arg. I hadn't noticed that `_t_design_parameters` was an alias of something

```
 parameters = deprecated_function_alias(16553, _t_design_parameters)
```

Nathann



---

archive/issue_comments_214968.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nI can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?\n\nNathann",
    "created_at": "2014-06-28T08:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214968",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:90" align="right">comment:90</div>

I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?

Nathann



---

archive/issue_comments_214969.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@nathanncohen](#comment:90):\n> I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?\n\nYes. I started again working on it.",
    "created_at": "2014-06-28T08:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214969",
    "user": "https://github.com/videlec"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@nathanncohen](#comment:90):
> I can add the old code, why not ?.. It is a deprecated function after all. Are you already working on this or can I do it ?

Yes. I started again working on it.



---

archive/issue_comments_214970.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nOkay. I was about to copy/paste the old `parameters` function and deprecate it.\n\nNathann",
    "created_at": "2014-06-28T09:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214970",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:92" align="right">comment:92</div>

Okay. I was about to copy/paste the old `parameters` function and deprecate it.

Nathann



---

archive/issue_comments_214971.json:
```json
{
    "body": "Changed commit from **[`b8012e7`](https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860)** to **[`9be78f4`](https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76)**",
    "created_at": "2014-06-28T09:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214971",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8012e7`](https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860)** to **[`9be78f4`](https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76)**



---

archive/issue_comments_214972.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76\">9be78f4</a></td><td><code>trac #16553: make it work with points other than integers</code></td></tr></table>\n",
    "created_at": "2014-06-28T09:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214972",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76">9be78f4</a></td><td><code>trac #16553: make it work with points other than integers</code></td></tr></table>




---

archive/issue_events_236439.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T09:50:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236439"
}
```



---

archive/issue_events_236440.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T09:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236440"
}
```



---

archive/issue_comments_214973.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nHMmm... You can't make equality depend on the ordering of the blocks.. Perhaps this copy=True on input is not very easy to work with `:-/`\n\nNathann",
    "created_at": "2014-06-28T09:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214973",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:95" align="right">comment:95</div>

HMmm... You can't make equality depend on the ordering of the blocks.. Perhaps this copy=True on input is not very easy to work with `:-/`

Nathann



---

archive/issue_comments_214974.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nAlso, I wonder if it is a good idea to store the \"labelled blocks\" or if we should work with blocks on `0,...,n-1` and have dictionary to translate stuff when needed.. `O_o`\n\nI have been bitten once or twice by the time it took to hash vertex labels in graphs `-_-`\n\nNathann",
    "created_at": "2014-06-28T10:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214974",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:96" align="right">comment:96</div>

Also, I wonder if it is a good idea to store the "labelled blocks" or if we should work with blocks on `0,...,n-1` and have dictionary to translate stuff when needed.. `O_o`

I have been bitten once or twice by the time it took to hash vertex labels in graphs `-_-`

Nathann



---

archive/issue_comments_214975.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nAlso, you can't sort something that you did not create yourself. If the \"labels\" on the points are something like sets (i.e. not totally ordered) then you can't assume that blocks are totally ordered either, and so you can't sort them either.\n\nNathann",
    "created_at": "2014-06-28T10:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214975",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:97" align="right">comment:97</div>

Also, you can't sort something that you did not create yourself. If the "labels" on the points are something like sets (i.e. not totally ordered) then you can't assume that blocks are totally ordered either, and so you can't sort them either.

Nathann



---

archive/issue_comments_214976.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\n- It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n- For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n\n```\ndef _nonzero_positions_by_row(self, copy=True)\ndef _nonzero_positions_by_column(self, copy=True)\n```\nIt is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n\nWhat do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n\nVincent",
    "created_at": "2014-06-28T10:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214976",
    "user": "https://github.com/videlec"
}
```

<div id="comment:98" align="right">comment:98</div>

- It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.
- For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods

```
def _nonzero_positions_by_row(self, copy=True)
def _nonzero_positions_by_column(self, copy=True)
```
It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.

What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.

Vincent



---

archive/issue_comments_214977.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nYo !\n\n> - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n\n+1\n\n> - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n> \n> ```\n> def _nonzero_positions_by_row(self, copy=True)\n> def _nonzero_positions_by_column(self, copy=True)\n> ```\n> It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n> \n> What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n\nI don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..\n\nThe best data structure for this is a bipartite graph, isn't it ?\n\nBut even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...\n\nWhat do you think ?\n\nNathann\n\nNathann",
    "created_at": "2014-06-28T10:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214977",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:99" align="right">comment:99</div>

Yo !

> - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.

+1

> - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods
> 
> ```
> def _nonzero_positions_by_row(self, copy=True)
> def _nonzero_positions_by_column(self, copy=True)
> ```
> It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.
> 
> What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.

I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..

The best data structure for this is a bipartite graph, isn't it ?

But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...

What do you think ?

Nathann

Nathann



---

archive/issue_comments_214978.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@nathanncohen](#comment:99):\n> Yo !\n> \n> > - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.\n\n> \n> +1\n> \n> > - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods\n> > \n> > ```\n> > def _nonzero_positions_by_row(self, copy=True)\n> > def _nonzero_positions_by_column(self, copy=True)\n> > ```\n> > It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.\n> > \n> > What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.\n\n> \n> I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..\n\nRight.\n\n> The best data structure for this is a bipartite graph, isn't it ?\n\nIt is the same as a binary matrix...\n\n> But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...\n> \n> What do you think ?\n\nTrue, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?\n\nVincent",
    "created_at": "2014-06-28T10:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214978",
    "user": "https://github.com/videlec"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@nathanncohen](#comment:99):
> Yo !
> 
> > - It makes sense to translate everything on {0,...,n-1} internally. It will save a lot of pain.

> 
> +1
> 
> > - For the blocks we can put it into a fixed datastructure: i.e. a sparse incidence matrix (that way even the blocks are numbered). Sparse integer matrices have methods
> > 
> > ```
> > def _nonzero_positions_by_row(self, copy=True)
> > def _nonzero_positions_by_column(self, copy=True)
> > ```
> > It is a bit stupid for our purpose to use GMP integers... but at least these are fast methods.
> > 
> > What do you think of getting rid of the attribute `._blocks` and use only `._incidence_matrix`.

> 
> I don't like it, because I don't trust complicated datatypes. What do we earn by storing this as a matrix ? I expect it to be heavier (because it has to remember the '1' in each cell, it is not meant to be a binary matrix) and less practical (we iterate on the blocks all day long)..

Right.

> The best data structure for this is a bipartite graph, isn't it ?

It is the same as a binary matrix...

> But even then, I personally prefer simple data types. Otherwise we will constantly do work on list of lists, translate everything to a matrix/graph, then export everything to list of lists, then build another incidence structure ...
> 
> What do you think ?

True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?

Vincent



---

archive/issue_comments_214979.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nYo !\n\n> It is the same as a binary matrix...\n\nNot exactly. But anyway, a binary matrix is meant to be binary, while a Matrix isn't as far as I know.\n\n> True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?\n\nWhat is the problem ? If you translate the input to 0,...,n-1 anyway we never have any reason to accept what the users gives us without a copy, do we ? And so you can sort it as you want, given that it is your data and that you will never give it as it is to anybody else.\n\nNathann",
    "created_at": "2014-06-28T10:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214979",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:101" align="right">comment:101</div>

Yo !

> It is the same as a binary matrix...

Not exactly. But anyway, a binary matrix is meant to be binary, while a Matrix isn't as far as I know.

> True, but we have to fix the way it is stored, otherwise everything is broken (e.g. equality, `is_simple`). Let's go for sorted tuples of sorted tuples of integers and add a flag `do_not_copy_or_check_the_input_and_I_am_sure_that_it_is_what_I_want` in the constructor. Is that good for you?

What is the problem ? If you translate the input to 0,...,n-1 anyway we never have any reason to accept what the users gives us without a copy, do we ? And so you can sort it as you want, given that it is your data and that you will never give it as it is to anybody else.

Nathann



---

archive/issue_comments_214980.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24a7ef86afce119336547c24a1851bcc24d78acc\">24a7ef8</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1\">cebb061</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>\n",
    "created_at": "2014-06-28T16:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24a7ef86afce119336547c24a1851bcc24d78acc">24a7ef8</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1">cebb061</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>




---

archive/issue_comments_214981.json:
```json
{
    "body": "Changed commit from **[`9be78f4`](https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76)** to **[`cebb061`](https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1)**",
    "created_at": "2014-06-28T16:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214981",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9be78f4`](https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76)** to **[`cebb061`](https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1)**



---

archive/issue_comments_214982.json:
```json
{
    "body": "Changed commit from **[`cebb061`](https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1)** to **[`0741a69`](https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994)**",
    "created_at": "2014-06-28T16:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214982",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cebb061`](https://github.com/sagemath/sagetrac-mirror/commit/cebb0617ea30551ee1e1562e152d5da1068c6bb1)** to **[`0741a69`](https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994)**



---

archive/issue_comments_214983.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/102389e2cc5de8f6f22513042a69af7414aea175\">102389e</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994\">0741a69</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>\n",
    "created_at": "2014-06-28T16:33:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214983",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/102389e2cc5de8f6f22513042a69af7414aea175">102389e</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994">0741a69</a></td><td><code>trac #16553: is_t_design</code></td></tr></table>




---

archive/issue_comments_214984.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAll right,\n\nNow: \n- `._points` are the points\n- `._point_index` might be `None` or a correspondence between point and integers\n- `._blocks` is a sorted tuple of sorted blocks on {0, ..., v-1}\n(It is explained in the documentation)\n\nI also removed all other hidden attributes. All doctest pass, and doc builds.\n\n... needs review!\n\nVincent",
    "created_at": "2014-06-28T16:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214984",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

All right,

Now: 
- `._points` are the points
- `._point_index` might be `None` or a correspondence between point and integers
- `._blocks` is a sorted tuple of sorted blocks on {0, ..., v-1}
(It is explained in the documentation)

I also removed all other hidden attributes. All doctest pass, and doc builds.

... needs review!

Vincent



---

archive/issue_events_236441.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T16:35:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236441"
}
```



---

archive/issue_events_236442.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T16:35:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236442"
}
```



---

archive/issue_comments_214985.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPS: I slightly modified your commit since it broke the documentation.",
    "created_at": "2014-06-28T16:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214985",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

PS: I slightly modified your commit since it broke the documentation.



---

archive/issue_comments_214986.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n....................\n\nAnd how the hell am I supposed to see the differences ?\n\nNathann",
    "created_at": "2014-06-28T16:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214986",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

....................

And how the hell am I supposed to see the differences ?

Nathann



---

archive/issue_comments_214987.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n\n```\ngit diff 9be78f42a2e26008661462f6db66b5646849ee76 \\\n         0741a69bb10de397690869ad98140e085ddab994\n```",
    "created_at": "2014-06-28T16:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214987",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>


```
git diff 9be78f42a2e26008661462f6db66b5646849ee76 \
         0741a69bb10de397690869ad98140e085ddab994
```



---

archive/issue_comments_214988.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\n> \n> ```\n> git diff 9be78f42a2e26008661462f6db66b5646849ee76 0741a69bb10de397690869ad98140e085ddab994\n> ```\n\nGood. Use that to produce a third commit.\n\nNathann",
    "created_at": "2014-06-28T16:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214988",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:108" align="right">comment:108</div>

> 
> ```
> git diff 9be78f42a2e26008661462f6db66b5646849ee76 0741a69bb10de397690869ad98140e085ddab994
> ```

Good. Use that to produce a third commit.

Nathann



---

archive/issue_events_236443.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-28T16:39:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236443"
}
```



---

archive/issue_events_236444.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-28T16:39:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236444"
}
```



---

archive/issue_comments_214989.json:
```json
{
    "body": "Changed commit from **[`0741a69`](https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994)** to **[`dffcc4a`](https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a)**",
    "created_at": "2014-06-28T16:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0741a69`](https://github.com/sagemath/sagetrac-mirror/commit/0741a69bb10de397690869ad98140e085ddab994)** to **[`dffcc4a`](https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a)**



---

archive/issue_comments_214990.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff72248b89697ebc63ce170e600b3b7764c7c178\">ff72248</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315\">ad9f241</a></td><td><code>trac #16553: is_t_design</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860\">b8012e7</a></td><td><code>trac #16553: Forgotten lines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76\">9be78f4</a></td><td><code>trac #16553: make it work with points other than integers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a\">dffcc4a</a></td><td><code>trac #16553: reclean</code></td></tr></table>\n",
    "created_at": "2014-06-28T16:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214990",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff72248b89697ebc63ce170e600b3b7764c7c178">ff72248</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad9f241f36f033dc449703bad527b2a8497c0315">ad9f241</a></td><td><code>trac #16553: is_t_design</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8012e72038dffa51cc60b0af19283881dec2860">b8012e7</a></td><td><code>trac #16553: Forgotten lines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9be78f42a2e26008661462f6db66b5646849ee76">9be78f4</a></td><td><code>trac #16553: make it work with points other than integers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a">dffcc4a</a></td><td><code>trac #16553: reclean</code></td></tr></table>




---

archive/issue_events_236445.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T16:44:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236445"
}
```



---

archive/issue_events_236446.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T16:44:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236446"
}
```



---

archive/issue_comments_214991.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks",
    "created_at": "2014-06-28T16:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214991",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks



---

archive/issue_comments_214992.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat about [comment:95](#comment:95) ? If you make equality depend on the ordering, it may be broken when `copy=False`...",
    "created_at": "2014-06-28T16:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214992",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

What about [comment:95](#comment:95) ? If you make equality depend on the ordering, it may be broken when `copy=False`...



---

archive/issue_comments_214993.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI would say that the best is to sort the input even when `copy=False`, what do you think ? With a warning in the documentation of the `copy` argument of course, saying that the list/blocks will be reordered (and that the user should not touch that) ?...\n\nThis being said, the way equality is written it will still return false negatives as `[1,2,3] != (1,2,3)` ...\n\nNathann",
    "created_at": "2014-06-28T16:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214993",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

I would say that the best is to sort the input even when `copy=False`, what do you think ? With a warning in the documentation of the `copy` argument of course, saying that the list/blocks will be reordered (and that the user should not touch that) ?...

This being said, the way equality is written it will still return false negatives as `[1,2,3] != (1,2,3)` ...

Nathann



---

archive/issue_comments_214994.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOh, you removed \"copy\" in the next commit ....",
    "created_at": "2014-06-28T16:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214994",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Oh, you removed "copy" in the next commit ....



---

archive/issue_comments_214995.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYou add documentation for \"copy\" in the first commit, and remove it in the next.. This is really pleasant to review ...\n\nNathann",
    "created_at": "2014-06-28T16:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214995",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

You add documentation for "copy" in the first commit, and remove it in the next.. This is really pleasant to review ...

Nathann



---

archive/issue_comments_214996.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\ncomment:97\n\n```\nsage: a = Set([1,2]); b = Set([3,4])\nsage: IncidenceStructure([a,b],[]) == IncidenceStructure([b,a],[])\nFalse\n```",
    "created_at": "2014-06-28T17:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214996",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

comment:97

```
sage: a = Set([1,2]); b = Set([3,4])
sage: IncidenceStructure([a,b],[]) == IncidenceStructure([b,a],[])
False
```



---

archive/issue_comments_214997.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nShort of those comments it looks good !!\n\nTwo questions:\n\n- What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?\n\n- Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?\n\nToo bad that it is not very easy to have everything work with a \"copy\" argument `:-/`\n\nNathann",
    "created_at": "2014-06-28T17:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214997",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Short of those comments it looks good !!

Two questions:

- What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?

- Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?

Too bad that it is not very easy to have everything work with a "copy" argument `:-/`

Nathann



---

archive/issue_events_236447.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-28T17:19:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236447"
}
```



---

archive/issue_events_236448.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-28T17:19:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236448"
}
```



---

archive/issue_comments_214998.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nabout [comment:116]/[comment:97] and non-ordered stuff:\n- one possibility: we can avoid sorting the ground set and consider `[0,1,2]`, and `[2,0,1]` as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?\n\nabout [comment:117]:\n> - What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?\n\nno problem.\n \n> - Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?\n\nYou are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:\n\n```\ndef block_sizes(self):\n    self._block_sizes = map(len, self.blocks())\n    return self._block_sizes\n```\n\n> Too bad that it is not very easy to have everything work with a \"copy\" argument `:-/`\n\nAll right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n\nNot for this ticket\n- right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...",
    "created_at": "2014-06-28T17:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214998",
    "user": "https://github.com/videlec"
}
```

<div id="comment:118" align="right">comment:118</div>

about [comment:116]/[comment:97] and non-ordered stuff:
- one possibility: we can avoid sorting the ground set and consider `[0,1,2]`, and `[2,0,1]` as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?

about [comment:117]:
> - What about renaming `_point_index` to `_point_to_index` to make its purpose clearer ?

no problem.
 
> - Should `block_sizes` return `map(len,self._blocks)` or wrap them in a `set` ?

You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:

```
def block_sizes(self):
    self._block_sizes = map(len, self.blocks())
    return self._block_sizes
```

> Too bad that it is not very easy to have everything work with a "copy" argument `:-/`

All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.

Not for this ticket
- right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...



---

archive/issue_comments_214999.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nYo !\n\n> - one possibility: we can avoid sorting the ground set and consider [0,1,2], and [2,0,1] as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?\n\nNOnonono, saying that the order of the vertices matters for equality really isn't what one would expect ! But it isn't so bad to make equality test slower, is it ? I mean, does anybody use it for anything ? I wonder why such methods are even defined...\n\nJust to play it safe, we can rewrite this to relabel+convert to set the blocks of self and other before comparing them. It is slow but it is correct, and we can change the data structure later if it becomes a problem. Or use graphs as a data structure, as they do that already `:-PPP`\n\nI don't mind not having an equality test, but if there is one I want to be sure that it works as expected. Because otherwise I cannot complain constantly about #14019, and that's important to me `:-P`\n\n> You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:\n> \n> ```\n> def block_sizes(self):\n>     self._block_sizes = map(len, self.blocks())\n>     return self._block_sizes\n> ```\n\nGNIiiiiiiiiiiiiiiiiiii `>_<`\n\n> All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n\nWhat we can do is something like \"set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing\".\n\n> - right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...\n\nAhahahaah. Yeah.... Like a bipartite graph ? `:-P`\n\nNathann",
    "created_at": "2014-06-28T18:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-214999",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:119" align="right">comment:119</div>

Yo !

> - one possibility: we can avoid sorting the ground set and consider [0,1,2], and [2,0,1] as different sets. For blocks, we convert everything to tuple of integers and it is fine for them to do the comparison. What do you think?

NOnonono, saying that the order of the vertices matters for equality really isn't what one would expect ! But it isn't so bad to make equality test slower, is it ? I mean, does anybody use it for anything ? I wonder why such methods are even defined...

Just to play it safe, we can rewrite this to relabel+convert to set the blocks of self and other before comparing them. It is slow but it is correct, and we can change the data structure later if it becomes a problem. Or use graphs as a data structure, as they do that already `:-PPP`

I don't mind not having an equality test, but if there is one I want to be sure that it works as expected. Because otherwise I cannot complain constantly about #14019, and that's important to me `:-P`

> You are right, it is the way it was before. So I will put it back. And just for fun, here is the verbatim old implementation:
> 
> ```
> def block_sizes(self):
>     self._block_sizes = map(len, self.blocks())
>     return self._block_sizes
> ```

GNIiiiiiiiiiiiiiiiiiii `>_<`

> All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.

What we can do is something like "set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing".

> - right now the structure are immutable but it would makes sense to have mutable ones (that can be turn into immutable ones). For example, removing/adding blocks that contain a given point is a useful operation...

Ahahahaah. Yeah.... Like a bipartite graph ? `:-P`

Nathann



---

archive/issue_comments_215000.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nWhy aren't we using bipartite graph?\n\nReplying to [@nathanncohen](#comment:119):\n> > All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.\n\n> \n> What we can do is something like \"set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing\".\n\nCould you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?\n\nVincent",
    "created_at": "2014-06-28T18:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215000",
    "user": "https://github.com/videlec"
}
```

<div id="comment:120" align="right">comment:120</div>

Why aren't we using bipartite graph?

Replying to [@nathanncohen](#comment:119):
> > All right: I can put it back, but assume that the user feed the object with sorted tuples of tuples. It is not that complicated. Is that ok for you? I would like it to not waste my time with the constructor.

> 
> What we can do is something like "set 'copy=False' if you do not want the constructor to make a copy of your data, but know that it will be modified. Use this flag only if you will not use your data anymore afterwards, or if you know what you are doing".

Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?

Vincent



---

archive/issue_comments_215001.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\n> Why aren't we using bipartite graph?\n\nBecause I hate complicated data structure `T_T`\n\nI love lists.\n\n> Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?\n\nOh. I thought that we could store lists of lists in this case. I just hate tuple. Knowing that you have to copy the whole data (a list) to make it immutable (a tupple) horrifies me already.\n\nNathann",
    "created_at": "2014-06-28T18:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215001",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:121" align="right">comment:121</div>

> Why aren't we using bipartite graph?

Because I hate complicated data structure `T_T`

I love lists.

> Could you be more precise. We aim to store tuple of tuples of integers. What do you mean by modifying but not copying the data?

Oh. I thought that we could store lists of lists in this case. I just hate tuple. Knowing that you have to copy the whole data (a list) to make it immutable (a tupple) horrifies me already.

Nathann



---

archive/issue_comments_215002.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01\">7e829da</a></td><td><code>trac #16553: use list of lists + better equality</code></td></tr></table>\n",
    "created_at": "2014-06-28T19:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215002",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01">7e829da</a></td><td><code>trac #16553: use list of lists + better equality</code></td></tr></table>




---

archive/issue_comments_215003.json:
```json
{
    "body": "Changed commit from **[`dffcc4a`](https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a)** to **[`7e829da`](https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01)**",
    "created_at": "2014-06-28T19:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215003",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dffcc4a`](https://github.com/sagemath/sagetrac-mirror/commit/dffcc4a8118a8bc5d9dfa6c1ab1aabe7aaaaa25a)** to **[`7e829da`](https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01)**



---

archive/issue_comments_215004.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAll right, the commit message says it all. I also fixed the issue you mentioned.\n\nNeeds review!\n\nVincent",
    "created_at": "2014-06-28T19:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215004",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

All right, the commit message says it all. I also fixed the issue you mentioned.

Needs review!

Vincent



---

archive/issue_events_236449.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T19:51:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236449"
}
```



---

archive/issue_events_236450.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T19:51:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236450"
}
```



---

archive/issue_comments_215005.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHMmmmmmmm...\n\nWell, I'd say that it is good `O_O`\n\nAnother pass on the whole branch, and then ...\n\nNathann",
    "created_at": "2014-06-28T20:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215005",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

HMmmmmmmm...

Well, I'd say that it is good `O_O`

Another pass on the whole branch, and then ...

Nathann



---

archive/issue_comments_215006.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYo !\n\nIf you agree with this additional commit, you can switch to `positive_review` !\n\nNathann",
    "created_at": "2014-06-28T20:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215006",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yo !

If you agree with this additional commit, you can switch to `positive_review` !

Nathann



---

archive/issue_comments_215007.json:
```json
{
    "body": "Reviewer: **Nathann Cohen, Vincent Delecroix**",
    "created_at": "2014-06-28T20:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215007",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen, Vincent Delecroix**



---

archive/issue_comments_215008.json:
```json
{
    "body": "Changed commit from **[`7e829da`](https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01)** to **[`d15cc7e`](https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455)**",
    "created_at": "2014-06-28T20:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e829da`](https://github.com/sagemath/sagetrac-mirror/commit/7e829da2d0b30ced9cc25e32efa78ffd40f59d01)** to **[`d15cc7e`](https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455)**



---

archive/issue_comments_215009.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455\">d15cc7e</a></td><td><code>trac #16553: Review</code></td></tr></table>\n",
    "created_at": "2014-06-28T20:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215009",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455">d15cc7e</a></td><td><code>trac #16553: Review</code></td></tr></table>




---

archive/issue_comments_215010.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nGreat!!\n\nShould I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?",
    "created_at": "2014-06-28T20:59:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215010",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Great!!

Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?



---

archive/issue_comments_215011.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\n> Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?\n\nWhat for ? `O_o`\n\nNathann",
    "created_at": "2014-06-28T21:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215011",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:128" align="right">comment:128</div>

> Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?

What for ? `O_o`

Nathann



---

archive/issue_comments_215012.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@nathanncohen](#comment:128):\n> > Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?\n\n> \n> What for ? `O_o`\n\n- improve my skills with git rebase\n- have `git blame` do better job\n- simplification",
    "created_at": "2014-06-28T21:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215012",
    "user": "https://github.com/videlec"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@nathanncohen](#comment:128):
> > Should I rewrite the history since the global change on ext_rep.py/bibd.py is actually 0?

> 
> What for ? `O_o`

- improve my skills with git rebase
- have `git blame` do better job
- simplification



---

archive/issue_events_236451.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T23:32:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236451"
}
```



---

archive/issue_events_236452.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-28T23:32:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236452"
}
```



---

archive/issue_comments_215013.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nSame diff, better history... so I guess it is better.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b\">828ff22</a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705\">8ebd21b</a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154\">0175134</a></td><td><code>trac #16347: doc + simplifications</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d799820bff6235af85b2974a6e29fc602771238\">0d79982</a></td><td><code>trac #16446: merge #16347</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6559eec9b16565ca1ab3f3469455f011305f1819\">6559eec</a></td><td><code>trac #16446: fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16a0c5db37a0d4e92b74e0f60a6586eea6eb3e50\">16a0c5d</a></td><td><code>trac #16446: use deprecated_function_alias instead</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dc250afc93889e8bee051d0d2fc9ed07fae7ca6\">4dc250a</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd609fcef6ba2923a6659e7c2dd35edf828467cf\">bd609fc</a></td><td><code>trac #16553: is_t_design</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11994efa18b15a9a0330a0816c7aea24fb2bc498\">11994ef</a></td><td><code>trac #16553: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf\">a9f825c</a></td><td><code>trac #16553: doc fix</code></td></tr></table>\n",
    "created_at": "2014-06-28T23:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215013",
    "user": "https://github.com/videlec"
}
```

<div id="comment:0" align="right">comment:0</div>

Same diff, better history... so I guess it is better.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b">828ff22</a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705">8ebd21b</a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154">0175134</a></td><td><code>trac #16347: doc + simplifications</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d799820bff6235af85b2974a6e29fc602771238">0d79982</a></td><td><code>trac #16446: merge #16347</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6559eec9b16565ca1ab3f3469455f011305f1819">6559eec</a></td><td><code>trac #16446: fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16a0c5db37a0d4e92b74e0f60a6586eea6eb3e50">16a0c5d</a></td><td><code>trac #16446: use deprecated_function_alias instead</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dc250afc93889e8bee051d0d2fc9ed07fae7ca6">4dc250a</a></td><td><code>trac #16553: Clean IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd609fcef6ba2923a6659e7c2dd35edf828467cf">bd609fc</a></td><td><code>trac #16553: is_t_design</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11994efa18b15a9a0330a0816c7aea24fb2bc498">11994ef</a></td><td><code>trac #16553: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf">a9f825c</a></td><td><code>trac #16553: doc fix</code></td></tr></table>




---

archive/issue_comments_215014.json:
```json
{
    "body": "Changed branch from **[public/16553v2](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v2)** to **[public/16553v3](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v3)**",
    "created_at": "2014-06-28T23:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215014",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[public/16553v2](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v2)** to **[public/16553v3](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v3)**



---

archive/issue_comments_215015.json:
```json
{
    "body": "Changed commit from **[`d15cc7e`](https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455)** to **[`a9f825c`](https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf)**",
    "created_at": "2014-06-28T23:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215015",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`d15cc7e`](https://github.com/sagemath/sagetrac-mirror/commit/d15cc7eb29c85446655ec4f092583db9ec94b455)** to **[`a9f825c`](https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf)**



---

archive/issue_events_236453.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-29T01:31:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236453"
}
```



---

archive/issue_events_236454.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-29T01:31:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236454"
}
```



---

archive/issue_comments_215016.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n\n```\nsage -t --long src/sage/matroids/catalog.py\n**********************************************************************\nFile \"src/sage/matroids/catalog.py\", line 1349, in sage.matroids.catalog.Block_9_4\nFailed example:\n    BlockDesign(9, B).is_block_design()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.matroids.catalog.Block_9_4[5]>\", line 1, in <module>\n        BlockDesign(Integer(9), B).is_block_design()\n    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'\n**********************************************************************\nFile \"src/sage/matroids/catalog.py\", line 1376, in sage.matroids.catalog.Block_10_5\nFailed example:\n    BlockDesign(10, B).is_block_design()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.matroids.catalog.Block_10_5[5]>\", line 1, in <module>\n        BlockDesign(Integer(10), B).is_block_design()\n    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'\n**********************************************************************\n```",
    "created_at": "2014-06-29T01:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215016",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">comment:1</div>


```
sage -t --long src/sage/matroids/catalog.py
**********************************************************************
File "src/sage/matroids/catalog.py", line 1349, in sage.matroids.catalog.Block_9_4
Failed example:
    BlockDesign(9, B).is_block_design()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.matroids.catalog.Block_9_4[5]>", line 1, in <module>
        BlockDesign(Integer(9), B).is_block_design()
    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'
**********************************************************************
File "src/sage/matroids/catalog.py", line 1376, in sage.matroids.catalog.Block_10_5
Failed example:
    BlockDesign(10, B).is_block_design()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.matroids.catalog.Block_10_5[5]>", line 1, in <module>
        BlockDesign(Integer(10), B).is_block_design()
    AttributeError: 'IncidenceStructure' object has no attribute 'is_block_design'
**********************************************************************
```



---

archive/issue_comments_215017.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3\">e7a97ea</a></td><td><code>trac #16553: doc fix + deprecation is_block_design</code></td></tr></table>\n",
    "created_at": "2014-06-29T10:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3">e7a97ea</a></td><td><code>trac #16553: doc fix + deprecation is_block_design</code></td></tr></table>




---

archive/issue_comments_215018.json:
```json
{
    "body": "Changed commit from **[`a9f825c`](https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf)** to **[`e7a97ea`](https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3)**",
    "created_at": "2014-06-29T10:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215018",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9f825c`](https://github.com/sagemath/sagetrac-mirror/commit/a9f825c496c0ab9769ff55589764f0c7aea83eaf)** to **[`e7a97ea`](https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3)**



---

archive/issue_events_236455.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-29T10:05:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236455"
}
```



---

archive/issue_events_236456.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-29T10:05:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236456"
}
```



---

archive/issue_comments_215019.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22\">3c0dd71</a></td><td><code>trac #16553v3: change .points() -> .ground_set()</code></td></tr></table>\n",
    "created_at": "2014-06-29T10:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22">3c0dd71</a></td><td><code>trac #16553v3: change .points() -> .ground_set()</code></td></tr></table>




---

archive/issue_comments_215020.json:
```json
{
    "body": "Changed commit from **[`e7a97ea`](https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3)** to **[`3c0dd71`](https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22)**",
    "created_at": "2014-06-29T10:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215020",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e7a97ea`](https://github.com/sagemath/sagetrac-mirror/commit/e7a97ea3ca390627aed24693e5314568234dfdf3)** to **[`3c0dd71`](https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22)**



---

archive/issue_comments_215021.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAll right, final review needed!\n\nVincent",
    "created_at": "2014-06-29T10:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215021",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

All right, final review needed!

Vincent



---

archive/issue_comments_215022.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFunny. I would have expected `.points()` to appear more often in the code `:-)`\n\nNathann",
    "created_at": "2014-06-29T17:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215022",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Funny. I would have expected `.points()` to appear more often in the code `:-)`

Nathann



---

archive/issue_events_236457.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-29T19:24:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236457"
}
```



---

archive/issue_events_236458.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-29T19:24:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236458"
}
```



---

archive/issue_comments_215023.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nmake ptestlong + make doc-clean + make doc + make doc-pdf.\n\nAnd the latter failed during \"a tour of Sage' but that's only because other documents always require one thousand different languages to be installed I believe.\n\nGood !\n\nNathann",
    "created_at": "2014-06-29T19:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215023",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

make ptestlong + make doc-clean + make doc + make doc-pdf.

And the latter failed during "a tour of Sage' but that's only because other documents always require one thousand different languages to be installed I believe.

Good !

Nathann



---

archive/issue_events_236459.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-30T05:23:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236459"
}
```



---

archive/issue_events_236460.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-30T05:23:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236460"
}
```



---

archive/issue_comments_215024.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThere is another .points that was introduced in #16535",
    "created_at": "2014-06-30T05:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215024",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

There is another .points that was introduced in #16535



---

archive/issue_comments_215025.json:
```json
{
    "body": "Changed commit from **[`3c0dd71`](https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22)** to **[`51476ff`](https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b)**",
    "created_at": "2014-07-01T07:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215025",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c0dd71`](https://github.com/sagemath/sagetrac-mirror/commit/3c0dd71a1ecaf61af062ff7ddedf4e95f38d5b22)** to **[`51476ff`](https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b)**



---

archive/issue_comments_215026.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09a8a4b4f63600975f6e588218de7fac42676893\">09a8a4b</a></td><td><code>trac #16553: merge #16535</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e45f07a1cf983b4d91a4a607a3f8a72d4a66c1f\">8e45f07</a></td><td><code>trac #16553: deprecated alias for .points() + fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b\">51476ff</a></td><td><code>trac #16553: merge updated #16528</code></td></tr></table>\n",
    "created_at": "2014-07-01T07:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215026",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09a8a4b4f63600975f6e588218de7fac42676893">09a8a4b</a></td><td><code>trac #16553: merge #16535</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e45f07a1cf983b4d91a4a607a3f8a72d4a66c1f">8e45f07</a></td><td><code>trac #16553: deprecated alias for .points() + fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b">51476ff</a></td><td><code>trac #16553: merge updated #16528</code></td></tr></table>




---

archive/issue_comments_215027.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nNeeds review!\n\nVincent",
    "created_at": "2014-07-01T07:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215027",
    "user": "https://github.com/videlec"
}
```

<div id="comment:0" align="right">comment:0</div>

Needs review!

Vincent



---

archive/issue_events_236461.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-01T07:39:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236461"
}
```



---

archive/issue_events_236462.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-01T07:39:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236462"
}
```



---

archive/issue_events_236463.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-01T07:57:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236463"
}
```



---

archive/issue_events_236464.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-01T07:57:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236464"
}
```



---

archive/issue_comments_215028.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\napparently it does not apply on the latest release, the branch name's in red. Instead of merging tickets you should go back to `trac #16553v3: change .points() -> .ground_set()` and merge with beta5.\n\nNathann",
    "created_at": "2014-07-01T07:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215028",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

apparently it does not apply on the latest release, the branch name's in red. Instead of merging tickets you should go back to `trac #16553v3: change .points() -> .ground_set()` and merge with beta5.

Nathann



---

archive/issue_comments_215029.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52b71777445b45770ad8ebceeb73da791c7145ac\">52b7177</a></td><td><code>trac #16553: merge sage 6.3.beta5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb\">0698433</a></td><td><code>trac #16553: deprecated alias .points() + fix</code></td></tr></table>\n",
    "created_at": "2014-07-01T08:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215029",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52b71777445b45770ad8ebceeb73da791c7145ac">52b7177</a></td><td><code>trac #16553: merge sage 6.3.beta5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb">0698433</a></td><td><code>trac #16553: deprecated alias .points() + fix</code></td></tr></table>




---

archive/issue_comments_215030.json:
```json
{
    "body": "Changed commit from **[`51476ff`](https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b)** to **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**",
    "created_at": "2014-07-01T08:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51476ff`](https://github.com/sagemath/sagetrac-mirror/commit/51476ff0e94c0260dd7d13143b8c5f3bd390f95b)** to **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**



---

archive/issue_events_236465.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-01T08:07:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236465"
}
```



---

archive/issue_events_236466.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-01T08:07:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236466"
}
```



---

archive/issue_comments_215031.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor the tenth time ...",
    "created_at": "2014-07-01T08:19:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215031",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

For the tenth time ...



---

archive/issue_events_236467.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-01T08:19:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236467"
}
```



---

archive/issue_events_236468.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-01T08:19:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236468"
}
```



---

archive/issue_comments_215032.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nReplying to [@nathanncohen](#comment:144):\n> For the tenth time ...\n\nand the last... (I hope)",
    "created_at": "2014-07-01T08:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:145" align="right">comment:145</div>

Replying to [@nathanncohen](#comment:144):
> For the tenth time ...

and the last... (I hope)



---

archive/issue_events_236469.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-01T21:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236469"
}
```



---

archive/issue_events_236470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d3c2d6887a3d2903b8896a5c13b958e4aec72c08",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-01T21:55:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16553#event-236470"
}
```



---

archive/issue_comments_215033.json:
```json
{
    "body": "Changed branch from **[public/16553v3](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v3)** to **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**",
    "created_at": "2014-07-01T21:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16553",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16553#issuecomment-215033",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16553v3](https://github.com/sagemath/sagetrac-mirror/tree/public/16553v3)** to **[`0698433`](https://github.com/sagemath/sagetrac-mirror/commit/0698433258c4f863cc1585ece2065b5e4e1b41eb)**
