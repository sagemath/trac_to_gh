# Issue 16467: Unhiding in a fully hidden Doubly-Linked List

archive/issues_016230.json:
```json
{
    "body": "An error occurs when in a fully hidden Doubly-Linked List an element is unhidden. All elements that come after it will also be unhidden.\n\n```\nsage: l = sage.combinat.misc.DoublyLinkedList(xrange(5))\nsage: l.hide(0)\nsage: l.hide(1)\nsage: l.hide(2)\nsage: l.hide(3)\nsage: l.hide(4)\nsage: print l\nDoubly linked list of xrange(5): []\nsage: l.unhide(1)\nsage: print l\nDoubly linked list of xrange(5): [1, 2, 3, 4]\nsage: l.hide(1)\nsage: print l\nDoubly linked list of xrange(5): [2, 3, 4]\n```\n\nCC:  rudi jakobkroeker\n\nKeywords: doubly linked list unhide empty\n\nBranch: [u/foosterhof/ticket/16467](https://github.com/sagemath/sagetrac-mirror/tree/u/foosterhof/ticket/16467)\n\nCommit: [f8a86c0d85e36603fb45024ff14acde049cb0903](https://github.com/sagemath/sagetrac-mirror/commit/f8a86c0d85e36603fb45024ff14acde049cb0903)\n\nUpstream: Reported upstream. No feedback yet.\n\nStatus: needs_work\n\nIssue created by migration from https://trac.sagemath.org/ticket/16467\n\n",
    "created_at": "2014-06-11T09:30:15Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Unhiding in a fully hidden Doubly-Linked List",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16467",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```
An error occurs when in a fully hidden Doubly-Linked List an element is unhidden. All elements that come after it will also be unhidden.

```
sage: l = sage.combinat.misc.DoublyLinkedList(xrange(5))
sage: l.hide(0)
sage: l.hide(1)
sage: l.hide(2)
sage: l.hide(3)
sage: l.hide(4)
sage: print l
Doubly linked list of xrange(5): []
sage: l.unhide(1)
sage: print l
Doubly linked list of xrange(5): [1, 2, 3, 4]
sage: l.hide(1)
sage: print l
Doubly linked list of xrange(5): [2, 3, 4]
```

CC:  rudi jakobkroeker

Keywords: doubly linked list unhide empty

Branch: [u/foosterhof/ticket/16467](https://github.com/sagemath/sagetrac-mirror/tree/u/foosterhof/ticket/16467)

Commit: [f8a86c0d85e36603fb45024ff14acde049cb0903](https://github.com/sagemath/sagetrac-mirror/commit/f8a86c0d85e36603fb45024ff14acde049cb0903)

Upstream: Reported upstream. No feedback yet.

Status: needs_work

Issue created by migration from https://trac.sagemath.org/ticket/16467





---

archive/issue_comments_275909.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,18 @@\n An error occurs when in a fully hidden Doubly-Linked List an element is unhidden. All elements that come after it will also be unhidden.\n \n ```\n-l = sage.combinat.misc.DoublyLinkedList(xrange(5))\n-l.hide(0)\n-l.hide(1)\n-l.hide(2)\n-l.hide(3)\n-l.hide(4)\n-print l\n-l.unhide(1)\n-print l\n-l.hide(1)\n-print l\n+sage: l = sage.combinat.misc.DoublyLinkedList(xrange(5))\n+sage: l.hide(0)\n+sage: l.hide(1)\n+sage: l.hide(2)\n+sage: l.hide(3)\n+sage: l.hide(4)\n+sage: print l\n+Doubly linked list of xrange(5): []\n+sage: l.unhide(1)\n+sage: print l\n+Doubly linked list of xrange(5): [1, 2, 3, 4]\n+sage: l.hide(1)\n+sage: print l\n+Doubly linked list of xrange(5): [2, 3, 4]\n ```\n``````\n",
    "created_at": "2014-06-11T09:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275909",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,18 @@
 An error occurs when in a fully hidden Doubly-Linked List an element is unhidden. All elements that come after it will also be unhidden.
 
 ```
-l = sage.combinat.misc.DoublyLinkedList(xrange(5))
-l.hide(0)
-l.hide(1)
-l.hide(2)
-l.hide(3)
-l.hide(4)
-print l
-l.unhide(1)
-print l
-l.hide(1)
-print l
+sage: l = sage.combinat.misc.DoublyLinkedList(xrange(5))
+sage: l.hide(0)
+sage: l.hide(1)
+sage: l.hide(2)
+sage: l.hide(3)
+sage: l.hide(4)
+sage: print l
+Doubly linked list of xrange(5): []
+sage: l.unhide(1)
+sage: print l
+Doubly linked list of xrange(5): [1, 2, 3, 4]
+sage: l.hide(1)
+sage: print l
+Doubly linked list of xrange(5): [2, 3, 4]
 ```
``````




---

archive/issue_comments_275910.json:
```json
{
    "body": "Changing branch from \"\" to \"u/foosterhof/ticket/16467\"",
    "created_at": "2014-06-11T12:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275910",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

Changing branch from "" to "u/foosterhof/ticket/16467"



---

archive/issue_comments_275911.json:
```json
{
    "body": "Changing commit from \"\" to \"60c0c0f174063675c0ca75ffb32d69823727baac\"",
    "created_at": "2014-06-11T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275911",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

Changing commit from "" to "60c0c0f174063675c0ca75ffb32d69823727baac"



---

archive/issue_comments_275912.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis proposal is a revamp of the internal storage, to become an actual doubly linked list, in which elements that have not been defined at initialization can also be inserted and removed. A side effect that occurs, but that in my opinion should not be a problem, is that the order of the elements may change upon removal and re-insertion now.\n\nI do not see this as a problem, as the Doubly Linked List abstract data type has no concept of maintenance of order.\n\nNew commits:\n|                                                                                                                                          |                                                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|\n|[60c0c0f](https://github.com/sagemath/sagetrac-mirror/commit/60c0c0f174063675c0ca75ffb32d69823727baac)|`Added insert and remove methods, as well as redid internal storage to become actual Doubly Linked List`|",
    "created_at": "2014-06-11T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275912",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

<a id='comment:3'></a>
This proposal is a revamp of the internal storage, to become an actual doubly linked list, in which elements that have not been defined at initialization can also be inserted and removed. A side effect that occurs, but that in my opinion should not be a problem, is that the order of the elements may change upon removal and re-insertion now.

I do not see this as a problem, as the Doubly Linked List abstract data type has no concept of maintenance of order.

New commits:
|                                                                                                                                          |                                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
|[60c0c0f](https://github.com/sagemath/sagetrac-mirror/commit/60c0c0f174063675c0ca75ffb32d69823727baac)|`Added insert and remove methods, as well as redid internal storage to become actual Doubly Linked List`|



---

archive/issue_comments_275913.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2014-06-11T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275913",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_275914.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-11T12:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275914",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_275915.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[f8a86c0](https://github.com/sagemath/sagetrac-mirror/commit/f8a86c0d85e36603fb45024ff14acde049cb0903)|`Added is_empty method`|",
    "created_at": "2014-06-11T15:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[f8a86c0](https://github.com/sagemath/sagetrac-mirror/commit/f8a86c0d85e36603fb45024ff14acde049cb0903)|`Added is_empty method`|



---

archive/issue_comments_275916.json:
```json
{
    "body": "Changing commit from \"60c0c0f174063675c0ca75ffb32d69823727baac\" to \"f8a86c0d85e36603fb45024ff14acde049cb0903\"",
    "created_at": "2014-06-11T15:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "60c0c0f174063675c0ca75ffb32d69823727baac" to "f8a86c0d85e36603fb45024ff14acde049cb0903"



---

archive/issue_comments_275917.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe following hangs:\n\n```\nl = sage.combinat.misc.DoublyLinkedList(xrange(5))\nl.insert(0)\nl\n```",
    "created_at": "2014-06-27T09:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275917",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:5'></a>
The following hangs:

```
l = sage.combinat.misc.DoublyLinkedList(xrange(5))
l.insert(0)
l
```



---

archive/issue_comments_275918.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis poses a useful question:\n- Should an object be able to be in the list multiple times?\n\nIf so, the data storage plan used now will not work, and a structure using actual Node objects should be used. However, this will either break compatibility, as remove() now takes the object to remove, while then it would require the node containing the object, or it will increase the complexity of remove() from O(1) to O(n) by searching for the node to be removed. Both cases seem highly undesirable to me.\n\nIf objects cannot be represented multiple times, this can quite easily be fixed by creating some sort of 'has' dictionary, checking whether an element is already in the list.\n\nWhat would be most desirable for Sage?",
    "created_at": "2014-06-27T18:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275918",
    "user": "https://trac.sagemath.org/admin/accounts/users/foosterhof"
}
```

<a id='comment:6'></a>
This poses a useful question:
- Should an object be able to be in the list multiple times?

If so, the data storage plan used now will not work, and a structure using actual Node objects should be used. However, this will either break compatibility, as remove() now takes the object to remove, while then it would require the node containing the object, or it will increase the complexity of remove() from O(1) to O(n) by searching for the node to be removed. Both cases seem highly undesirable to me.

If objects cannot be represented multiple times, this can quite easily be fixed by creating some sort of 'has' dictionary, checking whether an element is already in the list.

What would be most desirable for Sage?



---

archive/issue_comments_275919.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'd say double entries should be possible, a DLL should really be able to store any sequence. \n\nHow is `remove' currently implemented? I really do not see how it can take O(1) time right now. To remove in O(1) time you must take away the trouble of finding the node (or at least the pointers to next\\previous object). Just passing the object still leaves you with that work.\n\nThis doubly linked list has hide/unhide, which in my book means that there should be two doubly linked lists in there, one storing a subsequence of the other.\n\nBut perhaps it's not all cast in stone and there are more schools of thought on this. I was brought up with the c++ STL implementation of a list, as here http://www.cplusplus.com/reference/list/list/",
    "created_at": "2014-06-27T18:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275919",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:7'></a>
I'd say double entries should be possible, a DLL should really be able to store any sequence. 

How is `remove' currently implemented? I really do not see how it can take O(1) time right now. To remove in O(1) time you must take away the trouble of finding the node (or at least the pointers to next\previous object). Just passing the object still leaves you with that work.

This doubly linked list has hide/unhide, which in my book means that there should be two doubly linked lists in there, one storing a subsequence of the other.

But perhaps it's not all cast in stone and there are more schools of thought on this. I was brought up with the c++ STL implementation of a list, as here http://www.cplusplus.com/reference/list/list/



---

archive/issue_comments_275920.json:
```json
{
    "body": "<a id='comment:8'></a>\nI forgot for a moment that I could simply take a look at the code :) . Anyway, the implementation of remove() takes O(log n) time, not O(1) as advertised in the docstring, since next_value and prev_value are dictionaries.",
    "created_at": "2014-06-28T07:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275920",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:8'></a>
I forgot for a moment that I could simply take a look at the code :) . Anyway, the implementation of remove() takes O(log n) time, not O(1) as advertised in the docstring, since next_value and prev_value are dictionaries.



---

archive/issue_events_055064.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16467#event-55064"
}
```



---

archive/issue_comments_275921.json:
```json
{
    "body": "<a id='comment:10'></a>\ntests do not pass",
    "created_at": "2015-08-09T12:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275921",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
tests do not pass



---

archive/issue_comments_275922.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-09T12:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16467",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16467#issuecomment-275922",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.
