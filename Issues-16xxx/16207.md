# Issue 16207: FiniteStateMachine._latex_: more options, better documentation

archive/issues_015970.json:
```json
{
    "body": "Improved `FiniteStateMachine._latex_`:\n* use state iterators instead of lists\n* move code format_transition_label\n* collect tikz options in array\n* typeset final_word_out, introduce relevant options: if a final state has an attribute  final_word_out, this is typeset as a leaving edge. This is in preparation for #16191\n* new method `latex_options`: Provide a new convenience function collecting all options for LaTeX output. While all of its functionality can also be achieved by directly setting attributes of `FiniteStateMachine`, `FSMState` and `FSMTransition`, this function also (somewhat) checks its input and serves to collect documentation on all these options.\n* Added a section in the introduction to the module explaining how to latex a FiniteStateMachine and pointing to this method for details.\n* Similarly, expanded explanations in `setup_latex_preamble`.\n* Use `latex_options` in other doctest instead of direct attribute assignment\n* new method `default_format_transition_label`: Previously, when no custorm `FiniteStateMachine.format_transition_label` was provided by the user, words have simply typeset by calling latex. As words are always lists, parentheses [ ] have always been printed.\n  This new default method typesets words by juxtaposition of their letters, the letters are piped through `format_letter` first. The latter now defaults to latex.\n    \n  Finally, `format_transition_label` is by default set to `default_format_transition_label` in the hope of providing a sensible default value.\n* Convenience Formatting functions for digit problems: When using negative digits, it is quite customary to write e.g. `\\overline{1`} instead of `-1` in LaTeX. Introduce `FiniteStateMachine.format_letter_negative` for this purpose.\n    \n  Furthermore, In digit expansions, digits are frequently processed from the least significant to the most significant position, but it is customary to write the least significant digit at the right-most position. Therefore, the labels have to be reversed. Provide a method `FiniteStateMachine.format_transition_label_reversed` for this purpose.\n\n\nCC:  @dkrenn skropf\n\nKeywords: finite_state_machine\n\nReviewer: Daniel Krenn\n\nAuthor: Clemens Heuberger\n\nBranch: e5a31912c6ab32068484eb7b4008cecf896c5d75\n\nDependencies: #16132, #16145, #16146, #16200, #16205\n\nCommit: e5a31912c6ab32068484eb7b4008cecf896c5d75\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16207\n\n",
    "closed_at": "2014-05-07T08:30:51Z",
    "created_at": "2014-04-22T15:01:08Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "FiniteStateMachine._latex_: more options, better documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16207",
    "user": "https://github.com/cheuberg"
}
```
Improved `FiniteStateMachine._latex_`:
* use state iterators instead of lists
* move code format_transition_label
* collect tikz options in array
* typeset final_word_out, introduce relevant options: if a final state has an attribute  final_word_out, this is typeset as a leaving edge. This is in preparation for #16191
* new method `latex_options`: Provide a new convenience function collecting all options for LaTeX output. While all of its functionality can also be achieved by directly setting attributes of `FiniteStateMachine`, `FSMState` and `FSMTransition`, this function also (somewhat) checks its input and serves to collect documentation on all these options.
* Added a section in the introduction to the module explaining how to latex a FiniteStateMachine and pointing to this method for details.
* Similarly, expanded explanations in `setup_latex_preamble`.
* Use `latex_options` in other doctest instead of direct attribute assignment
* new method `default_format_transition_label`: Previously, when no custorm `FiniteStateMachine.format_transition_label` was provided by the user, words have simply typeset by calling latex. As words are always lists, parentheses [ ] have always been printed.
  This new default method typesets words by juxtaposition of their letters, the letters are piped through `format_letter` first. The latter now defaults to latex.
    
  Finally, `format_transition_label` is by default set to `default_format_transition_label` in the hope of providing a sensible default value.
* Convenience Formatting functions for digit problems: When using negative digits, it is quite customary to write e.g. `\overline{1`} instead of `-1` in LaTeX. Introduce `FiniteStateMachine.format_letter_negative` for this purpose.
    
  Furthermore, In digit expansions, digits are frequently processed from the least significant to the most significant position, but it is customary to write the least significant digit at the right-most position. Therefore, the labels have to be reversed. Provide a method `FiniteStateMachine.format_transition_label_reversed` for this purpose.


CC:  @dkrenn skropf

Keywords: finite_state_machine

Reviewer: Daniel Krenn

Author: Clemens Heuberger

Branch: e5a31912c6ab32068484eb7b4008cecf896c5d75

Dependencies: #16132, #16145, #16146, #16200, #16205

Commit: e5a31912c6ab32068484eb7b4008cecf896c5d75

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16207





---

archive/issue_comments_206986.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-22T15:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_206987.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-22T15:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206987",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_206988.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-04-22T15:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206988",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_206989.json:
```json
{
    "body": "<a id='comment:4'></a>Merged #16132, otherwise, this will not merge (commit [53a700c](http://git.sagemath.org/sage.git/commit/?id=53a700c61f5f05d3193b712483dbca169055e25a) introduced a new module local variable at the same position where #16132 did the same).",
    "created_at": "2014-04-22T15:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206989",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:4'></a>Merged #16132, otherwise, this will not merge (commit [53a700c](http://git.sagemath.org/sage.git/commit/?id=53a700c61f5f05d3193b712483dbca169055e25a) introduced a new module local variable at the same position where #16132 did the same).



---

archive/issue_comments_206990.json:
```json
{
    "body": "<a id='comment:5'></a>trac's automerge fails. Patch is based on 6.2.beta8, it merges cleanly with 6.2.rc0.",
    "created_at": "2014-04-23T03:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206990",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:5'></a>trac's automerge fails. Patch is based on 6.2.beta8, it merges cleanly with 6.2.rc0.



---

archive/issue_comments_206991.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-24T13:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_206992.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-04-24T13:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206992",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_206993.json:
```json
{
    "body": "<a id='comment:10'></a>merged #16145 in order to avoid a merge conflict and listed #16145 as a dependency.",
    "created_at": "2014-04-24T13:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206993",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:10'></a>merged #16145 in order to avoid a merge conflict and listed #16145 as a dependency.



---

archive/issue_comments_206994.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-02T08:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206994",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_206995.json:
```json
{
    "body": "<a id='comment:12'></a>finished my review; everything is fine; corrected one PEP8-spacing.\n\n---\nNew commits:",
    "created_at": "2014-05-02T08:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206995",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:12'></a>finished my review; everything is fine; corrected one PEP8-spacing.

---
New commits:



---

archive/issue_events_047763.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16207#event-47763"
}
```



---

archive/issue_comments_206996.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-07T08:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16207#issuecomment-206996",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_047764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-07T08:30:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16207",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16207#event-47764"
}
```
