# Issue 16557: FiniteStateMachine - LaTeX output in notebook

archive/issues_016320.json:
```json
{
    "body": "In #16020, `graphs.setup_latex_preamble` has been modified to include tikz\ninto the mathjax avoid list so that graphs can be rendered more easily in\nthe sage notebook.\n    \nThis ticket does the same for `finite_state_machine.setup_latex_preamble`.\n\nMoreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).\n\nCC:  skropf @dkrenn elixyre @nathanncohen\n\nKeywords: finite_state_machine, latex\n\nBranch/Commit: 1bfb513ca3a9dc11a232bdd6ee31625fe5822572\n\nReviewer: Jean-Baptiste Priez\n\nAuthor: Clemens Heuberger\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16557\n\n",
    "closed_at": "2014-07-17T00:01:14Z",
    "created_at": "2014-06-26T18:13:25Z",
    "labels": [
        "component: finite state machines",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "FiniteStateMachine - LaTeX output in notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16557",
    "user": "https://github.com/cheuberg"
}
```
In #16020, `graphs.setup_latex_preamble` has been modified to include tikz
into the mathjax avoid list so that graphs can be rendered more easily in
the sage notebook.
    
This ticket does the same for `finite_state_machine.setup_latex_preamble`.

Moreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).

CC:  skropf @dkrenn elixyre @nathanncohen

Keywords: finite_state_machine, latex

Branch/Commit: 1bfb513ca3a9dc11a232bdd6ee31625fe5822572

Reviewer: Jean-Baptiste Priez

Author: Clemens Heuberger

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16557





---

archive/issue_comments_273701.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-26T18:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273701",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273702.json:
```json
{
    "body": "<a id='comment:2'></a>In #16020, we don't need to call:\n\n```\nsage.combinat.finite_state_machine.setup_latex_preamble()\n```\nto see some multi-graphs.\nIt could be convenient to directly load these lines:\n\n```\nlatex.add_package_to_preamble_if_available('tikz')\nlatex.add_to_mathjax_avoid_list(\"tikz\")\nlatex.add_to_preamble('\\\\usetikzlibrary{automata}')\n```\nwhen we load the file.\n\nIt seems to me, that is not disturbing to load these lines... but it is disturbing to have to call this method to draw some automata.\n\nCheers,\n\nJean-Baptiste Priez",
    "created_at": "2014-07-03T03:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273702",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

<a id='comment:2'></a>In #16020, we don't need to call:

```
sage.combinat.finite_state_machine.setup_latex_preamble()
```
to see some multi-graphs.
It could be convenient to directly load these lines:

```
latex.add_package_to_preamble_if_available('tikz')
latex.add_to_mathjax_avoid_list("tikz")
latex.add_to_preamble('\\usetikzlibrary{automata}')
```
when we load the file.

It seems to me, that is not disturbing to load these lines... but it is disturbing to have to call this method to draw some automata.

Cheers,

Jean-Baptiste Priez



---

archive/issue_comments_273703.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-03T03:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273703",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273704.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jean-Baptiste Priez\"",
    "created_at": "2014-07-03T03:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273704",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing reviewer from "" to "Jean-Baptiste Priez"



---

archive/issue_comments_273705.json:
```json
{
    "body": "Changing commit from \"2ac09bc134bde5ae44d326bd9ad2a4266fb7f2c6\" to \"1bfb513ca3a9dc11a232bdd6ee31625fe5822572\"",
    "created_at": "2014-07-06T17:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2ac09bc134bde5ae44d326bd9ad2a4266fb7f2c6" to "1bfb513ca3a9dc11a232bdd6ee31625fe5822572"



---

archive/issue_comments_273706.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-06T17:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273707.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,8 @@\n the sage notebook.\n     \n This ticket does the same for `finite_state_machine.setup_latex_preamble`.\n+\n+Moreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).\n \n Author: Clemens Heuberger\n \n``````\n",
    "created_at": "2014-07-06T17:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273707",
    "user": "https://github.com/cheuberg"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,8 @@
 the sage notebook.
     
 This ticket does the same for `finite_state_machine.setup_latex_preamble`.
+
+Moreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).
 
 Author: Clemens Heuberger
 
``````




---

archive/issue_comments_273708.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks for pointing this out, I was not aware of the fact that the graphs module calls `setup_latex_preamble` automatically. Therefore, I submitted a patch for adapting the documentation of the graphs module (#16620).\n\nSo, we now call `setup_latex_preamble` automatically (not when first loading the file as suggested, but when `_latex_` is called as the graphs module does). To reduce overhead,\n`setup_latex_preamble` is now a cached function (as in the graphs module). Finally, the documentation has been adapted to reflect the change.",
    "created_at": "2014-07-06T17:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273708",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:4'></a>Thanks for pointing this out, I was not aware of the fact that the graphs module calls `setup_latex_preamble` automatically. Therefore, I submitted a patch for adapting the documentation of the graphs module (#16620).

So, we now call `setup_latex_preamble` automatically (not when first loading the file as suggested, but when `_latex_` is called as the graphs module does). To reduce overhead,
`setup_latex_preamble` is now a cached function (as in the graphs module). Finally, the documentation has been adapted to reflect the change.



---

archive/issue_comments_273709.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-06T17:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273709",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273710.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-16T03:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273710",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_048598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-17T00:01:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16557#event-48598"
}
```



---

archive/issue_comments_273711.json:
```json
{
    "body": "Changing branch from \"u/cheuberg/fsm/mathjax-avoid-tikz\" to \"1bfb513ca3a9dc11a232bdd6ee31625fe5822572\"",
    "created_at": "2014-07-17T00:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273711",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/cheuberg/fsm/mathjax-avoid-tikz" to "1bfb513ca3a9dc11a232bdd6ee31625fe5822572"



---

archive/issue_comments_273712.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-17T00:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16557#issuecomment-273712",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
