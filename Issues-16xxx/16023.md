# Issue 16023: remove deprecated code in functions/ and symbolic/

archive/issues_015786.json:
```json
{
    "body": "\n\nKeywords: deprecation\n\nBranch/Commit: 633a4117fee037d40cb18adfc281d3451fad77dc\n\nReviewer: Burcin Erocal, Karl-Dieter Crisman\n\nAuthor: Ralf Stephan\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16023\n\n",
    "closed_at": "2014-09-06T11:02:57Z",
    "created_at": "2014-03-27T15:18:46Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "remove deprecated code in functions/ and symbolic/",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16023",
    "user": "https://github.com/rwst"
}
```


Keywords: deprecation

Branch/Commit: 633a4117fee037d40cb18adfc281d3451fad77dc

Reviewer: Burcin Erocal, Karl-Dieter Crisman

Author: Ralf Stephan

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16023





---

archive/issue_comments_204405.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-27T15:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204405",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_204406.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2014-03-27T15:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204406",
    "user": "https://github.com/rwst"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_204407.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-03-27T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204407",
    "user": "https://github.com/burcin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_204408.json:
```json
{
    "body": "<a id='comment:2'></a>Many thanks for cleaning up!\n\nIt looks like some function bodies are reduced to `BuiltinFunction.__call__()` or `GinacFunction.__call__()`. Moving the doctest somewhere else and removing these functions would be better.",
    "created_at": "2014-03-27T16:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204408",
    "user": "https://github.com/burcin"
}
```

<a id='comment:2'></a>Many thanks for cleaning up!

It looks like some function bodies are reduced to `BuiltinFunction.__call__()` or `GinacFunction.__call__()`. Moving the doctest somewhere else and removing these functions would be better.



---

archive/issue_comments_204409.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-27T17:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204410.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-03-27T17:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204410",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_204411.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks. I believe you mean `Ei` and `exp`.",
    "created_at": "2014-03-27T17:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204411",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>Thanks. I believe you mean `Ei` and `exp`.



---

archive/issue_comments_204412.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good to me. You can switch to positive review once the patchbot gives it a greenlight. (Does patchbot work with the git workflow now?)",
    "created_at": "2014-03-27T17:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204412",
    "user": "https://github.com/burcin"
}
```

<a id='comment:5'></a>Looks good to me. You can switch to positive review once the patchbot gives it a greenlight. (Does patchbot work with the git workflow now?)



---

archive/issue_comments_204413.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-27T17:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204414.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 burcin]:\n> Looks good to me. You can switch to positive review once the patchbot gives it a greenlight. (Does patchbot work with the git workflow now?)\n\n\nNot here. This is still unresolved:\nhttps://github.com/robertwb/sage-patchbot/issues/10\n\nThanks.",
    "created_at": "2014-03-29T08:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204414",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>Replying to [comment:5 burcin]:
> Looks good to me. You can switch to positive review once the patchbot gives it a greenlight. (Does patchbot work with the git workflow now?)


Not here. This is still unresolved:
https://github.com/robertwb/sage-patchbot/issues/10

Thanks.



---

archive/issue_comments_204415.json:
```json
{
    "body": "<a id='comment:8'></a>The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.\n\nStill, hopefully it wouldn't be a problem.  I am pretty sure that all the doctests in the stuff to be removed is replicated elsewhere, but it might be worth checking out just to be sure.   Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.  I wouldn't cry if the whole Bessel removal were another ticket.",
    "created_at": "2014-04-01T14:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204415",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.

Still, hopefully it wouldn't be a problem.  I am pretty sure that all the doctests in the stuff to be removed is replicated elsewhere, but it might be worth checking out just to be sure.   Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.  I wouldn't cry if the whole Bessel removal were another ticket.



---

archive/issue_comments_204416.json:
```json
{
    "body": "<a id='comment:9'></a>Last 10 new commits:",
    "created_at": "2014-04-15T07:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204416",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'></a>Last 10 new commits:



---

archive/issue_comments_204417.json:
```json
{
    "body": "<a id='comment:10'></a>Oops wrong branch.",
    "created_at": "2014-04-15T07:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204417",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Oops wrong branch.



---

archive/issue_comments_204418.json:
```json
{
    "body": "<a id='comment:11'></a>Now the branch doesn't seem to be coming up...",
    "created_at": "2014-04-15T19:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204418",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>Now the branch doesn't seem to be coming up...



---

archive/issue_comments_204419.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-16T14:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204420.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:8 kcrisman]:\n> The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.\n\nThis is now #16173 \n> ... Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.\n  \nDone.",
    "created_at": "2014-04-16T14:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204420",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>Replying to [comment:8 kcrisman]:
> The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.

This is now #16173 
> ... Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.
  
Done.



---

archive/issue_comments_204421.json:
```json
{
    "body": "<a id='comment:14'></a>I'm really sorry to be nitpicky, this is actually really good to do.\n> > The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.\n\n> This is now #16173 \nDo you want to wait on removing the deprecated Bessel things to there, then?  I guess that's my point.  (But not the little bit below about `prec`, that is okay to remove here.)\n> > ... Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.\n  \n> Done.\nAnd if you can still keep a doctest which does something like `gamma(6.)` that would be useful, as it seems to sometimes unlock inconsistencies on different platforms we otherwise might not know about.\n\n```\nsage: search_src(\"gamma\\(6\")\nfunctions/other.py:758:            sage: gamma(6, prec=53)\nfunctions/other.py:820:            sage: log_gamma(6)\nfunctions/other.py:822:            sage: log_gamma(6.)\nfunctions/other.py:824:            sage: log_gamma(6).n()\nfunctions/other.py:997:            sage: gamma(6)\nrings/rational.pyx:2920:            sage: gamma(6/1)\n```\nThe following test ought to do it.\n\n```\nsage: gamma(6.)\n120.000000000000\n```",
    "created_at": "2014-04-17T01:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204421",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>I'm really sorry to be nitpicky, this is actually really good to do.
> > The Bessel functions weren't removed that long ago, and note that there is a LOT more to be removed - namely, the whole underscore versions of them, see https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1102 - basically to the end of the document.

> This is now #16173 
Do you want to wait on removing the deprecated Bessel things to there, then?  I guess that's my point.  (But not the little bit below about `prec`, that is okay to remove here.)
> > ... Also note that [here](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/functions/bessel.py?id=9db8c5c598ec9de953a33b14e531bee3c092c199#n1071) there is a small bit to be removed.
  
> Done.
And if you can still keep a doctest which does something like `gamma(6.)` that would be useful, as it seems to sometimes unlock inconsistencies on different platforms we otherwise might not know about.

```
sage: search_src("gamma\(6")
functions/other.py:758:            sage: gamma(6, prec=53)
functions/other.py:820:            sage: log_gamma(6)
functions/other.py:822:            sage: log_gamma(6.)
functions/other.py:824:            sage: log_gamma(6).n()
functions/other.py:997:            sage: gamma(6)
rings/rational.pyx:2920:            sage: gamma(6/1)
```
The following test ought to do it.

```
sage: gamma(6.)
120.000000000000
```



---

archive/issue_comments_204422.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-04T09:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_047122.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16023#event-47122"
}
```



---

archive/issue_comments_204423.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-29T13:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204424.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-28T13:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_047123.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16023#event-47123"
}
```



---

archive/issue_events_047124.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16023#event-47124"
}
```



---

archive/issue_comments_204425.json:
```json
{
    "body": "<a id='comment:20'></a>Somewhat surprisingly, given the attention to detail you've clearly given, there is still work to be done here - but easy work, I believe.\n\n* In other.py, in the `__call__` method for gamma, there is still an import of deprecation which is now not needed.\n* [comment:7:ticket:7490 This comment] suggests that perhaps \n\n```\nsage: Q.<i> = NumberField(x^2+1) \nsage: gamma(i) \n```\n  should not work at all.  So either we should confirm it raises an error, check what \"should\" happen, or make it break...",
    "created_at": "2014-08-15T04:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204425",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>Somewhat surprisingly, given the attention to detail you've clearly given, there is still work to be done here - but easy work, I believe.

* In other.py, in the `__call__` method for gamma, there is still an import of deprecation which is now not needed.
* [comment:7:ticket:7490 This comment] suggests that perhaps 

```
sage: Q.<i> = NumberField(x^2+1) 
sage: gamma(i) 
```
  should not work at all.  So either we should confirm it raises an error, check what "should" happen, or make it break...



---

archive/issue_comments_204426.json:
```json
{
    "body": "<a id='comment:21'></a>Burcin, in case you're reading this - what was your intent with that doctest?   Should this not work because an embedding needs to be specified, or should it \"just work\"?",
    "created_at": "2014-08-15T04:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204426",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>Burcin, in case you're reading this - what was your intent with that doctest?   Should this not work because an embedding needs to be specified, or should it "just work"?



---

archive/issue_comments_204427.json:
```json
{
    "body": "<a id='comment:22'></a>Also, after #16173 and #16737 this one will probably be a little smaller.",
    "created_at": "2014-08-15T07:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204427",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>Also, after #16173 and #16737 this one will probably be a little smaller.



---

archive/issue_comments_204428.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-20T14:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204429.json:
```json
{
    "body": "<a id='comment:24'></a>> * In other.py, in the `__call__` method for gamma, there is still an import of deprecation which is now not needed.\n \nStill needed, I believe.\n> * [comment:7:ticket:7490 This comment] suggests that perhaps \n> \n> ```\n> sage: Q.<i> = NumberField(x^2+1) \n> sage: gamma(i) \n> ```\n>   should not work at all.  So either we should confirm it raises an error, check what \"should\" happen, or make it break...\n\nGiven that `e^i`, `ln(i)`, and `sqrt(i)` all fail in this case for various reasons related to embedding, maybe this should really be broken now.  Since\n\n```\n            if not str(err).startswith(\"cannot coerce\"):\n                raise\n```\nsuggests that this is the only kind of error we treat, and then we just plop it in RR or CC as we can, I suppose we could remove that entire thing and do\n\n```\nreturn GinacFunction.__call__(self, x, coerce=coerce, hold=hold)\n```\nas the entire body of call or even remove it.  What do you think?",
    "created_at": "2014-08-27T19:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204429",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>> * In other.py, in the `__call__` method for gamma, there is still an import of deprecation which is now not needed.
 
Still needed, I believe.
> * [comment:7:ticket:7490 This comment] suggests that perhaps 
> 
> ```
> sage: Q.<i> = NumberField(x^2+1) 
> sage: gamma(i) 
> ```
>   should not work at all.  So either we should confirm it raises an error, check what "should" happen, or make it break...

Given that `e^i`, `ln(i)`, and `sqrt(i)` all fail in this case for various reasons related to embedding, maybe this should really be broken now.  Since

```
            if not str(err).startswith("cannot coerce"):
                raise
```
suggests that this is the only kind of error we treat, and then we just plop it in RR or CC as we can, I suppose we could remove that entire thing and do

```
return GinacFunction.__call__(self, x, coerce=coerce, hold=hold)
```
as the entire body of call or even remove it.  What do you think?



---

archive/issue_comments_204430.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:21 kcrisman]:\n> Burcin, in case you're reading this - what was your intent with that doctest?   Should this not work because an embedding needs to be specified, or should it \"just work\"?\n\n\nRight. It shouldn't work without specifying an explicit embedding in the `NumberField` constructor.\n\nI don't have time to try the patch now. It would be nice to give the user a helpful error message in this case, but I have no idea how much trouble that is.",
    "created_at": "2014-08-28T03:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204430",
    "user": "https://github.com/burcin"
}
```

<a id='comment:25'></a>Replying to [comment:21 kcrisman]:
> Burcin, in case you're reading this - what was your intent with that doctest?   Should this not work because an embedding needs to be specified, or should it "just work"?


Right. It shouldn't work without specifying an explicit embedding in the `NumberField` constructor.

I don't have time to try the patch now. It would be nice to give the user a helpful error message in this case, but I have no idea how much trouble that is.



---

archive/issue_comments_204431.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks, Burcin!\n\nOkay, I will look at this today, then.  Here are a few notes to myself so I don't forget (they are probably taken care of elsewhere or not needed):\n* make sure 13608 is still doctested\n* check whether 2607, 6094, 10859 were doctested and remove those if needed\n* see if just raising a slightly different error message in the number field case will be enough",
    "created_at": "2014-08-28T14:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204431",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>Thanks, Burcin!

Okay, I will look at this today, then.  Here are a few notes to myself so I don't forget (they are probably taken care of elsewhere or not needed):
* make sure 13608 is still doctested
* check whether 2607, 6094, 10859 were doctested and remove those if needed
* see if just raising a slightly different error message in the number field case will be enough



---

archive/issue_comments_204432.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-28T15:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204432",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_204433.json:
```json
{
    "body": "<a id='comment:27'></a>>  * make sure 13608 is still doctested\n \nYeah, although something similar is tested in symbolic/function.pyx this is testing something very specific to exp, so that test should be kept, probably just in the same place as the other example, or in some generic tests place in the file.\n>  * check whether 2607, 6094, 10859 were doctested and remove those if needed\n \nThe 2607 stuff actually just removes the deprecated *method* for local max/min, but there is also the deprecated function it depended on which we might as well remove at the same time, seems weird not to\n\n```\nnumerical/optimize.py:233:find_maximum_on_interval = deprecated_function_alias(2607, find_local_maximum)\nnumerical/optimize.py:234:find_minimum_on_interval = deprecated_function_alias(2607, find_local_minimum)\n```\nThese don't seem to have been tested, though, which is good for this ticket.  The stuff for 6094 I found is unrelated to this ticket and not high priority, and 10859 was already all set.\n>  * see if just raising a slightly different error message in the number field case will be enough\n \nHere is current status if I just remove the call method entirely like you did the others.\n\n```\nsage: gamma(i).n()\n-0.154949828301811 - 0.498015668118356*I\nsage: Q.<i> = NumberField(x^2+1)\nsage: gamma(i)\n---------------------------------------------------------------------------\nTypeError: cannot coerce arguments: no canonical coercion from Number Field in i with defining polynomial x^2 + 1 to Symbolic Ring\n```\nI guess we could keep the method and raise an error about embedding, or keep this one.  This is the only doctest failure in either directory, and we would want to rescue the tests from that module.\n\n---\n\nWhat do you think?  I hope it's okay with the multi back and forth on this.",
    "created_at": "2014-08-28T15:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204433",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:27'></a>>  * make sure 13608 is still doctested
 
Yeah, although something similar is tested in symbolic/function.pyx this is testing something very specific to exp, so that test should be kept, probably just in the same place as the other example, or in some generic tests place in the file.
>  * check whether 2607, 6094, 10859 were doctested and remove those if needed
 
The 2607 stuff actually just removes the deprecated *method* for local max/min, but there is also the deprecated function it depended on which we might as well remove at the same time, seems weird not to

```
numerical/optimize.py:233:find_maximum_on_interval = deprecated_function_alias(2607, find_local_maximum)
numerical/optimize.py:234:find_minimum_on_interval = deprecated_function_alias(2607, find_local_minimum)
```
These don't seem to have been tested, though, which is good for this ticket.  The stuff for 6094 I found is unrelated to this ticket and not high priority, and 10859 was already all set.
>  * see if just raising a slightly different error message in the number field case will be enough
 
Here is current status if I just remove the call method entirely like you did the others.

```
sage: gamma(i).n()
-0.154949828301811 - 0.498015668118356*I
sage: Q.<i> = NumberField(x^2+1)
sage: gamma(i)
---------------------------------------------------------------------------
TypeError: cannot coerce arguments: no canonical coercion from Number Field in i with defining polynomial x^2 + 1 to Symbolic Ring
```
I guess we could keep the method and raise an error about embedding, or keep this one.  This is the only doctest failure in either directory, and we would want to rescue the tests from that module.

---

What do you think?  I hope it's okay with the multi back and forth on this.



---

archive/issue_comments_204434.json:
```json
{
    "body": "<a id='comment:28'></a>Well then, is this still really needs_work?",
    "created_at": "2014-09-03T09:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204434",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>Well then, is this still really needs_work?



---

archive/issue_comments_204435.json:
```json
{
    "body": "<a id='comment:29'></a>> Well then, is this still really needs_work?\n\nYes, because currently \n\n```\nsage: Q.<i> = NumberField(x^2+1) \nsage: gamma(i) \n```\ndoesn't just work, it is doctested!  But the discussion above confirms it should not be allowed to work.\n\nSo, as I said [comment:27:ticket:16023 above], we can either remove the call method entirely and then doctest that error, or keep it and make sure it raises an error about embedding as appropriate.  We should also rescue the *correct* doctests from that method and put them somewhere as tests.",
    "created_at": "2014-09-03T12:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204435",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:29'></a>> Well then, is this still really needs_work?

Yes, because currently 

```
sage: Q.<i> = NumberField(x^2+1) 
sage: gamma(i) 
```
doesn't just work, it is doctested!  But the discussion above confirms it should not be allowed to work.

So, as I said [comment:27:ticket:16023 above], we can either remove the call method entirely and then doctest that error, or keep it and make sure it raises an error about embedding as appropriate.  We should also rescue the *correct* doctests from that method and put them somewhere as tests.



---

archive/issue_comments_204436.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-03T14:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_204437.json:
```json
{
    "body": "<a id='comment:31'></a>Ah ok. I should have looked into it better. I think after the buildbot thumbs up this can be set to positive?",
    "created_at": "2014-09-03T14:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204437",
    "user": "https://github.com/rwst"
}
```

<a id='comment:31'></a>Ah ok. I should have looked into it better. I think after the buildbot thumbs up this can be set to positive?



---

archive/issue_comments_204438.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-09-03T14:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204438",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_204439.json:
```json
{
    "body": "<a id='comment:32'></a>Yup, thanks!",
    "created_at": "2014-09-03T15:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204439",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:32'></a>Yup, thanks!



---

archive/issue_comments_204440.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-04T06:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204440",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_047125.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-06T11:02:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16023#event-47125"
}
```



---

archive/issue_comments_204441.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-06T11:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16023#issuecomment-204441",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
