# Issue 16938: Sage debug version

archive/issues_016701.json:
```json
{
    "assignees": [],
    "body": "When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!\n\nI suppose the fix will eventually be in a stable upstream release.\n\nThere is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)\n\nDepends on #17088\n\nUpstream: **Reported upstream. No feedback yet.**\n\nCC:  @jpflori @vbraun @malb\n\nComponent: **build**\n\nKeywords: **debug singular cygwin64**\n\nAuthor: **Simon King, Volker Braun, Jeroen Demeyer**\n\nBranch/Commit: **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**\n\nReviewer: **Jeroen Demeyer, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16938_\n\n",
    "closed_at": "2014-10-05T22:39:11Z",
    "created_at": "2014-09-05T14:07:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage debug version",
    "type": "issue",
    "updated_at": "2014-10-05T22:39:11Z",
    "url": "https://github.com/sagemath/sage/issues/16938",
    "user": "https://github.com/simon-king-jena"
}
```
When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!

I suppose the fix will eventually be in a stable upstream release.

There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)

Depends on #17088

Upstream: **Reported upstream. No feedback yet.**

CC:  @jpflori @vbraun @malb

Component: **build**

Keywords: **debug singular cygwin64**

Author: **Simon King, Volker Braun, Jeroen Demeyer**

Branch/Commit: **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**

Reviewer: **Jeroen Demeyer, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/16938_





---

archive/issue_events_239934.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-05T14:07:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239934"
}
```



---

archive/issue_events_239935.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-05T14:07:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239935"
}
```



---

archive/issue_events_239936.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-05T14:07:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239936"
}
```



---

archive/issue_events_239937.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-05T14:07:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239937"
}
```



---

archive/issue_comments_223507.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe function `choose_patches()` of singular's spkg-install removes most of the files in `$SRC/omalloc/` if we are in debug mode. However, the cygwin64 patch tries to patch some files in that folder.\n\nIn addition to that, the cygwin64 patch says\n\n```\n+ifeq ($(SINGUNAME),x86_64-Win)\n+SO_SUFFIX = dll\n+MODULE_SUFFIX    = dll\n+LIBSINGULAR_FLAGS = -shared\n+LIBSINGULAR_LIBS = -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc \n+endif\n+\n```\nSo, if one would try to build the debug version in 64 bit cygwin, then one had -lomalloc, but that would not work, since omalloc is disabled on purpose, for the debug version.\n\nWhat to do? In principle, we could put an alternative version of the cygwin64 patch into the patches/conditional folder, and if we are in debug version, we could let `choose_patches()` replace the regular cygwin patch version by the conditional version.\n\nI will try to solve the problem accordingly, however, I have no windows box. Hence, someone else needs to test if a debug version of singular works in cygwin.",
    "created_at": "2014-09-05T19:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223507",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

The function `choose_patches()` of singular's spkg-install removes most of the files in `$SRC/omalloc/` if we are in debug mode. However, the cygwin64 patch tries to patch some files in that folder.

In addition to that, the cygwin64 patch says

```
+ifeq ($(SINGUNAME),x86_64-Win)
+SO_SUFFIX = dll
+MODULE_SUFFIX    = dll
+LIBSINGULAR_FLAGS = -shared
+LIBSINGULAR_LIBS = -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc 
+endif
+
```
So, if one would try to build the debug version in 64 bit cygwin, then one had -lomalloc, but that would not work, since omalloc is disabled on purpose, for the debug version.

What to do? In principle, we could put an alternative version of the cygwin64 patch into the patches/conditional folder, and if we are in debug version, we could let `choose_patches()` replace the regular cygwin patch version by the conditional version.

I will try to solve the problem accordingly, however, I have no windows box. Hence, someone else needs to test if a debug version of singular works in cygwin.



---

archive/issue_comments_223508.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nPS: Instead of omalloc, the debug version's memory manager is called xalloc. This is a hint for a debug version in cygwin: Perhaps it needs to say `-lxalloc` rather than `-lomalloc`?",
    "created_at": "2014-09-05T19:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223508",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

PS: Instead of omalloc, the debug version's memory manager is called xalloc. This is a hint for a debug version in cygwin: Perhaps it needs to say `-lxalloc` rather than `-lomalloc`?



---

archive/issue_comments_223509.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nUnfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.",
    "created_at": "2014-09-05T20:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223509",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.



---

archive/issue_comments_223510.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@simon-king-jena](#comment%3A3):\n> Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.\n\nThe good news is that many of the failing patches went upstream!",
    "created_at": "2014-09-05T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223510",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@simon-king-jena](#comment%3A3):
> Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.

The good news is that many of the failing patches went upstream!



---

archive/issue_comments_223511.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI modified the patches so that they apply. However, the built fails, as the function `omalloc0` is used in one place, but is not defined when using xalloc instead of omalloc. I guess I have to ask Hans Sch\u00f6nemann for advice.",
    "created_at": "2014-09-05T20:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223511",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

I modified the patches so that they apply. However, the built fails, as the function `omalloc0` is used in one place, but is not defined when using xalloc instead of omalloc. I guess I have to ask Hans Schönemann for advice.



---

archive/issue_comments_223512.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.",
    "created_at": "2014-09-10T19:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223512",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.



---

archive/issue_comments_223513.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@vbraun](#comment%3A6):\n> IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.\n\nCygwin itself is not in the game. Only the cygwin PATCH currently constitutes a problem. It is not a big deal to solve it: I modified the patches *and* spkg-install so that building the debug version starts (i.e., so that all patches and changes apply).\n\nMeanwhile Hans gave me a hint on where to get a missing function. After fixing that, the debug version will hopefully build.",
    "created_at": "2014-09-10T19:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223513",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@vbraun](#comment%3A6):
> IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.

Cygwin itself is not in the game. Only the cygwin PATCH currently constitutes a problem. It is not a big deal to solve it: I modified the patches *and* spkg-install so that building the debug version starts (i.e., so that all patches and changes apply).

Meanwhile Hans gave me a hint on where to get a missing function. After fixing that, the debug version will hopefully build.



---

archive/issue_comments_223514.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWith Hans' hint, building the debug version went a bit further. However, building still fails, with \"cannot find -lomalloc_ndebug\".\n\nOOOOPS! Looking for `-lomalloc_ndebug` in our patches, I see that the `sage_debug.patch` looks like this:\n\n```diff\ndiff -ru src/kernel/Makefile.in src.debug/kernel/Makefile.in\n--- src/kernel/Makefile.in      2012-04-17 21:00:08.000000000 +0200\n+++ src.debug/kernel/Makefile.in        2012-07-12 16:51:29.923359810 +0200\n@@ -49,7 +49,7 @@\n CXXFLAGS       = @CXXFLAGS@ ${PIPE} \n CXXTEMPLFLAGS  = @CXXTEMPLFLAGS@\n CPPFLAGS       = -I${srcdir} -I.. -I@prefix@  @CPPFLAGS@ \n-DEFS           = -DNDEBUG -DOM_NDEBUG -D@SING_UNAME@ @DEFS@\n+DEFS           = -DOM_NDEBUG -D@SING_UNAME@ @DEFS@\n LDFLAGS                = @LDFLAGS@\n LD_DYN_FLAGS   = @LD_DYN_FLAGS@\n SFLAGS         = @SFLAGS@\n@@ -64,7 +64,7 @@\n LIBS           = -lm @NEED_LIBS@ \n else\n # for the 2-0-* versions under Windows, we don't need gdbm, readline and ncurses\n-LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc_ndebug\n+LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc\n #LIBS          = -lsingfac -lsingcf -lgmp\n endif\n MP_LIBS                = @MP_LIBS@\n```\nIsn't the diff file formatted wrongly? I am talking about the paths \"src/kernel\" and \"src.debug/kernel\", which do not exist.",
    "created_at": "2014-09-10T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223514",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

With Hans' hint, building the debug version went a bit further. However, building still fails, with "cannot find -lomalloc_ndebug".

OOOOPS! Looking for `-lomalloc_ndebug` in our patches, I see that the `sage_debug.patch` looks like this:

```diff
diff -ru src/kernel/Makefile.in src.debug/kernel/Makefile.in
--- src/kernel/Makefile.in      2012-04-17 21:00:08.000000000 +0200
+++ src.debug/kernel/Makefile.in        2012-07-12 16:51:29.923359810 +0200
@@ -49,7 +49,7 @@
 CXXFLAGS       = @CXXFLAGS@ ${PIPE} 
 CXXTEMPLFLAGS  = @CXXTEMPLFLAGS@
 CPPFLAGS       = -I${srcdir} -I.. -I@prefix@  @CPPFLAGS@ 
-DEFS           = -DNDEBUG -DOM_NDEBUG -D@SING_UNAME@ @DEFS@
+DEFS           = -DOM_NDEBUG -D@SING_UNAME@ @DEFS@
 LDFLAGS                = @LDFLAGS@
 LD_DYN_FLAGS   = @LD_DYN_FLAGS@
 SFLAGS         = @SFLAGS@
@@ -64,7 +64,7 @@
 LIBS           = -lm @NEED_LIBS@ 
 else
 # for the 2-0-* versions under Windows, we don't need gdbm, readline and ncurses
-LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc_ndebug
+LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc
 #LIBS          = -lsingfac -lsingcf -lgmp
 endif
 MP_LIBS                = @MP_LIBS@
```
Isn't the diff file formatted wrongly? I am talking about the paths "src/kernel" and "src.debug/kernel", which do not exist.



---

archive/issue_comments_223515.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nConcerning ndebug: There is quite a number of files in `upstream/singular-3.1.6/latest/` mentioning `-lomalloc_ndebug`. Probably we should change all of them to only mention `-lomalloc`.",
    "created_at": "2014-09-10T20:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223515",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

Concerning ndebug: There is quite a number of files in `upstream/singular-3.1.6/latest/` mentioning `-lomalloc_ndebug`. Probably we should change all of them to only mention `-lomalloc`.



---

archive/issue_comments_223516.json:
```json
{
    "body": "Branch: **[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)**",
    "created_at": "2014-09-10T21:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223516",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)**



---

archive/issue_comments_223517.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI have pushed my changes, so that someone else may have a change to see how to solve the `-lomalloc_ndebug` problem.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b426226860ce1ad09ece1ee40fca58ccf53cc1e4\"><code>b426226</code></a></td><td><code>Make it so that the patches to Singular apply with SAGE_DEBUG=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f5ee733324e68b966be905d107823d91b487022\"><code>3f5ee73</code></a></td><td><code>Define omalloc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a\"><code>bd802db</code></a></td><td><code>Slight improvement of a patch</code></td></tr></table>\n",
    "created_at": "2014-09-10T21:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223517",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

I have pushed my changes, so that someone else may have a change to see how to solve the `-lomalloc_ndebug` problem.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b426226860ce1ad09ece1ee40fca58ccf53cc1e4"><code>b426226</code></a></td><td><code>Make it so that the patches to Singular apply with SAGE_DEBUG=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f5ee733324e68b966be905d107823d91b487022"><code>3f5ee73</code></a></td><td><code>Define omalloc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a"><code>bd802db</code></a></td><td><code>Slight improvement of a patch</code></td></tr></table>




---

archive/issue_comments_223518.json:
```json
{
    "body": "Commit: **[`bd802db`](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)**",
    "created_at": "2014-09-10T21:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223518",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[`bd802db`](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)**



---

archive/issue_comments_223519.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nPatches are applied with `-p1`, so the first path component is stripped off.",
    "created_at": "2014-09-10T22:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223519",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Patches are applied with `-p1`, so the first path component is stripped off.



---

archive/issue_comments_223520.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@vbraun](#comment%3A12):\n> Patches are applied with `-p1`, so the first path component is stripped off.\n\nOK, but I think it doesn't hurt that in the latest commit I change the path names according to what is done in the other patches (source path `a/...` versus target path `b/...`).\n\nI got more Info from Hans. There is a debug version of omalloc, but it would still be omalloc. Hence, valgrind would not see details but would only see large pages allocated. So, he recommends to stick with xalloc (which is a compatibility layer on top of malloc).\n\nIf we would have Singular 4-x in Sage (we only have 3-1-6), xalloc would be part of the sources. Hence, all our current patching for the debug version wouldn't be needed.\n\nAs for `-lomalloc_ndebug`: Hans suggests to change the makefile so that a module `libomalloc_ndebug.so` rather than `libomalloc.so` is created. To my understanding, it would also allow to remove other parts of our patches, where we replace `-lomalloc_ndebug` by `-lomalloc`.",
    "created_at": "2014-09-11T10:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223520",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@vbraun](#comment%3A12):
> Patches are applied with `-p1`, so the first path component is stripped off.

OK, but I think it doesn't hurt that in the latest commit I change the path names according to what is done in the other patches (source path `a/...` versus target path `b/...`).

I got more Info from Hans. There is a debug version of omalloc, but it would still be omalloc. Hence, valgrind would not see details but would only see large pages allocated. So, he recommends to stick with xalloc (which is a compatibility layer on top of malloc).

If we would have Singular 4-x in Sage (we only have 3-1-6), xalloc would be part of the sources. Hence, all our current patching for the debug version wouldn't be needed.

As for `-lomalloc_ndebug`: Hans suggests to change the makefile so that a module `libomalloc_ndebug.so` rather than `libomalloc.so` is created. To my understanding, it would also allow to remove other parts of our patches, where we replace `-lomalloc_ndebug` by `-lomalloc`.



---

archive/issue_comments_223521.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nlibm4ri fails its self-tests when debug is on, this is #16966.",
    "created_at": "2014-09-11T12:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223521",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

libm4ri fails its self-tests when debug is on, this is #16966.



---

archive/issue_comments_223522.json:
```json
{
    "body": "Changed commit from **[`bd802db`](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)** to **[`9c31893`](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)**",
    "created_at": "2014-09-11T12:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223522",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd802db`](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)** to **[`9c31893`](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)**



---

archive/issue_comments_223523.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955\"><code>9c31893</code></a></td><td><code>Define a missing symbol and change the module name: Singular with xalloc builds</code></td></tr></table>\n",
    "created_at": "2014-09-11T12:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223523",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955"><code>9c31893</code></a></td><td><code>Define a missing symbol and change the module name: Singular with xalloc builds</code></td></tr></table>




---

archive/issue_comments_223524.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223524",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_comments_223525.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nMeanwhile I got Singular's xalloc version (which is better for valgrinding than the debug version of omalloc) to build. Now I am trying to build the rest of Sage, but expect that I will soon run into the issue tracked at #16966...\n\nIn the latest commit I added one missing function (which is empty in the debug version) and I changed the module name from `libomalloc.so` into `libomalloc_ndebug.so`. It may seem strange for someone that the DEBUG version is named `..._ndebug`. If that's a problem then (s)he may change it, so that it still works...\n\nI am trying to continue building, potentially with m4ri in non-debug mode. I guess for now one can say that it needs review.",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223525",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Meanwhile I got Singular's xalloc version (which is better for valgrinding than the debug version of omalloc) to build. Now I am trying to build the rest of Sage, but expect that I will soon run into the issue tracked at #16966...

In the latest commit I added one missing function (which is empty in the debug version) and I changed the module name from `libomalloc.so` into `libomalloc_ndebug.so`. It may seem strange for someone that the DEBUG version is named `..._ndebug`. If that's a problem then (s)he may change it, so that it still works...

I am trying to continue building, potentially with m4ri in non-debug mode. I guess for now one can say that it needs review.



---

archive/issue_comments_223526.json:
```json
{
    "body": "Upstream: **None of the above - read trac for reasoning.**",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223526",
    "user": "https://github.com/simon-king-jena"
}
```

Upstream: **None of the above - read trac for reasoning.**



---

archive/issue_events_239938.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T12:16:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239938"
}
```



---

archive/issue_comments_223527.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nFor the record, m4ri builds fine if you don't set `SAGE_CHECK=yes`",
    "created_at": "2014-09-11T12:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223527",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

For the record, m4ri builds fine if you don't set `SAGE_CHECK=yes`



---

archive/issue_comments_223528.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...",
    "created_at": "2014-09-11T12:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223528",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...



---

archive/issue_comments_223529.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@vbraun](#comment%3A18):\n> I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...\n\nIt has built for me (without `SAGE_CHECK=yes`), but I suppose that `libomalloc` was present from previous attempts to build. So, let's try \"make distclean\" and try again...",
    "created_at": "2014-09-11T15:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223529",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@vbraun](#comment%3A18):
> I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...

It has built for me (without `SAGE_CHECK=yes`), but I suppose that `libomalloc` was present from previous attempts to build. So, let's try "make distclean" and try again...



---

archive/issue_events_239939.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T15:18:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239939"
}
```



---

archive/issue_events_239940.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T15:18:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239940"
}
```



---

archive/issue_comments_223530.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7\"><code>f4c6701</code></a></td><td><code>Replace lomalloc by lomalloc_ndebug everywhere in debug version</code></td></tr></table>\n",
    "created_at": "2014-09-11T22:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223530",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7"><code>f4c6701</code></a></td><td><code>Replace lomalloc by lomalloc_ndebug everywhere in debug version</code></td></tr></table>




---

archive/issue_comments_223531.json:
```json
{
    "body": "Changed commit from **[`9c31893`](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)** to **[`f4c6701`](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)**",
    "created_at": "2014-09-11T22:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223531",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9c31893`](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)** to **[`f4c6701`](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)**



---

archive/issue_events_239941.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T22:24:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239941"
}
```



---

archive/issue_events_239942.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T22:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239942"
}
```



---

archive/issue_comments_223532.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAfter make distclean I could reproduce the build errors.\n\nThe latest commit provides a solution. Perhaps you don't like it, for aesthetic reasons (\"the debug version uses a module called omalloc_ndebug\"), but it works. I also had to resolve a conflict with `cygwin_64.patch` to achieve it.",
    "created_at": "2014-09-11T22:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223532",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">comment:21</div>

After make distclean I could reproduce the build errors.

The latest commit provides a solution. Perhaps you don't like it, for aesthetic reasons ("the debug version uses a module called omalloc_ndebug"), but it works. I also had to resolve a conflict with `cygwin_64.patch` to achieve it.



---

archive/issue_comments_223533.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI'll give it a spin.\n\nIMHO we don't have to win beauty contests with the debug version...",
    "created_at": "2014-09-11T23:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223533",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

I'll give it a spin.

IMHO we don't have to win beauty contests with the debug version...



---

archive/issue_comments_223534.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nStill doesn't build for me:\n\n```\ng++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \\\n  -o Singular \\\n  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\\\n  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/home/vbraun/Sage/git-develop/local/kernel -L../kernel -lkernel_g -L/home/vbraun/Sage/git-develop/local/lib  -L/home/vbraun/Sage/git-develop/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -ltermcap -lnsl -lm  -lnsl -lbsd  -lomalloc -lpthread  ../kernel/mmalloc.o \n/usr/bin/ld: cannot find -lomalloc\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [Singular] Error 1\nmake[1]: Leaving directory `/home/vbraun/Sage/git-develop/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/Singular'\nmake: *** [install-nolns] Error 1\nUnable to build and install Singular\nError building Singular (error in build_singular).\n```",
    "created_at": "2014-09-12T12:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223534",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

Still doesn't build for me:

```
g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \
  -o Singular \
  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\
  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/home/vbraun/Sage/git-develop/local/kernel -L../kernel -lkernel_g -L/home/vbraun/Sage/git-develop/local/lib  -L/home/vbraun/Sage/git-develop/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -ltermcap -lnsl -lm  -lnsl -lbsd  -lomalloc -lpthread  ../kernel/mmalloc.o 
/usr/bin/ld: cannot find -lomalloc
collect2: error: ld returned 1 exit status
make[1]: *** [Singular] Error 1
make[1]: Leaving directory `/home/vbraun/Sage/git-develop/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/Singular'
make: *** [install-nolns] Error 1
Unable to build and install Singular
Error building Singular (error in build_singular).
```



---

archive/issue_comments_223535.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@vbraun](#comment%3A23):\n> Still doesn't build for me:\n\nSeriously? It did build for me, even though I did `make distclean` after making the makefile make `omalloc_ndebug` instead of `omalloc`.\n\n> ```\n> g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \\\n>   -o Singular \\\n>   tesths.cc iparith.o mpsr_Tok.o claptmpl.o\\...\n> ```\n\nThe name `tesths.cc` suggests that this is for testing. So, did you build with `SAGE_CHECK` and `SAGE_DEBUG` together?",
    "created_at": "2014-09-12T12:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223535",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@vbraun](#comment%3A23):
> Still doesn't build for me:

Seriously? It did build for me, even though I did `make distclean` after making the makefile make `omalloc_ndebug` instead of `omalloc`.

> ```
> g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \
>   -o Singular \
>   tesths.cc iparith.o mpsr_Tok.o claptmpl.o\...
> ```

The name `tesths.cc` suggests that this is for testing. So, did you build with `SAGE_CHECK` and `SAGE_DEBUG` together?



---

archive/issue_comments_223536.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAre you using 32bit? I did not enable `SAGE_CHECKS`.",
    "created_at": "2014-09-12T13:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223536",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

Are you using 32bit? I did not enable `SAGE_CHECKS`.



---

archive/issue_comments_223537.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)** to **[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)**",
    "created_at": "2014-09-12T13:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223537",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)** to **[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)**



---

archive/issue_comments_223538.json:
```json
{
    "body": "Changed commit from **[`f4c6701`](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)** to **[`25b66c3`](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)**",
    "created_at": "2014-09-12T13:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223538",
    "user": "https://github.com/simon-king-jena"
}
```

Changed commit from **[`f4c6701`](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)** to **[`25b66c3`](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)**



---

archive/issue_comments_223539.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@vbraun](#comment%3A25):\n> Are you using 32bit? I did not enable `SAGE_CHECKS`.\n\nNo, I am on 64 bit. Is the file you mentioned only built on 32 bit??\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987\"><code>25b66c3</code></a></td><td><code>Switch yet another -lomalloc</code></td></tr></table>\n",
    "created_at": "2014-09-12T13:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223539",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@vbraun](#comment%3A25):
> Are you using 32bit? I did not enable `SAGE_CHECKS`.

No, I am on 64 bit. Is the file you mentioned only built on 32 bit??

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987"><code>25b66c3</code></a></td><td><code>Switch yet another -lomalloc</code></td></tr></table>




---

archive/issue_comments_223540.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOK, the change sounds reasonable.",
    "created_at": "2014-09-12T13:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223540",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:28" align="right">comment:28</div>

OK, the change sounds reasonable.



---

archive/issue_comments_223541.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNo, I'm on x86 too. The issue comes from the `test \"$ac_cv_sizeof_voidp\" != 4;` so I thought it might be a bitwidth thing.",
    "created_at": "2014-09-12T13:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223541",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">comment:29</div>

No, I'm on x86 too. The issue comes from the `test "$ac_cv_sizeof_voidp" != 4;` so I thought it might be a bitwidth thing.



---

archive/issue_comments_223542.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nBy the way: I did not run the full test suite yet (now I am rebuilding from scratch), but found a surprisingly high number of test errors, given that not so long time ago the debug version passed *all* tests.",
    "created_at": "2014-09-12T13:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223542",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:30" align="right">comment:30</div>

By the way: I did not run the full test suite yet (now I am rebuilding from scratch), but found a surprisingly high number of test errors, given that not so long time ago the debug version passed *all* tests.



---

archive/issue_comments_223543.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nMost failures seem to be from non-commutative stuff...",
    "created_at": "2014-09-12T14:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223543",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

Most failures seem to be from non-commutative stuff...



---

archive/issue_comments_223544.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFor example:\n\n```\n(gdb) break dReportError\nBreakpoint 1 at 0x7fffcc699a71: file dError.c, line 28.\n(gdb) cont\nContinuing.\n\nsage: F.<x,y,z> = FreeAlgebra(QQ, implementation='letterplace')\nsage: I = F*[x*y+y*z,x^2+x*y-y*x-y^2]*F\nsage: Q.<a,b,c> = F.quo(I); Q\nQuotient of Free Associative Unital Algebra on 3 generators (x, y, z) over Rational Field by the ideal (x*y + y*z, x*x + x*y - y*x - y*y)\nsage: a^3\n\nBreakpoint 1, dReportError (fmt=0x7fffcc8b2679 \"S_2_R[%d]=%d != T[%d].i_r=%d\\n\") at dError.c:28\n28\tdError.c: No such file or directory.\n(gdb) bt\n#0  dReportError (fmt=0x7fffcc8b2679 \"S_2_R[%d]=%d != T[%d].i_r=%d\\n\") at dError.c:28\n#1  0x00007fffcc5b860a in kTest_TS (strat=0x2d09920) at kutil.cc:861\n#2  0x00007fffcc5b0598 in bbaShift (F=0x18d0638, Q=0x0, w=0x0, hilb=0x0, strat=0x2d09920, uptodeg=3, lV=3)\n    at kstd2.cc:1724\n#3  0x00007fffcc5a79ed in kStdShift (F=0x18d0638, Q=0x0, h=isHomog, w=0x0, hilb=0x0, syzComp=0, \n    newIdeal=0, vw=0x0, uptodeg=3, lV=3) at kstd1.cc:1912\n#4  0x00007fffcc5b09ce in freegb (I=0x18d0638, uptodeg=3, lVblock=3) at kstd2.cc:1823\n#5  0x00007fffcc4e2301 in jjSYSTEM (res=0x2d06588, args=0x18d0548) at extra.cc:1370\n#6  0x00007fffcc4a06b5 in iiExprArithM (res=0x2d06588, a=0x18d0548, op=496) at iparith.cc:8321\n#7  0x00007fffcb9c3eb9 in __pyx_f_4sage_4libs_8singular_8function_17KernelCallHandler_handle_call (\n    __pyx_v_self=0x7fffb80d2880, __pyx_v_argument_list=0x7fffb80d1860, __pyx_optional_args=0x7fffffff7ef0)\n    at build/cythonized/sage/libs/singular/function.cpp:12083\n[...]\n(gdb) cy bt\n[...]\n#78 0x00007ffff7cd7b2d in _reduce_() at /home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/rings/quotient_ring_element.py:118\n       118            self.__rep = I.reduce(self.__rep)\n#83 0x00007fffb5ae04ce in reduce() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:306\n       306        def reduce(self, G):\n#87 0x00007fffb5f90e45 in normal_form() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:733\n       733        def normal_form(self,I):\n#93 0x00007fffb5ad9bb4 in groebner_basis() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:187\n---Type <return> to continue, or q <return> to quit---\n       187        def groebner_basis(self, degbound=None):\n#96 0x00007fffcb9c5095 in __call__() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1185\n      1185        def __call__(self, *args, ring=None, bint interruptible=True, attributes=None):\n#98 0x00007fffcb9ca76b in call_function() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1462\n      1462                _res = self.call_handler.handle_call(argument_list, si_ring)\n#99 0x00007fffcb9c3d15 in handle_call() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1093\n      1093                iiExprArithM(res, argument_list.args, self.cmd_n)\n#100 0x00007fffcc4a029d in iiExprArithM()\n\n```",
    "created_at": "2014-09-12T15:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223544",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

For example:

```
(gdb) break dReportError
Breakpoint 1 at 0x7fffcc699a71: file dError.c, line 28.
(gdb) cont
Continuing.

sage: F.<x,y,z> = FreeAlgebra(QQ, implementation='letterplace')
sage: I = F*[x*y+y*z,x^2+x*y-y*x-y^2]*F
sage: Q.<a,b,c> = F.quo(I); Q
Quotient of Free Associative Unital Algebra on 3 generators (x, y, z) over Rational Field by the ideal (x*y + y*z, x*x + x*y - y*x - y*y)
sage: a^3

Breakpoint 1, dReportError (fmt=0x7fffcc8b2679 "S_2_R[%d]=%d != T[%d].i_r=%d\n") at dError.c:28
28	dError.c: No such file or directory.
(gdb) bt
#0  dReportError (fmt=0x7fffcc8b2679 "S_2_R[%d]=%d != T[%d].i_r=%d\n") at dError.c:28
#1  0x00007fffcc5b860a in kTest_TS (strat=0x2d09920) at kutil.cc:861
#2  0x00007fffcc5b0598 in bbaShift (F=0x18d0638, Q=0x0, w=0x0, hilb=0x0, strat=0x2d09920, uptodeg=3, lV=3)
    at kstd2.cc:1724
#3  0x00007fffcc5a79ed in kStdShift (F=0x18d0638, Q=0x0, h=isHomog, w=0x0, hilb=0x0, syzComp=0, 
    newIdeal=0, vw=0x0, uptodeg=3, lV=3) at kstd1.cc:1912
#4  0x00007fffcc5b09ce in freegb (I=0x18d0638, uptodeg=3, lVblock=3) at kstd2.cc:1823
#5  0x00007fffcc4e2301 in jjSYSTEM (res=0x2d06588, args=0x18d0548) at extra.cc:1370
#6  0x00007fffcc4a06b5 in iiExprArithM (res=0x2d06588, a=0x18d0548, op=496) at iparith.cc:8321
#7  0x00007fffcb9c3eb9 in __pyx_f_4sage_4libs_8singular_8function_17KernelCallHandler_handle_call (
    __pyx_v_self=0x7fffb80d2880, __pyx_v_argument_list=0x7fffb80d1860, __pyx_optional_args=0x7fffffff7ef0)
    at build/cythonized/sage/libs/singular/function.cpp:12083
[...]
(gdb) cy bt
[...]
#78 0x00007ffff7cd7b2d in _reduce_() at /home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/rings/quotient_ring_element.py:118
       118            self.__rep = I.reduce(self.__rep)
#83 0x00007fffb5ae04ce in reduce() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:306
       306        def reduce(self, G):
#87 0x00007fffb5f90e45 in normal_form() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:733
       733        def normal_form(self,I):
#93 0x00007fffb5ad9bb4 in groebner_basis() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:187
---Type <return> to continue, or q <return> to quit---
       187        def groebner_basis(self, degbound=None):
#96 0x00007fffcb9c5095 in __call__() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1185
      1185        def __call__(self, *args, ring=None, bint interruptible=True, attributes=None):
#98 0x00007fffcb9ca76b in call_function() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1462
      1462                _res = self.call_handler.handle_call(argument_list, si_ring)
#99 0x00007fffcb9c3d15 in handle_call() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1093
      1093                iiExprArithM(res, argument_list.args, self.cmd_n)
#100 0x00007fffcc4a029d in iiExprArithM()

```



---

archive/issue_comments_223545.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI can reproduce some failures just in Singular, so I've asked here: https://groups.google.com/d/msg/libsingular-devel/4fL9NKCVGw0/mlOd_vzNSG8J",
    "created_at": "2014-09-12T17:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223545",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

I can reproduce some failures just in Singular, so I've asked here: https://groups.google.com/d/msg/libsingular-devel/4fL9NKCVGw0/mlOd_vzNSG8J



---

archive/issue_comments_223546.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3\"><code>a38e790</code></a></td><td><code>Fix dangling C pointer to Python temporary</code></td></tr></table>\n",
    "created_at": "2014-09-12T20:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223546",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3"><code>a38e790</code></a></td><td><code>Fix dangling C pointer to Python temporary</code></td></tr></table>




---

archive/issue_comments_223547.json:
```json
{
    "body": "Changed commit from **[`25b66c3`](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)** to **[`a38e790`](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)**",
    "created_at": "2014-09-12T20:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25b66c3`](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)** to **[`a38e790`](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)**



---

archive/issue_comments_223548.json:
```json
{
    "body": "Changed commit from **[`a38e790`](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)** to **[`0802e93`](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)**",
    "created_at": "2014-09-13T18:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223548",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a38e790`](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)** to **[`0802e93`](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)**



---

archive/issue_comments_223549.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cd65a8113c714a718679ce9a6b03a766052ad2e\"><code>1cd65a8</code></a></td><td><code>Remove some failing Singular debug statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af\"><code>0802e93</code></a></td><td><code>Reduce size of doctest</code></td></tr></table>\n",
    "created_at": "2014-09-13T18:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223549",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cd65a8113c714a718679ce9a6b03a766052ad2e"><code>1cd65a8</code></a></td><td><code>Remove some failing Singular debug statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af"><code>0802e93</code></a></td><td><code>Reduce size of doctest</code></td></tr></table>




---

archive/issue_comments_223550.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI think some internal Singular checks that get enabled with `NDEBUG` are too strict, I've added a patch removing these. I also almost despaired in `fast_map` until I noticed that `idTest` incorrectly assumes that `currRing` is set.\n\nNow `make ptest` passes.",
    "created_at": "2014-09-13T18:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223550",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:36" align="right">comment:36</div>

I think some internal Singular checks that get enabled with `NDEBUG` are too strict, I've added a patch removing these. I also almost despaired in `fast_map` until I noticed that `idTest` incorrectly assumes that `currRing` is set.

Now `make ptest` passes.



---

archive/issue_comments_223551.json:
```json
{
    "body": "Changed commit from **[`0802e93`](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)** to **[`37fda1d`](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)**",
    "created_at": "2014-09-13T20:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223551",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0802e93`](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)** to **[`37fda1d`](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)**



---

archive/issue_comments_223552.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62\"><code>37fda1d</code></a></td><td><code>Reduce scale of some more huge doctests</code></td></tr></table>\n",
    "created_at": "2014-09-13T20:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223552",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62"><code>37fda1d</code></a></td><td><code>Reduce scale of some more huge doctests</code></td></tr></table>




---

archive/issue_comments_223553.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nComputing the invariants of an order-480 group after an order-48 group really only checks that you have a fast computer.\n\nThis fixes the last timeout in the `make ptestlong` for me.",
    "created_at": "2014-09-13T20:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223553",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:38" align="right">comment:38</div>

Computing the invariants of an order-480 group after an order-48 group really only checks that you have a fast computer.

This fixes the last timeout in the `make ptestlong` for me.



---

archive/issue_comments_223554.json:
```json
{
    "body": "Changed author from **Simon King** to **Simon King, Volker Braun**",
    "created_at": "2014-09-13T20:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223554",
    "user": "https://github.com/vbraun"
}
```

Changed author from **Simon King** to **Simon King, Volker Braun**



---

archive/issue_comments_223555.json:
```json
{
    "body": "Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. No feedback yet.**",
    "created_at": "2014-09-13T20:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223555",
    "user": "https://github.com/vbraun"
}
```

Changed upstream from **None of the above - read trac for reasoning.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_223556.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nHi Volker, I am not happy with the two commits to reduce size of doctests.\n\nIt is said in the doc that `below we do the Fateman benchmark over the finite field of order 32003`, but I guess with your changes the statement becomes wrong, it isn't the Fateman benchmark if the exponent is only 10 and not 20.\n\nAlso I don't see why a test that is marked \"long\" anyway should be removed just because the debug version slows it down too much.\n\nBy the way, how long does this test take in non-debug version? It is stated that it used to take 12 seconds, four years ago. And 12 seconds is totally fine for a long test, IMHO.",
    "created_at": "2014-09-13T20:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223556",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:41" align="right">comment:41</div>

Hi Volker, I am not happy with the two commits to reduce size of doctests.

It is said in the doc that `below we do the Fateman benchmark over the finite field of order 32003`, but I guess with your changes the statement becomes wrong, it isn't the Fateman benchmark if the exponent is only 10 and not 20.

Also I don't see why a test that is marked "long" anyway should be removed just because the debug version slows it down too much.

By the way, how long does this test take in non-debug version? It is stated that it used to take 12 seconds, four years ago. And 12 seconds is totally fine for a long test, IMHO.



---

archive/issue_comments_223557.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThey are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.\n\nPut differently, would you rather \na) have a buildbot with `SAGE_DEBUG`, or \nb) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.",
    "created_at": "2014-09-13T20:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223557",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">comment:42</div>

They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.

Put differently, would you rather 
a) have a buildbot with `SAGE_DEBUG`, or 
b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.



---

archive/issue_comments_223558.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@vbraun](#comment%3A42):\n> They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.\n> \n> Put differently, would you rather \n> a) have a buildbot with `SAGE_DEBUG`, or \n> b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.\n\nI'd rather have c): A buildbot with `SAGE_DEBUG` that only runs the tests that are not marked long.",
    "created_at": "2014-09-13T20:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223558",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@vbraun](#comment%3A42):
> They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.
> 
> Put differently, would you rather 
> a) have a buildbot with `SAGE_DEBUG`, or 
> b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.

I'd rather have c): A buildbot with `SAGE_DEBUG` that only runs the tests that are not marked long.



---

archive/issue_comments_223559.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI disagree. Doctests are not benchmarks. Doctests coverage is more important than benchvertising. We should have a framework for benchmarks in addition to doctests, but stuffing benchmarks into doctests is counterproductive.",
    "created_at": "2014-09-13T20:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223559",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">comment:44</div>

I disagree. Doctests are not benchmarks. Doctests coverage is more important than benchvertising. We should have a framework for benchmarks in addition to doctests, but stuffing benchmarks into doctests is counterproductive.



---

archive/issue_comments_223560.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI can not tell why the patchbot scripts are complaining. In any case, I get the following test failures:\n\n```\nsage -t src/sage/stats/hmm/hmm.pyx\n    [118 tests, 2 failures, 1.70 s]\n...\nsage -t src/sage/gsl/probability_distribution.pyx\n    [207 tests, 3 failures, 11.09 s]\n...\nsage -t src/sage/plot/plot3d/transform.pyx\n    [25 tests, 1 failure, 6.27 s]\n```\n\nUnfortunately it doesn't say what the failure is. Why does it not?",
    "created_at": "2014-09-14T07:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223560",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:45" align="right">comment:45</div>

I can not tell why the patchbot scripts are complaining. In any case, I get the following test failures:

```
sage -t src/sage/stats/hmm/hmm.pyx
    [118 tests, 2 failures, 1.70 s]
...
sage -t src/sage/gsl/probability_distribution.pyx
    [207 tests, 3 failures, 11.09 s]
...
sage -t src/sage/plot/plot3d/transform.pyx
    [25 tests, 1 failure, 6.27 s]
```

Unfortunately it doesn't say what the failure is. Why does it not?



---

archive/issue_comments_223561.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nTry `sage -t --verbose`. Also, I've never seen a failure to report whats wrong. Can you post the full log?",
    "created_at": "2014-09-14T11:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223561",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:46" align="right">comment:46</div>

Try `sage -t --verbose`. Also, I've never seen a failure to report whats wrong. Can you post the full log?



---

archive/issue_comments_223562.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@vbraun](#comment%3A46):\n> Try `sage -t --verbose`.\n\n```\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 282, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel\nFailed example:\n    m\nExpected:\n    Discrete Hidden Markov Model with 2 States and 2 Emissions\n    Transition matrix:\n    [1.0134345614...e-70               1.0]\n    [              1.0 3.997435271...e-19]\n    Emission matrix:\n    [7.3802215662...e-54               1.0]\n    [              1.0  3.99743526...e-19]\n    Initial probabilities: [0.0000, 1.0000]\nGot:\n    Discrete Hidden Markov Model with 2 States and 2 Emissions\n    Transition matrix:\n    [1.0134345614745788e-70                    1.0]\n    [                   1.0 3.9974352713558623e-19]\n    Emission matrix:\n    [ 7.380221566254936e-54                    1.0]\n    [                   1.0 3.9974352626002193e-19]\n    Initial probabilities: [0.0000, 1.0000]\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 1236, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel.baum_welch\nFailed example:\n    m.baum_welch(v)\nExpected:\n    (-66.7823606592935..., 100)\nGot:\n    (-66.7823606592936, 100)\n```\n\n```\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 364, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.cum_distribution_function_inv(.5)\nExpected:\n    3.532230067546424\nGot:\n    3.5322300675464247\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 402, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.distribution_function(0)\nExpected:\n    0.3183098861837906\nGot:\n    0.3183098861837905\nTrying (line 404):    T.cum_distribution_function(1)\nExpecting:\n    0.7499999999999998\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 404, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.cum_distribution_function(1)\nExpected:\n    0.7499999999999998\nGot:\n    0.75\n```\n\n```\n*********************************************************************\nFile \"src/sage/plot/plot3d/transform.pyx\", line 179, in sage.plot.plot3d.transform.rotate_arbitrary\nFailed example:\n    rotate_arbitrary((1,1,1), 2*pi/3) * vector(RDF, (1,2,3))  # rel tol 1e-15\nExpected:\n    (1.9999999999999996, 2.9999999999999996, 0.9999999999999999)\nGot:\n    (2.000000000000001, 3.0000000000000013, 1.000000000000001)\nTolerance exceeded in 1 of 3:\n    0.9999999999999999 vs 1.000000000000001, tolerance 1e-15 > 1e-15\n```\n\n> Also, I've never seen a failure to report whats wrong.\n\nYes, but I have always seen a failure to report what has failed.\n\nBut here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.\n\n> Can you post the full log?\n\nNot before Monday (bandwidth).\n\nAnyway, the verbose output above indicates that we have numerical noise, not related with Singular. By the way, if that's relevant: In my local branch I have merged your gdb branch from #16978.",
    "created_at": "2014-09-14T13:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223562",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@vbraun](#comment%3A46):
> Try `sage -t --verbose`.

```
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 282, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel
Failed example:
    m
Expected:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.0134345614...e-70               1.0]
    [              1.0 3.997435271...e-19]
    Emission matrix:
    [7.3802215662...e-54               1.0]
    [              1.0  3.99743526...e-19]
    Initial probabilities: [0.0000, 1.0000]
Got:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.0134345614745788e-70                    1.0]
    [                   1.0 3.9974352713558623e-19]
    Emission matrix:
    [ 7.380221566254936e-54                    1.0]
    [                   1.0 3.9974352626002193e-19]
    Initial probabilities: [0.0000, 1.0000]
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 1236, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel.baum_welch
Failed example:
    m.baum_welch(v)
Expected:
    (-66.7823606592935..., 100)
Got:
    (-66.7823606592936, 100)
```

```
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 364, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.cum_distribution_function_inv(.5)
Expected:
    3.532230067546424
Got:
    3.5322300675464247
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 402, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.distribution_function(0)
Expected:
    0.3183098861837906
Got:
    0.3183098861837905
Trying (line 404):    T.cum_distribution_function(1)
Expecting:
    0.7499999999999998
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 404, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.cum_distribution_function(1)
Expected:
    0.7499999999999998
Got:
    0.75
```

```
*********************************************************************
File "src/sage/plot/plot3d/transform.pyx", line 179, in sage.plot.plot3d.transform.rotate_arbitrary
Failed example:
    rotate_arbitrary((1,1,1), 2*pi/3) * vector(RDF, (1,2,3))  # rel tol 1e-15
Expected:
    (1.9999999999999996, 2.9999999999999996, 0.9999999999999999)
Got:
    (2.000000000000001, 3.0000000000000013, 1.000000000000001)
Tolerance exceeded in 1 of 3:
    0.9999999999999999 vs 1.000000000000001, tolerance 1e-15 > 1e-15
```

> Also, I've never seen a failure to report whats wrong.

Yes, but I have always seen a failure to report what has failed.

But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.

> Can you post the full log?

Not before Monday (bandwidth).

Anyway, the verbose output above indicates that we have numerical noise, not related with Singular. By the way, if that's relevant: In my local branch I have merged your gdb branch from #16978.



---

archive/issue_comments_223563.json:
```json
{
    "body": "Changed branch from **[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)** to **[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)**",
    "created_at": "2014-09-15T18:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223563",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)** to **[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)**



---

archive/issue_comments_223564.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nHans sent a patch for one of the debug build issues to libsingular-devel, I've added it and removed my patch that disabled various checks. If he manages to fix the rest then we might not need my patch...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75940b2a4514a58d9596de0b653482e7bac26fe4\"><code>75940b2</code></a></td><td><code>Reduce size of doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d737eb49be7615ddb1267c209fac2403fd79d9bb\"><code>d737eb4</code></a></td><td><code>Reduce scale of some more huge doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43\"><code>3dedecd</code></a></td><td><code>Fix erroneous \"mixed poly/vector\" error message</code></td></tr></table>\n",
    "created_at": "2014-09-15T21:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223564",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">comment:49</div>

Hans sent a patch for one of the debug build issues to libsingular-devel, I've added it and removed my patch that disabled various checks. If he manages to fix the rest then we might not need my patch...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75940b2a4514a58d9596de0b653482e7bac26fe4"><code>75940b2</code></a></td><td><code>Reduce size of doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d737eb49be7615ddb1267c209fac2403fd79d9bb"><code>d737eb4</code></a></td><td><code>Reduce scale of some more huge doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43"><code>3dedecd</code></a></td><td><code>Fix erroneous "mixed poly/vector" error message</code></td></tr></table>




---

archive/issue_comments_223565.json:
```json
{
    "body": "Changed commit from **[`37fda1d`](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)** to **[`3dedecd`](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)**",
    "created_at": "2014-09-15T21:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223565",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`37fda1d`](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)** to **[`3dedecd`](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)**



---

archive/issue_events_239943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-15T21:16:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239943"
}
```



---

archive/issue_events_239944.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-15T21:16:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239944"
}
```



---

archive/issue_comments_223566.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563\"><code>ceb83f9</code></a></td><td><code>Fix slimgb and FreeAlgebra errors</code></td></tr></table>\n",
    "created_at": "2014-09-16T16:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563"><code>ceb83f9</code></a></td><td><code>Fix slimgb and FreeAlgebra errors</code></td></tr></table>




---

archive/issue_comments_223567.json:
```json
{
    "body": "Changed commit from **[`3dedecd`](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)** to **[`ceb83f9`](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)**",
    "created_at": "2014-09-16T16:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3dedecd`](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)** to **[`ceb83f9`](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)**



---

archive/issue_comments_223568.json:
```json
{
    "body": "Changed commit from **[`ceb83f9`](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)** to **[`9233d05`](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)**",
    "created_at": "2014-09-18T12:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223568",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ceb83f9`](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)** to **[`9233d05`](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)**



---

archive/issue_comments_223569.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77\"><code>9233d05</code></a></td><td><code>Fix quo_rem and macaulay_resultant errors</code></td></tr></table>\n",
    "created_at": "2014-09-18T12:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223569",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77"><code>9233d05</code></a></td><td><code>Fix quo_rem and macaulay_resultant errors</code></td></tr></table>




---

archive/issue_events_239945.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-22T15:02:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239945"
}
```



---

archive/issue_events_239946.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-22T15:02:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239946"
}
```



---

archive/issue_comments_223570.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.",
    "created_at": "2014-09-22T15:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223570",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">comment:52</div>

I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.



---

archive/issue_comments_223571.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!\n+\n+I suppose the fix will eventually be in a stable upstream release.\n``````\n",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223571",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!
+
+I suppose the fix will eventually be in a stable upstream release.
``````




---

archive/issue_comments_223572.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@vbraun](#comment%3A52):\n> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.\n\nExcellent!",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223572",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@vbraun](#comment%3A52):
> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.

Excellent!



---

archive/issue_comments_223573.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223573",
    "user": "https://github.com/simon-king-jena"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_223574.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@vbraun](#comment%3A52):\n> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.\n\nThe branch did not change since four days. So, is it the case that the branch contains all of Hans' patches, or do you need to push another commit?",
    "created_at": "2014-09-22T15:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223574",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@vbraun](#comment%3A52):
> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.

The branch did not change since four days. So, is it the case that the branch contains all of Hans' patches, or do you need to push another commit?



---

archive/issue_comments_223575.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI was just busy elsewhere...",
    "created_at": "2014-09-22T15:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223575",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:55" align="right">comment:55</div>

I was just busy elsewhere...



---

archive/issue_comments_223576.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nimho there is little to review here... it works, and most of the patches come straight from upstream.",
    "created_at": "2014-09-26T22:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223576",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:56" align="right">comment:56</div>

imho there is little to review here... it works, and most of the patches come straight from upstream.



---

archive/issue_comments_223577.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI'll try to review it, although I am one of the authors...",
    "created_at": "2014-09-30T12:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223577",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:57" align="right">comment:57</div>

I'll try to review it, although I am one of the authors...



---

archive/issue_comments_223578.json:
```json
{
    "body": "Changed branch from **[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)** to **[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)**",
    "created_at": "2014-09-30T14:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223578",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)** to **[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)**



---

archive/issue_comments_223579.json:
```json
{
    "body": "Changed commit from **[`9233d05`](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)** to **[`44ac240`](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)**",
    "created_at": "2014-09-30T15:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223579",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`9233d05`](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)** to **[`44ac240`](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)**



---

archive/issue_comments_223580.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@simon-king-jena](#comment%3A47):\n> But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.\n\nI have heard occasional rumours that this happens sometimes, but I have no idea how to reproduce it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80ef8cd3b5772b0488ab871d059a13f226f00b9c\"><code>80ef8cd</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16938</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34\"><code>44ac240</code></a></td><td><code>Typos</code></td></tr></table>\n",
    "created_at": "2014-09-30T15:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223580",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@simon-king-jena](#comment%3A47):
> But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.

I have heard occasional rumours that this happens sometimes, but I have no idea how to reproduce it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80ef8cd3b5772b0488ab871d059a13f226f00b9c"><code>80ef8cd</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16938</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34"><code>44ac240</code></a></td><td><code>Typos</code></td></tr></table>




---

archive/issue_comments_223581.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-09-30T20:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223581",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_239947.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T20:33:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239947"
}
```



---

archive/issue_events_239948.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T20:33:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239948"
}
```



---

archive/issue_comments_223582.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nThank you, Jeroen. I would have needed to run tests overnight to finish the review. But I do think that the patched patches look OK.",
    "created_at": "2014-09-30T20:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223582",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:61" align="right">comment:61</div>

Thank you, Jeroen. I would have needed to run tests overnight to finish the review. But I do think that the patched patches look OK.



---

archive/issue_comments_223583.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThe `conway_polynomials` package fails to build, even though I have `SAGE_UPGRADING` set to `yes`. [See logs](http://sage.math.washington.edu/home/SimonKing/logs/conway_polynomials-0.4.p0.log)\n\nIs there a problem with the debug? Or is it a problem with \"make\" and dependency checking?",
    "created_at": "2014-10-01T04:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223583",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:62" align="right">comment:62</div>

The `conway_polynomials` package fails to build, even though I have `SAGE_UPGRADING` set to `yes`. [See logs](http://sage.math.washington.edu/home/SimonKing/logs/conway_polynomials-0.4.p0.log)

Is there a problem with the debug? Or is it a problem with "make" and dependency checking?



---

archive/issue_events_239949.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T04:59:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239949"
}
```



---

archive/issue_events_239950.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T04:59:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239950"
}
```



---

archive/issue_comments_223584.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nDid you build everything with this ticket applied and with `SAGE_DEBUG=yes`?",
    "created_at": "2014-10-01T06:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223584",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

Did you build everything with this ticket applied and with `SAGE_DEBUG=yes`?



---

archive/issue_comments_223585.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536\"><code>0fb6279</code></a></td><td><code>Trac #16938: bump Singular version</code></td></tr></table>\n",
    "created_at": "2014-10-01T07:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223585",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536"><code>0fb6279</code></a></td><td><code>Trac #16938: bump Singular version</code></td></tr></table>




---

archive/issue_comments_223586.json:
```json
{
    "body": "Changed commit from **[`44ac240`](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)** to **[`0fb6279`](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)**",
    "created_at": "2014-10-01T07:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223586",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`44ac240`](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)** to **[`0fb6279`](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)**



---

archive/issue_comments_223587.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@simon-king-jena](#comment%3A62):\n> Is there a problem with the debug?\n\nLooks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.\n\nI'll try to reproduce it and report upstream if it is confirmed.",
    "created_at": "2014-10-01T07:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223587",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@simon-king-jena](#comment%3A62):
> Is there a problem with the debug?

Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.

I'll try to reproduce it and report upstream if it is confirmed.



---

archive/issue_comments_223588.json:
```json
{
    "body": "Changed commit from **[`0fb6279`](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)** to **[`53b73db`](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)**",
    "created_at": "2014-10-01T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223588",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0fb6279`](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)** to **[`53b73db`](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)**



---

archive/issue_comments_223589.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\"><code>53b73db</code></a></td><td><code>Fix m4ri assertion sizeof(mzd_t) == 64</code></td></tr></table>\n",
    "created_at": "2014-10-01T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa"><code>53b73db</code></a></td><td><code>Fix m4ri assertion sizeof(mzd_t) == 64</code></td></tr></table>




---

archive/issue_comments_223590.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@jdemeyer](#comment%3A65):\n> Replying to [@simon-king-jena](#comment%3A62):\n> > Is there a problem with the debug?\n\n> Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.\n> \n> I'll try to reproduce it and report upstream if it is confirmed.\n\nWould be surprising to me. After all, in an earlier debug version on this ticket, Sage did build. Now it doesn't. Anyway, I will try with your latest commit.",
    "created_at": "2014-10-01T09:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223590",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@jdemeyer](#comment%3A65):
> Replying to [@simon-king-jena](#comment%3A62):
> > Is there a problem with the debug?

> Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.
> 
> I'll try to reproduce it and report upstream if it is confirmed.

Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build. Now it doesn't. Anyway, I will try with your latest commit.



---

archive/issue_comments_223591.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@simon-king-jena](#comment%3A67):\n> Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.\n\nWas that after #16981?",
    "created_at": "2014-10-01T09:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@simon-king-jena](#comment%3A67):
> Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.

Was that after #16981?



---

archive/issue_comments_223592.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@jdemeyer](#comment%3A68):\n> Replying to [@simon-king-jena](#comment%3A67):\n> > Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.\n\n> Was that after #16981?\n\nNo idea. And I actually doubt that M4RI is to blame. After all, the error occurs in the line\n\n```\n>    4    from sage.all import save\n```\nwhen installing the Conway polynomial package.",
    "created_at": "2014-10-01T09:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223592",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@jdemeyer](#comment%3A68):
> Replying to [@simon-king-jena](#comment%3A67):
> > Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.

> Was that after #16981?

No idea. And I actually doubt that M4RI is to blame. After all, the error occurs in the line

```
>    4    from sage.all import save
```
when installing the Conway polynomial package.



---

archive/issue_comments_223593.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nNote that in addition to the install log that I posted earlier, there also is a [Crash Log](http://sage.math.washington.edu/home/SimonKing/logs/sage_crash_XN6UDt.log) that is the result of the failing import.",
    "created_at": "2014-10-01T09:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223593",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:70" align="right">comment:70</div>

Note that in addition to the install log that I posted earlier, there also is a [Crash Log](http://sage.math.washington.edu/home/SimonKing/logs/sage_crash_XN6UDt.log) that is the result of the failing import.



---

archive/issue_comments_223594.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@simon-king-jena](#comment%3A69):\n> the error occurs in the line\n> \n> ```\n> >    4    from sage.all import save\n> ```\n> when installing the Conway polynomial package.\n\nThat's just the top of the traceback. Importing `sage.all` does a lot of things. The full traceback clearly shows that the problem is in m4ri:\n\n```\nStack backtrace\n---------------\n[...]\n#8  0xb72e9d07 in __assert_fail () from /lib/libc.so.6\nNo symbol table info available.\n#9  0xb18e62f1 in mzd_init (r=7, c=7) at m4ri/mzd.c:151\n        __PRETTY_FUNCTION__ = \"mzd_init\"\n#10 0xb19270c4 in __pyx_pf_4sage_6matrix_17matrix_mod2_dense_17Matrix_mod2_dense___cinit__ (__pyx_v_self=0xad884034, __pyx_v_parent=0xace7b2f4, \n    __pyx_v_entries=0xad874fbc, __pyx_v_copy=0xb76a48ec <_Py_ZeroStruct>, \n    __pyx_v_coerce=0xb76a4900 <_Py_TrueStruct>, \n    __pyx_v_alloc=0xb76a4900 <_Py_TrueStruct>)\n    at build/cythonized/sage/matrix/matrix_mod2_dense.c:3313\n        __pyx_r = 1245376913\n        __pyx_t_1 = 0x0\n        __pyx_t_2 = 0x0\n        __pyx_t_3 = 0x0\n        __pyx_t_4 = 0\n        __pyx_t_5 = 0x0\n        __pyx_t_6 = 1\n        __pyx_lineno = 0\n        __pyx_filename = 0x0\n        __pyx_clineno = 0\n[...]\n```",
    "created_at": "2014-10-01T09:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223594",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@simon-king-jena](#comment%3A69):
> the error occurs in the line
> 
> ```
> >    4    from sage.all import save
> ```
> when installing the Conway polynomial package.

That's just the top of the traceback. Importing `sage.all` does a lot of things. The full traceback clearly shows that the problem is in m4ri:

```
Stack backtrace
---------------
[...]
#8  0xb72e9d07 in __assert_fail () from /lib/libc.so.6
No symbol table info available.
#9  0xb18e62f1 in mzd_init (r=7, c=7) at m4ri/mzd.c:151
        __PRETTY_FUNCTION__ = "mzd_init"
#10 0xb19270c4 in __pyx_pf_4sage_6matrix_17matrix_mod2_dense_17Matrix_mod2_dense___cinit__ (__pyx_v_self=0xad884034, __pyx_v_parent=0xace7b2f4, 
    __pyx_v_entries=0xad874fbc, __pyx_v_copy=0xb76a48ec <_Py_ZeroStruct>, 
    __pyx_v_coerce=0xb76a4900 <_Py_TrueStruct>, 
    __pyx_v_alloc=0xb76a4900 <_Py_TrueStruct>)
    at build/cythonized/sage/matrix/matrix_mod2_dense.c:3313
        __pyx_r = 1245376913
        __pyx_t_1 = 0x0
        __pyx_t_2 = 0x0
        __pyx_t_3 = 0x0
        __pyx_t_4 = 0
        __pyx_t_5 = 0x0
        __pyx_t_6 = 1
        __pyx_lineno = 0
        __pyx_filename = 0x0
        __pyx_clineno = 0
[...]
```



---

archive/issue_events_239951.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T09:57:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239951"
}
```



---

archive/issue_events_239952.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T09:57:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239952"
}
```



---

archive/issue_comments_223595.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, in a later stable release.** to **Reported upstream. No feedback yet.**",
    "created_at": "2014-10-01T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223595",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **Fixed upstream, in a later stable release.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_223596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n-When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!\n+When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!\n \n I suppose the fix will eventually be in a stable upstream release.\n+\n+There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)\n``````\n",
    "created_at": "2014-10-01T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223596",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
-When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!
+When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!
 
 I suppose the fix will eventually be in a stable upstream release.
+
+There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)
``````




---

archive/issue_events_239953.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T10:04:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239953"
}
```



---

archive/issue_events_239954.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T10:04:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239954"
}
```



---

archive/issue_comments_223597.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nThe build problem that I obtain is with the latest commit (53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa), hence, it needs work.",
    "created_at": "2014-10-01T10:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223597",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:73" align="right">comment:73</div>

The build problem that I obtain is with the latest commit (53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa), hence, it needs work.



---

archive/issue_comments_223598.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nAre you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!",
    "created_at": "2014-10-01T10:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223598",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">comment:74</div>

Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!



---

archive/issue_events_239955.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T10:06:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239955"
}
```



---

archive/issue_events_239956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T10:06:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239956"
}
```



---

archive/issue_comments_223599.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@jdemeyer](#comment%3A74):\n> Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!\n\nThen we come back to my question above: Is it a problem with dependency checking? I did `make` with `SAGE_UPGRADING=yes`, and it didn't work.",
    "created_at": "2014-10-01T10:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223599",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@jdemeyer](#comment%3A74):
> Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!

Then we come back to my question above: Is it a problem with dependency checking? I did `make` with `SAGE_UPGRADING=yes`, and it didn't work.



---

archive/issue_comments_223600.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nFor the record: Now I explicitly did `sage -i m4ri` before doing `make` again. Let's see if it works this time.",
    "created_at": "2014-10-01T10:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223600",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:76" align="right">comment:76</div>

For the record: Now I explicitly did `sage -i m4ri` before doing `make` again. Let's see if it works this time.



---

archive/issue_comments_223601.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nIt does start. Now let us wait for the tests...",
    "created_at": "2014-10-01T10:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223601",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:77" align="right">comment:77</div>

It does start. Now let us wait for the tests...



---

archive/issue_comments_223602.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@simon-king-jena](#comment%3A75):\n> Is it a problem with dependency checking?\n\nNot really. You built a broken version of m4ri before and that broken version will not automatically be updated when doing \"make\". However, as long as you don't first build a broken version with `SAGE_DEBUG=yes` without applying this patch, there is no problem.\n\nOne could argue that there is a problem with dependency checking in the sense that `SAGE_DEBUG=yes` does not automatically cause everything to get rebuilt. But that's really a different issue.",
    "created_at": "2014-10-01T10:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223602",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@simon-king-jena](#comment%3A75):
> Is it a problem with dependency checking?

Not really. You built a broken version of m4ri before and that broken version will not automatically be updated when doing "make". However, as long as you don't first build a broken version with `SAGE_DEBUG=yes` without applying this patch, there is no problem.

One could argue that there is a problem with dependency checking in the sense that `SAGE_DEBUG=yes` does not automatically cause everything to get rebuilt. But that's really a different issue.



---

archive/issue_comments_223603.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nNext, I was bitten again by the infamous \"incremental documentation builds sometimes cause spurious\". Sigh.",
    "created_at": "2014-10-01T10:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223603",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:79" align="right">comment:79</div>

Next, I was bitten again by the infamous "incremental documentation builds sometimes cause spurious". Sigh.



---

archive/issue_comments_223604.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nhashdist also takes build switches / environment variables into account for the dependency calculation, fwiw.\n\nUntil then I think its reasonable to require a \"make distclean\" to switch between debug and non-debug build.",
    "created_at": "2014-10-01T11:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223604",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:80" align="right">comment:80</div>

hashdist also takes build switches / environment variables into account for the dependency calculation, fwiw.

Until then I think its reasonable to require a "make distclean" to switch between debug and non-debug build.



---

archive/issue_comments_223605.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@vbraun](#comment%3A80):\n> hashdist\n\nIs this another of the many proposals to change the Sage build system with something else? I feel like I have seen too many of these...",
    "created_at": "2014-10-01T11:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223605",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@vbraun](#comment%3A80):
> hashdist

Is this another of the many proposals to change the Sage build system with something else? I feel like I have seen too many of these...



---

archive/issue_comments_223606.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nSo far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\n```\nsage -t src/sage/modular/modsym/space.py\n**********************************************************************\nFile \"src/sage/modular/modsym/space.py\", line 930, in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module\nFailed example:\n    ModularSymbols(11, 2, base_ring=GF(4,'a')).cuspidal_submodule()._q_expansion_module(prec=4, algorithm=\"hecke\")\nException raised:\n    Traceback (most recent call last):\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 486, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 849, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module[0]>\", line 1, in <module>\n        ModularSymbols(Integer(11), Integer(2), base_ring=GF(Integer(4),'a')).cuspidal_submodule()._q_expansion_module(prec=Integer(4), algorithm=\"hecke\")\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modular/modsym/ambient.py\", line 1392, in cuspidal_submodule\n        S = self.boundary_map().kernel()\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py\", line 649, in kernel\n        V = self.matrix().kernel()\n      File \"sage/matrix/matrix2.pyx\", line 3755, in sage.matrix.matrix2.Matrix.left_kernel (build/cythonized/sage/matrix/matrix2.c:23920)\n      File \"sage/matrix/matrix2.pyx\", line 3596, in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:23371)\n      File \"sage/matrix/matrix2.pyx\", line 3244, in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:22751)\n      File \"sage/matrix/matrix2.pyx\", line 6119, in sage.matrix.matrix2.Matrix.echelon_form (build/cythonized/sage/matrix/matrix2.c:42445)\n      File \"sage/matrix/matrix_mod2e_dense.pyx\", line 946, in sage.matrix.matrix_mod2e_dense.Matrix_mod2e_dense.echelonize (build/cythonized/sage/matrix/matrix_mod2e_dense.c:7938)\n      File \"sage/ext/c_lib.pyx\", line 97, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:1168)\n    SignalError: Segmentation fault\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module\n    [313 tests, 1 failure, 43.51 s]\n```",
    "created_at": "2014-10-01T12:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223606",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:82" align="right">comment:82</div>

So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

```
sage -t src/sage/modular/modsym/space.py
**********************************************************************
File "src/sage/modular/modsym/space.py", line 930, in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module
Failed example:
    ModularSymbols(11, 2, base_ring=GF(4,'a')).cuspidal_submodule()._q_expansion_module(prec=4, algorithm="hecke")
Exception raised:
    Traceback (most recent call last):
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 486, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 849, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module[0]>", line 1, in <module>
        ModularSymbols(Integer(11), Integer(2), base_ring=GF(Integer(4),'a')).cuspidal_submodule()._q_expansion_module(prec=Integer(4), algorithm="hecke")
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modular/modsym/ambient.py", line 1392, in cuspidal_submodule
        S = self.boundary_map().kernel()
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py", line 649, in kernel
        V = self.matrix().kernel()
      File "sage/matrix/matrix2.pyx", line 3755, in sage.matrix.matrix2.Matrix.left_kernel (build/cythonized/sage/matrix/matrix2.c:23920)
      File "sage/matrix/matrix2.pyx", line 3596, in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:23371)
      File "sage/matrix/matrix2.pyx", line 3244, in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:22751)
      File "sage/matrix/matrix2.pyx", line 6119, in sage.matrix.matrix2.Matrix.echelon_form (build/cythonized/sage/matrix/matrix2.c:42445)
      File "sage/matrix/matrix_mod2e_dense.pyx", line 946, in sage.matrix.matrix_mod2e_dense.Matrix_mod2e_dense.echelonize (build/cythonized/sage/matrix/matrix_mod2e_dense.c:7938)
      File "sage/ext/c_lib.pyx", line 97, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:1168)
    SignalError: Segmentation fault
**********************************************************************
1 item had failures:
   1 of   3 in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module
    [313 tests, 1 failure, 43.51 s]
```



---

archive/issue_comments_223607.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@vbraun](#comment%3A80):\n> Until then I think its reasonable to require a \"make distclean\" to switch between debug and non-debug build.\n\nI did *not* switch between debug and non-debug build. I have one sage git repository which I have never touched without `SAGE_DEBUG` being set to `yes`. Nevertheless, things got wrong.",
    "created_at": "2014-10-01T12:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223607",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@vbraun](#comment%3A80):
> Until then I think its reasonable to require a "make distclean" to switch between debug and non-debug build.

I did *not* switch between debug and non-debug build. I have one sage git repository which I have never touched without `SAGE_DEBUG` being set to `yes`. Nevertheless, things got wrong.



---

archive/issue_comments_223608.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@simon-king-jena](#comment%3A83):\n> Nevertheless, things got wrong.\n\n...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.",
    "created_at": "2014-10-01T12:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223608",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@simon-king-jena](#comment%3A83):
> Nevertheless, things got wrong.

...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.



---

archive/issue_comments_223609.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nMartin, can you comment on the 64-bit alignment issue in m4ri?",
    "created_at": "2014-10-01T12:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223609",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:85" align="right">comment:85</div>

Martin, can you comment on the 64-bit alignment issue in m4ri?



---

archive/issue_comments_223610.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@simon-king-jena](#comment%3A82):\n> So far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\nWorks for me. The problem seems to be in `m4rie`, did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?",
    "created_at": "2014-10-01T12:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223610",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@simon-king-jena](#comment%3A82):
> So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

Works for me. The problem seems to be in `m4rie`, did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?



---

archive/issue_comments_223611.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@jdemeyer](#comment%3A86):\n> Replying to [@simon-king-jena](#comment%3A82):\n> > So far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\n> Works for me. Did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?\n\nI currently have `SAGE_UPGRADING=yes` by default.",
    "created_at": "2014-10-01T12:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223611",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@jdemeyer](#comment%3A86):
> Replying to [@simon-king-jena](#comment%3A82):
> > So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

> Works for me. Did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?

I currently have `SAGE_UPGRADING=yes` by default.



---

archive/issue_comments_223612.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@jdemeyer](#comment%3A84):\n> Replying to [@simon-king-jena](#comment%3A83):\n> > Nevertheless, things got wrong.\n\n> ...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.\n\nOK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.\n\nAnyway, meanwhile I got loads of other errors. I will next try `make distclean` and `make`, with `SAGE_DEBUG=yes` and unsetting `SAGE_UPGRADING`.",
    "created_at": "2014-10-01T12:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223612",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@jdemeyer](#comment%3A84):
> Replying to [@simon-king-jena](#comment%3A83):
> > Nevertheless, things got wrong.

> ...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.

OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.

Anyway, meanwhile I got loads of other errors. I will next try `make distclean` and `make`, with `SAGE_DEBUG=yes` and unsetting `SAGE_UPGRADING`.



---

archive/issue_comments_223613.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@simon-king-jena](#comment%3A88):\n> OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.\n\nDependency checking works (modulo #17072).\n\nThe problem is that building with `SAGE_DEBUG=yes` didn't work before, but the problem with `m4ri` wasn't seen at build-time of `m4ri`. Therefore, the build system thinks that the build of `m4ri` was successful, even though it was completely broken. This is a very specific set of circumstances, I don't think it requires a fix to the build system.",
    "created_at": "2014-10-01T12:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223613",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@simon-king-jena](#comment%3A88):
> OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.

Dependency checking works (modulo #17072).

The problem is that building with `SAGE_DEBUG=yes` didn't work before, but the problem with `m4ri` wasn't seen at build-time of `m4ri`. Therefore, the build system thinks that the build of `m4ri` was successful, even though it was completely broken. This is a very specific set of circumstances, I don't think it requires a fix to the build system.



---

archive/issue_comments_223614.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nSimon, just to be sure, I will try to reproduce your bug on a 32-bit system:\n\n```\n$ export SAGE_UPGRADING=yes SAGE_DEBUG=yes\n$ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536\n$ make    # should fail in conway_polynomials\n$ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\n$ ./sage -f m4ri\n$ make ptest\n```",
    "created_at": "2014-10-01T13:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223614",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:90" align="right">comment:90</div>

Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:

```
$ export SAGE_UPGRADING=yes SAGE_DEBUG=yes
$ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536
$ make    # should fail in conway_polynomials
$ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa
$ ./sage -f m4ri
$ make ptest
```



---

archive/issue_comments_223615.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@jdemeyer](#comment%3A90):\n> Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:\n> \n> ```\n> $ export SAGE_UPGRADING=yes SAGE_DEBUG=yes\n> $ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536\n> $ make    # should fail in conway_polynomials\n> $ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\n> $ ./sage -f m4ri\n> $ make ptest\n> ```\n\nI am on 64 bit, if I am not mistaken.",
    "created_at": "2014-10-01T13:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223615",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@jdemeyer](#comment%3A90):
> Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:
> 
> ```
> $ export SAGE_UPGRADING=yes SAGE_DEBUG=yes
> $ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536
> $ make    # should fail in conway_polynomials
> $ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa
> $ ./sage -f m4ri
> $ make ptest
> ```

I am on 64 bit, if I am not mistaken.



---

archive/issue_comments_223616.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@simon-king-jena](#comment%3A91):\n> I am on 64 bit, if I am not mistaken.\n\nYour [previous error](#comment%3A62) was on a 32-bit system.",
    "created_at": "2014-10-01T13:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@simon-king-jena](#comment%3A91):
> I am on 64 bit, if I am not mistaken.

Your [previous error](#comment%3A62) was on a 32-bit system.



---

archive/issue_comments_223617.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@jdemeyer](#comment%3A92):\n> Replying to [@simon-king-jena](#comment%3A91):\n> > I am on 64 bit, if I am not mistaken.\n\n> Your [previous error](#comment%3A62) was on a 32-bit system.\n\nI did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64. Although I can currently not recall how to find out the architecture. In any case, `cat /proc/cpuinfo` tells me that I have two Intel(R) Core(TM)2 Duo.",
    "created_at": "2014-10-01T13:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223617",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@jdemeyer](#comment%3A92):
> Replying to [@simon-king-jena](#comment%3A91):
> > I am on 64 bit, if I am not mistaken.

> Your [previous error](#comment%3A62) was on a 32-bit system.

I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64. Although I can currently not recall how to find out the architecture. In any case, `cat /proc/cpuinfo` tells me that I have two Intel(R) Core(TM)2 Duo.



---

archive/issue_comments_223618.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nReplying to [@simon-king-jena](#comment%3A93):\n> I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64.\n\nPerhaps the hardware is 64-bit, but the kernel in the logs you posted is 32-bit.\n\n> Although I can currently not recall how to find out the architecture.\n\n`uname -m` prints the \"machine hardware name\" which is probably what you want.",
    "created_at": "2014-10-01T13:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223618",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:94" align="right">comment:94</div>

Replying to [@simon-king-jena](#comment%3A93):
> I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64.

Perhaps the hardware is 64-bit, but the kernel in the logs you posted is 32-bit.

> Although I can currently not recall how to find out the architecture.

`uname -m` prints the "machine hardware name" which is probably what you want.



---

archive/issue_comments_223619.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\n\n```\nuname -m\ni686\n```\nwhatever that means.",
    "created_at": "2014-10-01T14:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223619",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:95" align="right">comment:95</div>


```
uname -m
i686
```
whatever that means.



---

archive/issue_comments_223620.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nThat means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.",
    "created_at": "2014-10-01T14:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223620",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:96" align="right">comment:96</div>

That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.



---

archive/issue_comments_223621.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@vbraun](#comment%3A96):\n> That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.\n\nInteresting. Currently I have 4 GB. Can I change the installation without to much hassle when upgrading the memory in future?",
    "created_at": "2014-10-01T14:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223621",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@vbraun](#comment%3A96):
> That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.

Interesting. Currently I have 4 GB. Can I change the installation without to much hassle when upgrading the memory in future?



---

archive/issue_comments_223622.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nI don't think any distro supports architecture changes. Just install x86_64 on a separate partition / btrfs volume and mound your /home.",
    "created_at": "2014-10-01T14:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223622",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:98" align="right">comment:98</div>

I don't think any distro supports architecture changes. Just install x86_64 on a separate partition / btrfs volume and mound your /home.



---

archive/issue_comments_223623.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nAfter make distclean, make test did almost work. I got no timeouts, and the following errors:\n\n```\nsage -t src/sage/stats/hmm/hmm.pyx  # 2 doctests failed\nsage -t src/sage/schemes/elliptic_curves/period_lattice_region.pyx  # 1 doctest failed\nsage -t src/sage/gsl/probability_distribution.pyx  # 3 doctests failed\nsage -t src/sage/plot/plot3d/transform.pyx  # 1 doctest failed\n```\n\nUnfortunately, I again encounter the problem that the test log does not indicate what tests went wrong, it just gives the number of failing tests.",
    "created_at": "2014-10-01T22:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223623",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:99" align="right">comment:99</div>

After make distclean, make test did almost work. I got no timeouts, and the following errors:

```
sage -t src/sage/stats/hmm/hmm.pyx  # 2 doctests failed
sage -t src/sage/schemes/elliptic_curves/period_lattice_region.pyx  # 1 doctest failed
sage -t src/sage/gsl/probability_distribution.pyx  # 3 doctests failed
sage -t src/sage/plot/plot3d/transform.pyx  # 1 doctest failed
```

Unfortunately, I again encounter the problem that the test log does not indicate what tests went wrong, it just gives the number of failing tests.



---

archive/issue_events_239957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T07:06:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239957"
}
```



---

archive/issue_events_239958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T07:06:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239958"
}
```



---

archive/issue_comments_223624.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nThere is a very strange thing happening on this 32-bit system. When running doctests with `make ptest`, a lot of tests fail. When running those tests indivually, most of them pass (except for the ones [mentioned by Simon](#comment%3A99)). So there is certainly something fishy going on.\n\nThis might be due to [https://savannah.gnu.org/bugs/?22010](https://savannah.gnu.org/bugs/?22010), I'm upgrading `make` to see if that fixes it.",
    "created_at": "2014-10-02T08:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223624",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:101" align="right">comment:101</div>

There is a very strange thing happening on this 32-bit system. When running doctests with `make ptest`, a lot of tests fail. When running those tests indivually, most of them pass (except for the ones [mentioned by Simon](#comment%3A99)). So there is certainly something fishy going on.

This might be due to [https://savannah.gnu.org/bugs/?22010](https://savannah.gnu.org/bugs/?22010), I'm upgrading `make` to see if that fixes it.



---

archive/issue_comments_223625.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nI am investigating the doctest failures reported by Simon, hang on...",
    "created_at": "2014-10-02T08:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223625",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:102" align="right">comment:102</div>

I am investigating the doctest failures reported by Simon, hang on...



---

archive/issue_comments_223626.json:
```json
{
    "body": "Dependencies: **#17088**",
    "created_at": "2014-10-02T09:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223626",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#17088**



---

archive/issue_comments_223627.json:
```json
{
    "body": "<div id=\"comment:104\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/573cf86db8eb0df38ccfa46a27d411f30c2cbd4f\"><code>573cf86</code></a></td><td><code>Fix numerical noise in debug build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15b7588e82c7d67bbbab14fec4c14c862bcc4c1f\"><code>15b7588</code></a></td><td><code>Use integer arithmetic in PeriodicRegion.__div__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba\"><code>c471edd</code></a></td><td><code>Merge branch 'u/jdemeyer/ticket/17088' of git://trac.sagemath.org/sage into ticket/16938</code></td></tr></table>\n",
    "created_at": "2014-10-02T12:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:104"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/573cf86db8eb0df38ccfa46a27d411f30c2cbd4f"><code>573cf86</code></a></td><td><code>Fix numerical noise in debug build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15b7588e82c7d67bbbab14fec4c14c862bcc4c1f"><code>15b7588</code></a></td><td><code>Use integer arithmetic in PeriodicRegion.__div__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba"><code>c471edd</code></a></td><td><code>Merge branch 'u/jdemeyer/ticket/17088' of git://trac.sagemath.org/sage into ticket/16938</code></td></tr></table>




---

archive/issue_comments_223628.json:
```json
{
    "body": "Changed commit from **[`53b73db`](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)** to **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**",
    "created_at": "2014-10-02T12:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`53b73db`](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)** to **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**



---

archive/issue_comments_223629.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nCan you elaborate on the \"periodic lattice\" commit?",
    "created_at": "2014-10-02T12:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223629",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:105" align="right">comment:105</div>

Can you elaborate on the "periodic lattice" commit?



---

archive/issue_comments_223630.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@simon-king-jena](#comment%3A105):\n> Can you elaborate on the \"periodic lattice\" commit?\n\nSee #17088",
    "created_at": "2014-10-02T12:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223630",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@simon-king-jena](#comment%3A105):
> Can you elaborate on the "periodic lattice" commit?

See #17088



---

archive/issue_comments_223631.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@jdemeyer](#comment%3A106):\n> Replying to [@simon-king-jena](#comment%3A105):\n> > Can you elaborate on the \"periodic lattice\" commit?\n\n> See #17088\n\nOK. Running tests now. Hope it will work this time...",
    "created_at": "2014-10-02T12:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223631",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@jdemeyer](#comment%3A106):
> Replying to [@simon-king-jena](#comment%3A105):
> > Can you elaborate on the "periodic lattice" commit?

> See #17088

OK. Running tests now. Hope it will work this time...



---

archive/issue_comments_223632.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nI still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`",
    "created_at": "2014-10-02T13:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223632",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:108" align="right">comment:108</div>

I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`



---

archive/issue_comments_223633.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nIf you're interested in debugging on Linux: see also #17089.",
    "created_at": "2014-10-02T13:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223633",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:109" align="right">comment:109</div>

If you're interested in debugging on Linux: see also #17089.



---

archive/issue_comments_223634.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nReplying to [@jdemeyer](#comment%3A108):\n> I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`\n\nO_o...\n\nI thought the point of a debug version is that all segmentation faults will be non-random, reproducible and accompanied by a useful C backtrace.",
    "created_at": "2014-10-02T13:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223634",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:110" align="right">comment:110</div>

Replying to [@jdemeyer](#comment%3A108):
> I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`

O_o...

I thought the point of a debug version is that all segmentation faults will be non-random, reproducible and accompanied by a useful C backtrace.



---

archive/issue_comments_223635.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nReplying to [@simon-king-jena](#comment%3A110):\n> accompanied by a useful C backtrace.\n\n...at least we have this (modulo #17089)",
    "created_at": "2014-10-02T13:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223635",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:111" align="right">comment:111</div>

Replying to [@simon-king-jena](#comment%3A110):
> accompanied by a useful C backtrace.

...at least we have this (modulo #17089)



---

archive/issue_comments_223636.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nThe command which crashes is\n\n```\nsage: from sage.matrix.matrix_integer_dense_hnf import benchmark_hnf; benchmark_hnf([50,100],32)\n```",
    "created_at": "2014-10-02T13:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223636",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:112" align="right">comment:112</div>

The command which crashes is

```
sage: from sage.matrix.matrix_integer_dense_hnf import benchmark_hnf; benchmark_hnf([50,100],32)
```



---

archive/issue_comments_223637.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nI wonder whether random segmentation faults in the debug version should prevent this ticket from getting a positive review. After all, if segmentation faults show up then probably there is a problem in the non-debug version as well. This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.",
    "created_at": "2014-10-02T13:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223637",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:113" align="right">comment:113</div>

I wonder whether random segmentation faults in the debug version should prevent this ticket from getting a positive review. After all, if segmentation faults show up then probably there is a problem in the non-debug version as well. This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.



---

archive/issue_comments_223638.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nReplying to [@simon-king-jena](#comment%3A113):\n> This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.\n\nExactly, the segfault issue is #17090.",
    "created_at": "2014-10-02T14:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223638",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:114" align="right">comment:114</div>

Replying to [@simon-king-jena](#comment%3A113):
> This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.

Exactly, the segfault issue is #17090.



---

archive/issue_events_239959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T14:02:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239959"
}
```



---

archive/issue_events_239960.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T14:02:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239960"
}
```



---

archive/issue_events_239961.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-02T16:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239961"
}
```



---

archive/issue_events_239962.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-02T16:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239962"
}
```



---

archive/issue_comments_223639.json:
```json
{
    "body": "Changed author from **Simon King, Volker Braun** to **Simon King, Volker Braun, Jeroen Demeyer**",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223639",
    "user": "https://github.com/vbraun"
}
```

Changed author from **Simon King, Volker Braun** to **Simon King, Volker Braun, Jeroen Demeyer**



---

archive/issue_comments_223640.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nlgtm",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223640",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:115" align="right">comment:115</div>

lgtm



---

archive/issue_comments_223641.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Volker Braun**",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223641",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Volker Braun**



---

archive/issue_comments_223642.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)** to **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**",
    "created_at": "2014-10-05T22:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-223642",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)** to **[`c471edd`](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)**



---

archive/issue_events_239963.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-05T22:39:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239963"
}
```



---

archive/issue_events_239964.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0aea242c6c997accb9b90c087b1b9d6dd60d7a63",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-05T22:39:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-239964"
}
```
