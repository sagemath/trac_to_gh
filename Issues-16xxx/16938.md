# Issue 16938: Sage debug version

archive/issues_016701.json:
```json
{
    "assignees": [],
    "body": "When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!\n\nI suppose the fix will eventually be in a stable upstream release.\n\nThere is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)\n\nDepends on #17088\n\n**CC:**  jpflori @vbraun @malb\n\n**Keywords:** debug singular cygwin64\n\n**Branch/Commit:** [c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)\n\n**Upstream:** Reported upstream. No feedback yet.\n\n**Reviewer:** Jeroen Demeyer, Volker Braun\n\n**Author:** Simon King, Volker Braun, Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/16938\n\n",
    "closed_at": "2014-10-05T22:39:11Z",
    "created_at": "2014-09-05T14:07:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage debug version",
    "type": "issue",
    "updated_at": "2014-10-05T22:39:11Z",
    "url": "https://github.com/sagemath/sage/issues/16938",
    "user": "https://github.com/simon-king-jena"
}
```
When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!

I suppose the fix will eventually be in a stable upstream release.

There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)

Depends on #17088

**CC:**  jpflori @vbraun @malb

**Keywords:** debug singular cygwin64

**Branch/Commit:** [c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)

**Upstream:** Reported upstream. No feedback yet.

**Reviewer:** Jeroen Demeyer, Volker Braun

**Author:** Simon King, Volker Braun, Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/16938





---

archive/issue_comments_226001.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe function `choose_patches()` of singular's spkg-install removes most of the files in `$SRC/omalloc/` if we are in debug mode. However, the cygwin64 patch tries to patch some files in that folder.\n\nIn addition to that, the cygwin64 patch says\n\n```\n+ifeq ($(SINGUNAME),x86_64-Win)\n+SO_SUFFIX = dll\n+MODULE_SUFFIX    = dll\n+LIBSINGULAR_FLAGS = -shared\n+LIBSINGULAR_LIBS = -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc \n+endif\n+\n```\nSo, if one would try to build the debug version in 64 bit cygwin, then one had -lomalloc, but that would not work, since omalloc is disabled on purpose, for the debug version.\n\nWhat to do? In principle, we could put an alternative version of the cygwin64 patch into the patches/conditional folder, and if we are in debug version, we could let `choose_patches()` replace the regular cygwin patch version by the conditional version.\n\nI will try to solve the problem accordingly, however, I have no windows box. Hence, someone else needs to test if a debug version of singular works in cygwin.",
    "created_at": "2014-09-05T19:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226001",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:1'></a>
The function `choose_patches()` of singular's spkg-install removes most of the files in `$SRC/omalloc/` if we are in debug mode. However, the cygwin64 patch tries to patch some files in that folder.

In addition to that, the cygwin64 patch says

```
+ifeq ($(SINGUNAME),x86_64-Win)
+SO_SUFFIX = dll
+MODULE_SUFFIX    = dll
+LIBSINGULAR_FLAGS = -shared
+LIBSINGULAR_LIBS = -lsingfac -lsingcf -lntl -lreadline -lgmp -lomalloc 
+endif
+
```
So, if one would try to build the debug version in 64 bit cygwin, then one had -lomalloc, but that would not work, since omalloc is disabled on purpose, for the debug version.

What to do? In principle, we could put an alternative version of the cygwin64 patch into the patches/conditional folder, and if we are in debug version, we could let `choose_patches()` replace the regular cygwin patch version by the conditional version.

I will try to solve the problem accordingly, however, I have no windows box. Hence, someone else needs to test if a debug version of singular works in cygwin.



---

archive/issue_comments_226002.json:
```json
{
    "body": "<a id='comment:2'></a>\nPS: Instead of omalloc, the debug version's memory manager is called xalloc. This is a hint for a debug version in cygwin: Perhaps it needs to say `-lxalloc` rather than `-lomalloc`?",
    "created_at": "2014-09-05T19:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226002",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>
PS: Instead of omalloc, the debug version's memory manager is called xalloc. This is a hint for a debug version in cygwin: Perhaps it needs to say `-lxalloc` rather than `-lomalloc`?



---

archive/issue_comments_226003.json:
```json
{
    "body": "<a id='comment:3'></a>\nUnfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.",
    "created_at": "2014-09-05T20:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226003",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.



---

archive/issue_comments_226004.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [@simon-king-jena](#comment%3A3):\n> Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.\n\nThe good news is that many of the failing patches went upstream!",
    "created_at": "2014-09-05T20:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226004",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
Replying to [@simon-king-jena](#comment%3A3):
> Unfortunately, one important debug patch, namely `singular_xalloc.patch`, fails to apply.

The good news is that many of the failing patches went upstream!



---

archive/issue_comments_226005.json:
```json
{
    "body": "<a id='comment:5'></a>\nI modified the patches so that they apply. However, the built fails, as the function `omalloc0` is used in one place, but is not defined when using xalloc instead of omalloc. I guess I have to ask Hans Sch\u00f6nemann for advice.",
    "created_at": "2014-09-05T20:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226005",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
I modified the patches so that they apply. However, the built fails, as the function `omalloc0` is used in one place, but is not defined when using xalloc instead of omalloc. I guess I have to ask Hans Sch√∂nemann for advice.



---

archive/issue_comments_226006.json:
```json
{
    "body": "<a id='comment:6'></a>\nIMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.",
    "created_at": "2014-09-10T19:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226006",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.



---

archive/issue_comments_226007.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@vbraun](#comment%3A6):\n> IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.\n\nCygwin itself is not in the game. Only the cygwin PATCH currently constitutes a problem. It is not a big deal to solve it: I modified the patches *and* spkg-install so that building the debug version starts (i.e., so that all patches and changes apply).\n\nMeanwhile Hans gave me a hint on where to get a missing function. After fixing that, the debug version will hopefully build.",
    "created_at": "2014-09-10T19:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226007",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Replying to [@vbraun](#comment%3A6):
> IMHO we shouldn't waste time on a Cygwin debug version. Thats for way down the road. If it doesn't work now, so be it.

Cygwin itself is not in the game. Only the cygwin PATCH currently constitutes a problem. It is not a big deal to solve it: I modified the patches *and* spkg-install so that building the debug version starts (i.e., so that all patches and changes apply).

Meanwhile Hans gave me a hint on where to get a missing function. After fixing that, the debug version will hopefully build.



---

archive/issue_comments_226008.json:
```json
{
    "body": "<a id='comment:8'></a>\nWith Hans' hint, building the debug version went a bit further. However, building still fails, with \"cannot find -lomalloc_ndebug\".\n\nOOOOPS! Looking for `-lomalloc_ndebug` in our patches, I see that the `sage_debug.patch` looks like this:\n\n```diff\ndiff -ru src/kernel/Makefile.in src.debug/kernel/Makefile.in\n--- src/kernel/Makefile.in      2012-04-17 21:00:08.000000000 +0200\n+++ src.debug/kernel/Makefile.in        2012-07-12 16:51:29.923359810 +0200\n@@ -49,7 +49,7 @@\n CXXFLAGS       = @CXXFLAGS@ ${PIPE} \n CXXTEMPLFLAGS  = @CXXTEMPLFLAGS@\n CPPFLAGS       = -I${srcdir} -I.. -I@prefix@  @CPPFLAGS@ \n-DEFS           = -DNDEBUG -DOM_NDEBUG -D@SING_UNAME@ @DEFS@\n+DEFS           = -DOM_NDEBUG -D@SING_UNAME@ @DEFS@\n LDFLAGS                = @LDFLAGS@\n LD_DYN_FLAGS   = @LD_DYN_FLAGS@\n SFLAGS         = @SFLAGS@\n@@ -64,7 +64,7 @@\n LIBS           = -lm @NEED_LIBS@ \n else\n # for the 2-0-* versions under Windows, we don't need gdbm, readline and ncurses\n-LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc_ndebug\n+LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc\n #LIBS          = -lsingfac -lsingcf -lgmp\n endif\n MP_LIBS                = @MP_LIBS@\n```\nIsn't the diff file formatted wrongly? I am talking about the paths \"src/kernel\" and \"src.debug/kernel\", which do not exist.",
    "created_at": "2014-09-10T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226008",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
With Hans' hint, building the debug version went a bit further. However, building still fails, with "cannot find -lomalloc_ndebug".

OOOOPS! Looking for `-lomalloc_ndebug` in our patches, I see that the `sage_debug.patch` looks like this:

```diff
diff -ru src/kernel/Makefile.in src.debug/kernel/Makefile.in
--- src/kernel/Makefile.in      2012-04-17 21:00:08.000000000 +0200
+++ src.debug/kernel/Makefile.in        2012-07-12 16:51:29.923359810 +0200
@@ -49,7 +49,7 @@
 CXXFLAGS       = @CXXFLAGS@ ${PIPE} 
 CXXTEMPLFLAGS  = @CXXTEMPLFLAGS@
 CPPFLAGS       = -I${srcdir} -I.. -I@prefix@  @CPPFLAGS@ 
-DEFS           = -DNDEBUG -DOM_NDEBUG -D@SING_UNAME@ @DEFS@
+DEFS           = -DOM_NDEBUG -D@SING_UNAME@ @DEFS@
 LDFLAGS                = @LDFLAGS@
 LD_DYN_FLAGS   = @LD_DYN_FLAGS@
 SFLAGS         = @SFLAGS@
@@ -64,7 +64,7 @@
 LIBS           = -lm @NEED_LIBS@ 
 else
 # for the 2-0-* versions under Windows, we don't need gdbm, readline and ncurses
-LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc_ndebug
+LIBS           = -lsingfac -lsingcf -lntl -lgmp -lreadline -lncurses -lomalloc
 #LIBS          = -lsingfac -lsingcf -lgmp
 endif
 MP_LIBS                = @MP_LIBS@
```
Isn't the diff file formatted wrongly? I am talking about the paths "src/kernel" and "src.debug/kernel", which do not exist.



---

archive/issue_comments_226009.json:
```json
{
    "body": "<a id='comment:9'></a>\nConcerning ndebug: There is quite a number of files in `upstream/singular-3.1.6/latest/` mentioning `-lomalloc_ndebug`. Probably we should change all of them to only mention `-lomalloc`.",
    "created_at": "2014-09-10T20:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226009",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>
Concerning ndebug: There is quite a number of files in `upstream/singular-3.1.6/latest/` mentioning `-lomalloc_ndebug`. Probably we should change all of them to only mention `-lomalloc`.



---

archive/issue_comments_226010.json:
```json
{
    "body": "**Branch:** [u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)",
    "created_at": "2014-09-10T21:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226010",
    "user": "https://github.com/simon-king-jena"
}
```

**Branch:** [u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)



---

archive/issue_comments_226011.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have pushed my changes, so that someone else may have a change to see how to solve the `-lomalloc_ndebug` problem.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b426226860ce1ad09ece1ee40fca58ccf53cc1e4\">b426226</a></td><td><code>Make it so that the patches to Singular apply with SAGE_DEBUG=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f5ee733324e68b966be905d107823d91b487022\">3f5ee73</a></td><td><code>Define omalloc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a\">bd802db</a></td><td><code>Slight improvement of a patch</code></td></tr></table>\n",
    "created_at": "2014-09-10T21:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226011",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
I have pushed my changes, so that someone else may have a change to see how to solve the `-lomalloc_ndebug` problem.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b426226860ce1ad09ece1ee40fca58ccf53cc1e4">b426226</a></td><td><code>Make it so that the patches to Singular apply with SAGE_DEBUG=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f5ee733324e68b966be905d107823d91b487022">3f5ee73</a></td><td><code>Define omalloc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a">bd802db</a></td><td><code>Slight improvement of a patch</code></td></tr></table>




---

archive/issue_comments_226012.json:
```json
{
    "body": "**Commit:** [bd802db07ff44b2cbbff87e1e900cf30fef4c04a](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)",
    "created_at": "2014-09-10T21:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226012",
    "user": "https://github.com/simon-king-jena"
}
```

**Commit:** [bd802db07ff44b2cbbff87e1e900cf30fef4c04a](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)



---

archive/issue_comments_226013.json:
```json
{
    "body": "<a id='comment:12'></a>\nPatches are applied with `-p1`, so the first path component is stripped off.",
    "created_at": "2014-09-10T22:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226013",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
Patches are applied with `-p1`, so the first path component is stripped off.



---

archive/issue_comments_226014.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@vbraun](#comment%3A12):\n> Patches are applied with `-p1`, so the first path component is stripped off.\n\nOK, but I think it doesn't hurt that in the latest commit I change the path names according to what is done in the other patches (source path `a/...` versus target path `b/...`).\n\nI got more Info from Hans. There is a debug version of omalloc, but it would still be omalloc. Hence, valgrind would not see details but would only see large pages allocated. So, he recommends to stick with xalloc (which is a compatibility layer on top of malloc).\n\nIf we would have Singular 4-x in Sage (we only have 3-1-6), xalloc would be part of the sources. Hence, all our current patching for the debug version wouldn't be needed.\n\nAs for `-lomalloc_ndebug`: Hans suggests to change the makefile so that a module `libomalloc_ndebug.so` rather than `libomalloc.so` is created. To my understanding, it would also allow to remove other parts of our patches, where we replace `-lomalloc_ndebug` by `-lomalloc`.",
    "created_at": "2014-09-11T10:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226014",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:13'></a>
Replying to [@vbraun](#comment%3A12):
> Patches are applied with `-p1`, so the first path component is stripped off.

OK, but I think it doesn't hurt that in the latest commit I change the path names according to what is done in the other patches (source path `a/...` versus target path `b/...`).

I got more Info from Hans. There is a debug version of omalloc, but it would still be omalloc. Hence, valgrind would not see details but would only see large pages allocated. So, he recommends to stick with xalloc (which is a compatibility layer on top of malloc).

If we would have Singular 4-x in Sage (we only have 3-1-6), xalloc would be part of the sources. Hence, all our current patching for the debug version wouldn't be needed.

As for `-lomalloc_ndebug`: Hans suggests to change the makefile so that a module `libomalloc_ndebug.so` rather than `libomalloc.so` is created. To my understanding, it would also allow to remove other parts of our patches, where we replace `-lomalloc_ndebug` by `-lomalloc`.



---

archive/issue_comments_226015.json:
```json
{
    "body": "<a id='comment:14'></a>\nlibm4ri fails its self-tests when debug is on, this is #16966.",
    "created_at": "2014-09-11T12:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226015",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
libm4ri fails its self-tests when debug is on, this is #16966.



---

archive/issue_comments_226016.json:
```json
{
    "body": "**Changing commit** from \"[bd802db07ff44b2cbbff87e1e900cf30fef4c04a](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)\" to \"[9c318934ef2fc17bb341cc7353e48253228c6955](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)\".",
    "created_at": "2014-09-11T12:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226016",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[bd802db07ff44b2cbbff87e1e900cf30fef4c04a](https://github.com/sagemath/sagetrac-mirror/commit/bd802db07ff44b2cbbff87e1e900cf30fef4c04a)" to "[9c318934ef2fc17bb341cc7353e48253228c6955](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)".



---

archive/issue_comments_226017.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955\">9c31893</a></td><td><code>Define a missing symbol and change the module name: Singular with xalloc builds</code></td></tr></table>\n",
    "created_at": "2014-09-11T12:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226017",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955">9c31893</a></td><td><code>Define a missing symbol and change the module name: Singular with xalloc builds</code></td></tr></table>




---

archive/issue_comments_226018.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226018",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_226019.json:
```json
{
    "body": "<a id='comment:16'></a>\nMeanwhile I got Singular's xalloc version (which is better for valgrinding than the debug version of omalloc) to build. Now I am trying to build the rest of Sage, but expect that I will soon run into the issue tracked at #16966...\n\nIn the latest commit I added one missing function (which is empty in the debug version) and I changed the module name from `libomalloc.so` into `libomalloc_ndebug.so`. It may seem strange for someone that the DEBUG version is named `..._ndebug`. If that's a problem then (s)he may change it, so that it still works...\n\nI am trying to continue building, potentially with m4ri in non-debug mode. I guess for now one can say that it needs review.",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226019",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'></a>
Meanwhile I got Singular's xalloc version (which is better for valgrinding than the debug version of omalloc) to build. Now I am trying to build the rest of Sage, but expect that I will soon run into the issue tracked at #16966...

In the latest commit I added one missing function (which is empty in the debug version) and I changed the module name from `libomalloc.so` into `libomalloc_ndebug.so`. It may seem strange for someone that the DEBUG version is named `..._ndebug`. If that's a problem then (s)he may change it, so that it still works...

I am trying to continue building, potentially with m4ri in non-debug mode. I guess for now one can say that it needs review.



---

archive/issue_comments_226020.json:
```json
{
    "body": "**Upstream:** None of the above - read trac for reasoning.",
    "created_at": "2014-09-11T12:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226020",
    "user": "https://github.com/simon-king-jena"
}
```

**Upstream:** None of the above - read trac for reasoning.



---

archive/issue_events_152041.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T12:16:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152041"
}
```



---

archive/issue_comments_226021.json:
```json
{
    "body": "<a id='comment:17'></a>\nFor the record, m4ri builds fine if you don't set `SAGE_CHECK=yes`",
    "created_at": "2014-09-11T12:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226021",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
For the record, m4ri builds fine if you don't set `SAGE_CHECK=yes`



---

archive/issue_comments_226022.json:
```json
{
    "body": "<a id='comment:18'></a>\nI get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...",
    "created_at": "2014-09-11T12:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226022",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>
I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...



---

archive/issue_comments_226023.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@vbraun](#comment%3A18):\n> I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...\n\nIt has built for me (without `SAGE_CHECK=yes`), but I suppose that `libomalloc` was present from previous attempts to build. So, let's try \"make distclean\" and try again...",
    "created_at": "2014-09-11T15:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226023",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>
Replying to [@vbraun](#comment%3A18):
> I get `/usr/bin/ld: cannot find -lomalloc` when building from scratch...

It has built for me (without `SAGE_CHECK=yes`), but I suppose that `libomalloc` was present from previous attempts to build. So, let's try "make distclean" and try again...



---

archive/issue_events_152042.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T15:18:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152042"
}
```



---

archive/issue_events_152043.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T15:18:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152043"
}
```



---

archive/issue_comments_226024.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7\">f4c6701</a></td><td><code>Replace lomalloc by lomalloc_ndebug everywhere in debug version</code></td></tr></table>\n",
    "created_at": "2014-09-11T22:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226024",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7">f4c6701</a></td><td><code>Replace lomalloc by lomalloc_ndebug everywhere in debug version</code></td></tr></table>




---

archive/issue_comments_226025.json:
```json
{
    "body": "**Changing commit** from \"[9c318934ef2fc17bb341cc7353e48253228c6955](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)\" to \"[f4c67018882e40679019e17ab1d58d8d1b6cc3b7](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)\".",
    "created_at": "2014-09-11T22:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226025",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9c318934ef2fc17bb341cc7353e48253228c6955](https://github.com/sagemath/sagetrac-mirror/commit/9c318934ef2fc17bb341cc7353e48253228c6955)" to "[f4c67018882e40679019e17ab1d58d8d1b6cc3b7](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)".



---

archive/issue_events_152044.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T22:24:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152044"
}
```



---

archive/issue_events_152045.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-09-11T22:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152045"
}
```



---

archive/issue_comments_226026.json:
```json
{
    "body": "<a id='comment:21'></a>\nAfter make distclean I could reproduce the build errors.\n\nThe latest commit provides a solution. Perhaps you don't like it, for aesthetic reasons (\"the debug version uses a module called omalloc_ndebug\"), but it works. I also had to resolve a conflict with `cygwin_64.patch` to achieve it.",
    "created_at": "2014-09-11T22:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226026",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:21'></a>
After make distclean I could reproduce the build errors.

The latest commit provides a solution. Perhaps you don't like it, for aesthetic reasons ("the debug version uses a module called omalloc_ndebug"), but it works. I also had to resolve a conflict with `cygwin_64.patch` to achieve it.



---

archive/issue_comments_226027.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'll give it a spin.\n\nIMHO we don't have to win beauty contests with the debug version...",
    "created_at": "2014-09-11T23:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226027",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
I'll give it a spin.

IMHO we don't have to win beauty contests with the debug version...



---

archive/issue_comments_226028.json:
```json
{
    "body": "<a id='comment:23'></a>\nStill doesn't build for me:\n\n```\ng++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \\\n  -o Singular \\\n  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\\\n  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/home/vbraun/Sage/git-develop/local/kernel -L../kernel -lkernel_g -L/home/vbraun/Sage/git-develop/local/lib  -L/home/vbraun/Sage/git-develop/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -ltermcap -lnsl -lm  -lnsl -lbsd  -lomalloc -lpthread  ../kernel/mmalloc.o \n/usr/bin/ld: cannot find -lomalloc\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [Singular] Error 1\nmake[1]: Leaving directory `/home/vbraun/Sage/git-develop/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/Singular'\nmake: *** [install-nolns] Error 1\nUnable to build and install Singular\nError building Singular (error in build_singular).\n```",
    "created_at": "2014-09-12T12:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226028",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
Still doesn't build for me:

```
g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \
  -o Singular \
  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\
  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/home/vbraun/Sage/git-develop/local/kernel -L../kernel -lkernel_g -L/home/vbraun/Sage/git-develop/local/lib  -L/home/vbraun/Sage/git-develop/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -ltermcap -lnsl -lm  -lnsl -lbsd  -lomalloc -lpthread  ../kernel/mmalloc.o 
/usr/bin/ld: cannot find -lomalloc
collect2: error: ld returned 1 exit status
make[1]: *** [Singular] Error 1
make[1]: Leaving directory `/home/vbraun/Sage/git-develop/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/Singular'
make: *** [install-nolns] Error 1
Unable to build and install Singular
Error building Singular (error in build_singular).
```



---

archive/issue_comments_226029.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [@vbraun](#comment%3A23):\n> Still doesn't build for me:\n\nSeriously? It did build for me, even though I did `make distclean` after making the makefile make `omalloc_ndebug` instead of `omalloc`.\n\n> ```\n> g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \\\n>   -o Singular \\\n>   tesths.cc iparith.o mpsr_Tok.o claptmpl.o\\...\n> ```\n\nThe name `tesths.cc` suggests that this is for testing. So, did you build with `SAGE_CHECK` and `SAGE_DEBUG` together?",
    "created_at": "2014-09-12T12:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226029",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:24'></a>
Replying to [@vbraun](#comment%3A23):
> Still doesn't build for me:

Seriously? It did build for me, even though I did `make distclean` after making the makefile make `omalloc_ndebug` instead of `omalloc`.

> ```
> g++ -O0 -g  -fPIC -I.. -I/home/vbraun/Sage/git-develop/local -pipe -I. -I.. -I/home/vbraun/Sage/git-develop/local -I/home/vbraun/Sage/git-develop/local/include -I/home/vbraun/Sage/git-develop/local/include   -fno-implicit-templates -I.. -I/home/vbraun/Sage/git-develop/local -Dx86_64_Linux -DHAVE_CONFIG_H \
>   -o Singular \
>   tesths.cc iparith.o mpsr_Tok.o claptmpl.o\...
> ```

The name `tesths.cc` suggests that this is for testing. So, did you build with `SAGE_CHECK` and `SAGE_DEBUG` together?



---

archive/issue_comments_226030.json:
```json
{
    "body": "<a id='comment:25'></a>\nAre you using 32bit? I did not enable `SAGE_CHECKS`.",
    "created_at": "2014-09-12T13:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226030",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
Are you using 32bit? I did not enable `SAGE_CHECKS`.



---

archive/issue_comments_226031.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)\" to \"[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)\".",
    "created_at": "2014-09-12T13:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226031",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/SimonKing/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/sage_debug_version)" to "[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)".



---

archive/issue_comments_226032.json:
```json
{
    "body": "**Changing commit** from \"[f4c67018882e40679019e17ab1d58d8d1b6cc3b7](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)\" to \"[25b66c3f6ad76e06a334b18c3724f4c58537c987](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)\".",
    "created_at": "2014-09-12T13:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226032",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing commit** from "[f4c67018882e40679019e17ab1d58d8d1b6cc3b7](https://github.com/sagemath/sagetrac-mirror/commit/f4c67018882e40679019e17ab1d58d8d1b6cc3b7)" to "[25b66c3f6ad76e06a334b18c3724f4c58537c987](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)".



---

archive/issue_comments_226033.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [@vbraun](#comment%3A25):\n> Are you using 32bit? I did not enable `SAGE_CHECKS`.\n\nNo, I am on 64 bit. Is the file you mentioned only built on 32 bit??\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987\">25b66c3</a></td><td><code>Switch yet another -lomalloc</code></td></tr></table>\n",
    "created_at": "2014-09-12T13:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226033",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:27'></a>
Replying to [@vbraun](#comment%3A25):
> Are you using 32bit? I did not enable `SAGE_CHECKS`.

No, I am on 64 bit. Is the file you mentioned only built on 32 bit??

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987">25b66c3</a></td><td><code>Switch yet another -lomalloc</code></td></tr></table>




---

archive/issue_comments_226034.json:
```json
{
    "body": "<a id='comment:28'></a>\nOK, the change sounds reasonable.",
    "created_at": "2014-09-12T13:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226034",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>
OK, the change sounds reasonable.



---

archive/issue_comments_226035.json:
```json
{
    "body": "<a id='comment:29'></a>\nNo, I'm on x86 too. The issue comes from the `test \"$ac_cv_sizeof_voidp\" != 4;` so I thought it might be a bitwidth thing.",
    "created_at": "2014-09-12T13:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226035",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>
No, I'm on x86 too. The issue comes from the `test "$ac_cv_sizeof_voidp" != 4;` so I thought it might be a bitwidth thing.



---

archive/issue_comments_226036.json:
```json
{
    "body": "<a id='comment:30'></a>\nBy the way: I did not run the full test suite yet (now I am rebuilding from scratch), but found a surprisingly high number of test errors, given that not so long time ago the debug version passed *all* tests.",
    "created_at": "2014-09-12T13:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226036",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:30'></a>
By the way: I did not run the full test suite yet (now I am rebuilding from scratch), but found a surprisingly high number of test errors, given that not so long time ago the debug version passed *all* tests.



---

archive/issue_comments_226037.json:
```json
{
    "body": "<a id='comment:31'></a>\nMost failures seem to be from non-commutative stuff...",
    "created_at": "2014-09-12T14:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226037",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>
Most failures seem to be from non-commutative stuff...



---

archive/issue_comments_226038.json:
```json
{
    "body": "<a id='comment:32'></a>\nFor example:\n\n```\n(gdb) break dReportError\nBreakpoint 1 at 0x7fffcc699a71: file dError.c, line 28.\n(gdb) cont\nContinuing.\n\nsage: F.<x,y,z> = FreeAlgebra(QQ, implementation='letterplace')\nsage: I = F*[x*y+y*z,x^2+x*y-y*x-y^2]*F\nsage: Q.<a,b,c> = F.quo(I); Q\nQuotient of Free Associative Unital Algebra on 3 generators (x, y, z) over Rational Field by the ideal (x*y + y*z, x*x + x*y - y*x - y*y)\nsage: a^3\n\nBreakpoint 1, dReportError (fmt=0x7fffcc8b2679 \"S_2_R[%d]=%d != T[%d].i_r=%d\\n\") at dError.c:28\n28\tdError.c: No such file or directory.\n(gdb) bt\n#0  dReportError (fmt=0x7fffcc8b2679 \"S_2_R[%d]=%d != T[%d].i_r=%d\\n\") at dError.c:28\n#1  0x00007fffcc5b860a in kTest_TS (strat=0x2d09920) at kutil.cc:861\n#2  0x00007fffcc5b0598 in bbaShift (F=0x18d0638, Q=0x0, w=0x0, hilb=0x0, strat=0x2d09920, uptodeg=3, lV=3)\n    at kstd2.cc:1724\n#3  0x00007fffcc5a79ed in kStdShift (F=0x18d0638, Q=0x0, h=isHomog, w=0x0, hilb=0x0, syzComp=0, \n    newIdeal=0, vw=0x0, uptodeg=3, lV=3) at kstd1.cc:1912\n#4  0x00007fffcc5b09ce in freegb (I=0x18d0638, uptodeg=3, lVblock=3) at kstd2.cc:1823\n#5  0x00007fffcc4e2301 in jjSYSTEM (res=0x2d06588, args=0x18d0548) at extra.cc:1370\n#6  0x00007fffcc4a06b5 in iiExprArithM (res=0x2d06588, a=0x18d0548, op=496) at iparith.cc:8321\n#7  0x00007fffcb9c3eb9 in __pyx_f_4sage_4libs_8singular_8function_17KernelCallHandler_handle_call (\n    __pyx_v_self=0x7fffb80d2880, __pyx_v_argument_list=0x7fffb80d1860, __pyx_optional_args=0x7fffffff7ef0)\n    at build/cythonized/sage/libs/singular/function.cpp:12083\n[...]\n(gdb) cy bt\n[...]\n#78 0x00007ffff7cd7b2d in _reduce_() at /home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/rings/quotient_ring_element.py:118\n       118            self.__rep = I.reduce(self.__rep)\n#83 0x00007fffb5ae04ce in reduce() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:306\n       306        def reduce(self, G):\n#87 0x00007fffb5f90e45 in normal_form() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:733\n       733        def normal_form(self,I):\n#93 0x00007fffb5ad9bb4 in groebner_basis() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:187\n---Type <return> to continue, or q <return> to quit---\n       187        def groebner_basis(self, degbound=None):\n#96 0x00007fffcb9c5095 in __call__() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1185\n      1185        def __call__(self, *args, ring=None, bint interruptible=True, attributes=None):\n#98 0x00007fffcb9ca76b in call_function() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1462\n      1462                _res = self.call_handler.handle_call(argument_list, si_ring)\n#99 0x00007fffcb9c3d15 in handle_call() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1093\n      1093                iiExprArithM(res, argument_list.args, self.cmd_n)\n#100 0x00007fffcc4a029d in iiExprArithM()\n\n```",
    "created_at": "2014-09-12T15:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226038",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>
For example:

```
(gdb) break dReportError
Breakpoint 1 at 0x7fffcc699a71: file dError.c, line 28.
(gdb) cont
Continuing.

sage: F.<x,y,z> = FreeAlgebra(QQ, implementation='letterplace')
sage: I = F*[x*y+y*z,x^2+x*y-y*x-y^2]*F
sage: Q.<a,b,c> = F.quo(I); Q
Quotient of Free Associative Unital Algebra on 3 generators (x, y, z) over Rational Field by the ideal (x*y + y*z, x*x + x*y - y*x - y*y)
sage: a^3

Breakpoint 1, dReportError (fmt=0x7fffcc8b2679 "S_2_R[%d]=%d != T[%d].i_r=%d\n") at dError.c:28
28	dError.c: No such file or directory.
(gdb) bt
#0  dReportError (fmt=0x7fffcc8b2679 "S_2_R[%d]=%d != T[%d].i_r=%d\n") at dError.c:28
#1  0x00007fffcc5b860a in kTest_TS (strat=0x2d09920) at kutil.cc:861
#2  0x00007fffcc5b0598 in bbaShift (F=0x18d0638, Q=0x0, w=0x0, hilb=0x0, strat=0x2d09920, uptodeg=3, lV=3)
    at kstd2.cc:1724
#3  0x00007fffcc5a79ed in kStdShift (F=0x18d0638, Q=0x0, h=isHomog, w=0x0, hilb=0x0, syzComp=0, 
    newIdeal=0, vw=0x0, uptodeg=3, lV=3) at kstd1.cc:1912
#4  0x00007fffcc5b09ce in freegb (I=0x18d0638, uptodeg=3, lVblock=3) at kstd2.cc:1823
#5  0x00007fffcc4e2301 in jjSYSTEM (res=0x2d06588, args=0x18d0548) at extra.cc:1370
#6  0x00007fffcc4a06b5 in iiExprArithM (res=0x2d06588, a=0x18d0548, op=496) at iparith.cc:8321
#7  0x00007fffcb9c3eb9 in __pyx_f_4sage_4libs_8singular_8function_17KernelCallHandler_handle_call (
    __pyx_v_self=0x7fffb80d2880, __pyx_v_argument_list=0x7fffb80d1860, __pyx_optional_args=0x7fffffff7ef0)
    at build/cythonized/sage/libs/singular/function.cpp:12083
[...]
(gdb) cy bt
[...]
#78 0x00007ffff7cd7b2d in _reduce_() at /home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/rings/quotient_ring_element.py:118
       118            self.__rep = I.reduce(self.__rep)
#83 0x00007fffb5ae04ce in reduce() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:306
       306        def reduce(self, G):
#87 0x00007fffb5f90e45 in normal_form() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:733
       733        def normal_form(self,I):
#93 0x00007fffb5ad9bb4 in groebner_basis() at /home/vbraun/Sage/git-develop/src/sage/algebras/letterplace/letterplace_ideal.pyx:187
---Type <return> to continue, or q <return> to quit---
       187        def groebner_basis(self, degbound=None):
#96 0x00007fffcb9c5095 in __call__() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1185
      1185        def __call__(self, *args, ring=None, bint interruptible=True, attributes=None):
#98 0x00007fffcb9ca76b in call_function() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1462
      1462                _res = self.call_handler.handle_call(argument_list, si_ring)
#99 0x00007fffcb9c3d15 in handle_call() at /home/vbraun/Sage/git-develop/src/sage/libs/singular/function.pyx:1093
      1093                iiExprArithM(res, argument_list.args, self.cmd_n)
#100 0x00007fffcc4a029d in iiExprArithM()

```



---

archive/issue_comments_226039.json:
```json
{
    "body": "<a id='comment:33'></a>\nI can reproduce some failures just in Singular, so I've asked here: https://groups.google.com/d/msg/libsingular-devel/4fL9NKCVGw0/mlOd_vzNSG8J",
    "created_at": "2014-09-12T17:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226039",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
I can reproduce some failures just in Singular, so I've asked here: https://groups.google.com/d/msg/libsingular-devel/4fL9NKCVGw0/mlOd_vzNSG8J



---

archive/issue_comments_226040.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3\">a38e790</a></td><td><code>Fix dangling C pointer to Python temporary</code></td></tr></table>\n",
    "created_at": "2014-09-12T20:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226040",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3">a38e790</a></td><td><code>Fix dangling C pointer to Python temporary</code></td></tr></table>




---

archive/issue_comments_226041.json:
```json
{
    "body": "**Changing commit** from \"[25b66c3f6ad76e06a334b18c3724f4c58537c987](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)\" to \"[a38e790babdd0c0cc6ced2d79dd16c0603072cc3](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)\".",
    "created_at": "2014-09-12T20:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226041",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[25b66c3f6ad76e06a334b18c3724f4c58537c987](https://github.com/sagemath/sagetrac-mirror/commit/25b66c3f6ad76e06a334b18c3724f4c58537c987)" to "[a38e790babdd0c0cc6ced2d79dd16c0603072cc3](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)".



---

archive/issue_comments_226042.json:
```json
{
    "body": "**Changing commit** from \"[a38e790babdd0c0cc6ced2d79dd16c0603072cc3](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)\" to \"[0802e935cab470a2ce9ee9102203d9b27b55b1af](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)\".",
    "created_at": "2014-09-13T18:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226042",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a38e790babdd0c0cc6ced2d79dd16c0603072cc3](https://github.com/sagemath/sagetrac-mirror/commit/a38e790babdd0c0cc6ced2d79dd16c0603072cc3)" to "[0802e935cab470a2ce9ee9102203d9b27b55b1af](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)".



---

archive/issue_comments_226043.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cd65a8113c714a718679ce9a6b03a766052ad2e\">1cd65a8</a></td><td><code>Remove some failing Singular debug statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af\">0802e93</a></td><td><code>Reduce size of doctest</code></td></tr></table>\n",
    "created_at": "2014-09-13T18:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226043",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cd65a8113c714a718679ce9a6b03a766052ad2e">1cd65a8</a></td><td><code>Remove some failing Singular debug statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af">0802e93</a></td><td><code>Reduce size of doctest</code></td></tr></table>




---

archive/issue_comments_226044.json:
```json
{
    "body": "<a id='comment:36'></a>\nI think some internal Singular checks that get enabled with `NDEBUG` are too strict, I've added a patch removing these. I also almost despaired in `fast_map` until I noticed that `idTest` incorrectly assumes that `currRing` is set.\n\nNow `make ptest` passes.",
    "created_at": "2014-09-13T18:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226044",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>
I think some internal Singular checks that get enabled with `NDEBUG` are too strict, I've added a patch removing these. I also almost despaired in `fast_map` until I noticed that `idTest` incorrectly assumes that `currRing` is set.

Now `make ptest` passes.



---

archive/issue_comments_226045.json:
```json
{
    "body": "**Changing commit** from \"[0802e935cab470a2ce9ee9102203d9b27b55b1af](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)\" to \"[37fda1dff0d1f58d7b07489a250526d735a12c62](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)\".",
    "created_at": "2014-09-13T20:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226045",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0802e935cab470a2ce9ee9102203d9b27b55b1af](https://github.com/sagemath/sagetrac-mirror/commit/0802e935cab470a2ce9ee9102203d9b27b55b1af)" to "[37fda1dff0d1f58d7b07489a250526d735a12c62](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)".



---

archive/issue_comments_226046.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62\">37fda1d</a></td><td><code>Reduce scale of some more huge doctests</code></td></tr></table>\n",
    "created_at": "2014-09-13T20:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226046",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62">37fda1d</a></td><td><code>Reduce scale of some more huge doctests</code></td></tr></table>




---

archive/issue_comments_226047.json:
```json
{
    "body": "<a id='comment:38'></a>\nComputing the invariants of an order-480 group after an order-48 group really only checks that you have a fast computer.\n\nThis fixes the last timeout in the `make ptestlong` for me.",
    "created_at": "2014-09-13T20:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226047",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>
Computing the invariants of an order-480 group after an order-48 group really only checks that you have a fast computer.

This fixes the last timeout in the `make ptestlong` for me.



---

archive/issue_comments_226048.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"Simon King, Volker Braun\".",
    "created_at": "2014-09-13T20:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226048",
    "user": "https://github.com/vbraun"
}
```

**Changing author** from "Simon King" to "Simon King, Volker Braun".



---

archive/issue_comments_226049.json:
```json
{
    "body": "**Changing upstream** from \"None of the above - read trac for reasoning.\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2014-09-13T20:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226049",
    "user": "https://github.com/vbraun"
}
```

**Changing upstream** from "None of the above - read trac for reasoning." to "Reported upstream. No feedback yet.".



---

archive/issue_comments_226050.json:
```json
{
    "body": "<a id='comment:41'></a>\nHi Volker, I am not happy with the two commits to reduce size of doctests.\n\nIt is said in the doc that `below we do the Fateman benchmark over the finite field of order 32003`, but I guess with your changes the statement becomes wrong, it isn't the Fateman benchmark if the exponent is only 10 and not 20.\n\nAlso I don't see why a test that is marked \"long\" anyway should be removed just because the debug version slows it down too much.\n\nBy the way, how long does this test take in non-debug version? It is stated that it used to take 12 seconds, four years ago. And 12 seconds is totally fine for a long test, IMHO.",
    "created_at": "2014-09-13T20:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226050",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:41'></a>
Hi Volker, I am not happy with the two commits to reduce size of doctests.

It is said in the doc that `below we do the Fateman benchmark over the finite field of order 32003`, but I guess with your changes the statement becomes wrong, it isn't the Fateman benchmark if the exponent is only 10 and not 20.

Also I don't see why a test that is marked "long" anyway should be removed just because the debug version slows it down too much.

By the way, how long does this test take in non-debug version? It is stated that it used to take 12 seconds, four years ago. And 12 seconds is totally fine for a long test, IMHO.



---

archive/issue_comments_226051.json:
```json
{
    "body": "<a id='comment:42'></a>\nThey are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.\n\nPut differently, would you rather \na) have a buildbot with `SAGE_DEBUG`, or \nb) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.",
    "created_at": "2014-09-13T20:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226051",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:42'></a>
They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.

Put differently, would you rather 
a) have a buildbot with `SAGE_DEBUG`, or 
b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.



---

archive/issue_comments_226052.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [@vbraun](#comment%3A42):\n> They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.\n> \n> Put differently, would you rather \n> a) have a buildbot with `SAGE_DEBUG`, or \n> b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.\n\nI'd rather have c): A buildbot with `SAGE_DEBUG` that only runs the tests that are not marked long.",
    "created_at": "2014-09-13T20:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226052",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:43'></a>
Replying to [@vbraun](#comment%3A42):
> They are doctests, not benchmarks. Don't confuse the two. Really, showing off what size of a problem you can do in doctests is just an overall drag on development as people have to wait longer and longer for tests. IMHO 12 seconds is already on the long side, you should aim for <=5 for long tests.
> 
> Put differently, would you rather 
> a) have a buildbot with `SAGE_DEBUG`, or 
> b) doctest a huge computation and then discard the result because it can't do anything useful with the timings obtained.

I'd rather have c): A buildbot with `SAGE_DEBUG` that only runs the tests that are not marked long.



---

archive/issue_comments_226053.json:
```json
{
    "body": "<a id='comment:44'></a>\nI disagree. Doctests are not benchmarks. Doctests coverage is more important than benchvertising. We should have a framework for benchmarks in addition to doctests, but stuffing benchmarks into doctests is counterproductive.",
    "created_at": "2014-09-13T20:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226053",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>
I disagree. Doctests are not benchmarks. Doctests coverage is more important than benchvertising. We should have a framework for benchmarks in addition to doctests, but stuffing benchmarks into doctests is counterproductive.



---

archive/issue_comments_226054.json:
```json
{
    "body": "<a id='comment:45'></a>\nI can not tell why the patchbot scripts are complaining. In any case, I get the following test failures:\n\n```\nsage -t src/sage/stats/hmm/hmm.pyx\n    [118 tests, 2 failures, 1.70 s]\n...\nsage -t src/sage/gsl/probability_distribution.pyx\n    [207 tests, 3 failures, 11.09 s]\n...\nsage -t src/sage/plot/plot3d/transform.pyx\n    [25 tests, 1 failure, 6.27 s]\n```\n\nUnfortunately it doesn't say what the failure is. Why does it not?",
    "created_at": "2014-09-14T07:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226054",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:45'></a>
I can not tell why the patchbot scripts are complaining. In any case, I get the following test failures:

```
sage -t src/sage/stats/hmm/hmm.pyx
    [118 tests, 2 failures, 1.70 s]
...
sage -t src/sage/gsl/probability_distribution.pyx
    [207 tests, 3 failures, 11.09 s]
...
sage -t src/sage/plot/plot3d/transform.pyx
    [25 tests, 1 failure, 6.27 s]
```

Unfortunately it doesn't say what the failure is. Why does it not?



---

archive/issue_comments_226055.json:
```json
{
    "body": "<a id='comment:46'></a>\nTry `sage -t --verbose`. Also, I've never seen a failure to report whats wrong. Can you post the full log?",
    "created_at": "2014-09-14T11:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226055",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>
Try `sage -t --verbose`. Also, I've never seen a failure to report whats wrong. Can you post the full log?



---

archive/issue_comments_226056.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [@vbraun](#comment%3A46):\n> Try `sage -t --verbose`.\n\n```\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 282, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel\nFailed example:\n    m\nExpected:\n    Discrete Hidden Markov Model with 2 States and 2 Emissions\n    Transition matrix:\n    [1.0134345614...e-70               1.0]\n    [              1.0 3.997435271...e-19]\n    Emission matrix:\n    [7.3802215662...e-54               1.0]\n    [              1.0  3.99743526...e-19]\n    Initial probabilities: [0.0000, 1.0000]\nGot:\n    Discrete Hidden Markov Model with 2 States and 2 Emissions\n    Transition matrix:\n    [1.0134345614745788e-70                    1.0]\n    [                   1.0 3.9974352713558623e-19]\n    Emission matrix:\n    [ 7.380221566254936e-54                    1.0]\n    [                   1.0 3.9974352626002193e-19]\n    Initial probabilities: [0.0000, 1.0000]\n**********************************************************************\nFile \"src/sage/stats/hmm/hmm.pyx\", line 1236, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel.baum_welch\nFailed example:\n    m.baum_welch(v)\nExpected:\n    (-66.7823606592935..., 100)\nGot:\n    (-66.7823606592936, 100)\n```\n\n```\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 364, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.cum_distribution_function_inv(.5)\nExpected:\n    3.532230067546424\nGot:\n    3.5322300675464247\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 402, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.distribution_function(0)\nExpected:\n    0.3183098861837906\nGot:\n    0.3183098861837905\nTrying (line 404):    T.cum_distribution_function(1)\nExpecting:\n    0.7499999999999998\n**********************************************************************\nFile \"src/sage/gsl/probability_distribution.pyx\", line 404, in sage.gsl.probability_distribution.RealDistribution\nFailed example:\n    T.cum_distribution_function(1)\nExpected:\n    0.7499999999999998\nGot:\n    0.75\n```\n\n```\n*********************************************************************\nFile \"src/sage/plot/plot3d/transform.pyx\", line 179, in sage.plot.plot3d.transform.rotate_arbitrary\nFailed example:\n    rotate_arbitrary((1,1,1), 2*pi/3) * vector(RDF, (1,2,3))  # rel tol 1e-15\nExpected:\n    (1.9999999999999996, 2.9999999999999996, 0.9999999999999999)\nGot:\n    (2.000000000000001, 3.0000000000000013, 1.000000000000001)\nTolerance exceeded in 1 of 3:\n    0.9999999999999999 vs 1.000000000000001, tolerance 1e-15 > 1e-15\n```\n\n> Also, I've never seen a failure to report whats wrong.\n\nYes, but I have always seen a failure to report what has failed.\n\nBut here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.\n\n> Can you post the full log?\n\nNot before Monday (bandwidth).\n\nAnyway, the verbose output above indicates that we have numerical noise, not related with Singular. By the way, if that's relevant: In my local branch I have merged your gdb branch from #16978.",
    "created_at": "2014-09-14T13:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226056",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:47'></a>
Replying to [@vbraun](#comment%3A46):
> Try `sage -t --verbose`.

```
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 282, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel
Failed example:
    m
Expected:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.0134345614...e-70               1.0]
    [              1.0 3.997435271...e-19]
    Emission matrix:
    [7.3802215662...e-54               1.0]
    [              1.0  3.99743526...e-19]
    Initial probabilities: [0.0000, 1.0000]
Got:
    Discrete Hidden Markov Model with 2 States and 2 Emissions
    Transition matrix:
    [1.0134345614745788e-70                    1.0]
    [                   1.0 3.9974352713558623e-19]
    Emission matrix:
    [ 7.380221566254936e-54                    1.0]
    [                   1.0 3.9974352626002193e-19]
    Initial probabilities: [0.0000, 1.0000]
**********************************************************************
File "src/sage/stats/hmm/hmm.pyx", line 1236, in sage.stats.hmm.hmm.DiscreteHiddenMarkovModel.baum_welch
Failed example:
    m.baum_welch(v)
Expected:
    (-66.7823606592935..., 100)
Got:
    (-66.7823606592936, 100)
```

```
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 364, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.cum_distribution_function_inv(.5)
Expected:
    3.532230067546424
Got:
    3.5322300675464247
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 402, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.distribution_function(0)
Expected:
    0.3183098861837906
Got:
    0.3183098861837905
Trying (line 404):    T.cum_distribution_function(1)
Expecting:
    0.7499999999999998
**********************************************************************
File "src/sage/gsl/probability_distribution.pyx", line 404, in sage.gsl.probability_distribution.RealDistribution
Failed example:
    T.cum_distribution_function(1)
Expected:
    0.7499999999999998
Got:
    0.75
```

```
*********************************************************************
File "src/sage/plot/plot3d/transform.pyx", line 179, in sage.plot.plot3d.transform.rotate_arbitrary
Failed example:
    rotate_arbitrary((1,1,1), 2*pi/3) * vector(RDF, (1,2,3))  # rel tol 1e-15
Expected:
    (1.9999999999999996, 2.9999999999999996, 0.9999999999999999)
Got:
    (2.000000000000001, 3.0000000000000013, 1.000000000000001)
Tolerance exceeded in 1 of 3:
    0.9999999999999999 vs 1.000000000000001, tolerance 1e-15 > 1e-15
```

> Also, I've never seen a failure to report whats wrong.

Yes, but I have always seen a failure to report what has failed.

But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.

> Can you post the full log?

Not before Monday (bandwidth).

Anyway, the verbose output above indicates that we have numerical noise, not related with Singular. By the way, if that's relevant: In my local branch I have merged your gdb branch from #16978.



---

archive/issue_comments_226057.json:
```json
{
    "body": "**Changing branch** from \"[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)\" to \"[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)\".",
    "created_at": "2014-09-15T18:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226057",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vbraun/sage_debug_version](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version)" to "[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)".



---

archive/issue_comments_226058.json:
```json
{
    "body": "<a id='comment:49'></a>\nHans sent a patch for one of the debug build issues to libsingular-devel, I've added it and removed my patch that disabled various checks. If he manages to fix the rest then we might not need my patch...\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75940b2a4514a58d9596de0b653482e7bac26fe4\">75940b2</a></td><td><code>Reduce size of doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d737eb49be7615ddb1267c209fac2403fd79d9bb\">d737eb4</a></td><td><code>Reduce scale of some more huge doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43\">3dedecd</a></td><td><code>Fix erroneous \"mixed poly/vector\" error message</code></td></tr></table>\n",
    "created_at": "2014-09-15T21:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226058",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>
Hans sent a patch for one of the debug build issues to libsingular-devel, I've added it and removed my patch that disabled various checks. If he manages to fix the rest then we might not need my patch...

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75940b2a4514a58d9596de0b653482e7bac26fe4">75940b2</a></td><td><code>Reduce size of doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d737eb49be7615ddb1267c209fac2403fd79d9bb">d737eb4</a></td><td><code>Reduce scale of some more huge doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43">3dedecd</a></td><td><code>Fix erroneous "mixed poly/vector" error message</code></td></tr></table>




---

archive/issue_comments_226059.json:
```json
{
    "body": "**Changing commit** from \"[37fda1dff0d1f58d7b07489a250526d735a12c62](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)\" to \"[3dedecd8dbe079567d53f37d3666e1419ed51a43](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)\".",
    "created_at": "2014-09-15T21:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226059",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[37fda1dff0d1f58d7b07489a250526d735a12c62](https://github.com/sagemath/sagetrac-mirror/commit/37fda1dff0d1f58d7b07489a250526d735a12c62)" to "[3dedecd8dbe079567d53f37d3666e1419ed51a43](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)".



---

archive/issue_events_152046.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-15T21:16:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152046"
}
```



---

archive/issue_events_152047.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-15T21:16:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152047"
}
```



---

archive/issue_comments_226060.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563\">ceb83f9</a></td><td><code>Fix slimgb and FreeAlgebra errors</code></td></tr></table>\n",
    "created_at": "2014-09-16T16:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226060",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563">ceb83f9</a></td><td><code>Fix slimgb and FreeAlgebra errors</code></td></tr></table>




---

archive/issue_comments_226061.json:
```json
{
    "body": "**Changing commit** from \"[3dedecd8dbe079567d53f37d3666e1419ed51a43](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)\" to \"[ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)\".",
    "created_at": "2014-09-16T16:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226061",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3dedecd8dbe079567d53f37d3666e1419ed51a43](https://github.com/sagemath/sagetrac-mirror/commit/3dedecd8dbe079567d53f37d3666e1419ed51a43)" to "[ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)".



---

archive/issue_comments_226062.json:
```json
{
    "body": "**Changing commit** from \"[ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)\" to \"[9233d05bfaf8fd2d5a005d6880c30448fd750a77](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)\".",
    "created_at": "2014-09-18T12:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226062",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563](https://github.com/sagemath/sagetrac-mirror/commit/ceb83f9a60ddd6d4f60fcc6ba0e67a4cc3c49563)" to "[9233d05bfaf8fd2d5a005d6880c30448fd750a77](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)".



---

archive/issue_comments_226063.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77\">9233d05</a></td><td><code>Fix quo_rem and macaulay_resultant errors</code></td></tr></table>\n",
    "created_at": "2014-09-18T12:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226063",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77">9233d05</a></td><td><code>Fix quo_rem and macaulay_resultant errors</code></td></tr></table>




---

archive/issue_events_152048.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-22T15:02:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152048"
}
```



---

archive/issue_events_152049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-22T15:02:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152049"
}
```



---

archive/issue_comments_226064.json:
```json
{
    "body": "<a id='comment:52'></a>\nI've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.",
    "created_at": "2014-09-22T15:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226064",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>
I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.



---

archive/issue_comments_226065.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!\n+\n+I suppose the fix will eventually be in a stable upstream release.\n``````\n",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226065",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!
+
+I suppose the fix will eventually be in a stable upstream release.
``````




---

archive/issue_comments_226066.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [@vbraun](#comment%3A52):\n> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.\n\nExcellent!",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226066",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:53'></a>
Replying to [@vbraun](#comment%3A52):
> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.

Excellent!



---

archive/issue_comments_226067.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2014-09-22T15:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226067",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_226068.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [@vbraun](#comment%3A52):\n> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.\n\nThe branch did not change since four days. So, is it the case that the branch contains all of Hans' patches, or do you need to push another commit?",
    "created_at": "2014-09-22T15:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226068",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:54'></a>
Replying to [@vbraun](#comment%3A52):
> I've reported the failures on libsingular-devel and Hans posted patches for all of them. Branch now compiles/doctests fine for me without disabling any debug statements.

The branch did not change since four days. So, is it the case that the branch contains all of Hans' patches, or do you need to push another commit?



---

archive/issue_comments_226069.json:
```json
{
    "body": "<a id='comment:55'></a>\nI was just busy elsewhere...",
    "created_at": "2014-09-22T15:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226069",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:55'></a>
I was just busy elsewhere...



---

archive/issue_comments_226070.json:
```json
{
    "body": "<a id='comment:56'></a>\nimho there is little to review here... it works, and most of the patches come straight from upstream.",
    "created_at": "2014-09-26T22:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226070",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:56'></a>
imho there is little to review here... it works, and most of the patches come straight from upstream.



---

archive/issue_comments_226071.json:
```json
{
    "body": "<a id='comment:57'></a>\nI'll try to review it, although I am one of the authors...",
    "created_at": "2014-09-30T12:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226071",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:57'></a>
I'll try to review it, although I am one of the authors...



---

archive/issue_comments_226072.json:
```json
{
    "body": "**Changing branch** from \"[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)\" to \"[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)\".",
    "created_at": "2014-09-30T14:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226072",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/vbraun/sage_debug_version_2](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/sage_debug_version_2)" to "[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)".



---

archive/issue_comments_226073.json:
```json
{
    "body": "**Changing commit** from \"[9233d05bfaf8fd2d5a005d6880c30448fd750a77](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)\" to \"[44ac240d3a42ae8e3cd3b1e1d0b725f937737d34](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)\".",
    "created_at": "2014-09-30T15:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226073",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[9233d05bfaf8fd2d5a005d6880c30448fd750a77](https://github.com/sagemath/sagetrac-mirror/commit/9233d05bfaf8fd2d5a005d6880c30448fd750a77)" to "[44ac240d3a42ae8e3cd3b1e1d0b725f937737d34](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)".



---

archive/issue_comments_226074.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [@simon-king-jena](#comment%3A47):\n> But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.\n\nI have heard occasional rumours that this happens sometimes, but I have no idea how to reproduce it.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80ef8cd3b5772b0488ab871d059a13f226f00b9c\">80ef8cd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16938</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34\">44ac240</a></td><td><code>Typos</code></td></tr></table>\n",
    "created_at": "2014-09-30T15:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226074",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:59'></a>
Replying to [@simon-king-jena](#comment%3A47):
> But here, there is simply nothing in the log. It simply says that some tests failed, but not WHICH test failed, not what was the expected output and the actual output, not whether there has been a crash. Absolutely nothing.

I have heard occasional rumours that this happens sometimes, but I have no idea how to reproduce it.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80ef8cd3b5772b0488ab871d059a13f226f00b9c">80ef8cd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16938</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34">44ac240</a></td><td><code>Typos</code></td></tr></table>




---

archive/issue_comments_226075.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2014-09-30T20:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226075",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_152050.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T20:33:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152050"
}
```



---

archive/issue_events_152051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-30T20:33:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152051"
}
```



---

archive/issue_comments_226076.json:
```json
{
    "body": "<a id='comment:61'></a>\nThank you, Jeroen. I would have needed to run tests overnight to finish the review. But I do think that the patched patches look OK.",
    "created_at": "2014-09-30T20:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226076",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:61'></a>
Thank you, Jeroen. I would have needed to run tests overnight to finish the review. But I do think that the patched patches look OK.



---

archive/issue_comments_226077.json:
```json
{
    "body": "<a id='comment:62'></a>\nThe `conway_polynomials` package fails to build, even though I have `SAGE_UPGRADING` set to `yes`. [See logs](http://sage.math.washington.edu/home/SimonKing/logs/conway_polynomials-0.4.p0.log)\n\nIs there a problem with the debug? Or is it a problem with \"make\" and dependency checking?",
    "created_at": "2014-10-01T04:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226077",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:62'></a>
The `conway_polynomials` package fails to build, even though I have `SAGE_UPGRADING` set to `yes`. [See logs](http://sage.math.washington.edu/home/SimonKing/logs/conway_polynomials-0.4.p0.log)

Is there a problem with the debug? Or is it a problem with "make" and dependency checking?



---

archive/issue_events_152052.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T04:59:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152052"
}
```



---

archive/issue_events_152053.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T04:59:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152053"
}
```



---

archive/issue_comments_226078.json:
```json
{
    "body": "<a id='comment:63'></a>\nDid you build everything with this ticket applied and with `SAGE_DEBUG=yes`?",
    "created_at": "2014-10-01T06:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226078",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'></a>
Did you build everything with this ticket applied and with `SAGE_DEBUG=yes`?



---

archive/issue_comments_226079.json:
```json
{
    "body": "<a id='comment:64'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536\">0fb6279</a></td><td><code>Trac #16938: bump Singular version</code></td></tr></table>\n",
    "created_at": "2014-10-01T07:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226079",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:64'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536">0fb6279</a></td><td><code>Trac #16938: bump Singular version</code></td></tr></table>




---

archive/issue_comments_226080.json:
```json
{
    "body": "**Changing commit** from \"[44ac240d3a42ae8e3cd3b1e1d0b725f937737d34](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)\" to \"[0fb627916b73a741be1d942b0d94fd0046dc2536](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)\".",
    "created_at": "2014-10-01T07:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226080",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[44ac240d3a42ae8e3cd3b1e1d0b725f937737d34](https://github.com/sagemath/sagetrac-mirror/commit/44ac240d3a42ae8e3cd3b1e1d0b725f937737d34)" to "[0fb627916b73a741be1d942b0d94fd0046dc2536](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)".



---

archive/issue_comments_226081.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [@simon-king-jena](#comment%3A62):\n> Is there a problem with the debug?\n\nLooks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.\n\nI'll try to reproduce it and report upstream if it is confirmed.",
    "created_at": "2014-10-01T07:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226081",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Replying to [@simon-king-jena](#comment%3A62):
> Is there a problem with the debug?

Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.

I'll try to reproduce it and report upstream if it is confirmed.



---

archive/issue_comments_226082.json:
```json
{
    "body": "**Changing commit** from \"[0fb627916b73a741be1d942b0d94fd0046dc2536](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)\" to \"[53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)\".",
    "created_at": "2014-10-01T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226082",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0fb627916b73a741be1d942b0d94fd0046dc2536](https://github.com/sagemath/sagetrac-mirror/commit/0fb627916b73a741be1d942b0d94fd0046dc2536)" to "[53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)".



---

archive/issue_comments_226083.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\">53b73db</a></td><td><code>Fix m4ri assertion sizeof(mzd_t) == 64</code></td></tr></table>\n",
    "created_at": "2014-10-01T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226083",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa">53b73db</a></td><td><code>Fix m4ri assertion sizeof(mzd_t) == 64</code></td></tr></table>




---

archive/issue_comments_226084.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [@jdemeyer](#comment%3A65):\n> Replying to [@simon-king-jena](#comment%3A62):\n> > Is there a problem with the debug?\n\n> Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.\n> \n> I'll try to reproduce it and report upstream if it is confirmed.\n\nWould be surprising to me. After all, in an earlier debug version on this ticket, Sage did build. Now it doesn't. Anyway, I will try with your latest commit.",
    "created_at": "2014-10-01T09:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226084",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:67'></a>
Replying to [@jdemeyer](#comment%3A65):
> Replying to [@simon-king-jena](#comment%3A62):
> > Is there a problem with the debug?

> Looks like a genuine bug to me in libm4ri. I don't know why they need `sizeof(mzd_t) == 64`, but that equality is only true on 64-bit systems. Since two of the fields in `mzd_t` are pointers, this would give only 56 bytes on 32-bit systems.
> 
> I'll try to reproduce it and report upstream if it is confirmed.

Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build. Now it doesn't. Anyway, I will try with your latest commit.



---

archive/issue_comments_226085.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [@simon-king-jena](#comment%3A67):\n> Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.\n\nWas that after #16981?",
    "created_at": "2014-10-01T09:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226085",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
Replying to [@simon-king-jena](#comment%3A67):
> Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.

Was that after #16981?



---

archive/issue_comments_226086.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [@jdemeyer](#comment%3A68):\n> Replying to [@simon-king-jena](#comment%3A67):\n> > Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.\n\n> Was that after #16981?\n\nNo idea. And I actually doubt that M4RI is to blame. After all, the error occurs in the line\n\n```\n>    4    from sage.all import save\n```\nwhen installing the Conway polynomial package.",
    "created_at": "2014-10-01T09:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226086",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:69'></a>
Replying to [@jdemeyer](#comment%3A68):
> Replying to [@simon-king-jena](#comment%3A67):
> > Would be surprising to me. After all, in an earlier debug version on this ticket, Sage did build.

> Was that after #16981?

No idea. And I actually doubt that M4RI is to blame. After all, the error occurs in the line

```
>    4    from sage.all import save
```
when installing the Conway polynomial package.



---

archive/issue_comments_226087.json:
```json
{
    "body": "<a id='comment:70'></a>\nNote that in addition to the install log that I posted earlier, there also is a [Crash Log](http://sage.math.washington.edu/home/SimonKing/logs/sage_crash_XN6UDt.log) that is the result of the failing import.",
    "created_at": "2014-10-01T09:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226087",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:70'></a>
Note that in addition to the install log that I posted earlier, there also is a [Crash Log](http://sage.math.washington.edu/home/SimonKing/logs/sage_crash_XN6UDt.log) that is the result of the failing import.



---

archive/issue_comments_226088.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [@simon-king-jena](#comment%3A69):\n> the error occurs in the line\n> \n> ```\n> >    4    from sage.all import save\n> ```\n> when installing the Conway polynomial package.\n\nThat's just the top of the traceback. Importing `sage.all` does a lot of things. The full traceback clearly shows that the problem is in m4ri:\n\n```\nStack backtrace\n---------------\n[...]\n#8  0xb72e9d07 in __assert_fail () from /lib/libc.so.6\nNo symbol table info available.\n#9  0xb18e62f1 in mzd_init (r=7, c=7) at m4ri/mzd.c:151\n        __PRETTY_FUNCTION__ = \"mzd_init\"\n#10 0xb19270c4 in __pyx_pf_4sage_6matrix_17matrix_mod2_dense_17Matrix_mod2_dense___cinit__ (__pyx_v_self=0xad884034, __pyx_v_parent=0xace7b2f4, \n    __pyx_v_entries=0xad874fbc, __pyx_v_copy=0xb76a48ec <_Py_ZeroStruct>, \n    __pyx_v_coerce=0xb76a4900 <_Py_TrueStruct>, \n    __pyx_v_alloc=0xb76a4900 <_Py_TrueStruct>)\n    at build/cythonized/sage/matrix/matrix_mod2_dense.c:3313\n        __pyx_r = 1245376913\n        __pyx_t_1 = 0x0\n        __pyx_t_2 = 0x0\n        __pyx_t_3 = 0x0\n        __pyx_t_4 = 0\n        __pyx_t_5 = 0x0\n        __pyx_t_6 = 1\n        __pyx_lineno = 0\n        __pyx_filename = 0x0\n        __pyx_clineno = 0\n[...]\n```",
    "created_at": "2014-10-01T09:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226088",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:71'></a>
Replying to [@simon-king-jena](#comment%3A69):
> the error occurs in the line
> 
> ```
> >    4    from sage.all import save
> ```
> when installing the Conway polynomial package.

That's just the top of the traceback. Importing `sage.all` does a lot of things. The full traceback clearly shows that the problem is in m4ri:

```
Stack backtrace
---------------
[...]
#8  0xb72e9d07 in __assert_fail () from /lib/libc.so.6
No symbol table info available.
#9  0xb18e62f1 in mzd_init (r=7, c=7) at m4ri/mzd.c:151
        __PRETTY_FUNCTION__ = "mzd_init"
#10 0xb19270c4 in __pyx_pf_4sage_6matrix_17matrix_mod2_dense_17Matrix_mod2_dense___cinit__ (__pyx_v_self=0xad884034, __pyx_v_parent=0xace7b2f4, 
    __pyx_v_entries=0xad874fbc, __pyx_v_copy=0xb76a48ec <_Py_ZeroStruct>, 
    __pyx_v_coerce=0xb76a4900 <_Py_TrueStruct>, 
    __pyx_v_alloc=0xb76a4900 <_Py_TrueStruct>)
    at build/cythonized/sage/matrix/matrix_mod2_dense.c:3313
        __pyx_r = 1245376913
        __pyx_t_1 = 0x0
        __pyx_t_2 = 0x0
        __pyx_t_3 = 0x0
        __pyx_t_4 = 0
        __pyx_t_5 = 0x0
        __pyx_t_6 = 1
        __pyx_lineno = 0
        __pyx_filename = 0x0
        __pyx_clineno = 0
[...]
```



---

archive/issue_events_152054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T09:57:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152054"
}
```



---

archive/issue_events_152055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T09:57:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152055"
}
```



---

archive/issue_comments_226089.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, in a later stable release.\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2014-10-01T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226089",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Fixed upstream, in a later stable release." to "Reported upstream. No feedback yet.".



---

archive/issue_comments_226090.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n-When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!\n+When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!\n \n I suppose the fix will eventually be in a stable upstream release.\n+\n+There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)\n``````\n",
    "created_at": "2014-10-01T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226090",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
-When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the built fails. Let's fix it!
+When building sage with `SAGE_DEBUG=yes`, then it turns out that the debug and the cygwin64 patches to the Singular spkg are in conflict. Hence, the build fails. Let's fix it!
 
 I suppose the fix will eventually be in a stable upstream release.
+
+There is also an issue with the new m4ri: [https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit](https://bitbucket.org/malb/m4ri/issue/59/assertion-sizeof-mzd_t-64-fails-on-32-bit)
``````




---

archive/issue_events_152056.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T10:04:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152056"
}
```



---

archive/issue_events_152057.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2014-10-01T10:04:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152057"
}
```



---

archive/issue_comments_226091.json:
```json
{
    "body": "<a id='comment:73'></a>\nThe build problem that I obtain is with the latest commit (53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa), hence, it needs work.",
    "created_at": "2014-10-01T10:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226091",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:73'></a>
The build problem that I obtain is with the latest commit (53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa), hence, it needs work.



---

archive/issue_comments_226092.json:
```json
{
    "body": "<a id='comment:74'></a>\nAre you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!",
    "created_at": "2014-10-01T10:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226092",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'></a>
Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!



---

archive/issue_events_152058.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T10:06:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152058"
}
```



---

archive/issue_events_152059.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-01T10:06:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152059"
}
```



---

archive/issue_comments_226093.json:
```json
{
    "body": "<a id='comment:75'></a>\nReplying to [@jdemeyer](#comment%3A74):\n> Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!\n\nThen we come back to my question above: Is it a problem with dependency checking? I did `make` with `SAGE_UPGRADING=yes`, and it didn't work.",
    "created_at": "2014-10-01T10:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226093",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:75'></a>
Replying to [@jdemeyer](#comment%3A74):
> Are you really really sure? The patch fixes the problem for me. Don't forget to rebuild m4ri!

Then we come back to my question above: Is it a problem with dependency checking? I did `make` with `SAGE_UPGRADING=yes`, and it didn't work.



---

archive/issue_comments_226094.json:
```json
{
    "body": "<a id='comment:76'></a>\nFor the record: Now I explicitly did `sage -i m4ri` before doing `make` again. Let's see if it works this time.",
    "created_at": "2014-10-01T10:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226094",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:76'></a>
For the record: Now I explicitly did `sage -i m4ri` before doing `make` again. Let's see if it works this time.



---

archive/issue_comments_226095.json:
```json
{
    "body": "<a id='comment:77'></a>\nIt does start. Now let us wait for the tests...",
    "created_at": "2014-10-01T10:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226095",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:77'></a>
It does start. Now let us wait for the tests...



---

archive/issue_comments_226096.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [@simon-king-jena](#comment%3A75):\n> Is it a problem with dependency checking?\n\nNot really. You built a broken version of m4ri before and that broken version will not automatically be updated when doing \"make\". However, as long as you don't first build a broken version with `SAGE_DEBUG=yes` without applying this patch, there is no problem.\n\nOne could argue that there is a problem with dependency checking in the sense that `SAGE_DEBUG=yes` does not automatically cause everything to get rebuilt. But that's really a different issue.",
    "created_at": "2014-10-01T10:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226096",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'></a>
Replying to [@simon-king-jena](#comment%3A75):
> Is it a problem with dependency checking?

Not really. You built a broken version of m4ri before and that broken version will not automatically be updated when doing "make". However, as long as you don't first build a broken version with `SAGE_DEBUG=yes` without applying this patch, there is no problem.

One could argue that there is a problem with dependency checking in the sense that `SAGE_DEBUG=yes` does not automatically cause everything to get rebuilt. But that's really a different issue.



---

archive/issue_comments_226097.json:
```json
{
    "body": "<a id='comment:79'></a>\nNext, I was bitten again by the infamous \"incremental documentation builds sometimes cause spurious\". Sigh.",
    "created_at": "2014-10-01T10:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226097",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:79'></a>
Next, I was bitten again by the infamous "incremental documentation builds sometimes cause spurious". Sigh.



---

archive/issue_comments_226098.json:
```json
{
    "body": "<a id='comment:80'></a>\nhashdist also takes build switches / environment variables into account for the dependency calculation, fwiw.\n\nUntil then I think its reasonable to require a \"make distclean\" to switch between debug and non-debug build.",
    "created_at": "2014-10-01T11:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226098",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:80'></a>
hashdist also takes build switches / environment variables into account for the dependency calculation, fwiw.

Until then I think its reasonable to require a "make distclean" to switch between debug and non-debug build.



---

archive/issue_comments_226099.json:
```json
{
    "body": "<a id='comment:81'></a>\nReplying to [@vbraun](#comment%3A80):\n> hashdist\n\nIs this another of the many proposals to change the Sage build system with something else? I feel like I have seen too many of these...",
    "created_at": "2014-10-01T11:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226099",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:81'></a>
Replying to [@vbraun](#comment%3A80):
> hashdist

Is this another of the many proposals to change the Sage build system with something else? I feel like I have seen too many of these...



---

archive/issue_comments_226100.json:
```json
{
    "body": "<a id='comment:82'></a>\nSo far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\n```\nsage -t src/sage/modular/modsym/space.py\n**********************************************************************\nFile \"src/sage/modular/modsym/space.py\", line 930, in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module\nFailed example:\n    ModularSymbols(11, 2, base_ring=GF(4,'a')).cuspidal_submodule()._q_expansion_module(prec=4, algorithm=\"hecke\")\nException raised:\n    Traceback (most recent call last):\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 486, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 849, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module[0]>\", line 1, in <module>\n        ModularSymbols(Integer(11), Integer(2), base_ring=GF(Integer(4),'a')).cuspidal_submodule()._q_expansion_module(prec=Integer(4), algorithm=\"hecke\")\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modular/modsym/ambient.py\", line 1392, in cuspidal_submodule\n        S = self.boundary_map().kernel()\n      File \"/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py\", line 649, in kernel\n        V = self.matrix().kernel()\n      File \"sage/matrix/matrix2.pyx\", line 3755, in sage.matrix.matrix2.Matrix.left_kernel (build/cythonized/sage/matrix/matrix2.c:23920)\n      File \"sage/matrix/matrix2.pyx\", line 3596, in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:23371)\n      File \"sage/matrix/matrix2.pyx\", line 3244, in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:22751)\n      File \"sage/matrix/matrix2.pyx\", line 6119, in sage.matrix.matrix2.Matrix.echelon_form (build/cythonized/sage/matrix/matrix2.c:42445)\n      File \"sage/matrix/matrix_mod2e_dense.pyx\", line 946, in sage.matrix.matrix_mod2e_dense.Matrix_mod2e_dense.echelonize (build/cythonized/sage/matrix/matrix_mod2e_dense.c:7938)\n      File \"sage/ext/c_lib.pyx\", line 97, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:1168)\n    SignalError: Segmentation fault\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module\n    [313 tests, 1 failure, 43.51 s]\n```",
    "created_at": "2014-10-01T12:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226100",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:82'></a>
So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

```
sage -t src/sage/modular/modsym/space.py
**********************************************************************
File "src/sage/modular/modsym/space.py", line 930, in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module
Failed example:
    ModularSymbols(11, 2, base_ring=GF(4,'a')).cuspidal_submodule()._q_expansion_module(prec=4, algorithm="hecke")
Exception raised:
    Traceback (most recent call last):
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 486, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 849, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module[0]>", line 1, in <module>
        ModularSymbols(Integer(11), Integer(2), base_ring=GF(Integer(4),'a')).cuspidal_submodule()._q_expansion_module(prec=Integer(4), algorithm="hecke")
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modular/modsym/ambient.py", line 1392, in cuspidal_submodule
        S = self.boundary_map().kernel()
      File "/home/king/Sage/debug/sage/local/lib/python2.7/site-packages/sage/modules/matrix_morphism.py", line 649, in kernel
        V = self.matrix().kernel()
      File "sage/matrix/matrix2.pyx", line 3755, in sage.matrix.matrix2.Matrix.left_kernel (build/cythonized/sage/matrix/matrix2.c:23920)
      File "sage/matrix/matrix2.pyx", line 3596, in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:23371)
      File "sage/matrix/matrix2.pyx", line 3244, in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:22751)
      File "sage/matrix/matrix2.pyx", line 6119, in sage.matrix.matrix2.Matrix.echelon_form (build/cythonized/sage/matrix/matrix2.c:42445)
      File "sage/matrix/matrix_mod2e_dense.pyx", line 946, in sage.matrix.matrix_mod2e_dense.Matrix_mod2e_dense.echelonize (build/cythonized/sage/matrix/matrix_mod2e_dense.c:7938)
      File "sage/ext/c_lib.pyx", line 97, in sage.ext.c_lib.sig_raise_exception (build/cythonized/sage/ext/c_lib.c:1168)
    SignalError: Segmentation fault
**********************************************************************
1 item had failures:
   1 of   3 in sage.modular.modsym.space.ModularSymbolsSpace._q_expansion_module
    [313 tests, 1 failure, 43.51 s]
```



---

archive/issue_comments_226101.json:
```json
{
    "body": "<a id='comment:83'></a>\nReplying to [@vbraun](#comment%3A80):\n> Until then I think its reasonable to require a \"make distclean\" to switch between debug and non-debug build.\n\nI did *not* switch between debug and non-debug build. I have one sage git repository which I have never touched without `SAGE_DEBUG` being set to `yes`. Nevertheless, things got wrong.",
    "created_at": "2014-10-01T12:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226101",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:83'></a>
Replying to [@vbraun](#comment%3A80):
> Until then I think its reasonable to require a "make distclean" to switch between debug and non-debug build.

I did *not* switch between debug and non-debug build. I have one sage git repository which I have never touched without `SAGE_DEBUG` being set to `yes`. Nevertheless, things got wrong.



---

archive/issue_comments_226102.json:
```json
{
    "body": "<a id='comment:84'></a>\nReplying to [@simon-king-jena](#comment%3A83):\n> Nevertheless, things got wrong.\n\n...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.",
    "created_at": "2014-10-01T12:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226102",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:84'></a>
Replying to [@simon-king-jena](#comment%3A83):
> Nevertheless, things got wrong.

...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.



---

archive/issue_comments_226103.json:
```json
{
    "body": "<a id='comment:85'></a>\nMartin, can you comment on the 64-bit alignment issue in m4ri?",
    "created_at": "2014-10-01T12:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226103",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'></a>
Martin, can you comment on the 64-bit alignment issue in m4ri?



---

archive/issue_comments_226104.json:
```json
{
    "body": "<a id='comment:86'></a>\nReplying to [@simon-king-jena](#comment%3A82):\n> So far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\nWorks for me. The problem seems to be in `m4rie`, did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?",
    "created_at": "2014-10-01T12:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226104",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:86'></a>
Replying to [@simon-king-jena](#comment%3A82):
> So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

Works for me. The problem seems to be in `m4rie`, did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?



---

archive/issue_comments_226105.json:
```json
{
    "body": "<a id='comment:87'></a>\nReplying to [@jdemeyer](#comment%3A86):\n> Replying to [@simon-king-jena](#comment%3A82):\n> > So far there is one error, and it seems to be a serious problem, namely a segmentation fault:\n\n> Works for me. Did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?\n\nI currently have `SAGE_UPGRADING=yes` by default.",
    "created_at": "2014-10-01T12:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226105",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:87'></a>
Replying to [@jdemeyer](#comment%3A86):
> Replying to [@simon-king-jena](#comment%3A82):
> > So far there is one error, and it seems to be a serious problem, namely a segmentation fault:

> Works for me. Did you remember to rebuild with `SAGE_UPGRADING=yes` after rebuilding `mpir`?

I currently have `SAGE_UPGRADING=yes` by default.



---

archive/issue_comments_226106.json:
```json
{
    "body": "<a id='comment:88'></a>\nReplying to [@jdemeyer](#comment%3A84):\n> Replying to [@simon-king-jena](#comment%3A83):\n> > Nevertheless, things got wrong.\n\n> ...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.\n\nOK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.\n\nAnyway, meanwhile I got loads of other errors. I will next try `make distclean` and `make`, with `SAGE_DEBUG=yes` and unsetting `SAGE_UPGRADING`.",
    "created_at": "2014-10-01T12:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226106",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:88'></a>
Replying to [@jdemeyer](#comment%3A84):
> Replying to [@simon-king-jena](#comment%3A83):
> > Nevertheless, things got wrong.

> ...while testing a ticket in development. You cannot do development without things breaking now and then. The goal is that the end result of a ticket works, there are no guarantees about what happens in between.

OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.

Anyway, meanwhile I got loads of other errors. I will next try `make distclean` and `make`, with `SAGE_DEBUG=yes` and unsetting `SAGE_UPGRADING`.



---

archive/issue_comments_226107.json:
```json
{
    "body": "<a id='comment:89'></a>\nReplying to [@simon-king-jena](#comment%3A88):\n> OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.\n\nDependency checking works (modulo #17072).\n\nThe problem is that building with `SAGE_DEBUG=yes` didn't work before, but the problem with `m4ri` wasn't seen at build-time of `m4ri`. Therefore, the build system thinks that the build of `m4ri` was successful, even though it was completely broken. This is a very specific set of circumstances, I don't think it requires a fix to the build system.",
    "created_at": "2014-10-01T12:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226107",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:89'></a>
Replying to [@simon-king-jena](#comment%3A88):
> OK, but I think that dependency checking should work, regardless whether it is a debug or a non-debug built.

Dependency checking works (modulo #17072).

The problem is that building with `SAGE_DEBUG=yes` didn't work before, but the problem with `m4ri` wasn't seen at build-time of `m4ri`. Therefore, the build system thinks that the build of `m4ri` was successful, even though it was completely broken. This is a very specific set of circumstances, I don't think it requires a fix to the build system.



---

archive/issue_comments_226108.json:
```json
{
    "body": "<a id='comment:90'></a>\nSimon, just to be sure, I will try to reproduce your bug on a 32-bit system:\n\n```\n$ export SAGE_UPGRADING=yes SAGE_DEBUG=yes\n$ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536\n$ make    # should fail in conway_polynomials\n$ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\n$ ./sage -f m4ri\n$ make ptest\n```",
    "created_at": "2014-10-01T13:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226108",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:90'></a>
Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:

```
$ export SAGE_UPGRADING=yes SAGE_DEBUG=yes
$ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536
$ make    # should fail in conway_polynomials
$ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa
$ ./sage -f m4ri
$ make ptest
```



---

archive/issue_comments_226109.json:
```json
{
    "body": "<a id='comment:91'></a>\nReplying to [@jdemeyer](#comment%3A90):\n> Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:\n> \n> ```\n> $ export SAGE_UPGRADING=yes SAGE_DEBUG=yes\n> $ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536\n> $ make    # should fail in conway_polynomials\n> $ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa\n> $ ./sage -f m4ri\n> $ make ptest\n> ```\n\nI am on 64 bit, if I am not mistaken.",
    "created_at": "2014-10-01T13:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226109",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:91'></a>
Replying to [@jdemeyer](#comment%3A90):
> Simon, just to be sure, I will try to reproduce your bug on a 32-bit system:
> 
> ```
> $ export SAGE_UPGRADING=yes SAGE_DEBUG=yes
> $ git checkout 0fb627916b73a741be1d942b0d94fd0046dc2536
> $ make    # should fail in conway_polynomials
> $ git checkout 53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa
> $ ./sage -f m4ri
> $ make ptest
> ```

I am on 64 bit, if I am not mistaken.



---

archive/issue_comments_226110.json:
```json
{
    "body": "<a id='comment:92'></a>\nReplying to [@simon-king-jena](#comment%3A91):\n> I am on 64 bit, if I am not mistaken.\n\nYour [previous error](#comment%3A62) was on a 32-bit system.",
    "created_at": "2014-10-01T13:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226110",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:92'></a>
Replying to [@simon-king-jena](#comment%3A91):
> I am on 64 bit, if I am not mistaken.

Your [previous error](#comment%3A62) was on a 32-bit system.



---

archive/issue_comments_226111.json:
```json
{
    "body": "<a id='comment:93'></a>\nReplying to [@jdemeyer](#comment%3A92):\n> Replying to [@simon-king-jena](#comment%3A91):\n> > I am on 64 bit, if I am not mistaken.\n\n> Your [previous error](#comment%3A62) was on a 32-bit system.\n\nI did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64. Although I can currently not recall how to find out the architecture. In any case, `cat /proc/cpuinfo` tells me that I have two Intel(R) Core(TM)2 Duo.",
    "created_at": "2014-10-01T13:44:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226111",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:93'></a>
Replying to [@jdemeyer](#comment%3A92):
> Replying to [@simon-king-jena](#comment%3A91):
> > I am on 64 bit, if I am not mistaken.

> Your [previous error](#comment%3A62) was on a 32-bit system.

I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64. Although I can currently not recall how to find out the architecture. In any case, `cat /proc/cpuinfo` tells me that I have two Intel(R) Core(TM)2 Duo.



---

archive/issue_comments_226112.json:
```json
{
    "body": "<a id='comment:94'></a>\nReplying to [@simon-king-jena](#comment%3A93):\n> I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64.\n\nPerhaps the hardware is 64-bit, but the kernel in the logs you posted is 32-bit.\n\n> Although I can currently not recall how to find out the architecture.\n\n`uname -m` prints the \"machine hardware name\" which is probably what you want.",
    "created_at": "2014-10-01T13:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226112",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:94'></a>
Replying to [@simon-king-jena](#comment%3A93):
> I did all tests related with this ticket on the same machine, namely my `OpenSuse` laptop, and I am pretty sure that it is x86_64.

Perhaps the hardware is 64-bit, but the kernel in the logs you posted is 32-bit.

> Although I can currently not recall how to find out the architecture.

`uname -m` prints the "machine hardware name" which is probably what you want.



---

archive/issue_comments_226113.json:
```json
{
    "body": "<a id='comment:95'></a>\n\n```\nuname -m\ni686\n```\nwhatever that means.",
    "created_at": "2014-10-01T14:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226113",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:95'></a>

```
uname -m
i686
```
whatever that means.



---

archive/issue_comments_226114.json:
```json
{
    "body": "<a id='comment:96'></a>\nThat means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.",
    "created_at": "2014-10-01T14:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226114",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:96'></a>
That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.



---

archive/issue_comments_226115.json:
```json
{
    "body": "<a id='comment:97'></a>\nReplying to [@vbraun](#comment%3A96):\n> That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.\n\nInteresting. Currently I have 4 GB. Can I change the installation without to much hassle when upgrading the memory in future?",
    "created_at": "2014-10-01T14:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226115",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:97'></a>
Replying to [@vbraun](#comment%3A96):
> That means 32-bit with a certain set of ISA extensions beyond the i386 (requires Pentium Pro / Pentium II and newer). If you have < 4GB then this is would be the recommended installation.

Interesting. Currently I have 4 GB. Can I change the installation without to much hassle when upgrading the memory in future?



---

archive/issue_comments_226116.json:
```json
{
    "body": "<a id='comment:98'></a>\nI don't think any distro supports architecture changes. Just install x86_64 on a separate partition / btrfs volume and mound your /home.",
    "created_at": "2014-10-01T14:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226116",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:98'></a>
I don't think any distro supports architecture changes. Just install x86_64 on a separate partition / btrfs volume and mound your /home.



---

archive/issue_comments_226117.json:
```json
{
    "body": "<a id='comment:99'></a>\nAfter make distclean, make test did almost work. I got no timeouts, and the following errors:\n\n```\nsage -t src/sage/stats/hmm/hmm.pyx  # 2 doctests failed\nsage -t src/sage/schemes/elliptic_curves/period_lattice_region.pyx  # 1 doctest failed\nsage -t src/sage/gsl/probability_distribution.pyx  # 3 doctests failed\nsage -t src/sage/plot/plot3d/transform.pyx  # 1 doctest failed\n```\n\nUnfortunately, I again encounter the problem that the test log does not indicate what tests went wrong, it just gives the number of failing tests.",
    "created_at": "2014-10-01T22:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226117",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:99'></a>
After make distclean, make test did almost work. I got no timeouts, and the following errors:

```
sage -t src/sage/stats/hmm/hmm.pyx  # 2 doctests failed
sage -t src/sage/schemes/elliptic_curves/period_lattice_region.pyx  # 1 doctest failed
sage -t src/sage/gsl/probability_distribution.pyx  # 3 doctests failed
sage -t src/sage/plot/plot3d/transform.pyx  # 1 doctest failed
```

Unfortunately, I again encounter the problem that the test log does not indicate what tests went wrong, it just gives the number of failing tests.



---

archive/issue_events_152060.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T07:06:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152060"
}
```



---

archive/issue_events_152061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T07:06:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152061"
}
```



---

archive/issue_comments_226118.json:
```json
{
    "body": "<a id='comment:1'></a>\nThere is a very strange thing happening on this 32-bit system. When running doctests with `make ptest`, a lot of tests fail. When running those tests indivually, most of them pass (except for the ones [mentioned by Simon](#comment%3A99)). So there is certainly something fishy going on.\n\nThis might be due to [https://savannah.gnu.org/bugs/?22010](https://savannah.gnu.org/bugs/?22010), I'm upgrading `make` to see if that fixes it.",
    "created_at": "2014-10-02T08:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226118",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
There is a very strange thing happening on this 32-bit system. When running doctests with `make ptest`, a lot of tests fail. When running those tests indivually, most of them pass (except for the ones [mentioned by Simon](#comment%3A99)). So there is certainly something fishy going on.

This might be due to [https://savannah.gnu.org/bugs/?22010](https://savannah.gnu.org/bugs/?22010), I'm upgrading `make` to see if that fixes it.



---

archive/issue_comments_226119.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am investigating the doctest failures reported by Simon, hang on...",
    "created_at": "2014-10-02T08:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226119",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
I am investigating the doctest failures reported by Simon, hang on...



---

archive/issue_comments_226120.json:
```json
{
    "body": "**Dependencies:** #17088",
    "created_at": "2014-10-02T09:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226120",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #17088



---

archive/issue_comments_226121.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/573cf86db8eb0df38ccfa46a27d411f30c2cbd4f\">573cf86</a></td><td><code>Fix numerical noise in debug build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15b7588e82c7d67bbbab14fec4c14c862bcc4c1f\">15b7588</a></td><td><code>Use integer arithmetic in PeriodicRegion.__div__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba\">c471edd</a></td><td><code>Merge branch 'u/jdemeyer/ticket/17088' of git://trac.sagemath.org/sage into ticket/16938</code></td></tr></table>\n",
    "created_at": "2014-10-02T12:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226121",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/573cf86db8eb0df38ccfa46a27d411f30c2cbd4f">573cf86</a></td><td><code>Fix numerical noise in debug build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15b7588e82c7d67bbbab14fec4c14c862bcc4c1f">15b7588</a></td><td><code>Use integer arithmetic in PeriodicRegion.__div__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba">c471edd</a></td><td><code>Merge branch 'u/jdemeyer/ticket/17088' of git://trac.sagemath.org/sage into ticket/16938</code></td></tr></table>




---

archive/issue_comments_226122.json:
```json
{
    "body": "**Changing commit** from \"[53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)\" to \"[c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)\".",
    "created_at": "2014-10-02T12:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226122",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa](https://github.com/sagemath/sagetrac-mirror/commit/53b73dbfaf33d8e28840d5b6ad91ce1bf941cffa)" to "[c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)".



---

archive/issue_comments_226123.json:
```json
{
    "body": "<a id='comment:5'></a>\nCan you elaborate on the \"periodic lattice\" commit?",
    "created_at": "2014-10-02T12:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226123",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
Can you elaborate on the "periodic lattice" commit?



---

archive/issue_comments_226124.json:
```json
{
    "body": "<a id='comment:106'></a>\nReplying to [@simon-king-jena](#comment%3A105):\n> Can you elaborate on the \"periodic lattice\" commit?\n\nSee #17088",
    "created_at": "2014-10-02T12:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226124",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:106'></a>
Replying to [@simon-king-jena](#comment%3A105):
> Can you elaborate on the "periodic lattice" commit?

See #17088



---

archive/issue_comments_226125.json:
```json
{
    "body": "<a id='comment:107'></a>\nReplying to [@jdemeyer](#comment%3A106):\n> Replying to [@simon-king-jena](#comment%3A105):\n> > Can you elaborate on the \"periodic lattice\" commit?\n\n> See #17088\n\nOK. Running tests now. Hope it will work this time...",
    "created_at": "2014-10-02T12:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226125",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:107'></a>
Replying to [@jdemeyer](#comment%3A106):
> Replying to [@simon-king-jena](#comment%3A105):
> > Can you elaborate on the "periodic lattice" commit?

> See #17088

OK. Running tests now. Hope it will work this time...



---

archive/issue_comments_226126.json:
```json
{
    "body": "<a id='comment:8'></a>\nI still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`",
    "created_at": "2014-10-02T13:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226126",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`



---

archive/issue_comments_226127.json:
```json
{
    "body": "<a id='comment:9'></a>\nIf you're interested in debugging on Linux: see also #17089.",
    "created_at": "2014-10-02T13:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226127",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
If you're interested in debugging on Linux: see also #17089.



---

archive/issue_comments_226128.json:
```json
{
    "body": "<a id='comment:110'></a>\nReplying to [@jdemeyer](#comment%3A108):\n> I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`\n\nO_o...\n\nI thought the point of a debug version is that all segmentation faults will be non-random, reproducible and accompanied by a useful C backtrace.",
    "created_at": "2014-10-02T13:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226128",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:110'></a>
Replying to [@jdemeyer](#comment%3A108):
> I still get random segmentation faults with long tests in `src/sage/matrix/matrix_integer_dense_hnf.py`

O_o...

I thought the point of a debug version is that all segmentation faults will be non-random, reproducible and accompanied by a useful C backtrace.



---

archive/issue_comments_226129.json:
```json
{
    "body": "<a id='comment:111'></a>\nReplying to [@simon-king-jena](#comment%3A110):\n> accompanied by a useful C backtrace.\n\n...at least we have this (modulo #17089)",
    "created_at": "2014-10-02T13:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226129",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:111'></a>
Replying to [@simon-king-jena](#comment%3A110):
> accompanied by a useful C backtrace.

...at least we have this (modulo #17089)



---

archive/issue_comments_226130.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe command which crashes is\n\n```\nsage: from sage.matrix.matrix_integer_dense_hnf import benchmark_hnf; benchmark_hnf([50,100],32)\n```",
    "created_at": "2014-10-02T13:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226130",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
The command which crashes is

```
sage: from sage.matrix.matrix_integer_dense_hnf import benchmark_hnf; benchmark_hnf([50,100],32)
```



---

archive/issue_comments_226131.json:
```json
{
    "body": "<a id='comment:3'></a>\nI wonder whether random segmentation faults in the debug version should prevent this ticket from getting a positive review. After all, if segmentation faults show up then probably there is a problem in the non-debug version as well. This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.",
    "created_at": "2014-10-02T13:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226131",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
I wonder whether random segmentation faults in the debug version should prevent this ticket from getting a positive review. After all, if segmentation faults show up then probably there is a problem in the non-debug version as well. This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.



---

archive/issue_comments_226132.json:
```json
{
    "body": "<a id='comment:114'></a>\nReplying to [@simon-king-jena](#comment%3A113):\n> This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.\n\nExactly, the segfault issue is #17090.",
    "created_at": "2014-10-02T14:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226132",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:114'></a>
Replying to [@simon-king-jena](#comment%3A113):
> This ticket is not about fixing the segmentation fault, but it is about providing the means to analyse segmentation fault.

Exactly, the segfault issue is #17090.



---

archive/issue_events_152062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T14:02:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152062"
}
```



---

archive/issue_events_152063.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-02T14:02:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152063"
}
```



---

archive/issue_events_152064.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-02T16:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152064"
}
```



---

archive/issue_events_152065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-02T16:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152065"
}
```



---

archive/issue_comments_226133.json:
```json
{
    "body": "**Changing author** from \"Simon King, Volker Braun\" to \"Simon King, Volker Braun, Jeroen Demeyer\".",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226133",
    "user": "https://github.com/vbraun"
}
```

**Changing author** from "Simon King, Volker Braun" to "Simon King, Volker Braun, Jeroen Demeyer".



---

archive/issue_comments_226134.json:
```json
{
    "body": "<a id='comment:5'></a>\nlgtm",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226134",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
lgtm



---

archive/issue_comments_226135.json:
```json
{
    "body": "**Changing reviewer** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Volker Braun\".",
    "created_at": "2014-10-02T16:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226135",
    "user": "https://github.com/vbraun"
}
```

**Changing reviewer** from "Jeroen Demeyer" to "Jeroen Demeyer, Volker Braun".



---

archive/issue_comments_226136.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)\" to \"[c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)\".",
    "created_at": "2014-10-05T22:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16938#issuecomment-226136",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/16938](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16938)" to "[c471edd674e461bb2db75fc899d44fb75b745bba](https://github.com/sagemath/sagetrac-mirror/commit/c471edd674e461bb2db75fc899d44fb75b745bba)".



---

archive/issue_events_152066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-05T22:39:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152066"
}
```



---

archive/issue_events_152067.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0aea242c6c997accb9b90c087b1b9d6dd60d7a63",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-05T22:39:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16938",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16938#event-152067"
}
```
