# Issue 16368: Missing pkgconf dependencies

archive/issues_016131.json:
```json
{
    "body": "We should build the pkgconf package before anything that uses pkg-config.\n\nKeywords: pkg-config pkgconfig\n\nBranch/Commit: b65b9590227626ad4392ba988fd514c113085d7b\n\nReviewer: Martin Albrecht\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16368\n\n",
    "closed_at": "2014-05-25T10:09:22Z",
    "created_at": "2014-05-16T20:41:36Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Missing pkgconf dependencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16368",
    "user": "https://trac.sagemath.org/admin/accounts/users/stephen"
}
```
We should build the pkgconf package before anything that uses pkg-config.

Keywords: pkg-config pkgconfig

Branch/Commit: b65b9590227626ad4392ba988fd514c113085d7b

Reviewer: Martin Albrecht

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16368





---

archive/issue_comments_224270.json:
```json
{
    "body": "<a id='comment:1'></a>We should IMHO repurpose this ticket to either make many if not almost all packages depend on `pkgconf` (which currently also creates the `pkg-config` wrapper script in `$SAGE_LOCAL/bin/`), or to reenable setting `PKG_CONFIG_PATH` in `sage-env`.",
    "created_at": "2014-05-16T23:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224270",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:1'></a>We should IMHO repurpose this ticket to either make many if not almost all packages depend on `pkgconf` (which currently also creates the `pkg-config` wrapper script in `$SAGE_LOCAL/bin/`), or to reenable setting `PKG_CONFIG_PATH` in `sage-env`.



---

archive/issue_comments_224271.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2014-05-16T23:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224271",
    "user": "https://github.com/nexttime"
}
```

Changing priority from major to critical.



---

archive/issue_comments_224272.json:
```json
{
    "body": "Changing keywords from \"\" to \"pkg-config pkgconfig\".",
    "created_at": "2014-05-16T23:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224272",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "" to "pkg-config pkgconfig".



---

archive/issue_comments_224273.json:
```json
{
    "body": "Changing component from porting: BSD to build.",
    "created_at": "2014-05-16T23:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224273",
    "user": "https://github.com/nexttime"
}
```

Changing component from porting: BSD to build.



---

archive/issue_comments_224274.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,8 @@\n \n It can be fixed by this simple patch, which tells the configure script where to find libpng.pc.\n \n-```\n---- build/pkgs/libm4ri/spkg-install-orig        2014-05-16 18:34:53.000000000 +0000\n+```patch\n+--- build/pkgs/libm4ri/spkg-install        2014-05-16 18:34:53.000000000 +0000\n +++ build/pkgs/libm4ri/spkg-install     2014-05-16 18:48:25.000000000 +0000\n @@ -54,6 +54,7 @@\n \n``````\n",
    "created_at": "2014-05-16T23:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224274",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,8 @@
 
 It can be fixed by this simple patch, which tells the configure script where to find libpng.pc.
 
-```
---- build/pkgs/libm4ri/spkg-install-orig        2014-05-16 18:34:53.000000000 +0000
+```patch
+--- build/pkgs/libm4ri/spkg-install        2014-05-16 18:34:53.000000000 +0000
 +++ build/pkgs/libm4ri/spkg-install     2014-05-16 18:48:25.000000000 +0000
 @@ -54,6 +54,7 @@
 
``````




---

archive/issue_comments_224275.json:
```json
{
    "body": "<a id='comment:3'></a>Enabling `PKG_CONFIG_PATH` would still break on OSX, we need to get the dependencies right.",
    "created_at": "2014-05-17T10:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224275",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>Enabling `PKG_CONFIG_PATH` would still break on OSX, we need to get the dependencies right.



---

archive/issue_comments_224276.json:
```json
{
    "body": "<a id='comment:5'></a>I've grepped the logs for \"pkg-config\" and added the relevant dependencies. \n\nAlso, whitespace fix. In fact I'm surprised that spaces before the tab in make rules are not a hard error.\n\n---\nNew commits:",
    "created_at": "2014-05-17T19:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224276",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>I've grepped the logs for "pkg-config" and added the relevant dependencies. 

Also, whitespace fix. In fact I'm surprised that spaces before the tab in make rules are not a hard error.

---
New commits:



---

archive/issue_comments_224277.json:
```json
{
    "body": "<a id='comment:6'></a>Full rebuild worked and now all log entries point to our pkg-config.",
    "created_at": "2014-05-17T20:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224277",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Full rebuild worked and now all log entries point to our pkg-config.



---

archive/issue_comments_224278.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-17T20:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224278",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_224279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+We should build the pkgconf package before anything that uses pkg-config.\n \n Comment: 1\n \n``````\n",
    "created_at": "2014-05-17T20:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224279",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+We should build the pkgconf package before anything that uses pkg-config.
 
 Comment: 1
 
``````




---

archive/issue_comments_224280.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2014-05-19T10:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224280",
    "user": "https://github.com/vbraun"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_224281.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-23T15:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224281",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_224282.json:
```json
{
    "body": "<a id='comment:9'></a>Looks okay to me.",
    "created_at": "2014-05-23T15:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224282",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'></a>Looks okay to me.



---

archive/issue_comments_224283.json:
```json
{
    "body": "<a id='comment:11'></a>Should ncurses install .pc files in `SAGE_LOCAL/lib/pkgconfig`? If that's a good idea, I can create a followup ticket to do that.",
    "created_at": "2014-05-23T17:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224283",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>Should ncurses install .pc files in `SAGE_LOCAL/lib/pkgconfig`? If that's a good idea, I can create a followup ticket to do that.



---

archive/issue_comments_224284.json:
```json
{
    "body": "<a id='comment:12'></a>Yes, please do!",
    "created_at": "2014-05-23T17:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224284",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Yes, please do!



---

archive/issue_comments_224285.json:
```json
{
    "body": "<a id='comment:13'></a>See #16392.",
    "created_at": "2014-05-23T23:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224285",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>See #16392.



---

archive/issue_events_048214.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-25T10:09:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16368#event-48214"
}
```



---

archive/issue_comments_224286.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-25T10:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16368#issuecomment-224286",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
