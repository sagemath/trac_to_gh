# Issue 16038: C function profiler

archive/issues_015801.json:
```json
{
    "body": "This ticket complements the `%prun` magic for Python profiler with a `%crun` magic that given C function profile information using gperftools (optional, expected to be provided by the OS).\n\nBranch/Commit: 29db6cd46bce1751011613a6b4d99eb47656b6d0\n\nReviewer: Nathann Cohen\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16038\n\n",
    "closed_at": "2014-04-05T10:43:42Z",
    "created_at": "2014-03-31T23:55:11Z",
    "labels": [
        "component: performance"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "C function profiler",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16038",
    "user": "https://github.com/vbraun"
}
```
This ticket complements the `%prun` magic for Python profiler with a `%crun` magic that given C function profile information using gperftools (optional, expected to be provided by the OS).

Branch/Commit: 29db6cd46bce1751011613a6b4d99eb47656b6d0

Reviewer: Nathann Cohen

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16038





---

archive/issue_comments_218418.json:
```json
{
    "body": "<a id='comment:2'></a>(DEAD curious)\n\n---\nNew commits:",
    "created_at": "2014-04-01T08:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218418",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>(DEAD curious)

---
New commits:



---

archive/issue_comments_218419.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-01T14:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218420.json:
```json
{
    "body": "<a id='comment:4'></a>Helloooooooooo !!!\n\nIt would be cool to have an explicit error message when there is no output due to this 10ms thing. Could you also add this new file to the reference manual ?\n\nBy the way, what it this `:param s:/:type s:` ? I never saw them before. Could you wrap that in a \"INPUT\" block btw (the two crun functions need one) ?\n\nAlso : the gif output is cool but would there  be a way to make it available through %crun directly ? Or at least crun(\"cmd\") ?\n\nThere is also an unfinished sentence in the doc :\n\n```\nBy default, a if \n```\n\nNathann\n\n(super nice tool !)",
    "created_at": "2014-04-01T17:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218420",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Helloooooooooo !!!

It would be cool to have an explicit error message when there is no output due to this 10ms thing. Could you also add this new file to the reference manual ?

By the way, what it this `:param s:/:type s:` ? I never saw them before. Could you wrap that in a "INPUT" block btw (the two crun functions need one) ?

Also : the gif output is cool but would there  be a way to make it available through %crun directly ? Or at least crun("cmd") ?

There is also an unfinished sentence in the doc :

```
By default, a if 
```

Nathann

(super nice tool !)



---

archive/issue_comments_218421.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2014-04-01T17:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218421",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_218422.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-04T16:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218423.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-04-04T16:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218423",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_218424.json:
```json
{
    "body": "<a id='comment:6'></a>Done.\n\nThe `:param` is standard Python syntax which we don't use in Sage. I changed it to our conventions.",
    "created_at": "2014-04-04T16:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218424",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>Done.

The `:param` is standard Python syntax which we don't use in Sage. I changed it to our conventions.



---

archive/issue_comments_218425.json:
```json
{
    "body": "<a id='comment:7'></a>Yoooooooooooo !\n\n> Done.\n\n\nThanks ! And we'll add this .gif output some later day if we need it `:-)`\n\nNathann\n\nP.S. : By the way, why didn't you raise an exception when the program runs <100ms ?",
    "created_at": "2014-04-04T17:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218425",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Yoooooooooooo !

> Done.


Thanks ! And we'll add this .gif output some later day if we need it `:-)`

Nathann

P.S. : By the way, why didn't you raise an exception when the program runs <100ms ?



---

archive/issue_comments_218426.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-04T17:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218426",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218427.json:
```json
{
    "body": "<a id='comment:9'></a>Its not really an error, maybe you know what you are doing. The user might have changed the sampling frequency, for example.",
    "created_at": "2014-04-04T18:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218427",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>Its not really an error, maybe you know what you are doing. The user might have changed the sampling frequency, for example.



---

archive/issue_comments_218428.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-04-04T19:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_218429.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-04-04T19:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_218430.json:
```json
{
    "body": "<a id='comment:11'></a>Ahahah. Is that for sage -coverage ? :-P\n\nNathann",
    "created_at": "2014-04-04T19:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218430",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>Ahahah. Is that for sage -coverage ? :-P

Nathann



---

archive/issue_comments_218431.json:
```json
{
    "body": "<a id='comment:12'></a>No, `# random output` still fails if there is an exception raised...",
    "created_at": "2014-04-04T19:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218431",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>No, `# random output` still fails if there is an exception raised...



---

archive/issue_comments_218432.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-04T21:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218432",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218433.json:
```json
{
    "body": "<a id='comment:13'></a>oops, right !\n\nPasses all tests, with/without gperftools installed. Good to go again.\n\nNathann",
    "created_at": "2014-04-04T21:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218433",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>oops, right !

Passes all tests, with/without gperftools installed. Good to go again.

Nathann



---

archive/issue_comments_218434.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-04-04T21:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_218435.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-04-04T21:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_events_047155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-05T10:43:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16038#event-47155"
}
```



---

archive/issue_comments_218436.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-05T10:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16038",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16038#issuecomment-218436",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
