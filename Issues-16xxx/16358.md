# Issue 16358: Wrong answers of IncidenceStructure.automorphism_group()

archive/issues_016121.json:
```json
{
    "body": "I would say that this was broken when #16237 was fixed. The cool news is that it did not make it inside of the stable release `:-P`\n\n....\n\nOn the other hand all the doctests of `automorphism_group` were not changed, so it cannot be #16237. So it may have been wrong since the beginning ? `O_o`\n\nBefore this branch is applied :\n\n```\nsage: BlockDesign(4,[[0,1,2,3],[1,2,3]],test=False).automorphism_group()\nPermutation Group with generators [()]\n```\n\nAfter:\n\n```\nsage: BlockDesign(4,[[0,1,2,3],[1,2,3]],test=False).automorphism_group()\nPermutation Group with generators [(3,4), (2,3)]\n```\n\nAaaaaaaand it turns out that writing this patch did not even force me to change any doctest.. So it was just bad luck that the automorphism groups used in the docstrings were EXACTLY the automorphism groups of the duals (like the Fano plane... `:-P`) `:-P`\n\nNathann\n\nP.S. : this also adds some potentially useful keyword in is_block_design. That's how I found this bug.\n\nCC:  @videlec @KPanComputes @dimpase @brettpim\n\nBranch/Commit: d004ebcb357083ba06f435ffe75050e0f4ec70a1\n\nReviewer: Vincent Delecroix\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16358\n\n",
    "closed_at": "2014-05-29T14:51:19Z",
    "created_at": "2014-05-16T09:04:23Z",
    "labels": [
        "component: combinatorial designs",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Wrong answers of IncidenceStructure.automorphism_group()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16358",
    "user": "https://github.com/nathanncohen"
}
```
I would say that this was broken when #16237 was fixed. The cool news is that it did not make it inside of the stable release `:-P`

....

On the other hand all the doctests of `automorphism_group` were not changed, so it cannot be #16237. So it may have been wrong since the beginning ? `O_o`

Before this branch is applied :

```
sage: BlockDesign(4,[[0,1,2,3],[1,2,3]],test=False).automorphism_group()
Permutation Group with generators [()]
```

After:

```
sage: BlockDesign(4,[[0,1,2,3],[1,2,3]],test=False).automorphism_group()
Permutation Group with generators [(3,4), (2,3)]
```

Aaaaaaaand it turns out that writing this patch did not even force me to change any doctest.. So it was just bad luck that the automorphism groups used in the docstrings were EXACTLY the automorphism groups of the duals (like the Fano plane... `:-P`) `:-P`

Nathann

P.S. : this also adds some potentially useful keyword in is_block_design. That's how I found this bug.

CC:  @videlec @KPanComputes @dimpase @brettpim

Branch/Commit: d004ebcb357083ba06f435ffe75050e0f4ec70a1

Reviewer: Vincent Delecroix

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16358





---

archive/issue_comments_265112.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-16T09:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265112",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265113.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/16358\"",
    "created_at": "2014-05-16T09:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265113",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/16358"



---

archive/issue_comments_265114.json:
```json
{
    "body": "Changing commit from \"\" to \"267a5f2a50bd43e6d247fcc7c4acb52c84b16b05\"",
    "created_at": "2014-05-16T09:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "267a5f2a50bd43e6d247fcc7c4acb52c84b16b05"



---

archive/issue_comments_265115.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[267a5f2](https://github.com/sagemath/sagetrac-mirror/commit/267a5f2a50bd43e6d247fcc7c4acb52c84b16b05)|`trac 16358: Wrong answers of IncidenceStructure.automorphism_group()`|",
    "created_at": "2014-05-16T09:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[267a5f2](https://github.com/sagemath/sagetrac-mirror/commit/267a5f2a50bd43e6d247fcc7c4acb52c84b16b05)|`trac 16358: Wrong answers of IncidenceStructure.automorphism_group()`|



---

archive/issue_comments_265116.json:
```json
{
    "body": "<a id='comment:4'></a>\nHey guys... Sorry to bug you but this is a one-line bugfix, and in the meantime Sage really returns wrong results... `:-/`\n\nAaaaaaand #16367 is also a very simple improvement that does help a lot when playing with designs...\n\nNathann",
    "created_at": "2014-05-27T13:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265116",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Hey guys... Sorry to bug you but this is a one-line bugfix, and in the meantime Sage really returns wrong results... `:-/`

Aaaaaaand #16367 is also a very simple improvement that does help a lot when playing with designs...

Nathann



---

archive/issue_comments_265117.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Nathann,\n\nI did not like the doctests so I rewrote them... have a look u/vdelecroix/16358. And if you like, you can set to positive review.\n\nVincent",
    "created_at": "2014-05-27T18:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265117",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
Hi Nathann,

I did not like the doctests so I rewrote them... have a look u/vdelecroix/16358. And if you like, you can set to positive review.

Vincent



---

archive/issue_comments_265118.json:
```json
{
    "body": "<a id='comment:6'></a>\n`>_<`\n\nI would love to get this PGL stuff some day... `>_<`\n\nThanks for your review !!!\n\nNathann\n\n---\nNew commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[d004ebc](https://github.com/sagemath/sagetrac-mirror/commit/d004ebcb357083ba06f435ffe75050e0f4ec70a1)|`trac #16358: cleaner doctests for automorphism_group`|",
    "created_at": "2014-05-27T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265118",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
`>_<`

I would love to get this PGL stuff some day... `>_<`

Thanks for your review !!!

Nathann

---
New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[d004ebc](https://github.com/sagemath/sagetrac-mirror/commit/d004ebcb357083ba06f435ffe75050e0f4ec70a1)|`trac #16358: cleaner doctests for automorphism_group`|



---

archive/issue_comments_265119.json:
```json
{
    "body": "Changing commit from \"267a5f2a50bd43e6d247fcc7c4acb52c84b16b05\" to \"d004ebcb357083ba06f435ffe75050e0f4ec70a1\"",
    "created_at": "2014-05-27T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265119",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "267a5f2a50bd43e6d247fcc7c4acb52c84b16b05" to "d004ebcb357083ba06f435ffe75050e0f4ec70a1"



---

archive/issue_comments_265120.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2014-05-27T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265120",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_265121.json:
```json
{
    "body": "Changing branch from \"u/ncohen/16358\" to \"u/vdelecroix/16358\"",
    "created_at": "2014-05-27T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265121",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "u/ncohen/16358" to "u/vdelecroix/16358"



---

archive/issue_comments_265122.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-27T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265122",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_265123.json:
```json
{
    "body": "<a id='comment:7'></a>\nPlease rebase #16367 and I will continue.\n\nVincent",
    "created_at": "2014-05-27T18:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265123",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
Please rebase #16367 and I will continue.

Vincent



---

archive/issue_comments_265124.json:
```json
{
    "body": "<a id='comment:8'></a>\nDone.\n\nNathann",
    "created_at": "2014-05-27T18:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265124",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Done.

Nathann



---

archive/issue_comments_265125.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-29T14:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265125",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_062586.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-29T14:51:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16358#event-62586"
}
```



---

archive/issue_comments_265126.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/16358\" to \"d004ebcb357083ba06f435ffe75050e0f4ec70a1\"",
    "created_at": "2014-05-29T14:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16358#issuecomment-265126",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/16358" to "d004ebcb357083ba06f435ffe75050e0f4ec70a1"
