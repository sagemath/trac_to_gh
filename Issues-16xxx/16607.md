# Issue 16607: Enforce keyword-only parameters, with deprecation

archive/issues_016370.json:
```json
{
    "body": "There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)\n\n[PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. \n\nThis ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. \n\n1. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.\n\n2. After the deprecation period, it would be replaced by proper keyword-only parameters.\n\nBecause of the performance penalty of the decorator, this should be done only for non-performance critical functions.\n\nWe demonstrate the use of the decorator on this ticket with a number of examples:\n\n- [get_solver](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/backends/generic_backend.html#sage.numerical.backends.generic_backend.get_solver) - this would catch the typical user error `get_solver('GLPK')`\n\n\n- more TBD.\n\n\n\n\n\n\nCC:  @nilesjohnson @fchapoton @mwageringel\n\nReviewer: Volker Braun\n\nAuthor: Martin von Gagern\n\nBranch: u/gagern/ticket/16607\n\nStatus: needs_work\n\nCommit: 9755cda19f2d85caa01222f852a06831e0369f4e\n\nIssue created by migration from https://trac.sagemath.org/ticket/16607\n\n",
    "created_at": "2014-07-03T12:53:10Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Enforce keyword-only parameters, with deprecation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16607",
    "user": "https://github.com/gagern"
}
```
There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)

[PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. 

This ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. 

1. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.

2. After the deprecation period, it would be replaced by proper keyword-only parameters.

Because of the performance penalty of the decorator, this should be done only for non-performance critical functions.

We demonstrate the use of the decorator on this ticket with a number of examples:

- [get_solver](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/backends/generic_backend.html#sage.numerical.backends.generic_backend.get_solver) - this would catch the typical user error `get_solver('GLPK')`


- more TBD.






CC:  @nilesjohnson @fchapoton @mwageringel

Reviewer: Volker Braun

Author: Martin von Gagern

Branch: u/gagern/ticket/16607

Status: needs_work

Commit: 9755cda19f2d85caa01222f852a06831e0369f4e

Issue created by migration from https://trac.sagemath.org/ticket/16607





---

archive/issue_comments_271658.json:
```json
{
    "body": "<a id='comment:2'></a>\n-1 for performance reasons. Calls in python are expensive and wrappers installed by decorators add a call level. And sage tends to have a *lot* of calls already, so these costs quickly add up.\n\nThere would be a way to have both: have a flag set at startup that determines whether the decorator puts a check in place or just returns the original function. I'm afraid that's too complicated to be used in practice, though, but you could try.",
    "created_at": "2014-07-03T16:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271658",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'></a>
-1 for performance reasons. Calls in python are expensive and wrappers installed by decorators add a call level. And sage tends to have a *lot* of calls already, so these costs quickly add up.

There would be a way to have both: have a flag set at startup that determines whether the decorator puts a check in place or just returns the original function. I'm afraid that's too complicated to be used in practice, though, but you could try.



---

archive/issue_comments_271659.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [nbruin](#comment%3A2):\n> -1 for performance reasons. Calls in python are expensive and wrappers installed by decorators add a call level. And sage tends to have a *lot* of calls already, so these costs quickly add up.\n\n\nI am thinking about things which are unlikely to be used in a tight loop. Front ends to costly operations, mostly. In those case, the extra cost would be negligible compared to the typical cost of the function execution. I certainly wouldn't want to add this decorator to *every* function that might syntactically qualify, exactly due to these performance issues. I'd say the decorator should only be used if there is considerable gain associated with dropping a positional parameter.\n\n> There would be a way to have both: have a flag set at startup that determines whether the decorator puts a check in place or just returns the original function. I'm afraid that's too complicated to be used in practice, though, but you could try.\n\n\nThis might help when policing uses within Sage itself. My main concern however was user interaction. If we leave them an officially sanctioned option to disable the checks, then we might be responsible to maintain compatibility with deprecated syntax indefinitely. Unless we have the checks in place by default and make a very clear statement that people must assume responsibility if they decide to disable them. Checks enabled by default would change little in terms of performance for most users.",
    "created_at": "2014-07-03T18:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271659",
    "user": "https://github.com/gagern"
}
```

<a id='comment:3'></a>
Replying to [nbruin](#comment%3A2):
> -1 for performance reasons. Calls in python are expensive and wrappers installed by decorators add a call level. And sage tends to have a *lot* of calls already, so these costs quickly add up.


I am thinking about things which are unlikely to be used in a tight loop. Front ends to costly operations, mostly. In those case, the extra cost would be negligible compared to the typical cost of the function execution. I certainly wouldn't want to add this decorator to *every* function that might syntactically qualify, exactly due to these performance issues. I'd say the decorator should only be used if there is considerable gain associated with dropping a positional parameter.

> There would be a way to have both: have a flag set at startup that determines whether the decorator puts a check in place or just returns the original function. I'm afraid that's too complicated to be used in practice, though, but you could try.


This might help when policing uses within Sage itself. My main concern however was user interaction. If we leave them an officially sanctioned option to disable the checks, then we might be responsible to maintain compatibility with deprecated syntax indefinitely. Unless we have the checks in place by default and make a very clear statement that people must assume responsibility if they decide to disable them. Checks enabled by default would change little in terms of performance for most users.



---

archive/issue_comments_271660.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gagern/ticket/16607\"",
    "created_at": "2014-07-10T18:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271660",
    "user": "https://github.com/gagern"
}
```

Changing branch from "" to "u/gagern/ticket/16607"



---

archive/issue_comments_271661.json:
```json
{
    "body": "Changing commit from \"\" to \"dde4ad657e8d9628c56b8907055956475153e79b\"",
    "created_at": "2014-07-10T18:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271661",
    "user": "https://github.com/gagern"
}
```

Changing commit from "" to "dde4ad657e8d9628c56b8907055956475153e79b"



---

archive/issue_comments_271662.json:
```json
{
    "body": "<a id='comment:5'></a>\nOK, here is my implementation. With a big fat warning about performance considerations, to reduce the chances of inappropriate use.\n\nIn[comment:16](#comment%3A16):ticket:15515 I had to undo some changes by Jeroen Demeyer to avoid breaking compatibility for positional arguments. So it seems I'm not the only one who would like to get rid of some positional parameters to simplify implementations. With this tool here, we can have a proper deprecation period before we can finally dump them.\n\nAnd with the `extra` keyword I introduced, things are even simpler for those cases. That keyword allows me to specify the names of any excess positional parameters, which will then be included in the `**kwds` dict so one doesn't have to mention them a second time when passing those arguments down the line.\n\n---\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[dde4ad6](https://github.com/sagemath/sagetrac-mirror/commit/dde4ad657e8d9628c56b8907055956475153e79b)|`Implement `@`keyword_only decorator.`|",
    "created_at": "2014-07-10T18:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271662",
    "user": "https://github.com/gagern"
}
```

<a id='comment:5'></a>
OK, here is my implementation. With a big fat warning about performance considerations, to reduce the chances of inappropriate use.

In[comment:16](#comment%3A16):ticket:15515 I had to undo some changes by Jeroen Demeyer to avoid breaking compatibility for positional arguments. So it seems I'm not the only one who would like to get rid of some positional parameters to simplify implementations. With this tool here, we can have a proper deprecation period before we can finally dump them.

And with the `extra` keyword I introduced, things are even simpler for those cases. That keyword allows me to specify the names of any excess positional parameters, which will then be included in the `**kwds` dict so one doesn't have to mention them a second time when passing those arguments down the line.

---
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[dde4ad6](https://github.com/sagemath/sagetrac-mirror/commit/dde4ad657e8d9628c56b8907055956475153e79b)|`Implement `@`keyword_only decorator.`|



---

archive/issue_comments_271663.json:
```json
{
    "body": "Changing commit from \"dde4ad657e8d9628c56b8907055956475153e79b\" to \"28aed693f5bb360d6262f7e6e22e980ddc3b925e\"",
    "created_at": "2014-07-10T19:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dde4ad657e8d9628c56b8907055956475153e79b" to "28aed693f5bb360d6262f7e6e22e980ddc3b925e"



---

archive/issue_comments_271664.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[28aed69](https://github.com/sagemath/sagetrac-mirror/commit/28aed693f5bb360d6262f7e6e22e980ddc3b925e)|`Implement `@`keyword_only decorator.`|",
    "created_at": "2014-07-10T19:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[28aed69](https://github.com/sagemath/sagetrac-mirror/commit/28aed693f5bb360d6262f7e6e22e980ddc3b925e)|`Implement `@`keyword_only decorator.`|



---

archive/issue_comments_271665.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[6081121](https://github.com/sagemath/sagetrac-mirror/commit/60811212e129fa377f1fe34b678b559a771bfbb4)|`Implement `@`keyword_only decorator.`|",
    "created_at": "2014-07-10T19:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[6081121](https://github.com/sagemath/sagetrac-mirror/commit/60811212e129fa377f1fe34b678b559a771bfbb4)|`Implement `@`keyword_only decorator.`|



---

archive/issue_comments_271666.json:
```json
{
    "body": "Changing commit from \"28aed693f5bb360d6262f7e6e22e980ddc3b925e\" to \"60811212e129fa377f1fe34b678b559a771bfbb4\"",
    "created_at": "2014-07-10T19:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "28aed693f5bb360d6262f7e6e22e980ddc3b925e" to "60811212e129fa377f1fe34b678b559a771bfbb4"



---

archive/issue_comments_271667.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-07-11T06:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271667",
    "user": "https://github.com/gagern"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271668.json:
```json
{
    "body": "Changing author from \"\" to \"Martin von Gagern\"",
    "created_at": "2014-07-11T06:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271668",
    "user": "https://github.com/gagern"
}
```

Changing author from "" to "Martin von Gagern"



---

archive/issue_events_063160.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63160"
}
```



---

archive/issue_comments_271669.json:
```json
{
    "body": "<a id='comment:10'></a>\nI feel like the issue in the ticket is not serious enough to require such a heavy-handed solution. So I'm leaning towards \"wontfix\".\n\nNote that Cython files do actually support the \u200bPEP 3102 syntax even for Python 2.",
    "created_at": "2014-10-12T20:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271669",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
I feel like the issue in the ticket is not serious enough to require such a heavy-handed solution. So I'm leaning towards "wontfix".

Note that Cython files do actually support the ​PEP 3102 syntax even for Python 2.



---

archive/issue_comments_271670.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A10):\n> I feel like the issue in the ticket is not serious enough to require such a heavy-handed solution.\n\n\nIn[comment:16](#comment%3A16):ticket:17234 you yourself had to remind people to not break positional parameter compatibility. So this looks like a recurring theme. And just because we have this tool here doesn't mean anyone will be forced to use it. But people may use it instead of inventing new workarounds at every turn.\n\n> Note that Cython files do actually support the \u200bPEP 3102 syntax even for Python 2.\n\n\nThat is good to know, thanks!",
    "created_at": "2015-03-11T23:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271670",
    "user": "https://github.com/gagern"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A10):
> I feel like the issue in the ticket is not serious enough to require such a heavy-handed solution.


In[comment:16](#comment%3A16):ticket:17234 you yourself had to remind people to not break positional parameter compatibility. So this looks like a recurring theme. And just because we have this tool here doesn't mean anyone will be forced to use it. But people may use it instead of inventing new workarounds at every turn.

> Note that Cython files do actually support the ​PEP 3102 syntax even for Python 2.


That is good to know, thanks!



---

archive/issue_comments_271671.json:
```json
{
    "body": "<a id='comment:12'></a>\nNils, do you have any more comments about this?\n\nFor PEP links in Sphinx, you can use `:pep:`3102`` analogous to `:trac:`16607``",
    "created_at": "2015-03-13T08:42:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271671",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Nils, do you have any more comments about this?

For PEP links in Sphinx, you can use `:pep:`3102`` analogous to `:trac:`16607``



---

archive/issue_comments_271672.json:
```json
{
    "body": "<a id='comment:13'></a>\nAlso: do you have a particular use-case in mind? If yes, please add this new decorator to an existing method, such that people can see how it is used in \"real\" situations.",
    "created_at": "2015-03-13T08:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271672",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Also: do you have a particular use-case in mind? If yes, please add this new decorator to an existing method, such that people can see how it is used in "real" situations.



---

archive/issue_comments_271673.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [gagern](#comment%3A11):\n> > Note that Cython files do actually support the \u200bPEP 3102 syntax even for Python 2.\n\n> \n> That is good to know, thanks!\n\n\nYou should probably add this as a comment somewhere.",
    "created_at": "2015-03-13T08:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271673",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Replying to [gagern](#comment%3A11):
> > Note that Cython files do actually support the ​PEP 3102 syntax even for Python 2.

> 
> That is good to know, thanks!


You should probably add this as a comment somewhere.



---

archive/issue_comments_271674.json:
```json
{
    "body": "Changing commit from \"60811212e129fa377f1fe34b678b559a771bfbb4\" to \"9b9373b2696e6a30fd83dd1664cde5937eb2fb94\"",
    "created_at": "2015-03-13T12:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "60811212e129fa377f1fe34b678b559a771bfbb4" to "9b9373b2696e6a30fd83dd1664cde5937eb2fb94"



---

archive/issue_comments_271675.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[e697d4b](https://github.com/sagemath/sagetrac-mirror/commit/e697d4b52b8a37d5166a6ee79cd0a6a4a6d51e4e)|`Implement `@`keyword_only decorator.`|\n|[c073211](https://github.com/sagemath/sagetrac-mirror/commit/c07321128635d2256ff0a992857119c62818384c)|`Use PEP links; add note about Cython support.`|\n|[9b9373b](https://github.com/sagemath/sagetrac-mirror/commit/9b9373b2696e6a30fd83dd1664cde5937eb2fb94)|`Use `@`keyword_only for graphics_array.save() and .show().`|",
    "created_at": "2015-03-13T12:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[e697d4b](https://github.com/sagemath/sagetrac-mirror/commit/e697d4b52b8a37d5166a6ee79cd0a6a4a6d51e4e)|`Implement `@`keyword_only decorator.`|
|[c073211](https://github.com/sagemath/sagetrac-mirror/commit/c07321128635d2256ff0a992857119c62818384c)|`Use PEP links; add note about Cython support.`|
|[9b9373b](https://github.com/sagemath/sagetrac-mirror/commit/9b9373b2696e6a30fd83dd1664cde5937eb2fb94)|`Use `@`keyword_only for graphics_array.save() and .show().`|



---

archive/issue_comments_271676.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-13T17:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271676",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271677.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2015-04-13T17:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271677",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_271678.json:
```json
{
    "body": "<a id='comment:16'></a>\nLooks good to me. Its just a temporary measure anyways, we'll rip it out when we move to Python 3",
    "created_at": "2015-04-13T17:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271678",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Looks good to me. Its just a temporary measure anyways, we'll rip it out when we move to Python 3



---

archive/issue_comments_271679.json:
```json
{
    "body": "<a id='comment:17'></a>\n\n```\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/plot/graphics.py\", line 3403, in GraphicsArray\n    @keyword_only(positional=4, deprecation=16607, extra=\"axes\")\nNameError: name 'keyword_only' is not defined\nMakefile:60: recipe for target 'doc-html' failed\nmake: *** [doc-html] Error 1\n```",
    "created_at": "2015-04-14T20:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271679",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>

```
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/plot/graphics.py", line 3403, in GraphicsArray
    @keyword_only(positional=4, deprecation=16607, extra="axes")
NameError: name 'keyword_only' is not defined
Makefile:60: recipe for target 'doc-html' failed
make: *** [doc-html] Error 1
```



---

archive/issue_comments_271680.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-14T20:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271680",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_271681.json:
```json
{
    "body": "Changing commit from \"9b9373b2696e6a30fd83dd1664cde5937eb2fb94\" to \"3e1497cae2ec902de35e5e011a5df79826359626\"",
    "created_at": "2015-04-14T21:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9b9373b2696e6a30fd83dd1664cde5937eb2fb94" to "3e1497cae2ec902de35e5e011a5df79826359626"



---

archive/issue_comments_271682.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[3e1497c](https://github.com/sagemath/sagetrac-mirror/commit/3e1497cae2ec902de35e5e011a5df79826359626)|`Add import for keyword_only decorator`|",
    "created_at": "2015-04-14T21:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[3e1497c](https://github.com/sagemath/sagetrac-mirror/commit/3e1497cae2ec902de35e5e011a5df79826359626)|`Add import for keyword_only decorator`|



---

archive/issue_comments_271683.json:
```json
{
    "body": "<a id='comment:19'></a>\nI forgot the import. Won't have time to test this today. but hope to do so tomorrow.",
    "created_at": "2015-04-14T21:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271683",
    "user": "https://github.com/gagern"
}
```

<a id='comment:19'></a>
I forgot the import. Won't have time to test this today. but hope to do so tomorrow.



---

archive/issue_comments_271684.json:
```json
{
    "body": "Changing commit from \"3e1497cae2ec902de35e5e011a5df79826359626\" to \"d5876624bd579c544b68361f9db288d9111bef62\"",
    "created_at": "2015-04-15T06:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e1497cae2ec902de35e5e011a5df79826359626" to "d5876624bd579c544b68361f9db288d9111bef62"



---

archive/issue_comments_271685.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[df5c834](https://github.com/sagemath/sagetrac-mirror/commit/df5c834cfc937cc6fc6990f431477b5b10bcc1e8)|`Add doctest for keyword_only real life use case`|\n|[d587662](https://github.com/sagemath/sagetrac-mirror/commit/d5876624bd579c544b68361f9db288d9111bef62)|`Fix output of optional plot test cases`|",
    "created_at": "2015-04-15T06:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[df5c834](https://github.com/sagemath/sagetrac-mirror/commit/df5c834cfc937cc6fc6990f431477b5b10bcc1e8)|`Add doctest for keyword_only real life use case`|
|[d587662](https://github.com/sagemath/sagetrac-mirror/commit/d5876624bd579c544b68361f9db288d9111bef62)|`Fix output of optional plot test cases`|



---

archive/issue_comments_271686.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[9755cda](https://github.com/sagemath/sagetrac-mirror/commit/9755cda19f2d85caa01222f852a06831e0369f4e)|`Remove duplicate word`|",
    "created_at": "2015-04-15T06:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[9755cda](https://github.com/sagemath/sagetrac-mirror/commit/9755cda19f2d85caa01222f852a06831e0369f4e)|`Remove duplicate word`|



---

archive/issue_comments_271687.json:
```json
{
    "body": "Changing commit from \"d5876624bd579c544b68361f9db288d9111bef62\" to \"9755cda19f2d85caa01222f852a06831e0369f4e\"",
    "created_at": "2015-04-15T06:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d5876624bd579c544b68361f9db288d9111bef62" to "9755cda19f2d85caa01222f852a06831e0369f4e"



---

archive/issue_comments_271688.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-15T06:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271688",
    "user": "https://github.com/gagern"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_271689.json:
```json
{
    "body": "<a id='comment:22'></a>\nThis looks better now. Sorry I hadn't tested this as well as I should have before.",
    "created_at": "2015-04-15T06:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271689",
    "user": "https://github.com/gagern"
}
```

<a id='comment:22'></a>
This looks better now. Sorry I hadn't tested this as well as I should have before.



---

archive/issue_comments_271690.json:
```json
{
    "body": "<a id='comment:23'></a>\nNeeds to be rebased on sage8.1beta3",
    "created_at": "2017-08-30T18:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271690",
    "user": "https://github.com/koffie"
}
```

<a id='comment:23'></a>
Needs to be rebased on sage8.1beta3



---

archive/issue_comments_271691.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-30T18:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271691",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_063161.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-22T17:43:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63161"
}
```



---

archive/issue_events_063162.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-22T17:43:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63162"
}
```



---

archive/issue_comments_271692.json:
```json
{
    "body": "<a id='comment:25'></a>\nNow, after the switch to Python 3, we could revisit this.",
    "created_at": "2020-07-22T17:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271692",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Now, after the switch to Python 3, we could revisit this.



---

archive/issue_comments_271693.json:
```json
{
    "body": "<a id='comment:26'></a>\nPointers to recent tickets: #29243, #30194",
    "created_at": "2020-08-18T21:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271693",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Pointers to recent tickets: #29243, #30194



---

archive/issue_events_063163.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "rename": {
        "from": "Enforce keyword-only parameters",
        "to": "Enforce keyword-only parameters, with deprecation"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63163"
}
```



---

archive/issue_comments_271694.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,23 @@\n-There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintainance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)\n+There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)\n \n-While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3, the most reasonable way to add such an enforcement in Python 2 would be via a decorator. So I propose introducing a decorator which will limit the number of positional parameters passed to its wrapped function. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.\n+While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. \n \n-Once Sage moves to Python 3 (and I hope Sage will live long enough to make that step unavoidable), we could probably refactor those into proper keyword-only arguments, perhaps even automatically using some 2to3 plugin if there is a sufficient number to warrant that effort.\n+This ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. \n+\n+1. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.\n+\n+2. After the deprecation period, it would be replaced by proper keyword-only parameters.\n+\n+Because of the performance penalty of the decorator, this should be done only for non-performance critical functions.\n+\n+We demonstrate the use of the decorator on this ticket with a number of examples:\n+\n+- [get_solver](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/backends/generic_backend.html#sage.numerical.backends.generic_backend.get_solver) - this would catch the typical user error `get_solver('GLPK')`\n+\n+\n+- more TBD.\n+\n+\n+\n+\n+\n``````\n",
    "created_at": "2020-08-31T16:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271694",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,23 @@
-There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintainance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)
+There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)
 
-While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3, the most reasonable way to add such an enforcement in Python 2 would be via a decorator. So I propose introducing a decorator which will limit the number of positional parameters passed to its wrapped function. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.
+While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. 
 
-Once Sage moves to Python 3 (and I hope Sage will live long enough to make that step unavoidable), we could probably refactor those into proper keyword-only arguments, perhaps even automatically using some 2to3 plugin if there is a sufficient number to warrant that effort.
+This ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. 
+
+1. To faciliate [graceful deprecation](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation), it might be associated with a trac ticket number and pass extra positional arguments after issuing a deprecation warning.
+
+2. After the deprecation period, it would be replaced by proper keyword-only parameters.
+
+Because of the performance penalty of the decorator, this should be done only for non-performance critical functions.
+
+We demonstrate the use of the decorator on this ticket with a number of examples:
+
+- [get_solver](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/backends/generic_backend.html#sage.numerical.backends.generic_backend.get_solver) - this would catch the typical user error `get_solver('GLPK')`
+
+
+- more TBD.
+
+
+
+
+
``````




---

archive/issue_events_063164.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T16:12:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63164"
}
```



---

archive/issue_events_063165.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-31T16:12:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63165"
}
```



---

archive/issue_comments_271695.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)\n \n-While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. \n+[PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. \n \n This ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. \n \n``````\n",
    "created_at": "2020-08-31T16:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271695",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 There are functions all over the library which accept various optional named parameters. Often the intention is that these will only be used as keyword parameters, but that fact is not enforced. Maintaining a huge number of possibly positional parameters can become a maintenance pain. (I'm currently seeing a mild version of this in #16533, but things could be *much* worse.)
 
-While [PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. 
+[PEP 3102](http://legacy.python.org/dev/peps/pep-3102/) introduced syntax for this for Python 3. 
 
 This ticket introduces a decorator which will limit the number of positional parameters passed to its wrapped function. 
 
``````




---

archive/issue_events_063166.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63166"
}
```



---

archive/issue_events_063167.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63167"
}
```



---

archive/issue_comments_271696.json:
```json
{
    "body": "<a id='comment:29'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271696",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_063168.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63168"
}
```



---

archive/issue_events_063169.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63169"
}
```



---

archive/issue_comments_271697.json:
```json
{
    "body": "<a id='comment:30'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16607#issuecomment-271697",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_063170.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63170"
}
```



---

archive/issue_events_063171.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63171"
}
```



---

archive/issue_events_063172.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63172"
}
```



---

archive/issue_events_063173.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63173"
}
```



---

archive/issue_events_063174.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63174"
}
```



---

archive/issue_events_063175.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16607",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16607#event-63175"
}
```
