# Issue 16605: Nonsymmetric Macdonald polynomials tests too slow

archive/issues_016368.json:
```json
{
    "body": "There is a small number of extremely long-running doctests, eating quite a chunk of memory. Is it really true that it can only be tested with 100+ seconds long tests?\n\n#long doctests should still be < 10s. It is about test coverage, not showing off what you can compute given enough time. For every ticket somebody is (hopefully) running all the tests...\n\nCC:  schilling @nthiery @tscrim\n\nBranch/Commit: b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4\n\nReviewer: Markus Wageringel\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16605\n\n",
    "closed_at": "2019-09-05T21:33:32Z",
    "created_at": "2014-07-03T04:28:46Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Nonsymmetric Macdonald polynomials tests too slow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16605",
    "user": "https://github.com/vbraun"
}
```
There is a small number of extremely long-running doctests, eating quite a chunk of memory. Is it really true that it can only be tested with 100+ seconds long tests?

#long doctests should still be < 10s. It is about test coverage, not showing off what you can compute given enough time. For every ticket somebody is (hopefully) running all the tests...

CC:  schilling @nthiery @tscrim

Branch/Commit: b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4

Reviewer: Markus Wageringel

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16605





---

archive/issue_comments_275308.json:
```json
{
    "body": "<a id='comment:1'></a>Hi Volker!\n\nThis piece of code was quite tricky to get right for all Cartan types, and it did take us some far testing to get convinced that it was indeed correct. Now, those far tests are indeed most likely only really relevant if someone someday changes the code of non symmetric macdonald polynomials itself. Any change elsewhere in Sage should either break lighter tests or be orthogonal.\n\nSo I would be fine with putting #not tested on the very expensive tests and only keep the lighter ones (or scaled down versions thereof). Do you have a specific list of tests that are very expensive?\n\nCheers,\n                                 Nicolas",
    "created_at": "2014-07-04T21:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275308",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:1'></a>Hi Volker!

This piece of code was quite tricky to get right for all Cartan types, and it did take us some far testing to get convinced that it was indeed correct. Now, those far tests are indeed most likely only really relevant if someone someday changes the code of non symmetric macdonald polynomials itself. Any change elsewhere in Sage should either break lighter tests or be orthogonal.

So I would be fine with putting #not tested on the very expensive tests and only keep the lighter ones (or scaled down versions thereof). Do you have a specific list of tests that are very expensive?

Cheers,
                                 Nicolas



---

archive/issue_comments_275309.json:
```json
{
    "body": "<a id='comment:2'></a>Try `sage -t --warn-long 10`. There are also fairly accurate comments about the runtime. You could just loop over fewer Cartan types in some tests, e.g. pick randomly 5.",
    "created_at": "2014-07-05T02:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275309",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>Try `sage -t --warn-long 10`. There are also fairly accurate comments about the runtime. You could just loop over fewer Cartan types in some tests, e.g. pick randomly 5.



---

archive/issue_events_048698.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48698"
}
```



---

archive/issue_comments_275310.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/16605\"",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275310",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/16605"



---

archive/issue_comments_275311.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275311",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_275312.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275312",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_275313.json:
```json
{
    "body": "Changing commit from \"\" to \"b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4\"",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275313",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4"



---

archive/issue_comments_275314.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275314",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_275315.json:
```json
{
    "body": "<a id='comment:5'></a>bot is morally green, please review",
    "created_at": "2019-08-25T19:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275315",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>bot is morally green, please review



---

archive/issue_events_048699.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-27T07:31:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48699"
}
```



---

archive/issue_events_048700.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-27T07:31:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48700"
}
```



---

archive/issue_comments_275316.json:
```json
{
    "body": "<a id='comment:7'></a>review, someone ? please !",
    "created_at": "2019-08-29T11:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275316",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>review, someone ? please !



---

archive/issue_comments_275317.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-29T21:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275317",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_275318.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Markus Wageringel\"",
    "created_at": "2019-08-29T21:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275318",
    "user": "https://github.com/mwageringel"
}
```

Changing reviewer from "" to "Markus Wageringel"



---

archive/issue_comments_275319.json:
```json
{
    "body": "<a id='comment:8'></a>Looks good to me.",
    "created_at": "2019-08-29T21:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275319",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:8'></a>Looks good to me.



---

archive/issue_comments_275320.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-05T21:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275320",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_275321.json:
```json
{
    "body": "Changing branch from \"u/chapoton/16605\" to \"b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4\"",
    "created_at": "2019-09-05T21:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-275321",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/16605" to "b1cedc08dcc696bd3c0ca7ff9b9d67c7b0764af4"



---

archive/issue_events_048701.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-05T21:33:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48701"
}
```
