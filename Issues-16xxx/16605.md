# Issue 16605: Nonsymmetric Macdonald polynomials tests too slow

archive/issues_016368.json:
```json
{
    "body": "CC:  schilling @nthiery @tscrim\n\nThere is a small number of extremely long-running doctests, eating quite a chunk of memory. Is it really true that it can only be tested with 100+ seconds long tests?\n\n#long doctests should still be < 10s. It is about test coverage, not showing off what you can compute given enough time. For every ticket somebody is (hopefully) running all the tests...\n\nIssue created by migration from https://trac.sagemath.org/ticket/16605\n\n",
    "closed_at": "2019-09-05T21:33:32Z",
    "created_at": "2014-07-03T04:28:46Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Nonsymmetric Macdonald polynomials tests too slow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16605",
    "user": "https://github.com/vbraun"
}
```
CC:  schilling @nthiery @tscrim

There is a small number of extremely long-running doctests, eating quite a chunk of memory. Is it really true that it can only be tested with 100+ seconds long tests?

#long doctests should still be < 10s. It is about test coverage, not showing off what you can compute given enough time. For every ticket somebody is (hopefully) running all the tests...

Issue created by migration from https://trac.sagemath.org/ticket/16605





---

archive/issue_comments_214560.json:
```json
{
    "body": "Hi Volker!\n\nThis piece of code was quite tricky to get right for all Cartan types, and it did take us some far testing to get convinced that it was indeed correct. Now, those far tests are indeed most likely only really relevant if someone someday changes the code of non symmetric macdonald polynomials itself. Any change elsewhere in Sage should either break lighter tests or be orthogonal.\n\nSo I would be fine with putting #not tested on the very expensive tests and only keep the lighter ones (or scaled down versions thereof). Do you have a specific list of tests that are very expensive?\n\nCheers,\n                                 Nicolas",
    "created_at": "2014-07-04T21:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214560",
    "user": "https://github.com/nthiery"
}
```

Hi Volker!

This piece of code was quite tricky to get right for all Cartan types, and it did take us some far testing to get convinced that it was indeed correct. Now, those far tests are indeed most likely only really relevant if someone someday changes the code of non symmetric macdonald polynomials itself. Any change elsewhere in Sage should either break lighter tests or be orthogonal.

So I would be fine with putting #not tested on the very expensive tests and only keep the lighter ones (or scaled down versions thereof). Do you have a specific list of tests that are very expensive?

Cheers,
                                 Nicolas



---

archive/issue_comments_214561.json:
```json
{
    "body": "Try `sage -t --warn-long 10`. There are also fairly accurate comments about the runtime. You could just loop over fewer Cartan types in some tests, e.g. pick randomly 5.",
    "created_at": "2014-07-05T02:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214561",
    "user": "https://github.com/vbraun"
}
```

Try `sage -t --warn-long 10`. There are also fairly accurate comments about the runtime. You could just loop over fewer Cartan types in some tests, e.g. pick randomly 5.



---

archive/issue_events_048698.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48698"
}
```



---

archive/issue_comments_214562.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214562",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_214563.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-08-25T09:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214563",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_214564.json:
```json
{
    "body": "bot is morally green, please review",
    "created_at": "2019-08-25T19:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214564",
    "user": "https://github.com/fchapoton"
}
```

bot is morally green, please review



---

archive/issue_events_048699.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-27T07:31:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48699"
}
```



---

archive/issue_events_048700.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-27T07:31:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48700"
}
```



---

archive/issue_comments_214565.json:
```json
{
    "body": "review, someone ? please !",
    "created_at": "2019-08-29T11:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214565",
    "user": "https://github.com/fchapoton"
}
```

review, someone ? please !



---

archive/issue_comments_214566.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-29T21:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214566",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_214567.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2019-08-29T21:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214567",
    "user": "https://github.com/mwageringel"
}
```

Looks good to me.



---

archive/issue_comments_214568.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-05T21:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16605#issuecomment-214568",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048701.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-05T21:33:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16605",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16605#event-48701"
}
```
