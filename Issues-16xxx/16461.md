# Issue 16461: Difference families... and more BIBD

archive/issues_016224.json:
```json
{
    "assignees": [],
    "body": "A file for difference families and the associated BIBD constructions.\n\nAlso\n- some simplifications for BIBD with k=4,5\n- some new BIBD with k=6,7,...\n\nDepends on #16464\nDepends on #16391\n\nCC:  @nathanncohen\n\nBranch/Commit: **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **combinatorial designs**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16461_\n\n",
    "closed_at": "2014-06-18T14:11:24Z",
    "created_at": "2014-06-09T13:43:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Difference families... and more BIBD",
    "type": "issue",
    "updated_at": "2014-06-18T14:11:24Z",
    "url": "https://github.com/sagemath/sage/issues/16461",
    "user": "https://github.com/videlec"
}
```
A file for difference families and the associated BIBD constructions.

Also
- some simplifications for BIBD with k=4,5
- some new BIBD with k=6,7,...

Depends on #16464
Depends on #16391

CC:  @nathanncohen

Branch/Commit: **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**

Reviewer: **Nathann Cohen**

Author: **Vincent Delecroix**

Component: **combinatorial designs**

_Issue created by migration from https://trac.sagemath.org/ticket/16461_





---

archive/issue_events_235116.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T13:43:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235116"
}
```



---

archive/issue_events_235117.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T13:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235117"
}
```



---

archive/issue_events_235118.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T13:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235118"
}
```



---

archive/issue_events_235119.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T13:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235119"
}
```



---

archive/issue_comments_212930.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n Also\n - some simplifications for BIBD with k=4,5\n-- some new BIBD with k=6,7 (and more)\n+- some new BIBD with k=6,7,...\n``````\n",
    "created_at": "2014-06-09T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212930",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 Also
 - some simplifications for BIBD with k=4,5
-- some new BIBD with k=6,7 (and more)
+- some new BIBD with k=6,7,...
``````




---

archive/issue_comments_212931.json:
```json
{
    "body": "Commit: **[fa45dd3](https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000)**",
    "created_at": "2014-06-09T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212931",
    "user": "https://github.com/videlec"
}
```

Commit: **[fa45dd3](https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000)**



---

archive/issue_comments_212932.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000\">fa45dd3</a></td><td><code>trac #16461: difference families</code></td></tr></table>\n",
    "created_at": "2014-06-09T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212932",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000">fa45dd3</a></td><td><code>trac #16461: difference families</code></td></tr></table>




---

archive/issue_comments_212933.json:
```json
{
    "body": "Branch: **[u/vdelecroix/16461](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16461)**",
    "created_at": "2014-06-09T13:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212933",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/16461](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16461)**



---

archive/issue_events_235120.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T13:45:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235120"
}
```



---

archive/issue_events_235121.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-09T14:38:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235121"
}
```



---

archive/issue_events_235122.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-09T14:38:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235122"
}
```



---

archive/issue_comments_212934.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWow. Coool to see something happend there ! Thanks for the work ! `:-)`\n\nHere is a first-pass-review. \n\n- The new file should be added to the doc\n\n- \"Associates to n is a dictionnary\"\n\n- Could you add references for the DF ? (even if it is always \"from the handbook\")\n\n- Unless you add a definition of what a DF is at the head of `difference_family.py` I would say that your \"todo\" belongs to the constructor, after the def.\n\n- All functions need a docstring.\n\n- `zmod_or_finite_field` : why not always use a GF ? By the way the name of this function is not sufficiently descriptive. Same for `group_law`\n\n- About `group_law` : I was telling Nicolas the other day how it would be more proper to have a category `Groups()` which would be \"any kind of group\" and also have a \"MultiplicativeGroups()` category for ... well, multiplicative groups.\n\n- `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` belong to the Fields code (and probably to another patch, so that the Fields guys see that it is being added)\n\n- Could you add a SEEALSO link from is_difference_family to difference_family, as the latter contains the actual definition of a DF ?\n\n- I expect that _have_distinct_images would be faster if you added all elements to the set directly (i.e. `set(map(f,elts))` then checked that it has the right size. This way you do not 1) check that the element is in the set 2) add it, i.e. two `log(n)` computations.\n\n- `difference_family` needs an INPUT section (and could be linked toward `http://en.wikipedia.org/wiki/Difference_set`).\n\n- `have_distinct_images` too\n\n- Shouldn't  <code>Return a \\`(k,l)\\`-difference family</code> use \"lambda\" instead ? You use both `l` and `lambda` in the docstring. I think I saw `lambd` or `lam` used once.\n\n- You don't need to check that the value of 'l' is correct when you computed it yourself. It belongs to the \"else\" group above.\n\n- `such that the set of differences seen as a multi-set contains` : it does not say what the \"set of differences\" actually is, i.e. the union of the sets of differences corresponding to every set of the family... This sentence isn't very clear either, it may deserve another sentence.\n\n- `is_difference_family` -- looks like the case when one of the \"sets\" of the DF contains the same element twice is handled correctly, but maybe it should deserves an explicit error ? Especially for things like the set `[0,5,10,15]` over `GF(5**4)` which may not be obvious.\n\n- Languages should have built-in functions so that \"{} times\" becomes \"{} time\" when `{} == 1` `:-P`\n\n- why `DF_constructions[v][k,l]` instead of `DF_constructions[v,k,l]` ?\n\n- I still have not read/checked the main function, i.e. `difference_family`.\n\nNathann",
    "created_at": "2014-06-09T14:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212934",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

Wow. Coool to see something happend there ! Thanks for the work ! `:-)`

Here is a first-pass-review. 

- The new file should be added to the doc

- "Associates to n is a dictionnary"

- Could you add references for the DF ? (even if it is always "from the handbook")

- Unless you add a definition of what a DF is at the head of `difference_family.py` I would say that your "todo" belongs to the constructor, after the def.

- All functions need a docstring.

- `zmod_or_finite_field` : why not always use a GF ? By the way the name of this function is not sufficiently descriptive. Same for `group_law`

- About `group_law` : I was telling Nicolas the other day how it would be more proper to have a category `Groups()` which would be "any kind of group" and also have a "MultiplicativeGroups()` category for ... well, multiplicative groups.

- `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` belong to the Fields code (and probably to another patch, so that the Fields guys see that it is being added)

- Could you add a SEEALSO link from is_difference_family to difference_family, as the latter contains the actual definition of a DF ?

- I expect that _have_distinct_images would be faster if you added all elements to the set directly (i.e. `set(map(f,elts))` then checked that it has the right size. This way you do not 1) check that the element is in the set 2) add it, i.e. two `log(n)` computations.

- `difference_family` needs an INPUT section (and could be linked toward `http://en.wikipedia.org/wiki/Difference_set`).

- `have_distinct_images` too

- Shouldn't  <code>Return a \`(k,l)\`-difference family</code> use "lambda" instead ? You use both `l` and `lambda` in the docstring. I think I saw `lambd` or `lam` used once.

- You don't need to check that the value of 'l' is correct when you computed it yourself. It belongs to the "else" group above.

- `such that the set of differences seen as a multi-set contains` : it does not say what the "set of differences" actually is, i.e. the union of the sets of differences corresponding to every set of the family... This sentence isn't very clear either, it may deserve another sentence.

- `is_difference_family` -- looks like the case when one of the "sets" of the DF contains the same element twice is handled correctly, but maybe it should deserves an explicit error ? Especially for things like the set `[0,5,10,15]` over `GF(5**4)` which may not be obvious.

- Languages should have built-in functions so that "{} times" becomes "{} time" when `{} == 1` `:-P`

- why `DF_constructions[v][k,l]` instead of `DF_constructions[v,k,l]` ?

- I still have not read/checked the main function, i.e. `difference_family`.

Nathann



---

archive/issue_comments_212935.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAnother remark : you removed difference families from the code for `(37,4),(21,5),(41,5),(61,5),(281,5)`. Those difference families are needed for the BIBD constructions, so could you add a doctests somewhere to make sure they are always generated by your functions ? Thanks !\n\nNathann",
    "created_at": "2014-06-09T14:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212935",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Another remark : you removed difference families from the code for `(37,4),(21,5),(41,5),(61,5),(281,5)`. Those difference families are needed for the BIBD constructions, so could you add a doctests somewhere to make sure they are always generated by your functions ? Thanks !

Nathann



---

archive/issue_comments_212936.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [ncohen comment 2](#comment:2):\n> Wow. Coool to see something happend there ! Thanks for the work ! `:-)`\n> \n> Here is a first-pass-review. \n\nThanks. I just answer to the remarks for which it is not clear to me what to do.\n\n> - About `group_law` : I was telling Nicolas the other day how it would be more proper to have a category `Groups()` which would be \"any kind of group\" and also have a \"MultiplicativeGroups()` category for ... well, multiplicative groups.\n\nBut then how do you get the group law? I would be happy to see my `group_law` method as a method of any group. Tell Nicolas, that the power set of a set with the operation of symmetric difference is also a group... which is neither additive nor multiplicative ;-)\n\n> - `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` belong to the Fields code (and probably to another patch, so that the Fields guys see that it is being added)\n\nProblem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.\n\n> - I expect that _have_distinct_images would be faster if you added all elements to the set directly (i.e. `set(map(f,elts))` then checked that it has the right size. This way you do not 1) check that the element is in the set 2) add it, i.e. two `log(n)` computations.\n\nAs my set are rather small, you are probably right.\n\n> - `is_difference_family` -- looks like the case when one of the \"sets\" of the DF contains the same element twice is handled correctly, but maybe it should deserves an explicit error ? Especially for things like the set `[0,5,10,15]` over `GF(5**4)` which may not be obvious.\n\nSuch blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).\n\n> - I still have not read/checked the main function, i.e. `difference_family`.\n\nNo hurry. I have to do the changes.\n\nReplying to [ncohen comment 3](#comment:3)\n> Another remark : you removed difference families from the code for (37,4),(21,5),(41,5),(61,5),(281,5). Those difference families are needed for the BIBD constructions, so could you add a doctests somewhere to make sure they are always generated by your functions ? Thanks ! \n\nIt is already (partly) tested in the `bibd.py` file. But I will add something more explicit.\n\nVincent",
    "created_at": "2014-06-09T15:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212936",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [ncohen comment 2](#comment:2):
> Wow. Coool to see something happend there ! Thanks for the work ! `:-)`
> 
> Here is a first-pass-review. 

Thanks. I just answer to the remarks for which it is not clear to me what to do.

> - About `group_law` : I was telling Nicolas the other day how it would be more proper to have a category `Groups()` which would be "any kind of group" and also have a "MultiplicativeGroups()` category for ... well, multiplicative groups.

But then how do you get the group law? I would be happy to see my `group_law` method as a method of any group. Tell Nicolas, that the power set of a set with the operation of symmetric difference is also a group... which is neither additive nor multiplicative ;-)

> - `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` belong to the Fields code (and probably to another patch, so that the Fields guys see that it is being added)

Problem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.

> - I expect that _have_distinct_images would be faster if you added all elements to the set directly (i.e. `set(map(f,elts))` then checked that it has the right size. This way you do not 1) check that the element is in the set 2) add it, i.e. two `log(n)` computations.

As my set are rather small, you are probably right.

> - `is_difference_family` -- looks like the case when one of the "sets" of the DF contains the same element twice is handled correctly, but maybe it should deserves an explicit error ? Especially for things like the set `[0,5,10,15]` over `GF(5**4)` which may not be obvious.

Such blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).

> - I still have not read/checked the main function, i.e. `difference_family`.

No hurry. I have to do the changes.

Replying to [ncohen comment 3](#comment:3)
> Another remark : you removed difference families from the code for (37,4),(21,5),(41,5),(61,5),(281,5). Those difference families are needed for the BIBD constructions, so could you add a doctests somewhere to make sure they are always generated by your functions ? Thanks ! 

It is already (partly) tested in the `bibd.py` file. But I will add something more explicit.

Vincent



---

archive/issue_comments_212937.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYooooooooo !\n\n> But then how do you get the group law? \n\nIt's unrelated. My remark was just that this is wrong :\n\n```\nsage: groups.misc.AdditiveCyclic(4) in Groups()\nFalse\n```\n\nWhat we have now is that `MultiplicativeGroups` is improperly called \"groups\". That's just about the thing's name.\n\n> I would be happy to see my `group_law` method as a method of any group.\n\nWe, it could definitely be the first method of a `Groups()` category !\n\n> Tell Nicolas, that the power set of a set with the operation of symmetric difference is also a group... which is neither additive nor multiplicative ;-)\n\nWell, you got the email so tell him. That's actually dead right !\n\n> Problem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.\n\nquadratic_residues is a function from the global namespace. What you are implementing is a method of Fields, isn't it ?\n\n> Such blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).\n\nThat's exactly why I picked those values. Are you allowed to have the same element twice in a set of a difference family ?\n\n> It is already (partly) tested in the `bibd.py` file. But I will add something more explicit.\n\nYes yes, I just worried that it could only be triggered when you try to compute exhaustively all BIBD for n<500 or something.\n\nNathann",
    "created_at": "2014-06-09T15:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212937",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yooooooooo !

> But then how do you get the group law? 

It's unrelated. My remark was just that this is wrong :

```
sage: groups.misc.AdditiveCyclic(4) in Groups()
False
```

What we have now is that `MultiplicativeGroups` is improperly called "groups". That's just about the thing's name.

> I would be happy to see my `group_law` method as a method of any group.

We, it could definitely be the first method of a `Groups()` category !

> Tell Nicolas, that the power set of a set with the operation of symmetric difference is also a group... which is neither additive nor multiplicative ;-)

Well, you got the email so tell him. That's actually dead right !

> Problem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.

quadratic_residues is a function from the global namespace. What you are implementing is a method of Fields, isn't it ?

> Such blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).

That's exactly why I picked those values. Are you allowed to have the same element twice in a set of a difference family ?

> It is already (partly) tested in the `bibd.py` file. But I will add something more explicit.

Yes yes, I just worried that it could only be triggered when you try to compute exhaustively all BIBD for n<500 or something.

Nathann



---

archive/issue_comments_212938.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2\">491d669</a></td><td><code>trac #16461: reviewer comment 1 ++</code></td></tr></table>\n",
    "created_at": "2014-06-09T19:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2">491d669</a></td><td><code>trac #16461: reviewer comment 1 ++</code></td></tr></table>




---

archive/issue_comments_212939.json:
```json
{
    "body": "Changed commit from **[fa45dd3](https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000)** to **[491d669](https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2)**",
    "created_at": "2014-06-09T19:00:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212939",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fa45dd3](https://github.com/sagemath/sagetrac-mirror/commit/fa45dd3df9317893e1fc0a2a4c4cbe1e0314c000)** to **[491d669](https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2)**



---

archive/issue_events_235123.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T19:09:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235123"
}
```



---

archive/issue_events_235124.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T19:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235124"
}
```



---

archive/issue_comments_212940.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> > Problem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.\n\n> \n> quadratic_residues is a function from the global namespace. What you are implementing is a method of Fields, isn't it ?\n\nI refactored `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` into a unique function named `cyclotomic_cosets` and that takes a `cosets` argument. It definitely belong to finite fields, but I am not sure this is standard terminology in algebra... I believe not... The multiplicative group of invertible elements of a finite field is always cyclic, so any coset is actually \"cyclotomic\". It might be `multiplicative_cosets`. Nevertheless, I am not sure it would be of much use as a method of finite field and I would rather let it where it is.\n\n> > Such blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).\n\n> That's exactly why I picked those values. Are you allowed to have the same element twice in a set of a difference family ?\n\nNope: the difference must belong to `G \\ {0}` so you can not repeat an element.\n \n> > It is already (partly) tested in the `bibd.py` file. But I will add something more explicit.\n\n> \n> Yes yes, I just worried that it could only be triggered when you try to compute exhaustively all BIBD for n<500 or something.\n\nIt is now completely tested.\n\nVincent",
    "created_at": "2014-06-09T19:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212940",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

> > Problem1: `quadratic_residues` is already a function that takes an integer `n` as input and return the squares modulo `n`. The ouptut are sage `Integer`. So it does not fit very well as I need finite field which are not necessarily primes. Idem for `cyclotomic_cosets`.

> 
> quadratic_residues is a function from the global namespace. What you are implementing is a method of Fields, isn't it ?

I refactored `quadratic_residues`, `quartic_residues` and `cyclotomic_cosets` into a unique function named `cyclotomic_cosets` and that takes a `cosets` argument. It definitely belong to finite fields, but I am not sure this is standard terminology in algebra... I believe not... The multiplicative group of invertible elements of a finite field is always cyclic, so any coset is actually "cyclotomic". It might be `multiplicative_cosets`. Nevertheless, I am not sure it would be of much use as a method of finite field and I would rather let it where it is.

> > Such blocks might be valid for lambda > 1. (but note that `0=5=10=15` in your `GF(5**4)`).

> That's exactly why I picked those values. Are you allowed to have the same element twice in a set of a difference family ?

Nope: the difference must belong to `G \ {0}` so you can not repeat an element.
 
> > It is already (partly) tested in the `bibd.py` file. But I will add something more explicit.

> 
> Yes yes, I just worried that it could only be triggered when you try to compute exhaustively all BIBD for n<500 or something.

It is now completely tested.

Vincent



---

archive/issue_comments_212941.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d\">5d91e5f</a></td><td><code>trac #16461: more doc</code></td></tr></table>\n",
    "created_at": "2014-06-09T19:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212941",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d">5d91e5f</a></td><td><code>trac #16461: more doc</code></td></tr></table>




---

archive/issue_comments_212942.json:
```json
{
    "body": "Changed commit from **[491d669](https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2)** to **[5d91e5f](https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d)**",
    "created_at": "2014-06-09T19:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212942",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[491d669](https://github.com/sagemath/sagetrac-mirror/commit/491d66957e3f92387f3db04e92914f359e2a35e2)** to **[5d91e5f](https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d)**



---

archive/issue_comments_212943.json:
```json
{
    "body": "Dependencies: **#16464**",
    "created_at": "2014-06-09T22:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212943",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#16464**



---

archive/issue_events_235125.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T22:11:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235125"
}
```



---

archive/issue_events_235126.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-09T22:11:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235126"
}
```



---

archive/issue_comments_212944.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nwaiting for #16464 now.",
    "created_at": "2014-06-09T22:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212944",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

waiting for #16464 now.



---

archive/issue_comments_212945.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b903c4dd3dfebdbfefe920c75ea43c582182a006\">b903c4d</a></td><td><code>trac #16461: more doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b1544b90970887f5e22a4aa1e93db04cd18ce90\">9b1544b</a></td><td><code>trac #16464: generic implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0a29585467f32cc4b2311944a3e1ad5a9203fe9\">f0a2958</a></td><td><code>trac #16464: Docstring work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0474bb138221ffa139ede31f6e04ed47d02e6ea\">f0474bb</a></td><td><code>trac #16464: be more careful with errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21cb1a83280c9a0c7ddd6c418dad4d053024b570\">21cb1a8</a></td><td><code>trac #16464: handle correctly arguments for cyclotomic_cosets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b07ad014b69fc326233a570e41fbdad93402049c\">b07ad01</a></td><td><code>trac #16464: Second review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/136e870dfd215fd1b75521dafa04888f3601bf40\">136e870</a></td><td><code>trac #16464: tiny improvements for is_a_splitting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/965f550d72c999d0cefece8cbd253a843af2528b\">965f550</a></td><td><code>trac #16464: replace bool(S1&S2) by S1.isdisjoint(S2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b199c7a5063ad9510f143541eea148bc9855700\">9b199c7</a></td><td><code>trac #16461: merge #16464</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0\">2d12cc0</a></td><td><code>trac #16461: adapt the implementation with #16464</code></td></tr></table>\n",
    "created_at": "2014-06-11T11:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212945",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b903c4dd3dfebdbfefe920c75ea43c582182a006">b903c4d</a></td><td><code>trac #16461: more doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b1544b90970887f5e22a4aa1e93db04cd18ce90">9b1544b</a></td><td><code>trac #16464: generic implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0a29585467f32cc4b2311944a3e1ad5a9203fe9">f0a2958</a></td><td><code>trac #16464: Docstring work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0474bb138221ffa139ede31f6e04ed47d02e6ea">f0474bb</a></td><td><code>trac #16464: be more careful with errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21cb1a83280c9a0c7ddd6c418dad4d053024b570">21cb1a8</a></td><td><code>trac #16464: handle correctly arguments for cyclotomic_cosets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b07ad014b69fc326233a570e41fbdad93402049c">b07ad01</a></td><td><code>trac #16464: Second review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/136e870dfd215fd1b75521dafa04888f3601bf40">136e870</a></td><td><code>trac #16464: tiny improvements for is_a_splitting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/965f550d72c999d0cefece8cbd253a843af2528b">965f550</a></td><td><code>trac #16464: replace bool(S1&S2) by S1.isdisjoint(S2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b199c7a5063ad9510f143541eea148bc9855700">9b199c7</a></td><td><code>trac #16461: merge #16464</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0">2d12cc0</a></td><td><code>trac #16461: adapt the implementation with #16464</code></td></tr></table>




---

archive/issue_comments_212946.json:
```json
{
    "body": "Changed commit from **[5d91e5f](https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d)** to **[2d12cc0](https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0)**",
    "created_at": "2014-06-11T11:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212946",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5d91e5f](https://github.com/sagemath/sagetrac-mirror/commit/5d91e5f398d7ddad0bfb9cb6952f3af493943b0d)** to **[2d12cc0](https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0)**



---

archive/issue_events_235127.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-11T11:26:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235127"
}
```



---

archive/issue_events_235128.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-11T11:26:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235128"
}
```



---

archive/issue_comments_212947.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI hate to see the dependencies in the tickets... `T_T`\n\nNathann",
    "created_at": "2014-06-11T11:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212947",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

I hate to see the dependencies in the tickets... `T_T`

Nathann



---

archive/issue_comments_212948.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628\">d3d6a31</a></td><td><code>trac #16461: reset finite_field_base.pyx to its previous state</code></td></tr></table>\n",
    "created_at": "2014-06-11T11:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628">d3d6a31</a></td><td><code>trac #16461: reset finite_field_base.pyx to its previous state</code></td></tr></table>




---

archive/issue_comments_212949.json:
```json
{
    "body": "Changed commit from **[2d12cc0](https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0)** to **[d3d6a31](https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628)**",
    "created_at": "2014-06-11T11:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d12cc0](https://github.com/sagemath/sagetrac-mirror/commit/2d12cc02dd29a47955b670df51beed44b569d2a0)** to **[d3d6a31](https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628)**



---

archive/issue_comments_212950.json:
```json
{
    "body": "Changed commit from **[d3d6a31](https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628)** to **[2638697](https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb)**",
    "created_at": "2014-06-11T12:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d3d6a31](https://github.com/sagemath/sagetrac-mirror/commit/d3d6a31efd1ec23afa311c51a437253a4b8f1628)** to **[2638697](https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb)**



---

archive/issue_comments_212951.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb\">2638697</a></td><td><code>trac #16461: always check the difference family</code></td></tr></table>\n",
    "created_at": "2014-06-11T12:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb">2638697</a></td><td><code>trac #16461: always check the difference family</code></td></tr></table>




---

archive/issue_comments_212952.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHello !!\n\nIs `if l == (k-1):` equivalent to `if (v-1)%k == 0` ?\n\nNathann",
    "created_at": "2014-06-11T15:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212952",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Hello !!

Is `if l == (k-1):` equivalent to `if (v-1)%k == 0` ?

Nathann



---

archive/issue_comments_212953.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNo. None of the one implies the other.\n\nAssume `l(v-1) % (k(k-1)) == 0`. Then:\n- if `l = k-1` then `v-1` is can be any multiple of `k`\n- if `v-1 = k(k-1)` then `l` is arbitrary\n\nVincent",
    "created_at": "2014-06-11T15:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212953",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

No. None of the one implies the other.

Assume `l(v-1) % (k(k-1)) == 0`. Then:
- if `l = k-1` then `v-1` is can be any multiple of `k`
- if `v-1 = k(k-1)` then `l` is arbitrary

Vincent



---

archive/issue_comments_212954.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYoooooooooooo !\n\n> No. None of the one implies the other.\n> \n> Assume `l(v-1) % (k(k-1)) == 0`. Then, for example:\n> - if `l = k(k-1)` then `v` is arbitrary\n> - if `v-1 = k(k-1)` then `l` is arbitrary\n\nYesyesyes. I needed some time to find out why those cyclotomic cosets were cool difference families and I finally understood it to some extent `:-)`\n\nAs your function handles a lot of `l>1` already, what would you mean of changing the \"if\" into \"`(v-1)%k == 0 and l%(k-1) == 0`\" ? In which case we could return \"several times the same difference family\" if `l` is equal to `2(k-1)` ?\n\nNathann",
    "created_at": "2014-06-11T16:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212954",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Yoooooooooooo !

> No. None of the one implies the other.
> 
> Assume `l(v-1) % (k(k-1)) == 0`. Then, for example:
> - if `l = k(k-1)` then `v` is arbitrary
> - if `v-1 = k(k-1)` then `l` is arbitrary

Yesyesyes. I needed some time to find out why those cyclotomic cosets were cool difference families and I finally understood it to some extent `:-)`

As your function handles a lot of `l>1` already, what would you mean of changing the "if" into "`(v-1)%k == 0 and l%(k-1) == 0`" ? In which case we could return "several times the same difference family" if `l` is equal to `2(k-1)` ?

Nathann



---

archive/issue_comments_212955.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nBy the way I think that the best way to deal with those multiple copies is to set a \"multiplier\" variable when D is defined. And at the end of everything, if `multiplier>1`, copy the whole family several times ?...\n\nNathann",
    "created_at": "2014-06-11T16:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212955",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

By the way I think that the best way to deal with those multiple copies is to set a "multiplier" variable when D is defined. And at the end of everything, if `multiplier>1`, copy the whole family several times ?...

Nathann



---

archive/issue_comments_212956.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nathanncohen](#comment:17):\n> Yoooooooooooo !\n> \n> > No. None of the one implies the other.\n> > \n> > Assume `l(v-1) % (k(k-1)) == 0`. Then, for example:\n> > - if `l = k(k-1)` then `v` is arbitrary\n> > - if `v-1 = k(k-1)` then `l` is arbitrary\n\n> \n> Yesyesyes. I needed some time to find out why those cyclotomic cosets were cool difference families and I finally understood it to some extent `:-)`\n> \n> As your function handles a lot of `l>1` already, what would you mean of changing the \"if\" into \"`(v-1)%k == 0 and l%(k-1) == 0`\" ? In which case we could return \"several times the same difference family\" if `l` is equal to `2(k-1)` ?\n\nActually, it is more than that. You can take the union of several families with the same `(G,k)` (the group `G` need to be fixed). If you have `(G,k,l1)`, `(G,k,l2)`, ..., `(G,k,ln)` difference families then you have a `(G,k,l1+l2+...+ln)` by taking the union. In other words, the set of `l` you can build for a fixed `(G,k)` is a semi-group of the integers... it is more than just stable under multiplication.",
    "created_at": "2014-06-11T16:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212956",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nathanncohen](#comment:17):
> Yoooooooooooo !
> 
> > No. None of the one implies the other.
> > 
> > Assume `l(v-1) % (k(k-1)) == 0`. Then, for example:
> > - if `l = k(k-1)` then `v` is arbitrary
> > - if `v-1 = k(k-1)` then `l` is arbitrary

> 
> Yesyesyes. I needed some time to find out why those cyclotomic cosets were cool difference families and I finally understood it to some extent `:-)`
> 
> As your function handles a lot of `l>1` already, what would you mean of changing the "if" into "`(v-1)%k == 0 and l%(k-1) == 0`" ? In which case we could return "several times the same difference family" if `l` is equal to `2(k-1)` ?

Actually, it is more than that. You can take the union of several families with the same `(G,k)` (the group `G` need to be fixed). If you have `(G,k,l1)`, `(G,k,l2)`, ..., `(G,k,ln)` difference families then you have a `(G,k,l1+l2+...+ln)` by taking the union. In other words, the set of `l` you can build for a fixed `(G,k)` is a semi-group of the integers... it is more than just stable under multiplication.



---

archive/issue_comments_212957.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nInstead of this \n\n```\n_nonzero_and_have_distinct_images((r**j-one for j in xrange(1,m+1)), to_coset)\n```\n\nCouldn't you do that ?\n\n```\nthings = [r**j-one for j in xrange(1,m+1)]\nif 0 not in things and len(K.cyclotomic_cosets(x,things)) == m):\n```\n\nOr am I doing something wrong ?\n\nNathann",
    "created_at": "2014-06-11T16:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212957",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

Instead of this 

```
_nonzero_and_have_distinct_images((r**j-one for j in xrange(1,m+1)), to_coset)
```

Couldn't you do that ?

```
things = [r**j-one for j in xrange(1,m+1)]
if 0 not in things and len(K.cyclotomic_cosets(x,things)) == m):
```

Or am I doing something wrong ?

Nathann



---

archive/issue_comments_212958.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYo !\n\n> Actually, it is more than that.\n> ...\n> it is more than just stable under multiplication.\n\nOh. True, true. No idea how we will deal with this, then `O_o`\n\nNathann",
    "created_at": "2014-06-11T16:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212958",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Yo !

> Actually, it is more than that.
> ...
> it is more than just stable under multiplication.

Oh. True, true. No idea how we will deal with this, then `O_o`

Nathann



---

archive/issue_events_235129.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-11T16:20:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235129"
}
```



---

archive/issue_events_235130.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-11T16:20:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235130"
}
```



---

archive/issue_comments_212959.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment:21):\n> Yo !\n> \n> > Actually, it is more than that.\n> > ...\n> > it is more than just stable under multiplication.\n\n> \n> Oh. True, true. No idea how we will deal with this, then `O_o`\n\nFor this ticket, I see two solutions:\n- make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.\n- write a TODO\n\nThe first solution is not that complicated. But then, it would make more sense to have:\n- `designs.difference_family(v,k,lambda)`: do not care about the group\n- `designs.abelian_difference_family(invariants, k, lambda)`: we care\n\nVincent",
    "created_at": "2014-06-11T16:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212959",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment:21):
> Yo !
> 
> > Actually, it is more than that.
> > ...
> > it is more than just stable under multiplication.

> 
> Oh. True, true. No idea how we will deal with this, then `O_o`

For this ticket, I see two solutions:
- make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.
- write a TODO

The first solution is not that complicated. But then, it would make more sense to have:
- `designs.difference_family(v,k,lambda)`: do not care about the group
- `designs.abelian_difference_family(invariants, k, lambda)`: we care

Vincent



---

archive/issue_comments_212960.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> For this ticket, I see two solutions:\n\nNono, a later ticket... This one is almost reviewed (still wincing a bit but I understand more and more `:-P`)\n\n> - make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.\n> - write a TODO\n> \n> The first solution is not that complicated. But then, it would make more sense to have:\n> - `designs.difference_family(v,k,lambda)`: do not care about the group\n> - `designs.abelian_difference_family(invariants, k, lambda)`: we care\n\nI don't see the relationship that you make between the group and the lambda. For me the problem is only that we need a way to detect that we can build a `(v,k,l1+l2)-DF` if we can build a `(v,k,l1)-DF` and a `(v,k,l2)-DF`. What does the group have to do with that ?\n\nNathann",
    "created_at": "2014-06-11T16:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212960",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

> For this ticket, I see two solutions:

Nono, a later ticket... This one is almost reviewed (still wincing a bit but I understand more and more `:-P`)

> - make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.
> - write a TODO
> 
> The first solution is not that complicated. But then, it would make more sense to have:
> - `designs.difference_family(v,k,lambda)`: do not care about the group
> - `designs.abelian_difference_family(invariants, k, lambda)`: we care

I don't see the relationship that you make between the group and the lambda. For me the problem is only that we need a way to detect that we can build a `(v,k,l1+l2)-DF` if we can build a `(v,k,l1)-DF` and a `(v,k,l2)-DF`. What does the group have to do with that ?

Nathann



---

archive/issue_comments_212961.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nathanncohen](#comment:20):\n> Instead of this \n> \n> ```\n> _nonzero_and_have_distinct_images((r**j-one for j in xrange(1,m+1)), to_coset)\n> ```\n> \n> Couldn't you do that ?\n> \n> ```\n> things = [r**j-one for j in xrange(1,m+1)]\n> if 0 not in things and len(K.cyclotomic_cosets(x,things)) == m):\n> ```\n> \n> Or am I doing something wrong ?\n\nYou are right. And it is true for the three constructions of Wilson, we just want to see if some elements are in distinct cosets. But on the other hand, with your solution you will build the cosets many times. It might be much longer especially in the third construction where there is an iteration over all elements of the finite field.\n\nI can build the dictionnary `to_coset` from the `K.cyclotomic_cosets` if you like ;-)",
    "created_at": "2014-06-11T16:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212961",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nathanncohen](#comment:20):
> Instead of this 
> 
> ```
> _nonzero_and_have_distinct_images((r**j-one for j in xrange(1,m+1)), to_coset)
> ```
> 
> Couldn't you do that ?
> 
> ```
> things = [r**j-one for j in xrange(1,m+1)]
> if 0 not in things and len(K.cyclotomic_cosets(x,things)) == m):
> ```
> 
> Or am I doing something wrong ?

You are right. And it is true for the three constructions of Wilson, we just want to see if some elements are in distinct cosets. But on the other hand, with your solution you will build the cosets many times. It might be much longer especially in the third construction where there is an iteration over all elements of the finite field.

I can build the dictionnary `to_coset` from the `K.cyclotomic_cosets` if you like ;-)



---

archive/issue_comments_212962.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nathanncohen](#comment:24):\n> > For this ticket, I see two solutions:\n\n> \n> Nono, a later ticket... This one is almost reviewed (still wincing a bit but I understand more and more `:-P`)\n> \n> > - make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.\n> > - write a TODO\n> > \n> > The first solution is not that complicated. But then, it would make more sense to have:\n> > - `designs.difference_family(v,k,lambda)`: do not care about the group\n> > - `designs.abelian_difference_family(invariants, k, lambda)`: we care\n\n> \n> I don't see the relationship that you make between the group and the lambda. For me the problem is only that we need a way to detect that we can build a `(v,k,l1+l2)-DF` if we can build a `(v,k,l1)-DF` and a `(v,k,l2)-DF`. What does the group have to do with that ?\n\nIf your two DF are on the same group you can take the union. Otherwise it just makes no sense!!",
    "created_at": "2014-06-11T16:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212962",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nathanncohen](#comment:24):
> > For this ticket, I see two solutions:

> 
> Nono, a later ticket... This one is almost reviewed (still wincing a bit but I understand more and more `:-P`)
> 
> > - make a more specialized function which take as input a fixed Abelian group (given by its invariants) and not only `v`. The case of cyclic families would just be the invariant being `(v,)` itself and power of cyclic would be `(v,v,...,v)`.
> > - write a TODO
> > 
> > The first solution is not that complicated. But then, it would make more sense to have:
> > - `designs.difference_family(v,k,lambda)`: do not care about the group
> > - `designs.abelian_difference_family(invariants, k, lambda)`: we care

> 
> I don't see the relationship that you make between the group and the lambda. For me the problem is only that we need a way to detect that we can build a `(v,k,l1+l2)-DF` if we can build a `(v,k,l1)-DF` and a `(v,k,l2)-DF`. What does the group have to do with that ?

If your two DF are on the same group you can take the union. Otherwise it just makes no sense!!



---

archive/issue_comments_212963.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nYo !\n\n> You are right. And it is true for the three constructions of Wilson, we just want to see if some elements are in distinct cosets. But on the other hand, with your solution you will build the cosets many times. It might be much longer especially in the third construction where there is an iteration over all elements of the finite field.\n\nOh. I will look at that.\n\n> I can build the dictionnary `to_coset` from the `K.cyclotomic_cosets` if you like ;-)\n\nWhat I want to do is get rid of this `_nonzero_and_have_distinct_images` function `:-P`\n\nNathann",
    "created_at": "2014-06-11T16:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212963",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Yo !

> You are right. And it is true for the three constructions of Wilson, we just want to see if some elements are in distinct cosets. But on the other hand, with your solution you will build the cosets many times. It might be much longer especially in the third construction where there is an iteration over all elements of the finite field.

Oh. I will look at that.

> I can build the dictionnary `to_coset` from the `K.cyclotomic_cosets` if you like ;-)

What I want to do is get rid of this `_nonzero_and_have_distinct_images` function `:-P`

Nathann



---

archive/issue_comments_212964.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> If your two DF are on the same group you can take the union. Otherwise it just makes no sense!!\n\nAhahahah. True, true. I was thinking of BIBD, sorry `:-D`\n\nSoooooooooooooooo we only need to implement this l1+l2 mechanism for BIBD.. And designs in general. Hmmmmmm `:-P`\n\nNathann",
    "created_at": "2014-06-11T16:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212964",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

> If your two DF are on the same group you can take the union. Otherwise it just makes no sense!!

Ahahahah. True, true. I was thinking of BIBD, sorry `:-D`

Soooooooooooooooo we only need to implement this l1+l2 mechanism for BIBD.. And designs in general. Hmmmmmm `:-P`

Nathann



---

archive/issue_comments_212965.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@nathanncohen](#comment:28):\n> > If your two DF are on the same group you can take the union. Otherwise it just makes no sense!!\n\n> \n> Ahahahah. True, true. I was thinking of BIBD, sorry `:-D`\n> \n> Soooooooooooooooo we only need to implement this l1+l2 mechanism for BIBD.. And designs in general. Hmmmmmm `:-P`\n\nIt can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.",
    "created_at": "2014-06-11T16:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212965",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@nathanncohen](#comment:28):
> > If your two DF are on the same group you can take the union. Otherwise it just makes no sense!!

> 
> Ahahahah. True, true. I was thinking of BIBD, sorry `:-D`
> 
> Soooooooooooooooo we only need to implement this l1+l2 mechanism for BIBD.. And designs in general. Hmmmmmm `:-P`

It can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.



---

archive/issue_comments_212966.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@nathanncohen](#comment:27):\n> What I want to do is get rid of this `_nonzero_and_have_distinct_images` function `:-P`\n\nAll right, it can be replaced by:\n\n```\n   len(set(to_coset[elt] for elt in XXX)) == len(XXX)\n```\n+ special care of the zero element.",
    "created_at": "2014-06-11T16:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212966",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@nathanncohen](#comment:27):
> What I want to do is get rid of this `_nonzero_and_have_distinct_images` function `:-P`

All right, it can be replaced by:

```
   len(set(to_coset[elt] for elt in XXX)) == len(XXX)
```
+ special care of the zero element.



---

archive/issue_comments_212967.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n> It can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.\n\nHMmmmmm... Sorry but for the moment I am only interested by DF for as long as they generate new BIBD `:-P`\n\nNathann",
    "created_at": "2014-06-11T16:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212967",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:31" align="right">comment:31</div>

> It can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.

HMmmmmm... Sorry but for the moment I am only interested by DF for as long as they generate new BIBD `:-P`

Nathann



---

archive/issue_comments_212968.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@nathanncohen](#comment:31):\n> > It can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.\n\n> \n> HMmmmmm... Sorry but for the moment I am only interested by DF for as long as they generate new BIBD `:-P`\n\nMight be. But on the other hand, it is easier to manipulate difference families rather than BIBD because they are small.",
    "created_at": "2014-06-11T16:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212968",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@nathanncohen](#comment:31):
> > It can be worth it to have it at the level of the difference families to build designs with transitive symmetric groups.

> 
> HMmmmmm... Sorry but for the moment I am only interested by DF for as long as they generate new BIBD `:-P`

Might be. But on the other hand, it is easier to manipulate difference families rather than BIBD because they are small.



---

archive/issue_comments_212969.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2014-06-11T16:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212969",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_212970.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOokayyyyyyyyy... It woud be cool if you could get rid of this `_nonzero_and_have_distinct_images` in a nice way. Aaaaaaaaaaaaaand if it not possible, well, you can set this ticket to `positive_review` anyway. Thanks for this patch ! `:-)`\n\nNathann",
    "created_at": "2014-06-11T16:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212970",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

Ookayyyyyyyyy... It woud be cool if you could get rid of this `_nonzero_and_have_distinct_images` in a nice way. Aaaaaaaaaaaaaand if it not possible, well, you can set this ticket to `positive_review` anyway. Thanks for this patch ! `:-)`

Nathann



---

archive/issue_comments_212971.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826\">8b1e6ce</a></td><td><code>trac #16461: get rid of _nonzero_and_have_distinct_images</code></td></tr></table>\n",
    "created_at": "2014-06-11T17:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212971",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826">8b1e6ce</a></td><td><code>trac #16461: get rid of _nonzero_and_have_distinct_images</code></td></tr></table>




---

archive/issue_comments_212972.json:
```json
{
    "body": "Changed commit from **[2638697](https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb)** to **[8b1e6ce](https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826)**",
    "created_at": "2014-06-11T17:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212972",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2638697](https://github.com/sagemath/sagetrac-mirror/commit/263869795e1c6e6af4a44045b4275b0911aef2eb)** to **[8b1e6ce](https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826)**



---

archive/issue_events_235131.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-11T17:18:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235131"
}
```



---

archive/issue_events_235132.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-11T17:18:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235132"
}
```



---

archive/issue_comments_212973.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nWhy don't you need to test equality with 0 for the first construction ?\n\nNathann",
    "created_at": "2014-06-11T18:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212973",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

Why don't you need to test equality with 0 for the first construction ?

Nathann



---

archive/issue_comments_212974.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nActually, there is no need to test equality to `0` (I realized that after removing the `_nonzero...`).\n\nThe second construction is a bit different from the other two because each block of the difference family contains `0`. Somehow the coset labelled `0` (which is just `[xx*j for j in xrange((v-1)//m)]`) is automatically requested and you want that all the other differences belong to cosets distinct from it.",
    "created_at": "2014-06-11T18:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212974",
    "user": "https://github.com/videlec"
}
```

<div id="comment:37" align="right">comment:37</div>

Actually, there is no need to test equality to `0` (I realized that after removing the `_nonzero...`).

The second construction is a bit different from the other two because each block of the difference family contains `0`. Somehow the coset labelled `0` (which is just `[xx*j for j in xrange((v-1)//m)]`) is automatically requested and you want that all the other differences belong to cosets distinct from it.



---

archive/issue_comments_212975.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOkay, I se no reason to not set this to `positive_review`. Except one thing which was bothering me : `difference_family.py` instead of `difference_families.py` ? `:-P`\n\nNathann",
    "created_at": "2014-06-11T18:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212975",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:38" align="right">comment:38</div>

Okay, I se no reason to not set this to `positive_review`. Except one thing which was bothering me : `difference_family.py` instead of `difference_families.py` ? `:-P`

Nathann



---

archive/issue_comments_212976.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThen `bibds.py`? `covering_designs.py`? `block_designs.py`? When do we put an `s` and when we do not?",
    "created_at": "2014-06-11T18:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212976",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

Then `bibds.py`? `covering_designs.py`? `block_designs.py`? When do we put an `s` and when we do not?



---

archive/issue_comments_212977.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\n> Then `bibds.py`? `covering_designs.py`? `block_designs.py`? When do we put an `s` and when we do not?\n\nWell, all new files have an 's'. Okay, doesn't matter.\n\nNathann",
    "created_at": "2014-06-11T19:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212977",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:40" align="right">comment:40</div>

> Then `bibds.py`? `covering_designs.py`? `block_designs.py`? When do we put an `s` and when we do not?

Well, all new files have an 's'. Okay, doesn't matter.

Nathann



---

archive/issue_events_235133.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-11T19:04:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235133"
}
```



---

archive/issue_events_235134.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-11T19:04:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235134"
}
```



---

archive/issue_comments_212978.json:
```json
{
    "body": "Changed dependencies from **#16464** to **#16464,#16391**",
    "created_at": "2014-06-12T13:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212978",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16464** to **#16464,#16391**



---

archive/issue_comments_212979.json:
```json
{
    "body": "Changed dependencies from **#16464,#16391** to **#16391**",
    "created_at": "2014-06-12T14:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212979",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16464,#16391** to **#16391**



---

archive/issue_comments_212980.json:
```json
{
    "body": "Changed dependencies from **#16391** to **#16464**",
    "created_at": "2014-06-12T14:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212980",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16391** to **#16464**



---

archive/issue_comments_212981.json:
```json
{
    "body": "Changed commit from **[8b1e6ce](https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826)** to **[ee3b035](https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0)**",
    "created_at": "2014-06-12T14:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212981",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[8b1e6ce](https://github.com/sagemath/sagetrac-mirror/commit/8b1e6cefc5d2bae89d9a23c75a78e558ef6d3826)** to **[ee3b035](https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0)**



---

archive/issue_comments_212982.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90f828fb2904fc5083baa8b45af97d6dc7740f54\">90f828f</a></td><td><code>trac #16391: use OrthogonalArrayBlockGraph instead of OrthogonalArrayGraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e3c6856da596aa0b05c82c2f3cbcf48dbd3812a\">6e3c685</a></td><td><code>trac #16391: reviewer's comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52c2de8586d29cbe302bb9a451589ca5d8eeadd5\">52c2de8</a></td><td><code>trac #16391: Removing the holes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0885f7944ac0cb5f5ddb6822544f9059596ba67\">d0885f7</a></td><td><code>trac #16391: bugfix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1de59747d1c2c27ffdc586f9e91bc178eb4cc88\">c1de597</a></td><td><code>trac #16391: doc clean + remove some list construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41a9a247df5925a7067421a03093b0bc01155671\">41a9a24</a></td><td><code>trac #16391: Typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42239ccc8b169e1aaf148da90b638004a09e67c6\">42239cc</a></td><td><code>trac #16391: Undoing stuff</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24ac3a8e0424d9b4516517144935b0367a95801e\">24ac3a8</a></td><td><code>trac #16391: Broken doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70c98058b2414e3fc873a8825c1db293da0709e3\">70c9805</a></td><td><code>trac #16391: Merged with #16460</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0\">ee3b035</a></td><td><code>trac #16461: Merged with #16391</code></td></tr></table>\n",
    "created_at": "2014-06-12T14:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212982",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90f828fb2904fc5083baa8b45af97d6dc7740f54">90f828f</a></td><td><code>trac #16391: use OrthogonalArrayBlockGraph instead of OrthogonalArrayGraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e3c6856da596aa0b05c82c2f3cbcf48dbd3812a">6e3c685</a></td><td><code>trac #16391: reviewer's comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52c2de8586d29cbe302bb9a451589ca5d8eeadd5">52c2de8</a></td><td><code>trac #16391: Removing the holes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0885f7944ac0cb5f5ddb6822544f9059596ba67">d0885f7</a></td><td><code>trac #16391: bugfix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1de59747d1c2c27ffdc586f9e91bc178eb4cc88">c1de597</a></td><td><code>trac #16391: doc clean + remove some list construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41a9a247df5925a7067421a03093b0bc01155671">41a9a24</a></td><td><code>trac #16391: Typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42239ccc8b169e1aaf148da90b638004a09e67c6">42239cc</a></td><td><code>trac #16391: Undoing stuff</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24ac3a8e0424d9b4516517144935b0367a95801e">24ac3a8</a></td><td><code>trac #16391: Broken doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70c98058b2414e3fc873a8825c1db293da0709e3">70c9805</a></td><td><code>trac #16391: Merged with #16460</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0">ee3b035</a></td><td><code>trac #16461: Merged with #16391</code></td></tr></table>




---

archive/issue_comments_212983.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/16461](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16461)** to **[public/16461](https://github.com/sagemath/sagetrac-mirror/tree/public/16461)**",
    "created_at": "2014-06-12T14:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212983",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/vdelecroix/16461](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16461)** to **[public/16461](https://github.com/sagemath/sagetrac-mirror/tree/public/16461)**



---

archive/issue_comments_212984.json:
```json
{
    "body": "Changed dependencies from **#16464** to **#16464, #16391**",
    "created_at": "2014-06-12T14:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212984",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16464** to **#16464, #16391**



---

archive/issue_comments_212985.json:
```json
{
    "body": "Changed commit from **[ee3b035](https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0)** to **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**",
    "created_at": "2014-06-12T17:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ee3b035](https://github.com/sagemath/sagetrac-mirror/commit/ee3b03584f8a60e892734193793dc1c20b6007c0)** to **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**



---

archive/issue_events_235135.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-06-12T17:00:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235135"
}
```



---

archive/issue_events_235136.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-06-12T17:00:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235136"
}
```



---

archive/issue_comments_212986.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20\">0380ead</a></td><td><code>trac #16461: fix documentation</code></td></tr></table>\n",
    "created_at": "2014-06-12T17:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212986",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20">0380ead</a></td><td><code>trac #16461: fix documentation</code></td></tr></table>




---

archive/issue_events_235137.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-12T17:00:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235137"
}
```



---

archive/issue_events_235138.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-12T17:00:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235138"
}
```



---

archive/issue_comments_212987.json:
```json
{
    "body": "Changed branch from **[public/16461](https://github.com/sagemath/sagetrac-mirror/tree/public/16461)** to **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**",
    "created_at": "2014-06-18T14:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16461#issuecomment-212987",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16461](https://github.com/sagemath/sagetrac-mirror/tree/public/16461)** to **[0380ead](https://github.com/sagemath/sagetrac-mirror/commit/0380ead2db09b903f25ef9204ed8b2f1f66cfd20)**



---

archive/issue_events_235139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-18T14:11:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235139"
}
```



---

archive/issue_events_235140.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9e9652db5aa15fc0615ec5a26b461e90debb40a9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-18T14:11:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16461",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16461#event-235140"
}
```
