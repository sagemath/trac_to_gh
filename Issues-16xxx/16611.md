# Issue 16611: Upgrade R to version 3.1

archive/issues_016374.json:
```json
{
    "assignees": [],
    "body": "As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.\n\nUpstream tarball: http://boxen.math.washington.edu/home/vbraun/upstream/r-3.1.0.tar.gz\n\nComponent: **packages: standard**\n\nKeywords: **r-project**\n\nAuthor: **Emmanuel Charpentier**\n\nBranch/Commit: **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**\n\nReviewer: **Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16611_\n\n",
    "closed_at": "2014-07-08T18:52:01Z",
    "created_at": "2014-07-03T17:24:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade R to version 3.1",
    "type": "issue",
    "updated_at": "2014-07-08T18:52:01Z",
    "url": "https://github.com/sagemath/sage/issues/16611",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.

Upstream tarball: http://boxen.math.washington.edu/home/vbraun/upstream/r-3.1.0.tar.gz

Component: **packages: standard**

Keywords: **r-project**

Author: **Emmanuel Charpentier**

Branch/Commit: **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**

Reviewer: **Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/16611_





---

archive/issue_events_235307.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T17:24:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235307"
}
```



---

archive/issue_events_235308.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T17:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235308"
}
```



---

archive/issue_events_235309.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T17:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235309"
}
```



---

archive/issue_events_235310.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T17:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235310"
}
```



---

archive/issue_comments_216407.json:
```json
{
    "body": "Branch: **[u/charpent/upgrade_r_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_version_3_1)**",
    "created_at": "2014-07-03T18:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216407",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Branch: **[u/charpent/upgrade_r_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_version_3_1)**



---

archive/issue_comments_216408.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis first branch passes make and make ptestlong with \"all tests passed\".\n\nNote : This has been done on Debian amd64. Since this package has arm, OS/X and cygwin specific parts, it should be checked on these three platform.",
    "created_at": "2014-07-03T18:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216408",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:2" align="right">comment:2</div>

This first branch passes make and make ptestlong with "all tests passed".

Note : This has been done on Debian amd64. Since this package has arm, OS/X and cygwin specific parts, it should be checked on these three platform.



---

archive/issue_comments_216409.json:
```json
{
    "body": "Commit: **[`fc0994b`](https://github.com/sagemath/sagetrac-mirror/commit/fc0994b6301e972d71f96194915b3ee893f9f9c6)**",
    "created_at": "2014-07-03T18:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216409",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Commit: **[`fc0994b`](https://github.com/sagemath/sagetrac-mirror/commit/fc0994b6301e972d71f96194915b3ee893f9f9c6)**



---

archive/issue_events_235311.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T18:30:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235311"
}
```



---

archive/issue_comments_216410.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi,\n\nI have an error as the tarball is `R-3.1.0.tar.gz` and Sage is looking for `r-3.1.0.tar.gz`. As Unix is case sensitive I do not see how you can get it working on Debian!? Renaming the upstream tarball as `r-3.1.0.tar.gz` works fine for me.\n\nYou introduced trailing whitespaces in the file `src/sage/interfaces/r.py`. Please remove them.\n\nVincent",
    "created_at": "2014-07-03T19:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216410",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi,

I have an error as the tarball is `R-3.1.0.tar.gz` and Sage is looking for `r-3.1.0.tar.gz`. As Unix is case sensitive I do not see how you can get it working on Debian!? Renaming the upstream tarball as `r-3.1.0.tar.gz` works fine for me.

You introduced trailing whitespaces in the file `src/sage/interfaces/r.py`. Please remove them.

Vincent



---

archive/issue_events_235312.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-03T19:16:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235312"
}
```



---

archive/issue_events_235313.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-07-03T19:16:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235313"
}
```



---

archive/issue_comments_216411.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nNot sure why the changes in the doctests.  Shouldn't that command still work, perhaps with a minor tweak?  Not that it really matters so much, but I hope it isn't a symptom of something else.",
    "created_at": "2014-07-03T20:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216411",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Not sure why the changes in the doctests.  Shouldn't that command still work, perhaps with a minor tweak?  Not that it really matters so much, but I hope it isn't a symptom of something else.



---

archive/issue_comments_216412.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79\"><code>fa1a863</code></a></td><td><code>Various fixes of flaws pointed by Vincent Delecroix (thanks !)</code></td></tr></table>\n",
    "created_at": "2014-07-03T20:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216412",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79"><code>fa1a863</code></a></td><td><code>Various fixes of flaws pointed by Vincent Delecroix (thanks !)</code></td></tr></table>




---

archive/issue_comments_216413.json:
```json
{
    "body": "Changed commit from **[`fc0994b`](https://github.com/sagemath/sagetrac-mirror/commit/fc0994b6301e972d71f96194915b3ee893f9f9c6)** to **[`fa1a863`](https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79)**",
    "created_at": "2014-07-03T20:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216413",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fc0994b`](https://github.com/sagemath/sagetrac-mirror/commit/fc0994b6301e972d71f96194915b3ee893f9f9c6)** to **[`fa1a863`](https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79)**



---

archive/issue_comments_216414.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kcrisman](#comment%3A5):\n> Not sure why the changes in the doctests.  Shouldn't that command still work, perhaps with a minor tweak?  Not that it really matters so much, but I hope it isn't a symptom of something else.\n\nThe examples used the R function \"print.anova\", which is no longer available, at least for this example. It's a symptom of changes in R.\n\nBTW : patches suggested by V. Delecroix ==> needs_review.",
    "created_at": "2014-07-03T20:16:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216414",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kcrisman](#comment%3A5):
> Not sure why the changes in the doctests.  Shouldn't that command still work, perhaps with a minor tweak?  Not that it really matters so much, but I hope it isn't a symptom of something else.

The examples used the R function "print.anova", which is no longer available, at least for this example. It's a symptom of changes in R.

BTW : patches suggested by V. Delecroix ==> needs_review.



---

archive/issue_comments_216415.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.\n \n Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)\n+\n+Newer version of the branch ==> needs review\n``````\n",
    "created_at": "2014-07-03T20:16:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216415",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.
 
 Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)
+
+Newer version of the branch ==> needs review
``````




---

archive/issue_events_235314.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T20:16:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235314"
}
```



---

archive/issue_events_235315.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-03T20:16:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235315"
}
```



---

archive/issue_comments_216416.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,3 @@\n \n Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)\n \n-Newer version of the branch ==> needs review\n``````\n",
    "created_at": "2014-07-03T20:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216416",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,3 @@
 
 Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)
 
-Newer version of the branch ==> needs review
``````




---

archive/issue_events_235316.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-06T00:14:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235316"
}
```



---

archive/issue_events_235317.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-06T00:14:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235317"
}
```



---

archive/issue_comments_216417.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nPatches look good. I guess the source tarball is incorrect (capital-R). Please fix.",
    "created_at": "2014-07-06T00:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216417",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

Patches look good. I guess the source tarball is incorrect (capital-R). Please fix.



---

archive/issue_comments_216418.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94\"><code>d591ad2</code></a></td><td><code>fixed R's spkg-src</code></td></tr></table>\n",
    "created_at": "2014-07-06T09:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216418",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94"><code>d591ad2</code></a></td><td><code>fixed R's spkg-src</code></td></tr></table>




---

archive/issue_comments_216419.json:
```json
{
    "body": "Changed commit from **[`fa1a863`](https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79)** to **[`d591ad2`](https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94)**",
    "created_at": "2014-07-06T09:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216419",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa1a863`](https://github.com/sagemath/sagetrac-mirror/commit/fa1a863e0b959dff5a05f3e109da2bcec2932c79)** to **[`d591ad2`](https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94)**



---

archive/issue_events_235318.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-06T09:43:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235318"
}
```



---

archive/issue_events_235319.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-06T09:43:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235319"
}
```



---

archive/issue_comments_216420.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis should do.\n\nUpstream tarball is indeed capital-R... I monkeyed my way in other spkg-src files to create something that *should* do the right thing, but was unable to find a specification of what spkg-src should do and not do, ans where in the tree it should work...\n\nStatus ==> needs_review.",
    "created_at": "2014-07-06T09:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216420",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:11" align="right">comment:11</div>

This should do.

Upstream tarball is indeed capital-R... I monkeyed my way in other spkg-src files to create something that *should* do the right thing, but was unable to find a specification of what spkg-src should do and not do, ans where in the tree it should work...

Status ==> needs_review.



---

archive/issue_comments_216421.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe spkg-src file doesn't have any strict rules. Let me ask again, is it ok to have the tarball filename with a capital R? The tarball in the description has a capital R. If thats wrong then you need to provide a tarball with the correct name.",
    "created_at": "2014-07-06T17:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216421",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

The spkg-src file doesn't have any strict rules. Let me ask again, is it ok to have the tarball filename with a capital R? The tarball in the description has a capital R. If thats wrong then you need to provide a tarball with the correct name.



---

archive/issue_events_235320.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-06T17:54:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235320"
}
```



---

archive/issue_events_235321.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-06T17:54:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235321"
}
```



---

archive/issue_comments_216422.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAs far as I know, the name of the tarball  has no relevance as far as R compilation/setting up is concerned. in other words, R compilation takes place in a tree, whose name in the file system is irrelevant.\n\nMy incertitude has been with *Sage's* conventions : the tarballs present in $SAGE_ROOT are mostly .bz2, and it seems that their name *must* be lowercase-only. At least, that's what implies [http://www.sagemath.org/doc/developer/packaging.html](http://www.sagemath.org/doc/developer/packaging.html). The submitted spkg-src implements what reading other spkg-src files in the current Sage distribution : if necessary, download the upstream tarball, repackage t as .tar.bz2 and name the resultant tarball in lowercase-only.\n\nIs that clearer ?",
    "created_at": "2014-07-06T18:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216422",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:14" align="right">comment:14</div>

As far as I know, the name of the tarball  has no relevance as far as R compilation/setting up is concerned. in other words, R compilation takes place in a tree, whose name in the file system is irrelevant.

My incertitude has been with *Sage's* conventions : the tarballs present in $SAGE_ROOT are mostly .bz2, and it seems that their name *must* be lowercase-only. At least, that's what implies [http://www.sagemath.org/doc/developer/packaging.html](http://www.sagemath.org/doc/developer/packaging.html). The submitted spkg-src implements what reading other spkg-src files in the current Sage distribution : if necessary, download the upstream tarball, repackage t as .tar.bz2 and name the resultant tarball in lowercase-only.

Is that clearer ?



---

archive/issue_events_235322.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-06T18:22:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235322"
}
```



---

archive/issue_events_235323.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-06T18:22:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235323"
}
```



---

archive/issue_comments_216423.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2014-07-07T00:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216423",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_216424.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere is no `spkg-src` in the branch. Its a way of documenting the steps to create a new tarball, and is never run automatically.\n\nIn any case, that shouldn't be needed here. Source tarballs can be `.tar.gz` and `.tar.bz2`. Bzip2 is better compressed but its better to stay with upstream if upstream only offers a `.tar.gz`. Of course if they have any other scheme then it needs repacking.",
    "created_at": "2014-07-07T00:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216424",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

There is no `spkg-src` in the branch. Its a way of documenting the steps to create a new tarball, and is never run automatically.

In any case, that shouldn't be needed here. Source tarballs can be `.tar.gz` and `.tar.bz2`. Bzip2 is better compressed but its better to stay with upstream if upstream only offers a `.tar.gz`. Of course if they have any other scheme then it needs repacking.



---

archive/issue_comments_216425.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe tarball must match whats in `checksums.ini` including case and bz2 vs gz extension. Current branch doesn't work.",
    "created_at": "2014-07-07T00:22:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216425",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

The tarball must match whats in `checksums.ini` including case and bz2 vs gz extension. Current branch doesn't work.



---

archive/issue_events_235324.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-07T00:22:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235324"
}
```



---

archive/issue_events_235325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-07T00:22:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235325"
}
```



---

archive/issue_comments_216426.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI.e. if you put the R tarball into your upstream/ folder and run `sage -f r` then it needs to work. On a case-sensitive filesystem.",
    "created_at": "2014-07-07T00:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216426",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

I.e. if you put the R tarball into your upstream/ folder and run `sage -f r` then it needs to work. On a case-sensitive filesystem.



---

archive/issue_comments_216427.json:
```json
{
    "body": "Changed commit from **[`d591ad2`](https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94)** to **[`91cafd6`](https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4)**",
    "created_at": "2014-07-07T04:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216427",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d591ad2`](https://github.com/sagemath/sagetrac-mirror/commit/d591ad2728fc5bd0cdc187506f4de6999a5f2d94)** to **[`91cafd6`](https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4)**



---

archive/issue_comments_216428.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4\"><code>91cafd6</code></a></td><td><code>Re-(re-)fixed checksumss.ini and spkg-src</code></td></tr></table>\n",
    "created_at": "2014-07-07T04:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216428",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4"><code>91cafd6</code></a></td><td><code>Re-(re-)fixed checksumss.ini and spkg-src</code></td></tr></table>




---

archive/issue_events_235326.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-07T04:36:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235326"
}
```



---

archive/issue_events_235327.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2014-07-07T04:36:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235327"
}
```



---

archive/issue_comments_216429.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n- re-switched to .tar.gz tarball\n- re-modified spkg-src (and addad it to git (ahem...))\n- re-checked that ./sage -f r in $SAGE_ROOT works.",
    "created_at": "2014-07-07T04:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216429",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:19" align="right">comment:19</div>

- re-switched to .tar.gz tarball
- re-modified spkg-src (and addad it to git (ahem...))
- re-checked that ./sage -f r in $SAGE_ROOT works.



---

archive/issue_comments_216430.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAre you on OSX? Not case sensitive files system?\n\nThe tarball case still does not match the checksums.ini case. Does not work.",
    "created_at": "2014-07-07T04:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216430",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

Are you on OSX? Not case sensitive files system?

The tarball case still does not match the checksums.ini case. Does not work.



---

archive/issue_comments_216431.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@vbraun](#comment%3A20):\n> Are you on OSX? Not case sensitive files system?\n\nI'm on Debian (testing), on an ext4 filesystem.\n\n> The tarball case still does not match the checksums.ini case. Does not work.\n\nI do not understand what sage-fix-spkg-checksums does : look at what I get :\n\ncharpent@asus16-ec:/usr/local/sage-6.3.beta5$ cat build/pkgs/r/checksums.ini \ntarball=r-VERSION.tar.gz\nsha1=a9d13932c739cc12667c6a17fabd9361624a1708\nmd5=a1ee52446bee81820409661e6d114ab1\ncksum=3701745191\n\nThe \"tarball\" name looks suspicious. Where did I goof ?\n\n**Edit :** BTW, when I re-run ./sage -sh sage-fix-spkg-checksums, I get the same result, and git does not see it as modified.",
    "created_at": "2014-07-07T05:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216431",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@vbraun](#comment%3A20):
> Are you on OSX? Not case sensitive files system?

I'm on Debian (testing), on an ext4 filesystem.

> The tarball case still does not match the checksums.ini case. Does not work.

I do not understand what sage-fix-spkg-checksums does : look at what I get :

charpent@asus16-ec:/usr/local/sage-6.3.beta5$ cat build/pkgs/r/checksums.ini 
tarball=r-VERSION.tar.gz
sha1=a9d13932c739cc12667c6a17fabd9361624a1708
md5=a1ee52446bee81820409661e6d114ab1
cksum=3701745191

The "tarball" name looks suspicious. Where did I goof ?

**Edit :** BTW, when I re-run ./sage -sh sage-fix-spkg-checksums, I get the same result, and git does not see it as modified.



---

archive/issue_comments_216432.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nsage-fix-spkg-checksum rewrites the checksum only, the tarball name is human input.\n\nEither lower-case the tarball (as with the current version) or change checksum.ini (not sure if the latter works, but should).\n\nDelete all wrong-case r-3.1.0 tarballs (except the one you really want) from upstream/ before testing..",
    "created_at": "2014-07-07T05:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216432",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

sage-fix-spkg-checksum rewrites the checksum only, the tarball name is human input.

Either lower-case the tarball (as with the current version) or change checksum.ini (not sure if the latter works, but should).

Delete all wrong-case r-3.1.0 tarballs (except the one you really want) from upstream/ before testing..



---

archive/issue_comments_216433.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@vbraun](#comment%3A22):\n> sage-fix-spkg-checksum rewrites the checksum only, the tarball name is human input.\n> \n> Either lower-case the tarball (as with the current version) or change checksum.ini (not sure if the latter works, but should).\n\nI hand-edited it, the re-updated checksums : forced reinstallation is under way (seems to work).\n\n> Delete all wrong-case r-3.1.0 tarballs (except the one you really want) from upstream/ before testing..\n\nI have none.\n\nA commit should follow soon (a couple of minutes...).\n\n**EDIT** : re-generating the checksum **wiped out my manual edit**. I'll re-edit and re-force installation (without re-generating checksum...)",
    "created_at": "2014-07-07T05:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216433",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@vbraun](#comment%3A22):
> sage-fix-spkg-checksum rewrites the checksum only, the tarball name is human input.
> 
> Either lower-case the tarball (as with the current version) or change checksum.ini (not sure if the latter works, but should).

I hand-edited it, the re-updated checksums : forced reinstallation is under way (seems to work).

> Delete all wrong-case r-3.1.0 tarballs (except the one you really want) from upstream/ before testing..

I have none.

A commit should follow soon (a couple of minutes...).

**EDIT** : re-generating the checksum **wiped out my manual edit**. I'll re-edit and re-force installation (without re-generating checksum...)



---

archive/issue_comments_216434.json:
```json
{
    "body": "Changed commit from **[`91cafd6`](https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4)** to **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**",
    "created_at": "2014-07-07T05:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216434",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`91cafd6`](https://github.com/sagemath/sagetrac-mirror/commit/91cafd64758db7c69153d41885757be8e4ff9da4)** to **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**



---

archive/issue_comments_216435.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850\"><code>0f89d3e</code></a></td><td><code>Hand-edited checksum.ini *after* checksum generation (+ thinko in spkg-src).</code></td></tr></table>\n",
    "created_at": "2014-07-07T05:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216435",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850"><code>0f89d3e</code></a></td><td><code>Hand-edited checksum.ini *after* checksum generation (+ thinko in spkg-src).</code></td></tr></table>




---

archive/issue_comments_216436.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIt seems that, at least for *this* package, sage-fix-pkg-checksums creates the wrong \"tarball=\" line in checksum.ini\n\nThe 0f89d3e... commit has a hand-edited checksum.ini.\n\nShould we open a ticket against sage-fix-pkg-checksums ?",
    "created_at": "2014-07-07T06:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216436",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:25" align="right">comment:25</div>

It seems that, at least for *this* package, sage-fix-pkg-checksums creates the wrong "tarball=" line in checksum.ini

The 0f89d3e... commit has a hand-edited checksum.ini.

Should we open a ticket against sage-fix-pkg-checksums ?



---

archive/issue_comments_216437.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIMHO the easiest solution is to lower-case the tarball. Which would then also match the name of the package. There are various annoyances with how we handle tarball names.",
    "created_at": "2014-07-07T12:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216437",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

IMHO the easiest solution is to lower-case the tarball. Which would then also match the name of the package. There are various annoyances with how we handle tarball names.



---

archive/issue_comments_216438.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@vbraun](#comment%3A26):\n> IMHO the easiest solution is to lower-case the tarball. Which would then also match the name of the package. There are various annoyances with how we handle tarball names.\n\nI agree. And that's the current situation of the latest branch.\n\nNevertheless, I'd like to understand why sage-fix-pkg-checksum (mis)behaves as it does. I'll have a look (but nor very soon, I'm afraid).\n\n**EDIT** : sage-fix-pkg-checksum **HAS** a nice bug.\nI tried :\n\ncharpent@asus16-ec:/usr/local/sage-6.3.beta5$ for i in $(find build/pkgs/ -name checksums.ini) ; do grep tarball $i ; done\n\nand got (modulo newlines) :\n\ntarball=zlib-VERSION.tar.bz2\ntarball=zeromq-VERSION.tar.gz\ntarball=libpng-VERSION.tar.gz\ntarball=database_stein_watkins-VERSION.tar.bz2\ntarball=pexpect-VERSION.tar.bz2\ntarball=gf2x-VERSION.tar.bz2\ntarball=gd-VERSION.tar.bz2\ntarball=mpmath-VERSION.tar.gz\ntarball=gap_packages-VERSION.tar.bz2\ntarball=git_trac-VERSION.tar.bz2\ntarball=pyparsing-VERSION.tar.gz\ntarball=libm4ri-VERSION.tar.bz2\ntarball=flint-VERSION.tar.gz\ntarball=sage_mode-VERSION.tar.bz2\ntarball=topcom-VERSION.tar.bz2\ntarball=eclib-VERSION.tar.bz2\ntarball=libm4rie-VERSION.tar.bz2\ntarball=libfplll-VERSION.tar.bz2\ntarball=Cython-VERSION.tar.gz\ntarball=cvxopt-VERSION.tar.bz2\ntarball=cryptominisat-VERSION.tar.gz\ntarball=dot2tex-VERSION.tar.bz2\ntarball=mercurial-VERSION.tar.bz2\ntarball=cddlib-VERSION.tar.bz2\ntarball=sagetex-VERSION.tar.bz2\ntarball=polybori-VERSION.tar.bz2\ntarball=elliptic_curves-VERSION.tar.bz2\ntarball=gsl-VERSION.tar.bz2\ntarball=ratpoints-VERSION.tar.bz2\ntarball=pkgconfig-VERSION.tar.gz\ntarball=gap-VERSION.tar.bz2\ntarball=database_stein_watkins_mini-VERSION.tar.bz2\ntarball=libgap-VERSION.tar.gz\ntarball=atlas-VERSION.tar.bz2\ntarball=symmetrica-VERSION.tar.bz2\ntarball=networkx-VERSION.tar.gz\ntarball=numpy-VERSION.tar.gz\ntarball=ppl-VERSION.tar.bz2\ntarball=Pillow-VERSION.tar.gz\ntarball=sympow-VERSION.tar.bz2\ntarball=termcap-VERSION.tar.bz2\ntarball=mpir-VERSION.tar.bz2\ntarball=jinja2-VERSION.tar.bz2\ntarball=git-VERSION.tar.bz2\ntarball=sqlalchemy-VERSION.tar.bz2\ntarball=pkgconf-VERSION.tar.bz2\ntarball=rpy2-VERSION.tar.gz\ntarball=mpfr-VERSION.tar.bz2\ntarball=ipython-VERSION.tar.gz\ntarball=boost_cropped-VERSION.tar.bz2\ntarball=linbox-VERSION.tar.bz2\ntarball=d3js-VERSION.tar.gz\ntarball=autotools-VERSION.tar.bz2\ntarball=jmol-VERSION.tar.bz2\ntarball=database_gap-VERSION.tar.bz2\ntarball=freetype-VERSION.tar.bz2\ntarball=conway_polynomials-VERSION.tar.bz2\ntarball=scipy-VERSION.tar.gz\ntarball=r-3.1.0.tar.gz\ntarball=configure-VERSION.tar.gz\ntarball=gmp-VERSION.tar.bz2\ntarball=libogg-VERSION.tar.gz\ntarball=cephes-VERSION.tar.bz2\ntarball=readline-VERSION.tar.bz2\ntarball=singular-VERSION.tar.bz2\ntarball=glpk-VERSION.tar.bz2\ntarball=gdmodule-VERSION.tar.bz2\ntarball=sqlite-VERSION.tar.bz2\ntarball=sagenb-VERSION.tar\ntarball=rubiks-VERSION.tar.bz2\ntarball=ecm-VERSION.tar.bz2\ntarball=pyzmq-VERSION.tar.gz\ntarball=polytopes_db-VERSION.tar.bz2\ntarball=tachyon-VERSION.tar.bz2\ntarball=pygments-VERSION.tar.bz2\ntarball=pari_galdata-VERSION.tar.bz2\ntarball=pari_seadata_small-VERSION.tar.bz2\ntarball=libtheora-VERSION.tar.bz2\ntarball=database_cremona_ellcurve-VERSION.tar.bz2\ntarball=matplotlib-VERSION.tar.gz\ntarball=zn_poly-VERSION.tar.bz2\ntarball=gfan-VERSION.tar.bz2\ntarball=bzip2-VERSION.tar.gz\ntarball=docutils-VERSION.tar.bz2\ntarball=pari-VERSION.tar.bz2\ntarball=patch-VERSION.tar.bz2\ntarball=iml-VERSION.tar.bz2\ntarball=scons-VERSION.tar.bz2\ntarball=maxima-VERSION.tar.bz2\ntarball=cliquer-VERSION.tar.bz2\ntarball=ecl-VERSION.tar.bz2\ntarball=boehm_gc-VERSION.tar.bz2\ntarball=mcqd-VERSION.tar.bz2\ntarball=ncurses-VERSION.tar.bz2\ntarball=fflas_ffpack-VERSION.tar.bz2\ntarball=database_symbolic_data-VERSION.tar.bz2\ntarball=graphs-VERSION.tar.bz2\ntarball=flintqs-VERSION.tar.bz2\ntarball=iconv-VERSION.tar.bz2\ntarball=lrcalc-VERSION.tar.gz\ntarball=ntl-VERSION.tar.bz2\ntarball=genus2reduction-VERSION.tar.bz2\ntarball=gcc-VERSION.tar.bz2\ntarball=palp-VERSION.tar.bz2\ntarball=tornado-VERSION.tar.gz\ntarball=pycrypto-VERSION.tar.gz\ntarball=lcalc-VERSION.tar.bz2\ntarball=mpc-VERSION.tar.gz\ntarball=sphinx-VERSION.tar.bz2\ntarball=mpfi-VERSION.tar.bz2\ntarball=dateutil-VERSION.tar.gz\ntarball=openssl-VERSION.tar.gz\ntarball=setuptools-VERSION.tar.gz\ntarball=python-VERSION.tar.gz\ntarball=sympy-VERSION.tar.gz\ntarball=givaro-VERSION.tar.bz2\ntarball=pynac-VERSION.tar.bz2\ntarball=six-VERSION.tar.gz\n\nYikes ! All my checksums.ini have been munched !\n\nI have to have a look at the recent history of sage-fix-pkg-checksums to know what was the culprit. But I do not know how to use git to find it. ISTR to have read to use \"git\" bissect\" for this. But git's online help is not very illuminating, to say the least...\n\nOr should I file a new ticket ? I *think* it is easy to fix.",
    "created_at": "2014-07-07T18:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216438",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@vbraun](#comment%3A26):
> IMHO the easiest solution is to lower-case the tarball. Which would then also match the name of the package. There are various annoyances with how we handle tarball names.

I agree. And that's the current situation of the latest branch.

Nevertheless, I'd like to understand why sage-fix-pkg-checksum (mis)behaves as it does. I'll have a look (but nor very soon, I'm afraid).

**EDIT** : sage-fix-pkg-checksum **HAS** a nice bug.
I tried :

charpent@asus16-ec:/usr/local/sage-6.3.beta5$ for i in $(find build/pkgs/ -name checksums.ini) ; do grep tarball $i ; done

and got (modulo newlines) :

tarball=zlib-VERSION.tar.bz2
tarball=zeromq-VERSION.tar.gz
tarball=libpng-VERSION.tar.gz
tarball=database_stein_watkins-VERSION.tar.bz2
tarball=pexpect-VERSION.tar.bz2
tarball=gf2x-VERSION.tar.bz2
tarball=gd-VERSION.tar.bz2
tarball=mpmath-VERSION.tar.gz
tarball=gap_packages-VERSION.tar.bz2
tarball=git_trac-VERSION.tar.bz2
tarball=pyparsing-VERSION.tar.gz
tarball=libm4ri-VERSION.tar.bz2
tarball=flint-VERSION.tar.gz
tarball=sage_mode-VERSION.tar.bz2
tarball=topcom-VERSION.tar.bz2
tarball=eclib-VERSION.tar.bz2
tarball=libm4rie-VERSION.tar.bz2
tarball=libfplll-VERSION.tar.bz2
tarball=Cython-VERSION.tar.gz
tarball=cvxopt-VERSION.tar.bz2
tarball=cryptominisat-VERSION.tar.gz
tarball=dot2tex-VERSION.tar.bz2
tarball=mercurial-VERSION.tar.bz2
tarball=cddlib-VERSION.tar.bz2
tarball=sagetex-VERSION.tar.bz2
tarball=polybori-VERSION.tar.bz2
tarball=elliptic_curves-VERSION.tar.bz2
tarball=gsl-VERSION.tar.bz2
tarball=ratpoints-VERSION.tar.bz2
tarball=pkgconfig-VERSION.tar.gz
tarball=gap-VERSION.tar.bz2
tarball=database_stein_watkins_mini-VERSION.tar.bz2
tarball=libgap-VERSION.tar.gz
tarball=atlas-VERSION.tar.bz2
tarball=symmetrica-VERSION.tar.bz2
tarball=networkx-VERSION.tar.gz
tarball=numpy-VERSION.tar.gz
tarball=ppl-VERSION.tar.bz2
tarball=Pillow-VERSION.tar.gz
tarball=sympow-VERSION.tar.bz2
tarball=termcap-VERSION.tar.bz2
tarball=mpir-VERSION.tar.bz2
tarball=jinja2-VERSION.tar.bz2
tarball=git-VERSION.tar.bz2
tarball=sqlalchemy-VERSION.tar.bz2
tarball=pkgconf-VERSION.tar.bz2
tarball=rpy2-VERSION.tar.gz
tarball=mpfr-VERSION.tar.bz2
tarball=ipython-VERSION.tar.gz
tarball=boost_cropped-VERSION.tar.bz2
tarball=linbox-VERSION.tar.bz2
tarball=d3js-VERSION.tar.gz
tarball=autotools-VERSION.tar.bz2
tarball=jmol-VERSION.tar.bz2
tarball=database_gap-VERSION.tar.bz2
tarball=freetype-VERSION.tar.bz2
tarball=conway_polynomials-VERSION.tar.bz2
tarball=scipy-VERSION.tar.gz
tarball=r-3.1.0.tar.gz
tarball=configure-VERSION.tar.gz
tarball=gmp-VERSION.tar.bz2
tarball=libogg-VERSION.tar.gz
tarball=cephes-VERSION.tar.bz2
tarball=readline-VERSION.tar.bz2
tarball=singular-VERSION.tar.bz2
tarball=glpk-VERSION.tar.bz2
tarball=gdmodule-VERSION.tar.bz2
tarball=sqlite-VERSION.tar.bz2
tarball=sagenb-VERSION.tar
tarball=rubiks-VERSION.tar.bz2
tarball=ecm-VERSION.tar.bz2
tarball=pyzmq-VERSION.tar.gz
tarball=polytopes_db-VERSION.tar.bz2
tarball=tachyon-VERSION.tar.bz2
tarball=pygments-VERSION.tar.bz2
tarball=pari_galdata-VERSION.tar.bz2
tarball=pari_seadata_small-VERSION.tar.bz2
tarball=libtheora-VERSION.tar.bz2
tarball=database_cremona_ellcurve-VERSION.tar.bz2
tarball=matplotlib-VERSION.tar.gz
tarball=zn_poly-VERSION.tar.bz2
tarball=gfan-VERSION.tar.bz2
tarball=bzip2-VERSION.tar.gz
tarball=docutils-VERSION.tar.bz2
tarball=pari-VERSION.tar.bz2
tarball=patch-VERSION.tar.bz2
tarball=iml-VERSION.tar.bz2
tarball=scons-VERSION.tar.bz2
tarball=maxima-VERSION.tar.bz2
tarball=cliquer-VERSION.tar.bz2
tarball=ecl-VERSION.tar.bz2
tarball=boehm_gc-VERSION.tar.bz2
tarball=mcqd-VERSION.tar.bz2
tarball=ncurses-VERSION.tar.bz2
tarball=fflas_ffpack-VERSION.tar.bz2
tarball=database_symbolic_data-VERSION.tar.bz2
tarball=graphs-VERSION.tar.bz2
tarball=flintqs-VERSION.tar.bz2
tarball=iconv-VERSION.tar.bz2
tarball=lrcalc-VERSION.tar.gz
tarball=ntl-VERSION.tar.bz2
tarball=genus2reduction-VERSION.tar.bz2
tarball=gcc-VERSION.tar.bz2
tarball=palp-VERSION.tar.bz2
tarball=tornado-VERSION.tar.gz
tarball=pycrypto-VERSION.tar.gz
tarball=lcalc-VERSION.tar.bz2
tarball=mpc-VERSION.tar.gz
tarball=sphinx-VERSION.tar.bz2
tarball=mpfi-VERSION.tar.bz2
tarball=dateutil-VERSION.tar.gz
tarball=openssl-VERSION.tar.gz
tarball=setuptools-VERSION.tar.gz
tarball=python-VERSION.tar.gz
tarball=sympy-VERSION.tar.gz
tarball=givaro-VERSION.tar.bz2
tarball=pynac-VERSION.tar.bz2
tarball=six-VERSION.tar.gz

Yikes ! All my checksums.ini have been munched !

I have to have a look at the recent history of sage-fix-pkg-checksums to know what was the culprit. But I do not know how to use git to find it. ISTR to have read to use "git" bissect" for this. But git's online help is not very illuminating, to say the least...

Or should I file a new ticket ? I *think* it is easy to fix.



---

archive/issue_comments_216439.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nIMHO our strategic goal ought to get rid of the current tarball handling, beautifying sage-fix-pkg-checksums is pretty low on my list of priorities.\n\nThis ticket needs a lower-case r tarball.",
    "created_at": "2014-07-08T03:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216439",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

IMHO our strategic goal ought to get rid of the current tarball handling, beautifying sage-fix-pkg-checksums is pretty low on my list of priorities.

This ticket needs a lower-case r tarball.



---

archive/issue_comments_216440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.\n \n-Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)\n+Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz), which **has** to be renamed r-3.1.0.tar.gz in $SAGE_ROOT/upstream.\n \n``````\n",
    "created_at": "2014-07-08T06:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216440",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.
 
-Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz)
+Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz), which **has** to be renamed r-3.1.0.tar.gz in $SAGE_ROOT/upstream.
 
``````




---

archive/issue_comments_216441.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.\n \n-Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz), which **has** to be renamed r-3.1.0.tar.gz in $SAGE_ROOT/upstream.\n-\n+Upstream tarball: http://boxen.math.washington.edu/home/vbraun/upstream/r-3.1.0.tar.gz\n``````\n",
    "created_at": "2014-07-08T13:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216441",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
 As said before, R users need to use an up-to-date version of R if they want to be able to get support from R-help. Furthermore, some packages are no longer usable under R<3.1. Hence this request.
 
-Link to the upstream source : [http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz](http://cran.r-project.org/src/base/R-3/R-3.1.0.tar.gz), which **has** to be renamed r-3.1.0.tar.gz in $SAGE_ROOT/upstream.
-
+Upstream tarball: http://boxen.math.washington.edu/home/vbraun/upstream/r-3.1.0.tar.gz
``````




---

archive/issue_comments_216442.json:
```json
{
    "body": "Changed branch from **[u/charpent/upgrade_r_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_version_3_1)** to **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**",
    "created_at": "2014-07-08T18:52:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16611#issuecomment-216442",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/charpent/upgrade_r_to_version_3_1](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_r_to_version_3_1)** to **[`0f89d3e`](https://github.com/sagemath/sagetrac-mirror/commit/0f89d3e6c3583bd75df4ca70aa51ce9914af3850)**



---

archive/issue_events_235328.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-08T18:52:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235328"
}
```



---

archive/issue_events_235329.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c57fbe5e5c215bb5238ed39875983443ce5b23e8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-08T18:52:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16611",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16611#event-235329"
}
```
