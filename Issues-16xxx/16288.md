# Issue 16288: Optimize sage.sets.cartesian_product.CartesianProduct._cartesian_product_of_elements

archive/issues_016051.json:
```json
{
    "assignees": [],
    "body": "This fixed `_cartesian_product_of_elements` to bypass `_element_constructor` and other checks, and documented it; this is particularly relevant after #16269 which introduces more checks and coercion in `_element_constructor`. Timing difference:\n\n```\nsage: S1 = Sets().example()\nsage: S2 = InfiniteEnumeratedSets().example()\nsage: C = cartesian_product([S2, S1, S2])\nsage: l = tuple([S2.an_element(), S1.an_element(), S2.an_element()])\n```\nWithout the optimization:\n\n```\nsage: %timeit C._cartesian_product_of_elements(l)\n10000 loops, best of 3: 22 \u00b5s per loop\n```\nWith the optimization:\n\n```\nsage: %timeit C._cartesian_product_of_elements(lt)\n1000000 loops, best of 3: 922 ns per loop\n```\n\n\nDepends on #16269\n\nCC:  @sagetrac-sage-combinat @nathanncohen\n\nBranch/Commit: **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Nicolas M. Thi\u00e9ry**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16288_\n\n",
    "closed_at": "2014-05-06T18:03:41Z",
    "created_at": "2014-05-04T21:20:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Optimize sage.sets.cartesian_product.CartesianProduct._cartesian_product_of_elements",
    "type": "issue",
    "updated_at": "2014-05-06T18:03:41Z",
    "url": "https://github.com/sagemath/sage/issues/16288",
    "user": "https://github.com/nthiery"
}
```
This fixed `_cartesian_product_of_elements` to bypass `_element_constructor` and other checks, and documented it; this is particularly relevant after #16269 which introduces more checks and coercion in `_element_constructor`. Timing difference:

```
sage: S1 = Sets().example()
sage: S2 = InfiniteEnumeratedSets().example()
sage: C = cartesian_product([S2, S1, S2])
sage: l = tuple([S2.an_element(), S1.an_element(), S2.an_element()])
```
Without the optimization:

```
sage: %timeit C._cartesian_product_of_elements(l)
10000 loops, best of 3: 22 µs per loop
```
With the optimization:

```
sage: %timeit C._cartesian_product_of_elements(lt)
1000000 loops, best of 3: 922 ns per loop
```


Depends on #16269

CC:  @sagetrac-sage-combinat @nathanncohen

Branch/Commit: **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**

Reviewer: **Nathann Cohen**

Author: **Nicolas M. Thiéry**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/16288_





---

archive/issue_events_230583.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-05-04T21:20:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230583"
}
```



---

archive/issue_events_230584.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-05-04T21:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230584"
}
```



---

archive/issue_events_230585.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-05-04T21:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230585"
}
```



---

archive/issue_events_230586.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-05-04T21:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230586"
}
```



---

archive/issue_comments_209042.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/370abb8bfc058cb4a3017aa31b880bcdbefc762f\"><code>370abb8</code></a></td><td><code>trac #16269: Fixing doctests and implementing additional functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa07ba19487569ef26772c51092c4d5342faff7c\"><code>aa07ba1</code></a></td><td><code>trac #16269: Working around \"officially not a bug\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d22e245049e26dd10522d3514603868701a286fb\"><code>d22e245</code></a></td><td><code>trac #16269: missing __iter__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f262faa2796f58bd05fdc5d7c46d3cb84d59eb62\"><code>f262faa</code></a></td><td><code>trac #16269: Merged with 6.2.rc1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/338cc5b99fe50f435d2f6600eea46cffa372305a\"><code>338cc5b</code></a></td><td><code>trac #16269: Reviewer's remarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ac32c2d6854519a96eb1ce261240a0ee8537cb3\"><code>8ac32c2</code></a></td><td><code>#16280: Fix call for FiniteEnumeratedSet's of plain Python objects</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e274542d24211d57e9f6d99562c56385235721a\"><code>4e27454</code></a></td><td><code>#16280: Trivial doctest fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f67d82e378c4337dcf8cde49d2ca7d6e5b774086\"><code>f67d82e</code></a></td><td><code>trac #16269: Merged with #16280</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a54b68c242cc6541108b709170c35b3a79515b8\"><code>0a54b68</code></a></td><td><code>Trac 16269: little improvements + line folding in the doctest output</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2\"><code>b5ad803</code></a></td><td><code>Trac 16269 (or follow up): optimize CartesianProduct._cartesian_product_of_elements</code></td></tr></table>\n",
    "created_at": "2014-05-04T21:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209042",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:1" align="right">comment:1</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/370abb8bfc058cb4a3017aa31b880bcdbefc762f"><code>370abb8</code></a></td><td><code>trac #16269: Fixing doctests and implementing additional functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa07ba19487569ef26772c51092c4d5342faff7c"><code>aa07ba1</code></a></td><td><code>trac #16269: Working around "officially not a bug"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d22e245049e26dd10522d3514603868701a286fb"><code>d22e245</code></a></td><td><code>trac #16269: missing __iter__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f262faa2796f58bd05fdc5d7c46d3cb84d59eb62"><code>f262faa</code></a></td><td><code>trac #16269: Merged with 6.2.rc1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/338cc5b99fe50f435d2f6600eea46cffa372305a"><code>338cc5b</code></a></td><td><code>trac #16269: Reviewer's remarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ac32c2d6854519a96eb1ce261240a0ee8537cb3"><code>8ac32c2</code></a></td><td><code>#16280: Fix call for FiniteEnumeratedSet's of plain Python objects</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e274542d24211d57e9f6d99562c56385235721a"><code>4e27454</code></a></td><td><code>#16280: Trivial doctest fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f67d82e378c4337dcf8cde49d2ca7d6e5b774086"><code>f67d82e</code></a></td><td><code>trac #16269: Merged with #16280</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a54b68c242cc6541108b709170c35b3a79515b8"><code>0a54b68</code></a></td><td><code>Trac 16269: little improvements + line folding in the doctest output</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2"><code>b5ad803</code></a></td><td><code>Trac 16269 (or follow up): optimize CartesianProduct._cartesian_product_of_elements</code></td></tr></table>




---

archive/issue_events_230587.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-05-04T21:21:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230587"
}
```



---

archive/issue_comments_209043.json:
```json
{
    "body": "Branch: **[u/nthiery/16269-optimized](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16269-optimized)**",
    "created_at": "2014-05-04T21:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209043",
    "user": "https://github.com/nthiery"
}
```

Branch: **[u/nthiery/16269-optimized](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16269-optimized)**



---

archive/issue_comments_209044.json:
```json
{
    "body": "Commit: **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)**",
    "created_at": "2014-05-04T21:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209044",
    "user": "https://github.com/nthiery"
}
```

Commit: **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)**



---

archive/issue_comments_209045.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor the record: all long tests passed.",
    "created_at": "2014-05-04T21:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209045",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:2" align="right">comment:2</div>

For the record: all long tests passed.



---

archive/issue_comments_209046.json:
```json
{
    "body": "Changed commit from **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)** to **[`c9a7e67`](https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66)**",
    "created_at": "2014-05-04T23:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)** to **[`c9a7e67`](https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66)**



---

archive/issue_comments_209047.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66\"><code>c9a7e67</code></a></td><td><code>#16289: Fix ZZ.cartesian_product(...)</code></td></tr></table>\n",
    "created_at": "2014-05-04T23:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209047",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66"><code>c9a7e67</code></a></td><td><code>#16289: Fix ZZ.cartesian_product(...)</code></td></tr></table>




---

archive/issue_comments_209048.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe top commit of the branch here is \"#16289: Fix ZZ.cartesian_product(...)\", and this ticket's number never appears in the branch's commits `O_o`\n\nNathann",
    "created_at": "2014-05-05T07:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209048",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

The top commit of the branch here is "#16289: Fix ZZ.cartesian_product(...)", and this ticket's number never appears in the branch's commits `O_o`

Nathann



---

archive/issue_comments_209049.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n(by the way we are on rc2 now)",
    "created_at": "2014-05-05T07:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209049",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

(by the way we are on rc2 now)



---

archive/issue_comments_209050.json:
```json
{
    "body": "Changed commit from **[`c9a7e67`](https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66)** to none",
    "created_at": "2014-05-05T09:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209050",
    "user": "https://github.com/nthiery"
}
```

Changed commit from **[`c9a7e67`](https://github.com/sagemath/sagetrac-mirror/commit/c9a7e6728d1689b828edb5b367d69a89a9a0cf66)** to none



---

archive/issue_comments_209051.json:
```json
{
    "body": "Changed branch from **[u/nthiery/16269-optimized](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16269-optimized)** to none",
    "created_at": "2014-05-05T09:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209051",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/nthiery/16269-optimized](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16269-optimized)** to none



---

archive/issue_comments_209052.json:
```json
{
    "body": "Branch: **[u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)**",
    "created_at": "2014-05-05T09:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209052",
    "user": "https://github.com/nthiery"
}
```

Branch: **[u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)**



---

archive/issue_comments_209053.json:
```json
{
    "body": "Changed branch from **[u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)** to **[u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)**",
    "created_at": "2014-05-05T09:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209053",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)** to **[u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)**



---

archive/issue_comments_209054.json:
```json
{
    "body": "Commit: **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)**",
    "created_at": "2014-05-05T09:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209054",
    "user": "https://github.com/nthiery"
}
```

Commit: **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)**



---

archive/issue_comments_209055.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nathanncohen](#comment:4):\n> The top commit of the branch here is \"#16289: Fix ZZ.cartesian_product(...)\".\n\nFixed. Damned reference effect :-)\n\n>    and this ticket's number never appears in the branch's commits `O_o`.\n\nWell, yes, at the time I wrote the commit, I did not know whether you wanted a new ticket or not.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/370abb8bfc058cb4a3017aa31b880bcdbefc762f\"><code>370abb8</code></a></td><td><code>trac #16269: Fixing doctests and implementing additional functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa07ba19487569ef26772c51092c4d5342faff7c\"><code>aa07ba1</code></a></td><td><code>trac #16269: Working around \"officially not a bug\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d22e245049e26dd10522d3514603868701a286fb\"><code>d22e245</code></a></td><td><code>trac #16269: missing __iter__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f262faa2796f58bd05fdc5d7c46d3cb84d59eb62\"><code>f262faa</code></a></td><td><code>trac #16269: Merged with 6.2.rc1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/338cc5b99fe50f435d2f6600eea46cffa372305a\"><code>338cc5b</code></a></td><td><code>trac #16269: Reviewer's remarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ac32c2d6854519a96eb1ce261240a0ee8537cb3\"><code>8ac32c2</code></a></td><td><code>#16280: Fix call for FiniteEnumeratedSet's of plain Python objects</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e274542d24211d57e9f6d99562c56385235721a\"><code>4e27454</code></a></td><td><code>#16280: Trivial doctest fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f67d82e378c4337dcf8cde49d2ca7d6e5b774086\"><code>f67d82e</code></a></td><td><code>trac #16269: Merged with #16280</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a54b68c242cc6541108b709170c35b3a79515b8\"><code>0a54b68</code></a></td><td><code>Trac 16269: little improvements + line folding in the doctest output</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2\"><code>b5ad803</code></a></td><td><code>Trac 16269 (or follow up): optimize CartesianProduct._cartesian_product_of_elements</code></td></tr></table>\n",
    "created_at": "2014-05-05T09:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209055",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nathanncohen](#comment:4):
> The top commit of the branch here is "#16289: Fix ZZ.cartesian_product(...)".

Fixed. Damned reference effect :-)

>    and this ticket's number never appears in the branch's commits `O_o`.

Well, yes, at the time I wrote the commit, I did not know whether you wanted a new ticket or not.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/370abb8bfc058cb4a3017aa31b880bcdbefc762f"><code>370abb8</code></a></td><td><code>trac #16269: Fixing doctests and implementing additional functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa07ba19487569ef26772c51092c4d5342faff7c"><code>aa07ba1</code></a></td><td><code>trac #16269: Working around "officially not a bug"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d22e245049e26dd10522d3514603868701a286fb"><code>d22e245</code></a></td><td><code>trac #16269: missing __iter__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f262faa2796f58bd05fdc5d7c46d3cb84d59eb62"><code>f262faa</code></a></td><td><code>trac #16269: Merged with 6.2.rc1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/338cc5b99fe50f435d2f6600eea46cffa372305a"><code>338cc5b</code></a></td><td><code>trac #16269: Reviewer's remarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ac32c2d6854519a96eb1ce261240a0ee8537cb3"><code>8ac32c2</code></a></td><td><code>#16280: Fix call for FiniteEnumeratedSet's of plain Python objects</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e274542d24211d57e9f6d99562c56385235721a"><code>4e27454</code></a></td><td><code>#16280: Trivial doctest fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f67d82e378c4337dcf8cde49d2ca7d6e5b774086"><code>f67d82e</code></a></td><td><code>trac #16269: Merged with #16280</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a54b68c242cc6541108b709170c35b3a79515b8"><code>0a54b68</code></a></td><td><code>Trac 16269: little improvements + line folding in the doctest output</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2"><code>b5ad803</code></a></td><td><code>Trac 16269 (or follow up): optimize CartesianProduct._cartesian_product_of_elements</code></td></tr></table>




---

archive/issue_comments_209056.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello !\n\nTwo questions :\n\n1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that \"sets\" does not exist.\n\n   a) If it does not, should it be added (in another patch) ?\n\n   b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?\n\n2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by \"self\" where it is  used ?\n\n3) Shouldn't this method be removed and the two lines\n\n```\n          elements = tuple(elements)\n          assert len(elements) == len(self._sets)\n```\nmoved to `element_class` (I do not know where `element_class` is defined) ?\n\nNathann\n\nNathann",
    "created_at": "2014-05-05T09:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209056",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello !

Two questions :

1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that "sets" does not exist.

   a) If it does not, should it be added (in another patch) ?

   b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?

2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by "self" where it is  used ?

3) Shouldn't this method be removed and the two lines

```
          elements = tuple(elements)
          assert len(elements) == len(self._sets)
```
moved to `element_class` (I do not know where `element_class` is defined) ?

Nathann

Nathann



---

archive/issue_events_230588.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-05T09:30:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230588"
}
```



---

archive/issue_events_230589.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-05T09:30:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230589"
}
```



---

archive/issue_comments_209057.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n> Two questions :\n> 1) \n> 2) \n> 3) \n\nI know ....",
    "created_at": "2014-05-05T09:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209057",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

> Two questions :
> 1) 
> 2) 
> 3) 

I know ....



---

archive/issue_comments_209058.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi Nathann,\n\nThanks for looking at this!\n\nReplying to [@nathanncohen](#comment:10):\n> 1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that \"sets\" does not exist.\n\nOh, right. Well from grepping around, it's referenced from\n`src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a\ndocument of its own at some point.\n\n>    b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?\n\nThat you ask the question raises another one: should this method be\nprivate in the first place? When I created it, I did not know how much\nI wanted it to be exposed, hence I started with a private method as\nit's easier to change this way than the other. I added a note about\nthis in #15425.\n\nIn the mean time, if you remember from the top of your head how to add\na private method do the doc, and cares, go ahead!\n\n> 2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by \"self\" where it is  used ?\n\nPre #16269, there was no coercion involved. So this is just reverting\nback to the old behavior, isn't it?\n\n> 3) Shouldn't this method be removed and the two lines\n> \n> ```\n>           elements = tuple(elements)\n>           assert len(elements) == len(self._sets)\n> ```\n> moved to `element_class`?\n\nYes, the two lines could possibly be moved down to the constructor of\nelement_class. However the method can't be removed. Its purpose is to\nencapsulate how one can construct quickly an element of the cartesian\nproduct from its components (which is different for naive cartesian\nproducts and for cartesian product of modules), so that we can write\ngeneric code on top of it (typically in the categories).\n\n> I do not know where `element_class` is defined?\n\n```\nsage: C = Sets().CartesianProducts().example()\nsage: C\nThe cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})\nsage: C.element_class\n<class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\nsage: C.element_class.__base__\n<class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n```\n\nCheers,",
    "created_at": "2014-05-05T10:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209058",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi Nathann,

Thanks for looking at this!

Replying to [@nathanncohen](#comment:10):
> 1) Does this file belong to the reference manual ? `sage -docbuild reference/sets html` says that "sets" does not exist.

Oh, right. Well from grepping around, it's referenced from
`src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a
document of its own at some point.

>    b) If it does not, could this `_cartesian_product_of_elements` function be made to appear in the doc, even though it is private ?

That you ask the question raises another one: should this method be
private in the first place? When I created it, I did not know how much
I wanted it to be exposed, hence I started with a private method as
it's easier to change this way than the other. I added a note about
this in #15425.

In the mean time, if you remember from the top of your head how to add
a private method do the doc, and cares, go ahead!

> 2) You change the meaning of an existing function. Is there any way to check that it is currently well used in other places and should not be replaced by "self" where it is  used ?

Pre #16269, there was no coercion involved. So this is just reverting
back to the old behavior, isn't it?

> 3) Shouldn't this method be removed and the two lines
> 
> ```
>           elements = tuple(elements)
>           assert len(elements) == len(self._sets)
> ```
> moved to `element_class`?

Yes, the two lines could possibly be moved down to the constructor of
element_class. However the method can't be removed. Its purpose is to
encapsulate how one can construct quickly an element of the cartesian
product from its components (which is different for naive cartesian
products and for cartesian product of modules), so that we can write
generic code on top of it (typically in the categories).

> I do not know where `element_class` is defined?

```
sage: C = Sets().CartesianProducts().example()
sage: C
The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})
sage: C.element_class
<class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
sage: C.element_class.__base__
<class 'sage.sets.cartesian_product.CartesianProduct.Element'>
```

Cheers,



---

archive/issue_comments_209059.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYoooooooo !\n\n> Oh, right. Well from grepping around, it's referenced from\n> `src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a\n> document of its own at some point.\n\nHmmmmm... Probably. To be honest I always hated the \"structure\" folder, because for me \"structure\" means \"data structure\". By the way the index of the \"structure\" document could also be reorganized.\n\n> That you ask the question raises another one: should this method be\n> private in the first place? When I created it, I did not know how much\n> I wanted it to be exposed, hence I started with a private method as\n> it's easier to change this way than the other. I added a note about\n> this in #15425.\n> \n> In the mean time, if you remember from the top of your head how to add\n> a private method do the doc, and cares, go ahead!\n\nI think that I will if I can find its entry in the structure document !\n\n> Pre #16269, there was no coercion involved. So this is just reverting\n> back to the old behavior, isn't it?\n\nTrue... God, I really can't remember which functions call which others... `element_class`, `_element_constructor_`, `self()`... How many ways to do (almost) the same thing ? `T_T`\n\n> ```\n> sage: C = Sets().CartesianProducts().example()\n> sage: C\n> The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})\n> sage: C.element_class\n> <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\n> sage: C.element_class.__base__\n> <class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n> ```\n\n```\n~/sage/sets$ grep element_class cartesian_product.py \n        return self.element_class(self, x)\n        return self.element_class(self, elements)\n```\n\nSo I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.\n\nNathann",
    "created_at": "2014-05-05T10:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209059",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Yoooooooo !

> Oh, right. Well from grepping around, it's referenced from
> `src/doc/en/reference/structure/index.rst`, so that's alright. Maybe `sage.sets` would deserve a
> document of its own at some point.

Hmmmmm... Probably. To be honest I always hated the "structure" folder, because for me "structure" means "data structure". By the way the index of the "structure" document could also be reorganized.

> That you ask the question raises another one: should this method be
> private in the first place? When I created it, I did not know how much
> I wanted it to be exposed, hence I started with a private method as
> it's easier to change this way than the other. I added a note about
> this in #15425.
> 
> In the mean time, if you remember from the top of your head how to add
> a private method do the doc, and cares, go ahead!

I think that I will if I can find its entry in the structure document !

> Pre #16269, there was no coercion involved. So this is just reverting
> back to the old behavior, isn't it?

True... God, I really can't remember which functions call which others... `element_class`, `_element_constructor_`, `self()`... How many ways to do (almost) the same thing ? `T_T`

> ```
> sage: C = Sets().CartesianProducts().example()
> sage: C
> The cartesian product of (Set of prime numbers (basic implementation), An example of an infinite enumerated set: the non negative integers, An example of a finite enumerated set: {1,2,3})
> sage: C.element_class
> <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
> sage: C.element_class.__base__
> <class 'sage.sets.cartesian_product.CartesianProduct.Element'>
> ```

```
~/sage/sets$ grep element_class cartesian_product.py 
        return self.element_class(self, x)
        return self.element_class(self, elements)
```

So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.

Nathann



---

archive/issue_comments_209060.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n\nIf you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n\nNathann",
    "created_at": "2014-05-05T10:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209060",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.

If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.

Nathann



---

archive/issue_comments_209061.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment:13):\n> Hmmmmm... Probably. To be honest I always hated the \"structure\" folder, because for me \"structure\" means \"data structure\".\n\nWhich it is up to some point: it's also about basic data structures\nfor parents, elements, ...\n\n> By the way the index of the \"structure\" document could also be reorganized.\n\n+1\n\n> > Pre #16269, there was no coercion involved. So this is just reverting\n> > back to the old behavior, isn't it?\n\n> \n> How many ways to do (almost) the same thing ? `T_T`\n\nI know ...\n\n> > ```\n> > sage: C.element_class\n> > <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>\n> > sage: C.element_class.__base__\n> > <class 'sage.sets.cartesian_product.CartesianProduct.Element'>\n> > ```\n\n> \n> ```\n> ~/sage/sets$ grep element_class cartesian_product.py \n>         return self.element_class(self, x)\n>         return self.element_class(self, elements)\n> ```\n> \n> So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.\n\nAs shown above, it is\n`sage.sets.cartesian_product.CartesianProduct.Element`, with just the\nabstract class from categories plugged in.\n\nWhich by the way it does not have an `__init__` of its own, so we\ncould not really move the `tuple/len` checks down there.\n\nCheers,\n                            Nicolas",
    "created_at": "2014-05-05T10:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209061",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment:13):
> Hmmmmm... Probably. To be honest I always hated the "structure" folder, because for me "structure" means "data structure".

Which it is up to some point: it's also about basic data structures
for parents, elements, ...

> By the way the index of the "structure" document could also be reorganized.

+1

> > Pre #16269, there was no coercion involved. So this is just reverting
> > back to the old behavior, isn't it?

> 
> How many ways to do (almost) the same thing ? `T_T`

I know ...

> > ```
> > sage: C.element_class
> > <class 'sage.sets.cartesian_product.CartesianProduct_with_category.element_class'>
> > sage: C.element_class.__base__
> > <class 'sage.sets.cartesian_product.CartesianProduct.Element'>
> > ```

> 
> ```
> ~/sage/sets$ grep element_class cartesian_product.py 
>         return self.element_class(self, x)
>         return self.element_class(self, elements)
> ```
> 
> So I guess it must be in structure/ somewhere ?... Okay I give up, I'm tired of tracking definitions of functions.

As shown above, it is
`sage.sets.cartesian_product.CartesianProduct.Element`, with just the
abstract class from categories plugged in.

Which by the way it does not have an `__init__` of its own, so we
could not really move the `tuple/len` checks down there.

Cheers,
                            Nicolas



---

archive/issue_comments_209062.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nathanncohen](#comment:14):\n> I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n> \n> If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n\nOk. I'll have a look after lunch.",
    "created_at": "2014-05-05T10:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209062",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nathanncohen](#comment:14):
> I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.
> 
> If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.

Ok. I'll have a look after lunch.



---

archive/issue_comments_209063.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> Which it is up to some point: it's also about basic data structures\n> for parents, elements, ...\n\nHmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.\n\n> As shown above, it is\n> `sage.sets.cartesian_product.CartesianProduct.Element`, with just the\n> abstract class from categories plugged in.\n> \n> Which by the way it does not have an `__init__` of its own, so we\n> could not really move the `tuple/len` checks down there.\n\nYou lost me `:-P`\n\nNathann",
    "created_at": "2014-05-05T10:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209063",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

> Which it is up to some point: it's also about basic data structures
> for parents, elements, ...

Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.

> As shown above, it is
> `sage.sets.cartesian_product.CartesianProduct.Element`, with just the
> abstract class from categories plugged in.
> 
> Which by the way it does not have an `__init__` of its own, so we
> could not really move the `tuple/len` checks down there.

You lost me `:-P`

Nathann



---

archive/issue_comments_209064.json:
```json
{
    "body": "Changed branch from **[u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)** to **[public/16288](https://github.com/sagemath/sagetrac-mirror/tree/public/16288)**",
    "created_at": "2014-05-05T12:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209064",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/16288_optimize_sage_sets_cartesian_product_cartesianproduct__cartesian_product_of_elements)** to **[public/16288](https://github.com/sagemath/sagetrac-mirror/tree/public/16288)**



---

archive/issue_comments_209065.json:
```json
{
    "body": "Changed commit from **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)** to **[`9b166f2`](https://github.com/sagemath/sagetrac-mirror/commit/9b166f201c4be9726b54846a6ffa84a117462a0d)**",
    "created_at": "2014-05-05T12:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209065",
    "user": "https://github.com/nthiery"
}
```

Changed commit from **[`b5ad803`](https://github.com/sagemath/sagetrac-mirror/commit/b5ad803eeb1e72e8f276416e7267a351ac314ed2)** to **[`9b166f2`](https://github.com/sagemath/sagetrac-mirror/commit/9b166f201c4be9726b54846a6ffa84a117462a0d)**



---

archive/issue_comments_209066.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2\"><code>4512a9e</code></a></td><td><code>#16280: fix link in the doc + move import to its natural spot</code></td></tr></table>\n",
    "created_at": "2014-05-05T13:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209066",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2"><code>4512a9e</code></a></td><td><code>#16280: fix link in the doc + move import to its natural spot</code></td></tr></table>




---

archive/issue_comments_209067.json:
```json
{
    "body": "Changed commit from **[`9b166f2`](https://github.com/sagemath/sagetrac-mirror/commit/9b166f201c4be9726b54846a6ffa84a117462a0d)** to **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**",
    "created_at": "2014-05-05T13:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209067",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b166f2`](https://github.com/sagemath/sagetrac-mirror/commit/9b166f201c4be9726b54846a6ffa84a117462a0d)** to **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**



---

archive/issue_comments_209068.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nthiery](#comment:16):\n> Replying to [@nathanncohen](#comment:14):\n> > I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.\n> > \n> > If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.\n\n> \n> Ok. I'll have a look after lunch.\n\nI fixed one link. The other links like `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` should start working once #9107 will be merged.\n\nThe doc could take some tidying, but that will be for later; enough conflicts with #10963! I'll just leave a note about this in #15425.\n\nFor me this is a positive review if you are fine with my last commit.",
    "created_at": "2014-05-05T13:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209068",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nthiery](#comment:16):
> Replying to [@nathanncohen](#comment:14):
> > I just added a commit in public/16288 in order to see that function in the doc. By the way, almost all links of this doc page are broken and I do not know how to fix them.
> > 
> > If you know how then it would be cool to fix it, and otherwise I have nothing to add to this patch, it can go ! You can it to positive review according to what you do about these broken links.

> 
> Ok. I'll have a look after lunch.

I fixed one link. The other links like `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` should start working once #9107 will be merged.

The doc could take some tidying, but that will be for later; enough conflicts with #10963! I'll just leave a note about this in #15425.

For me this is a positive review if you are fine with my last commit.



---

archive/issue_comments_209069.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOkay okay, good to go then. Thanks !\n\nNathann",
    "created_at": "2014-05-05T13:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209069",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Okay okay, good to go then. Thanks !

Nathann



---

archive/issue_events_230590.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-05T13:22:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230590"
}
```



---

archive/issue_events_230591.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-05T13:22:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230591"
}
```



---

archive/issue_comments_209070.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThanks for the review!",
    "created_at": "2014-05-05T13:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209070",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:22" align="right">comment:22</div>

Thanks for the review!



---

archive/issue_comments_209071.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment:17):\n> Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.\n\nThis would make sense indeed! And to start with add a ref from there.\n\n> > As shown above, it is\n> > `sage.sets.cartesian_product.CartesianProduct.Element`, with just the\n> > abstract class from categories plugged in.\n> > \n> > Which by the way it does not have an `__init__` of its own, so we\n> > could not really move the `tuple/len` checks down there.\n\n> \n> You lost me `:-P`\n\nSorry :-)\n\nI meant: we thought about moving the convertion to tuple and length checks from `CartesianProduct._cartesian_product_of_elements` to the `__init__` method of the element class, that is `CartesianProduct.Element`. But this class does not have an `__init__` of its own; instead it just inherits that of its base `ElementWrapper`.\n\nNo big deal anyway.",
    "created_at": "2014-05-05T13:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209071",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment:17):
> Hmmmm... Well, it would help if we moved misc/bitset* misc/binary_* in structure/ then.

This would make sense indeed! And to start with add a ref from there.

> > As shown above, it is
> > `sage.sets.cartesian_product.CartesianProduct.Element`, with just the
> > abstract class from categories plugged in.
> > 
> > Which by the way it does not have an `__init__` of its own, so we
> > could not really move the `tuple/len` checks down there.

> 
> You lost me `:-P`

Sorry :-)

I meant: we thought about moving the convertion to tuple and length checks from `CartesianProduct._cartesian_product_of_elements` to the `__init__` method of the element class, that is `CartesianProduct.Element`. But this class does not have an `__init__` of its own; instead it just inherits that of its base `ElementWrapper`.

No big deal anyway.



---

archive/issue_events_230592.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230592"
}
```



---

archive/issue_events_230593.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230593"
}
```



---

archive/issue_events_230594.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-06T18:03:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230594"
}
```



---

archive/issue_events_230595.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e609f8a6e6052c1be32809dcb2542dff183d8045",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-06T18:03:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16288#event-230595"
}
```



---

archive/issue_comments_209072.json:
```json
{
    "body": "Changed branch from **[public/16288](https://github.com/sagemath/sagetrac-mirror/tree/public/16288)** to **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**",
    "created_at": "2014-05-06T18:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16288#issuecomment-209072",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16288](https://github.com/sagemath/sagetrac-mirror/tree/public/16288)** to **[`4512a9e`](https://github.com/sagemath/sagetrac-mirror/commit/4512a9e9e457c609bb5b2cc0f7d634ac8acab0d2)**
