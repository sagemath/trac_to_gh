# Issue 16231: Equivalence between OA/TD/MOLS

archive/issues_015994.json:
```json
{
    "body": "This branch implements the following equivalence result : there exists a TD(k,n) iif there exists a OA(k,n) iif there exists k+2 MOLS.\n\nWith this branch, the three constructors communicate with each other, and a construction of any of these objects can be used to create objects of the other kinds.\n\nBecause the constructor of OA calls the constructor of TD,and because the constructor of TD calls the constructor of OA, there is a new `who_asked` parameters in these constructors which can be used to remember who asked the question first.\n\nOn the down side : the constructor of MOLS used to be able to return \"the maximum number of MOLS of size nxn that Sage can build\". With this patch, the feature is removed.\n\nExplanation: I created this feature because we only had two simple constructions of MOLS, and because it was easy to guess this number k from those constructions. With the new equivalences, this is not as easy anymore, thus I removed it for the moment.\n\nI think that it is not that bad, considering that it appeared very recently, and that not many people may even know that Sage can build MOLS yet.\n\nThis feature, however, can be interesting, and *can* be reimplemented. While with the two former constructions it was easy to guess in one line, we now have to try all possible parameters to find the largest integer k we are looking for. This is not necessarily very time-consuming given that all these objects now have an \"availability\" flag.\nHence it will be implemented again, this time for all constructions at the same time.\n\nTwo important points:\n1) The fact that the constructions communicate with each other means that Sage returns better results than before (and in particular the \"maximum\" number formerly returned by the constructor of MOLS is in many cases smaller than what Sage can now do\n2) The McNeish theorem from the constructors of MOLS has now been removed, as the same constructions has been implemented for TD since (#16227), and better (i.e. the best decomposition is found, not necessarily a decomposition into prime powers)\n\nHEeeeeeeeeeeeeeeeeere it is ! `:-)`\n\nNathann\n\nCC:  @videlec @KPanComputes @dimpase\n\nBranch/Commit: 9e5e94f648113d6b824039651bcb8d98144e01b2\n\nReviewer: Vincent Delecroix\n\nAuthor: Nathann Cohen\n\nDependencies: #15310, #16227\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16231\n\n",
    "closed_at": "2014-05-07T08:31:08Z",
    "created_at": "2014-04-24T19:51:50Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Equivalence between OA/TD/MOLS",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16231",
    "user": "https://github.com/nathanncohen"
}
```
This branch implements the following equivalence result : there exists a TD(k,n) iif there exists a OA(k,n) iif there exists k+2 MOLS.

With this branch, the three constructors communicate with each other, and a construction of any of these objects can be used to create objects of the other kinds.

Because the constructor of OA calls the constructor of TD,and because the constructor of TD calls the constructor of OA, there is a new `who_asked` parameters in these constructors which can be used to remember who asked the question first.

On the down side : the constructor of MOLS used to be able to return "the maximum number of MOLS of size nxn that Sage can build". With this patch, the feature is removed.

Explanation: I created this feature because we only had two simple constructions of MOLS, and because it was easy to guess this number k from those constructions. With the new equivalences, this is not as easy anymore, thus I removed it for the moment.

I think that it is not that bad, considering that it appeared very recently, and that not many people may even know that Sage can build MOLS yet.

This feature, however, can be interesting, and *can* be reimplemented. While with the two former constructions it was easy to guess in one line, we now have to try all possible parameters to find the largest integer k we are looking for. This is not necessarily very time-consuming given that all these objects now have an "availability" flag.
Hence it will be implemented again, this time for all constructions at the same time.

Two important points:
1) The fact that the constructions communicate with each other means that Sage returns better results than before (and in particular the "maximum" number formerly returned by the constructor of MOLS is in many cases smaller than what Sage can now do
2) The McNeish theorem from the constructors of MOLS has now been removed, as the same constructions has been implemented for TD since (#16227), and better (i.e. the best decomposition is found, not necessarily a decomposition into prime powers)

HEeeeeeeeeeeeeeeeeere it is ! `:-)`

Nathann

CC:  @videlec @KPanComputes @dimpase

Branch/Commit: 9e5e94f648113d6b824039651bcb8d98144e01b2

Reviewer: Vincent Delecroix

Author: Nathann Cohen

Dependencies: #15310, #16227

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16231





---

archive/issue_comments_221212.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2014-04-24T19:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221212",
    "user": "https://github.com/nathanncohen"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_221213.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-04-24T19:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221213",
    "user": "https://github.com/nathanncohen"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_221214.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-24T19:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221214",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_221215.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-24T19:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_221216.json:
```json
{
    "body": "<a id='comment:3'></a>Hello,\n\nRemainder: the content of this ticket has been partially discussed in #15310 and #16227.\n\nI assume that the big goal of this ticket is also to find more constructions.\n\nThe operation which consists in removing groups is trivial. So instead of given a couple (k,n) look for a TD(k,n) it is just more meaningful for a given n to have functions which:\n- return the largest k such that Sage knows how to build a TD(k,n) and provide it\n- the smallest k such that Sage knows that there does not exist a TD(k,n) and provide the Theorem that says so (see also #16272 for that) \n\nRemoving this feature from the MOLS in is **very** bad. I would rather try to make it available in the other functions. Doing it by \"trying all `k` before it says no\" does not look like a good strategy to me.\n\nIn order to find new TD(k,n), we have different strategies:\n- *individual constructions* (currently there is `TD_6_12` and also the ones introduced in #16241 #16236 and #16235)\n- *family constructions* (these are currently included into `orthogonal_array` and `mutually_orthogonal_latin_squares`). It is hard for me to tell if those constructions overlap.\n- *generalized Wilson constructions* which build TD(k,n) from \"smaller\" ones\n- *translations*, which is basically what this ticket is about\n\nIs that all? I would like this to be clear before thinking about what you did.\n\nVincent",
    "created_at": "2014-05-01T14:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221216",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Hello,

Remainder: the content of this ticket has been partially discussed in #15310 and #16227.

I assume that the big goal of this ticket is also to find more constructions.

The operation which consists in removing groups is trivial. So instead of given a couple (k,n) look for a TD(k,n) it is just more meaningful for a given n to have functions which:
- return the largest k such that Sage knows how to build a TD(k,n) and provide it
- the smallest k such that Sage knows that there does not exist a TD(k,n) and provide the Theorem that says so (see also #16272 for that) 

Removing this feature from the MOLS in is **very** bad. I would rather try to make it available in the other functions. Doing it by "trying all `k` before it says no" does not look like a good strategy to me.

In order to find new TD(k,n), we have different strategies:
- *individual constructions* (currently there is `TD_6_12` and also the ones introduced in #16241 #16236 and #16235)
- *family constructions* (these are currently included into `orthogonal_array` and `mutually_orthogonal_latin_squares`). It is hard for me to tell if those constructions overlap.
- *generalized Wilson constructions* which build TD(k,n) from "smaller" ones
- *translations*, which is basically what this ticket is about

Is that all? I would like this to be clear before thinking about what you did.

Vincent



---

archive/issue_comments_221217.json:
```json
{
    "body": "<a id='comment:4'></a>Yo !\n\n> I assume that the big goal of this ticket is also to find more constructions.\n\n\nIndeed.\n\n> The operation which consists in removing groups is trivial. So instead of given a couple (k,n) look for a TD(k,n) it is just more meaningful for a given n to have functions which:\n> - return the largest k such that Sage knows how to build a TD(k,n) and provide it\n> - the smallest k such that Sage knows that there does not exist a TD(k,n) and provide the Theorem that says so (see also #16272 for that) \n> \n> Removing this feature from the MOLS in is **very** bad. \n\n\nVincent, you need to stop screaming every ten seconds when something trivial is changed. This thing will appear again, as I am telling you that I want to reproduce the big MOLS table in the Handbook. Finding the largest k in the very purpose of my not sleeping and forgetting to eat for days.\n\nI removed this parameter right now because it can not be guessed at no cost, as it was the case. In order to find the largest k, you must explore many branches and recursive constructions, and implementing this will be done in another ticket, as those are sufficiently complicated and long to review already.\n\nAgain, stop screaming every minute. There was NOTHING about MOLS in Sage very recently, and we implement a lot of stuff at once. Here I remove stuff because it makes my patch easier to implement, and I will add it again later. Nobody even knew that this feature existed except me.\n\n> I would rather try to make it available in the other functions. Doing it by \"trying all `k` before it says no\" does not look like a good strategy to me.\n\n\nVincent, be serious. Have you thought about it ?... There is no other way to do that.\n\n> In order to find new TD(k,n), we have different strategies:\n> - *individual constructions* (currently there is `TD_6_12` and also the ones introduced in #16241 #16236 and #16235)\n\n\nAnd the ones I am implementing. Indeed.\n\n> - *family constructions* (these are currently included into `orthogonal_array` and `mutually_orthogonal_latin_squares`). It is hard for me to tell if those constructions overlap.\n\n\nThey must overlap on some values, and not on others.\n\n> - *generalized Wilson constructions* which build TD(k,n) from \"smaller\" ones\n\n\nYep.\n\n> - *translations*, which is basically what this ticket is about\n\n\nYep.\n\n> Is that all? I would like this to be clear before thinking about what you did.\n\n\nWell, I think that it is all.\n\nThe point is that before this ticket, the MOLS constructor has only two cases :\n\n1) A family  construction for prime powers\n\n2) A product decomposition applied stupidly : factor the input into prime power,  and do the best  you can with that.\n\nWhen the first is applied, the \"best k\" is easy to find.\n\nWhen the second is applied, the \"best k\" is easy to find.\n\nThus I had added this feature or returning the \"best k\", because it came at absolutely no cost.\n\nNow we can build much better MOLS than that,  because we have a LOT of constructions in OA/TD that MOLS can use, and so we can return MOLS that we would not have had with the previous constructions. On the other hand, if the \"best k\" we can now build is higher than what we could do before, it is not as easy to deduce because you have to explore stuff, in particular in the recursive constructions of OA/TD.\n\nThus I removed this guessing, because it is not how this feature is to be implemented. The only way I see to implement it is to try all values and return the largest one found, and I have no idea what you can think about when you say that it \"does not look like a good strategy\". It is the only one we can implement.\n\nAnd we will implement this \"best k\" for all constructions at the same time. Or perhaps only for OA, and all others will ask it. Once, and for all constructors. But first, let them communicate.\n\nNathann",
    "created_at": "2014-05-01T15:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221217",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Yo !

> I assume that the big goal of this ticket is also to find more constructions.


Indeed.

> The operation which consists in removing groups is trivial. So instead of given a couple (k,n) look for a TD(k,n) it is just more meaningful for a given n to have functions which:
> - return the largest k such that Sage knows how to build a TD(k,n) and provide it
> - the smallest k such that Sage knows that there does not exist a TD(k,n) and provide the Theorem that says so (see also #16272 for that) 
> 
> Removing this feature from the MOLS in is **very** bad. 


Vincent, you need to stop screaming every ten seconds when something trivial is changed. This thing will appear again, as I am telling you that I want to reproduce the big MOLS table in the Handbook. Finding the largest k in the very purpose of my not sleeping and forgetting to eat for days.

I removed this parameter right now because it can not be guessed at no cost, as it was the case. In order to find the largest k, you must explore many branches and recursive constructions, and implementing this will be done in another ticket, as those are sufficiently complicated and long to review already.

Again, stop screaming every minute. There was NOTHING about MOLS in Sage very recently, and we implement a lot of stuff at once. Here I remove stuff because it makes my patch easier to implement, and I will add it again later. Nobody even knew that this feature existed except me.

> I would rather try to make it available in the other functions. Doing it by "trying all `k` before it says no" does not look like a good strategy to me.


Vincent, be serious. Have you thought about it ?... There is no other way to do that.

> In order to find new TD(k,n), we have different strategies:
> - *individual constructions* (currently there is `TD_6_12` and also the ones introduced in #16241 #16236 and #16235)


And the ones I am implementing. Indeed.

> - *family constructions* (these are currently included into `orthogonal_array` and `mutually_orthogonal_latin_squares`). It is hard for me to tell if those constructions overlap.


They must overlap on some values, and not on others.

> - *generalized Wilson constructions* which build TD(k,n) from "smaller" ones


Yep.

> - *translations*, which is basically what this ticket is about


Yep.

> Is that all? I would like this to be clear before thinking about what you did.


Well, I think that it is all.

The point is that before this ticket, the MOLS constructor has only two cases :

1) A family  construction for prime powers

2) A product decomposition applied stupidly : factor the input into prime power,  and do the best  you can with that.

When the first is applied, the "best k" is easy to find.

When the second is applied, the "best k" is easy to find.

Thus I had added this feature or returning the "best k", because it came at absolutely no cost.

Now we can build much better MOLS than that,  because we have a LOT of constructions in OA/TD that MOLS can use, and so we can return MOLS that we would not have had with the previous constructions. On the other hand, if the "best k" we can now build is higher than what we could do before, it is not as easy to deduce because you have to explore stuff, in particular in the recursive constructions of OA/TD.

Thus I removed this guessing, because it is not how this feature is to be implemented. The only way I see to implement it is to try all values and return the largest one found, and I have no idea what you can think about when you say that it "does not look like a good strategy". It is the only one we can implement.

And we will implement this "best k" for all constructions at the same time. Or perhaps only for OA, and all others will ask it. Once, and for all constructors. But first, let them communicate.

Nathann



---

archive/issue_comments_221218.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-01T21:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221218",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_221219.json:
```json
{
    "body": "<a id='comment:6'></a>Hi Nathann,\n\nI added some documentation, please start editing from u/vdelecroix/16231\n\nIf `n` is a prime power, there is an optimal construction, i.e. a `TD(n+1,n)` and there is no need to check for product or Wilson construction. But right now the code in `transversal_design` does. For prime powers there are two places where some code is implemented:\n- in orthogonal_array (you refer to theorem 6.39 and 6.40 of Stinson)\n- in mutually_orthogonal_latin_squares (you refer to section 6.4.1 of Stinson)\nAre the outputs equivalent? Note that there is no way to test it with the current code, unless I use the forbidden `who_asked` parameter. Would it be possible to isolate the two constructions in two functions? Why do we need two constructions for the case of `n` being a prime power?\n\nVincent",
    "created_at": "2014-05-02T09:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221219",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>Hi Nathann,

I added some documentation, please start editing from u/vdelecroix/16231

If `n` is a prime power, there is an optimal construction, i.e. a `TD(n+1,n)` and there is no need to check for product or Wilson construction. But right now the code in `transversal_design` does. For prime powers there are two places where some code is implemented:
- in orthogonal_array (you refer to theorem 6.39 and 6.40 of Stinson)
- in mutually_orthogonal_latin_squares (you refer to section 6.4.1 of Stinson)
Are the outputs equivalent? Note that there is no way to test it with the current code, unless I use the forbidden `who_asked` parameter. Would it be possible to isolate the two constructions in two functions? Why do we need two constructions for the case of `n` being a prime power?

Vincent



---

archive/issue_comments_221220.json:
```json
{
    "body": "<a id='comment:7'></a>Yo !\n\n> I added some documentation, please start editing from u/vdelecroix/16231\n\n\nOkay, I'll look at that right now.\n\n> If `n` is a prime power, there is an optimal construction, i.e. a `TD(n+1,n)` and there is no need to check for product or Wilson construction. But right now the code in `transversal_design` does. For prime powers there are two places where some code is implemented:\n> - in orthogonal_array (you refer to theorem 6.39 and 6.40 of Stinson)\n> - in mutually_orthogonal_latin_squares (you refer to section 6.4.1 of Stinson)\n> Are the outputs equivalent?\n\n\nNo idea. They return valid answers, but I have no idea if they are the same. I would say \"no\", but really who cares ? Let's keep only one.\n\n> Note that there is no way to test it with the current code, unless I use the forbidden `who_asked` parameter.\n\n\nAm I guilty for that ?... `:-P`\n\n> Would it be possible to isolate the two constructions in two functions? Why do we need two constructions for the case of `n` being a prime power?\n\n\nI don't think we need two constructions of the same designs... I mean. AFTER this patch is merged, I don't think we need two, given that they all communicate with each other. BEFORE this patch, we actually need three different implementations `;-)`\n\nNathann",
    "created_at": "2014-05-02T10:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221220",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Yo !

> I added some documentation, please start editing from u/vdelecroix/16231


Okay, I'll look at that right now.

> If `n` is a prime power, there is an optimal construction, i.e. a `TD(n+1,n)` and there is no need to check for product or Wilson construction. But right now the code in `transversal_design` does. For prime powers there are two places where some code is implemented:
> - in orthogonal_array (you refer to theorem 6.39 and 6.40 of Stinson)
> - in mutually_orthogonal_latin_squares (you refer to section 6.4.1 of Stinson)
> Are the outputs equivalent?


No idea. They return valid answers, but I have no idea if they are the same. I would say "no", but really who cares ? Let's keep only one.

> Note that there is no way to test it with the current code, unless I use the forbidden `who_asked` parameter.


Am I guilty for that ?... `:-P`

> Would it be possible to isolate the two constructions in two functions? Why do we need two constructions for the case of `n` being a prime power?


I don't think we need two constructions of the same designs... I mean. AFTER this patch is merged, I don't think we need two, given that they all communicate with each other. BEFORE this patch, we actually need three different implementations `;-)`

Nathann



---

archive/issue_comments_221221.json:
```json
{
    "body": "<a id='comment:8'></a>Okay, I agree with your modifications except one :\n\n```\n+        if availability:\n+            return False\n+        from sage.categories.sets_cat import EmptySetError\n+        raise EmptySetError(\"No Transversal Design exists when k>=n+2\")\n```\n\nWe shouldn't duplicate non-existence results but rather forward them, in this case forward it from OA to TD.\n\nThe nice thing is that later we will be able to implement a 'non-existence result' exactly like a construction !!\n\nA 'non-existence result' will be a function taking a \"k,n,existence=\" as parameter, which can sometimes return \"False\" as an answer instead of \"Unknown\" `;-)`\n\nThiiiiiiiiiis code will become *COOL*.\n\nNathann",
    "created_at": "2014-05-02T10:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221221",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>Okay, I agree with your modifications except one :

```
+        if availability:
+            return False
+        from sage.categories.sets_cat import EmptySetError
+        raise EmptySetError("No Transversal Design exists when k>=n+2")
```

We shouldn't duplicate non-existence results but rather forward them, in this case forward it from OA to TD.

The nice thing is that later we will be able to implement a 'non-existence result' exactly like a construction !!

A 'non-existence result' will be a function taking a "k,n,existence=" as parameter, which can sometimes return "False" as an answer instead of "Unknown" `;-)`

Thiiiiiiiiiis code will become *COOL*.

Nathann



---

archive/issue_comments_221222.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 ncohen]:\n> Okay, I agree with your modifications except one :\n> \n> \n> ```\n> +        if availability:\n> +            return False\n> +        from sage.categories.sets_cat import EmptySetError\n> +        raise EmptySetError(\"No Transversal Design exists when k>=n+2\")\n> ```\n> \n> We shouldn't duplicate non-existence results but rather forward them, in this case forward it from OA to TD.\n\n\nFor the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...\n\nVincent",
    "created_at": "2014-05-02T10:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221222",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>Replying to [comment:8 ncohen]:
> Okay, I agree with your modifications except one :
> 
> 
> ```
> +        if availability:
> +            return False
> +        from sage.categories.sets_cat import EmptySetError
> +        raise EmptySetError("No Transversal Design exists when k>=n+2")
> ```
> 
> We shouldn't duplicate non-existence results but rather forward them, in this case forward it from OA to TD.


For the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...

Vincent



---

archive/issue_comments_221223.json:
```json
{
    "body": "<a id='comment:10'></a>> For the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...\n\n\nIsn't the problem solved if we call `orthogonal_array` before trying the decomposition ?\n\nNathann",
    "created_at": "2014-05-02T10:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221223",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>> For the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...


Isn't the problem solved if we call `orthogonal_array` before trying the decomposition ?

Nathann



---

archive/issue_comments_221224.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 ncohen]:\n> > For the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...\n\n> \n> Isn't the problem solved if we call `orthogonal_array` before trying the decomposition ?\n\n\nIt is if **all** easy checks of non-existence are done inside `orthogonal_array`. Moreover, it is not specified right now that when `availability` is set to `True` that an answer `False` means that the object does not exist...",
    "created_at": "2014-05-02T10:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221224",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>Replying to [comment:10 ncohen]:
> > For the simple reason that in `transversal_design` you first start to check if there exists a product and a Wilson decomposition before discovering that for trivial reasons your parameters are not valid...

> 
> Isn't the problem solved if we call `orthogonal_array` before trying the decomposition ?


It is if **all** easy checks of non-existence are done inside `orthogonal_array`. Moreover, it is not specified right now that when `availability` is set to `True` that an answer `False` means that the object does not exist...



---

archive/issue_comments_221225.json:
```json
{
    "body": "<a id='comment:12'></a>Yo !\n\n> It is if **all** easy checks of non-existence are done inside `orthogonal_array`. \n\n\nWhy ? It would work anyway. The order changes the performances, not the existence of a result.\n\n> Moreover, it is not specified right now that when `availability` is set to `True` that an answer `False` means that the object does not exist...\n\n\nTrue. So you  can either add something which we will remove in a patch today or tomorrow, or wait until we change \"availability\" to \"existence\" so that we can do this properly.\n\nNathann",
    "created_at": "2014-05-02T10:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221225",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>Yo !

> It is if **all** easy checks of non-existence are done inside `orthogonal_array`. 


Why ? It would work anyway. The order changes the performances, not the existence of a result.

> Moreover, it is not specified right now that when `availability` is set to `True` that an answer `False` means that the object does not exist...


True. So you  can either add something which we will remove in a patch today or tomorrow, or wait until we change "availability" to "existence" so that we can do this properly.

Nathann



---

archive/issue_comments_221226.json:
```json
{
    "body": "<a id='comment:13'></a>I changed the branch. You can append your commits to `public/16231` when you are done `:-)`\n\nNathann",
    "created_at": "2014-05-02T10:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221226",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>I changed the branch. You can append your commits to `public/16231` when you are done `:-)`

Nathann



---

archive/issue_comments_221227.json:
```json
{
    "body": "<a id='comment:14'></a>(aaaaaand I just began to prepare the 1000 OA constructions I finished this morning)",
    "created_at": "2014-05-02T10:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221227",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>(aaaaaand I just began to prepare the 1000 OA constructions I finished this morning)



---

archive/issue_comments_221228.json:
```json
{
    "body": "<a id='comment:15'></a>About my check at the begining of TD, there is exactly the same code at the begining of MOLS... so what?",
    "created_at": "2014-05-02T10:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221228",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>About my check at the begining of TD, there is exactly the same code at the begining of MOLS... so what?



---

archive/issue_comments_221229.json:
```json
{
    "body": "<a id='comment:16'></a>> About my check at the begining of TD, there is exactly the same code at the begining of MOLS... so what?\n\n\nAs I say,  we can either include it now and remove it later or not do it, really it is up to you. I still consider this code as \"being worked on\" and everything in there is pretty new. For as long as it does not return wrong results, I do not mind if it is not \"finished\" given that I am working on it and that I know it will be patched soon `:-)`\n\nNathann",
    "created_at": "2014-05-02T10:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221229",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>> About my check at the begining of TD, there is exactly the same code at the begining of MOLS... so what?


As I say,  we can either include it now and remove it later or not do it, really it is up to you. I still consider this code as "being worked on" and everything in there is pretty new. For as long as it does not return wrong results, I do not mind if it is not "finished" given that I am working on it and that I know it will be patched soon `:-)`

Nathann



---

archive/issue_comments_221230.json:
```json
{
    "body": "<a id='comment:17'></a>Gosh... The branch on #16277 will be awful. I have three dependencies which all have dependencies. There will be one thousand commit on the branch and actually only ONE which is just about that branch `:-P`\n\nThis would have been complicated with Mercurial I guess `^^;`\n\nNathann",
    "created_at": "2014-05-02T10:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221230",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>Gosh... The branch on #16277 will be awful. I have three dependencies which all have dependencies. There will be one thousand commit on the branch and actually only ONE which is just about that branch `:-P`

This would have been complicated with Mercurial I guess `^^;`

Nathann



---

archive/issue_comments_221231.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-02T12:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_221232.json:
```json
{
    "body": "<a id='comment:19'></a>Hi Nathann,\n\nI updated the code with what I proposed. Please check.",
    "created_at": "2014-05-02T12:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221232",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>Hi Nathann,

I updated the code with what I proposed. Please check.



---

archive/issue_comments_221233.json:
```json
{
    "body": "<a id='comment:20'></a>Yooooooooooo !\n\nI agree with everything. Well.\n\nExcept : Vincent, you are one of the guys who cannot stand to see \n\n```\nif ___ :\n    return\nelse:\n    return\n```\n\nI am the kind of guy who cannot stand to see\n\n```\nif ___:\n    return\nreturn\n```\n\nSooooooo could we coexist in the way that you don't change my writing unless you need to, and I don't change yours unless I need to ? `:-P`\n\nThaaaaaaanks. Good to go for me. And the constructions patch will be ready soon `:-)`\n\nNathann",
    "created_at": "2014-05-02T12:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221233",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>Yooooooooooo !

I agree with everything. Well.

Except : Vincent, you are one of the guys who cannot stand to see 

```
if ___ :
    return
else:
    return
```

I am the kind of guy who cannot stand to see

```
if ___:
    return
return
```

Sooooooo could we coexist in the way that you don't change my writing unless you need to, and I don't change yours unless I need to ? `:-P`

Thaaaaaaanks. Good to go for me. And the constructions patch will be ready soon `:-)`

Nathann



---

archive/issue_comments_221234.json:
```json
{
    "body": "<a id='comment:21'></a>Hi Nathann,\n\nI like both, but have a preference for the second one. Anyway I started doing it because both kinds were present. I will revert to the way you like.",
    "created_at": "2014-05-02T12:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221234",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>Hi Nathann,

I like both, but have a preference for the second one. Anyway I started doing it because both kinds were present. I will revert to the way you like.



---

archive/issue_comments_221235.json:
```json
{
    "body": "<a id='comment:22'></a>Well it really doesn't matter, let's keep it as it is ! I just had many reviews on \"you should not write it the way you like, write it the way I like instead\" `:-P`\n\nIt's cool like that, we have more interesting wars to fight `:-D`\n\nNathann",
    "created_at": "2014-05-02T12:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221235",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>Well it really doesn't matter, let's keep it as it is ! I just had many reviews on "you should not write it the way you like, write it the way I like instead" `:-P`

It's cool like that, we have more interesting wars to fight `:-D`

Nathann



---

archive/issue_comments_221236.json:
```json
{
    "body": "<a id='comment:23'></a>I just tested, and all tests pass. So if it is okay for you, it can go too `:-)`\n\nNathann",
    "created_at": "2014-05-02T12:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221236",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>I just tested, and all tests pass. So if it is okay for you, it can go too `:-)`

Nathann



---

archive/issue_comments_221237.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-02T12:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_221238.json:
```json
{
    "body": "<a id='comment:25'></a>Added a trivial change for uniformization. Feel free to positive review it.\n\nI will start #16272 now.\n\nVincent",
    "created_at": "2014-05-02T12:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221238",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>Added a trivial change for uniformization. Feel free to positive review it.

I will start #16272 now.

Vincent



---

archive/issue_comments_221239.json:
```json
{
    "body": "<a id='comment:26'></a>Argggggggg...\nNononono don't ! I already began !\n\nNathann",
    "created_at": "2014-05-02T12:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221239",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>Argggggggg...
Nononono don't ! I already began !

Nathann



---

archive/issue_comments_221240.json:
```json
{
    "body": "<a id='comment:27'></a>Okay with your test. So I set this to `positive_review`. About #16272 : I am writing the part of the patch that changes !True/False into !True/False/Unknown. I already did it for BIBD. I can see this to the end then you can take the branch and add the non-existence results ? Is that okay for you ?\n\nIf you want to work on designs you can look at #16277 in the meantime. The two tasks do not conflict.\n\nNathann",
    "created_at": "2014-05-02T12:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221240",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>Okay with your test. So I set this to `positive_review`. About #16272 : I am writing the part of the patch that changes !True/False into !True/False/Unknown. I already did it for BIBD. I can see this to the end then you can take the branch and add the non-existence results ? Is that okay for you ?

If you want to work on designs you can look at #16277 in the meantime. The two tasks do not conflict.

Nathann



---

archive/issue_comments_221241.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-02T13:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221241",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_221242.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:27 ncohen]:\n> Okay with your test. So I set this to `positive_review`. About #16272 : I am writing the part of the patch that changes !True/False into !True/False/Unknown. I already did it for BIBD. I can see this to the end then you can take the branch and add the non-existence results ? Is that okay for you ?\n\n\nOk. I let you start. I am looking at the literature right now.",
    "created_at": "2014-05-02T13:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221242",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>Replying to [comment:27 ncohen]:
> Okay with your test. So I set this to `positive_review`. About #16272 : I am writing the part of the patch that changes !True/False into !True/False/Unknown. I already did it for BIBD. I can see this to the end then you can take the branch and add the non-existence results ? Is that okay for you ?


Ok. I let you start. I am looking at the literature right now.



---

archive/issue_comments_221243.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-05-04T16:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_221244.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-05-04T16:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_221245.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-05-04T16:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_221246.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-04T16:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221246",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_221247.json:
```json
{
    "body": "<a id='comment:32'></a>Still updating (and making mistakes in the commit messages)",
    "created_at": "2014-05-04T16:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221247",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:32'></a>Still updating (and making mistakes in the commit messages)



---

archive/issue_events_047839.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16231#event-47839"
}
```



---

archive/issue_events_047840.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-07T08:31:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16231#event-47840"
}
```



---

archive/issue_comments_221248.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-07T08:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16231",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16231#issuecomment-221248",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
