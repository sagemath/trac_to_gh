# Issue 16879: OA caching in C

archive/issues_016642.json:
```json
{
    "assignees": [],
    "body": "Caching of OA constructions in C. Less space, and a bit faster.\n\nNathann\n\nDepends on #16875\n\nCC:  @videlec\n\nComponent: **combinatorial designs**\n\nAuthor: **Nathann Cohen**\n\nBranch/Commit: **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**\n\nReviewer: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16879_\n\n",
    "closed_at": "2014-09-06T11:02:27Z",
    "created_at": "2014-08-25T15:17:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "OA caching in C",
    "type": "issue",
    "updated_at": "2014-09-06T11:02:27Z",
    "url": "https://github.com/sagemath/sage/issues/16879",
    "user": "https://github.com/nathanncohen"
}
```
Caching of OA constructions in C. Less space, and a bit faster.

Nathann

Depends on #16875

CC:  @videlec

Component: **combinatorial designs**

Author: **Nathann Cohen**

Branch/Commit: **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**

Reviewer: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/16879_





---

archive/issue_events_239084.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-25T15:17:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239084"
}
```



---

archive/issue_events_239085.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-25T15:17:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239085"
}
```



---

archive/issue_events_239086.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-25T15:17:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239086"
}
```



---

archive/issue_events_239087.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-25T15:17:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239087"
}
```



---

archive/issue_events_239088.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-25T15:19:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239088"
}
```



---

archive/issue_comments_222040.json:
```json
{
    "body": "Branch: **[public/16879](https://github.com/sagemath/sagetrac-mirror/tree/public/16879)**",
    "created_at": "2014-08-25T15:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222040",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/16879](https://github.com/sagemath/sagetrac-mirror/tree/public/16879)**



---

archive/issue_comments_222041.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7afe6f10d690f12c568401e8850a713f6874d51\"><code>f7afe6f</code></a></td><td><code>trac #16846: Broken doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd1bbc6686b99e38d200fecd32def5574d4ca806\"><code>fd1bbc6</code></a></td><td><code>trac #16846: Merge with updated #16817</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c66c19b305799452765ccf53d3380ee670700f85\"><code>c66c19b</code></a></td><td><code>trac #16846: review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/361c4034247f4b3944dbb52a1259b184dfc6a250\"><code>361c403</code></a></td><td><code>trac #16868: A real difference matrix has k columns</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab25059e918cfd4ffc1b5cbabca724219f319b7f\"><code>ab25059</code></a></td><td><code>trac #16870: Use float(\"inf\") instead of Infinity</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/583622deb2721df9db51a93990c118498917ff3c\"><code>583622d</code></a></td><td><code>trac #16870: remove an import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a64c96720a90be57492accccc138c53c01d6cacc\"><code>a64c967</code></a></td><td><code>trac #16875: move imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b36757e15db03b42e1e641d8929196e3f02d9b8\"><code>1b36757</code></a></td><td><code>trac #16875: set the cache when we call difference_matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19eeb7f27d03ef3cb7ad8c18f9753c21beb20dd3\"><code>19eeb7f</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2\"><code>f13a4fd</code></a></td><td><code>trac #16879: Rename orthogonal_array.py to .pyx</code></td></tr></table>\n",
    "created_at": "2014-08-25T15:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222041",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7afe6f10d690f12c568401e8850a713f6874d51"><code>f7afe6f</code></a></td><td><code>trac #16846: Broken doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd1bbc6686b99e38d200fecd32def5574d4ca806"><code>fd1bbc6</code></a></td><td><code>trac #16846: Merge with updated #16817</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c66c19b305799452765ccf53d3380ee670700f85"><code>c66c19b</code></a></td><td><code>trac #16846: review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/361c4034247f4b3944dbb52a1259b184dfc6a250"><code>361c403</code></a></td><td><code>trac #16868: A real difference matrix has k columns</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab25059e918cfd4ffc1b5cbabca724219f319b7f"><code>ab25059</code></a></td><td><code>trac #16870: Use float("inf") instead of Infinity</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/583622deb2721df9db51a93990c118498917ff3c"><code>583622d</code></a></td><td><code>trac #16870: remove an import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a64c96720a90be57492accccc138c53c01d6cacc"><code>a64c967</code></a></td><td><code>trac #16875: move imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b36757e15db03b42e1e641d8929196e3f02d9b8"><code>1b36757</code></a></td><td><code>trac #16875: set the cache when we call difference_matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19eeb7f27d03ef3cb7ad8c18f9753c21beb20dd3"><code>19eeb7f</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2"><code>f13a4fd</code></a></td><td><code>trac #16879: Rename orthogonal_array.py to .pyx</code></td></tr></table>




---

archive/issue_comments_222042.json:
```json
{
    "body": "Commit: **[`f13a4fd`](https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2)**",
    "created_at": "2014-08-25T15:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222042",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`f13a4fd`](https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2)**



---

archive/issue_events_239089.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-25T15:51:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239089"
}
```



---

archive/issue_events_239090.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-25T15:51:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239090"
}
```



---

archive/issue_comments_222043.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello,\n\nThe cache part is cool!\n\nI am not confident of having everything switched into Cython. It is much harder to debug and can also makes things slower. Especially with functions like `wilson_construction`, `OA_n_times_2_pow_c_from_matrix`... Why not only switch to C for the cache part? The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.\n\nIn the function `orthogonal_array`, I do not remember what was the point of the variable `may_be_availale` in `orthogonal_arrays`... And I am confused by the way it is used: if it is `False` then there is no need to go further (but it concerns only the case when `existence=False`).\n\nVincent",
    "created_at": "2014-08-25T15:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222043",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello,

The cache part is cool!

I am not confident of having everything switched into Cython. It is much harder to debug and can also makes things slower. Especially with functions like `wilson_construction`, `OA_n_times_2_pow_c_from_matrix`... Why not only switch to C for the cache part? The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.

In the function `orthogonal_array`, I do not remember what was the point of the variable `may_be_availale` in `orthogonal_arrays`... And I am confused by the way it is used: if it is `False` then there is no need to go further (but it concerns only the case when `existence=False`).

Vincent



---

archive/issue_comments_222044.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYo !\n\n> The cache part is cool!\n\nYep.\n\n> I am not confident of having everything switched into Cython.\n\nI don't like it either. And it takes a lifetime to compile.\n\n> It is much harder to debug and can also makes things slower.\n\nReally ? Do you have an example ? `O_o`\n\n> Why not only switch to C for the cache part?\n\nWell, I can't cimport a cdef function in a .py file, but perhaps that does not matter. I will move th caching code to designs_pyx.\n\n> The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.\n\nI am thinking about that. What is the difference between this `orthogonal_array_available` and the current `orthogonal_array` ? I don't talk about the user interface, just about speed. When the answer is cached (most frequent case), what is it that `orthogonal_array_is_available` does that `orthogonal_array` does not ? Only check that `k is not None` ?\n\n> In the function `orthogonal_array`, I do not remember what was the point of the variable `may_be_availale` in `orthogonal_arrays`... And I am confused by the way it is used: if it is `False` then there is no need to go further (but it concerns only the case when `existence=False`).\n\nNo need to go further to test constructions. But there may be non-existence proofs implemented. That was the logic.\n\nNathann",
    "created_at": "2014-08-25T15:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222044",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Yo !

> The cache part is cool!

Yep.

> I am not confident of having everything switched into Cython.

I don't like it either. And it takes a lifetime to compile.

> It is much harder to debug and can also makes things slower.

Really ? Do you have an example ? `O_o`

> Why not only switch to C for the cache part?

Well, I can't cimport a cdef function in a .py file, but perhaps that does not matter. I will move th caching code to designs_pyx.

> The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.

I am thinking about that. What is the difference between this `orthogonal_array_available` and the current `orthogonal_array` ? I don't talk about the user interface, just about speed. When the answer is cached (most frequent case), what is it that `orthogonal_array_is_available` does that `orthogonal_array` does not ? Only check that `k is not None` ?

> In the function `orthogonal_array`, I do not remember what was the point of the variable `may_be_availale` in `orthogonal_arrays`... And I am confused by the way it is used: if it is `False` then there is no need to go further (but it concerns only the case when `existence=False`).

No need to go further to test constructions. But there may be non-existence proofs implemented. That was the logic.

Nathann



---

archive/issue_comments_222045.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI just uploaded another branch at public/16879b. It moves the caching functions to designs_pyx instead.\n\nNathann",
    "created_at": "2014-08-25T16:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222045",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

I just uploaded another branch at public/16879b. It moves the caching functions to designs_pyx instead.

Nathann



---

archive/issue_comments_222046.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment%3A4):\n> Yo !\n> \n> > I am not confident of having everything switched into Cython.\n\n> \n> I don't like it either. And it takes a lifetime to compile.\n> \n> > It is much harder to debug and can also makes things slower.\n\n> \n> Really ? Do you have an example ? `O_o`\n\nAlmost anything:\n\n```\ndef f():\n    from sage.rings.arith import is_prime\n    from sage.quadratic_forms.extras import is_triangular_number\n\n    for i in range(2,1000):\n        is_prime(i)\n        is_triangular_number(i)\n```\nthen I got\n\n```\nsage: timeit(\"f_python()\", number=100)\n100 loops, best of 3: 12.7 ms per loop\nsage: timeit(\"f_cython()\", number=100)\n100 loops, best of 3: 12.9 ms per loop\n```\nNot very significant, but still.\n\n> > Why not only switch to C for the cache part?\n\n> \n> Well, I can't cimport a cdef function in a .py file, but perhaps that does not matter. I will move th caching code to designs_pyx.\n\nThat's why we can move `orthogonal_array` as well.\n\n> > The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.\n\n> \n> I am thinking about that. What is the difference between this `orthogonal_array_available` and the current `orthogonal_array` ? I don't talk about the user interface, just about speed. When the answer is cached (most frequent case), what is it that `orthogonal_array_is_available` does that `orthogonal_array` does not ? Only check that `k is not None` ?\n\nIf `orthogonal_array` is cythonized... not much. Otherwise, function calls.\n\nVincent",
    "created_at": "2014-08-25T16:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222046",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment%3A4):
> Yo !
> 
> > I am not confident of having everything switched into Cython.

> 
> I don't like it either. And it takes a lifetime to compile.
> 
> > It is much harder to debug and can also makes things slower.

> 
> Really ? Do you have an example ? `O_o`

Almost anything:

```
def f():
    from sage.rings.arith import is_prime
    from sage.quadratic_forms.extras import is_triangular_number

    for i in range(2,1000):
        is_prime(i)
        is_triangular_number(i)
```
then I got

```
sage: timeit("f_python()", number=100)
100 loops, best of 3: 12.7 ms per loop
sage: timeit("f_cython()", number=100)
100 loops, best of 3: 12.9 ms per loop
```
Not very significant, but still.

> > Why not only switch to C for the cache part?

> 
> Well, I can't cimport a cdef function in a .py file, but perhaps that does not matter. I will move th caching code to designs_pyx.

That's why we can move `orthogonal_array` as well.

> > The function `orthogonal_array` might also move and we might also recreate the `orthogonal_array_available` from #16875.

> 
> I am thinking about that. What is the difference between this `orthogonal_array_available` and the current `orthogonal_array` ? I don't talk about the user interface, just about speed. When the answer is cached (most frequent case), what is it that `orthogonal_array_is_available` does that `orthogonal_array` does not ? Only check that `k is not None` ?

If `orthogonal_array` is cythonized... not much. Otherwise, function calls.

Vincent



---

archive/issue_comments_222047.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nwith `public/16879b`\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n_OA_cache = <cache_entry *> sage_malloc(2*sizeof(cache_entry))\n            ^\n------------------------------------------------------------\n\nsage/combinat/designs/designs_pyx.pyx:509:13: 'cache_entry' is not a type identifier\n```\n\nI guess you forgot a `git add` or something.\n\nVincent",
    "created_at": "2014-08-25T16:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222047",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

with `public/16879b`

```
Error compiling Cython file:
------------------------------------------------------------
_OA_cache = <cache_entry *> sage_malloc(2*sizeof(cache_entry))
            ^
------------------------------------------------------------

sage/combinat/designs/designs_pyx.pyx:509:13: 'cache_entry' is not a type identifier
```

I guess you forgot a `git add` or something.

Vincent



---

archive/issue_comments_222048.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRight ! I just updated the branch.\n\nNathann",
    "created_at": "2014-08-25T16:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222048",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Right ! I just updated the branch.

Nathann



---

archive/issue_comments_222049.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI think that the `-g` option is the default, because when you compile with your version you got it twice\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g ...\n```",
    "created_at": "2014-08-25T16:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222049",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

I think that the `-g` option is the default, because when you compile with your version you got it twice

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g ...
```



---

archive/issue_comments_222050.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@videlec](#comment%3A9):\n> I think that the `-g` option is the default, because when you compile with your version you got it twice\n> \n> ```\n> gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g ...\n> ```\n\nEDIT: sorry three times!",
    "created_at": "2014-08-25T16:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222050",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@videlec](#comment%3A9):
> I think that the `-g` option is the default, because when you compile with your version you got it twice
> 
> ```
> gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g ...
> ```

EDIT: sorry three times!



---

archive/issue_comments_222051.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAnd I do not know which optimization is chosen between `-O2` and `-O3`\n\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 ...\n```",
    "created_at": "2014-08-25T16:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222051",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

And I do not know which optimization is chosen between `-O2` and `-O3`

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 ...
```



---

archive/issue_comments_222052.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e\"><code>789533b</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr></table>\n",
    "created_at": "2014-08-25T16:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e"><code>789533b</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr></table>




---

archive/issue_comments_222053.json:
```json
{
    "body": "Changed commit from **[`f13a4fd`](https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2)** to **[`789533b`](https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e)**",
    "created_at": "2014-08-25T16:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222053",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f13a4fd`](https://github.com/sagemath/sagetrac-mirror/commit/f13a4fd01da823289aedecf029277f515eac29f2)** to **[`789533b`](https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e)**



---

archive/issue_comments_222054.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHow is this for you ? I plan on modifying `orthogonal_array_recursive` now, and turn it into a .pyx file. The only time-consuming operations that occur there are the `find_*` functions which may benefit from C integer variables.\n\nPlus I plan on writing a small function `cdef bint _is_available(k,n)` there that will 1) check the cache 2) call orthogonal_array(k,n,existence=1) if needed: the point is that because this function is a cdef one,  for most calls no Python will be involved at all.\n\nTell me what you think of this patch, for I cannot begin that if I am not sure that the cache function stay in designs_pyx.\n\nHave fuuuuuun !\n\nNathann",
    "created_at": "2014-08-25T16:38:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222054",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

How is this for you ? I plan on modifying `orthogonal_array_recursive` now, and turn it into a .pyx file. The only time-consuming operations that occur there are the `find_*` functions which may benefit from C integer variables.

Plus I plan on writing a small function `cdef bint _is_available(k,n)` there that will 1) check the cache 2) call orthogonal_array(k,n,existence=1) if needed: the point is that because this function is a cdef one,  for most calls no Python will be involved at all.

Tell me what you think of this patch, for I cannot begin that if I am not sure that the cache function stay in designs_pyx.

Have fuuuuuun !

Nathann



---

archive/issue_comments_222055.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAfter:\n- moving `orthogonal_array` to `designs_pyx`\n- setting `_OA_cache*` to `cdef` functions\n- creating a `orthogonal_array_available`\nI got 1sec on the first 1200 MOLS.\n\n(I am running the tests right now)",
    "created_at": "2014-08-25T16:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222055",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

After:
- moving `orthogonal_array` to `designs_pyx`
- setting `_OA_cache*` to `cdef` functions
- creating a `orthogonal_array_available`
I got 1sec on the first 1200 MOLS.

(I am running the tests right now)



---

archive/issue_comments_222056.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nConclusion:\n- it is definitely good to switch to C for the cache\n- for that ticket, it would be better to switch the `_OA_cache*` to `cdef` and move at the same time `orthogonal_array` into `designs_pyx` (I can push my commit without the `orthogonal_array_available`)\n- to go further it might be a good idea to try the cythonization of the find-part of `orthogonal_array_recursive`\n\nVincent",
    "created_at": "2014-08-25T16:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222056",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Conclusion:
- it is definitely good to switch to C for the cache
- for that ticket, it would be better to switch the `_OA_cache*` to `cdef` and move at the same time `orthogonal_array` into `designs_pyx` (I can push my commit without the `orthogonal_array_available`)
- to go further it might be a good idea to try the cythonization of the find-part of `orthogonal_array_recursive`

Vincent



---

archive/issue_comments_222057.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n....\n\nWell.. That's kind of what I told you I would do when you will tell me that this patch is okay ?...\n\nThough I wanted to leave orthogonal array in its file. As the `is_available` c function I want to write in the recursive file makes it useless.\n\nNathann",
    "created_at": "2014-08-25T17:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222057",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

....

Well.. That's kind of what I told you I would do when you will tell me that this patch is okay ?...

Though I wanted to leave orthogonal array in its file. As the `is_available` c function I want to write in the recursive file makes it useless.

Nathann



---

archive/issue_comments_222058.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nathanncohen](#comment%3A16):\n> ....\n> \n> Well.. That's kind of what I told you I would do when you will tell me that this patch is okay ?...\n> \n> Though I wanted to leave orthogonal array in its file. As the `is_available` c function I want to write in the recursive file makes it useless.\n\nRight now, the branch `public/16879b` looks good except that you should remove\n\n```\n+              extra_compile_args = ['-g'],\n```\n\nThe diff is not that big, why not doing everything here (i.e. switching to cython for the find-part of `orthogonal_array_recursive`)?\n\nVincent",
    "created_at": "2014-08-25T17:07:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222058",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nathanncohen](#comment%3A16):
> ....
> 
> Well.. That's kind of what I told you I would do when you will tell me that this patch is okay ?...
> 
> Though I wanted to leave orthogonal array in its file. As the `is_available` c function I want to write in the recursive file makes it useless.

Right now, the branch `public/16879b` looks good except that you should remove

```
+              extra_compile_args = ['-g'],
```

The diff is not that big, why not doing everything here (i.e. switching to cython for the find-part of `orthogonal_array_recursive`)?

Vincent



---

archive/issue_comments_222059.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n> Right now, the branch `public/16879b` looks good except that you should remove\n> \n> ```\n> +              extra_compile_args = ['-g'],\n> ```\n\nI pused that to this ticket's branch earlier.\n\n> The diff is not that big, why not doing everything here (i.e. switching to cython for the find-part of `orthogonal_array_recursive`)?\n\nI don't mind, I just split stuff to make it easier for you to review. I'll do that now.\n\nNathann",
    "created_at": "2014-08-25T17:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222059",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

> Right now, the branch `public/16879b` looks good except that you should remove
> 
> ```
> +              extra_compile_args = ['-g'],
> ```

I pused that to this ticket's branch earlier.

> The diff is not that big, why not doing everything here (i.e. switching to cython for the find-part of `orthogonal_array_recursive`)?

I don't mind, I just split stuff to make it easier for you to review. I'll do that now.

Nathann



---

archive/issue_comments_222060.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nNot as impressive as I had hoped. Without the branch it takes 13s to go to n=1000. With the branch it takes 9.65s.\n\nOf course with your prime power improvement it takes 3.4s to go to 1000. and 1.3s for 600.\n\nOkay, let's say that it is a win `:-P`\n\nNathann",
    "created_at": "2014-08-25T17:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222060",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Not as impressive as I had hoped. Without the branch it takes 13s to go to n=1000. With the branch it takes 9.65s.

Of course with your prime power improvement it takes 3.4s to go to 1000. and 1.3s for 600.

Okay, let's say that it is a win `:-P`

Nathann



---

archive/issue_comments_222061.json:
```json
{
    "body": "Changed commit from **[`789533b`](https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e)** to **[`5b1977d`](https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6)**",
    "created_at": "2014-08-25T17:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`789533b`](https://github.com/sagemath/sagetrac-mirror/commit/789533babb6fde4a7745d9b2b846b4957dc9b12e)** to **[`5b1977d`](https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6)**



---

archive/issue_comments_222062.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbe31b726c88e63a64702aae749a0824b12ff5c\"><code>6fbe31b</code></a></td><td><code>trac #16879: orthogonal_array_recursive.py -> pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6\"><code>5b1977d</code></a></td><td><code>trac #16879: a is_available function in orthogonal_arrays_recursive</code></td></tr></table>\n",
    "created_at": "2014-08-25T17:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222062",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbe31b726c88e63a64702aae749a0824b12ff5c"><code>6fbe31b</code></a></td><td><code>trac #16879: orthogonal_array_recursive.py -> pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6"><code>5b1977d</code></a></td><td><code>trac #16879: a is_available function in orthogonal_arrays_recursive</code></td></tr></table>




---

archive/issue_comments_222063.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello,\n\nMore speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.\n\nWhat do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).\n\nVincent",
    "created_at": "2014-08-26T10:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222063",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello,

More speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.

What do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).

Vincent



---

archive/issue_comments_222064.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nYooooooooooo !\n\n> More speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.\n\nCool ! By the way wouldn't `is_available(q+1,q)` be faster than `is_prime_power` at some point ? `:-PPPPPPPPPPPPP`\n\nAnyway, if this `is_prime_power` stuff keeps on slowing us down we will just cache the first 10 000 values and get rid of the problem.\n\n> What do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).\n\nI agree that it would be better to keep this code in Python for the moment, and I began to implement it by moving the functions to `orthogonal_arrays.py`, but I would prefer to keep this file for user-exposed functions if possible. And things like \"construction_3_3\" does not exactly answer that. Aaaaaaand there would be a `orthogonal_arrays_recursive.pyx` which would contain no constructions at all, sooo...\n\nWhat would you think of:\n\n1) Creating a file `orthogonal_arrays_find_recursive.pyx` that contains all the find functions.\n\n2) Rename orthogonal_arrays_recursive to a .py file and keep the constructions there.\n\nNathann",
    "created_at": "2014-08-26T11:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222064",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

Yooooooooooo !

> More speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.

Cool ! By the way wouldn't `is_available(q+1,q)` be faster than `is_prime_power` at some point ? `:-PPPPPPPPPPPPP`

Anyway, if this `is_prime_power` stuff keeps on slowing us down we will just cache the first 10 000 values and get rid of the problem.

> What do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).

I agree that it would be better to keep this code in Python for the moment, and I began to implement it by moving the functions to `orthogonal_arrays.py`, but I would prefer to keep this file for user-exposed functions if possible. And things like "construction_3_3" does not exactly answer that. Aaaaaaand there would be a `orthogonal_arrays_recursive.pyx` which would contain no constructions at all, sooo...

What would you think of:

1) Creating a file `orthogonal_arrays_find_recursive.pyx` that contains all the find functions.

2) Rename orthogonal_arrays_recursive to a .py file and keep the constructions there.

Nathann



---

archive/issue_comments_222065.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment%3A22):\n> Yooooooooooo !\n> \n> > More speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.\n\n> \n> Cool ! By the way wouldn't `is_available(q+1,q)` be faster than `is_prime_power` at some point ? `:-PPPPPPPPPPPPP`\n> \n> Anyway, if this `is_prime_power` stuff keeps on slowing us down we will just cache the first 10 000 values and get rid of the problem.\n\nIt's not the job of `sage.combinat.design`... and note that I work hard to make `is_prime`, `is_prime_power`, `prime_range` and `prime_power_range` faster.\n\n> > What do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).\n\n> \n> I agree that it would be better to keep this code in Python for the moment, and I began to implement it by moving the functions to `orthogonal_arrays.py`, but I would prefer to keep this file for user-exposed functions if possible. And things like \"construction_3_3\" does not exactly answer that. Aaaaaaand there would be a `orthogonal_arrays_recursive.pyx` which would contain no constructions at all, sooo...\n> \n> What would you think of:\n> \n> 1) Creating a file `orthogonal_arrays_find_recursive.pyx` that contains all the find functions.\n> \n> 2) Rename orthogonal_arrays_recursive to a .py file and keep the constructions there.\n\nPerfect... why not `orthogonal_arrays_build_recursive.py` it would be even clearer.\n\nVincent",
    "created_at": "2014-08-26T11:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222065",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment%3A22):
> Yooooooooooo !
> 
> > More speed up at `public/16879c` (pass from 14.2sec to 13.6sec for the first 1200 MOLS). Now that `is_available` is a cdef, it is the fastest to call so we should always try this one first.

> 
> Cool ! By the way wouldn't `is_available(q+1,q)` be faster than `is_prime_power` at some point ? `:-PPPPPPPPPPPPP`
> 
> Anyway, if this `is_prime_power` stuff keeps on slowing us down we will just cache the first 10 000 values and get rid of the problem.

It's not the job of `sage.combinat.design`... and note that I work hard to make `is_prime`, `is_prime_power`, `prime_range` and `prime_power_range` faster.

> > What do you think about moving the actual constructions in `orthogonal_arrays.py` and globally import them in `orthogonal_array_recursive.py`? I do not like to have them in Cython (it takes lifetime to compile, you get ugly backtrace, ...).

> 
> I agree that it would be better to keep this code in Python for the moment, and I began to implement it by moving the functions to `orthogonal_arrays.py`, but I would prefer to keep this file for user-exposed functions if possible. And things like "construction_3_3" does not exactly answer that. Aaaaaaand there would be a `orthogonal_arrays_recursive.pyx` which would contain no constructions at all, sooo...
> 
> What would you think of:
> 
> 1) Creating a file `orthogonal_arrays_find_recursive.pyx` that contains all the find functions.
> 
> 2) Rename orthogonal_arrays_recursive to a .py file and keep the constructions there.

Perfect... why not `orthogonal_arrays_build_recursive.py` it would be even clearer.

Vincent



---

archive/issue_comments_222066.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYoooooooo !\n\n> It's not the job of `sage.combinat.design`... and note that I work hard to make `is_prime`, `is_prime_power`, `prime_range` and `prime_power_range` faster.\n\nI wonder about that: guys who work on number theory may work differently, or work on very large numbers for which it makes no difference. Or use the heuristics directly. What you do is useful for everybody indeed (and clearly for us too), but if we can save some new seconds with a small cache, why not ?\n\n> Perfect... why not `orthogonal_arrays_build_recursive.py` it would be even clearer.\n\nBecause the file already exists like that... But yes, why not ? I will upload a commit for that.\n\nNathann",
    "created_at": "2014-08-26T11:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222066",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

Yoooooooo !

> It's not the job of `sage.combinat.design`... and note that I work hard to make `is_prime`, `is_prime_power`, `prime_range` and `prime_power_range` faster.

I wonder about that: guys who work on number theory may work differently, or work on very large numbers for which it makes no difference. Or use the heuristics directly. What you do is useful for everybody indeed (and clearly for us too), but if we can save some new seconds with a small cache, why not ?

> Perfect... why not `orthogonal_arrays_build_recursive.py` it would be even clearer.

Because the file already exists like that... But yes, why not ? I will upload a commit for that.

Nathann



---

archive/issue_events_239091.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-26T14:35:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239091"
}
```



---

archive/issue_events_239092.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-26T14:35:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239092"
}
```



---

archive/issue_comments_222067.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/613d30a4a3e5796bbc353f8c734e8f9a144acfa9\"><code>613d30a</code></a></td><td><code>trac #16879: more speed up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d927f2dfd04163a1961b2a2a77bbfde90476f9e\"><code>4d927f2</code></a></td><td><code>trac #16879: rename orthogonal_arrays_recursive to orthogonal_arrays_find_recursive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33523712ee72de9881a422850d8055c40e72579e\"><code>3352371</code></a></td><td><code>trac #16879: Move constructions from orthogonal_arrays_find to orthogonal_arrays_build (this, and only this)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a42144dbe791ffb54d875f2b6aecbeefb5a11b56\"><code>a42144d</code></a></td><td><code>trac #16879: Fix the import statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf\"><code>3db376f</code></a></td><td><code>trac #16879: Fix the doc</code></td></tr></table>\n",
    "created_at": "2014-08-26T14:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222067",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/613d30a4a3e5796bbc353f8c734e8f9a144acfa9"><code>613d30a</code></a></td><td><code>trac #16879: more speed up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d927f2dfd04163a1961b2a2a77bbfde90476f9e"><code>4d927f2</code></a></td><td><code>trac #16879: rename orthogonal_arrays_recursive to orthogonal_arrays_find_recursive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33523712ee72de9881a422850d8055c40e72579e"><code>3352371</code></a></td><td><code>trac #16879: Move constructions from orthogonal_arrays_find to orthogonal_arrays_build (this, and only this)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a42144dbe791ffb54d875f2b6aecbeefb5a11b56"><code>a42144d</code></a></td><td><code>trac #16879: Fix the import statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf"><code>3db376f</code></a></td><td><code>trac #16879: Fix the doc</code></td></tr></table>




---

archive/issue_comments_222068.json:
```json
{
    "body": "Changed commit from **[`5b1977d`](https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6)** to **[`3db376f`](https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf)**",
    "created_at": "2014-08-26T14:36:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222068",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5b1977d`](https://github.com/sagemath/sagetrac-mirror/commit/5b1977dca2ad045051e337f0f96c860ce245fdb6)** to **[`3db376f`](https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf)**



---

archive/issue_events_239093.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-26T16:06:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239093"
}
```



---

archive/issue_events_239094.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-26T16:06:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239094"
}
```



---

archive/issue_comments_222069.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHello,\n\nWhy `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.\n\nOne commit at `public/16879c`... it appears that:\n- `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)\n- the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized\n- after a `%crun`, we still have to work on `find_wilson_decomposition_with_two_truncated_groups` and `find_recursive_find_construction_3_3`\n\nVincent",
    "created_at": "2014-08-26T16:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222069",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Hello,

Why `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.

One commit at `public/16879c`... it appears that:
- `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)
- the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized
- after a `%crun`, we still have to work on `find_wilson_decomposition_with_two_truncated_groups` and `find_recursive_find_construction_3_3`

Vincent



---

archive/issue_comments_222070.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYo !\n\n> Why `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.\n\nI don't know if it will be inlined in this case. Probably we don't care.\n\n> One commit at `public/16879c`... it appears that:\n> - `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)\n\nOkay.\n\n> - the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized\n\nPerhaps, but your fix is ugly.\n\n> - after a `%crun`, we still have to work on `find_wilson_decomposition_with_two_truncated_groups` and `find_recursive_find_construction_3_3`\n\nYep.\n\nWhat's the problem with only importing the functions when you need them ?\n\nNathann",
    "created_at": "2014-08-26T22:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222070",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Yo !

> Why `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.

I don't know if it will be inlined in this case. Probably we don't care.

> One commit at `public/16879c`... it appears that:
> - `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)

Okay.

> - the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized

Perhaps, but your fix is ugly.

> - after a `%crun`, we still have to work on `find_wilson_decomposition_with_two_truncated_groups` and `find_recursive_find_construction_3_3`

Yep.

What's the problem with only importing the functions when you need them ?

Nathann



---

archive/issue_comments_222071.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@nathanncohen](#comment%3A28):\n> Yo !\n> \n> > Why `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.\n\n> \n> I don't know if it will be inlined in this case. Probably we don't care.\n\nLet's keep it where it is right now. But I am not sure at that point that we care a C function call.\n\n> > One commit at `public/16879c`... it appears that:\n> > - `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)\n\n> \n> Okay.\n> \n> > - the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized\n\n> \n> Perhaps, but your fix is ugly.\n\nIt depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?\n\n> What's the problem with only importing the functions when you need them ?\n\nIt is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!\n\nVincent",
    "created_at": "2014-08-26T22:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222071",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@nathanncohen](#comment%3A28):
> Yo !
> 
> > Why `is_available` is in `orthogonal_arrays_find_recursive` instead of `designs_pyx`? Even if it is `cdef` you can cimport it.

> 
> I don't know if it will be inlined in this case. Probably we don't care.

Let's keep it where it is right now. But I am not sure at that point that we care a C function call.

> > One commit at `public/16879c`... it appears that:
> > - `divisors` is really slow and it is better to do a stupid loop and check divisibility (might not be True for integer > 1000)

> 
> Okay.
> 
> > - the kind of loop `for m in [1]+range(min(k,19), 122):` is very badly cythonized

> 
> Perhaps, but your fix is ugly.

It depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?

> What's the problem with only importing the functions when you need them ?

It is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!

Vincent



---

archive/issue_comments_222072.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYo !\n\n> Let's keep it where it is right now. But I am not sure at that point that we care a C function call.\n\nI don't think we do either.\n\n> It depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?\n\nI look at the code I work with. I agree that it may be nice to improve it, but not at that cost, this is ugly.\n\n> > What's the problem with only importing the functions when you need them ?\n\n> \n> It is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!\n\nShow me the cost of those or leave the code as it is.\n\nNathann",
    "created_at": "2014-08-26T22:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222072",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Yo !

> Let's keep it where it is right now. But I am not sure at that point that we care a C function call.

I don't think we do either.

> It depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?

I look at the code I work with. I agree that it may be nice to improve it, but not at that cost, this is ugly.

> > What's the problem with only importing the functions when you need them ?

> 
> It is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!

Show me the cost of those or leave the code as it is.

Nathann



---

archive/issue_comments_222073.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nathanncohen](#comment%3A30):\n> > It depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?\n\n> \n> I look at the code I work with. I agree that it may be nice to improve it, but not at that cost, this is ugly.\n\nI understand, but there is really something to improve here... no problem to remove my modifications but then what?\n\n> > > What's the problem with only importing the functions when you need them ?\n\n> > \n> > It is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!\n\n> \n> Show me the cost of those or leave the code as it is.\n\nA very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)\n- with the head at 093ace3 (with the imports as you did): 12.9 s\n- with the head at 680d22b (with the import on top): 12.7 s\n\nVincent",
    "created_at": "2014-08-26T23:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222073",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nathanncohen](#comment%3A30):
> > It depends where you look at! The C code of the first version was definitely ugly! Do you have a better idea to make it work?

> 
> I look at the code I work with. I agree that it may be nice to improve it, but not at that cost, this is ugly.

I understand, but there is really something to improve here... no problem to remove my modifications but then what?

> > > What's the problem with only importing the functions when you need them ?

> > 
> > It is slower. An import of an already imported library cost (as you saw with the move imports from #16875). Not a lot, but repeated it does!

> 
> Show me the cost of those or leave the code as it is.

A very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)
- with the head at 093ace3 (with the imports as you did): 12.9 s
- with the head at 680d22b (with the import on top): 12.7 s

Vincent



---

archive/issue_comments_222074.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nHelloooooo !!!\n\n> I understand, but there is really something to improve here... no problem to remove my modifications but then what?\n\nWhat about forgetting the lower bound ? This trick was there to save calls to `orthogonal_array(existence=True)` but now that we have this cdef function it's fine and it does not cost very much to check whether there exists a `OA(q+15,q)`. And it will become the the usual for loop afterward, with the 'range' replaced by C code.\n\n> A very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)\n> - with the head at 093ace3 (with the imports as you did): 12.9 s\n> - with the head at 680d22b (with the import on top): 12.7 s\n\nGod. It can actually be detected ? `O_o`\n\nCrazy. Okay, so we keep that. Damn imports.\n\nBy the way, the `%` and `/` and `//` operators are not translated into pure Cython code as they should. There is still some Python code about handling the /0 and %0 cases. There is a workaround though:\n\nhttps://github.com/cython/cython/wiki/enhancements-division\n\nNathann",
    "created_at": "2014-08-27T08:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222074",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

Helloooooo !!!

> I understand, but there is really something to improve here... no problem to remove my modifications but then what?

What about forgetting the lower bound ? This trick was there to save calls to `orthogonal_array(existence=True)` but now that we have this cdef function it's fine and it does not cost very much to check whether there exists a `OA(q+15,q)`. And it will become the the usual for loop afterward, with the 'range' replaced by C code.

> A very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)
> - with the head at 093ace3 (with the imports as you did): 12.9 s
> - with the head at 680d22b (with the import on top): 12.7 s

God. It can actually be detected ? `O_o`

Crazy. Okay, so we keep that. Damn imports.

By the way, the `%` and `/` and `//` operators are not translated into pure Cython code as they should. There is still some Python code about handling the /0 and %0 cases. There is a workaround though:

https://github.com/cython/cython/wiki/enhancements-division

Nathann



---

archive/issue_comments_222075.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@nathanncohen](#comment%3A32):\n> Helloooooo !!!\n> \n> > I understand, but there is really something to improve here... no problem to remove my modifications but then what?\n\n> \n> What about forgetting the lower bound ? This trick was there to save calls to `orthogonal_array(existence=True)` but now that we have this cdef function it's fine and it does not cost very much to check whether there exists a `OA(q+15,q)`. And it will become the the usual for loop afterward, with the 'range' replaced by C code.\n\nNope. I made a mistake the first time I tried and just set the lower bound to k+1 instead of 1. And guess what... you win like 2 secs (and all tests pass)! There are three level of loops and adding one test case to the first one costs. I can redo the timings if you wish.\n\nIt would be a good thing to see if corner cases (like m=1 or t=1 in Wilson constructions with one or two truncated blocks) are not handled by other constructions. These corner cases seem to be really expansive.\n\nAn other idea would be to have only one find function for product + wilson one truncated + wilson two truncated.\n\n> > A very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)\n> > - with the head at 093ace3 (with the imports as you did): 12.9 s\n> > - with the head at 680d22b (with the import on top): 12.7 s\n\n> \n> God. It can actually be detected ? `O_o`\n\nNot really. I would have said that 0.02 seconds is not significant (see the timings below). But still you have strange conventions: sometimes you put the import as the first line of the function and sometimes you put the import just before the return. I would prefer to have everything standardized (and I guess just before return is faster).\n\n> By the way, the `%` and `/` and `//` operators are not translated into pure Cython code as they should. There is still some Python code about handling the /0 and %0 cases. There is a workaround though:\n> \n> https://github.com/cython/cython/wiki/enhancements-division\n> \n\nWTF. With pure C variable we still get some crazy Python translations! Cython is sometimes very nice but sometimes really annoying. I dream of a special flag that allows you to say \"do not translate this block to anything, this is pure C and I known what I am doing\".\n\nTimings:\n\n```\ncommit 3db376f043c01b5ff58e46a845bb69e704c1eacf (yours)\nMOLS_table(30)    4.66 s\nMOLS_table(60)   13.4  s\nMOLS_table(90)   26.3  s\n\ncommit 093ace30591e1beed6296c9e5bd16afa37188e4b (my first set of optim)\nMOLS_table(30)    4.4  s\nMOLS_table(60)   12.7  s\nMOLS_table(90)   24.6  s\n\ncommit 680d22b2d7dba0c39a0953be1532590ec6bd7113 (the imports)\nMOLS_table(30)    4.42 s\nMOLS_table(60)   12.7  s\nMOLS_table(90)   24.2  s\n```\n\nconclusion: the win of moving the imports part is small. Depending on what you think for this ticket I will split my first commit to see what matters.\n\nVincent",
    "created_at": "2014-08-27T08:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222075",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@nathanncohen](#comment%3A32):
> Helloooooo !!!
> 
> > I understand, but there is really something to improve here... no problem to remove my modifications but then what?

> 
> What about forgetting the lower bound ? This trick was there to save calls to `orthogonal_array(existence=True)` but now that we have this cdef function it's fine and it does not cost very much to check whether there exists a `OA(q+15,q)`. And it will become the the usual for loop afterward, with the 'range' replaced by C code.

Nope. I made a mistake the first time I tried and just set the lower bound to k+1 instead of 1. And guess what... you win like 2 secs (and all tests pass)! There are three level of loops and adding one test case to the first one costs. I can redo the timings if you wish.

It would be a good thing to see if corner cases (like m=1 or t=1 in Wilson constructions with one or two truncated blocks) are not handled by other constructions. These corner cases seem to be really expansive.

An other idea would be to have only one find function for product + wilson one truncated + wilson two truncated.

> > A very big cost, indeed!! I split the commits into two. The second one is about imports. The following timings refer to %time MOLS_table(60)
> > - with the head at 093ace3 (with the imports as you did): 12.9 s
> > - with the head at 680d22b (with the import on top): 12.7 s

> 
> God. It can actually be detected ? `O_o`

Not really. I would have said that 0.02 seconds is not significant (see the timings below). But still you have strange conventions: sometimes you put the import as the first line of the function and sometimes you put the import just before the return. I would prefer to have everything standardized (and I guess just before return is faster).

> By the way, the `%` and `/` and `//` operators are not translated into pure Cython code as they should. There is still some Python code about handling the /0 and %0 cases. There is a workaround though:
> 
> https://github.com/cython/cython/wiki/enhancements-division
> 

WTF. With pure C variable we still get some crazy Python translations! Cython is sometimes very nice but sometimes really annoying. I dream of a special flag that allows you to say "do not translate this block to anything, this is pure C and I known what I am doing".

Timings:

```
commit 3db376f043c01b5ff58e46a845bb69e704c1eacf (yours)
MOLS_table(30)    4.66 s
MOLS_table(60)   13.4  s
MOLS_table(90)   26.3  s

commit 093ace30591e1beed6296c9e5bd16afa37188e4b (my first set of optim)
MOLS_table(30)    4.4  s
MOLS_table(60)   12.7  s
MOLS_table(90)   24.6  s

commit 680d22b2d7dba0c39a0953be1532590ec6bd7113 (the imports)
MOLS_table(30)    4.42 s
MOLS_table(60)   12.7  s
MOLS_table(90)   24.2  s
```

conclusion: the win of moving the imports part is small. Depending on what you think for this ticket I will split my first commit to see what matters.

Vincent



---

archive/issue_comments_222076.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nYo !\n\n> It would be a good thing to see if corner cases (like m=1 or t=1 in Wilson constructions with one or two truncated blocks) are not handled by other constructions. These corner cases seem to be really expansive.\n\nHmmm.. I thought I had a way but it turned out to be wrong. 2sc seems a lot though `O_o`\n\n> An other idea would be to have only one find function for product + wilson one truncated + wilson two truncated.\n\nWe would only save the time it takes to run the product+wilson constructions. Either way let's do this on another ticket.\n\n> Not really. I would have said that 0.02 seconds is not significant (see the timings below). But still you have strange conventions: sometimes you put the import as the first line of the function and sometimes you put the import just before the return. I would prefer to have everything standardized (and I guess just before return is faster).\n\nI did it this way for the brouwer function because I would have had to add 4 different imports in the same function otherwise.\n\n> WTF. With pure C variable we still get some crazy Python translations! Cython is sometimes very nice but sometimes really annoying. I dream of a special flag that allows you to say \"do not translate this block to anything, this is pure C and I known what I am doing\".\n\nWe can actually add this at the top of the file (before the module's doc)\n\n```\n# cython: cdivision=True\n```\n\nOther flags are listed there if you are interested:\nhttps://github.com/cython/cython/wiki/enhancements-compilerdirectives\n\n> conclusion: the win of moving the imports part is small. Depending on what you think for this ticket I will split my first commit to see what matters.\n\nI don't mind the imports, if it can be detected then no problem. I just don't want reviews to become \"coding style fights\"..... I do mind the 10 lines in exchange for the bad \"for', though `:-P`\n\nCan we keep this as it is until we find a proper way to avoid it ?\n\nNathann\n\nP.S. : Sorry for the delay, I am kind of on \"holidays\" this week. But seeing how this goes I feel that I may escape and go back to work much sooner than expected.",
    "created_at": "2014-08-27T11:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222076",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

Yo !

> It would be a good thing to see if corner cases (like m=1 or t=1 in Wilson constructions with one or two truncated blocks) are not handled by other constructions. These corner cases seem to be really expansive.

Hmmm.. I thought I had a way but it turned out to be wrong. 2sc seems a lot though `O_o`

> An other idea would be to have only one find function for product + wilson one truncated + wilson two truncated.

We would only save the time it takes to run the product+wilson constructions. Either way let's do this on another ticket.

> Not really. I would have said that 0.02 seconds is not significant (see the timings below). But still you have strange conventions: sometimes you put the import as the first line of the function and sometimes you put the import just before the return. I would prefer to have everything standardized (and I guess just before return is faster).

I did it this way for the brouwer function because I would have had to add 4 different imports in the same function otherwise.

> WTF. With pure C variable we still get some crazy Python translations! Cython is sometimes very nice but sometimes really annoying. I dream of a special flag that allows you to say "do not translate this block to anything, this is pure C and I known what I am doing".

We can actually add this at the top of the file (before the module's doc)

```
# cython: cdivision=True
```

Other flags are listed there if you are interested:
https://github.com/cython/cython/wiki/enhancements-compilerdirectives

> conclusion: the win of moving the imports part is small. Depending on what you think for this ticket I will split my first commit to see what matters.

I don't mind the imports, if it can be detected then no problem. I just don't want reviews to become "coding style fights"..... I do mind the 10 lines in exchange for the bad "for', though `:-P`

Can we keep this as it is until we find a proper way to avoid it ?

Nathann

P.S. : Sorry for the delay, I am kind of on "holidays" this week. But seeing how this goes I feel that I may escape and go back to work much sooner than expected.



---

archive/issue_comments_222077.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNew review commit at `public/16879c` where\n- all functions have declaration `cpdef find_XXX(int k, int n):`\n- get rid of the `IntegerListsLex`\n- `//` replaced with `/`\n- one occurrence of divisors replaced by a very naive looping\n(but neither ugly loops anymore nor moved import)\n\nIt is essentially a clean up but I win a bit on the current timings\n\n```\nMOLS_table(30)    4.44 s\nMOLS_table(60)   12.9 s\nMOLS_table(90)   25   s\n```\n\nIf you like the review commit at `public/16879c` you can set to positive review.\n\nVincent",
    "created_at": "2014-08-27T12:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222077",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

New review commit at `public/16879c` where
- all functions have declaration `cpdef find_XXX(int k, int n):`
- get rid of the `IntegerListsLex`
- `//` replaced with `/`
- one occurrence of divisors replaced by a very naive looping
(but neither ugly loops anymore nor moved import)

It is essentially a clean up but I win a bit on the current timings

```
MOLS_table(30)    4.44 s
MOLS_table(60)   12.9 s
MOLS_table(90)   25   s
```

If you like the review commit at `public/16879c` you can set to positive review.

Vincent



---

archive/issue_events_239095.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-27T12:31:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239095"
}
```



---

archive/issue_events_239096.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-27T12:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239096"
}
```



---

archive/issue_comments_222078.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nYo !\n\n> New review commit at `public/16879c` where\n> - all functions have declaration `cpdef find_XXX(int k, int n):`\n\nOkay. But they are still called \"python-style\" by `find_recursive_construction` it seems, for they are stored in a list and everything.\n\n> - get rid of the `IntegerListsLex`\n\nCool ! I added a comment to \"remember\" what this part of the code does.\n\n> - `//` replaced with `/`\n\nOkay. It produces the very same C code though.\n\n> - one occurrence of divisors replaced by a very naive looping\n> (but neither ugly loops anymore nor moved import)\n\nOkayyyyy !\n\n> If you like the review commit at `public/16879c` you can set to positive review.\n\nI added a small commit on top. I have to write an `is_quasi_difference_matrix` function but I don't enjoy it very much `T_T`\n\nNathann",
    "created_at": "2014-08-27T12:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222078",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

Yo !

> New review commit at `public/16879c` where
> - all functions have declaration `cpdef find_XXX(int k, int n):`

Okay. But they are still called "python-style" by `find_recursive_construction` it seems, for they are stored in a list and everything.

> - get rid of the `IntegerListsLex`

Cool ! I added a comment to "remember" what this part of the code does.

> - `//` replaced with `/`

Okay. It produces the very same C code though.

> - one occurrence of divisors replaced by a very naive looping
> (but neither ugly loops anymore nor moved import)

Okayyyyy !

> If you like the review commit at `public/16879c` you can set to positive review.

I added a small commit on top. I have to write an `is_quasi_difference_matrix` function but I don't enjoy it very much `T_T`

Nathann



---

archive/issue_comments_222079.json:
```json
{
    "body": "Changed commit from **[`3db376f`](https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf)** to **[`cc0e804`](https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7)**",
    "created_at": "2014-08-27T12:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222079",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3db376f`](https://github.com/sagemath/sagetrac-mirror/commit/3db376f043c01b5ff58e46a845bb69e704c1eacf)** to **[`cc0e804`](https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7)**



---

archive/issue_comments_222080.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da9b5ab076b36a04c93b052ed0a44ce322dd9125\"><code>da9b5ab</code></a></td><td><code>trac #16879: speed up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7\"><code>cc0e804</code></a></td><td><code>trac #16879: Trivial stuff</code></td></tr></table>\n",
    "created_at": "2014-08-27T12:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222080",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da9b5ab076b36a04c93b052ed0a44ce322dd9125"><code>da9b5ab</code></a></td><td><code>trac #16879: speed up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7"><code>cc0e804</code></a></td><td><code>trac #16879: Trivial stuff</code></td></tr></table>




---

archive/issue_events_239097.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-27T12:44:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239097"
}
```



---

archive/issue_events_239098.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-27T12:44:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239098"
}
```



---

archive/issue_comments_222081.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@nathanncohen](#comment%3A36):\n> Yo !\n> \n> > New review commit at `public/16879c` where\n> > - all functions have declaration `cpdef find_XXX(int k, int n):`\n\n> \n> Okay. But they are still called \"python-style\" by `find_recursive_construction` it seems, for they are stored in a list and everything.\n\nRight. Unwraping the loop makes it faster... but I am sure you will not like that ;-)\n\n> > - get rid of the `IntegerListsLex`\n\n> \n> Cool ! I added a comment to \"remember\" what this part of the code does.\n> \n> > - `//` replaced with `/`\n\n> \n> Okay. It produces the very same C code though.\n\nBut I put the flag at the top! The problem is that we do not see the cythonization command.\n\n> > - one occurrence of divisors replaced by a very naive looping\n> > (but neither ugly loops anymore nor moved import)\n\n> \n> Okayyyyy !\n> \n> > If you like the review commit at `public/16879c` you can set to positive review.\n\n> \n\nLet us go and play with something else. We will come back to that kind of optimization later when we will care about `MOLS_table(200)`...\n\nVincent",
    "created_at": "2014-08-27T12:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222081",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@nathanncohen](#comment%3A36):
> Yo !
> 
> > New review commit at `public/16879c` where
> > - all functions have declaration `cpdef find_XXX(int k, int n):`

> 
> Okay. But they are still called "python-style" by `find_recursive_construction` it seems, for they are stored in a list and everything.

Right. Unwraping the loop makes it faster... but I am sure you will not like that ;-)

> > - get rid of the `IntegerListsLex`

> 
> Cool ! I added a comment to "remember" what this part of the code does.
> 
> > - `//` replaced with `/`

> 
> Okay. It produces the very same C code though.

But I put the flag at the top! The problem is that we do not see the cythonization command.

> > - one occurrence of divisors replaced by a very naive looping
> > (but neither ugly loops anymore nor moved import)

> 
> Okayyyyy !
> 
> > If you like the review commit at `public/16879c` you can set to positive review.

> 

Let us go and play with something else. We will come back to that kind of optimization later when we will care about `MOLS_table(200)`...

Vincent



---

archive/issue_comments_222082.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2014-08-27T12:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222082",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_222083.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nYo !\n\n> Right. Unwraping the loop makes it faster... but I am sure you will not like that ;-)\n\nI rather doubt that it would produce any significant improvement.\n\n> But I put the flag at the top! The problem is that we do not see the cythonization command.\n\nNononono, the flag works ! And you can see the C code that it produces with 'sage -cython -a file.pyx' (produces a.html file). What I mean is that with this flag, having '//' or '/' is the very same and that changing them all in the code is useless as far as the C code is concerned.\n\n> Let us go and play with something else. We will come back to that kind of optimization later when we will care about `MOLS_table(200)`...\n\n+1\n\nNathann",
    "created_at": "2014-08-27T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222083",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

Yo !

> Right. Unwraping the loop makes it faster... but I am sure you will not like that ;-)

I rather doubt that it would produce any significant improvement.

> But I put the flag at the top! The problem is that we do not see the cythonization command.

Nononono, the flag works ! And you can see the C code that it produces with 'sage -cython -a file.pyx' (produces a.html file). What I mean is that with this flag, having '//' or '/' is the very same and that changing them all in the code is useless as far as the C code is concerned.

> Let us go and play with something else. We will come back to that kind of optimization later when we will care about `MOLS_table(200)`...

+1

Nathann



---

archive/issue_events_239099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-27T17:59:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239099"
}
```



---

archive/issue_events_239100.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-27T17:59:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239100"
}
```



---

archive/issue_comments_222084.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nMerge failure in src/sage/combinat/designs/database.py",
    "created_at": "2014-08-27T17:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222084",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:40" align="right">comment:40</div>

Merge failure in src/sage/combinat/designs/database.py



---

archive/issue_comments_222085.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nVolker, you work on a version of Sage that exist only on your computer. Can you say where the conflict comes from ?\n\nNathann",
    "created_at": "2014-08-27T18:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222085",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:41" align="right">comment:41</div>

Volker, you work on a version of Sage that exist only on your computer. Can you say where the conflict comes from ?

Nathann



---

archive/issue_comments_222086.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nIf you don't know then just wait for beta2",
    "created_at": "2014-08-27T18:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222086",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">comment:42</div>

If you don't know then just wait for beta2



---

archive/issue_comments_222087.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n> If you don't know then just wait for beta2\n\nThen please release this beta2, beacuse you do not achieve anything by setting this patch in `needs_work` while not giving me any way to fix it. As you can see by clicking on the \"commits\" link, this patch has an history of around ~50 commits that are only linked together on your own computer. And it is rather hard to work with this amount of dependencies \"in the dark\".\n\nNathann",
    "created_at": "2014-08-28T18:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222087",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:43" align="right">comment:43</div>

> If you don't know then just wait for beta2

Then please release this beta2, beacuse you do not achieve anything by setting this patch in `needs_work` while not giving me any way to fix it. As you can see by clicking on the "commits" link, this patch has an history of around ~50 commits that are only linked together on your own computer. And it is rather hard to work with this amount of dependencies "in the dark".

Nathann



---

archive/issue_comments_222088.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c207f015e0715cd4504767ed641ea33d8be1b1fb\"><code>c207f01</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80e0ceff43edca6fd46d99ee3e3f4b452200a5da\"><code>80e0cef</code></a></td><td><code>trac #16879: orthogonal_array_recursive.py -> pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054911031ccdf219a52dbc4a83a5d0e7376541d7\"><code>0549110</code></a></td><td><code>trac #16879: a is_available function in orthogonal_arrays_recursive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0201bcb08be6a4dad3a9d8eec1c9302e88b29328\"><code>0201bcb</code></a></td><td><code>trac #16879: more speed up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1100184a070d350a0a537527485eb02ef87a6b8\"><code>b110018</code></a></td><td><code>trac #16879: rename orthogonal_arrays_recursive to orthogonal_arrays_find_recursive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9e04753f45301c24c8c0811ae215cd4d7885aa2\"><code>d9e0475</code></a></td><td><code>trac #16879: Move constructions from orthogonal_arrays_find to orthogonal_arrays_build (this, and only this)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5031aee11c668df05d0d955292f7111ffbb985c0\"><code>5031aee</code></a></td><td><code>trac #16879: Fix the import statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c1893f75b17657458a441e512a00be0ceba7728\"><code>0c1893f</code></a></td><td><code>trac #16879: Fix the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a3869d56d0458e66f4e427f2e9c2930157dd141\"><code>6a3869d</code></a></td><td><code>trac #16879: speed up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d\"><code>d7129d6</code></a></td><td><code>trac #16879: Trivial stuff</code></td></tr></table>\n",
    "created_at": "2014-08-28T22:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c207f015e0715cd4504767ed641ea33d8be1b1fb"><code>c207f01</code></a></td><td><code>trac #16879: OA caching in C</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80e0ceff43edca6fd46d99ee3e3f4b452200a5da"><code>80e0cef</code></a></td><td><code>trac #16879: orthogonal_array_recursive.py -> pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054911031ccdf219a52dbc4a83a5d0e7376541d7"><code>0549110</code></a></td><td><code>trac #16879: a is_available function in orthogonal_arrays_recursive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0201bcb08be6a4dad3a9d8eec1c9302e88b29328"><code>0201bcb</code></a></td><td><code>trac #16879: more speed up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1100184a070d350a0a537527485eb02ef87a6b8"><code>b110018</code></a></td><td><code>trac #16879: rename orthogonal_arrays_recursive to orthogonal_arrays_find_recursive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9e04753f45301c24c8c0811ae215cd4d7885aa2"><code>d9e0475</code></a></td><td><code>trac #16879: Move constructions from orthogonal_arrays_find to orthogonal_arrays_build (this, and only this)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5031aee11c668df05d0d955292f7111ffbb985c0"><code>5031aee</code></a></td><td><code>trac #16879: Fix the import statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c1893f75b17657458a441e512a00be0ceba7728"><code>0c1893f</code></a></td><td><code>trac #16879: Fix the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a3869d56d0458e66f4e427f2e9c2930157dd141"><code>6a3869d</code></a></td><td><code>trac #16879: speed up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d"><code>d7129d6</code></a></td><td><code>trac #16879: Trivial stuff</code></td></tr></table>




---

archive/issue_comments_222089.json:
```json
{
    "body": "Changed commit from **[`cc0e804`](https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7)** to **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**",
    "created_at": "2014-08-28T22:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc0e804`](https://github.com/sagemath/sagetrac-mirror/commit/cc0e804efc31f83e5be7fcc694416ae4a78114e7)** to **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**



---

archive/issue_events_239101.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-28T22:23:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239101"
}
```



---

archive/issue_events_239102.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-28T22:23:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239102"
}
```



---

archive/issue_comments_222090.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nRebased !\n\nNathann",
    "created_at": "2014-08-28T22:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222090",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:45" align="right">comment:45</div>

Rebased !

Nathann



---

archive/issue_events_239103.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-06T11:02:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239103"
}
```



---

archive/issue_events_239104.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7528eb3ee291cb11d3f53cc78392266159d89744",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-09-06T11:02:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16879#event-239104"
}
```



---

archive/issue_comments_222091.json:
```json
{
    "body": "Changed branch from **[public/16879](https://github.com/sagemath/sagetrac-mirror/tree/public/16879)** to **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**",
    "created_at": "2014-09-06T11:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16879#issuecomment-222091",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16879](https://github.com/sagemath/sagetrac-mirror/tree/public/16879)** to **[`d7129d6`](https://github.com/sagemath/sagetrac-mirror/commit/d7129d6e80c8d3eb11d09e2cd620882a14d6e73d)**
