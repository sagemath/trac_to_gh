# Issue 16738: Shortening some very long cluster doctests

archive/issues_016501.json:
```json
{
    "body": "After discussion about #16609, some very long doctests in mutation_type.py are much too long. And they are not really useful (they were used to test the correctness of rather long algorithms). Let us remove them now.\n\nhttps://groups.google.com/forum/#!topic/sage-devel/k3kIRIk475A\n\nCC:  stumpc5 gmoose05\n\nKeywords: cluster\n\nReviewer: Christian Stump\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: 1b4a3bebf4443d5bbc543b3fa618790c801f2055\n\nCommit: 1b4a3bebf4443d5bbc543b3fa618790c801f2055\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16738\n\n",
    "closed_at": "2014-08-04T16:03:17Z",
    "created_at": "2014-07-30T07:53:29Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Shortening some very long cluster doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16738",
    "user": "https://github.com/fchapoton"
}
```
After discussion about #16609, some very long doctests in mutation_type.py are much too long. And they are not really useful (they were used to test the correctness of rather long algorithms). Let us remove them now.

https://groups.google.com/forum/#!topic/sage-devel/k3kIRIk475A

CC:  stumpc5 gmoose05

Keywords: cluster

Reviewer: Christian Stump

Author: Frédéric Chapoton

Branch: 1b4a3bebf4443d5bbc543b3fa618790c801f2055

Commit: 1b4a3bebf4443d5bbc543b3fa618790c801f2055

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16738





---

archive/issue_comments_216762.json:
```json
{
    "body": "Changing keywords from \"\" to \"cluster\".",
    "created_at": "2014-07-30T07:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216762",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "cluster".



---

archive/issue_comments_216763.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2014-07-30T07:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216763",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_216764.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-07-30T07:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216764",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_216765.json:
```json
{
    "body": "<a id='comment:3'></a>I'll review it, let me know once you it's ready. Also: thanks for doing it!",
    "created_at": "2014-07-30T13:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216765",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:3'></a>I'll review it, let me know once you it's ready. Also: thanks for doing it!



---

archive/issue_comments_216766.json:
```json
{
    "body": "<a id='comment:4'></a>Hello Christian,\n\nthanks for your time. I think it is ready for review. I have kept only the simplest tests about rank 2, marking the longer ones with `# not tested`. I think these functions were used to check thoroughly that there was no mistake in the code. One should keep them in the code to be able to run them if some mistake appears at some point, but it does not look necessary to run them every time.\n\nI have also taken this opportunity to do some little code formatting, like \n* lines of length at most 80\n* pep8 standard for code (no space after or before parenthesis, etc)\n* removed a lot of unused import statements (found with pyflakes)\n* comment out 2 unused variables",
    "created_at": "2014-07-30T13:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216766",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>Hello Christian,

thanks for your time. I think it is ready for review. I have kept only the simplest tests about rank 2, marking the longer ones with `# not tested`. I think these functions were used to check thoroughly that there was no mistake in the code. One should keep them in the code to be able to run them if some mistake appears at some point, but it does not look necessary to run them every time.

I have also taken this opportunity to do some little code formatting, like 
* lines of length at most 80
* pep8 standard for code (no space after or before parenthesis, etc)
* removed a lot of unused import statements (found with pyflakes)
* comment out 2 unused variables



---

archive/issue_comments_216767.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 chapoton]:\n\nOkay, I'll look throught it then...",
    "created_at": "2014-07-30T14:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216767",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:5'></a>Replying to [comment:4 chapoton]:

Okay, I'll look throught it then...



---

archive/issue_comments_216768.json:
```json
{
    "body": "<a id='comment:6'></a>out of curiosity: is the \"lines of length at most 80\" rule some sort of standard? I personally find it not very pleasant to be forced to only see 80 characters in a line.",
    "created_at": "2014-07-30T14:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216768",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:6'></a>out of curiosity: is the "lines of length at most 80" rule some sort of standard? I personally find it not very pleasant to be forced to only see 80 characters in a line.



---

archive/issue_comments_216769.json:
```json
{
    "body": "<a id='comment:7'></a>This is part of the pep8 code style guide:\n\nhttp://legacy.python.org/dev/peps/pep-0008/\n\nand we are told to try to follow that in sage here:\n\nhttp://www.sagemath.org/doc/developer/coding_basics.html",
    "created_at": "2014-07-30T15:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216769",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>This is part of the pep8 code style guide:

http://legacy.python.org/dev/peps/pep-0008/

and we are told to try to follow that in sage here:

http://www.sagemath.org/doc/developer/coding_basics.html



---

archive/issue_comments_216770.json:
```json
{
    "body": "<a id='comment:8'></a>I'd prefer to keep the tests (they are still useful to check that one doesn't accidentally break the code). But with less than 100-fold repetition, of course. I.e. k=10 or maybe 1.",
    "created_at": "2014-07-31T00:55:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216770",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>I'd prefer to keep the tests (they are still useful to check that one doesn't accidentally break the code). But with less than 100-fold repetition, of course. I.e. k=10 or maybe 1.



---

archive/issue_comments_216771.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-31T08:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216771",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_216772.json:
```json
{
    "body": "<a id='comment:10'></a>Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.",
    "created_at": "2014-07-31T08:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216772",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.



---

archive/issue_comments_216773.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 chapoton]:\n> Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.\n\n\nI think that these `_random_multi_tests` are not worth doing a single time. Even doing them 100 times, it is unlikely to trigger a bug in the code (when working on that certainly tooo complicated functions, I had to do those tests 10000s of times to find possible issues). So I would still tag them as `{# not tested` since those 1.5sec of testing for practically no advantage doesn't seem to be worth spending on doctesting.",
    "created_at": "2014-07-31T08:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216773",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:11'></a>Replying to [comment:10 chapoton]:
> Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.


I think that these `_random_multi_tests` are not worth doing a single time. Even doing them 100 times, it is unlikely to trigger a bug in the code (when working on that certainly tooo complicated functions, I had to do those tests 10000s of times to find possible issues). So I would still tag them as `{# not tested` since those 1.5sec of testing for practically no advantage doesn't seem to be worth spending on doctesting.



---

archive/issue_comments_216774.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-31T09:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216774",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_216775.json:
```json
{
    "body": "<a id='comment:13'></a>The patchbot is green. Christian, do you agree with current state ?",
    "created_at": "2014-08-01T20:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216775",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>The patchbot is green. Christian, do you agree with current state ?



---

archive/issue_comments_216776.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-03T06:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216776",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_216777.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-04T16:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16738#issuecomment-216777",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-04T16:03:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16738",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16738#event-49031"
}
```
