# Issue 16548: FiniteStateMachine: enhance _composition_explorative_

archive/issues_016311.json:
```json
{
    "assignees": [],
    "body": "At the moment, there is a `NotImplementedError` if `FiniteStateMachine._composition_explorative_` is used with a transducer with non-empty final word out.\n\nFurthermore, `_composition_explorative_` could not handle non-deterministic machines.\n\nBoth is now changed by using `FiniteStateMachine.process`.\n\nDepends on #16538\nDepends on #16758\n\nCC:  @dkrenn @cheuberg\n\nKeywords: **finite_state_machine, composition**\n\nBranch/Commit: **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**\n\nReviewer: **Daniel Krenn**\n\nAuthor: **Clemens Heuberger**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16548_\n\n",
    "closed_at": "2015-02-17T20:50:33Z",
    "created_at": "2014-06-26T06:28:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20finite%20state%20machines",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "FiniteStateMachine: enhance _composition_explorative_",
    "type": "issue",
    "updated_at": "2015-02-17T20:50:33Z",
    "url": "https://github.com/sagemath/sage/issues/16548",
    "user": "https://github.com/sagetrac-skropf"
}
```
At the moment, there is a `NotImplementedError` if `FiniteStateMachine._composition_explorative_` is used with a transducer with non-empty final word out.

Furthermore, `_composition_explorative_` could not handle non-deterministic machines.

Both is now changed by using `FiniteStateMachine.process`.

Depends on #16538
Depends on #16758

CC:  @dkrenn @cheuberg

Keywords: **finite_state_machine, composition**

Branch/Commit: **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**

Reviewer: **Daniel Krenn**

Author: **Clemens Heuberger**

_Issue created by migration from https://trac.sagemath.org/ticket/16548_





---

archive/issue_events_210919.json:
```json
{
    "actor": "https://github.com/sagetrac-skropf",
    "created_at": "2014-06-26T06:28:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210919"
}
```



---

archive/issue_events_210920.json:
```json
{
    "actor": "https://github.com/sagetrac-skropf",
    "created_at": "2014-06-26T06:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20finite%20state%20machines",
    "label_color": "0000ff",
    "label_name": "component: finite state machines",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210920"
}
```



---

archive/issue_events_210921.json:
```json
{
    "actor": "https://github.com/sagetrac-skropf",
    "created_at": "2014-06-26T06:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210921"
}
```



---

archive/issue_events_210922.json:
```json
{
    "actor": "https://github.com/sagetrac-skropf",
    "created_at": "2014-06-26T06:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210922"
}
```



---

archive/issue_comments_217305.json:
```json
{
    "body": "Changed keywords from **finite_state_machine** to **finite_state_machine, composition**",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217305",
    "user": "https://github.com/cheuberg"
}
```

Changed keywords from **finite_state_machine** to **finite_state_machine, composition**



---

archive/issue_comments_217306.json:
```json
{
    "body": "Commit: **[9741adc](https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c)**",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217306",
    "user": "https://github.com/cheuberg"
}
```

Commit: **[9741adc](https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c)**



---

archive/issue_events_210923.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-08-05T18:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210923"
}
```



---

archive/issue_comments_217307.json:
```json
{
    "body": "Changed dependencies from **#16538** to **#16538, #16758**",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217307",
    "user": "https://github.com/cheuberg"
}
```

Changed dependencies from **#16538** to **#16538, #16758**



---

archive/issue_comments_217308.json:
```json
{
    "body": "Branch: **[u/cheuberg/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/composition)**",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217308",
    "user": "https://github.com/cheuberg"
}
```

Branch: **[u/cheuberg/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/composition)**



---

archive/issue_comments_217309.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n At the moment, there is a `NotImplementedError` if `FiniteStateMachine._composition_explorative_` is used with a transducer with non-empty final word out.\n \n-This will be changed by using `FiniteStateMachine.process` when #16538 is fixed.\n+Furthermore, `_composition_explorative_` could not handle non-deterministic machines.\n+\n+Both is now changed by using `FiniteStateMachine.process`.\n``````\n",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217309",
    "user": "https://github.com/cheuberg"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 At the moment, there is a `NotImplementedError` if `FiniteStateMachine._composition_explorative_` is used with a transducer with non-empty final word out.
 
-This will be changed by using `FiniteStateMachine.process` when #16538 is fixed.
+Furthermore, `_composition_explorative_` could not handle non-deterministic machines.
+
+Both is now changed by using `FiniteStateMachine.process`.
``````




---

archive/issue_comments_217310.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61f6acf619b2c13010ea4c420743fc05fededc8b\">61f6acf</a></td><td><code>trac #16758: Use class of outer machine in composition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4df0412d4f8c068abf5de75c9c92b796b7f57108\">4df0412</a></td><td><code>Merge remote-tracking branches 'fsm/process-iterator-nondet' (#16538) and 'aau/fsm/composition-types' (#16758) into fsm/composition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f988916af0c785a3f73a4a4f18b1e878b1c5627b\">f988916</a></td><td><code>trac #16548: Implemented `_composition_explorative_` using new process iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0de44fd880d607ddd208009a8e2490d1ed70f867\">0de44fd</a></td><td><code>trac #16548: Minor documentation improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f898b6cb46191fc0f23f63b0d17da99df3637051\">f898b6c</a></td><td><code>trac #16548: Additional doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/463e9801b4a72bdbf9593c8df575323cacb4fc9b\">463e980</a></td><td><code>trac #16548: Corrected handling of non-deterministic final output</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88ac35053b0ea12c4f10a75545a12735439bc89\">f88ac35</a></td><td><code>trac #16548: set output alphabet</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46937f7c2a87399211bba6d59dfe31151dba0ddd\">46937f7</a></td><td><code>trac #16548: delete incorrect doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ce3ac914c8d4bd1efc4091bccaff99c8cdda260\">9ce3ac9</a></td><td><code>trac #16548: disable preparation for multitape mode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c\">9741adc</a></td><td><code>trac #16548: more doctests on alphabets at composition</code></td></tr></table>\n",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217310",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:1'>Comment 1:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61f6acf619b2c13010ea4c420743fc05fededc8b">61f6acf</a></td><td><code>trac #16758: Use class of outer machine in composition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4df0412d4f8c068abf5de75c9c92b796b7f57108">4df0412</a></td><td><code>Merge remote-tracking branches 'fsm/process-iterator-nondet' (#16538) and 'aau/fsm/composition-types' (#16758) into fsm/composition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f988916af0c785a3f73a4a4f18b1e878b1c5627b">f988916</a></td><td><code>trac #16548: Implemented `_composition_explorative_` using new process iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0de44fd880d607ddd208009a8e2490d1ed70f867">0de44fd</a></td><td><code>trac #16548: Minor documentation improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f898b6cb46191fc0f23f63b0d17da99df3637051">f898b6c</a></td><td><code>trac #16548: Additional doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/463e9801b4a72bdbf9593c8df575323cacb4fc9b">463e980</a></td><td><code>trac #16548: Corrected handling of non-deterministic final output</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88ac35053b0ea12c4f10a75545a12735439bc89">f88ac35</a></td><td><code>trac #16548: set output alphabet</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46937f7c2a87399211bba6d59dfe31151dba0ddd">46937f7</a></td><td><code>trac #16548: delete incorrect doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ce3ac914c8d4bd1efc4091bccaff99c8cdda260">9ce3ac9</a></td><td><code>trac #16548: disable preparation for multitape mode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c">9741adc</a></td><td><code>trac #16548: more doctests on alphabets at composition</code></td></tr></table>




---

archive/issue_events_210924.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2014-08-05T18:54:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "title_is": "FiniteStateMachine: enhance _composition_explorative_",
    "title_was": "FiniteStateMachine: implement final_word_out in _composition_explorative_",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210924"
}
```



---

archive/issue_comments_217311.json:
```json
{
    "body": "Author: **Clemens Heuberger**",
    "created_at": "2014-08-05T18:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217311",
    "user": "https://github.com/cheuberg"
}
```

Author: **Clemens Heuberger**



---

archive/issue_comments_217312.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\ntrac automerging fails for unknown reasons.",
    "created_at": "2014-08-05T18:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217312",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:2'>Comment 2:</a>
trac automerging fails for unknown reasons.



---

archive/issue_events_210925.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210925"
}
```



---

archive/issue_events_210926.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210926"
}
```



---

archive/issue_comments_217313.json:
```json
{
    "body": "Changed branch from **[u/cheuberg/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/composition)** to **[u/dkrenn/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/fsm/composition)**",
    "created_at": "2015-02-05T16:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217313",
    "user": "https://github.com/dkrenn"
}
```

Changed branch from **[u/cheuberg/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/fsm/composition)** to **[u/dkrenn/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/fsm/composition)**



---

archive/issue_comments_217314.json:
```json
{
    "body": "Reviewer: **Daniel Krenn**",
    "created_at": "2015-02-05T16:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217314",
    "user": "https://github.com/dkrenn"
}
```

Reviewer: **Daniel Krenn**



---

archive/issue_comments_217315.json:
```json
{
    "body": "Changed commit from **[9741adc](https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c)** to **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**",
    "created_at": "2015-02-05T16:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217315",
    "user": "https://github.com/dkrenn"
}
```

Changed commit from **[9741adc](https://github.com/sagemath/sagetrac-mirror/commit/9741adc8165b9c818ef617eda40ac45b003fae8c)** to **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**



---

archive/issue_comments_217316.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nMade some minor rewritings. Please cross-review and set to positive when satisfied.\n\nEverything looks good, tests pass, doc looks ok, code should be fine; merges on 6.5.rc0.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8\">b03be9d</a></td><td><code>reviewer patch: a couple of minor rewritings</code></td></tr></table>\n",
    "created_at": "2015-02-05T16:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217316",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'>Comment 5:</a>
Made some minor rewritings. Please cross-review and set to positive when satisfied.

Everything looks good, tests pass, doc looks ok, code should be fine; merges on 6.5.rc0.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8">b03be9d</a></td><td><code>reviewer patch: a couple of minor rewritings</code></td></tr></table>




---

archive/issue_comments_217317.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nCross-reviewed the reviewer patch; thanks. Setting to `positive_review` as per your instruction.",
    "created_at": "2015-02-05T17:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217317",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:6'>Comment 6:</a>
Cross-reviewed the reviewer patch; thanks. Setting to `positive_review` as per your instruction.



---

archive/issue_events_210927.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2015-02-05T17:22:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210927"
}
```



---

archive/issue_events_210928.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2015-02-05T17:22:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210928"
}
```



---

archive/issue_events_210929.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-17T20:50:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210929"
}
```



---

archive/issue_events_210930.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b727c03ea3c608084ac8bfe5a81af4bc6a309b53",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-02-17T20:50:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16548#event-210930"
}
```



---

archive/issue_comments_217318.json:
```json
{
    "body": "Changed branch from **[u/dkrenn/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/fsm/composition)** to **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**",
    "created_at": "2015-02-17T20:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16548",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16548#issuecomment-217318",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dkrenn/fsm/composition](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/fsm/composition)** to **[b03be9d](https://github.com/sagemath/sagetrac-mirror/commit/b03be9d729a7d1683a10361b728eb2355556b7e8)**
