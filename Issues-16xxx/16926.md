# Issue 16926: Merge the features of SymmetricGroupAlgebra and SymmetricGroup.algebra

archive/issues_016689.json:
```json
{
    "body": "\nWe have different implementations of the algebra of the symmetric group, and more may come in the future:\n- `SymmetricGroupAlgebra(K, n)`\n- `SymmetricGroup(n).algebra(K)`\n- `WeylGroup(['A',3]).algebra(K)`\n- ...\n\nThey mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. After a discussion, we came up with a plan to share those features across all implementations:\n\n- Make the categories and functionality as coherent as possible.\n- Have `SymmetricGroupAlgebra` take an optional input for the index set.\n\n\nCC:  sage-combinat @tscrim @darijgr @avirmaux\n\nKeywords: days64\n\nBranch/Commit: bf9fc43cd076381692686dbe26f66a61f7955c1a\n\nReviewer: Darij Grinberg, Nicolas M. Thi\u00e9ry\n\nAuthor: Travis Scrimshaw\n\nDependencies: #17981\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16926\n\n",
    "closed_at": "2015-03-21T12:37:55Z",
    "created_at": "2014-09-03T11:39:57Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Merge the features of SymmetricGroupAlgebra and SymmetricGroup.algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16926",
    "user": "https://github.com/nthiery"
}
```

We have different implementations of the algebra of the symmetric group, and more may come in the future:
- `SymmetricGroupAlgebra(K, n)`
- `SymmetricGroup(n).algebra(K)`
- `WeylGroup(['A',3]).algebra(K)`
- ...

They mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. After a discussion, we came up with a plan to share those features across all implementations:

- Make the categories and functionality as coherent as possible.
- Have `SymmetricGroupAlgebra` take an optional input for the index set.


CC:  sage-combinat @tscrim @darijgr @avirmaux

Keywords: days64

Branch/Commit: bf9fc43cd076381692686dbe26f66a61f7955c1a

Reviewer: Darij Grinberg, Nicolas M. Thi√©ry

Author: Travis Scrimshaw

Dependencies: #17981

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16926





---

archive/issue_comments_283622.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,6 @@\n \n Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.\n \n+Cross ref the different implementations in the documentation.\n+\n Volunteers?\n``````\n",
    "created_at": "2014-09-03T11:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283622",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,6 @@
 
 Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.
 
+Cross ref the different implementations in the documentation.
+
 Volunteers?
``````




---

archive/issue_comments_283623.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't even know how this is going to happen. AlgebraWithBases? Coercions back and forth?",
    "created_at": "2014-09-03T11:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283623",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>
I don't even know how this is going to happen. AlgebraWithBases? Coercions back and forth?



---

archive/issue_comments_283624.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [darij](#comment%3A2):\n> I don't even know how this is going to happen. AlgebraWithBases? Coercions back and forth?\n\n\nLater on, it could make sense to connect by coercions and an `AlgebraWithBases`, but we don't need this for now. Each implementation would be standalone, just sharing common features through a common abstract class (in the category SymmetricGroups().Algebras(...)).",
    "created_at": "2014-09-03T11:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283624",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:3'></a>
Replying to [darij](#comment%3A2):
> I don't even know how this is going to happen. AlgebraWithBases? Coercions back and forth?


Later on, it could make sense to connect by coercions and an `AlgebraWithBases`, but we don't need this for now. Each implementation would be standalone, just sharing common features through a common abstract class (in the category SymmetricGroups().Algebras(...)).



---

archive/issue_comments_283625.json:
```json
{
    "body": "<a id='comment:4'></a>\nIsn't that harder? There'd be quite a lot of functionality to triplicate...",
    "created_at": "2014-09-03T11:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283625",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>
Isn't that harder? There'd be quite a lot of functionality to triplicate...



---

archive/issue_comments_283626.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [darij](#comment%3A4):\n> Isn't that harder? There'd be quite a lot of functionality to triplicate...\n\n\nYou mean, harder with just the `SymmetricGroups.Algebra` approach?\n\nThere is nothing to triplicate in this approach. Everything common is implemented exactly once, in SymmetricGroups.Algebra.",
    "created_at": "2014-09-03T12:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283626",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:5'></a>
Replying to [darij](#comment%3A4):
> Isn't that harder? There'd be quite a lot of functionality to triplicate...


You mean, harder with just the `SymmetricGroups.Algebra` approach?

There is nothing to triplicate in this approach. Everything common is implemented exactly once, in SymmetricGroups.Algebra.



---

archive/issue_comments_283627.json:
```json
{
    "body": "<a id='comment:6'></a>\nOh, you want to move things like the Young-Jucys-Murphy elements and the seminormal basis to an abstract base class?\n\nGood idea actually, as long as we can ensure this doesn't slow them down on the standard SymmetricGroupAlgebra.",
    "created_at": "2014-09-03T12:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283627",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>
Oh, you want to move things like the Young-Jucys-Murphy elements and the seminormal basis to an abstract base class?

Good idea actually, as long as we can ensure this doesn't slow them down on the standard SymmetricGroupAlgebra.



---

archive/issue_comments_283628.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [darij](#comment%3A6):\n> Oh, you want to move things like the Young-Jucys-Murphy elements and the seminormal basis to an abstract base class?\n\n\nPrecisely.\n\n> Good idea actually, as long as we can ensure this doesn't slow them down on the standard SymmetricGroupAlgebra.\n\n\nThat's something to be checked, but a priori given the kind of algorithms, I doubt it would.",
    "created_at": "2014-09-03T12:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283628",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>
Replying to [darij](#comment%3A6):
> Oh, you want to move things like the Young-Jucys-Murphy elements and the seminormal basis to an abstract base class?


Precisely.

> Good idea actually, as long as we can ensure this doesn't slow them down on the standard SymmetricGroupAlgebra.


That's something to be checked, but a priori given the kind of algorithms, I doubt it would.



---

archive/issue_comments_283629.json:
```json
{
    "body": "<a id='comment:8'></a>\nI second using an ABC rather than a category. Also as mentioned in my comment on #16925, I think `SymmetricGroupAlgebra` should actually use the group an an indexing set for the basis, thus keeping that as `SymmetricGroup(n).algebra(K)` (alternatively merging in the general `GroupAlgebra` implementation).",
    "created_at": "2014-09-03T19:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283629",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I second using an ABC rather than a category. Also as mentioned in my comment on #16925, I think `SymmetricGroupAlgebra` should actually use the group an an indexing set for the basis, thus keeping that as `SymmetricGroup(n).algebra(K)` (alternatively merging in the general `GroupAlgebra` implementation).



---

archive/issue_comments_283630.json:
```json
{
    "body": "<a id='comment:9'></a>\nBut we absolutely need to keep the `SGA(p)` syntax working for `SGA` a symmetric group algebra and `p` a permutation. And we'd do well to not slow it down by any significant amount.",
    "created_at": "2014-09-03T19:28:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283630",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:9'></a>
But we absolutely need to keep the `SGA(p)` syntax working for `SGA` a symmetric group algebra and `p` a permutation. And we'd do well to not slow it down by any significant amount.



---

archive/issue_comments_283631.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [darij](#comment%3A9):\n> But we absolutely need to keep the `SGA(p)` syntax working for `SGA` a symmetric group algebra and `p` a permutation. And we'd do well to not slow it down by any significant amount.\n\n\nI agree (and this is easy enough to do with `_element_constructor_`). In fact, using the gap group, we'll significantly speed up the multiplication. Perhaps being clever by using a hybrid approach, we can speed up computing the basis too (IDK yet, haven't tried).",
    "created_at": "2014-09-03T19:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283631",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Replying to [darij](#comment%3A9):
> But we absolutely need to keep the `SGA(p)` syntax working for `SGA` a symmetric group algebra and `p` a permutation. And we'd do well to not slow it down by any significant amount.


I agree (and this is easy enough to do with `_element_constructor_`). In fact, using the gap group, we'll significantly speed up the multiplication. Perhaps being clever by using a hybrid approach, we can speed up computing the basis too (IDK yet, haven't tried).



---

archive/issue_comments_283632.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [tscrim](#comment%3A8):\n> I second using an ABC rather than a category.\n\n\nThe category is doing just that: providing an ABC. Granted, it might look a bit overkill since we might not need an ABC for the elements or other functorial constructions. But in exchange  (S_n).algebra() is automatically made to inherit from the ABC in a way that is uniform with all the other stuff about XXX algebras: no need to insert manually that ABC in `SymmetricGroup.algebra`.",
    "created_at": "2014-09-03T20:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283632",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:11'></a>
Replying to [tscrim](#comment%3A8):
> I second using an ABC rather than a category.


The category is doing just that: providing an ABC. Granted, it might look a bit overkill since we might not need an ABC for the elements or other functorial constructions. But in exchange  (S_n).algebra() is automatically made to inherit from the ABC in a way that is uniform with all the other stuff about XXX algebras: no need to insert manually that ABC in `SymmetricGroup.algebra`.



---

archive/issue_comments_283633.json:
```json
{
    "body": "<a id='comment:12'></a>\nI don't really like the idea of putting into a category as opposed to having a proper ABC. Doing with an ABC means we can have automatic coercion by just doing:\n\n```python\ndef _coerce_map_from_(self, X):\n    if isinstance(X, SGA_abstract):\n        return True\n    return super(SGA_abstract, self)._coerce_map_from_(X)\n```\n(We can't do this with categories, nor do I think we should for that matter.)\nAlso as you mentioned, it's overkill to me. Also if we were to have this in the category, we'd still have to override the `algebra` method (or worse, a check on the group in the generic group algebra). Although I'm still of the opinion that we should merge the generic group algebra of S<sub>n</sub> into `SymmetricGroupAlgebra` and get that to work. I'm not sure what we'll need/want to do w.r.t. the Weyl group one, I haven't thought about how this will figure in yet.\n\nAlso since this is the same object in the \"same\" realization, IMO the `WithRealizations` framework shouldn't be used here either. It also possible to convince to go this route, but I don't really think it'll be the best way.",
    "created_at": "2014-09-04T05:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283633",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
I don't really like the idea of putting into a category as opposed to having a proper ABC. Doing with an ABC means we can have automatic coercion by just doing:

```python
def _coerce_map_from_(self, X):
    if isinstance(X, SGA_abstract):
        return True
    return super(SGA_abstract, self)._coerce_map_from_(X)
```
(We can't do this with categories, nor do I think we should for that matter.)
Also as you mentioned, it's overkill to me. Also if we were to have this in the category, we'd still have to override the `algebra` method (or worse, a check on the group in the generic group algebra). Although I'm still of the opinion that we should merge the generic group algebra of S<sub>n</sub> into `SymmetricGroupAlgebra` and get that to work. I'm not sure what we'll need/want to do w.r.t. the Weyl group one, I haven't thought about how this will figure in yet.

Also since this is the same object in the "same" realization, IMO the `WithRealizations` framework shouldn't be used here either. It also possible to convince to go this route, but I don't really think it'll be the best way.



---

archive/issue_comments_283634.json:
```json
{
    "body": "<a id='comment:13'></a>\nSilly question, no doubt, but what is an **ABC**?",
    "created_at": "2014-11-06T23:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283634",
    "user": "https://github.com/AndrewAtLarge"
}
```

<a id='comment:13'></a>
Silly question, no doubt, but what is an **ABC**?



---

archive/issue_comments_283635.json:
```json
{
    "body": "<a id='comment:14'></a>\nAn **A**bstract **B**ase **C**lass.",
    "created_at": "2014-11-07T02:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283635",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
An **A**bstract **B**ase **C**lass.



---

archive/issue_comments_283636.json:
```json
{
    "body": "Changing commit from \"\" to \"f15f40cd95cd94cd3e4a3b843fd0b257746d43f0\"",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283636",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "f15f40cd95cd94cd3e4a3b843fd0b257746d43f0"



---

archive/issue_comments_283637.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283637",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_283638.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,14 +5,8 @@\n - `WeylGroup(['A',3]).algebra(K)`\n - ...\n \n-They mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. Here is a plan to share those features across all implementations:\n+They mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. After a discussion, we came up with a plan to share those features across all implementations:\n \n-Create a category `SymmetricGroups`. Put the relevant groups in this category.\n+- Make the categories and functionality as coherent as possible.\n+- Have `SymmetricGroupAlgebra` take an optional input for the index set.\n \n-Generalize the features (Yucis-Murphy elements, ...) from `SymmetricGroupAlgebra` to the category `SymmetricGroups.Algebras`.\n-\n-Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.\n-\n-Cross ref the different implementations in the documentation.\n-\n-Volunteers?\n``````\n",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283638",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,14 +5,8 @@
 - `WeylGroup(['A',3]).algebra(K)`
 - ...
 
-They mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. Here is a plan to share those features across all implementations:
+They mostly differ in how the elements of the symmetric group are represented, and each representation can have its advantage depending on the application in mind. So it's fine to keep them all. On the other hand, currently only the first one makes use of the special features of the symmetric group. After a discussion, we came up with a plan to share those features across all implementations:
 
-Create a category `SymmetricGroups`. Put the relevant groups in this category.
+- Make the categories and functionality as coherent as possible.
+- Have `SymmetricGroupAlgebra` take an optional input for the index set.
 
-Generalize the features (Yucis-Murphy elements, ...) from `SymmetricGroupAlgebra` to the category `SymmetricGroups.Algebras`.
-
-Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.
-
-Cross ref the different implementations in the documentation.
-
-Volunteers?
``````




---

archive/issue_comments_283639.json:
```json
{
    "body": "Changing author from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283639",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Travis Scrimshaw"



---

archive/issue_comments_283640.json:
```json
{
    "body": "<a id='comment:15'></a>\nOkay, done. So some notes for the reviewer:\n\n- Currently `descents` behavior differs from that given by the category, so as to avoid backwards incompatible change, we leave warning messages and leave the behavior alone.\n\n- `reduced_word()` does not respect the order of multiplication and needs to be fixed so that `TestSuite` passes.\n\n- I've added as much common functionality between `SymmetricGroup` and `Permutations` since the former is a gap version of the latter. I'm leaving `WeylGroup` alone because it is a matrix group, but if someone wants to add better support for conjugacy classes, then go ahead.\n\n- I made a bunch of other optimizations for iterating over elements and micro-optimizations.\n\n- I abstracted `StandardPermutations_n` to better reflect the mathematics.\n\n- Better and more careful handling of parents during multiplication.\n\n- The `from_*` now can take a parent as input to better control their output (this was needed).\n\nSome todo's for later:\n\n1. Improve the speed of multiplying Sage permutations:\n\n```\nsage: S = SymmetricGroup(5)\nsage: R = S.simple_reflections()\nsage: %timeit prod(R)\n10000 loops, best of 3: 36.6 \u00b5s per loop\nsage: P = Permutations(5)\nsage: R = P.simple_reflections()\nsage: %timeit prod(R)\n1000 loops, best of 3: 413 \u00b5s per loop\n```\n\n2. Refactor the `Permutation` class to better be an element class, especially parsing of input (hard and tedious).\n\n3. Fix the issues noted above (also hard).\n\nHowever, IMO the current version should be reviewed and included into Sage (as it is needed for #11111).\n\nThis is the other option, which I am keeping here for the official record:\n\n* Create a category `SymmetricGroups`. Put the relevant groups in this category.\n* Generalize the features (Yucis-Murphy elements, ...) from `SymmetricGroupAlgebra` to the category `SymmetricGroups.Algebras`.\n* Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.\n* Cross ref the different implementations in the documentation.\n \n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[8144d47](http://git.sagemath.org/sage.git/commit/?id=8144d477a29de3bfd56e2f12041066de09772973)|`Added optional argument for indexing set of SGA.`|\n|[a2d9dcd](http://git.sagemath.org/sage.git/commit/?id=a2d9dcd50fb3cc1aac6a1d8ffc2538c61bfecaf6)|`Initial setting of StandardPermutations_n to be in FiniteWeylGroups.`|\n|[765cbdb](http://git.sagemath.org/sage.git/commit/?id=765cbdb27ce49c48c0fb8ed6402345b0de3d4136)|`Fixes and tweaks and speedups.`|\n|[a63dfd3](http://git.sagemath.org/sage.git/commit/?id=a63dfd39c3e0ab47239102d10ce55a1e8b711962)|`Added support for conjugacy classes for permutation groups.`|\n|[f15f40c](http://git.sagemath.org/sage.git/commit/?id=f15f40cd95cd94cd3e4a3b843fd0b257746d43f0)|`Some additional fixes and cleanup.`|",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283640",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Okay, done. So some notes for the reviewer:

- Currently `descents` behavior differs from that given by the category, so as to avoid backwards incompatible change, we leave warning messages and leave the behavior alone.

- `reduced_word()` does not respect the order of multiplication and needs to be fixed so that `TestSuite` passes.

- I've added as much common functionality between `SymmetricGroup` and `Permutations` since the former is a gap version of the latter. I'm leaving `WeylGroup` alone because it is a matrix group, but if someone wants to add better support for conjugacy classes, then go ahead.

- I made a bunch of other optimizations for iterating over elements and micro-optimizations.

- I abstracted `StandardPermutations_n` to better reflect the mathematics.

- Better and more careful handling of parents during multiplication.

- The `from_*` now can take a parent as input to better control their output (this was needed).

Some todo's for later:

1. Improve the speed of multiplying Sage permutations:

```
sage: S = SymmetricGroup(5)
sage: R = S.simple_reflections()
sage: %timeit prod(R)
10000 loops, best of 3: 36.6 ¬µs per loop
sage: P = Permutations(5)
sage: R = P.simple_reflections()
sage: %timeit prod(R)
1000 loops, best of 3: 413 ¬µs per loop
```

2. Refactor the `Permutation` class to better be an element class, especially parsing of input (hard and tedious).

3. Fix the issues noted above (also hard).

However, IMO the current version should be reviewed and included into Sage (as it is needed for #11111).

This is the other option, which I am keeping here for the official record:

* Create a category `SymmetricGroups`. Put the relevant groups in this category.
* Generalize the features (Yucis-Murphy elements, ...) from `SymmetricGroupAlgebra` to the category `SymmetricGroups.Algebras`.
* Put `SymmetricGroupAlgebra` in this category, and strip away all the code that is not needed anymore.
* Cross ref the different implementations in the documentation.
 
---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[8144d47](http://git.sagemath.org/sage.git/commit/?id=8144d477a29de3bfd56e2f12041066de09772973)|`Added optional argument for indexing set of SGA.`|
|[a2d9dcd](http://git.sagemath.org/sage.git/commit/?id=a2d9dcd50fb3cc1aac6a1d8ffc2538c61bfecaf6)|`Initial setting of StandardPermutations_n to be in FiniteWeylGroups.`|
|[765cbdb](http://git.sagemath.org/sage.git/commit/?id=765cbdb27ce49c48c0fb8ed6402345b0de3d4136)|`Fixes and tweaks and speedups.`|
|[a63dfd3](http://git.sagemath.org/sage.git/commit/?id=a63dfd39c3e0ab47239102d10ce55a1e8b711962)|`Added support for conjugacy classes for permutation groups.`|
|[f15f40c](http://git.sagemath.org/sage.git/commit/?id=f15f40cd95cd94cd3e4a3b843fd0b257746d43f0)|`Some additional fixes and cleanup.`|



---

archive/issue_comments_283641.json:
```json
{
    "body": "Changing branch from \"\" to \"public/combinat/fix_sga-16926\"",
    "created_at": "2015-02-07T23:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283641",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/combinat/fix_sga-16926"



---

archive/issue_comments_283642.json:
```json
{
    "body": "<a id='comment:16'></a>\nNot sure if I'm going to be reviewing this (time is short as usual and I'm still not good at OOP -- case in point, I don't know what mixins are for), but a few remarks.\n\nFirst, a trivial group needs no generators. So this\n\n```\n+ if self.n <= 1:\n+ return (self.one(),)\n```\ncan be replaced by\n\n```\n+ if self.n <= 1:\n+ return ()\n```\n\nSecond, you are testing for the order-of-multiplication global in `has_left_descent` and in `has_right_descent`. I understand the reasoning behind it, but I don't like it, as it spreads a bad design choice further. Can we agree that the \"left\" in \"left descent\" stands for \"left action\" rather than \"multiplying with s_i from the left\", or is this too revisionistic?",
    "created_at": "2015-02-08T03:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283642",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:16'></a>
Not sure if I'm going to be reviewing this (time is short as usual and I'm still not good at OOP -- case in point, I don't know what mixins are for), but a few remarks.

First, a trivial group needs no generators. So this

```
+ if self.n <= 1:
+ return (self.one(),)
```
can be replaced by

```
+ if self.n <= 1:
+ return ()
```

Second, you are testing for the order-of-multiplication global in `has_left_descent` and in `has_right_descent`. I understand the reasoning behind it, but I don't like it, as it spreads a bad design choice further. Can we agree that the "left" in "left descent" stands for "left action" rather than "multiplying with s_i from the left", or is this too revisionistic?



---

archive/issue_comments_283643.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|\n|[8e98447](http://git.sagemath.org/sage.git/commit/?id=8e9844721de9e043f94c4307b8df6c6dc78bd048)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into public/combinat/fix_sga-16926`|\n|[6597e79](http://git.sagemath.org/sage.git/commit/?id=6597e7936048b8f30018a5e4a6e566836f6e5e68)|`Change Darij requested plus fixed a trivial doctest.`|",
    "created_at": "2015-02-16T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283643",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
|[8e98447](http://git.sagemath.org/sage.git/commit/?id=8e9844721de9e043f94c4307b8df6c6dc78bd048)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into public/combinat/fix_sga-16926`|
|[6597e79](http://git.sagemath.org/sage.git/commit/?id=6597e7936048b8f30018a5e4a6e566836f6e5e68)|`Change Darij requested plus fixed a trivial doctest.`|



---

archive/issue_comments_283644.json:
```json
{
    "body": "Changing commit from \"f15f40cd95cd94cd3e4a3b843fd0b257746d43f0\" to \"6597e7936048b8f30018a5e4a6e566836f6e5e68\"",
    "created_at": "2015-02-16T19:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f15f40cd95cd94cd3e4a3b843fd0b257746d43f0" to "6597e7936048b8f30018a5e4a6e566836f6e5e68"



---

archive/issue_comments_283645.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [darij](#comment%3A16):\n> Not sure if I'm going to be reviewing this (time is short as usual and I'm still not good at OOP -- case in point, I don't know what mixins are for), but a few remarks.\n\n\nI appreciate any time you can devote, plus I'd think it would be best that Nicolas takes a good look at this patch (and possibly have Aladin merge it into his current version of #11111 and test it there too).\n\n(Mixins are as they sound to be, they are classes you \"mix in\" the class heirarchy which typically contain general or independent features. [This SO thread](http://stackoverflow.com/questions/533631/what-is-a-mixin-and-why-are-they-useful) I think gives a good overview of them.)\n\n> First, a trivial group needs no generators. ...\n\n\nGood point; fixed.\n\n> Second, you are testing for the order-of-multiplication global in `has_left_descent` and in `has_right_descent`. I understand the reasoning behind it, but I don't like it, as it spreads a bad design choice further. Can we agree that the \"left\" in \"left descent\" stands for \"left action\" rather than \"multiplying with s_i from the left\", or is this too revisionistic?\n\n\nIt breaks the generic implementation of the `long_element` method, which relies on the multiplication on the left corresponding to `has_left_descent`. I feel these changes further shows `permutation.py` can be a minefield...but I'm trying to make do with what I have.",
    "created_at": "2015-02-16T19:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283645",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
Replying to [darij](#comment%3A16):
> Not sure if I'm going to be reviewing this (time is short as usual and I'm still not good at OOP -- case in point, I don't know what mixins are for), but a few remarks.


I appreciate any time you can devote, plus I'd think it would be best that Nicolas takes a good look at this patch (and possibly have Aladin merge it into his current version of #11111 and test it there too).

(Mixins are as they sound to be, they are classes you "mix in" the class heirarchy which typically contain general or independent features. [This SO thread](http://stackoverflow.com/questions/533631/what-is-a-mixin-and-why-are-they-useful) I think gives a good overview of them.)

> First, a trivial group needs no generators. ...


Good point; fixed.

> Second, you are testing for the order-of-multiplication global in `has_left_descent` and in `has_right_descent`. I understand the reasoning behind it, but I don't like it, as it spreads a bad design choice further. Can we agree that the "left" in "left descent" stands for "left action" rather than "multiplying with s_i from the left", or is this too revisionistic?


It breaks the generic implementation of the `long_element` method, which relies on the multiplication on the left corresponding to `has_left_descent`. I feel these changes further shows `permutation.py` can be a minefield...but I'm trying to make do with what I have.



---

archive/issue_comments_283646.json:
```json
{
    "body": "<a id='comment:19'></a>\nHello,\n\nI would love to try to merge into #11111 but this last one cause too many merge conflicts. And some requiere more knowledge than I actually have in order to be solved (in particular those in set.py and integer_ring.py).",
    "created_at": "2015-02-17T13:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283646",
    "user": "https://github.com/avirmaux"
}
```

<a id='comment:19'></a>
Hello,

I would love to try to merge into #11111 but this last one cause too many merge conflicts. And some requiere more knowledge than I actually have in order to be solved (in particular those in set.py and integer_ring.py).



---

archive/issue_comments_283647.json:
```json
{
    "body": "<a id='comment:20'></a>\nShouldn't the `__contains__` and `__iter__` methods on `StandardPermutations_n_abstract` be in `StandardPermutations_n` instead? (Not sure about the other methods.) I find it strange to see an ABC whose most methods are anything but abstract.",
    "created_at": "2015-02-17T21:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283647",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:20'></a>
Shouldn't the `__contains__` and `__iter__` methods on `StandardPermutations_n_abstract` be in `StandardPermutations_n` instead? (Not sure about the other methods.) I find it strange to see an ABC whose most methods are anything but abstract.



---

archive/issue_comments_283648.json:
```json
{
    "body": "Changing commit from \"6597e7936048b8f30018a5e4a6e566836f6e5e68\" to \"18b3441e41e0f30b6bc02bd5a746096b17189e27\"",
    "created_at": "2015-02-17T21:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6597e7936048b8f30018a5e4a6e566836f6e5e68" to "18b3441e41e0f30b6bc02bd5a746096b17189e27"



---

archive/issue_comments_283649.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[18b3441](http://git.sagemath.org/sage.git/commit/?id=18b3441e41e0f30b6bc02bd5a746096b17189e27)|`Using itertools and moved methods from n_abstract.`|",
    "created_at": "2015-02-17T21:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[18b3441](http://git.sagemath.org/sage.git/commit/?id=18b3441e41e0f30b6bc02bd5a746096b17189e27)|`Using itertools and moved methods from n_abstract.`|



---

archive/issue_comments_283650.json:
```json
{
    "body": "<a id='comment:22'></a>\n`__contains__` is a definite no because the subclasses want that to use that check. However, I moved `__iter__` and a bunch of other methods to `StandardPermutations_n` since they were (potentially) giving wrong results. I also used `itertools` for the iteration because it was ~20x faster:\n\n```\nsage: %timeit len(list(itertools.permutations(range(1,6), 5)))\n10000 loops, best of 3: 36.5 \u00b5s per loop\nsage: %timeit len(list(Permutations_set._fast_iter(range(1,6))))\n1000 loops, best of 3: 658 \u00b5s per loop\n```",
    "created_at": "2015-02-17T21:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283650",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
`__contains__` is a definite no because the subclasses want that to use that check. However, I moved `__iter__` and a bunch of other methods to `StandardPermutations_n` since they were (potentially) giving wrong results. I also used `itertools` for the iteration because it was ~20x faster:

```
sage: %timeit len(list(itertools.permutations(range(1,6), 5)))
10000 loops, best of 3: 36.5 ¬µs per loop
sage: %timeit len(list(Permutations_set._fast_iter(range(1,6))))
1000 loops, best of 3: 658 ¬µs per loop
```



---

archive/issue_comments_283651.json:
```json
{
    "body": "<a id='comment:23'></a>\nThat's a nice find you made in the itertools. Good to see that \"fast\" iterator gone!\n\nI'll shortly push my \"fix\" to the l2r/r2l issue. But meanwhile, I disagree about `__contains__`. This method tests containment in Permutations(n), not in whatever subclass we have inherit from `StandardPermutations_n_abstract`. If it stays in the ABC, then every subclass that does not override it will have a wrong `__contains__` test. If you just want to be able to use it out of subclasses, why not `@`classmethod or `@`staticmethod?",
    "created_at": "2015-02-18T04:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283651",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:23'></a>
That's a nice find you made in the itertools. Good to see that "fast" iterator gone!

I'll shortly push my "fix" to the l2r/r2l issue. But meanwhile, I disagree about `__contains__`. This method tests containment in Permutations(n), not in whatever subclass we have inherit from `StandardPermutations_n_abstract`. If it stays in the ABC, then every subclass that does not override it will have a wrong `__contains__` test. If you just want to be able to use it out of subclasses, why not `@`classmethod or `@`staticmethod?



---

archive/issue_comments_283652.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [darij](#comment%3A23):\n> But meanwhile, I disagree about `__contains__`. This method tests containment in Permutations(n), not in whatever subclass we have inherit from `StandardPermutations_n_abstract`. If it stays in the ABC, then every subclass that does not override it will have a wrong `__contains__` test. If you just want to be able to use it out of subclasses, why not `@`classmethod or `@`staticmethod?\n\n\nIt would potentially give false positives, but it's better than the generic one from `Parent` (which is part of the test):\n\n```\nsage: P = Permutations(5, avoiding=[1,4,2,3])\nsage: P([1,4,2,3,5]) in P\nTrue\n```\nThe idea is to override it for extra information and to include a super call so as to avoid duplicating code (i.e., this is good OOP).",
    "created_at": "2015-02-18T04:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283652",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Replying to [darij](#comment%3A23):
> But meanwhile, I disagree about `__contains__`. This method tests containment in Permutations(n), not in whatever subclass we have inherit from `StandardPermutations_n_abstract`. If it stays in the ABC, then every subclass that does not override it will have a wrong `__contains__` test. If you just want to be able to use it out of subclasses, why not `@`classmethod or `@`staticmethod?


It would potentially give false positives, but it's better than the generic one from `Parent` (which is part of the test):

```
sage: P = Permutations(5, avoiding=[1,4,2,3])
sage: P([1,4,2,3,5]) in P
True
```
The idea is to override it for extra information and to include a super call so as to avoid duplicating code (i.e., this is good OOP).



---

archive/issue_comments_283653.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n|[2b3a48f](http://git.sagemath.org/sage.git/commit/?id=2b3a48fafc0ae60a5efc21f83b9016b403564dec)|`Merge branch 'public/combinat/fix_sga-16926' of git://trac.sagemath.org/sage into sga`|\n|[f120255](http://git.sagemath.org/sage.git/commit/?id=f1202558f449a7797c86143a59e5c3e32a5349d8)|`allow circumventing mult variable in has_left/right_descent methods`|",
    "created_at": "2015-02-18T04:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
|[2b3a48f](http://git.sagemath.org/sage.git/commit/?id=2b3a48fafc0ae60a5efc21f83b9016b403564dec)|`Merge branch 'public/combinat/fix_sga-16926' of git://trac.sagemath.org/sage into sga`|
|[f120255](http://git.sagemath.org/sage.git/commit/?id=f1202558f449a7797c86143a59e5c3e32a5349d8)|`allow circumventing mult variable in has_left/right_descent methods`|



---

archive/issue_comments_283654.json:
```json
{
    "body": "Changing commit from \"18b3441e41e0f30b6bc02bd5a746096b17189e27\" to \"f1202558f449a7797c86143a59e5c3e32a5349d8\"",
    "created_at": "2015-02-18T04:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18b3441e41e0f30b6bc02bd5a746096b17189e27" to "f1202558f449a7797c86143a59e5c3e32a5349d8"



---

archive/issue_comments_283655.json:
```json
{
    "body": "<a id='comment:26'></a>\nAh, if it was already semi-broken this way, then it's fine. I've added a warning in the doc, however.\n\nNot a review yet, but just a patch for the 'mult' issue. Are you OK with it?",
    "created_at": "2015-02-18T04:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283655",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:26'></a>
Ah, if it was already semi-broken this way, then it's fine. I've added a warning in the doc, however.

Not a review yet, but just a patch for the 'mult' issue. Are you OK with it?



---

archive/issue_comments_283656.json:
```json
{
    "body": "<a id='comment:27'></a>\nYes, it works for me.",
    "created_at": "2015-02-18T04:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283656",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Yes, it works for me.



---

archive/issue_comments_283657.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[caf4f43](http://git.sagemath.org/sage.git/commit/?id=caf4f43a19035e37cb4b4c67f0f040af84783c9e)|`some more edits`|",
    "created_at": "2015-02-18T06:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[caf4f43](http://git.sagemath.org/sage.git/commit/?id=caf4f43a19035e37cb4b4c67f0f040af84783c9e)|`some more edits`|



---

archive/issue_comments_283658.json:
```json
{
    "body": "Changing commit from \"f1202558f449a7797c86143a59e5c3e32a5349d8\" to \"caf4f43a19035e37cb4b4c67f0f040af84783c9e\"",
    "created_at": "2015-02-18T06:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f1202558f449a7797c86143a59e5c3e32a5349d8" to "caf4f43a19035e37cb4b4c67f0f040af84783c9e"



---

archive/issue_comments_283659.json:
```json
{
    "body": "<a id='comment:29'></a>\nPart of the review done (sorry, I'm slow). I fear I need explanations on this:\n\n```\n+        def __mul__(self, other):\n+            r\"\"\"\n+            Multiply ``self`` and ``other``.\n+\n+            EXAMPLES::\n+\n+                sage: P = Permutations(4)\n+                sage: P.simple_reflection(1) * Permutation([6,5,4,3,2,1])\n+                [5, 6, 4, 3, 2, 1]\n+            \"\"\"\n+            if (not isinstance(other, StandardPermutations_n.Element)\n+                or self.parent() != other.parent()):\n+                return Permutation.__mul__(self, other)\n+            return self._mul_(other)\n+\n+        def _mul_(self, other):\n+            r\"\"\"\n+            Multiply ``self`` and ``other``.\n+\n+            EXAMPLES::\n+\n+                sage: P = Permutations(4)\n+                sage: P.prod(P.gens()).parent() is P\n+                True\n+            \"\"\"\n+            p = list(Permutation.__mul__(self, other))\n+            return self.__class__(self.parent(), p)\n```\nor someone else will have to vow for its correctness.",
    "created_at": "2015-02-18T06:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283659",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:29'></a>
Part of the review done (sorry, I'm slow). I fear I need explanations on this:

```
+        def __mul__(self, other):
+            r"""
+            Multiply ``self`` and ``other``.
+
+            EXAMPLES::
+
+                sage: P = Permutations(4)
+                sage: P.simple_reflection(1) * Permutation([6,5,4,3,2,1])
+                [5, 6, 4, 3, 2, 1]
+            """
+            if (not isinstance(other, StandardPermutations_n.Element)
+                or self.parent() != other.parent()):
+                return Permutation.__mul__(self, other)
+            return self._mul_(other)
+
+        def _mul_(self, other):
+            r"""
+            Multiply ``self`` and ``other``.
+
+            EXAMPLES::
+
+                sage: P = Permutations(4)
+                sage: P.prod(P.gens()).parent() is P
+                True
+            """
+            p = list(Permutation.__mul__(self, other))
+            return self.__class__(self.parent(), p)
```
or someone else will have to vow for its correctness.



---

archive/issue_comments_283660.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                                                                                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[f38fe13](http://git.sagemath.org/sage.git/commit/?id=f38fe13587fac895809d5f9d5fcf21b12bd23f0a)|`I don't understand the index_set argument, and it is used incorrectly here -- the retract methods are supposed to go into a different SGA, and making it have the same index_set as the domain causes bugs`|",
    "created_at": "2015-02-18T16:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[f38fe13](http://git.sagemath.org/sage.git/commit/?id=f38fe13587fac895809d5f9d5fcf21b12bd23f0a)|`I don't understand the index_set argument, and it is used incorrectly here -- the retract methods are supposed to go into a different SGA, and making it have the same index_set as the domain causes bugs`|



---

archive/issue_comments_283661.json:
```json
{
    "body": "Changing commit from \"caf4f43a19035e37cb4b4c67f0f040af84783c9e\" to \"f38fe13587fac895809d5f9d5fcf21b12bd23f0a\"",
    "created_at": "2015-02-18T16:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "caf4f43a19035e37cb4b4c67f0f040af84783c9e" to "f38fe13587fac895809d5f9d5fcf21b12bd23f0a"



---

archive/issue_comments_283662.json:
```json
{
    "body": "<a id='comment:31'></a>\nNot done yet (symgp_conjugacy_class.py remains), but there are some things I don't get about this that I'd prefer to have answered before I go on.\n\n- The _mul_ issue, as above.\n\n- The meaning of the index_set parameter: is it just there to allow building the symmetric group algebra with different basis keys?\n\n- _coerce_map_from_ claims that there exists a coercion from `SymmetricGroup(3).algebra(QQ)` to `SymmetricGroupAlgebra(QQ, 3)`, but applying this coercion to elements fails. This is because `StandardPermutations_n_abstract.__call__` does not take a permutation group element as a parameter. I am not sure what to do about it, since I wouldn't be happy with duck-typing in that constructor.\n\n- Various methods don't work for `SymmetricGroup(3).algebra(QQ)`, and the fix is not as simple as adding `index_set=self.basis().keys()`.",
    "created_at": "2015-02-18T16:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283662",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:31'></a>
Not done yet (symgp_conjugacy_class.py remains), but there are some things I don't get about this that I'd prefer to have answered before I go on.

- The _mul_ issue, as above.

- The meaning of the index_set parameter: is it just there to allow building the symmetric group algebra with different basis keys?

- _coerce_map_from_ claims that there exists a coercion from `SymmetricGroup(3).algebra(QQ)` to `SymmetricGroupAlgebra(QQ, 3)`, but applying this coercion to elements fails. This is because `StandardPermutations_n_abstract.__call__` does not take a permutation group element as a parameter. I am not sure what to do about it, since I wouldn't be happy with duck-typing in that constructor.

- Various methods don't work for `SymmetricGroup(3).algebra(QQ)`, and the fix is not as simple as adding `index_set=self.basis().keys()`.



---

archive/issue_comments_283663.json:
```json
{
    "body": "<a id='comment:32'></a>\nI am implementing a coercion map from `SymmetricGroup` to `Permutations(n)`, and I need #17981 since I am having `_coerce_map_from_` return a lambda function representing the coercion map. Changes coming shortly.",
    "created_at": "2015-03-17T21:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283663",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
I am implementing a coercion map from `SymmetricGroup` to `Permutations(n)`, and I need #17981 since I am having `_coerce_map_from_` return a lambda function representing the coercion map. Changes coming shortly.



---

archive/issue_comments_283664.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#17981\"",
    "created_at": "2015-03-17T21:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283664",
    "user": "https://github.com/tscrim"
}
```

Changing dependencies from "" to "#17981"



---

archive/issue_comments_283665.json:
```json
{
    "body": "Changing commit from \"f38fe13587fac895809d5f9d5fcf21b12bd23f0a\" to \"d4568f6e72f40500e1a39d56b4a4f74146fcab29\"",
    "created_at": "2015-03-17T22:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f38fe13587fac895809d5f9d5fcf21b12bd23f0a" to "d4568f6e72f40500e1a39d56b4a4f74146fcab29"



---

archive/issue_comments_283666.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[cd15df4](http://git.sagemath.org/sage.git/commit/?id=cd15df47f6cf77b0c62425756d2d0e6b2741be3a)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|\n|[d01b36d](http://git.sagemath.org/sage.git/commit/?id=d01b36d83ed5cda7b73517e6cc9c45b65e1101a4)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|\n|[0c95381](http://git.sagemath.org/sage.git/commit/?id=0c95381e84f798bea298dc14739e1e60cf385bf4)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|\n|[cb7e154](http://git.sagemath.org/sage.git/commit/?id=cb7e15472fe044648092058985e683c9a9248b42)|`Some fixing of the index_set options.`|\n|[c9ebdd7](http://git.sagemath.org/sage.git/commit/?id=c9ebdd7bcb4cff58d52d26a532cff3186bbf4c6f)|`Implement coerce map for Permutations(n).`|\n|[b0973dc](http://git.sagemath.org/sage.git/commit/?id=b0973dc8b5d147adcd3b2e4451efa8b3dbeeb912)|`Fix coercion map when _coerce_map_from_ returns a callable.`|\n|[bd0fcd1](http://git.sagemath.org/sage.git/commit/?id=bd0fcd151cca116148cb20d0a218550bde54350d)|`Merge branch 'public/coerce/fix_coerce_map_from_callable' into public/combinat/fix_sga-16926`|\n|[d4568f6](http://git.sagemath.org/sage.git/commit/?id=d4568f6e72f40500e1a39d56b4a4f74146fcab29)|`Finish implementing coercion maps from SymmetricGroup to Permutations(n).`|",
    "created_at": "2015-03-17T22:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[cd15df4](http://git.sagemath.org/sage.git/commit/?id=cd15df47f6cf77b0c62425756d2d0e6b2741be3a)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|
|[d01b36d](http://git.sagemath.org/sage.git/commit/?id=d01b36d83ed5cda7b73517e6cc9c45b65e1101a4)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|
|[0c95381](http://git.sagemath.org/sage.git/commit/?id=0c95381e84f798bea298dc14739e1e60cf385bf4)|`Merge branch 'develop' into public/combinat/fix_sga-16926`|
|[cb7e154](http://git.sagemath.org/sage.git/commit/?id=cb7e15472fe044648092058985e683c9a9248b42)|`Some fixing of the index_set options.`|
|[c9ebdd7](http://git.sagemath.org/sage.git/commit/?id=c9ebdd7bcb4cff58d52d26a532cff3186bbf4c6f)|`Implement coerce map for Permutations(n).`|
|[b0973dc](http://git.sagemath.org/sage.git/commit/?id=b0973dc8b5d147adcd3b2e4451efa8b3dbeeb912)|`Fix coercion map when _coerce_map_from_ returns a callable.`|
|[bd0fcd1](http://git.sagemath.org/sage.git/commit/?id=bd0fcd151cca116148cb20d0a218550bde54350d)|`Merge branch 'public/coerce/fix_coerce_map_from_callable' into public/combinat/fix_sga-16926`|
|[d4568f6](http://git.sagemath.org/sage.git/commit/?id=d4568f6e72f40500e1a39d56b4a4f74146fcab29)|`Finish implementing coercion maps from SymmetricGroup to Permutations(n).`|



---

archive/issue_comments_283667.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[9666765](http://git.sagemath.org/sage.git/commit/?id=9666765a5d7cbab9bfb2b284017fc15be0ab1518)|`Allowing methods to work for other indexing sets.`|",
    "created_at": "2015-03-18T05:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[9666765](http://git.sagemath.org/sage.git/commit/?id=9666765a5d7cbab9bfb2b284017fc15be0ab1518)|`Allowing methods to work for other indexing sets.`|



---

archive/issue_comments_283668.json:
```json
{
    "body": "Changing commit from \"d4568f6e72f40500e1a39d56b4a4f74146fcab29\" to \"9666765a5d7cbab9bfb2b284017fc15be0ab1518\"",
    "created_at": "2015-03-18T05:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d4568f6e72f40500e1a39d56b4a4f74146fcab29" to "9666765a5d7cbab9bfb2b284017fc15be0ab1518"



---

archive/issue_comments_283669.json:
```json
{
    "body": "<a id='comment:35'></a>\nSo the coercion now worked with my changes to having a coercion from the indexing sets, but a bunch of methods were broken using `SymmetricGroup(n)`. I've fixed this by casting the elements into a `Permutations(n)` element (essentially a `Permutation` instance), which may not be the fastest for elements of `SymmetricGroup(n)`, but it works and generalized (when there is a conversion) and is still very fast for elements of `Permutations(n)`. However, IMO other indexing sets (such as with a `WeylGroup`) can wait for later since they just use the general `GroupAlgebra` class.",
    "created_at": "2015-03-18T05:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283669",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'></a>
So the coercion now worked with my changes to having a coercion from the indexing sets, but a bunch of methods were broken using `SymmetricGroup(n)`. I've fixed this by casting the elements into a `Permutations(n)` element (essentially a `Permutation` instance), which may not be the fastest for elements of `SymmetricGroup(n)`, but it works and generalized (when there is a conversion) and is still very fast for elements of `Permutations(n)`. However, IMO other indexing sets (such as with a `WeylGroup`) can wait for later since they just use the general `GroupAlgebra` class.



---

archive/issue_comments_283670.json:
```json
{
    "body": "<a id='comment:36'></a>\nShould not algebra_generators return a Family instead of a list ?",
    "created_at": "2015-03-18T17:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283670",
    "user": "https://github.com/avirmaux"
}
```

<a id='comment:36'></a>
Should not algebra_generators return a Family instead of a list ?



---

archive/issue_comments_283671.json:
```json
{
    "body": "<a id='comment:37'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[7daaa83](http://git.sagemath.org/sage.git/commit/?id=7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7)|`Made algebra_generators return a Family.`|",
    "created_at": "2015-03-18T18:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[7daaa83](http://git.sagemath.org/sage.git/commit/?id=7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7)|`Made algebra_generators return a Family.`|



---

archive/issue_comments_283672.json:
```json
{
    "body": "Changing commit from \"9666765a5d7cbab9bfb2b284017fc15be0ab1518\" to \"7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7\"",
    "created_at": "2015-03-18T18:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9666765a5d7cbab9bfb2b284017fc15be0ab1518" to "7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7"



---

archive/issue_comments_283673.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [virmaux](#comment%3A36):\n> Should not algebra_generators return a Family instead of a list ?\n\n\nAlthough this was the current implementation, I think this is a good as time as any to make this change. Ducktyping and how `Family` works means this shouldn't break anyone's code.",
    "created_at": "2015-03-18T18:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283673",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>
Replying to [virmaux](#comment%3A36):
> Should not algebra_generators return a Family instead of a list ?


Although this was the current implementation, I think this is a good as time as any to make this change. Ducktyping and how `Family` works means this shouldn't break anyone's code.



---

archive/issue_comments_283674.json:
```json
{
    "body": "Changing commit from \"7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7\" to \"f11ba248bd9cf4e88949cb628fa38063b04c0787\"",
    "created_at": "2015-03-19T05:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7daaa83ee93aace69ce63e3ad80d1c5e43f5cdd7" to "f11ba248bd9cf4e88949cb628fa38063b04c0787"



---

archive/issue_comments_283675.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[f11ba24](http://git.sagemath.org/sage.git/commit/?id=f11ba248bd9cf4e88949cb628fa38063b04c0787)|`further corrections in SymmetricGroupAlgebra`|",
    "created_at": "2015-03-19T05:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[f11ba24](http://git.sagemath.org/sage.git/commit/?id=f11ba248bd9cf4e88949cb628fa38063b04c0787)|`further corrections in SymmetricGroupAlgebra`|



---

archive/issue_comments_283676.json:
```json
{
    "body": "Changing commit from \"f11ba248bd9cf4e88949cb628fa38063b04c0787\" to \"de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc\"",
    "created_at": "2015-03-19T06:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f11ba248bd9cf4e88949cb628fa38063b04c0787" to "de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc"



---

archive/issue_comments_283677.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[de5eb2f](http://git.sagemath.org/sage.git/commit/?id=de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc)|`more fixes & warnings`|",
    "created_at": "2015-03-19T06:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[de5eb2f](http://git.sagemath.org/sage.git/commit/?id=de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc)|`more fixes & warnings`|



---

archive/issue_comments_283678.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[d097fdf](http://git.sagemath.org/sage.git/commit/?id=d097fdf6dc78cf7c1bc97781062bd22418f8d8ef)|`review complete(?):`|",
    "created_at": "2015-03-19T06:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[d097fdf](http://git.sagemath.org/sage.git/commit/?id=d097fdf6dc78cf7c1bc97781062bd22418f8d8ef)|`review complete(?):`|



---

archive/issue_comments_283679.json:
```json
{
    "body": "Changing commit from \"de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc\" to \"d097fdf6dc78cf7c1bc97781062bd22418f8d8ef\"",
    "created_at": "2015-03-19T06:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "de5eb2ffa58726499d0c2a6a396d1bdcc9fedfbc" to "d097fdf6dc78cf7c1bc97781062bd22418f8d8ef"



---

archive/issue_comments_283680.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[6657c31](http://git.sagemath.org/sage.git/commit/?id=6657c31932284db43898aee3dc33ca3f5558b544)|`what subsets?`|",
    "created_at": "2015-03-19T06:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[6657c31](http://git.sagemath.org/sage.git/commit/?id=6657c31932284db43898aee3dc33ca3f5558b544)|`what subsets?`|



---

archive/issue_comments_283681.json:
```json
{
    "body": "Changing commit from \"d097fdf6dc78cf7c1bc97781062bd22418f8d8ef\" to \"6657c31932284db43898aee3dc33ca3f5558b544\"",
    "created_at": "2015-03-19T06:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d097fdf6dc78cf7c1bc97781062bd22418f8d8ef" to "6657c31932284db43898aee3dc33ca3f5558b544"



---

archive/issue_comments_283682.json:
```json
{
    "body": "<a id='comment:43'></a>\nI'm done reviewing the functionality of this patch -- it is a good step forward, although I wish it would address the problem in a more systematic way (e.g., using `AlgebraWithRealizations` to put the different bases and indexing sets for the symmetric group algebra on equal footing, and also to get rid of the accursed `mult` global variable). It doesn't introduce any new technical debt, though, that's for sure, and it cleans up some of the existing.\n\nOn the other hand, I cannot promise that this branch causes no speed regressions. Someone who is better at this might want to check this. To me it seems that it slows down the product of two `Permutations(n)` elements by 50% (refining its parent, though), slows down `retract_okounkov_vershik` on symmetric group algebra elements by a bit, and speeds up `left_action_product` on a symmetric group algebra noticeably.",
    "created_at": "2015-03-19T07:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283682",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:43'></a>
I'm done reviewing the functionality of this patch -- it is a good step forward, although I wish it would address the problem in a more systematic way (e.g., using `AlgebraWithRealizations` to put the different bases and indexing sets for the symmetric group algebra on equal footing, and also to get rid of the accursed `mult` global variable). It doesn't introduce any new technical debt, though, that's for sure, and it cleans up some of the existing.

On the other hand, I cannot promise that this branch causes no speed regressions. Someone who is better at this might want to check this. To me it seems that it slows down the product of two `Permutations(n)` elements by 50% (refining its parent, though), slows down `retract_okounkov_vershik` on symmetric group algebra elements by a bit, and speeds up `left_action_product` on a symmetric group algebra noticeably.



---

archive/issue_comments_283683.json:
```json
{
    "body": "Changing commit from \"6657c31932284db43898aee3dc33ca3f5558b544\" to \"947bed483cd03fbd03cc0741235e50fd8b568193\"",
    "created_at": "2015-03-19T19:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283683",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6657c31932284db43898aee3dc33ca3f5558b544" to "947bed483cd03fbd03cc0741235e50fd8b568193"



---

archive/issue_comments_283684.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[662421d](http://git.sagemath.org/sage.git/commit/?id=662421daa611f739e6c13598afe5f4d06383f2b8)|`Cythonized permutation multiplication and trying to remove speed regression.`|\n|[947bed4](http://git.sagemath.org/sage.git/commit/?id=947bed483cd03fbd03cc0741235e50fd8b568193)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into public/combinat/fix_sga-16926`|",
    "created_at": "2015-03-19T19:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[662421d](http://git.sagemath.org/sage.git/commit/?id=662421daa611f739e6c13598afe5f4d06383f2b8)|`Cythonized permutation multiplication and trying to remove speed regression.`|
|[947bed4](http://git.sagemath.org/sage.git/commit/?id=947bed483cd03fbd03cc0741235e50fd8b568193)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into public/combinat/fix_sga-16926`|



---

archive/issue_comments_283685.json:
```json
{
    "body": "<a id='comment:45'></a>\nI've made some tweaks to the permutations multiplication, which significantly drops the number of function calls according to `%prun`, as well as cythonizing it. Here's my timings:\n\n```\nsage: P = Permutations(5)\nsage: x = P.random_element()\nsage: y = P.random_element()\nsage: %timeit x*y\n10000 loops, best of 3: 61.2 \u00b5s per loop\nsage: P = Permutations(100)\nsage: x = P.random_element()\nsage: y = P.random_element()\nsage: %timeit x*y\n1000 loops, best of 3: 167 \u00b5s per loop\n```\nBefore:\n\n```\nsage: %timeit x*y\n10000 loops, best of 3: 87.3 \u00b5s per loop\nsage: %timeit x*y\n1000 loops, best of 3: 210 \u00b5s per loop\n```\nI don't care so much on `retract_okounkov_vershik`, but since you say its a very minor regression, I'm not going to consider it (in fact, it might be faster now with faster multiplication). Here's some timings of `left_action_product`:\n\n```\nsage: P = Permutations(5)\nsage: x = P.random_element()\nsage: Q = Permutations(100)\nsage: y = Q.random_element()\nsage: %timeit x*y\n1000 loops, best of 3: 300 \u00b5s per loop\nsage: %timeit x.left_action_product(y)\n10000 loops, best of 3: 167 \u00b5s per loop\n```\nBefore:\n\n```\nsage: %timeit x*y\n1000 loops, best of 3: 225 \u00b5s per loop\nsage: %timeit x.left_action_product(y)\n1000 loops, best of 3: 212 \u00b5s per loop\n```\nSo there's ~20% slowdown when multiplying different parents, which surprises me somewhat. Let me see if I can fix that for a few minutes...",
    "created_at": "2015-03-19T19:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283685",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>
I've made some tweaks to the permutations multiplication, which significantly drops the number of function calls according to `%prun`, as well as cythonizing it. Here's my timings:

```
sage: P = Permutations(5)
sage: x = P.random_element()
sage: y = P.random_element()
sage: %timeit x*y
10000 loops, best of 3: 61.2 ¬µs per loop
sage: P = Permutations(100)
sage: x = P.random_element()
sage: y = P.random_element()
sage: %timeit x*y
1000 loops, best of 3: 167 ¬µs per loop
```
Before:

```
sage: %timeit x*y
10000 loops, best of 3: 87.3 ¬µs per loop
sage: %timeit x*y
1000 loops, best of 3: 210 ¬µs per loop
```
I don't care so much on `retract_okounkov_vershik`, but since you say its a very minor regression, I'm not going to consider it (in fact, it might be faster now with faster multiplication). Here's some timings of `left_action_product`:

```
sage: P = Permutations(5)
sage: x = P.random_element()
sage: Q = Permutations(100)
sage: y = Q.random_element()
sage: %timeit x*y
1000 loops, best of 3: 300 ¬µs per loop
sage: %timeit x.left_action_product(y)
10000 loops, best of 3: 167 ¬µs per loop
```
Before:

```
sage: %timeit x*y
1000 loops, best of 3: 225 ¬µs per loop
sage: %timeit x.left_action_product(y)
1000 loops, best of 3: 212 ¬µs per loop
```
So there's ~20% slowdown when multiplying different parents, which surprises me somewhat. Let me see if I can fix that for a few minutes...



---

archive/issue_comments_283686.json:
```json
{
    "body": "Changing commit from \"947bed483cd03fbd03cc0741235e50fd8b568193\" to \"aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f\"",
    "created_at": "2015-03-19T19:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "947bed483cd03fbd03cc0741235e50fd8b568193" to "aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f"



---

archive/issue_comments_283687.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[aebceaf](http://git.sagemath.org/sage.git/commit/?id=aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f)|`Speeding up multiplication of different sizes.`|",
    "created_at": "2015-03-19T19:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[aebceaf](http://git.sagemath.org/sage.git/commit/?id=aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f)|`Speeding up multiplication of different sizes.`|



---

archive/issue_comments_283688.json:
```json
{
    "body": "<a id='comment:47'></a>\nBoom:\n\n```\nsage: P = Permutations(5)\nsage: x = P.random_element()\nsage: Q = Permutations(100)\nsage: y = Q.random_element()\nsage: %timeit x*y\n1000 loops, best of 3: 195 \u00b5s per loop\n```\nSo that should take care of speed regressions (at least any that I care about). So if you're happy with my changes, then let's get this in.",
    "created_at": "2015-03-19T19:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283688",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:47'></a>
Boom:

```
sage: P = Permutations(5)
sage: x = P.random_element()
sage: Q = Permutations(100)
sage: y = Q.random_element()
sage: %timeit x*y
1000 loops, best of 3: 195 ¬µs per loop
```
So that should take care of speed regressions (at least any that I care about). So if you're happy with my changes, then let's get this in.



---

archive/issue_comments_283689.json:
```json
{
    "body": "Changing commit from \"aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f\" to \"bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f\"",
    "created_at": "2015-03-19T21:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aebceaf130a0cd513dcd7cfe81b45c2bfc98ba8f" to "bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f"



---

archive/issue_comments_283690.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[bcec1c3](http://git.sagemath.org/sage.git/commit/?id=bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f)|`Doing more wiggling for speed.`|",
    "created_at": "2015-03-19T21:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[bcec1c3](http://git.sagemath.org/sage.git/commit/?id=bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f)|`Doing more wiggling for speed.`|



---

archive/issue_comments_283691.json:
```json
{
    "body": "Changing commit from \"bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f\" to \"b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea\"",
    "created_at": "2015-03-19T22:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bcec1c3c2f1dfe0ceff9c51a025b04647246ba5f" to "b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea"



---

archive/issue_comments_283692.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[b50472e](http://git.sagemath.org/sage.git/commit/?id=b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea)|`Removing unnecessary code and adding warning.`|",
    "created_at": "2015-03-19T22:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[b50472e](http://git.sagemath.org/sage.git/commit/?id=b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea)|`Removing unnecessary code and adding warning.`|



---

archive/issue_comments_283693.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|\n|[a3c0161](http://git.sagemath.org/sage.git/commit/?id=a3c01618e761451d1939030fefb9f8eeac30f025)|`16926: added support for WeylGroups, essentially by removing unneeded code + somewhat simplified constructor API + tests`|\n|[011e877](http://git.sagemath.org/sage.git/commit/?id=011e877182b0d77c4943d34e27173e000e671d58)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into t/16926/public/combinat/fix_sga-16926`|",
    "created_at": "2015-03-19T23:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
|[a3c0161](http://git.sagemath.org/sage.git/commit/?id=a3c01618e761451d1939030fefb9f8eeac30f025)|`16926: added support for WeylGroups, essentially by removing unneeded code + somewhat simplified constructor API + tests`|
|[011e877](http://git.sagemath.org/sage.git/commit/?id=011e877182b0d77c4943d34e27173e000e671d58)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into t/16926/public/combinat/fix_sga-16926`|



---

archive/issue_comments_283694.json:
```json
{
    "body": "Changing commit from \"b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea\" to \"011e877182b0d77c4943d34e27173e000e671d58\"",
    "created_at": "2015-03-19T23:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b50472eda0f21d983a4bc247ab1fdc8d89d5d0ea" to "011e877182b0d77c4943d34e27173e000e671d58"



---

archive/issue_comments_283695.json:
```json
{
    "body": "<a id='comment:51'></a>\nHi,\n\nI have been through the code, and discussed it with Darij and Travis. Please check the above commits; if you are happy with them, this can be positive review, assuming the patchbot goes green.\n\nThanks Travis and Darij for all the work!",
    "created_at": "2015-03-19T23:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283695",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:51'></a>
Hi,

I have been through the code, and discussed it with Darij and Travis. Please check the above commits; if you are happy with them, this can be positive review, assuming the patchbot goes green.

Thanks Travis and Darij for all the work!



---

archive/issue_comments_283696.json:
```json
{
    "body": "Changing commit from \"011e877182b0d77c4943d34e27173e000e671d58\" to \"23cefb9861ae2dc866935bbd6f6b83ff44a36be5\"",
    "created_at": "2015-03-19T23:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "011e877182b0d77c4943d34e27173e000e671d58" to "23cefb9861ae2dc866935bbd6f6b83ff44a36be5"



---

archive/issue_comments_283697.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[23cefb9](http://git.sagemath.org/sage.git/commit/?id=23cefb9861ae2dc866935bbd6f6b83ff44a36be5)|`16926: trivial doctest updates w.r.t. previous merge.`|",
    "created_at": "2015-03-19T23:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[23cefb9](http://git.sagemath.org/sage.git/commit/?id=23cefb9861ae2dc866935bbd6f6b83ff44a36be5)|`16926: trivial doctest updates w.r.t. previous merge.`|



---

archive/issue_comments_283698.json:
```json
{
    "body": "<a id='comment:53'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|\n|[4c3c9e4](http://git.sagemath.org/sage.git/commit/?id=4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9)|`I don't think the WeylAlgebra setting is supported enough to be advertised; furthermore the algebra method on nonstandard symmetric groups is fubar`|",
    "created_at": "2015-03-20T03:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
|[4c3c9e4](http://git.sagemath.org/sage.git/commit/?id=4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9)|`I don't think the WeylAlgebra setting is supported enough to be advertised; furthermore the algebra method on nonstandard symmetric groups is fubar`|



---

archive/issue_comments_283699.json:
```json
{
    "body": "Changing commit from \"23cefb9861ae2dc866935bbd6f6b83ff44a36be5\" to \"4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9\"",
    "created_at": "2015-03-20T03:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "23cefb9861ae2dc866935bbd6f6b83ff44a36be5" to "4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9"



---

archive/issue_comments_283700.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[b2069db](http://git.sagemath.org/sage.git/commit/?id=b2069db112563dd15542ba83b895b43531d71f1a)|`use cythonized left/right_action_products in SGA too`|\n|[655380d](http://git.sagemath.org/sage.git/commit/?id=655380d1fb6bd116ae23864b78cde2bf27d7ac24)|`more optimizations`|",
    "created_at": "2015-03-20T04:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[b2069db](http://git.sagemath.org/sage.git/commit/?id=b2069db112563dd15542ba83b895b43531d71f1a)|`use cythonized left/right_action_products in SGA too`|
|[655380d](http://git.sagemath.org/sage.git/commit/?id=655380d1fb6bd116ae23864b78cde2bf27d7ac24)|`more optimizations`|



---

archive/issue_comments_283701.json:
```json
{
    "body": "Changing commit from \"4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9\" to \"655380d1fb6bd116ae23864b78cde2bf27d7ac24\"",
    "created_at": "2015-03-20T04:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9" to "655380d1fb6bd116ae23864b78cde2bf27d7ac24"



---

archive/issue_comments_283702.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-20T05:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283702",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283703.json:
```json
{
    "body": "<a id='comment:55'></a>\nWe looked over my latest commits with Travis, and he is fine with them (up to little things we fixed). This is good to go, assuming the patchbot goes green.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|\n|[4c3c9e4](http://git.sagemath.org/sage.git/commit/?id=4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9)|`I don't think the WeylAlgebra setting is supported enough to be advertised; furthermore the algebra method on nonstandard symmetric groups is fubar`|\n|[b2069db](http://git.sagemath.org/sage.git/commit/?id=b2069db112563dd15542ba83b895b43531d71f1a)|`use cythonized left/right_action_products in SGA too`|\n|[655380d](http://git.sagemath.org/sage.git/commit/?id=655380d1fb6bd116ae23864b78cde2bf27d7ac24)|`more optimizations`|",
    "created_at": "2015-03-20T05:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283703",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:55'></a>
We looked over my latest commits with Travis, and he is fine with them (up to little things we fixed). This is good to go, assuming the patchbot goes green.

---
New commits:
|                                                                                                                                          |                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
|[4c3c9e4](http://git.sagemath.org/sage.git/commit/?id=4c3c9e45fcb8d96a3733229d8b814fe6dd1485d9)|`I don't think the WeylAlgebra setting is supported enough to be advertised; furthermore the algebra method on nonstandard symmetric groups is fubar`|
|[b2069db](http://git.sagemath.org/sage.git/commit/?id=b2069db112563dd15542ba83b895b43531d71f1a)|`use cythonized left/right_action_products in SGA too`|
|[655380d](http://git.sagemath.org/sage.git/commit/?id=655380d1fb6bd116ae23864b78cde2bf27d7ac24)|`more optimizations`|



---

archive/issue_comments_283704.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Darij Grinberg, Nicolas M. Thi\u00e9ry\"",
    "created_at": "2015-03-20T05:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283704",
    "user": "https://github.com/nthiery"
}
```

Changing reviewer from "" to "Darij Grinberg, Nicolas M. Thi√©ry"



---

archive/issue_comments_283705.json:
```json
{
    "body": "<a id='comment:56'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[49307d7](http://git.sagemath.org/sage.git/commit/?id=49307d7f7c598101ea7d381fc6fc8efa65aed66f)|`16926: proofreading with Travis`|\n|[8fe64bf](http://git.sagemath.org/sage.git/commit/?id=8fe64bfca71b6a72b4e7837e6ce668e0be2f1128)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into t/16926/public/combinat/fix_sga-16926`|",
    "created_at": "2015-03-20T05:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[49307d7](http://git.sagemath.org/sage.git/commit/?id=49307d7f7c598101ea7d381fc6fc8efa65aed66f)|`16926: proofreading with Travis`|
|[8fe64bf](http://git.sagemath.org/sage.git/commit/?id=8fe64bfca71b6a72b4e7837e6ce668e0be2f1128)|`Merge branch 'public/combinat/fix_sga-16926' of trac.sagemath.org:sage into t/16926/public/combinat/fix_sga-16926`|



---

archive/issue_comments_283706.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-03-20T05:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_283707.json:
```json
{
    "body": "Changing commit from \"655380d1fb6bd116ae23864b78cde2bf27d7ac24\" to \"8fe64bfca71b6a72b4e7837e6ce668e0be2f1128\"",
    "created_at": "2015-03-20T05:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "655380d1fb6bd116ae23864b78cde2bf27d7ac24" to "8fe64bfca71b6a72b4e7837e6ce668e0be2f1128"



---

archive/issue_comments_283708.json:
```json
{
    "body": "<a id='comment:57'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[1f97814](http://git.sagemath.org/sage.git/commit/?id=1f97814d2e67abc00b2f419d2c3836ff54cfe3da)|`16926: proofread Darij's latest changes`|",
    "created_at": "2015-03-20T05:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[1f97814](http://git.sagemath.org/sage.git/commit/?id=1f97814d2e67abc00b2f419d2c3836ff54cfe3da)|`16926: proofread Darij's latest changes`|



---

archive/issue_comments_283709.json:
```json
{
    "body": "Changing commit from \"8fe64bfca71b6a72b4e7837e6ce668e0be2f1128\" to \"1f97814d2e67abc00b2f419d2c3836ff54cfe3da\"",
    "created_at": "2015-03-20T05:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8fe64bfca71b6a72b4e7837e6ce668e0be2f1128" to "1f97814d2e67abc00b2f419d2c3836ff54cfe3da"



---

archive/issue_comments_283710.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-20T05:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283710",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283711.json:
```json
{
    "body": "<a id='comment:58'></a>\nI proofread Darij's changes, and implemented the suggestion from his warning; Travis proofread my proofreading. Back to positive review.",
    "created_at": "2015-03-20T05:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283711",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:58'></a>
I proofread Darij's changes, and implemented the suggestion from his warning; Travis proofread my proofreading. Back to positive review.



---

archive/issue_comments_283712.json:
```json
{
    "body": "Changing commit from \"1f97814d2e67abc00b2f419d2c3836ff54cfe3da\" to \"12aaaf819bbb30bbd28748f27944d295cd4884d2\"",
    "created_at": "2015-03-20T05:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1f97814d2e67abc00b2f419d2c3836ff54cfe3da" to "12aaaf819bbb30bbd28748f27944d295cd4884d2"



---

archive/issue_comments_283713.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-03-20T05:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_283714.json:
```json
{
    "body": "<a id='comment:59'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[12aaaf8](http://git.sagemath.org/sage.git/commit/?id=12aaaf819bbb30bbd28748f27944d295cd4884d2)|`doctesting the demise of my bug`|",
    "created_at": "2015-03-20T05:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[12aaaf8](http://git.sagemath.org/sage.git/commit/?id=12aaaf819bbb30bbd28748f27944d295cd4884d2)|`doctesting the demise of my bug`|



---

archive/issue_comments_283715.json:
```json
{
    "body": "<a id='comment:60'></a>\nLGTM. Darij, are you going to do the (quick) review of #17981?",
    "created_at": "2015-03-20T05:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283715",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'></a>
LGTM. Darij, are you going to do the (quick) review of #17981?



---

archive/issue_comments_283716.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-20T05:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283716",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283717.json:
```json
{
    "body": "Changing keywords from \"\" to \"days64\".",
    "created_at": "2015-03-20T05:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283717",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "" to "days64".



---

archive/issue_events_049400.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-20T05:35:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16926#event-49400"
}
```



---

archive/issue_comments_283718.json:
```json
{
    "body": "<a id='comment:61'></a>\nThanks, Travis!",
    "created_at": "2015-03-20T05:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283718",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:61'></a>
Thanks, Travis!



---

archive/issue_comments_283719.json:
```json
{
    "body": "<a id='comment:62'></a>\nDoctest failures",
    "created_at": "2015-03-20T19:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283719",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:62'></a>
Doctest failures



---

archive/issue_comments_283720.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-20T19:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283720",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_283721.json:
```json
{
    "body": "<a id='comment:63'></a>\nCould you tell us where you got the failures? (There might also be an issue with us testing this on beta5.)",
    "created_at": "2015-03-20T20:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283721",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:63'></a>
Could you tell us where you got the failures? (There might also be an issue with us testing this on beta5.)



---

archive/issue_comments_283722.json:
```json
{
    "body": "<a id='comment:64'></a>\nThe doctests haven't finished yet, but I already get these:\n\n```\nFile \"src/sage/combinat/backtrack.py\", line 867, in sage.combinat.backtrack.TransitiveIdeal\nFailed example:\n    [p for p in TransitiveIdeal(attrcall(\"permutohedron_succ\"), [Permutation([1,2,3])])]\nExpected:\n    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 2, 1], [3, 1, 2]]\nGot:\n    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 1, 2], [3, 2, 1]]\n**********************************************************************\nFile \"src/sage/combinat/backtrack.py\", line 873, in sage.combinat.backtrack.TransitiveIdeal\nFailed example:\n    [p for p in TransitiveIdeal(attrcall(\"permutohedron_succ\"), [Permutation([3,1,2,4]), Permutation([2,1,3,4])])]\nExpected:\n    [[2, 1, 3, 4], [2, 1, 4, 3], [2, 4, 1, 3], [4, 2, 1, 3], [4, 2, 3, 1], [4, 3, 2, 1], [3, 1, 2, 4], [2, 4, 3, 1], [3, 2, 1, 4], [2, 3, 1, 4], [2, 3, 4, 1], [3, 2, 4, 1], [3, 1, 4, 2], [3, 4, 2, 1], [3, 4, 1, 2], [4, 3, 1, 2]]\nGot:\n    [[2, 1, 3, 4],\n     [3, 1, 2, 4],\n     [2, 1, 4, 3],\n     [3, 1, 4, 2],\n     [2, 3, 1, 4],\n     [3, 4, 1, 2],\n     [3, 4, 2, 1],\n     [2, 3, 4, 1],\n     [2, 4, 1, 3],\n     [3, 2, 1, 4],\n     [4, 3, 1, 2],\n     [4, 3, 2, 1],\n     [3, 2, 4, 1],\n     [4, 2, 1, 3],\n     [2, 4, 3, 1],\n     [4, 2, 3, 1]]\n**********************************************************************\nFile \"src/sage/combinat/backtrack.py\", line 989, in sage.combinat.backtrack.TransitiveIdealGraded\nFailed example:\n    [p for p in TransitiveIdealGraded(attrcall(\"permutohedron_succ\"), [Permutation([3,1,2,4]), Permutation([2,1,3,4])])]\nExpected:\n    [[3, 1, 2, 4], [2, 1, 3, 4], [2, 1, 4, 3], [3, 2, 1, 4], [2, 3, 1, 4], [3, 1, 4, 2], [2, 3, 4, 1], [3, 4, 1, 2], [3, 2, 4, 1], [2, 4, 1, 3], [2, 4, 3, 1], [4, 3, 1, 2], [4, 2, 1, 3], [3, 4, 2, 1], [4, 2, 3, 1], [4, 3, 2, 1]]\nGot:\n    [[3, 1, 2, 4],\n     [2, 1, 3, 4],\n     [2, 3, 1, 4],\n     [2, 1, 4, 3],\n     [3, 2, 1, 4],\n     [3, 1, 4, 2],\n     [3, 2, 4, 1],\n     [2, 4, 1, 3],\n     [3, 4, 1, 2],\n     [2, 3, 4, 1],\n     [4, 3, 1, 2],\n     [3, 4, 2, 1],\n     [4, 2, 1, 3],\n     [2, 4, 3, 1],\n     [4, 3, 2, 1],\n     [4, 2, 3, 1]]\n**********************************************************************\n2 items had failures:\n   2 of  16 in sage.combinat.backtrack.TransitiveIdeal\n   1 of   8 in sage.combinat.backtrack.TransitiveIdealGraded\n    [176 tests, 3 failures, 102.22 s]\n```",
    "created_at": "2015-03-20T20:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283722",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:64'></a>
The doctests haven't finished yet, but I already get these:

```
File "src/sage/combinat/backtrack.py", line 867, in sage.combinat.backtrack.TransitiveIdeal
Failed example:
    [p for p in TransitiveIdeal(attrcall("permutohedron_succ"), [Permutation([1,2,3])])]
Expected:
    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 2, 1], [3, 1, 2]]
Got:
    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
**********************************************************************
File "src/sage/combinat/backtrack.py", line 873, in sage.combinat.backtrack.TransitiveIdeal
Failed example:
    [p for p in TransitiveIdeal(attrcall("permutohedron_succ"), [Permutation([3,1,2,4]), Permutation([2,1,3,4])])]
Expected:
    [[2, 1, 3, 4], [2, 1, 4, 3], [2, 4, 1, 3], [4, 2, 1, 3], [4, 2, 3, 1], [4, 3, 2, 1], [3, 1, 2, 4], [2, 4, 3, 1], [3, 2, 1, 4], [2, 3, 1, 4], [2, 3, 4, 1], [3, 2, 4, 1], [3, 1, 4, 2], [3, 4, 2, 1], [3, 4, 1, 2], [4, 3, 1, 2]]
Got:
    [[2, 1, 3, 4],
     [3, 1, 2, 4],
     [2, 1, 4, 3],
     [3, 1, 4, 2],
     [2, 3, 1, 4],
     [3, 4, 1, 2],
     [3, 4, 2, 1],
     [2, 3, 4, 1],
     [2, 4, 1, 3],
     [3, 2, 1, 4],
     [4, 3, 1, 2],
     [4, 3, 2, 1],
     [3, 2, 4, 1],
     [4, 2, 1, 3],
     [2, 4, 3, 1],
     [4, 2, 3, 1]]
**********************************************************************
File "src/sage/combinat/backtrack.py", line 989, in sage.combinat.backtrack.TransitiveIdealGraded
Failed example:
    [p for p in TransitiveIdealGraded(attrcall("permutohedron_succ"), [Permutation([3,1,2,4]), Permutation([2,1,3,4])])]
Expected:
    [[3, 1, 2, 4], [2, 1, 3, 4], [2, 1, 4, 3], [3, 2, 1, 4], [2, 3, 1, 4], [3, 1, 4, 2], [2, 3, 4, 1], [3, 4, 1, 2], [3, 2, 4, 1], [2, 4, 1, 3], [2, 4, 3, 1], [4, 3, 1, 2], [4, 2, 1, 3], [3, 4, 2, 1], [4, 2, 3, 1], [4, 3, 2, 1]]
Got:
    [[3, 1, 2, 4],
     [2, 1, 3, 4],
     [2, 3, 1, 4],
     [2, 1, 4, 3],
     [3, 2, 1, 4],
     [3, 1, 4, 2],
     [3, 2, 4, 1],
     [2, 4, 1, 3],
     [3, 4, 1, 2],
     [2, 3, 4, 1],
     [4, 3, 1, 2],
     [3, 4, 2, 1],
     [4, 2, 1, 3],
     [2, 4, 3, 1],
     [4, 3, 2, 1],
     [4, 2, 3, 1]]
**********************************************************************
2 items had failures:
   2 of  16 in sage.combinat.backtrack.TransitiveIdeal
   1 of   8 in sage.combinat.backtrack.TransitiveIdealGraded
    [176 tests, 3 failures, 102.22 s]
```



---

archive/issue_comments_283723.json:
```json
{
    "body": "<a id='comment:65'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[009ae60](http://git.sagemath.org/sage.git/commit/?id=009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38)|`Trivial doctest fixes and removed old note in Groups().`|",
    "created_at": "2015-03-20T21:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[009ae60](http://git.sagemath.org/sage.git/commit/?id=009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38)|`Trivial doctest fixes and removed old note in Groups().`|



---

archive/issue_comments_283724.json:
```json
{
    "body": "Changing commit from \"12aaaf819bbb30bbd28748f27944d295cd4884d2\" to \"009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38\"",
    "created_at": "2015-03-20T21:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "12aaaf819bbb30bbd28748f27944d295cd4884d2" to "009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38"



---

archive/issue_comments_283725.json:
```json
{
    "body": "<a id='comment:66'></a>\nFixed; those which came from the ordering of `Permutations` iterator changed because I am now using `itertools.permutations`. Also there were some failures in the `Groups()` category from an old warning message that I removed. Nicolas and/or Darij, do you agree with my changes?",
    "created_at": "2015-03-20T21:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283725",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:66'></a>
Fixed; those which came from the ordering of `Permutations` iterator changed because I am now using `itertools.permutations`. Also there were some failures in the `Groups()` category from an old warning message that I removed. Nicolas and/or Darij, do you agree with my changes?



---

archive/issue_comments_283726.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-20T21:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283726",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_283727.json:
```json
{
    "body": "<a id='comment:67'></a>\nI agree. Thank you!",
    "created_at": "2015-03-20T21:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283727",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:67'></a>
I agree. Thank you!



---

archive/issue_comments_283728.json:
```json
{
    "body": "<a id='comment:68'></a>\nI'm taking that as a back to `positive_review`.",
    "created_at": "2015-03-20T21:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283728",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:68'></a>
I'm taking that as a back to `positive_review`.



---

archive/issue_comments_283729.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-20T21:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283729",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283730.json:
```json
{
    "body": "<a id='comment:69'></a>\nSimilarly:\n\n```\nsage -t --long --warn-long 46.4 src/sage/sets/recursively_enumerated_set.pyx\n**********************************************************************\nFile \"src/sage/sets/recursively_enumerated_set.pyx\", line 116, in sage.sets.recursively_enumerated_set\nFailed example:\n    list(R.elements_of_depth_iterator(9))\nExpected:\n    [[5, 4, 2, 3, 1], [4, 5, 3, 2, 1], [5, 3, 4, 2, 1], [5, 4, 3, 1, 2]]\nGot:\n    [[5, 3, 4, 2, 1], [4, 5, 3, 2, 1], [5, 4, 2, 3, 1], [5, 4, 3, 1, 2]]\n**********************************************************************\nFile \"src/sage/sets/recursively_enumerated_set.pyx\", line 802, in sage.sets.recursively_enumerated_set.RecursivelyEnumeratedSet_generic.naive_search_iterator\nFailed example:\n    list(R.naive_search_iterator())\nExpected:\n    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 2, 1], [3, 1, 2]]\nGot:\n    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 1, 2], [3, 2, 1]]\n**********************************************************************\n2 items had failures:\n   1 of  41 in sage.sets.recursively_enumerated_set\n   1 of   5 in sage.sets.recursively_enumerated_set.RecursivelyEnumeratedSet_generic.naive_search_iterator\n    [193 tests, 2 failures, 0.76 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.4 src/sage/sets/recursively_enumerated_set.pyx  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2015-03-20T21:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283730",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:69'></a>
Similarly:

```
sage -t --long --warn-long 46.4 src/sage/sets/recursively_enumerated_set.pyx
**********************************************************************
File "src/sage/sets/recursively_enumerated_set.pyx", line 116, in sage.sets.recursively_enumerated_set
Failed example:
    list(R.elements_of_depth_iterator(9))
Expected:
    [[5, 4, 2, 3, 1], [4, 5, 3, 2, 1], [5, 3, 4, 2, 1], [5, 4, 3, 1, 2]]
Got:
    [[5, 3, 4, 2, 1], [4, 5, 3, 2, 1], [5, 4, 2, 3, 1], [5, 4, 3, 1, 2]]
**********************************************************************
File "src/sage/sets/recursively_enumerated_set.pyx", line 802, in sage.sets.recursively_enumerated_set.RecursivelyEnumeratedSet_generic.naive_search_iterator
Failed example:
    list(R.naive_search_iterator())
Expected:
    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 2, 1], [3, 1, 2]]
Got:
    [[1, 2, 3], [2, 1, 3], [1, 3, 2], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
**********************************************************************
2 items had failures:
   1 of  41 in sage.sets.recursively_enumerated_set
   1 of   5 in sage.sets.recursively_enumerated_set.RecursivelyEnumeratedSet_generic.naive_search_iterator
    [193 tests, 2 failures, 0.76 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.4 src/sage/sets/recursively_enumerated_set.pyx  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_283731.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-20T21:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283731",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_283732.json:
```json
{
    "body": "Changing commit from \"009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38\" to \"bf9fc43cd076381692686dbe26f66a61f7955c1a\"",
    "created_at": "2015-03-20T22:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "009ae6047c1ca8b678cdfd3dcbe96f7159a6fe38" to "bf9fc43cd076381692686dbe26f66a61f7955c1a"



---

archive/issue_comments_283733.json:
```json
{
    "body": "<a id='comment:70'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[bf9fc43](http://git.sagemath.org/sage.git/commit/?id=bf9fc43cd076381692686dbe26f66a61f7955c1a)|`More order of iteration doctest fixes.`|",
    "created_at": "2015-03-20T22:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[bf9fc43](http://git.sagemath.org/sage.git/commit/?id=bf9fc43cd076381692686dbe26f66a61f7955c1a)|`More order of iteration doctest fixes.`|



---

archive/issue_comments_283734.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-20T22:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283734",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_283735.json:
```json
{
    "body": "<a id='comment:71'></a>\nHopefully that's all of them...",
    "created_at": "2015-03-20T22:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283735",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:71'></a>
Hopefully that's all of them...



---

archive/issue_comments_283736.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2015-03-20T23:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283736",
    "user": "https://github.com/nthiery"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_283737.json:
```json
{
    "body": "<a id='comment:72'></a>\nHey,\n\nSorry, before this goes in I'd like to double check with you for which object we changed the enumeration order. I am in the hangout room on the 3rd floor.\n\nThanks!\n                                  Cheers,",
    "created_at": "2015-03-20T23:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283737",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:72'></a>
Hey,

Sorry, before this goes in I'd like to double check with you for which object we changed the enumeration order. I am in the hangout room on the 3rd floor.

Thanks!
                                  Cheers,



---

archive/issue_comments_283738.json:
```json
{
    "body": "<a id='comment:73'></a>\nThe change in ordering in these tests was due to the hash changing for the permutations of `n`. The hash changed because the parent changed in the sense that it has a much longer MRO due to the change in its category. However the actual iteration of `Permutations(n)` has not changed (by lex ordering), so we (Darij, Nicolas, and I) are okay with this.",
    "created_at": "2015-03-20T23:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283738",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:73'></a>
The change in ordering in these tests was due to the hash changing for the permutations of `n`. The hash changed because the parent changed in the sense that it has a much longer MRO due to the change in its category. However the actual iteration of `Permutations(n)` has not changed (by lex ordering), so we (Darij, Nicolas, and I) are okay with this.



---

archive/issue_comments_283739.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2015-03-20T23:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283739",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_events_049401.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-21T12:37:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16926#event-49401"
}
```



---

archive/issue_comments_283740.json:
```json
{
    "body": "Changing branch from \"public/combinat/fix_sga-16926\" to \"bf9fc43cd076381692686dbe26f66a61f7955c1a\"",
    "created_at": "2015-03-21T12:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283740",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/fix_sga-16926" to "bf9fc43cd076381692686dbe26f66a61f7955c1a"



---

archive/issue_comments_283741.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-21T12:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16926#issuecomment-283741",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
