# Issue 16227: Product construction of Transversal Designs

archive/issues_015990.json:
```json
{
    "assignees": [],
    "body": "This branch implements a product construction of transversal designs. This allows to build new transversal designs that are needed for the general construction of bibd with k=5.\n\nNathann\n\nDepends on #15310\n\nCC:  @videlec @KPanComputes @dimpase\n\nBranch/Commit: **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Nathann Cohen**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16227_\n\n",
    "closed_at": "2014-05-07T08:31:11Z",
    "created_at": "2014-04-24T13:42:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Product construction of Transversal Designs",
    "type": "issue",
    "updated_at": "2014-05-07T08:31:11Z",
    "url": "https://github.com/sagemath/sage/issues/16227",
    "user": "https://github.com/nathanncohen"
}
```
This branch implements a product construction of transversal designs. This allows to build new transversal designs that are needed for the general construction of bibd with k=5.

Nathann

Depends on #15310

CC:  @videlec @KPanComputes @dimpase

Branch/Commit: **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**

Reviewer: **Vincent Delecroix**

Author: **Nathann Cohen**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/16227_





---

archive/issue_events_229554.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-24T13:42:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229554"
}
```



---

archive/issue_events_229555.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-24T13:42:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229555"
}
```



---

archive/issue_events_229556.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-24T13:42:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229556"
}
```



---

archive/issue_events_229557.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-24T13:42:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229557"
}
```



---

archive/issue_comments_207413.json:
```json
{
    "body": "Commit: **[`d0e33a6`](https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3)**",
    "created_at": "2014-04-24T13:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207413",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`d0e33a6`](https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3)**



---

archive/issue_comments_207414.json:
```json
{
    "body": "Branch: **[u/ncohen/16227](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16227)**",
    "created_at": "2014-04-24T13:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207414",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/16227](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16227)**



---

archive/issue_events_229558.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-04-24T13:46:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229558"
}
```



---

archive/issue_comments_207415.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03f896c363e23a00fabf0b38b87a277354f07327\"><code>03f896c</code></a></td><td><code>trac #15310: Wilson's construction of Transversal Designs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6357236d82dd6714eb59a7e63bb22a7f02c18e88\"><code>6357236</code></a></td><td><code>trac #15310: Rebase on updated #15431</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25f5959ec5fe7ccd1479fdbdcd489cf550933c7e\"><code>25f5959</code></a></td><td><code>trac #15310: Merged into 6.2.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3\"><code>d0e33a6</code></a></td><td><code>trac #16227: Product construction of Transversal Designs</code></td></tr></table>\n",
    "created_at": "2014-04-24T13:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207415",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03f896c363e23a00fabf0b38b87a277354f07327"><code>03f896c</code></a></td><td><code>trac #15310: Wilson's construction of Transversal Designs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6357236d82dd6714eb59a7e63bb22a7f02c18e88"><code>6357236</code></a></td><td><code>trac #15310: Rebase on updated #15431</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25f5959ec5fe7ccd1479fdbdcd489cf550933c7e"><code>25f5959</code></a></td><td><code>trac #15310: Merged into 6.2.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3"><code>d0e33a6</code></a></td><td><code>trac #16227: Product construction of Transversal Designs</code></td></tr></table>




---

archive/issue_comments_207416.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c\"><code>054d2a2</code></a></td><td><code>trac #16227: Product construction of Transversal Designs</code></td></tr></table>\n",
    "created_at": "2014-04-24T14:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207416",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c"><code>054d2a2</code></a></td><td><code>trac #16227: Product construction of Transversal Designs</code></td></tr></table>




---

archive/issue_comments_207417.json:
```json
{
    "body": "Changed commit from **[`d0e33a6`](https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3)** to **[`054d2a2`](https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c)**",
    "created_at": "2014-04-24T14:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207417",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0e33a6`](https://github.com/sagemath/sagetrac-mirror/commit/d0e33a6442be6048db925335fd006ab20fc5ffc3)** to **[`054d2a2`](https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c)**



---

archive/issue_comments_207418.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHi,\n\nOnce you have fix the merge with #15310, here are other problems\n- the product is sometimes called the Kronecker product and it should be mentioned in the doc.\n- I do not like the way it works: `wilson_construction` and `TD_product` have the same purpose, build more examples of TD. But first of all, the naming scheme are different. Why not TD_wilson_construction? More importantly, in Wilson construction, you do not have to feed the function with the TD(k,m), TD(k,m+1), TD(k+1,t) and TD(k,u) but for the product you have to. From what you started with in Wilson construction, I thought we would have a function `def product(k, n1, n2):`.\n\nIt might be easier to do the whole review in #15310. I propose to merge the two tickets and set this one as won't fix.",
    "created_at": "2014-05-01T11:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207418",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hi,

Once you have fix the merge with #15310, here are other problems
- the product is sometimes called the Kronecker product and it should be mentioned in the doc.
- I do not like the way it works: `wilson_construction` and `TD_product` have the same purpose, build more examples of TD. But first of all, the naming scheme are different. Why not TD_wilson_construction? More importantly, in Wilson construction, you do not have to feed the function with the TD(k,m), TD(k,m+1), TD(k+1,t) and TD(k,u) but for the product you have to. From what you started with in Wilson construction, I thought we would have a function `def product(k, n1, n2):`.

It might be easier to do the whole review in #15310. I propose to merge the two tickets and set this one as won't fix.



---

archive/issue_comments_207419.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.\n\n2) Is there any link between this product construction and the one for mols?\n\n3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.",
    "created_at": "2014-05-01T14:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207419",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.

2) Is there any link between this product construction and the one for mols?

3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.



---

archive/issue_comments_207420.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYo !\n\n> 1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.\n\nWhat is the point of having a function `TD_product` which only takes integer as input ? What can it do that `designs.transversal_design(...)` does not already do ?\n\nWhat we could do is implement a second function TD_product_from_parameters which calls the other ?\n\n> 3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.\n\nWhyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy ?\n\nRight now I am building all the constructions of OA in such a way that they all take the same parameters :\n\n`function_that_builds_OA(k,n,availability)`\n\nand it does what you expect, i.e. try if it is able to build this OA and answers accordingly. If we can make all functions that return OA behave this way, and the constructor can look like this :\n\n```\nfor f in [f1,f2,f3,f4,....]:\n   # try if f can be the OA we want, otherwise try the next.\n```\n\nSo if we have recursive functions behaving this way, we can just add them to the list !\n\nNathann",
    "created_at": "2014-05-01T14:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207420",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Yo !

> 1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.

What is the point of having a function `TD_product` which only takes integer as input ? What can it do that `designs.transversal_design(...)` does not already do ?

What we could do is implement a second function TD_product_from_parameters which calls the other ?

> 3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.

Whyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy ?

Right now I am building all the constructions of OA in such a way that they all take the same parameters :

`function_that_builds_OA(k,n,availability)`

and it does what you expect, i.e. try if it is able to build this OA and answers accordingly. If we can make all functions that return OA behave this way, and the constructor can look like this :

```
for f in [f1,f2,f3,f4,....]:
   # try if f can be the OA we want, otherwise try the next.
```

So if we have recursive functions behaving this way, we can just add them to the list !

Nathann



---

archive/issue_comments_207421.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n(scuse me, replace \"availability\" with \"existence\")",
    "created_at": "2014-05-01T14:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207421",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

(scuse me, replace "availability" with "existence")



---

archive/issue_comments_207422.json:
```json
{
    "body": "Changed commit from **[`054d2a2`](https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c)** to **[`a512ab1`](https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9)**",
    "created_at": "2014-05-01T19:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207422",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`054d2a2`](https://github.com/sagemath/sagetrac-mirror/commit/054d2a2ffa441f675594a09b95cf943f41121b4c)** to **[`a512ab1`](https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9)**



---

archive/issue_comments_207423.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f23fa885ee5a080f2a8051f23f7fc9f130541849\"><code>f23fa88</code></a></td><td><code>trac #15310: useless checks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f0158c281c55523a532d5ef21c666ba9c7dc3d\"><code>62f0158</code></a></td><td><code>trac #15310: cutting some branches of the exploration</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d74341411288315f13da3d4383e515b884ba7440\"><code>d743414</code></a></td><td><code>trac #15310: reviewer's remarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fc79ba5be0b99e99593ff54bfa075a52cc5937c\"><code>3fc79ba</code></a></td><td><code>trac #15310: Merged into 6.2.rc1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9\"><code>a512ab1</code></a></td><td><code>trac #16227: Merged with updated #15310</code></td></tr></table>\n",
    "created_at": "2014-05-01T19:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207423",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f23fa885ee5a080f2a8051f23f7fc9f130541849"><code>f23fa88</code></a></td><td><code>trac #15310: useless checks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f0158c281c55523a532d5ef21c666ba9c7dc3d"><code>62f0158</code></a></td><td><code>trac #15310: cutting some branches of the exploration</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d74341411288315f13da3d4383e515b884ba7440"><code>d743414</code></a></td><td><code>trac #15310: reviewer's remarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fc79ba5be0b99e99593ff54bfa075a52cc5937c"><code>3fc79ba</code></a></td><td><code>trac #15310: Merged into 6.2.rc1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9"><code>a512ab1</code></a></td><td><code>trac #16227: Merged with updated #15310</code></td></tr></table>




---

archive/issue_comments_207424.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nathanncohen](#comment:5):\n> Yo !\n> \n> > 1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.\n\n> \n> What is the point of having a function `TD_product` which only takes integer as input ? What can it do that `designs.transversal_design(...)` does not already do ?\n> \n> What we could do is implement a second function TD_product_from_parameters which calls the other ?\n\nSometimes you want only functions with the same prototype and sometimes you claim it is better otherwise...\n\n> > 3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.\n\n> \n> Whyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy ?\n> \n> Right now I am building all the constructions of OA in such a way that they all take the same parameters :\n> \n> `function_that_builds_OA(k,n,availability)`\n\n>\n> and it does what you expect, i.e. try if it is able to build this OA and answers accordingly. If we can make all functions that return OA behave this way, and the constructor can look like this :\n\nAll right. What I meant is that it makes sense to try Wilson and product in the same function that builds OA. But on the other hands, calling divisors is relatively cheap on the kind of entries you will have. In a near future (and according to the TODO) the Wilson construction might be much more involved... will see.\n\nThere was doctest error that I solved on u/vdelecroix/16227. I also added curiosity doctests (the current maximum k that Sage knows from n between 10 and 20).\n\nSee the changes in u/vdelecroix/16227, if you are happy with them this is good to go.",
    "created_at": "2014-05-01T21:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207424",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nathanncohen](#comment:5):
> Yo !
> 
> > 1) As I mentioned in #15310, I would prefer to have `TD_product` to be something called with arguments `k,n1,n2` as it is for Wilson construction. Specifications `def TD_product(k,n1,n2,TD1=None,TD2=None)` might be better. But then, if you provide TD1 and TD2, the arguments k,n1,n2 are redundant.

> 
> What is the point of having a function `TD_product` which only takes integer as input ? What can it do that `designs.transversal_design(...)` does not already do ?
> 
> What we could do is implement a second function TD_product_from_parameters which calls the other ?

Sometimes you want only functions with the same prototype and sometimes you claim it is better otherwise...

> > 3) As Brett mentioned in #15310, it would make sense to have a more involved `find_wilson_decomposition` which also contains product. There are tons of variants of Wilson decomposition and according to Colbourne-Dinitz this is how most of the current records are obtained. We might concentrate all the non-direct constructions into a global function `build_TD_from_smaller_ones` or `generalized_Wilson_construction`.

> 
> Whyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy ?
> 
> Right now I am building all the constructions of OA in such a way that they all take the same parameters :
> 
> `function_that_builds_OA(k,n,availability)`

>
> and it does what you expect, i.e. try if it is able to build this OA and answers accordingly. If we can make all functions that return OA behave this way, and the constructor can look like this :

All right. What I meant is that it makes sense to try Wilson and product in the same function that builds OA. But on the other hands, calling divisors is relatively cheap on the kind of entries you will have. In a near future (and according to the TODO) the Wilson construction might be much more involved... will see.

There was doctest error that I solved on u/vdelecroix/16227. I also added curiosity doctests (the current maximum k that Sage knows from n between 10 and 20).

See the changes in u/vdelecroix/16227, if you are happy with them this is good to go.



---

archive/issue_comments_207425.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Sometimes you want only functions with the same prototype and sometimes you claim it is better otherwise...\n\n1) I think that having a TD product functions that accepts TD as input and not only parameters is useful\n\n2) I think that at the moment Wilson's construction with TD as input is not really useful, as it is a complex thing and nobody knows it exists\n\n3) I think that all constructors should have the same prototype to give us a clean `orthogonal_array` function\n\n4) Thus creating a second function that calls the current TD and has the same prototype as the others makes sense to me.\n\n> All right. What I meant is that it makes sense to try Wilson and product in the same function that builds OA. But on the other hands, calling divisors is relatively cheap on the kind of entries you will have. In a near future (and according to the TODO) the Wilson construction might be much more involved... will see.\n\nCalling divisors is 100% free compared to the kind of constructions we deal with. We create fields, products, long lists, temporary matrices of thousands of entries. Calling divisors *is* free.\n\n> There was doctest error that I solved on u/vdelecroix/16227. I also added curiosity doctests (the current maximum k that Sage knows from n between 10 and 20).\n> \n> See the changes in u/vdelecroix/16227, if you are happy with them this is good to go.\n\nI will look at this immediately.\n\nNathann",
    "created_at": "2014-05-01T21:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207425",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

> Sometimes you want only functions with the same prototype and sometimes you claim it is better otherwise...

1) I think that having a TD product functions that accepts TD as input and not only parameters is useful

2) I think that at the moment Wilson's construction with TD as input is not really useful, as it is a complex thing and nobody knows it exists

3) I think that all constructors should have the same prototype to give us a clean `orthogonal_array` function

4) Thus creating a second function that calls the current TD and has the same prototype as the others makes sense to me.

> All right. What I meant is that it makes sense to try Wilson and product in the same function that builds OA. But on the other hands, calling divisors is relatively cheap on the kind of entries you will have. In a near future (and according to the TODO) the Wilson construction might be much more involved... will see.

Calling divisors is 100% free compared to the kind of constructions we deal with. We create fields, products, long lists, temporary matrices of thousands of entries. Calling divisors *is* free.

> There was doctest error that I solved on u/vdelecroix/16227. I also added curiosity doctests (the current maximum k that Sage knows from n between 10 and 20).
> 
> See the changes in u/vdelecroix/16227, if you are happy with them this is good to go.

I will look at this immediately.

Nathann



---

archive/issue_comments_207426.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLooks cool. Do you mind if I change your \"curiosity tests\" by using `availability=True`, so that we have boolean answers instead of exceptions ? And this will become \"Unknown\" return values in a later patch.\n\nNathann",
    "created_at": "2014-05-01T21:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207426",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Looks cool. Do you mind if I change your "curiosity tests" by using `availability=True`, so that we have boolean answers instead of exceptions ? And this will become "Unknown" return values in a later patch.

Nathann



---

archive/issue_comments_207427.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e62fae83fadf558f57548c6034e7ef8c48397c0a\"><code>e62fae8</code></a></td><td><code>corrected doctests + new doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696\"><code>4d6e964</code></a></td><td><code>trac #16227: Replace exception with booleans in the doctests</code></td></tr></table>\n",
    "created_at": "2014-05-01T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207427",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e62fae83fadf558f57548c6034e7ef8c48397c0a"><code>e62fae8</code></a></td><td><code>corrected doctests + new doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696"><code>4d6e964</code></a></td><td><code>trac #16227: Replace exception with booleans in the doctests</code></td></tr></table>




---

archive/issue_comments_207428.json:
```json
{
    "body": "Changed commit from **[`a512ab1`](https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9)** to **[`4d6e964`](https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696)**",
    "created_at": "2014-05-01T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207428",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a512ab1`](https://github.com/sagemath/sagetrac-mirror/commit/a512ab154b21caaf74d6ccef2cf32bf67179eee9)** to **[`4d6e964`](https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696)**



---

archive/issue_comments_207429.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWell... Actually they were \"Unknown\" answers already.. So if you don't mind here is the branch, otherwise we can go back to your latest commit, it is not very important. Just easier to read (for me), and it advertises the \"Unknown\" truth values for those who haven't met them.\n\nNathann",
    "created_at": "2014-05-01T21:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207429",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Well... Actually they were "Unknown" answers already.. So if you don't mind here is the branch, otherwise we can go back to your latest commit, it is not very important. Just easier to read (for me), and it advertises the "Unknown" truth values for those who haven't met them.

Nathann



---

archive/issue_comments_207430.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOk. Then it is good for me.\n\nVincent",
    "created_at": "2014-05-02T08:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207430",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Ok. Then it is good for me.

Vincent



---

archive/issue_events_229559.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-05-02T08:48:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229559"
}
```



---

archive/issue_events_229560.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-05-02T08:48:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229560"
}
```



---

archive/issue_comments_207431.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e86d26cb8126f3e557cc6a27b1727e2055f67321\"><code>e86d26c</code></a></td><td><code>trac #15310: Merged with 6.2.rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f\"><code>5cfee91</code></a></td><td><code>trac #16227: Merged with updated #15310</code></td></tr></table>\n",
    "created_at": "2014-05-04T16:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207431",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e86d26cb8126f3e557cc6a27b1727e2055f67321"><code>e86d26c</code></a></td><td><code>trac #15310: Merged with 6.2.rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f"><code>5cfee91</code></a></td><td><code>trac #16227: Merged with updated #15310</code></td></tr></table>




---

archive/issue_comments_207432.json:
```json
{
    "body": "Changed commit from **[`4d6e964`](https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696)** to **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**",
    "created_at": "2014-05-04T16:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207432",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d6e964`](https://github.com/sagemath/sagetrac-mirror/commit/4d6e964775e4d6734e677a9f281f56aee11bb696)** to **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**



---

archive/issue_events_229561.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-05-04T16:08:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229561"
}
```



---

archive/issue_events_229562.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-05-04T16:08:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229562"
}
```



---

archive/issue_comments_207433.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2014-05-04T16:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207433",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_229563.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-04T16:10:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229563"
}
```



---

archive/issue_events_229564.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-04T16:10:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229564"
}
```



---

archive/issue_comments_207434.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n(same trivial conflict with the new release)",
    "created_at": "2014-05-04T16:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207434",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

(same trivial conflict with the new release)



---

archive/issue_events_229565.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229565"
}
```



---

archive/issue_events_229566.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229566"
}
```



---

archive/issue_comments_207435.json:
```json
{
    "body": "Changed branch from **[u/ncohen/16227](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16227)** to **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**",
    "created_at": "2014-05-07T08:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16227#issuecomment-207435",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/ncohen/16227](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16227)** to **[`5cfee91`](https://github.com/sagemath/sagetrac-mirror/commit/5cfee91760bd3b73d19ebc1318a94861d62b226f)**



---

archive/issue_events_229567.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-07T08:31:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229567"
}
```



---

archive/issue_events_229568.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a3021fbb4d8bcd7af3058743cc1cd2e3d069d848",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-05-07T08:31:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16227",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16227#event-229568"
}
```
