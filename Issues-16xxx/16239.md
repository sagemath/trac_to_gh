# Issue 16239: ZZ in the wrong category

archive/issues_016002.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "\n```\nsage: ZZ.categories()\n[Category of euclidean domains,\n Category of principal ideal domains,\n Category of unique factorization domains,\n Category of gcd domains,\n Category of integral domains,\n Category of domains,\n Category of commutative rings,\n Category of rings,\n Category of rngs,\n Category of semirings,\n Category of monoids,\n Category of semigroups,\n Category of magmas,\n Category of commutative additive groups,\n Category of commutative additive monoids,\n Category of commutative additive semigroups,\n Category of additive magmas,\n Category of sets,\n Category of sets with partial maps,\n Category of objects]\n```\nNotice that it is not an infinite enumerated set.\n\nCC:  @sagetrac-sage-combinat @nthiery\n\nKeywords: **integer ring, category**\n\nBranch/Commit: **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**\n\nReviewer: **Nicolas M. Thi\u00e9ry**\n\nAuthor: **Travis Scrimshaw**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16239_\n\n",
    "closed_at": "2014-08-16T09:32:25Z",
    "created_at": "2014-04-26T04:58:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "ZZ in the wrong category",
    "type": "issue",
    "updated_at": "2014-08-16T09:32:25Z",
    "url": "https://github.com/sagemath/sage/issues/16239",
    "user": "https://github.com/tscrim"
}
```

```
sage: ZZ.categories()
[Category of euclidean domains,
 Category of principal ideal domains,
 Category of unique factorization domains,
 Category of gcd domains,
 Category of integral domains,
 Category of domains,
 Category of commutative rings,
 Category of rings,
 Category of rngs,
 Category of semirings,
 Category of monoids,
 Category of semigroups,
 Category of magmas,
 Category of commutative additive groups,
 Category of commutative additive monoids,
 Category of commutative additive semigroups,
 Category of additive magmas,
 Category of sets,
 Category of sets with partial maps,
 Category of objects]
```
Notice that it is not an infinite enumerated set.

CC:  @sagetrac-sage-combinat @nthiery

Keywords: **integer ring, category**

Branch/Commit: **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**

Reviewer: **Nicolas M. Thi√©ry**

Author: **Travis Scrimshaw**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/16239_





---

archive/issue_events_231882.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-04-26T04:58:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231882"
}
```



---

archive/issue_events_231883.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-04-26T04:58:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231883"
}
```



---

archive/issue_events_231884.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-04-26T04:58:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231884"
}
```



---

archive/issue_events_231885.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-04-26T04:58:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231885"
}
```



---

archive/issue_events_231886.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2014-04-26T04:58:25Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231886"
}
```



---

archive/issue_events_231887.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231887"
}
```



---

archive/issue_events_231888.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231888"
}
```



---

archive/issue_comments_207723.json:
```json
{
    "body": "Branch: **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)**",
    "created_at": "2014-05-26T02:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207723",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)**



---

archive/issue_events_231889.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-26T02:01:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231889"
}
```



---

archive/issue_comments_207724.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2014-05-26T02:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207724",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_comments_207725.json:
```json
{
    "body": "Commit: **[`5acdf87`](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)**",
    "created_at": "2014-05-26T02:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207725",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`5acdf87`](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)**



---

archive/issue_comments_207726.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSurprisingly simple fix since `ZZ` is an old parent.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517\">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr></table>\n",
    "created_at": "2014-05-26T02:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207726",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

Surprisingly simple fix since `ZZ` is an old parent.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr></table>




---

archive/issue_comments_207727.json:
```json
{
    "body": "Changed commit from **[`5acdf87`](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)** to **[`7dff726`](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)**",
    "created_at": "2014-05-26T21:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5acdf87`](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)** to **[`7dff726`](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)**



---

archive/issue_comments_207728.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f\">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd\">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr></table>\n",
    "created_at": "2014-05-26T21:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207728",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr></table>




---

archive/issue_comments_207729.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI am running all tests now. If they pass, and you agree with my changes, it's good to go!",
    "created_at": "2014-05-26T21:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207729",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:4" align="right">comment:4</div>

I am running all tests now. If they pass, and you agree with my changes, it's good to go!



---

archive/issue_comments_207730.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'm good with your changes. Go ahead and set to positive review once all tests pass.",
    "created_at": "2014-05-26T21:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207730",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

I'm good with your changes. Go ahead and set to positive review once all tests pass.



---

archive/issue_comments_207731.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI get a bunch of failing tests; most seem trivial, but I did not have time to check in detail:\n\n```\nsage -t --long src/sage/structure/parent.pyx  # Killed due to kill signal\nsage -t --long src/sage/structure/element.pyx  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/root_space.py  # Bad exit: 1\nsage -t --long src/sage/matrix/matrix_space.py  # Killed due to kill signal\nsage -t --long src/sage/categories/primer.py  # 2 doctests failed\nsage -t --long src/sage/dev/git_interface.py  # 22 doctests failed\nsage -t --long src/sage/categories/category.py  # 3 doctests failed\nsage -t --long src/sage/categories/map.pyx  # 1 doctest failed\nsage -t --long src/sage/sets/set_from_iterator.py  # 1 doctest failed\nsage -t --long src/sage/categories/homset.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/polynomial_ring.py  # 1 doctest failed\nsage -t --long src/sage/misc/dev_tools.py  # 1 doctest failed\nsage -t --long src/doc/en/tutorial/tour_coercion.rst  # 1 doctest failed\nsage -t --long src/sage/structure/category_object.pyx  # 1 doctest failed\nsage -t --long src/doc/fr/tutorial/tour_coercion.rst  # 1 doctest failed\nsage -t --long src/sage/categories/category_types.py  # 2 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 2 doctests failed\nsage -t --long src/sage/misc/sage_unittest.py  # 2 doctests failed\nsage -t --long src/sage/categories/bimodules.py  # 2 doctests failed\n```",
    "created_at": "2014-05-26T22:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207731",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:6" align="right">comment:6</div>

I get a bunch of failing tests; most seem trivial, but I did not have time to check in detail:

```
sage -t --long src/sage/structure/parent.pyx  # Killed due to kill signal
sage -t --long src/sage/structure/element.pyx  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/root_space.py  # Bad exit: 1
sage -t --long src/sage/matrix/matrix_space.py  # Killed due to kill signal
sage -t --long src/sage/categories/primer.py  # 2 doctests failed
sage -t --long src/sage/dev/git_interface.py  # 22 doctests failed
sage -t --long src/sage/categories/category.py  # 3 doctests failed
sage -t --long src/sage/categories/map.pyx  # 1 doctest failed
sage -t --long src/sage/sets/set_from_iterator.py  # 1 doctest failed
sage -t --long src/sage/categories/homset.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/polynomial_ring.py  # 1 doctest failed
sage -t --long src/sage/misc/dev_tools.py  # 1 doctest failed
sage -t --long src/doc/en/tutorial/tour_coercion.rst  # 1 doctest failed
sage -t --long src/sage/structure/category_object.pyx  # 1 doctest failed
sage -t --long src/doc/fr/tutorial/tour_coercion.rst  # 1 doctest failed
sage -t --long src/sage/categories/category_types.py  # 2 doctests failed
sage -t --long src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 2 doctests failed
sage -t --long src/sage/misc/sage_unittest.py  # 2 doctests failed
sage -t --long src/sage/categories/bimodules.py  # 2 doctests failed
```



---

archive/issue_comments_207732.json:
```json
{
    "body": "Changed commit from **[`7dff726`](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)** to **[`1b4b7c6`](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)**",
    "created_at": "2014-05-27T17:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7dff726`](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)** to **[`1b4b7c6`](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)**



---

archive/issue_comments_207733.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28\">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr></table>\n",
    "created_at": "2014-05-27T17:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207733",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr></table>




---

archive/issue_comments_207734.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI had to partially revert your change in order to get `(QQ^2).list()` (or any other infinite [enumerated] set that's not in the category) to raise an error. I'm not quite sure what happened with the doctest in `misc/dev_tools.py`, nor am I completely confident in the `tutorial-objects-and-classes.rst` doctest fixes (please double check those). I couldn't get anything to break in the `dev/git_interface.py`.\n\nedit - removed a stupid idea due to the overwhelming changes it would entail.",
    "created_at": "2014-05-27T17:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207734",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

I had to partially revert your change in order to get `(QQ^2).list()` (or any other infinite [enumerated] set that's not in the category) to raise an error. I'm not quite sure what happened with the doctest in `misc/dev_tools.py`, nor am I completely confident in the `tutorial-objects-and-classes.rst` doctest fixes (please double check those). I couldn't get anything to break in the `dev/git_interface.py`.

edit - removed a stupid idea due to the overwhelming changes it would entail.



---

archive/issue_comments_207735.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlso I should make it clear, the error came from `QQ` not being in the correct category. So should we also change that here while we're at it?",
    "created_at": "2014-06-11T04:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207735",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Also I should make it clear, the error came from `QQ` not being in the correct category. So should we also change that here while we're at it?



---

archive/issue_comments_207736.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello,\n\nWhile we are at it, this is not an isolated case...\n\n```\nsage: std_sets = [ZZ, QQ, RDF, CDF, AA, QQbar, RR, CC]\nsage: any(x in Sets().Infinite() for x in std_sets)\nFalse\n```\nWe can open another ticket for the remaining ones.\n\nVincent",
    "created_at": "2014-06-15T16:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207736",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello,

While we are at it, this is not an isolated case...

```
sage: std_sets = [ZZ, QQ, RDF, CDF, AA, QQbar, RR, CC]
sage: any(x in Sets().Infinite() for x in std_sets)
False
```
We can open another ticket for the remaining ones.

Vincent



---

archive/issue_comments_207737.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these \"fields\" already have worse abuses). But definitely another ticket.",
    "created_at": "2014-06-15T16:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207737",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these "fields" already have worse abuses). But definitely another ticket.



---

archive/issue_comments_207738.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@tscrim](#comment:11):\n> I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these \"fields\" already have worse abuses). But definitely another ticket.\n\nYou are right for `RDF` and `CDF` but for `RR` and `CC`, technically, these are infinite: the mantisse is finite but the exponent is arbitrary precision (because of mpfr). And again, technically speaking these are not fields ;-)",
    "created_at": "2014-06-15T17:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207738",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@tscrim](#comment:11):
> I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these "fields" already have worse abuses). But definitely another ticket.

You are right for `RDF` and `CDF` but for `RR` and `CC`, technically, these are infinite: the mantisse is finite but the exponent is arbitrary precision (because of mpfr). And again, technically speaking these are not fields ;-)



---

archive/issue_comments_207739.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment:11):\n> Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`\n\n??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.\n\nIt could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)",
    "created_at": "2014-06-15T17:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207739",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment:11):
> Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`

??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.

It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)



---

archive/issue_comments_207740.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nbruin](#comment:13):\n> Replying to [@tscrim](#comment:11):\n> > Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`\n\n> ??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.\n\nHowever what I said is all fields of characteristic 0 are fields and infinite sets (as we can always add 1 more).\n\n> It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)\n\nHmmm...that's an interesting idea. Nicolas, how feasible would that be?",
    "created_at": "2014-06-16T05:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207740",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nbruin](#comment:13):
> Replying to [@tscrim](#comment:11):
> > Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`

> ??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.

However what I said is all fields of characteristic 0 are fields and infinite sets (as we can always add 1 more).

> It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)

Hmmm...that's an interesting idea. Nicolas, how feasible would that be?



---

archive/issue_comments_207741.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245\">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr></table>\n",
    "created_at": "2014-07-01T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207741",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr></table>




---

archive/issue_comments_207742.json:
```json
{
    "body": "Changed commit from **[`1b4b7c6`](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)** to **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)**",
    "created_at": "2014-07-01T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207742",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1b4b7c6`](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)** to **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)**



---

archive/issue_events_231890.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:50:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231890"
}
```



---

archive/issue_events_231891.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231891"
}
```



---

archive/issue_comments_207743.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nBack to the ticket at hand: I am happy with Travis changes and he looked over my final tweaks. Good to go!",
    "created_at": "2014-07-01T17:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207743",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:16" align="right">comment:16</div>

Back to the ticket at hand: I am happy with Travis changes and he looked over my final tweaks. Good to go!



---

archive/issue_comments_207744.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry**",
    "created_at": "2014-07-01T17:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207744",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Nicolas M. Thi√©ry**



---

archive/issue_events_231892.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-03T02:03:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231892"
}
```



---

archive/issue_events_231893.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-03T02:03:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231893"
}
```



---

archive/issue_comments_207745.json:
```json
{
    "body": "Changed branch from **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)** to **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)**",
    "created_at": "2014-07-03T02:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207745",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)** to **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)**



---

archive/issue_comments_207746.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nLong doctests eat all my memory in `sage.matrix.matrix_space`. Looks like matrix space `MatrixSpace(QQ, 7)` trying to figure out whether it is finite or not.",
    "created_at": "2014-07-03T04:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207746",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

Long doctests eat all my memory in `sage.matrix.matrix_space`. Looks like matrix space `MatrixSpace(QQ, 7)` trying to figure out whether it is finite or not.



---

archive/issue_comments_207747.json:
```json
{
    "body": "Changed commit from **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)** to none",
    "created_at": "2014-07-03T04:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207747",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)** to none



---

archive/issue_comments_207748.json:
```json
{
    "body": "Changed branch from **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)** to **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)**",
    "created_at": "2014-07-06T01:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207748",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[`8c49b54`](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)** to **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)**



---

archive/issue_events_231894.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-06T01:48:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231894"
}
```



---

archive/issue_comments_207749.json:
```json
{
    "body": "Commit: **[`d9dc105`](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)**",
    "created_at": "2014-07-06T01:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207749",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`d9dc105`](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)**



---

archive/issue_comments_207750.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHey Nicolas,\n\nI remember why I had things that way:\n\n```\nsage: QQ in Sets().Infinite()\nFalse\nsage: MS = MatrixSpace(ZZ, 7)\nsage: MS in Sets().Infinite()\nFalse\n```\nThere will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`). For now, I just reverted the change and added a comment. If that's okay for now, then can you set this back to positive review? Thanks.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517\">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f\">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd\">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28\">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245\">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6d55364440169f2329f4c4efe6aec4214291cf9\">a6d5536</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1\">d9dc105</a></td><td><code>Reverted change for check for infinite enumerated sets.</code></td></tr></table>\n",
    "created_at": "2014-07-06T01:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207750",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Hey Nicolas,

I remember why I had things that way:

```
sage: QQ in Sets().Infinite()
False
sage: MS = MatrixSpace(ZZ, 7)
sage: MS in Sets().Infinite()
False
```
There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`). For now, I just reverted the change and added a comment. If that's okay for now, then can you set this back to positive review? Thanks.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6d55364440169f2329f4c4efe6aec4214291cf9">a6d5536</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1">d9dc105</a></td><td><code>Reverted change for check for infinite enumerated sets.</code></td></tr></table>




---

archive/issue_comments_207751.json:
```json
{
    "body": "Changed commit from **[`d9dc105`](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)** to **[`8f67fb5`](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)**",
    "created_at": "2014-07-11T11:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207751",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d9dc105`](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)** to **[`8f67fb5`](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)**



---

archive/issue_comments_207752.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872\">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>\n",
    "created_at": "2014-07-11T11:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207752",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>




---

archive/issue_comments_207753.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@tscrim](#comment:19):\n> I remember why I had things that way:\n> \n> ```\n> sage: QQ in Sets().Infinite()\n> False\n> sage: MS = MatrixSpace(ZZ, 7)\n> sage: MS in Sets().Infinite()\n> False\n> ```\n> There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`\n\nGosh, that's ugly. Oh well, we will have to do with it I guess. Thanks! I improved a bit the wording, and now back to positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872\">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>\n",
    "created_at": "2014-07-11T11:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207753",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@tscrim](#comment:19):
> I remember why I had things that way:
> 
> ```
> sage: QQ in Sets().Infinite()
> False
> sage: MS = MatrixSpace(ZZ, 7)
> sage: MS in Sets().Infinite()
> False
> ```
> There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`

Gosh, that's ugly. Oh well, we will have to do with it I guess. Thanks! I improved a bit the wording, and now back to positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>




---

archive/issue_events_231895.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-11T11:57:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231895"
}
```



---

archive/issue_events_231896.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-11T11:57:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231896"
}
```



---

archive/issue_events_231897.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-12T00:37:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231897"
}
```



---

archive/issue_events_231898.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-12T00:37:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231898"
}
```



---

archive/issue_comments_207754.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n\n```\nsage -t --long src/sage/sets/set_from_iterator.py\n**********************************************************************\nFile \"src/sage/sets/set_from_iterator.py\", line 139, in sage.sets.set_from_iterator.EnumeratedSetFromIterator\nFailed example:\n    TestSuite(E).run()\nExpected nothing\nGot:\n    doctest:291: UserWarning: Testing equality of infinite sets which will not end in case of equality\n```",
    "created_at": "2014-07-12T00:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207754",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>


```
sage -t --long src/sage/sets/set_from_iterator.py
**********************************************************************
File "src/sage/sets/set_from_iterator.py", line 139, in sage.sets.set_from_iterator.EnumeratedSetFromIterator
Failed example:
    TestSuite(E).run()
Expected nothing
Got:
    doctest:291: UserWarning: Testing equality of infinite sets which will not end in case of equality
```



---

archive/issue_comments_207755.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe warning is issued by `EnumeratedSetFromIterator` when `_test_an_element` calls `self(an_element)` where `self` is `E`. From there, the parent of `an_element` is `ZZ`, which the parent's default `__call__` tries to see if the parent is `self` by equality, leading to the `__eq__` call with `ZZ` being a different enumerated set.\n\nSo how do we fix this? I'm not quite sure what the best way to proceed is, put the warning in the test, remove the warning, rework `_test_an_element` to better support facade parents, ...?",
    "created_at": "2014-07-15T03:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207755",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

The warning is issued by `EnumeratedSetFromIterator` when `_test_an_element` calls `self(an_element)` where `self` is `E`. From there, the parent of `an_element` is `ZZ`, which the parent's default `__call__` tries to see if the parent is `self` by equality, leading to the `__eq__` call with `ZZ` being a different enumerated set.

So how do we fix this? I'm not quite sure what the best way to proceed is, put the warning in the test, remove the warning, rework `_test_an_element` to better support facade parents, ...?



---

archive/issue_comments_207756.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHey,\n\nFunny that this has been catch in `set_from_iterator`. The warning is useful, so please, keep it.\n\nIt looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\nVincent",
    "created_at": "2014-07-15T07:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207756",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Hey,

Funny that this has been catch in `set_from_iterator`. The warning is useful, so please, keep it.

It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

Vincent



---

archive/issue_comments_207757.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@videlec](#comment:24):\n> It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\nIt's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...\n\nWell, for now I will just add the warning to the doctest unless anyone objects.",
    "created_at": "2014-07-15T17:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207757",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@videlec](#comment:24):
> It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...

Well, for now I will just add the warning to the doctest unless anyone objects.



---

archive/issue_comments_207758.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189\">8120782</a></td><td><code>Fixed doctest in set_from_iterator.py due to facade parent.</code></td></tr></table>\n",
    "created_at": "2014-07-15T17:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207758",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189">8120782</a></td><td><code>Fixed doctest in set_from_iterator.py due to facade parent.</code></td></tr></table>




---

archive/issue_comments_207759.json:
```json
{
    "body": "Changed commit from **[`8f67fb5`](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)** to **[`8120782`](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)**",
    "created_at": "2014-07-15T17:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207759",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f67fb5`](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)** to **[`8120782`](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)**



---

archive/issue_events_231899.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-15T17:59:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231899"
}
```



---

archive/issue_events_231900.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-15T17:59:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231900"
}
```



---

archive/issue_comments_207760.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am on vacations for the next couple weeks. So please someone take over the last bit of review!\n\nCheers,\n                               Nicolas",
    "created_at": "2014-07-16T21:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207760",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

I am on vacations for the next couple weeks. So please someone take over the last bit of review!

Cheers,
                               Nicolas



---

archive/issue_events_231901.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231901"
}
```



---

archive/issue_events_231902.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231902"
}
```



---

archive/issue_comments_207761.json:
```json
{
    "body": "Changed commit from **[`8120782`](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)** to **[`644743d`](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)**",
    "created_at": "2014-08-14T10:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207761",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8120782`](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)** to **[`644743d`](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)**



---

archive/issue_comments_207762.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e\">644743d</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr></table>\n",
    "created_at": "2014-08-14T10:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207762",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e">644743d</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr></table>




---

archive/issue_comments_207763.json:
```json
{
    "body": "Changed commit from **[`644743d`](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)** to **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**",
    "created_at": "2014-08-16T04:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207763",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`644743d`](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)** to **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**



---

archive/issue_comments_207764.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d\">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>\n",
    "created_at": "2014-08-16T04:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207764",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>




---

archive/issue_comments_207765.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@tscrim](#comment:25):\n> Replying to [@videlec](#comment:24):\n> > It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\n> \n> It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...\n\nWhenever possible, facade parents should indeed make sure that\nF(F.an_element()) == F.an_element(), and bark on\nF(something_outside). Now there are many occasions, like here\nprobably, where it might be hard, or costly, or just impossible to\nachieve.\n\n> Well, for now I will just add the warning to the doctest unless anyone objects.\n\nYeah, that's life. I am ok with the change.\n\nI ran all long tests, and with the little new commit, all tests pass. Back to positive review!\n\nThanks!\n                                                 Nicolas\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d\">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>\n",
    "created_at": "2014-08-16T04:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207765",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@tscrim](#comment:25):
> Replying to [@videlec](#comment:24):
> > It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

> 
> It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...

Whenever possible, facade parents should indeed make sure that
F(F.an_element()) == F.an_element(), and bark on
F(something_outside). Now there are many occasions, like here
probably, where it might be hard, or costly, or just impossible to
achieve.

> Well, for now I will just add the warning to the doctest unless anyone objects.

Yeah, that's life. I am ok with the change.

I ran all long tests, and with the little new commit, all tests pass. Back to positive review!

Thanks!
                                                 Nicolas

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>




---

archive/issue_events_231903.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-08-16T04:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231903"
}
```



---

archive/issue_events_231904.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-08-16T04:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231904"
}
```



---

archive/issue_comments_207766.json:
```json
{
    "body": "Changed branch from **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)** to **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**",
    "created_at": "2014-08-16T09:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-207766",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)** to **[`2897dfe`](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)**



---

archive/issue_events_231905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-16T09:32:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231905"
}
```



---

archive/issue_events_231906.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "36c9d62867a03f9f63bc2450ef957170bd5fff2b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-16T09:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-231906"
}
```
