# Issue 16239: ZZ in the wrong category

archive/issues_016002.json:
```json
{
    "body": "\n```\nsage: ZZ.categories()\n[Category of euclidean domains,\n Category of principal ideal domains,\n Category of unique factorization domains,\n Category of gcd domains,\n Category of integral domains,\n Category of domains,\n Category of commutative rings,\n Category of rings,\n Category of rngs,\n Category of semirings,\n Category of monoids,\n Category of semigroups,\n Category of magmas,\n Category of commutative additive groups,\n Category of commutative additive monoids,\n Category of commutative additive semigroups,\n Category of additive magmas,\n Category of sets,\n Category of sets with partial maps,\n Category of objects]\n```\nNotice that it is not an infinite enumerated set.\n\n**Assignee:** sage-combinat\n\n**CC:**  sage-combinat @nthiery\n\n**Keywords:** integer ring, category\n\n**Branch/Commit:** [2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)\n\n**Reviewer:** Nicolas M. Thi\u00e9ry\n\n**Author:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/16239\n\n",
    "closed_at": "2014-08-16T09:32:25Z",
    "created_at": "2014-04-26T04:58:25Z",
    "labels": [
        "component: categories",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "ZZ in the wrong category",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16239",
    "user": "https://github.com/tscrim"
}
```

```
sage: ZZ.categories()
[Category of euclidean domains,
 Category of principal ideal domains,
 Category of unique factorization domains,
 Category of gcd domains,
 Category of integral domains,
 Category of domains,
 Category of commutative rings,
 Category of rings,
 Category of rngs,
 Category of semirings,
 Category of monoids,
 Category of semigroups,
 Category of magmas,
 Category of commutative additive groups,
 Category of commutative additive monoids,
 Category of commutative additive semigroups,
 Category of additive magmas,
 Category of sets,
 Category of sets with partial maps,
 Category of objects]
```
Notice that it is not an infinite enumerated set.

**Assignee:** sage-combinat

**CC:**  sage-combinat @nthiery

**Keywords:** integer ring, category

**Branch/Commit:** [2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)

**Reviewer:** Nicolas M. Thiéry

**Author:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/16239





---

archive/issue_events_144797.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144797"
}
```



---

archive/issue_events_144798.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144798"
}
```



---

archive/issue_comments_210139.json:
```json
{
    "body": "**Branch:** [public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)",
    "created_at": "2014-05-26T02:01:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210139",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)



---

archive/issue_events_144799.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-05-26T02:01:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144799"
}
```



---

archive/issue_comments_210140.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2014-05-26T02:01:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210140",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_comments_210141.json:
```json
{
    "body": "**Commit:** [5acdf87dd226359489572e1ef64d9a020901e517](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)",
    "created_at": "2014-05-26T02:01:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210141",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [5acdf87dd226359489572e1ef64d9a020901e517](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)



---

archive/issue_comments_210142.json:
```json
{
    "body": "<a id='comment:2'></a>\nSurprisingly simple fix since `ZZ` is an old parent.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517\">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr></table>\n",
    "created_at": "2014-05-26T02:01:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210142",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Surprisingly simple fix since `ZZ` is an old parent.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr></table>




---

archive/issue_comments_210143.json:
```json
{
    "body": "**Changing commit** from \"[5acdf87dd226359489572e1ef64d9a020901e517](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)\" to \"[7dff726a81ff95fdc5f51b0f931dda66e12a0ddd](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)\".",
    "created_at": "2014-05-26T21:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5acdf87dd226359489572e1ef64d9a020901e517](https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517)" to "[7dff726a81ff95fdc5f51b0f931dda66e12a0ddd](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)".



---

archive/issue_comments_210144.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f\">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd\">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr></table>\n",
    "created_at": "2014-05-26T21:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210144",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr></table>




---

archive/issue_comments_210145.json:
```json
{
    "body": "<a id='comment:4'></a>\nI am running all tests now. If they pass, and you agree with my changes, it's good to go!",
    "created_at": "2014-05-26T21:27:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210145",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'></a>
I am running all tests now. If they pass, and you agree with my changes, it's good to go!



---

archive/issue_comments_210146.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm good with your changes. Go ahead and set to positive review once all tests pass.",
    "created_at": "2014-05-26T21:40:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210146",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I'm good with your changes. Go ahead and set to positive review once all tests pass.



---

archive/issue_comments_210147.json:
```json
{
    "body": "<a id='comment:6'></a>\nI get a bunch of failing tests; most seem trivial, but I did not have time to check in detail:\n\n```\nsage -t --long src/sage/structure/parent.pyx  # Killed due to kill signal\nsage -t --long src/sage/structure/element.pyx  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/root_space.py  # Bad exit: 1\nsage -t --long src/sage/matrix/matrix_space.py  # Killed due to kill signal\nsage -t --long src/sage/categories/primer.py  # 2 doctests failed\nsage -t --long src/sage/dev/git_interface.py  # 22 doctests failed\nsage -t --long src/sage/categories/category.py  # 3 doctests failed\nsage -t --long src/sage/categories/map.pyx  # 1 doctest failed\nsage -t --long src/sage/sets/set_from_iterator.py  # 1 doctest failed\nsage -t --long src/sage/categories/homset.py  # 1 doctest failed\nsage -t --long src/sage/rings/polynomial/polynomial_ring.py  # 1 doctest failed\nsage -t --long src/sage/misc/dev_tools.py  # 1 doctest failed\nsage -t --long src/doc/en/tutorial/tour_coercion.rst  # 1 doctest failed\nsage -t --long src/sage/structure/category_object.pyx  # 1 doctest failed\nsage -t --long src/doc/fr/tutorial/tour_coercion.rst  # 1 doctest failed\nsage -t --long src/sage/categories/category_types.py  # 2 doctests failed\nsage -t --long src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 2 doctests failed\nsage -t --long src/sage/misc/sage_unittest.py  # 2 doctests failed\nsage -t --long src/sage/categories/bimodules.py  # 2 doctests failed\n```",
    "created_at": "2014-05-26T22:05:20Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210147",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
I get a bunch of failing tests; most seem trivial, but I did not have time to check in detail:

```
sage -t --long src/sage/structure/parent.pyx  # Killed due to kill signal
sage -t --long src/sage/structure/element.pyx  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/root_space.py  # Bad exit: 1
sage -t --long src/sage/matrix/matrix_space.py  # Killed due to kill signal
sage -t --long src/sage/categories/primer.py  # 2 doctests failed
sage -t --long src/sage/dev/git_interface.py  # 22 doctests failed
sage -t --long src/sage/categories/category.py  # 3 doctests failed
sage -t --long src/sage/categories/map.pyx  # 1 doctest failed
sage -t --long src/sage/sets/set_from_iterator.py  # 1 doctest failed
sage -t --long src/sage/categories/homset.py  # 1 doctest failed
sage -t --long src/sage/rings/polynomial/polynomial_ring.py  # 1 doctest failed
sage -t --long src/sage/misc/dev_tools.py  # 1 doctest failed
sage -t --long src/doc/en/tutorial/tour_coercion.rst  # 1 doctest failed
sage -t --long src/sage/structure/category_object.pyx  # 1 doctest failed
sage -t --long src/doc/fr/tutorial/tour_coercion.rst  # 1 doctest failed
sage -t --long src/sage/categories/category_types.py  # 2 doctests failed
sage -t --long src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 2 doctests failed
sage -t --long src/sage/misc/sage_unittest.py  # 2 doctests failed
sage -t --long src/sage/categories/bimodules.py  # 2 doctests failed
```



---

archive/issue_comments_210148.json:
```json
{
    "body": "**Changing commit** from \"[7dff726a81ff95fdc5f51b0f931dda66e12a0ddd](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)\" to \"[1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)\".",
    "created_at": "2014-05-27T17:03:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210148",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7dff726a81ff95fdc5f51b0f931dda66e12a0ddd](https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd)" to "[1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)".



---

archive/issue_comments_210149.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28\">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr></table>\n",
    "created_at": "2014-05-27T17:03:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210149",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr></table>




---

archive/issue_comments_210150.json:
```json
{
    "body": "<a id='comment:8'></a>\nI had to partially revert your change in order to get `(QQ^2).list()` (or any other infinite [enumerated] set that's not in the category) to raise an error. I'm not quite sure what happened with the doctest in `misc/dev_tools.py`, nor am I completely confident in the `tutorial-objects-and-classes.rst` doctest fixes (please double check those). I couldn't get anything to break in the `dev/git_interface.py`.\n\nedit - removed a stupid idea due to the overwhelming changes it would entail.",
    "created_at": "2014-05-27T17:12:59Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210150",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I had to partially revert your change in order to get `(QQ^2).list()` (or any other infinite [enumerated] set that's not in the category) to raise an error. I'm not quite sure what happened with the doctest in `misc/dev_tools.py`, nor am I completely confident in the `tutorial-objects-and-classes.rst` doctest fixes (please double check those). I couldn't get anything to break in the `dev/git_interface.py`.

edit - removed a stupid idea due to the overwhelming changes it would entail.



---

archive/issue_comments_210151.json:
```json
{
    "body": "<a id='comment:9'></a>\nAlso I should make it clear, the error came from `QQ` not being in the correct category. So should we also change that here while we're at it?",
    "created_at": "2014-06-11T04:00:57Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210151",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Also I should make it clear, the error came from `QQ` not being in the correct category. So should we also change that here while we're at it?



---

archive/issue_comments_210152.json:
```json
{
    "body": "<a id='comment:10'></a>\nHello,\n\nWhile we are at it, this is not an isolated case...\n\n```\nsage: std_sets = [ZZ, QQ, RDF, CDF, AA, QQbar, RR, CC]\nsage: any(x in Sets().Infinite() for x in std_sets)\nFalse\n```\nWe can open another ticket for the remaining ones.\n\nVincent",
    "created_at": "2014-06-15T16:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210152",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
Hello,

While we are at it, this is not an isolated case...

```
sage: std_sets = [ZZ, QQ, RDF, CDF, AA, QQbar, RR, CC]
sage: any(x in Sets().Infinite() for x in std_sets)
False
```
We can open another ticket for the remaining ones.

Vincent



---

archive/issue_comments_210153.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these \"fields\" already have worse abuses). But definitely another ticket.",
    "created_at": "2014-06-15T16:36:50Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210153",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these "fields" already have worse abuses). But definitely another ticket.



---

archive/issue_comments_210154.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [tscrim](#comment%3A11):\n> I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these \"fields\" already have worse abuses). But definitely another ticket.\n\nYou are right for `RDF` and `CDF` but for `RR` and `CC`, technically, these are infinite: the mantisse is finite but the exponent is arbitrary precision (because of mpfr). And again, technically speaking these are not fields ;-)",
    "created_at": "2014-06-15T17:10:49Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210154",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Replying to [tscrim](#comment%3A11):
> I'm hoping to not open a can of worms, but technically `RDF`, `CDF`, `RR`, `CC` are not infinite sets as they have a *fixed* finite precision. Although this would be somewhat surprising for beginners. Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()` (plus these "fields" already have worse abuses). But definitely another ticket.

You are right for `RDF` and `CDF` but for `RR` and `CC`, technically, these are infinite: the mantisse is finite but the exponent is arbitrary precision (because of mpfr). And again, technically speaking these are not fields ;-)



---

archive/issue_comments_210155.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [tscrim](#comment%3A11):\n> Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`\n\n??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.\n\nIt could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)",
    "created_at": "2014-06-15T17:43:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210155",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:13'></a>
Replying to [tscrim](#comment%3A11):
> Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`

??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.

It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)



---

archive/issue_comments_210156.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [nbruin](#comment%3A13):\n> Replying to [tscrim](#comment%3A11):\n> > Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`\n\n> ??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.\n\nHowever what I said is all fields of characteristic 0 are fields and infinite sets (as we can always add 1 more).\n\n> It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)\n\nHmmm...that's an interesting idea. Nicolas, how feasible would that be?",
    "created_at": "2014-06-16T05:50:01Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210156",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Replying to [nbruin](#comment%3A13):
> Replying to [tscrim](#comment%3A11):
> > Plus if we ignore this, we could make a category for char 0 fields, which IMO is a useful distinction and we make as a join `Fields() & Sets().Infinite()`

> ??? Infinite fields are not necessarily of characteristic zero, see for instance `FieldOfFractions(GF(q)['t'])`.

However what I said is all fields of characteristic 0 are fields and infinite sets (as we can always add 1 more).

> It could be something like `Fields() & AssociativeAlgebras(QQ)`, although implementation dictates we should avoid referencing parametrized bases for categories whenever possible (this case wouldn't be so bad, since QQ just a single object. It's when characteristic p fields are made as `Fields() & AssociativeAlgebras(GF(p))` that we have a problem.)

Hmmm...that's an interesting idea. Nicolas, how feasible would that be?



---

archive/issue_comments_210157.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245\">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr></table>\n",
    "created_at": "2014-07-01T17:47:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr></table>




---

archive/issue_comments_210158.json:
```json
{
    "body": "**Changing commit** from \"[1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)\" to \"[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)\".",
    "created_at": "2014-07-01T17:47:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28](https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28)" to "[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)".



---

archive/issue_events_144800.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:50:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144800"
}
```



---

archive/issue_events_144801.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-01T17:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144801"
}
```



---

archive/issue_comments_210159.json:
```json
{
    "body": "<a id='comment:16'></a>\nBack to the ticket at hand: I am happy with Travis changes and he looked over my final tweaks. Good to go!",
    "created_at": "2014-07-01T17:50:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210159",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:16'></a>
Back to the ticket at hand: I am happy with Travis changes and he looked over my final tweaks. Good to go!



---

archive/issue_comments_210160.json:
```json
{
    "body": "**Reviewer:** Nicolas M. Thi\u00e9ry",
    "created_at": "2014-07-01T17:50:26Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210160",
    "user": "https://github.com/nthiery"
}
```

**Reviewer:** Nicolas M. Thiéry



---

archive/issue_events_144802.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-03T02:03:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144802"
}
```



---

archive/issue_events_144803.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-03T02:03:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144803"
}
```



---

archive/issue_comments_210161.json:
```json
{
    "body": "**Changing branch** from \"[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)\" to \"[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)\".",
    "created_at": "2014-07-03T02:03:49Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210161",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)" to "[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)".



---

archive/issue_comments_210162.json:
```json
{
    "body": "<a id='comment:18'></a>\nLong doctests eat all my memory in `sage.matrix.matrix_space`. Looks like matrix space `MatrixSpace(QQ, 7)` trying to figure out whether it is finite or not.",
    "created_at": "2014-07-03T04:10:27Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210162",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>
Long doctests eat all my memory in `sage.matrix.matrix_space`. Looks like matrix space `MatrixSpace(QQ, 7)` trying to figure out whether it is finite or not.



---

archive/issue_comments_210163.json:
```json
{
    "body": "**Changing commit** from \"[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)\" to \"\".",
    "created_at": "2014-07-03T04:10:27Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210163",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)" to "".



---

archive/issue_comments_210164.json:
```json
{
    "body": "**Changing branch** from \"[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)\" to \"[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)\".",
    "created_at": "2014-07-06T01:48:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210164",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[8c49b54c6ab7e11f6ecf6dfdf70780e74be44245](https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245)" to "[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)".



---

archive/issue_events_144804.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-06T01:48:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144804"
}
```



---

archive/issue_comments_210165.json:
```json
{
    "body": "**Commit:** [d9dc10517e2cef49151b77c31a2904bb4c3f4eb1](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)",
    "created_at": "2014-07-06T01:48:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210165",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [d9dc10517e2cef49151b77c31a2904bb4c3f4eb1](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)



---

archive/issue_comments_210166.json:
```json
{
    "body": "<a id='comment:19'></a>\nHey Nicolas,\n\nI remember why I had things that way:\n\n```\nsage: QQ in Sets().Infinite()\nFalse\nsage: MS = MatrixSpace(ZZ, 7)\nsage: MS in Sets().Infinite()\nFalse\n```\nThere will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`). For now, I just reverted the change and added a comment. If that's okay for now, then can you set this back to positive review? Thanks.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517\">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f\">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd\">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28\">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245\">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6d55364440169f2329f4c4efe6aec4214291cf9\">a6d5536</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1\">d9dc105</a></td><td><code>Reverted change for check for infinite enumerated sets.</code></td></tr></table>\n",
    "created_at": "2014-07-06T01:48:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210166",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
Hey Nicolas,

I remember why I had things that way:

```
sage: QQ in Sets().Infinite()
False
sage: MS = MatrixSpace(ZZ, 7)
sage: MS in Sets().Infinite()
False
```
There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`). For now, I just reverted the change and added a comment. If that's okay for now, then can you set this back to positive review? Thanks.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5acdf87dd226359489572e1ef64d9a020901e517">5acdf87</a></td><td><code>Put ZZ in InfiniteEnumeratedSets.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acbf091ee7f4789afa45bc04ab8fee608db7b5f">6acbf09</a></td><td><code>Merge branch 'develop' into t/16239/public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dff726a81ff95fdc5f51b0f931dda66e12a0ddd">7dff726</a></td><td><code>16239: Fix Parent._list_from_iterator_cached instead of implementing a new ZZ.list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4b7c61d7a6b1c578be283613bf9cc63c7f9b28">1b4b7c6</a></td><td><code>Fixed all broken doctests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c49b54c6ab7e11f6ecf6dfdf70780e74be44245">8c49b54</a></td><td><code>16239: final proofreading with Travis looking over my shoulder</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6d55364440169f2329f4c4efe6aec4214291cf9">a6d5536</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1">d9dc105</a></td><td><code>Reverted change for check for infinite enumerated sets.</code></td></tr></table>




---

archive/issue_comments_210167.json:
```json
{
    "body": "**Changing commit** from \"[d9dc10517e2cef49151b77c31a2904bb4c3f4eb1](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)\" to \"[8f67fb521e4a1baf0a78a65a1b4359698b3bf872](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)\".",
    "created_at": "2014-07-11T11:55:46Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d9dc10517e2cef49151b77c31a2904bb4c3f4eb1](https://github.com/sagemath/sagetrac-mirror/commit/d9dc10517e2cef49151b77c31a2904bb4c3f4eb1)" to "[8f67fb521e4a1baf0a78a65a1b4359698b3bf872](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)".



---

archive/issue_comments_210168.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872\">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>\n",
    "created_at": "2014-07-11T11:55:46Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210168",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>




---

archive/issue_comments_210169.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [tscrim](#comment%3A19):\n> I remember why I had things that way:\n> \n> ```\n> sage: QQ in Sets().Infinite()\n> False\n> sage: MS = MatrixSpace(ZZ, 7)\n> sage: MS in Sets().Infinite()\n> False\n> ```\n> There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`\n\nGosh, that's ugly. Oh well, we will have to do with it I guess. Thanks! I improved a bit the wording, and now back to positive review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872\">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>\n",
    "created_at": "2014-07-11T11:57:30Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210169",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:21'></a>
Replying to [tscrim](#comment%3A19):
> I remember why I had things that way:
> 
> ```
> sage: QQ in Sets().Infinite()
> False
> sage: MS = MatrixSpace(ZZ, 7)
> sage: MS in Sets().Infinite()
> False
> ```
> There will be a much larger fix needed for modules over infinite base rings recognizing that they are infinite (and `QQ` and friends will need to be in `Sets().Infinite()`

Gosh, that's ugly. Oh well, we will have to do with it I guess. Thanks! I improved a bit the wording, and now back to positive review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872">8f67fb5</a></td><td><code>16239: added comment for the current workaround in Parent._list_from_iterator_cached</code></td></tr></table>




---

archive/issue_events_144805.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-11T11:57:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144805"
}
```



---

archive/issue_events_144806.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-07-11T11:57:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144806"
}
```



---

archive/issue_events_144807.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-12T00:37:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144807"
}
```



---

archive/issue_events_144808.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-12T00:37:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144808"
}
```



---

archive/issue_comments_210170.json:
```json
{
    "body": "<a id='comment:22'></a>\n\n```\nsage -t --long src/sage/sets/set_from_iterator.py\n**********************************************************************\nFile \"src/sage/sets/set_from_iterator.py\", line 139, in sage.sets.set_from_iterator.EnumeratedSetFromIterator\nFailed example:\n    TestSuite(E).run()\nExpected nothing\nGot:\n    doctest:291: UserWarning: Testing equality of infinite sets which will not end in case of equality\n```",
    "created_at": "2014-07-12T00:37:55Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210170",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>

```
sage -t --long src/sage/sets/set_from_iterator.py
**********************************************************************
File "src/sage/sets/set_from_iterator.py", line 139, in sage.sets.set_from_iterator.EnumeratedSetFromIterator
Failed example:
    TestSuite(E).run()
Expected nothing
Got:
    doctest:291: UserWarning: Testing equality of infinite sets which will not end in case of equality
```



---

archive/issue_comments_210171.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe warning is issued by `EnumeratedSetFromIterator` when `_test_an_element` calls `self(an_element)` where `self` is `E`. From there, the parent of `an_element` is `ZZ`, which the parent's default `__call__` tries to see if the parent is `self` by equality, leading to the `__eq__` call with `ZZ` being a different enumerated set.\n\nSo how do we fix this? I'm not quite sure what the best way to proceed is, put the warning in the test, remove the warning, rework `_test_an_element` to better support facade parents, ...?",
    "created_at": "2014-07-15T03:42:09Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210171",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
The warning is issued by `EnumeratedSetFromIterator` when `_test_an_element` calls `self(an_element)` where `self` is `E`. From there, the parent of `an_element` is `ZZ`, which the parent's default `__call__` tries to see if the parent is `self` by equality, leading to the `__eq__` call with `ZZ` being a different enumerated set.

So how do we fix this? I'm not quite sure what the best way to proceed is, put the warning in the test, remove the warning, rework `_test_an_element` to better support facade parents, ...?



---

archive/issue_comments_210172.json:
```json
{
    "body": "<a id='comment:24'></a>\nHey,\n\nFunny that this has been catch in `set_from_iterator`. The warning is useful, so please, keep it.\n\nIt looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\nVincent",
    "created_at": "2014-07-15T07:14:08Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210172",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
Hey,

Funny that this has been catch in `set_from_iterator`. The warning is useful, so please, keep it.

It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

Vincent



---

archive/issue_comments_210173.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [vdelecroix](#comment%3A24):\n> It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\nIt's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...\n\nWell, for now I will just add the warning to the doctest unless anyone objects.",
    "created_at": "2014-07-15T17:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210173",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
Replying to [vdelecroix](#comment%3A24):
> It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...

Well, for now I will just add the warning to the doctest unless anyone objects.



---

archive/issue_comments_210174.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189\">8120782</a></td><td><code>Fixed doctest in set_from_iterator.py due to facade parent.</code></td></tr></table>\n",
    "created_at": "2014-07-15T17:58:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189">8120782</a></td><td><code>Fixed doctest in set_from_iterator.py due to facade parent.</code></td></tr></table>




---

archive/issue_comments_210175.json:
```json
{
    "body": "**Changing commit** from \"[8f67fb521e4a1baf0a78a65a1b4359698b3bf872](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)\" to \"[81207827342e87e7f8adea3fe3f2d1cf8d512189](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)\".",
    "created_at": "2014-07-15T17:58:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f67fb521e4a1baf0a78a65a1b4359698b3bf872](https://github.com/sagemath/sagetrac-mirror/commit/8f67fb521e4a1baf0a78a65a1b4359698b3bf872)" to "[81207827342e87e7f8adea3fe3f2d1cf8d512189](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)".



---

archive/issue_events_144809.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-15T17:59:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144809"
}
```



---

archive/issue_events_144810.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-15T17:59:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144810"
}
```



---

archive/issue_comments_210176.json:
```json
{
    "body": "<a id='comment:28'></a>\nI am on vacations for the next couple weeks. So please someone take over the last bit of review!\n\nCheers,\n                               Nicolas",
    "created_at": "2014-07-16T21:24:18Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210176",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:28'></a>
I am on vacations for the next couple weeks. So please someone take over the last bit of review!

Cheers,
                               Nicolas



---

archive/issue_events_144811.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144811"
}
```



---

archive/issue_events_144812.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144812"
}
```



---

archive/issue_comments_210177.json:
```json
{
    "body": "**Changing commit** from \"[81207827342e87e7f8adea3fe3f2d1cf8d512189](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)\" to \"[644743d62e705a3eb0886958acaf18a882c55b1e](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)\".",
    "created_at": "2014-08-14T10:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[81207827342e87e7f8adea3fe3f2d1cf8d512189](https://github.com/sagemath/sagetrac-mirror/commit/81207827342e87e7f8adea3fe3f2d1cf8d512189)" to "[644743d62e705a3eb0886958acaf18a882c55b1e](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)".



---

archive/issue_comments_210178.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e\">644743d</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr></table>\n",
    "created_at": "2014-08-14T10:30:58Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e">644743d</a></td><td><code>Merge branch 'public/categories/fix_ZZ-16239' of trac.sagemath.org:sage into public/categories/fix_ZZ-16239</code></td></tr></table>




---

archive/issue_comments_210179.json:
```json
{
    "body": "**Changing commit** from \"[644743d62e705a3eb0886958acaf18a882c55b1e](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)\" to \"[2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)\".",
    "created_at": "2014-08-16T04:49:33Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[644743d62e705a3eb0886958acaf18a882c55b1e](https://github.com/sagemath/sagetrac-mirror/commit/644743d62e705a3eb0886958acaf18a882c55b1e)" to "[2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)".



---

archive/issue_comments_210180.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d\">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>\n",
    "created_at": "2014-08-16T04:49:33Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>




---

archive/issue_comments_210181.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [tscrim](#comment%3A25):\n> Replying to [vdelecroix](#comment%3A24):\n> > It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).\n\n> \n> It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...\n\nWhenever possible, facade parents should indeed make sure that\nF(F.an_element()) == F.an_element(), and bark on\nF(something_outside). Now there are many occasions, like here\nprobably, where it might be hard, or costly, or just impossible to\nachieve.\n\n> Well, for now I will just add the warning to the doctest unless anyone objects.\n\nYeah, that's life. I am ok with the change.\n\nI ran all long tests, and with the little new commit, all tests pass. Back to positive review!\n\nThanks!\n                                                 Nicolas\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d\">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>\n",
    "created_at": "2014-08-16T04:50:30Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210181",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:32'></a>
Replying to [tscrim](#comment%3A25):
> Replying to [vdelecroix](#comment%3A24):
> > It looks ok for me if you modify the doctest explaining what happened. For me it is a facade issue as a facade should be childless (i.e. there is no point in testing whether an element has a parent a given facade).

> 
> It's not checking that it is a child of a facade parent, but that the facade parents `__call__` (and the `_element_constructor_`?) doesn't change the element. I'm wondering if facade parents should work with the coercion framework differently...

Whenever possible, facade parents should indeed make sure that
F(F.an_element()) == F.an_element(), and bark on
F(something_outside). Now there are many occasions, like here
probably, where it might be hard, or costly, or just impossible to
achieve.

> Well, for now I will just add the warning to the doctest unless anyone objects.

Yeah, that's life. I am ok with the change.

I ran all long tests, and with the little new commit, all tests pass. Back to positive review!

Thanks!
                                                 Nicolas

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d">2897dfe</a></td><td><code>#16239: finalized merge by updating a trivially failing doctest</code></td></tr></table>




---

archive/issue_events_144813.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-08-16T04:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144813"
}
```



---

archive/issue_events_144814.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2014-08-16T04:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144814"
}
```



---

archive/issue_comments_210182.json:
```json
{
    "body": "**Changing branch** from \"[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)\" to \"[2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)\".",
    "created_at": "2014-08-16T09:32:25Z",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16239#issuecomment-210182",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/categories/fix_ZZ-16239](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fix_ZZ-16239)" to "[2897dfef672a6051698ae9065a44c8bd76010e9d](https://github.com/sagemath/sagetrac-mirror/commit/2897dfef672a6051698ae9065a44c8bd76010e9d)".



---

archive/issue_events_144815.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-16T09:32:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144815"
}
```



---

archive/issue_events_144816.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "36c9d62867a03f9f63bc2450ef957170bd5fff2b",
    "created_at": "2014-08-16T09:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16239",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16239#event-144816"
}
```
