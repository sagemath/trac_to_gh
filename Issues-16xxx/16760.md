# Issue 16760: stopgap for #16759

archive/issues_016523.json:
```json
{
    "body": "Here is a stopgap for #16759: turn off `install_package` and print a message after installing a package via `sage -i`.\n\nBranch/Commit: [b6711a45ba18bc54cbf776d82f541ad08425476c](https://github.com/sagemath/sagetrac-mirror/commit/b6711a45ba18bc54cbf776d82f541ad08425476c)\n\nReviewer: Jeroen Demeyer\n\nAuthor: John Palmieri\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16760\n\n",
    "closed_at": "2014-08-06T16:16:28Z",
    "created_at": "2014-08-05T01:23:06Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "stopgap for #16759",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16760",
    "user": "https://github.com/jhpalmieri"
}
```
Here is a stopgap for #16759: turn off `install_package` and print a message after installing a package via `sage -i`.

Branch/Commit: [b6711a45ba18bc54cbf776d82f541ad08425476c](https://github.com/sagemath/sagetrac-mirror/commit/b6711a45ba18bc54cbf776d82f541ad08425476c)

Reviewer: Jeroen Demeyer

Author: John Palmieri

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16760





---

archive/issue_comments_283558.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/install\"",
    "created_at": "2014-08-05T01:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283558",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/install"



---

archive/issue_comments_283559.json:
```json
{
    "body": "<a id='comment:2'></a>\nI know this is not yet needs_review, but could you move the message\n\n```\n\"It is a good idea to update the Sage library now: please run 'make' from \\$SAGE_ROOT.\"\n```\n\nto `src/bin/sage` at the end of the `install()` function? That way, it will only be shown after an explicit package install (`sage -i` or `sage -f`), but not during the normal build.\n\n---\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[836629c](https://github.com/sagemath/sagetrac-mirror/commit/836629cbea5e772bae77d869f1d7349b72647162)|`Stopgap for #16759: disable install_package`|",
    "created_at": "2014-08-05T07:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283559",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
I know this is not yet needs_review, but could you move the message

```
"It is a good idea to update the Sage library now: please run 'make' from \$SAGE_ROOT."
```

to `src/bin/sage` at the end of the `install()` function? That way, it will only be shown after an explicit package install (`sage -i` or `sage -f`), but not during the normal build.

---
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[836629c](https://github.com/sagemath/sagetrac-mirror/commit/836629cbea5e772bae77d869f1d7349b72647162)|`Stopgap for #16759: disable install_package`|



---

archive/issue_comments_283560.json:
```json
{
    "body": "Changing commit from \"\" to \"836629cbea5e772bae77d869f1d7349b72647162\"",
    "created_at": "2014-08-05T07:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283560",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "836629cbea5e772bae77d869f1d7349b72647162"



---

archive/issue_comments_283561.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[d0b1b82](https://github.com/sagemath/sagetrac-mirror/commit/d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc)|`Move message about running 'make' to install() in src/bin/sage`|",
    "created_at": "2014-08-05T14:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[d0b1b82](https://github.com/sagemath/sagetrac-mirror/commit/d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc)|`Move message about running 'make' to install() in src/bin/sage`|



---

archive/issue_comments_283562.json:
```json
{
    "body": "Changing commit from \"836629cbea5e772bae77d869f1d7349b72647162\" to \"d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc\"",
    "created_at": "2014-08-05T14:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "836629cbea5e772bae77d869f1d7349b72647162" to "d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc"



---

archive/issue_comments_283563.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[e711f77](https://github.com/sagemath/sagetrac-mirror/commit/e711f7753574b9739bf185931cb2314fa7254a47)|`Move message about running 'make' to install() in src/bin/sage`|",
    "created_at": "2014-08-05T14:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283563",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[e711f77](https://github.com/sagemath/sagetrac-mirror/commit/e711f7753574b9739bf185931cb2314fa7254a47)|`Move message about running 'make' to install() in src/bin/sage`|



---

archive/issue_comments_283564.json:
```json
{
    "body": "Changing commit from \"d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc\" to \"e711f7753574b9739bf185931cb2314fa7254a47\"",
    "created_at": "2014-08-05T14:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d0b1b82747c2a1c6a8fbf08f0c62c79d2b91f2fc" to "e711f7753574b9739bf185931cb2314fa7254a47"



---

archive/issue_comments_283565.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[ad9994b](https://github.com/sagemath/sagetrac-mirror/commit/ad9994bee83cb50b3a681c4f5928a39e4afc8e18)|`Move message about running 'make' to install() in src/bin/sage`|",
    "created_at": "2014-08-05T14:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[ad9994b](https://github.com/sagemath/sagetrac-mirror/commit/ad9994bee83cb50b3a681c4f5928a39e4afc8e18)|`Move message about running 'make' to install() in src/bin/sage`|



---

archive/issue_comments_283566.json:
```json
{
    "body": "Changing commit from \"e711f7753574b9739bf185931cb2314fa7254a47\" to \"ad9994bee83cb50b3a681c4f5928a39e4afc8e18\"",
    "created_at": "2014-08-05T14:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e711f7753574b9739bf185931cb2314fa7254a47" to "ad9994bee83cb50b3a681c4f5928a39e4afc8e18"



---

archive/issue_comments_283567.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-05T14:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283567",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_283568.json:
```json
{
    "body": "<a id='comment:6'></a>\nGood idea. I think I'll mark this as \"needs review\" now, although I haven't tested it very thoroughly. I'm not even sure it's the right thing to do...",
    "created_at": "2014-08-05T14:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283568",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Good idea. I think I'll mark this as "needs review" now, although I haven't tested it very thoroughly. I'm not even sure it's the right thing to do...



---

archive/issue_comments_283569.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-08-05T14:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283569",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_283570.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis is sub-optimal, but I don't think it's a major problem:\n\n```\njdemeyer@tamiyo:/usr/local/src/sage-config$ ./sage -i pexpect\nFound local metadata for pexpect-2.0.p6\nFound local sources at /usr/local/src/sage-config/upstream/pexpect-2.0.tar.bz2\nPackage pexpect-2.0.p6 is already installed.\nUse 'sage -f /usr/local/src/sage-config/upstream/pexpect-2.0.tar.bz2' to force a reinstallation.\n\nIt is a good idea to update the Sage library now: please run 'make' from $SAGE_ROOT.\n```",
    "created_at": "2014-08-05T14:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283570",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
This is sub-optimal, but I don't think it's a major problem:

```
jdemeyer@tamiyo:/usr/local/src/sage-config$ ./sage -i pexpect
Found local metadata for pexpect-2.0.p6
Found local sources at /usr/local/src/sage-config/upstream/pexpect-2.0.tar.bz2
Package pexpect-2.0.p6 is already installed.
Use 'sage -f /usr/local/src/sage-config/upstream/pexpect-2.0.tar.bz2' to force a reinstallation.

It is a good idea to update the Sage library now: please run 'make' from $SAGE_ROOT.
```



---

archive/issue_comments_283571.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/install\" to \"u/jdemeyer/ticket/16760\"",
    "created_at": "2014-08-05T19:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283571",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/jhpalmieri/install" to "u/jdemeyer/ticket/16760"



---

archive/issue_comments_283572.json:
```json
{
    "body": "<a id='comment:10'></a>\nA bit of a hack, but I think this does the job.\n\nJohn, if you agree, then it's positive review.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[4e12496](https://github.com/sagemath/sagetrac-mirror/commit/4e12496227b7f704aa3b8dfbce4e4feb7b15cf46)|`Show the \"please run make\" message only if we actually installed something`|",
    "created_at": "2014-08-05T19:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
A bit of a hack, but I think this does the job.

John, if you agree, then it's positive review.

---
New commits:
|                                                                                                                                          |                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[4e12496](https://github.com/sagemath/sagetrac-mirror/commit/4e12496227b7f704aa3b8dfbce4e4feb7b15cf46)|`Show the "please run make" message only if we actually installed something`|



---

archive/issue_comments_283573.json:
```json
{
    "body": "Changing commit from \"ad9994bee83cb50b3a681c4f5928a39e4afc8e18\" to \"4e12496227b7f704aa3b8dfbce4e4feb7b15cf46\"",
    "created_at": "2014-08-05T19:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283573",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "ad9994bee83cb50b3a681c4f5928a39e4afc8e18" to "4e12496227b7f704aa3b8dfbce4e4feb7b15cf46"



---

archive/issue_comments_283574.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/16760\" to \"u/jhpalmieri/ticket/16760\"",
    "created_at": "2014-08-05T19:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283574",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "u/jdemeyer/ticket/16760" to "u/jhpalmieri/ticket/16760"



---

archive/issue_comments_283575.json:
```json
{
    "body": "<a id='comment:12'></a>\nOkay, good enough. (I made one small change on top of your commit: \"bij\" --> \"by\" in the comment in `src/bin/sage`.)\n\n---\nNew commits:\n|                                                                                                                                          |      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------|\n|[b6711a4](https://github.com/sagemath/sagetrac-mirror/commit/b6711a45ba18bc54cbf776d82f541ad08425476c)|`Typo`|",
    "created_at": "2014-08-05T19:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283575",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Okay, good enough. (I made one small change on top of your commit: "bij" --> "by" in the comment in `src/bin/sage`.)

---
New commits:
|                                                                                                                                          |      |
|------------------------------------------------------------------------------------------------------------------------------------------|------|
|[b6711a4](https://github.com/sagemath/sagetrac-mirror/commit/b6711a45ba18bc54cbf776d82f541ad08425476c)|`Typo`|



---

archive/issue_comments_283576.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-05T19:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283576",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283577.json:
```json
{
    "body": "Changing commit from \"4e12496227b7f704aa3b8dfbce4e4feb7b15cf46\" to \"b6711a45ba18bc54cbf776d82f541ad08425476c\"",
    "created_at": "2014-08-05T19:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283577",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "4e12496227b7f704aa3b8dfbce4e4feb7b15cf46" to "b6711a45ba18bc54cbf776d82f541ad08425476c"



---

archive/issue_comments_283578.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jhpalmieri](#comment%3A12):\n> \"bij\" --> \"by\" in the comment in `src/bin/sage`.\n\nClassic mistake: \"bij\" is a Dutch word...\n\nUpgrading priority, a simple stopgap warrants this.",
    "created_at": "2014-08-06T08:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283578",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [jhpalmieri](#comment%3A12):
> "bij" --> "by" in the comment in `src/bin/sage`.

Classic mistake: "bij" is a Dutch word...

Upgrading priority, a simple stopgap warrants this.



---

archive/issue_events_055822.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-06T16:16:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16760#event-55822"
}
```



---

archive/issue_comments_283579.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/ticket/16760\" to \"b6711a45ba18bc54cbf776d82f541ad08425476c\"",
    "created_at": "2014-08-06T16:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283579",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/ticket/16760" to "b6711a45ba18bc54cbf776d82f541ad08425476c"



---

archive/issue_comments_283580.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-06T16:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16760#issuecomment-283580",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
