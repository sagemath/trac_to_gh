# Issue 16351: Move RecursivelyEnumeratedSet_forest code to sage/sets/recursively_enumerated_set.pyx, remove deprecated classes SearchForest, TransitiveIdeal, TransitiveIdealGraded

archive/issues_016114.json:
```json
{
    "body": "Move the code of `SearchForest` from `sage/combinat/backtrack.py` to `sage/sets/recursively_enumerated_set.pyx` into a class named `RecursivelyEnumeratedSet_forest`.\n\nThis is a follow up of #6637.\n\nCC:  @tscrim @slel\n\nReviewer: Vincent Delecroix\n\nAuthor: Matthias Koeppe\n\nBranch: 908acba415758383bbc6092008276b9081ab782d\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16351\n\n",
    "closed_at": "2020-06-22T22:34:39Z",
    "created_at": "2014-05-13T19:51:48Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Move RecursivelyEnumeratedSet_forest code to sage/sets/recursively_enumerated_set.pyx, remove deprecated classes SearchForest, TransitiveIdeal, TransitiveIdealGraded",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16351",
    "user": "https://github.com/seblabbe"
}
```
Move the code of `SearchForest` from `sage/combinat/backtrack.py` to `sage/sets/recursively_enumerated_set.pyx` into a class named `RecursivelyEnumeratedSet_forest`.

This is a follow up of #6637.

CC:  @tscrim @slel

Reviewer: Vincent Delecroix

Author: Matthias Koeppe

Branch: 908acba415758383bbc6092008276b9081ab782d

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16351





---

archive/issue_events_048176.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48176"
}
```



---

archive/issue_comments_223961.json:
```json
{
    "body": "<a id='comment:3'></a>I just added some old doc from Nathann and myself which is worth being integrated when cleaning this up.\n\n---\nLast 10 new commits:",
    "created_at": "2015-12-14T21:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223961",
    "user": "https://github.com/hivert"
}
```

<a id='comment:3'></a>I just added some old doc from Nathann and myself which is worth being integrated when cleaning this up.

---
Last 10 new commits:



---

archive/issue_events_048177.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-02T02:44:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48177"
}
```



---

archive/issue_events_048178.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-02T02:44:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48178"
}
```



---

archive/issue_comments_223962.json:
```json
{
    "body": "<a id='comment:4'></a>I would like to squeeze out some more speed of the `SearchForest` code, so I'm interested in this. I made #13580 a dependency since that is likely a lot closer than this is to getting into Sage. If you disagree, then we can reverse the order of the dependencies and I'd do the review once this is ready.",
    "created_at": "2016-01-02T02:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223962",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>I would like to squeeze out some more speed of the `SearchForest` code, so I'm interested in this. I made #13580 a dependency since that is likely a lot closer than this is to getting into Sage. If you disagree, then we can reverse the order of the dependencies and I'd do the review once this is ready.



---

archive/issue_comments_223963.json:
```json
{
    "body": "<a id='comment:5'></a>The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.",
    "created_at": "2016-04-08T08:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223963",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.



---

archive/issue_comments_223964.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-04-08T08:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_223965.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 slabbe]:\n> The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.\n\n\nI just rebased this ticket on top of #13580 the code contains only an explanation of what `SearchForest` does with a nice picture from Nathann, Nicolas and nyself. It should be integrated during the move and the documentation cleanup.",
    "created_at": "2016-04-08T08:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223965",
    "user": "https://github.com/hivert"
}
```

<a id='comment:7'></a>Replying to [comment:5 slabbe]:
> The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.


I just rebased this ticket on top of #13580 the code contains only an explanation of what `SearchForest` does with a nice picture from Nathann, Nicolas and nyself. It should be integrated during the move and the documentation cleanup.



---

archive/issue_comments_223966.json:
```json
{
    "body": "<a id='comment:8'></a>Something else that we should do while-we-are-at-it, we should consider using `collections.deque` since it supports fast popping from both ends (`list` can become really slow when popping at the front, but `deque` is still twice as slow popping at the front).",
    "created_at": "2016-04-08T20:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223966",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Something else that we should do while-we-are-at-it, we should consider using `collections.deque` since it supports fast popping from both ends (`list` can become really slow when popping at the front, but `deque` is still twice as slow popping at the front).



---

archive/issue_comments_223967.json:
```json
{
    "body": "<a id='comment:9'></a>Now that #13580 is in, the current branch contains just a small\nself-contained documentation improvement. It seems worth and easy to\nintegrate soon, but somehow unrelated to this ticket, right?\n\nShall we create a separate ticket for that documentation chunk?\n\nAnd refocus this one on moving the SearchForest code to\nsage/sets/recursively_enumerated_set.pyx (more than by just a single\nalias)?",
    "created_at": "2017-01-13T10:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223967",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>Now that #13580 is in, the current branch contains just a small
self-contained documentation improvement. It seems worth and easy to
integrate soon, but somehow unrelated to this ticket, right?

Shall we create a separate ticket for that documentation chunk?

And refocus this one on moving the SearchForest code to
sage/sets/recursively_enumerated_set.pyx (more than by just a single
alias)?



---

archive/issue_comments_223968.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 nthiery]:\n> Now that #13580 is in, the current branch contains just a small\n> self-contained documentation improvement. It seems worth and easy to\n> integrate soon, but somehow unrelated to this ticket, right?\n> \n> Shall we create a separate ticket for that documentation chunk?\n\n\nPlease yes.\n\n> And refocus this one on moving the SearchForest code to\n> sage/sets/recursively_enumerated_set.pyx (more than by just a single\n> alias)?\n\n\nYes.",
    "created_at": "2017-01-17T10:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223968",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>Replying to [comment:9 nthiery]:
> Now that #13580 is in, the current branch contains just a small
> self-contained documentation improvement. It seems worth and easy to
> integrate soon, but somehow unrelated to this ticket, right?
> 
> Shall we create a separate ticket for that documentation chunk?


Please yes.

> And refocus this one on moving the SearchForest code to
> sage/sets/recursively_enumerated_set.pyx (more than by just a single
> alias)?


Yes.



---

archive/issue_events_048179.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-17T04:33:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48179"
}
```



---

archive/issue_events_048180.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-17T04:33:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48180"
}
```



---

archive/issue_comments_223969.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 slabbe]:\n> Replying to [comment:9 nthiery]:\n> > Now that #13580 is in, the current branch contains just a small\n> > self-contained documentation improvement. It seems worth and easy to\n> > integrate soon, but somehow unrelated to this ticket, right?\n> > \n> > Shall we create a separate ticket for that documentation chunk?\n\n> \n> Please yes.\n\n\nThis is now #29882.",
    "created_at": "2020-06-17T04:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223969",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:10 slabbe]:
> Replying to [comment:9 nthiery]:
> > Now that #13580 is in, the current branch contains just a small
> > self-contained documentation improvement. It seems worth and easy to
> > integrate soon, but somehow unrelated to this ticket, right?
> > 
> > Shall we create a separate ticket for that documentation chunk?

> 
> Please yes.


This is now #29882.



---

archive/issue_comments_223970.json:
```json
{
    "body": "<a id='comment:15'></a>Moved it, now need to clean up some lazy_import business\n\n---\nNew commits:",
    "created_at": "2020-06-17T05:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223970",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Moved it, now need to clean up some lazy_import business

---
New commits:



---

archive/issue_comments_223971.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-17T05:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_223972.json:
```json
{
    "body": "<a id='comment:17'></a>Let's see what the patchbot has to say.\n\nI have made not made any attempt to cythonize anything; this is really just pure Python code moved into the pyx file.",
    "created_at": "2020-06-17T05:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223972",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Let's see what the patchbot has to say.

I have made not made any attempt to cythonize anything; this is really just pure Python code moved into the pyx file.



---

archive/issue_comments_223973.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-17T05:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223973",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_223974.json:
```json
{
    "body": "<a id='comment:18'></a>Also, I added a `lazy_import` for `SearchForest` but it seems that `SearchForest` was already deprecated -- perhaps now it can be removed completely?",
    "created_at": "2020-06-17T05:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223974",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Also, I added a `lazy_import` for `SearchForest` but it seems that `SearchForest` was already deprecated -- perhaps now it can be removed completely?



---

archive/issue_comments_223975.json:
```json
{
    "body": "<a id='comment:19'></a>(deprecation in #6637, 6 years ago)",
    "created_at": "2020-06-17T05:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223975",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>(deprecation in #6637, 6 years ago)



---

archive/issue_comments_223976.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-17T05:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_223977.json:
```json
{
    "body": "<a id='comment:21'></a>Also `TransitiveIdeal` and `TransitiveIdealGraded` were deprecated in #6637.",
    "created_at": "2020-06-17T05:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223977",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Also `TransitiveIdeal` and `TransitiveIdealGraded` were deprecated in #6637.



---

archive/issue_comments_223978.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-17T06:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_223979.json:
```json
{
    "body": "<a id='comment:24'></a>It seems to me that with your changes `SearchForest` does not exist anymore. If so, you must add a lazy import with deprecation warning in `backtrack.py`. The `SearchForest` was documented as a deprecated class but was not making any deprecation warning when used.",
    "created_at": "2020-06-17T06:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223979",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>It seems to me that with your changes `SearchForest` does not exist anymore. If so, you must add a lazy import with deprecation warning in `backtrack.py`. The `SearchForest` was documented as a deprecated class but was not making any deprecation warning when used.



---

archive/issue_comments_223980.json:
```json
{
    "body": "<a id='comment:25'></a>That's right, these deprecated classes are deleted.\n\nThe deprecation happened in #6637 and announced on the ticket, I guess before deprecation warnings were invented?",
    "created_at": "2020-06-17T06:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223980",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>That's right, these deprecated classes are deleted.

The deprecation happened in #6637 and announced on the ticket, I guess before deprecation warnings were invented?



---

archive/issue_comments_223981.json:
```json
{
    "body": "<a id='comment:26'></a>This is somehow annoying. Let us hope that nobody uses it in her code.",
    "created_at": "2020-06-17T11:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223981",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>This is somehow annoying. Let us hope that nobody uses it in her code.



---

archive/issue_comments_223982.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-17T11:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223982",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_223983.json:
```json
{
    "body": "<a id='comment:27'></a>Thanks!",
    "created_at": "2020-06-17T14:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223983",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Thanks!



---

archive/issue_comments_223984.json:
```json
{
    "body": "<a id='comment:29'></a>In the same general area, any interest in #22184 and #27537 anyone?",
    "created_at": "2020-06-18T01:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223984",
    "user": "https://github.com/slel"
}
```

<a id='comment:29'></a>In the same general area, any interest in #22184 and #27537 anyone?



---

archive/issue_events_048181.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-22T22:34:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16351#event-48181"
}
```



---

archive/issue_comments_223985.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-22T22:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223985",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_223986.json:
```json
{
    "body": "<a id='comment:31'></a>Thanks for finishing this task.I feel ashame I never finished it myself.\n\nAs a further todo, I think it will be nice to have\n\n```diff\n-class RecursivelyEnumeratedSet_forest(Parent):\n+class RecursivelyEnumeratedSet_forest(RecursivelyEnumeratedSet_generic):\n```\n\nThere are few methods like `to_digraph` from the generic class that I like to use but are currently not available for the `forest` type.",
    "created_at": "2020-06-24T19:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223986",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:31'></a>Thanks for finishing this task.I feel ashame I never finished it myself.

As a further todo, I think it will be nice to have

```diff
-class RecursivelyEnumeratedSet_forest(Parent):
+class RecursivelyEnumeratedSet_forest(RecursivelyEnumeratedSet_generic):
```

There are few methods like `to_digraph` from the generic class that I like to use but are currently not available for the `forest` type.



---

archive/issue_comments_223987.json:
```json
{
    "body": "<a id='comment:32'></a>A follow-up ticket is here: #30238",
    "created_at": "2020-07-28T12:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16351#issuecomment-223987",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:32'></a>A follow-up ticket is here: #30238
