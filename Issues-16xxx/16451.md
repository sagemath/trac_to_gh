# Issue 16451: Implement tensor product of cystals categories and a better search for highest weight elements

archive/issues_016214.json:
```json
{
    "body": "Currently in a tensor product of crystals, we search through all elements and filter. However if given a highest weight element in a tensor product `a (x) b`, then `b` must be highest weight. This means we can use a backtracing algorithm to find all highest weight elements which this ticket implements.\n\nThis first implements the categories of tensor products of crystals (currently all crystal subcategories are monoidal under tensor products).\n\nThis also changes the output of the current `highest_weight_vectors()` to return a tuple since we don't want to allow modifications to the output of a ``@`cached_method`.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @anneschilling @nthiery\n\nKeywords: crystals, tensor products\n\nReviewer: Anne Schilling, Nicolas M. Thi\u00e9ry\n\nAuthor: Travis Scrimshaw\n\nBranch: c9df4709e1325f1c13b3d7253a69c69280d0e987\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16451\n\n",
    "closed_at": "2014-08-19T10:39:02Z",
    "created_at": "2014-06-06T03:49:35Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Implement tensor product of cystals categories and a better search for highest weight elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16451",
    "user": "https://github.com/tscrim"
}
```
Currently in a tensor product of crystals, we search through all elements and filter. However if given a highest weight element in a tensor product `a (x) b`, then `b` must be highest weight. This means we can use a backtracing algorithm to find all highest weight elements which this ticket implements.

This first implements the categories of tensor products of crystals (currently all crystal subcategories are monoidal under tensor products).

This also changes the output of the current `highest_weight_vectors()` to return a tuple since we don't want to allow modifications to the output of a ``@`cached_method`.

Assignee: sage-combinat

CC:  sage-combinat @anneschilling @nthiery

Keywords: crystals, tensor products

Reviewer: Anne Schilling, Nicolas M. Thi√©ry

Author: Travis Scrimshaw

Branch: c9df4709e1325f1c13b3d7253a69c69280d0e987

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16451





---

archive/issue_comments_211429.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-06T05:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211429",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211430.json:
```json
{
    "body": "<a id='comment:1'></a>As far as I can tell, this is independent of #16001.\n\nNicolas, can you make a quick check to make sure I'm doing everything correctly? If I am, I think I've found a bug for `Modules`:\n\n```\nsage: Modules(QQ).TensorProducts()\nCategory of objects\n```\n\n---\nNew commits:",
    "created_at": "2014-06-06T05:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211430",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>As far as I can tell, this is independent of #16001.

Nicolas, can you make a quick check to make sure I'm doing everything correctly? If I am, I think I've found a bug for `Modules`:

```
sage: Modules(QQ).TensorProducts()
Category of objects
```

---
New commits:



---

archive/issue_events_048375.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16451#event-48375"
}
```



---

archive/issue_comments_211431.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-16T18:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211432.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-16T18:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211432",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211433.json:
```json
{
    "body": "<a id='comment:5'></a>Hey Anne,\n\nNicolas looked at the category code and layout today and I made the necessary changes. The only thing needing review is the backtracing algorithm in `highest_weight_crystals.py`; would you be willing to finish the review.\n\nThanks,\n\nTravis",
    "created_at": "2014-08-16T18:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211433",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>Hey Anne,

Nicolas looked at the category code and layout today and I made the necessary changes. The only thing needing review is the backtracing algorithm in `highest_weight_crystals.py`; would you be willing to finish the review.

Thanks,

Travis



---

archive/issue_comments_211434.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-17T04:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211434",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_211435.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-08-17T05:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_211436.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-08-17T05:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_211437.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-17T05:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211437",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_211438.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-18T11:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211438",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_211439.json:
```json
{
    "body": "<a id='comment:9'></a>\n```\nsage -t --long src/doc/en/thematic_tutorials/lie/crystals.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/lie/crystals.rst\", line 701, in doc.en.thematic_tutorials.lie.crystals\nFailed example:\n    T.highest_weight_vectors()\nExpected:\n    [[1, 1, 1], [1, 2, 1], [2, 1, 1], [3, 2, 1]]\nGot:\n    ([1, 1, 1], [2, 1, 1], [1, 2, 1], [3, 2, 1])\n**********************************************************************\n1 item had failures:\n   1 of 147 in doc.en.thematic_tutorials.lie.crystals\n    [113 tests, 1 failure, 1.85 s]\n```",
    "created_at": "2014-08-18T11:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211439",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
```
sage -t --long src/doc/en/thematic_tutorials/lie/crystals.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/lie/crystals.rst", line 701, in doc.en.thematic_tutorials.lie.crystals
Failed example:
    T.highest_weight_vectors()
Expected:
    [[1, 1, 1], [1, 2, 1], [2, 1, 1], [3, 2, 1]]
Got:
    ([1, 1, 1], [2, 1, 1], [1, 2, 1], [3, 2, 1])
**********************************************************************
1 item had failures:
   1 of 147 in doc.en.thematic_tutorials.lie.crystals
    [113 tests, 1 failure, 1.85 s]
```



---

archive/issue_comments_211440.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-18T15:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211441.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-08-18T15:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211441",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_211442.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-19T10:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16451#issuecomment-211442",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048376.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-19T10:39:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16451#event-48376"
}
```
