# Issue 16017: Get libs.mwrank to compile on OS X 10.4

archive/issues_015780.json:
```json
{
    "assignees": [],
    "body": "\n```\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include/python2.7 -c sage/libs/mwrank/mwrank.c -o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o -fno-strict-aliasing -w\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include/python2.7 -c sage/libs/mwrank/wrap.cc -o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -fno-strict-aliasing -w\ng++ -bundle -undefined dynamic_lookup -L/Users/student/Desktop/sage-6.2.beta4/local/lib build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -L/Users/student/Desktop/sage-6.2.beta4/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.so\n/usr/bin/ld: warning can't open dynamic library: libflint.dylib referenced from: /Users/student/Desktop/sage-6.2.beta4/local/lib/libec.dylib (checking for undefined symbols may be affected) (No such file or directory, errno = 2)\n/usr/bin/ld: Undefined symbols:\n_nmod_mat_clear referenced from libec expected to be defined in libflint.dylib\n_nmod_mat_init referenced from libec expected to be defined in libflint.dylib\n_nmod_mat_rref referenced from libec expected to be defined in libflint.dylib\ncollect2: error: ld returned 1 exit status\nerror: command 'g++' failed with exit status 1\n```\nSee lots of discussion at [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/6Vh55hF7UXk).  Best guesses are either [this Flint bug](https://github.com/wbhart/flint2/issues/55) and leif's idea that there is a missing linker flag on Darwin (see the sage-release thread).\n\n---\n\nThis is not eclib's fault, but due to incomplete / wrong \"`install_name`s\" (meant to be *absolute* paths) in libflint.dylib (and also libpari-gmp.dylib).\n\nOn Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.\n\nWe can solve this by upgrading flint to 2.4.3 which includes the necessary fix.\n\nNew sources:\n* [http://www.flintlib.org/flint-2.4.3.tar.gz](http://www.flintlib.org/flint-2.4.3.tar.gz)\n\n\nCC:  @nexttime @vbraun @jpflori\n\nComponent: **packages: standard**\n\nKeywords: **Darwin 8 linker error install_name libflint.dylib**\n\nAuthor: **Fran\u00e7ois Bissey**\n\nBranch/Commit: **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**\n\nReviewer: **Karl-Dieter Crisman, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16017_\n\n",
    "closed_at": "2014-04-07T19:09:06Z",
    "created_at": "2014-03-26T18:21:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Get libs.mwrank to compile on OS X 10.4",
    "type": "issue",
    "updated_at": "2014-04-07T19:09:06Z",
    "url": "https://github.com/sagemath/sage/issues/16017",
    "user": "https://github.com/kcrisman"
}
```

```
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include/python2.7 -c sage/libs/mwrank/mwrank.c -o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o -fno-strict-aliasing -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include -I/Users/student/Desktop/sage-6.2.beta4/local/include/csage -I/Users/student/Desktop/sage-6.2.beta4/src -I/Users/student/Desktop/sage-6.2.beta4/src/sage/ext -I/Users/student/Desktop/sage-6.2.beta4/local/include/python2.7 -c sage/libs/mwrank/wrap.cc -o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -fno-strict-aliasing -w
g++ -bundle -undefined dynamic_lookup -L/Users/student/Desktop/sage-6.2.beta4/local/lib build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -L/Users/student/Desktop/sage-6.2.beta4/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.so
/usr/bin/ld: warning can't open dynamic library: libflint.dylib referenced from: /Users/student/Desktop/sage-6.2.beta4/local/lib/libec.dylib (checking for undefined symbols may be affected) (No such file or directory, errno = 2)
/usr/bin/ld: Undefined symbols:
_nmod_mat_clear referenced from libec expected to be defined in libflint.dylib
_nmod_mat_init referenced from libec expected to be defined in libflint.dylib
_nmod_mat_rref referenced from libec expected to be defined in libflint.dylib
collect2: error: ld returned 1 exit status
error: command 'g++' failed with exit status 1
```
See lots of discussion at [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/6Vh55hF7UXk).  Best guesses are either [this Flint bug](https://github.com/wbhart/flint2/issues/55) and leif's idea that there is a missing linker flag on Darwin (see the sage-release thread).

---

This is not eclib's fault, but due to incomplete / wrong "`install_name`s" (meant to be *absolute* paths) in libflint.dylib (and also libpari-gmp.dylib).

On Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.

We can solve this by upgrading flint to 2.4.3 which includes the necessary fix.

New sources:
* [http://www.flintlib.org/flint-2.4.3.tar.gz](http://www.flintlib.org/flint-2.4.3.tar.gz)


CC:  @nexttime @vbraun @jpflori

Component: **packages: standard**

Keywords: **Darwin 8 linker error install_name libflint.dylib**

Author: **Fran√ßois Bissey**

Branch/Commit: **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**

Reviewer: **Karl-Dieter Crisman, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/16017_





---

archive/issue_events_226519.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-26T18:21:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226519"
}
```



---

archive/issue_events_226520.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-26T18:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226520"
}
```



---

archive/issue_events_226521.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-26T18:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226521"
}
```



---

archive/issue_events_226522.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-26T18:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226522"
}
```



---

archive/issue_comments_203551.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLeif's idea seems to have been right, though I don't know that setting the DYLD_ whatever path or rpath is any easier that what seemed to do it for me - just adding an explicit dependency in src/module_list.py, as we often do for Cygwin, which is more finicky.  From the thread:\n\n---\nBut the problem is that somehow the linking isn't happening properly in sage/libs/mwrank, and indeed -lflint isn't in the line\n\ng++ -bundle -undefined dynamic_lookup -L/Users/student/Desktop/sage-6.2.beta4/local/lib build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -L/Users/student/Desktop/sage-6.2.beta4/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.so\n\nMaybe could I add something to src/module_list.py or whatever the appropriate file is now to force -lflint as well?  On Cygwin we often had to be more explicit because of something analogous, if I recall that correctly.  I'm going to try this just to see...\n\nIt seems to work!  At least, things continue compiling. On Cygwin that was always the sign of victory, though :)\n\nSo Leif's idea was probably the right one.  I'll see if things finish up first and then run tests - John, any files I should run tests on first to make sure this did indeed compile and link correctly? \n\nHowever, I don't know the right *fix*.  I don't mind including extra things in module_list.py since probably Cygwin likes them too, but perhaps there is a better fix, or maybe there's a reason that's a bad fix, or something.",
    "created_at": "2014-03-27T17:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203551",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

Leif's idea seems to have been right, though I don't know that setting the DYLD_ whatever path or rpath is any easier that what seemed to do it for me - just adding an explicit dependency in src/module_list.py, as we often do for Cygwin, which is more finicky.  From the thread:

---
But the problem is that somehow the linking isn't happening properly in sage/libs/mwrank, and indeed -lflint isn't in the line

g++ -bundle -undefined dynamic_lookup -L/Users/student/Desktop/sage-6.2.beta4/local/lib build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.4-ppc-2.7/sage/libs/mwrank/wrap.o -L/Users/student/Desktop/sage-6.2.beta4/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.4-ppc-2.7/sage/libs/mwrank/mwrank.so

Maybe could I add something to src/module_list.py or whatever the appropriate file is now to force -lflint as well?  On Cygwin we often had to be more explicit because of something analogous, if I recall that correctly.  I'm going to try this just to see...

It seems to work!  At least, things continue compiling. On Cygwin that was always the sign of victory, though :)

So Leif's idea was probably the right one.  I'll see if things finish up first and then run tests - John, any files I should run tests on first to make sure this did indeed compile and link correctly? 

However, I don't know the right *fix*.  I don't mind including extra things in module_list.py since probably Cygwin likes them too, but perhaps there is a better fix, or maybe there's a reason that's a bad fix, or something.



---

archive/issue_comments_203552.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAlso required for sage.libs.cremona extensions.  Given that on Cygwin we will probably need this too, I'm suggesting that this is the right solution now.",
    "created_at": "2014-03-27T17:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203552",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

Also required for sage.libs.cremona extensions.  Given that on Cygwin we will probably need this too, I'm suggesting that this is the right solution now.



---

archive/issue_comments_203553.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm pretty curious whether -- with the \"superfluous\" `-lflint` added -- you're still getting the weird\n\n```\n/usr/bin/ld: warning can't open dynamic library: libflint.dylib referenced from: /Users/student/Desktop/sage-6.2.beta4/local/lib/libec.dylib (checking for undefined symbols may be affected) (No such file or directory, errno = 2)\n```\n\nThe addition is IMHO just a work-around (on Darwin 8; still probably necessary on Cygwin); it doesn't address the root of the problem (provided we can trust the linker messages).  (Cf. my recent comment on the Sage 6.2.beta**4** thread on sage-release.)",
    "created_at": "2014-03-27T20:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203553",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm pretty curious whether -- with the "superfluous" `-lflint` added -- you're still getting the weird

```
/usr/bin/ld: warning can't open dynamic library: libflint.dylib referenced from: /Users/student/Desktop/sage-6.2.beta4/local/lib/libec.dylib (checking for undefined symbols may be affected) (No such file or directory, errno = 2)
```

The addition is IMHO just a work-around (on Darwin 8; still probably necessary on Cygwin); it doesn't address the root of the problem (provided we can trust the linker messages).  (Cf. my recent comment on the Sage 6.2.beta**4** thread on sage-release.)



---

archive/issue_comments_203554.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n... in other words:\n\nWhere the heck does the linker try to find the `libflint.dylib` `libec.dylib` refers to, and does `libec.dylib` really refer to `$SAGE_ROOT/local/lib/libflint.dylib` (modulo symlinks to versioned versions of the libraries)?\n\n\n\n\nCould Apple's `otool` enlighten us?  (Not sure whether passing `-t` to the Darwin linker would.)",
    "created_at": "2014-03-27T21:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203554",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

... in other words:

Where the heck does the linker try to find the `libflint.dylib` `libec.dylib` refers to, and does `libec.dylib` really refer to `$SAGE_ROOT/local/lib/libflint.dylib` (modulo symlinks to versioned versions of the libraries)?




Could Apple's `otool` enlighten us?  (Not sure whether passing `-t` to the Darwin linker would.)



---

archive/issue_comments_203555.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nNo, no warnings if I use that.  I really think it just doesn't know where to find it.  This happened on Cygwin all the time, like I said.  Yes, it's certainly just a workaround, but one that I can't really see a downside to.  I have no idea where it is looking, and I have pretty much run out of energy on this now that I found what I think it is an acceptable solution.  Not that I don't *want* a better one, but my sense is there may not be one that doesn't involve special casing a `-lflint` for old Macs for no particular reason, or that doesn't involve asking John to do something annoying with eclib.",
    "created_at": "2014-03-28T03:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203555",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

No, no warnings if I use that.  I really think it just doesn't know where to find it.  This happened on Cygwin all the time, like I said.  Yes, it's certainly just a workaround, but one that I can't really see a downside to.  I have no idea where it is looking, and I have pretty much run out of energy on this now that I found what I think it is an acceptable solution.  Not that I don't *want* a better one, but my sense is there may not be one that doesn't involve special casing a `-lflint` for old Macs for no particular reason, or that doesn't involve asking John to do something annoying with eclib.



---

archive/issue_comments_203556.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nTry using [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/flint/files/flint-2.4-makefile.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/flint/files/flint-2.4-makefile.patch) in the patches folder for flint. Then in spkg-install \n\n```\nexport SHARE_FLAGS=\"-install_name ${SAGE_LOCAL}/lib/libflint.dylib\"\n```\nbefore $MAKE\nRebuild flint, eclib and see if that works. If it does we'll put that in a better shape.",
    "created_at": "2014-03-28T09:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203556",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Try using [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/flint/files/flint-2.4-makefile.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/flint/files/flint-2.4-makefile.patch) in the patches folder for flint. Then in spkg-install 

```
export SHARE_FLAGS="-install_name ${SAGE_LOCAL}/lib/libflint.dylib"
```
before $MAKE
Rebuild flint, eclib and see if that works. If it does we'll put that in a better shape.



---

archive/issue_events_226523.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-28T18:35:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226523"
}
```



---

archive/issue_events_226524.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-03-28T18:35:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226524"
}
```



---

archive/issue_comments_203557.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks, that sounds fine too if it works, but I won't be able to try this until Monday.\n\nSince we have several workarounds now, and since (for now) this is still a supported platform, I'm making this a blocker for 6.2.",
    "created_at": "2014-03-28T18:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203557",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks, that sounds fine too if it works, but I won't be able to try this until Monday.

Since we have several workarounds now, and since (for now) this is still a supported platform, I'm making this a blocker for 6.2.



---

archive/issue_comments_203558.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n\n```sh\nleif@bsd:~/Sage/sage-6.2.beta5$ otool -DL local/lib/libec.dylib \nlocal/lib/libec.dylib:\n\t/Users/leif/Sage/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\tlibflint.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/Users/leif/Sage/sage-6.2.beta5/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)\n\t/Users/leif/Sage/sage-6.2.beta5/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11)\n\t/Users/leif/Sage/sage-6.2.beta5/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n```\n\nInteresting...  (Note the recorded path to the PARI library!)\n\nBut we (also) already have `-lpari` on the command line for linking the mwrank Python extension module (which I think by the way shouldn't be necessary either, as it isn't *directly* used IIRC):\n\n```\ng++ -bundle -undefined dynamic_lookup -L/Users/leif/Sage/sage-6.2.beta5/local/lib build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.so\n```\n\nAnd FWIW, in the build on bsd.math, `libtool` also drops the `-rpath` given to it when linking `libec.dylib` (or, more precisely, `libec.0.dylib`).",
    "created_at": "2014-03-29T14:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203558",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>


```sh
leif@bsd:~/Sage/sage-6.2.beta5$ otool -DL local/lib/libec.dylib 
local/lib/libec.dylib:
	/Users/leif/Sage/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	libflint.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/leif/Sage/sage-6.2.beta5/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)
	/Users/leif/Sage/sage-6.2.beta5/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11)
	/Users/leif/Sage/sage-6.2.beta5/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
```

Interesting...  (Note the recorded path to the PARI library!)

But we (also) already have `-lpari` on the command line for linking the mwrank Python extension module (which I think by the way shouldn't be necessary either, as it isn't *directly* used IIRC):

```
g++ -bundle -undefined dynamic_lookup -L/Users/leif/Sage/sage-6.2.beta5/local/lib build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lcsage -lec -lntl -lpari -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.so
```

And FWIW, in the build on bsd.math, `libtool` also drops the `-rpath` given to it when linking `libec.dylib` (or, more precisely, `libec.0.dylib`).



---

archive/issue_comments_203559.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor completeness, this is how `libec.0.dylib` gets linked on bsd.math (looks the same as on Karl-Dieter's MacOS X 10.4 PPC box):\n\n```\n/bin/sh ../libtool --tag=CXX   --mode=link g++  -g -O3  -no-undefined -L/Users/leif/Sage/sage-6.2.beta5/local/lib -L/Users/leif/Sage/sage-6.2.beta5/local/lib -L/Users/leif/Sage/sage-6.2.beta5/local/lib   -o libec.la -rpath /Users/leif/Sage/sage-6.2.beta5/local/lib interface.lo unimod.lo arith.lo marith.lo gpslave.lo compproc.lo vector.lo matrix.lo subspace.lo kbessel.lo mvector.lo mmatrix.lo msubspace.lo svector.lo smatrix.lo smatrix_elim.lo xsplit.lo conic.lo legendre.lo quadratic.lo illl.lo hilbert.lo timer.lo cubic.lo polys.lo realroots.lo parifact.lo p2points.lo gf.lo xsplit_data.lo threadpool.lo logger.lo curve.lo curvedata.lo curvered.lo points.lo cperiods.lo isogs.lo heights.lo mwprocs.lo lambda.lo sifter.lo sieve_search.lo htconst.lo egr.lo saturate.lo divpol.lo pointsmod.lo curvemod.lo ffmod.lo tlss.lo elog.lo getcurve.lo mequiv.lo mrank1.lo mlocsol.lo mglobsol.lo mquartic.lo mrank2.lo qc.lo sqfdiv.lo version.lo minim.lo reduce.lo transform.lo desc2.lo bitspace.lo GetOpt.lo twoadic.lo descent.lo newforms.lo symb.lo homspace.lo cusp.lo oldforms.lo fixc6.lo periods.lo moddata.lo pcprocs.lo nfd.lo curvesort.lo  -lflint -lntl -lpari\nlibtool: link: g++ -dynamiclib  -o .libs/libec.0.dylib  .libs/interface.o .libs/unimod.o .libs/arith.o .libs/marith.o .libs/gpslave.o .libs/compproc.o .libs/vector.o .libs/matrix.o .libs/subspace.o .libs/kbessel.o .libs/mvector.o .libs/mmatrix.o .libs/msubspace.o .libs/svector.o .libs/smatrix.o .libs/smatrix_elim.o .libs/xsplit.o .libs/conic.o .libs/legendre.o .libs/quadratic.o .libs/illl.o .libs/hilbert.o .libs/timer.o .libs/cubic.o .libs/polys.o .libs/realroots.o .libs/parifact.o .libs/p2points.o .libs/gf.o .libs/xsplit_data.o .libs/threadpool.o .libs/logger.o .libs/curve.o .libs/curvedata.o .libs/curvered.o .libs/points.o .libs/cperiods.o .libs/isogs.o .libs/heights.o .libs/mwprocs.o .libs/lambda.o .libs/sifter.o .libs/sieve_search.o .libs/htconst.o .libs/egr.o .libs/saturate.o .libs/divpol.o .libs/pointsmod.o .libs/curvemod.o .libs/ffmod.o .libs/tlss.o .libs/elog.o .libs/getcurve.o .libs/mequiv.o .libs/mrank1.o .libs/mlocsol.o .libs/mglobsol.o .libs/mquartic.o .libs/mrank2.o .libs/qc.o .libs/sqfdiv.o .libs/version.o .libs/minim.o .libs/reduce.o .libs/transform.o .libs/desc2.o .libs/bitspace.o .libs/GetOpt.o .libs/twoadic.o .libs/descent.o .libs/newforms.o .libs/symb.o .libs/homspace.o .libs/cusp.o .libs/oldforms.o .libs/fixc6.o .libs/periods.o .libs/moddata.o .libs/pcprocs.o .libs/nfd.o .libs/curvesort.o   -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lflint /Users/leif/Sage/sage-6.2.beta5/local/lib/libntl.dylib -L/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/gcc-4.7.3.p1/gcc-build/x86_64-apple-darwin10.8.0/libstdc++-v3/src -L/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/gcc-4.7.3.p1/gcc-build/x86_64-apple-darwin10.8.0/libstdc++-v3/src/.libs -lpari  -O3   -install_name  /Users/leif/Sage/sage-6.2.beta5/local/lib/libec.0.dylib -compatibility_version 1 -current_version 1.0 -Wl,-single_module\n```\n\nSo indeed the (missing or weird) `install_name`s seem to be the problem.  (Or `libtool`... ;-) )",
    "created_at": "2014-03-29T14:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203559",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

For completeness, this is how `libec.0.dylib` gets linked on bsd.math (looks the same as on Karl-Dieter's MacOS X 10.4 PPC box):

```
/bin/sh ../libtool --tag=CXX   --mode=link g++  -g -O3  -no-undefined -L/Users/leif/Sage/sage-6.2.beta5/local/lib -L/Users/leif/Sage/sage-6.2.beta5/local/lib -L/Users/leif/Sage/sage-6.2.beta5/local/lib   -o libec.la -rpath /Users/leif/Sage/sage-6.2.beta5/local/lib interface.lo unimod.lo arith.lo marith.lo gpslave.lo compproc.lo vector.lo matrix.lo subspace.lo kbessel.lo mvector.lo mmatrix.lo msubspace.lo svector.lo smatrix.lo smatrix_elim.lo xsplit.lo conic.lo legendre.lo quadratic.lo illl.lo hilbert.lo timer.lo cubic.lo polys.lo realroots.lo parifact.lo p2points.lo gf.lo xsplit_data.lo threadpool.lo logger.lo curve.lo curvedata.lo curvered.lo points.lo cperiods.lo isogs.lo heights.lo mwprocs.lo lambda.lo sifter.lo sieve_search.lo htconst.lo egr.lo saturate.lo divpol.lo pointsmod.lo curvemod.lo ffmod.lo tlss.lo elog.lo getcurve.lo mequiv.lo mrank1.lo mlocsol.lo mglobsol.lo mquartic.lo mrank2.lo qc.lo sqfdiv.lo version.lo minim.lo reduce.lo transform.lo desc2.lo bitspace.lo GetOpt.lo twoadic.lo descent.lo newforms.lo symb.lo homspace.lo cusp.lo oldforms.lo fixc6.lo periods.lo moddata.lo pcprocs.lo nfd.lo curvesort.lo  -lflint -lntl -lpari
libtool: link: g++ -dynamiclib  -o .libs/libec.0.dylib  .libs/interface.o .libs/unimod.o .libs/arith.o .libs/marith.o .libs/gpslave.o .libs/compproc.o .libs/vector.o .libs/matrix.o .libs/subspace.o .libs/kbessel.o .libs/mvector.o .libs/mmatrix.o .libs/msubspace.o .libs/svector.o .libs/smatrix.o .libs/smatrix_elim.o .libs/xsplit.o .libs/conic.o .libs/legendre.o .libs/quadratic.o .libs/illl.o .libs/hilbert.o .libs/timer.o .libs/cubic.o .libs/polys.o .libs/realroots.o .libs/parifact.o .libs/p2points.o .libs/gf.o .libs/xsplit_data.o .libs/threadpool.o .libs/logger.o .libs/curve.o .libs/curvedata.o .libs/curvered.o .libs/points.o .libs/cperiods.o .libs/isogs.o .libs/heights.o .libs/mwprocs.o .libs/lambda.o .libs/sifter.o .libs/sieve_search.o .libs/htconst.o .libs/egr.o .libs/saturate.o .libs/divpol.o .libs/pointsmod.o .libs/curvemod.o .libs/ffmod.o .libs/tlss.o .libs/elog.o .libs/getcurve.o .libs/mequiv.o .libs/mrank1.o .libs/mlocsol.o .libs/mglobsol.o .libs/mquartic.o .libs/mrank2.o .libs/qc.o .libs/sqfdiv.o .libs/version.o .libs/minim.o .libs/reduce.o .libs/transform.o .libs/desc2.o .libs/bitspace.o .libs/GetOpt.o .libs/twoadic.o .libs/descent.o .libs/newforms.o .libs/symb.o .libs/homspace.o .libs/cusp.o .libs/oldforms.o .libs/fixc6.o .libs/periods.o .libs/moddata.o .libs/pcprocs.o .libs/nfd.o .libs/curvesort.o   -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lflint /Users/leif/Sage/sage-6.2.beta5/local/lib/libntl.dylib -L/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/gcc-4.7.3.p1/gcc-build/x86_64-apple-darwin10.8.0/libstdc++-v3/src -L/Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/gcc-4.7.3.p1/gcc-build/x86_64-apple-darwin10.8.0/libstdc++-v3/src/.libs -lpari  -O3   -install_name  /Users/leif/Sage/sage-6.2.beta5/local/lib/libec.0.dylib -compatibility_version 1 -current_version 1.0 -Wl,-single_module
```

So indeed the (missing or weird) `install_name`s seem to be the problem.  (Or `libtool`... ;-) )



---

archive/issue_comments_203560.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nexttime](#comment%3A8):\n> (Note the recorded path to the PARI library!)\n> \n> But we (also) already have `-lpari` on the command line for linking the mwrank Python extension module (which I think by the way shouldn't be necessary either, as it isn't *directly* used IIRC) [...]\n\nAnd if I remove `pari` from the allegedly needed libraries of the mwrank Python extension module (in `module_list.py`), this also works *on bsd.math*:\n\n```\nleif@bsd:~/Sage/sage-6.2.beta5$ touch src/sage/libs/mwrank/mwrank.pyx \nleif@bsd:~/Sage/sage-6.2.beta5$ ./sage -b\nscons: `install' is up to date.\nUpdating Cython code....\nCompiling sage/libs/mwrank/mwrank.pyx because it changed.\nCythonizing sage/libs/mwrank/mwrank.pyx\nFinished compiling Cython code (time = 4.62841916084 seconds)\nrunning install\nrunning build\nrunning build_py\nrunning build_ext\nbuilding 'sage.libs.mwrank.mwrank' extension\nExecuting 1 command (using 1 thread)\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include/python2.7 -c sage/libs/mwrank/mwrank.c -o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o -fno-strict-aliasing -w\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include/python2.7 -c sage/libs/mwrank/wrap.cc -o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -fno-strict-aliasing -w\ng++ -bundle -undefined dynamic_lookup -L/Users/leif/Sage/sage-6.2.beta5/local/lib build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lcsage -lec -lntl -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.so\nTime to execute 1 command: 4.69843101501 seconds\nTotal time spent compiling C/C++ extensions:  4.88040590286 seconds.\n```\n\nI guess doing so would trigger another \"no such file or directory\" warning on *Karl-Dieter's* machine.  MacOS X 10.6's linker is simply \"smarter\"...",
    "created_at": "2014-03-29T15:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203560",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nexttime](#comment%3A8):
> (Note the recorded path to the PARI library!)
> 
> But we (also) already have `-lpari` on the command line for linking the mwrank Python extension module (which I think by the way shouldn't be necessary either, as it isn't *directly* used IIRC) [...]

And if I remove `pari` from the allegedly needed libraries of the mwrank Python extension module (in `module_list.py`), this also works *on bsd.math*:

```
leif@bsd:~/Sage/sage-6.2.beta5$ touch src/sage/libs/mwrank/mwrank.pyx 
leif@bsd:~/Sage/sage-6.2.beta5$ ./sage -b
scons: `install' is up to date.
Updating Cython code....
Compiling sage/libs/mwrank/mwrank.pyx because it changed.
Cythonizing sage/libs/mwrank/mwrank.pyx
Finished compiling Cython code (time = 4.62841916084 seconds)
running install
running build
running build_py
running build_ext
building 'sage.libs.mwrank.mwrank' extension
Executing 1 command (using 1 thread)
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include/python2.7 -c sage/libs/mwrank/mwrank.c -o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o -fno-strict-aliasing -w
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -DNTL_ALL -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include -I/Users/leif/Sage/sage-6.2.beta5/local/include/csage -I/Users/leif/Sage/sage-6.2.beta5/src -I/Users/leif/Sage/sage-6.2.beta5/src/sage/ext -I/Users/leif/Sage/sage-6.2.beta5/local/include/python2.7 -c sage/libs/mwrank/wrap.cc -o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -fno-strict-aliasing -w
g++ -bundle -undefined dynamic_lookup -L/Users/leif/Sage/sage-6.2.beta5/local/lib build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.o build/temp.macosx-10.6-x86_64-2.7/sage/libs/mwrank/wrap.o -L/Users/leif/Sage/sage-6.2.beta5/local/lib -lcsage -lec -lntl -lgmp -lgmpxx -lstdc++ -lm -lstdc++ -lntl -o build/lib.macosx-10.6-x86_64-2.7/sage/libs/mwrank/mwrank.so
Time to execute 1 command: 4.69843101501 seconds
Total time spent compiling C/C++ extensions:  4.88040590286 seconds.
```

I guess doing so would trigger another "no such file or directory" warning on *Karl-Dieter's* machine.  MacOS X 10.6's linker is simply "smarter"...



---

archive/issue_comments_203561.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSo we may also want to look at pari because it put the build time location rather than final location in install name. Not a problem if you tell sage to keep the build stuff I guess.",
    "created_at": "2014-03-29T18:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203561",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

So we may also want to look at pari because it put the build time location rather than final location in install name. Not a problem if you tell sage to keep the build stuff I guess.



---

archive/issue_comments_203562.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI actually have a patch for pari's installname that I made for pari 2.5.0 and it is still in the gentoo and sage-on-gentoo trees, I guess I should try to it merged in pari proper.\n[https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch)\nAs for Karl-Dieter's problem we should be able to see if fixing the installname solves his problem without rebuilding flint and eclib.\nwe can use \n\n```\ninstall_name_tool -change \"oldname\" \"newname\" filename\n```\nWe can alter libflint.dylib and libec.dylib with the appropriate values and see if sage compile.",
    "created_at": "2014-03-29T20:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203562",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

I actually have a patch for pari's installname that I made for pari 2.5.0 and it is still in the gentoo and sage-on-gentoo trees, I guess I should try to it merged in pari proper.
[https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch)
As for Karl-Dieter's problem we should be able to see if fixing the installname solves his problem without rebuilding flint and eclib.
we can use 

```
install_name_tool -change "oldname" "newname" filename
```
We can alter libflint.dylib and libec.dylib with the appropriate values and see if sage compile.



---

archive/issue_comments_203563.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kiwifb](#comment%3A12):\n> I actually have a patch for pari's installname that I made for pari 2.5.0 and it is still in the gentoo and sage-on-gentoo trees, I guess I should try to it merged in pari proper.\n> [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch)\n> As for Karl-Dieter's problem we should be able to see if fixing the installname solves his problem without rebuilding flint and eclib.\n> we can use \n> \n> ```\n> install_name_tool -change \"oldname\" \"newname\" filename\n> ```\n> We can alter libflint.dylib and libec.dylib with the appropriate values and see if sage compile.\n\nYep, but he'd have to rebuild eclib (after changing libflint's [and perhaps libpari's] `install_name`) such that the proper dependency name(s) get(s) recorded in `libec.0.dylib`; I don't think you can change these with `install_name_tool`.\n\n\n\n\nAny idea why `libtool` ignores `-rpath` (on both MacOS X 10.4 and 10.6)?",
    "created_at": "2014-03-29T22:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203563",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kiwifb](#comment%3A12):
> I actually have a patch for pari's installname that I made for pari 2.5.0 and it is still in the gentoo and sage-on-gentoo trees, I guess I should try to it merged in pari proper.
> [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/pari/files/pari-2.5.0-macos.patch)
> As for Karl-Dieter's problem we should be able to see if fixing the installname solves his problem without rebuilding flint and eclib.
> we can use 
> 
> ```
> install_name_tool -change "oldname" "newname" filename
> ```
> We can alter libflint.dylib and libec.dylib with the appropriate values and see if sage compile.

Yep, but he'd have to rebuild eclib (after changing libflint's [and perhaps libpari's] `install_name`) such that the proper dependency name(s) get(s) recorded in `libec.0.dylib`; I don't think you can change these with `install_name_tool`.




Any idea why `libtool` ignores `-rpath` (on both MacOS X 10.4 and 10.6)?



---

archive/issue_comments_203564.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFirst yes you can.\n\n```\nMirage:lib fbissey$ otool -L libec.0.dylib \nlibec.0.dylib:\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\tlibflint.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/Users/fbissey/build/sage-6.2.beta4/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\nMirage:lib fbissey$ install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib \nMirage:lib fbissey$ otool -L libec.0.dylib \nlibec.0.dylib:\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)\n\t/Users/fbissey/build/sage-6.2.beta4/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1)\n\t/Users/fbissey/build/sage-6.2.beta4/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\nMirage:lib fbissey$ \n```\nAbout libtool, not sure. I always felt rpath was redundant with the install_name mechanism but that's not really an answer to your question.",
    "created_at": "2014-03-29T23:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203564",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

First yes you can.

```
Mirage:lib fbissey$ otool -L libec.0.dylib 
libec.0.dylib:
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	libflint.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Users/fbissey/build/sage-6.2.beta4/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
Mirage:lib fbissey$ install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib 
Mirage:lib fbissey$ otool -L libec.0.dylib 
libec.0.dylib:
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libntl.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Users/fbissey/build/sage-6.2.beta4/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib (compatibility version 2.5.0, current version 2.5.5)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1)
	/Users/fbissey/build/sage-6.2.beta4/local/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
Mirage:lib fbissey$ 
```
About libtool, not sure. I always felt rpath was redundant with the install_name mechanism but that's not really an answer to your question.



---

archive/issue_comments_203565.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@kiwifb](#comment%3A14):\n> First yes you can.\n\nCool.  \\o/\n\n\n\n\n> About libtool, not sure. I always felt rpath was redundant with the install_name mechanism but that's not really an answer to your question.\n\nWell, by default `install_name` is an *absolute* path.  You can prepend `@rpath/` (and other flavours) to the `install_name` to make it relative to paths set by `-rpath`, similar to `$ORIGIN` in an ELF object's `DT_RUNPATH`.  But I'm not a Darwin linker (nor Mach-O) expert; I'd expect `libtool` to know how to do it though.  On the other hand, `libtool` did convert *some* of the `-L/path/to/foo/ -lfoo` to absolute filenames on the linker command line (when linking `libec.0.dylib`), presumably exactly [to] those with a correct, absolute `install_name`.",
    "created_at": "2014-03-30T01:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203565",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@kiwifb](#comment%3A14):
> First yes you can.

Cool.  \o/




> About libtool, not sure. I always felt rpath was redundant with the install_name mechanism but that's not really an answer to your question.

Well, by default `install_name` is an *absolute* path.  You can prepend `@rpath/` (and other flavours) to the `install_name` to make it relative to paths set by `-rpath`, similar to `$ORIGIN` in an ELF object's `DT_RUNPATH`.  But I'm not a Darwin linker (nor Mach-O) expert; I'd expect `libtool` to know how to do it though.  On the other hand, `libtool` did convert *some* of the `-L/path/to/foo/ -lfoo` to absolute filenames on the linker command line (when linking `libec.0.dylib`), presumably exactly [to] those with a correct, absolute `install_name`.



---

archive/issue_comments_203566.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYikes!  As long as I have a specific thing to try out on Monday I'll be happy - if you guys can agree on what I should try, I don't have infinite time with that machine ;-)",
    "created_at": "2014-03-30T02:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203566",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Yikes!  As long as I have a specific thing to try out on Monday I'll be happy - if you guys can agree on what I should try, I don't have infinite time with that machine ;-)



---

archive/issue_comments_203567.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nTry the equivalent for your machine of:\n\n```\ninstall_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib \ninstall_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libflint.dylib \n```\nin $SAGE_LOCAL/lib. Don't forget to replace the path for SAGE_LOCAL with what's correct for you.\nOnce that's done you can try to build sage again and see if it will go past that point.\nIf it does we'll make the appropriate patch.",
    "created_at": "2014-03-30T03:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203567",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Try the equivalent for your machine of:

```
install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib 
install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libflint.dylib 
```
in $SAGE_LOCAL/lib. Don't forget to replace the path for SAGE_LOCAL with what's correct for you.
Once that's done you can try to build sage again and see if it will go past that point.
If it does we'll make the appropriate patch.



---

archive/issue_comments_203568.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kcrisman](#comment%3A16):\n> Yikes!  As long as I have a specific thing to try out on Monday I'll be happy - if you guys can agree on what I should try, I don't have infinite time with that machine ;-)\n\nThere are plenty of things you *could* try... :-)\n\nBut I think kiwifb and me agree on that you could first try to:\n\n* Restore `module_list.py` (at least remove `flint`, optionally also `pari`) from the \"needed\" libraries of the libs.mwrank Python extension module -- to test whether it works for *one of* the affected modules (you had to change about five IIRC)\n\n* Make sure libflint's `install_name` is still just `libflint.dylib` (otherwise `install_name_tool` will give an error):\n\n```sh\n$ cd $SAGE_ROOT\n$ otool -D local/lib/libflint.dylib\nlocal/lib/libflint.dylib:\nlibflint.dylib\n```\n* Change the `install_name` (here called \"id\") to the library's absolute path:\n\n```sh\n$ install_name_tool -id `pwd`/local/lib/libflint.dylib local/lib/libflint.dylib\n```\n* Then either rebuild/reinstall eclib (which should now record libflint's absolute path), or -- simpler -- just change the recorded name (for FLINT) in `libec.0.dylib` manually:\n\n```sh\n$ otool -L local/lib/libec.0.dylib  # just to check libflint's name there\nlocal/lib/libec.0.dylib:\n\t<path to>/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\tlibflint.dylib (compatibility version 0.0.0, current version 0.0.0)\n        ...\n\n$ install_name_tool -change libflint.dylib `pwd`/local/lib/libflint.dylib local/lib/libec.0.dylib  # now really change the name\n\n$ otool -L local/lib/libec.0.dylib  # just to verify it changed\nlocal/lib/libec.0.dylib:\n\t<path to>/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t<path to>/sage-6.2.beta5/local/lib/libflint.dylib (compatibility version 0.0.0, current version 0.0.0)\n        ...\n\n```\n\n* Pretend file modification to trigger the rebuild of the module(s):\n\n```sh\n$ touch src/sage/libs/mwrank/mwrank.pyx  # and more if you like\n\n$ ./sage -b  # and now rebuild\n```\n\nThe linker should now be able to locate `libflint.dylib` referenced by `libec.dylib`.\n\n\n\n\nOptionally, repeat the steps analogously for `pari` (which in contrast is originally listed as a needed lib in `module_list.py`, so you'd have to really remove it rather than restoring the state of vanilla beta4 or beta5); just libpari's original `install_name` is a bit more complicated (with a non-existing temporary path):\n\n```sh\n $ otool -D local/lib/libpari-gmp.dylib \nlocal/lib/libpari-gmp.dylib:\n<path to>/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib\n```\n(`libpari.dylib` is a symbolic link to `libpari-gmp.dylib`.)\n\nWhen you change the name (again in `libec.0.dylib`), you have to specify the **full original (invalid) path**:\n\n```sh\n$ install_name_tool -change /Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib `pwd`/local/lib/libpari-gmp.dylib local/lib/libec.0.dylib\n```\n(Just as an example -- note that the invalid path will differ on a PowerPC, and of course your `$SAGE_ROOT`.)",
    "created_at": "2014-03-30T03:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203568",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kcrisman](#comment%3A16):
> Yikes!  As long as I have a specific thing to try out on Monday I'll be happy - if you guys can agree on what I should try, I don't have infinite time with that machine ;-)

There are plenty of things you *could* try... :-)

But I think kiwifb and me agree on that you could first try to:

* Restore `module_list.py` (at least remove `flint`, optionally also `pari`) from the "needed" libraries of the libs.mwrank Python extension module -- to test whether it works for *one of* the affected modules (you had to change about five IIRC)

* Make sure libflint's `install_name` is still just `libflint.dylib` (otherwise `install_name_tool` will give an error):

```sh
$ cd $SAGE_ROOT
$ otool -D local/lib/libflint.dylib
local/lib/libflint.dylib:
libflint.dylib
```
* Change the `install_name` (here called "id") to the library's absolute path:

```sh
$ install_name_tool -id `pwd`/local/lib/libflint.dylib local/lib/libflint.dylib
```
* Then either rebuild/reinstall eclib (which should now record libflint's absolute path), or -- simpler -- just change the recorded name (for FLINT) in `libec.0.dylib` manually:

```sh
$ otool -L local/lib/libec.0.dylib  # just to check libflint's name there
local/lib/libec.0.dylib:
	<path to>/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	libflint.dylib (compatibility version 0.0.0, current version 0.0.0)
        ...

$ install_name_tool -change libflint.dylib `pwd`/local/lib/libflint.dylib local/lib/libec.0.dylib  # now really change the name

$ otool -L local/lib/libec.0.dylib  # just to verify it changed
local/lib/libec.0.dylib:
	<path to>/sage-6.2.beta5/local/lib/libec.0.dylib (compatibility version 1.0.0, current version 1.0.0)
	<path to>/sage-6.2.beta5/local/lib/libflint.dylib (compatibility version 0.0.0, current version 0.0.0)
        ...

```

* Pretend file modification to trigger the rebuild of the module(s):

```sh
$ touch src/sage/libs/mwrank/mwrank.pyx  # and more if you like

$ ./sage -b  # and now rebuild
```

The linker should now be able to locate `libflint.dylib` referenced by `libec.dylib`.




Optionally, repeat the steps analogously for `pari` (which in contrast is originally listed as a needed lib in `module_list.py`, so you'd have to really remove it rather than restoring the state of vanilla beta4 or beta5); just libpari's original `install_name` is a bit more complicated (with a non-existing temporary path):

```sh
 $ otool -D local/lib/libpari-gmp.dylib 
local/lib/libpari-gmp.dylib:
<path to>/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib
```
(`libpari.dylib` is a symbolic link to `libpari-gmp.dylib`.)

When you change the name (again in `libec.0.dylib`), you have to specify the **full original (invalid) path**:

```sh
$ install_name_tool -change /Users/leif/Sage/sage-6.2.beta5/local/var/tmp/sage/build/pari-2.5.5b.p1/src/Odarwin-i386/libpari-gmp.dylib `pwd`/local/lib/libpari-gmp.dylib local/lib/libec.0.dylib
```
(Just as an example -- note that the invalid path will differ on a PowerPC, and of course your `$SAGE_ROOT`.)



---

archive/issue_comments_203569.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nJust for the record:  I *started* writing *before* Fran\u00e7ois replied... 8)\n\nBut we (still) agree on what you could try.",
    "created_at": "2014-03-30T04:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203569",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">comment:19</div>

Just for the record:  I *started* writing *before* Fran√ßois replied... 8)

But we (still) agree on what you could try.



---

archive/issue_comments_203570.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYes we do. Just using install_name_tool means that we can test that theory without rebuilding flint and eclib, which would take some time on that machine.",
    "created_at": "2014-03-30T04:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203570",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

Yes we do. Just using install_name_tool means that we can test that theory without rebuilding flint and eclib, which would take some time on that machine.



---

archive/issue_comments_203571.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@kiwifb](#comment%3A17):\n> Try the equivalent for your machine of:\n> \n> ```\n> install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib \n> install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libflint.dylib \n> ```\n> in $SAGE_LOCAL/lib. Don't forget to replace the path for SAGE_LOCAL with what's correct for you.\n\nNote that the second line wouldn't work (it's a no-op).\n\nIf you want to change the `install_name` of the library *itself* (as opposed to the recorded install names of libraries *it uses*), you have to use the `-id` option of `install_name_tool`, which takes just the *new* name (plus the filename of the library to change of course).",
    "created_at": "2014-03-30T04:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203571",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@kiwifb](#comment%3A17):
> Try the equivalent for your machine of:
> 
> ```
> install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libec.0.dylib 
> install_name_tool -change libflint.dylib /Users/fbissey/build/sage-6.2.beta4/local/lib/libflint.dylib libflint.dylib 
> ```
> in $SAGE_LOCAL/lib. Don't forget to replace the path for SAGE_LOCAL with what's correct for you.

Note that the second line wouldn't work (it's a no-op).

If you want to change the `install_name` of the library *itself* (as opposed to the recorded install names of libraries *it uses*), you have to use the `-id` option of `install_name_tool`, which takes just the *new* name (plus the filename of the library to change of course).



---

archive/issue_comments_203572.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWell spotted. I was a bit too eager there and I had completely forgotten about that important detail.",
    "created_at": "2014-03-30T05:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203572",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Well spotted. I was a bit too eager there and I had completely forgotten about that important detail.



---

archive/issue_comments_203573.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nFor the record, `@rpath` is OSX 10.5 and later only afaik. So absolute paths it is.",
    "created_at": "2014-03-30T11:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203573",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

For the record, `@rpath` is OSX 10.5 and later only afaik. So absolute paths it is.



---

archive/issue_comments_203574.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, I'm trying this.  Thank you leif for the VERY explicit steps, which start to help me understand even what these files even are.\n\nThe `otool` output was fine, and I decided to have it rebuild eclib just to make sure that worked fine.  I already reverted `module_list.py` and `touch`ed the files so I'll let you know what happens when it's done.  I'm not messing with the `pari` issue, though :)",
    "created_at": "2014-03-31T15:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203574",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, I'm trying this.  Thank you leif for the VERY explicit steps, which start to help me understand even what these files even are.

The `otool` output was fine, and I decided to have it rebuild eclib just to make sure that worked fine.  I already reverted `module_list.py` and `touch`ed the files so I'll let you know what happens when it's done.  I'm not messing with the `pari` issue, though :)



---

archive/issue_comments_203575.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOkay, this does indeed seem to do the trick.  I can't run doctests, though, because sympy isn't built yet.  Weird.",
    "created_at": "2014-03-31T17:05:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203575",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:25" align="right">comment:25</div>

Okay, this does indeed seem to do the trick.  I can't run doctests, though, because sympy isn't built yet.  Weird.



---

archive/issue_comments_203576.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOk, I had to install sympy AND mpmath for Sage to even start - which seems odd, they shouldn't be imported on startup?  Anyway, only sage/libs/cremona/newforms.pyx doesn't pass tests, but that is because the Cremona mini database apparently never got installed, unrelated, I assume.  (Or is that part of the eclib package?)",
    "created_at": "2014-03-31T17:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203576",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Ok, I had to install sympy AND mpmath for Sage to even start - which seems odd, they shouldn't be imported on startup?  Anyway, only sage/libs/cremona/newforms.pyx doesn't pass tests, but that is because the Cremona mini database apparently never got installed, unrelated, I assume.  (Or is that part of the eclib package?)



---

archive/issue_comments_203577.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI am fairly sure it is in database_cremona_ellcurve.",
    "created_at": "2014-03-31T17:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203577",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

I am fairly sure it is in database_cremona_ellcurve.



---

archive/issue_comments_203578.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nActually, it ended up being installed via the `elliptic_curve` spkg, which only installed later... so that should be fine as well.\n\nNow I guess we just need a \"good\" way to implement your ideas, which it sounds like you all have.",
    "created_at": "2014-03-31T17:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203578",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

Actually, it ended up being installed via the `elliptic_curve` spkg, which only installed later... so that should be fine as well.

Now I guess we just need a "good" way to implement your ideas, which it sounds like you all have.



---

archive/issue_comments_203579.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIn the first instance what I suggested earlier would work but I want to put it in form that's more palatable to flint upstream so they can just merge it (and I'll get rid of my patch in sage-on-gentoo).\n\nI need to take another look at their configure script.",
    "created_at": "2014-03-31T20:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203579",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

In the first instance what I suggested earlier would work but I want to put it in form that's more palatable to flint upstream so they can just merge it (and I'll get rid of my patch in sage-on-gentoo).

I need to take another look at their configure script.



---

archive/issue_comments_203580.json:
```json
{
    "body": "Changed keywords from none to **Darwin 8 linker error install_name libflint.dylib**",
    "created_at": "2014-03-31T20:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203580",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **Darwin 8 linker error install_name libflint.dylib**



---

archive/issue_comments_203581.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@kcrisman](#comment%3A28):\n> Now I guess we just need a \"good\" way to implement your ideas, which it sounds like you all have.\n\nWhich I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran\u00e7ois presumably knows, as he mentioned he had patches for both.",
    "created_at": "2014-03-31T20:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203581",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@kcrisman](#comment%3A28):
> Now I guess we just need a "good" way to implement your ideas, which it sounds like you all have.

Which I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran√ßois presumably knows, as he mentioned he had patches for both.



---

archive/issue_comments_203582.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nP.S.:  Does anyone currently test on Cygwin?",
    "created_at": "2014-03-31T20:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203582",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:31" align="right">comment:31</div>

P.S.:  Does anyone currently test on Cygwin?



---

archive/issue_comments_203583.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@nexttime](#comment%3A31):\n> P.S.:  Does anyone currently test on Cygwin?\n\nI could do that.\n\nIIRC I built 6.2.beta4 without problems (except bzip2 unrelated issues) so maybe nothing is actully needed?\nWhen was eclib updated?",
    "created_at": "2014-03-31T20:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203583",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@nexttime](#comment%3A31):
> P.S.:  Does anyone currently test on Cygwin?

I could do that.

IIRC I built 6.2.beta4 without problems (except bzip2 unrelated issues) so maybe nothing is actully needed?
When was eclib updated?



---

archive/issue_comments_203584.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@nexttime](#comment%3A30):\n> Replying to [@kcrisman](#comment%3A28):\n> > Now I guess we just need a \"good\" way to implement your ideas, which it sounds like you all have.\n\n> \n> Which I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran\u00e7ois presumably knows, as he mentioned he had patches for both.\n\nFlint upstream doesn't set anything for install_name and it is straightforward to add it, I'll submit a pull request for that to them this morning hopefully. Not sure how to forward that kind of patch to pari upstream, but again they don't do anything particular and end with something that comes as default with their linking options. I posted a link to the patch in #comment:12 if we want to include it. No extra actions needed in spkg-install just apply the patch.",
    "created_at": "2014-03-31T20:38:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203584",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@nexttime](#comment%3A30):
> Replying to [@kcrisman](#comment%3A28):
> > Now I guess we just need a "good" way to implement your ideas, which it sounds like you all have.

> 
> Which I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran√ßois presumably knows, as he mentioned he had patches for both.

Flint upstream doesn't set anything for install_name and it is straightforward to add it, I'll submit a pull request for that to them this morning hopefully. Not sure how to forward that kind of patch to pari upstream, but again they don't do anything particular and end with something that comes as default with their linking options. I posted a link to the patch in #comment:12 if we want to include it. No extra actions needed in spkg-install just apply the patch.



---

archive/issue_comments_203585.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kiwifb](#comment%3A33):\n> Replying to [@nexttime](#comment%3A30):\n> > Replying to [@kcrisman](#comment%3A28):\n> > > Now I guess we just need a \"good\" way to implement your ideas, which it sounds like you all have.\n\n> > \n> > Which I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran\u00e7ois presumably knows, as he mentioned he had patches for both.\n\n> \n> Flint upstream doesn't set anything for install_name and it is straightforward to add it, I'll submit a pull request for that to them this morning hopefully. Not sure how to forward that kind of patch to pari upstream, but again they don't do anything particular and end with something that comes as default with their linking options. I posted a link to the patch in #comment:12 if we want to include it. No extra actions needed in spkg-install just apply the patch.\n\nThe PARI folk is currently releasing rc's for 2.7.\nIt might be a very good time to forward them such a patch.\nI think you should post it on the pari-dev ml.",
    "created_at": "2014-03-31T20:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203585",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kiwifb](#comment%3A33):
> Replying to [@nexttime](#comment%3A30):
> > Replying to [@kcrisman](#comment%3A28):
> > > Now I guess we just need a "good" way to implement your ideas, which it sounds like you all have.

> > 
> > Which I think means fixing the FLINT (and optionally also the PARI) spkg (on Darwin at least).  I don't know whether it's upstream's or probably Sage's fault, but Fran√ßois presumably knows, as he mentioned he had patches for both.

> 
> Flint upstream doesn't set anything for install_name and it is straightforward to add it, I'll submit a pull request for that to them this morning hopefully. Not sure how to forward that kind of patch to pari upstream, but again they don't do anything particular and end with something that comes as default with their linking options. I posted a link to the patch in #comment:12 if we want to include it. No extra actions needed in spkg-install just apply the patch.

The PARI folk is currently releasing rc's for 2.7.
It might be a very good time to forward them such a patch.
I think you should post it on the pari-dev ml.



---

archive/issue_comments_203586.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,3 +12,10 @@\n error: command 'g++' failed with exit status 1\n ```\n See lots of discussion at [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/6Vh55hF7UXk).  Best guesses are either [this Flint bug](https://github.com/wbhart/flint2/issues/55) and leif's idea that there is a missing linker flag on Darwin (see the sage-release thread).\n+\n+---\n+\n+This is not eclib's fault, but due to incomplete / wrong \"`install_name`s\" (meant to be *absolute* paths) in libflint.dylib (and also libpari-gmp.dylib).\n+\n+On Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.\n+\n``````\n",
    "created_at": "2014-03-31T20:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203586",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,3 +12,10 @@
 error: command 'g++' failed with exit status 1
 ```
 See lots of discussion at [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/6Vh55hF7UXk).  Best guesses are either [this Flint bug](https://github.com/wbhart/flint2/issues/55) and leif's idea that there is a missing linker flag on Darwin (see the sage-release thread).
+
+---
+
+This is not eclib's fault, but due to incomplete / wrong "`install_name`s" (meant to be *absolute* paths) in libflint.dylib (and also libpari-gmp.dylib).
+
+On Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.
+
``````




---

archive/issue_comments_203587.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jpflori](#comment%3A32):\n> Replying to [@nexttime](#comment%3A31):\n> > P.S.:  Does anyone currently test on Cygwin?\n\n> I could do that.\n> \n> IIRC I built 6.2.beta4 without problems (except bzip2 unrelated issues) so maybe nothing is actully needed?\n> When was eclib updated?\n\nIn Sage 6.2.beta0 IIRC.  (That's why I asked when K-D last *successfully* built Sage on that Darwin PPC box.)",
    "created_at": "2014-03-31T20:57:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203587",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jpflori](#comment%3A32):
> Replying to [@nexttime](#comment%3A31):
> > P.S.:  Does anyone currently test on Cygwin?

> I could do that.
> 
> IIRC I built 6.2.beta4 without problems (except bzip2 unrelated issues) so maybe nothing is actully needed?
> When was eclib updated?

In Sage 6.2.beta0 IIRC.  (That's why I asked when K-D last *successfully* built Sage on that Darwin PPC box.)



---

archive/issue_comments_203588.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI need a little bit of time to check my fix work for flint (bulding beta5 on my maverick machine)",
    "created_at": "2014-03-31T21:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203588",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

I need a little bit of time to check my fix work for flint (bulding beta5 on my maverick machine)



---

archive/issue_comments_203589.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nPush request sent to upstream flint [https://github.com/wbhart/flint2/pull/58](https://github.com/wbhart/flint2/pull/58) we can use the patch directly in sage. Anyone set up to make a sage commit can just grab that patch.\nI also tested the pari patch I quoted, needed a small adjustment for git style. I will send it and another for doc building with -j4 and over to maintonly@pari.math.u-bordeaux.fr which seem to be the right forum for these.",
    "created_at": "2014-03-31T23:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203589",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

Push request sent to upstream flint [https://github.com/wbhart/flint2/pull/58](https://github.com/wbhart/flint2/pull/58) we can use the patch directly in sage. Anyone set up to make a sage commit can just grab that patch.
I also tested the pari patch I quoted, needed a small adjustment for git style. I will send it and another for doc building with -j4 and over to maintonly@pari.math.u-bordeaux.fr which seem to be the right forum for these.



---

archive/issue_comments_203590.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOther libs without a proper install_name:\n* libLfunction.dylib (lcalc)\n* libcliquer.dylib\n* polybori's libraries are strange, possibly bad substitution\n* libzn_poly.dylib (zn_poly)\n* libcsage.dylib :) moving to autotools would solve that\n\nAnd my patch for flint has been merged upstream \\o/",
    "created_at": "2014-03-31T23:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203590",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

Other libs without a proper install_name:
* libLfunction.dylib (lcalc)
* libcliquer.dylib
* polybori's libraries are strange, possibly bad substitution
* libzn_poly.dylib (zn_poly)
* libcsage.dylib :) moving to autotools would solve that

And my patch for flint has been merged upstream \o/



---

archive/issue_comments_203591.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nBill made a flint-2.4.3 release with this fix, we can just bump to that. see\n[https://github.com/wbhart/flint2/pull/58](https://github.com/wbhart/flint2/pull/58)",
    "created_at": "2014-03-31T23:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203591",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

Bill made a flint-2.4.3 release with this fix, we can just bump to that. see
[https://github.com/wbhart/flint2/pull/58](https://github.com/wbhart/flint2/pull/58)



---

archive/issue_comments_203592.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAny of these solutions seems good to me - thanks so much for this quick and knowledgeable work!",
    "created_at": "2014-04-01T00:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203592",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:41" align="right">comment:41</div>

Any of these solutions seems good to me - thanks so much for this quick and knowledgeable work!



---

archive/issue_comments_203593.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nGoing back to pari :) the install_name problem is all sage's spkg-install fault. Pari's own install target produce a correct dylib but sage does this little interesting bit:\n\n```\n    if [ \"$UNAME\" = \"Darwin\" ]; then\n        # The following is a hack to get the library installed correctly\n        # on Mac OS X:\n        echo \"Applying Mac OS X hack -- deleting and reinstalling libpari.a ...\"\n        rm -f Odarwin-ppc/*lib*\n        $MAKE install-lib-sta\n        if [ $? -ne 0 ]; then\n            echo >&2 \"Error reinstalling PARI's static libraries (OS X trick)\"\n            exit 1\n        fi\n\n        cd \"`config/objdir`\" && cp -f libpari* \"$SAGE_LOCAL/lib\"\n        if [ $? -ne 0 ]; then\n            echo >&2 \"Error copying PARI's libraries (OS X trick)\"\n            exit 1\n        fi\n        cd \"$CUR\"\n    fi\n```\nSo we use the copy from the build directory in SAGE_LOCAL/lib. But when when you do \"make install\" pari actually rebuilds libpari{,-gmp}.dylib in the install location (modulo DESTDIR if it is defined) with the correct install_name. But spkg-install throw all that away and uses a copy without any install_name set.\n\nUnless someone can explain to me what this hack is all about, I think its removal should have a bug of its own on trac.",
    "created_at": "2014-04-01T22:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203593",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

Going back to pari :) the install_name problem is all sage's spkg-install fault. Pari's own install target produce a correct dylib but sage does this little interesting bit:

```
    if [ "$UNAME" = "Darwin" ]; then
        # The following is a hack to get the library installed correctly
        # on Mac OS X:
        echo "Applying Mac OS X hack -- deleting and reinstalling libpari.a ..."
        rm -f Odarwin-ppc/*lib*
        $MAKE install-lib-sta
        if [ $? -ne 0 ]; then
            echo >&2 "Error reinstalling PARI's static libraries (OS X trick)"
            exit 1
        fi

        cd "`config/objdir`" && cp -f libpari* "$SAGE_LOCAL/lib"
        if [ $? -ne 0 ]; then
            echo >&2 "Error copying PARI's libraries (OS X trick)"
            exit 1
        fi
        cd "$CUR"
    fi
```
So we use the copy from the build directory in SAGE_LOCAL/lib. But when when you do "make install" pari actually rebuilds libpari{,-gmp}.dylib in the install location (modulo DESTDIR if it is defined) with the correct install_name. But spkg-install throw all that away and uses a copy without any install_name set.

Unless someone can explain to me what this hack is all about, I think its removal should have a bug of its own on trac.



---

archive/issue_comments_203594.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@kiwifb](#comment%3A42):\n> Going back to pari :) the install_name problem is all sage's spkg-install fault.\n\nDoesn't really surprise me... B)\n\n\n\n\n> Unless someone can explain to me what this hack is all about, I think its removal should have a bug of its own on trac.\n\nYou may have to ask the BDFL; that \"hack\" is historically pre-Mercurial, apparently.",
    "created_at": "2014-04-01T22:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203594",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@kiwifb](#comment%3A42):
> Going back to pari :) the install_name problem is all sage's spkg-install fault.

Doesn't really surprise me... B)




> Unless someone can explain to me what this hack is all about, I think its removal should have a bug of its own on trac.

You may have to ask the BDFL; that "hack" is historically pre-Mercurial, apparently.



---

archive/issue_comments_203595.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI'll try to figure the new workflow and submit an update for flint.",
    "created_at": "2014-04-01T23:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203595",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

I'll try to figure the new workflow and submit an update for flint.



---

archive/issue_comments_203596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,8 @@\n \n On Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.\n \n+We can solve this by upgrading flint to 2.4.3 which includes the necessary fix.\n+\n+New sources:\n+* [http://www.flintlib.org/flint-2.4.3.tar.gz](http://www.flintlib.org/flint-2.4.3.tar.gz)\n+\n``````\n",
    "created_at": "2014-04-01T23:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203596",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,8 @@
 
 On Darwin 10 (MacOS X 10.6) and later, apparently the linker is smarter (or more tolerant), and does find the indirectly used libraries in `$SAGE_LOCAL/lib/`, despite their wrong `install_name`s.
 
+We can solve this by upgrading flint to 2.4.3 which includes the necessary fix.
+
+New sources:
+* [http://www.flintlib.org/flint-2.4.3.tar.gz](http://www.flintlib.org/flint-2.4.3.tar.gz)
+
``````




---

archive/issue_comments_203597.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@kiwifb](#comment%3A39):\n> Other libs without a proper install_name:\n> * libLfunction.dylib (lcalc)\n> * libcliquer.dylib\n> * polybori's libraries are strange, possibly bad substitution\n> * libzn_poly.dylib (zn_poly)\n> * libcsage.dylib :) moving to autotools would solve that\n> \n\nAnd apparently the R dylibs as well - see #16044, and of course fbissey and leif discovered these too :)",
    "created_at": "2014-04-02T02:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203597",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@kiwifb](#comment%3A39):
> Other libs without a proper install_name:
> * libLfunction.dylib (lcalc)
> * libcliquer.dylib
> * polybori's libraries are strange, possibly bad substitution
> * libzn_poly.dylib (zn_poly)
> * libcsage.dylib :) moving to autotools would solve that
> 

And apparently the R dylibs as well - see #16044, and of course fbissey and leif discovered these too :)



---

archive/issue_comments_203598.json:
```json
{
    "body": "Branch: **[u/fbissey/flint2.4.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/flint2.4.3)**",
    "created_at": "2014-04-02T10:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203598",
    "user": "https://github.com/kiwifb"
}
```

Branch: **[u/fbissey/flint2.4.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/flint2.4.3)**



---

archive/issue_comments_203599.json:
```json
{
    "body": "Commit: **[`d86fecf`](https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e)**",
    "created_at": "2014-04-02T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203599",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`d86fecf`](https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e)**



---

archive/issue_comments_203600.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e\"><code>d86fecf</code></a></td><td><code>trivial version bump for trac 16017</code></td></tr></table>\n",
    "created_at": "2014-04-02T10:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203600",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e"><code>d86fecf</code></a></td><td><code>trivial version bump for trac 16017</code></td></tr></table>




---

archive/issue_comments_203601.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2014-04-02T10:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203601",
    "user": "https://github.com/kiwifb"
}
```

Author: **Fran√ßois Bissey**



---

archive/issue_events_226525.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-04-02T10:41:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226525"
}
```



---

archive/issue_comments_203602.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2014-04-02T14:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203602",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_203603.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nFrom my point of view this is fine - [upstream](https://github.com/wbhart/flint2/commits/trunk) does seem to have a couple other changes since the previous release so it seems good to test this on a few other machines just in case there is some problem.   But presumably those problems would also be problems elsewhere.",
    "created_at": "2014-04-02T14:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203603",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:49" align="right">comment:49</div>

From my point of view this is fine - [upstream](https://github.com/wbhart/flint2/commits/trunk) does seem to have a couple other changes since the previous release so it seems good to test this on a few other machines just in case there is some problem.   But presumably those problems would also be problems elsewhere.



---

archive/issue_comments_203604.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nRight. I haven't run doctests against it yet so I will. I am putting this back to \"need work\" because I forgot to generate the checksum :(",
    "created_at": "2014-04-02T17:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203604",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:50" align="right">comment:50</div>

Right. I haven't run doctests against it yet so I will. I am putting this back to "need work" because I forgot to generate the checksum :(



---

archive/issue_events_226526.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-04-02T17:35:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226526"
}
```



---

archive/issue_events_226527.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-04-02T17:35:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226527"
}
```



---

archive/issue_comments_203605.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nSo... will this fix be non-movable?  (I.e., on any platform, on this one...) See [leif's comment](https://github.com/sagemath/sage/issues/16044#comment:1) on #16044.",
    "created_at": "2014-04-02T18:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203605",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:51" align="right">comment:51</div>

So... will this fix be non-movable?  (I.e., on any platform, on this one...) See [leif's comment](https://github.com/sagemath/sage/issues/16044#comment:1) on #16044.



---

archive/issue_comments_203606.json:
```json
{
    "body": "Changed commit from **[`d86fecf`](https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e)** to **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**",
    "created_at": "2014-04-03T10:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203606",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d86fecf`](https://github.com/sagemath/sagetrac-mirror/commit/d86fecf3ea6fd24058aeeedcdf667224d64d625e)** to **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**



---

archive/issue_comments_203607.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e\"><code>6c25897</code></a></td><td><code>checksums!</code></td></tr></table>\n",
    "created_at": "2014-04-03T10:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e"><code>6c25897</code></a></td><td><code>checksums!</code></td></tr></table>




---

archive/issue_comments_203608.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@kcrisman](#comment%3A51):\n> So... will this fix be non-movable?  (I.e., on any platform, on this one...) See [leif's comment](https://github.com/sagemath/sage/issues/16044#comment:1) on #16044.\n\nBasically yes, unless we find variables that overrides the install_names effectively. Note that once your install is moved, if we find variables overrides to make it work, you'll probably be screwed if you try to upgrade in the new location. \n\nOn linux LD_LIBRARY_PATH is a very effective override to anything you put in an elf, so regardless of Volker's comment about dangling rpath they are screened by LD_LIBRARY_PATH. Even on linux upgrading in the new location is probably leaving a mess behind, but LD_LIBRARY_PATH is a good safety blanket most of the time.\n\nPutting this for review now that I have put the checksums.",
    "created_at": "2014-04-03T10:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203608",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@kcrisman](#comment%3A51):
> So... will this fix be non-movable?  (I.e., on any platform, on this one...) See [leif's comment](https://github.com/sagemath/sage/issues/16044#comment:1) on #16044.

Basically yes, unless we find variables that overrides the install_names effectively. Note that once your install is moved, if we find variables overrides to make it work, you'll probably be screwed if you try to upgrade in the new location. 

On linux LD_LIBRARY_PATH is a very effective override to anything you put in an elf, so regardless of Volker's comment about dangling rpath they are screened by LD_LIBRARY_PATH. Even on linux upgrading in the new location is probably leaving a mess behind, but LD_LIBRARY_PATH is a good safety blanket most of the time.

Putting this for review now that I have put the checksums.



---

archive/issue_events_226528.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-04-03T10:21:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226528"
}
```



---

archive/issue_events_226529.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-04-03T10:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226529"
}
```



---

archive/issue_comments_203609.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nHmm, I don't know if I like that.  I'd at least want to see what happened here.  How will relocation issues be a problem with people downloading binaries?  (I assume this change in flint would cause problems for all Mac platforms, not just ours, since the extra flag and hence full name comes in on all Darwin, not just this Darwin 8, based on the patch.)",
    "created_at": "2014-04-03T14:50:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203609",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:54" align="right">comment:54</div>

Hmm, I don't know if I like that.  I'd at least want to see what happened here.  How will relocation issues be a problem with people downloading binaries?  (I assume this change in flint would cause problems for all Mac platforms, not just ours, since the extra flag and hence full name comes in on all Darwin, not just this Darwin 8, based on the patch.)



---

archive/issue_comments_203610.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@kcrisman](#comment%3A54):\n> How will relocation issues be a problem with people downloading binaries?\n> (I assume this change in flint would cause problems for all Mac platforms, not just ours, since the extra flag and hence full name comes in on all Darwin, not just this Darwin 8, based on the patch.)\n\nFor FLINT and w.r.t. relocating Sage, the patch would only (effectively) make a difference on MacOS X 10.4.\n\nIf relocation is (at least partially) broken on Darwin anyway, the change doesn't make a difference to the others, i.e., it doesn't really worsen the situation.\n\nOn Darwin, we have absolute paths in (most of) all other libraries already; fixing that is subject of another ticket I'd say.\n\n\n\n\nDisclaimer:  I don't know at all what the Mac **app** currently does; but if it behaves differently, I'd rather expect it to be *smarter* w.r.t. \"relocation\".",
    "created_at": "2014-04-03T15:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203610",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@kcrisman](#comment%3A54):
> How will relocation issues be a problem with people downloading binaries?
> (I assume this change in flint would cause problems for all Mac platforms, not just ours, since the extra flag and hence full name comes in on all Darwin, not just this Darwin 8, based on the patch.)

For FLINT and w.r.t. relocating Sage, the patch would only (effectively) make a difference on MacOS X 10.4.

If relocation is (at least partially) broken on Darwin anyway, the change doesn't make a difference to the others, i.e., it doesn't really worsen the situation.

On Darwin, we have absolute paths in (most of) all other libraries already; fixing that is subject of another ticket I'd say.




Disclaimer:  I don't know at all what the Mac **app** currently does; but if it behaves differently, I'd rather expect it to be *smarter* w.r.t. "relocation".



---

archive/issue_comments_203611.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAccording to http://wiki.sagemath.org/SupportedPlatforms the Mac App doesn't work at all on OSX 10.4",
    "created_at": "2014-04-03T15:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203611",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:56" align="right">comment:56</div>

According to http://wiki.sagemath.org/SupportedPlatforms the Mac App doesn't work at all on OSX 10.4



---

archive/issue_comments_203612.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@nexttime](#comment%3A55):\n> If relocation is (at least partially) broken on Darwin anyway, the change doesn't make a difference to the others, i.e., it doesn't really worsen the situation.\n> \n> On Darwin, we have absolute paths in (most of) all other libraries already; fixing that is subject of another ticket I'd say.\n\nWays to go (not excluding each other):\n\n* Putting Sage's library folders into `DYLD_FALLBACK_LIBRARY_PATH`; rather a work-around (not to say hack).\n\n* Rewriting all dylibs in `sage-location` (*adjusting* all absolute paths / `install_name`s).  (Raises the question whether `install_name_tool` is available \"by default\", i.e., at least shipped with something (e.g. XCode?) Sage requires anyway, for ordinary as opposed to development use.  And the lengths of the new filenames might be an issue.)\n\n* Using relative paths in `install_name`s (presumably `@loader_path/...`).  This could be done (just) in `sage-location` or some other post-inst hook as well, in the long run (also) changing build scripts (or just settings) and presumably patching a couple of upstream packages.\n\n---\n\n*Ads by G!**gle*\n\nBuy the [compiler wrapper](https://bitbucket.org/vbraun/compilerwrapper) NOW!!!",
    "created_at": "2014-04-03T15:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203612",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@nexttime](#comment%3A55):
> If relocation is (at least partially) broken on Darwin anyway, the change doesn't make a difference to the others, i.e., it doesn't really worsen the situation.
> 
> On Darwin, we have absolute paths in (most of) all other libraries already; fixing that is subject of another ticket I'd say.

Ways to go (not excluding each other):

* Putting Sage's library folders into `DYLD_FALLBACK_LIBRARY_PATH`; rather a work-around (not to say hack).

* Rewriting all dylibs in `sage-location` (*adjusting* all absolute paths / `install_name`s).  (Raises the question whether `install_name_tool` is available "by default", i.e., at least shipped with something (e.g. XCode?) Sage requires anyway, for ordinary as opposed to development use.  And the lengths of the new filenames might be an issue.)

* Using relative paths in `install_name`s (presumably `@loader_path/...`).  This could be done (just) in `sage-location` or some other post-inst hook as well, in the long run (also) changing build scripts (or just settings) and presumably patching a couple of upstream packages.

---

*Ads by G!**gle*

Buy the [compiler wrapper](https://bitbucket.org/vbraun/compilerwrapper) NOW!!!



---

archive/issue_comments_203613.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\n> According to http://wiki.sagemath.org/SupportedPlatforms the Mac App doesn't work at all on OSX 10.4\n\nHuh, that surprises me.  There is one built, anyway, and distributed via the mirrors for 5.13.  I can check that later - it should still work okay.",
    "created_at": "2014-04-03T18:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203613",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:58" align="right">comment:58</div>

> According to http://wiki.sagemath.org/SupportedPlatforms the Mac App doesn't work at all on OSX 10.4

Huh, that surprises me.  There is one built, anyway, and distributed via the mirrors for 5.13.  I can check that later - it should still work okay.



---

archive/issue_events_226530.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T17:31:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226530"
}
```



---

archive/issue_events_226531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T17:31:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226531"
}
```



---

archive/issue_comments_203614.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Volker Braun**",
    "created_at": "2014-04-07T17:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203614",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Karl-Dieter Crisman** to **Karl-Dieter Crisman, Volker Braun**



---

archive/issue_comments_203615.json:
```json
{
    "body": "Changed branch from **[u/fbissey/flint2.4.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/flint2.4.3)** to **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**",
    "created_at": "2014-04-07T19:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16017#issuecomment-203615",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/flint2.4.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/flint2.4.3)** to **[`6c25897`](https://github.com/sagemath/sagetrac-mirror/commit/6c25897014779846c65035baca4b0110bf6a056e)**



---

archive/issue_events_226532.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T19:09:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226532"
}
```



---

archive/issue_events_226533.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "402ca5a5ebec9aadd0e02a7148b3c4cd80b3f855",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-04-07T19:09:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16017",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16017#event-226533"
}
```
