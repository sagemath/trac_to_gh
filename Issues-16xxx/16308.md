# Issue 16308: Improve sums of squares

archive/issues_016071.json:
```json
{
    "assignees": [],
    "body": "This ticket will:\n- add a Sage implementation of writing a number as a sum of 2 squares\n- add a Sage implementation of writing a number as a sum of 3 squares\n- add a Sage implementation of writing a number as a sum of 4 squares\n- add a Sage implementation of writing a number as a sum of `k` squares for any `k`\n\nfollow up: #16374\n\nCC:  @nathanncohen @kcrisman @videlec\n\nBranch/Commit: **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**\n\nReviewer: **Peter Bruin, Leif Leonhardy , Vincent Delecroix**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16308_\n\n",
    "closed_at": "2014-06-26T19:37:47Z",
    "created_at": "2014-05-08T09:28:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve sums of squares",
    "type": "issue",
    "updated_at": "2014-06-26T19:37:47Z",
    "url": "https://github.com/sagemath/sage/issues/16308",
    "user": "https://github.com/jdemeyer"
}
```
This ticket will:
- add a Sage implementation of writing a number as a sum of 2 squares
- add a Sage implementation of writing a number as a sum of 3 squares
- add a Sage implementation of writing a number as a sum of 4 squares
- add a Sage implementation of writing a number as a sum of `k` squares for any `k`

follow up: #16374

CC:  @nathanncohen @kcrisman @videlec

Branch/Commit: **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**

Reviewer: **Peter Bruin, Leif Leonhardy , Vincent Delecroix**

Author: **Jeroen Demeyer**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/16308_





---

archive/issue_events_232956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-05-08T09:28:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232956"
}
```



---

archive/issue_events_232957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-05-08T09:28:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232957"
}
```



---

archive/issue_events_232958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-05-08T09:28:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232958"
}
```



---

archive/issue_events_232959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-05-08T09:28:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232959"
}
```



---

archive/issue_comments_209546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n Writing an integer as sum of N squares.\n+\n+There are various questions:\n+- Is it possible to write an integer *n* as a sum of *k* squares?\n+- What is the number of ways in which one can do this?\n+- Find a solution if there exists one.\n+\n``````\n",
    "created_at": "2014-05-08T09:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209546",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
 Writing an integer as sum of N squares.
+
+There are various questions:
+- Is it possible to write an integer *n* as a sum of *k* squares?
+- What is the number of ways in which one can do this?
+- Find a solution if there exists one.
+
``````




---

archive/issue_events_232960.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-08T09:53:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232960"
}
```



---

archive/issue_events_232961.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-05-08T09:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232961"
}
```



---

archive/issue_comments_209547.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n-Writing an integer as sum of N squares.\n+Writing an integer as sum of k squares.\n \n-There are various questions:\n-- Is it possible to write an integer *n* as a sum of *k* squares?\n-- What is the number of ways in which one can do this?\n-- Find a solution if there exists one.\n-\n+This ticket will:\n+- add a Sage implementation of writing a number as a sum of 2 squares\n+- add a Sage implementation of writing a number as a sum of 3 squares\n+- add a Sage implementation of writing a number as a sum of k squares for any k >= 4\n``````\n",
    "created_at": "2014-05-08T10:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209547",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
-Writing an integer as sum of N squares.
+Writing an integer as sum of k squares.
 
-There are various questions:
-- Is it possible to write an integer *n* as a sum of *k* squares?
-- What is the number of ways in which one can do this?
-- Find a solution if there exists one.
-
+This ticket will:
+- add a Sage implementation of writing a number as a sum of 2 squares
+- add a Sage implementation of writing a number as a sum of 3 squares
+- add a Sage implementation of writing a number as a sum of k squares for any k >= 4
``````




---

archive/issue_comments_209548.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,5 @@\n-Writing an integer as sum of k squares.\n-\n This ticket will:\n - add a Sage implementation of writing a number as a sum of 2 squares\n - add a Sage implementation of writing a number as a sum of 3 squares\n-- add a Sage implementation of writing a number as a sum of k squares for any k >= 4\n+- add a Sage implementation of writing a number as a sum of 4 squares\n+- add a Sage implementation of writing a number as a sum of `k` squares for any `k`\n``````\n",
    "created_at": "2014-05-08T13:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209548",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,5 @@
-Writing an integer as sum of k squares.
-
 This ticket will:
 - add a Sage implementation of writing a number as a sum of 2 squares
 - add a Sage implementation of writing a number as a sum of 3 squares
-- add a Sage implementation of writing a number as a sum of k squares for any k >= 4
+- add a Sage implementation of writing a number as a sum of 4 squares
+- add a Sage implementation of writing a number as a sum of `k` squares for any `k`
``````




---

archive/issue_comments_209549.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jdemeyer](#comment:2):\n\nOK, I should have written a comment to ask what the idea was instead of adding possible interpretations to the description.  Given that your name is in the Author field, are you working on this?",
    "created_at": "2014-05-08T13:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209549",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jdemeyer](#comment:2):

OK, I should have written a comment to ask what the idea was instead of adding possible interpretations to the description.  Given that your name is in the Author field, are you working on this?



---

archive/issue_comments_209550.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nDefine \"number\".",
    "created_at": "2014-05-08T14:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209550",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

Define "number".



---

archive/issue_comments_209551.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nexttime](#comment:6):\n> Define \"number\".\n\nElement of `ZZ`.",
    "created_at": "2014-05-08T15:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209551",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nexttime](#comment:6):
> Define "number".

Element of `ZZ`.



---

archive/issue_comments_209552.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)**",
    "created_at": "2014-05-08T16:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209552",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)**



---

archive/issue_comments_209553.json:
```json
{
    "body": "Commit: **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)**",
    "created_at": "2014-05-08T16:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209553",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)**



---

archive/issue_events_232962.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-05-08T16:15:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232962"
}
```



---

archive/issue_comments_209554.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9\">6b94a65</a></td><td><code>Improve sums of squares of integers</code></td></tr></table>\n",
    "created_at": "2014-05-08T16:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209554",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9">6b94a65</a></td><td><code>Improve sums of squares of integers</code></td></tr></table>




---

archive/issue_comments_209555.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIt is embarrassing to say so, but for many examples, the old GAP code is actually faster. The reason seems to be that GAP beats PARI on factoring small numbers (which is a big surprise to me!). But GAP doesn't support large numbers:\n\n```\nsage: two_squares(3^100+1)\nRuntimeError: Gap produced error output\nError, sorry,  cannot factor [ 1109667565348268894775749972955601 ]\ntype 'return;' to try again with a larger number of trials in\nFactorsRho (or use option 'RhoTrials')\n\n\n   executing TwoSquares(515377520732011331036461129765621272702107522002);\n\n```",
    "created_at": "2014-05-08T16:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209555",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

It is embarrassing to say so, but for many examples, the old GAP code is actually faster. The reason seems to be that GAP beats PARI on factoring small numbers (which is a big surprise to me!). But GAP doesn't support large numbers:

```
sage: two_squares(3^100+1)
RuntimeError: Gap produced error output
Error, sorry,  cannot factor [ 1109667565348268894775749972955601 ]
type 'return;' to try again with a larger number of trials in
FactorsRho (or use option 'RhoTrials')


   executing TwoSquares(515377520732011331036461129765621272702107522002);

```



---

archive/issue_comments_209556.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nGAP is amazing:\n\n```\nsage: timeit('libgap(19180172397815991981).FactorsInt()', number=1000, repeat=10)\n1000 loops, best of 10: 103 \u00b5s per loop\nsage: timeit('pari(19180172397815991981).factor(proof=False)', number=1000, repeat=10)\n1000 loops, best of 10: 2.43 ms per loop\n```",
    "created_at": "2014-05-08T16:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209556",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

GAP is amazing:

```
sage: timeit('libgap(19180172397815991981).FactorsInt()', number=1000, repeat=10)
1000 loops, best of 10: 103 µs per loop
sage: timeit('pari(19180172397815991981).factor(proof=False)', number=1000, repeat=10)
1000 loops, best of 10: 2.43 ms per loop
```



---

archive/issue_comments_209557.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nInteresting...  Since this code is probably not the place where Sage should have to make a decision about which factoring algorithm to use, it looks tempting to use `Integer.factor()` instead of `pari.factor()` and spend some effort on #1145.  (And possibly add support for `algorithm=gap` in `Integer.factor()` if it is worthwhile?)",
    "created_at": "2014-05-08T16:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209557",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

Interesting...  Since this code is probably not the place where Sage should have to make a decision about which factoring algorithm to use, it looks tempting to use `Integer.factor()` instead of `pari.factor()` and spend some effort on #1145.  (And possibly add support for `algorithm=gap` in `Integer.factor()` if it is worthwhile?)



---

archive/issue_comments_209558.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnd I'd still support the `algorithm` keyword...\n\nDoes make returning `(a,b)` with a (or b) zero any sense?",
    "created_at": "2014-05-08T16:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209558",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

And I'd still support the `algorithm` keyword...

Does make returning `(a,b)` with a (or b) zero any sense?



---

archive/issue_comments_209559.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nexttime](#comment:13):\n> Does make returning `(a,b)` with a (or b) zero any sense?\n\nTo be more precise, IMHO both a and b should be < n<sup>1/2</sup> (for `two_squares()`).\n\nI don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.",
    "created_at": "2014-05-08T17:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209559",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nexttime](#comment:13):
> Does make returning `(a,b)` with a (or b) zero any sense?

To be more precise, IMHO both a and b should be < n<sup>1/2</sup> (for `two_squares()`).

I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.



---

archive/issue_comments_209560.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n(GAP apparently only returns (0,sqrt(n)) if there is no other solution, with sqrt(n) integer of course.)",
    "created_at": "2014-05-08T17:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209560",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

(GAP apparently only returns (0,sqrt(n)) if there is no other solution, with sqrt(n) integer of course.)



---

archive/issue_comments_209561.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> I don't think anybody would expect e.g. two_squares(25) to return the trivial solution (0,5) instead of (3,4).\n\nHmm, well that IS a solution.  And if you want to use it to approximate the value of pi, you need all of them (though this one in any case wouldn't give negative solutions).",
    "created_at": "2014-05-08T17:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209561",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

> I don't think anybody would expect e.g. two_squares(25) to return the trivial solution (0,5) instead of (3,4).

Hmm, well that IS a solution.  And if you want to use it to approximate the value of pi, you need all of them (though this one in any case wouldn't give negative solutions).



---

archive/issue_comments_209562.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@kcrisman](#comment:16):\n> > I don't think anybody would expect e.g. two_squares(25) to return the trivial solution (0,5) instead of (3,4).\n\n> Hmm, well that IS a solution.\n\nDepends on the definition of two_squares(); the previous one in Sage was pretty vague.",
    "created_at": "2014-05-08T18:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209562",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@kcrisman](#comment:16):
> > I don't think anybody would expect e.g. two_squares(25) to return the trivial solution (0,5) instead of (3,4).

> Hmm, well that IS a solution.

Depends on the definition of two_squares(); the previous one in Sage was pretty vague.



---

archive/issue_comments_209563.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@nexttime](#comment:14):\n> I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.\n\nFrom a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the \"trivial\" one, for example for 9.",
    "created_at": "2014-05-08T19:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209563",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@nexttime](#comment:14):
> I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.

From a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the "trivial" one, for example for 9.



---

archive/issue_comments_209564.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@pjbruin](#comment:12):\n> Interesting...  Since this code is probably not the place where Sage should have to make a decision about which factoring algorithm to use, it looks tempting to use `Integer.factor()` instead of `pari.factor()`\n\nI guess you're right, but I decided to do everything in PARI for speed, also with the idea that the code could be changed to use direct calls to the PARI library if needed.",
    "created_at": "2014-05-08T19:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209564",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@pjbruin](#comment:12):
> Interesting...  Since this code is probably not the place where Sage should have to make a decision about which factoring algorithm to use, it looks tempting to use `Integer.factor()` instead of `pari.factor()`

I guess you're right, but I decided to do everything in PARI for speed, also with the idea that the code could be changed to use direct calls to the PARI library if needed.



---

archive/issue_comments_209565.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jdemeyer](#comment:18):\n> Replying to [@nexttime](#comment:14):\n> > I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.\n\n> \n> From a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the \"trivial\" one, for example for 9.\n\nAs mentioned, depends on how you specify two_squares().\n\nFrom a user perspective, I think there should be some optional argument `no_trivial_solutions`, as feeding the function with perfect squares otherwise doesn't make much sense.",
    "created_at": "2014-05-08T19:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209565",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jdemeyer](#comment:18):
> Replying to [@nexttime](#comment:14):
> > I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.

> 
> From a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the "trivial" one, for example for 9.

As mentioned, depends on how you specify two_squares().

From a user perspective, I think there should be some optional argument `no_trivial_solutions`, as feeding the function with perfect squares otherwise doesn't make much sense.



---

archive/issue_comments_209566.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nexttime](#comment:20):\n> as feeding the function with perfect squares otherwise doesn't make much sense.\n\nDepends on your application...\n\nAnyway, if people really care about non-trivial solutions, let those people implement such a flag, I'm not going to do it.",
    "created_at": "2014-05-08T20:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209566",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nexttime](#comment:20):
> as feeding the function with perfect squares otherwise doesn't make much sense.

Depends on your application...

Anyway, if people really care about non-trivial solutions, let those people implement such a flag, I'm not going to do it.



---

archive/issue_comments_209567.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment:18):\n> Replying to [@nexttime](#comment:14):\n> > I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.\n\n> \n> From a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the \"trivial\" one, for example for 9.\n\nI agree.  Given that 0 is a square, it makes complete sense to allow it as a term in a sum of squares.  That convention makes a lot of things nicer, for example:\n- every square is also a sum of two squares, and more generally every sum of *k* squares is also a sum of *k* + 1 squares;\n- *n* is a sum of 2 squares if and only if *n* can be factored non-trivially in **Z**[*i*];\n- *n* is a sum of *k* squares if and only if the lattice **Z**<sup>*k*</sup> has a point of squared distance *n* from the origin.\nThere are also nice formulae for the number of ways to write *n* as a sum of *k* squares if you interpret this number as the number of points (*x*<sub>1</sub> , ... , *x*<sub>k</sub>) in **Z**<sup>*k*</sup> with *x*<sub>1</sub><sup>2</sup> + ... + *x<sub>k</sub>*<sup>2</sup> = *n*.",
    "created_at": "2014-05-08T20:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209567",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment:18):
> Replying to [@nexttime](#comment:14):
> > I don't think anybody would expect e.g. `two_squares(25)` to return the trivial solution `(0,5)` instead of `(3,4)`.

> 
> From a number-theory point of view, there is nothing wrong with `(0,5)`. In fact, in some cases, the only solution is the "trivial" one, for example for 9.

I agree.  Given that 0 is a square, it makes complete sense to allow it as a term in a sum of squares.  That convention makes a lot of things nicer, for example:
- every square is also a sum of two squares, and more generally every sum of *k* squares is also a sum of *k* + 1 squares;
- *n* is a sum of 2 squares if and only if *n* can be factored non-trivially in **Z**[*i*];
- *n* is a sum of *k* squares if and only if the lattice **Z**<sup>*k*</sup> has a point of squared distance *n* from the origin.
There are also nice formulae for the number of ways to write *n* as a sum of *k* squares if you interpret this number as the number of points (*x*<sub>1</sub> , ... , *x*<sub>k</sub>) in **Z**<sup>*k*</sup> with *x*<sub>1</sub><sup>2</sup> + ... + *x<sub>k</sub>*<sup>2</sup> = *n*.



---

archive/issue_comments_209568.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment:21):\n> Anyway, if people really care about non-trivial solutions, let those people implement such a flag, I'm not going to do it.\n\n`algorithm=\"gap\"`?\n\nWe'd need that for backwards compatibility anyway, besides that you said GAP is faster (in factoring at least) for some (which kind of?) inputs.",
    "created_at": "2014-05-08T20:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209568",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment:21):
> Anyway, if people really care about non-trivial solutions, let those people implement such a flag, I'm not going to do it.

`algorithm="gap"`?

We'd need that for backwards compatibility anyway, besides that you said GAP is faster (in factoring at least) for some (which kind of?) inputs.



---

archive/issue_comments_209569.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHi there,\n\nFor very small integers (<500) a naive cython implementation is **much** faster (at least x100)... as this was the initial purpose of Nathann I make the remark here.\n\n```\ndef two_squares_pyx(int n):\n    cdef int i,ii,j,nn\n    if n < 2:\n        return True\n\n    i = ii = 0\n    while ii < n:\n        j = 0\n        while j <= i:\n            nn = ii + j*j\n            if nn >= n:\n                break\n            j += 1\n\n        if nn == n:\n            return (i,j)\n\n        i += 1\n        ii = i*i\n\n    raise ValueError(\"%d is not the sum of 2 squares\"%n)\n```\nthen\n\n```\nsage: %timeit two_squares(37)\n10000 loops, best of 3: 108 \u00b5s per loop\nsage: %timeit two_squares_pyx(37)\n1000000 loops, best of 3: 464 ns per loop\n\nsage: %timeit two_squares(97)\n10000 loops, best of 3: 185 \u00b5s per loop\nsage: %timeit two_squares_pyx(97)\n1000000 loops, best of 3: 558 ns per loop\n\nsage: %timeit two_squares(212)\n10000 loops, best of 3: 130 \u00b5s per loop\nsage: %timeit two_squares_pyx(212)\n1000000 loops, best of 3: 734 ns per loop\n\nsage: %timeit two_squares(500)\n10000 loops, best of 3: 131 \u00b5s per loop\nsage: %timeit two_squares_pyx(500)\n1000000 loops, best of 3: 1 \u00b5s per loop\n```\n\nWhat do you think of using it for entries < 500?\n\nVincent",
    "created_at": "2014-05-08T21:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209569",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Hi there,

For very small integers (<500) a naive cython implementation is **much** faster (at least x100)... as this was the initial purpose of Nathann I make the remark here.

```
def two_squares_pyx(int n):
    cdef int i,ii,j,nn
    if n < 2:
        return True

    i = ii = 0
    while ii < n:
        j = 0
        while j <= i:
            nn = ii + j*j
            if nn >= n:
                break
            j += 1

        if nn == n:
            return (i,j)

        i += 1
        ii = i*i

    raise ValueError("%d is not the sum of 2 squares"%n)
```
then

```
sage: %timeit two_squares(37)
10000 loops, best of 3: 108 µs per loop
sage: %timeit two_squares_pyx(37)
1000000 loops, best of 3: 464 ns per loop

sage: %timeit two_squares(97)
10000 loops, best of 3: 185 µs per loop
sage: %timeit two_squares_pyx(97)
1000000 loops, best of 3: 558 ns per loop

sage: %timeit two_squares(212)
10000 loops, best of 3: 130 µs per loop
sage: %timeit two_squares_pyx(212)
1000000 loops, best of 3: 734 ns per loop

sage: %timeit two_squares(500)
10000 loops, best of 3: 131 µs per loop
sage: %timeit two_squares_pyx(500)
1000000 loops, best of 3: 1 µs per loop
```

What do you think of using it for entries < 500?

Vincent



---

archive/issue_comments_209570.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n(and the Cython version can even be improved)",
    "created_at": "2014-05-08T21:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209570",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

(and the Cython version can even be improved)



---

archive/issue_comments_209571.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI was hoping someone would do this.\n\nI agree with pbruin, though of course this is not the same function as \"number of ways to write as two squares\" or \"all ways to write as sum of two squares\".  This is what happens when we \"unwrap\" :-)",
    "created_at": "2014-05-09T01:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209571",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">comment:27</div>

I was hoping someone would do this.

I agree with pbruin, though of course this is not the same function as "number of ways to write as two squares" or "all ways to write as sum of two squares".  This is what happens when we "unwrap" :-)



---

archive/issue_comments_209572.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@videlec](#comment:25):\n> \n> ```\n> def two_squares_pyx(int n):\n>     cdef int i,ii,j,nn\n>     if n < 2:\n>         return True\n> \n>     i = ii = 0\n>     while ii < n:\n>         j = 0\n>         while j <= i:\n>             nn = ii + j*j\n>             if nn >= n:\n>                 break\n>             j += 1\n> \n>         if nn == n:\n>             return (i,j)\n> \n>         i += 1\n>         ii = i*i\n> \n>     raise ValueError(\"%d is not the sum of 2 squares\"%n)\n> ```\n\nMinor correction: `while ii <= n` (such that we get \"trivial\" solutions with `j==0` as well).  Also, I'd swap i and j, or `return (j,i)`.",
    "created_at": "2014-05-09T01:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209572",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@videlec](#comment:25):
> 
> ```
> def two_squares_pyx(int n):
>     cdef int i,ii,j,nn
>     if n < 2:
>         return True
> 
>     i = ii = 0
>     while ii < n:
>         j = 0
>         while j <= i:
>             nn = ii + j*j
>             if nn >= n:
>                 break
>             j += 1
> 
>         if nn == n:
>             return (i,j)
> 
>         i += 1
>         ii = i*i
> 
>     raise ValueError("%d is not the sum of 2 squares"%n)
> ```

Minor correction: `while ii <= n` (such that we get "trivial" solutions with `j==0` as well).  Also, I'd swap i and j, or `return (j,i)`.



---

archive/issue_comments_209573.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWell, I don't care much about `a==0` (a matter of definition, it's ok, and one usually has to treat zeroes differently anyway), but normally one isn't interested in a trivial solution, unless it's *the only one*, and if there's no way to get (or even get to know whether there is) a non-trivial solution [as well]...",
    "created_at": "2014-05-09T01:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209573",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:29" align="right">comment:29</div>

Well, I don't care much about `a==0` (a matter of definition, it's ok, and one usually has to treat zeroes differently anyway), but normally one isn't interested in a trivial solution, unless it's *the only one*, and if there's no way to get (or even get to know whether there is) a non-trivial solution [as well]...



---

archive/issue_comments_209574.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAnd feel free to implement a *different* function that returns *a list of* [all] solutions...",
    "created_at": "2014-05-09T01:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209574",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:30" align="right">comment:30</div>

And feel free to implement a *different* function that returns *a list of* [all] solutions...



---

archive/issue_comments_209575.json:
```json
{
    "body": "Changed commit from **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)** to **[`9b81872`](https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08)**",
    "created_at": "2014-05-15T20:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209575",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)** to **[`9b81872`](https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08)**



---

archive/issue_comments_209576.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nHello,\n\nI implemented what I said in Cython (i.e. `two_squares_pyx`, `three_squares_pyx` and `four_squares_pyx`). Timings are now much better for small values (but it also influences small values).\n\nBased on the timings below (with the old version), I put the threshold to 500 for the three functions. But if you have strong opinion for another threshold please tell me. \n\nThere are many comments, but is there somebody up for a review ?\n\nVincent\n\nTwo squares\n\n```\nsage: %timeit two_squares(101)\n10000 loops, best of 3: 94.5 \u00b5s per loop\nsage: %timeit two_squares_pyx(101)\n1000000 loops, best of 3: 780 ns per loop\n\nsage: timeit(\"try:\\n    two_squares(102)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 57.4 \u00b5s per loop\nsage: timeit(\"try:\\n    two_squares_pyx(102)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.4 \u00b5s per loop\n\nsage: %timeit two_squares(200)\n10000 loops, best of 3: 87.3 \u00b5s per loop\nsage: %timeit two_squares_pyx(200)\n1000000 loops, best of 3: 788 ns per loop\n\nsage: timeit(\"try:\\n    two_squares(201)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 39.6 \u00b5s per loop\nsage: timeit(\"try:\\n    two_squares_pyx(201)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.61 \u00b5s per loop\n\nsage: %timeit two_squares(305)\n10000 loops, best of 3: 158 \u00b5s per loop\nsage: %timeit two_squares_pyx(305)\n1000000 loops, best of 3: 998 ns per loop\n\nsage: timeit(\"try:\\n    two_squares(304)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 50.8 \u00b5s per loop\nsage: timeit(\"try:\\n    two_squares_pyx(304)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.71 \u00b5s per loop\n\nsage: %timeit two_squares(400)\n10000 loops, best of 3: 69.4 \u00b5s per loop\nsage: %timeit two_squares_pyx(400)\n1000000 loops, best of 3: 1.01 \u00b5s per loop\n\nsage: timeit(\"try:\\n    two_squares(402)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 57.5 \u00b5s per loop\nsage: timeit(\"try:\\n    two_squares_pyx(402)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.85 \u00b5s per loop\n\nsage: %timeit two_squares(500)\n10000 loops, best of 3: 119 \u00b5s per loop\nsage: %timeit two_squares_pyx(500)\n1000000 loops, best of 3: 1.18 \u00b5s per loop\n\nsage: timeit(\"try:\\n    two_squares(501)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 39.5 \u00b5s per loop\nsage: timeit(\"try:\\n    two_squares_pyx(501)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.76 \u00b5s per loop\n```\n\nThree squares\n\n```\nsage: %timeit three_squares(106)\n1000 loops, best of 3: 266 \u00b5s per loop\nsage: %timeit three_squares_pyx(106)\n1000000 loops, best of 3: 1.38 \u00b5s per loop\n\nsage: timeit(\"try:\\n    three_squares(103)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 52.2 \u00b5s per loop\nsage: timeit(\"try:\\n    three_squares_pyx(103)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 6.9 \u00b5s per loop\n\nsage: %timeit three_squares(200)\n1000 loops, best of 3: 205 \u00b5s per loop\nsage: %timeit three_squares_pyx(200)\n1000000 loops, best of 3: 1.81 \u00b5s per loop\n\nsage: timeit(\"try:\\n    three_squares(303)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 52.1 \u00b5s per loop\nsage: timeit(\"try:\\n    three_squares_pyx(303)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 9.24 \u00b5s per loop\n\nsage: %timeit three_squares(406)\n1000 loops, best of 3: 189 \u00b5s per loop\nsage: %timeit three_squares_pyx(406)\n100000 loops, best of 3: 3.46 \u00b5s per loop\n\nsage: timeit(\"try:\\n    three_squares(407)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 51.6 \u00b5s per loop\nsage: timeit(\"try:\\n    three_squares_pyx(407)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 10.5 \u00b5s per loop\n\nsage: %timeit three_squares(500)\n10000 loops, best of 3: 167 \u00b5s per loop\nsage: %timeit three_squares_pyx(500)\n100000 loops, best of 3: 3.89 \u00b5s per loop\n\nsage: timeit(\"try:\\n    three_squares(503)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 51.2 \u00b5s per loop\nsage: timeit(\"try:\\n    three_squares_pyx(503)\\nexcept ValueError:\\n    pass\")\n625 loops, best of 3: 10.7 \u00b5s per loop\n```\n\nFour squares\n\n```\nsage: %timeit four_squares(503)\n1000 loops, best of 3: 259 \u00b5s per loop\nsage: %timeit four_squares_pyx(503)\n100000 loops, best of 3: 13.5 \u00b5s per loop\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/616c606cf62a0f74a3f36a9cf86d6322c43c2d77\">616c606</a></td><td><code>trac #16308: cython version of x_squares</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08\">9b81872</a></td><td><code>trac #16308: add the file arith_pyx.pyx</code></td></tr></table>\n",
    "created_at": "2014-05-15T20:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209576",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Hello,

I implemented what I said in Cython (i.e. `two_squares_pyx`, `three_squares_pyx` and `four_squares_pyx`). Timings are now much better for small values (but it also influences small values).

Based on the timings below (with the old version), I put the threshold to 500 for the three functions. But if you have strong opinion for another threshold please tell me. 

There are many comments, but is there somebody up for a review ?

Vincent

Two squares

```
sage: %timeit two_squares(101)
10000 loops, best of 3: 94.5 µs per loop
sage: %timeit two_squares_pyx(101)
1000000 loops, best of 3: 780 ns per loop

sage: timeit("try:\n    two_squares(102)\nexcept ValueError:\n    pass")
625 loops, best of 3: 57.4 µs per loop
sage: timeit("try:\n    two_squares_pyx(102)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.4 µs per loop

sage: %timeit two_squares(200)
10000 loops, best of 3: 87.3 µs per loop
sage: %timeit two_squares_pyx(200)
1000000 loops, best of 3: 788 ns per loop

sage: timeit("try:\n    two_squares(201)\nexcept ValueError:\n    pass")
625 loops, best of 3: 39.6 µs per loop
sage: timeit("try:\n    two_squares_pyx(201)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.61 µs per loop

sage: %timeit two_squares(305)
10000 loops, best of 3: 158 µs per loop
sage: %timeit two_squares_pyx(305)
1000000 loops, best of 3: 998 ns per loop

sage: timeit("try:\n    two_squares(304)\nexcept ValueError:\n    pass")
625 loops, best of 3: 50.8 µs per loop
sage: timeit("try:\n    two_squares_pyx(304)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.71 µs per loop

sage: %timeit two_squares(400)
10000 loops, best of 3: 69.4 µs per loop
sage: %timeit two_squares_pyx(400)
1000000 loops, best of 3: 1.01 µs per loop

sage: timeit("try:\n    two_squares(402)\nexcept ValueError:\n    pass")
625 loops, best of 3: 57.5 µs per loop
sage: timeit("try:\n    two_squares_pyx(402)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.85 µs per loop

sage: %timeit two_squares(500)
10000 loops, best of 3: 119 µs per loop
sage: %timeit two_squares_pyx(500)
1000000 loops, best of 3: 1.18 µs per loop

sage: timeit("try:\n    two_squares(501)\nexcept ValueError:\n    pass")
625 loops, best of 3: 39.5 µs per loop
sage: timeit("try:\n    two_squares_pyx(501)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.76 µs per loop
```

Three squares

```
sage: %timeit three_squares(106)
1000 loops, best of 3: 266 µs per loop
sage: %timeit three_squares_pyx(106)
1000000 loops, best of 3: 1.38 µs per loop

sage: timeit("try:\n    three_squares(103)\nexcept ValueError:\n    pass")
625 loops, best of 3: 52.2 µs per loop
sage: timeit("try:\n    three_squares_pyx(103)\nexcept ValueError:\n    pass")
625 loops, best of 3: 6.9 µs per loop

sage: %timeit three_squares(200)
1000 loops, best of 3: 205 µs per loop
sage: %timeit three_squares_pyx(200)
1000000 loops, best of 3: 1.81 µs per loop

sage: timeit("try:\n    three_squares(303)\nexcept ValueError:\n    pass")
625 loops, best of 3: 52.1 µs per loop
sage: timeit("try:\n    three_squares_pyx(303)\nexcept ValueError:\n    pass")
625 loops, best of 3: 9.24 µs per loop

sage: %timeit three_squares(406)
1000 loops, best of 3: 189 µs per loop
sage: %timeit three_squares_pyx(406)
100000 loops, best of 3: 3.46 µs per loop

sage: timeit("try:\n    three_squares(407)\nexcept ValueError:\n    pass")
625 loops, best of 3: 51.6 µs per loop
sage: timeit("try:\n    three_squares_pyx(407)\nexcept ValueError:\n    pass")
625 loops, best of 3: 10.5 µs per loop

sage: %timeit three_squares(500)
10000 loops, best of 3: 167 µs per loop
sage: %timeit three_squares_pyx(500)
100000 loops, best of 3: 3.89 µs per loop

sage: timeit("try:\n    three_squares(503)\nexcept ValueError:\n    pass")
625 loops, best of 3: 51.2 µs per loop
sage: timeit("try:\n    three_squares_pyx(503)\nexcept ValueError:\n    pass")
625 loops, best of 3: 10.7 µs per loop
```

Four squares

```
sage: %timeit four_squares(503)
1000 loops, best of 3: 259 µs per loop
sage: %timeit four_squares_pyx(503)
100000 loops, best of 3: 13.5 µs per loop
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/616c606cf62a0f74a3f36a9cf86d6322c43c2d77">616c606</a></td><td><code>trac #16308: cython version of x_squares</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08">9b81872</a></td><td><code>trac #16308: add the file arith_pyx.pyx</code></td></tr></table>




---

archive/issue_comments_209577.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)** to **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)**",
    "created_at": "2014-05-15T20:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209577",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)** to **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)**



---

archive/issue_comments_209578.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Vincent Delecroix**",
    "created_at": "2014-05-15T20:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209578",
    "user": "https://github.com/videlec"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Vincent Delecroix**



---

archive/issue_comments_209579.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOf course, we can revert to the jeroen branch if my contribution seems useless...\n\nVincent",
    "created_at": "2014-05-15T21:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209579",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Of course, we can revert to the jeroen branch if my contribution seems useless...

Vincent



---

archive/issue_comments_209580.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)** to **[u/jeroen/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jeroen/ticket/16308)**",
    "created_at": "2014-05-15T22:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209580",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)** to **[u/jeroen/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jeroen/ticket/16308)**



---

archive/issue_comments_209581.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nHi,\n\nSorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308\n\nVincent",
    "created_at": "2014-05-15T22:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209581",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

Hi,

Sorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308

Vincent



---

archive/issue_comments_209582.json:
```json
{
    "body": "Changed commit from **[`9b81872`](https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08)** to none",
    "created_at": "2014-05-15T22:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209582",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`9b81872`](https://github.com/sagemath/sagetrac-mirror/commit/9b81872a5ff12ba45acbbc32a711c85f2fd58d08)** to none



---

archive/issue_comments_209583.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer, Vincent Delecroix** to **Jeroen Demeyer**",
    "created_at": "2014-05-15T22:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209583",
    "user": "https://github.com/videlec"
}
```

Changed author from **Jeroen Demeyer, Vincent Delecroix** to **Jeroen Demeyer**



---

archive/issue_comments_209584.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9\">6b94a65</a></td><td><code>Improve sums of squares of integers</code></td></tr></table>\n",
    "created_at": "2014-05-15T22:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209584",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9">6b94a65</a></td><td><code>Improve sums of squares of integers</code></td></tr></table>




---

archive/issue_comments_209585.json:
```json
{
    "body": "Changed branch from **[u/jeroen/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jeroen/ticket/16308)** to **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)**",
    "created_at": "2014-05-15T22:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209585",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jeroen/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jeroen/ticket/16308)** to **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)**



---

archive/issue_comments_209586.json:
```json
{
    "body": "Commit: **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)**",
    "created_at": "2014-05-15T22:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209586",
    "user": "https://github.com/videlec"
}
```

Commit: **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)**



---

archive/issue_comments_209587.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThere's even more room for optimizations; a C/Cython version is probably faster up to at least 10000 or even 2<sup>16</sup> (for `two_squares()`).\n\nI'd also compare the overall speed over a range.",
    "created_at": "2014-05-15T23:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209587",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

There's even more room for optimizations; a C/Cython version is probably faster up to at least 10000 or even 2<sup>16</sup> (for `two_squares()`).

I'd also compare the overall speed over a range.



---

archive/issue_comments_209588.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nP.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.",
    "created_at": "2014-05-15T23:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209588",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

P.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.



---

archive/issue_comments_209589.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@videlec](#comment:33):\n> Sorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308\n\nProbably open a separate ticket \"Improve sums of squares *for small input*\" and we can later (re)base one of them on the other.",
    "created_at": "2014-05-16T15:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209589",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@videlec](#comment:33):
> Sorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308

Probably open a separate ticket "Improve sums of squares *for small input*" and we can later (re)base one of them on the other.



---

archive/issue_comments_209590.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n - add a Sage implementation of writing a number as a sum of 3 squares\n - add a Sage implementation of writing a number as a sum of 4 squares\n - add a Sage implementation of writing a number as a sum of `k` squares for any `k`\n+\n+follow up: #16374\n``````\n",
    "created_at": "2014-05-17T19:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209590",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 - add a Sage implementation of writing a number as a sum of 3 squares
 - add a Sage implementation of writing a number as a sum of 4 squares
 - add a Sage implementation of writing a number as a sum of `k` squares for any `k`
+
+follow up: #16374
``````




---

archive/issue_comments_209591.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@nexttime](#comment:37):\n> Replying to [@videlec](#comment:33):\n> > Sorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308\n\n> \n> Probably open a separate ticket \"Improve sums of squares *for small input*\" and we can later (re)base one of them on the other.\n\nGood idea. Done in #16374.",
    "created_at": "2014-05-17T19:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209591",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@nexttime](#comment:37):
> Replying to [@videlec](#comment:33):
> > Sorry. I was a bit fast. The decision of choosing my branch or not might be the choice of the author of the ticket. So if you want to have a look at my changes, see either u/vdelecroix/16308 or public/16308

> 
> Probably open a separate ticket "Improve sums of squares *for small input*" and we can later (re)base one of them on the other.

Good idea. Done in #16374.



---

archive/issue_comments_209592.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nexttime](#comment:36):\n> P.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.\n\nSure, in which case does it not do that?",
    "created_at": "2014-05-19T10:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209592",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nexttime](#comment:36):
> P.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.

Sure, in which case does it not do that?



---

archive/issue_comments_209593.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jdemeyer](#comment:40):\n> Replying to [@nexttime](#comment:36):\n> > P.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.\n\n> Sure, in which case does it not do that?\n\nSorry, I had been looking at some diff of Vincent's code against yours, and only saw some `return (foo,)` (and I **swear** it was more than one!1!!1 ;-) ), but in your original code, or the one that's again here now, it's of course only in the case k=1 (sum of *one* square), which is correct.\n\nSorry for the noise.",
    "created_at": "2014-05-19T19:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209593",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jdemeyer](#comment:40):
> Replying to [@nexttime](#comment:36):
> > P.S.:  If a solution exists, *k*`_squares()` should IMHO **always** return a *k*-tuple.

> Sure, in which case does it not do that?

Sorry, I had been looking at some diff of Vincent's code against yours, and only saw some `return (foo,)` (and I **swear** it was more than one!1!!1 ;-) ), but in your original code, or the one that's again here now, it's of course only in the case k=1 (sum of *one* square), which is correct.

Sorry for the noise.



---

archive/issue_comments_209594.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHi,\n\nRelated to [comment:12](#comment:12), can you justify why using pari? We already have `factor` and `is_pseudoprime` and `sqrtrem` might be the replacement for `N.sqrtint`.\n\nThere are also trailing whitespaces on the lines 5161 and 5246.\n\nVincent",
    "created_at": "2014-06-06T16:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209594",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Hi,

Related to [comment:12](#comment:12), can you justify why using pari? We already have `factor` and `is_pseudoprime` and `sqrtrem` might be the replacement for `N.sqrtint`.

There are also trailing whitespaces on the lines 5161 and 5246.

Vincent



---

archive/issue_events_232963.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-06T16:17:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232963"
}
```



---

archive/issue_events_232964.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-06T16:17:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232964"
}
```



---

archive/issue_comments_209595.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4f603b4b967ca841571fb0d565d4328ec0c2802\">c4f603b</a></td><td><code>Use Integer.factor() for factoring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6754d02137ea838ccae59cb61dca780b057e0c7\">f6754d0</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16308</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a\">7b33df2</a></td><td><code>Speed up sums of squares</code></td></tr></table>\n",
    "created_at": "2014-06-25T09:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4f603b4b967ca841571fb0d565d4328ec0c2802">c4f603b</a></td><td><code>Use Integer.factor() for factoring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6754d02137ea838ccae59cb61dca780b057e0c7">f6754d0</a></td><td><code>Merge remote-tracking branch 'origin/develop' into ticket/16308</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a">7b33df2</a></td><td><code>Speed up sums of squares</code></td></tr></table>




---

archive/issue_comments_209596.json:
```json
{
    "body": "Changed commit from **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)** to **[`7b33df2`](https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a)**",
    "created_at": "2014-06-25T09:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b94a65`](https://github.com/sagemath/sagetrac-mirror/commit/6b94a6576031e6e341143a4fc1fd83263a800ed9)** to **[`7b33df2`](https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a)**



---

archive/issue_events_232965.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-06-25T09:15:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232965"
}
```



---

archive/issue_events_232966.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-06-25T09:15:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232966"
}
```



---

archive/issue_comments_209597.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHey,\n\nLooks cool! I added micro optimizations and random tests at `u/vdelecroix/16308`. If you like my changes, this is good for a positive review!\n\nVincent",
    "created_at": "2014-06-25T18:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209597",
    "user": "https://github.com/videlec"
}
```

<div id="comment:45" align="right">comment:45</div>

Hey,

Looks cool! I added micro optimizations and random tests at `u/vdelecroix/16308`. If you like my changes, this is good for a positive review!

Vincent



---

archive/issue_comments_209598.json:
```json
{
    "body": "Reviewer: **Peter Bruin, Leif Leonhardy , Vincent Delecroix**",
    "created_at": "2014-06-25T18:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209598",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Peter Bruin, Leif Leonhardy , Vincent Delecroix**



---

archive/issue_comments_209599.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)** to **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)**",
    "created_at": "2014-06-25T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209599",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jdemeyer/ticket/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/16308)** to **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)**



---

archive/issue_comments_209600.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7\">f071a8d</a></td><td><code>sum of squares: micro improvement + random tests</code></td></tr></table>\n",
    "created_at": "2014-06-25T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209600",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7">f071a8d</a></td><td><code>sum of squares: micro improvement + random tests</code></td></tr></table>




---

archive/issue_comments_209601.json:
```json
{
    "body": "Changed commit from **[`7b33df2`](https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a)** to **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**",
    "created_at": "2014-06-25T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209601",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`7b33df2`](https://github.com/sagemath/sagetrac-mirror/commit/7b33df2464a78e70766fbb031af1750e5ed6239a)** to **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**



---

archive/issue_events_232967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-06-25T21:42:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232967"
}
```



---

archive/issue_events_232968.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-06-25T21:42:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232968"
}
```



---

archive/issue_comments_209602.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)** to **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**",
    "created_at": "2014-06-26T19:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16308#issuecomment-209602",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/16308](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16308)** to **[`f071a8d`](https://github.com/sagemath/sagetrac-mirror/commit/f071a8db1316a7bf8503f6c6c9227fcaa6b953f7)**



---

archive/issue_events_232969.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-26T19:37:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232969"
}
```



---

archive/issue_events_232970.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5d8fdb7a796bcf958a8bc5b3a897b469eae5f7ba",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-26T19:37:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16308",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16308#event-232970"
}
```
