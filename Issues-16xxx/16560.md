# Issue 16560: Upgrade lrcalc to 1.1.7

archive/issues_016323.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nUsing the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/ but use the one in the attachments as the root directory is `lrcalc-sage-1.1.7`.\n\nThis should (help) fix #14625.\n\nUpstream: **Reported upstream. No feedback yet.**\n\nCC:  @sagetrac-sage-combinat @nthiery\n\nComponent: **packages: standard**\n\nKeywords: **lrcalc**\n\nAuthor: **Travis Scrimshaw**\n\nBranch: **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16560_\n\n",
    "closed_at": "2014-06-30T16:33:53Z",
    "created_at": "2014-06-27T00:47:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade lrcalc to 1.1.7",
    "type": "issue",
    "updated_at": "2014-06-30T19:26:02Z",
    "url": "https://github.com/sagemath/sage/issues/16560",
    "user": "https://github.com/tscrim"
}
```
<div id="comment:0"></div>

Using the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/ but use the one in the attachments as the root directory is `lrcalc-sage-1.1.7`.

This should (help) fix #14625.

Upstream: **Reported upstream. No feedback yet.**

CC:  @sagetrac-sage-combinat @nthiery

Component: **packages: standard**

Keywords: **lrcalc**

Author: **Travis Scrimshaw**

Branch: **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**

Reviewer: **Fran√ßois Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/16560_





---

archive/issue_events_234391.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-27T00:47:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234391"
}
```



---

archive/issue_events_234392.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-27T00:47:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234392"
}
```



---

archive/issue_events_234393.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-27T00:47:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234393"
}
```



---

archive/issue_events_234394.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-27T00:47:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234394"
}
```



---

archive/issue_events_234395.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2014-06-27T00:47:59Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234395"
}
```



---

archive/issue_comments_215047.json:
```json
{
    "body": "Attachment: **[lrcalc-1.1.7.tar.gz](https://github.com/sagemath/sage/files/ticket16560/lrcalc-1.1.7.tar.gz)**",
    "created_at": "2014-06-27T00:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215047",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[lrcalc-1.1.7.tar.gz](https://github.com/sagemath/sage/files/ticket16560/lrcalc-1.1.7.tar.gz)**



---

archive/issue_comments_215048.json:
```json
{
    "body": "Branch: **[public/packages/lrcalc_1_1_7-16560](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/lrcalc_1_1_7-16560)**",
    "created_at": "2014-06-27T00:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215048",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/packages/lrcalc_1_1_7-16560](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/lrcalc_1_1_7-16560)**



---

archive/issue_comments_215049.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Using the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/\n+Using the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/ but use the one in the attachments as the root directory is `lrcalc-sage-1.1.7`.\n \n This should (help) fix #14625.\n``````\n",
    "created_at": "2014-06-27T00:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215049",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Using the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/
+Using the upstream based off of here: http://www.math.rutgers.edu/~asbuch/lrcalc/ but use the one in the attachments as the root directory is `lrcalc-sage-1.1.7`.
 
 This should (help) fix #14625.
``````




---

archive/issue_events_234396.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-27T00:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234396"
}
```



---

archive/issue_comments_215050.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRunning tests now...",
    "created_at": "2014-06-27T00:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215050",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Running tests now...



---

archive/issue_comments_215051.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAll (long) tests pass for me.",
    "created_at": "2014-06-27T01:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215051",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

All (long) tests pass for me.



---

archive/issue_comments_215052.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/190501c0fc9ea9c73ad5ee3cc7bd2db90051188b\"><code>190501c</code></a></td><td><code>Changed version number.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69d3573f7c56e309b357dd43e5b52b4cb60d0885\"><code>69d3573</code></a></td><td><code>Update SPKG.txt and checksums.ini.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a\"><code>7134ee1</code></a></td><td><code>Changed checksum.</code></td></tr></table>\n",
    "created_at": "2014-06-27T01:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/190501c0fc9ea9c73ad5ee3cc7bd2db90051188b"><code>190501c</code></a></td><td><code>Changed version number.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69d3573f7c56e309b357dd43e5b52b4cb60d0885"><code>69d3573</code></a></td><td><code>Update SPKG.txt and checksums.ini.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a"><code>7134ee1</code></a></td><td><code>Changed checksum.</code></td></tr></table>




---

archive/issue_comments_215053.json:
```json
{
    "body": "Commit: **[`7134ee1`](https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a)**",
    "created_at": "2014-06-27T01:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215053",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`7134ee1`](https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a)**



---

archive/issue_comments_215054.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSo the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?",
    "created_at": "2014-06-27T02:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215054",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

So the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?



---

archive/issue_comments_215055.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2014-06-27T02:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215055",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_234397.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-06-27T02:37:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234397"
}
```



---

archive/issue_events_234398.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2014-06-27T02:37:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234398"
}
```



---

archive/issue_comments_215056.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis version has otherwise been in use in sage-on-gentoo since December without any reported issue so I am putting that positive review.",
    "created_at": "2014-06-27T02:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215056",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

This version has otherwise been in use in sage-on-gentoo since December without any reported issue so I am putting that positive review.



---

archive/issue_comments_215057.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kiwifb](#comment%3A4):\n> So the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?\n\nNicolas would be the best one to answer that since he helped create it.\n\nThanks for doing the review.",
    "created_at": "2014-06-27T03:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215057",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kiwifb](#comment%3A4):
> So the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?

Nicolas would be the best one to answer that since he helped create it.

Thanks for doing the review.



---

archive/issue_comments_215058.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment%3A6):\n> Replying to [@kiwifb](#comment%3A4):\n> > So the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?\n> \n> \n> Nicolas would be the best one to answer that since he helped create it.\n\nAs far as I remember, yes. And this one is an official release by Anders rather than a tarball produced by myself.",
    "created_at": "2014-06-27T23:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215058",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment%3A6):
> Replying to [@kiwifb](#comment%3A4):
> > So the only difference between the two upstream tarballs is that one of them is properly autool=ed and the other is not?
> 
> 
> Nicolas would be the best one to answer that since he helped create it.

As far as I remember, yes. And this one is an official release by Anders rather than a tarball produced by myself.



---

archive/issue_events_234399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-28T12:47:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234399"
}
```



---

archive/issue_events_234400.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-28T12:47:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234400"
}
```



---

archive/issue_comments_215059.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFails on OSX\n\n```\nlibtool: link: gcc -dynamiclib -Wl,-undefined -Wl,dynamic_lookup -o .libs/liblrcalc.1.dylib   -Wl,-force_load,mathlib/.libs/libmath.a -Wl,-force_load,lrcoef/.libs/libsymfcn.a -Wl,-force_load,schubert/.libs/libschub.a   -O2   -install_name  /Users/buildslave-sage/slave/sage_git/build/local/lib/liblrcalc.1.dylib -compatibility_version 2 -current_version 2.0 -Wl,-single_module\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    mathlib/.libs/libmath.a(hashtab.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    mathlib/.libs/libmath.a(list.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    mathlib/.libs/libmath.a(set.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    mathlib/.libs/libmath.a(vectarg.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    mathlib/.libs/libmath.a(vector.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    lrcoef/.libs/libsymfcn.a(symfcn.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    lrcoef/.libs/libsymfcn.a(maple.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    schubert/.libs/libschub.a(schublib.o)\nduplicate symbol _lrcalc_panic_frame in:\n    mathlib/.libs/libmath.a(alloc.o)\n    schubert/.libs/libschub.a(lincomb.o)\nld: 9 duplicate symbols for architecture x86_64\ncollect2: error: ld returned 1 exit status\nmake[5]: *** [liblrcalc.la] Error 1\nmake[5]: Target `all-am' not remade because of errors.\nmake[4]: *** [all-recursive] Error 1\nmake[3]: *** [all] Error 2\nError building lrcalc.\n```\nFull log: http://build.sagemath.org/sage/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.9%20x86_64%29%20incremental/builds/279/steps/compile/logs/stdio",
    "created_at": "2014-06-28T12:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215059",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

Fails on OSX

```
libtool: link: gcc -dynamiclib -Wl,-undefined -Wl,dynamic_lookup -o .libs/liblrcalc.1.dylib   -Wl,-force_load,mathlib/.libs/libmath.a -Wl,-force_load,lrcoef/.libs/libsymfcn.a -Wl,-force_load,schubert/.libs/libschub.a   -O2   -install_name  /Users/buildslave-sage/slave/sage_git/build/local/lib/liblrcalc.1.dylib -compatibility_version 2 -current_version 2.0 -Wl,-single_module
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    mathlib/.libs/libmath.a(hashtab.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    mathlib/.libs/libmath.a(list.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    mathlib/.libs/libmath.a(set.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    mathlib/.libs/libmath.a(vectarg.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    mathlib/.libs/libmath.a(vector.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    lrcoef/.libs/libsymfcn.a(symfcn.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    lrcoef/.libs/libsymfcn.a(maple.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    schubert/.libs/libschub.a(schublib.o)
duplicate symbol _lrcalc_panic_frame in:
    mathlib/.libs/libmath.a(alloc.o)
    schubert/.libs/libschub.a(lincomb.o)
ld: 9 duplicate symbols for architecture x86_64
collect2: error: ld returned 1 exit status
make[5]: *** [liblrcalc.la] Error 1
make[5]: Target `all-am' not remade because of errors.
make[4]: *** [all-recursive] Error 1
make[3]: *** [all] Error 2
Error building lrcalc.
```
Full log: http://build.sagemath.org/sage/builders/%20%20fast%20Volker%20MiniMac%20%28OSX%2010.9%20x86_64%29%20incremental/builds/279/steps/compile/logs/stdio



---

archive/issue_comments_215060.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHum.... it seems it cannot cop with lrcalc_panic_frame being defined in mathlib/alloc.h\n\n```\n#include <setjmp.h>\n\n/*  Programs using the lrcalc library should set lrcalc_panic_frame\n *  with setjmp(lrcalc_panic_frame).  The lrcalc library will call\n *  longjmp(lrcalc_panic_frame, 1) if an \"out of memory\" event occurs.\n */\njmp_buf lrcalc_panic_frame;\n```\nAll the files for which the linker is complaining about are inheriting the declaration through multiple include statement but are not using it. I guess the proper course of action, from a correctness point of view, would be to create a specific header for it and include it only where needed. Looking for other options....",
    "created_at": "2014-06-28T20:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215060",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Hum.... it seems it cannot cop with lrcalc_panic_frame being defined in mathlib/alloc.h

```
#include <setjmp.h>

/*  Programs using the lrcalc library should set lrcalc_panic_frame
 *  with setjmp(lrcalc_panic_frame).  The lrcalc library will call
 *  longjmp(lrcalc_panic_frame, 1) if an "out of memory" event occurs.
 */
jmp_buf lrcalc_panic_frame;
```
All the files for which the linker is complaining about are inheriting the declaration through multiple include statement but are not using it. I guess the proper course of action, from a correctness point of view, would be to create a specific header for it and include it only where needed. Looking for other options....



---

archive/issue_comments_215061.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n@ nthiery: in configure.ac, oops:\n\n```\nAC_PREREQ([2.67])\nAC_INIT([lrcalc],[1.1.6],[asbuch at math rutgers edu])\n```\nNot hurtful of course.",
    "created_at": "2014-06-28T21:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215061",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

@ nthiery: in configure.ac, oops:

```
AC_PREREQ([2.67])
AC_INIT([lrcalc],[1.1.6],[asbuch at math rutgers edu])
```
Not hurtful of course.



---

archive/issue_comments_215062.json:
```json
{
    "body": "Attachment: **[lrcalc-1.1.7-jump.patch.gz](https://github.com/sagemath/sage/files/ticket16560/lrcalc-1.1.7-jump.patch.gz)**\n\nsolve the lrcalc_panic_frame definition problem",
    "created_at": "2014-06-28T22:47:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215062",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[lrcalc-1.1.7-jump.patch.gz](https://github.com/sagemath/sage/files/ticket16560/lrcalc-1.1.7-jump.patch.gz)**

solve the lrcalc_panic_frame definition problem



---

archive/issue_comments_215063.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOK the attached patch solve the problem on OS X, it should work on linux too but I haven't tested it there so far. It is a bit invasive and should be submitted upstream for consideration.",
    "created_at": "2014-06-28T22:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215063",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

OK the attached patch solve the problem on OS X, it should work on linux too but I haven't tested it there so far. It is a bit invasive and should be submitted upstream for consideration.



---

archive/issue_comments_215064.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI will test it on my Ubuntu machine later tonight (if no one beats me to it).",
    "created_at": "2014-06-29T00:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215064",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

I will test it on my Ubuntu machine later tonight (if no one beats me to it).



---

archive/issue_comments_215065.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWell I have now checked it builds and installs in sage-on-gentoo on linux and OS X but haven't run tests.",
    "created_at": "2014-06-29T01:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215065",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Well I have now checked it builds and installs in sage-on-gentoo on linux and OS X but haven't run tests.



---

archive/issue_comments_215066.json:
```json
{
    "body": "Changed commit from **[`7134ee1`](https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a)** to **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**",
    "created_at": "2014-06-29T13:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7134ee1`](https://github.com/sagemath/sagetrac-mirror/commit/7134ee179bfa1126cde66f8fc4e1e30db5e89a4a)** to **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**



---

archive/issue_comments_215067.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90\"><code>b124959</code></a></td><td><code>Added patch file to lrcalc.</code></td></tr></table>\n",
    "created_at": "2014-06-29T13:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215067",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90"><code>b124959</code></a></td><td><code>Added patch file to lrcalc.</code></td></tr></table>




---

archive/issue_comments_215068.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nGit-a-fied and the spkg and sage checks passed for me.",
    "created_at": "2014-06-29T13:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215068",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Git-a-fied and the spkg and sage checks passed for me.



---

archive/issue_events_234401.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-29T13:08:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234401"
}
```



---

archive/issue_events_234402.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-06-29T13:08:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234402"
}
```



---

archive/issue_comments_215069.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks for figuring out the OSX Fran\u00e7ois (I couldn't do anything since I don't have access to one).",
    "created_at": "2014-06-29T13:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215069",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks for figuring out the OSX Fran√ßois (I couldn't do anything since I don't have access to one).



---

archive/issue_comments_215070.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2014-06-30T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215070",
    "user": "https://github.com/kiwifb"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_215071.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWell it is all a bit sloppy in my opinion. You have this variable that I put in separate header that needs to be global in the programs using it. Problems is it was put everywhere including the library parts. The gnu linker used in linux is infintely tolerant to some stuff and possibly has a way of dealing with it. But in this case I think the OS X linker is correct in saying \"please fix this up\". \n\nI also sent an email upstream along with the patch.",
    "created_at": "2014-06-30T10:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215071",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Well it is all a bit sloppy in my opinion. You have this variable that I put in separate header that needs to be global in the programs using it. Problems is it was put everywhere including the library parts. The gnu linker used in linux is infintely tolerant to some stuff and possibly has a way of dealing with it. But in this case I think the OS X linker is correct in saying "please fix this up". 

I also sent an email upstream along with the patch.



---

archive/issue_comments_215072.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSo do you think we should hold off on merging this until we hear back?",
    "created_at": "2014-06-30T13:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215072",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

So do you think we should hold off on merging this until we hear back?



---

archive/issue_events_234403.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-30T16:33:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234403"
}
```



---

archive/issue_events_234404.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ea4eada7eb1ed34cfbbf0937080732fc3d6ea4bc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-30T16:33:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16560#event-234404"
}
```



---

archive/issue_comments_215073.json:
```json
{
    "body": "Changed branch from **[public/packages/lrcalc_1_1_7-16560](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/lrcalc_1_1_7-16560)** to **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**",
    "created_at": "2014-06-30T16:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215073",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/packages/lrcalc_1_1_7-16560](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/lrcalc_1_1_7-16560)** to **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)**



---

archive/issue_comments_215074.json:
```json
{
    "body": "Changed commit from **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)** to none",
    "created_at": "2014-06-30T19:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215074",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`b124959`](https://github.com/sagemath/sagetrac-mirror/commit/b124959527d51806a30b2e44d3038547e04f2a90)** to none



---

archive/issue_comments_215075.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@tscrim](#comment%3A18):\n> So do you think we should hold off on merging this until we hear back?\n\nDouble dose of no. One for me and one for Volker :)",
    "created_at": "2014-06-30T19:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16560#issuecomment-215075",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@tscrim](#comment%3A18):
> So do you think we should hold off on merging this until we hear back?

Double dose of no. One for me and one for Volker :)
