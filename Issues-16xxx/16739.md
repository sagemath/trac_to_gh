# Issue 16739: is_weak_popov

archive/issues_016502.json:
```json
{
    "body": "The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to #16742.\n\nShort description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n\nThe function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:\n\n[x<sup>2</sup>+1, x]\n\n[x, x+1]\n\nis in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.\n\n[x<sup>2</sup>+1, x]\n\n[x,0]\n\nis NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.\n\nSee: [MS] Mulders, Storjohann, On Lattice Reduction for Polynomial Matrices, ftp://ftp.inf.ethz.ch/pub/publications/tech-reports/3xx/356.pdf\n\n**CC:**  @johanrosenkilde\n\n**Keywords:** matrix weak-popov-form #16742\n\n**Branch/Commit:** [b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** David M\u00f6dinger\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16739\n\n",
    "closed_at": "2014-08-26T13:02:44Z",
    "created_at": "2014-07-30T08:42:12Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "is_weak_popov",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16739",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```
The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to #16742.

Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).

The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:

[x<sup>2</sup>+1, x]

[x, x+1]

is in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.

[x<sup>2</sup>+1, x]

[x,0]

is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.

See: [MS] Mulders, Storjohann, On Lattice Reduction for Polynomial Matrices, ftp://ftp.inf.ethz.ch/pub/publications/tech-reports/3xx/356.pdf

**CC:**  @johanrosenkilde

**Keywords:** matrix weak-popov-form #16742

**Branch/Commit:** [b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)

**Reviewer:** Frédéric Chapoton

**Author:** David Mödinger

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/16739





---

archive/issue_events_055765.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16739#event-55765"
}
```



---

archive/issue_comments_283003.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form.\n+Short description of weak popov form:\n+Let R be an ordered Ring and A^mxn a matrix over R.\n+The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix).\n+A is in weak popov form if all leading positions are different (zero lines ignored).\n \n+The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:\n+[x^2+1, x]\n+[x, x+1]\n+is in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.\n+[x^2+1,x]\n+[x,0]\n+is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.\n``````\n",
    "created_at": "2014-08-19T11:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283003",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,13 @@
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form.
+Short description of weak popov form:
+Let R be an ordered Ring and A^mxn a matrix over R.
+The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix).
+A is in weak popov form if all leading positions are different (zero lines ignored).
 
+The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:
+[x^2+1, x]
+[x, x+1]
+is in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.
+[x^2+1,x]
+[x,0]
+is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.
``````




---

archive/issue_comments_283004.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"matrix\".",
    "created_at": "2014-08-19T11:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283004",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Changing keywords** from "" to "matrix".



---

archive/issue_comments_283005.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,13 +1,15 @@\n-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form.\n-Short description of weak popov form:\n-Let R be an ordered Ring and A^mxn a matrix over R.\n-The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix).\n-A is in weak popov form if all leading positions are different (zero lines ignored).\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A^mxn a matrix over R. The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix). A is in weak popov form if all leading positions are different (zero lines ignored).^\n \n The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:\n-[x^2+1, x]\n+\n+[x<sup>2</sup>+1, x]\n+\n [x, x+1]\n+\n is in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.\n-[x^2+1,x]\n+\n+[x<sup>2</sup>+1, x]\n+\n [x,0]\n+\n is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.\n``````\n",
    "created_at": "2014-08-19T11:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283005",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,13 +1,15 @@
-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form.
-Short description of weak popov form:
-Let R be an ordered Ring and A^mxn a matrix over R.
-The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix).
-A is in weak popov form if all leading positions are different (zero lines ignored).
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A^mxn a matrix over R. The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix). A is in weak popov form if all leading positions are different (zero lines ignored).^
 
 The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:
-[x^2+1, x]
+
+[x<sup>2</sup>+1, x]
+
 [x, x+1]
+
 is in weak popov form: Row 1 has the degrees 2 and 1, the leading position is for i=0, row 2 has two times degree 1 so the higher i is chosen with i=1.
-[x^2+1,x]
+
+[x<sup>2</sup>+1, x]
+
 [x,0]
+
 is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.
``````




---

archive/issue_comments_283006.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A^mxn a matrix over R. The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix). A is in weak popov form if all leading positions are different (zero lines ignored).^\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n \n The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:\n \n``````\n",
    "created_at": "2014-08-19T11:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283006",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A^mxn a matrix over R. The leading position of a row is called the position i in [1,m) such that the order of A[i,_] is maximal within the row. If there are multiple entries with the maximum order, the highest i is the leading position (the furthest to the right in the matrix). A is in weak popov form if all leading positions are different (zero lines ignored).^
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).
 
 The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:
 
``````




---

archive/issue_comments_283007.json:
```json
{
    "body": "**Changing keywords** from \"matrix\" to \"matrix weak-popov-form #16742\".",
    "created_at": "2014-08-19T11:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283007",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Changing keywords** from "matrix" to "matrix weak-popov-form #16742".



---

archive/issue_comments_283008.json:
```json
{
    "body": "**Branch:** [u/ketzu/is_weak_popov](https://github.com/sagemath/sagetrac-mirror/tree/u/ketzu/is_weak_popov)",
    "created_at": "2014-08-19T12:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283008",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Branch:** [u/ketzu/is_weak_popov](https://github.com/sagemath/sagetrac-mirror/tree/u/ketzu/is_weak_popov)



---

archive/issue_comments_283009.json:
```json
{
    "body": "**Commit:** [37898695c0dc92f7e9cd1d0a99fe63c854e18253](https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253)",
    "created_at": "2014-08-19T12:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [37898695c0dc92f7e9cd1d0a99fe63c854e18253](https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253)



---

archive/issue_comments_283010.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253\">3789869</a></td><td><code>Added is_weak_popov(self) implementing a simple check if the matrix is in weak popov form for polynomials. Will raise a NotImplementedError if called on matrices containing elements that do not provide a degree(self) method, 3 doctests and comments added, sage -t sage/matrix/matrix0.pyx is passing all test.</code></td></tr></table>\n",
    "created_at": "2014-08-19T12:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253">3789869</a></td><td><code>Added is_weak_popov(self) implementing a simple check if the matrix is in weak popov form for polynomials. Will raise a NotImplementedError if called on matrices containing elements that do not provide a degree(self) method, 3 doctests and comments added, sage -t sage/matrix/matrix0.pyx is passing all test.</code></td></tr></table>




---

archive/issue_comments_283011.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to !#16742.\n+\n+Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n \n The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:\n \n``````\n",
    "created_at": "2014-08-19T12:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283011",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to !#16742.
+
+Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).
 
 The function will implement this only for polynomial rings, the order function is the degree of the polynomial. Example:
 
``````




---

archive/issue_comments_283012.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to !#16742.\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to [#16742](http://trac.sagemath.org/ticket/16742).\n \n Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n \n``````\n",
    "created_at": "2014-08-19T12:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283012",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to !#16742.
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to [#16742](http://trac.sagemath.org/ticket/16742).
 
 Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).
 
``````




---

archive/issue_comments_283013.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n [x,0]\n \n is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.\n+\n+See: [MS] Mulders, Storjohann, On Lattice Reduction for Polynomial Matrices, ftp://ftp.inf.ethz.ch/pub/publications/tech-reports/3xx/356.pdf\n``````\n",
    "created_at": "2014-08-19T13:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283013",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 [x,0]
 
 is NOT in weak popov form, row 1 has now degrees 1 and -1, so the leading position is i=0 as in row 1.
+
+See: [MS] Mulders, Storjohann, On Lattice Reduction for Polynomial Matrices, ftp://ftp.inf.ethz.ch/pub/publications/tech-reports/3xx/356.pdf
``````




---

archive/issue_comments_283014.json:
```json
{
    "body": "<a id='comment:13'></a>\nThough the check is elegantly written in two lines, I think it has two\nunnecessary downsides:\n\n- It allocates a new matrix in the apply_map, instead of calculating\n  the degrees on inspection.\n\n- It doesn't fail fast: for instance, if the first two rows have the\n  same leading position, we don't need to continue.\n\nBoth issues can be repaired by changing the outer list comprehension\ninto a loop, where one maintains an auxiliary set of already seen\nleading positions.\n\nProbably is_weak_popov will usually not be a performance bottleneck, but nonetheless.\n\nCheers,\njsrn",
    "created_at": "2014-08-20T09:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283014",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:13'></a>
Though the check is elegantly written in two lines, I think it has two
unnecessary downsides:

- It allocates a new matrix in the apply_map, instead of calculating
  the degrees on inspection.

- It doesn't fail fast: for instance, if the first two rows have the
  same leading position, we don't need to continue.

Both issues can be repaired by changing the outer list comprehension
into a loop, where one maintains an auxiliary set of already seen
leading positions.

Probably is_weak_popov will usually not be a performance bottleneck, but nonetheless.

Cheers,
jsrn



---

archive/issue_comments_283015.json:
```json
{
    "body": "<a id='comment:14'></a>\nBtw. Sage usually has line wraps on doc strings, right? The line under OUTPUT is very long. Also, the last sentence there is missing a full stop.\n\nLast pet peeve: can you change one or two of the doc tests to be\nnon-square matrices?\n\nCome to think of it, if the matrix has more rows than cols, the function can immediately return False.",
    "created_at": "2014-08-20T09:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283015",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:14'></a>
Btw. Sage usually has line wraps on doc strings, right? The line under OUTPUT is very long. Also, the last sentence there is missing a full stop.

Last pet peeve: can you change one or two of the doc tests to be
non-square matrices?

Come to think of it, if the matrix has more rows than cols, the function can immediately return False.



---

archive/issue_comments_283016.json:
```json
{
    "body": "<a id='comment:15'></a>\nLine wraps are already in, but not pushed. \nA fast fail for more rows than cols only works if zero lines are not ignored.",
    "created_at": "2014-08-20T09:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283016",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

<a id='comment:15'></a>
Line wraps are already in, but not pushed. 
A fast fail for more rows than cols only works if zero lines are not ignored.



---

archive/issue_comments_283017.json:
```json
{
    "body": "<a id='comment:16'></a>\nDoctests and fast fail/less overhead is in progress.",
    "created_at": "2014-08-20T09:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283017",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

<a id='comment:16'></a>
Doctests and fast fail/less overhead is in progress.



---

archive/issue_comments_283018.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc\">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8\">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>\n",
    "created_at": "2014-08-21T13:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>




---

archive/issue_comments_283019.json:
```json
{
    "body": "**Changing commit** from \"[37898695c0dc92f7e9cd1d0a99fe63c854e18253](https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253)\" to \"[7b56085920bd58a400f9e3f97c0e544333ac12f8](https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8)\".",
    "created_at": "2014-08-21T13:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[37898695c0dc92f7e9cd1d0a99fe63c854e18253](https://github.com/sagemath/sagetrac-mirror/commit/37898695c0dc92f7e9cd1d0a99fe63c854e18253)" to "[7b56085920bd58a400f9e3f97c0e544333ac12f8](https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8)".



---

archive/issue_comments_283020.json:
```json
{
    "body": "<a id='comment:18'></a>\nSome simple measures for the change from list comprehension (probably more \"pythonic\") to double loops:\n\nlist comprehension:\n\nsage: PF = PolynomialRing(GF(2!^32,'a'),'x')\n\nsage: A = random_matrix(PF,400,400,degree=10)\nsage: %timeit A.is_weak_popov()\n1 loops, best of 3: 7.57 s per loop\n\nsage: B = random_matrix(PF,10,10,degree=800)\nsage: %timeit B.is_weak_popov()\n1000 loops, best of 3: 554 \u00b5s per loop\n\n---\nloops\n\nsage: A = random_matrix(PF,400,400,degree=10)\nsage: %timeit A.is_weak_popov()\n1000 loops, best of 3: 251 \u00b5s per loop\nsage: A.is_weak_popov()\nFalse\n\nsage: for x in range(A.nrows()):\n....:\u00a0\u00a0\u00a0\u00a0 A[x,x] = A[x,x].shift(11)\n....:\u00a0\u00a0\u00a0\u00a0 \nsage: A.is_weak_popov()\nTrue\nsage: %timeit A.is_weak_popov()\n10 loops, best of 3: 69.1 ms per loop\n\nsage: B = random_matrix(PF,10,10,degree=800)\nsage: %timeit B.is_weak_popov()\n100000 loops, best of 3: 8.73 \u00b5s per loop\nsage: B.is_weak_popov()\nFalse\n\nsage: for x in range(B.nrows()):\n....:\u00a0\u00a0\u00a0\u00a0 B[x,x] = B[x,x].shift(801)\n....:\n# Now it's in wpf\nsage: %timeit B.is_weak_popov()\n10000 loops, best of 3: 46.7 \u00b5s per loop\nsage: B.is_weak_popov()\nTrue\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc\">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8\">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc\">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8\">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>\n",
    "created_at": "2014-08-21T13:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283020",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

<a id='comment:18'></a>
Some simple measures for the change from list comprehension (probably more "pythonic") to double loops:

list comprehension:

sage: PF = PolynomialRing(GF(2!^32,'a'),'x')

sage: A = random_matrix(PF,400,400,degree=10)
sage: %timeit A.is_weak_popov()
1 loops, best of 3: 7.57 s per loop

sage: B = random_matrix(PF,10,10,degree=800)
sage: %timeit B.is_weak_popov()
1000 loops, best of 3: 554 µs per loop

---
loops

sage: A = random_matrix(PF,400,400,degree=10)
sage: %timeit A.is_weak_popov()
1000 loops, best of 3: 251 µs per loop
sage: A.is_weak_popov()
False

sage: for x in range(A.nrows()):
....:     A[x,x] = A[x,x].shift(11)
....:     
sage: A.is_weak_popov()
True
sage: %timeit A.is_weak_popov()
10 loops, best of 3: 69.1 ms per loop

sage: B = random_matrix(PF,10,10,degree=800)
sage: %timeit B.is_weak_popov()
100000 loops, best of 3: 8.73 µs per loop
sage: B.is_weak_popov()
False

sage: for x in range(B.nrows()):
....:     B[x,x] = B[x,x].shift(801)
....:
# Now it's in wpf
sage: %timeit B.is_weak_popov()
10000 loops, best of 3: 46.7 µs per loop
sage: B.is_weak_popov()
True

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/654a51dee30c9125de49548b61bbd86cf176d0bc">654a51d</a></td><td><code>Only changed comment linebreaks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8">7b56085</a></td><td><code>Added linebreaks to documentation, reworked listcomprehension into loops for efficiency, added more testcases.</code></td></tr></table>




---

archive/issue_comments_283021.json:
```json
{
    "body": "<a id='comment:19'></a>\nCool, looks good. And the timings are quite persuasive.\n\nOne thing: I don't see what you need the \"p = self.ncols()-1\" line for. p will always be reassigned if any element is non-zero. And if not, p will never be read.",
    "created_at": "2014-08-21T13:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283021",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:19'></a>
Cool, looks good. And the timings are quite persuasive.

One thing: I don't see what you need the "p = self.ncols()-1" line for. p will always be reassigned if any element is non-zero. And if not, p will never be read.



---

archive/issue_comments_283022.json:
```json
{
    "body": "**Changing commit** from \"[7b56085920bd58a400f9e3f97c0e544333ac12f8](https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8)\" to \"[ca026c37322359d29727d8aafe9c5c6f6948eb3f](https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f)\".",
    "created_at": "2014-08-21T13:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7b56085920bd58a400f9e3f97c0e544333ac12f8](https://github.com/sagemath/sagetrac-mirror/commit/7b56085920bd58a400f9e3f97c0e544333ac12f8)" to "[ca026c37322359d29727d8aafe9c5c6f6948eb3f](https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f)".



---

archive/issue_comments_283023.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f\">ca026c3</a></td><td><code>removed unnecessary line p=self.nrows()-1</code></td></tr></table>\n",
    "created_at": "2014-08-21T13:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f">ca026c3</a></td><td><code>removed unnecessary line p=self.nrows()-1</code></td></tr></table>




---

archive/issue_comments_283024.json:
```json
{
    "body": "**Changing commit** from \"[ca026c37322359d29727d8aafe9c5c6f6948eb3f](https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f)\" to \"[1453fc60a274d68c820e377f9927e5596f5415b2](https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2)\".",
    "created_at": "2014-08-21T14:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ca026c37322359d29727d8aafe9c5c6f6948eb3f](https://github.com/sagemath/sagetrac-mirror/commit/ca026c37322359d29727d8aafe9c5c6f6948eb3f)" to "[1453fc60a274d68c820e377f9927e5596f5415b2](https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2)".



---

archive/issue_comments_283025.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2\">1453fc6</a></td><td><code>Fixed > to >= to make sure it takes the rightmost value and added a TESTS Block to check for this potential bug.</code></td></tr></table>\n",
    "created_at": "2014-08-21T14:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2">1453fc6</a></td><td><code>Fixed > to >= to make sure it takes the rightmost value and added a TESTS Block to check for this potential bug.</code></td></tr></table>




---

archive/issue_comments_283026.json:
```json
{
    "body": "<a id='comment:22'></a>\nCool. Ready to mark as Needs Review? It might be too in-bred to make me review it...",
    "created_at": "2014-08-21T14:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283026",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:22'></a>
Cool. Ready to mark as Needs Review? It might be too in-bred to make me review it...



---

archive/issue_comments_283027.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-08-21T14:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283027",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_283028.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe doc syntax is not good. After any ::, the next line should be indented by 4. After any :, the next line should not be indented at all.\n\nSee http://www.sagemath.org/doc/developer/coding_basics.html",
    "created_at": "2014-08-24T19:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283028",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
The doc syntax is not good. After any ::, the next line should be indented by 4. After any :, the next line should not be indented at all.

See http://www.sagemath.org/doc/developer/coding_basics.html



---

archive/issue_comments_283029.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2014-08-25T07:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283029",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_283030.json:
```json
{
    "body": "**Changing commit** from \"[1453fc60a274d68c820e377f9927e5596f5415b2](https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2)\" to \"[26a57163c892269005901e92dcf1525811e5c677](https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677)\".",
    "created_at": "2014-08-25T09:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1453fc60a274d68c820e377f9927e5596f5415b2](https://github.com/sagemath/sagetrac-mirror/commit/1453fc60a274d68c820e377f9927e5596f5415b2)" to "[26a57163c892269005901e92dcf1525811e5c677](https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677)".



---

archive/issue_comments_283031.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677\">26a5716</a></td><td><code>Updated docstrings to match ::/: indentation, added REFERENCE and SEEALSO.</code></td></tr></table>\n",
    "created_at": "2014-08-25T09:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677">26a5716</a></td><td><code>Updated docstrings to match ::/: indentation, added REFERENCE and SEEALSO.</code></td></tr></table>




---

archive/issue_comments_283032.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2014-08-25T09:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283032",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_283033.json:
```json
{
    "body": "**Changing commit** from \"[26a57163c892269005901e92dcf1525811e5c677](https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677)\" to \"[903d7d1d693e55d067f343eb9fbbcb15cc1109e0](https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0)\".",
    "created_at": "2014-08-25T09:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[26a57163c892269005901e92dcf1525811e5c677](https://github.com/sagemath/sagetrac-mirror/commit/26a57163c892269005901e92dcf1525811e5c677)" to "[903d7d1d693e55d067f343eb9fbbcb15cc1109e0](https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0)".



---

archive/issue_comments_283034.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0\">903d7d1</a></td><td><code>Corrected indentation for seealso block.</code></td></tr></table>\n",
    "created_at": "2014-08-25T09:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0">903d7d1</a></td><td><code>Corrected indentation for seealso block.</code></td></tr></table>




---

archive/issue_comments_283035.json:
```json
{
    "body": "<a id='comment:29'></a>\nLooks good enough. A few more minor things:\n\n- in the doc please start with: Return ``True`` etc (no s at the end of Return)\n(recommended use of imperative mode)\n\n- in the code, please put a space after the commas, and a space before and after == and <= \n(pep8 code formatting standard)",
    "created_at": "2014-08-25T09:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283035",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
Looks good enough. A few more minor things:

- in the doc please start with: Return ``True`` etc (no s at the end of Return)
(recommended use of imperative mode)

- in the code, please put a space after the commas, and a space before and after == and <= 
(pep8 code formatting standard)



---

archive/issue_comments_283036.json:
```json
{
    "body": "**Changing commit** from \"[903d7d1d693e55d067f343eb9fbbcb15cc1109e0](https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0)\" to \"[1afe730a87c92d997d1b3d012a4c96ad1389d609](https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609)\".",
    "created_at": "2014-08-25T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[903d7d1d693e55d067f343eb9fbbcb15cc1109e0](https://github.com/sagemath/sagetrac-mirror/commit/903d7d1d693e55d067f343eb9fbbcb15cc1109e0)" to "[1afe730a87c92d997d1b3d012a4c96ad1389d609](https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609)".



---

archive/issue_comments_283037.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609\">1afe730</a></td><td><code>Change of code/doc to make it conform to layout conventions.</code></td></tr></table>\n",
    "created_at": "2014-08-25T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609">1afe730</a></td><td><code>Change of code/doc to make it conform to layout conventions.</code></td></tr></table>




---

archive/issue_comments_283038.json:
```json
{
    "body": "**Changing commit** from \"[1afe730a87c92d997d1b3d012a4c96ad1389d609](https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609)\" to \"[89e927f9beb7d86b63e6feb0b71695633d38e9d3](https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3)\".",
    "created_at": "2014-08-25T12:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1afe730a87c92d997d1b3d012a4c96ad1389d609](https://github.com/sagemath/sagetrac-mirror/commit/1afe730a87c92d997d1b3d012a4c96ad1389d609)" to "[89e927f9beb7d86b63e6feb0b71695633d38e9d3](https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3)".



---

archive/issue_comments_283039.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3\">89e927f</a></td><td><code>Line wrap update.</code></td></tr></table>\n",
    "created_at": "2014-08-25T12:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3">89e927f</a></td><td><code>Line wrap update.</code></td></tr></table>




---

archive/issue_comments_283040.json:
```json
{
    "body": "<a id='comment:32'></a>\nPlease write your real name in the Authors: field above.",
    "created_at": "2014-08-25T12:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283040",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>
Please write your real name in the Authors: field above.



---

archive/issue_comments_283041.json:
```json
{
    "body": "**Author:** David M\u00f6dinger",
    "created_at": "2014-08-25T12:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283041",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Author:** David Mödinger



---

archive/issue_comments_283042.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2014-08-25T17:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283042",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_283043.json:
```json
{
    "body": "**Changing branch** from \"[u/ketzu/is_weak_popov](https://github.com/sagemath/sagetrac-mirror/tree/u/ketzu/is_weak_popov)\" to \"[public/ticket/16739](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16739)\".",
    "created_at": "2014-08-25T17:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283043",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/ketzu/is_weak_popov](https://github.com/sagemath/sagetrac-mirror/tree/u/ketzu/is_weak_popov)" to "[public/ticket/16739](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16739)".



---

archive/issue_comments_283044.json:
```json
{
    "body": "**Changing commit** from \"[89e927f9beb7d86b63e6feb0b71695633d38e9d3](https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3)\" to \"[b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)\".",
    "created_at": "2014-08-25T17:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283044",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[89e927f9beb7d86b63e6feb0b71695633d38e9d3](https://github.com/sagemath/sagetrac-mirror/commit/89e927f9beb7d86b63e6feb0b71695633d38e9d3)" to "[b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)".



---

archive/issue_comments_283045.json:
```json
{
    "body": "<a id='comment:34'></a>\nI have made a reviewer's commit with small changes.\n\nIf you agree with my changes, you can set this to positive review on my behalf.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00593372fe1be872f829d1453c8f1407f8cc1814\">0059337</a></td><td><code>Merge branch 'u/ketzu/is_weak_popov' of ssh://trac.sagemath.org:22/sage into 16739</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf\">b29a645</a></td><td><code>trac #16739 reviewer patch, minor changes</code></td></tr></table>\n",
    "created_at": "2014-08-25T17:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283045",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
I have made a reviewer's commit with small changes.

If you agree with my changes, you can set this to positive review on my behalf.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00593372fe1be872f829d1453c8f1407f8cc1814">0059337</a></td><td><code>Merge branch 'u/ketzu/is_weak_popov' of ssh://trac.sagemath.org:22/sage into 16739</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf">b29a645</a></td><td><code>trac #16739 reviewer patch, minor changes</code></td></tr></table>




---

archive/issue_comments_283046.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-08-25T19:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283046",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_283047.json:
```json
{
    "body": "<a id='comment:36'></a>\nI apreciate your help, thank you for these changes, since I am still uneasy in python and english.",
    "created_at": "2014-08-25T19:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283047",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

<a id='comment:36'></a>
I apreciate your help, thank you for these changes, since I am still uneasy in python and english.



---

archive/issue_comments_283048.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to [#16742](http://trac.sagemath.org/ticket/16742).\n+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to #16742.\n \n Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).\n \n``````\n",
    "created_at": "2014-08-26T12:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283048",
    "user": "https://trac.sagemath.org/admin/accounts/users/ketzu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to [#16742](http://trac.sagemath.org/ticket/16742).
+The target of this ticket is to provide/add a function is_weak_popov to the matrix interface. The function should return true if the matrix it is called on is in weak popov form. This ticket is independent from but connected to #16742.
 
 Short description of weak popov form: Let R be an ordered Ring and A<sup>mxn</sup> a matrix over R. The leading position of a row is called the position i  in [1,m) such that the order of A[i,_] is maximal within the row. If  there are multiple entries with the maximum order, the highest i is the  leading position (the furthest to the right in the matrix). A is in weak  popov form if all leading positions are different (zero lines ignored).
 
``````




---

archive/issue_events_055766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-26T13:02:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16739#event-55766"
}
```



---

archive/issue_comments_283049.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2014-08-26T13:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283049",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_283050.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/16739](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16739)\" to \"[b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)\".",
    "created_at": "2014-08-26T13:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16739#issuecomment-283050",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/16739](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16739)" to "[b29a645d2c0d6c86a127574031b59bbc43811fcf](https://github.com/sagemath/sagetrac-mirror/commit/b29a645d2c0d6c86a127574031b59bbc43811fcf)".
