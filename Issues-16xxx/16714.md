# Issue 16714: Add a matrix of constraints in a LP

archive/issues_016477.json:
```json
{
    "assignees": [],
    "body": "Some users reported two problems with Sage's interface with LP solvers.\n\n1) It is slow to add constraints one by one to the solver's data structure\n\n2) It should be possible to add a matrix of constraints all at once\n\nWith a new syntax like that (thanks Dima), both problems can be circumvented:\n\n```\np = MixedIntegerLinearProgram()\nx = p.new_variable()\np.add_constraint(A_matrix*x <= a_vector)\n```\n\nThis would consider `x` as the vector `x[0],x[1],...,x[size_of_the_matrix - 1]`.\n\nIn the `add_constraint` function, we can then call the backend's function to add 10 000 constraints at the same time (probably better for the data structure), and then fill the entries.\n\nNathann\n\nCC:  @vbraun @dimpase @ingolfured @novoselt\n\nBranch: **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16714_\n\n",
    "closed_at": "2014-08-16T07:52:11Z",
    "created_at": "2014-07-25T14:40:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add a matrix of constraints in a LP",
    "type": "issue",
    "updated_at": "2014-08-18T09:40:14Z",
    "url": "https://github.com/sagemath/sage/issues/16714",
    "user": "https://github.com/nathanncohen"
}
```
Some users reported two problems with Sage's interface with LP solvers.

1) It is slow to add constraints one by one to the solver's data structure

2) It should be possible to add a matrix of constraints all at once

With a new syntax like that (thanks Dima), both problems can be circumvented:

```
p = MixedIntegerLinearProgram()
x = p.new_variable()
p.add_constraint(A_matrix*x <= a_vector)
```

This would consider `x` as the vector `x[0],x[1],...,x[size_of_the_matrix - 1]`.

In the `add_constraint` function, we can then call the backend's function to add 10 000 constraints at the same time (probably better for the data structure), and then fill the entries.

Nathann

CC:  @vbraun @dimpase @ingolfured @novoselt

Branch: **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**

Reviewer: **Dima Pasechnik**

Author: **Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/16714_





---

archive/issue_events_221345.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-25T14:40:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221345"
}
```



---

archive/issue_events_221346.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-25T14:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20programming",
    "label_color": "0000ff",
    "label_name": "component: linear programming",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221346"
}
```



---

archive/issue_events_221347.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-25T14:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221347"
}
```



---

archive/issue_events_221348.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-25T14:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221348"
}
```



---

archive/issue_comments_221038.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThis would also be very natural syntax to specify polyhedra.",
    "created_at": "2014-08-02T19:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221038",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">Comment 1</div>

This would also be very natural syntax to specify polyhedra.



---

archive/issue_comments_221039.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nLooks like a duplicate of #7293... (which has no code and no comments)",
    "created_at": "2014-08-05T06:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221039",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

Looks like a duplicate of #7293... (which has no code and no comments)



---

archive/issue_comments_221040.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nOne technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.",
    "created_at": "2014-08-05T14:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221040",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">Comment 3</div>

One technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.



---

archive/issue_comments_221041.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\n> One technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.\n\nI don't understand `O_o`\n\nWe do not mind if two matrices are multiplied, we mind when two LP variables are multiplied together. We just have to scream when two variables are multiplied, don't we ? So if a guy multiplies two matrices containing variables it will try to multiply the variables at some point so we are safe, aren't we ?\n\nNathann",
    "created_at": "2014-08-05T15:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221041",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">Comment 4</div>

> One technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.

I don't understand `O_o`

We do not mind if two matrices are multiplied, we mind when two LP variables are multiplied together. We just have to scream when two variables are multiplied, don't we ? So if a guy multiplies two matrices containing variables it will try to multiply the variables at some point so we are safe, aren't we ?

Nathann



---

archive/issue_comments_221042.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@vbraun](#comment%3A3):\n> One technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.\n\nbut why would you want this? All that is needed is to pull the matrix apart, row by row, and create a linear function from each of them...",
    "created_at": "2014-08-05T15:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221042",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@vbraun](#comment%3A3):
> One technical problem is that matrices in Sage can always be multiplied, so you can't create matrices over linear functions.

but why would you want this? All that is needed is to pull the matrix apart, row by row, and create a linear function from each of them...



---

archive/issue_comments_221043.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nwhat might help, conceptually, if one can do linear maps just as well as linear functions. Then, when, say, A and B are matrices, one could imagine to do\n\n```\nx = p.new_variable()\ny = p.new_variable()\np.add_constraint(A*x+B*y <= c)\n```\nso that `A*x+B*y` is a linear map from the space of dimension `A.ncol()+B.ncol()` to the space of dimension `len(c)`.",
    "created_at": "2014-08-05T15:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221043",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">Comment 6</div>

what might help, conceptually, if one can do linear maps just as well as linear functions. Then, when, say, A and B are matrices, one could imagine to do

```
x = p.new_variable()
y = p.new_variable()
p.add_constraint(A*x+B*y <= c)
```
so that `A*x+B*y` is a linear map from the space of dimension `A.ncol()+B.ncol()` to the space of dimension `len(c)`.



---

archive/issue_comments_221044.json:
```json
{
    "body": "Branch: **[u/vbraun/add_a_matrix_of_constraints_in_a_lp](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_a_matrix_of_constraints_in_a_lp)**",
    "created_at": "2014-08-07T01:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221044",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/add_a_matrix_of_constraints_in_a_lp](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_a_matrix_of_constraints_in_a_lp)**



---

archive/issue_comments_221045.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI've started with tensors (over the base ring) of linear functions and free modules. This implements:\n\n```\nsage: m = matrix([[1,2],[3,4]]);  m\n[1 2]\n[3 4]\nsage: p = MixedIntegerLinearProgram()\nsage: v = p.new_variable(nonnegative=True)\nsage: m.row(0) * v[0]              # vector * linear function\n(1.0, 2.0)*x_0\nsage: m * v[0]                     # matrix * linear function\n[x_0   2*x_0]\n[3*x_0 4*x_0]\nsage: v * m                        # MIPVariable * matrix\n(3.0, 4.0)*x_1 + (1.0, 2.0)*x_0\n```\nThe last multiplication including MIPvariables is incomplete: You can't write `m * v` since MIPvariables do not fit into the parent/element framework, so they don't really participate in coercion. This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram. Once that is done it'll be easy to add (in)equalities of the new tensor elements.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99\">846cba6</a></td><td><code>Implement tensor product of linear functions and free modules</code></td></tr></table>\n",
    "created_at": "2014-08-07T01:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221045",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">Comment 8</div>

I've started with tensors (over the base ring) of linear functions and free modules. This implements:

```
sage: m = matrix([[1,2],[3,4]]);  m
[1 2]
[3 4]
sage: p = MixedIntegerLinearProgram()
sage: v = p.new_variable(nonnegative=True)
sage: m.row(0) * v[0]              # vector * linear function
(1.0, 2.0)*x_0
sage: m * v[0]                     # matrix * linear function
[x_0   2*x_0]
[3*x_0 4*x_0]
sage: v * m                        # MIPVariable * matrix
(3.0, 4.0)*x_1 + (1.0, 2.0)*x_0
```
The last multiplication including MIPvariables is incomplete: You can't write `m * v` since MIPvariables do not fit into the parent/element framework, so they don't really participate in coercion. This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram. Once that is done it'll be easy to add (in)equalities of the new tensor elements.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99">846cba6</a></td><td><code>Implement tensor product of linear functions and free modules</code></td></tr></table>




---

archive/issue_comments_221046.json:
```json
{
    "body": "Commit: **[846cba6](https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99)**",
    "created_at": "2014-08-07T01:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221046",
    "user": "https://github.com/vbraun"
}
```

Commit: **[846cba6](https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99)**



---

archive/issue_comments_221047.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nHellooooo !\n\n> This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.\n\nCan it result in any slowdown for the usual usage of those variables ?\n\nNathann",
    "created_at": "2014-08-07T07:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221047",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">Comment 9</div>

Hellooooo !

> This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.

Can it result in any slowdown for the usual usage of those variables ?

Nathann



---

archive/issue_comments_221048.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@nathanncohen](#comment%3A9):\n> Hellooooo !\n> \n> > This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.\n\n> \n> Can it result in any slowdown for the usual usage of those variables ?\n\nI'd be surprised.\nThe real bottleneck is in interacting with the solver and solving itself, anyway.\n\nBesides, the current prevalent use of MIP frontend is very inefficient, as you collect the linear system into a matrix, internally, and the backend is called each time a new constraint is added, right? It's certainly quicker to pass the matrix directly and call the backend once.",
    "created_at": "2014-08-07T09:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221048",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@nathanncohen](#comment%3A9):
> Hellooooo !
> 
> > This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.

> 
> Can it result in any slowdown for the usual usage of those variables ?

I'd be surprised.
The real bottleneck is in interacting with the solver and solving itself, anyway.

Besides, the current prevalent use of MIP frontend is very inefficient, as you collect the linear system into a matrix, internally, and the backend is called each time a new constraint is added, right? It's certainly quicker to pass the matrix directly and call the backend once.



---

archive/issue_comments_221049.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@dimpase](#comment%3A10):\n> Replying to [@nathanncohen](#comment%3A9):\n> > Hellooooo !\n> > \n> > > This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.\n\n> > \n> > Can it result in any slowdown for the usual usage of those variables ?\n\n> I'd be surprised.\n> The real bottleneck is in interacting with the solver and solving itself, anyway.\n\nWell, I need to compute a max matching on a large bipartite graph for some designs I build these days, and ...\n\n```\nsage: g=graphs.CompleteBipartiteGraph(100,200)\nsage: %time _=g.matching(algorithm=\"LP\", verbose=2)\n...\n\nRoot node processing (before b&c):\n  Real time             =    0.17 sec. (104.83 ticks)\nParallel b&c, 4 threads:\n  Real time             =    0.00 sec. (0.00 ticks)\n  Sync time (average)   =    0.00 sec.\n  Wait time (average)   =    0.00 sec.\n                          ------------\nTotal (root+branch&cut) =    0.17 sec. (104.83 ticks)\nCPU times: user 1.25 s, sys: 24 ms, total: 1.28 s\nWall time: 1.06 s\n```\n\nSage reports more than 1second and the solver report 0.17. I don't really know where the computations go to be honest at %prun does not say much. And I suspect that it does not say much because the code that takes time is written in Cython, i.e. the LP variables. But I haven't found a proof yet.\n\n> Besides, the current prevalent use of MIP frontend is very inefficient, as you collect the linear system into a matrix, internally, and the backend is called each time a new constraint is added, right? It's certainly quicker to pass the matrix directly and call the backend once.\n\nIt may be faster, but the two must be possible. You don't want to have to build a matrix for any of these problems, the code would be ugly as hell. Being able to index variables with \"anything\" certainly adds something, and not only for readability.\n\nhttp://steinertriples.fr/ncohen/tut/LP_examples/\n\nNathann",
    "created_at": "2014-08-07T09:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221049",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@dimpase](#comment%3A10):
> Replying to [@nathanncohen](#comment%3A9):
> > Hellooooo !
> > 
> > > This needs to be fixed, probably best by making MIPvariables the elements of the parent MixedIntegerLinearProgram.

> > 
> > Can it result in any slowdown for the usual usage of those variables ?

> I'd be surprised.
> The real bottleneck is in interacting with the solver and solving itself, anyway.

Well, I need to compute a max matching on a large bipartite graph for some designs I build these days, and ...

```
sage: g=graphs.CompleteBipartiteGraph(100,200)
sage: %time _=g.matching(algorithm="LP", verbose=2)
...

Root node processing (before b&c):
  Real time             =    0.17 sec. (104.83 ticks)
Parallel b&c, 4 threads:
  Real time             =    0.00 sec. (0.00 ticks)
  Sync time (average)   =    0.00 sec.
  Wait time (average)   =    0.00 sec.
                          ------------
Total (root+branch&cut) =    0.17 sec. (104.83 ticks)
CPU times: user 1.25 s, sys: 24 ms, total: 1.28 s
Wall time: 1.06 s
```

Sage reports more than 1second and the solver report 0.17. I don't really know where the computations go to be honest at %prun does not say much. And I suspect that it does not say much because the code that takes time is written in Cython, i.e. the LP variables. But I haven't found a proof yet.

> Besides, the current prevalent use of MIP frontend is very inefficient, as you collect the linear system into a matrix, internally, and the backend is called each time a new constraint is added, right? It's certainly quicker to pass the matrix directly and call the backend once.

It may be faster, but the two must be possible. You don't want to have to build a matrix for any of these problems, the code would be ugly as hell. Being able to index variables with "anything" certainly adds something, and not only for readability.

http://steinertriples.fr/ncohen/tut/LP_examples/

Nathann



---

archive/issue_comments_221050.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@vbraun](#comment%3A8):\n> I've started with tensors (over the base ring) of linear functions and free modules. This implements:\n> \n> ```\n> ...\n> sage: v * m                        # MIPVariable * matrix\n> (3.0, 4.0)*x_1 + (1.0, 2.0)*x_0\n> ```\n\nthis is very nice; I hope this can be a basis for implementing an interface to \"conic programming\". That is, whenever you have a convex cone K in `R^n` (e.g. the positive ortant, or `{(x_0,...,x_{n-1}) | x_0^2 >= sum_{j=1}^{n-1} x_j^2}`, known as \"icecream cone\") you have a partial order `<_K` on `R^n` defined by `x<_K y` iff y-k is in K.\n\nthen one can do linear optimisation on the intersection of K with an affine subspace. For K being the positive ortant this is just the usual LP; for K the icecream cone this is a kind of norm minimisation, etc. CVXOPT has implementations for several different cones like this (by the way, semidefinite programming is yet another example, K being the cone of psd matrices in `R^nxn`).",
    "created_at": "2014-08-07T09:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221050",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@vbraun](#comment%3A8):
> I've started with tensors (over the base ring) of linear functions and free modules. This implements:
> 
> ```
> ...
> sage: v * m                        # MIPVariable * matrix
> (3.0, 4.0)*x_1 + (1.0, 2.0)*x_0
> ```

this is very nice; I hope this can be a basis for implementing an interface to "conic programming". That is, whenever you have a convex cone K in `R^n` (e.g. the positive ortant, or `{(x_0,...,x_{n-1}) | x_0^2 >= sum_{j=1}^{n-1} x_j^2}`, known as "icecream cone") you have a partial order `<_K` on `R^n` defined by `x<_K y` iff y-k is in K.

then one can do linear optimisation on the intersection of K with an affine subspace. For K being the positive ortant this is just the usual LP; for K the icecream cone this is a kind of norm minimisation, etc. CVXOPT has implementations for several different cones like this (by the way, semidefinite programming is yet another example, K being the cone of psd matrices in `R^nxn`).



---

archive/issue_comments_221051.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@nathanncohen](#comment%3A11):\n> Well, I need to compute a max matching on a large bipartite graph for some designs I build these days, and ...\n> \n\n\nBTW, using LP for this is a very inefficient thing. The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...",
    "created_at": "2014-08-07T09:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221051",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@nathanncohen](#comment%3A11):
> Well, I need to compute a max matching on a large bipartite graph for some designs I build these days, and ...
> 


BTW, using LP for this is a very inefficient thing. The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...



---

archive/issue_comments_221052.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\n> BTW, using LP for this is a very inefficient thing. \n\nHow do you think you can prove this assertion ? Especially when the polytope of perfect matchings in a bipartite graph is integer ?..\n\n> The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...\n\nClaim without proof. Also, this isn't implemented, lest of all efficiently implemented.\n\nNathann",
    "created_at": "2014-08-07T09:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221052",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">Comment 14</div>

> BTW, using LP for this is a very inefficient thing. 

How do you think you can prove this assertion ? Especially when the polytope of perfect matchings in a bipartite graph is integer ?..

> The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...

Claim without proof. Also, this isn't implemented, lest of all efficiently implemented.

Nathann



---

archive/issue_comments_221053.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> > BTW, using LP for this is a very inefficient thing. \n\n> \n> How do you think you can prove this assertion ? Especially when the polytope of perfect matchings in a bipartite graph is integer ?..\n> \n> > The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...\n\n> \n> Claim without proof. Also, this isn't implemented, lest of all efficiently implemented.\n\nCome on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)\n\nConvert your graph into networkx one and call it...\nAlthough indeed this might not be the fastest implementation around, sure.",
    "created_at": "2014-08-07T10:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221053",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@nathanncohen](#comment%3A14):
> > BTW, using LP for this is a very inefficient thing. 

> 
> How do you think you can prove this assertion ? Especially when the polytope of perfect matchings in a bipartite graph is integer ?..
> 
> > The classical combinatorial algorithms (see e.g. [Hungarian method](http://equatorialmaths.wordpress.com/2009/09/23/hungarian-algorithm-take-1/)) will be much faster...

> 
> Claim without proof. Also, this isn't implemented, lest of all efficiently implemented.

Come on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)

Convert your graph into networkx one and call it...
Although indeed this might not be the fastest implementation around, sure.



---

archive/issue_comments_221054.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\n> Come on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)\n\nNo, that is Edmond's algorith for general graphs (it is not bipartite-specific) and it is also the default algorithm called by `Graph.matching` in case. Plus it's pure Python.\n\nNathann",
    "created_at": "2014-08-07T10:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221054",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">Comment 16</div>

> Come on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)

No, that is Edmond's algorith for general graphs (it is not bipartite-specific) and it is also the default algorithm called by `Graph.matching` in case. Plus it's pure Python.

Nathann



---

archive/issue_comments_221055.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@nathanncohen](#comment%3A16):\n> > Come on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)\n\n> \n> No, that is Edmond's algorith for general graphs (it is not bipartite-specific) and it is also the default algorithm called by `Graph.matching` in case. Plus it's pure Python.\n\n>\n\nEdmonds' on bipartite graphs will do more or less the same amount of work as the Hungarian on bipartite graphs. Trust me, I taught these things few times, I used to know details, and even implemented Hungarian method in C and in Python :-)\n\nAlthough Hungarian isn't the fastest guy in town. \n\nPS. It is common (to the combinatorial optimisation community) knowledge that LP-based methods hopelessly lose here. I don't make baseless claims here, I know well what I am talking about...",
    "created_at": "2014-08-07T10:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221055",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@nathanncohen](#comment%3A16):
> > Come on, it is implemented e.g. here: [networkx](http://networkx.github.io/documentation/latest/reference/generated/networkx.algorithms.matching.maximal_matching.html#networkx.algorithms.matching.maximal_matching)

> 
> No, that is Edmond's algorith for general graphs (it is not bipartite-specific) and it is also the default algorithm called by `Graph.matching` in case. Plus it's pure Python.

>

Edmonds' on bipartite graphs will do more or less the same amount of work as the Hungarian on bipartite graphs. Trust me, I taught these things few times, I used to know details, and even implemented Hungarian method in C and in Python :-)

Although Hungarian isn't the fastest guy in town. 

PS. It is common (to the combinatorial optimisation community) knowledge that LP-based methods hopelessly lose here. I don't make baseless claims here, I know well what I am talking about...



---

archive/issue_comments_221056.json:
```json
{
    "body": "Changed commit from **[846cba6](https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99)** to **[04f9ce1](https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15)**",
    "created_at": "2014-08-09T00:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[846cba6](https://github.com/sagemath/sagetrac-mirror/commit/846cba629c68e46f274de8d6cbbaabd3cdbb0a99)** to **[04f9ce1](https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15)**



---

archive/issue_comments_221057.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15\">04f9ce1</a></td><td><code>Add a parent for MIPVariables</code></td></tr></table>\n",
    "created_at": "2014-08-09T00:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221057",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15">04f9ce1</a></td><td><code>Add a parent for MIPVariables</code></td></tr></table>




---

archive/issue_comments_221058.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI've added a Parent for MIPVariables, this allows for matrix multiplication to work from both sides:\n\n```\n            sage: p = MixedIntegerLinearProgram()\n            sage: v = p.new_variable()\n            sage: m = matrix([[1,2], [3,4]])\n            sage: v * m\n            (3.0, 4.0)*x_1 + (1.0, 2.0)*x_0\n            sage: m * v\n            (2.0, 4.0)*x_1 + (1.0, 3.0)*x_0\n```\nThe parent must refer back to the mip so there is a reference cycle (#12616). Deal with it...",
    "created_at": "2014-08-09T00:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221058",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">Comment 19</div>

I've added a Parent for MIPVariables, this allows for matrix multiplication to work from both sides:

```
            sage: p = MixedIntegerLinearProgram()
            sage: v = p.new_variable()
            sage: m = matrix([[1,2], [3,4]])
            sage: v * m
            (3.0, 4.0)*x_1 + (1.0, 2.0)*x_0
            sage: m * v
            (2.0, 4.0)*x_1 + (1.0, 3.0)*x_0
```
The parent must refer back to the mip so there is a reference cycle (#12616). Deal with it...



---

archive/issue_comments_221059.json:
```json
{
    "body": "Changed commit from **[04f9ce1](https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15)** to **[0a09269](https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb)**",
    "created_at": "2014-08-09T13:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221059",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[04f9ce1](https://github.com/sagemath/sagetrac-mirror/commit/04f9ce174c2c7f9b205dfb1d5ef67710d9553f15)** to **[0a09269](https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb)**



---

archive/issue_comments_221060.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c64eb78e91035f91a6a7461069e86b8fe593e93\">4c64eb7</a></td><td><code>Make the parent of MIPVariables a singleton</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb\">0a09269</a></td><td><code>Enable p.<x> = MixedIntegerLinearProgram() syntax</code></td></tr></table>\n",
    "created_at": "2014-08-09T13:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221060",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c64eb78e91035f91a6a7461069e86b8fe593e93">4c64eb7</a></td><td><code>Make the parent of MIPVariables a singleton</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb">0a09269</a></td><td><code>Enable p.<x> = MixedIntegerLinearProgram() syntax</code></td></tr></table>




---

archive/issue_comments_221061.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b\">c09be57</a></td><td><code>Match x_i print order</code></td></tr></table>\n",
    "created_at": "2014-08-10T14:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221061",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b">c09be57</a></td><td><code>Match x_i print order</code></td></tr></table>




---

archive/issue_comments_221062.json:
```json
{
    "body": "Changed commit from **[0a09269](https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb)** to **[c09be57](https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b)**",
    "created_at": "2014-08-10T14:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221062",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0a09269](https://github.com/sagemath/sagetrac-mirror/commit/0a09269b45ec12f7dbe2567bb403db7eee6debdb)** to **[c09be57](https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b)**



---

archive/issue_events_221349.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221349"
}
```



---

archive/issue_events_221350.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221350"
}
```



---

archive/issue_comments_221063.json:
```json
{
    "body": "Changed commit from **[c09be57](https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b)** to **[a94e77e](https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309)**",
    "created_at": "2014-08-11T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221063",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c09be57](https://github.com/sagemath/sagetrac-mirror/commit/c09be57f5a5b80d6e9b45735cdf15502f0c2182b)** to **[a94e77e](https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309)**



---

archive/issue_comments_221064.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309\">a94e77e</a></td><td><code>Symbolic (in)equality involving linear tensors</code></td></tr></table>\n",
    "created_at": "2014-08-11T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221064",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309">a94e77e</a></td><td><code>Symbolic (in)equality involving linear tensors</code></td></tr></table>




---

archive/issue_comments_221065.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nInequalities with vector/matrix-valued linear functions:\n\n```\nsage: mip.<x> = MixedIntegerLinearProgram()\nsage: x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]]) + x[1] * identity_matrix(3) >= 0\n[0 0 0]    [x_1 0         x_0]\n[0 0 0] <= [0   x_0 + x_1 0  ]\n[0 0 0]    [x_0 0         x_1]\n```",
    "created_at": "2014-08-11T21:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221065",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>

Inequalities with vector/matrix-valued linear functions:

```
sage: mip.<x> = MixedIntegerLinearProgram()
sage: x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]]) + x[1] * identity_matrix(3) >= 0
[0 0 0]    [x_1 0         x_0]
[0 0 0] <= [0   x_0 + x_1 0  ]
[0 0 0]    [x_0 0         x_1]
```



---

archive/issue_comments_221066.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nWhats the point of the `add_linear_constraints` method in backends? Add multiple trivial constraints without a way to hand it any coefficient data? Really? ;-)",
    "created_at": "2014-08-12T16:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221066",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">Comment 25</div>

Whats the point of the `add_linear_constraints` method in backends? Add multiple trivial constraints without a way to hand it any coefficient data? Really? ;-)



---

archive/issue_comments_221067.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\n> Whats the point of the `add_linear_constraints` method in backends? Add multiple trivial constraints without a way to hand it any coefficient data? Really? ;-)\n\nThey also expose the solver's corresponding functions, which do the very same. And that's probably where we will get a speedup, for it seems that calling add_constraint n times instead of calling add_constraints(n) does make a difference.\n\nNathann",
    "created_at": "2014-08-12T16:18:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221067",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">Comment 26</div>

> Whats the point of the `add_linear_constraints` method in backends? Add multiple trivial constraints without a way to hand it any coefficient data? Really? ;-)

They also expose the solver's corresponding functions, which do the very same. And that's probably where we will get a speedup, for it seems that calling add_constraint n times instead of calling add_constraints(n) does make a difference.

Nathann



---

archive/issue_comments_221068.json:
```json
{
    "body": "Changed commit from **[a94e77e](https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309)** to **[fd10630](https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154)**",
    "created_at": "2014-08-12T16:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221068",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a94e77e](https://github.com/sagemath/sagetrac-mirror/commit/a94e77e87c4acd07252f7dfdf31095e55cc61309)** to **[fd10630](https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154)**



---

archive/issue_comments_221069.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c5c024c826cb2fe8ebdf6637614cdaf4bd3b210\">1c5c024</a></td><td><code>Full doctest coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154\">fd10630</a></td><td><code>Clean up add_constraint()</code></td></tr></table>\n",
    "created_at": "2014-08-12T16:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c5c024c826cb2fe8ebdf6637614cdaf4bd3b210">1c5c024</a></td><td><code>Full doctest coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154">fd10630</a></td><td><code>Clean up add_constraint()</code></td></tr></table>




---

archive/issue_comments_221070.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@nathanncohen](#comment%3A26):\n> They also expose the solver's corresponding functions, which do the very same. And that's probably where we will get a speedup, for it seems that calling add_constraint n times instead of calling add_constraints(n) does make a difference.\n\nObviously it is very fast to solve trivial constraints. Read my question again.",
    "created_at": "2014-08-12T16:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221070",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@nathanncohen](#comment%3A26):
> They also expose the solver's corresponding functions, which do the very same. And that's probably where we will get a speedup, for it seems that calling add_constraint n times instead of calling add_constraints(n) does make a difference.

Obviously it is very fast to solve trivial constraints. Read my question again.



---

archive/issue_comments_221071.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThis:\n\n```\n    cpdef add_linear_constraint(self, constraints, lower_bound, upper_bound, name=*)\n    cpdef add_linear_constraints(self, int number, lower_bound, upper_bound, names=*)\n```",
    "created_at": "2014-08-12T16:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221071",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">Comment 29</div>

This:

```
    cpdef add_linear_constraint(self, constraints, lower_bound, upper_bound, name=*)
    cpdef add_linear_constraints(self, int number, lower_bound, upper_bound, names=*)
```



---

archive/issue_comments_221072.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\n> Obviously it is very fast to solve trivial constraints. Read my question again.\n\nVolker you make mistakes too, and if there is something I don't stand for long it is people giving me orders. If there is a misunderstanding, we will clear it.\n\nWhat I said is that people (some I met, or myself in the past) noticed that it took time to add constraints to a LP. I am not talking of solving the LP itself. Just imagine that the matrix is stored as a dense contiguous matrix, and that adding a row means having to copy everything.\n\nI don't know if this is how it is implemented, but on some occasions adding constraints one by one (each with the same number of nonzero coefficients and looking the same) takes a time which is not constant per call, i.e. calling `add_constraint` on a matrix that is already big is longer than on an empty matrix.\n\nWhich means that calling add_linear_constraints may make a difference. Which would also explain why the solvers contain this in their API, even though it seems useless at first.\n\nI just tried it again by adding the same constraint \"b[3]<=8\" many many times but in this case the time seems to be constant. Perhaps there is something else missing.\n\nNathann",
    "created_at": "2014-08-12T16:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221072",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">Comment 30</div>

> Obviously it is very fast to solve trivial constraints. Read my question again.

Volker you make mistakes too, and if there is something I don't stand for long it is people giving me orders. If there is a misunderstanding, we will clear it.

What I said is that people (some I met, or myself in the past) noticed that it took time to add constraints to a LP. I am not talking of solving the LP itself. Just imagine that the matrix is stored as a dense contiguous matrix, and that adding a row means having to copy everything.

I don't know if this is how it is implemented, but on some occasions adding constraints one by one (each with the same number of nonzero coefficients and looking the same) takes a time which is not constant per call, i.e. calling `add_constraint` on a matrix that is already big is longer than on an empty matrix.

Which means that calling add_linear_constraints may make a difference. Which would also explain why the solvers contain this in their API, even though it seems useless at first.

I just tried it again by adding the same constraint "b[3]<=8" many many times but in this case the time seems to be constant. Perhaps there is something else missing.

Nathann



---

archive/issue_comments_221073.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nI'm not trying to give you orders, I just want to know whether `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?",
    "created_at": "2014-08-12T17:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221073",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">Comment 31</div>

I'm not trying to give you orders, I just want to know whether `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?



---

archive/issue_comments_221074.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\n> I'm not trying to give you orders, I just want to know whether `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?\n\nI guess that it is meant to allocate space for new rows, before changing the coefficient. As I said above I implemented this function only to expose those that are available in the solvers, and they do the very same thing (if not less).\n\nGLPK: takes only a number of rows as an argument. Nothing else\n\n```\nglp_add_rows(self.lp, number)\n```\n\nCplex: takes a number of rows and the corresponding upper/lower bound. Plus names\n\n```\nCPXnewrows(self.env, self.lp, number, bound, sense, rng, c_names if names else NULL) #\n```\n\nLooks like the others don't have this function implemented.\n\nNathann",
    "created_at": "2014-08-12T20:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221074",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">Comment 32</div>

> I'm not trying to give you orders, I just want to know whether `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?

I guess that it is meant to allocate space for new rows, before changing the coefficient. As I said above I implemented this function only to expose those that are available in the solvers, and they do the very same thing (if not less).

GLPK: takes only a number of rows as an argument. Nothing else

```
glp_add_rows(self.lp, number)
```

Cplex: takes a number of rows and the corresponding upper/lower bound. Plus names

```
CPXnewrows(self.env, self.lp, number, bound, sense, rng, c_names if names else NULL) #
```

Looks like the others don't have this function implemented.

Nathann



---

archive/issue_comments_221075.json:
```json
{
    "body": "Changed commit from **[fd10630](https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154)** to **[08bc41a](https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5)**",
    "created_at": "2014-08-12T20:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221075",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd10630](https://github.com/sagemath/sagetrac-mirror/commit/fd10630a8e4884d3a44f55cc6e1d4c83ea7ee154)** to **[08bc41a](https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5)**



---

archive/issue_comments_221076.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5\">08bc41a</a></td><td><code>Allow specifying constraints via vector-valued linear functions</code></td></tr></table>\n",
    "created_at": "2014-08-12T20:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221076",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5">08bc41a</a></td><td><code>Allow specifying constraints via vector-valued linear functions</code></td></tr></table>




---

archive/issue_comments_221077.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26\">e7d48ef</a></td><td><code>Also document matrix * MIPVariable notation</code></td></tr></table>\n",
    "created_at": "2014-08-12T21:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34" align="right">Comment 34</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26">e7d48ef</a></td><td><code>Also document matrix * MIPVariable notation</code></td></tr></table>




---

archive/issue_comments_221078.json:
```json
{
    "body": "Changed commit from **[08bc41a](https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5)** to **[e7d48ef](https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26)**",
    "created_at": "2014-08-12T21:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221078",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[08bc41a](https://github.com/sagemath/sagetrac-mirror/commit/08bc41aec5233abd6c0f215b6875c38bcd80aca5)** to **[e7d48ef](https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26)**



---

archive/issue_comments_221079.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nI'm proposing a new interface for vector-valued linear functions. This should be the most natural way to hand over multiple constraints in one call. By default, this just falls back to adding scalar constraints individually. In another ticket we can add special backend support for that.",
    "created_at": "2014-08-12T21:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221079",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">Comment 35</div>

I'm proposing a new interface for vector-valued linear functions. This should be the most natural way to hand over multiple constraints in one call. By default, this just falls back to adding scalar constraints individually. In another ticket we can add special backend support for that.



---

archive/issue_comments_221080.json:
```json
{
    "body": "Changed commit from **[e7d48ef](https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26)** to **[0090edc](https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c)**",
    "created_at": "2014-08-12T21:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e7d48ef](https://github.com/sagemath/sagetrac-mirror/commit/e7d48ef775732ce5e3f72ea976116c19888e7d26)** to **[0090edc](https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c)**



---

archive/issue_comments_221081.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c\">0090edc</a></td><td><code>Improve documentation</code></td></tr></table>\n",
    "created_at": "2014-08-12T21:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221081",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36" align="right">Comment 36</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c">0090edc</a></td><td><code>Improve documentation</code></td></tr></table>




---

archive/issue_comments_221082.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2014-08-12T22:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221082",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_comments_221083.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nThis is all that should go into this ticket, please review.",
    "created_at": "2014-08-12T22:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221083",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">Comment 37</div>

This is all that should go into this ticket, please review.



---

archive/issue_events_221351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-12T22:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221351"
}
```



---

archive/issue_comments_221084.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\ntypo:\n\nimplinicly -> implicitly (?) in `linear_tensor.py`\n\nand there is also at least one instanciate* instead of instantiate* in the diff...",
    "created_at": "2014-08-13T08:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221084",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">Comment 38</div>

typo:

implinicly -> implicitly (?) in `linear_tensor.py`

and there is also at least one instanciate* instead of instantiate* in the diff...



---

archive/issue_comments_221085.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@nathanncohen](#comment%3A32):\n> `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?\n> \n> I guess that it is meant to allocate space for new rows, before changing the coefficient. As I said above I implemented this function only to expose those that are available in the solvers, and they do the very same thing (if not `less).\n\nGUROBI does have [`GRBaddconstrs`](http://www.gurobi.com/documentation/5.6/reference-manual/c_grbaddconstrs) which a full thing, in the sense you can specify a bunch of constraints, specified by a sparse matrix, at once.\n\n> \n> GLPK: takes only a number of rows as an argument. Nothing else\n> \n> ```\n> glp_add_rows(self.lp, number)\n> ```\n> \n> Cplex: takes a number of rows and the corresponding upper/lower bound. Plus names\n> \n> ```\n> CPXnewrows(self.env, self.lp, number, bound, sense, rng, c_names if names else NULL) #\n> ```\n\nthere is [`CPXaddrows`](http://web.njit.edu/all_topics/Prog_Lang_Docs/cplex80/doc/refman/html/addrows.html) in CPLEX, similar to the one in GUROBI.",
    "created_at": "2014-08-13T09:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221085",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@nathanncohen](#comment%3A32):
> `add_linear_constraints` is supposed to work, and if not how you'd envision it to work. Create empty rows and then mutate later? Or is the constraint data just missing from the argspec? or what?
> 
> I guess that it is meant to allocate space for new rows, before changing the coefficient. As I said above I implemented this function only to expose those that are available in the solvers, and they do the very same thing (if not `less).

GUROBI does have [`GRBaddconstrs`](http://www.gurobi.com/documentation/5.6/reference-manual/c_grbaddconstrs) which a full thing, in the sense you can specify a bunch of constraints, specified by a sparse matrix, at once.

> 
> GLPK: takes only a number of rows as an argument. Nothing else
> 
> ```
> glp_add_rows(self.lp, number)
> ```
> 
> Cplex: takes a number of rows and the corresponding upper/lower bound. Plus names
> 
> ```
> CPXnewrows(self.env, self.lp, number, bound, sense, rng, c_names if names else NULL) #
> ```

there is [`CPXaddrows`](http://web.njit.edu/all_topics/Prog_Lang_Docs/cplex80/doc/refman/html/addrows.html) in CPLEX, similar to the one in GUROBI.



---

archive/issue_comments_221086.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@vbraun](#comment%3A24):\n> Inequalities with vector/matrix-valued linear functions:\n> \n> ```\n> sage: mip.<x> = MixedIntegerLinearProgram()\n> sage: x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]]) + x[1] * identity_matrix(3) >= 0\n> [0 0 0]    [x_1 0         x_0]\n> [0 0 0] <= [0   x_0 + x_1 0  ]\n> [0 0 0]    [x_0 0         x_1]\n> ```\n\nis it expected that `mip.show()` shows some kind of nonsense after such inequalities are entered?",
    "created_at": "2014-08-13T12:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221086",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@vbraun](#comment%3A24):
> Inequalities with vector/matrix-valued linear functions:
> 
> ```
> sage: mip.<x> = MixedIntegerLinearProgram()
> sage: x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]]) + x[1] * identity_matrix(3) >= 0
> [0 0 0]    [x_1 0         x_0]
> [0 0 0] <= [0   x_0 + x_1 0  ]
> [0 0 0]    [x_0 0         x_1]
> ```

is it expected that `mip.show()` shows some kind of nonsense after such inequalities are entered?



---

archive/issue_comments_221087.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nRight now you can only add scalar and vector-valued linear constraints. I intended the matrix notation for semidefinite programming. But you can't do anything with them yet.",
    "created_at": "2014-08-13T12:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221087",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">Comment 41</div>

Right now you can only add scalar and vector-valued linear constraints. I intended the matrix notation for semidefinite programming. But you can't do anything with them yet.



---

archive/issue_comments_221088.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@vbraun](#comment%3A41):\n> Right now you can only add scalar and vector-valued linear constraints. I intended the matrix notation for semidefinite programming. \n\nGreat! \n\nHow does one recover the original matrices x[i]'s are multiplied with? I see that now each constraint gets .rhs which is a matrix of linear forms. For SDP backends one would typically want the original matrices. (Of course they can still be found...)\n\nWell, this is probably for another ticket.",
    "created_at": "2014-08-13T12:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221088",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@vbraun](#comment%3A41):
> Right now you can only add scalar and vector-valued linear constraints. I intended the matrix notation for semidefinite programming. 

Great! 

How does one recover the original matrices x[i]'s are multiplied with? I see that now each constraint gets .rhs which is a matrix of linear forms. For SDP backends one would typically want the original matrices. (Of course they can still be found...)

Well, this is probably for another ticket.



---

archive/issue_comments_221089.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1\">039a835</a></td><td><code>Spelling and docstring fixes</code></td></tr></table>\n",
    "created_at": "2014-08-13T13:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221089",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43" align="right">Comment 43</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1">039a835</a></td><td><code>Spelling and docstring fixes</code></td></tr></table>




---

archive/issue_comments_221090.json:
```json
{
    "body": "Changed commit from **[0090edc](https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c)** to **[039a835](https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1)**",
    "created_at": "2014-08-13T13:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221090",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0090edc](https://github.com/sagemath/sagetrac-mirror/commit/0090edc953f5930e0a10b0c981e99c317db6c27c)** to **[039a835](https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1)**



---

archive/issue_comments_221091.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nIMHO if you want to pass a dense matrix you should just implement a separate method for that. Since the point of the interface is to simplify the variable ordering/indexing I'm cutting the matrix into columns and only store the columns. The solver backend should then put them back into a matrix (or whatever storage the backend uses) in the backend's order.",
    "created_at": "2014-08-13T13:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221091",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:44" align="right">Comment 44</div>

IMHO if you want to pass a dense matrix you should just implement a separate method for that. Since the point of the interface is to simplify the variable ordering/indexing I'm cutting the matrix into columns and only store the columns. The solver backend should then put them back into a matrix (or whatever storage the backend uses) in the backend's order.



---

archive/issue_comments_221092.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nIn the previous comment I was talking about vector-valued linear functions.\n\nFor matrix-valued linear functions you get the coefficient matrices in the usual way:\n\n```\nsage: m = x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]])\nsage: m.dict()[0]\n[0.0 0.0 1.0]\n[0.0 1.0 0.0]\n[1.0 0.0 0.0]\n```",
    "created_at": "2014-08-13T13:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221092",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">Comment 45</div>

In the previous comment I was talking about vector-valued linear functions.

For matrix-valued linear functions you get the coefficient matrices in the usual way:

```
sage: m = x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]])
sage: m.dict()[0]
[0.0 0.0 1.0]
[0.0 1.0 0.0]
[1.0 0.0 0.0]
```



---

archive/issue_comments_221093.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@vbraun](#comment%3A45):\n> In the previous comment I was talking about vector-valued linear functions.\n> \n> For matrix-valued linear functions you get the coefficient matrices in the usual way:\n> \n> ```\n> sage: m = x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]])\n> sage: m.dict()[0]\n> [0.0 0.0 1.0]\n> [0.0 1.0 0.0]\n> [1.0 0.0 0.0]\n> ```\n\ncan this be made explicit in a docstring? Otherwise looks good to me.",
    "created_at": "2014-08-13T16:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221093",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@vbraun](#comment%3A45):
> In the previous comment I was talking about vector-valued linear functions.
> 
> For matrix-valued linear functions you get the coefficient matrices in the usual way:
> 
> ```
> sage: m = x[0] * matrix([[0,0,1],[0,1,0],[1,0,0]])
> sage: m.dict()[0]
> [0.0 0.0 1.0]
> [0.0 1.0 0.0]
> [1.0 0.0 0.0]
> ```

can this be made explicit in a docstring? Otherwise looks good to me.



---

archive/issue_comments_221094.json:
```json
{
    "body": "Changed commit from **[039a835](https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1)** to **[e2ddf8c](https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a)**",
    "created_at": "2014-08-13T22:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221094",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[039a835](https://github.com/sagemath/sagetrac-mirror/commit/039a835cd4b2a47fb3fe3ef0670a687f8b7ee3e1)** to **[e2ddf8c](https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a)**



---

archive/issue_comments_221095.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a\">e2ddf8c</a></td><td><code>Simplify and document how to extract coefficients</code></td></tr></table>\n",
    "created_at": "2014-08-13T22:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221095",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48" align="right">Comment 48</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a">e2ddf8c</a></td><td><code>Simplify and document how to extract coefficients</code></td></tr></table>




---

archive/issue_comments_221096.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@dimpase](#comment%3A46):\n> can this be made explicit in a docstring?\n\ndone",
    "created_at": "2014-08-13T22:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221096",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@dimpase](#comment%3A46):
> can this be made explicit in a docstring?

done



---

archive/issue_comments_221097.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nis the syntax\n\n```\nblah.<foo>=MixedIntegerLinearProgram()\n```\nnew? I can't recall seeing this before. It should be documented in mip.pyx, as an alternative to\n\n```\nblah=MixedIntegerLinearProgram()\nfoo=blah.new_variable()\n```",
    "created_at": "2014-08-14T05:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221097",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">Comment 50</div>

is the syntax

```
blah.<foo>=MixedIntegerLinearProgram()
```
new? I can't recall seeing this before. It should be documented in mip.pyx, as an alternative to

```
blah=MixedIntegerLinearProgram()
foo=blah.new_variable()
```



---

archive/issue_comments_221098.json:
```json
{
    "body": "Changed commit from **[e2ddf8c](https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a)** to **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**",
    "created_at": "2014-08-14T10:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221098",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e2ddf8c](https://github.com/sagemath/sagetrac-mirror/commit/e2ddf8c74a71662934b9d095c04b58c33999740a)** to **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**



---

archive/issue_comments_221099.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab\">d3d0d10</a></td><td><code>Document generator syntax some more</code></td></tr></table>\n",
    "created_at": "2014-08-14T10:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221099",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab">d3d0d10</a></td><td><code>Document generator syntax some more</code></td></tr></table>




---

archive/issue_comments_221100.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nIMHO accepting generator syntax not really something that needs to be spelled out, but is something that should be expected to work. I've used it in most new doctests so its not like it is hidden away. In any case, added another note to `new_variable`.",
    "created_at": "2014-08-14T10:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221100",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:52" align="right">Comment 52</div>

IMHO accepting generator syntax not really something that needs to be spelled out, but is something that should be expected to work. I've used it in most new doctests so its not like it is hidden away. In any case, added another note to `new_variable`.



---

archive/issue_comments_221101.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nOK!",
    "created_at": "2014-08-14T20:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221101",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">Comment 53</div>

OK!



---

archive/issue_comments_221102.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2014-08-14T20:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221102",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_221352.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-08-14T20:07:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221352"
}
```



---

archive/issue_events_221353.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-08-14T20:07:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221353"
}
```



---

archive/issue_comments_221103.json:
```json
{
    "body": "Changed branch from **[u/vbraun/add_a_matrix_of_constraints_in_a_lp](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_a_matrix_of_constraints_in_a_lp)** to **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**",
    "created_at": "2014-08-16T07:52:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221103",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/add_a_matrix_of_constraints_in_a_lp](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/add_a_matrix_of_constraints_in_a_lp)** to **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)**



---

archive/issue_events_221354.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-16T07:52:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221354"
}
```



---

archive/issue_events_221355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d2e0ebe93bcb8fcf036232d6eab929bc915b8a23",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-16T07:52:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16714#event-221355"
}
```



---

archive/issue_comments_221104.json:
```json
{
    "body": "Changed commit from **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)** to none",
    "created_at": "2014-08-17T09:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221104",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[d3d0d10](https://github.com/sagemath/sagetrac-mirror/commit/d3d0d108142add4ef9aa3c441079715327aa77ab)** to none



---

archive/issue_comments_221105.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nHello !\n\nI was just trying to see how this new code works (Thanks Volker !!!) and see what we can earn by implementing solver-specific \"add_constraints\". And while playing, I found that :\n\n```\nsage: p.<x>  = MixedIntegerLinearProgram()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-14-300a6e09d28b> in <module>()\n----> 1 p = MixedIntegerLinearProgram(names=('x',)); (x,) = p._first_ngens(1)\n\n/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.__init__ (build/cythonized/sage/numerical/mip.c:1740)()\n\nTypeError: __init__() got an unexpected keyword argument 'names'\n```\n\nNathann",
    "created_at": "2014-08-17T09:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221105",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:55" align="right">Comment 55</div>

Hello !

I was just trying to see how this new code works (Thanks Volker !!!) and see what we can earn by implementing solver-specific "add_constraints". And while playing, I found that :

```
sage: p.<x>  = MixedIntegerLinearProgram()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-14-300a6e09d28b> in <module>()
----> 1 p = MixedIntegerLinearProgram(names=('x',)); (x,) = p._first_ngens(1)

/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.__init__ (build/cythonized/sage/numerical/mip.c:1740)()

TypeError: __init__() got an unexpected keyword argument 'names'
```

Nathann



---

archive/issue_comments_221106.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@nathanncohen](#comment%3A55):\n> Hello !\n> \n> I was just trying to see how this new code works (Thanks Volker !!!) and see what we can earn by implementing solver-specific \"add_constraints\". And while playing, I found that :\n> \n> ```\n> sage: p.<x>  = MixedIntegerLinearProgram()\n> ---------------------------------------------------------------------------\n> TypeError                                 Traceback (most recent call last)\n> <ipython-input-14-300a6e09d28b> in <module>()\n> ----> 1 p = MixedIntegerLinearProgram(names=('x',)); (x,) = p._first_ngens(1)\n> \n> /home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.__init__ (build/cythonized/sage/numerical/mip.c:1740)()\n> \n> TypeError: __init__() got an unexpected keyword argument 'names'\n> ```\n\nhmm, it seems you must have something weird in the codebase in your local Sage install...",
    "created_at": "2014-08-17T10:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221106",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@nathanncohen](#comment%3A55):
> Hello !
> 
> I was just trying to see how this new code works (Thanks Volker !!!) and see what we can earn by implementing solver-specific "add_constraints". And while playing, I found that :
> 
> ```
> sage: p.<x>  = MixedIntegerLinearProgram()
> ---------------------------------------------------------------------------
> TypeError                                 Traceback (most recent call last)
> <ipython-input-14-300a6e09d28b> in <module>()
> ----> 1 p = MixedIntegerLinearProgram(names=('x',)); (x,) = p._first_ngens(1)
> 
> /home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.__init__ (build/cythonized/sage/numerical/mip.c:1740)()
> 
> TypeError: __init__() got an unexpected keyword argument 'names'
> ```

hmm, it seems you must have something weird in the codebase in your local Sage install...



---

archive/issue_comments_221107.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nOh right. a `touch numerical/*` and `sage -b` solved it ! Thanks !\n\nNathann",
    "created_at": "2014-08-17T15:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221107",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:57" align="right">Comment 57</div>

Oh right. a `touch numerical/*` and `sage -b` solved it ! Thanks !

Nathann



---

archive/issue_comments_221108.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nHere is the work of my MSc student on an interface for SDP solver, that builds upon this ticket: https://github.com/ingolfured/sageproject/\n\nit has a backend to the SDP solver in CVXOPT.",
    "created_at": "2014-08-17T20:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221108",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">Comment 58</div>

Here is the work of my MSc student on an interface for SDP solver, that builds upon this ticket: https://github.com/ingolfured/sageproject/

it has a backend to the SDP solver in CVXOPT.



---

archive/issue_comments_221109.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nYo Dima ! If you happen to write a LP-related ticket, could you do that ?\n\n```diff\n+++ b/src/sage/numerical/mip.pyx\n@@ -1183,7 +1183,7 @@ cdef class MixedIntegerLinearProgram(SageObject):\n             if b.is_variable_integer(i):\n                 var_type = 'an integer'\n             elif b.is_variable_binary(i):\n-                var_type = 'a boolean variable'\n+                var_type = 'a boolean'\n             else:\n                 var_type = 'a continuous'\n             if varid_name[i] == str(self.gen(i)):\n```\n\nOtherwise we get stuff like that :\n\n```\nsage: p.show()\nMaximization:\n \nConstraints:\n  x_0 <= 1.0\nVariables:\n  x_0 is a boolean variable variable (min=0.0, max=1.0)\n```\n\nAnd it does not seem worth a ticket of its own...\n\nNathann",
    "created_at": "2014-08-18T09:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16714",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16714#issuecomment-221109",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:59" align="right">Comment 59</div>

Yo Dima ! If you happen to write a LP-related ticket, could you do that ?

```diff
+++ b/src/sage/numerical/mip.pyx
@@ -1183,7 +1183,7 @@ cdef class MixedIntegerLinearProgram(SageObject):
             if b.is_variable_integer(i):
                 var_type = 'an integer'
             elif b.is_variable_binary(i):
-                var_type = 'a boolean variable'
+                var_type = 'a boolean'
             else:
                 var_type = 'a continuous'
             if varid_name[i] == str(self.gen(i)):
```

Otherwise we get stuff like that :

```
sage: p.show()
Maximization:
 
Constraints:
  x_0 <= 1.0
Variables:
  x_0 is a boolean variable variable (min=0.0, max=1.0)
```

And it does not seem worth a ticket of its own...

Nathann
