# Issue 16865: Dot2tex reverses Poset.show() upside down

archive/issues_016628.json:
```json
{
    "body": "`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says `2`, so one expect\n\n```\nPoset([[1,2],[[1,2]]]).show()\n```\n\nshowing to \"2\" on top. And so it happens without dot2tex. However, it shows \"1\" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.\n\nThis ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.\n\nCC:  @nathanncohen sage-combinat @videlec\n\nKeywords: poset, dot2tex\n\nBranch/Commit: 08e9b8e4e2109bec4ffb7d0b6807b5278495883c\n\nReviewer: Nathann Cohen, Jori M\u00e4ntysalo\n\nAuthor: Nicolas M. Thi\u00e9ry\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16865\n\n",
    "closed_at": "2015-05-14T22:40:05Z",
    "created_at": "2014-08-22T10:24:46Z",
    "labels": [
        "component: packages: optional",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Dot2tex reverses Poset.show() upside down",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16865",
    "user": "https://github.com/jm58660"
}
```
`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says `2`, so one expect

```
Poset([[1,2],[[1,2]]]).show()
```

showing to "2" on top. And so it happens without dot2tex. However, it shows "1" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.

This ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.

CC:  @nathanncohen sage-combinat @videlec

Keywords: poset, dot2tex

Branch/Commit: 08e9b8e4e2109bec4ffb7d0b6807b5278495883c

Reviewer: Nathann Cohen, Jori Mäntysalo

Author: Nicolas M. Thiéry

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16865





---

archive/issue_comments_233314.json:
```json
{
    "body": "Changing priority from trivial to minor.",
    "created_at": "2015-04-21T07:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233314",
    "user": "https://github.com/jm58660"
}
```

Changing priority from trivial to minor.



---

archive/issue_comments_233315.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,8 +1,11 @@\n+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).show()` says `2`, so one expect\n+\n ```\n Poset([[1,2],[[1,2]]]).show()\n ```\n \n-shows '1' at top if dot2tex is installed, '2' at top if not installed. Bug or feature? In any case this was changed from version 6.1 to 6.2.\n+showing to \"2\" on top. And so it happens without dot2tex. However, it shows \"1\" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2015-04-21T07:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233315",
    "user": "https://github.com/jm58660"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,8 +1,11 @@
+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).show()` says `2`, so one expect
+
 ```
 Poset([[1,2],[[1,2]]]).show()
 ```
 
-shows '1' at top if dot2tex is installed, '2' at top if not installed. Bug or feature? In any case this was changed from version 6.1 to 6.2.
+showing to "2" on top. And so it happens without dot2tex. However, it shows "1" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.
+
 
 Comment: 1
 
```




---

archive/issue_events_049311.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-04-21T07:09:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "milestone": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16865#event-49311"
}
```



---

archive/issue_comments_233316.json:
```json
{
    "body": "<a id='comment:2'></a>+1 to uniformly drawing posets with the top on top. This has annoyed\nme as well.\n\nFor LaTeX / PDF output, this is taken care of by the `backward` option\nof `set_latex_options` in `Poset.hasse_diagram` (called by\n`Poset._latex_`).\n\nFor plots, `Poset.plot` calls `Graph.plot` on the hasse diagram, and\npasses it by default the `layout=acyclic` option. The layout is then\ncomputed by `Graph.layout_acyclic` which in turn either calls\n`Graph.layout_acyclic_dummy` or `Graph.layout_graphviz` if `dot2tex`\nis available.\n\nIt turns out that `Graph.layout_acyclic_dummy` orients edges pointing\nup, while, `Graph.layout_graphviz` uses the default behaviour of\ngraphviz, namely to have edges pointing down. Hence the varying\nbehaviour.\n\n\nSoo ... what's the cleanest way out?\n\nOne strategy:\n\n- have an option in graphs stating whether the preferred acyclic\n  layout is going up or down (a generalization of the `backward` trick\n  in `set_latex_option`)\n\n- make sure both `layout_acyclic_dummy` and `layout_graphviz` honor\n  this option.\n\n- configure this option appropriately in the construction of the Hasse\n  diagram.\n\nAnother strategy would be to set as default for all graphs that the\nacyclic layout shall be going up. That's simpler. But not consistent\nwith graphviz. It also also a larger change for the users (but only\nthose using acyclic layout and having dot2tex installed).\n\n\nWhat do you think?\n\nCheers,\n                                   Nicolas",
    "created_at": "2015-05-05T09:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233316",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:2'></a>+1 to uniformly drawing posets with the top on top. This has annoyed
me as well.

For LaTeX / PDF output, this is taken care of by the `backward` option
of `set_latex_options` in `Poset.hasse_diagram` (called by
`Poset._latex_`).

For plots, `Poset.plot` calls `Graph.plot` on the hasse diagram, and
passes it by default the `layout=acyclic` option. The layout is then
computed by `Graph.layout_acyclic` which in turn either calls
`Graph.layout_acyclic_dummy` or `Graph.layout_graphviz` if `dot2tex`
is available.

It turns out that `Graph.layout_acyclic_dummy` orients edges pointing
up, while, `Graph.layout_graphviz` uses the default behaviour of
graphviz, namely to have edges pointing down. Hence the varying
behaviour.


Soo ... what's the cleanest way out?

One strategy:

- have an option in graphs stating whether the preferred acyclic
  layout is going up or down (a generalization of the `backward` trick
  in `set_latex_option`)

- make sure both `layout_acyclic_dummy` and `layout_graphviz` honor
  this option.

- configure this option appropriately in the construction of the Hasse
  diagram.

Another strategy would be to set as default for all graphs that the
acyclic layout shall be going up. That's simpler. But not consistent
with graphviz. It also also a larger change for the users (but only
those using acyclic layout and having dot2tex installed).


What do you think?

Cheers,
                                   Nicolas



---

archive/issue_comments_233317.json:
```json
{
    "body": "<a id='comment:3'></a>Unfortunately I do not know enought Sage internals to ba able to comment on this. I just reported this...",
    "created_at": "2015-05-05T10:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233317",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>Unfortunately I do not know enought Sage internals to ba able to comment on this. I just reported this...



---

archive/issue_comments_233318.json:
```json
{
    "body": "<a id='comment:5'></a>Sorry, `LaTeX` output of graphs is combinat code. I don't maintain it.",
    "created_at": "2015-05-05T11:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233318",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Sorry, `LaTeX` output of graphs is combinat code. I don't maintain it.



---

archive/issue_comments_233319.json:
```json
{
    "body": "<a id='comment:6'></a>I am not asking you to maintain it. I am asking your opinion on what should be done. Note that this is *not* about `LaTeX` output.",
    "created_at": "2015-05-05T12:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233319",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>I am not asking you to maintain it. I am asking your opinion on what should be done. Note that this is *not* about `LaTeX` output.



---

archive/issue_comments_233320.json:
```json
{
    "body": "<a id='comment:7'></a>> I am not asking you to maintain it. I am asking your opinion on what should be done.\n\n\nIt should be fixed. `Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says '2', so '2' should be on top. It apparently fails to do so when your package `dot2tex` is installed (which is why I said 'latex output'), and I do not see exactly what there is to do except... fix it.\n\nOr is the problem that graphviz/dot2tex can't plot the top element on top?\n\nNathann",
    "created_at": "2015-05-05T13:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233320",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>> I am not asking you to maintain it. I am asking your opinion on what should be done.


It should be fixed. `Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says '2', so '2' should be on top. It apparently fails to do so when your package `dot2tex` is installed (which is why I said 'latex output'), and I do not see exactly what there is to do except... fix it.

Or is the problem that graphviz/dot2tex can't plot the top element on top?

Nathann



---

archive/issue_comments_233321.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 ncohen]:\n> > I am not asking you to maintain it. I am asking your opinion on what should be done.\n\n> \n> It should be fixed.\n\n\nSure. That's not the question.\n\nI have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?",
    "created_at": "2015-05-05T13:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233321",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'></a>Replying to [comment:7 ncohen]:
> > I am not asking you to maintain it. I am asking your opinion on what should be done.

> 
> It should be fixed.


Sure. That's not the question.

I have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?



---

archive/issue_comments_233322.json:
```json
{
    "body": "<a id='comment:9'></a>> I have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?\n\n\nStoring a plotting option in the graph? Why on earth would you do that? `O_o`\n\nWhy can't you just make the default be to plot the top element on top, and only do something different if some guy calls `my_poset.show(mess_up_top_and_bottom=True)` ?",
    "created_at": "2015-05-05T13:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233322",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>> I have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?


Storing a plotting option in the graph? Why on earth would you do that? `O_o`

Why can't you just make the default be to plot the top element on top, and only do something different if some guy calls `my_poset.show(mess_up_top_and_bottom=True)` ?



---

archive/issue_comments_233323.json:
```json
{
    "body": "<a id='comment:10'></a>(I am not even sure that implementing an option to inverse top and bottom upon request is worth the time)",
    "created_at": "2015-05-05T13:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233323",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>(I am not even sure that implementing an option to inverse top and bottom upon request is worth the time)



---

archive/issue_comments_233324.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 ncohen]:\n> (I am not even sure that implementing an option to inverse top and bottom upon request is worth the time)\n\n\nNo, it isn't. One can use `P.dual().show()` when needed for that.\n\nIs it so that we can not have something like `show(..., direction='down')` when we use dot2tex? (I.e. that would need modifying dot2tex code.)",
    "created_at": "2015-05-05T13:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233324",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>Replying to [comment:10 ncohen]:
> (I am not even sure that implementing an option to inverse top and bottom upon request is worth the time)


No, it isn't. One can use `P.dual().show()` when needed for that.

Is it so that we can not have something like `show(..., direction='down')` when we use dot2tex? (I.e. that would need modifying dot2tex code.)



---

archive/issue_comments_233325.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 ncohen]:\n> > I have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?\n\n> \n> Storing a plotting option in the graph? Why on earth would you do that? `O_o`\n\n\nSo that when you create a hasse diagram, and later plot it, it remembers to plot it going up. But I can live without this feature.\n\n> Why can't you just make the default be to plot the top element on top, and only do something different if some guy calls `my_poset.show(mess_up_top_and_bottom=True)` ?\n\n\nThat is not the question. The goal is to always plot the poset with top on top.\n\nBut to plot a poset we need to plot a digraph. So either it's ok if the acyclic layout of graphs always points up. Or we need to have an option (of the graph, or just of Graph.plot) to specify whether the acyclic layout goes up or down.",
    "created_at": "2015-05-05T14:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233325",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'></a>Replying to [comment:9 ncohen]:
> > I have proposed two strategies for this in [comment:2]. Which one do you prefer. If we go for the first one, what's the right way for storing such a ploting option in the graph?

> 
> Storing a plotting option in the graph? Why on earth would you do that? `O_o`


So that when you create a hasse diagram, and later plot it, it remembers to plot it going up. But I can live without this feature.

> Why can't you just make the default be to plot the top element on top, and only do something different if some guy calls `my_poset.show(mess_up_top_and_bottom=True)` ?


That is not the question. The goal is to always plot the poset with top on top.

But to plot a poset we need to plot a digraph. So either it's ok if the acyclic layout of graphs always points up. Or we need to have an option (of the graph, or just of Graph.plot) to specify whether the acyclic layout goes up or down.



---

archive/issue_comments_233326.json:
```json
{
    "body": "<a id='comment:13'></a>> But to plot a poset we need to plot a digraph. So either it's ok if the acyclic layout of graphs always points up. \n\n\nIt is the default behaviour in Sage. If it is messed up when dot2tex gets installed then let *this* be fixed, and let us move on.\n\nThey chose that an arrow `a->b` meant that \"a is larger than b\" and `Posets` do the opposite. I do not think that it is worth more consideration than that.\n\nNathann",
    "created_at": "2015-05-05T14:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233326",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>> But to plot a poset we need to plot a digraph. So either it's ok if the acyclic layout of graphs always points up. 


It is the default behaviour in Sage. If it is messed up when dot2tex gets installed then let *this* be fixed, and let us move on.

They chose that an arrow `a->b` meant that "a is larger than b" and `Posets` do the opposite. I do not think that it is worth more consideration than that.

Nathann



---

archive/issue_comments_233327.json:
```json
{
    "body": "<a id='comment:15'></a>New commits:",
    "created_at": "2015-05-12T15:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233327",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:15'></a>New commits:



---

archive/issue_comments_233328.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-12T15:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233328",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_233329.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).show()` says `2`, so one expect\n \n+```\n+Poset([[1,2],[[1,2]]]).show()\n+```\n+\n+showing to \"2\" on top. And so it happens without dot2tex. However, it shows \"1\" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.\n+\n+This ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-05-12T15:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233329",
    "user": "https://github.com/nthiery"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).show()` says `2`, so one expect
 
+```
+Poset([[1,2],[[1,2]]]).show()
+```
+
+showing to "2" on top. And so it happens without dot2tex. However, it shows "1" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.
+
+This ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.
 
 Comment: 1
 
```




---

archive/issue_comments_233330.json:
```json
{
    "body": "<a id='comment:17'></a>With your code, the value of 'rankdir' is dropped without a warning if `have_dot2tex` is `False`.",
    "created_at": "2015-05-12T16:12:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233330",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>With your code, the value of 'rankdir' is dropped without a warning if `have_dot2tex` is `False`.



---

archive/issue_comments_233331.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-12T21:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233331",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233332.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:17 ncohen]:\n> With your code, the value of 'rankdir' is dropped without a warning if `have_dot2tex` is `False`.\n\n\nOops, yes; and the tests in `layout_acyclic` were using in fact `layout_acyclic_dummy` ... Fixed.\nLuckily that would have been caught by the patchbot. But thanks for the early feedback!",
    "created_at": "2015-05-12T21:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233332",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:19'></a>Replying to [comment:17 ncohen]:
> With your code, the value of 'rankdir' is dropped without a warning if `have_dot2tex` is `False`.


Oops, yes; and the tests in `layout_acyclic` were using in fact `layout_acyclic_dummy` ... Fixed.
Luckily that would have been caught by the patchbot. But thanks for the early feedback!



---

archive/issue_comments_233333.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-13T06:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233333",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_233334.json:
```json
{
    "body": "<a id='comment:21'></a>Why needs work?",
    "created_at": "2015-05-13T07:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233334",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:21'></a>Why needs work?



---

archive/issue_comments_233335.json:
```json
{
    "body": "<a id='comment:22'></a>Sorry, I had not noticed that you had added a commit. Since you apparently \"added a parameter\" in 'graphviz_string' could you document it? If you do not want to document the same parameter in different places only because it is forwarded to some function later, could you say so explicitly in the docstring so that people can actually figure out that this 'rankdir' parameter exists?",
    "created_at": "2015-05-13T07:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233335",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>Sorry, I had not noticed that you had added a commit. Since you apparently "added a parameter" in 'graphviz_string' could you document it? If you do not want to document the same parameter in different places only because it is forwarded to some function later, could you say so explicitly in the docstring so that people can actually figure out that this 'rankdir' parameter exists?



---

archive/issue_comments_233336.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-13T08:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233337.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-13T08:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233337",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_233338.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:22 ncohen]:\n> Since you apparently \"added a parameter\" in 'graphviz_string' could you document it?\n\n\nAh, yes, thanks for catching this. Just an oversight. Given that the\ndefault is not the same as for `acyclic_layout` we really want to\ndocument this option here. I used the occasion to clean a bit the\nbeginning of this docstring.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[08e9b8e](http://git.sagemath.org/sage.git/commit/?id=08e9b8e4e2109bec4ffb7d0b6807b5278495883c)|`16865: documentation of the rankdir option for graphviz_string: proofreading`|\n---\nNew commits:",
    "created_at": "2015-05-13T08:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233338",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:25'></a>Replying to [comment:22 ncohen]:
> Since you apparently "added a parameter" in 'graphviz_string' could you document it?


Ah, yes, thanks for catching this. Just an oversight. Given that the
default is not the same as for `acyclic_layout` we really want to
document this option here. I used the occasion to clean a bit the
beginning of this docstring.

---
New commits:
|                                                                                                                                          |                                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[08e9b8e](http://git.sagemath.org/sage.git/commit/?id=08e9b8e4e2109bec4ffb7d0b6807b5278495883c)|`16865: documentation of the rankdir option for graphviz_string: proofreading`|
---
New commits:



---

archive/issue_comments_233339.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-13T08:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233339",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_233340.json:
```json
{
    "body": "<a id='comment:27'></a>Jori? Could you try this patch? I do not have dot2tex installed on my machine, and these things cannot be uninstalled.\n\nNathann",
    "created_at": "2015-05-13T08:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233340",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>Jori? Could you try this patch? I do not have dot2tex installed on my machine, and these things cannot be uninstalled.

Nathann



---

archive/issue_comments_233341.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 ncohen]:\n> Jori? Could you try this patch? I do not have dot2tex installed on my machine\n\n\nJust tested quickly. Seems to work, but it takes a little longer to really test this.\n\n> and these things cannot be uninstalled.\n\n\nThat could be a reason for another ticket...",
    "created_at": "2015-05-13T08:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233341",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:28'></a>Replying to [comment:27 ncohen]:
> Jori? Could you try this patch? I do not have dot2tex installed on my machine


Just tested quickly. Seems to work, but it takes a little longer to really test this.

> and these things cannot be uninstalled.


That could be a reason for another ticket...



---

archive/issue_comments_233342.json:
```json
{
    "body": "<a id='comment:29'></a>> Just tested quickly. Seems to work, but it takes a little longer to really test this.\n\n\nWell, please change the ticket's status when you are done, then.\n\n> That could be a reason for another ticket...\n\n\nIt is not a problem with 'dot2tex' only.\n\nNathann",
    "created_at": "2015-05-13T08:46:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233342",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>> Just tested quickly. Seems to work, but it takes a little longer to really test this.


Well, please change the ticket's status when you are done, then.

> That could be a reason for another ticket...


It is not a problem with 'dot2tex' only.

Nathann



---

archive/issue_comments_233343.json:
```json
{
    "body": "<a id='comment:30'></a>I tested with some random posets and with empty and 1-element poset. Seems to work.\n\nBut still I don't know Sage internals enought to be able to review this. Sorry for that.",
    "created_at": "2015-05-13T09:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233343",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:30'></a>I tested with some random posets and with empty and 1-element poset. Seems to work.

But still I don't know Sage internals enought to be able to review this. Sorry for that.



---

archive/issue_comments_233344.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says `2`, so one expect\n \n+```\n+Poset([[1,2],[[1,2]]]).show()\n+```\n+\n+showing to \"2\" on top. And so it happens without dot2tex. However, it shows \"1\" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.\n+\n+This ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-05-13T09:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233344",
    "user": "https://github.com/jm58660"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
+`Poset([[1,2],[This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)]).top()` says `2`, so one expect
 
+```
+Poset([[1,2],[[1,2]]]).show()
+```
+
+showing to "2" on top. And so it happens without dot2tex. However, it shows "1" at top if dot2tex is installed. This was changed from version 6.1 to 6.2.
+
+This ticket implements a `rankdir` option for `DiGraph.layout_acyclic` and sets a default value of 'up' for all implementations, which fixes the above inconsistency, while leaving the `down` feature available to whoever would really care.
 
 Comment: 1
 
```




---

archive/issue_comments_233345.json:
```json
{
    "body": "<a id='comment:31'></a>> I tested with some random posets and with empty and 1-element poset. Seems to work.\n> \n> But still I don't know Sage internals enought to be able to review this. Sorry for that.\n\n\nI asked you to test it because I cannot. I read the code, and I think that it can pass. If you are satisfied with the drawings (try all options) please change the ticket's status and add your name to the list of reviewers.\n\nNathann",
    "created_at": "2015-05-13T09:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233345",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'></a>> I tested with some random posets and with empty and 1-element poset. Seems to work.
> 
> But still I don't know Sage internals enought to be able to review this. Sorry for that.


I asked you to test it because I cannot. I read the code, and I think that it can pass. If you are satisfied with the drawings (try all options) please change the ticket's status and add your name to the list of reviewers.

Nathann



---

archive/issue_comments_233346.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-13T12:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233346",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_233347.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:31 ncohen]:\n\n> If you are satisfied with the drawings (try all options) please change the ticket's status and add your name to the list of reviewers.\n\n\nTested. (Not all combinations, thought.) I think that this one is ready. For a note: `layout='tree'` reverses the poset. But I doubt anyone would use it for posets.",
    "created_at": "2015-05-13T12:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233347",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:32'></a>Replying to [comment:31 ncohen]:

> If you are satisfied with the drawings (try all options) please change the ticket's status and add your name to the list of reviewers.


Tested. (Not all combinations, thought.) I think that this one is ready. For a note: `layout='tree'` reverses the poset. But I doubt anyone would use it for posets.



---

archive/issue_comments_233348.json:
```json
{
    "body": "<a id='comment:33'></a>Author name missing",
    "created_at": "2015-05-14T09:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233348",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>Author name missing



---

archive/issue_comments_233349.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-14T09:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233349",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_233350.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-05-14T17:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233350",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_233351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-14T22:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16865#issuecomment-233351",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049312.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-14T22:40:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16865",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16865#event-49312"
}
```
