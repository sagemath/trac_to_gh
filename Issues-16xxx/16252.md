# Issue 16252: optional doctest broken in oeis

archive/issues_016015.json:
```json
{
    "body": "Assignee: @videlec\n\nCC:  tmonteil\n\nKeywords: oeis, doctest\n\nMost of the doctests in oeis are broken (as the database has been updated).\n\nTo run the test do\n\n```\n./sage -t --optional=sage,internet SAGE_ROOT/src/sage/databases/oeis.py\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/16252\n\n",
    "closed_at": "2016-01-23T20:42:38Z",
    "created_at": "2014-04-27T14:17:46Z",
    "labels": [
        "component: doctest coverage",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "optional doctest broken in oeis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16252",
    "user": "https://github.com/videlec"
}
```
Assignee: @videlec

CC:  tmonteil

Keywords: oeis, doctest

Most of the doctests in oeis are broken (as the database has been updated).

To run the test do

```
./sage -t --optional=sage,internet SAGE_ROOT/src/sage/databases/oeis.py
```

Issue created by migration from https://trac.sagemath.org/ticket/16252





---

archive/issue_comments_207667.json:
```json
{
    "body": "Changing keywords from \"\" to \"oeis, doctest\".",
    "created_at": "2014-04-27T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207667",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "oeis, doctest".



---

archive/issue_comments_207668.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-27T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207668",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_207669.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-04-27T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207669",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_207670.json:
```json
{
    "body": "2 doctest failures:\n\n```\n ./sage -t --optional=sage,internet src/sage/databases/oeis.py\nRunning doctests with ID 2014-05-02-10-48-57-d24662df.\nDoctesting 1 file.\nsage -t src/sage/databases/oeis.py\n**********************************************************************\nFile \"src/sage/databases/oeis.py\", line 835, in sage.databases.oeis.OEISSequence.keywords\nFailed example:\n    f.keywords()                          # optional -- internet\nExpected:\n    ('core', 'nonn', 'easy', 'nice', 'hear')\nGot:\n    ('core', 'nonn', 'easy', 'nice', 'hear', 'changed')\n**********************************************************************\nFile \"src/sage/databases/oeis.py\", line 1730, in sage.databases.oeis.OEISSequence.programs\nFailed example:\n    ee = oeis('A001113') ; ee             # optional -- internet\nExpected:\n    A001113: Decimal expansion of e.\nGot:\n    Created new window in existing browser session.\n    A001113: Decimal expansion of e.\n**********************************************************************\n2 items had failures:\n   1 of   7 in sage.databases.oeis.OEISSequence.keywords\n   1 of   7 in sage.databases.oeis.OEISSequence.programs\n    [258 tests, 2 failures, 67.62 s]\n----------------------------------------------------------------------\nsage -t src/sage/databases/oeis.py  # 2 doctests failed\n```\nHave the keywords changed again `...,'nice', 'hear', 'changed')`? Then one could consider this test as brittle :-/\n\n\nAnd the statement `Created new window in existing browser session.` is true - while not expected. It opened `http://oeis.org/A000045` a new tab in Chromium (ubuntu 14.04)",
    "created_at": "2014-05-02T09:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207670",
    "user": "https://github.com/wluebbe"
}
```

2 doctest failures:

```
 ./sage -t --optional=sage,internet src/sage/databases/oeis.py
Running doctests with ID 2014-05-02-10-48-57-d24662df.
Doctesting 1 file.
sage -t src/sage/databases/oeis.py
**********************************************************************
File "src/sage/databases/oeis.py", line 835, in sage.databases.oeis.OEISSequence.keywords
Failed example:
    f.keywords()                          # optional -- internet
Expected:
    ('core', 'nonn', 'easy', 'nice', 'hear')
Got:
    ('core', 'nonn', 'easy', 'nice', 'hear', 'changed')
**********************************************************************
File "src/sage/databases/oeis.py", line 1730, in sage.databases.oeis.OEISSequence.programs
Failed example:
    ee = oeis('A001113') ; ee             # optional -- internet
Expected:
    A001113: Decimal expansion of e.
Got:
    Created new window in existing browser session.
    A001113: Decimal expansion of e.
**********************************************************************
2 items had failures:
   1 of   7 in sage.databases.oeis.OEISSequence.keywords
   1 of   7 in sage.databases.oeis.OEISSequence.programs
    [258 tests, 2 failures, 67.62 s]
----------------------------------------------------------------------
sage -t src/sage/databases/oeis.py  # 2 doctests failed
```
Have the keywords changed again `...,'nice', 'hear', 'changed')`? Then one could consider this test as brittle :-/


And the statement `Created new window in existing browser session.` is true - while not expected. It opened `http://oeis.org/A000045` a new tab in Chromium (ubuntu 14.04)



---

archive/issue_comments_207671.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-02T09:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207671",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207672.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-02T09:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207673.json:
```json
{
    "body": "Hi Wilfried,\n\nThanks for looking at this.\n\nI modified a bit the first test in order to make it more robust to small changes in the database. I do not understand what happened with the second one. Only the method `browse` and `links` should open some windows in your browser. Could you try again?\n\nVincent",
    "created_at": "2014-05-02T09:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207673",
    "user": "https://github.com/videlec"
}
```

Hi Wilfried,

Thanks for looking at this.

I modified a bit the first test in order to make it more robust to small changes in the database. I do not understand what happened with the second one. Only the method `browse` and `links` should open some windows in your browser. Could you try again?

Vincent



---

archive/issue_comments_207674.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-02T09:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207674",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207675.json:
```json
{
    "body": "Hi Vincent,\n\nthe first failure is gone - the second not.\n\nI replaced `45` by `10` in line 1645 (doctest of `browse()` and got \n\n```\nFile \"src/sage/databases/oeis.py\", line 1645, in sage.databases.oeis.OEISSequence.browse\nFailed example:\n    f = oeis(10) ; f                      # optional -- internet, webbrowser\nExpected:\n    A000045: Fibonacci numbers: F(n) = F(n-1) + F(n-2) with F(0) = 0 and F(1) = 1.\nGot:\n    A000010: Euler totient function phi(n): count numbers <= n and prime to n.\n**********************************************************************\nFile \"src/sage/databases/oeis.py\", line 1735, in sage.databases.oeis.OEISSequence.programs\nFailed example:\n    ee = oeis('A001113') ; ee             # optional -- internet\nExpected:\n    A001113: Decimal expansion of e.\nGot:\n    Created new window in existing browser session.\n    A001113: Decimal expansion of e.\n**********************************************************************\n2 items had failures:\n   1 of   3 in sage.databases.oeis.OEISSequence.browse\n   1 of   7 in sage.databases.oeis.OEISSequence.programs\n    [261 tests, 2 failures, 71.93 s]\n```\nNow the first failure is expected. My browser opened `http://oeis.org/A000010`.\nThis seems to indicate that the new message `Created new ...` is left over by the doctest of browse(). But why? Don't you see this behavior?\n\nThis is what I get in a terminal\n\n```\nsage: import sage.databases.o\nsage.databases.odlyzko  sage.databases.oeis     \nsage: import sage.databases.oeis\nsage: f = oeis(1)\nsage: f\nA000001: Number of groups of order n.\nsage: f.browse()\nsage: Created new window in existing browser session.\n\nsage: f.show()\nID\nA000001\n```\nAfter `sage: Created new window in existing browser session.` I had to press ENTER to  see the `sage:` prompt again.",
    "created_at": "2014-05-02T11:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207675",
    "user": "https://github.com/wluebbe"
}
```

Hi Vincent,

the first failure is gone - the second not.

I replaced `45` by `10` in line 1645 (doctest of `browse()` and got 

```
File "src/sage/databases/oeis.py", line 1645, in sage.databases.oeis.OEISSequence.browse
Failed example:
    f = oeis(10) ; f                      # optional -- internet, webbrowser
Expected:
    A000045: Fibonacci numbers: F(n) = F(n-1) + F(n-2) with F(0) = 0 and F(1) = 1.
Got:
    A000010: Euler totient function phi(n): count numbers <= n and prime to n.
**********************************************************************
File "src/sage/databases/oeis.py", line 1735, in sage.databases.oeis.OEISSequence.programs
Failed example:
    ee = oeis('A001113') ; ee             # optional -- internet
Expected:
    A001113: Decimal expansion of e.
Got:
    Created new window in existing browser session.
    A001113: Decimal expansion of e.
**********************************************************************
2 items had failures:
   1 of   3 in sage.databases.oeis.OEISSequence.browse
   1 of   7 in sage.databases.oeis.OEISSequence.programs
    [261 tests, 2 failures, 71.93 s]
```
Now the first failure is expected. My browser opened `http://oeis.org/A000010`.
This seems to indicate that the new message `Created new ...` is left over by the doctest of browse(). But why? Don't you see this behavior?

This is what I get in a terminal

```
sage: import sage.databases.o
sage.databases.odlyzko  sage.databases.oeis     
sage: import sage.databases.oeis
sage: f = oeis(1)
sage: f
A000001: Number of groups of order n.
sage: f.browse()
sage: Created new window in existing browser session.

sage: f.show()
ID
A000001
```
After `sage: Created new window in existing browser session.` I had to press ENTER to  see the `sage:` prompt again.



---

archive/issue_comments_207676.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-02T11:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207676",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207677.json:
```json
{
    "body": "The doctest failure is likely environment dependent:\n\n\nThe module `webbrowser` is a Python standard module. It use some logic to select a suitable browser and calls it with `subprocess.Popen()`. The message `Created new ...` is issued by Chromium (revealed be a Google search :-).\n\nToday I closed my Chromium //Version 34.0.1847.116 Ubuntu 14.04 aura (260972)// before starting the test. The result:\n\n```\nFile \"src/sage/databases/oeis.py\", line 1735, in sage.databases.oeis.OEISSequence.programs\nFailed example:\n    ee = oeis('A001113') ; ee             # optional -- internet\nExpected:\n    A001113: Decimal expansion of e.\nGot:\n    ATTENTION: default value of option force_s3tc_enable overridden by environment.\n    [12960:12960:0505/151917:ERROR:sandbox_linux.cc(268)] InitializeSandbox() called with multiple threads in process gpu-process\n    A001113: Decimal expansion of e.\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.databases.oeis.OEISSequence.programs\n    [261 tests, 1 failure, 78.67 s]\n```\nSo there are environments (e.g. mine) that can produce some unexpected browser output.\n\nAt last I got `All tests passed!` with \n\n```\n            sage: ee = oeis('A001113') ; ee             # optional -- internet\n            Created new window in existing browser session.\n            A001113: Decimal expansion of e.\n```\nBut this is not really a solution :-((",
    "created_at": "2014-05-05T14:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207677",
    "user": "https://github.com/wluebbe"
}
```

The doctest failure is likely environment dependent:


The module `webbrowser` is a Python standard module. It use some logic to select a suitable browser and calls it with `subprocess.Popen()`. The message `Created new ...` is issued by Chromium (revealed be a Google search :-).

Today I closed my Chromium //Version 34.0.1847.116 Ubuntu 14.04 aura (260972)// before starting the test. The result:

```
File "src/sage/databases/oeis.py", line 1735, in sage.databases.oeis.OEISSequence.programs
Failed example:
    ee = oeis('A001113') ; ee             # optional -- internet
Expected:
    A001113: Decimal expansion of e.
Got:
    ATTENTION: default value of option force_s3tc_enable overridden by environment.
    [12960:12960:0505/151917:ERROR:sandbox_linux.cc(268)] InitializeSandbox() called with multiple threads in process gpu-process
    A001113: Decimal expansion of e.
**********************************************************************
1 item had failures:
   1 of   7 in sage.databases.oeis.OEISSequence.programs
    [261 tests, 1 failure, 78.67 s]
```
So there are environments (e.g. mine) that can produce some unexpected browser output.

At last I got `All tests passed!` with 

```
            sage: ee = oeis('A001113') ; ee             # optional -- internet
            Created new window in existing browser session.
            A001113: Decimal expansion of e.
```
But this is not really a solution :-((



---

archive/issue_comments_207678.json:
```json
{
    "body": "Hi,\n\nI do have a problem since the line\n\n```\nsage: ee = oeis('A001113')\n```\ndoes not call webbrowser. It is only the following that does\n\n```\nsage: ee.browse()\n```\nHence I do not really understand what happens on your computer (even if it is now clear that it depends on the browser).\n\nMaybe there is a way to turn off the writing of the subprocess on stdout/stderr... I will dig in. There are partial answers on [stackoverflow](http://stackoverflow.com/questions/1352361/suppress-redirect-stderr-when-calling-python-webrowser) but which are plateform and installation dependent... but it is better than nothing!\n\nVincent",
    "created_at": "2014-05-05T15:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207678",
    "user": "https://github.com/videlec"
}
```

Hi,

I do have a problem since the line

```
sage: ee = oeis('A001113')
```
does not call webbrowser. It is only the following that does

```
sage: ee.browse()
```
Hence I do not really understand what happens on your computer (even if it is now clear that it depends on the browser).

Maybe there is a way to turn off the writing of the subprocess on stdout/stderr... I will dig in. There are partial answers on [stackoverflow](http://stackoverflow.com/questions/1352361/suppress-redirect-stderr-when-calling-python-webrowser) but which are plateform and installation dependent... but it is better than nothing!

Vincent



---

archive/issue_comments_207679.json:
```json
{
    "body": "Hi Vincent, \n\nthe browser is called in a doctest of `browse()` in line 1645 `sage: f = oeis(45) ; f`. \n\nThis can be seen in my comment 5 where I changed `oeis(45)` to `oeis(10)`. The browser opened A000010. The message from Chromium then surfaced in the other (later) doctest from line 1735.\n\nMaybe this is (one more) hint that //some// test are better suited for a testing framework like [nose](https://pypi.python.org/pypi/nose/1.3.2) or [py.test](https://pypi.python.org/pypi/pytest/2.5.2). But that's a whole new story ...",
    "created_at": "2014-05-05T16:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207679",
    "user": "https://github.com/wluebbe"
}
```

Hi Vincent, 

the browser is called in a doctest of `browse()` in line 1645 `sage: f = oeis(45) ; f`. 

This can be seen in my comment 5 where I changed `oeis(45)` to `oeis(10)`. The browser opened A000010. The message from Chromium then surfaced in the other (later) doctest from line 1735.

Maybe this is (one more) hint that //some// test are better suited for a testing framework like [nose](https://pypi.python.org/pypi/nose/1.3.2) or [py.test](https://pypi.python.org/pypi/pytest/2.5.2). But that's a whole new story ...



---

archive/issue_comments_207680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-05T16:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207681.json:
```json
{
    "body": "Hi,\n\nThere was a typo in the documentation. In order to skip the doctest one should write\n\n```\nsage: f.browse() # optional -- internet webbrowser\n```\nand not\n\n```\nsage: f.browse() # optional -- internet, webbrowser\n```\n\nI did the correction in the last commit. Could you try again? You should get no error with\n\n```\n./sage -t --optional=sage,internet SAGE_ROOT/src/sage/databases/oeis.py\n```\nbut might get one with\n\n```\n./sage -t --optional=sage,internet,webbrowser SAGE_ROOT/src/sage/databases/oeis.py\n```\n\nVincent",
    "created_at": "2014-05-05T16:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207681",
    "user": "https://github.com/videlec"
}
```

Hi,

There was a typo in the documentation. In order to skip the doctest one should write

```
sage: f.browse() # optional -- internet webbrowser
```
and not

```
sage: f.browse() # optional -- internet, webbrowser
```

I did the correction in the last commit. Could you try again? You should get no error with

```
./sage -t --optional=sage,internet SAGE_ROOT/src/sage/databases/oeis.py
```
but might get one with

```
./sage -t --optional=sage,internet,webbrowser SAGE_ROOT/src/sage/databases/oeis.py
```

Vincent



---

archive/issue_comments_207682.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-05-05T19:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207682",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_207683.json:
```json
{
    "body": "Hi,\n\njust as you predicted ...\n\n```\n~/sage-6.2.rc0$ ./sage -t --optional=sage,internet src/sage/databases/oeis.py\nRunning doctests with ID 2014-05-05-21-13-21-9a2728e4.\nDoctesting 1 file.\nsage -t src/sage/databases/oeis.py\n    [259 tests, 74.00 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 74.1 seconds\n    cpu time: 1.4 seconds\n    cumulative wall time: 74.0 seconds\nwluebbe@Willis-Ubuntu:~/sage-6.2.rc0$ ./sage -t --optional=sage,internet,webbrowser src/sage/databases/oeis.py\nRunning doctests with ID 2014-05-05-21-16-48-fbdfca29.\nDoctesting 1 file.\nsage -t src/sage/databases/oeis.py\n**********************************************************************\nFile \"src/sage/databases/oeis.py\", line 637, in sage.databases.oeis.OEISSequence.__init__\nFailed example:\n    sfibo = oeis('A039834')               # optional -- internet\nExpected nothing\nGot:\n    Created new window in existing browser session.\n**********************************************************************\nFile \"src/sage/databases/oeis.py\", line 1735, in sage.databases.oeis.OEISSequence.programs\nFailed example:\n    ee = oeis('A001113') ; ee             # optional -- internet\nExpected:\n    A001113: Decimal expansion of e.\nGot:\n    Created new window in existing browser session.\n    Created new window in existing browser session.\n    A001113: Decimal expansion of e.\n**********************************************************************\n2 items had failures:\n   1 of   3 in sage.databases.oeis.OEISSequence.__init__\n   1 of   7 in sage.databases.oeis.OEISSequence.programs\n    [264 tests, 2 failures, 76.03 s]\n----------------------------------------------------------------------\nsage -t src/sage/databases/oeis.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 76.1 seconds\n    cpu time: 1.4 seconds\n    cumulative wall time: 76.0 seconds\n```\nTherefore I say: the patch looks good! - Doctest with (optional) webbrowser Chromium is a different story.",
    "created_at": "2014-05-05T19:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207683",
    "user": "https://github.com/wluebbe"
}
```

Hi,

just as you predicted ...

```
~/sage-6.2.rc0$ ./sage -t --optional=sage,internet src/sage/databases/oeis.py
Running doctests with ID 2014-05-05-21-13-21-9a2728e4.
Doctesting 1 file.
sage -t src/sage/databases/oeis.py
    [259 tests, 74.00 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 74.1 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 74.0 seconds
wluebbe@Willis-Ubuntu:~/sage-6.2.rc0$ ./sage -t --optional=sage,internet,webbrowser src/sage/databases/oeis.py
Running doctests with ID 2014-05-05-21-16-48-fbdfca29.
Doctesting 1 file.
sage -t src/sage/databases/oeis.py
**********************************************************************
File "src/sage/databases/oeis.py", line 637, in sage.databases.oeis.OEISSequence.__init__
Failed example:
    sfibo = oeis('A039834')               # optional -- internet
Expected nothing
Got:
    Created new window in existing browser session.
**********************************************************************
File "src/sage/databases/oeis.py", line 1735, in sage.databases.oeis.OEISSequence.programs
Failed example:
    ee = oeis('A001113') ; ee             # optional -- internet
Expected:
    A001113: Decimal expansion of e.
Got:
    Created new window in existing browser session.
    Created new window in existing browser session.
    A001113: Decimal expansion of e.
**********************************************************************
2 items had failures:
   1 of   3 in sage.databases.oeis.OEISSequence.__init__
   1 of   7 in sage.databases.oeis.OEISSequence.programs
    [264 tests, 2 failures, 76.03 s]
----------------------------------------------------------------------
sage -t src/sage/databases/oeis.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 76.1 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 76.0 seconds
```
Therefore I say: the patch looks good! - Doctest with (optional) webbrowser Chromium is a different story.



---

archive/issue_comments_207684.json:
```json
{
    "body": "Thanks!\n\nVincent",
    "created_at": "2014-05-05T21:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207684",
    "user": "https://github.com/videlec"
}
```

Thanks!

Vincent



---

archive/issue_comments_207685.json:
```json
{
    "body": "Hi,\n\ni am a bit lost with the new framework, how it is possible that this ticket get positive review while  #14567 is not settled ?\n\nCould it be better to fix OEIS-changes in a self-contained ticket, and continued_fractions changes (even in oeis.py) in the other one ?",
    "created_at": "2014-05-05T22:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207685",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Hi,

i am a bit lost with the new framework, how it is possible that this ticket get positive review while  #14567 is not settled ?

Could it be better to fix OEIS-changes in a self-contained ticket, and continued_fractions changes (even in oeis.py) in the other one ?



---

archive/issue_comments_207686.json:
```json
{
    "body": "Hi Thierry,\n\nIn the current state, this one will wait until #14567 gets reviewed. If there are some changes in #14567 then either there is a trivial merge and everything is fine, or the merge is non trivial and it will need another (short) review.\n\nIt might be better that #14567 gets reviewed... if you want to fix this one independently of #14567, it is up to you.\n\nVincent",
    "created_at": "2014-05-06T04:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207686",
    "user": "https://github.com/videlec"
}
```

Hi Thierry,

In the current state, this one will wait until #14567 gets reviewed. If there are some changes in #14567 then either there is a trivial merge and everything is fine, or the merge is non trivial and it will need another (short) review.

It might be better that #14567 gets reviewed... if you want to fix this one independently of #14567, it is up to you.

Vincent



---

archive/issue_events_047909.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47909"
}
```



---

archive/issue_comments_207687.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-07T11:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207687",
    "user": "https://github.com/wluebbe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_207688.json:
```json
{
    "body": "While focusing on the doctest failures in `oeis.py` I missed the on dependency #14567 (and that the patch contained much more than `oeis.py`).\n\nTherefore I think this ticket should stay with //needs review// until #14567 is positive. Then I will review this again :-)\n\nMeanwhile I discovered some more optional doctest failures (#16302) ...",
    "created_at": "2014-05-07T11:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207688",
    "user": "https://github.com/wluebbe"
}
```

While focusing on the doctest failures in `oeis.py` I missed the on dependency #14567 (and that the patch contained much more than `oeis.py`).

Therefore I think this ticket should stay with //needs review// until #14567 is positive. Then I will review this again :-)

Meanwhile I discovered some more optional doctest failures (#16302) ...



---

archive/issue_comments_207689.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-07T11:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207689",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_047910.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47910"
}
```



---

archive/issue_events_047911.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47911"
}
```



---

archive/issue_comments_207690.json:
```json
{
    "body": "Changing component from documentation to doctest coverage.",
    "created_at": "2014-11-07T13:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207690",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from documentation to doctest coverage.



---

archive/issue_comments_207691.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-01T11:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207691",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207692.json:
```json
{
    "body": "The doctests are broken again due to updates in the sloane database...\n\nVincent",
    "created_at": "2015-02-01T11:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207692",
    "user": "https://github.com/videlec"
}
```

The doctests are broken again due to updates in the sloane database...

Vincent



---

archive/issue_comments_207693.json:
```json
{
    "body": "Since i could not merge Vincent's branch to the current develop branch, i made a new one based on latest 6.8.beta3 (and current version of OEIS).\n\n---\nNew commits:",
    "created_at": "2015-06-10T18:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207693",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Since i could not merge Vincent's branch to the current develop branch, i made a new one based on latest 6.8.beta3 (and current version of OEIS).

---
New commits:



---

archive/issue_comments_207694.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-10T18:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207694",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207695.json:
```json
{
    "body": "I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?",
    "created_at": "2015-06-10T18:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207695",
    "user": "https://github.com/jhpalmieri"
}
```

I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?



---

archive/issue_comments_207696.json:
```json
{
    "body": "I have made some pep8 cleanup.\n\nI was about to give a positive review, but I agree it is not good to be forced to update the test all the time..\n\n---\nNew commits:",
    "created_at": "2015-06-10T18:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207696",
    "user": "https://github.com/fchapoton"
}
```

I have made some pep8 cleanup.

I was about to give a positive review, but I agree it is not good to be forced to update the test all the time..

---
New commits:



---

archive/issue_comments_207697.json:
```json
{
    "body": "To expand on this: because of #18558, many tests labeled \"optional\" will now be run. This is not true yet for \"optional - internet\" tests, but that could change, and then we want robust tests.",
    "created_at": "2015-06-10T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207697",
    "user": "https://github.com/jhpalmieri"
}
```

To expand on this: because of #18558, many tests labeled "optional" will now be run. This is not true yet for "optional - internet" tests, but that could change, and then we want robust tests.



---

archive/issue_comments_207698.json:
```json
{
    "body": "I don't like this: `\\xc3\\xa9`: can we please support unicode instead?",
    "created_at": "2015-06-10T19:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207698",
    "user": "https://github.com/jdemeyer"
}
```

I don't like this: `\xc3\xa9`: can we please support unicode instead?



---

archive/issue_comments_207699.json:
```json
{
    "body": "This needs to be rebased to #18637.",
    "created_at": "2015-06-10T19:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207699",
    "user": "https://github.com/jdemeyer"
}
```

This needs to be rebased to #18637.



---

archive/issue_comments_207700.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-10T19:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207700",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207701.json:
```json
{
    "body": "And this also looks like a regression:\n\n```diff\n- QQ as continued fractions\n+ <class 'sage.rings.continued_fraction.ContinuedFraction_periodic'>\n```",
    "created_at": "2015-06-10T19:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207701",
    "user": "https://github.com/jdemeyer"
}
```

And this also looks like a regression:

```diff
- QQ as continued fractions
+ <class 'sage.rings.continued_fraction.ContinuedFraction_periodic'>
```



---

archive/issue_events_047912.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-10T19:30:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47912"
}
```



---

archive/issue_events_047913.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-10T19:30:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47913"
}
```



---

archive/issue_comments_207702.json:
```json
{
    "body": "Replying to [comment:28 jdemeyer]:\n> And this also looks like a regression:\n> \n> ```\n> #!diff\n> - QQ as continued fractions\n> + <class 'sage.rings.continued_fraction.ContinuedFraction_periodic'>\n> ```\n\n\nIt is not (or at least independent from that ticket). Comes from #14567.",
    "created_at": "2015-06-10T19:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207702",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:28 jdemeyer]:
> And this also looks like a regression:
> 
> ```
> #!diff
> - QQ as continued fractions
> + <class 'sage.rings.continued_fraction.ContinuedFraction_periodic'>
> ```


It is not (or at least independent from that ticket). Comes from #14567.



---

archive/issue_comments_207703.json:
```json
{
    "body": "Replying to [comment:29 vdelecroix]:\n> Comes from #14567.\n\nI think it comes from this change on this ticket:\n\n```diff\n- return ContinuedFractionField()(self.first_terms())\n+ from sage.rings.continued_fraction import continued_fraction\n+ return continued_fraction(self.first_terms())\n```",
    "created_at": "2015-06-10T19:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207703",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:29 vdelecroix]:
> Comes from #14567.

I think it comes from this change on this ticket:

```diff
- return ContinuedFractionField()(self.first_terms())
+ from sage.rings.continued_fraction import continued_fraction
+ return continued_fraction(self.first_terms())
```



---

archive/issue_comments_207704.json:
```json
{
    "body": "Replying to [comment:30 jdemeyer]:\n> Replying to [comment:29 vdelecroix]:\n> > Comes from #14567.\n\n> I think it comes from this change on this ticket:\n> {{{\n> #!diff\n> - return ContinuedFractionField()(self.first_terms())\n> + from sage.rings.continued_fraction import continued_fraction\n> + return continued_fraction(self.first_terms())\n> }}}\n\n\nRight. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.",
    "created_at": "2015-06-10T19:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207704",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:30 jdemeyer]:
> Replying to [comment:29 vdelecroix]:
> > Comes from #14567.

> I think it comes from this change on this ticket:
> {{{
> #!diff
> - return ContinuedFractionField()(self.first_terms())
> + from sage.rings.continued_fraction import continued_fraction
> + return continued_fraction(self.first_terms())
> }}}


Right. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.



---

archive/issue_comments_207705.json:
```json
{
    "body": "Concerning workaround doctests that are robust to database changes.\n\nReplying to [comment:23 jhpalmieri]:\n> I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?\n\n\nThe \"doc\" part of the doctest is important too. As you can check, most failed doctests are designed to be examples for the user. I think the user should be exposed to what she will actually get, even if there is some small noise in the result, humans can adapt to such noise, and they need examples.\n\nReplying to [comment:24 chapoton]:\n> I was about to give a positive review, but I agree it is not good to be forced to update the test all the time..\n\n\nWe are not, the users are able to understand the examples even if they slightly differ from what they will get by testing themselves. In my opinion, those should be updated from time to time but there is no hurry to be on the edge, it is not like openssl or so.\n\nReplying to [comment:25 jhpalmieri]:\n> To expand on this: because of #18558, many tests labeled \"optional\" will now be run. This is not true yet for \"optional - internet\" tests, but that could change, and then we want robust tests.\n\n\nI am -1 to run the internet doctests by default, or we are going to flood OEIS servers for almost no benefit. Actually, this is why a fake OEIS entry is hardcoded in the file (those tests are run everytime).\n\nThe robustness can be achieved as follows : run internet doctests once before a release and fix them if they are severe (e.g. change in the database structure, change in the URL scheme).",
    "created_at": "2015-06-10T20:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207705",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Concerning workaround doctests that are robust to database changes.

Replying to [comment:23 jhpalmieri]:
> I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?


The "doc" part of the doctest is important too. As you can check, most failed doctests are designed to be examples for the user. I think the user should be exposed to what she will actually get, even if there is some small noise in the result, humans can adapt to such noise, and they need examples.

Replying to [comment:24 chapoton]:
> I was about to give a positive review, but I agree it is not good to be forced to update the test all the time..


We are not, the users are able to understand the examples even if they slightly differ from what they will get by testing themselves. In my opinion, those should be updated from time to time but there is no hurry to be on the edge, it is not like openssl or so.

Replying to [comment:25 jhpalmieri]:
> To expand on this: because of #18558, many tests labeled "optional" will now be run. This is not true yet for "optional - internet" tests, but that could change, and then we want robust tests.


I am -1 to run the internet doctests by default, or we are going to flood OEIS servers for almost no benefit. Actually, this is why a fake OEIS entry is hardcoded in the file (those tests are run everytime).

The robustness can be achieved as follows : run internet doctests once before a release and fix them if they are severe (e.g. change in the database structure, change in the URL scheme).



---

archive/issue_comments_207706.json:
```json
{
    "body": "Replying to [comment:31 vdelecroix]:\n> \n> Right. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.\n\n\n\nTo complement Vincent's answer, there is a semantic issue in using `ContinuedFractionField()`.\n\nThe problem is that most (if not all) continued fractions in OEIS corrrespond to irrational numbers (OEIS is not much about periodic sequences), so a parent modelling the rationals is not appropriate, even if we only have the fist few partial coefficients (like elements of `RDF` are rationals but do not represent rational numbers). Perhaps should we use `type` instead of `parent` here (i used `parent` to be consistent with other cases) ?\n\nActually, i am planning to plug infinite sequences implemented in Sage with oeis calss (e.g. Fibonacci), so that we could ask for arbitrary many partial coefficients for the related continued fraction, not only those provided by `.first_terms()` method.",
    "created_at": "2015-06-10T20:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207706",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:31 vdelecroix]:
> 
> Right. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.



To complement Vincent's answer, there is a semantic issue in using `ContinuedFractionField()`.

The problem is that most (if not all) continued fractions in OEIS corrrespond to irrational numbers (OEIS is not much about periodic sequences), so a parent modelling the rationals is not appropriate, even if we only have the fist few partial coefficients (like elements of `RDF` are rationals but do not represent rational numbers). Perhaps should we use `type` instead of `parent` here (i used `parent` to be consistent with other cases) ?

Actually, i am planning to plug infinite sequences implemented in Sage with oeis calss (e.g. Fibonacci), so that we could ask for arbitrary many partial coefficients for the related continued fraction, not only those provided by `.first_terms()` method.



---

archive/issue_comments_207707.json:
```json
{
    "body": "Replying to [comment:32 tmonteil]:\n> Concerning workaround doctests that are robust to database changes.\n> \n> Replying to [comment:23 jhpalmieri]:\n> > I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?\n\n> \n> The \"doc\" part of the doctest is important too. \n\n\nOf course there has to be a balance, but I don't know of any examples where we intentionally allow failed doctests for the sake of this balance. Instead, it is often possible to write doctests which are both illustrative and correct.\n\n> Replying to [comment:25 jhpalmieri]:\n> > To expand on this: because of #18558, many tests labeled \"optional\" will now be run. This is not true yet for \"optional - internet\" tests, but that could change, and then we want robust tests.\n\n> \n> I am -1 to run the internet doctests by default, or we are going to flood OEIS servers for almost no benefit. Actually, this is why a fake OEIS entry is hardcoded in the file (those tests are run everytime).\n\n\nI think there may be valid reasons to not run internet doctests by default, but I'm not  convinced by this one. If you are worried that we might flood the OEIS servers, then rewrite the doctests to avoid this. For example, I can easily imagine someone adding \"internet\" to the optional doctest tags for the patchbots.\n\n> The robustness can be achieved as follows : run internet doctests once before a release and fix them if they are severe (e.g. change in the database structure, change in the URL scheme).\n\n\nAccording to everything I know about Sage's doctesting, there is no tolerance for failed doctests. We don't fix them only if they are severe.",
    "created_at": "2015-06-10T21:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207707",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:32 tmonteil]:
> Concerning workaround doctests that are robust to database changes.
> 
> Replying to [comment:23 jhpalmieri]:
> > I agree that the tests need to be fixed, but can we do it in such a way that they won't break frequently due to changes in the database?

> 
> The "doc" part of the doctest is important too. 


Of course there has to be a balance, but I don't know of any examples where we intentionally allow failed doctests for the sake of this balance. Instead, it is often possible to write doctests which are both illustrative and correct.

> Replying to [comment:25 jhpalmieri]:
> > To expand on this: because of #18558, many tests labeled "optional" will now be run. This is not true yet for "optional - internet" tests, but that could change, and then we want robust tests.

> 
> I am -1 to run the internet doctests by default, or we are going to flood OEIS servers for almost no benefit. Actually, this is why a fake OEIS entry is hardcoded in the file (those tests are run everytime).


I think there may be valid reasons to not run internet doctests by default, but I'm not  convinced by this one. If you are worried that we might flood the OEIS servers, then rewrite the doctests to avoid this. For example, I can easily imagine someone adding "internet" to the optional doctest tags for the patchbots.

> The robustness can be achieved as follows : run internet doctests once before a release and fix them if they are severe (e.g. change in the database structure, change in the URL scheme).


According to everything I know about Sage's doctesting, there is no tolerance for failed doctests. We don't fix them only if they are severe.



---

archive/issue_comments_207708.json:
```json
{
    "body": "Replying to [comment:31 vdelecroix]:\n> Right. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.\n\n\nFine, but then change the `parent()` doctest to `type()`. The fact that `parent()` returns `type()` for a non-`Element` is an implementation detail which shouldn't be exposed by these doctests.\n\n(of course, I wonder why the result of `continued_fraction()` is no longer an `Element` but that's off topic)",
    "created_at": "2015-06-10T21:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207708",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:31 vdelecroix]:
> Right. But the continued fraction field is likely to be deprecated. It serves no purpose unless being there.


Fine, but then change the `parent()` doctest to `type()`. The fact that `parent()` returns `type()` for a non-`Element` is an implementation detail which shouldn't be exposed by these doctests.

(of course, I wonder why the result of `continued_fraction()` is no longer an `Element` but that's off topic)



---

archive/issue_comments_207709.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T11:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207710.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T11:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207711.json:
```json
{
    "body": "Replying to [comment:34 jhpalmieri]:\n> Of course there has to be a balance, but I don't know of any examples where we intentionally allow failed doctests for the sake of this balance. Instead, it is often possible to write doctests which are both illustrative and correct.\n\n\nThe goal of this ticket is precisely about fixing broken doctests. We do not intentionally allow failed doctests, they will all be illustrative and correct once this ticket get merged. I am just saying that such broken doctests do not exhibit new bugs or regression in Sage, but only minor changes in remote database. As such, they are less important than all the nonfixed bugs that are waiting on trac without breaking any doctest. The aim of this module is about querying a remote dynamic database, if we want to be illustrative, we should show the results provided by the database, and they are subject to changes.\n\n> I think there may be valid reasons to not run internet doctests by default, but I'm not  convinced by this one. If you are worried that we might flood the OEIS servers, then rewrite the doctests to avoid this. For example, I can easily imagine someone adding \"internet\" to the optional doctest tags for the patchbots.\n\n\nThe thing is that i do not want to use something like `not tested` because it should be possible to test them in order to fix them easily. Since the doctests should still be runable, they will be runable by any patchbot as well. What do you suggest ? Should we add a `please_do_not_run_by_default` keyword ?",
    "created_at": "2015-06-12T12:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207711",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:34 jhpalmieri]:
> Of course there has to be a balance, but I don't know of any examples where we intentionally allow failed doctests for the sake of this balance. Instead, it is often possible to write doctests which are both illustrative and correct.


The goal of this ticket is precisely about fixing broken doctests. We do not intentionally allow failed doctests, they will all be illustrative and correct once this ticket get merged. I am just saying that such broken doctests do not exhibit new bugs or regression in Sage, but only minor changes in remote database. As such, they are less important than all the nonfixed bugs that are waiting on trac without breaking any doctest. The aim of this module is about querying a remote dynamic database, if we want to be illustrative, we should show the results provided by the database, and they are subject to changes.

> I think there may be valid reasons to not run internet doctests by default, but I'm not  convinced by this one. If you are worried that we might flood the OEIS servers, then rewrite the doctests to avoid this. For example, I can easily imagine someone adding "internet" to the optional doctest tags for the patchbots.


The thing is that i do not want to use something like `not tested` because it should be possible to test them in order to fix them easily. Since the doctests should still be runable, they will be runable by any patchbot as well. What do you suggest ? Should we add a `please_do_not_run_by_default` keyword ?



---

archive/issue_comments_207712.json:
```json
{
    "body": "Replying to [comment:38 tmonteil]:\n> Should we add a `please_do_not_run_by_default` keyword ?\n\nI think that keyword is called `optional - internet`.",
    "created_at": "2015-06-12T12:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207712",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:38 tmonteil]:
> Should we add a `please_do_not_run_by_default` keyword ?

I think that keyword is called `optional - internet`.



---

archive/issue_comments_207713.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T12:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207714.json:
```json
{
    "body": "Replying to [comment:27 jdemeyer]:\n> This needs to be rebased to #18637.\n\n\nI can not fetch the branch, `git trac fetch 18637` leads to an error.",
    "created_at": "2015-06-12T13:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207714",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:27 jdemeyer]:
> This needs to be rebased to #18637.


I can not fetch the branch, `git trac fetch 18637` leads to an error.



---

archive/issue_comments_207715.json:
```json
{
    "body": "Replying to [comment:41 tmonteil]:\n> I can not fetch the branch, `git trac fetch 18637` leads to an error.\n\n\nIt seems that i have been victim of [this](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/75678) [issue](https://groups.google.com/forum/?fromgroups#!searchin/sage-devel/branch$20ticket$20closed/sage-devel/FJuKA4OiMWY/mAJeDFlAXX8J).",
    "created_at": "2015-06-12T17:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207715",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:41 tmonteil]:
> I can not fetch the branch, `git trac fetch 18637` leads to an error.


It seems that i have been victim of [this](http://thread.gmane.org/gmane.comp.mathematics.sage.devel/75678) [issue](https://groups.google.com/forum/?fromgroups#!searchin/sage-devel/branch$20ticket$20closed/sage-devel/FJuKA4OiMWY/mAJeDFlAXX8J).



---

archive/issue_comments_207716.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-12T17:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207717.json:
```json
{
    "body": "I hope i did the merge the correct way. What looks weird to me is that when i click on the merge commit ([50b983a](http://git.sagemath.org/sage.git/commit/?id=50b983ae7a64a3ae7cd3e7c55a021f24e65dd30c)) i see tons of changes that correspond to #18637, wile i would expect to see only the few minor choices i had to make between the two versions. So, i wonder how could this be reviewed. Is there a got tool to see what non-automatic was done in a merge commit ? Otherwise, i could use a merge commit to insert some bad code and be almost sure that it will not be reviewed because it will be considered as code coming from the other branch.",
    "created_at": "2015-06-12T17:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207717",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I hope i did the merge the correct way. What looks weird to me is that when i click on the merge commit ([50b983a](http://git.sagemath.org/sage.git/commit/?id=50b983ae7a64a3ae7cd3e7c55a021f24e65dd30c)) i see tons of changes that correspond to #18637, wile i would expect to see only the few minor choices i had to make between the two versions. So, i wonder how could this be reviewed. Is there a got tool to see what non-automatic was done in a merge commit ? Otherwise, i could use a merge commit to insert some bad code and be almost sure that it will not be reviewed because it will be considered as code coming from the other branch.



---

archive/issue_comments_207718.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-12T17:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207718",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207719.json:
```json
{
    "body": "Replying to [comment:44 tmonteil]:\n> I hope i did the merge the correct way. What looks weird to me is that when i click on the merge commit ([50b983a](http://git.sagemath.org/sage.git/commit/?id=50b983ae7a64a3ae7cd3e7c55a021f24e65dd30c)) i see tons of changes that correspond to #18637, wile i would expect to see only the few minor choices i had to make between the two versions. So, i wonder how could this be reviewed. Is there a got tool to see what non-automatic was done in a merge commit ? Otherwise, i could use a merge commit to insert some bad code and be almost sure that it will not be reviewed because it will be considered as code coming from the other branch.\n\nI think it's best to review the branch as a whole, not the individual commits. Especially for a ticket like this with not so many changes this is the best.",
    "created_at": "2015-06-12T19:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207719",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:44 tmonteil]:
> I hope i did the merge the correct way. What looks weird to me is that when i click on the merge commit ([50b983a](http://git.sagemath.org/sage.git/commit/?id=50b983ae7a64a3ae7cd3e7c55a021f24e65dd30c)) i see tons of changes that correspond to #18637, wile i would expect to see only the few minor choices i had to make between the two versions. So, i wonder how could this be reviewed. Is there a got tool to see what non-automatic was done in a merge commit ? Otherwise, i could use a merge commit to insert some bad code and be almost sure that it will not be reviewed because it will be considered as code coming from the other branch.

I think it's best to review the branch as a whole, not the individual commits. Especially for a ticket like this with not so many changes this is the best.



---

archive/issue_comments_207720.json:
```json
{
    "body": "patchbot now complains about pickle. This usually means a unicode character problem.\nMaybe the word \"Lam\u00e9\" is the culprit..",
    "created_at": "2015-06-13T12:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207720",
    "user": "https://github.com/fchapoton"
}
```

patchbot now complains about pickle. This usually means a unicode character problem.
Maybe the word "Lamé" is the culprit..



---

archive/issue_comments_207721.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-13T16:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207722.json:
```json
{
    "body": "Apparently, no patchbot is willing to work on this ticket anymore :/",
    "created_at": "2015-06-22T19:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207722",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Apparently, no patchbot is willing to work on this ticket anymore :/



---

archive/issue_comments_207723.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-08T16:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207724.json:
```json
{
    "body": "Just a detail, but what's with all the changes of the form\n\n```diff\n- sage: oeis(seq)[0]  # optional - internet\n+ sage: oeis(seq)[0]                              # optional -- internet\n```",
    "created_at": "2015-07-08T19:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207724",
    "user": "https://github.com/jdemeyer"
}
```

Just a detail, but what's with all the changes of the form

```diff
- sage: oeis(seq)[0]  # optional - internet
+ sage: oeis(seq)[0]                              # optional -- internet
```



---

archive/issue_comments_207725.json:
```json
{
    "body": "It is more readable when you access the doc from the command line.",
    "created_at": "2015-07-08T22:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207725",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

It is more readable when you access the doc from the command line.



---

archive/issue_comments_207726.json:
```json
{
    "body": "Broken doctest in `combinat/species/library.py`. Otherwise it looks good.\n\nNathann",
    "created_at": "2015-09-02T12:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207726",
    "user": "https://github.com/nathanncohen"
}
```

Broken doctest in `combinat/species/library.py`. Otherwise it looks good.

Nathann



---

archive/issue_comments_207727.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-02T12:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207727",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_207728.json:
```json
{
    "body": "Actually:\n\n```\nsage -t --long quickref.py  # 1 doctest failed\nsage -t --long integer_list.py  # 1 doctest failed\nsage -t --long species/library.py  # 1 doctest failed\n\n```",
    "created_at": "2015-09-02T13:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207728",
    "user": "https://github.com/nathanncohen"
}
```

Actually:

```
sage -t --long quickref.py  # 1 doctest failed
sage -t --long integer_list.py  # 1 doctest failed
sage -t --long species/library.py  # 1 doctest failed

```



---

archive/issue_comments_207729.json:
```json
{
    "body": "Very broken:\n\n```\nsage -t --optional=sage,internet src/sage/databases/oeis.py\n```\ngives\n\n```\nsage -t src/sage/databases/oeis.py  # 25 doctests failed\n```",
    "created_at": "2015-09-18T11:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207729",
    "user": "https://github.com/fchapoton"
}
```

Very broken:

```
sage -t --optional=sage,internet src/sage/databases/oeis.py
```
gives

```
sage -t src/sage/databases/oeis.py  # 25 doctests failed
```



---

archive/issue_comments_207730.json:
```json
{
    "body": "Instead of fixing the doctests by changing their expected output, we should really test those features without relying on the exact text received from the OEIS. These doctests are broken most of the time nowadays.\n\nNathann",
    "created_at": "2015-09-18T12:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207730",
    "user": "https://github.com/nathanncohen"
}
```

Instead of fixing the doctests by changing their expected output, we should really test those features without relying on the exact text received from the OEIS. These doctests are broken most of the time nowadays.

Nathann



---

archive/issue_comments_207731.json:
```json
{
    "body": "Replying to [comment:54 ncohen]:\n> Actually:\n> \n> \n> ```\n> sage -t --long quickref.py  # 1 doctest failed\n> sage -t --long integer_list.py  # 1 doctest failed\n> sage -t --long species/library.py  # 1 doctest failed\n> \n> ```\n\n\nThanks, i updated the branch (and merged it with the latest beta).",
    "created_at": "2015-09-18T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207731",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:54 ncohen]:
> Actually:
> 
> 
> ```
> sage -t --long quickref.py  # 1 doctest failed
> sage -t --long integer_list.py  # 1 doctest failed
> sage -t --long species/library.py  # 1 doctest failed
> 
> ```


Thanks, i updated the branch (and merged it with the latest beta).



---

archive/issue_comments_207732.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-18T19:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207733.json:
```json
{
    "body": "Replying to [comment:55 chapoton]:\n> Very broken:\n> \n> ```\n> sage -t --optional=sage,internet src/sage/databases/oeis.py\n> ```\n> gives\n> \n> ```\n> sage -t src/sage/databases/oeis.py  # 25 doctests failed\n> ```\n\n\nI do not see any error here, did you apply the branch ?",
    "created_at": "2015-09-18T19:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207733",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:55 chapoton]:
> Very broken:
> 
> ```
> sage -t --optional=sage,internet src/sage/databases/oeis.py
> ```
> gives
> 
> ```
> sage -t src/sage/databases/oeis.py  # 25 doctests failed
> ```


I do not see any error here, did you apply the branch ?



---

archive/issue_comments_207734.json:
```json
{
    "body": "Replying to [comment:56 ncohen]:\n> Instead of fixing the doctests by changing their expected output, we should really test those features without relying on the exact text received from the OEIS. These doctests are broken most of the time nowadays.\n> \n> Nathann\n\n\nThe problem is that those doctests have a role of documentation, not test. They are an illustration of some mathematical concept, hence the actual text is important. In the last commit, the oeis calls are supposed to illustrate things about:\n\n- Genus of modular group Gamma_0(n),\n- Motzkin numbers,\n- species of simple graphs,\n- Coefficients of a Bessel function,\n\nnot about testing Sage/oeis features, so writing indirect doctests that will not show the results provided by the OEIS database might not be interesting.",
    "created_at": "2015-09-18T19:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207734",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:56 ncohen]:
> Instead of fixing the doctests by changing their expected output, we should really test those features without relying on the exact text received from the OEIS. These doctests are broken most of the time nowadays.
> 
> Nathann


The problem is that those doctests have a role of documentation, not test. They are an illustration of some mathematical concept, hence the actual text is important. In the last commit, the oeis calls are supposed to illustrate things about:

- Genus of modular group Gamma_0(n),
- Motzkin numbers,
- species of simple graphs,
- Coefficients of a Bessel function,

not about testing Sage/oeis features, so writing indirect doctests that will not show the results provided by the OEIS database might not be interesting.



---

archive/issue_comments_207735.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-18T19:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207735",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_207736.json:
```json
{
    "body": "> The problem is that those doctests have a role of documentation, not test. \n\n\nThen add a `# random` flag at the end of those lines, so that the tests do not break so often. And where you actually need to test something, add it in a TEST section where you can be as unclear as you want to test what you want to test (as you don't need to be understood by a newcomer), so that what should be tested is tested.\n\nNathann",
    "created_at": "2015-09-18T19:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207736",
    "user": "https://github.com/nathanncohen"
}
```

> The problem is that those doctests have a role of documentation, not test. 


Then add a `# random` flag at the end of those lines, so that the tests do not break so often. And where you actually need to test something, add it in a TEST section where you can be as unclear as you want to test what you want to test (as you don't need to be understood by a newcomer), so that what should be tested is tested.

Nathann



---

archive/issue_comments_207737.json:
```json
{
    "body": "Replying to [comment:62 ncohen]:\n> Then add a `# random` flag at the end of those lines, so that the tests do not break so often. And where you actually need to test something, add it in a TEST section where you can be as unclear as you want to test what you want to test (as you don't need to be understood by a newcomer), so that what should be tested is tested.\n\n\nThe tests do not break at all thanks to the `# internet` flag, which is not turned on by default. It has the same effect than `# random` except that we can run them from time to time to check/update.\n\nPlease read the whole thread, all this has already been discussed, in particular see [comment:39 comment 39 (jdemeyer)]:\n> Replying to [comment:38 tmonteil]:\n> > Should we add a `please_do_not_run_by_default` keyword ?\n\n> I think that keyword is called `optional - internet`.",
    "created_at": "2015-09-19T08:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207737",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:62 ncohen]:
> Then add a `# random` flag at the end of those lines, so that the tests do not break so often. And where you actually need to test something, add it in a TEST section where you can be as unclear as you want to test what you want to test (as you don't need to be understood by a newcomer), so that what should be tested is tested.


The tests do not break at all thanks to the `# internet` flag, which is not turned on by default. It has the same effect than `# random` except that we can run them from time to time to check/update.

Please read the whole thread, all this has already been discussed, in particular see [comment:39 comment 39 (jdemeyer)]:
> Replying to [comment:38 tmonteil]:
> > Should we add a `please_do_not_run_by_default` keyword ?

> I think that keyword is called `optional - internet`.



---

archive/issue_comments_207738.json:
```json
{
    "body": "> The tests do not break at all thanks to the `# internet` flag, which is not turned on by default. It has the same effect than `# random` except that we can run them from time to time to check/update.\n\n\nNo, it has not. It gives you a way to have a clean documentation that is helpful to the users even if the remote database changes, and it gives you a way to write consistent tests why will not break even if the database changes.\n\n> Please read the whole thread\n\n\nI do not care at all if you like to write broken test and to fix them every two months. I just mentionned a way to do the job properly, and I will not fight with you if you do not care. Have fun fixing them again in 6 months.\n\nNathann",
    "created_at": "2015-09-19T08:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207738",
    "user": "https://github.com/nathanncohen"
}
```

> The tests do not break at all thanks to the `# internet` flag, which is not turned on by default. It has the same effect than `# random` except that we can run them from time to time to check/update.


No, it has not. It gives you a way to have a clean documentation that is helpful to the users even if the remote database changes, and it gives you a way to write consistent tests why will not break even if the database changes.

> Please read the whole thread


I do not care at all if you like to write broken test and to fix them every two months. I just mentionned a way to do the job properly, and I will not fight with you if you do not care. Have fun fixing them again in 6 months.

Nathann



---

archive/issue_comments_207739.json:
```json
{
    "body": "Thanks for your actual contribution on this ticket.\n\nNow, if someone could review it, the changes could enter Sage.",
    "created_at": "2015-09-29T14:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207739",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Thanks for your actual contribution on this ticket.

Now, if someone could review it, the changes could enter Sage.



---

archive/issue_comments_207740.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-13T20:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207741.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-13T20:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_047914.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-13T20:50:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47914"
}
```



---

archive/issue_events_047915.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-13T20:50:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47915"
}
```



---

archive/issue_comments_207742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-22T13:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_207743.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-22T13:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207743",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_207744.json:
```json
{
    "body": "ok, looks good to me.",
    "created_at": "2016-01-22T13:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207744",
    "user": "https://github.com/fchapoton"
}
```

ok, looks good to me.



---

archive/issue_comments_207745.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-23T20:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16252#issuecomment-207745",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_047916.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-23T20:42:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16252",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16252#event-47916"
}
```
