# Issue 16797: is_difference_matrix

archive/issues_016560.json:
```json
{
    "assignees": [],
    "body": "Spent a lifetime on that because I had not noticed that I was first enumerating elements using a list L, then enumerating the same elements using `{x:i for i,x in enumerate(L)}`. And of course that was not the same ordering `T_T`\n\nNathann\n\nCC:  @videlec\n\nBranch/Commit: **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Nathann Cohen**\n\nComponent: **combinatorial designs**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16797_\n\n",
    "closed_at": "2014-08-16T07:52:04Z",
    "created_at": "2014-08-11T14:04:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "is_difference_matrix",
    "type": "issue",
    "updated_at": "2014-08-16T07:52:04Z",
    "url": "https://github.com/sagemath/sage/issues/16797",
    "user": "https://github.com/nathanncohen"
}
```
Spent a lifetime on that because I had not noticed that I was first enumerating elements using a list L, then enumerating the same elements using `{x:i for i,x in enumerate(L)}`. And of course that was not the same ordering `T_T`

Nathann

CC:  @videlec

Branch/Commit: **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**

Reviewer: **Vincent Delecroix**

Author: **Nathann Cohen**

Component: **combinatorial designs**

_Issue created by migration from https://trac.sagemath.org/ticket/16797_





---

archive/issue_events_237841.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-11T14:04:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237841"
}
```



---

archive/issue_events_237842.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-11T14:04:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237842"
}
```



---

archive/issue_events_237843.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-11T14:04:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237843"
}
```



---

archive/issue_events_237844.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-11T14:04:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237844"
}
```



---

archive/issue_events_237845.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-11T14:05:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237845"
}
```



---

archive/issue_comments_219996.json:
```json
{
    "body": "Branch: **[u/ncohen/16797](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16797)**",
    "created_at": "2014-08-11T14:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-219996",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/16797](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16797)**



---

archive/issue_comments_219997.json:
```json
{
    "body": "Commit: **[`e76b5ab`](https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb)**",
    "created_at": "2014-08-11T14:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-219997",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`e76b5ab`](https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb)**



---

archive/issue_comments_219998.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb\"><code>e76b5ab</code></a></td><td><code>trac #16797: is_difference_matrix</code></td></tr></table>\n",
    "created_at": "2014-08-11T14:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-219998",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb"><code>e76b5ab</code></a></td><td><code>trac #16797: is_difference_matrix</code></td></tr></table>




---

archive/issue_comments_219999.json:
```json
{
    "body": "Changed commit from **[`e76b5ab`](https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb)** to **[`8f10d94`](https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e)**",
    "created_at": "2014-08-11T14:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-219999",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e76b5ab`](https://github.com/sagemath/sagetrac-mirror/commit/e76b5ab0beef31356d6b640c523f380a92f7efbb)** to **[`8f10d94`](https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e)**



---

archive/issue_comments_220000.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e\"><code>8f10d94</code></a></td><td><code>trac #16797: is_difference_matrix</code></td></tr></table>\n",
    "created_at": "2014-08-11T14:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220000",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e"><code>8f10d94</code></a></td><td><code>trac #16797: is_difference_matrix</code></td></tr></table>




---

archive/issue_comments_220001.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi Nathann,\n\nWhy do you use this strange convention about rows/cols? From the Handbook chapter 17, there are k rows and lambda |G| columns...\n\nVincent",
    "created_at": "2014-08-11T14:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220001",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi Nathann,

Why do you use this strange convention about rows/cols? From the Handbook chapter 17, there are k rows and lambda |G| columns...

Vincent



---

archive/issue_comments_220002.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> Why do you use this strange convention about rows/cols? From the Handbook chapter 17, there are k rows and lambda |G| columns...\n\nBecause in the OA it is the columns that must be orthogonal ...\n\nNathann",
    "created_at": "2014-08-11T14:16:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220002",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> Why do you use this strange convention about rows/cols? From the Handbook chapter 17, there are k rows and lambda |G| columns...

Because in the OA it is the columns that must be orthogonal ...

Nathann



---

archive/issue_comments_220003.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHum... from the documentation of `OA_from_quasi_difference_matrix`\n\n```\n    Let `G` be a group of order `g`. A *difference matrix* `M` is a `k \\times g`\n    matrix with entries from `G` such that for any `1\\leq i < j < k` the set\n    `\\{d_{il}-d_{jl}:1\\leq l \\leq g\\}` is equal to `G`.\n```\n\nVincent",
    "created_at": "2014-08-11T14:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220003",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Hum... from the documentation of `OA_from_quasi_difference_matrix`

```
    Let `G` be a group of order `g`. A *difference matrix* `M` is a `k \times g`
    matrix with entries from `G` such that for any `1\leq i < j < k` the set
    `\{d_{il}-d_{jl}:1\leq l \leq g\}` is equal to `G`.
```

Vincent



---

archive/issue_comments_220004.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think that it will be easier to work with k columns. Look at the OA code, we spend our lifetime creating rows for every set of a PBD, or developping rows according to some groups... For instance look at the doc you just wrote for the helper function : you have one row in your matrix, and you let this H hyperplane act on it to generate new rows.\n\nIf you want to add columns instead it becomes a mess, you have to extend each column instead of just adding a row to the matrix.\n\nBy the way, many cals to `OA_from_quasi_difference_matrix` are already preceded by a `M=zip(*M) # transpose M`. Actually, I am looking at database.py and really a LOT of code would be simplified by changing that: look how often you have code like that to create the matrices:\n\n```\nfor <something>:\n    M[0].append(e)\n    M[1].append(f)\n    ....\n```\n\nIf all that was the transpose instead, we would just have to write:\n\n```\nfor <something>:\n    M.append([e,f,...])\n```\n\nWhat do you think ?\n\nNathann",
    "created_at": "2014-08-11T18:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220004",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

I think that it will be easier to work with k columns. Look at the OA code, we spend our lifetime creating rows for every set of a PBD, or developping rows according to some groups... For instance look at the doc you just wrote for the helper function : you have one row in your matrix, and you let this H hyperplane act on it to generate new rows.

If you want to add columns instead it becomes a mess, you have to extend each column instead of just adding a row to the matrix.

By the way, many cals to `OA_from_quasi_difference_matrix` are already preceded by a `M=zip(*M) # transpose M`. Actually, I am looking at database.py and really a LOT of code would be simplified by changing that: look how often you have code like that to create the matrices:

```
for <something>:
    M[0].append(e)
    M[1].append(f)
    ....
```

If all that was the transpose instead, we would just have to write:

```
for <something>:
    M.append([e,f,...])
```

What do you think ?

Nathann



---

archive/issue_comments_220005.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI am not against having the difference matrix the other way around (actually I do not care). But then:\n- rewrite the documentation appropriately and warn the reader that the convention is different from the Handbook,\n- modify all functions that use difference matrix\n\nVincent",
    "created_at": "2014-08-12T08:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220005",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

I am not against having the difference matrix the other way around (actually I do not care). But then:
- rewrite the documentation appropriately and warn the reader that the convention is different from the Handbook,
- modify all functions that use difference matrix

Vincent



---

archive/issue_events_237846.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-12T08:55:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237846"
}
```



---

archive/issue_events_237847.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-12T08:55:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237847"
}
```



---

archive/issue_comments_220006.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOkay, then I will do this after the current patches have been reviewed. Otherwise we will have to deal with countless conflicts again. I write this to follow the current convention in Sage and will change it later, along with the implemented code.\n\nNathann",
    "created_at": "2014-08-12T09:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220006",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Okay, then I will do this after the current patches have been reviewed. Otherwise we will have to deal with countless conflicts again. I write this to follow the current convention in Sage and will change it later, along with the implemented code.

Nathann



---

archive/issue_comments_220007.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a\"><code>aa097f6</code></a></td><td><code>trac #16797: Fit with the current definition until we can change everything at once</code></td></tr></table>\n",
    "created_at": "2014-08-12T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a"><code>aa097f6</code></a></td><td><code>trac #16797: Fit with the current definition until we can change everything at once</code></td></tr></table>




---

archive/issue_comments_220008.json:
```json
{
    "body": "Changed commit from **[`8f10d94`](https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e)** to **[`aa097f6`](https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a)**",
    "created_at": "2014-08-12T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f10d94`](https://github.com/sagemath/sagetrac-mirror/commit/8f10d9412cbb9d713dd27ec72acb97c14f3d479e)** to **[`aa097f6`](https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a)**



---

archive/issue_events_237848.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T09:25:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237848"
}
```



---

archive/issue_events_237849.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T09:25:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237849"
}
```



---

archive/issue_comments_220009.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI added a small check before `M = zip(*M)` because this operation takes the min of the length of the lists in M:\n\n```\nsage: zip([1],[2],[3,4,5,6])\n[(1, 2, 3)]\n```\n\nNathann",
    "created_at": "2014-08-12T09:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220009",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

I added a small check before `M = zip(*M)` because this operation takes the min of the length of the lists in M:

```
sage: zip([1],[2],[3,4,5,6])
[(1, 2, 3)]
```

Nathann



---

archive/issue_events_237850.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-12T13:14:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237850"
}
```



---

archive/issue_events_237851.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-12T13:14:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237851"
}
```



---

archive/issue_comments_220010.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHello,\n\n1) Why do you transpose the matrix to check the definition? You would avoid many multiplications in `x_minus_y[M_c[ii*K+i]][M_c[ii*K+j]]`.\n\n2) I do not like the order of the argument. For orthogonal arrays it is OA, k, n, but here it is G, k, M... I would prefer G,M,k.\n\n3) We can win a lot of time with a C array for `x_minus_y` and `seen_values`. It is at `u/vdelecroix/16797`\n\nVincent",
    "created_at": "2014-08-12T13:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220010",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Hello,

1) Why do you transpose the matrix to check the definition? You would avoid many multiplications in `x_minus_y[M_c[ii*K+i]][M_c[ii*K+j]]`.

2) I do not like the order of the argument. For orthogonal arrays it is OA, k, n, but here it is G, k, M... I would prefer G,M,k.

3) We can win a lot of time with a C array for `x_minus_y` and `seen_values`. It is at `u/vdelecroix/16797`

Vincent



---

archive/issue_comments_220011.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYo !\n\n> 1) Why do you transpose the matrix to check the definition?\n\nWhen we will change the definition to have k columns instead of k rows we will just have to remove the block of lines before the transposition.\n\n> You would avoid many multiplications in `x_minus_y[M_c[ii*K+i]][M_c[ii*K+j]]`.\n\nI am not sure that we pay these multiplications. Because of your experience with `is_sum_of_square` and my useless optimization in `is_orthogonal_array`\n\n> 2) I do not like the order of the argument. For orthogonal arrays it is OA, k, n, but here it is G, k, M... I would prefer G,M,k.\n\nIf you prefer ...\n\n> 3) We can win a lot of time with a C array for `x_minus_y` and `seen_values`. It is at `u/vdelecroix/16797`\n\nI was not sure that it would make a difference, thus I kept the Cython version. Do you have timings ?\n\nNathann",
    "created_at": "2014-08-12T13:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220011",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Yo !

> 1) Why do you transpose the matrix to check the definition?

When we will change the definition to have k columns instead of k rows we will just have to remove the block of lines before the transposition.

> You would avoid many multiplications in `x_minus_y[M_c[ii*K+i]][M_c[ii*K+j]]`.

I am not sure that we pay these multiplications. Because of your experience with `is_sum_of_square` and my useless optimization in `is_orthogonal_array`

> 2) I do not like the order of the argument. For orthogonal arrays it is OA, k, n, but here it is G, k, M... I would prefer G,M,k.

If you prefer ...

> 3) We can win a lot of time with a C array for `x_minus_y` and `seen_values`. It is at `u/vdelecroix/16797`

I was not sure that it would make a difference, thus I kept the Cython version. Do you have timings ?

Nathann



---

archive/issue_comments_220012.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nold\n\n```\nsage: from sage.combinat.designs.designs_pyx import is_difference_matrix\nsage: q = 5**3\nsage: F = GF(q,'x')\nsage: M = [[x*y for y in F] for x in F]\nsage: timeit(\"is_difference_matrix(F,q,M)\")\n5 loops, best of 3: 92 ms per loop\n```\n\nnew\n\n```\nsage: from sage.combinat.designs.designs_pyx import is_difference_matrix\nsage: q = 5**3\nsage: F = GF(q,'x')\nsage: M = [[x*y for y in F] for x in F]\nsage: timeit(\"is_difference_matrix(F,q,M)\")\n25 loops, best of 3: 11.9 ms per loop\n```\n\nVincent",
    "created_at": "2014-08-12T13:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220012",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

old

```
sage: from sage.combinat.designs.designs_pyx import is_difference_matrix
sage: q = 5**3
sage: F = GF(q,'x')
sage: M = [[x*y for y in F] for x in F]
sage: timeit("is_difference_matrix(F,q,M)")
5 loops, best of 3: 92 ms per loop
```

new

```
sage: from sage.combinat.designs.designs_pyx import is_difference_matrix
sage: q = 5**3
sage: F = GF(q,'x')
sage: M = [[x*y for y in F] for x in F]
sage: timeit("is_difference_matrix(F,q,M)")
25 loops, best of 3: 11.9 ms per loop
```

Vincent



---

archive/issue_comments_220013.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHmmmmmmmmm.. I wonder how much come from the C version of x_minus_y instead of Cython. I'll do a test.\n\nNathann",
    "created_at": "2014-08-12T13:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220013",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Hmmmmmmmmm.. I wonder how much come from the C version of x_minus_y instead of Cython. I'll do a test.

Nathann



---

archive/issue_comments_220014.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHMmmmmm `O_o`\n\nWell, with the Cython version of x_minus_y (at public/16797) your example takes 15ms, but what I get when I try with your branch is a segfault\n\n```\nsage: sage: from sage.combinat.designs.designs_pyx import is_difference_matrix\nsage: sage: q = 5**3\nsage: sage: F = GF(q,'x')\nsage: sage: M = [[x*y for y in F] for x in F]\nsage: sage: timeit(\"is_difference_matrix(F,q,M)\")\n------------------------------------------------------------------------\n/home/ncohen/.Sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7fca2ebe7af1]\n/home/ncohen/.Sage/local/lib/libcsage.so(sigdie+0x1e)[0x7fca2ebe7c85]\n/home/ncohen/.Sage/local/lib/libcsage.so(sage_signal_handler+0x1cb)[0x7fca2ebe7545]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0xf8d0)[0x7fca33d788d0]\n...\n```\n\nNathann",
    "created_at": "2014-08-12T13:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220014",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

HMmmmmm `O_o`

Well, with the Cython version of x_minus_y (at public/16797) your example takes 15ms, but what I get when I try with your branch is a segfault

```
sage: sage: from sage.combinat.designs.designs_pyx import is_difference_matrix
sage: sage: q = 5**3
sage: sage: F = GF(q,'x')
sage: sage: M = [[x*y for y in F] for x in F]
sage: sage: timeit("is_difference_matrix(F,q,M)")
------------------------------------------------------------------------
/home/ncohen/.Sage/local/lib/libcsage.so(print_backtrace+0x31)[0x7fca2ebe7af1]
/home/ncohen/.Sage/local/lib/libcsage.so(sigdie+0x1e)[0x7fca2ebe7c85]
/home/ncohen/.Sage/local/lib/libcsage.so(sage_signal_handler+0x1cb)[0x7fca2ebe7545]
/lib/x86_64-linux-gnu/libpthread.so.0(+0xf8d0)[0x7fca33d788d0]
...
```

Nathann



---

archive/issue_comments_220015.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nStupid error in the malloc. I guess that on your computer `sizeof(int)` and `sizeof(int *)` are different.",
    "created_at": "2014-08-12T13:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220015",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Stupid error in the malloc. I guess that on your computer `sizeof(int)` and `sizeof(int *)` are different.



---

archive/issue_comments_220016.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n(updated on my branch)",
    "created_at": "2014-08-12T13:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220016",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

(updated on my branch)



---

archive/issue_comments_220017.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAhaah Okay, 9.12ms : you win.\n\nGod it's hard to know when to optimize `:-p`\n\nNathann",
    "created_at": "2014-08-12T13:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220017",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Ahaah Okay, 9.12ms : you win.

God it's hard to know when to optimize `:-p`

Nathann



---

archive/issue_comments_220018.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHmmm... The way you manage memory, you don't free any of the x_minus_y if there is a problem during the allocation of G_seen. By the way you could spare yourself a loop of alloc/free if you do not allow a vector of length G_card for each entry of x_minus_y but rather alloc a big table of size `G_card**2` and then let `int ** x_minus_y` point toward parts of it.\n\nNathann",
    "created_at": "2014-08-12T13:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220018",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

Hmmm... The way you manage memory, you don't free any of the x_minus_y if there is a problem during the allocation of G_seen. By the way you could spare yourself a loop of alloc/free if you do not allow a vector of length G_card for each entry of x_minus_y but rather alloc a big table of size `G_card**2` and then let `int ** x_minus_y` point toward parts of it.

Nathann



---

archive/issue_comments_220019.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOh, and could you also give more info when an element does not appear exactly lambda times ? The way you wrote the code you can say which element it is and how many times it appeared.\n\nNathann",
    "created_at": "2014-08-12T13:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220019",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

Oh, and could you also give more info when an element does not appear exactly lambda times ? The way you wrote the code you can say which element it is and how many times it appeared.

Nathann



---

archive/issue_comments_220020.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI am on it!!\n\nVincent",
    "created_at": "2014-08-12T13:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220020",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

I am on it!!

Vincent



---

archive/issue_comments_220021.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\ndone at `u/vdelecroix/16797`.\n\nVincent",
    "created_at": "2014-08-12T13:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220021",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

done at `u/vdelecroix/16797`.

Vincent



---

archive/issue_comments_220022.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYou still don't deallocate x_minus_y when there is a problem with other mallocs.",
    "created_at": "2014-08-12T13:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220022",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

You still don't deallocate x_minus_y when there is a problem with other mallocs.



---

archive/issue_comments_220023.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOkay I'll do it.\n\nNathann",
    "created_at": "2014-08-12T13:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220023",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

Okay I'll do it.

Nathann



---

archive/issue_comments_220024.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHey I just re-read your comment above: if we want to copy is_orthogonal_array's input we should make M be the first parameter, shouldn't we ?\n\nNathann",
    "created_at": "2014-08-12T14:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220024",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Hey I just re-read your comment above: if we want to copy is_orthogonal_array's input we should make M be the first parameter, shouldn't we ?

Nathann



---

archive/issue_comments_220025.json:
```json
{
    "body": "Changed commit from **[`aa097f6`](https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a)** to **[`b78c347`](https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd)**",
    "created_at": "2014-08-12T14:10:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220025",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa097f6`](https://github.com/sagemath/sagetrac-mirror/commit/aa097f61b7982ddd88cc5347f20da76098912d7a)** to **[`b78c347`](https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd)**



---

archive/issue_comments_220026.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d21b8cfc7b9e16a2f8785dc4f718b860309eb8f\"><code>5d21b8c</code></a></td><td><code>trac #16797: int * and ** instead of Python list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f29bd1087ffb8c8f59adb9ec850356139141334\"><code>8f29bd1</code></a></td><td><code>trac #16797: change int to int * in a malloc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/811e3e9193046e09553a2ad0a5685e0a989ddfb3\"><code>811e3e9</code></a></td><td><code>trac #16797: better malloc + better error msg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b8c2e3b188d19461980aab915b25b5f6115a7a9\"><code>1b8c2e3</code></a></td><td><code>trac #16797: More compact mallocs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd\"><code>b78c347</code></a></td><td><code>trac #16797: Reorder the arguments to copy is_orthogonal_array</code></td></tr></table>\n",
    "created_at": "2014-08-12T14:10:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220026",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d21b8cfc7b9e16a2f8785dc4f718b860309eb8f"><code>5d21b8c</code></a></td><td><code>trac #16797: int * and ** instead of Python list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f29bd1087ffb8c8f59adb9ec850356139141334"><code>8f29bd1</code></a></td><td><code>trac #16797: change int to int * in a malloc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/811e3e9193046e09553a2ad0a5685e0a989ddfb3"><code>811e3e9</code></a></td><td><code>trac #16797: better malloc + better error msg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b8c2e3b188d19461980aab915b25b5f6115a7a9"><code>1b8c2e3</code></a></td><td><code>trac #16797: More compact mallocs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd"><code>b78c347</code></a></td><td><code>trac #16797: Reorder the arguments to copy is_orthogonal_array</code></td></tr></table>




---

archive/issue_events_237852.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T14:12:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237852"
}
```



---

archive/issue_events_237853.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T14:12:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237853"
}
```



---

archive/issue_comments_220027.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nathanncohen](#comment:28):\n> Hey I just re-read your comment above: if we want to copy is_orthogonal_array's input we should make M be the first parameter, shouldn't we ?\n\nI don't know. For difference family it is `D,G` and not `G,D`.\n\nI like the rest... do what you want with the input and set to positive review.\n\n(I am going for a bike run.... back in 3 hours)\n\nVincent",
    "created_at": "2014-08-12T14:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220027",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nathanncohen](#comment:28):
> Hey I just re-read your comment above: if we want to copy is_orthogonal_array's input we should make M be the first parameter, shouldn't we ?

I don't know. For difference family it is `D,G` and not `G,D`.

I like the rest... do what you want with the input and set to positive review.

(I am going for a bike run.... back in 3 hours)

Vincent



---

archive/issue_events_237854.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T14:45:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237854"
}
```



---

archive/issue_events_237855.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-12T14:45:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237855"
}
```



---

archive/issue_comments_220028.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nYoooooo !\n\n> I like the rest... do what you want with the input and set to positive review.\n> \n> (I am going for a bike run.... back in 3 hours)\n\nOkayyyy, have fun ! And thanks for this patch !\n\nNathann",
    "created_at": "2014-08-12T14:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220028",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

Yoooooo !

> I like the rest... do what you want with the input and set to positive review.
> 
> (I am going for a bike run.... back in 3 hours)

Okayyyy, have fun ! And thanks for this patch !

Nathann



---

archive/issue_comments_220029.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2014-08-12T14:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220029",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_237856.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-13T07:03:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237856"
}
```



---

archive/issue_events_237857.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-13T07:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237857"
}
```



---

archive/issue_comments_220030.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI have a problem\n\n```\nsage: B\n[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n [0, 1, 2, 3, 4, 2, 3, 4, 0, 1],\n [0, 2, 4, 1, 3, 3, 0, 2, 4, 1],\n [0, 3, 1, 4, 2, 3, 1, 4, 2, 0],\n [0, 4, 3, 2, 1, 2, 1, 0, 4, 3],\n [0, 1, 4, 4, 1, 0, 2, 3, 3, 2],\n [1, 0, 1, 4, 4, 2, 0, 2, 3, 3],\n [4, 1, 0, 1, 4, 3, 2, 0, 2, 3]]\nsage: sage: is_difference_matrix(B,GF(5),8,2,verbose=True)\nThe matrix has 8 columns and lambda.|G|=2.5=10\nFalse\n```\nThere are 8 rows and 10 columns...\n\nVincent",
    "created_at": "2014-08-13T07:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220030",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

I have a problem

```
sage: B
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 1, 2, 3, 4, 2, 3, 4, 0, 1],
 [0, 2, 4, 1, 3, 3, 0, 2, 4, 1],
 [0, 3, 1, 4, 2, 3, 1, 4, 2, 0],
 [0, 4, 3, 2, 1, 2, 1, 0, 4, 3],
 [0, 1, 4, 4, 1, 0, 2, 3, 3, 2],
 [1, 0, 1, 4, 4, 2, 0, 2, 3, 3],
 [4, 1, 0, 1, 4, 3, 2, 0, 2, 3]]
sage: sage: is_difference_matrix(B,GF(5),8,2,verbose=True)
The matrix has 8 columns and lambda.|G|=2.5=10
False
```
There are 8 rows and 10 columns...

Vincent



---

archive/issue_comments_220031.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAll right, it is because `M_nrows` is initialized to soon. I will add the example in the doc.\n\nVincent",
    "created_at": "2014-08-13T07:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220031",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

All right, it is because `M_nrows` is initialized to soon. I will add the example in the doc.

Vincent



---

archive/issue_comments_220032.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSee at `u/vdelecroix/16797`.\n\nVincent",
    "created_at": "2014-08-13T07:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

See at `u/vdelecroix/16797`.

Vincent



---

archive/issue_events_237858.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-13T07:27:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237858"
}
```



---

archive/issue_events_237859.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-13T07:27:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237859"
}
```



---

archive/issue_comments_220033.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThaaanks ! Then it can get in.\n\nBy the way, I love \"the future\". Back in the old phone modem days, I wouldn't have thought that I'd be reviewing a trac ticket from a laptop in a car on the highway using a phone as a modem `:-PPP`\n\nNathann",
    "created_at": "2014-08-13T10:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220033",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">comment:37</div>

Thaaanks ! Then it can get in.

By the way, I love "the future". Back in the old phone modem days, I wouldn't have thought that I'd be reviewing a trac ticket from a laptop in a car on the highway using a phone as a modem `:-PPP`

Nathann



---

archive/issue_events_237860.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-13T10:11:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237860"
}
```



---

archive/issue_events_237861.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-13T10:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237861"
}
```



---

archive/issue_comments_220034.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nMerge conflict, please fix",
    "created_at": "2014-08-14T17:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220034",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

Merge conflict, please fix



---

archive/issue_events_237862.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-14T17:34:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237862"
}
```



---

archive/issue_events_237863.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-14T17:34:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237863"
}
```



---

archive/issue_comments_220035.json:
```json
{
    "body": "Changed commit from **[`b78c347`](https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd)** to **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**",
    "created_at": "2014-08-14T21:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220035",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b78c347`](https://github.com/sagemath/sagetrac-mirror/commit/b78c3475cc243b0f50cdd5c5c7bc6e9285bb97fd)** to **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**



---

archive/issue_comments_220036.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a\"><code>dee4275</code></a></td><td><code>trac #16797: Merged with 6.4.beta0</code></td></tr></table>\n",
    "created_at": "2014-08-14T21:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a"><code>dee4275</code></a></td><td><code>trac #16797: Merged with 6.4.beta0</code></td></tr></table>




---

archive/issue_events_237864.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-14T21:46:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237864"
}
```



---

archive/issue_events_237865.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-08-14T21:46:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237865"
}
```



---

archive/issue_comments_220037.json:
```json
{
    "body": "Changed branch from **[u/ncohen/16797](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16797)** to **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**",
    "created_at": "2014-08-16T07:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16797#issuecomment-220037",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/ncohen/16797](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16797)** to **[`dee4275`](https://github.com/sagemath/sagetrac-mirror/commit/dee4275d3b2af94bd625bbdd64c8b165d8414e1a)**



---

archive/issue_events_237866.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-16T07:52:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237866"
}
```



---

archive/issue_events_237867.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "232fcd1b46360efc72db1a0db34ad69ad88a9014",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-16T07:52:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16797",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16797#event-237867"
}
```
