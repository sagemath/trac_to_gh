# Issue 16835: cartesian product of VectorSpaces not in VectorSpaces

archive/issues_016598.json:
```json
{
    "body": "```\nsage: X=CombinatorialFreeModule(RDF,ZZ,category=ModulesWithBasis(RDF))\nsage: Y=cartesian_product((X,X))\nsage: X in ModulesWithBasis(RDF)\nTrue\nsage: Y in ModulesWithBasis(RDF)\nFalse\nsage: Y.categories()[1]\nCategory of modules with basis over Real Double Field\nsage: Y.categories()[1] is ModulesWithBasis(RDF)\nFalse\n```\n\nThis weirdness relates to the fact that `ModulesWithBasis(RDF)` prints as the `Category of vector spaces with basis over Real Double Field`. The `Category of modules with basis over Real Double Field` is one of its super categories.\n\nIn the case at hand I cannot construct a morphism from `Y` to `X` because of the category mismatch:\n\n```\nsage: Y.module_morphism(codomain=X,on_basis=lambda (i,j):X.monomial(i))\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n..\nValueError: Free module generated by Integer Ring over Real Double Field (+) Free module generated by Integer Ring over Real Double Field is not in Category of vector spaces with basis over Real Double Field\n```\n\n\n\n\nCC:  @nthiery\n\nBranch/Commit: 4e52d992d0e4ea3480fb3f538325c8a602c84047\n\nReviewer: Travis Scrimshaw\n\nAuthor: Christian Nassau\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16835\n\n",
    "closed_at": "2014-09-16T18:46:58Z",
    "created_at": "2014-08-15T22:36:08Z",
    "labels": [
        "component: categories",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "cartesian product of VectorSpaces not in VectorSpaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16835",
    "user": "https://github.com/cnassau"
}
```
```
sage: X=CombinatorialFreeModule(RDF,ZZ,category=ModulesWithBasis(RDF))
sage: Y=cartesian_product((X,X))
sage: X in ModulesWithBasis(RDF)
True
sage: Y in ModulesWithBasis(RDF)
False
sage: Y.categories()[1]
Category of modules with basis over Real Double Field
sage: Y.categories()[1] is ModulesWithBasis(RDF)
False
```

This weirdness relates to the fact that `ModulesWithBasis(RDF)` prints as the `Category of vector spaces with basis over Real Double Field`. The `Category of modules with basis over Real Double Field` is one of its super categories.

In the case at hand I cannot construct a morphism from `Y` to `X` because of the category mismatch:

```
sage: Y.module_morphism(codomain=X,on_basis=lambda (i,j):X.monomial(i))
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
..
ValueError: Free module generated by Integer Ring over Real Double Field (+) Free module generated by Integer Ring over Real Double Field is not in Category of vector spaces with basis over Real Double Field
```




CC:  @nthiery

Branch/Commit: 4e52d992d0e4ea3480fb3f538325c8a602c84047

Reviewer: Travis Scrimshaw

Author: Christian Nassau

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16835





---

archive/issue_comments_281312.json:
```json
{
    "body": "<a id='comment:1'></a>For the same reason this also fails:\n\n```\nsage: -Y.an_element()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: Free module generated by Integer Ring over Real Double Field (+) Free module generated by Integer Ring over Real Double Field is not in Category of vector spaces with basis over Real Double Field\n```",
    "created_at": "2014-08-16T05:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281312",
    "user": "https://github.com/cnassau"
}
```

<a id='comment:1'></a>For the same reason this also fails:

```
sage: -Y.an_element()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: Free module generated by Integer Ring over Real Double Field (+) Free module generated by Integer Ring over Real Double Field is not in Category of vector spaces with basis over Real Double Field
```



---

archive/issue_comments_281313.json:
```json
{
    "body": "Changing branch from \"\" to \"u/cnassau/16835\"",
    "created_at": "2014-08-16T11:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281313",
    "user": "https://github.com/cnassau"
}
```

Changing branch from "" to "u/cnassau/16835"



---

archive/issue_comments_281314.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-08-16T11:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281314",
    "user": "https://github.com/cnassau"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_281315.json:
```json
{
    "body": "Changing commit from \"\" to \"a34526c5c23935ef8dcc21aa371e0d7f8bef4219\"",
    "created_at": "2014-08-16T11:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281315",
    "user": "https://github.com/cnassau"
}
```

Changing commit from "" to "a34526c5c23935ef8dcc21aa371e0d7f8bef4219"



---

archive/issue_comments_281316.json:
```json
{
    "body": "Changing author from \"\" to \"Christian Nassau\"",
    "created_at": "2014-08-16T11:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281316",
    "user": "https://github.com/cnassau"
}
```

Changing author from "" to "Christian Nassau"



---

archive/issue_comments_281317.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-16T11:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281318.json:
```json
{
    "body": "Changing commit from \"a34526c5c23935ef8dcc21aa371e0d7f8bef4219\" to \"36d9efb62586594c049f2babbed379e3ee0c4b87\"",
    "created_at": "2014-08-16T11:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281318",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a34526c5c23935ef8dcc21aa371e0d7f8bef4219" to "36d9efb62586594c049f2babbed379e3ee0c4b87"



---

archive/issue_comments_281319.json:
```json
{
    "body": "Changing commit from \"36d9efb62586594c049f2babbed379e3ee0c4b87\" to \"5f19ac39d432d303625518d028ad14d8c2f96a3e\"",
    "created_at": "2014-08-16T11:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "36d9efb62586594c049f2babbed379e3ee0c4b87" to "5f19ac39d432d303625518d028ad14d8c2f96a3e"



---

archive/issue_comments_281320.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-16T11:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281321.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-16T11:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281321",
    "user": "https://github.com/cnassau"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281322.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-16T11:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281322",
    "user": "https://github.com/cnassau"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_281323.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-16T12:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281324.json:
```json
{
    "body": "Changing commit from \"5f19ac39d432d303625518d028ad14d8c2f96a3e\" to \"d94b6c13d8c33472e1433415aaf87649f231ec46\"",
    "created_at": "2014-08-16T12:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5f19ac39d432d303625518d028ad14d8c2f96a3e" to "d94b6c13d8c33472e1433415aaf87649f231ec46"



---

archive/issue_comments_281325.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-16T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281325",
    "user": "https://github.com/cnassau"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281326.json:
```json
{
    "body": "<a id='comment:8'></a>I've also had to change half a dozen unrelated files that had doctests to make sure that vector spaces had neither tensor product nor cartesian products. \n\nThe idea to document a snapshot of the current category graph in doctests that are spread out all over the place is not very good: it makes fixing things painful, and it doesn't prevent serious bugs [as this and other category related tickets show].",
    "created_at": "2014-08-16T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281326",
    "user": "https://github.com/cnassau"
}
```

<a id='comment:8'></a>I've also had to change half a dozen unrelated files that had doctests to make sure that vector spaces had neither tensor product nor cartesian products. 

The idea to document a snapshot of the current category graph in doctests that are spread out all over the place is not very good: it makes fixing things painful, and it doesn't prevent serious bugs [as this and other category related tickets show].



---

archive/issue_comments_281327.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2014-09-10T07:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281327",
    "user": "https://github.com/cnassau"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_281328.json:
```json
{
    "body": "<a id='comment:9'></a>I've changed the priority to make sure this issue gets addressed in the next release.",
    "created_at": "2014-09-10T07:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281328",
    "user": "https://github.com/cnassau"
}
```

<a id='comment:9'></a>I've changed the priority to make sure this issue gets addressed in the next release.



---

archive/issue_comments_281329.json:
```json
{
    "body": "<a id='comment:10'></a>Not a blocker, but this has been on my todo list. I hope to get to this next week.",
    "created_at": "2014-09-10T07:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281329",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Not a blocker, but this has been on my todo list. I hope to get to this next week.



---

archive/issue_comments_281330.json:
```json
{
    "body": "Changing branch from \"u/cnassau/16835\" to \"u/tscrim/16835\"",
    "created_at": "2014-09-14T16:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281330",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/cnassau/16835" to "u/tscrim/16835"



---

archive/issue_comments_281331.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-09-14T16:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281331",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281332.json:
```json
{
    "body": "Changing commit from \"d94b6c13d8c33472e1433415aaf87649f231ec46\" to \"4e52d992d0e4ea3480fb3f538325c8a602c84047\"",
    "created_at": "2014-09-14T16:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281332",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "d94b6c13d8c33472e1433415aaf87649f231ec46" to "4e52d992d0e4ea3480fb3f538325c8a602c84047"



---

archive/issue_comments_281333.json:
```json
{
    "body": "<a id='comment:11'></a>LGTM. Although I've made a few trivial line break changes.\n\nBTW, we all want our bugs (and tickets) addressed/reviewed quickly. As a courtesy, please don't set things to blocker trying to get yours looked at. Instead you can cc me (or other who might be good for reviewing it) and I'll look at it as soon as I can.\n\n---\nNew commits:",
    "created_at": "2014-09-14T16:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281333",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>LGTM. Although I've made a few trivial line break changes.

BTW, we all want our bugs (and tickets) addressed/reviewed quickly. As a courtesy, please don't set things to blocker trying to get yours looked at. Instead you can cc me (or other who might be good for reviewing it) and I'll look at it as soon as I can.

---
New commits:



---

archive/issue_comments_281334.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2014-09-14T16:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281334",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_281335.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks very much for taking the time to review this issue!\n\nReplying to [comment:11 tscrim]:\n> BTW, we all want our bugs (and tickets) addressed/reviewed quickly. As a courtesy, please don't set things to blocker trying to get yours looked at. Instead you can cc me (or other who might be good for reviewing it) and I'll look at it as soon as I can.\n\n\nActually, my intention was not to get it reviewed quickly, just to make sure it gets adressed at all in the next release. \n\n\n> ---\n> New commits:\n> |                                                                                                                                          |                                                                                                         |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|\n> |[da19932](http://git.sagemath.org/sage.git/commit/?id=da19932c0f2847e27b5cb9225d056f7b37251c68)|`Merge branch 'u/cnassau/16835' of trac.sagemath.org:sage into u/tscrim/product_modules_with_basis-16835`|\n> |[4e52d99](http://git.sagemath.org/sage.git/commit/?id=4e52d992d0e4ea3480fb3f538325c8a602c84047)|`Added some line breaks.`|",
    "created_at": "2014-09-14T21:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281335",
    "user": "https://github.com/cnassau"
}
```

<a id='comment:12'></a>Thanks very much for taking the time to review this issue!

Replying to [comment:11 tscrim]:
> BTW, we all want our bugs (and tickets) addressed/reviewed quickly. As a courtesy, please don't set things to blocker trying to get yours looked at. Instead you can cc me (or other who might be good for reviewing it) and I'll look at it as soon as I can.


Actually, my intention was not to get it reviewed quickly, just to make sure it gets adressed at all in the next release. 


> ---
> New commits:
> |                                                                                                                                          |                                                                                                         |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
> |[da19932](http://git.sagemath.org/sage.git/commit/?id=da19932c0f2847e27b5cb9225d056f7b37251c68)|`Merge branch 'u/cnassau/16835' of trac.sagemath.org:sage into u/tscrim/product_modules_with_basis-16835`|
> |[4e52d99](http://git.sagemath.org/sage.git/commit/?id=4e52d992d0e4ea3480fb3f538325c8a602c84047)|`Added some line breaks.`|



---

archive/issue_events_049282.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-16T18:46:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16835#event-49282"
}
```



---

archive/issue_comments_281336.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-09-16T18:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281336",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_281337.json:
```json
{
    "body": "Changing branch from \"u/tscrim/16835\" to \"4e52d992d0e4ea3480fb3f538325c8a602c84047\"",
    "created_at": "2014-09-16T18:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16835",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16835#issuecomment-281337",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/tscrim/16835" to "4e52d992d0e4ea3480fb3f538325c8a602c84047"
