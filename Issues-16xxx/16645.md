# Issue 16645: Upgrade to NTL 6.2.1

archive/issues_016645.json:
```json
{
    "body": "CC:  snark @JohnCremona\n\nKeywords: spkg ntl\n\nChangelog at http://www.shoup.net/ntl/doc/tour-changes.html\nUpstream tarball at:\n* http://www.shoup.net/ntl/ntl-6.2.1.tar.gz\nSage repackaged tarball (see spkg-src) at:\n* http://www.lmona.de/files/sage/ntl-6.2.1.tar.bz2\n\nIssue created by migration from https://trac.sagemath.org/ticket/16882\n\n",
    "closed_at": "2014-11-22T17:18:30Z",
    "created_at": "2014-08-26T14:16:19Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Upgrade to NTL 6.2.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16645",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
CC:  snark @JohnCremona

Keywords: spkg ntl

Changelog at http://www.shoup.net/ntl/doc/tour-changes.html
Upstream tarball at:
* http://www.shoup.net/ntl/ntl-6.2.1.tar.gz
Sage repackaged tarball (see spkg-src) at:
* http://www.lmona.de/files/sage/ntl-6.2.1.tar.bz2

Issue created by migration from https://trac.sagemath.org/ticket/16882





---

archive/issue_comments_219280.json:
```json
{
    "body": "Our patches need to be updated, working on it.",
    "created_at": "2014-08-26T14:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219280",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Our patches need to be updated, working on it.



---

archive/issue_comments_219281.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-26T14:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219282.json:
```json
{
    "body": "Changing keywords from \"\" to \"spkg ntl\".",
    "created_at": "2014-08-26T14:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219282",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "" to "spkg ntl".



---

archive/issue_comments_219283.json:
```json
{
    "body": "At least it builds.\nFull testsuite not run yet (nor strange install like cygwin tested).\n\nIf you wan to try it out, please use SAGE_UPGRADING=yes, as it seems to me the dynamic lib version number got updated once again.\n\n---\nNew commits:",
    "created_at": "2014-08-26T14:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219283",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

At least it builds.
Full testsuite not run yet (nor strange install like cygwin tested).

If you wan to try it out, please use SAGE_UPGRADING=yes, as it seems to me the dynamic lib version number got updated once again.

---
New commits:



---

archive/issue_comments_219284.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-26T14:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219284",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_219285.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-26T14:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219285",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_219286.json:
```json
{
    "body": "It seems FLINT<->NTL interface (shipped by FLINT) is broken.",
    "created_at": "2014-08-26T14:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219286",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

It seems FLINT<->NTL interface (shipped by FLINT) is broken.



---

archive/issue_comments_219287.json:
```json
{
    "body": "Replying to [comment:5 jpflori]:\n> It seems FLINT<->NTL interface (shipped by FLINT) is broken.\n\nHow annoying.  Will you inform flint-devel?",
    "created_at": "2014-08-26T14:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219287",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:5 jpflori]:
> It seems FLINT<->NTL interface (shipped by FLINT) is broken.

How annoying.  Will you inform flint-devel?



---

archive/issue_comments_219288.json:
```json
{
    "body": "I guess it's trivial.\nSome private stuff must have been made public by Victor (or so I hope).\n\nAnd yes I made a minimal report at:\n* https://groups.google.com/forum/#!topic/flint-devel/YEsOO_lnQNs",
    "created_at": "2014-08-26T14:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219288",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I guess it's trivial.
Some private stuff must have been made public by Victor (or so I hope).

And yes I made a minimal report at:
* https://groups.google.com/forum/#!topic/flint-devel/YEsOO_lnQNs



---

archive/issue_comments_219289.json:
```json
{
    "body": "Quite unrelated, but we should update flint anyway, I think we still ship the version with the broken is_prime stuff.",
    "created_at": "2014-08-26T14:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219289",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Quite unrelated, but we should update flint anyway, I think we still ship the version with the broken is_prime stuff.



---

archive/issue_comments_219290.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-26T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219291.json:
```json
{
    "body": "Tentative fix pushed.\n(Nothing really tested yet though.)",
    "created_at": "2014-08-26T15:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219291",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Tentative fix pushed.
(Nothing really tested yet though.)



---

archive/issue_comments_219292.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-26T15:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219292",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219293.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-26T15:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219293",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_219294.json:
```json
{
    "body": "And Singular broke as well...",
    "created_at": "2014-08-26T15:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219294",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And Singular broke as well...



---

archive/issue_comments_219295.json:
```json
{
    "body": "And that might be an NTL issue in fact.",
    "created_at": "2014-08-26T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219295",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And that might be an NTL issue in fact.



---

archive/issue_comments_219296.json:
```json
{
    "body": "Forwarded the problem to Shoup.",
    "created_at": "2014-08-26T15:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219296",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Forwarded the problem to Shoup.



---

archive/issue_comments_219297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-26T16:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219298.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-26T16:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219298",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219299.json:
```json
{
    "body": "Fix from Victor included.",
    "created_at": "2014-08-26T16:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219299",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Fix from Victor included.



---

archive/issue_comments_219300.json:
```json
{
    "body": "(And tested by he and I, and there should be an NTL bugfix release soon.)",
    "created_at": "2014-08-26T16:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219300",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

(And tested by he and I, and there should be an NTL bugfix release soon.)



---

archive/issue_comments_219301.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-26T21:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219301",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_219302.json:
```json
{
    "body": "Victor just released a bugfix release, that leverages the need for the fix I took from his mails.",
    "created_at": "2014-08-26T21:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219302",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Victor just released a bugfix release, that leverages the need for the fix I took from his mails.



---

archive/issue_comments_219303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T08:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219304.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T08:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219305.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-27T09:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219305",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219306.json:
```json
{
    "body": "Does flint still needs to be fixed or did you forget to revert it?",
    "created_at": "2014-08-27T10:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219306",
    "user": "https://github.com/kiwifb"
}
```

Does flint still needs to be fixed or did you forget to revert it?



---

archive/issue_comments_219307.json:
```json
{
    "body": "Nope it still needs to be fixed.",
    "created_at": "2014-08-27T10:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219307",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Nope it still needs to be fixed.



---

archive/issue_comments_219308.json:
```json
{
    "body": "OK I got two questions then:\n* is the fix backward compatible with ntl-6.1/6.0\n* is flint planning a new release to include the fix? In the past Bill has been very fast to include stuff like that in a release.",
    "created_at": "2014-08-27T11:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219308",
    "user": "https://github.com/kiwifb"
}
```

OK I got two questions then:
* is the fix backward compatible with ntl-6.1/6.0
* is flint planning a new release to include the fix? In the past Bill has been very fast to include stuff like that in a release.



---

archive/issue_comments_219309.json:
```json
{
    "body": "Replying to [comment:23 fbissey]:\n> OK I got two questions then:\n> * is the fix backward compatible with ntl-6.1/6.0\n\nNo idea.\n>  * is flint planning a new release to include the fix? In the past Bill has been very fast to include stuff like that in a release.\n \nI guess so.\nI've already posted on flint-devel but Bill did not announce anything.\nAnd I fear hes quite busy right now.",
    "created_at": "2014-08-27T12:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219309",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Replying to [comment:23 fbissey]:
> OK I got two questions then:
> * is the fix backward compatible with ntl-6.1/6.0

No idea.
>  * is flint planning a new release to include the fix? In the past Bill has been very fast to include stuff like that in a release.
 
I guess so.
I've already posted on flint-devel but Bill did not announce anything.
And I fear hes quite busy right now.



---

archive/issue_comments_219310.json:
```json
{
    "body": "Replying to [comment:24 jpflori]:\n> Replying to [comment:23 fbissey]:\n> > OK I got two questions then:\n> > * is the fix backward compatible with ntl-6.1/6.0\n\n> No idea.\n\nIt looks like the answer is yes, which means that flint doesn't have to check the version of ntl which will make the inclusion of a fix in flint so much easier.",
    "created_at": "2014-08-28T01:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219310",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:24 jpflori]:
> Replying to [comment:23 fbissey]:
> > OK I got two questions then:
> > * is the fix backward compatible with ntl-6.1/6.0

> No idea.

It looks like the answer is yes, which means that flint doesn't have to check the version of ntl which will make the inclusion of a fix in flint so much easier.



---

archive/issue_comments_219311.json:
```json
{
    "body": "I will create a pull request for flint (hopefully today) tell me if I am duplicating work that you are ready to push. Once that's done I will test things a bit further but if the patchbot is happy this ticket is done.",
    "created_at": "2014-08-28T20:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219311",
    "user": "https://github.com/kiwifb"
}
```

I will create a pull request for flint (hopefully today) tell me if I am duplicating work that you are ready to push. Once that's done I will test things a bit further but if the patchbot is happy this ticket is done.



---

archive/issue_comments_219312.json:
```json
{
    "body": "Pull request for flint done: https://github.com/wbhart/flint2/pull/95",
    "created_at": "2014-08-28T21:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219312",
    "user": "https://github.com/kiwifb"
}
```

Pull request for flint done: https://github.com/wbhart/flint2/pull/95



---

archive/issue_comments_219313.json:
```json
{
    "body": "Thanks for the pull request.\nI'll be away from the internet for a few days, so i's very welcome.",
    "created_at": "2014-08-28T23:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219313",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Thanks for the pull request.
I'll be away from the internet for a few days, so i's very welcome.



---

archive/issue_comments_219314.json:
```json
{
    "body": "This causes a build error in Singular for me:\n\n```\ng++ -O2 -g  -fPIC -I.. -I/usr/local/src/sage-git/local -pipe -I. -I.. -I/usr/local/src/sage-git/local -I/usr/local/src/sage-git/local/include -I/usr/local/src/sage-git/local/include   -fno-implicit-templates -I.. -I/usr/local/src/sage-git/local -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H \\\n  -o Singular \\\n  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\\\n  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/usr/local/src/sage-git/local/kernel -L../kernel -lkernel -L/usr/local/src/sage-git/local/lib  -L/usr/local/src/sage-git/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -lrt -lnsl -lm  -lnsl  -lomalloc -lpthread  ../kernel/mmalloc.o \n/usr/local/src/sage-git/local/lib/libsingcf.a(cfNewtonPolygon.o): In function `NTL::Vec<NTL::ZZ>::SetLength(long)':\n/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'\n/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'\n/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'\n/usr/local/src/sage-git/local/lib/libsingcf.a(facHensel.o): In function `NTL::Vec<NTL::zz_pEX>::SetLength(long)':\n/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::zz_pEX>::DoSetLength(long)'\n/usr/local/src/sage-git/local/lib/libsingcf.a(facNTLzzpEXGCD.o): In function `NTL::Vec<NTL::zz_pX>::SetLength(long)':\n/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::zz_pX>::DoSetLength(long)'\ncollect2: ld returned 1 exit status\nmake[4]: *** [Singular] Error 1\n```",
    "created_at": "2014-08-30T14:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219314",
    "user": "https://github.com/jdemeyer"
}
```

This causes a build error in Singular for me:

```
g++ -O2 -g  -fPIC -I.. -I/usr/local/src/sage-git/local -pipe -I. -I.. -I/usr/local/src/sage-git/local -I/usr/local/src/sage-git/local/include -I/usr/local/src/sage-git/local/include   -fno-implicit-templates -I.. -I/usr/local/src/sage-git/local -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H \
  -o Singular \
  tesths.cc iparith.o mpsr_Tok.o claptmpl.o\
  grammar.o scanner.o attrib.o blackbox.o eigenval_ip.o extra.o fehelp.o feOpt.o ipassign.o ipconv.o ipid.o iplib.o ipprint.o ipshell.o newstruct.o lists.o sdb.o fglm.o interpolation.o silink.o ssiLink.o s_buff.o subexpr.o janet.o wrapper.o libparse.o sing_win.o gms.o pcv.o maps_ip.o walk.o walk_ip.o cntrlc.o misc_ip.o calcSVD.o pipeLink.o Minor.o MinorProcessor.o MinorInterface.o bigintm.o pyobject_setup.o denom_list.o minpoly.o countedref.o semaphore.o slInit_Dynamic.o -rdynamic -L/usr/local/src/sage-git/local/kernel -L../kernel -lkernel -L/usr/local/src/sage-git/local/lib  -L/usr/local/src/sage-git/local/lib -lflint -lmpfr -lmpir  -ldl -lm -lsingfac -lsingcf -lflint -lmpfr -lntl -lgmp -lreadline -lrt -lnsl -lm  -lnsl  -lomalloc -lpthread  ../kernel/mmalloc.o 
/usr/local/src/sage-git/local/lib/libsingcf.a(cfNewtonPolygon.o): In function `NTL::Vec<NTL::ZZ>::SetLength(long)':
/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'
/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'
/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::ZZ>::DoSetLength(long)'
/usr/local/src/sage-git/local/lib/libsingcf.a(facHensel.o): In function `NTL::Vec<NTL::zz_pEX>::SetLength(long)':
/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::zz_pEX>::DoSetLength(long)'
/usr/local/src/sage-git/local/lib/libsingcf.a(facNTLzzpEXGCD.o): In function `NTL::Vec<NTL::zz_pX>::SetLength(long)':
/usr/local/src/sage-git/local/var/tmp/sage/build/singular-3.1.6.p3/src/latest/factory/../../../../../../../../include/NTL/vector.h:129: undefined reference to `NTL::Vec<NTL::zz_pX>::DoSetLength(long)'
collect2: ld returned 1 exit status
make[4]: *** [Singular] Error 1
```



---

archive/issue_comments_219315.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-30T14:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219315",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_219316.json:
```json
{
    "body": "Wasn't that the issue fixed between 6.2.0 and 6.2.1?",
    "created_at": "2014-09-26T08:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219316",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Wasn't that the issue fixed between 6.2.0 and 6.2.1?



---

archive/issue_comments_219317.json:
```json
{
    "body": "Replying to [comment:30 jpflori]:\n> Wasn't that the issue fixed between 6.2.0 and 6.2.1?\n\nYou would be the only one to know, you never posted your singular problem with 6.2.0.",
    "created_at": "2014-09-26T09:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219317",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:30 jpflori]:
> Wasn't that the issue fixed between 6.2.0 and 6.2.1?

You would be the only one to know, you never posted your singular problem with 6.2.0.



---

archive/issue_comments_219318.json:
```json
{
    "body": "Euh, yes indeed.\nThis looks different as my problem was with template instantiation.\nHere there is an undefined reference.\nWhat tricked me earlier is that the problematic function is the same.\n\nFor the record, here is my report to Victor Shoup:\nI've been playing for a few moments with NTL 6.2.0 and it looks really nice.\nNonetheless I don't seem able to build singular 3-6-0 on top of it.\n\nIndeed g++ spits:\n\n```\n../../../../../../../../include/NTL/vector.h:427:4: error: no matching\nfunction for call to 'NTL::Vec<NTL::Pair<NTL::GF2X, long int>\n>::Init(long int&, const NTL::Pair<NTL::GF2X, long int>&, const\nNTL::Pair<NTL::GF2X, long int>&)'\n../../../../../../../../include/NTL/vector.h:427:4: note: candidates are:\n../../../../../../../../include/NTL/vector.h:379:6: note: void\nNTL::Vec<T>::Init(long int) [with T = NTL::Pair<NTL::GF2X, long int>]\n../../../../../../../../include/NTL/vector.h:379:6: note:   candidate\nexpects 1 argument, 3 provided\n../../../../../../../../include/NTL/vector.h:389:6: note: void\nNTL::Vec<T>::Init(long int, const T*) [with T = NTL::Pair<NTL::GF2X,\nlong int>]\n../../../../../../../../include/NTL/vector.h:389:6: note:   candidate\nexpects 2 arguments, 3 provided\n../../../../../../../../include/NTL/vector.h:400:6: note: void\nNTL::Vec<T>::Init(long int, const T&) [with T = NTL::Pair<NTL::GF2X,\nlong int>]\n../../../../../../../../include/NTL/vector.h:400:6: note:   candidate\nexpects 2 arguments, 3 provided\n```\n\nAnd looking at the new vector.h from NTL, on line 427, there is indeed\na call to:\nInit(n, a, *src);\nwithin the DoSetLength definition.\n\nAnd no corresponding function in vector.h (whereas there are indeed\nthree definitions for Init with different signatures.)\n\nAm I missing something here?\n\nBest regards,",
    "created_at": "2014-09-26T09:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219318",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Euh, yes indeed.
This looks different as my problem was with template instantiation.
Here there is an undefined reference.
What tricked me earlier is that the problematic function is the same.

For the record, here is my report to Victor Shoup:
I've been playing for a few moments with NTL 6.2.0 and it looks really nice.
Nonetheless I don't seem able to build singular 3-6-0 on top of it.

Indeed g++ spits:

```
../../../../../../../../include/NTL/vector.h:427:4: error: no matching
function for call to 'NTL::Vec<NTL::Pair<NTL::GF2X, long int>
>::Init(long int&, const NTL::Pair<NTL::GF2X, long int>&, const
NTL::Pair<NTL::GF2X, long int>&)'
../../../../../../../../include/NTL/vector.h:427:4: note: candidates are:
../../../../../../../../include/NTL/vector.h:379:6: note: void
NTL::Vec<T>::Init(long int) [with T = NTL::Pair<NTL::GF2X, long int>]
../../../../../../../../include/NTL/vector.h:379:6: note:   candidate
expects 1 argument, 3 provided
../../../../../../../../include/NTL/vector.h:389:6: note: void
NTL::Vec<T>::Init(long int, const T*) [with T = NTL::Pair<NTL::GF2X,
long int>]
../../../../../../../../include/NTL/vector.h:389:6: note:   candidate
expects 2 arguments, 3 provided
../../../../../../../../include/NTL/vector.h:400:6: note: void
NTL::Vec<T>::Init(long int, const T&) [with T = NTL::Pair<NTL::GF2X,
long int>]
../../../../../../../../include/NTL/vector.h:400:6: note:   candidate
expects 2 arguments, 3 provided
```

And looking at the new vector.h from NTL, on line 427, there is indeed
a call to:
Init(n, a, *src);
within the DoSetLength definition.

And no corresponding function in vector.h (whereas there are indeed
three definitions for Init with different signatures.)

Am I missing something here?

Best regards,



---

archive/issue_comments_219319.json:
```json
{
    "body": "Not sure you are missing something. C++ always look like spaghetti to me (in a different way from classic FORTRAN - FORTRAN was abstract spaghetti, C++ is litteral as far as I am concerned). I could be that \"DoSetLength\" is actually defined in another header and it is not properly included before vector.h or in vector.h itself.",
    "created_at": "2014-10-03T00:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219319",
    "user": "https://github.com/kiwifb"
}
```

Not sure you are missing something. C++ always look like spaghetti to me (in a different way from classic FORTRAN - FORTRAN was abstract spaghetti, C++ is litteral as far as I am concerned). I could be that "DoSetLength" is actually defined in another header and it is not properly included before vector.h or in vector.h itself.



---

archive/issue_comments_219320.json:
```json
{
    "body": "Well a local build here shows\n\n```\nobjdump -T -C /scratch/portage/dev-libs/ntl-6.2.1/image/usr/lib64/libntl.so.5.0.0 | grep DoSetLength\n00000000000b8c26  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)\n00000000000973fc g    DF .text  00000000000001b9  Base        NTL::WordVector::DoSetLength(long)\n000000000005aac6  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)\n00000000001015c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)\n00000000000b7af2  w   DF .text  000000000000005a  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)\n00000000000eb136  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)\n000000000009d610  w   DF .text  0000000000000038  Base        NTL::Vec<char>::DoSetLength(long)\n0000000000070aae  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)\n000000000013246a  w   DF .text  0000000000000089  Base        NTL::Vec<NTL::ZZVec>::DoSetLength(long)\n00000000000845ca  w   DF .text  0000000000000080  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)\n00000000000b8c98  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)\n0000000000090854  w   DF .text  0000000000000083  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)\n0000000000122424  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)\n000000000004495e  w   DF .text  0000000000000038  Base        NTL::Vec<unsigned long>::DoSetLength(long)\n0000000000052128  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)\n00000000000c78f0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)\n0000000000101988  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)\n0000000000045350  w   DF .text  0000000000000038  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)\n000000000007534e  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)\n00000000000b8a4c  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)\n000000000007bb40  w   DF .text  0000000000000038  Base        NTL::Vec<double>::DoSetLength(long)\n000000000010814c  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)\n000000000007b72a  w   DF .text  0000000000000082  Base        NTL::Vec<NTL::RR>::DoSetLength(long)\n00000000000b886c  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)\n0000000000101e08  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)\n0000000000051b32  w   DF .text  000000000000005a  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)\n00000000000cdda6  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)\n00000000000447be  w   DF .text  0000000000000038  Base        NTL::Vec<long>::DoSetLength(long)\n000000000006e66a  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)\n00000000000753c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)\n00000000000b7ff6  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)\n00000000000c7470  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)\n0000000000127b74  w   DF .text  0000000000000089  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)\n```\nJeroen's failure was on three symbols:\n\n```\nNTL::Vec<NTL::ZZ>::DoSetLength(long)\nNTL::Vec<NTL::zz_pEX>::DoSetLength(long)\nNTL::Vec<NTL::zz_pX>::DoSetLength(long)\n```\nAnd they are all present. So two possibilities I see:\n* Jeroen's build of ntl was incomplete\n* there is an ordering problem in the singular's linking\n\nJeroen can easily check the first one. The second would involve a little bit more experimentation and cut and paste.\n\nI will try to reproduce this locally.",
    "created_at": "2014-10-03T01:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219320",
    "user": "https://github.com/kiwifb"
}
```

Well a local build here shows

```
objdump -T -C /scratch/portage/dev-libs/ntl-6.2.1/image/usr/lib64/libntl.so.5.0.0 | grep DoSetLength
00000000000b8c26  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)
00000000000973fc g    DF .text  00000000000001b9  Base        NTL::WordVector::DoSetLength(long)
000000000005aac6  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)
00000000001015c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)
00000000000b7af2  w   DF .text  000000000000005a  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)
00000000000eb136  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)
000000000009d610  w   DF .text  0000000000000038  Base        NTL::Vec<char>::DoSetLength(long)
0000000000070aae  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)
000000000013246a  w   DF .text  0000000000000089  Base        NTL::Vec<NTL::ZZVec>::DoSetLength(long)
00000000000845ca  w   DF .text  0000000000000080  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)
00000000000b8c98  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)
0000000000090854  w   DF .text  0000000000000083  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)
0000000000122424  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)
000000000004495e  w   DF .text  0000000000000038  Base        NTL::Vec<unsigned long>::DoSetLength(long)
0000000000052128  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)
00000000000c78f0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)
0000000000101988  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)
0000000000045350  w   DF .text  0000000000000038  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)
000000000007534e  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)
00000000000b8a4c  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)
000000000007bb40  w   DF .text  0000000000000038  Base        NTL::Vec<double>::DoSetLength(long)
000000000010814c  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)
000000000007b72a  w   DF .text  0000000000000082  Base        NTL::Vec<NTL::RR>::DoSetLength(long)
00000000000b886c  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)
0000000000101e08  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
0000000000051b32  w   DF .text  000000000000005a  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)
00000000000cdda6  w   DF .text  0000000000000077  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)
00000000000447be  w   DF .text  0000000000000038  Base        NTL::Vec<long>::DoSetLength(long)
000000000006e66a  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)
00000000000753c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)
00000000000b7ff6  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)
00000000000c7470  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)
0000000000127b74  w   DF .text  0000000000000089  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)
```
Jeroen's failure was on three symbols:

```
NTL::Vec<NTL::ZZ>::DoSetLength(long)
NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
NTL::Vec<NTL::zz_pX>::DoSetLength(long)
```
And they are all present. So two possibilities I see:
* Jeroen's build of ntl was incomplete
* there is an ordering problem in the singular's linking

Jeroen can easily check the first one. The second would involve a little bit more experimentation and cut and paste.

I will try to reproduce this locally.



---

archive/issue_comments_219321.json:
```json
{
    "body": "```\n/usr/local/src/sage-git/local/lib/libsingcf.a(cfNewtonPolygon.o): In function \n`NTL::Vec<NTL::ZZ>::SetLength(long)':\n```\nWe have interference from a previously installed singular. It gets the wrong libsingcf.a. Obvious once you look at it closely.",
    "created_at": "2014-10-03T01:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219321",
    "user": "https://github.com/kiwifb"
}
```

```
/usr/local/src/sage-git/local/lib/libsingcf.a(cfNewtonPolygon.o): In function 
`NTL::Vec<NTL::ZZ>::SetLength(long)':
```
We have interference from a previously installed singular. It gets the wrong libsingcf.a. Obvious once you look at it closely.



---

archive/issue_comments_219322.json:
```json
{
    "body": "After examination of what I am doing in sage-on-gentoo is there a need in sage for libsingcf.a and the other static archives installed? Is Macauley2 using them?",
    "created_at": "2014-10-03T01:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219322",
    "user": "https://github.com/kiwifb"
}
```

After examination of what I am doing in sage-on-gentoo is there a need in sage for libsingcf.a and the other static archives installed? Is Macauley2 using them?



---

archive/issue_comments_219323.json:
```json
{
    "body": "Replying to [comment:36 fbissey]:\n> After examination of what I am doing in sage-on-gentoo is there a need in sage for libsingcf.a and the other static archives installed? Is Macauley2 using them?\n\n\nSkip that. I forgot that singular install directly under SAGE_LOCAL while compiling. That and the fact the symbol are referenced in the library. Going back to testing.",
    "created_at": "2014-10-03T01:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219323",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:36 fbissey]:
> After examination of what I am doing in sage-on-gentoo is there a need in sage for libsingcf.a and the other static archives installed? Is Macauley2 using them?


Skip that. I forgot that singular install directly under SAGE_LOCAL while compiling. That and the fact the symbol are referenced in the library. Going back to testing.



---

archive/issue_comments_219324.json:
```json
{
    "body": "Couldn't reproduce it so far.",
    "created_at": "2014-10-03T02:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219324",
    "user": "https://github.com/kiwifb"
}
```

Couldn't reproduce it so far.



---

archive/issue_comments_219325.json:
```json
{
    "body": "I would also say this comes from an old NTL install, but only Jeroen can confirm...",
    "created_at": "2014-10-08T05:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219325",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I would also say this comes from an old NTL install, but only Jeroen can confirm...



---

archive/issue_comments_219326.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2014-10-08T05:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219326",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_219327.json:
```json
{
    "body": "Replying to [comment:39 jpflori]:\n> I would also say this comes from an old NTL install, but only Jeroen can confirm...\n\n\nNice theory but I just checked and these symbols are also in ntl 6.1.0. Unless of course it comes from a much older ntl (I could look into that if needed). So there is probably something more subtle at play. I would very much like Jeroen to check the symbols are in libntl and if they are we should look carefully at the full log from the singular build.",
    "created_at": "2014-10-08T07:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219327",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:39 jpflori]:
> I would also say this comes from an old NTL install, but only Jeroen can confirm...


Nice theory but I just checked and these symbols are also in ntl 6.1.0. Unless of course it comes from a much older ntl (I could look into that if needed). So there is probably something more subtle at play. I would very much like Jeroen to check the symbols are in libntl and if they are we should look carefully at the full log from the singular build.



---

archive/issue_comments_219328.json:
```json
{
    "body": "OK, I'm trying the build again...",
    "created_at": "2014-10-08T08:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219328",
    "user": "https://github.com/jdemeyer"
}
```

OK, I'm trying the build again...



---

archive/issue_comments_219329.json:
```json
{
    "body": "Replying to [comment:41 fbissey]:\n> Replying to [comment:39 jpflori]:\n> > I would also say this comes from an old NTL install, but only Jeroen can confirm...\n\n> \n> Nice theory but I just checked and these symbols are also in ntl 6.1.0. Unless of course it comes from a much older ntl (I could look into that if needed). So there is probably something more subtle at play. I would very much like Jeroen to check the symbols are in libntl and if they are we should look carefully at the full log from the singular build.\n\nYeah, but this part of the templating stuff changed between 6.1.0 and 6.2.0, so it might also be the case that Jeroen built on top of the 6.2.0 version with broken lazy templates initialization...",
    "created_at": "2014-10-08T08:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219329",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Replying to [comment:41 fbissey]:
> Replying to [comment:39 jpflori]:
> > I would also say this comes from an old NTL install, but only Jeroen can confirm...

> 
> Nice theory but I just checked and these symbols are also in ntl 6.1.0. Unless of course it comes from a much older ntl (I could look into that if needed). So there is probably something more subtle at play. I would very much like Jeroen to check the symbols are in libntl and if they are we should look carefully at the full log from the singular build.

Yeah, but this part of the templating stuff changed between 6.1.0 and 6.2.0, so it might also be the case that Jeroen built on top of the 6.2.0 version with broken lazy templates initialization...



---

archive/issue_comments_219330.json:
```json
{
    "body": "I rebuilt and it failed again. The output of the analogous `objdump` command is:\n\n```\n(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength\n00000000000a4d30 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)\n```\n\nFYI:\n\n```\n(sage-sh)$ find local -name libntl* |xargs ls -l\n-rw-r--r-- 1 jdemeyer jdemeyer 37380910 Oct  8 10:41 local/lib/libntl.a\n-rw-r--r-- 1 jdemeyer jdemeyer     1058 Oct  8 10:41 local/lib/libntl.la\nlrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so -> libntl.so.5.0.0\nlrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so.5 -> libntl.so.5.0.0\n-rwxr-xr-x 1 jdemeyer jdemeyer 14786659 Oct  8 10:41 local/lib/libntl.so.5.0.0\n```",
    "created_at": "2014-10-08T09:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219330",
    "user": "https://github.com/jdemeyer"
}
```

I rebuilt and it failed again. The output of the analogous `objdump` command is:

```
(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength
00000000000a4d30 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)
```

FYI:

```
(sage-sh)$ find local -name libntl* |xargs ls -l
-rw-r--r-- 1 jdemeyer jdemeyer 37380910 Oct  8 10:41 local/lib/libntl.a
-rw-r--r-- 1 jdemeyer jdemeyer     1058 Oct  8 10:41 local/lib/libntl.la
lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so -> libntl.so.5.0.0
lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so.5 -> libntl.so.5.0.0
-rwxr-xr-x 1 jdemeyer jdemeyer 14786659 Oct  8 10:41 local/lib/libntl.so.5.0.0
```



---

archive/issue_comments_219331.json:
```json
{
    "body": "Also FYI:\n\n```\n(sage-sh)$ uname -a\nLinux tamiyo 3.7.10-gentoo #4 SMP PREEMPT Thu Oct 31 21:23:56 CET 2013 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux\n```\n\n```\n(sage-sh)$ g++ --version\ng++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4\nCopyright (C) 2011 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n\n```\n(sage-sh)$ ld --version\nGNU ld (GNU Binutils) 2.22\nCopyright 2011 Free Software Foundation, Inc.\nThis program is free software; you may redistribute it under the terms of\nthe GNU General Public License version 3 or (at your option) a later version.\nThis program has absolutely no warranty.\n```",
    "created_at": "2014-10-08T09:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219331",
    "user": "https://github.com/jdemeyer"
}
```

Also FYI:

```
(sage-sh)$ uname -a
Linux tamiyo 3.7.10-gentoo #4 SMP PREEMPT Thu Oct 31 21:23:56 CET 2013 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux
```

```
(sage-sh)$ g++ --version
g++ (Gentoo 4.6.4 p1.2, pie-0.5.2) 4.6.4
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```

```
(sage-sh)$ ld --version
GNU ld (GNU Binutils) 2.22
Copyright 2011 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License version 3 or (at your option) a later version.
This program has absolutely no warranty.
```



---

archive/issue_comments_219332.json:
```json
{
    "body": "Full log of NTL build",
    "created_at": "2014-10-08T09:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219332",
    "user": "https://github.com/jdemeyer"
}
```

Full log of NTL build



---

archive/issue_comments_219333.json:
```json
{
    "body": "Attachment [singular-3.1.6.p3.log](tarball://root/attachments/some-uuid/ticket16882/singular-3.1.6.p3.log) by @jdemeyer created at 2014-10-08 09:12:48\n\nFull log of failed Singular build",
    "created_at": "2014-10-08T09:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219333",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [singular-3.1.6.p3.log](tarball://root/attachments/some-uuid/ticket16882/singular-3.1.6.p3.log) by @jdemeyer created at 2014-10-08 09:12:48

Full log of failed Singular build



---

archive/issue_comments_219334.json:
```json
{
    "body": "Replying to [comment:44 jdemeyer]:\n> I rebuilt and it failed again. The output of the analogous `objdump` command is:\n> \n> ```\n> (sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength\n> 00000000000a4d30 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)\n> ```\n> \n> FYI:\n> \n> ```\n> (sage-sh)$ find local -name libntl* |xargs ls -l\n> -rw-r--r-- 1 jdemeyer jdemeyer 37380910 Oct  8 10:41 local/lib/libntl.a\n> -rw-r--r-- 1 jdemeyer jdemeyer     1058 Oct  8 10:41 local/lib/libntl.la\n> lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so -> libntl.so.5.0.0\n> lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so.5 -> libntl.so.5.0.0\n> -rwxr-xr-x 1 jdemeyer jdemeyer 14786659 Oct  8 10:41 local/lib/libntl.so.5.0.0\n> ```\n\n\nOK so it looks like libntl is not built properly, although I have no idea where there is room for variation. At this stage I think we need the build log for ntl.",
    "created_at": "2014-10-08T09:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219334",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:44 jdemeyer]:
> I rebuilt and it failed again. The output of the analogous `objdump` command is:
> 
> ```
> (sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength
> 00000000000a4d30 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)
> ```
> 
> FYI:
> 
> ```
> (sage-sh)$ find local -name libntl* |xargs ls -l
> -rw-r--r-- 1 jdemeyer jdemeyer 37380910 Oct  8 10:41 local/lib/libntl.a
> -rw-r--r-- 1 jdemeyer jdemeyer     1058 Oct  8 10:41 local/lib/libntl.la
> lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so -> libntl.so.5.0.0
> lrwxrwxrwx 1 jdemeyer jdemeyer       15 Oct  8 10:41 local/lib/libntl.so.5 -> libntl.so.5.0.0
> -rwxr-xr-x 1 jdemeyer jdemeyer 14786659 Oct  8 10:41 local/lib/libntl.so.5.0.0
> ```


OK so it looks like libntl is not built properly, although I have no idea where there is room for variation. At this stage I think we need the build log for ntl.



---

archive/issue_comments_219335.json:
```json
{
    "body": "Replying to [comment:46 fbissey]:\n> At this stage I think we need the build log for ntl.\n\nIt's attached on this ticket.",
    "created_at": "2014-10-08T09:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219335",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:46 fbissey]:
> At this stage I think we need the build log for ntl.

It's attached on this ticket.



---

archive/issue_comments_219336.json:
```json
{
    "body": "By the look of it you posted the logs a few seconds before me. Just as an aside I just noticed that libntl.so is currently linked with gcc rather than g++. Not fatal but it leaves a lot of libstdc++ symbols undefined. I'll see if I can come up with something for that tomorrow.",
    "created_at": "2014-10-08T09:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219336",
    "user": "https://github.com/kiwifb"
}
```

By the look of it you posted the logs a few seconds before me. Just as an aside I just noticed that libntl.so is currently linked with gcc rather than g++. Not fatal but it leaves a lot of libstdc++ symbols undefined. I'll see if I can come up with something for that tomorrow.



---

archive/issue_comments_219337.json:
```json
{
    "body": "With NTL-6.1.0, I get\n\n```\n(sage-sh)$ objdump -T -C local/lib/libntl.so.3.0.0 | grep DoSetLength\n00000000000d3f60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ_p> >::DoSetLength(long)\n00000000000c2e80  w   DF .text  00000000000001f3  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)\n00000000000d3780  w   DF .text  0000000000000243  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)                                                                   \n00000000000772b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)                                                           \n000000000005fcf0  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)                                                                 \n00000000000738e0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)                                                                      \n00000000000c3180  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)\n0000000000073b00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)\n00000000000fae10  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::ZZVec>::DoSetLength(long)\n0000000000047820  w   DF .text  00000000000001d3  Base        NTL::Vec<double>::DoSetLength(long)\n0000000000075fe0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)\n0000000000113a60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::zz_p> >::DoSetLength(long)\n0000000000154ba0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::zz_pE> >::DoSetLength(long)\n00000000000c2c60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)\n0000000000047460  w   DF .text  00000000000001d3  Base        NTL::Vec<unsigned long>::DoSetLength(long)\n00000000000c37b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)\n0000000000047640  w   DF .text  00000000000001d3  Base        NTL::Vec<NTL::FFTPrimeInfo*>::DoSetLength(long)\n0000000000047c20  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<unsigned long> >::DoSetLength(long)\n000000000011a1c0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)\n000000000009e460 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)\n000000000005f8e0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)\n0000000000081680  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::RR>::DoSetLength(long)\n0000000000047a00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)\n000000000013d110  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::GF2E> >::DoSetLength(long)\n00000000000faa00  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)\n0000000000055fb0  w   DF .text  00000000000001f3  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)\n00000000000566b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)\n0000000000113840  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)\n00000000000c33a0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)\n00000000000965c0  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)\n0000000000113280  w   DF .text  0000000000000243  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)\n0000000000048100  w   DF .text  00000000000001dc  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)\n000000000014d500  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ_pE> >::DoSetLength(long)\n00000000000da930  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)\n00000000000568d0  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::Vec<NTL::GF2> >::DoSetLength(long)\n0000000000047280  w   DF .text  00000000000001d3  Base        NTL::Vec<long>::DoSetLength(long)\n000000000008a4f0  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)\n00000000000c3eb0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)\n00000000000818d0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::RR> >::DoSetLength(long)\n00000000000c3a00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)\n00000000000d3d40  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)\n```",
    "created_at": "2014-10-08T09:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219337",
    "user": "https://github.com/jdemeyer"
}
```

With NTL-6.1.0, I get

```
(sage-sh)$ objdump -T -C local/lib/libntl.so.3.0.0 | grep DoSetLength
00000000000d3f60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ_p> >::DoSetLength(long)
00000000000c2e80  w   DF .text  00000000000001f3  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)
00000000000d3780  w   DF .text  0000000000000243  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)                                                                   
00000000000772b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)                                                           
000000000005fcf0  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)                                                                 
00000000000738e0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)                                                                      
00000000000c3180  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)
0000000000073b00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)
00000000000fae10  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::ZZVec>::DoSetLength(long)
0000000000047820  w   DF .text  00000000000001d3  Base        NTL::Vec<double>::DoSetLength(long)
0000000000075fe0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)
0000000000113a60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::zz_p> >::DoSetLength(long)
0000000000154ba0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::zz_pE> >::DoSetLength(long)
00000000000c2c60  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)
0000000000047460  w   DF .text  00000000000001d3  Base        NTL::Vec<unsigned long>::DoSetLength(long)
00000000000c37b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)
0000000000047640  w   DF .text  00000000000001d3  Base        NTL::Vec<NTL::FFTPrimeInfo*>::DoSetLength(long)
0000000000047c20  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<unsigned long> >::DoSetLength(long)
000000000011a1c0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)
000000000009e460 g    DF .text  00000000000001e9  Base        NTL::WordVector::DoSetLength(long)
000000000005f8e0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)
0000000000081680  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::RR>::DoSetLength(long)
0000000000047a00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)
000000000013d110  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::GF2E> >::DoSetLength(long)
00000000000faa00  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)
0000000000055fb0  w   DF .text  00000000000001f3  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)
00000000000566b0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)
0000000000113840  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
00000000000c33a0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)
00000000000965c0  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)
0000000000113280  w   DF .text  0000000000000243  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)
0000000000048100  w   DF .text  00000000000001dc  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)
000000000014d500  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::ZZ_pE> >::DoSetLength(long)
00000000000da930  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)
00000000000568d0  w   DF .text  0000000000000247  Base        NTL::Vec<NTL::Vec<NTL::GF2> >::DoSetLength(long)
0000000000047280  w   DF .text  00000000000001d3  Base        NTL::Vec<long>::DoSetLength(long)
000000000008a4f0  w   DF .text  0000000000000214  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)
00000000000c3eb0  w   DF .text  0000000000000224  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)
00000000000818d0  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::Vec<NTL::RR> >::DoSetLength(long)
00000000000c3a00  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)
00000000000d3d40  w   DF .text  000000000000021b  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)
```



---

archive/issue_comments_219338.json:
```json
{
    "body": "`@`fbissey and `@`jpflori: does this ticket actually work for the both of you? If so, I'm surprised that it doesn't work for me...",
    "created_at": "2014-10-08T09:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219338",
    "user": "https://github.com/jdemeyer"
}
```

`@`fbissey and `@`jpflori: does this ticket actually work for the both of you? If so, I'm surprised that it doesn't work for me...



---

archive/issue_comments_219339.json:
```json
{
    "body": "Something else: patches should apply without fuzz:\n\n```\nApplying patches to NTL.\npatching file src/tools.c\nHunk #1 succeeded at 18 with fuzz 1.\npatching file include/NTL/tools.h\nHunk #2 succeeded at 311 (offset 58 lines).\npatching file src/DoConfig\npatching file src/mfile\npatching file src/mfile\nHunk #1 succeeded at 325 (offset -6 lines).\nHunk #2 succeeded at 338 (offset -6 lines).\nHunk #3 succeeded at 358 (offset -9 lines).\nHunk #4 succeeded at 397 (offset -9 lines).\npatching file src/WizardAux\nHunk #3 succeeded at 254 (offset 40 lines).\npatching file include/NTL/new.h\n```",
    "created_at": "2014-10-08T09:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219339",
    "user": "https://github.com/jdemeyer"
}
```

Something else: patches should apply without fuzz:

```
Applying patches to NTL.
patching file src/tools.c
Hunk #1 succeeded at 18 with fuzz 1.
patching file include/NTL/tools.h
Hunk #2 succeeded at 311 (offset 58 lines).
patching file src/DoConfig
patching file src/mfile
patching file src/mfile
Hunk #1 succeeded at 325 (offset -6 lines).
Hunk #2 succeeded at 338 (offset -6 lines).
Hunk #3 succeeded at 358 (offset -9 lines).
Hunk #4 succeeded at 397 (offset -9 lines).
patching file src/WizardAux
Hunk #3 succeeded at 254 (offset 40 lines).
patching file include/NTL/new.h
```



---

archive/issue_comments_219340.json:
```json
{
    "body": "With `g++-4.8.3`, things change:\n\n```\n(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength\n00000000000c6290  w   DF .text  0000000000000064  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)\n00000000000d82b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)\n000000000007b780  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)\n0000000000144980  w   DF .text  0000000000000080  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)\n000000000007b710  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)\n00000000000c7760  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)\n0000000000074050  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)\n0000000000082a90  w   DF .text  0000000000000036  Base        NTL::Vec<double>::DoSetLength(long)\n00000000001199d0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)\n00000000000c7840  w   DF .text  0000000000000036  Base        NTL::Vec<unsigned long>::DoSetLength(long)\n00000000000c7540  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)\n00000000000a0670 g    DF .text  0000000000000200  Base        NTL::WordVector::DoSetLength(long)\n00000000000825d0  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::RR>::DoSetLength(long)\n00000000000c77d0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)\n0000000000056770  w   DF .text  0000000000000064  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)\n0000000000056ea0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)\n000000000011a400  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)\n0000000000119f10  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)\n00000000000a75c0  w   DF .text  0000000000000036  Base        NTL::Vec<char>::DoSetLength(long)\n000000000007b7f0  w   DF .text  0000000000000036  Base        NTL::Vec<long>::DoSetLength(long)\n000000000008bdd0  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)\n00000000000c6a20  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)\n00000000000d87a0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)\n```",
    "created_at": "2014-10-08T10:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219340",
    "user": "https://github.com/jdemeyer"
}
```

With `g++-4.8.3`, things change:

```
(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength
00000000000c6290  w   DF .text  0000000000000064  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)
00000000000d82b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)
000000000007b780  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)
0000000000144980  w   DF .text  0000000000000080  Base        NTL::Vec<NTL::GF2XVec>::DoSetLength(long)
000000000007b710  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)
00000000000c7760  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)
0000000000074050  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2X>::DoSetLength(long)
0000000000082a90  w   DF .text  0000000000000036  Base        NTL::Vec<double>::DoSetLength(long)
00000000001199d0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)
00000000000c7840  w   DF .text  0000000000000036  Base        NTL::Vec<unsigned long>::DoSetLength(long)
00000000000c7540  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)
00000000000a0670 g    DF .text  0000000000000200  Base        NTL::WordVector::DoSetLength(long)
00000000000825d0  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::RR>::DoSetLength(long)
00000000000c77d0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<long> >::DoSetLength(long)
0000000000056770  w   DF .text  0000000000000064  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)
0000000000056ea0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)
000000000011a400  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
0000000000119f10  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)
00000000000a75c0  w   DF .text  0000000000000036  Base        NTL::Vec<char>::DoSetLength(long)
000000000007b7f0  w   DF .text  0000000000000036  Base        NTL::Vec<long>::DoSetLength(long)
000000000008bdd0  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::quad_float>::DoSetLength(long)
00000000000c6a20  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)
00000000000d87a0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)
```



---

archive/issue_comments_219341.json:
```json
{
    "body": "OK, now that's weird, and yes it works for me and I re-built singular and flint after ntl. Haven't done sage however.",
    "created_at": "2014-10-08T10:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219341",
    "user": "https://github.com/kiwifb"
}
```

OK, now that's weird, and yes it works for me and I re-built singular and flint after ntl. Haven't done sage however.



---

archive/issue_comments_219342.json:
```json
{
    "body": "Yup, I've been using it on different systems (one redhat ppc64 and a ubuntu x86_64) for a while now...\nIn fact the release of 6.2.1 over 6.2.0 was made because I tried to use 6.2.0 and it failed and I contacted Shoup who was very reactive...",
    "created_at": "2014-10-08T10:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219342",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Yup, I've been using it on different systems (one redhat ppc64 and a ubuntu x86_64) for a while now...
In fact the release of 6.2.1 over 6.2.0 was made because I tried to use 6.2.0 and it failed and I contacted Shoup who was very reactive...



---

archive/issue_comments_219343.json:
```json
{
    "body": "With `g++-4.7.3` from Sage:\n\n```\n(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength\n00000000000c6ea0  w   DF .text  0000000000000074  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)\n00000000000d95b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)\n00000000000c82b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)\n000000000007e150  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)\n0000000000101a20  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)\n00000000000852c0  w   DF .text  0000000000000046  Base        NTL::Vec<double>::DoSetLength(long)\n0000000000079090  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)\n000000000011afa0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)\n0000000000049c40  w   DF .text  0000000000000046  Base        NTL::Vec<unsigned long>::DoSetLength(long)\n000000000013f470  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)\n0000000000122370  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)\n00000000000a1f40 g    DF .text  0000000000000208  Base        NTL::WordVector::DoSetLength(long)\n00000000000627b0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)\n0000000000084e30  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::RR>::DoSetLength(long)\n0000000000058b70  w   DF .text  0000000000000074  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)\n00000000001019a0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)\n0000000000062830  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)\n00000000001223f0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)\n00000000000c80b0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)\n000000000009a180  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)\n000000000011b3b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)\n000000000004a6e0  w   DF .text  0000000000000046  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)\n00000000000a9060  w   DF .text  0000000000000046  Base        NTL::Vec<char>::DoSetLength(long)\n00000000000e06c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)\n0000000000049a70  w   DF .text  0000000000000046  Base        NTL::Vec<long>::DoSetLength(long)\n000000000013f3f0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)\n00000000000c7730  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)\n00000000000e0740  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)\n```",
    "created_at": "2014-10-08T11:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219343",
    "user": "https://github.com/jdemeyer"
}
```

With `g++-4.7.3` from Sage:

```
(sage-sh)$ objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength
00000000000c6ea0  w   DF .text  0000000000000074  Base        NTL::Vec<NTL::ZZ_p>::DoSetLength(long)
00000000000d95b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pE>::DoSetLength(long)
00000000000c82b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::Vec<NTL::ZZ> >::DoSetLength(long)
000000000007e150  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ>::DoSetLength(long)
0000000000101a20  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pX>::DoSetLength(long)
00000000000852c0  w   DF .text  0000000000000046  Base        NTL::Vec<double>::DoSetLength(long)
0000000000079090  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::GF2X, long> >::DoSetLength(long)
000000000011afa0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_p>::DoSetLength(long)
0000000000049c40  w   DF .text  0000000000000046  Base        NTL::Vec<unsigned long>::DoSetLength(long)
000000000013f470  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pX>::DoSetLength(long)
0000000000122370  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::zz_pEX, long> >::DoSetLength(long)
00000000000a1f40 g    DF .text  0000000000000208  Base        NTL::WordVector::DoSetLength(long)
00000000000627b0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::GF2EX, long> >::DoSetLength(long)
0000000000084e30  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::RR>::DoSetLength(long)
0000000000058b70  w   DF .text  0000000000000074  Base        NTL::Vec<NTL::GF2E>::DoSetLength(long)
00000000001019a0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pX, long> >::DoSetLength(long)
0000000000062830  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::GF2EX>::DoSetLength(long)
00000000001223f0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
00000000000c80b0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZX, long> >::DoSetLength(long)
000000000009a180  w   DF .text  0000000000000078  Base        NTL::Vec<NTL::xdouble>::DoSetLength(long)
000000000011b3b0  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::zz_pE>::DoSetLength(long)
000000000004a6e0  w   DF .text  0000000000000046  Base        NTL::Vec<NTL::IntFactor>::DoSetLength(long)
00000000000a9060  w   DF .text  0000000000000046  Base        NTL::Vec<char>::DoSetLength(long)
00000000000e06c0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::ZZ_pEX, long> >::DoSetLength(long)
0000000000049a70  w   DF .text  0000000000000046  Base        NTL::Vec<long>::DoSetLength(long)
000000000013f3f0  w   DF .text  0000000000000071  Base        NTL::Vec<NTL::Pair<NTL::zz_pX, long> >::DoSetLength(long)
00000000000c7730  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZX>::DoSetLength(long)
00000000000e0740  w   DF .text  0000000000000070  Base        NTL::Vec<NTL::ZZ_pEX>::DoSetLength(long)
```



---

archive/issue_comments_219344.json:
```json
{
    "body": "With vanilla `g++-4.6.4`, same problem as with Gentoo's `g++-4.6.4`\n\nI think that GCC 4.6.4 is too recent to not support it, so the `DoSetLength` problem should be fixed...",
    "created_at": "2014-10-08T12:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219344",
    "user": "https://github.com/jdemeyer"
}
```

With vanilla `g++-4.6.4`, same problem as with Gentoo's `g++-4.6.4`

I think that GCC 4.6.4 is too recent to not support it, so the `DoSetLength` problem should be fixed...



---

archive/issue_comments_219345.json:
```json
{
    "body": "I am guessing the latest release of ntl relies on templating features from recent g++, probably 4.7.x. Basically we would almost require someone with gcc<4.7 to use something that is like ntl 6.1. I'll have a look at the diff between 6.1 and 6.2.1.",
    "created_at": "2014-10-08T19:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219345",
    "user": "https://github.com/kiwifb"
}
```

I am guessing the latest release of ntl relies on templating features from recent g++, probably 4.7.x. Basically we would almost require someone with gcc<4.7 to use something that is like ntl 6.1. I'll have a look at the diff between 6.1 and 6.2.1.



---

archive/issue_comments_219346.json:
```json
{
    "body": "Replying to [comment:57 fbissey]:\n> I am guessing the latest release of ntl relies on templating features from recent g++, probably 4.7.x.\n\nI'm not entirely against requiring `g++-4.7` (we do have the GCC spkg after all), but is upstream aware of this? Anyway, if an easy fix is possible for this issue, that would be the best.",
    "created_at": "2014-10-08T20:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219346",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:57 fbissey]:
> I am guessing the latest release of ntl relies on templating features from recent g++, probably 4.7.x.

I'm not entirely against requiring `g++-4.7` (we do have the GCC spkg after all), but is upstream aware of this? Anyway, if an easy fix is possible for this issue, that would be the best.



---

archive/issue_comments_219347.json:
```json
{
    "body": "Replying to [comment:57 fbissey]:\n> probably 4.7.x.\n\nYes, as I posted before, `g++-4.7.3` does work.",
    "created_at": "2014-10-08T20:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219347",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:57 fbissey]:
> probably 4.7.x.

Yes, as I posted before, `g++-4.7.3` does work.



---

archive/issue_comments_219348.json:
```json
{
    "body": "Jean-Pierre has contact upstream I guess he could ask if that is a known requirement. Regarding this ticket I would like to understand why the .so library is linked with gcc rather than g++ - like upstream intended. Upstream source indicate g++, my sage-on-gentoo ebuild uses g++. This spkg: gcc. What the...?",
    "created_at": "2014-10-08T21:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219348",
    "user": "https://github.com/kiwifb"
}
```

Jean-Pierre has contact upstream I guess he could ask if that is a known requirement. Regarding this ticket I would like to understand why the .so library is linked with gcc rather than g++ - like upstream intended. Upstream source indicate g++, my sage-on-gentoo ebuild uses g++. This spkg: gcc. What the...?



---

archive/issue_comments_219349.json:
```json
{
    "body": "OK the configure script we currently ship is insufficient to generate a libtool that can link with g++. I am going to clean the spkg a bit later (yes I'll rebase the patches) but basically I will put this as the new configure.ac\n\n```\nAC_INIT(NTL, 6.2.1, victor@shoup.net)\nAM_INIT_AUTOMAKE([1.9 foreign])\nAC_CONFIG_FILES([Makefile])\nLT_INIT\nAC_PROG_CXX\nAC_PROG_CC\nAC_PROG_LIBTOOL\nAC_OUTPUT\n```\nLooking for the C compiler is possibly over the top but it doesn't hurt. I grossly tested things and with that I now have a clean linking with g++.\nBefore\n\n```\n/home/work/fbissey/sandbox/sage-6.4.beta4/local/var/tmp/sage/build/ntl-6.2.1.p0/src/libtool/libtool --mode=link g++ -I../include -I.  -O2 -g     -o libntl.la FFT.lo FacVec.lo GF2.lo GF2E.lo GF2EX.lo GF2EXFactoring.lo GF2X.lo GF2X1.lo GF2XFactoring.lo GF2XVec.lo GetTime.lo HNF.lo ctools.lo LLL.lo LLL_FP.lo LLL_QP.lo LLL_RR.lo LLL_XD.lo RR.lo WordVector.lo ZZ.lo ZZVec.lo ZZX.lo ZZX1.lo ZZXCharPoly.lo ZZXFactoring.lo ZZ_p.lo ZZ_pE.lo ZZ_pEX.lo ZZ_pEXFactoring.lo ZZ_pX.lo ZZ_pX1.lo ZZ_pXCharPoly.lo ZZ_pXFactoring.lo fileio.lo lip.lo lzz_p.lo lzz_pE.lo lzz_pEX.lo lzz_pEXFactoring.lo lzz_pX.lo lzz_pX1.lo lzz_pXCharPoly.lo lzz_pXFactoring.lo mat_GF2.lo mat_GF2E.lo mat_RR.lo mat_ZZ.lo mat_ZZ_p.lo mat_ZZ_pE.lo mat_lzz_p.lo mat_lzz_pE.lo mat_poly_ZZ.lo mat_poly_ZZ_p.lo mat_poly_lzz_p.lo quad_float.lo tools.lo vec_GF2.lo vec_GF2E.lo vec_RR.lo vec_ZZ.lo vec_ZZ_p.lo vec_ZZ_pE.lo vec_lzz_p.lo vec_lzz_pE.lo xdouble.lo G_LLL_FP.lo G_LLL_QP.lo G_LLL_XD.lo G_LLL_RR.lo -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -\nlgmp  -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgf2x  -lm -rpath /home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -version-info `cat VERSION_INFO` #LSHAR\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/FFT.o .libs/FacVec.o .libs/GF2.o .libs/GF2E.o .libs/GF2EX.o .libs/GF2EXFactoring.o .libs/GF2X.o .libs/GF2X1.o .libs/GF2XFactoring.o .libs/GF2XVec.o .libs/GetTime.o .libs/HNF.o .libs/ctools.o .libs/LLL.o .libs/LLL_FP.o .libs/LLL_QP.o .libs/LLL_RR.o .libs/LLL_XD.o .libs/RR.o .libs/WordVector.o .libs/ZZ.o .libs/ZZVec.o .libs/ZZX.o .libs/ZZX1.o .libs/ZZXCharPoly.o .libs/ZZXFactoring.o .libs/ZZ_p.o .libs/ZZ_pE.o .libs/ZZ_pEX.o .libs/ZZ_pEXFactoring.o .libs/ZZ_pX.o .libs/ZZ_pX1.o .libs/ZZ_pXCharPoly.o .libs/ZZ_pXFactoring.o .libs/fileio.o .libs/lip.o .libs/lzz_p.o .libs/lzz_pE.o .libs/lzz_pEX.o .libs/lzz_pEXFactoring.o .libs/lzz_pX.o .libs/lzz_pX1.o .libs/lzz_pXCharPoly.o .libs/lzz_pXFactoring.o .libs/mat_GF2.o .libs/mat_GF2E.o .libs/mat_RR.o .libs/mat_ZZ.o .libs/mat_ZZ_p.o .libs/mat_ZZ_pE.o .libs/mat_lzz_p.o .libs/mat_lzz_pE.o .libs/mat_poly_ZZ.o .libs/mat_poly_ZZ_p.o .libs/mat_poly_lzz_p.o .libs/quad_float.o .libs/tools.o .libs/vec_GF2.o .libs/vec_GF2E.o .libs/vec_\nRR.o .libs/vec_ZZ.o .libs/vec_ZZ_p.o .libs/vec_ZZ_pE.o .libs/vec_lzz_p.o .libs/vec_lzz_pE.o .libs/xdouble.o .libs/G_LLL_FP.o .libs/G_LLL_QP.o .libs/G_LLL_XD.o .libs/G_LLL_RR.o   -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -lgmp -lgf2x -lm  -O2   -Wl,-soname -Wl,libntl.so.5 -o .libs/libntl.so.5.0.0\n```\nAfter\n\n```\n/home/work/fbissey/sandbox/sage-6.4.beta4/local/var/tmp/sage/build/ntl-6.2.1.p0/src/libtool/libtool --mode=link g++ -I../include -I.  -O2   -o libntl.la FFT.lo FacVec.lo GF2.lo GF2E.lo GF2EX.lo GF2EXFactoring.lo GF2X.lo GF2X1.lo GF2XFactoring.lo GF2XVec.lo GetTime.lo HNF.lo ctools.lo LLL.lo LLL_FP.lo LLL_QP.lo LLL_RR.lo LLL_XD.lo RR.lo WordVector.lo ZZ.lo ZZVec.lo ZZX.lo ZZX1.lo ZZXCharPoly.lo ZZXFactoring.lo ZZ_p.lo ZZ_pE.lo ZZ_pEX.lo ZZ_pEXFactoring.lo ZZ_pX.lo ZZ_pX1.lo ZZ_pXCharPoly.lo ZZ_pXFactoring.lo fileio.lo lip.lo lzz_p.lo lzz_pE.lo lzz_pEX.lo lzz_pEXFactoring.lo lzz_pX.lo lzz_pX1.lo lzz_pXCharPoly.lo lzz_pXFactoring.lo mat_GF2.lo mat_GF2E.lo mat_RR.lo mat_ZZ.lo mat_ZZ_p.lo mat_ZZ_pE.lo mat_lzz_p.lo mat_lzz_pE.lo mat_poly_ZZ.lo mat_poly_ZZ_p.lo mat_poly_lzz_p.lo quad_float.lo tools.lo vec_GF2.lo vec_GF2E.lo vec_RR.lo vec_ZZ.lo vec_ZZ_p.lo vec_ZZ_pE.lo vec_lzz_p.lo vec_lzz_pE.lo xdouble.lo G_LLL_FP.lo G_LLL_QP.lo G_LLL_XD.lo G_LLL_RR.lo -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgmp  -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgf2x  -lm -rpath /home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -version-info `cat VERSION_INFO` #LSHAR\nlibtool: link: g++  -fPIC -DPIC -shared -nostdlib /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64/crti.o /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/crtbeginS.o  .libs/FFT.o .libs/FacVec.o .libs/GF2.o .libs/GF2E.o .libs/GF2EX.o .libs/GF2EXFactoring.o .libs/GF2X.o .libs/GF2X1.o .libs/GF2XFactoring.o .libs/GF2XVec.o .libs/GetTime.o .libs/HNF.o .libs/ctools.o .libs/LLL.o .libs/LLL_FP.o .libs/LLL_QP.o .libs/LLL_RR.o .libs/LLL_XD.o .libs/RR.o .libs/WordVector.o .libs/ZZ.o .libs/ZZVec.o .libs/ZZX.o .libs/ZZX1.o .libs/ZZXCharPoly.o .libs/ZZXFactoring.o .libs/ZZ_p.o .libs/ZZ_pE.o .libs/ZZ_pEX.o .libs/ZZ_pEXFactoring.o .libs/ZZ_pX.o .libs/ZZ_pX1.o .libs/ZZ_pXCharPoly.o .libs/ZZ_pXFactoring.o .libs/fileio.o .libs/lip.o .libs/lzz_p.o .libs/lzz_pE.o .libs/lzz_pEX.o .libs/lzz_pEXFactoring.o .libs/lzz_pX.o .libs/lzz_pX1.o .libs/lzz_pXCharPoly.o .libs/lzz_pXFactoring.o .libs/mat_GF2.o .libs/mat_GF2E.o .libs/mat_RR.o .libs/mat_ZZ.o .libs/mat_ZZ_p.o .libs/mat_ZZ_pE.o .libs/mat_lzz_p.o .libs/mat_lzz_pE.o .libs/mat_poly_ZZ.o .libs/mat_poly_ZZ_p.o .libs/mat_poly_lzz_p.o .libs/quad_float.o .libs/tools.o .libs/vec_GF2.o .libs/vec_GF2E.o .libs/vec_RR.o .libs/vec_ZZ.o .libs/vec_ZZ_p.o .libs/vec_ZZ_pE.o .libs/vec_lzz_p.o .libs/vec_lzz_pE.o .libs/xdouble.o .libs/G_LLL_FP.o .libs/G_LLL_QP.o .libs/G_LLL_XD.o .libs/G_LLL_RR.o   -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -lgmp -lgf2x -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3 -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../x86_64-pc-linux-gnu/lib -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../.. -lstdc++ -lm -lc -lgcc_s /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/crtendS.o /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64/crtn.o  -O2   -Wl,-soname -Wl,libntl.so.5 -o .libs/libntl.so.5.0.0\n```",
    "created_at": "2014-10-09T01:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219349",
    "user": "https://github.com/kiwifb"
}
```

OK the configure script we currently ship is insufficient to generate a libtool that can link with g++. I am going to clean the spkg a bit later (yes I'll rebase the patches) but basically I will put this as the new configure.ac

```
AC_INIT(NTL, 6.2.1, victor@shoup.net)
AM_INIT_AUTOMAKE([1.9 foreign])
AC_CONFIG_FILES([Makefile])
LT_INIT
AC_PROG_CXX
AC_PROG_CC
AC_PROG_LIBTOOL
AC_OUTPUT
```
Looking for the C compiler is possibly over the top but it doesn't hurt. I grossly tested things and with that I now have a clean linking with g++.
Before

```
/home/work/fbissey/sandbox/sage-6.4.beta4/local/var/tmp/sage/build/ntl-6.2.1.p0/src/libtool/libtool --mode=link g++ -I../include -I.  -O2 -g     -o libntl.la FFT.lo FacVec.lo GF2.lo GF2E.lo GF2EX.lo GF2EXFactoring.lo GF2X.lo GF2X1.lo GF2XFactoring.lo GF2XVec.lo GetTime.lo HNF.lo ctools.lo LLL.lo LLL_FP.lo LLL_QP.lo LLL_RR.lo LLL_XD.lo RR.lo WordVector.lo ZZ.lo ZZVec.lo ZZX.lo ZZX1.lo ZZXCharPoly.lo ZZXFactoring.lo ZZ_p.lo ZZ_pE.lo ZZ_pEX.lo ZZ_pEXFactoring.lo ZZ_pX.lo ZZ_pX1.lo ZZ_pXCharPoly.lo ZZ_pXFactoring.lo fileio.lo lip.lo lzz_p.lo lzz_pE.lo lzz_pEX.lo lzz_pEXFactoring.lo lzz_pX.lo lzz_pX1.lo lzz_pXCharPoly.lo lzz_pXFactoring.lo mat_GF2.lo mat_GF2E.lo mat_RR.lo mat_ZZ.lo mat_ZZ_p.lo mat_ZZ_pE.lo mat_lzz_p.lo mat_lzz_pE.lo mat_poly_ZZ.lo mat_poly_ZZ_p.lo mat_poly_lzz_p.lo quad_float.lo tools.lo vec_GF2.lo vec_GF2E.lo vec_RR.lo vec_ZZ.lo vec_ZZ_p.lo vec_ZZ_pE.lo vec_lzz_p.lo vec_lzz_pE.lo xdouble.lo G_LLL_FP.lo G_LLL_QP.lo G_LLL_XD.lo G_LLL_RR.lo -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -
lgmp  -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgf2x  -lm -rpath /home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -version-info `cat VERSION_INFO` #LSHAR
libtool: link: gcc -shared  -fPIC -DPIC  .libs/FFT.o .libs/FacVec.o .libs/GF2.o .libs/GF2E.o .libs/GF2EX.o .libs/GF2EXFactoring.o .libs/GF2X.o .libs/GF2X1.o .libs/GF2XFactoring.o .libs/GF2XVec.o .libs/GetTime.o .libs/HNF.o .libs/ctools.o .libs/LLL.o .libs/LLL_FP.o .libs/LLL_QP.o .libs/LLL_RR.o .libs/LLL_XD.o .libs/RR.o .libs/WordVector.o .libs/ZZ.o .libs/ZZVec.o .libs/ZZX.o .libs/ZZX1.o .libs/ZZXCharPoly.o .libs/ZZXFactoring.o .libs/ZZ_p.o .libs/ZZ_pE.o .libs/ZZ_pEX.o .libs/ZZ_pEXFactoring.o .libs/ZZ_pX.o .libs/ZZ_pX1.o .libs/ZZ_pXCharPoly.o .libs/ZZ_pXFactoring.o .libs/fileio.o .libs/lip.o .libs/lzz_p.o .libs/lzz_pE.o .libs/lzz_pEX.o .libs/lzz_pEXFactoring.o .libs/lzz_pX.o .libs/lzz_pX1.o .libs/lzz_pXCharPoly.o .libs/lzz_pXFactoring.o .libs/mat_GF2.o .libs/mat_GF2E.o .libs/mat_RR.o .libs/mat_ZZ.o .libs/mat_ZZ_p.o .libs/mat_ZZ_pE.o .libs/mat_lzz_p.o .libs/mat_lzz_pE.o .libs/mat_poly_ZZ.o .libs/mat_poly_ZZ_p.o .libs/mat_poly_lzz_p.o .libs/quad_float.o .libs/tools.o .libs/vec_GF2.o .libs/vec_GF2E.o .libs/vec_
RR.o .libs/vec_ZZ.o .libs/vec_ZZ_p.o .libs/vec_ZZ_pE.o .libs/vec_lzz_p.o .libs/vec_lzz_pE.o .libs/xdouble.o .libs/G_LLL_FP.o .libs/G_LLL_QP.o .libs/G_LLL_XD.o .libs/G_LLL_RR.o   -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -lgmp -lgf2x -lm  -O2   -Wl,-soname -Wl,libntl.so.5 -o .libs/libntl.so.5.0.0
```
After

```
/home/work/fbissey/sandbox/sage-6.4.beta4/local/var/tmp/sage/build/ntl-6.2.1.p0/src/libtool/libtool --mode=link g++ -I../include -I.  -O2   -o libntl.la FFT.lo FacVec.lo GF2.lo GF2E.lo GF2EX.lo GF2EXFactoring.lo GF2X.lo GF2X1.lo GF2XFactoring.lo GF2XVec.lo GetTime.lo HNF.lo ctools.lo LLL.lo LLL_FP.lo LLL_QP.lo LLL_RR.lo LLL_XD.lo RR.lo WordVector.lo ZZ.lo ZZVec.lo ZZX.lo ZZX1.lo ZZXCharPoly.lo ZZXFactoring.lo ZZ_p.lo ZZ_pE.lo ZZ_pEX.lo ZZ_pEXFactoring.lo ZZ_pX.lo ZZ_pX1.lo ZZ_pXCharPoly.lo ZZ_pXFactoring.lo fileio.lo lip.lo lzz_p.lo lzz_pE.lo lzz_pEX.lo lzz_pEXFactoring.lo lzz_pX.lo lzz_pX1.lo lzz_pXCharPoly.lo lzz_pXFactoring.lo mat_GF2.lo mat_GF2E.lo mat_RR.lo mat_ZZ.lo mat_ZZ_p.lo mat_ZZ_pE.lo mat_lzz_p.lo mat_lzz_pE.lo mat_poly_ZZ.lo mat_poly_ZZ_p.lo mat_poly_lzz_p.lo quad_float.lo tools.lo vec_GF2.lo vec_GF2E.lo vec_RR.lo vec_ZZ.lo vec_ZZ_p.lo vec_ZZ_pE.lo vec_lzz_p.lo vec_lzz_pE.lo xdouble.lo G_LLL_FP.lo G_LLL_QP.lo G_LLL_XD.lo G_LLL_RR.lo -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgmp  -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib  -lgf2x  -lm -rpath /home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -version-info `cat VERSION_INFO` #LSHAR
libtool: link: g++  -fPIC -DPIC -shared -nostdlib /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64/crti.o /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/crtbeginS.o  .libs/FFT.o .libs/FacVec.o .libs/GF2.o .libs/GF2E.o .libs/GF2EX.o .libs/GF2EXFactoring.o .libs/GF2X.o .libs/GF2X1.o .libs/GF2XFactoring.o .libs/GF2XVec.o .libs/GetTime.o .libs/HNF.o .libs/ctools.o .libs/LLL.o .libs/LLL_FP.o .libs/LLL_QP.o .libs/LLL_RR.o .libs/LLL_XD.o .libs/RR.o .libs/WordVector.o .libs/ZZ.o .libs/ZZVec.o .libs/ZZX.o .libs/ZZX1.o .libs/ZZXCharPoly.o .libs/ZZXFactoring.o .libs/ZZ_p.o .libs/ZZ_pE.o .libs/ZZ_pEX.o .libs/ZZ_pEXFactoring.o .libs/ZZ_pX.o .libs/ZZ_pX1.o .libs/ZZ_pXCharPoly.o .libs/ZZ_pXFactoring.o .libs/fileio.o .libs/lip.o .libs/lzz_p.o .libs/lzz_pE.o .libs/lzz_pEX.o .libs/lzz_pEXFactoring.o .libs/lzz_pX.o .libs/lzz_pX1.o .libs/lzz_pXCharPoly.o .libs/lzz_pXFactoring.o .libs/mat_GF2.o .libs/mat_GF2E.o .libs/mat_RR.o .libs/mat_ZZ.o .libs/mat_ZZ_p.o .libs/mat_ZZ_pE.o .libs/mat_lzz_p.o .libs/mat_lzz_pE.o .libs/mat_poly_ZZ.o .libs/mat_poly_ZZ_p.o .libs/mat_poly_lzz_p.o .libs/quad_float.o .libs/tools.o .libs/vec_GF2.o .libs/vec_GF2E.o .libs/vec_RR.o .libs/vec_ZZ.o .libs/vec_ZZ_p.o .libs/vec_ZZ_pE.o .libs/vec_lzz_p.o .libs/vec_lzz_pE.o .libs/xdouble.o .libs/G_LLL_FP.o .libs/G_LLL_QP.o .libs/G_LLL_XD.o .libs/G_LLL_RR.o   -L/home/work/fbissey/sandbox/sage-6.4.beta4/local/lib -lgmp -lgf2x -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3 -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../x86_64-pc-linux-gnu/lib -L/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../.. -lstdc++ -lm -lc -lgcc_s /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/crtendS.o /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.3/../../../../lib64/crtn.o  -O2   -Wl,-soname -Wl,libntl.so.5 -o .libs/libntl.so.5.0.0
```



---

archive/issue_comments_219350.json:
```json
{
    "body": "OK pushed and updated tarball let's see if I did this right.\n\n---\nNew commits:",
    "created_at": "2014-10-09T09:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219350",
    "user": "https://github.com/kiwifb"
}
```

OK pushed and updated tarball let's see if I did this right.

---
New commits:



---

archive/issue_comments_219351.json:
```json
{
    "body": "Changing only `configure.ac` obviously does nothing, you also need to add patches for the generated files.",
    "created_at": "2014-10-09T10:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219351",
    "user": "https://github.com/jdemeyer"
}
```

Changing only `configure.ac` obviously does nothing, you also need to add patches for the generated files.



---

archive/issue_comments_219352.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-10-09T10:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219352",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_219353.json:
```json
{
    "body": "As far as your problem with gcc 4.6.4 goes, it indeed does nothing. That was not quite the point. I don't need to add the generated files because this is not a pristine source, it includes the generated files in a separate directory as did its predecessors.",
    "created_at": "2014-10-09T10:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219353",
    "user": "https://github.com/kiwifb"
}
```

As far as your problem with gcc 4.6.4 goes, it indeed does nothing. That was not quite the point. I don't need to add the generated files because this is not a pristine source, it includes the generated files in a separate directory as did its predecessors.



---

archive/issue_comments_219354.json:
```json
{
    "body": "I also looked at the diff between 6.1.0 and 6.2.1 and I don't think I would try to touch anything to make it work with an earlier g++ there is too much all over the place.",
    "created_at": "2014-10-09T10:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219354",
    "user": "https://github.com/kiwifb"
}
```

I also looked at the diff between 6.1.0 and 6.2.1 and I don't think I would try to touch anything to make it work with an earlier g++ there is too much all over the place.



---

archive/issue_comments_219355.json:
```json
{
    "body": "If I understand correctly NTL 6.2.x needs GCC 4.7.x at least?\nIf so I can report to Shoup.",
    "created_at": "2014-10-09T11:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219355",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

If I understand correctly NTL 6.2.x needs GCC 4.7.x at least?
If so I can report to Shoup.



---

archive/issue_comments_219356.json:
```json
{
    "body": "That's our conclusion indeed.",
    "created_at": "2014-10-09T11:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219356",
    "user": "https://github.com/kiwifb"
}
```

That's our conclusion indeed.



---

archive/issue_comments_219357.json:
```json
{
    "body": "Report transmitted to Shoup.",
    "created_at": "2014-10-09T12:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219357",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Report transmitted to Shoup.



---

archive/issue_comments_219358.json:
```json
{
    "body": "Replying to [comment:68 jpflori]:\n> Report transmitted to Shoup.\n\nGood, I'm curious what the reply will be...",
    "created_at": "2014-10-09T12:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219358",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:68 jpflori]:
> Report transmitted to Shoup.

Good, I'm curious what the reply will be...



---

archive/issue_comments_219359.json:
```json
{
    "body": "Also: if it's decided that GCC 4.7.x is needed, that will require a discussion on `sage-devel` and a new ticket to implement this.",
    "created_at": "2014-10-09T12:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219359",
    "user": "https://github.com/jdemeyer"
}
```

Also: if it's decided that GCC 4.7.x is needed, that will require a discussion on `sage-devel` and a new ticket to implement this.



---

archive/issue_comments_219360.json:
```json
{
    "body": "Shoup replied he uses an old GCC 4.2.1 without problems and would like to have more details... So we need to conduct further investigation. But maybe he's not trying to use the problematic symbol. Can you provide a one liner to check his lib is correctly built with the old GCC?",
    "created_at": "2014-10-09T17:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219360",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Shoup replied he uses an old GCC 4.2.1 without problems and would like to have more details... So we need to conduct further investigation. But maybe he's not trying to use the problematic symbol. Can you provide a one liner to check his lib is correctly built with the old GCC?



---

archive/issue_comments_219361.json:
```json
{
    "body": "Replying to [comment:71 jpflori]:\n> Shoup replied he uses an old GCC 4.2.1 without problems\n\nDid he try to compile Singular on top of NTL? Because NTL itself always compiles.",
    "created_at": "2014-10-09T19:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219361",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:71 jpflori]:
> Shoup replied he uses an old GCC 4.2.1 without problems

Did he try to compile Singular on top of NTL? Because NTL itself always compiles.



---

archive/issue_comments_219362.json:
```json
{
    "body": "Would asking Shoup to run\n\n```\nobjdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength\n```\non his libntl be a sensible question?",
    "created_at": "2014-10-10T04:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219362",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Would asking Shoup to run

```
objdump -T -C local/lib/libntl.so.5.0.0 | grep DoSetLength
```
on his libntl be a sensible question?



---

archive/issue_comments_219363.json:
```json
{
    "body": "Here is the feedboack from Victor:\n\n```\nThis new issue seems to be related to template instantiation and linking,\nwhich admittedly is a potentially murky area.  I don't think there is\nan NTL bug\u2026but it's hard to say.  I haven't tested NTL recently\nas a dynamic library -- I almost always use static libraries, just because\nit is simpler.  I could imagine that there is some subtle interaction between\ntemplate instantiation and dynamic library loading\u2026since it seems\nthe problem goes away in some versions of gcc, it could be a gcc problem.\nIf you can send me a simple test that illustrates the problem that would be useful.\nIf there is anything in the code or the NTL build scrips that would help with this,\nI'd be glad to help.\n\nTo clarify one point: NTL makes no use of any features not present in the C++98.\nstandard, and it is only within the last couple of years that I have much \nconfidence that C++98 is widely and correctly implemented.\n```\nand just now:\n\n```\nI looked for closely at the ticket.\nI see that the code is compiled with the -fno-implicit-templates\nflag.  I'm not sure, but that could be a source of the problem...\n```",
    "created_at": "2014-10-10T04:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219363",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Here is the feedboack from Victor:

```
This new issue seems to be related to template instantiation and linking,
which admittedly is a potentially murky area.  I don't think there is
an NTL bugbut it's hard to say.  I haven't tested NTL recently
as a dynamic library -- I almost always use static libraries, just because
it is simpler.  I could imagine that there is some subtle interaction between
template instantiation and dynamic library loadingsince it seems
the problem goes away in some versions of gcc, it could be a gcc problem.
If you can send me a simple test that illustrates the problem that would be useful.
If there is anything in the code or the NTL build scrips that would help with this,
I'd be glad to help.

To clarify one point: NTL makes no use of any features not present in the C++98.
standard, and it is only within the last couple of years that I have much 
confidence that C++98 is widely and correctly implemented.
```
and just now:

```
I looked for closely at the ticket.
I see that the code is compiled with the -fno-implicit-templates
flag.  I'm not sure, but that could be a source of the problem...
```



---

archive/issue_comments_219364.json:
```json
{
    "body": "That's singular that is using -fno-implicit-templates. It would be interesting to check if libntl.a is usable. I found the argument about .a compared to .so a bit specious. Symbols can be checked in .a library with \"nm\" there is just no option to get the non hashed names in the output. But it looks like piping through c++filt works\n\n```\nnm libntl.a | c++filt\n```\nnm also works with .so files if you use the -D switch.",
    "created_at": "2014-10-10T06:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219364",
    "user": "https://github.com/kiwifb"
}
```

That's singular that is using -fno-implicit-templates. It would be interesting to check if libntl.a is usable. I found the argument about .a compared to .so a bit specious. Symbols can be checked in .a library with "nm" there is just no option to get the non hashed names in the output. But it looks like piping through c++filt works

```
nm libntl.a | c++filt
```
nm also works with .so files if you use the -D switch.



---

archive/issue_comments_219365.json:
```json
{
    "body": "I highly doubt that static vs. dynamic linking is the issue here. If the symbol isn't in the `.so` file, there is no reason why it should be in the `.a` file.",
    "created_at": "2014-10-10T08:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219365",
    "user": "https://github.com/jdemeyer"
}
```

I highly doubt that static vs. dynamic linking is the issue here. If the symbol isn't in the `.so` file, there is no reason why it should be in the `.a` file.



---

archive/issue_comments_219366.json:
```json
{
    "body": "The latest version actually fails:\n\n```\nApplying patches to NTL.\npatching file src/tools.c\npatching file include/NTL/tools.h\npatching file src/DoConfig\npatching file src/mfile\npatching file src/tools.c\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file src/tools.c.rej\npatching file include/NTL/tools.h\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n2 out of 2 hunks ignored -- saving rejects to file include/NTL/tools.h.rej\nError applying '/usr/local/src/sage-config/local/var/tmp/sage/build/ntl-6.2.1.p0/patches/make.patch'.\n```\n\nAlso: applying patches *after* running `./configure` makes no sense, can you change that?",
    "created_at": "2014-10-10T08:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219366",
    "user": "https://github.com/jdemeyer"
}
```

The latest version actually fails:

```
Applying patches to NTL.
patching file src/tools.c
patching file include/NTL/tools.h
patching file src/DoConfig
patching file src/mfile
patching file src/tools.c
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
1 out of 1 hunk ignored -- saving rejects to file src/tools.c.rej
patching file include/NTL/tools.h
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
2 out of 2 hunks ignored -- saving rejects to file include/NTL/tools.h.rej
Error applying '/usr/local/src/sage-config/local/var/tmp/sage/build/ntl-6.2.1.p0/patches/make.patch'.
```

Also: applying patches *after* running `./configure` makes no sense, can you change that?



---

archive/issue_comments_219367.json:
```json
{
    "body": "Looks like I have a duplicate patch, I will fix this and patch first as you ask.",
    "created_at": "2014-10-10T11:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219367",
    "user": "https://github.com/kiwifb"
}
```

Looks like I have a duplicate patch, I will fix this and patch first as you ask.



---

archive/issue_comments_219368.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-10T11:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219369.json:
```json
{
    "body": "I must have done a wrong cp somewhere, make.patch was identical to errorcallback.patch. All fixed as per your request.",
    "created_at": "2014-10-10T11:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219369",
    "user": "https://github.com/kiwifb"
}
```

I must have done a wrong cp somewhere, make.patch was identical to errorcallback.patch. All fixed as per your request.



---

archive/issue_comments_219370.json:
```json
{
    "body": "Still doesn't work:\n\n```\nApplying patches to NTL.   \npatching file src/tools.c  \npatching file include/NTL/tools.h\npatching file src/DoConfig \npatching file src/mfile\npatching file src/mfile\nReversed (or previously applied) patch detected!  Assume -R? [n]\nApply anyway? [n]\nSkipping patch.\n5 out of 5 hunks ignored -- saving rejects to file src/mfile.rej\npatching file src/WizardAux\nError applying '/home/jdemeyer/sage-git/local/var/tmp/sage/build/ntl-6.2.1.p0/patches/make.patch'.\n```",
    "created_at": "2014-10-10T12:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219370",
    "user": "https://github.com/jdemeyer"
}
```

Still doesn't work:

```
Applying patches to NTL.   
patching file src/tools.c  
patching file include/NTL/tools.h
patching file src/DoConfig 
patching file src/mfile
patching file src/mfile
Reversed (or previously applied) patch detected!  Assume -R? [n]
Apply anyway? [n]
Skipping patch.
5 out of 5 hunks ignored -- saving rejects to file src/mfile.rej
patching file src/WizardAux
Error applying '/home/jdemeyer/sage-git/local/var/tmp/sage/build/ntl-6.2.1.p0/patches/make.patch'.
```



---

archive/issue_comments_219371.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-10T18:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219372.json:
```json
{
    "body": "OK I tested the patches apply properly this time.",
    "created_at": "2014-10-10T18:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219372",
    "user": "https://github.com/kiwifb"
}
```

OK I tested the patches apply properly this time.



---

archive/issue_comments_219373.json:
```json
{
    "body": "Any news on this? Also we may want to check if the problem is gcc-4.6.x only. I may spend a bit of time investigating this week end.",
    "created_at": "2014-10-17T01:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219373",
    "user": "https://github.com/kiwifb"
}
```

Any news on this? Also we may want to check if the problem is gcc-4.6.x only. I may spend a bit of time investigating this week end.



---

archive/issue_comments_219374.json:
```json
{
    "body": "Not on my side.\nI just came back to work this week and had a bunch of other stuff to do, some of them were even Sage related.\n\nI'm sorry, a lot has been said here, but the ticket is getting hairy and I would like that we properly define what the problem is and how to detect it (other than, try to build Singular on top and NTL and see if it fails).\nWhat's not completely clear to me is what the problem actually is when using GCC 4.6.3 (and potentially prior versions:\n* is a symbol not getting defined in NTL with some GCC version and templating magic? as Singular needs that symbol it fails to build, and we can just detect the problematic GCC versions by using nm/objdump on the produced NTL .so/.a files.\n* is this a problem with template instantiation magic when Singular gets built, so nothing is actually missing from the NTL .so file, but there is some issue with let's say the header of NTL or the way Singular uses them, or the flags it passes to the compiler/linker? (that does not make a lot of sense, but as the situation is not clear to me, I'm just putting here all that goes through my head).\n\nSo in the first hypothesis which looks the more reasonable to me, what is the missing symbol?\nCan we produce a three lines C file which would fail to link against NTL as Singular does?\n\nI might personally be able to test GCC series between 4.6 and 4.9 on Linux x86_64, maybe ppc64, vanilla FSF and Debian versions.\nNot sure I'll have the time to twiddle with pre 4.5 versions.\nWhat about clang? :)",
    "created_at": "2014-10-17T11:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219374",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Not on my side.
I just came back to work this week and had a bunch of other stuff to do, some of them were even Sage related.

I'm sorry, a lot has been said here, but the ticket is getting hairy and I would like that we properly define what the problem is and how to detect it (other than, try to build Singular on top and NTL and see if it fails).
What's not completely clear to me is what the problem actually is when using GCC 4.6.3 (and potentially prior versions:
* is a symbol not getting defined in NTL with some GCC version and templating magic? as Singular needs that symbol it fails to build, and we can just detect the problematic GCC versions by using nm/objdump on the produced NTL .so/.a files.
* is this a problem with template instantiation magic when Singular gets built, so nothing is actually missing from the NTL .so file, but there is some issue with let's say the header of NTL or the way Singular uses them, or the flags it passes to the compiler/linker? (that does not make a lot of sense, but as the situation is not clear to me, I'm just putting here all that goes through my head).

So in the first hypothesis which looks the more reasonable to me, what is the missing symbol?
Can we produce a three lines C file which would fail to link against NTL as Singular does?

I might personally be able to test GCC series between 4.6 and 4.9 on Linux x86_64, maybe ppc64, vanilla FSF and Debian versions.
Not sure I'll have the time to twiddle with pre 4.5 versions.
What about clang? :)



---

archive/issue_comments_219375.json:
```json
{
    "body": "There are several symbols missing but the ones that cause singular to fail are the following\n\n```\nNTL::Vec<NTL::ZZ>::DoSetLength(long)\nNTL::Vec<NTL::zz_pEX>::DoSetLength(long)\nNTL::Vec<NTL::zz_pX>::DoSetLength(long)\n```\nc++ and me don't mix well so I wouldn't try to write a small test program for these but it should be easy for someone who has a clue about c++. Which also means that I have no idea on how it fails to build.\nI should be able to test gcc 4.3 easily on ppc64 since sles11sp1 comes with that as default.",
    "created_at": "2014-10-17T11:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219375",
    "user": "https://github.com/kiwifb"
}
```

There are several symbols missing but the ones that cause singular to fail are the following

```
NTL::Vec<NTL::ZZ>::DoSetLength(long)
NTL::Vec<NTL::zz_pEX>::DoSetLength(long)
NTL::Vec<NTL::zz_pX>::DoSetLength(long)
```
c++ and me don't mix well so I wouldn't try to write a small test program for these but it should be easy for someone who has a clue about c++. Which also means that I have no idea on how it fails to build.
I should be able to test gcc 4.3 easily on ppc64 since sles11sp1 comes with that as default.



---

archive/issue_comments_219376.json:
```json
{
    "body": "Ok, so I just built NTL 6.2.1 on a x86_64 Ubuntu 14.04.1 LTS using the available Linaro GCC (4.4, 4.6, 4.7, 4.8) and can confirm that:\n* 4.7 and 4.8 yield a whole bunch of DoSetLength symbols in static and shared libs,\n* 4.4 and 4.6 don't.\n\nI'm now trying other versions of NTL to see what happens.",
    "created_at": "2014-10-17T13:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219376",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Ok, so I just built NTL 6.2.1 on a x86_64 Ubuntu 14.04.1 LTS using the available Linaro GCC (4.4, 4.6, 4.7, 4.8) and can confirm that:
* 4.7 and 4.8 yield a whole bunch of DoSetLength symbols in static and shared libs,
* 4.4 and 4.6 don't.

I'm now trying other versions of NTL to see what happens.



---

archive/issue_comments_219377.json:
```json
{
    "body": "Random pointers to investigate:\n* https://gcc.gnu.org/ml/gcc-help/2012-08/msg00280.html\n* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=48883\n* https://gcc.gnu.org/onlinedocs/gcc/Template-Instantiation.html",
    "created_at": "2014-10-17T13:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219377",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Random pointers to investigate:
* https://gcc.gnu.org/ml/gcc-help/2012-08/msg00280.html
* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=48883
* https://gcc.gnu.org/onlinedocs/gcc/Template-Instantiation.html



---

archive/issue_comments_219378.json:
```json
{
    "body": "As far as NTL versions (with g++-4.6) are concerned, and as expected:\n* 6.1.0 gets the bunch of symbols;\n* 6.2.0 and 6.2.1 don't.",
    "created_at": "2014-10-17T13:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219378",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

As far as NTL versions (with g++-4.6) are concerned, and as expected:
* 6.1.0 gets the bunch of symbols;
* 6.2.0 and 6.2.1 don't.



---

archive/issue_comments_219379.json:
```json
{
    "body": "A little more info:\n* with Debian's GCC 4.4 and 4.6, only a few symbols get defined;\n* with Debian's GCC 4.7, 4.8 and 4.9, a lof of symbols get defined;\n* with FSF's GCC 4.3, only a few symbols get defined;\n* with FSF's GCC 4.2 and 4.5, a lot of symbols get defined.\nSo it's kind of unfortunate that GCC behavior varies in that way.\n\nWhatsoever, removing the `-fno-implicit-templates` flag from Singular 3-1-6 build system, let it link to a libntl.so without all the explicit `DoSetLength` symbols.\n\nSo I guess the proper fix would be to explicitly list the needed templates in Singular sources (the NTL6 compatibility patch does already this kind of stuff), I'm now trying this solution.\nOr we could just get rid of the `-fno-implicit-templates` flag from Singular 3-1-6 build system.\nOr do you think, we should make sure NTL always define the whole bunch of symbols.\n\nNot sure how singular-4.x behaves.",
    "created_at": "2014-10-20T09:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219379",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

A little more info:
* with Debian's GCC 4.4 and 4.6, only a few symbols get defined;
* with Debian's GCC 4.7, 4.8 and 4.9, a lof of symbols get defined;
* with FSF's GCC 4.3, only a few symbols get defined;
* with FSF's GCC 4.2 and 4.5, a lot of symbols get defined.
So it's kind of unfortunate that GCC behavior varies in that way.

Whatsoever, removing the `-fno-implicit-templates` flag from Singular 3-1-6 build system, let it link to a libntl.so without all the explicit `DoSetLength` symbols.

So I guess the proper fix would be to explicitly list the needed templates in Singular sources (the NTL6 compatibility patch does already this kind of stuff), I'm now trying this solution.
Or we could just get rid of the `-fno-implicit-templates` flag from Singular 3-1-6 build system.
Or do you think, we should make sure NTL always define the whole bunch of symbols.

Not sure how singular-4.x behaves.



---

archive/issue_comments_219380.json:
```json
{
    "body": "Let Singular instantiate NTL templates",
    "created_at": "2014-10-20T11:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219380",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Let Singular instantiate NTL templates



---

archive/issue_comments_219381.json:
```json
{
    "body": "Attachment [templates.patch](tarball://root/attachments/some-uuid/ticket16882/templates.patch) by jpflori created at 2014-10-20 11:28:59\n\n(Note this is a 3-1-7 based patch.)",
    "created_at": "2014-10-20T11:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219381",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [templates.patch](tarball://root/attachments/some-uuid/ticket16882/templates.patch) by jpflori created at 2014-10-20 11:28:59

(Note this is a 3-1-7 based patch.)



---

archive/issue_comments_219382.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-10-20T12:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219382",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Last 10 new commits:



---

archive/issue_comments_219383.json:
```json
{
    "body": "FYI, grepping through the Singular 4.0.1 sources for no-implicit yields nothing.\n\nSo the use of that flag in the 3-1-x branch is surely an \"historical artifact\".",
    "created_at": "2014-10-20T13:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219383",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

FYI, grepping through the Singular 4.0.1 sources for no-implicit yields nothing.

So the use of that flag in the 3-1-x branch is surely an "historical artifact".



---

archive/issue_comments_219384.json:
```json
{
    "body": "And I have no problem building Singular 4-0-1 on top of a lightweight NTL in a Sage shell (without any patches).",
    "created_at": "2014-10-20T14:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219384",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And I have no problem building Singular 4-0-1 on top of a lightweight NTL in a Sage shell (without any patches).



---

archive/issue_comments_219385.json:
```json
{
    "body": "I definitely think that not passing `-fno-implicit-templates` is the way to go.\nIt's useless to fight with a soon to be obsolete Singular version.",
    "created_at": "2014-10-20T19:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219385",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I definitely think that not passing `-fno-implicit-templates` is the way to go.
It's useless to fight with a soon to be obsolete Singular version.



---

archive/issue_comments_219386.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-20T19:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219386",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219387.json:
```json
{
    "body": "Does Singular-3-1-7 require NTL-6.2.1? If not, I strongly suggest to split off the Singular upgrade to a different ticket (2 spkg upgrades on one ticket sounds scary).",
    "created_at": "2014-10-20T19:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219387",
    "user": "https://github.com/jdemeyer"
}
```

Does Singular-3-1-7 require NTL-6.2.1? If not, I strongly suggest to split off the Singular upgrade to a different ticket (2 spkg upgrades on one ticket sounds scary).



---

archive/issue_comments_219388.json:
```json
{
    "body": "As far as I saw, Singular 3-1-7 is mainly bug fixes and in particular inclusion of Sage patches...\nAnd I wanted to see if it changed anything as far as the templates issue was concerned.\nIt did not, but the update was done.\nFeel free to split it apart, but on my side I've fought enough for this ticket.\nIt should not be that hard.\nJust keep the `templates.patch` here (note that you could also get a similar efect playing with env vars.",
    "created_at": "2014-10-20T20:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219388",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

As far as I saw, Singular 3-1-7 is mainly bug fixes and in particular inclusion of Sage patches...
And I wanted to see if it changed anything as far as the templates issue was concerned.
It did not, but the update was done.
Feel free to split it apart, but on my side I've fought enough for this ticket.
It should not be that hard.
Just keep the `templates.patch` here (note that you could also get a similar efect playing with env vars.



---

archive/issue_comments_219389.json:
```json
{
    "body": "What is the \"submit upstream\" status of the `ntl62.patch` for FLINT?\n\n---\nNew commits:",
    "created_at": "2014-10-20T20:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219389",
    "user": "https://github.com/jdemeyer"
}
```

What is the "submit upstream" status of the `ntl62.patch` for FLINT?

---
New commits:



---

archive/issue_comments_219390.json:
```json
{
    "body": "Replying to [comment:101 jdemeyer]:\n> What is the \"submit upstream\" status of the `ntl62.patch` for FLINT?\n> \n> ---\n> New commits:\n> |                                                                                                                                          |                           |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n> |[7c3f691](http://git.sagemath.org/sage.git/commit/?id=7c3f691d1f544592516312f2e4961239baf6d262)|`Upgrade to Singular-3-1-7`|\n> |[b21d42c](http://git.sagemath.org/sage.git/commit/?id=b21d42c649a38ec97bd62b3cc48970205677ce16)|`Upgrade to NTL 6.2.1`|\n\n\nIt has been merged into trunk but there are no release containing it at this time.",
    "created_at": "2014-10-21T00:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219390",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:101 jdemeyer]:
> What is the "submit upstream" status of the `ntl62.patch` for FLINT?
> 
> ---
> New commits:
> |                                                                                                                                          |                           |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
> |[7c3f691](http://git.sagemath.org/sage.git/commit/?id=7c3f691d1f544592516312f2e4961239baf6d262)|`Upgrade to Singular-3-1-7`|
> |[b21d42c](http://git.sagemath.org/sage.git/commit/?id=b21d42c649a38ec97bd62b3cc48970205677ce16)|`Upgrade to NTL 6.2.1`|


It has been merged into trunk but there are no release containing it at this time.



---

archive/issue_comments_219391.json:
```json
{
    "body": "I see you added doc fir the lazy template instantiation patch, which I forgot to do, but put it in NTL's SPKG.txt instead of Singular's one, and with a wrong name (template_fix.patch instead of templates.patch).\n\nThanks for splitting the updates into two tickets.",
    "created_at": "2014-10-21T07:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219391",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I see you added doc fir the lazy template instantiation patch, which I forgot to do, but put it in NTL's SPKG.txt instead of Singular's one, and with a wrong name (template_fix.patch instead of templates.patch).

Thanks for splitting the updates into two tickets.



---

archive/issue_comments_219392.json:
```json
{
    "body": "Replying to [comment:103 jpflori]:\n> I see you added doc fir the lazy template instantiation patch, which I forgot to do, but put it in NTL's SPKG.txt instead of Singular's one, and with a wrong name (template_fix.patch instead of templates.patch).\n\n\nI didn't add anything, I literally just split up the ticket in two.",
    "created_at": "2014-10-21T07:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219392",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:103 jpflori]:
> I see you added doc fir the lazy template instantiation patch, which I forgot to do, but put it in NTL's SPKG.txt instead of Singular's one, and with a wrong name (template_fix.patch instead of templates.patch).


I didn't add anything, I literally just split up the ticket in two.



---

archive/issue_comments_219393.json:
```json
{
    "body": "Oh right, the template_fix.patch thing mentioned in NTL's SPKG.txt is a leftover of the fix needed for 6.2.0 which was included into 6.2.1.",
    "created_at": "2014-10-21T07:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219393",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Oh right, the template_fix.patch thing mentioned in NTL's SPKG.txt is a leftover of the fix needed for 6.2.0 which was included into 6.2.1.



---

archive/issue_comments_219394.json:
```json
{
    "body": "Doc updated.\n\n---\nLast 10 new commits:",
    "created_at": "2014-10-21T07:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219394",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Doc updated.

---
Last 10 new commits:



---

archive/issue_comments_219395.json:
```json
{
    "body": "NTL + Singular builds fine now on the machine where it failed before.",
    "created_at": "2014-10-21T13:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219395",
    "user": "https://github.com/jdemeyer"
}
```

NTL + Singular builds fine now on the machine where it failed before.



---

archive/issue_comments_219396.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-21T13:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219397.json:
```json
{
    "body": "I can also confirm it builds in normal and debug modes with nice and mean versions of GCC.",
    "created_at": "2014-10-21T14:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219397",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I can also confirm it builds in normal and debug modes with nice and mean versions of GCC.



---

archive/issue_comments_219398.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-27T15:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-27T15:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219400.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-27T15:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219401.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-17T12:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219401",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_219402.json:
```json
{
    "body": "lgtm",
    "created_at": "2014-11-17T12:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219402",
    "user": "https://github.com/vbraun"
}
```

lgtm



---

archive/issue_comments_219403.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-22T17:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16645#issuecomment-219403",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049343.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-22T17:18:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16645",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16645#event-49343"
}
```
