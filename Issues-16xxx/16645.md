# Issue 16645: Restore displaying animations in notebook

archive/issues_016408.json:
```json
{
    "assignees": [],
    "body": "#12827 broke display of animations, and while #16608 restored that functionality for `Animation.show()`, it remains broken for methods `Animation.gif()` and `Animation.ffmpeg()`. Based on #15515, a more complete fix is possible.\n\nDepends on #15515\nDepends on #16608\n\nKeywords: **notebook, animate**\n\nBranch/Commit: **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Martin von Gagern**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16645_\n\n",
    "closed_at": "2014-07-14T14:38:10Z",
    "created_at": "2014-07-11T07:10:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Restore displaying animations in notebook",
    "type": "issue",
    "updated_at": "2014-07-14T14:38:10Z",
    "url": "https://github.com/sagemath/sage/issues/16645",
    "user": "https://github.com/gagern"
}
```
#12827 broke display of animations, and while #16608 restored that functionality for `Animation.show()`, it remains broken for methods `Animation.gif()` and `Animation.ffmpeg()`. Based on #15515, a more complete fix is possible.

Depends on #15515
Depends on #16608

Keywords: **notebook, animate**

Branch/Commit: **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**

Reviewer: **Volker Braun**

Author: **Martin von Gagern**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/16645_





---

archive/issue_events_238005.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-11T07:10:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238005"
}
```



---

archive/issue_events_238006.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-11T07:10:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238006"
}
```



---

archive/issue_events_238007.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-11T07:10:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238007"
}
```



---

archive/issue_events_238008.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-11T07:10:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238008"
}
```



---

archive/issue_comments_217189.json:
```json
{
    "body": "Branch: **[u/gagern/ticket/16645](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16645)**",
    "created_at": "2014-07-11T08:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217189",
    "user": "https://github.com/gagern"
}
```

Branch: **[u/gagern/ticket/16645](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16645)**



---

archive/issue_comments_217190.json:
```json
{
    "body": "Commit: **[9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e)**",
    "created_at": "2014-07-11T08:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217190",
    "user": "https://github.com/gagern"
}
```

Commit: **[9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e)**



---

archive/issue_events_238009.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-11T08:07:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238009"
}
```



---

archive/issue_comments_217191.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58b9c46c732978aa1b82ba4f15f31919d8f3f3c3\">58b9c46</a></td><td><code>minimal fix to restore functionality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16cbd2d59b4b5bbb330668255345fc2d53f3afee\">16cbd2d</a></td><td><code>Merge branch 'develop' into ticket/16533-stopgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3e656b4507d9f6544e87641614836dc6275e929\">b3e656b</a></td><td><code>graphics_filename: return a tmp_filename() if not in EMBEDDED_MODE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69b285d7fb1ebf189aea0b7cde311880ec884d6d\">69b285d</a></td><td><code>Restore possibly positional arguments.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3c55428aeb70ded8dc9e66742c2cf68eae57350\">e3c5542</a></td><td><code>Merge branch ticket/15515 into ticket/16608 to create ticket/16645.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e\">9f30e94</a></td><td><code>Always use graphics_filename instead of tmp_filename.</code></td></tr></table>\n",
    "created_at": "2014-07-11T08:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217191",
    "user": "https://github.com/gagern"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58b9c46c732978aa1b82ba4f15f31919d8f3f3c3">58b9c46</a></td><td><code>minimal fix to restore functionality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16cbd2d59b4b5bbb330668255345fc2d53f3afee">16cbd2d</a></td><td><code>Merge branch 'develop' into ticket/16533-stopgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3e656b4507d9f6544e87641614836dc6275e929">b3e656b</a></td><td><code>graphics_filename: return a tmp_filename() if not in EMBEDDED_MODE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69b285d7fb1ebf189aea0b7cde311880ec884d6d">69b285d</a></td><td><code>Restore possibly positional arguments.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3c55428aeb70ded8dc9e66742c2cf68eae57350">e3c5542</a></td><td><code>Merge branch ticket/15515 into ticket/16608 to create ticket/16645.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e">9f30e94</a></td><td><code>Always use graphics_filename instead of tmp_filename.</code></td></tr></table>




---

archive/issue_comments_217192.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNote that only [9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e) is new for this ticket here, all the other commits listed above are parts of some already closed tickets and should end up in the develop branch pretty soon. So it is enough to review just that single commit.",
    "created_at": "2014-07-11T08:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217192",
    "user": "https://github.com/gagern"
}
```

<div id="comment:3" align="right">comment:3</div>

Note that only [9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e) is new for this ticket here, all the other commits listed above are parts of some already closed tickets and should end up in the develop branch pretty soon. So it is enough to review just that single commit.



---

archive/issue_comments_217193.json:
```json
{
    "body": "Changed commit from **[9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e)** to **[bb7307f](https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a)**",
    "created_at": "2014-07-11T09:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217193",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9f30e94](https://github.com/sagemath/sagetrac-mirror/commit/9f30e9400f6fda042bf579e720ffee772c751f1e)** to **[bb7307f](https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a)**



---

archive/issue_comments_217194.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a\">bb7307f</a></td><td><code>Prevent doctest from leaking file into current working directory.</code></td></tr></table>\n",
    "created_at": "2014-07-11T09:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217194",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a">bb7307f</a></td><td><code>Prevent doctest from leaking file into current working directory.</code></td></tr></table>




---

archive/issue_comments_217195.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n[These are the changes](https://github.com/sagemath/sagetrac-mirror/compare/e3c55428aeb70ded8dc9e66742c2cf68eae57350...u/gagern/ticket/16645) that need reviewing in this ticket here.",
    "created_at": "2014-07-11T21:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217195",
    "user": "https://github.com/gagern"
}
```

<div id="comment:5" align="right">comment:5</div>

[These are the changes](https://github.com/sagemath/sagetrac-mirror/compare/e3c55428aeb70ded8dc9e66742c2cf68eae57350...u/gagern/ticket/16645) that need reviewing in this ticket here.



---

archive/issue_comments_217196.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n`tmp_filename` is already a global in Sage, you don't need\n\n```\nsage: f = sage.misc.temporary_file.tmp_filename(ext='.png')\n```\nin doctests.`",
    "created_at": "2014-07-13T05:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217196",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

`tmp_filename` is already a global in Sage, you don't need

```
sage: f = sage.misc.temporary_file.tmp_filename(ext='.png')
```
in doctests.`



---

archive/issue_comments_217197.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2014-07-13T05:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217197",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_238010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-13T05:15:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238010"
}
```



---

archive/issue_events_238011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-13T05:15:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238011"
}
```



---

archive/issue_comments_217198.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nlgtm",
    "created_at": "2014-07-13T05:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217198",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

lgtm



---

archive/issue_comments_217199.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571\">2c5f58b</a></td><td><code>Avoid unneccessary qualification of tmp_filename in doctests.</code></td></tr></table>\n",
    "created_at": "2014-07-13T07:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217199",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571">2c5f58b</a></td><td><code>Avoid unneccessary qualification of tmp_filename in doctests.</code></td></tr></table>




---

archive/issue_comments_217200.json:
```json
{
    "body": "Changed commit from **[bb7307f](https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a)** to **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**",
    "created_at": "2014-07-13T07:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217200",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bb7307f](https://github.com/sagemath/sagetrac-mirror/commit/bb7307f0649cfa90916f74c102d1d09a424b759a)** to **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**



---

archive/issue_events_238012.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-07-13T07:38:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238012"
}
```



---

archive/issue_events_238013.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2014-07-13T07:38:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238013"
}
```



---

archive/issue_comments_217201.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@vbraun](#comment:6):\n> `tmp_filename` is already a global in Sage [\u2026]\n\nThanks for the review, and for pointing this out. I did copy and paste that from [745a3bb](https://github.com/sagemath/sagetrac-mirror/commit/745a3bbdb8ac6499b0c650d005ab77dc1e47434f) from #12827, and addressed both instances now.",
    "created_at": "2014-07-13T07:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217201",
    "user": "https://github.com/gagern"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@vbraun](#comment:6):
> `tmp_filename` is already a global in Sage […]

Thanks for the review, and for pointing this out. I did copy and paste that from [745a3bb](https://github.com/sagemath/sagetrac-mirror/commit/745a3bbdb8ac6499b0c650d005ab77dc1e47434f) from #12827, and addressed both instances now.



---

archive/issue_events_238014.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-13T07:41:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238014"
}
```



---

archive/issue_events_238015.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-13T07:41:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238015"
}
```



---

archive/issue_comments_217202.json:
```json
{
    "body": "Changed branch from **[u/gagern/ticket/16645](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16645)** to **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**",
    "created_at": "2014-07-14T14:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16645#issuecomment-217202",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gagern/ticket/16645](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16645)** to **[2c5f58b](https://github.com/sagemath/sagetrac-mirror/commit/2c5f58bd16352a82c7c7b9ad6f1c17cd86a33571)**



---

archive/issue_events_238016.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-14T14:38:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238016"
}
```



---

archive/issue_events_238017.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a69ed2e24a38414e97a52e9f32da899e1791d2f6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-14T14:38:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16645",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16645#event-238017"
}
```
