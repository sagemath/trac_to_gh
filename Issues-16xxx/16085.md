# Issue 16085: Python 3 preparation: Py2 vs. Py3 value of type() in doctests

archive/issues_015848.json:
```json
{
    "body": "In Py2 we have\n\n```\nPython 2.7.5+ (default, Feb 27 2014, 19:37:08) \n[GCC 4.8.1] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> b = True\n>>> type(b)\n<type 'bool'>\n```\nwhile in Py3\n\n```\nPython 3.3.2+ (default, Feb 28 2014, 00:52:16) \n[GCC 4.8.1] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> b = True\n>>> type(b)\n<class 'bool'>\n```\nThe result may be unified with `isinstance()`.\nPy2\n\n```\n>>> isinstance(b, bool)\nTrue\n```\nand Py3\n\n```\n>>> isinstance(b, bool)\nTrue\n```\n\nA simpler way is to use \"...\" instead of \"type\" or \"class\".\nThis can be automated using something like\n\n```\ngrep -rl \"<type 'list\" src/sage/ | xargs sed -i \"s/<type 'list/<... 'list/g\"\n```\n\nAbout 161 py module are effected.\n\nThis ticket is tracked as a dependency of meta-ticket ticket:16052.\n\nUsing:\n\negrep -R --no-filename -o \"<type '[a-z]*'>\" src/sage | sort | uniq -c | sort -rn\n\nto find what needs to be done in src/sage:\n\n* 73 <type 'int'>  #22233\n* 65 <type 'tuple'> #22292\n* 43 <type 'object'> #23105\n* 35 <type 'float'> #22292\n* 32 <type 'str'>  #22060\n* 22 <type 'dict'> #22292\n* 18 <type 'generator'> #22292\n* 9 <type 'function'> #22292\n* 9 <type 'bool'> #22233\n* 8 <type 'long'>  !!! This one does no longer exists in Py3 !!!\n* 5 <type 'instance'> #23073\n* 5 <type 'complex'> #22233\n* 4 <type 'frozenset'> #22233\n* 3 <type 'type'> #22233\n* 1 <type 'set'> #22233\n\nand in src/doc (see #22114):\n\n* 19 <type 'str'> #22114\n* 18 <type 'list'> #22114\n* 14 <type 'tuple'> #22114\n* 14 <type 'function'> #22114\n* 8 <type 'int'> #22114\n* 8 <type 'instancemethod'>\n* 8 <type 'dict'> #22114\n* 6 <type 'float'> #22114\n\n\nCC:  @embray\n\nKeywords: python3\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/16085\n\n",
    "closed_at": "2018-02-13T19:16:13Z",
    "created_at": "2014-04-07T15:17:47Z",
    "labels": [
        "component: python3",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Python 3 preparation: Py2 vs. Py3 value of type() in doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16085",
    "user": "https://github.com/wluebbe"
}
```
In Py2 we have

```
Python 2.7.5+ (default, Feb 27 2014, 19:37:08) 
[GCC 4.8.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> b = True
>>> type(b)
<type 'bool'>
```
while in Py3

```
Python 3.3.2+ (default, Feb 28 2014, 00:52:16) 
[GCC 4.8.1] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> b = True
>>> type(b)
<class 'bool'>
```
The result may be unified with `isinstance()`.
Py2

```
>>> isinstance(b, bool)
True
```
and Py3

```
>>> isinstance(b, bool)
True
```

A simpler way is to use "..." instead of "type" or "class".
This can be automated using something like

```
grep -rl "<type 'list" src/sage/ | xargs sed -i "s/<type 'list/<... 'list/g"
```

About 161 py module are effected.

This ticket is tracked as a dependency of meta-ticket ticket:16052.

Using:

egrep -R --no-filename -o "<type '[a-z]*'>" src/sage | sort | uniq -c | sort -rn

to find what needs to be done in src/sage:

* 73 <type 'int'>  #22233
* 65 <type 'tuple'> #22292
* 43 <type 'object'> #23105
* 35 <type 'float'> #22292
* 32 <type 'str'>  #22060
* 22 <type 'dict'> #22292
* 18 <type 'generator'> #22292
* 9 <type 'function'> #22292
* 9 <type 'bool'> #22233
* 8 <type 'long'>  !!! This one does no longer exists in Py3 !!!
* 5 <type 'instance'> #23073
* 5 <type 'complex'> #22233
* 4 <type 'frozenset'> #22233
* 3 <type 'type'> #22233
* 1 <type 'set'> #22233

and in src/doc (see #22114):

* 19 <type 'str'> #22114
* 18 <type 'list'> #22114
* 14 <type 'tuple'> #22114
* 14 <type 'function'> #22114
* 8 <type 'int'> #22114
* 8 <type 'instancemethod'>
* 8 <type 'dict'> #22114
* 6 <type 'float'> #22114


CC:  @embray

Keywords: python3

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/16085





---

archive/issue_events_047371.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47371"
}
```



---

archive/issue_events_047372.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47372"
}
```



---

archive/issue_events_047373.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47373"
}
```



---

archive/issue_comments_205507.json:
```json
{
    "body": "Changing component from distribution to python3.",
    "created_at": "2016-05-02T13:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205507",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from distribution to python3.



---

archive/issue_comments_205508.json:
```json
{
    "body": "<a id='comment:5'></a>see #21904 for list and #22060 for str",
    "created_at": "2016-12-15T12:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205508",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>see #21904 for list and #22060 for str



---

archive/issue_events_047374.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-12-15T12:45:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47374"
}
```



---

archive/issue_events_047375.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-12-15T12:45:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47375"
}
```



---

archive/issue_comments_205509.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2016-12-15T19:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205509",
    "user": "https://github.com/fchapoton"
}
```

Changing type from enhancement to defect.



---

archive/issue_events_047376.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:06:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47376"
}
```



---

archive/issue_events_047377.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:06:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47377"
}
```



---

archive/issue_comments_205510.json:
```json
{
    "body": "<a id='comment:16'></a>another step in #22292",
    "created_at": "2017-02-02T20:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205510",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>another step in #22292



---

archive/issue_events_047378.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-01T12:52:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47378"
}
```



---

archive/issue_events_047379.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-01T12:52:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47379"
}
```



---

archive/issue_comments_205511.json:
```json
{
    "body": "<a id='comment:18'></a>next step in #23073",
    "created_at": "2017-05-25T08:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205511",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>next step in #23073



---

archive/issue_comments_205512.json:
```json
{
    "body": "<a id='comment:19'></a>next step in #23105",
    "created_at": "2017-05-30T20:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205512",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>next step in #23105



---

archive/issue_comments_205513.json:
```json
{
    "body": "<a id='comment:20'></a>next step in #23790",
    "created_at": "2017-09-06T11:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205513",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>next step in #23790



---

archive/issue_comments_205514.json:
```json
{
    "body": "<a id='comment:21'></a>next steps in #24228 and #24229 and #24230 for start",
    "created_at": "2017-11-16T20:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205514",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>next steps in #24228 and #24229 and #24230 for start



---

archive/issue_comments_205515.json:
```json
{
    "body": "<a id='comment:22'></a>next in #24233",
    "created_at": "2017-11-17T12:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205515",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>next in #24233



---

archive/issue_comments_205516.json:
```json
{
    "body": "<a id='comment:23'></a>Erik, can we close this one, after what you have done to the doctest framework in #24258 ?",
    "created_at": "2018-02-13T16:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205516",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>Erik, can we close this one, after what you have done to the doctest framework in #24258 ?



---

archive/issue_events_047380.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-13T16:34:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47380"
}
```



---

archive/issue_events_047381.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-13T16:34:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47381"
}
```



---

archive/issue_comments_205517.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-13T16:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205517",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_events_047382.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-13T19:16:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16085#event-47382"
}
```



---

archive/issue_comments_205518.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-02-13T19:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16085#issuecomment-205518",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
