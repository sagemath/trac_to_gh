# Issue 16644: LinearCode.cardinality category breakage

archive/issues_016407.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: C = codes.HammingCode(3, GF(2))\nsage: C.cardinality()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-2-2e23aafacb95> in <module>()\n----> 1 C.cardinality()\n\n/home/release/Sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7211)()\n\nAttributeError: 'LinearCode' object has no attribute 'cardinality'\nsage: 'cardinality' in dir(C)\nTrue\nsage: hasattr(C, 'cardinality')\nFalse\n```\n\n\n**CC:**  @nathanncohen @simon-king-jena @nthiery @tscrim\n\n**Branch:** [709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)\n\n**Reviewer:** Nathann Cohen, Punarbasu Purkayastha, Travis Scrimshaw\n\n**Author:** Travis Scrimshaw, Punarbasu Purkayastha\n\nIssue created by migration from https://trac.sagemath.org/ticket/16644\n\n",
    "closed_at": "2014-07-28T14:10:01Z",
    "created_at": "2014-07-10T15:06:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LinearCode.cardinality category breakage",
    "type": "issue",
    "updated_at": "2014-08-01T02:28:42Z",
    "url": "https://github.com/sagemath/sage/issues/16644",
    "user": "https://github.com/ppurka"
}
```

```
sage: C = codes.HammingCode(3, GF(2))
sage: C.cardinality()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-2-2e23aafacb95> in <module>()
----> 1 C.cardinality()

/home/release/Sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7211)()

AttributeError: 'LinearCode' object has no attribute 'cardinality'
sage: 'cardinality' in dir(C)
True
sage: hasattr(C, 'cardinality')
False
```


**CC:**  @nathanncohen @simon-king-jena @nthiery @tscrim

**Branch:** [709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)

**Reviewer:** Nathann Cohen, Punarbasu Purkayastha, Travis Scrimshaw

**Author:** Travis Scrimshaw, Punarbasu Purkayastha

Issue created by migration from https://trac.sagemath.org/ticket/16644





---

archive/issue_comments_219561.json:
```json
{
    "body": "<a id='comment:1'></a>\n(the same happens with `c.cartesian_product` and `c.sum`, and probably others too... `:-/`)",
    "created_at": "2014-07-10T15:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219561",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
(the same happens with `c.cartesian_product` and `c.sum`, and probably others too... `:-/`)



---

archive/issue_comments_219562.json:
```json
{
    "body": "**Branch:** [u/ppurka/ticket/16644](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/16644)",
    "created_at": "2014-07-10T15:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219562",
    "user": "https://github.com/ppurka"
}
```

**Branch:** [u/ppurka/ticket/16644](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/16644)



---

archive/issue_comments_219563.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [@nathanncohen](#comment%3A1):\n> (the same happens with `c.cartesian_product` and `c.sum`, and probably others too... `:-/`)\n\nYikes! Where are all these methods coming from? They are not in any of the classes that `LinearCode` inherits from.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af3e48edde2c5c8200f80a4ba6e895efd629d223\">af3e48e</a></td><td><code>initial commit to enable thickness of edges in graph plots</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be6042dc470bb67dbc7746c16a10a9b154d9c63b\">be6042d</a></td><td><code>introduce thickness parameter in scatter_plot</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf\">fe12334</a></td><td><code>add cardinality() method to LinearCode</code></td></tr></table>\n",
    "created_at": "2014-07-10T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219563",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:3'></a>
Replying to [@nathanncohen](#comment%3A1):
> (the same happens with `c.cartesian_product` and `c.sum`, and probably others too... `:-/`)

Yikes! Where are all these methods coming from? They are not in any of the classes that `LinearCode` inherits from.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af3e48edde2c5c8200f80a4ba6e895efd629d223">af3e48e</a></td><td><code>initial commit to enable thickness of edges in graph plots</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be6042dc470bb67dbc7746c16a10a9b154d9c63b">be6042d</a></td><td><code>introduce thickness parameter in scatter_plot</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf">fe12334</a></td><td><code>add cardinality() method to LinearCode</code></td></tr></table>




---

archive/issue_comments_219564.json:
```json
{
    "body": "**Commit:** [fe1233458e4ae0308a02fc3e71c819533b060ecf](https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf)",
    "created_at": "2014-07-10T15:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219564",
    "user": "https://github.com/ppurka"
}
```

**Commit:** [fe1233458e4ae0308a02fc3e71c819533b060ecf](https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf)



---

archive/issue_comments_219565.json:
```json
{
    "body": "<a id='comment:4'></a>\n> Yikes! Where are all these methods coming from? They are not in any of the classes that `LinearCode` inherits from.\n\nDon't ask me, I always blame it on categories whatever happens.\n\nNathann",
    "created_at": "2014-07-10T15:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219565",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
> Yikes! Where are all these methods coming from? They are not in any of the classes that `LinearCode` inherits from.

Don't ask me, I always blame it on categories whatever happens.

Nathann



---

archive/issue_comments_219566.json:
```json
{
    "body": "**Changing commit** from \"[fe1233458e4ae0308a02fc3e71c819533b060ecf](https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf)\" to \"[4ccae66296a47a62daf12fc8a6662439e6183f35](https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35)\".",
    "created_at": "2014-07-10T15:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219566",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[fe1233458e4ae0308a02fc3e71c819533b060ecf](https://github.com/sagemath/sagetrac-mirror/commit/fe1233458e4ae0308a02fc3e71c819533b060ecf)" to "[4ccae66296a47a62daf12fc8a6662439e6183f35](https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35)".



---

archive/issue_comments_219567.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35\">4ccae66</a></td><td><code>add cardinality() method to LinearCode</code></td></tr></table>\n",
    "created_at": "2014-07-10T15:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219567",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35">4ccae66</a></td><td><code>add cardinality() method to LinearCode</code></td></tr></table>




---

archive/issue_comments_219568.json:
```json
{
    "body": "<a id='comment:6'></a>\nSorry, I need to sleep. I based previous commit on the wrong branch. Did a forced update now.",
    "created_at": "2014-07-10T15:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219568",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'></a>
Sorry, I need to sleep. I based previous commit on the wrong branch. Did a forced update now.



---

archive/issue_comments_219569.json:
```json
{
    "body": "<a id='comment:7'></a>\nOh, I see. WHen you will be awake: we had to write a LOT of code in the combinatorial design folders recently, and had queues of 5/6 ticket in `needs_review` depending on each other: we would have died if we had not added to every commit the ticket number at the beginning of the commit message. Otherwise you have no way to guess which commits belong to a given ticket.\n\nGood night ! `;-)`\n\nNathann",
    "created_at": "2014-07-10T15:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219569",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Oh, I see. WHen you will be awake: we had to write a LOT of code in the combinatorial design folders recently, and had queues of 5/6 ticket in `needs_review` depending on each other: we would have died if we had not added to every commit the ticket number at the beginning of the commit message. Otherwise you have no way to guess which commits belong to a given ticket.

Good night ! `;-)`

Nathann



---

archive/issue_comments_219570.json:
```json
{
    "body": "<a id='comment:8'></a>\nShould this be in `needs_review` ?\n\nNathann",
    "created_at": "2014-07-16T12:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219570",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Should this be in `needs_review` ?

Nathann



---

archive/issue_comments_219571.json:
```json
{
    "body": "**Author:** Punarbasu Purkayastha",
    "created_at": "2014-07-16T13:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219571",
    "user": "https://github.com/ppurka"
}
```

**Author:** Punarbasu Purkayastha



---

archive/issue_comments_219572.json:
```json
{
    "body": "<a id='comment:9'></a>\nYes, of course. Thanks. I think cardinality should definitely be implemented, but am not so clear about cartesian product and sum, and possibly a bunch of others.",
    "created_at": "2014-07-16T13:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219572",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:9'></a>
Yes, of course. Thanks. I think cardinality should definitely be implemented, but am not so clear about cartesian product and sum, and possibly a bunch of others.



---

archive/issue_events_149127.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2014-07-16T13:05:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149127"
}
```



---

archive/issue_events_149128.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-16T13:11:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149128"
}
```



---

archive/issue_events_149129.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-07-16T13:11:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149129"
}
```



---

archive/issue_comments_219573.json:
```json
{
    "body": "<a id='comment:10'></a>\n> Yes, of course. Thanks. I think cardinality should definitely be implemented, but am not so clear about cartesian product and sum, and possibly a bunch of others.\n\nWell, that's a different problem: why the hell are all those function half-inherited ? `T_T`\n\nNathann",
    "created_at": "2014-07-16T13:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219573",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
> Yes, of course. Thanks. I think cardinality should definitely be implemented, but am not so clear about cartesian product and sum, and possibly a bunch of others.

Well, that's a different problem: why the hell are all those function half-inherited ? `T_T`

Nathann



---

archive/issue_comments_219574.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2014-07-16T13:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219574",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_events_149130.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-16T17:08:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149130"
}
```



---

archive/issue_events_149131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-16T17:08:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149131"
}
```



---

archive/issue_comments_219575.json:
```json
{
    "body": "<a id='comment:11'></a>\nNicolas, can you explain to me why this is not working. And, more importantly. why do we get totally useless diagnostics for why it is not working?",
    "created_at": "2014-07-16T17:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219575",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
Nicolas, can you explain to me why this is not working. And, more importantly. why do we get totally useless diagnostics for why it is not working?



---

archive/issue_comments_219576.json:
```json
{
    "body": "**Changing author** from \"Punarbasu Purkayastha\" to \"\".",
    "created_at": "2014-07-16T17:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219576",
    "user": "https://github.com/vbraun"
}
```

**Changing author** from "Punarbasu Purkayastha" to "".



---

archive/issue_comments_219577.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,18 @@\n-`LinearCode.cardinality()` comes up in tab completion, but it is not actually there. Where does it come from? We do not need to worry any more since it will now come from the `LinearCode` class itself.\n+\n+```\n+sage: C = codes.HammingCode(3, GF(2))\n+sage: C.cardinality()\n+---------------------------------------------------------------------------\n+AttributeError                            Traceback (most recent call last)\n+<ipython-input-2-2e23aafacb95> in <module>()\n+----> 1 C.cardinality()\n+\n+/home/release/Sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7211)()\n+\n+AttributeError: 'LinearCode' object has no attribute 'cardinality'\n+sage: 'cardinality' in dir(C)\n+True\n+sage: hasattr(C, 'cardinality')\n+False\n+```\n+\n``````\n",
    "created_at": "2014-07-16T17:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219577",
    "user": "https://github.com/vbraun"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,18 @@
-`LinearCode.cardinality()` comes up in tab completion, but it is not actually there. Where does it come from? We do not need to worry any more since it will now come from the `LinearCode` class itself.
+
+```
+sage: C = codes.HammingCode(3, GF(2))
+sage: C.cardinality()
+---------------------------------------------------------------------------
+AttributeError                            Traceback (most recent call last)
+<ipython-input-2-2e23aafacb95> in <module>()
+----> 1 C.cardinality()
+
+/home/release/Sage/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7211)()
+
+AttributeError: 'LinearCode' object has no attribute 'cardinality'
+sage: 'cardinality' in dir(C)
+True
+sage: hasattr(C, 'cardinality')
+False
+```
+
``````




---

archive/issue_comments_219578.json:
```json
{
    "body": "**Changing reviewer** from \"Nathann Cohen\" to \"\".",
    "created_at": "2014-07-16T17:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219578",
    "user": "https://github.com/vbraun"
}
```

**Changing reviewer** from "Nathann Cohen" to "".



---

archive/issue_events_149132.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-16T17:08:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "rename": {
        "from": "Implement LinearCode.cardinality()",
        "to": "LinearCode.cardinality category breakage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149132"
}
```



---

archive/issue_comments_219579.json:
```json
{
    "body": "<a id='comment:13'></a>\nI believe it's because it's not a new style parent and it doesn't properly initialize its category:\n\n```python\nclass LinearCode(module.Module_old):\n    def __init__(self, gen_mat, d=None):\n        ParentWithGens.__init__(self, base_ring)\n```\nand in `Module_old`:\n\n```python\ndef category(self):\n    \"\"\"\n    Return the category to which this module belongs.\n    \"\"\"\n    # Defining a category method is deprecated for parents.\n    # Instead, the category should be specified in the constructor.\n    # See: http://sagetrac.org/sage_trac/wiki/CategoriesRoadMap\n    if self._is_category_initialized():\n        return Parent.category(self)\n    from sage.categories.modules import Modules\n    return Modules(self.base_ring())\n```",
    "created_at": "2014-07-16T17:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219579",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
I believe it's because it's not a new style parent and it doesn't properly initialize its category:

```python
class LinearCode(module.Module_old):
    def __init__(self, gen_mat, d=None):
        ParentWithGens.__init__(self, base_ring)
```
and in `Module_old`:

```python
def category(self):
    """
    Return the category to which this module belongs.
    """
    # Defining a category method is deprecated for parents.
    # Instead, the category should be specified in the constructor.
    # See: http://sagetrac.org/sage_trac/wiki/CategoriesRoadMap
    if self._is_category_initialized():
        return Parent.category(self)
    from sage.categories.modules import Modules
    return Modules(self.base_ring())
```



---

archive/issue_comments_219580.json:
```json
{
    "body": "<a id='comment:14'></a>\nThat doesn't explain why it half-works, nor is it an excuse for the total failure to provide a useful error message.",
    "created_at": "2014-07-18T14:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219580",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
That doesn't explain why it half-works, nor is it an excuse for the total failure to provide a useful error message.



---

archive/issue_comments_219581.json:
```json
{
    "body": "**Changing commit** from \"[4ccae66296a47a62daf12fc8a6662439e6183f35](https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35)\" to \"[b48b62702d0d4ff382111ad093ac80808aef6231](https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231)\".",
    "created_at": "2014-07-18T16:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219581",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[4ccae66296a47a62daf12fc8a6662439e6183f35](https://github.com/sagemath/sagetrac-mirror/commit/4ccae66296a47a62daf12fc8a6662439e6183f35)" to "[b48b62702d0d4ff382111ad093ac80808aef6231](https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231)".



---

archive/issue_comments_219582.json:
```json
{
    "body": "<a id='comment:15'></a>\nBecause it doesn't initialize its category, we have:\n\n```\nsage: C = codes.HammingCode(3, GF(2))\nsage: C.__class__.__mro__\n(sage.coding.linear_code.LinearCode,\n sage.modules.module.Module_old,\n sage.structure.parent_gens.ParentWithAdditiveAbelianGens,\n sage.structure.parent_gens.ParentWithGens,\n sage.structure.parent_base.ParentWithBase,\n sage.structure.parent_old.Parent,\n sage.structure.parent.Parent,\n sage.structure.category_object.CategoryObject,\n sage.structure.sage_object.SageObject,\n object)\n```\nI believe the `__getattr__` in `parent.pyx` is why it gets listed by tab completion, but because the method doesn't actually exist in the MRO, it can't call it. Simon or Nicolas could probably give a better explanation. IMO it's not worth it to try and contrive a \"proper\" error message, but instead put a note somewhere that this is a sign that the category framework is being abused.\n\nSo here's the branch which changes `LinearCode` to a new-style parent and all (non-long) tests pass in the coding folding. However because I don't know about codes, I can't implement an `_an_element_` for the test suite, nor do I know what the proper/best category is (i.e. are they finite dimensional modules? I'm guessing they are but IDK for sure). However this does fix the issue on this ticket.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231\">b48b627</a></td><td><code>Changed LinearCode into a new-style parent.</code></td></tr></table>\n",
    "created_at": "2014-07-18T16:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219582",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
Because it doesn't initialize its category, we have:

```
sage: C = codes.HammingCode(3, GF(2))
sage: C.__class__.__mro__
(sage.coding.linear_code.LinearCode,
 sage.modules.module.Module_old,
 sage.structure.parent_gens.ParentWithAdditiveAbelianGens,
 sage.structure.parent_gens.ParentWithGens,
 sage.structure.parent_base.ParentWithBase,
 sage.structure.parent_old.Parent,
 sage.structure.parent.Parent,
 sage.structure.category_object.CategoryObject,
 sage.structure.sage_object.SageObject,
 object)
```
I believe the `__getattr__` in `parent.pyx` is why it gets listed by tab completion, but because the method doesn't actually exist in the MRO, it can't call it. Simon or Nicolas could probably give a better explanation. IMO it's not worth it to try and contrive a "proper" error message, but instead put a note somewhere that this is a sign that the category framework is being abused.

So here's the branch which changes `LinearCode` to a new-style parent and all (non-long) tests pass in the coding folding. However because I don't know about codes, I can't implement an `_an_element_` for the test suite, nor do I know what the proper/best category is (i.e. are they finite dimensional modules? I'm guessing they are but IDK for sure). However this does fix the issue on this ticket.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231">b48b627</a></td><td><code>Changed LinearCode into a new-style parent.</code></td></tr></table>




---

archive/issue_comments_219583.json:
```json
{
    "body": "**Changing branch** from \"[u/ppurka/ticket/16644](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/16644)\" to \"[public/categories/new_parent_linear_codes-16644](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/new_parent_linear_codes-16644)\".",
    "created_at": "2014-07-18T16:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219583",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/ppurka/ticket/16644](https://github.com/sagemath/sagetrac-mirror/tree/u/ppurka/ticket/16644)" to "[public/categories/new_parent_linear_codes-16644](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/new_parent_linear_codes-16644)".



---

archive/issue_events_149133.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-18T16:23:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149133"
}
```



---

archive/issue_events_149134.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-18T16:23:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149134"
}
```



---

archive/issue_comments_219584.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@tscrim](#comment%3A15):\n> IMO it's not worth it to try and contrive a \"proper\" error message\n\nI suggest you read the history of this ticket again. Getting proper error messages is **crucial** for any programming framework.",
    "created_at": "2014-07-18T22:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219584",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Replying to [@tscrim](#comment%3A15):
> IMO it's not worth it to try and contrive a "proper" error message

I suggest you read the history of this ticket again. Getting proper error messages is **crucial** for any programming framework.



---

archive/issue_comments_219585.json:
```json
{
    "body": "<a id='comment:17'></a>\n@tscrim: there is still this problem with `element_class`. I have been able to get some other stuff working with your patch.\n\n```\nsage: C = codes.HammingCode(3, GF(2))                                           \nsage: C.cardinality()                                                           \n16\nsage: C.an_element()\n(1, 0, 0, 0, 0, 1, 1)\nsage: C2 = C.cartesian_product(C)\nsage: C2.an_element()\n((1, 0, 0, 0, 0, 1, 1), (1, 0, 0, 0, 0, 1, 1))\nsage: C.categories()\n[Category of vector spaces over Finite Field of size 2,\n Category of modules over Finite Field of size 2,\n Category of bimodules over Finite Field of size 2 on the left and Finite Field of size 2 on the right,\n Category of right modules over Finite Field of size 2,\n Category of left modules over Finite Field of size 2,\n Category of commutative additive groups,\n Category of additive groups,\n Category of additive inverse additive unital additive magmas,\n Category of commutative additive monoids,\n Category of additive monoids,\n Category of additive unital additive magmas,\n Category of commutative additive semigroups,\n Category of additive commutative additive magmas,\n Category of additive semigroups,\n Category of additive magmas,\n Category of sets,\n Category of sets with partial maps,\n Category of objects]\nsage: C.element_class()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-5-66b2e3babdf7> in <module>()\n----> 1 C.element_class()\n\n/home/punarbasu/Installations/sage-git/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7290)()\n\n/home/punarbasu/Installations/sage-git/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1687)()\n\nAttributeError: 'LinearCode_with_category' object has no attribute 'element_class'\n```\n\n\n**Edit**: Also implemented `C.zero()` so that `C.sum()` works.\n\n```\nsage: C.zero_element()\n(0, 0, 0, 0, 0, 0, 0)\nsage: C.sum(()) # indirect doctest\n(0, 0, 0, 0, 0, 0, 0)\n```\nSo, we just need to figure out where this `element_class` is coming from and fix that.",
    "created_at": "2014-07-19T08:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219585",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:17'></a>
@tscrim: there is still this problem with `element_class`. I have been able to get some other stuff working with your patch.

```
sage: C = codes.HammingCode(3, GF(2))                                           
sage: C.cardinality()                                                           
16
sage: C.an_element()
(1, 0, 0, 0, 0, 1, 1)
sage: C2 = C.cartesian_product(C)
sage: C2.an_element()
((1, 0, 0, 0, 0, 1, 1), (1, 0, 0, 0, 0, 1, 1))
sage: C.categories()
[Category of vector spaces over Finite Field of size 2,
 Category of modules over Finite Field of size 2,
 Category of bimodules over Finite Field of size 2 on the left and Finite Field of size 2 on the right,
 Category of right modules over Finite Field of size 2,
 Category of left modules over Finite Field of size 2,
 Category of commutative additive groups,
 Category of additive groups,
 Category of additive inverse additive unital additive magmas,
 Category of commutative additive monoids,
 Category of additive monoids,
 Category of additive unital additive magmas,
 Category of commutative additive semigroups,
 Category of additive commutative additive magmas,
 Category of additive semigroups,
 Category of additive magmas,
 Category of sets,
 Category of sets with partial maps,
 Category of objects]
sage: C.element_class()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-5-66b2e3babdf7> in <module>()
----> 1 C.element_class()

/home/punarbasu/Installations/sage-git/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7290)()

/home/punarbasu/Installations/sage-git/local/lib/python2.7/site-packages/sage/structure/misc.so in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1687)()

AttributeError: 'LinearCode_with_category' object has no attribute 'element_class'
```


**Edit**: Also implemented `C.zero()` so that `C.sum()` works.

```
sage: C.zero_element()
(0, 0, 0, 0, 0, 0, 0)
sage: C.sum(()) # indirect doctest
(0, 0, 0, 0, 0, 0, 0)
```
So, we just need to figure out where this `element_class` is coming from and fix that.



---

archive/issue_comments_219586.json:
```json
{
    "body": "**Changing commit** from \"[b48b62702d0d4ff382111ad093ac80808aef6231](https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231)\" to \"[eef3aaabca400ce0be8460f85f70eef38cfb8a28](https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28)\".",
    "created_at": "2014-07-19T08:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219586",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b48b62702d0d4ff382111ad093ac80808aef6231](https://github.com/sagemath/sagetrac-mirror/commit/b48b62702d0d4ff382111ad093ac80808aef6231)" to "[eef3aaabca400ce0be8460f85f70eef38cfb8a28](https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28)".



---

archive/issue_comments_219587.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/740bbd3326c77769ca6a431429cb130dc3418b47\">740bbd3</a></td><td><code>implement `_an_element_` for LinearCode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1fca7232257fec6988f72e525a3c6e2e408de63\">d1fca72</a></td><td><code>Implement LinearCode.cardinality()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28\">eef3aaa</a></td><td><code>implement LinearCode.zero()</code></td></tr></table>\n",
    "created_at": "2014-07-19T08:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219587",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/740bbd3326c77769ca6a431429cb130dc3418b47">740bbd3</a></td><td><code>implement `_an_element_` for LinearCode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1fca7232257fec6988f72e525a3c6e2e408de63">d1fca72</a></td><td><code>Implement LinearCode.cardinality()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28">eef3aaa</a></td><td><code>implement LinearCode.zero()</code></td></tr></table>




---

archive/issue_comments_219588.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978\">6013027</a></td><td><code>Fixed LinearCode a facade parent and so that it passes the test suite.</code></td></tr></table>\n",
    "created_at": "2014-07-19T17:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219588",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978">6013027</a></td><td><code>Fixed LinearCode a facade parent and so that it passes the test suite.</code></td></tr></table>




---

archive/issue_comments_219589.json:
```json
{
    "body": "**Changing commit** from \"[eef3aaabca400ce0be8460f85f70eef38cfb8a28](https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28)\" to \"[60130279bc91553f0bb8418cebd0597506eb0978](https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978)\".",
    "created_at": "2014-07-19T17:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219589",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[eef3aaabca400ce0be8460f85f70eef38cfb8a28](https://github.com/sagemath/sagetrac-mirror/commit/eef3aaabca400ce0be8460f85f70eef38cfb8a28)" to "[60130279bc91553f0bb8418cebd0597506eb0978](https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978)".



---

archive/issue_events_149135.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-19T17:27:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149135"
}
```



---

archive/issue_events_149136.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-19T17:27:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149136"
}
```



---

archive/issue_comments_219590.json:
```json
{
    "body": "**Reviewer:** Punarbasu Purkayastha, Travis Scrimshaw",
    "created_at": "2014-07-19T17:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219590",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Punarbasu Purkayastha, Travis Scrimshaw



---

archive/issue_comments_219591.json:
```json
{
    "body": "**Author:** Travis Scrimshaw, Punarbasu Purkayastha",
    "created_at": "2014-07-19T17:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219591",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw, Punarbasu Purkayastha



---

archive/issue_comments_219592.json:
```json
{
    "body": "<a id='comment:20'></a>\nIt comes from the category framework, although I believe it is there more for compatibility with old-style parents.\n\nI've made `LinearCode` into a facade parent (because I didn't want to deal with changing it over to have a proper element here...yes I'm being somewhat lazy), put it also in the category of `FiniteEnumeratedSets` (as such, we get `cardinality` for free), and made it so that it passes the `TestSuite`.",
    "created_at": "2014-07-19T17:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219592",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
It comes from the category framework, although I believe it is there more for compatibility with old-style parents.

I've made `LinearCode` into a facade parent (because I didn't want to deal with changing it over to have a proper element here...yes I'm being somewhat lazy), put it also in the category of `FiniteEnumeratedSets` (as such, we get `cardinality` for free), and made it so that it passes the `TestSuite`.



---

archive/issue_events_149137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T19:06:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149137"
}
```



---

archive/issue_events_149138.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T19:06:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149138"
}
```



---

archive/issue_comments_219593.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe real WTF here is not that LinearCode is misusing the category framework, but the utterly wrong and misleading error message that was produced. In Python, AttributeError means **you** need to implement that attribute but haven't. Nathan and Punarbasu are experienced developers, and if you manage to confuse them then I can guarantee your that there are 10 potential Sage developers that gave up before they posted anything on trac. If only a handful of people that have talked personally to Nicolas can work with the framework then this is going to kill Sage sooner or later. We need to be able to attract new developers, and hurdles like the one in this ticket will prevent that for sure.",
    "created_at": "2014-07-19T19:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219593",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
The real WTF here is not that LinearCode is misusing the category framework, but the utterly wrong and misleading error message that was produced. In Python, AttributeError means **you** need to implement that attribute but haven't. Nathan and Punarbasu are experienced developers, and if you manage to confuse them then I can guarantee your that there are 10 potential Sage developers that gave up before they posted anything on trac. If only a handful of people that have talked personally to Nicolas can work with the framework then this is going to kill Sage sooner or later. We need to be able to attract new developers, and hurdles like the one in this ticket will prevent that for sure.



---

archive/issue_comments_219594.json:
```json
{
    "body": "<a id='comment:22'></a>\n@tscrim: I think what vbraun brought up needs to be fixed in the category framework somewhere.\n\nOther than that, we can not depend on `cardinality` of the `FiniteEnumeratedSets`, even if it comes \"for free\". It comes at a huge cost because it generates all the elements of the linear code - it makes working with large linear codes difficult. We have a vector space structure here, so we can be much more efficient (which was my original patch in this ticket).\n\n```\nsage: C = codes.ReedSolomonCode(10, 7, GF(11))\nsage: %time C.cardinality()                                                                                             \nCPU times: user 8.14 s, sys: 60 ms, total: 8.2 s\nWall time: 8.1 s\n19487171\nsage: %time len(C)\nCPU times: user 0 ns, sys: 0 ns, total: 0 ns\nWall time: 62.9 \u00b5s\n19487171\n```",
    "created_at": "2014-07-20T16:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219594",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:22'></a>
@tscrim: I think what vbraun brought up needs to be fixed in the category framework somewhere.

Other than that, we can not depend on `cardinality` of the `FiniteEnumeratedSets`, even if it comes "for free". It comes at a huge cost because it generates all the elements of the linear code - it makes working with large linear codes difficult. We have a vector space structure here, so we can be much more efficient (which was my original patch in this ticket).

```
sage: C = codes.ReedSolomonCode(10, 7, GF(11))
sage: %time C.cardinality()                                                                                             
CPU times: user 8.14 s, sys: 60 ms, total: 8.2 s
Wall time: 8.1 s
19487171
sage: %time len(C)
CPU times: user 0 ns, sys: 0 ns, total: 0 ns
Wall time: 62.9 µs
19487171
```



---

archive/issue_comments_219595.json:
```json
{
    "body": "**Changing commit** from \"[60130279bc91553f0bb8418cebd0597506eb0978](https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978)\" to \"[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)\".",
    "created_at": "2014-07-23T01:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219595",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[60130279bc91553f0bb8418cebd0597506eb0978](https://github.com/sagemath/sagetrac-mirror/commit/60130279bc91553f0bb8418cebd0597506eb0978)" to "[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)".



---

archive/issue_comments_219596.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df0577f888b81177101f270547492441488f3d3\">8df0577</a></td><td><code>Merge branch 'public/categories/new_parent_linear_codes-16644' of trac.sagemath.org:sage into public/categories/new_parent_lienar_codes-16644</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235dd8e5dc2bcc356bff4f7bb51c80fc393284ff\">235dd8e</a></td><td><code>Added back in cardinality and made `__len__` an alias.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff\">709878e</a></td><td><code>Import cleanup of linear_code.py.</code></td></tr></table>\n",
    "created_at": "2014-07-23T01:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219596",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df0577f888b81177101f270547492441488f3d3">8df0577</a></td><td><code>Merge branch 'public/categories/new_parent_linear_codes-16644' of trac.sagemath.org:sage into public/categories/new_parent_lienar_codes-16644</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235dd8e5dc2bcc356bff4f7bb51c80fc393284ff">235dd8e</a></td><td><code>Added back in cardinality and made `__len__` an alias.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff">709878e</a></td><td><code>Import cleanup of linear_code.py.</code></td></tr></table>




---

archive/issue_events_149139.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-23T01:48:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149139"
}
```



---

archive/issue_events_149140.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-23T01:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149140"
}
```



---

archive/issue_comments_219597.json:
```json
{
    "body": "<a id='comment:24'></a>\n@vbraun I would argue that `AttributeError` is the correct error: the attribute should be there according to the category, but it is not because it is an old-style parent. I'd rather spend my time fixing the problem and educating people about categories rather than trying to come up with a different error message. This solves the issue in the ticket description and we shouldn't hold up this ticket -- the error message should be on a separate ticket.\n\n@nathanncohen You actually were right in [comment:4](#comment%3A4). I wonder if you're starting to understand categories. :P\n\n@ppurka I didn't look at/see the `__len__` method. I've changed that into `cardinality` and made `__len__` into an alias (so it will appear in the documentation).",
    "created_at": "2014-07-23T01:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219597",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
@vbraun I would argue that `AttributeError` is the correct error: the attribute should be there according to the category, but it is not because it is an old-style parent. I'd rather spend my time fixing the problem and educating people about categories rather than trying to come up with a different error message. This solves the issue in the ticket description and we shouldn't hold up this ticket -- the error message should be on a separate ticket.

@nathanncohen You actually were right in [comment:4](#comment%3A4). I wonder if you're starting to understand categories. :P

@ppurka I didn't look at/see the `__len__` method. I've changed that into `cardinality` and made `__len__` into an alias (so it will appear in the documentation).



---

archive/issue_events_149141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-23T02:29:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149141"
}
```



---

archive/issue_events_149142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-23T02:29:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149142"
}
```



---

archive/issue_comments_219598.json:
```json
{
    "body": "<a id='comment:25'></a>\nGiving correct diagnostics **is** a way of educating people about categories, and arguably the best way since you can't be looking over everybody's shoulder all the time. I just caught this ticket by chance, and you would have never noticed.",
    "created_at": "2014-07-23T02:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219598",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
Giving correct diagnostics **is** a way of educating people about categories, and arguably the best way since you can't be looking over everybody's shoulder all the time. I just caught this ticket by chance, and you would have never noticed.



---

archive/issue_comments_219599.json:
```json
{
    "body": "<a id='comment:26'></a>\n@vbraun I think we should open a different ticket for fixing the categories. In this ticket the `LinearCode` class is changed to use the new category framework. I will have to check the latest changes, but they seem quite ok at first glance.\n\n\nI will open a different ticket for addressing the error messages given by the categories. Does this sound reasonable to you?",
    "created_at": "2014-07-23T03:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219599",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:26'></a>
@vbraun I think we should open a different ticket for fixing the categories. In this ticket the `LinearCode` class is changed to use the new category framework. I will have to check the latest changes, but they seem quite ok at first glance.


I will open a different ticket for addressing the error messages given by the categories. Does this sound reasonable to you?



---

archive/issue_comments_219600.json:
```json
{
    "body": "<a id='comment:27'></a>\nFine with me...",
    "created_at": "2014-07-23T04:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219600",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>
Fine with me...



---

archive/issue_events_149143.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-23T06:29:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149143"
}
```



---

archive/issue_events_149144.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-07-23T06:29:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149144"
}
```



---

archive/issue_comments_219601.json:
```json
{
    "body": "<a id='comment:29'></a>\n> @nathanncohen You actually were right in [comment:4](#comment%3A4). I wonder if you're starting to understand categories. :P\n\nWe are old ennemies now.\n\nNathann",
    "created_at": "2014-07-23T08:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219601",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>
> @nathanncohen You actually were right in [comment:4](#comment%3A4). I wonder if you're starting to understand categories. :P

We are old ennemies now.

Nathann



---

archive/issue_events_149145.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2014-07-23T16:49:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149145"
}
```



---

archive/issue_events_149146.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2014-07-23T16:49:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149146"
}
```



---

archive/issue_comments_219602.json:
```json
{
    "body": "**Changing reviewer** from \"Punarbasu Purkayastha, Travis Scrimshaw\" to \"Nathann Cohen, Punarbasu Purkayastha, Travis Scrimshaw\".",
    "created_at": "2014-07-23T16:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219602",
    "user": "https://github.com/ppurka"
}
```

**Changing reviewer** from "Punarbasu Purkayastha, Travis Scrimshaw" to "Nathann Cohen, Punarbasu Purkayastha, Travis Scrimshaw".



---

archive/issue_comments_219603.json:
```json
{
    "body": "<a id='comment:30'></a>\nThis looks good to me. It passes all sage doctests and fails in 3 places which are due to gap (see #16660).",
    "created_at": "2014-07-23T16:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219603",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:30'></a>
This looks good to me. It passes all sage doctests and fails in 3 places which are due to gap (see #16660).



---

archive/issue_comments_219604.json:
```json
{
    "body": "**Dependencies:** #16660",
    "created_at": "2014-07-23T17:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219604",
    "user": "https://github.com/vbraun"
}
```

**Dependencies:** #16660



---

archive/issue_comments_219605.json:
```json
{
    "body": "<a id='comment:32'></a>\nI get the errors of #16660 with `develop`, so it's not a dependency IMO.",
    "created_at": "2014-07-27T22:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219605",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
I get the errors of #16660 with `develop`, so it's not a dependency IMO.



---

archive/issue_comments_219606.json:
```json
{
    "body": "**Changing dependencies** from \"#16660\" to \"\".",
    "created_at": "2014-07-27T22:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219606",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#16660" to "".



---

archive/issue_comments_219607.json:
```json
{
    "body": "**Changing branch** from \"[public/categories/new_parent_linear_codes-16644](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/new_parent_linear_codes-16644)\" to \"[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)\".",
    "created_at": "2014-07-28T14:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219607",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/categories/new_parent_linear_codes-16644](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/new_parent_linear_codes-16644)" to "[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)".



---

archive/issue_events_149147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-28T14:10:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149147"
}
```



---

archive/issue_events_149148.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "037df68214c8870e3e655e1a240c69e820636cb3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-07-28T14:10:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16644#event-149148"
}
```



---

archive/issue_comments_219608.json:
```json
{
    "body": "<a id='comment:34'></a>\nFollowup at #16707",
    "created_at": "2014-08-01T02:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219608",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>
Followup at #16707



---

archive/issue_comments_219609.json:
```json
{
    "body": "**Changing commit** from \"[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)\" to \"\".",
    "created_at": "2014-08-01T02:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16644",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16644#issuecomment-219609",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[709878e72911d2630a021ed0485c4d7a099abaff](https://github.com/sagemath/sagetrac-mirror/commit/709878e72911d2630a021ed0485c4d7a099abaff)" to "".
