# Issue 16409: 2to3 refactoring tool has warnings for some code

archive/issues_016172.json:
```json
{
    "body": "While running the Python 2to3 on the Sage code base some warning are emitted:\n* fixer= absolute_import\n\n```\n### In file sage/misc/sage_timeit.py ###\nLine 199: absolute and local imports together\n```\n\n* fixer= map\n\n```\n### In file sage/geometry/polyhedron/constructor.py ###\nLine 364: You should use a for loop here\n### In file sage/geometry/polyhedron/ppl_lattice_polytope.py ###\nLine 1078: You should use a for loop here\n```\n\n* fixer= next\n\n```\n### In file sage/combinat/integer_list.py ###\nLine 322: Calls to builtin next() possibly shadowed by global binding\n```\n\n* fixer= operator\n\n```\n### In file sage/combinat/sf/sfa.py ###\nLine 3520: You should use 'operator.mul(lcm(pair), times=gcd(pair))' here.\n### In file sage/combinat/species/generating_series.py ###\nLine 724: You should use 'operator.mul(lcm(pair), times=gcd(pair))' here.\n```\n\n\n\nCC:  @tscrim @jdemeyer @jhpalmieri\n\nKeywords: python3\n\nBranch/Commit: ba2fdb126734c6c7b603e2d051abc0e96b93bf22\n\nReviewer: Andr\u00e9 Apitzsch\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16409\n\n",
    "closed_at": "2017-05-27T23:42:17Z",
    "created_at": "2014-05-29T09:06:35Z",
    "labels": [
        "component: python3",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "2to3 refactoring tool has warnings for some code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16409",
    "user": "https://github.com/wluebbe"
}
```
While running the Python 2to3 on the Sage code base some warning are emitted:
* fixer= absolute_import

```
### In file sage/misc/sage_timeit.py ###
Line 199: absolute and local imports together
```

* fixer= map

```
### In file sage/geometry/polyhedron/constructor.py ###
Line 364: You should use a for loop here
### In file sage/geometry/polyhedron/ppl_lattice_polytope.py ###
Line 1078: You should use a for loop here
```

* fixer= next

```
### In file sage/combinat/integer_list.py ###
Line 322: Calls to builtin next() possibly shadowed by global binding
```

* fixer= operator

```
### In file sage/combinat/sf/sfa.py ###
Line 3520: You should use 'operator.mul(lcm(pair), times=gcd(pair))' here.
### In file sage/combinat/species/generating_series.py ###
Line 724: You should use 'operator.mul(lcm(pair), times=gcd(pair))' here.
```



CC:  @tscrim @jdemeyer @jhpalmieri

Keywords: python3

Branch/Commit: ba2fdb126734c6c7b603e2d051abc0e96b93bf22

Reviewer: André Apitzsch

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16409





---

archive/issue_comments_224950.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2014-05-29T12:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224950",
    "user": "https://github.com/wluebbe"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_224951.json:
```json
{
    "body": "<a id='comment:1'></a>* I fixed \"absolute_import\" and \"map\" cases. It tests OK.\n* I will check the \"operator\" case later. \n\nThe redefinition of `next()` in `sage/combinat/integer_list.py` has the text `INTERNAL FUNCTION! DO NOT USE DIRECTLY!`.\nAt the top of the module it says\n\n```\nIMPORTANT NOTE (2009/02):\nThe internal functions in this file will be deprecated soon.\nPlease only use them through :class:`IntegerListsLex`.\n```\nTravis, what would you suggest? - The deprecation has not yet happened, but I do not find it obvious how to fix ...\n\n---\nNew commits:",
    "created_at": "2014-05-29T12:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224951",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:1'></a>* I fixed "absolute_import" and "map" cases. It tests OK.
* I will check the "operator" case later. 

The redefinition of `next()` in `sage/combinat/integer_list.py` has the text `INTERNAL FUNCTION! DO NOT USE DIRECTLY!`.
At the top of the module it says

```
IMPORTANT NOTE (2009/02):
The internal functions in this file will be deprecated soon.
Please only use them through :class:`IntegerListsLex`.
```
Travis, what would you suggest? - The deprecation has not yet happened, but I do not find it obvious how to fix ...

---
New commits:



---

archive/issue_comments_224952.json:
```json
{
    "body": "<a id='comment:2'></a>Short-term solution would be to rename `next` to `next_object` or something like this (it's also at least used in `combinat/integer_vector.py`). The true deprecation solution is going to be much harder (I can try to do this if you want, but it would take a lot longer to do).",
    "created_at": "2014-05-29T16:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224952",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>Short-term solution would be to rename `next` to `next_object` or something like this (it's also at least used in `combinat/integer_vector.py`). The true deprecation solution is going to be much harder (I can try to do this if you want, but it would take a lot longer to do).



---

archive/issue_comments_224953.json:
```json
{
    "body": "<a id='comment:3'></a>But isn't {{{next()}} an element if the public API? So renaming would be no option.\n\nI'm currently thinking it would be best to ignore this warning now.",
    "created_at": "2014-05-29T18:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224953",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:3'></a>But isn't {{{next()}} an element if the public API? So renaming would be no option.

I'm currently thinking it would be best to ignore this warning now.



---

archive/issue_comments_224954.json:
```json
{
    "body": "<a id='comment:4'></a>It's not in the public (Sage) namespace, so we can rename it without having to deprecate it. However if you think it's fine to just ignore it, then that's fine (and I'll do the refactoring later this year).",
    "created_at": "2014-05-29T19:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224954",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>It's not in the public (Sage) namespace, so we can rename it without having to deprecate it. However if you think it's fine to just ignore it, then that's fine (and I'll do the refactoring later this year).



---

archive/issue_events_048297.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16409#event-48297"
}
```



---

archive/issue_comments_224955.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2016-07-06T13:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224955",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_224956.json:
```json
{
    "body": "Changing component from build to python3.",
    "created_at": "2016-08-30T18:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224956",
    "user": "https://github.com/fchapoton"
}
```

Changing component from build to python3.



---

archive/issue_events_048298.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-11T19:36:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16409#event-48298"
}
```



---

archive/issue_events_048299.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-11T19:36:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16409#event-48299"
}
```



---

archive/issue_comments_224957.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-05-11T19:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224957",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_224958.json:
```json
{
    "body": "<a id='comment:8'></a>only the \"operator\" fixer issue still makes (some) sense.\n\n---\nNew commits:",
    "created_at": "2017-05-11T19:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224958",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>only the "operator" fixer issue still makes (some) sense.

---
New commits:



---

archive/issue_comments_224959.json:
```json
{
    "body": "<a id='comment:9'></a>bot is essentially green. Should be an easy review, I think",
    "created_at": "2017-05-23T20:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224959",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>bot is essentially green. Should be an easy review, I think



---

archive/issue_comments_224960.json:
```json
{
    "body": "<a id='comment:10'></a>ping ?",
    "created_at": "2017-05-27T09:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224960",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>ping ?



---

archive/issue_comments_224961.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-27T09:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224961",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_224962.json:
```json
{
    "body": "<a id='comment:11'></a>LGTM.",
    "created_at": "2017-05-27T09:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224962",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:11'></a>LGTM.



---

archive/issue_comments_224963.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-27T23:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16409#issuecomment-224963",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048300.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-27T23:42:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16409",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16409#event-48300"
}
```
