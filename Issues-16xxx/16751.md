# Issue 16751: Singular build fail OSX109

archive/issues_016514.json:
```json
{
    "body": "\n\n**CC:**  jkeitel @kiwifb @jdemeyer\n\n**Keywords:** FLINT MacOS\n\n**Branch/Commit:** [fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)\n\n**Reviewer:** Jan Keitel, Leif Leonhardy\n\n**Author:** Volker Braun\n\nIssue created by migration from https://trac.sagemath.org/ticket/16751\n\n",
    "closed_at": "2014-08-04T13:46:32Z",
    "created_at": "2014-08-02T12:21:10Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Singular build fail OSX109",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16751",
    "user": "https://github.com/vbraun"
}
```


**CC:**  jkeitel @kiwifb @jdemeyer

**Keywords:** FLINT MacOS

**Branch/Commit:** [fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)

**Reviewer:** Jan Keitel, Leif Leonhardy

**Author:** Volker Braun

Issue created by migration from https://trac.sagemath.org/ticket/16751





---

archive/issue_comments_221796.json:
```json
{
    "body": "<a id='comment:1'></a>\nAs reported at https://groups.google.com/d/msg/sage-release/1CFpQblf8FE/YLr4t2Mw7mMJ",
    "created_at": "2014-08-02T12:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221796",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
As reported at https://groups.google.com/d/msg/sage-release/1CFpQblf8FE/YLr4t2Mw7mMJ



---

archive/issue_events_150140.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-02T12:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "component: packages: standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150140"
}
```



---

archive/issue_events_150141.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-02T12:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150141"
}
```



---

archive/issue_events_150142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-02T12:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150142"
}
```



---

archive/issue_comments_221797.json:
```json
{
    "body": "**Branch:** [u/vbraun/singular_build_fail_osx109](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/singular_build_fail_osx109)",
    "created_at": "2014-08-02T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221797",
    "user": "https://github.com/vbraun"
}
```

**Branch:** [u/vbraun/singular_build_fail_osx109](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/singular_build_fail_osx109)



---

archive/issue_comments_221798.json:
```json
{
    "body": "<a id='comment:4'></a>\nThere was a `--without-flint` in the libfac configuration, that doesn't sound right.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618\">d5b8fa6</a></td><td><code>remove stray without-flint</code></td></tr></table>\n",
    "created_at": "2014-08-02T12:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221798",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
There was a `--without-flint` in the libfac configuration, that doesn't sound right.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618">d5b8fa6</a></td><td><code>remove stray without-flint</code></td></tr></table>




---

archive/issue_comments_221799.json:
```json
{
    "body": "**Commit:** [d5b8fa660cb0aafef769c257a575e547bbb1b618](https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618)",
    "created_at": "2014-08-02T12:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221799",
    "user": "https://github.com/vbraun"
}
```

**Commit:** [d5b8fa660cb0aafef769c257a575e547bbb1b618](https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618)



---

archive/issue_comments_221800.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi Volker,\n\nthat alone doesn't work yet. Wasn't Francois on the right track? The Singular config.log keeps saying\n\n```\n/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required\n/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required\n```\n\nThe whole (new) config.log file is here: http://wwwth.mpp.mpg.de/members/jkeitel/config2.log",
    "created_at": "2014-08-02T12:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221800",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:5'></a>
Hi Volker,

that alone doesn't work yet. Wasn't Francois on the right track? The Singular config.log keeps saying

```
/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required
/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required
```

The whole (new) config.log file is here: http://wwwth.mpp.mpg.de/members/jkeitel/config2.log



---

archive/issue_comments_221801.json:
```json
{
    "body": "**Changing commit** from \"[d5b8fa660cb0aafef769c257a575e547bbb1b618](https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618)\" to \"[fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)\".",
    "created_at": "2014-08-02T14:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221801",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d5b8fa660cb0aafef769c257a575e547bbb1b618](https://github.com/sagemath/sagetrac-mirror/commit/d5b8fa660cb0aafef769c257a575e547bbb1b618)" to "[fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)".



---

archive/issue_comments_221802.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2\">fa75ea6</a></td><td><code>Do not add /usr/local/{lib,include} to paths</code></td></tr></table>\n",
    "created_at": "2014-08-02T14:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2">fa75ea6</a></td><td><code>Do not add /usr/local/{lib,include} to paths</code></td></tr></table>




---

archive/issue_events_150143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-02T14:07:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150143"
}
```



---

archive/issue_comments_221803.json:
```json
{
    "body": "<a id='comment:7'></a>\nYes, looking at the configure its pretty clear that this is bad. New commit should fix it. This is gone in Singular-4 as far as I can tell.",
    "created_at": "2014-08-02T14:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221803",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
Yes, looking at the configure its pretty clear that this is bad. New commit should fix it. This is gone in Singular-4 as far as I can tell.



---

archive/issue_comments_221804.json:
```json
{
    "body": "<a id='comment:8'></a>\nReposting here, since apparently G00gle doesn't like it (meanwhile tried twice):\n\n```\nJan Keitel wrote:\n> Okay, found them:\n>\n> gmp: 4.3.1\n> mpfr: 2.4.1\n> mpc: 0.8.1\n\nThese shouldn't get picked up (in this case, only the header files matter anyway),\nsince $SAGE_LOCAL/{include,lib} come first in the -I and -L directives:\n\nconfigure:8898: gcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib -L/usr/local/lib conftest.c -lntl -lgmp -lreadline -ltermcap -lm -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir >&5\nIn file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,\n                 from conftest.c:94:\n/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required\n/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required\nconfigure:8898: $? = 1\n\n\nIt would be interesting to see GCC's verbose output (in particular, the list of\ninclude folders) as well as the preprocessed source of that conftest.c, but I\nguess it's not that easy to add the appropriate flags there.\n\n\n> Is there a way to force the sage installation not to use the globally\n> installed versions?\n\nIt shouldn't at all.  You could move or remove them temporarily though.\n\n```",
    "created_at": "2014-08-02T14:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221804",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
Reposting here, since apparently G00gle doesn't like it (meanwhile tried twice):

```
Jan Keitel wrote:
> Okay, found them:
>
> gmp: 4.3.1
> mpfr: 2.4.1
> mpc: 0.8.1

These shouldn't get picked up (in this case, only the header files matter anyway),
since $SAGE_LOCAL/{include,lib} come first in the -I and -L directives:

configure:8898: gcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib -L/usr/local/lib conftest.c -lntl -lgmp -lreadline -ltermcap -lm -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir >&5
In file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,
                 from conftest.c:94:
/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required
/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required
configure:8898: $? = 1


It would be interesting to see GCC's verbose output (in particular, the list of
include folders) as well as the preprocessed source of that conftest.c, but I
guess it's not that easy to add the appropriate flags there.


> Is there a way to force the sage installation not to use the globally
> installed versions?

It shouldn't at all.  You could move or remove them temporarily though.

```



---

archive/issue_comments_221805.json:
```json
{
    "body": "<a id='comment:9'></a>\nWell, if there's any other information that I can provide, please let me know. In the meantime I've pulled the updated branch and am compiling again. So far it's looking good.",
    "created_at": "2014-08-02T14:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221805",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:9'></a>
Well, if there's any other information that I can provide, please let me know. In the meantime I've pulled the updated branch and am compiling again. So far it's looking good.



---

archive/issue_comments_221806.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jkeitel](#comment%3A9):\n> Well, if there's any other information that I can provide, please let me know. In the meantime I've pulled the updated branch and am compiling again. So far it's looking good.\n\n\nProvided Volker's patch solves the issue, probably not worth the effort.\n\nOtherwise I'd say it's a compiler bug, if we can trust what's in `config.log` (i.e., the shown command line leading to the failure).",
    "created_at": "2014-08-02T14:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221806",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Replying to [jkeitel](#comment%3A9):
> Well, if there's any other information that I can provide, please let me know. In the meantime I've pulled the updated branch and am compiling again. So far it's looking good.


Provided Volker's patch solves the issue, probably not worth the effort.

Otherwise I'd say it's a compiler bug, if we can trust what's in `config.log` (i.e., the shown command line leading to the failure).



---

archive/issue_comments_221807.json:
```json
{
    "body": "<a id='comment:11'></a>\nYep, it works. Thank you!\n\nI'd like to give this a positive review, but I don't think I'm the right guy to do that, because I can't tell whether it breaks something else. Francois, leif? ;-)",
    "created_at": "2014-08-02T14:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221807",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:11'></a>
Yep, it works. Thank you!

I'd like to give this a positive review, but I don't think I'm the right guy to do that, because I can't tell whether it breaks something else. Francois, leif? ;-)



---

archive/issue_comments_221808.json:
```json
{
    "body": "**Author:** Volker Braun",
    "created_at": "2014-08-02T15:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221808",
    "user": "https://github.com/nexttime"
}
```

**Author:** Volker Braun



---

archive/issue_events_150144.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2014-08-02T15:16:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150144"
}
```



---

archive/issue_events_150145.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2014-08-02T15:16:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150145"
}
```



---

archive/issue_comments_221809.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jkeitel](#comment%3A11):\n> I'd like to give this a positive review, but I don't think I'm the right guy to do that, because I can't tell whether it breaks something else. Francois, leif? ;-)\n\n\nIn theory at least, the patch could of course break things on other systems (where pieces not shipped with Sage are located in `/usr/local/`, and in case that's not searched by default), but there are easy work-arounds for that case, and I think that'd be for another ticket if someone gets hit.  (Probably the buildbots will also tell.)\n\nI still don't get why apparently `/usr/local/include/gmp.h` gets included although `-I${SAGE_LOCAL}/include` precedes `-I/usr/local/include`, according to `config.log`...",
    "created_at": "2014-08-02T15:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221809",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:12'></a>
Replying to [jkeitel](#comment%3A11):
> I'd like to give this a positive review, but I don't think I'm the right guy to do that, because I can't tell whether it breaks something else. Francois, leif? ;-)


In theory at least, the patch could of course break things on other systems (where pieces not shipped with Sage are located in `/usr/local/`, and in case that's not searched by default), but there are easy work-arounds for that case, and I think that'd be for another ticket if someone gets hit.  (Probably the buildbots will also tell.)

I still don't get why apparently `/usr/local/include/gmp.h` gets included although `-I${SAGE_LOCAL}/include` precedes `-I/usr/local/include`, according to `config.log`...



---

archive/issue_comments_221810.json:
```json
{
    "body": "**Reviewer:** Jan Keitel, Leif Leonhardy",
    "created_at": "2014-08-02T15:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221810",
    "user": "https://github.com/nexttime"
}
```

**Reviewer:** Jan Keitel, Leif Leonhardy



---

archive/issue_comments_221811.json:
```json
{
    "body": "Failing `configure` test (checking for FLINT).",
    "created_at": "2014-08-02T15:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221811",
    "user": "https://github.com/nexttime"
}
```

Failing `configure` test (checking for FLINT).



---

archive/attachments_020574.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "conftest.c",
    "asset_url": "tarball://root/attachments/some-uuid/ticket16751/conftest.c",
    "created_at": "2014-08-02T15:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.c",
    "user": "https://github.com/nexttime"
}
```



---

archive/issue_comments_221812.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [leif](#comment%3A12):\n> I still don't get why apparently `/usr/local/include/gmp.h` gets included although `-I${SAGE_LOCAL}/include` precedes `-I/usr/local/include`, according to `config.log`...\n\n\nJan, you may try whether\n\n```sh\ngcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib  -L/usr/local/lib conftest.c -lntl -lomalloc_ndebug -lomalloc -lsingfac -lsingcf -lgmp -lreadline -ltermcap -lm   -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir\n```\nor simply\n\n```sh\ngcc -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c\n```\nalso fails for you, in a Sage subshell (`./sage --sh`).\n\nI've attached the [attachment:conftest.c corresponding conftest.c].",
    "created_at": "2014-08-02T15:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221812",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:13'></a>
Replying to [leif](#comment%3A12):
> I still don't get why apparently `/usr/local/include/gmp.h` gets included although `-I${SAGE_LOCAL}/include` precedes `-I/usr/local/include`, according to `config.log`...


Jan, you may try whether

```sh
gcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib  -L/usr/local/lib conftest.c -lntl -lomalloc_ndebug -lomalloc -lsingfac -lsingcf -lgmp -lreadline -ltermcap -lm   -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir
```
or simply

```sh
gcc -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c
```
also fails for you, in a Sage subshell (`./sage --sh`).

I've attached the [attachment:conftest.c corresponding conftest.c].



---

archive/issue_comments_221813.json:
```json
{
    "body": "<a id='comment:14'></a>\nYep, they both do:\n\n```\n(sage-sh) kabel@Aloiss-MacBook-Air-2:sage$ gcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib  -L/usr/local/lib conftest.c -lntl -lomalloc_ndebug -lomalloc -lsingfac -lsingcf -lgmp -lreadline -ltermcap -lm   -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir\nIn file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,\n                 from conftest.c:99:\n/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required\n/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required\n```\n\n```\nkabel@Aloiss-MacBook-Air-2:sage$ gcc -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c\nIn file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,\n                 from conftest.c:99:\n/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required\n/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required\n```",
    "created_at": "2014-08-02T15:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221813",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:14'></a>
Yep, they both do:

```
(sage-sh) kabel@Aloiss-MacBook-Air-2:sage$ gcc -o conftest -O2 -g  -fPIC -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include -I/Users/kabel/sage/sage/local/include  -I/usr/local/include -L/Users/kabel/sage/sage/local/lib -L/Users/kabel/sage/sage/local/lib  -L/usr/local/lib conftest.c -lntl -lomalloc_ndebug -lomalloc -lsingfac -lsingcf -lgmp -lreadline -ltermcap -lm   -L/Users/kabel/sage/sage/local/lib -lflint -lmpfr -lmpir
In file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,
                 from conftest.c:99:
/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required
/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required
```

```
kabel@Aloiss-MacBook-Air-2:sage$ gcc -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c
In file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,
                 from conftest.c:99:
/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required
/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required
```



---

archive/issue_comments_221814.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jkeitel](#comment%3A14):\n> Yep, they both do.\n\n\nOuch.  Could you paste the output of\n\n```sh\ngcc -v -save-temps -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c\n```\nand attach the generated `conftest.i`?",
    "created_at": "2014-08-02T16:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221814",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
Replying to [jkeitel](#comment%3A14):
> Yep, they both do.


Ouch.  Could you paste the output of

```sh
gcc -v -save-temps -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c
```
and attach the generated `conftest.i`?



---

archive/attachments_020575.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "conftest.i",
    "asset_url": "tarball://root/attachments/some-uuid/ticket16751/conftest.i",
    "created_at": "2014-08-02T16:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.i",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```



---

archive/issue_comments_221815.json:
```json
{
    "body": "",
    "created_at": "2014-08-02T16:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221815",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```





---

archive/issue_comments_221816.json:
```json
{
    "body": "<a id='comment:16'></a>\nSure:\n\n```\n(sage-sh) kabel@Aloiss-MacBook-Air-2:sage$ gcc -v -save-temps -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c\nUsing built-in specs.\nCOLLECT_GCC=gcc\nTarget: x86_64-apple-darwin13.3.0\nConfigured with: ../src/configure --prefix=/Users/kabel/sage/sage/local --with-local-prefix=/Users/kabel/sage/sage/local --with-gmp=/Users/kabel/sage/sage/local --with-mpfr=/Users/kabel/sage/sage/local --with-mpc=/Users/kabel/sage/sage/local --with-system-zlib --disable-multilib --disable-nls  \nThread model: posix\ngcc version 4.7.3 (GCC) \nCOLLECT_GCC_OPTIONS='-mmacosx-version-min=10.9' '-v' '-save-temps' '-I' '/Users/kabel/sage/sage/local/include/flint' '-I' '/Users/kabel/sage/sage/local/include' '-I' '/usr/local/include' '-c' '-mtune=core2'\n /Users/kabel/sage/sage/local/libexec/gcc/x86_64-apple-darwin13.3.0/4.7.3/cc1 -E -quiet -v -I /Users/kabel/sage/sage/local/include/flint -I /Users/kabel/sage/sage/local/include -I /usr/local/include -D__DYNAMIC__ conftest.c -fPIC -mmacosx-version-min=10.9 -mtune=core2 -fpch-preprocess -o conftest.i\nignoring nonexistent directory \"/Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/../../../../x86_64-apple-darwin13.3.0/include\"\nignoring duplicate directory \"/Users/kabel/sage/sage/local/include\"\n  as it is a non-system directory that duplicates a system directory\nignoring duplicate directory \"/Users/kabel/sage/sage/local/include\"\n  as it is a non-system directory that duplicates a system directory\n#include \"...\" search starts here:\n#include <...> search starts here:\n /Users/kabel/sage/sage/local/include/flint\n /usr/local/include\n /Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/include\n /Users/kabel/sage/sage/local/include\n /Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/include-fixed\n /usr/include\n /System/Library/Frameworks\n /Library/Frameworks\nEnd of search list.\nIn file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,\n                 from conftest.c:99:\n/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required\n/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required\n```",
    "created_at": "2014-08-02T16:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221816",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:16'></a>
Sure:

```
(sage-sh) kabel@Aloiss-MacBook-Air-2:sage$ gcc -v -save-temps -I/Users/kabel/sage/sage/local/include/flint -I/Users/kabel/sage/sage/local/include -I/usr/local/include -c conftest.c
Using built-in specs.
COLLECT_GCC=gcc
Target: x86_64-apple-darwin13.3.0
Configured with: ../src/configure --prefix=/Users/kabel/sage/sage/local --with-local-prefix=/Users/kabel/sage/sage/local --with-gmp=/Users/kabel/sage/sage/local --with-mpfr=/Users/kabel/sage/sage/local --with-mpc=/Users/kabel/sage/sage/local --with-system-zlib --disable-multilib --disable-nls  
Thread model: posix
gcc version 4.7.3 (GCC) 
COLLECT_GCC_OPTIONS='-mmacosx-version-min=10.9' '-v' '-save-temps' '-I' '/Users/kabel/sage/sage/local/include/flint' '-I' '/Users/kabel/sage/sage/local/include' '-I' '/usr/local/include' '-c' '-mtune=core2'
 /Users/kabel/sage/sage/local/libexec/gcc/x86_64-apple-darwin13.3.0/4.7.3/cc1 -E -quiet -v -I /Users/kabel/sage/sage/local/include/flint -I /Users/kabel/sage/sage/local/include -I /usr/local/include -D__DYNAMIC__ conftest.c -fPIC -mmacosx-version-min=10.9 -mtune=core2 -fpch-preprocess -o conftest.i
ignoring nonexistent directory "/Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/../../../../x86_64-apple-darwin13.3.0/include"
ignoring duplicate directory "/Users/kabel/sage/sage/local/include"
  as it is a non-system directory that duplicates a system directory
ignoring duplicate directory "/Users/kabel/sage/sage/local/include"
  as it is a non-system directory that duplicates a system directory
#include "..." search starts here:
#include <...> search starts here:
 /Users/kabel/sage/sage/local/include/flint
 /usr/local/include
 /Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/include
 /Users/kabel/sage/sage/local/include
 /Users/kabel/sage/sage/local/lib/gcc/x86_64-apple-darwin13.3.0/4.7.3/include-fixed
 /usr/include
 /System/Library/Frameworks
 /Library/Frameworks
End of search list.
In file included from /Users/kabel/sage/sage/local/include/flint/fmpz.h:38:0,
                 from conftest.c:99:
/Users/kabel/sage/sage/local/include/flint/flint.h:74:2: error: #error GMP 5.0.0 or MPIR 2.6.0 or later are required
/Users/kabel/sage/sage/local/include/flint/flint.h:78:2: error: #error MPFR 3.0.0 or later is required
```



---

archive/issue_comments_221817.json:
```json
{
    "body": "<a id='comment:17'></a>\nAh ok, thanks.\n\nSo it's pretty specific to \"Sage's\" GCC, which treats `$SAGE_LOCAL/include` as a system include folder, but not `/usr/local/include`.\n\nOne day we should [instead] fix the GCC spkg then... :P",
    "created_at": "2014-08-02T16:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221817",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:17'></a>
Ah ok, thanks.

So it's pretty specific to "Sage's" GCC, which treats `$SAGE_LOCAL/include` as a system include folder, but not `/usr/local/include`.

One day we should [instead] fix the GCC spkg then... :P



---

archive/issue_comments_221818.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"FLINT MacOS\".",
    "created_at": "2014-08-02T16:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221818",
    "user": "https://github.com/nexttime"
}
```

**Changing keywords** from "" to "FLINT MacOS".



---

archive/issue_comments_221819.json:
```json
{
    "body": "<a id='comment:18'></a>\nI like it when people figure things while I am sleeping :)",
    "created_at": "2014-08-02T20:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221819",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'></a>
I like it when people figure things while I am sleeping :)



---

archive/issue_events_150146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-04T13:46:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150146"
}
```



---

archive/issue_events_150147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-04T13:46:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16751#event-150147"
}
```



---

archive/issue_comments_221820.json:
```json
{
    "body": "**Changing branch** from \"[u/vbraun/singular_build_fail_osx109](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/singular_build_fail_osx109)\" to \"[fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)\".",
    "created_at": "2014-08-04T13:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16751#issuecomment-221820",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vbraun/singular_build_fail_osx109](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/singular_build_fail_osx109)" to "[fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2](https://github.com/sagemath/sagetrac-mirror/commit/fa75ea6c03a9bcf856d5f3cf9af6eab4fcd939d2)".
