# Issue 16394: bijection from Dyck words to triangulations + random Dyck word

archive/issues_016157.json:
```json
{
    "assignees": [],
    "body": "There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method `to_triangulation`.\n\nIt also implements a fast `random_element` method for Dyck words. The existing one is *rather slow*.\n\nComponent: **combinatorics**\n\nKeywords: **dyck**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton, Vincent Delecroix**\n\nBranch/Commit: **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**\n\nReviewer: **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16394_\n\n",
    "closed_at": "2014-06-06T18:08:00Z",
    "created_at": "2014-05-24T18:49:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bijection from Dyck words to triangulations + random Dyck word",
    "type": "issue",
    "updated_at": "2014-06-06T18:08:00Z",
    "url": "https://github.com/sagemath/sage/issues/16394",
    "user": "https://github.com/fchapoton"
}
```
There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method `to_triangulation`.

It also implements a fast `random_element` method for Dyck words. The existing one is *rather slow*.

Component: **combinatorics**

Keywords: **dyck**

Author: **Frédéric Chapoton, Vincent Delecroix**

Branch/Commit: **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**

Reviewer: **Vincent Delecroix, Frédéric Chapoton, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/16394_





---

archive/issue_events_232049.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-24T18:49:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232049"
}
```



---

archive/issue_events_232050.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-24T18:49:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232050"
}
```



---

archive/issue_events_232051.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-24T18:49:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232051"
}
```



---

archive/issue_events_232052.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-24T18:49:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232052"
}
```



---

archive/issue_comments_211510.json:
```json
{
    "body": "Commit: **[`084ad9d`](https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e)**",
    "created_at": "2014-05-24T18:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211510",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`084ad9d`](https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e)**



---

archive/issue_comments_211511.json:
```json
{
    "body": "Branch: **[u/chapoton/16394](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/16394)**",
    "created_at": "2014-05-24T18:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211511",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/16394](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/16394)**



---

archive/issue_events_232053.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-24T18:50:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232053"
}
```



---

archive/issue_comments_211512.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e\"><code>084ad9d</code></a></td><td><code>implementation of a bijection from Dyck words to triangulations</code></td></tr></table>\n",
    "created_at": "2014-05-24T18:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211512",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e"><code>084ad9d</code></a></td><td><code>implementation of a bijection from Dyck words to triangulations</code></td></tr></table>




---

archive/issue_comments_211513.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bcfa4d01b1e672dbd8ded06f1371b4ee3826b67\"><code>7bcfa4d</code></a></td><td><code>Merge branch 'u/chapoton/16394' of ssh://trac.sagemath.org:22/sage into 16394</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f\"><code>5bd097a</code></a></td><td><code>trac #16394 add a random_element for Dyck words</code></td></tr></table>\n",
    "created_at": "2014-05-29T19:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211513",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bcfa4d01b1e672dbd8ded06f1371b4ee3826b67"><code>7bcfa4d</code></a></td><td><code>Merge branch 'u/chapoton/16394' of ssh://trac.sagemath.org:22/sage into 16394</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f"><code>5bd097a</code></a></td><td><code>trac #16394 add a random_element for Dyck words</code></td></tr></table>




---

archive/issue_comments_211514.json:
```json
{
    "body": "Changed commit from **[`084ad9d`](https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e)** to **[`5bd097a`](https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f)**",
    "created_at": "2014-05-29T19:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211514",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`084ad9d`](https://github.com/sagemath/sagetrac-mirror/commit/084ad9d2371f2614247851146daad5ed00f08b9e)** to **[`5bd097a`](https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f)**



---

archive/issue_comments_211515.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have taken the opportunity to add a fast random_element method.",
    "created_at": "2014-05-29T19:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211515",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

I have taken the opportunity to add a fast random_element method.



---

archive/issue_comments_211516.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method.\n+\n+It also implements a fast random_element method.\n``````\n",
    "created_at": "2014-05-29T19:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211516",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method.
+
+It also implements a fast random_element method.
``````




---

archive/issue_comments_211517.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb\"><code>af13ffe</code></a></td><td><code>correct algorithm fro random_element, was wrong before</code></td></tr></table>\n",
    "created_at": "2014-05-30T06:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb"><code>af13ffe</code></a></td><td><code>correct algorithm fro random_element, was wrong before</code></td></tr></table>




---

archive/issue_comments_211518.json:
```json
{
    "body": "Changed commit from **[`5bd097a`](https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f)** to **[`af13ffe`](https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb)**",
    "created_at": "2014-05-30T06:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5bd097a`](https://github.com/sagemath/sagetrac-mirror/commit/5bd097a894ae3d6d6e1aa021263d14d3f3ffca6f)** to **[`af13ffe`](https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb)**



---

archive/issue_comments_211519.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method.\n+There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method `to_triangulation`.\n \n-It also implements a fast random_element method.\n+It also implements a fast `random_element` method for Dyck words. The existing one is *rather slow*.\n``````\n",
    "created_at": "2014-05-30T06:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211519",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method.
+There was a TODO in the Dyck words file, about a conversion to triangulations of regular polygons. This provides the required method `to_triangulation`.
 
-It also implements a fast random_element method.
+It also implements a fast `random_element` method for Dyck words. The existing one is *rather slow*.
``````




---

archive/issue_events_232054.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-30T06:24:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "title_is": "bijection from Dyck words to triangulations + random Dyck word",
    "title_was": "Implementation of a bijection from Dyck words to triangulations",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232054"
}
```



---

archive/issue_comments_211520.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBefore:\n\n```\nsage: dw=DyckWords(14)\nsage: %timeit dw.random_element()\n1 loops, best of 3: 7.63 s per loop\n```\nAfter:\n\n```\nsage: dw=DyckWords(14)\nsage: %timeit dw.random_element()\n10000 loops, best of 3: 55.3 \u00b5s per loop\n```",
    "created_at": "2014-06-04T19:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211520",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

Before:

```
sage: dw=DyckWords(14)
sage: %timeit dw.random_element()
1 loops, best of 3: 7.63 s per loop
```
After:

```
sage: dw=DyckWords(14)
sage: %timeit dw.random_element()
10000 loops, best of 3: 55.3 µs per loop
```



---

archive/issue_events_232055.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-05T13:24:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232055"
}
```



---

archive/issue_events_232056.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-05T13:24:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232056"
}
```



---

archive/issue_comments_211521.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi Fr\u00e9d\u00e9ric,\n\n`to_triangulation`:\n\n- Here is a cool picture\n\n  ```\n  sage: t = DyckWords(10).random_element().to_triangulation()\n  sage: p = [(i,i+1) for i in xrange(11)] + [(11,0)]\n  sage: g = Graph(12)\n  sage: g.add_edges(p)\n  sage: g.add_edges(t)\n  sage: g.plot(layout='circular', edge_colors={'red':t, 'blue':p}).show()\n  ```\n  (not necessarily needed to use it in the doc... I just like it!)\n\n- I do not think that there is a need to have a line break after each sentence in the OUTPUT block\n\n- The only place where you give a hint about the bijection is \"In the implemented bijection, the set of smallest vertices of the edges in a triangulation is an encoding of the Dyck word.\" And I was not able to understand it... could you please refined it? Would it makes sense to have the reverse bijection somewhere?\n\n`random_element`:\n\n- please remove the trailing whitespace at line 3880 (in the doc of `random_element`).\n\n- small improvement: you can replace `self(w)` by `self.element_class(self, w)` which avoids some typechecking and a copy.\n\n- you can add a more appropriate test like\n\n  ```\n  sage: D = DyckWords(8)\n  sage: D.random_element() in D\n  True\n  ```",
    "created_at": "2014-06-05T13:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211521",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi Frédéric,

`to_triangulation`:

- Here is a cool picture

  ```
  sage: t = DyckWords(10).random_element().to_triangulation()
  sage: p = [(i,i+1) for i in xrange(11)] + [(11,0)]
  sage: g = Graph(12)
  sage: g.add_edges(p)
  sage: g.add_edges(t)
  sage: g.plot(layout='circular', edge_colors={'red':t, 'blue':p}).show()
  ```
  (not necessarily needed to use it in the doc... I just like it!)

- I do not think that there is a need to have a line break after each sentence in the OUTPUT block

- The only place where you give a hint about the bijection is "In the implemented bijection, the set of smallest vertices of the edges in a triangulation is an encoding of the Dyck word." And I was not able to understand it... could you please refined it? Would it makes sense to have the reverse bijection somewhere?

`random_element`:

- please remove the trailing whitespace at line 3880 (in the doc of `random_element`).

- small improvement: you can replace `self(w)` by `self.element_class(self, w)` which avoids some typechecking and a copy.

- you can add a more appropriate test like

  ```
  sage: D = DyckWords(8)
  sage: D.random_element() in D
  True
  ```



---

archive/issue_comments_211522.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7233237dea430108494defeeb784fd2b98069295\"><code>7233237</code></a></td><td><code>Merge branch 'u/chapoton/16394' of ssh://trac.sagemath.org:22/sage into 16394</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee\"><code>cc4ea17</code></a></td><td><code>trac #16394 enhanced along reviewer's comments</code></td></tr></table>\n",
    "created_at": "2014-06-05T19:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211522",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7233237dea430108494defeeb784fd2b98069295"><code>7233237</code></a></td><td><code>Merge branch 'u/chapoton/16394' of ssh://trac.sagemath.org:22/sage into 16394</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee"><code>cc4ea17</code></a></td><td><code>trac #16394 enhanced along reviewer's comments</code></td></tr></table>




---

archive/issue_comments_211523.json:
```json
{
    "body": "Changed commit from **[`af13ffe`](https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb)** to **[`cc4ea17`](https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee)**",
    "created_at": "2014-06-05T19:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211523",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af13ffe`](https://github.com/sagemath/sagetrac-mirror/commit/af13ffe636380f96a8919fe51841cb7e99627cfb)** to **[`cc4ea17`](https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee)**



---

archive/issue_comments_211524.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks a lot for having a look. I have tried to take all of your comments into account. Tell me what you think.",
    "created_at": "2014-06-05T19:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211524",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks a lot for having a look. I have tried to take all of your comments into account. Tell me what you think.



---

archive/issue_events_232057.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-05T19:28:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232057"
}
```



---

archive/issue_events_232058.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-06-05T19:28:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232058"
}
```



---

archive/issue_comments_211525.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello,\n\nI did myself many changes that you can find on my branch u/vdelecroix/16394. I describe them below.\n\n`to_triangulation`:\n\n- The bijection is really cool but your implementation a bit dirty. There is no need to have do `i = l.index(coheight)` as you pop only on the right... i.e. you always have `i == coheight`. So I removed `i` and it works the same ;-)\n\n- There is already a function `from_height` to build Dyck words for the set of heights\n\n  ```\n  sage: DyckWords().from_heights([0,1,2,3,2,3,2,1,0])\n  [1, 1, 1, 0, 1, 0, 0, 0]\n  ```\n  I thought it might be used to give the inverse bijections but these are height when you read the word as a path above the horizontal. Do you know how to write a one-line inverse bijection? Maybe using either `from_area_sequence` or `from_non_decreasing_parking_function`?\n\n- I rephrase a bit the description emphasizing at the beginning that it is a bijection (not every map from Dyck words to triangulations is a bijection).\n\nEverything is perfect in `random_element`.\n\nSo, please double check my modif in the code. After that, either you have an idea for the inverse bijection and you can add it to the documentation or you can set this to positive review after my commit.\n\nVincent",
    "created_at": "2014-06-05T21:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211525",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello,

I did myself many changes that you can find on my branch u/vdelecroix/16394. I describe them below.

`to_triangulation`:

- The bijection is really cool but your implementation a bit dirty. There is no need to have do `i = l.index(coheight)` as you pop only on the right... i.e. you always have `i == coheight`. So I removed `i` and it works the same ;-)

- There is already a function `from_height` to build Dyck words for the set of heights

  ```
  sage: DyckWords().from_heights([0,1,2,3,2,3,2,1,0])
  [1, 1, 1, 0, 1, 0, 0, 0]
  ```
  I thought it might be used to give the inverse bijections but these are height when you read the word as a path above the horizontal. Do you know how to write a one-line inverse bijection? Maybe using either `from_area_sequence` or `from_non_decreasing_parking_function`?

- I rephrase a bit the description emphasizing at the beginning that it is a bijection (not every map from Dyck words to triangulations is a bijection).

Everything is perfect in `random_element`.

So, please double check my modif in the code. After that, either you have an idea for the inverse bijection and you can add it to the documentation or you can set this to positive review after my commit.

Vincent



---

archive/issue_comments_211526.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI think it's better to have two methods: `to_triangulation()` and `to_triangulation_as_graph()` the graph return type takes exactly the output of `to_triangulation()` and so there's separation of return types.",
    "created_at": "2014-06-05T21:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211526",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

I think it's better to have two methods: `to_triangulation()` and `to_triangulation_as_graph()` the graph return type takes exactly the output of `to_triangulation()` and so there's separation of return types.



---

archive/issue_comments_211527.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI guess Travis is right. Moreover, I just thought that the graph has more edges than the output of \"to_triangulation\" as there is the perimeter... it was not specified if I remember correctly.",
    "created_at": "2014-06-06T06:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211527",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

I guess Travis is right. Moreover, I just thought that the graph has more edges than the output of "to_triangulation" as there is the perimeter... it was not specified if I remember correctly.



---

archive/issue_comments_211528.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nVincent is your branch based on top of mine, or not ? What should I take as a starting point for further work ?",
    "created_at": "2014-06-06T07:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211528",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Vincent is your branch based on top of mine, or not ? What should I take as a starting point for further work ?



---

archive/issue_comments_211529.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@fchapoton](#comment%3A13):\n> Vincent is your branch based on top of mine, or not ? What should I take as a starting point for further work ?\n\nYes, I am based on top of yours (just one commit above). If you like it, you can start from mine.",
    "created_at": "2014-06-06T07:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211529",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@fchapoton](#comment%3A13):
> Vincent is your branch based on top of mine, or not ? What should I take as a starting point for further work ?

Yes, I am based on top of yours (just one commit above). If you like it, you can start from mine.



---

archive/issue_comments_211530.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nok, I will do that now, thanks.",
    "created_at": "2014-06-06T07:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211530",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

ok, I will do that now, thanks.



---

archive/issue_comments_211531.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b706915e6b02b623e555c33a121ad5b8f07d0bc\"><code>1b70691</code></a></td><td><code>Merge branch 'develop' into 16394-Dyck_words</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a2afab7f0530966a95d1c44e7873f33bef62d16\"><code>7a2afab</code></a></td><td><code>Merge branch 'u/chapoton/16394' of trac.sagemath.org:sage into 16394-Dyck_words</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/501d6380c0997ccb765e9aaf18ac7622c9287799\"><code>501d638</code></a></td><td><code>trac #16394: better code, better doc in to_triangulation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da\"><code>395bb33</code></a></td><td><code>trac #16394 separating to_triangulation_as_graph</code></td></tr></table>\n",
    "created_at": "2014-06-06T07:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211531",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b706915e6b02b623e555c33a121ad5b8f07d0bc"><code>1b70691</code></a></td><td><code>Merge branch 'develop' into 16394-Dyck_words</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a2afab7f0530966a95d1c44e7873f33bef62d16"><code>7a2afab</code></a></td><td><code>Merge branch 'u/chapoton/16394' of trac.sagemath.org:sage into 16394-Dyck_words</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/501d6380c0997ccb765e9aaf18ac7622c9287799"><code>501d638</code></a></td><td><code>trac #16394: better code, better doc in to_triangulation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da"><code>395bb33</code></a></td><td><code>trac #16394 separating to_triangulation_as_graph</code></td></tr></table>




---

archive/issue_comments_211532.json:
```json
{
    "body": "Changed commit from **[`cc4ea17`](https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee)** to **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**",
    "created_at": "2014-06-06T07:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211532",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc4ea17`](https://github.com/sagemath/sagetrac-mirror/commit/cc4ea170c1f76ce9adc6b4dbd4fec05e29a68eee)** to **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**



---

archive/issue_comments_211533.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok, done. I think we can leave the question of the inverse bijection for the time when one has a class for triangulations.",
    "created_at": "2014-06-06T07:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211533",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

ok, done. I think we can leave the question of the inverse bijection for the time when one has a class for triangulations.



---

archive/issue_events_232059.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-06T08:11:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232059"
}
```



---

archive/issue_events_232060.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-06T08:11:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232060"
}
```



---

archive/issue_comments_211534.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nGreat!",
    "created_at": "2014-06-06T08:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211534",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Great!



---

archive/issue_comments_211535.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-06-06T08:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211535",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Vincent Delecroix, Frédéric Chapoton**



---

archive/issue_comments_211536.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThanks a lot !",
    "created_at": "2014-06-06T08:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211536",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

Thanks a lot !



---

archive/issue_comments_211537.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Fr\u00e9d\u00e9ric Chapoton, Vincent Delecroix**",
    "created_at": "2014-06-06T08:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211537",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Frédéric Chapoton** to **Frédéric Chapoton, Vincent Delecroix**



---

archive/issue_comments_211538.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton** to **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw**",
    "created_at": "2014-06-06T08:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211538",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Vincent Delecroix, Frédéric Chapoton** to **Vincent Delecroix, Frédéric Chapoton, Travis Scrimshaw**



---

archive/issue_comments_211539.json:
```json
{
    "body": "Changed branch from **[u/chapoton/16394](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/16394)** to **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**",
    "created_at": "2014-06-06T18:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16394#issuecomment-211539",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/16394](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/16394)** to **[`395bb33`](https://github.com/sagemath/sagetrac-mirror/commit/395bb33059768aa0a36a267a318e13a7ce4e45da)**



---

archive/issue_events_232061.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-06T18:08:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232061"
}
```



---

archive/issue_events_232062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0cab68b599ee8685b39ebfea971bf33740b6a4df",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-06T18:08:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16394",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16394#event-232062"
}
```
