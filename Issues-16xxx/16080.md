# Issue 16080: Python 3 preparation: Handle the renaming of "urllib" and "urllib2"

archive/issues_015843.json:
```json
{
    "body": "The tool 2to3 changes the respective import statements to the new Py3 names.\n\n\nBut the code has to depend on the Python version!\n\nThere are 16 effected modules. \n\nThis ticket is tracked as a dependency of meta-ticket ticket:16052.\n\nKeywords: python3\n\nBranch/Commit: 3098f5fa5eecfff7fae914b99964831ab01d3d4f\n\nReviewer: Volker Braun, R. Andrew Ohana\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16080\n\n",
    "closed_at": "2015-11-24T13:01:31Z",
    "created_at": "2014-04-07T09:04:08Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Python 3 preparation: Handle the renaming of \"urllib\" and \"urllib2\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16080",
    "user": "https://github.com/wluebbe"
}
```
The tool 2to3 changes the respective import statements to the new Py3 names.


But the code has to depend on the Python version!

There are 16 effected modules. 

This ticket is tracked as a dependency of meta-ticket ticket:16052.

Keywords: python3

Branch/Commit: 3098f5fa5eecfff7fae914b99964831ab01d3d4f

Reviewer: Volker Braun, R. Andrew Ohana

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16080





---

archive/issue_events_061660.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61660"
}
```



---

archive/issue_events_061661.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61661"
}
```



---

archive/issue_events_061662.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61662"
}
```



---

archive/issue_comments_258003.json:
```json
{
    "body": "Changing branch from \"\" to \"public/16080\"",
    "created_at": "2015-11-15T08:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258003",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "public/16080"



---

archive/issue_comments_258004.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-15T08:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258004",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258005.json:
```json
{
    "body": "Changing commit from \"\" to \"c9f3a9882700609ea007846211b79f02287864ed\"",
    "created_at": "2015-11-15T08:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258005",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "c9f3a9882700609ea007846211b79f02287864ed"



---

archive/issue_comments_258006.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|\n|[c9f3a98](https://github.com/sagemath/sagetrac-mirror/commit/c9f3a9882700609ea007846211b79f02287864ed)|`trac #16080 changing imports of urllib,urrlib2,urlparse for py3 compatibility`|",
    "created_at": "2015-11-15T08:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258006",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|
|[c9f3a98](https://github.com/sagemath/sagetrac-mirror/commit/c9f3a9882700609ea007846211b79f02287864ed)|`trac #16080 changing imports of urllib,urrlib2,urlparse for py3 compatibility`|



---

archive/issue_comments_258007.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2015-11-15T08:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258007",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_events_061663.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-15T08:52:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61663"
}
```



---

archive/issue_events_061664.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-15T08:52:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61664"
}
```



---

archive/issue_comments_258008.json:
```json
{
    "body": "Changing commit from \"c9f3a9882700609ea007846211b79f02287864ed\" to \"ab05e0685d4b654bac10348e9f3b795713f0d14a\"",
    "created_at": "2015-11-15T12:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c9f3a9882700609ea007846211b79f02287864ed" to "ab05e0685d4b654bac10348e9f3b795713f0d14a"



---

archive/issue_comments_258009.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[ab05e06](https://github.com/sagemath/sagetrac-mirror/commit/ab05e0685d4b654bac10348e9f3b795713f0d14a)|`trac #16080 correct one doctest`|",
    "created_at": "2015-11-15T12:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[ab05e06](https://github.com/sagemath/sagetrac-mirror/commit/ab05e0685d4b654bac10348e9f3b795713f0d14a)|`trac #16080 correct one doctest`|



---

archive/issue_comments_258010.json:
```json
{
    "body": "Changing commit from \"ab05e0685d4b654bac10348e9f3b795713f0d14a\" to \"3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b\"",
    "created_at": "2015-11-15T13:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ab05e0685d4b654bac10348e9f3b795713f0d14a" to "3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b"



---

archive/issue_comments_258011.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[3ac77d3](https://github.com/sagemath/sagetrac-mirror/commit/3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b)|`trac #16080 move back 3 imports inside functions`|",
    "created_at": "2015-11-15T13:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[3ac77d3](https://github.com/sagemath/sagetrac-mirror/commit/3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b)|`trac #16080 move back 3 imports inside functions`|



---

archive/issue_comments_258012.json:
```json
{
    "body": "<a id='comment:6'></a>\nCould you use `six.moves.urllib` instead? We already include six as a standard package, so it is fine to use it.",
    "created_at": "2015-11-16T00:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258012",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:6'></a>
Could you use `six.moves.urllib` instead? We already include six as a standard package, so it is fine to use it.



---

archive/issue_comments_258013.json:
```json
{
    "body": "<a id='comment:7'></a>\n+1 to six.moves.urlib. Rest is great!",
    "created_at": "2015-11-16T02:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258013",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
+1 to six.moves.urlib. Rest is great!



---

archive/issue_comments_258014.json:
```json
{
    "body": "<a id='comment:8'></a>\nI was using this page \n\nhttp://python3porting.com/stdlib.html\n\nas a reference, and it says that six could not handle urllib. Maybe this is outdated ?\n\nDo we really gain something by using six instead of the \"try except\" ? In other words, do you really want me to spend more time on that ? I may have other things to do.",
    "created_at": "2015-11-16T08:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258014",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
I was using this page 

http://python3porting.com/stdlib.html

as a reference, and it says that six could not handle urllib. Maybe this is outdated ?

Do we really gain something by using six instead of the "try except" ? In other words, do you really want me to spend more time on that ? I may have other things to do.



---

archive/issue_comments_258015.json:
```json
{
    "body": "Changing commit from \"3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b\" to \"99699f60ccb23c01102f3d6dd4251449d840bdb1\"",
    "created_at": "2015-11-16T16:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3ac77d397fb2e1a8cab3cfe049e88fc3b8a2716b" to "99699f60ccb23c01102f3d6dd4251449d840bdb1"



---

archive/issue_comments_258016.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[99699f6](https://github.com/sagemath/sagetrac-mirror/commit/99699f60ccb23c01102f3d6dd4251449d840bdb1)|`trac #16080 now redone using six.moves`|",
    "created_at": "2015-11-16T16:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[99699f6](https://github.com/sagemath/sagetrac-mirror/commit/99699f60ccb23c01102f3d6dd4251449d840bdb1)|`trac #16080 now redone using six.moves`|



---

archive/issue_comments_258017.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun, R. Andrew Ohana\"",
    "created_at": "2015-11-16T18:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258017",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun, R. Andrew Ohana"



---

archive/issue_comments_258018.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-16T18:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258018",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258019.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-16T19:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258019",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_258020.json:
```json
{
    "body": "<a id='comment:11'></a>\nmerge conflict, probably with #19296",
    "created_at": "2015-11-16T19:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258020",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
merge conflict, probably with #19296



---

archive/issue_comments_258021.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis does not work. Some imports have to be modified. Work in progress.",
    "created_at": "2015-11-17T18:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258021",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
This does not work. Some imports have to be modified. Work in progress.



---

archive/issue_comments_258022.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[f848c3b](https://github.com/sagemath/sagetrac-mirror/commit/f848c3b3d283126b5238cafae7228095036a160d)|`trac #16080 correcting some imports`|",
    "created_at": "2015-11-17T18:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[f848c3b](https://github.com/sagemath/sagetrac-mirror/commit/f848c3b3d283126b5238cafae7228095036a160d)|`trac #16080 correcting some imports`|



---

archive/issue_comments_258023.json:
```json
{
    "body": "Changing commit from \"99699f60ccb23c01102f3d6dd4251449d840bdb1\" to \"f848c3b3d283126b5238cafae7228095036a160d\"",
    "created_at": "2015-11-17T18:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "99699f60ccb23c01102f3d6dd4251449d840bdb1" to "f848c3b3d283126b5238cafae7228095036a160d"



---

archive/issue_comments_258024.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[3098f5f](https://github.com/sagemath/sagetrac-mirror/commit/3098f5fa5eecfff7fae914b99964831ab01d3d4f)|`Merge branch 'public/16080' into 6.10.b5`|",
    "created_at": "2015-11-23T08:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[3098f5f](https://github.com/sagemath/sagetrac-mirror/commit/3098f5fa5eecfff7fae914b99964831ab01d3d4f)|`Merge branch 'public/16080' into 6.10.b5`|



---

archive/issue_comments_258025.json:
```json
{
    "body": "Changing commit from \"f848c3b3d283126b5238cafae7228095036a160d\" to \"3098f5fa5eecfff7fae914b99964831ab01d3d4f\"",
    "created_at": "2015-11-23T08:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f848c3b3d283126b5238cafae7228095036a160d" to "3098f5fa5eecfff7fae914b99964831ab01d3d4f"



---

archive/issue_comments_258026.json:
```json
{
    "body": "<a id='comment:15'></a>\nBetter wait for the bot's green light before setting back to positive review.",
    "created_at": "2015-11-23T08:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258026",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
Better wait for the bot's green light before setting back to positive review.



---

archive/issue_comments_258027.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-23T08:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258027",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258028.json:
```json
{
    "body": "<a id='comment:16'></a>\nok, seems to be good to go. Volker, do you approve ?",
    "created_at": "2015-11-23T13:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258028",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
ok, seems to be good to go. Volker, do you approve ?



---

archive/issue_comments_258029.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-23T13:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258029",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258030.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-24T13:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258030",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_258031.json:
```json
{
    "body": "Changing branch from \"public/16080\" to \"3098f5fa5eecfff7fae914b99964831ab01d3d4f\"",
    "created_at": "2015-11-24T13:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16080#issuecomment-258031",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/16080" to "3098f5fa5eecfff7fae914b99964831ab01d3d4f"



---

archive/issue_events_061665.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-24T13:01:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16080",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16080#event-61665"
}
```
