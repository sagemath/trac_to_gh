# Issue 16151: Making BasisExchangeMatroid fool-proof with user input sanity checks

archive/issues_015914.json:
```json
{
    "body": "Following creates a segfault:\n\n```\nfrom sage.matroids.advanced import *\nM = BasisMatroid(matroids.named_matroids.Vamos())\nlen(M.independent_r_sets(9))\n```\nThis is because of wrong user input (vamos matroid has only 8 elements, so there is no independent set of size bigger than 8). This ticket is to add sanity checks on user input to filter out such cases and raise appropriate exceptions.\n\n\nAssignee: Jayant Apte\n\nCC:  rudi stefan\n\nBranch/Commit: 5bdc0a4548f1149bc086d427f08a2387d9e3ee73\n\nUpstream: Reported upstream. Developers acknowledge bug.\n\nReviewer: Jayant Apte\n\nAuthor: Rudi Pendavingh\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16151\n\n",
    "closed_at": "2014-04-14T19:57:26Z",
    "created_at": "2014-04-13T19:18:35Z",
    "labels": [
        "component: matroid theory",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Making BasisExchangeMatroid fool-proof with user input sanity checks",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16151",
    "user": "https://github.com/jayant91089"
}
```
Following creates a segfault:

```
from sage.matroids.advanced import *
M = BasisMatroid(matroids.named_matroids.Vamos())
len(M.independent_r_sets(9))
```
This is because of wrong user input (vamos matroid has only 8 elements, so there is no independent set of size bigger than 8). This ticket is to add sanity checks on user input to filter out such cases and raise appropriate exceptions.


Assignee: Jayant Apte

CC:  rudi stefan

Branch/Commit: 5bdc0a4548f1149bc086d427f08a2387d9e3ee73

Upstream: Reported upstream. Developers acknowledge bug.

Reviewer: Jayant Apte

Author: Rudi Pendavingh

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16151





---

archive/issue_comments_263242.json:
```json
{
    "body": "Changing branch from \"\" to \"u/Rudi/ticket/16151\"",
    "created_at": "2014-04-13T20:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263242",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing branch from "" to "u/Rudi/ticket/16151"



---

archive/issue_comments_263243.json:
```json
{
    "body": "Changing commit from \"\" to \"5bdc0a4548f1149bc086d427f08a2387d9e3ee73\"",
    "created_at": "2014-04-13T20:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263243",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing commit from "" to "5bdc0a4548f1149bc086d427f08a2387d9e3ee73"



---

archive/issue_comments_263244.json:
```json
{
    "body": "<a id='comment:2'></a>This should do it. \n\nI corrected independent_r_sets and also dependent_r_sets (and then I corrected myself, since the latter needed a slightly different treatment). \n\nAs far as I can see, flats(r) is already fool-proof, and there are no other user-facing methods that take parameters.\n\n---\nNew commits:",
    "created_at": "2014-04-13T20:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263244",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:2'></a>This should do it. 

I corrected independent_r_sets and also dependent_r_sets (and then I corrected myself, since the latter needed a slightly different treatment). 

As far as I can see, flats(r) is already fool-proof, and there are no other user-facing methods that take parameters.

---
New commits:



---

archive/issue_comments_263245.json:
```json
{
    "body": "Changing author from \"Jayant Apte\" to \"Rudi Pendavingh\"",
    "created_at": "2014-04-13T20:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263245",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing author from "Jayant Apte" to "Rudi Pendavingh"



---

archive/issue_comments_263246.json:
```json
{
    "body": "<a id='comment:3'></a>I made myself 'author' since I am the author of the patch. Or does that field refer to the author of the ticket? I would think not, since there are also `owner` and `reported by` fields.",
    "created_at": "2014-04-13T20:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263246",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:3'></a>I made myself 'author' since I am the author of the patch. Or does that field refer to the author of the ticket? I would think not, since there are also `owner` and `reported by` fields.



---

archive/issue_comments_263247.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-13T20:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263247",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263248.json:
```json
{
    "body": "<a id='comment:4'></a>The aforementioned check is in place now and the segfault mentioned above no longer occurs. As Rudi mentioned, all user facing methods that take parameters are now safe from bad input parameters.",
    "created_at": "2014-04-14T02:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263248",
    "user": "https://github.com/jayant91089"
}
```

<a id='comment:4'></a>The aforementioned check is in place now and the segfault mentioned above no longer occurs. As Rudi mentioned, all user facing methods that take parameters are now safe from bad input parameters.



---

archive/issue_comments_263249.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-14T02:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263249",
    "user": "https://github.com/jayant91089"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263250.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jayant Apte\"",
    "created_at": "2014-04-14T06:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263250",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing reviewer from "" to "Jayant Apte"



---

archive/issue_comments_263251.json:
```json
{
    "body": "<a id='comment:6'></a>Thanks Jayant!",
    "created_at": "2014-04-14T06:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263251",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:6'></a>Thanks Jayant!



---

archive/issue_comments_263252.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-14T19:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263252",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_263253.json:
```json
{
    "body": "Changing branch from \"u/Rudi/ticket/16151\" to \"5bdc0a4548f1149bc086d427f08a2387d9e3ee73\"",
    "created_at": "2014-04-14T19:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16151#issuecomment-263253",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/Rudi/ticket/16151" to "5bdc0a4548f1149bc086d427f08a2387d9e3ee73"



---

archive/issue_events_047582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-14T19:57:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16151",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16151#event-47582"
}
```
