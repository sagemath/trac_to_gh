# Issue 16347: Wilson's constructions of OA with 2 truncated groups

archive/issues_016110.json:
```json
{
    "assignees": [],
    "body": "Heeeeeeeere it is ! The new construction !\n\nAs a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.\n\nNathann\n\nDepends on #16373\n\nCC:  @videlec @KPanComputes @dimpase\n\nBranch/Commit: **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Nathann Cohen**\n\nComponent: **combinatorial designs**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16347_\n\n",
    "closed_at": "2014-06-26T01:50:37Z",
    "created_at": "2014-05-13T13:58:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Wilson's constructions of OA with 2 truncated groups",
    "type": "issue",
    "updated_at": "2014-06-26T01:50:37Z",
    "url": "https://github.com/sagemath/sage/issues/16347",
    "user": "https://github.com/nathanncohen"
}
```
Heeeeeeeere it is ! The new construction !

As a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.

Nathann

Depends on #16373

CC:  @videlec @KPanComputes @dimpase

Branch/Commit: **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**

Reviewer: **Vincent Delecroix**

Author: **Nathann Cohen**

Component: **combinatorial designs**

_Issue created by migration from https://trac.sagemath.org/ticket/16347_





---

archive/issue_events_233549.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-13T13:58:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233549"
}
```



---

archive/issue_events_233550.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-13T13:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233550"
}
```



---

archive/issue_events_233551.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-13T13:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233551"
}
```



---

archive/issue_events_233552.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-13T13:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233552"
}
```



---

archive/issue_comments_210640.json:
```json
{
    "body": "Branch: **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)**",
    "created_at": "2014-05-13T13:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210640",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)**



---

archive/issue_events_233553.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-13T13:58:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233553"
}
```



---

archive/issue_comments_210641.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fb0f625c1b2dd63c11cc1e44beb61e69c832acf\"><code>9fb0f62</code></a></td><td><code>trac #16241: useless if condition in MOLS constructor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67ab2d2e5c9e4bdf88ee54e32f9492de59f44ec6\"><code>67ab2d2</code></a></td><td><code>trac #16241: Merged with updated #16235</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e655b363ae30694fa5f36e6b0edbdddcfb95f0cf\"><code>e655b36</code></a></td><td><code>trac #16236: Five mutually orthogonal latin squares of order 12</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b51626696a83e0072ae5c9a2ef42fc505f1da37f\"><code>b516266</code></a></td><td><code>trac #16236: Merged with updated #16241</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5339fabafd4d2b3ffe56b1e68bb68d75ec19902\"><code>f5339fa</code></a></td><td><code>trac #16236: Broken doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d7da8a150862462eaadd3e261ecc81abbe712c9\"><code>2d7da8a</code></a></td><td><code>trac #16236: Merged with updated #16241</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/973b926f14224d464da1abba065fd5b78690142c\"><code>973b926</code></a></td><td><code>trac #16236: Merged with #16272</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37681e278ccc71e0c70f74bb3b48b178a0c3c792\"><code>37681e2</code></a></td><td><code>trac #16295 : Faster is_orthogonal_array</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/994324e77dbe8f3126aeba9059dc847feaebe8bc\"><code>994324e</code></a></td><td><code>trac #16295: Doctests and review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf\"><code>9fefb55</code></a></td><td><code>trac #16347: Wilson's constructions of OA with 2 truncated groups</code></td></tr></table>\n",
    "created_at": "2014-05-13T13:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210641",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fb0f625c1b2dd63c11cc1e44beb61e69c832acf"><code>9fb0f62</code></a></td><td><code>trac #16241: useless if condition in MOLS constructor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67ab2d2e5c9e4bdf88ee54e32f9492de59f44ec6"><code>67ab2d2</code></a></td><td><code>trac #16241: Merged with updated #16235</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e655b363ae30694fa5f36e6b0edbdddcfb95f0cf"><code>e655b36</code></a></td><td><code>trac #16236: Five mutually orthogonal latin squares of order 12</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b51626696a83e0072ae5c9a2ef42fc505f1da37f"><code>b516266</code></a></td><td><code>trac #16236: Merged with updated #16241</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5339fabafd4d2b3ffe56b1e68bb68d75ec19902"><code>f5339fa</code></a></td><td><code>trac #16236: Broken doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d7da8a150862462eaadd3e261ecc81abbe712c9"><code>2d7da8a</code></a></td><td><code>trac #16236: Merged with updated #16241</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/973b926f14224d464da1abba065fd5b78690142c"><code>973b926</code></a></td><td><code>trac #16236: Merged with #16272</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37681e278ccc71e0c70f74bb3b48b178a0c3c792"><code>37681e2</code></a></td><td><code>trac #16295 : Faster is_orthogonal_array</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/994324e77dbe8f3126aeba9059dc847feaebe8bc"><code>994324e</code></a></td><td><code>trac #16295: Doctests and review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf"><code>9fefb55</code></a></td><td><code>trac #16347: Wilson's constructions of OA with 2 truncated groups</code></td></tr></table>




---

archive/issue_comments_210642.json:
```json
{
    "body": "Commit: **[`9fefb55`](https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf)**",
    "created_at": "2014-05-13T13:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210642",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`9fefb55`](https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf)**



---

archive/issue_comments_210643.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc6de7365d89bfa33903bd4c00d58f5757578c6b\"><code>fc6de73</code></a></td><td><code>trac #16295: Merged with 6.3.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9f8b0388a8cd333bfaf4160896b09be5550896a\"><code>b9f8b03</code></a></td><td><code>trac #16295: bugfix in wilson's construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1\"><code>00ee241</code></a></td><td><code>trac #16347: Wilson's constructions of OA with 2 truncated groups</code></td></tr></table>\n",
    "created_at": "2014-05-14T09:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210643",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc6de7365d89bfa33903bd4c00d58f5757578c6b"><code>fc6de73</code></a></td><td><code>trac #16295: Merged with 6.3.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9f8b0388a8cd333bfaf4160896b09be5550896a"><code>b9f8b03</code></a></td><td><code>trac #16295: bugfix in wilson's construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1"><code>00ee241</code></a></td><td><code>trac #16347: Wilson's constructions of OA with 2 truncated groups</code></td></tr></table>




---

archive/issue_comments_210644.json:
```json
{
    "body": "Changed commit from **[`9fefb55`](https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf)** to **[`00ee241`](https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1)**",
    "created_at": "2014-05-14T09:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9fefb55`](https://github.com/sagemath/sagetrac-mirror/commit/9fefb55ae381228affcfa085d6814fef6e8dd1bf)** to **[`00ee241`](https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1)**



---

archive/issue_events_233554.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-16T21:14:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233554"
}
```



---

archive/issue_events_233555.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-05-16T21:14:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233555"
}
```



---

archive/issue_comments_210645.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWith this updated patch, we only have one version of `wilson_construction` which can handle 0,1 or 2 truncated columns. It can actually handle much more situations that will appear in new constructions I am writing these days. I think that it is a much cleaner code `:-)`\n\nThe two function which look for decomposition of integers are left as they are, they are still useful : they find sets of parameters with which the new `wilson_construction` function is to be fed.\n\nNathann",
    "created_at": "2014-05-29T19:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210645",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

With this updated patch, we only have one version of `wilson_construction` which can handle 0,1 or 2 truncated columns. It can actually handle much more situations that will appear in new constructions I am writing these days. I think that it is a much cleaner code `:-)`

The two function which look for decomposition of integers are left as they are, they are still useful : they find sets of parameters with which the new `wilson_construction` function is to be fed.

Nathann



---

archive/issue_comments_210646.json:
```json
{
    "body": "Changed dependencies from **#16295** to **#16295, #16391**",
    "created_at": "2014-05-29T19:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210646",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16295** to **#16295, #16391**



---

archive/issue_comments_210647.json:
```json
{
    "body": "Changed commit from **[`00ee241`](https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1)** to **[`a4554f5`](https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724)**",
    "created_at": "2014-05-29T19:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00ee241`](https://github.com/sagemath/sagetrac-mirror/commit/00ee241a234506c6dfade78b97ce445c0d3b87b1)** to **[`a4554f5`](https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724)**



---

archive/issue_comments_210648.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90a72bd39d74c24cb548e5b7dc5995c67ac386f8\"><code>90a72bd</code></a></td><td><code>trac #16370: OA(k,n) strongly regular graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/395458fdb6487289f5add7702c7c6fe66018ad96\"><code>395458f</code></a></td><td><code>trac #16391: Helper functions for OA constructions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed318ef025a88b2ef5f69891b03fb60b725c7a7\"><code>0ed318e</code></a></td><td><code>trac #16391: Merged with 6.3.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f86d187a1fdd25bb662663de314fd1528e675fc0\"><code>f86d187</code></a></td><td><code>trac #16391: small improvement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d954b936c11f31d79b5dca0d6b8da579afb53d5f\"><code>d954b93</code></a></td><td><code>trac #16391: Independent Set problem with a LP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1bb9037a3de163f7db69f76247f24b9b27d159b\"><code>c1bb903</code></a></td><td><code>trac #16347: Merged with #16391</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724\"><code>a4554f5</code></a></td><td><code>trac #16347: Genelarized Wilson construction</code></td></tr></table>\n",
    "created_at": "2014-05-29T19:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90a72bd39d74c24cb548e5b7dc5995c67ac386f8"><code>90a72bd</code></a></td><td><code>trac #16370: OA(k,n) strongly regular graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/395458fdb6487289f5add7702c7c6fe66018ad96"><code>395458f</code></a></td><td><code>trac #16391: Helper functions for OA constructions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed318ef025a88b2ef5f69891b03fb60b725c7a7"><code>0ed318e</code></a></td><td><code>trac #16391: Merged with 6.3.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f86d187a1fdd25bb662663de314fd1528e675fc0"><code>f86d187</code></a></td><td><code>trac #16391: small improvement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d954b936c11f31d79b5dca0d6b8da579afb53d5f"><code>d954b93</code></a></td><td><code>trac #16391: Independent Set problem with a LP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1bb9037a3de163f7db69f76247f24b9b27d159b"><code>c1bb903</code></a></td><td><code>trac #16347: Merged with #16391</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724"><code>a4554f5</code></a></td><td><code>trac #16347: Genelarized Wilson construction</code></td></tr></table>




---

archive/issue_comments_210649.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,6 +10,4 @@\n \n Nathann\n \n-\n-\n-Nathann\n+TODO : Update #16423 when this patch is reviewed\n``````\n",
    "created_at": "2014-06-02T09:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210649",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,6 +10,4 @@
 
 Nathann
 
-
-
-Nathann
+TODO : Update #16423 when this patch is reviewed
``````




---

archive/issue_comments_210650.json:
```json
{
    "body": "Changed dependencies from **#16295, #16391** to **#16295, #16391, #16373**",
    "created_at": "2014-06-02T09:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210650",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16295, #16391** to **#16295, #16391, #16373**



---

archive/issue_comments_210651.json:
```json
{
    "body": "Changed dependencies from **#16295, #16391, #16373** to **#16391, #16373**",
    "created_at": "2014-06-02T09:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210651",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16295, #16391, #16373** to **#16391, #16373**



---

archive/issue_comments_210652.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9690032a77345bd0d370a3099503574fbf6c96e\"><code>f969003</code></a></td><td><code>trac #16356: MOLS for n=18,57,154,276,298,342</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20ef21682cfe8b6532e2e2621b88d921236528f2\"><code>20ef216</code></a></td><td><code>trac #16361: OA(7,66), OA(7,68), OA(8,69), OA(7,74) and OA(8,76)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcf5843e8f14e52ef1cacc1583a9206b47d4d53b\"><code>dcf5843</code></a></td><td><code>trac #16373: OA(18,273), OA(12,474), OA(33,993)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373\"><code>2e46351</code></a></td><td><code>trac #16347: Merged with #16373</code></td></tr></table>\n",
    "created_at": "2014-06-02T13:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9690032a77345bd0d370a3099503574fbf6c96e"><code>f969003</code></a></td><td><code>trac #16356: MOLS for n=18,57,154,276,298,342</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20ef21682cfe8b6532e2e2621b88d921236528f2"><code>20ef216</code></a></td><td><code>trac #16361: OA(7,66), OA(7,68), OA(8,69), OA(7,74) and OA(8,76)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcf5843e8f14e52ef1cacc1583a9206b47d4d53b"><code>dcf5843</code></a></td><td><code>trac #16373: OA(18,273), OA(12,474), OA(33,993)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373"><code>2e46351</code></a></td><td><code>trac #16347: Merged with #16373</code></td></tr></table>




---

archive/issue_comments_210653.json:
```json
{
    "body": "Changed commit from **[`a4554f5`](https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724)** to **[`2e46351`](https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373)**",
    "created_at": "2014-06-02T13:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a4554f5`](https://github.com/sagemath/sagetrac-mirror/commit/a4554f5c90ea6a4fee0a170b2fb8a862b21df724)** to **[`2e46351`](https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373)**



---

archive/issue_comments_210654.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Anyway caching the OA/TD is not as bad as it seems, for it will only build those who are useful in some construction the users asks. When an OA is not useful, a existence check is made before building the actual design, so this is cool !\n \n-I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs. \n+I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs (see also the following threads on sage-devel [cached_function: a filter to only cache some inputs ?](https://groups.google.com/forum/#!topic/sage-devel/OPe5VJpBiB4) and [cached_function: cache a(n) only when n is *not* a prime power](https://groups.google.com/forum/#!topic/sage-devel/rnqhwGk6e0E)).\n \n Note that MOLS is not a cached_function, because they output matrix objects .... Does not matter much anyway, the MOLS constructor does not contain much.\n \n``````\n",
    "created_at": "2014-06-05T10:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210654",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Anyway caching the OA/TD is not as bad as it seems, for it will only build those who are useful in some construction the users asks. When an OA is not useful, a existence check is made before building the actual design, so this is cool !
 
-I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs. 
+I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs (see also the following threads on sage-devel [cached_function: a filter to only cache some inputs ?](https://groups.google.com/forum/#!topic/sage-devel/OPe5VJpBiB4) and [cached_function: cache a(n) only when n is *not* a prime power](https://groups.google.com/forum/#!topic/sage-devel/rnqhwGk6e0E)).
 
 Note that MOLS is not a cached_function, because they output matrix objects .... Does not matter much anyway, the MOLS constructor does not contain much.
 
``````




---

archive/issue_events_233556.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-05T13:51:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233556"
}
```



---

archive/issue_events_233557.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-05T13:51:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233557"
}
```



---

archive/issue_comments_210655.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi Nathann,\n\nI do not like the fact that we would have to cache everything. Could we instead cache the construction? In other words, have a function\n\n```\n@cached_function\ndef orthogonal_array_construction(n):\n    r\"\"\"\n    Return a triple `(k,f,args)` such that `k` is the maximum value\n    such that Sage knows how to build a `OA(k,n)` and `f(*args)` actually\n    return this `OA(k,n)`.\n    \"\"\"\n```\nAdvantages:\n- that function can be use to speed up both boolean and designs answers of `orthogonal_array`.\n- we can remove the current cache from `find_wilson_decomposition*` and `TD_find_product_decomposition`\n- it might be used later on to draw the tree of constructions.\n\nI am not sure it is feasible, but without thinking too much, it looks like a good solution.\n\nVincent",
    "created_at": "2014-06-05T13:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210655",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi Nathann,

I do not like the fact that we would have to cache everything. Could we instead cache the construction? In other words, have a function

```
@cached_function
def orthogonal_array_construction(n):
    r"""
    Return a triple `(k,f,args)` such that `k` is the maximum value
    such that Sage knows how to build a `OA(k,n)` and `f(*args)` actually
    return this `OA(k,n)`.
    """
```
Advantages:
- that function can be use to speed up both boolean and designs answers of `orthogonal_array`.
- we can remove the current cache from `find_wilson_decomposition*` and `TD_find_product_decomposition`
- it might be used later on to draw the tree of constructions.

I am not sure it is feasible, but without thinking too much, it looks like a good solution.

Vincent



---

archive/issue_comments_210656.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYo !\n\n> I do not like the fact that we would have to cache everything.\n\nCould you have missed the 10 000 posts about a new flag for the `@`cached_method decorator ?\n\n> Could we instead cache the construction? In other words, have a function\n> \n> ```\n> @cached_function\n> def orthogonal_array_construction(n):\n>     r\"\"\"\n>     Return a triple `(k,f,args)` such that `k` is the maximum value\n>     such that Sage knows how to build a `OA(k,n)` and `f(*args)` actually\n>     return this `OA(k,n)`.\n>     \"\"\"\n> ```\n\nYou should not compute the largest k if you do not need to. If your function takes both k and n as an argument then it is Volker's idea.\n\nIt actually isn't a bad idea, if not for the fact that there is no reason why we should go that far to implement a caching mechanism in combinat.designs while the caching mechanism has nothing to do with designs.\n\nThe \"clean/proper\" solution is to implement a real caching mechanism for designs which takes k,n as input and answer accordingly, by only storing for each n the largest k that has been built so far, and the smallest k such that it has been proved that no OA(k,n) could built so far.\n\nThis is what I want to do eventually, but I first wanted to get the actual constructions in ..... This is not a definitive solution but it is not the moment to implement a caching mechanism either... There are features to get in, really ...\n\nNathann\n\nP.S. : When I say eventually I do not say \"in two years\". I say --> as soon as all the current patches are merged into Sage, along with the 4 constructions I have been keeping on my hard drive waiting for all these patches to be reviewed.",
    "created_at": "2014-06-05T14:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210656",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Yo !

> I do not like the fact that we would have to cache everything.

Could you have missed the 10 000 posts about a new flag for the `@`cached_method decorator ?

> Could we instead cache the construction? In other words, have a function
> 
> ```
> @cached_function
> def orthogonal_array_construction(n):
>     r"""
>     Return a triple `(k,f,args)` such that `k` is the maximum value
>     such that Sage knows how to build a `OA(k,n)` and `f(*args)` actually
>     return this `OA(k,n)`.
>     """
> ```

You should not compute the largest k if you do not need to. If your function takes both k and n as an argument then it is Volker's idea.

It actually isn't a bad idea, if not for the fact that there is no reason why we should go that far to implement a caching mechanism in combinat.designs while the caching mechanism has nothing to do with designs.

The "clean/proper" solution is to implement a real caching mechanism for designs which takes k,n as input and answer accordingly, by only storing for each n the largest k that has been built so far, and the smallest k such that it has been proved that no OA(k,n) could built so far.

This is what I want to do eventually, but I first wanted to get the actual constructions in ..... This is not a definitive solution but it is not the moment to implement a caching mechanism either... There are features to get in, really ...

Nathann

P.S. : When I say eventually I do not say "in two years". I say --> as soon as all the current patches are merged into Sage, along with the 4 constructions I have been keeping on my hard drive waiting for all these patches to be reviewed.



---

archive/issue_events_233558.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T14:14:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233558"
}
```



---

archive/issue_events_233559.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-05T14:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233559"
}
```



---

archive/issue_comments_210657.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOh, I forgot something : the other solution is of course to implement a `@`cached_method_with_conditions decorator which can filter the input.\n\nNathann",
    "created_at": "2014-06-05T14:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210657",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Oh, I forgot something : the other solution is of course to implement a `@`cached_method_with_conditions decorator which can filter the input.

Nathann



---

archive/issue_comments_210658.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt is now implemented in #16353 but Volker introduced a notion of morality in computer science and it seems that one is not allowed to write a function that could be used for possibly dark deeds.\n\nNathann",
    "created_at": "2014-06-05T16:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210658",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

It is now implemented in #16353 but Volker introduced a notion of morality in computer science and it seems that one is not allowed to write a function that could be used for possibly dark deeds.

Nathann



---

archive/issue_comments_210659.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI actually developed the same idea as yours while thinking a bit more about it. What we want to cache is something like `n -> (k1,OA,k2)` where `OA` is a OA(k1,n) and `k2` is such that Sage does not know how to compute OA(k2,n). And this feature looks very specific to design and I do not see how a decorator can handle that nicely.\n\nSo, if you are willing to use these `@`cached_method everywhere or even the one you wrote in #16353, there is a need for a big **TODO** saying that it is here for quick-and-dirty speedup.\n\nSo let's not talk to much about caching right now, I will look at the construction.\n\nVincent",
    "created_at": "2014-06-05T16:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210659",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

I actually developed the same idea as yours while thinking a bit more about it. What we want to cache is something like `n -> (k1,OA,k2)` where `OA` is a OA(k1,n) and `k2` is such that Sage does not know how to compute OA(k2,n). And this feature looks very specific to design and I do not see how a decorator can handle that nicely.

So, if you are willing to use these `@`cached_method everywhere or even the one you wrote in #16353, there is a need for a big **TODO** saying that it is here for quick-and-dirty speedup.

So let's not talk to much about caching right now, I will look at the construction.

Vincent



---

archive/issue_comments_210660.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYo !\n\n> I actually developed the same idea as yours while thinking a bit more about it. What we want to cache is something like `n -> (k1,OA,k2)` where `OA` is a OA(k1,n) and `k2` is such that Sage does not know how to compute OA(k2,n). And this feature looks very specific to design and I do not see how a decorator can handle that nicely.\n\nYes of course, this would be design-specific.\n\n> So, if you are willing to use these `@`cached_method everywhere or even the one you wrote in #16353, there is a need for a big **TODO** saying that it is here for quick-and-dirty speedup.\n\nWhat was done here is quick but not dirty. We cache too much, but that's much better than not caching anything at all because all functions would become useless. What I implemented in #16353 is NOT quick and dirty, it is the most generic way to solve our problem here. Anything more would be design-specific and that's where it would actually become to be ugly, because it would just be \"for our own purposes\" with global variabls everywhere ....\n\n> So let's not talk to much about caching right now, I will look at the construction.\n\nYes, please do. But remember that there are many dependencies to this patch that have to be reviewed first.\n\nNathann",
    "created_at": "2014-06-05T16:33:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210660",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Yo !

> I actually developed the same idea as yours while thinking a bit more about it. What we want to cache is something like `n -> (k1,OA,k2)` where `OA` is a OA(k1,n) and `k2` is such that Sage does not know how to compute OA(k2,n). And this feature looks very specific to design and I do not see how a decorator can handle that nicely.

Yes of course, this would be design-specific.

> So, if you are willing to use these `@`cached_method everywhere or even the one you wrote in #16353, there is a need for a big **TODO** saying that it is here for quick-and-dirty speedup.

What was done here is quick but not dirty. We cache too much, but that's much better than not caching anything at all because all functions would become useless. What I implemented in #16353 is NOT quick and dirty, it is the most generic way to solve our problem here. Anything more would be design-specific and that's where it would actually become to be ugly, because it would just be "for our own purposes" with global variabls everywhere ....

> So let's not talk to much about caching right now, I will look at the construction.

Yes, please do. But remember that there are many dependencies to this patch that have to be reviewed first.

Nathann



---

archive/issue_comments_210661.json:
```json
{
    "body": "Changed dependencies from **#16391, #16373** to **#16391, #16373, #16460**",
    "created_at": "2014-06-10T10:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210661",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16391, #16373** to **#16391, #16373, #16460**



---

archive/issue_comments_210662.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,6 @@\n Heeeeeeeere it is ! The new construction !\n \n-As a result, the MOLS table really took a lifetime to fill. So I turned TD and OA into cached functions and they give their answer MUCH faster. The bad side is that it also cached the OA/TD, and this is not necessarily a good idea. The idea would be to cache ONLY the boolean/integer answers, but I do not know how right now.\n-\n-Anyway caching the OA/TD is not as bad as it seems, for it will only build those who are useful in some construction the users asks. When an OA is not useful, a existence check is made before building the actual design, so this is cool !\n-\n-I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs (see also the following threads on sage-devel [cached_function: a filter to only cache some inputs ?](https://groups.google.com/forum/#!topic/sage-devel/OPe5VJpBiB4) and [cached_function: cache a(n) only when n is *not* a prime power](https://groups.google.com/forum/#!topic/sage-devel/rnqhwGk6e0E)).\n-\n-Note that MOLS is not a cached_function, because they output matrix objects .... Does not matter much anyway, the MOLS constructor does not contain much.\n+As a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.\n \n Nathann\n \n``````\n",
    "created_at": "2014-06-10T10:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210662",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,6 @@
 Heeeeeeeere it is ! The new construction !
 
-As a result, the MOLS table really took a lifetime to fill. So I turned TD and OA into cached functions and they give their answer MUCH faster. The bad side is that it also cached the OA/TD, and this is not necessarily a good idea. The idea would be to cache ONLY the boolean/integer answers, but I do not know how right now.
-
-Anyway caching the OA/TD is not as bad as it seems, for it will only build those who are useful in some construction the users asks. When an OA is not useful, a existence check is made before building the actual design, so this is cool !
-
-I asked on #15657 if the guys there knew a way to tune cached_function to only cache some inputs (see also the following threads on sage-devel [cached_function: a filter to only cache some inputs ?](https://groups.google.com/forum/#!topic/sage-devel/OPe5VJpBiB4) and [cached_function: cache a(n) only when n is *not* a prime power](https://groups.google.com/forum/#!topic/sage-devel/rnqhwGk6e0E)).
-
-Note that MOLS is not a cached_function, because they output matrix objects .... Does not matter much anyway, the MOLS constructor does not contain much.
+As a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.
 
 Nathann
 
``````




---

archive/issue_comments_210663.json:
```json
{
    "body": "Changed dependencies from **#16391, #16373, #16460** to **#16373**",
    "created_at": "2014-06-13T11:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210663",
    "user": "https://github.com/nathanncohen"
}
```

Changed dependencies from **#16391, #16373, #16460** to **#16373**



---

archive/issue_comments_210664.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nRebased on top of #16373, all in one commit !\n\nNathann",
    "created_at": "2014-06-13T11:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210664",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Rebased on top of #16373, all in one commit !

Nathann



---

archive/issue_comments_210665.json:
```json
{
    "body": "Changed commit from **[`2e46351`](https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373)** to **[`004833a`](https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283)**",
    "created_at": "2014-06-13T11:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210665",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2e46351`](https://github.com/sagemath/sagetrac-mirror/commit/2e463514ceb2fb48d3c6fdc2a3391055bfafe373)** to **[`004833a`](https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283)**



---

archive/issue_comments_210666.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8704b9cdc1c8ae606f81b8613da6db379061a51b\"><code>8704b9c</code></a></td><td><code>trac #16361: merge updated #16461</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/767e0911107e5b374ad182acd0e5dac79ae8c874\"><code>767e091</code></a></td><td><code>trac #16388: Specify the values of k,n in the exceptions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a46016940e56a1d56bb0542c1320f87c057862da\"><code>a460169</code></a></td><td><code>merge Sage version 6.3.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c365a39d76ea00e63e1f11de86ad3474fc3f77b9\"><code>c365a39</code></a></td><td><code>trac #16388: use format for OA + specify (k,n) for BIBD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec26ca23d2549d6dc111c6d69d03df739115ee9f\"><code>ec26ca2</code></a></td><td><code>trac #16388: a missing one in BIBD_from_TD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79178b62b55c9d38b4ee015118e1cbc6acefb8f8\"><code>79178b6</code></a></td><td><code>trac #16388: (v,k,1)-BIBD instead of BIBD(v,k,1)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02ecf51a3101880f34db39cf4ed38f19c7fd34f3\"><code>02ecf51</code></a></td><td><code>trac #16361: Merged with #16388</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d4607aad0675c6ea4afd914796bc78d043a1600\"><code>5d4607a</code></a></td><td><code>trac #16361: Don't re-raise the exceptions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/541269b79a442543bc7351cc3d96972d1ba717c0\"><code>541269b</code></a></td><td><code>trac #16373: merge #16361</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283\"><code>004833a</code></a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr></table>\n",
    "created_at": "2014-06-13T11:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210666",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8704b9cdc1c8ae606f81b8613da6db379061a51b"><code>8704b9c</code></a></td><td><code>trac #16361: merge updated #16461</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/767e0911107e5b374ad182acd0e5dac79ae8c874"><code>767e091</code></a></td><td><code>trac #16388: Specify the values of k,n in the exceptions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a46016940e56a1d56bb0542c1320f87c057862da"><code>a460169</code></a></td><td><code>merge Sage version 6.3.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c365a39d76ea00e63e1f11de86ad3474fc3f77b9"><code>c365a39</code></a></td><td><code>trac #16388: use format for OA + specify (k,n) for BIBD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec26ca23d2549d6dc111c6d69d03df739115ee9f"><code>ec26ca2</code></a></td><td><code>trac #16388: a missing one in BIBD_from_TD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79178b62b55c9d38b4ee015118e1cbc6acefb8f8"><code>79178b6</code></a></td><td><code>trac #16388: (v,k,1)-BIBD instead of BIBD(v,k,1)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02ecf51a3101880f34db39cf4ed38f19c7fd34f3"><code>02ecf51</code></a></td><td><code>trac #16361: Merged with #16388</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d4607aad0675c6ea4afd914796bc78d043a1600"><code>5d4607a</code></a></td><td><code>trac #16361: Don't re-raise the exceptions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/541269b79a442543bc7351cc3d96972d1ba717c0"><code>541269b</code></a></td><td><code>trac #16373: merge #16361</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283"><code>004833a</code></a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr></table>




---

archive/issue_comments_210667.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,3 @@\n As a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.\n \n Nathann\n-\n-TODO : Update #16423 when this patch is reviewed\n``````\n",
    "created_at": "2014-06-18T16:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210667",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,3 @@
 As a result, the MOLS table really took a lifetime to fill. This is fixed by caching the OA that Sage can build, a new feature from #16460.
 
 Nathann
-
-TODO : Update #16423 when this patch is reviewed
``````




---

archive/issue_comments_210668.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03\"><code>f5069f0</code></a></td><td><code>trac #16347: Merged with 6.3.beta4</code></td></tr></table>\n",
    "created_at": "2014-06-19T14:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210668",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03"><code>f5069f0</code></a></td><td><code>trac #16347: Merged with 6.3.beta4</code></td></tr></table>




---

archive/issue_comments_210669.json:
```json
{
    "body": "Changed commit from **[`004833a`](https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283)** to **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)**",
    "created_at": "2014-06-19T14:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210669",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`004833a`](https://github.com/sagemath/sagetrac-mirror/commit/004833af803033e08e71011d4e69462de8909283)** to **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)**



---

archive/issue_events_233560.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-23T20:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233560"
}
```



---

archive/issue_events_233561.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-23T20:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233561"
}
```



---

archive/issue_comments_210670.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHi Nathann,\n\nI did several things at `public/16347`. But I still need to understand more the Wilson construction.\n\nThe only construction that does not belong to `orthogonal_array` is the product construction (which can be seen as a particular case of wilson construction). What do you think if we move it to `orthogonal_array` and remove the `who_asked` stuff? It would be much more readable.\n\nEDIT: more precisely, all constructions in `mutually_orthogonal_latin_squares` and `transversal_design` comes from the database except the product construction. As your Wilson construction can be used for the product we can move **all** recursive constructions in `orthogonal_array` and remove the `who_asked` argument in all these functions.\n\nVincent",
    "created_at": "2014-06-23T20:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210670",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Hi Nathann,

I did several things at `public/16347`. But I still need to understand more the Wilson construction.

The only construction that does not belong to `orthogonal_array` is the product construction (which can be seen as a particular case of wilson construction). What do you think if we move it to `orthogonal_array` and remove the `who_asked` stuff? It would be much more readable.

EDIT: more precisely, all constructions in `mutually_orthogonal_latin_squares` and `transversal_design` comes from the database except the product construction. As your Wilson construction can be used for the product we can move **all** recursive constructions in `orthogonal_array` and remove the `who_asked` argument in all these functions.

Vincent



---

archive/issue_events_233562.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-24T08:24:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233562"
}
```



---

archive/issue_events_233563.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-24T08:24:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233563"
}
```



---

archive/issue_comments_210671.json:
```json
{
    "body": "Changed commit from **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)** to **[`1d1a476`](https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380)**",
    "created_at": "2014-06-24T08:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210671",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)** to **[`1d1a476`](https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380)**



---

archive/issue_comments_210672.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYo !\n\n> I did several things at `public/16347`. But I still need to understand more the Wilson construction.\n\nI took a picture of a drawing I made, hoping that it helps.\n\nhttp://www.steinertriples.fr/ncohen/tmp/photo1.jpg\n\n> The only construction that does not belong to `orthogonal_array` is the product construction (which can be seen as a particular case of wilson construction). What do you think if we move it to `orthogonal_array` and remove the `who_asked` stuff? It would be much more readable.\n\nI agree, I agree. I intended to do this at some point, but.. Well... When the current patches will be reviewed, etc etc ...\n\nActually, tickets #16500 and #16503 create a file named `orthogonal_arrays_recursive.py` which contain many pairs construction/find_parameters. I intended to move the \"find decompositions\" that we already have in other files there (e.g. the one implemented here, and the `find_product_decomposition`), and indeed to rewrite this last TD construction for OA.\n\nIt will be done. For everty patch that you review I will write another one that does one of these things `:-P`\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03c1f4515b266f11e905136d6bda9a9de126b322\"><code>03c1f45</code></a></td><td><code>trac #16430: Small speedup for OA(None,p^c)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e8a9f3226e5ee5815e40156bd71286998476ff0\"><code>8e8a9f3</code></a></td><td><code>trac #16430: Merged with 6.3.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/162b83c0772a9c2a02eb3cea71028e8d14a6c0a7\"><code>162b83c</code></a></td><td><code>trac #16430: Many bugfixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036\"><code>3e01acb</code></a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a\"><code>81b9448</code></a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3f9702840c197937865d728f596549606c811ea\"><code>d3f9702</code></a></td><td><code>trac #16347: merge #16430</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bcbe6f8ccf62f502a96fc8442ef2c0bd87467c5\"><code>8bcbe6f</code></a></td><td><code>trac #16437: fix MOLS table doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49169d5da071b718c8e9340abf29af34f730ab5c\"><code>49169d5</code></a></td><td><code>trac #16437: use is_sum_of_two_squares and fix error msg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380\"><code>1d1a476</code></a></td><td><code>trac #16347: optimize find_wilson_decomposition</code></td></tr></table>\n",
    "created_at": "2014-06-24T08:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210672",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

Yo !

> I did several things at `public/16347`. But I still need to understand more the Wilson construction.

I took a picture of a drawing I made, hoping that it helps.

http://www.steinertriples.fr/ncohen/tmp/photo1.jpg

> The only construction that does not belong to `orthogonal_array` is the product construction (which can be seen as a particular case of wilson construction). What do you think if we move it to `orthogonal_array` and remove the `who_asked` stuff? It would be much more readable.

I agree, I agree. I intended to do this at some point, but.. Well... When the current patches will be reviewed, etc etc ...

Actually, tickets #16500 and #16503 create a file named `orthogonal_arrays_recursive.py` which contain many pairs construction/find_parameters. I intended to move the "find decompositions" that we already have in other files there (e.g. the one implemented here, and the `find_product_decomposition`), and indeed to rewrite this last TD construction for OA.

It will be done. For everty patch that you review I will write another one that does one of these things `:-P`

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03c1f4515b266f11e905136d6bda9a9de126b322"><code>03c1f45</code></a></td><td><code>trac #16430: Small speedup for OA(None,p^c)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e8a9f3226e5ee5815e40156bd71286998476ff0"><code>8e8a9f3</code></a></td><td><code>trac #16430: Merged with 6.3.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/162b83c0772a9c2a02eb3cea71028e8d14a6c0a7"><code>162b83c</code></a></td><td><code>trac #16430: Many bugfixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036"><code>3e01acb</code></a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a"><code>81b9448</code></a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3f9702840c197937865d728f596549606c811ea"><code>d3f9702</code></a></td><td><code>trac #16347: merge #16430</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bcbe6f8ccf62f502a96fc8442ef2c0bd87467c5"><code>8bcbe6f</code></a></td><td><code>trac #16437: fix MOLS table doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49169d5da071b718c8e9340abf29af34f730ab5c"><code>49169d5</code></a></td><td><code>trac #16437: use is_sum_of_two_squares and fix error msg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380"><code>1d1a476</code></a></td><td><code>trac #16347: optimize find_wilson_decomposition</code></td></tr></table>




---

archive/issue_comments_210673.json:
```json
{
    "body": "Changed branch from **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)** to **[public/16347](https://github.com/sagemath/sagetrac-mirror/tree/public/16347)**",
    "created_at": "2014-06-24T08:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210673",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)** to **[public/16347](https://github.com/sagemath/sagetrac-mirror/tree/public/16347)**



---

archive/issue_comments_210674.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4\"><code>d93a97c</code></a></td><td><code>trac #16347: more docs + simplifications</code></td></tr></table>\n",
    "created_at": "2014-06-24T11:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210674",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4"><code>d93a97c</code></a></td><td><code>trac #16347: more docs + simplifications</code></td></tr></table>




---

archive/issue_comments_210675.json:
```json
{
    "body": "Changed commit from **[`1d1a476`](https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380)** to **[`d93a97c`](https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4)**",
    "created_at": "2014-06-24T11:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d1a476`](https://github.com/sagemath/sagetrac-mirror/commit/1d1a476fe12b2cca3e7249b092582e2a16005380)** to **[`d93a97c`](https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4)**



---

archive/issue_comments_210676.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nMore changes on public if you agree...\n\nQuestions:\n- I do not understand why you output `n` in `find_wilson_decomposition_with_one_truncated_group`\n- I do not understand why you output `k` in `find_wilson_decomposition_with_two_truncated_groups`\n\nI would rather output `(r,m,(r1,))` and `(r,m,(r1,r2))`. That way the call would be uniform in `orthogonal_array`... and you should decide between `r1,r2` and `u1,u2`.\n\nVincent\n\nPS: right now I am going to teach ctypes and cython, so I will not look at it again until tonight.",
    "created_at": "2014-06-24T11:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210676",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

More changes on public if you agree...

Questions:
- I do not understand why you output `n` in `find_wilson_decomposition_with_one_truncated_group`
- I do not understand why you output `k` in `find_wilson_decomposition_with_two_truncated_groups`

I would rather output `(r,m,(r1,))` and `(r,m,(r1,r2))`. That way the call would be uniform in `orthogonal_array`... and you should decide between `r1,r2` and `u1,u2`.

Vincent

PS: right now I am going to teach ctypes and cython, so I will not look at it again until tonight.



---

archive/issue_comments_210677.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYo !\n\n> More changes on public if you agree...\n\nThey look good ! Except for tho things :\n\n```\nFinds a wilson decomposition to build an `OA(k,n)` with one truncated column\n```\n\nHere one can understand that the purpose of the function is to build a truncated OA....\n\n```\n+    Then there exists an `OA(k,rm+\\sum u_i)`. This construction is a\n+    straightforward generalization of Lemma 3.16 of [HananiBIBD]_.\n```\n\nIt is only straightforward when one tells you what there is to find `:-P`\n\n> - I do not understand why you output `n` in `find_wilson_decomposition_with_one_truncated_group`\n> - I do not understand why you output `k` in `find_wilson_decomposition_with_two_truncated_groups`\n\nHistorical resons I would say. You just changed the inputs used by Wilson's construction, I did it too before, and I did not think necessary to update the related functions ...\n\n> I would rather output `(r,m,(r1,))` and `(r,m,(r1,r2))`. That way the call would be uniform in `orthogonal_array`... and you should decide between `r1,r2` and `u1,u2`.\n\nIf you sleep better this way you can update them. Really it is only internal stuff, I thought that we could make them private functions at some point.. I do not care as long as the designs are produced `:-P`\n\nBy the way, #16500 defines a `find_recursive_construction` is `orthogonal_array_recursive.py` which calls all recursive constructions. The plan was to move the two `find_wilson_decomposition*` to this file later, and this will require to change their output again.\n\n> PS: right now I am going to teach ctypes and cython, so I will not look at it again until tonight.\n\nGood luck ! And show them \n\n```\nsage -cython -a my_file.pyx # produces a html file whose lines are clickable\n```\nthat's really cool !\n\nNathann",
    "created_at": "2014-06-24T12:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210677",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

Yo !

> More changes on public if you agree...

They look good ! Except for tho things :

```
Finds a wilson decomposition to build an `OA(k,n)` with one truncated column
```

Here one can understand that the purpose of the function is to build a truncated OA....

```
+    Then there exists an `OA(k,rm+\sum u_i)`. This construction is a
+    straightforward generalization of Lemma 3.16 of [HananiBIBD]_.
```

It is only straightforward when one tells you what there is to find `:-P`

> - I do not understand why you output `n` in `find_wilson_decomposition_with_one_truncated_group`
> - I do not understand why you output `k` in `find_wilson_decomposition_with_two_truncated_groups`

Historical resons I would say. You just changed the inputs used by Wilson's construction, I did it too before, and I did not think necessary to update the related functions ...

> I would rather output `(r,m,(r1,))` and `(r,m,(r1,r2))`. That way the call would be uniform in `orthogonal_array`... and you should decide between `r1,r2` and `u1,u2`.

If you sleep better this way you can update them. Really it is only internal stuff, I thought that we could make them private functions at some point.. I do not care as long as the designs are produced `:-P`

By the way, #16500 defines a `find_recursive_construction` is `orthogonal_array_recursive.py` which calls all recursive constructions. The plan was to move the two `find_wilson_decomposition*` to this file later, and this will require to change their output again.

> PS: right now I am going to teach ctypes and cython, so I will not look at it again until tonight.

Good luck ! And show them 

```
sage -cython -a my_file.pyx # produces a html file whose lines are clickable
```
that's really cool !

Nathann



---

archive/issue_comments_210678.json:
```json
{
    "body": "Changed commit from **[`d93a97c`](https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4)** to **[`80bbb95`](https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5)**",
    "created_at": "2014-06-24T22:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210678",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d93a97c`](https://github.com/sagemath/sagetrac-mirror/commit/d93a97c5abb48f3f5067c516ca0b133b52146da4)** to **[`80bbb95`](https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5)**



---

archive/issue_comments_210679.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b83dd746367eef4609d95e8c8c68ed6e3f846d1e\"><code>b83dd74</code></a></td><td><code>trac #16347: author comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5\"><code>80bbb95</code></a></td><td><code>trac #16347: get rid of who_asked</code></td></tr></table>\n",
    "created_at": "2014-06-24T22:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210679",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b83dd746367eef4609d95e8c8c68ed6e3f846d1e"><code>b83dd74</code></a></td><td><code>trac #16347: author comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5"><code>80bbb95</code></a></td><td><code>trac #16347: get rid of who_asked</code></td></tr></table>




---

archive/issue_comments_210680.json:
```json
{
    "body": "Changed commit from **[`80bbb95`](https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5)** to **[`cb67ae6`](https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db)**",
    "created_at": "2014-06-24T23:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210680",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`80bbb95`](https://github.com/sagemath/sagetrac-mirror/commit/80bbb95e063a1105007ecb6fb61d1b08b34d6ca5)** to **[`cb67ae6`](https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db)**



---

archive/issue_comments_210681.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db\"><code>cb67ae6</code></a></td><td><code>trac #16347: fix doctest and speedup find_wilson</code></td></tr></table>\n",
    "created_at": "2014-06-24T23:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210681",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db"><code>cb67ae6</code></a></td><td><code>trac #16347: fix doctest and speedup find_wilson</code></td></tr></table>




---

archive/issue_comments_210682.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nHi Nathann,\n\nIt is much clearer now without the `who_asked`. I did a bit of speedup in `find_wilson_*` and the test in `latin_squares` run in 11sec instead of 17sec. Not yet marvelous but not bad. It would be nice to spend some time there as most of the time is clearly spent in looking for decompositions.\n\n(I messed up the case of `k=1` in the intermediate commit... so they are not relevant)\n\nVincent",
    "created_at": "2014-06-24T23:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210682",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Hi Nathann,

It is much clearer now without the `who_asked`. I did a bit of speedup in `find_wilson_*` and the test in `latin_squares` run in 11sec instead of 17sec. Not yet marvelous but not bad. It would be nice to spend some time there as most of the time is clearly spent in looking for decompositions.

(I messed up the case of `k=1` in the intermediate commit... so they are not relevant)

Vincent



---

archive/issue_comments_210683.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nYo.\n\n> It is much clearer now without the `who_asked`. I did a bit of speedup in `find_wilson_*` and the test in `latin_squares` run in 11sec instead of 17sec. Not yet marvelous but not bad. It would be nice to spend some time there as most of the time is clearly spent in looking for decompositions.\n> \n> (I messed up the case of `k=1` in the intermediate commit... so they are not relevant)\n\nSeveral values decreased in the table of mols.\n\nBtw, you should have opened another ticket to remove `who_asked` and move functions around.\n\nNathann",
    "created_at": "2014-06-25T07:56:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210683",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

Yo.

> It is much clearer now without the `who_asked`. I did a bit of speedup in `find_wilson_*` and the test in `latin_squares` run in 11sec instead of 17sec. Not yet marvelous but not bad. It would be nice to spend some time there as most of the time is clearly spent in looking for decompositions.
> 
> (I messed up the case of `k=1` in the intermediate commit... so they are not relevant)

Several values decreased in the table of mols.

Btw, you should have opened another ticket to remove `who_asked` and move functions around.

Nathann



---

archive/issue_comments_210684.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nWhat the hell is this `find_wilson_decomposition` function ? I told you that I had already written the very same thing in #16500 !!\n\nNathann",
    "created_at": "2014-06-25T08:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210684",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

What the hell is this `find_wilson_decomposition` function ? I told you that I had already written the very same thing in #16500 !!

Nathann



---

archive/issue_comments_210685.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nOkay, could you move the last two commits to a different patch, *above* those that are aready in `needs_review` ?\n\nNathann",
    "created_at": "2014-06-25T08:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210685",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>

Okay, could you move the last two commits to a different patch, *above* those that are aready in `needs_review` ?

Nathann



---

archive/issue_comments_210686.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAll right...",
    "created_at": "2014-06-25T09:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210686",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

All right...



---

archive/issue_events_233564.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-25T09:27:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233564"
}
```



---

archive/issue_events_233565.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-06-25T09:27:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233565"
}
```



---

archive/issue_comments_210687.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nHi Nathann,\n\nThere is something that I do not understand. After the merge of #16430 the MOLS table gets better... but it is fake\n\n```\nsage: designs.orthogonal_array(8,66,existence=True)\nTrue\nsage: designs.orthogonal_array(8,66)\nTraceback (most recent call last):\n...\nAssertionError\n```\n\nSo please do the merge yourself from f5069f0. I will adapt the review from there.\n\nVincent",
    "created_at": "2014-06-25T09:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210687",
    "user": "https://github.com/videlec"
}
```

<div id="comment:37" align="right">comment:37</div>

Hi Nathann,

There is something that I do not understand. After the merge of #16430 the MOLS table gets better... but it is fake

```
sage: designs.orthogonal_array(8,66,existence=True)
True
sage: designs.orthogonal_array(8,66)
Traceback (most recent call last):
...
AssertionError
```

So please do the merge yourself from f5069f0. I will adapt the review from there.

Vincent



---

archive/issue_comments_210688.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYo !\n\n> So please do the merge yourself from f5069f0.\n\n....\n\nNow I have to fix the bugs you meet when you do a merge ?...\n\nNathann",
    "created_at": "2014-06-25T09:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210688",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:38" align="right">comment:38</div>

Yo !

> So please do the merge yourself from f5069f0.

....

Now I have to fix the bugs you meet when you do a merge ?...

Nathann



---

archive/issue_comments_210689.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@nathanncohen](#comment:38):\n> Yo !\n> \n> > So please do the merge yourself from f5069f0.\n\n> \n> ....\n> \n> Now I have to fix the bugs you meet when you do a merge ?...\n\nNope. The merge with #16430 just fails. f5069f0 is your commit before I started the review. I can dig to find what is the problem here but you should be able to find better than me what is the problem...",
    "created_at": "2014-06-25T09:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210689",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@nathanncohen](#comment:38):
> Yo !
> 
> > So please do the merge yourself from f5069f0.

> 
> ....
> 
> Now I have to fix the bugs you meet when you do a merge ?...

Nope. The merge with #16430 just fails. f5069f0 is your commit before I started the review. I can dig to find what is the problem here but you should be able to find better than me what is the problem...



---

archive/issue_comments_210690.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOkay, here it is. There was a problem in `find_wilson_decomposition_with_two_truncated_groups`, a variable was being assigned negative values.\n\nFixed in the updated branch which rebases history. I will also need to rewrite the branches above this one.\n\nNathann\n\nP.S. : I pushed the changes on u/ncohen/16347 because pushing on the public one may have deleted commits, though you probably have them on your computer.",
    "created_at": "2014-06-25T10:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210690",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:40" align="right">comment:40</div>

Okay, here it is. There was a problem in `find_wilson_decomposition_with_two_truncated_groups`, a variable was being assigned negative values.

Fixed in the updated branch which rebases history. I will also need to rewrite the branches above this one.

Nathann

P.S. : I pushed the changes on u/ncohen/16347 because pushing on the public one may have deleted commits, though you probably have them on your computer.



---

archive/issue_comments_210691.json:
```json
{
    "body": "Changed commit from **[`cb67ae6`](https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db)** to **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)**",
    "created_at": "2014-06-25T10:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210691",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`cb67ae6`](https://github.com/sagemath/sagetrac-mirror/commit/cb67ae69db6ed23971e2ba8eceeebe1e72f714db)** to **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)**



---

archive/issue_events_233566.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-25T10:00:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233566"
}
```



---

archive/issue_events_233567.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-25T10:00:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233567"
}
```



---

archive/issue_comments_210692.json:
```json
{
    "body": "Changed branch from **[public/16347](https://github.com/sagemath/sagetrac-mirror/tree/public/16347)** to **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)**",
    "created_at": "2014-06-25T10:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210692",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[public/16347](https://github.com/sagemath/sagetrac-mirror/tree/public/16347)** to **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)**



---

archive/issue_comments_210693.json:
```json
{
    "body": "Changed commit from **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)** to **[`0fa89d5`](https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432)**",
    "created_at": "2014-06-25T10:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f5069f0`](https://github.com/sagemath/sagetrac-mirror/commit/f5069f0dd30bd698489fa047b6fdabd7b8cdaf03)** to **[`0fa89d5`](https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432)**



---

archive/issue_comments_210694.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03c1f4515b266f11e905136d6bda9a9de126b322\"><code>03c1f45</code></a></td><td><code>trac #16430: Small speedup for OA(None,p^c)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e8a9f3226e5ee5815e40156bd71286998476ff0\"><code>8e8a9f3</code></a></td><td><code>trac #16430: Merged with 6.3.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/162b83c0772a9c2a02eb3cea71028e8d14a6c0a7\"><code>162b83c</code></a></td><td><code>trac #16430: Many bugfixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036\"><code>3e01acb</code></a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a\"><code>81b9448</code></a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432\"><code>0fa89d5</code></a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr></table>\n",
    "created_at": "2014-06-25T10:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210694",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03c1f4515b266f11e905136d6bda9a9de126b322"><code>03c1f45</code></a></td><td><code>trac #16430: Small speedup for OA(None,p^c)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e8a9f3226e5ee5815e40156bd71286998476ff0"><code>8e8a9f3</code></a></td><td><code>trac #16430: Merged with 6.3.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/162b83c0772a9c2a02eb3cea71028e8d14a6c0a7"><code>162b83c</code></a></td><td><code>trac #16430: Many bugfixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e01acb6cc2f189d606f6877264f7d635a9a2036"><code>3e01acb</code></a></td><td><code>trac #16430: micro improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b9448a730769e28af52c3ea36faa5b8156232a"><code>81b9448</code></a></td><td><code>trac #16430: put back the seealso</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432"><code>0fa89d5</code></a></td><td><code>trac #16347: Wilson's construction with two truncated groups</code></td></tr></table>




---

archive/issue_comments_210695.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThank you!",
    "created_at": "2014-06-25T10:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210695",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Thank you!



---

archive/issue_comments_210696.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nMore reasonable review at `public/16347-bis`. If you like it enough, set to positive review.\n\nVincent",
    "created_at": "2014-06-25T10:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210696",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

More reasonable review at `public/16347-bis`. If you like it enough, set to positive review.

Vincent



---

archive/issue_comments_210697.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nYo !\n\n> More reasonable review at `public/16347-bis`. If you like it enough, set to positive review.\n\nI agree with the latest two commits but when it comes to the modifications made in `find_wilson_decomposition_with_two_truncated_groups` I believe that you are really making the code harder to read for almost no improvement. You add 6 lines to replace one, and this only to avoid calling `orthogonal_arrays` several times, knowing that all calls would answer instantly (they do the check that \"n<=1 or k<n+1\" each time).\n\nWhen `n` is not a prime power, I expect that `orthogonal_array(n+1,n,existence=True)` is much more costly than all `orthogonal_array(n+1,n_prime,existence=True)` for `n_prime<n` combined (all straightforward 'no').\n\nReally, that's not where the performance is hidden. The next patch improves things a lot, and the next patch on recursive constructions make things a lot worse. There will be profiling to do there, but really that's not where performance is to be found.\n\nNathann",
    "created_at": "2014-06-25T11:11:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210697",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Yo !

> More reasonable review at `public/16347-bis`. If you like it enough, set to positive review.

I agree with the latest two commits but when it comes to the modifications made in `find_wilson_decomposition_with_two_truncated_groups` I believe that you are really making the code harder to read for almost no improvement. You add 6 lines to replace one, and this only to avoid calling `orthogonal_arrays` several times, knowing that all calls would answer instantly (they do the check that "n<=1 or k<n+1" each time).

When `n` is not a prime power, I expect that `orthogonal_array(n+1,n,existence=True)` is much more costly than all `orthogonal_array(n+1,n_prime,existence=True)` for `n_prime<n` combined (all straightforward 'no').

Really, that's not where the performance is hidden. The next patch improves things a lot, and the next patch on recursive constructions make things a lot worse. There will be profiling to do there, but really that's not where performance is to be found.

Nathann



---

archive/issue_comments_210698.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\n(There are broken doctests in `block_design.py`)",
    "created_at": "2014-06-25T11:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210698",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:45" align="right">comment:45</div>

(There are broken doctests in `block_design.py`)



---

archive/issue_comments_210699.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@nathanncohen](#comment:44):\n> Yo !\n> \n> > More reasonable review at `public/16347-bis`. If you like it enough, set to positive review.\n\n> \n> I agree with the latest two commits but when it comes to the modifications made in `find_wilson_decomposition_with_two_truncated_groups` I believe that you are really making the code harder to read for almost no improvement. You add 6 lines to replace one, and this only to avoid calling `orthogonal_arrays` several times, knowing that all calls would answer instantly (they do the check that \"n<=1 or k<n+1\" each time).\n> \n> When `n` is not a prime power, I expect that `orthogonal_array(n+1,n,existence=True)` is much more costly than all `orthogonal_array(n+1,n_prime,existence=True)` for `n_prime<n` combined (all straightforward 'no').\n> \n> Really, that's not where the performance is hidden. The next patch improves things a lot, and the next patch on recursive constructions make things a lot worse. There will be profiling to do there, but really that's not where performance is to be found.\n\nThen, why after the commit is it 30% faster to construct the MOLS table?\n\nEDIT: and I have no doctest error.\n\nVincent",
    "created_at": "2014-06-25T11:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210699",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@nathanncohen](#comment:44):
> Yo !
> 
> > More reasonable review at `public/16347-bis`. If you like it enough, set to positive review.

> 
> I agree with the latest two commits but when it comes to the modifications made in `find_wilson_decomposition_with_two_truncated_groups` I believe that you are really making the code harder to read for almost no improvement. You add 6 lines to replace one, and this only to avoid calling `orthogonal_arrays` several times, knowing that all calls would answer instantly (they do the check that "n<=1 or k<n+1" each time).
> 
> When `n` is not a prime power, I expect that `orthogonal_array(n+1,n,existence=True)` is much more costly than all `orthogonal_array(n+1,n_prime,existence=True)` for `n_prime<n` combined (all straightforward 'no').
> 
> Really, that's not where the performance is hidden. The next patch improves things a lot, and the next patch on recursive constructions make things a lot worse. There will be profiling to do there, but really that's not where performance is to be found.

Then, why after the commit is it 30% faster to construct the MOLS table?

EDIT: and I have no doctest error.

Vincent



---

archive/issue_comments_210700.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nHere are the timings I got\n\nold timing before the branch cut (at 0fa89d5)\n\n```\nsage -t --long latin_squares.py\n    [36 tests, 17.83 s]\n```\nnew timings after the branch cut (at  828ff22)\n\n```\nsage -t --long latin_squares.py\n    [36 tests, 15.00 s]\n```",
    "created_at": "2014-06-25T11:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210700",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">comment:47</div>

Here are the timings I got

old timing before the branch cut (at 0fa89d5)

```
sage -t --long latin_squares.py
    [36 tests, 17.83 s]
```
new timings after the branch cut (at  828ff22)

```
sage -t --long latin_squares.py
    [36 tests, 15.00 s]
```



---

archive/issue_comments_210701.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nRight right it's faster this way, sorry for what I said. I find it weird, but still, it is faster `O_o`\n\nNathann",
    "created_at": "2014-06-25T11:39:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210701",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:48" align="right">comment:48</div>

Right right it's faster this way, sorry for what I said. I find it weird, but still, it is faster `O_o`

Nathann



---

archive/issue_comments_210702.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSorry, it was my fault again for the doctests too. Positive review then, thank you for your help !\n\nNathann",
    "created_at": "2014-06-25T11:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210702",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:49" align="right">comment:49</div>

Sorry, it was my fault again for the doctests too. Positive review then, thank you for your help !

Nathann



---

archive/issue_comments_210703.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2014-06-25T11:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210703",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_233568.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-25T11:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233568"
}
```



---

archive/issue_events_233569.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2014-06-25T11:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233569"
}
```



---

archive/issue_comments_210704.json:
```json
{
    "body": "Changed commit from **[`0fa89d5`](https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432)** to **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**",
    "created_at": "2014-06-25T11:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210704",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`0fa89d5`](https://github.com/sagemath/sagetrac-mirror/commit/0fa89d548f431a8929c76f3205bdb6c3779cf432)** to **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**



---

archive/issue_comments_210705.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b\"><code>828ff22</code></a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705\"><code>8ebd21b</code></a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154\"><code>0175134</code></a></td><td><code>trac #16347: doc + simplifications</code></td></tr></table>\n",
    "created_at": "2014-06-25T11:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210705",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:50"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/828ff220b83ce8427025bebe42bbc3aaa21ac28b"><code>828ff22</code></a></td><td><code>trac #16437: cut the branches in W. dec. with two trunc. blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ebd21be12c81b751a7f09067221bef01014b705"><code>8ebd21b</code></a></td><td><code>trac #16347: use is_sum_of_squares_pyx instead of two_squares</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154"><code>0175134</code></a></td><td><code>trac #16347: doc + simplifications</code></td></tr></table>




---

archive/issue_comments_210706.json:
```json
{
    "body": "Changed branch from **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)** to **[public/16347-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/16347-bis)**",
    "created_at": "2014-06-25T11:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210706",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/ncohen/16347](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/16347)** to **[public/16347-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/16347-bis)**



---

archive/issue_events_233570.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-26T01:50:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233570"
}
```



---

archive/issue_events_233571.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ed1063c1da912d633e3fff64cac792bd2074711a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-06-26T01:50:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16347#event-233571"
}
```



---

archive/issue_comments_210707.json:
```json
{
    "body": "Changed branch from **[public/16347-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/16347-bis)** to **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**",
    "created_at": "2014-06-26T01:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16347#issuecomment-210707",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/16347-bis](https://github.com/sagemath/sagetrac-mirror/tree/public/16347-bis)** to **[`0175134`](https://github.com/sagemath/sagetrac-mirror/commit/0175134767948882f3d8c2ea0a612161ed3d4154)**
