# Issue 16084: matplotlib dependency on pkgconf

archive/issues_015847.json:
```json
{
    "body": "The matplotlib dependency is wrong, this is probably the reason for the build failure on old OSX versions where it fails to find freetype. If you build serial / almost serial then pkgconf is not build before matplotlib. On highly parallel builds, pkgconf finishes much before matplotlib is started.\n\nCC:  @ppurka @kiwifb @kcrisman @seblabbe\n\nKeywords: days57\n\nBranch/Commit: 126c84e0d4ddb9b0dfd770d8f2136fa709c32130\n\nReviewer: John Palmieri, S\u00e9bastien Labb\u00e9\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16084\n\n",
    "closed_at": "2014-04-08T10:17:35Z",
    "created_at": "2014-04-07T14:47:55Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "matplotlib dependency on pkgconf",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16084",
    "user": "https://github.com/vbraun"
}
```
The matplotlib dependency is wrong, this is probably the reason for the build failure on old OSX versions where it fails to find freetype. If you build serial / almost serial then pkgconf is not build before matplotlib. On highly parallel builds, pkgconf finishes much before matplotlib is started.

CC:  @ppurka @kiwifb @kcrisman @seblabbe

Keywords: days57

Branch/Commit: 126c84e0d4ddb9b0dfd770d8f2136fa709c32130

Reviewer: John Palmieri, Sébastien Labbé

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16084





---

archive/issue_comments_261650.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vbraun/matplotlib_dependency_on_pkgconf\"",
    "created_at": "2014-04-07T14:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261650",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "" to "u/vbraun/matplotlib_dependency_on_pkgconf"



---

archive/issue_comments_261651.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+The matplotlib dependency is wrong, this is probably the reason for the build failure on old OSX versions where it fails to find freetype. If you build serial / almost serial then pkgconf is not build before matplotlib. On highly parallel builds, pkgconf finishes much before matplotlib is started.\n``````\n",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261651",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+The matplotlib dependency is wrong, this is probably the reason for the build failure on old OSX versions where it fails to find freetype. If you build serial / almost serial then pkgconf is not build before matplotlib. On highly parallel builds, pkgconf finishes much before matplotlib is started.
``````




---

archive/issue_comments_261652.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261652",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_261653.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261653",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261654.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[126c84e](http://git.sagemath.org/sage.git/commit/?id=126c84e0d4ddb9b0dfd770d8f2136fa709c32130)|`Matplotlib depends on pkgconf, not the pkgconfig python module`|",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261654",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[126c84e](http://git.sagemath.org/sage.git/commit/?id=126c84e0d4ddb9b0dfd770d8f2136fa709c32130)|`Matplotlib depends on pkgconf, not the pkgconfig python module`|



---

archive/issue_comments_261655.json:
```json
{
    "body": "Changing author from \"\" to \"Volker Braun\"",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261655",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Volker Braun"



---

archive/issue_comments_261656.json:
```json
{
    "body": "Changing commit from \"\" to \"126c84e0d4ddb9b0dfd770d8f2136fa709c32130\"",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261656",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "" to "126c84e0d4ddb9b0dfd770d8f2136fa709c32130"



---

archive/issue_comments_261657.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2014-04-07T14:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261657",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_261658.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2014-04-07T15:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261658",
    "user": "https://github.com/vbraun"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_261659.json:
```json
{
    "body": "Changing keywords from \"\" to \"days57\".",
    "created_at": "2014-04-07T15:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261659",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "days57".



---

archive/issue_comments_261660.json:
```json
{
    "body": "<a id='comment:6'></a>\nSee also #16047.  Thanks for tracking this down - was this simply a typo, then, in some sense?  Interesting.  Some people may also do serial builds due to heavy load or forgetting to set env vars, so this is good in any case.",
    "created_at": "2014-04-07T16:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261660",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
See also #16047.  Thanks for tracking this down - was this simply a typo, then, in some sense?  Interesting.  Some people may also do serial builds due to heavy load or forgetting to set env vars, so this is good in any case.



---

archive/issue_comments_261661.json:
```json
{
    "body": "<a id='comment:7'></a>\nYes, I was talking to Sebastien about #16047. I did a serial install and it worked with this ticket.",
    "created_at": "2014-04-07T16:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261661",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
Yes, I was talking to Sebastien about #16047. I did a serial install and it worked with this ticket.



---

archive/issue_comments_261662.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt's probably my fault. I think I read the descriptions of the `pkgconf` and `pkgconfig` packages and assumed, based on those, that `pkgconfig` would have `pkgconf` as a dependency. But it doesn't.",
    "created_at": "2014-04-07T16:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261662",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
It's probably my fault. I think I read the descriptions of the `pkgconf` and `pkgconfig` packages and assumed, based on those, that `pkgconfig` would have `pkgconf` as a dependency. But it doesn't.



---

archive/issue_comments_261663.json:
```json
{
    "body": "<a id='comment:9'></a>\npkgconf isn't a build-time dependency for the pkgconfig python library afaik. Only runtime.",
    "created_at": "2014-04-07T17:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261663",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
pkgconf isn't a build-time dependency for the pkgconfig python library afaik. Only runtime.



---

archive/issue_comments_261664.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2014-04-07T20:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261664",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_261665.json:
```json
{
    "body": "<a id='comment:10'></a>\nI see the same as [above](#comment%3A7): `make build-serial` failed without this because matplotlib tried to build with only `pkgconfig`, not `pkgconf`. With this, `make build-serial` worked.",
    "created_at": "2014-04-07T20:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261665",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
I see the same as [above](#comment%3A7): `make build-serial` failed without this because matplotlib tried to build with only `pkgconfig`, not `pkgconf`. With this, `make build-serial` worked.



---

archive/issue_comments_261666.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-07T20:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261666",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261667.json:
```json
{
    "body": "<a id='comment:11'></a>\nDoing `sage -f pkgconf` then `make` (serial) again allowed me to complete the compilation of beta6. So I confirm that the bug I [reported](https://groups.google.com/d/msg/sage-release/6s_fRG2xmRA/Z9uQY-c6X1IJ) on sage-release is fixed by adding pkgconf as a dependency to matplotlib. For removing `pkgconfig` as a dependency for matplotlib, I can't say anything but John does. So positive review!\n\nJohn beated me for the positive review because I lost some time while preparing and eating [P\u00e2t\u00e9 chinois](http://en.wikipedia.org/wiki/P%C3%A2t%C3%A9_chinois) at Sage Days 57:)",
    "created_at": "2014-04-07T21:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261667",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'></a>
Doing `sage -f pkgconf` then `make` (serial) again allowed me to complete the compilation of beta6. So I confirm that the bug I [reported](https://groups.google.com/d/msg/sage-release/6s_fRG2xmRA/Z9uQY-c6X1IJ) on sage-release is fixed by adding pkgconf as a dependency to matplotlib. For removing `pkgconfig` as a dependency for matplotlib, I can't say anything but John does. So positive review!

John beated me for the positive review because I lost some time while preparing and eating [Pâté chinois](http://en.wikipedia.org/wiki/P%C3%A2t%C3%A9_chinois) at Sage Days 57:)



---

archive/issue_comments_261668.json:
```json
{
    "body": "Changing reviewer from \"John Palmieri\" to \"John Palmieri, S\u00e9bastien Labb\u00e9\"",
    "created_at": "2014-04-07T21:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261668",
    "user": "https://github.com/seblabbe"
}
```

Changing reviewer from "John Palmieri" to "John Palmieri, Sébastien Labbé"



---

archive/issue_comments_261669.json:
```json
{
    "body": "<a id='comment:12'></a>\nAnd it got right past me when I was looking at original matplotlib upgrade ticket. Didn't notice one bit.",
    "created_at": "2014-04-07T21:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261669",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
And it got right past me when I was looking at original matplotlib upgrade ticket. Didn't notice one bit.



---

archive/issue_comments_261670.json:
```json
{
    "body": "Changing branch from \"u/vbraun/matplotlib_dependency_on_pkgconf\" to \"126c84e0d4ddb9b0dfd770d8f2136fa709c32130\"",
    "created_at": "2014-04-08T10:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261670",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vbraun/matplotlib_dependency_on_pkgconf" to "126c84e0d4ddb9b0dfd770d8f2136fa709c32130"



---

archive/issue_events_047370.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-08T10:17:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16084#event-47370"
}
```



---

archive/issue_comments_261671.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-08T10:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16084",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16084#issuecomment-261671",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
