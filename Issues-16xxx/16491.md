# Issue 16491: doctest trigonometric functions for complex input

archive/issues_016254.json:
```json
{
    "body": "This is a follow up to #16439.\n\n1. The functions `atan, acos, asin` give `TypeError` on Python `complex` input.\n\n2. The output of trigonometric functions are inconsistent depending on whether `complex` or `CDF` or `CC` is used as the input type.\n\nFrom #16439 discussion by `@`kcrisman:\n\nJust one point - almost certainly some of those digits are 'extra' from Python. Compare (after this):\n\n```\nsage: sec(1.+i)\n0.498337030555187 + 0.591083841721045*I\nsage: sec(complex(1,1))\n(0.49833703055518686+0.5910838417210451j)\nsage: sec(CDF(complex(1,1)))\n0.498337030555 + 0.591083841721*I\n```\nInteresting.\n\nHere is something else I don't know what to do with.\n\n```\nsage: arccot(1.+i)\narccot(1.00000000000000 + 1.00000000000000*I)  # in SR\nsage: cot(1.+i)\n0.217621561854403 - 0.868014142895925*I\n```\nOne would think this should be the same type of output.\n\nThat said, SR is useful for some other cases of exact input.\n\nI'm wondering whether we want to try to fix all of this here, though.\n\nCC:  @burcin @kcrisman @rwst\n\nBranch/Commit: 5e18f344b2016d6e7eea64c06d398017da851761\n\nReviewer: Vincent Delecroix\n\nAuthor: Ralf Stephan\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16491\n\n",
    "closed_at": "2016-04-08T00:25:53Z",
    "created_at": "2014-06-17T13:21:55Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "doctest trigonometric functions for complex input",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16491",
    "user": "https://github.com/ppurka"
}
```
This is a follow up to #16439.

1. The functions `atan, acos, asin` give `TypeError` on Python `complex` input.

2. The output of trigonometric functions are inconsistent depending on whether `complex` or `CDF` or `CC` is used as the input type.

From #16439 discussion by `@`kcrisman:

Just one point - almost certainly some of those digits are 'extra' from Python. Compare (after this):

```
sage: sec(1.+i)
0.498337030555187 + 0.591083841721045*I
sage: sec(complex(1,1))
(0.49833703055518686+0.5910838417210451j)
sage: sec(CDF(complex(1,1)))
0.498337030555 + 0.591083841721*I
```
Interesting.

Here is something else I don't know what to do with.

```
sage: arccot(1.+i)
arccot(1.00000000000000 + 1.00000000000000*I)  # in SR
sage: cot(1.+i)
0.217621561854403 - 0.868014142895925*I
```
One would think this should be the same type of output.

That said, SR is useful for some other cases of exact input.

I'm wondering whether we want to try to fix all of this here, though.

CC:  @burcin @kcrisman @rwst

Branch/Commit: 5e18f344b2016d6e7eea64c06d398017da851761

Reviewer: Vincent Delecroix

Author: Ralf Stephan

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16491





---

archive/issue_comments_226459.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,22 +5,27 @@\n 2. The output of trigonometric functions are inconsistent depending on whether `complex` or `CDF` or `CC` is used as the input type.\n \n From #16439 discussion by `@`kcrisman:\n+\n Just one point - almost certainly some of those digits are 'extra' from Python. Compare (after this):\n \n+```\n sage: sec(1.+i)\n 0.498337030555187 + 0.591083841721045*I\n sage: sec(complex(1,1))\n (0.49833703055518686+0.5910838417210451j)\n sage: sec(CDF(complex(1,1)))\n 0.498337030555 + 0.591083841721*I\n+```\n Interesting.\n \n Here is something else I don't know what to do with.\n \n+```\n sage: arccot(1.+i)\n arccot(1.00000000000000 + 1.00000000000000*I)  # in SR\n sage: cot(1.+i)\n 0.217621561854403 - 0.868014142895925*I\n+```\n One would think this should be the same type of output.\n \n That said, SR is useful for some other cases of exact input.\n```\n",
    "created_at": "2014-06-17T13:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226459",
    "user": "https://github.com/ppurka"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,22 +5,27 @@
 2. The output of trigonometric functions are inconsistent depending on whether `complex` or `CDF` or `CC` is used as the input type.
 
 From #16439 discussion by `@`kcrisman:
+
 Just one point - almost certainly some of those digits are 'extra' from Python. Compare (after this):
 
+```
 sage: sec(1.+i)
 0.498337030555187 + 0.591083841721045*I
 sage: sec(complex(1,1))
 (0.49833703055518686+0.5910838417210451j)
 sage: sec(CDF(complex(1,1)))
 0.498337030555 + 0.591083841721*I
+```
 Interesting.
 
 Here is something else I don't know what to do with.
 
+```
 sage: arccot(1.+i)
 arccot(1.00000000000000 + 1.00000000000000*I)  # in SR
 sage: cot(1.+i)
 0.217621561854403 - 0.868014142895925*I
+```
 One would think this should be the same type of output.
 
 That said, SR is useful for some other cases of exact input.
```




---

archive/issue_events_048459.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48459"
}
```



---

archive/issue_comments_226460.json:
```json
{
    "body": "<a id='comment:3'></a>Everything except point 2 seems to be fixed so I'm changing the title.\n\n```\nsage: atan(complex(1,1))\n(1.0172219678978514+0.4023594781085251j)\nsage: acos(complex(1,1))\n(0.9045568943023814-1.0612750619050357j)\nsage: asin(complex(1,1))\n(0.6662394324925152+1.0612750619050357j)\nsage: asin(CDF(complex(1,1)))\n0.6662394324925152 + 1.0612750619050357*I\nsage: asin(CC(complex(1,1)))\n0.666239432492515 + 1.06127506190504*I\nsage: arccot(1.+i)\narccot(i + 1.00000000000000)\nsage: cot(1.+i)\ncot(i + 1.00000000000000)\n```",
    "created_at": "2015-01-31T17:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226460",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>Everything except point 2 seems to be fixed so I'm changing the title.

```
sage: atan(complex(1,1))
(1.0172219678978514+0.4023594781085251j)
sage: acos(complex(1,1))
(0.9045568943023814-1.0612750619050357j)
sage: asin(complex(1,1))
(0.6662394324925152+1.0612750619050357j)
sage: asin(CDF(complex(1,1)))
0.6662394324925152 + 1.0612750619050357*I
sage: asin(CC(complex(1,1)))
0.666239432492515 + 1.06127506190504*I
sage: arccot(1.+i)
arccot(i + 1.00000000000000)
sage: cot(1.+i)
cot(i + 1.00000000000000)
```



---

archive/issue_comments_226461.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-20T08:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226461",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226462.json:
```json
{
    "body": "<a id='comment:4'></a>I get now:\n\n```\nsage: arccot(1.+i)\n0.553574358897045 - 0.402359478108525*I\nsage: cot(1.+i)\n0.217621561854403 - 0.868014142895925*I\n```\nSo this seems fixed.",
    "created_at": "2015-12-20T08:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226462",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>I get now:

```
sage: arccot(1.+i)
0.553574358897045 - 0.402359478108525*I
sage: cot(1.+i)
0.217621561854403 - 0.868014142895925*I
```
So this seems fixed.



---

archive/issue_events_048460.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-12-20T08:41:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48460"
}
```



---

archive/issue_events_048461.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-12-20T08:41:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48461"
}
```



---

archive/issue_comments_226463.json:
```json
{
    "body": "<a id='comment:5'></a>What about adding doctests?",
    "created_at": "2016-04-06T17:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226463",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>What about adding doctests?



---

archive/issue_comments_226464.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2016-04-07T05:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226464",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_events_048462.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-04-07T05:51:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48462"
}
```



---

archive/issue_events_048463.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-04-07T05:51:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48463"
}
```



---

archive/issue_comments_226465.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-07T15:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226465",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226466.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-08T00:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16491#issuecomment-226466",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_048464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-08T00:25:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16491",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16491#event-48464"
}
```
