# Issue 16064: Python 3 preparation: Handle basestring (Py2) vs. str (Py3)

archive/issues_015827.json:
```json
{
    "body": "From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):\n    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).\n    New in version 2.3.\n    This is not available in Python 3.\n\nThe tool 2to3 changes `basestring` into `str` (the only string type  in Py3).\n\nThere are 27 effected modules. \n\nThis ticket is tracked as a dependency of meta-ticket ticket:16052.\n\n\nKeywords: python3\n\nBranch/Commit: 7e60f88fba8805110e89fa2f7093d61a2d78542d\n\nReviewer: Ralf Stephan, Wilfried Luebbe\n\nAuthor: Andr\u00e9 Apitzsch\n\nDependencies: #18492\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16064\n\n",
    "closed_at": "2015-06-11T13:50:58Z",
    "created_at": "2014-04-07T08:28:51Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Python 3 preparation: Handle basestring (Py2) vs. str (Py3)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16064",
    "user": "https://github.com/wluebbe"
}
```
From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):
    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).
    New in version 2.3.
    This is not available in Python 3.

The tool 2to3 changes `basestring` into `str` (the only string type  in Py3).

There are 27 effected modules. 

This ticket is tracked as a dependency of meta-ticket ticket:16052.


Keywords: python3

Branch/Commit: 7e60f88fba8805110e89fa2f7093d61a2d78542d

Reviewer: Ralf Stephan, Wilfried Luebbe

Author: Andr√© Apitzsch

Dependencies: #18492

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16064





---

archive/issue_events_047227.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47227"
}
```



---

archive/issue_comments_218821.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-18T18:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218821",
    "user": "https://github.com/a-andre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_218822.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2014-05-18T18:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218822",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_218823.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-21T06:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218823",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218824.json:
```json
{
    "body": "<a id='comment:3'></a>Eyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?",
    "created_at": "2014-05-21T06:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218824",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>Eyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?



---

archive/issue_comments_218825.json:
```json
{
    "body": "<a id='comment:5'></a>For unicode strings in Python 2.7 the change will not give the same result as before. See\n\n```\nPython 2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> s ='a str'\n>>> su = u'a u-str'\n>>> isinstance(s, basestring)\nTrue\n>>> isinstance(su, basestring)\nTrue\n>>> isinstance(s, str)\nTrue\n>>> isinstance(su, str)\nFalse\n>>> \n``` \nAs we want a single Python 2 / 3 code base I think this is not the right solution.",
    "created_at": "2014-05-21T06:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218825",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:5'></a>For unicode strings in Python 2.7 the change will not give the same result as before. See

```
Python 2.7.6 (default, Mar 22 2014, 22:59:56) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s ='a str'
>>> su = u'a u-str'
>>> isinstance(s, basestring)
True
>>> isinstance(su, basestring)
True
>>> isinstance(s, str)
True
>>> isinstance(su, str)
False
>>> 
``` 
As we want a single Python 2 / 3 code base I think this is not the right solution.



---

archive/issue_comments_218826.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-05-21T06:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218826",
    "user": "https://github.com/wluebbe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_218827.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-07T14:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218827",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218828.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-07T14:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218828",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_218829.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-19T19:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_047228.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47228"
}
```



---

archive/issue_events_047229.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47229"
}
```



---

archive/issue_comments_218830.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-13T19:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218831.json:
```json
{
    "body": "<a id='comment:11'></a>I have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.",
    "created_at": "2014-08-14T10:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218831",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>I have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.



---

archive/issue_comments_218832.json:
```json
{
    "body": "<a id='comment:12'></a>You are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.\n\nIMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.\nAnd in the long run we have to change it anyway.\nChanges like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.\n\nLet's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.",
    "created_at": "2014-08-14T21:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218832",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:12'></a>You are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.

IMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.
And in the long run we have to change it anyway.
Changes like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.

Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.



---

archive/issue_comments_218833.json:
```json
{
    "body": "<a id='comment:13'></a>Cython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.",
    "created_at": "2014-11-28T11:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218833",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Cython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.



---

archive/issue_comments_218834.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-28T11:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218834",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_218835.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-28T16:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218836.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-28T16:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218836",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_218837.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-07T14:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218837",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_218838.json:
```json
{
    "body": "<a id='comment:16'></a>You wrote:\n\nReplying to [comment:12 aapitzsch]:\n> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.\n\n\nbut later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.",
    "created_at": "2015-02-07T14:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218838",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:16'></a>You wrote:

Replying to [comment:12 aapitzsch]:
> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.


but later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.



---

archive/issue_events_047230.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47230"
}
```



---

archive/issue_events_047231.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47231"
}
```



---

archive/issue_events_047232.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47232"
}
```



---

archive/issue_events_047233.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47233"
}
```



---

archive/issue_comments_218839.json:
```json
{
    "body": "<a id='comment:17'></a>See #18492 for a much better approach using `six`.",
    "created_at": "2015-05-25T07:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218839",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>See #18492 for a much better approach using `six`.



---

archive/issue_comments_218840.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-25T20:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218840",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_218841.json:
```json
{
    "body": "<a id='comment:18'></a>Made use of `six`.\n\nI haven't added `six` as a dependency because that's done in #18492.",
    "created_at": "2015-05-25T20:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218841",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:18'></a>Made use of `six`.

I haven't added `six` as a dependency because that's done in #18492.



---

archive/issue_comments_218842.json:
```json
{
    "body": "<a id='comment:21'></a>The patch looks fine. Testing is OK.\n\nBut in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py\t` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.\n\nCan you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.",
    "created_at": "2015-06-09T11:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218842",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:21'></a>The patch looks fine. Testing is OK.

But in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py	` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.

Can you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.



---

archive/issue_comments_218843.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-09T11:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218843",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_218844.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T16:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218845.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-09T16:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218845",
    "user": "https://github.com/a-andre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_218846.json:
```json
{
    "body": "<a id='comment:24'></a>Right at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like\n\n```\nFile \"src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\nFailed example:\n    E = NonSymmetricMacdonaldPolynomials([\"A\",2,1])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>\", line 1, in <module>\n        E = NonSymmetricMacdonaldPolynomials([\"A\",Integer(2),Integer(1)])\n      File \"sage/misc/lazy_import.pyx\", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 1208, in __classcall__\n        q = K(q)\n      File \"sage/structure/parent.pyx\", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)\n        return C._element_constructor(x)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py\", line 563, in _element_constructor_\n        x = sage_eval(x, self.gens_dict_recursive())\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py\", line 181, in sage_eval\n        if not isinstance(source, six.string_types):\n    AttributeError: 'module' object has no attribute 'string_types'\n```\nApparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?",
    "created_at": "2015-06-09T18:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218846",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:24'></a>Right at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like

```
File "src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
Failed example:
    E = NonSymmetricMacdonaldPolynomials(["A",2,1])
Exception raised:
    Traceback (most recent call last):
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>", line 1, in <module>
        E = NonSymmetricMacdonaldPolynomials(["A",Integer(2),Integer(1)])
      File "sage/misc/lazy_import.pyx", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)
        return cls.classcall(cls, *args, **kwds)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 1208, in __classcall__
        q = K(q)
      File "sage/structure/parent.pyx", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)
        raise
      File "sage/structure/coerce_maps.pyx", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)
        return C._element_constructor(x)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py", line 563, in _element_constructor_
        x = sage_eval(x, self.gens_dict_recursive())
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py", line 181, in sage_eval
        if not isinstance(source, six.string_types):
    AttributeError: 'module' object has no attribute 'string_types'
```
Apparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?



---

archive/issue_comments_218847.json:
```json
{
    "body": "<a id='comment:25'></a>Apparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. \nAnd at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.",
    "created_at": "2015-06-09T19:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218847",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:25'></a>Apparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. 
And at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.



---

archive/issue_comments_218848.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T22:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_218849.json:
```json
{
    "body": "<a id='comment:27'></a>There is a new `six.py` in misc which is relative imported instead of the expected `six` module.",
    "created_at": "2015-06-09T22:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218849",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:27'></a>There is a new `six.py` in misc which is relative imported instead of the expected `six` module.



---

archive/issue_comments_218850.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-10T07:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218850",
    "user": "https://github.com/wluebbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_218851.json:
```json
{
    "body": "<a id='comment:28'></a>I did not think of a new `six.py` module in `src/sage/misc`! \n\nAll test passed. Looks good.",
    "created_at": "2015-06-10T07:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218851",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:28'></a>I did not think of a new `six.py` module in `src/sage/misc`! 

All test passed. Looks good.



---

archive/issue_comments_218852.json:
```json
{
    "body": "<a id='comment:29'></a>You were not satisfied with my part of the review, sir?",
    "created_at": "2015-06-10T07:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218852",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>You were not satisfied with my part of the review, sir?



---

archive/issue_comments_218853.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 rws]:\n> You were not satisfied with my part of the review, sir?\n\nSorry about that.",
    "created_at": "2015-06-10T08:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218853",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:30'></a>Replying to [comment:29 rws]:
> You were not satisfied with my part of the review, sir?

Sorry about that.



---

archive/issue_events_047234.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T13:50:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16064#event-47234"
}
```



---

archive/issue_comments_218854.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-11T13:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16064#issuecomment-218854",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
