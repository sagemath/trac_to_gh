# Issue 16064: Python 3 preparation: Handle basestring (Py2) vs. str (Py3)

archive/issues_015827.json:
```json
{
    "assignees": [],
    "body": "From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):\n    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).\n    New in version 2.3.\n    This is not available in Python 3.\n\nThe tool 2to3 changes `basestring` into `str` (the only string type  in Py3).\n\nThere are 27 effected modules. \n\nThis ticket is tracked as a dependency of meta-ticket ticket:16052.\n\n\nDepends on #18492\n\nKeywords: **python3**\n\nBranch/Commit: **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**\n\nReviewer: **Ralf Stephan, Wilfried Luebbe**\n\nAuthor: **Andr\u00e9 Apitzsch**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16064_\n\n",
    "closed_at": "2015-06-11T13:50:58Z",
    "created_at": "2014-04-07T08:28:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20distribution",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Python 3 preparation: Handle basestring (Py2) vs. str (Py3)",
    "type": "issue",
    "updated_at": "2015-06-11T13:50:58Z",
    "url": "https://github.com/sagemath/sage/issues/16064",
    "user": "https://github.com/wluebbe"
}
```
From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):
    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).
    New in version 2.3.
    This is not available in Python 3.

The tool 2to3 changes `basestring` into `str` (the only string type  in Py3).

There are 27 effected modules. 

This ticket is tracked as a dependency of meta-ticket ticket:16052.


Depends on #18492

Keywords: **python3**

Branch/Commit: **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**

Reviewer: **Ralf Stephan, Wilfried Luebbe**

Author: **André Apitzsch**

_Issue created by migration from https://trac.sagemath.org/ticket/16064_





---

archive/issue_events_204147.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204147"
}
```



---

archive/issue_events_204148.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204148"
}
```



---

archive/issue_events_204149.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204149"
}
```



---

archive/issue_events_204150.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204150"
}
```



---

archive/issue_events_204151.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204151"
}
```



---

archive/issue_events_204152.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204152"
}
```



---

archive/issue_comments_207034.json:
```json
{
    "body": "Author: **Andr\u00e9 Apitzsch**",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207034",
    "user": "https://github.com/a-andre"
}
```

Author: **André Apitzsch**



---

archive/issue_comments_207035.json:
```json
{
    "body": "Branch: **[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)**",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207035",
    "user": "https://github.com/a-andre"
}
```

Branch: **[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)**



---

archive/issue_events_204153.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-05-18T18:14:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204153"
}
```



---

archive/issue_comments_207036.json:
```json
{
    "body": "Commit: **[e1252a4](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)**",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207036",
    "user": "https://github.com/a-andre"
}
```

Commit: **[e1252a4](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)**



---

archive/issue_comments_207037.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d\">e1252a4</a></td><td><code>replace basestring by str</code></td></tr></table>\n",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207037",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d">e1252a4</a></td><td><code>replace basestring by str</code></td></tr></table>




---

archive/issue_events_204154.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-21T06:25:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204154"
}
```



---

archive/issue_events_204155.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-21T06:25:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204155"
}
```



---

archive/issue_comments_207038.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nEyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?",
    "created_at": "2014-05-21T06:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207038",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'>Comment 3:</a>
Eyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?



---

archive/issue_comments_207039.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2014-05-21T06:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207039",
    "user": "https://github.com/rwst"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_comments_207040.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nFor unicode strings in Python 2.7 the change will not give the same result as before. See\n\n```\nPython 2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> s ='a str'\n>>> su = u'a u-str'\n>>> isinstance(s, basestring)\nTrue\n>>> isinstance(su, basestring)\nTrue\n>>> isinstance(s, str)\nTrue\n>>> isinstance(su, str)\nFalse\n>>> \n``` \nAs we want a single Python 2 / 3 code base I think this is not the right solution.",
    "created_at": "2014-05-21T06:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207040",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:5'>Comment 5:</a>
For unicode strings in Python 2.7 the change will not give the same result as before. See

```
Python 2.7.6 (default, Mar 22 2014, 22:59:56) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s ='a str'
>>> su = u'a u-str'
>>> isinstance(s, basestring)
True
>>> isinstance(su, basestring)
True
>>> isinstance(s, str)
True
>>> isinstance(su, str)
False
>>> 
``` 
As we want a single Python 2 / 3 code base I think this is not the right solution.



---

archive/issue_events_204156.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-05-21T06:40:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204156"
}
```



---

archive/issue_events_204157.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-05-21T06:40:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204157"
}
```



---

archive/issue_comments_207041.json:
```json
{
    "body": "Changed commit from **[e1252a4](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)** to **[7fc09f9](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)**",
    "created_at": "2014-06-07T14:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207041",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e1252a4](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)** to **[7fc09f9](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)**



---

archive/issue_comments_207042.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4ce4d1a0f89ee69bae1cceba3f6698881b00eb5\">f4ce4d1</a></td><td><code>replace basestring by str if python version >= 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420\">7fc09f9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-06-07T14:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207042",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4ce4d1a0f89ee69bae1cceba3f6698881b00eb5">f4ce4d1</a></td><td><code>replace basestring by str if python version >= 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420">7fc09f9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_events_204158.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-06-07T14:09:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204158"
}
```



---

archive/issue_events_204159.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-06-07T14:09:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204159"
}
```



---

archive/issue_comments_207043.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd\">63eaffd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-06-19T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207043",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd">63eaffd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_comments_207044.json:
```json
{
    "body": "Changed commit from **[7fc09f9](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)** to **[63eaffd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)**",
    "created_at": "2014-06-19T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7fc09f9](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)** to **[63eaffd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)**



---

archive/issue_events_204160.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204160"
}
```



---

archive/issue_events_204161.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204161"
}
```



---

archive/issue_comments_207045.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928\">3df268b</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-08-13T19:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207045",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928">3df268b</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_comments_207046.json:
```json
{
    "body": "Changed commit from **[63eaffd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)** to **[3df268b](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)**",
    "created_at": "2014-08-13T19:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[63eaffd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)** to **[3df268b](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)**



---

archive/issue_comments_207047.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.",
    "created_at": "2014-08-14T10:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207047",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
I have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.



---

archive/issue_comments_207048.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nYou are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.\n\nIMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.\nAnd in the long run we have to change it anyway.\nChanges like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.\n\nLet's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.",
    "created_at": "2014-08-14T21:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207048",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:12'>Comment 12:</a>
You are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.

IMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.
And in the long run we have to change it anyway.
Changes like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.

Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.



---

archive/issue_comments_207049.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nCython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.",
    "created_at": "2014-11-28T11:26:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207049",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>
Cython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.



---

archive/issue_events_204162.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-28T11:26:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204162"
}
```



---

archive/issue_events_204163.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-28T11:26:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204163"
}
```



---

archive/issue_comments_207050.json:
```json
{
    "body": "Changed commit from **[3df268b](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)** to **[bc70272](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)**",
    "created_at": "2014-11-28T16:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207050",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3df268b](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)** to **[bc70272](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)**



---

archive/issue_comments_207051.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37\">bc70272</a></td><td><code>revert basestring changes in *.pyx files</code></td></tr></table>\n",
    "created_at": "2014-11-28T16:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207051",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37">bc70272</a></td><td><code>revert basestring changes in *.pyx files</code></td></tr></table>




---

archive/issue_events_204164.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-28T16:21:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204164"
}
```



---

archive/issue_events_204165.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-28T16:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204165"
}
```



---

archive/issue_events_204166.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204166"
}
```



---

archive/issue_events_204167.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204167"
}
```



---

archive/issue_comments_207052.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nYou wrote:\n\nReplying to [@a-andre](#comment%3A12):\n> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.\n\nbut later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.",
    "created_at": "2015-02-07T14:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207052",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:16'>Comment 16:</a>
You wrote:

Replying to [@a-andre](#comment%3A12):
> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.

but later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.



---

archive/issue_events_204168.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204168"
}
```



---

archive/issue_events_204169.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204169"
}
```



---

archive/issue_events_204170.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204170"
}
```



---

archive/issue_events_204171.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204171"
}
```



---

archive/issue_comments_207053.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSee #18492 for a much better approach using `six`.",
    "created_at": "2015-05-25T07:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207053",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
See #18492 for a much better approach using `six`.



---

archive/issue_comments_207054.json:
```json
{
    "body": "Changed branch from **[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)** to **[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)**",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207054",
    "user": "https://github.com/a-andre"
}
```

Changed branch from **[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)** to **[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)**



---

archive/issue_events_204172.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-05-25T20:11:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204172"
}
```



---

archive/issue_events_204173.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-05-25T20:11:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204173"
}
```



---

archive/issue_comments_207055.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nMade use of `six`.\n\nI haven't added `six` as a dependency because that's done in #18492.",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207055",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:18'>Comment 18:</a>
Made use of `six`.

I haven't added `six` as a dependency because that's done in #18492.



---

archive/issue_comments_207056.json:
```json
{
    "body": "Changed commit from **[bc70272](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)** to none",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207056",
    "user": "https://github.com/a-andre"
}
```

Changed commit from **[bc70272](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)** to none



---

archive/issue_comments_207057.json:
```json
{
    "body": "Changed branch from **[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)** to **[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)**",
    "created_at": "2015-05-25T20:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207057",
    "user": "https://github.com/a-andre"
}
```

Changed branch from **[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)** to **[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)**



---

archive/issue_comments_207058.json:
```json
{
    "body": "Commit: **[002892e](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)**",
    "created_at": "2015-05-25T20:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207058",
    "user": "https://github.com/a-andre"
}
```

Commit: **[002892e](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)**



---

archive/issue_comments_207059.json:
```json
{
    "body": "Dependencies: **#18492**",
    "created_at": "2015-05-26T06:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207059",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#18492**



---

archive/issue_comments_207060.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nThe patch looks fine. Testing is OK.\n\nBut in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py\t` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.\n\nCan you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.",
    "created_at": "2015-06-09T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207060",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:21'>Comment 21:</a>
The patch looks fine. Testing is OK.

But in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py	` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.

Can you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.



---

archive/issue_events_204174.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-09T11:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204174"
}
```



---

archive/issue_events_204175.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-09T11:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204175"
}
```



---

archive/issue_comments_207061.json:
```json
{
    "body": "Changed commit from **[002892e](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)** to **[b16df45](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)**",
    "created_at": "2015-06-09T16:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[002892e](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)** to **[b16df45](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)**



---

archive/issue_comments_207062.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa8dc7495f9c161e1bc43ca61565a44cb16f98b\">eaa8dc7</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring_six</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf\">b16df45</a></td><td><code>replace remaining basestring by six.string_types</code></td></tr></table>\n",
    "created_at": "2015-06-09T16:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207062",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa8dc7495f9c161e1bc43ca61565a44cb16f98b">eaa8dc7</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring_six</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf">b16df45</a></td><td><code>replace remaining basestring by six.string_types</code></td></tr></table>




---

archive/issue_events_204176.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-06-09T16:56:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204176"
}
```



---

archive/issue_events_204177.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-06-09T16:56:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204177"
}
```



---

archive/issue_comments_207063.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nRight at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like\n\n```\nFile \"src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\nFailed example:\n    E = NonSymmetricMacdonaldPolynomials([\"A\",2,1])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>\", line 1, in <module>\n        E = NonSymmetricMacdonaldPolynomials([\"A\",Integer(2),Integer(1)])\n      File \"sage/misc/lazy_import.pyx\", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 1208, in __classcall__\n        q = K(q)\n      File \"sage/structure/parent.pyx\", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)\n        return C._element_constructor(x)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py\", line 563, in _element_constructor_\n        x = sage_eval(x, self.gens_dict_recursive())\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py\", line 181, in sage_eval\n        if not isinstance(source, six.string_types):\n    AttributeError: 'module' object has no attribute 'string_types'\n```\nApparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?",
    "created_at": "2015-06-09T18:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207063",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:24'>Comment 24:</a>
Right at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like

```
File "src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
Failed example:
    E = NonSymmetricMacdonaldPolynomials(["A",2,1])
Exception raised:
    Traceback (most recent call last):
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>", line 1, in <module>
        E = NonSymmetricMacdonaldPolynomials(["A",Integer(2),Integer(1)])
      File "sage/misc/lazy_import.pyx", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)
        return cls.classcall(cls, *args, **kwds)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 1208, in __classcall__
        q = K(q)
      File "sage/structure/parent.pyx", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)
        raise
      File "sage/structure/coerce_maps.pyx", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)
        return C._element_constructor(x)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py", line 563, in _element_constructor_
        x = sage_eval(x, self.gens_dict_recursive())
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py", line 181, in sage_eval
        if not isinstance(source, six.string_types):
    AttributeError: 'module' object has no attribute 'string_types'
```
Apparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?



---

archive/issue_comments_207064.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nApparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. \nAnd at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.",
    "created_at": "2015-06-09T19:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207064",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:25'>Comment 25:</a>
Apparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. 
And at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.



---

archive/issue_comments_207065.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d\">7e60f88</a></td><td><code>prevent relative import of six</code></td></tr></table>\n",
    "created_at": "2015-06-09T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207065",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d">7e60f88</a></td><td><code>prevent relative import of six</code></td></tr></table>




---

archive/issue_comments_207066.json:
```json
{
    "body": "Changed commit from **[b16df45](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)** to **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**",
    "created_at": "2015-06-09T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b16df45](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)** to **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**



---

archive/issue_comments_207067.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThere is a new `six.py` in misc which is relative imported instead of the expected `six` module.",
    "created_at": "2015-06-09T22:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207067",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:27'>Comment 27:</a>
There is a new `six.py` in misc which is relative imported instead of the expected `six` module.



---

archive/issue_comments_207068.json:
```json
{
    "body": "Changed reviewer from **Ralf Stephan** to **Wilfried Luebbe**",
    "created_at": "2015-06-10T07:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207068",
    "user": "https://github.com/wluebbe"
}
```

Changed reviewer from **Ralf Stephan** to **Wilfried Luebbe**



---

archive/issue_events_204178.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-10T07:21:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204178"
}
```



---

archive/issue_events_204179.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-10T07:21:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204179"
}
```



---

archive/issue_comments_207069.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI did not think of a new `six.py` module in `src/sage/misc`! \n\nAll test passed. Looks good.",
    "created_at": "2015-06-10T07:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207069",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:28'>Comment 28:</a>
I did not think of a new `six.py` module in `src/sage/misc`! 

All test passed. Looks good.



---

archive/issue_comments_207070.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nYou were not satisfied with my part of the review, sir?",
    "created_at": "2015-06-10T07:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207070",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'>Comment 29:</a>
You were not satisfied with my part of the review, sir?



---

archive/issue_comments_207071.json:
```json
{
    "body": "Changed reviewer from **Wilfried Luebbe** to **Ralf Stephan, Wilfried Luebbe**",
    "created_at": "2015-06-10T07:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207071",
    "user": "https://github.com/rwst"
}
```

Changed reviewer from **Wilfried Luebbe** to **Ralf Stephan, Wilfried Luebbe**



---

archive/issue_comments_207072.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@rwst](#comment%3A29):\n> You were not satisfied with my part of the review, sir?\n\nSorry about that.",
    "created_at": "2015-06-10T08:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207072",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@rwst](#comment%3A29):
> You were not satisfied with my part of the review, sir?

Sorry about that.



---

archive/issue_comments_207073.json:
```json
{
    "body": "Changed branch from **[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)** to **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**",
    "created_at": "2015-06-11T13:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207073",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)** to **[7e60f88](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)**



---

archive/issue_events_204180.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T13:50:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204180"
}
```



---

archive/issue_events_204181.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "51e7dcd5dff27b2f3492ad8b6158a5bb903f9135",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-11T13:50:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-204181"
}
```
