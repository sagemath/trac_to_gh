# Issue 16064: Python 3 preparation: Handle basestring (Py2) vs. str (Py3)

archive/issues_015827.json:
```json
{
    "assignees": [],
    "body": "From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):\n    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).\n    New in version 2.3.\n    This is not available in Python 3.\n\nThe tool 2to3 changes `basestring` into `str` (the only string type  in Py3).\n\nThere are 27 effected modules. \n\nThis ticket is tracked as a dependency of meta-ticket ticket:16052.\n\n\nDepends on #18492\n\n**Keywords:** python3\n\n**Branch/Commit:** [7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)\n\n**Reviewer:** Ralf Stephan, Wilfried Luebbe\n\n**Author:** Andr\u00e9 Apitzsch\n\nIssue created by migration from https://trac.sagemath.org/ticket/16064\n\n",
    "closed_at": "2015-06-11T13:50:58Z",
    "created_at": "2014-04-07T08:28:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20distribution",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Python 3 preparation: Handle basestring (Py2) vs. str (Py3)",
    "type": "issue",
    "updated_at": "2015-06-11T13:50:58Z",
    "url": "https://github.com/sagemath/sage/issues/16064",
    "user": "https://github.com/wluebbe"
}
```
From the Python 2 documentation [basestring()](https://docs.python.org/2/library/functions.html#basestring):
    This abstract type is the superclass for str and unicode. It cannot be called or instantiated, but it can be used to test whether an object is an instance of str or unicode. isinstance(obj, basestring) is equivalent to isinstance(obj, (str, unicode)).
    New in version 2.3.
    This is not available in Python 3.

The tool 2to3 changes `basestring` into `str` (the only string type  in Py3).

There are 27 effected modules. 

This ticket is tracked as a dependency of meta-ticket ticket:16052.


Depends on #18492

**Keywords:** python3

**Branch/Commit:** [7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)

**Reviewer:** Ralf Stephan, Wilfried Luebbe

**Author:** André Apitzsch

Issue created by migration from https://trac.sagemath.org/ticket/16064





---

archive/issue_events_195639.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195639"
}
```



---

archive/issue_events_195640.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "08517b",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195640"
}
```



---

archive/issue_events_195641.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-04-07T08:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195641"
}
```



---

archive/issue_events_195642.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195642"
}
```



---

archive/issue_events_195643.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195643"
}
```



---

archive/issue_comments_206980.json:
```json
{
    "body": "**Author:** Andr\u00e9 Apitzsch",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206980",
    "user": "https://github.com/a-andre"
}
```

**Author:** André Apitzsch



---

archive/issue_comments_206981.json:
```json
{
    "body": "**Branch:** [u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206981",
    "user": "https://github.com/a-andre"
}
```

**Branch:** [u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)



---

archive/issue_events_195644.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-05-18T18:14:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195644"
}
```



---

archive/issue_comments_206982.json:
```json
{
    "body": "**Commit:** [e1252a45810b1dd857e978336f504843b412bf4d](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206982",
    "user": "https://github.com/a-andre"
}
```

**Commit:** [e1252a45810b1dd857e978336f504843b412bf4d](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)



---

archive/issue_comments_206983.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d\">e1252a4</a></td><td><code>replace basestring by str</code></td></tr></table>\n",
    "created_at": "2014-05-18T18:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206983",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d">e1252a4</a></td><td><code>replace basestring by str</code></td></tr></table>




---

archive/issue_events_195645.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-21T06:25:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195645"
}
```



---

archive/issue_events_195646.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-21T06:25:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195646"
}
```



---

archive/issue_comments_206984.json:
```json
{
    "body": "<a id='comment:3'></a>\nEyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?",
    "created_at": "2014-05-21T06:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206984",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Eyeballed and patchbotted ok. Just a naive question: wouldn't the `... str = basestring` snippet be needed in every affected file?



---

archive/issue_comments_206985.json:
```json
{
    "body": "**Reviewer:** Ralf Stephan",
    "created_at": "2014-05-21T06:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206985",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Ralf Stephan



---

archive/issue_comments_206986.json:
```json
{
    "body": "<a id='comment:5'></a>\nFor unicode strings in Python 2.7 the change will not give the same result as before. See\n\n```\nPython 2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> s ='a str'\n>>> su = u'a u-str'\n>>> isinstance(s, basestring)\nTrue\n>>> isinstance(su, basestring)\nTrue\n>>> isinstance(s, str)\nTrue\n>>> isinstance(su, str)\nFalse\n>>> \n``` \nAs we want a single Python 2 / 3 code base I think this is not the right solution.",
    "created_at": "2014-05-21T06:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206986",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:5'></a>
For unicode strings in Python 2.7 the change will not give the same result as before. See

```
Python 2.7.6 (default, Mar 22 2014, 22:59:56) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> s ='a str'
>>> su = u'a u-str'
>>> isinstance(s, basestring)
True
>>> isinstance(su, basestring)
True
>>> isinstance(s, str)
True
>>> isinstance(su, str)
False
>>> 
``` 
As we want a single Python 2 / 3 code base I think this is not the right solution.



---

archive/issue_events_195647.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-05-21T06:40:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195647"
}
```



---

archive/issue_events_195648.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-05-21T06:40:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195648"
}
```



---

archive/issue_comments_206987.json:
```json
{
    "body": "**Changing commit** from \"[e1252a45810b1dd857e978336f504843b412bf4d](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)\" to \"[7fc09f93ebc4b0a662440b79b9d734b1e43d0420](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)\".",
    "created_at": "2014-06-07T14:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206987",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e1252a45810b1dd857e978336f504843b412bf4d](https://github.com/sagemath/sagetrac-mirror/commit/e1252a45810b1dd857e978336f504843b412bf4d)" to "[7fc09f93ebc4b0a662440b79b9d734b1e43d0420](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)".



---

archive/issue_comments_206988.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4ce4d1a0f89ee69bae1cceba3f6698881b00eb5\">f4ce4d1</a></td><td><code>replace basestring by str if python version >= 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420\">7fc09f9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-06-07T14:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206988",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4ce4d1a0f89ee69bae1cceba3f6698881b00eb5">f4ce4d1</a></td><td><code>replace basestring by str if python version >= 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420">7fc09f9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_events_195649.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-06-07T14:09:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195649"
}
```



---

archive/issue_events_195650.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-06-07T14:09:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195650"
}
```



---

archive/issue_comments_206989.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd\">63eaffd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-06-19T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206989",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd">63eaffd</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_comments_206990.json:
```json
{
    "body": "**Changing commit** from \"[7fc09f93ebc4b0a662440b79b9d734b1e43d0420](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)\" to \"[63eaffd5133fc3afb87ac12140aa56f800c12abd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)\".",
    "created_at": "2014-06-19T19:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206990",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7fc09f93ebc4b0a662440b79b9d734b1e43d0420](https://github.com/sagemath/sagetrac-mirror/commit/7fc09f93ebc4b0a662440b79b9d734b1e43d0420)" to "[63eaffd5133fc3afb87ac12140aa56f800c12abd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)".



---

archive/issue_events_195651.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195651"
}
```



---

archive/issue_events_195652.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195652"
}
```



---

archive/issue_comments_206991.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928\">3df268b</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>\n",
    "created_at": "2014-08-13T19:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206991",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928">3df268b</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring</code></td></tr></table>




---

archive/issue_comments_206992.json:
```json
{
    "body": "**Changing commit** from \"[63eaffd5133fc3afb87ac12140aa56f800c12abd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)\" to \"[3df268bee99266bfb2d75c3d22edb653089b9928](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)\".",
    "created_at": "2014-08-13T19:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206992",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[63eaffd5133fc3afb87ac12140aa56f800c12abd](https://github.com/sagemath/sagetrac-mirror/commit/63eaffd5133fc3afb87ac12140aa56f800c12abd)" to "[3df268bee99266bfb2d75c3d22edb653089b9928](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)".



---

archive/issue_comments_206993.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.",
    "created_at": "2014-08-14T10:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206993",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
I have a general question about Python3 tickets: would it not be better to simply use the `2to3` tool at build time (i.e. when doing `sage -b`)? This would fix not only this ticket, but also many others and there would be no need to uglify the code like in this patch.



---

archive/issue_comments_206994.json:
```json
{
    "body": "<a id='comment:12'></a>\nYou are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.\n\nIMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.\nAnd in the long run we have to change it anyway.\nChanges like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.\n\nLet's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.",
    "created_at": "2014-08-14T21:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206994",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:12'></a>
You are right using `2to3` would be the better way, but the tool doesn't touch doctests and it will not fix all compatibility issues.

IMO we should change as much as possible (if it is not ugly) upstream to reduce work for `2to3`.
And in the long run we have to change it anyway.
Changes like #16442, #16529 and even #16071 (if we leave the `izip` part out) should be fine.

Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.



---

archive/issue_comments_206995.json:
```json
{
    "body": "<a id='comment:13'></a>\nCython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.",
    "created_at": "2014-11-28T11:26:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206995",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Cython files should support `basestring` out of the box in Python 3. So no changes are needed to `.pyx` files.



---

archive/issue_events_195653.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-28T11:26:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195653"
}
```



---

archive/issue_events_195654.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-11-28T11:26:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195654"
}
```



---

archive/issue_comments_206996.json:
```json
{
    "body": "**Changing commit** from \"[3df268bee99266bfb2d75c3d22edb653089b9928](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)\" to \"[bc70272c0df69ebee3b8f080866a61ef900e2f37](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)\".",
    "created_at": "2014-11-28T16:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206996",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3df268bee99266bfb2d75c3d22edb653089b9928](https://github.com/sagemath/sagetrac-mirror/commit/3df268bee99266bfb2d75c3d22edb653089b9928)" to "[bc70272c0df69ebee3b8f080866a61ef900e2f37](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)".



---

archive/issue_comments_206997.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37\">bc70272</a></td><td><code>revert basestring changes in *.pyx files</code></td></tr></table>\n",
    "created_at": "2014-11-28T16:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206997",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37">bc70272</a></td><td><code>revert basestring changes in *.pyx files</code></td></tr></table>




---

archive/issue_events_195655.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-28T16:21:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195655"
}
```



---

archive/issue_events_195656.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2014-11-28T16:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195656"
}
```



---

archive/issue_events_195657.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195657"
}
```



---

archive/issue_events_195658.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195658"
}
```



---

archive/issue_comments_206998.json:
```json
{
    "body": "<a id='comment:16'></a>\nYou wrote:\n\nReplying to [@a-andre](#comment%3A12):\n> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.\n\nbut later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.",
    "created_at": "2015-02-07T14:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206998",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:16'></a>
You wrote:

Replying to [@a-andre](#comment%3A12):
> Let's skip this ticket for the moment and maybe replaced it by using `2to3` at build time.

but later set the ticket to `needs_review`... So I don't understand, what is the status of this ticket? I'm changing both the milestone to `pending` and the status to `needs_work` (as there are merge conflicts anyway), please feel free to revert one or both if appropriate.



---

archive/issue_events_195659.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195659"
}
```



---

archive/issue_events_195660.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-02-07T14:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195660"
}
```



---

archive/issue_events_195661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195661"
}
```



---

archive/issue_events_195662.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-25T07:05:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195662"
}
```



---

archive/issue_comments_206999.json:
```json
{
    "body": "<a id='comment:17'></a>\nSee #18492 for a much better approach using `six`.",
    "created_at": "2015-05-25T07:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-206999",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
See #18492 for a much better approach using `six`.



---

archive/issue_comments_207000.json:
```json
{
    "body": "**Changing branch** from \"[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)\" to \"[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)\".",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207000",
    "user": "https://github.com/a-andre"
}
```

**Changing branch** from "[u/aapitzsch/ticket/16064](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064)" to "[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)".



---

archive/issue_events_195663.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-05-25T20:11:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195663"
}
```



---

archive/issue_events_195664.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-05-25T20:11:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195664"
}
```



---

archive/issue_comments_207001.json:
```json
{
    "body": "<a id='comment:18'></a>\nMade use of `six`.\n\nI haven't added `six` as a dependency because that's done in #18492.",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207001",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:18'></a>
Made use of `six`.

I haven't added `six` as a dependency because that's done in #18492.



---

archive/issue_comments_207002.json:
```json
{
    "body": "**Changing commit** from \"[bc70272c0df69ebee3b8f080866a61ef900e2f37](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)\" to \"\".",
    "created_at": "2015-05-25T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207002",
    "user": "https://github.com/a-andre"
}
```

**Changing commit** from "[bc70272c0df69ebee3b8f080866a61ef900e2f37](https://github.com/sagemath/sagetrac-mirror/commit/bc70272c0df69ebee3b8f080866a61ef900e2f37)" to "".



---

archive/issue_comments_207003.json:
```json
{
    "body": "**Changing branch** from \"[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)\" to \"[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)\".",
    "created_at": "2015-05-25T20:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207003",
    "user": "https://github.com/a-andre"
}
```

**Changing branch** from "[u/aapitzsch/ticket/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/ticket/16064_2)" to "[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)".



---

archive/issue_comments_207004.json:
```json
{
    "body": "**Commit:** [002892eb3e5ece1d1e1c440831cf03521c36ea66](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)",
    "created_at": "2015-05-25T20:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207004",
    "user": "https://github.com/a-andre"
}
```

**Commit:** [002892eb3e5ece1d1e1c440831cf03521c36ea66](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)



---

archive/issue_comments_207005.json:
```json
{
    "body": "**Dependencies:** #18492",
    "created_at": "2015-05-26T06:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207005",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #18492



---

archive/issue_comments_207006.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe patch looks fine. Testing is OK.\n\nBut in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py\t` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.\n\nCan you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.",
    "created_at": "2015-06-09T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207006",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:21'></a>
The patch looks fine. Testing is OK.

But in `sage-6.8.beta3` there are still `basestring`s in ` sage/quivers/algebra.py	` line 277 and in `sage/quivers/path_semigroup.py` lines 340 / 348. The are NOT present `sage-6.8.beta0` on which the patch is based. I haven't found out why.

Can you base the patch on `sage-6.8.beta3` and change the 3 remaining `basestring`s. Then I would set the ticket to positive review.



---

archive/issue_events_195665.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-09T11:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195665"
}
```



---

archive/issue_events_195666.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-09T11:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195666"
}
```



---

archive/issue_comments_207007.json:
```json
{
    "body": "**Changing commit** from \"[002892eb3e5ece1d1e1c440831cf03521c36ea66](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)\" to \"[b16df45af9855bad1a2687db25d57e8fa881a8cf](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)\".",
    "created_at": "2015-06-09T16:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207007",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[002892eb3e5ece1d1e1c440831cf03521c36ea66](https://github.com/sagemath/sagetrac-mirror/commit/002892eb3e5ece1d1e1c440831cf03521c36ea66)" to "[b16df45af9855bad1a2687db25d57e8fa881a8cf](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)".



---

archive/issue_comments_207008.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa8dc7495f9c161e1bc43ca61565a44cb16f98b\">eaa8dc7</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring_six</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf\">b16df45</a></td><td><code>replace remaining basestring by six.string_types</code></td></tr></table>\n",
    "created_at": "2015-06-09T16:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207008",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa8dc7495f9c161e1bc43ca61565a44cb16f98b">eaa8dc7</a></td><td><code>Merge remote-tracking branch 'origin/develop' into py3_basestring_six</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf">b16df45</a></td><td><code>replace remaining basestring by six.string_types</code></td></tr></table>




---

archive/issue_events_195667.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-06-09T16:56:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195667"
}
```



---

archive/issue_events_195668.json:
```json
{
    "actor": "https://github.com/a-andre",
    "created_at": "2015-06-09T16:56:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195668"
}
```



---

archive/issue_comments_207009.json:
```json
{
    "body": "<a id='comment:24'></a>\nRight at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like\n\n```\nFile \"src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials\nFailed example:\n    E = NonSymmetricMacdonaldPolynomials([\"A\",2,1])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>\", line 1, in <module>\n        E = NonSymmetricMacdonaldPolynomials([\"A\",Integer(2),Integer(1)])\n      File \"sage/misc/lazy_import.pyx\", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py\", line 1208, in __classcall__\n        q = K(q)\n      File \"sage/structure/parent.pyx\", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)\n        return C._element_constructor(x)\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py\", line 563, in _element_constructor_\n        x = sage_eval(x, self.gens_dict_recursive())\n      File \"/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py\", line 181, in sage_eval\n        if not isinstance(source, six.string_types):\n    AttributeError: 'module' object has no attribute 'string_types'\n```\nApparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?",
    "created_at": "2015-06-09T18:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207009",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:24'></a>
Right at the beginning of test `--all --long` (after a fresh `make`!) I get LOTS of errors like

```
File "src/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 62, in sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials
Failed example:
    E = NonSymmetricMacdonaldPolynomials(["A",2,1])
Exception raised:
    Traceback (most recent call last):
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.non_symmetric_macdonald_polynomials.NonSymmetricMacdonaldPolynomials[0]>", line 1, in <module>
        E = NonSymmetricMacdonaldPolynomials(["A",Integer(2),Integer(1)])
      File "sage/misc/lazy_import.pyx", line 383, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3453)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1204)
        return cls.classcall(cls, *args, **kwds)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/combinat/root_system/non_symmetric_macdonald_polynomials.py", line 1208, in __classcall__
        q = K(q)
      File "sage/structure/parent.pyx", line 1095, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9523)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 109, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4402)
        raise
      File "sage/structure/coerce_maps.pyx", line 104, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4309)
        return C._element_constructor(x)
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/rings/fraction_field.py", line 563, in _element_constructor_
        x = sage_eval(x, self.gens_dict_recursive())
      File "/home/wluebbe/sage-6.8.beta3/local/lib/python2.7/site-packages/sage/misc/sage_eval.py", line 181, in sage_eval
        if not isinstance(source, six.string_types):
    AttributeError: 'module' object has no attribute 'string_types'
```
Apparently the module `six` has not yet the attribute `string_types`. This seems to be the symptom of a circular import. But why after this last, small change?



---

archive/issue_comments_207010.json:
```json
{
    "body": "<a id='comment:25'></a>\nApparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. \nAnd at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.",
    "created_at": "2015-06-09T19:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207010",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:25'></a>
Apparently both `fraction.field.py` and `sage-eval.py` (see the last 2 listed files) contain `import six`. 
And at the point where the error occurs the import process for module `six` (started in `fraction.field.py`) is not yet complete.



---

archive/issue_comments_207011.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d\">7e60f88</a></td><td><code>prevent relative import of six</code></td></tr></table>\n",
    "created_at": "2015-06-09T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207011",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d">7e60f88</a></td><td><code>prevent relative import of six</code></td></tr></table>




---

archive/issue_comments_207012.json:
```json
{
    "body": "**Changing commit** from \"[b16df45af9855bad1a2687db25d57e8fa881a8cf](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)\" to \"[7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)\".",
    "created_at": "2015-06-09T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207012",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b16df45af9855bad1a2687db25d57e8fa881a8cf](https://github.com/sagemath/sagetrac-mirror/commit/b16df45af9855bad1a2687db25d57e8fa881a8cf)" to "[7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)".



---

archive/issue_comments_207013.json:
```json
{
    "body": "<a id='comment:27'></a>\nThere is a new `six.py` in misc which is relative imported instead of the expected `six` module.",
    "created_at": "2015-06-09T22:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207013",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:27'></a>
There is a new `six.py` in misc which is relative imported instead of the expected `six` module.



---

archive/issue_comments_207014.json:
```json
{
    "body": "**Changing reviewer** from \"Ralf Stephan\" to \"Wilfried Luebbe\".",
    "created_at": "2015-06-10T07:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207014",
    "user": "https://github.com/wluebbe"
}
```

**Changing reviewer** from "Ralf Stephan" to "Wilfried Luebbe".



---

archive/issue_events_195669.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-10T07:21:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195669"
}
```



---

archive/issue_events_195670.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2015-06-10T07:21:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195670"
}
```



---

archive/issue_comments_207015.json:
```json
{
    "body": "<a id='comment:28'></a>\nI did not think of a new `six.py` module in `src/sage/misc`! \n\nAll test passed. Looks good.",
    "created_at": "2015-06-10T07:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207015",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:28'></a>
I did not think of a new `six.py` module in `src/sage/misc`! 

All test passed. Looks good.



---

archive/issue_comments_207016.json:
```json
{
    "body": "<a id='comment:29'></a>\nYou were not satisfied with my part of the review, sir?",
    "created_at": "2015-06-10T07:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207016",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>
You were not satisfied with my part of the review, sir?



---

archive/issue_comments_207017.json:
```json
{
    "body": "**Changing reviewer** from \"Wilfried Luebbe\" to \"Ralf Stephan, Wilfried Luebbe\".",
    "created_at": "2015-06-10T07:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207017",
    "user": "https://github.com/rwst"
}
```

**Changing reviewer** from "Wilfried Luebbe" to "Ralf Stephan, Wilfried Luebbe".



---

archive/issue_comments_207018.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@rwst](#comment%3A29):\n> You were not satisfied with my part of the review, sir?\n\nSorry about that.",
    "created_at": "2015-06-10T08:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207018",
    "user": "https://github.com/wluebbe"
}
```

<a id='comment:30'></a>
Replying to [@rwst](#comment%3A29):
> You were not satisfied with my part of the review, sir?

Sorry about that.



---

archive/issue_comments_207019.json:
```json
{
    "body": "**Changing branch** from \"[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)\" to \"[7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)\".",
    "created_at": "2015-06-11T13:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16064#issuecomment-207019",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/aapitzsch/16064_2](https://github.com/sagemath/sagetrac-mirror/tree/u/aapitzsch/16064_2)" to "[7e60f88fba8805110e89fa2f7093d61a2d78542d](https://github.com/sagemath/sagetrac-mirror/commit/7e60f88fba8805110e89fa2f7093d61a2d78542d)".



---

archive/issue_events_195671.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T13:50:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195671"
}
```



---

archive/issue_events_195672.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "51e7dcd5dff27b2f3492ad8b6158a5bb903f9135",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-11T13:50:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16064",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16064#event-195672"
}
```
