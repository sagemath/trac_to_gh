# Issue 16536: Python 3 preparation: cmp parameter of sorted() function and L.sort() method are gone

archive/issues_016299.json:
```json
{
    "assignees": [],
    "body": "In Py2 the standard function [sorted()](https://docs.python.org/2/library/functions.html#sorted) and the mutable list method [sort()](https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types) both have an optional parameter `cmp=` that takes a custom comparison function of two arguments.\n\nThe parameter is no more available in Py3. \n\nThe recommended way is to use the `key=` which specifies a function of one argument that is used to extract a comparison key from each list element. This has also better performance.\n\nWhile there is a function [functools.cmp_to_key()](https://docs.python.org/2/library/functools.html#functools.cmp_to_key) to convert an old-style cmp function to a key function, it is preferable to directly use an appropriate key function.\n\nThis ticket is tracked as a dependency of meta-ticket ticket:15980.\n\nDepends on #16853\nDepends on #17200\nDepends on #17229\n\nCC:  @tscrim @embray @jdemeyer\n\nKeywords: **python3**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16536_\n\n",
    "closed_at": "2018-01-10T13:20:42Z",
    "created_at": "2014-06-25T13:17:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Python 3 preparation: cmp parameter of sorted() function and L.sort() method are gone",
    "type": "issue",
    "updated_at": "2018-01-10T13:20:42Z",
    "url": "https://github.com/sagemath/sage/issues/16536",
    "user": "https://github.com/wluebbe"
}
```
In Py2 the standard function [sorted()](https://docs.python.org/2/library/functions.html#sorted) and the mutable list method [sort()](https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types) both have an optional parameter `cmp=` that takes a custom comparison function of two arguments.

The parameter is no more available in Py3. 

The recommended way is to use the `key=` which specifies a function of one argument that is used to extract a comparison key from each list element. This has also better performance.

While there is a function [functools.cmp_to_key()](https://docs.python.org/2/library/functools.html#functools.cmp_to_key) to convert an old-style cmp function to a key function, it is preferable to directly use an appropriate key function.

This ticket is tracked as a dependency of meta-ticket ticket:15980.

Depends on #16853
Depends on #17200
Depends on #17229

CC:  @tscrim @embray @jdemeyer

Keywords: **python3**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/16536_





---

archive/issue_events_236207.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-06-25T13:17:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236207"
}
```



---

archive/issue_events_236208.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-06-25T13:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "000080",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236208"
}
```



---

archive/issue_events_236209.json:
```json
{
    "actor": "https://github.com/wluebbe",
    "created_at": "2014-06-25T13:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236209"
}
```



---

archive/issue_comments_214560.json:
```json
{
    "body": "Demonstrate behavior of cmp= and key= in Py2 and Py3",
    "created_at": "2014-06-27T14:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214560",
    "user": "https://github.com/wluebbe"
}
```

Demonstrate behavior of cmp= and key= in Py2 and Py3



---

archive/issue_comments_214561.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[exercise-cmp-key-parameters.py.gz](https://github.com/sagemath/sage/files/ticket16536/exercise-cmp-key-parameters.py.gz)**\n\nThe workings of `functools.cmp_to_key` is nicely explained in [stackoverflow](http://stackoverflow.com/questions/16362744/how-does-pythons-cmp-to-key-function-work).\n\nThis is also demonstrated in the attached script.\n\nIt is also shown that it is not a good idea the use \"cmp=\" and \"key=\" together even in Py2!",
    "created_at": "2014-06-27T14:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214561",
    "user": "https://github.com/wluebbe"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[exercise-cmp-key-parameters.py.gz](https://github.com/sagemath/sage/files/ticket16536/exercise-cmp-key-parameters.py.gz)**

The workings of `functools.cmp_to_key` is nicely explained in [stackoverflow](http://stackoverflow.com/questions/16362744/how-does-pythons-cmp-to-key-function-work).

This is also demonstrated in the attached script.

It is also shown that it is not a good idea the use "cmp=" and "key=" together even in Py2!



---

archive/issue_events_236210.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236210"
}
```



---

archive/issue_events_236211.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236211"
}
```



---

archive/issue_comments_214562.json:
```json
{
    "body": "Dependencies: **#16853**",
    "created_at": "2014-08-19T13:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214562",
    "user": "https://github.com/a-andre"
}
```

Dependencies: **#16853**



---

archive/issue_comments_214563.json:
```json
{
    "body": "Changed dependencies from **#16853** to **#16853, #17200**",
    "created_at": "2014-10-22T20:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214563",
    "user": "https://github.com/a-andre"
}
```

Changed dependencies from **#16853** to **#16853, #17200**



---

archive/issue_comments_214564.json:
```json
{
    "body": "Changed dependencies from **#16853, #17200** to **#16853, #17200, #17229**",
    "created_at": "2014-10-26T21:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214564",
    "user": "https://github.com/a-andre"
}
```

Changed dependencies from **#16853, #17200** to **#16853, #17200, #17229**



---

archive/issue_events_236212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T13:32:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "000080",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236212"
}
```



---

archive/issue_events_236213.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-02T13:32:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236213"
}
```



---

archive/issue_comments_214565.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nsee #21035 for a step in that direction",
    "created_at": "2016-07-17T12:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214565",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

see #21035 for a step in that direction



---

archive/issue_events_236214.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-09-23T06:08:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236214"
}
```



---

archive/issue_events_236215.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-09-23T06:08:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236215"
}
```



---

archive/issue_events_236216.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-09-23T06:08:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236216"
}
```



---

archive/issue_comments_214566.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis is now mostly done. In some places, cmp was only deprecated.",
    "created_at": "2016-11-12T17:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214566",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

This is now mostly done. In some places, cmp was only deprecated.



---

archive/issue_events_236217.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:05:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236217"
}
```



---

archive/issue_events_236218.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:05:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236218"
}
```



---

archive/issue_events_236219.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-01T12:52:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236219"
}
```



---

archive/issue_events_236220.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-01T12:52:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236220"
}
```



---

archive/issue_comments_214567.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nanother step in #23698",
    "created_at": "2017-08-24T13:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214567",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

another step in #23698



---

archive/issue_comments_214568.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOne should soon take care of removing what was deprecated in #21766.\n\nSee #24409 for that",
    "created_at": "2017-11-16T19:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214568",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

One should soon take care of removing what was deprecated in #21766.

See #24409 for that



---

archive/issue_events_236221.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-04T10:08:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236221"
}
```



---

archive/issue_events_236222.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-04T10:08:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236222"
}
```



---

archive/issue_events_236223.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-04T10:08:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236223"
}
```



---

archive/issue_events_236224.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-04T10:08:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236224"
}
```



---

archive/issue_comments_214569.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMaybe we could now close this one ?",
    "created_at": "2018-01-04T10:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214569",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

Maybe we could now close this one ?



---

archive/issue_comments_214570.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nping ? any objection to close as invalid ?",
    "created_at": "2018-01-10T13:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16536#issuecomment-214570",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

ping ? any objection to close as invalid ?



---

archive/issue_events_236225.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-10T13:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236225"
}
```



---

archive/issue_events_236226.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-10T13:20:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236226"
}
```



---

archive/issue_events_236227.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-10T13:20:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16536",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16536#event-236227"
}
```
