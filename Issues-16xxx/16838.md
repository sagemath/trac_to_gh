# Issue 16838: make affine and projective dehomogenize and homogenize work together

archive/issues_016601.json:
```json
{
    "body": "There are a number of issues currently with the `homogenization` and `dehomogenization` functionality. Essentially, what I'd like to see is that dehomogenizing and then homogenizing returns basically the same object. Currently dehomogenization is using `AffinePatch`, but homogenization is creating a new projective space every time. This causes a number of funny behaviors so should instead be using projective embedding. I'd like to see tests of the following form return `True`:\n\n```\nP.<x,y,z>=ProjectiveSpace(QQ,2)\nH=End(P)\nf=H([x*y,y^2,z^2])\nn=1\nf.dehomogenize(n).homogenize(n)==f\n```\n\n```\nA.<x,y>=AffineSpace(QQ,2)\nH=End(A)\nf=H([x*y,y^2])\nn=0\nf.homogenize(n).dehomogenize(n)==f\n```\n\nThis also requires having the `affine_patch` and `projective_embedding` play nicely together. Fixing this would also allow objects homogenized or dehomogenized from the same space to then live in the same new space. The same for points and currently there is no homogenization function at all for affine points. \n\nI've started working on this and just need to fix a couple more things.\n\n**Assignee:** @bhutz\n\n**Branch:** [88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)\n\n**Reviewer:** Joao Alberto de Faria\n\n**Author:** Ben Hutz\n\nIssue created by migration from https://trac.sagemath.org/ticket/16838\n\n",
    "closed_at": "2014-09-06T11:02:36Z",
    "created_at": "2014-08-16T16:11:12Z",
    "labels": [
        "component: algebraic geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "make affine and projective dehomogenize and homogenize work together",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16838",
    "user": "https://github.com/bhutz"
}
```
There are a number of issues currently with the `homogenization` and `dehomogenization` functionality. Essentially, what I'd like to see is that dehomogenizing and then homogenizing returns basically the same object. Currently dehomogenization is using `AffinePatch`, but homogenization is creating a new projective space every time. This causes a number of funny behaviors so should instead be using projective embedding. I'd like to see tests of the following form return `True`:

```
P.<x,y,z>=ProjectiveSpace(QQ,2)
H=End(P)
f=H([x*y,y^2,z^2])
n=1
f.dehomogenize(n).homogenize(n)==f
```

```
A.<x,y>=AffineSpace(QQ,2)
H=End(A)
f=H([x*y,y^2])
n=0
f.homogenize(n).dehomogenize(n)==f
```

This also requires having the `affine_patch` and `projective_embedding` play nicely together. Fixing this would also allow objects homogenized or dehomogenized from the same space to then live in the same new space. The same for points and currently there is no homogenization function at all for affine points. 

I've started working on this and just need to fix a couple more things.

**Assignee:** @bhutz

**Branch:** [88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)

**Reviewer:** Joao Alberto de Faria

**Author:** Ben Hutz

Issue created by migration from https://trac.sagemath.org/ticket/16838





---

archive/issue_comments_270270.json:
```json
{
    "body": "**Branch:** [u/bhutz/ticket/16838](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/16838)",
    "created_at": "2014-08-16T17:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270270",
    "user": "https://github.com/bhutz"
}
```

**Branch:** [u/bhutz/ticket/16838](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/16838)



---

archive/issue_comments_270271.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62\">c3d007f</a></td><td><code>16838: fixes for algebraic subschemes</code></td></tr></table>\n",
    "created_at": "2014-08-18T19:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62">c3d007f</a></td><td><code>16838: fixes for algebraic subschemes</code></td></tr></table>




---

archive/issue_comments_270272.json:
```json
{
    "body": "**Commit:** [c3d007ffa7a1ed25e9c9b1982f756d595ce29a62](https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62)",
    "created_at": "2014-08-18T19:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [c3d007ffa7a1ed25e9c9b1982f756d595ce29a62](https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62)



---

archive/issue_comments_270273.json:
```json
{
    "body": "**Changing commit** from \"[c3d007ffa7a1ed25e9c9b1982f756d595ce29a62](https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62)\" to \"[30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754](https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754)\".",
    "created_at": "2014-08-23T13:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c3d007ffa7a1ed25e9c9b1982f756d595ce29a62](https://github.com/sagemath/sagetrac-mirror/commit/c3d007ffa7a1ed25e9c9b1982f756d595ce29a62)" to "[30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754](https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754)".



---

archive/issue_comments_270274.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754\">30e8fde</a></td><td><code>16838: fix issues with homogenize morphism</code></td></tr></table>\n",
    "created_at": "2014-08-23T13:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754">30e8fde</a></td><td><code>16838: fix issues with homogenize morphism</code></td></tr></table>




---

archive/issue_comments_270275.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164\">16efbbe</a></td><td><code>16838: slight correction to homogenize</code></td></tr></table>\n",
    "created_at": "2014-08-23T13:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164">16efbbe</a></td><td><code>16838: slight correction to homogenize</code></td></tr></table>




---

archive/issue_comments_270276.json:
```json
{
    "body": "**Changing commit** from \"[30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754](https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754)\" to \"[16efbbedf4a34b277028958c6ae3128916cf2164](https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164)\".",
    "created_at": "2014-08-23T13:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754](https://github.com/sagemath/sagetrac-mirror/commit/30e8fde4ac43f796f4dbdfcdd01aa1ade1e71754)" to "[16efbbedf4a34b277028958c6ae3128916cf2164](https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164)".



---

archive/issue_comments_270277.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2014-08-25T16:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270277",
    "user": "https://github.com/bhutz"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_270278.json:
```json
{
    "body": "**Author:** Ben Hutz",
    "created_at": "2014-08-25T16:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270278",
    "user": "https://github.com/bhutz"
}
```

**Author:** Ben Hutz



---

archive/issue_comments_270279.json:
```json
{
    "body": "<a id='comment:6'></a>\nOutside of a couple of small typos with spacing around equality signs, everything else looks good, ran the long test and confirmed that all tests passed.",
    "created_at": "2014-09-03T17:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270279",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

<a id='comment:6'></a>
Outside of a couple of small typos with spacing around equality signs, everything else looks good, ran the long test and confirmed that all tests passed.



---

archive/issue_comments_270280.json:
```json
{
    "body": "**Reviewer:** Joao de Faria",
    "created_at": "2014-09-03T17:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270280",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

**Reviewer:** Joao de Faria



---

archive/issue_comments_270281.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe\">8815855</a></td><td><code>16838: fixed some typos</code></td></tr></table>\n",
    "created_at": "2014-09-03T19:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe">8815855</a></td><td><code>16838: fixed some typos</code></td></tr></table>




---

archive/issue_comments_270282.json:
```json
{
    "body": "**Changing commit** from \"[16efbbedf4a34b277028958c6ae3128916cf2164](https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164)\" to \"[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)\".",
    "created_at": "2014-09-03T19:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[16efbbedf4a34b277028958c6ae3128916cf2164](https://github.com/sagemath/sagetrac-mirror/commit/16efbbedf4a34b277028958c6ae3128916cf2164)" to "[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)".



---

archive/issue_comments_270283.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2014-09-03T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270283",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_270284.json:
```json
{
    "body": "<a id='comment:9'></a>\nEverything looks good.",
    "created_at": "2014-09-03T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270284",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdefaria"
}
```

<a id='comment:9'></a>
Everything looks good.



---

archive/issue_comments_270285.json:
```json
{
    "body": "**Changing branch** from \"[u/bhutz/ticket/16838](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/16838)\" to \"[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)\".",
    "created_at": "2014-09-06T11:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270285",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/bhutz/ticket/16838](https://github.com/sagemath/sagetrac-mirror/tree/u/bhutz/ticket/16838)" to "[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)".



---

archive/issue_events_055634.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-06T11:02:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16838#event-55634"
}
```



---

archive/issue_comments_270286.json:
```json
{
    "body": "**Changing commit** from \"[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)\" to \"\".",
    "created_at": "2014-11-14T17:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270286",
    "user": "https://github.com/kcrisman"
}
```

**Changing commit** from "[88158554bf0a8613fa59b108b498744f9b0eeffe](https://github.com/sagemath/sagetrac-mirror/commit/88158554bf0a8613fa59b108b498744f9b0eeffe)" to "".



---

archive/issue_comments_270287.json:
```json
{
    "body": "**Changing reviewer** from \"Joao de Faria\" to \"Joao Alberto de Faria\".",
    "created_at": "2014-11-14T17:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16838#issuecomment-270287",
    "user": "https://github.com/kcrisman"
}
```

**Changing reviewer** from "Joao de Faria" to "Joao Alberto de Faria".
