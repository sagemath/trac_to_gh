# Issue 16533: Notebook won't show animations

archive/issues_016296.json:
```json
{
    "body": "The following example, taken from the documentation of the animate module, produces no visible output in the notebook:\n\n```\nsage: sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1,ymax=1) for c in sxrange(0,1,.2)]\nsage: a = animate(sines)\nsage: a.show()\n```\n\n\nAssignee: @gagern\n\nCC:  @kcrisman @jhpalmieri\n\nBranch: [u/gagern/ticket/16533b](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533b)\n\nCommit: [f7d57dc09566c02ab010a9c01eaae563100dc396](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)\n\nAuthor: Martin von Gagern\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/16533\n\n",
    "closed_at": "2014-07-17T13:58:14Z",
    "created_at": "2014-06-25T07:55:28Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Notebook won't show animations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16533",
    "user": "https://github.com/gagern"
}
```
The following example, taken from the documentation of the animate module, produces no visible output in the notebook:

```
sage: sines = [plot(c*sin(x), (-2*pi,2*pi), color=Color(c,0,0), ymin=-1,ymax=1) for c in sxrange(0,1,.2)]
sage: a = animate(sines)
sage: a.show()
```


Assignee: @gagern

CC:  @kcrisman @jhpalmieri

Branch: [u/gagern/ticket/16533b](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533b)

Commit: [f7d57dc09566c02ab010a9c01eaae563100dc396](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)

Author: Martin von Gagern

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/16533





---

archive/issue_comments_277395.json:
```json
{
    "body": "Branch: [u/gagern/ticket/16533](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533)",
    "created_at": "2014-06-25T18:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277395",
    "user": "https://github.com/gagern"
}
```

Branch: [u/gagern/ticket/16533](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533)



---

archive/issue_comments_277396.json:
```json
{
    "body": "Commit: [1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)",
    "created_at": "2014-06-25T18:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277396",
    "user": "https://github.com/gagern"
}
```

Commit: [1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)



---

archive/issue_comments_277397.json:
```json
{
    "body": "<a id='comment:2'></a>\nOK, I did a bit more than just enabling the embedding. I did restructure the show and save commands, and added support for [APNG](http://en.wikipedia.org/wiki/APNG). I hope that I might be able to add other formats in the future, in the spirit of ticket:7298.\n\n---\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[9374cff](https://github.com/sagemath/sagetrac-mirror/commit/9374cff6d1dbc7ca44749c36a1e5b4693e81819b)|`Create HTML to embed generated GIF in notebook.`|\n|[84886ce](https://github.com/sagemath/sagetrac-mirror/commit/84886ce6d5d46ee4940f12e7ea508e885ba17ebb)|`Return path to generated file.`|\n|[8199b02](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d)|`Avoid leaking animation files.`|\n|[1d29d17](https://github.com/sagemath/sagetrac-mirror/commit/1d29d17be571d24af57c85aedb2c31e9e5a1277f)|`Base Animation.show on Animation.save, and pass more arguments.`|\n|[1f7de6e](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)|`Add APNG support.`|",
    "created_at": "2014-06-25T18:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277397",
    "user": "https://github.com/gagern"
}
```

<a id='comment:2'></a>
OK, I did a bit more than just enabling the embedding. I did restructure the show and save commands, and added support for [APNG](http://en.wikipedia.org/wiki/APNG). I hope that I might be able to add other formats in the future, in the spirit of ticket:7298.

---
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[9374cff](https://github.com/sagemath/sagetrac-mirror/commit/9374cff6d1dbc7ca44749c36a1e5b4693e81819b)|`Create HTML to embed generated GIF in notebook.`|
|[84886ce](https://github.com/sagemath/sagetrac-mirror/commit/84886ce6d5d46ee4940f12e7ea508e885ba17ebb)|`Return path to generated file.`|
|[8199b02](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d)|`Avoid leaking animation files.`|
|[1d29d17](https://github.com/sagemath/sagetrac-mirror/commit/1d29d17be571d24af57c85aedb2c31e9e5a1277f)|`Base Animation.show on Animation.save, and pass more arguments.`|
|[1f7de6e](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)|`Add APNG support.`|



---

archive/issue_comments_277398.json:
```json
{
    "body": "Changing commit from \"[1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)\" to \"[0c21bd8d4257cb8c96560880a84e827552324378](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)\"",
    "created_at": "2014-06-26T00:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)" to "[0c21bd8d4257cb8c96560880a84e827552324378](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)"



---

archive/issue_comments_277399.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[f3a5b90](https://github.com/sagemath/sagetrac-mirror/commit/f3a5b9010cf47bcca463360a2e10e6241c7628be)|`Avoid multiple acTL hunks in APNG file.`|\n|[4c9a491](https://github.com/sagemath/sagetrac-mirror/commit/4c9a4910ad273dcb0f6226ef00274267f0192602)|`Turn generator into list when rendering frames.`|\n|[0c21bd8](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)|`Improved documentation.`|",
    "created_at": "2014-06-26T00:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[f3a5b90](https://github.com/sagemath/sagetrac-mirror/commit/f3a5b9010cf47bcca463360a2e10e6241c7628be)|`Avoid multiple acTL hunks in APNG file.`|
|[4c9a491](https://github.com/sagemath/sagetrac-mirror/commit/4c9a4910ad273dcb0f6226ef00274267f0192602)|`Turn generator into list when rendering frames.`|
|[0c21bd8](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)|`Improved documentation.`|



---

archive/issue_comments_277400.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-26T00:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277400",
    "user": "https://github.com/gagern"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_277401.json:
```json
{
    "body": "Changing commit from \"[0c21bd8d4257cb8c96560880a84e827552324378](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)\" to \"[b8a3c7c3affeffea7d3054e69f18065204c5d930](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)\"",
    "created_at": "2014-06-26T07:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0c21bd8d4257cb8c96560880a84e827552324378](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)" to "[b8a3c7c3affeffea7d3054e69f18065204c5d930](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)"



---

archive/issue_comments_277402.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[3edfb7f](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb)|`Support HTML5 video tag.`|\n|[5725460](https://github.com/sagemath/sagetrac-mirror/commit/57254600199330cece33a867355183730c611218)|`Fix doc test.`|\n|[b8a3c7c](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)|`More control over video tag attributes.`|",
    "created_at": "2014-06-26T07:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[3edfb7f](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb)|`Support HTML5 video tag.`|
|[5725460](https://github.com/sagemath/sagetrac-mirror/commit/57254600199330cece33a867355183730c611218)|`Fix doc test.`|
|[b8a3c7c](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)|`More control over video tag attributes.`|



---

archive/issue_comments_277403.json:
```json
{
    "body": "<a id='comment:6'></a>\nOriginally I had intended to push a separate branch for the video tag aspect of this, but now I figure that reviewing a single branch should be easier than dealing with multiple interdependent branches. So this ticket here will take care of that aspect from ticket:7298 as well.",
    "created_at": "2014-06-26T07:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277403",
    "user": "https://github.com/gagern"
}
```

<a id='comment:6'></a>
Originally I had intended to push a separate branch for the video tag aspect of this, but now I figure that reviewing a single branch should be easier than dealing with multiple interdependent branches. So this ticket here will take care of that aspect from ticket:7298 as well.



---

archive/issue_comments_277404.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[51007fb](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)|`Inline animations in tables.`|",
    "created_at": "2014-06-26T07:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[51007fb](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)|`Inline animations in tables.`|



---

archive/issue_comments_277405.json:
```json
{
    "body": "Changing commit from \"[b8a3c7c3affeffea7d3054e69f18065204c5d930](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)\" to \"[51007fbf59595127ed4b784155e91d78ebb52b2a](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)\"",
    "created_at": "2014-06-26T07:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[b8a3c7c3affeffea7d3054e69f18065204c5d930](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)" to "[51007fbf59595127ed4b784155e91d78ebb52b2a](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)"



---

archive/issue_comments_277406.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [gagern](#comment%3A6):\n> I figure that reviewing a single branch should be easier than dealing with multiple interdependent branches.\n\nPersonally, I completely disagree with this. I think fixing the notebook animate bug, the `<video>` tag and the APNG support should be 3 different tickets.",
    "created_at": "2014-06-26T13:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277406",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [gagern](#comment%3A6):
> I figure that reviewing a single branch should be easier than dealing with multiple interdependent branches.

Personally, I completely disagree with this. I think fixing the notebook animate bug, the `<video>` tag and the APNG support should be 3 different tickets.



---

archive/issue_comments_277407.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A8):\n> I think fixing the notebook animate bug, the `<video>` tag and the APNG support should be 3 different tickets.\n\n\nI guess I could try to split my modifications up. But there are several parts where I would not know where to put them.\n\n* Several documentation improvements are not directly related to either of these issues. Should I file yet another ticket?\n* And this whole modification of having `show` call `save` is used for APNG and <video>, so where should it go? Can I create a branch which contains this change, and then use that branch for both APNG and <video>?\n* The last commit, about inlining animations in tables, is again distinct, even though it was included in the ticket:7298 patch as well. Separate ticket as well?\n\nThe way I see it at the moment, we have 5 distinct modifications, two of which share a commit:\n\n* Notebook:\n  * [Create HTML to embed generated GIF in notebook](https://github.com/sagemath/sagetrac-mirror/commit/9374cff6d1dbc7ca44749c36a1e5b4693e81819b)\n  * [Return path to generated file](https://github.com/sagemath/sagetrac-mirror/commit/84886ce6d5d46ee4940f12e7ea508e885ba17ebb)\n  * [Avoid leaking animation files](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d)\n* Common APNG and <video>:\n  * [Base Animation.show on Animation.save, and pass more arguments](https://github.com/sagemath/sagetrac-mirror/commit/1d29d17be571d24af57c85aedb2c31e9e5a1277f)\n* APNG support:\n  * [Add APNG support](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)\n  * [Avoid multiple acTL hunks in APNG file](https://github.com/sagemath/sagetrac-mirror/commit/f3a5b9010cf47bcca463360a2e10e6241c7628be)\n  * [Turn generator into list when rendering frames](https://github.com/sagemath/sagetrac-mirror/commit/4c9a4910ad273dcb0f6226ef00274267f0192602)\n  * [Fix doc test](https://github.com/sagemath/sagetrac-mirror/commit/57254600199330cece33a867355183730c611218)\n* Documentation improvements:\n  * [Improved documentation](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)\n* <video> tag support:\n  * [Support HTML5 video tag](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb)\n  * [More control over video tag attributes](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)\n* Tables:\n  * [Inline animations in tables](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)\n\nIt would take some time to work out whether these branches each make sense on their own. I'd prefer to only invest that effort if I know it is actually needed. Would you be willing to review some of these aspects, Jeroen? If so, that would be one reason for formatting things in the way you prefer.",
    "created_at": "2014-06-26T14:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277407",
    "user": "https://github.com/gagern"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A8):
> I think fixing the notebook animate bug, the `<video>` tag and the APNG support should be 3 different tickets.


I guess I could try to split my modifications up. But there are several parts where I would not know where to put them.

* Several documentation improvements are not directly related to either of these issues. Should I file yet another ticket?
* And this whole modification of having `show` call `save` is used for APNG and <video>, so where should it go? Can I create a branch which contains this change, and then use that branch for both APNG and <video>?
* The last commit, about inlining animations in tables, is again distinct, even though it was included in the ticket:7298 patch as well. Separate ticket as well?

The way I see it at the moment, we have 5 distinct modifications, two of which share a commit:

* Notebook:
  * [Create HTML to embed generated GIF in notebook](https://github.com/sagemath/sagetrac-mirror/commit/9374cff6d1dbc7ca44749c36a1e5b4693e81819b)
  * [Return path to generated file](https://github.com/sagemath/sagetrac-mirror/commit/84886ce6d5d46ee4940f12e7ea508e885ba17ebb)
  * [Avoid leaking animation files](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d)
* Common APNG and <video>:
  * [Base Animation.show on Animation.save, and pass more arguments](https://github.com/sagemath/sagetrac-mirror/commit/1d29d17be571d24af57c85aedb2c31e9e5a1277f)
* APNG support:
  * [Add APNG support](https://github.com/sagemath/sagetrac-mirror/commit/1f7de6eb7fa8bffdf54e1a73d6c8a0ae4051ffd1)
  * [Avoid multiple acTL hunks in APNG file](https://github.com/sagemath/sagetrac-mirror/commit/f3a5b9010cf47bcca463360a2e10e6241c7628be)
  * [Turn generator into list when rendering frames](https://github.com/sagemath/sagetrac-mirror/commit/4c9a4910ad273dcb0f6226ef00274267f0192602)
  * [Fix doc test](https://github.com/sagemath/sagetrac-mirror/commit/57254600199330cece33a867355183730c611218)
* Documentation improvements:
  * [Improved documentation](https://github.com/sagemath/sagetrac-mirror/commit/0c21bd8d4257cb8c96560880a84e827552324378)
* <video> tag support:
  * [Support HTML5 video tag](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb)
  * [More control over video tag attributes](https://github.com/sagemath/sagetrac-mirror/commit/b8a3c7c3affeffea7d3054e69f18065204c5d930)
* Tables:
  * [Inline animations in tables](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)

It would take some time to work out whether these branches each make sense on their own. I'd prefer to only invest that effort if I know it is actually needed. Would you be willing to review some of these aspects, Jeroen? If so, that would be one reason for formatting things in the way you prefer.



---

archive/issue_comments_277408.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [gagern](#comment%3A9):\n> I'd prefer to only invest that effort if I know it is actually needed.\n\nThat is totally understandable.\n\n> Would you be willing to review some of these aspects, Jeroen?\n\nSorry, but probably not. I just looked at this ticket, hoping for a \"quick fix\" to the issue mentioned in the ticket. But I personally don't care that much.",
    "created_at": "2014-06-26T14:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277408",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [gagern](#comment%3A9):
> I'd prefer to only invest that effort if I know it is actually needed.

That is totally understandable.

> Would you be willing to review some of these aspects, Jeroen?

Sorry, but probably not. I just looked at this ticket, hoping for a "quick fix" to the issue mentioned in the ticket. But I personally don't care that much.



---

archive/issue_comments_277409.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [gagern](#comment%3A9):\n> I guess I could try to split my modifications up. But there are several parts where I would not know where to put them.\n\n\nMy rule is: when in doubt, make a new ticket. Generally, that makes things easiest to review. Imagine there is a reviewer who cares very much about the `<video>` tag. He could easily review one of your 5 hypothetical tickets, but he might find this ticket here too overwhelming to review.",
    "created_at": "2014-06-26T14:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277409",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Replying to [gagern](#comment%3A9):
> I guess I could try to split my modifications up. But there are several parts where I would not know where to put them.


My rule is: when in doubt, make a new ticket. Generally, that makes things easiest to review. Imagine there is a reviewer who cares very much about the `<video>` tag. He could easily review one of your 5 hypothetical tickets, but he might find this ticket here too overwhelming to review.



---

archive/issue_comments_277410.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jdemeyer](#comment%3A11):\n> My rule is: when in doubt, make a new ticket.\n\n\nI can understand your argument. On the other hand, reviewing a branch [officially](http://sagemath.org/doc/developer/trac.html#section-review-patches) entails running the complete test suite, including long tests. I'd rather do that once only instead of five times. But I guess I'll have a look at how much trouble splitting this stuff actually is, and act according to that. If I can simply cherry-pick the commits as described above, and they pass doctests, that's probably what I'll do.",
    "created_at": "2014-06-26T15:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277410",
    "user": "https://github.com/gagern"
}
```

<a id='comment:12'></a>
Replying to [jdemeyer](#comment%3A11):
> My rule is: when in doubt, make a new ticket.


I can understand your argument. On the other hand, reviewing a branch [officially](http://sagemath.org/doc/developer/trac.html#section-review-patches) entails running the complete test suite, including long tests. I'd rather do that once only instead of five times. But I guess I'll have a look at how much trouble splitting this stuff actually is, and act according to that. If I can simply cherry-pick the commits as described above, and they pass doctests, that's probably what I'll do.



---

archive/issue_comments_277411.json:
```json
{
    "body": "<a id='comment:13'></a>\nI completely agree that this ticket should first only take care of missing animations. \n\nAlso, is this at all related to [this sage-support discussion](https://groups.google.com/forum/#!topic/sage-support/_I7Vw0rCiWU)?  It should be clear exactly when/where this is necessary.",
    "created_at": "2014-06-27T02:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277411",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
I completely agree that this ticket should first only take care of missing animations. 

Also, is this at all related to [this sage-support discussion](https://groups.google.com/forum/#!topic/sage-support/_I7Vw0rCiWU)?  It should be clear exactly when/where this is necessary.



---

archive/issue_comments_277412.json:
```json
{
    "body": "Changing branch from \"[u/gagern/ticket/16533](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533)\" to \"[u/gagern/ticket/16533b](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533b)\"",
    "created_at": "2014-06-27T18:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277412",
    "user": "https://github.com/gagern"
}
```

Changing branch from "[u/gagern/ticket/16533](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533)" to "[u/gagern/ticket/16533b](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/16533b)"



---

archive/issue_comments_277413.json:
```json
{
    "body": "<a id='comment:14'></a>\nOK, I'm splitting things up:\n\n* Notebook: here\n* <video> and tables: #7298\n* Documentation: #16570\n* APNG: #16571\n\nI hope Trac will pick up my new branch now.\n\n---\nNew commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[ac83bdb](https://github.com/sagemath/sagetrac-mirror/commit/ac83bdba2c82813793999a5e5d0a196ef13be022)|`Proper hyperlink formatting in animate documentation.`|\n|[031b97e](https://github.com/sagemath/sagetrac-mirror/commit/031b97e1b438e558bf2f1bd03bcabee491af3968)|`Base Animation.show on Animation.save, and pass more arguments.`|\n|[0325ee2](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)|`Create HTML to embed generated GIF in notebook.`|",
    "created_at": "2014-06-27T18:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277413",
    "user": "https://github.com/gagern"
}
```

<a id='comment:14'></a>
OK, I'm splitting things up:

* Notebook: here
* <video> and tables: #7298
* Documentation: #16570
* APNG: #16571

I hope Trac will pick up my new branch now.

---
New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[ac83bdb](https://github.com/sagemath/sagetrac-mirror/commit/ac83bdba2c82813793999a5e5d0a196ef13be022)|`Proper hyperlink formatting in animate documentation.`|
|[031b97e](https://github.com/sagemath/sagetrac-mirror/commit/031b97e1b438e558bf2f1bd03bcabee491af3968)|`Base Animation.show on Animation.save, and pass more arguments.`|
|[0325ee2](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)|`Create HTML to embed generated GIF in notebook.`|



---

archive/issue_comments_277414.json:
```json
{
    "body": "Changing commit from \"[51007fbf59595127ed4b784155e91d78ebb52b2a](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)\" to \"[0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)\"",
    "created_at": "2014-06-27T18:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277414",
    "user": "https://github.com/gagern"
}
```

Changing commit from "[51007fbf59595127ed4b784155e91d78ebb52b2a](https://github.com/sagemath/sagetrac-mirror/commit/51007fbf59595127ed4b784155e91d78ebb52b2a)" to "[0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)"



---

archive/issue_comments_277415.json:
```json
{
    "body": "<a id='comment:15'></a>\nSee also #15081, though I'm not sure which (if any) of the followup tickets are directly related to that one.",
    "created_at": "2014-06-30T13:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277415",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>
See also #15081, though I'm not sure which (if any) of the followup tickets are directly related to that one.



---

archive/issue_comments_277416.json:
```json
{
    "body": "<a id='comment:16'></a>\nOkay, I'm 99% sure that #12827 caused this.  Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)",
    "created_at": "2014-06-30T13:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277416",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>
Okay, I'm 99% sure that #12827 caused this.  Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)



---

archive/issue_comments_277417.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [kcrisman](#comment%3A16):\n> Okay, I'm 99% sure that #12827 caused this.  Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)\n\n\nOk; I worked on #12827, and I confess I didn't think to check functionality in the notebook.  The following is indeed broken, but I don't know why (I haven't read this ticket yet):\n\n```\nc = animate([circle((i,i), 1-1/(i+1), hue=i/10) for i in srange(0,2,0.2)],xmin=0,ymin=0,xmax=2,ymax=2,figsize=[2,2])\nc.show()\n```\n\nMoreover, when I do\n\n```\nc.save()\n```\n\nI get nothing, but when I do \n\n```\nc.save('tmp.gif')\n```\n\nthe gif is saved and is displayed.  I'll investigate further . . .",
    "created_at": "2014-06-30T14:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277417",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:17'></a>
Replying to [kcrisman](#comment%3A16):
> Okay, I'm 99% sure that #12827 caused this.  Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)


Ok; I worked on #12827, and I confess I didn't think to check functionality in the notebook.  The following is indeed broken, but I don't know why (I haven't read this ticket yet):

```
c = animate([circle((i,i), 1-1/(i+1), hue=i/10) for i in srange(0,2,0.2)],xmin=0,ymin=0,xmax=2,ymax=2,figsize=[2,2])
c.show()
```

Moreover, when I do

```
c.save()
```

I get nothing, but when I do 

```
c.save('tmp.gif')
```

the gif is saved and is displayed.  I'll investigate further . . .



---

archive/issue_comments_277418.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [kcrisman](#comment%3A16):\n> Okay, I'm 99% sure that #12827 caused this.\n\n\nI agree, namely the two instances where `sage.misc.temporary_file.graphics_filename` got replaced by `tmp_filename`.\n\n> Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)\n\n\nNot neccessarily. We could get away with just replacing `tmp_filename` by `graphics_filename` if we are in the `EMBEDDED_MODE` case. This is essentially undoing the `graphics_filename` removal from #12827. Although I would advise against unconditionally using `graphics_filename`. I did that at some point, and suddenly my test suite started bleeding files into the current working directory from where I ran the tests. That's why I wrote [8199b02](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d) in my now-superseded branch.\n\nThe reason to have all this infrastructure is twofold. On the one hand, it also facilitates later improvements, like #7298 and #16571. On the other hand, it makes code more similar to `Graphics.show`, which helps maintainability. So I really suggest you compare `Animation.show` to [Graphics.show](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/plot/graphics.py#n1785) when reviewing this. There you see common aspects:\n\n* Delegating to save\n* Passing kwargs\n* Using `graphics_filename` only in the embedded case\n\nI think this commonness justifies the larger footprint of my modification, but if you want to aim for a fix which is as small as possible, then concentrating on the `tmp_filename` vs. `graphics_filename` distinction is sufficient.",
    "created_at": "2014-06-30T14:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277418",
    "user": "https://github.com/gagern"
}
```

<a id='comment:18'></a>
Replying to [kcrisman](#comment%3A16):
> Okay, I'm 99% sure that #12827 caused this.


I agree, namely the two instances where `sage.misc.temporary_file.graphics_filename` got replaced by `tmp_filename`.

> Do we really need all this infrastructure for this to be fixed?  (I'm not saying we don't, just checking.)


Not neccessarily. We could get away with just replacing `tmp_filename` by `graphics_filename` if we are in the `EMBEDDED_MODE` case. This is essentially undoing the `graphics_filename` removal from #12827. Although I would advise against unconditionally using `graphics_filename`. I did that at some point, and suddenly my test suite started bleeding files into the current working directory from where I ran the tests. That's why I wrote [8199b02](https://github.com/sagemath/sagetrac-mirror/commit/8199b0237d6e5053932bd609ea941a02f993b36d) in my now-superseded branch.

The reason to have all this infrastructure is twofold. On the one hand, it also facilitates later improvements, like #7298 and #16571. On the other hand, it makes code more similar to `Graphics.show`, which helps maintainability. So I really suggest you compare `Animation.show` to [Graphics.show](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/plot/graphics.py#n1785) when reviewing this. There you see common aspects:

* Delegating to save
* Passing kwargs
* Using `graphics_filename` only in the embedded case

I think this commonness justifies the larger footprint of my modification, but if you want to aim for a fix which is as small as possible, then concentrating on the `tmp_filename` vs. `graphics_filename` distinction is sufficient.



---

archive/issue_comments_277419.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [niles](#comment%3A17):\n> Moreover, when I do `c.save()` I get nothing, but when I do `c.save('tmp.gif')`\n> the gif is saved and is displayed.\n\n\nThe former saves in a temporary directory which the notebook knows nothing about, whereas the latter saves in the current directory where the notebook will find the file and display it to the user. Also note #16573 about this \u201cI get nothing\u201d user experience.",
    "created_at": "2014-06-30T14:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277419",
    "user": "https://github.com/gagern"
}
```

<a id='comment:19'></a>
Replying to [niles](#comment%3A17):
> Moreover, when I do `c.save()` I get nothing, but when I do `c.save('tmp.gif')`
> the gif is saved and is displayed.


The former saves in a temporary directory which the notebook knows nothing about, whereas the latter saves in the current directory where the notebook will find the file and display it to the user. Also note #16573 about this “I get nothing” user experience.



---

archive/issue_comments_277420.json:
```json
{
    "body": "<a id='comment:20'></a>\nHopefully you and Niles can come to some resolution of this that\n* fixes the prime problem asap\n* leaves in enough infrastructure to build on\n* doesn't make doing bigger animations hard again\nI'm making this a blocker since it seems that there is a quick resolution possible and we really don't want this kind of very visible regression any longer than possible.",
    "created_at": "2014-06-30T14:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277420",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
Hopefully you and Niles can come to some resolution of this that
* fixes the prime problem asap
* leaves in enough infrastructure to build on
* doesn't make doing bigger animations hard again
I'm making this a blocker since it seems that there is a quick resolution possible and we really don't want this kind of very visible regression any longer than possible.



---

archive/issue_events_055211.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16533#event-55211"
}
```



---

archive/issue_comments_277421.json:
```json
{
    "body": "<a id='comment:21'></a>\nOne more thing to consider: apparently before #12827, one could call `Animation.gif()` and `Animation.ffmpeg()` to have files displayed in the notebook. Neither this patch here nor the one from #16573 will restore that functionality. Only the code path through `Animation.show()` will be suitable for notebook. If I were to restore that functionality with all my other modifications in mind, then I'd do so in the `_adjust_savefile` method I introduce in [005b83f](https://github.com/sagemath/sagetrac-mirror/commit/005b83f2379d786b88f9a6b194dd334c038ea8ca) from #16571.\n\nIf you want that functionality restored for the next release as well, then please let me know whether one of you is willing to review patches up to that. Note that although #16571 is about adding APNG support, the commit in question occurs before (and in preparation) to that. So you can review patches up to that if you want to. I could even merge that commit to the branch for this ticket here, and then add the use of `graphics_filename` to that.\n\nI myself am not sure that I would want `gif` and `ffmpeg` to show their results unconditionally (as images instead of e.g. paths). But for the sake of backwards compatibility it might still be reasonable.",
    "created_at": "2014-06-30T15:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277421",
    "user": "https://github.com/gagern"
}
```

<a id='comment:21'></a>
One more thing to consider: apparently before #12827, one could call `Animation.gif()` and `Animation.ffmpeg()` to have files displayed in the notebook. Neither this patch here nor the one from #16573 will restore that functionality. Only the code path through `Animation.show()` will be suitable for notebook. If I were to restore that functionality with all my other modifications in mind, then I'd do so in the `_adjust_savefile` method I introduce in [005b83f](https://github.com/sagemath/sagetrac-mirror/commit/005b83f2379d786b88f9a6b194dd334c038ea8ca) from #16571.

If you want that functionality restored for the next release as well, then please let me know whether one of you is willing to review patches up to that. Note that although #16571 is about adding APNG support, the commit in question occurs before (and in preparation) to that. So you can review patches up to that if you want to. I could even merge that commit to the branch for this ticket here, and then add the use of `graphics_filename` to that.

I myself am not sure that I would want `gif` and `ffmpeg` to show their results unconditionally (as images instead of e.g. paths). But for the sake of backwards compatibility it might still be reasonable.



---

archive/issue_comments_277422.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm cc-ing jhpalmieri since he gave positive review to the ticket which introduced this regression -- #12827.\n\nIf I understand correctly, the minimal necessary change is to use `graphics_filename` in embedded mode of animate.  I've just pushed a branch which does this, and the code from the ticket description does show an animation in the notebook.\n\nBranch: [u/niles/ticket/16533-stopgap](http://git.sagemath.org/sage.git/diff/?id2=develop&id=u/niles/ticket/16533-stopgap)\n\n\nI think the other changes discussed here are important, but I don't have time right now to understand them fully or review them.  It makes sense that the save/show/internal functions of animation objects and other graphics objects should be comparable.  But I would need more time to think carefully about the best organization.  I'm not sure that the proposed treatment of keyword arguments is ideal, for example.\n\nI propose that we do the most immediate and quick fix to address the regression, and continue work on the other enhancements here in another ticket with a more appropriate description.  Anyone interested in giving a positive review?\n\nThe outline in comment [comment:9] might make for a good organizational framework, and the new metaticket could be set to depend on a number of different tickets for single issues.",
    "created_at": "2014-06-30T18:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277422",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:22'></a>
I'm cc-ing jhpalmieri since he gave positive review to the ticket which introduced this regression -- #12827.

If I understand correctly, the minimal necessary change is to use `graphics_filename` in embedded mode of animate.  I've just pushed a branch which does this, and the code from the ticket description does show an animation in the notebook.

Branch: [u/niles/ticket/16533-stopgap](http://git.sagemath.org/sage.git/diff/?id2=develop&id=u/niles/ticket/16533-stopgap)


I think the other changes discussed here are important, but I don't have time right now to understand them fully or review them.  It makes sense that the save/show/internal functions of animation objects and other graphics objects should be comparable.  But I would need more time to think carefully about the best organization.  I'm not sure that the proposed treatment of keyword arguments is ideal, for example.

I propose that we do the most immediate and quick fix to address the regression, and continue work on the other enhancements here in another ticket with a more appropriate description.  Anyone interested in giving a positive review?

The outline in comment [comment:9] might make for a good organizational framework, and the new metaticket could be set to depend on a number of different tickets for single issues.



---

archive/issue_comments_277423.json:
```json
{
    "body": "<a id='comment:23'></a>\nJohn: This ticket addresses a regression we (I) introduced in #12827: Expand Animation class to accept more graphics types\n\nThe changes there broke the `show` method for animations in the notebook.\n\nI've pushed a branch which fixes this -- I'd appreciate if you could take a look.",
    "created_at": "2014-06-30T18:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277423",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:23'></a>
John: This ticket addresses a regression we (I) introduced in #12827: Expand Animation class to accept more graphics types

The changes there broke the `show` method for animations in the notebook.

I've pushed a branch which fixes this -- I'd appreciate if you could take a look.



---

archive/issue_comments_277424.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [niles](#comment%3A22):\n> I've just pushed a branch which does this, and the code from the ticket description does show an animation in the notebook.\n\n\nThe stopgap looks fine to me. However, it doesn't scale well to generating videos or APNG files. So if someone decides that my branch isn't going to make it to the next release, then I'm giving your small change a positive review. But that would mean I'll probably have to rebase the branches for several other tickets, so at the moment I hope someone will review my own more extensive modifications.\n\n> I'm not sure that the proposed treatment of keyword arguments is ideal, for example.\n\n\nCould you elaborate on your concerns there?",
    "created_at": "2014-06-30T18:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277424",
    "user": "https://github.com/gagern"
}
```

<a id='comment:24'></a>
Replying to [niles](#comment%3A22):
> I've just pushed a branch which does this, and the code from the ticket description does show an animation in the notebook.


The stopgap looks fine to me. However, it doesn't scale well to generating videos or APNG files. So if someone decides that my branch isn't going to make it to the next release, then I'm giving your small change a positive review. But that would mean I'll probably have to rebase the branches for several other tickets, so at the moment I hope someone will review my own more extensive modifications.

> I'm not sure that the proposed treatment of keyword arguments is ideal, for example.


Could you elaborate on your concerns there?



---

archive/issue_comments_277425.json:
```json
{
    "body": "<a id='comment:25'></a>\nI don't have a strong preference between the two proposed fixes; I probably lean toward Martin's, since it fits in with his other plans. Having said that, I think that it's a bad idea to change the keyword arguments from `show(self, delay=20, iterations=0)` to `show(self, format=None, linkmode=False, **kwargs)`: if someone is currently calling `a.show(10, 2)`, it won't work after the change. The same issue might arise with the changes to the arguments to the `save` method.",
    "created_at": "2014-07-02T21:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277425",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>
I don't have a strong preference between the two proposed fixes; I probably lean toward Martin's, since it fits in with his other plans. Having said that, I think that it's a bad idea to change the keyword arguments from `show(self, delay=20, iterations=0)` to `show(self, format=None, linkmode=False, **kwargs)`: if someone is currently calling `a.show(10, 2)`, it won't work after the change. The same issue might arise with the changes to the arguments to the `save` method.



---

archive/issue_comments_277426.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jhpalmieri](#comment%3A25):\n> I think that it's a bad idea to change the keyword arguments [\u2026]\n\n\nValid point. I whish we had Python 3 with its keyword-only arguments. I guess for the time being I'll simply accept `kwargs` *only*, and pop my arguments from that dict. I had something along these lines, copied from `Graphics.show` but reverted in the now superseded commit [3edfb7f](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb).",
    "created_at": "2014-07-02T22:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277426",
    "user": "https://github.com/gagern"
}
```

<a id='comment:26'></a>
Replying to [jhpalmieri](#comment%3A25):
> I think that it's a bad idea to change the keyword arguments […]


Valid point. I whish we had Python 3 with its keyword-only arguments. I guess for the time being I'll simply accept `kwargs` *only*, and pop my arguments from that dict. I had something along these lines, copied from `Graphics.show` but reverted in the now superseded commit [3edfb7f](https://github.com/sagemath/sagetrac-mirror/commit/3edfb7f99fc79edf4716eb2e80f927213b9f86cb).



---

archive/issue_comments_277427.json:
```json
{
    "body": "<a id='comment:27'></a>\nTo be more specific: I think that we probably should avoid a situation where a user passed arguments without keywords and these suddenly change their meaning, leading to obscure errors. I think, however, that it is acceptable to outright reject these calls with a clear indication that positional parameters are unsuitable here. All the examples in the docstrings use keywords, so we never advertised the positional use. In that regard, `save` needs no changes at all. `show` would have to pop two items from `kwargs`. I have the change ready to commit locally, but I'll await feedback whether you agree on that deliberate breach of backwards compatibility.\n\nSure, we could include the old positional parameters, and pass them on to `save`. One problem here is that we have to repeat default values all over the place. If we decide to change the default delay to something else, or perhaps to not set a default delay at all for some formats, then there will be several places which need modifications. To deal with that, one would have to set all defaults to `None` at the outer levels, and replace that with the actual default value just where it is actually needed. Doable. Would you prefer a modification along these lines?",
    "created_at": "2014-07-02T23:10:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277427",
    "user": "https://github.com/gagern"
}
```

<a id='comment:27'></a>
To be more specific: I think that we probably should avoid a situation where a user passed arguments without keywords and these suddenly change their meaning, leading to obscure errors. I think, however, that it is acceptable to outright reject these calls with a clear indication that positional parameters are unsuitable here. All the examples in the docstrings use keywords, so we never advertised the positional use. In that regard, `save` needs no changes at all. `show` would have to pop two items from `kwargs`. I have the change ready to commit locally, but I'll await feedback whether you agree on that deliberate breach of backwards compatibility.

Sure, we could include the old positional parameters, and pass them on to `save`. One problem here is that we have to repeat default values all over the place. If we decide to change the default delay to something else, or perhaps to not set a default delay at all for some formats, then there will be several places which need modifications. To deal with that, one would have to set all defaults to `None` at the outer levels, and replace that with the actual default value just where it is actually needed. Doable. Would you prefer a modification along these lines?



---

archive/issue_comments_277428.json:
```json
{
    "body": "<a id='comment:28'></a>\nI'm not sure if I understand the best way to deal with this kind of situation (keyword defaults passed to other methods).  I understand that removing duplication is best practice, but I am frustrated when I can't read in a docstring what possible keywords a function takes.\n\nThe plot functions seem to have some very complex system for dealing with keywords, maybe resolving this tension -- is it relevant here?\n\nAlso, I'd like to make sure we keep the [deprecation policy](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation) in mind (support old syntax for 1 year after warning is issued).",
    "created_at": "2014-07-03T12:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277428",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:28'></a>
I'm not sure if I understand the best way to deal with this kind of situation (keyword defaults passed to other methods).  I understand that removing duplication is best practice, but I am frustrated when I can't read in a docstring what possible keywords a function takes.

The plot functions seem to have some very complex system for dealing with keywords, maybe resolving this tension -- is it relevant here?

Also, I'd like to make sure we keep the [deprecation policy](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation) in mind (support old syntax for 1 year after warning is issued).



---

archive/issue_comments_277429.json:
```json
{
    "body": "<a id='comment:29'></a>\nNow that I've actually looked at the plot code and the [`@`options decorator](http://www.sagemath.org/doc/reference/misc/sage/misc/decorators.html#sage.misc.decorators.options), I think it was designed to solve a slightly different problem (set global option defaults) but does give a way to set default keywords once and have them appear in the docstring of multiple functions.\n\nDepending how complicated the option handling needs to be, it may or may not be worthwhile to use this decorator.",
    "created_at": "2014-07-03T12:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277429",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:29'></a>
Now that I've actually looked at the plot code and the [`@`options decorator](http://www.sagemath.org/doc/reference/misc/sage/misc/decorators.html#sage.misc.decorators.options), I think it was designed to solve a slightly different problem (set global option defaults) but does give a way to set default keywords once and have them appear in the docstring of multiple functions.

Depending how complicated the option handling needs to be, it may or may not be worthwhile to use this decorator.



---

archive/issue_comments_277430.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [niles](#comment%3A28):\n> Also, I'd like to make sure we keep the [deprecation policy](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation) in mind (support old syntax for 1 year after warning is issued).\n\n\nThat is a very useful guideline here on how to proceed, thanks a lot! I will restore the positional parameters for now. And I just filed #16607 for a more generic way of deprecating positional parameters, which \u2013 if it gets accepted \u2013 could be applied here as well.\n\n> I'm not sure if I understand the best way to deal with this kind of situation (keyword defaults passed to other methods).  I understand that removing duplication is best practice, but I am frustrated when I can't read in a docstring what possible keywords a function takes.\n\n\nI thought that even when the function only accepts `**kwargs`, the docstring should still document the most commonly used keywords. In that case, the function signature would be incomplete, but the docsting as a whole would (thanks to unfortunate amounds of dupliate text) still describe these parameters. I would however welcome some idea on how to avoid this duplication as well.\n\n> The plot functions seem to have some very complex system for dealing with keywords, maybe resolving this tension -- is it relevant here?\n\n\nI'll have to investigate all the magic asociated with `_sage_argspec_`, but now that you mention it, it *should* be possible to improve the situation here as well. In particular, the ``@`options` decorator would be useful for `show` in any case, since people might have preferences over how to view their animations, particularly with respect to format (GIF / APNG / WebM / Theora). Having to set these in every call can become annoying. Will investigate that.",
    "created_at": "2014-07-03T13:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277430",
    "user": "https://github.com/gagern"
}
```

<a id='comment:30'></a>
Replying to [niles](#comment%3A28):
> Also, I'd like to make sure we keep the [deprecation policy](http://www.sagemath.org/doc/developer/coding_in_python.html#deprecation) in mind (support old syntax for 1 year after warning is issued).


That is a very useful guideline here on how to proceed, thanks a lot! I will restore the positional parameters for now. And I just filed #16607 for a more generic way of deprecating positional parameters, which – if it gets accepted – could be applied here as well.

> I'm not sure if I understand the best way to deal with this kind of situation (keyword defaults passed to other methods).  I understand that removing duplication is best practice, but I am frustrated when I can't read in a docstring what possible keywords a function takes.


I thought that even when the function only accepts `**kwargs`, the docstring should still document the most commonly used keywords. In that case, the function signature would be incomplete, but the docsting as a whole would (thanks to unfortunate amounds of dupliate text) still describe these parameters. I would however welcome some idea on how to avoid this duplication as well.

> The plot functions seem to have some very complex system for dealing with keywords, maybe resolving this tension -- is it relevant here?


I'll have to investigate all the magic asociated with `_sage_argspec_`, but now that you mention it, it *should* be possible to improve the situation here as well. In particular, the ``@`options` decorator would be useful for `show` in any case, since people might have preferences over how to view their animations, particularly with respect to format (GIF / APNG / WebM / Theora). Having to set these in every call can become annoying. Will investigate that.



---

archive/issue_comments_277431.json:
```json
{
    "body": "<a id='comment:31'></a>\nGreat discussion!  But let's keep in mind that probably in this particular case the **most** important thing is that Sage 6.3 allows animations to work again.   Niles' branch doesn't allow me to look at various commits, but I think that just making this work first is most important, even if that means a slight amount of rebasing for the \"right fix\".  Let's put it this way - I don't think a one-liner change really will mean much difference for gagern's code, because he can just put that in another ticket and even use the same exact branch :-)",
    "created_at": "2014-07-03T13:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277431",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'></a>
Great discussion!  But let's keep in mind that probably in this particular case the **most** important thing is that Sage 6.3 allows animations to work again.   Niles' branch doesn't allow me to look at various commits, but I think that just making this work first is most important, even if that means a slight amount of rebasing for the "right fix".  Let's put it this way - I don't think a one-liner change really will mean much difference for gagern's code, because he can just put that in another ticket and even use the same exact branch :-)



---

archive/issue_events_055212.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16533#event-55212"
}
```



---

archive/issue_comments_277432.json:
```json
{
    "body": "<a id='comment:32'></a>\nI've created a ticket for the immediate fix at #16608 (blocker) and downgraded this ticket from blocker -- please review #16608 :)",
    "created_at": "2014-07-03T13:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277432",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:32'></a>
I've created a ticket for the immediate fix at #16608 (blocker) and downgraded this ticket from blocker -- please review #16608 :)



---

archive/issue_comments_277433.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-03T13:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277433",
    "user": "https://github.com/nilesjohnson"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_277434.json:
```json
{
    "body": "Changing commit from \"[0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)\" to \"[f7d57dc09566c02ab010a9c01eaae563100dc396](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)\"",
    "created_at": "2014-07-03T14:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb](https://github.com/sagemath/sagetrac-mirror/commit/0325ee23e8e339d7ad2a3f36f6c0b03da7a0cafb)" to "[f7d57dc09566c02ab010a9c01eaae563100dc396](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)"



---

archive/issue_comments_277435.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[c5039b4](https://github.com/sagemath/sagetrac-mirror/commit/c5039b41b1774d62fb0f30b9a950e2d4195e27ec)|`Restore positional parameters.`|\n|[f7d57dc](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)|`Inline another pair of links.`|",
    "created_at": "2014-07-03T14:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[c5039b4](https://github.com/sagemath/sagetrac-mirror/commit/c5039b41b1774d62fb0f30b9a950e2d4195e27ec)|`Restore positional parameters.`|
|[f7d57dc](https://github.com/sagemath/sagetrac-mirror/commit/f7d57dc09566c02ab010a9c01eaae563100dc396)|`Inline another pair of links.`|



---

archive/issue_comments_277436.json:
```json
{
    "body": "<a id='comment:34'></a>\nJust a pointer about the temporary filenames: see also #15515 (which I admit, needs work).",
    "created_at": "2014-07-03T20:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277436",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Just a pointer about the temporary filenames: see also #15515 (which I admit, needs work).



---

archive/issue_comments_277437.json:
```json
{
    "body": "<a id='comment:35'></a>\nI guess I should close this ticket here, since various derived tickets will take care of the distinct aspects. Since I can't do so now, I'll check whether I can after accepting it first.\n\n#16608 and #16645 are the most immediate fix to the problem described in the ticket description. Here is a list of related tickets:\n\n* Fix `show`: #16608\n* Fix `gif` and `ffmpeg`: #16645 based on #15515\n* File names in 3d plotting: #16640\n* `<video>` and tables: #7298\n* Documentation and doctest example: #16570\n* APNG support: #16571\n* A way to deprecate positional parameters: #16607\n\nAt the moment, there is no commit in any of these to tweak `_sage_argspec_` for `Animation.show()`. I guess I might eventually write a wrapper for that, something like ``@`delegates_to` which would copy the names of parameters from other commands. But I'm not certain that this would indeed be a good idea, so I guess it should be discussed first, perhaps on the mailing list. With so many patches awaiting review at the moment, I don't feel like implementing yet another feature just now.",
    "created_at": "2014-07-15T13:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277437",
    "user": "https://github.com/gagern"
}
```

<a id='comment:35'></a>
I guess I should close this ticket here, since various derived tickets will take care of the distinct aspects. Since I can't do so now, I'll check whether I can after accepting it first.

#16608 and #16645 are the most immediate fix to the problem described in the ticket description. Here is a list of related tickets:

* Fix `show`: #16608
* Fix `gif` and `ffmpeg`: #16645 based on #15515
* File names in 3d plotting: #16640
* `<video>` and tables: #7298
* Documentation and doctest example: #16570
* APNG support: #16571
* A way to deprecate positional parameters: #16607

At the moment, there is no commit in any of these to tweak `_sage_argspec_` for `Animation.show()`. I guess I might eventually write a wrapper for that, something like ``@`delegates_to` which would copy the names of parameters from other commands. But I'm not certain that this would indeed be a good idea, so I guess it should be discussed first, perhaps on the mailing list. With so many patches awaiting review at the moment, I don't feel like implementing yet another feature just now.



---

archive/issue_comments_277438.json:
```json
{
    "body": "Set assignee to @gagern.",
    "created_at": "2014-07-15T13:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277438",
    "user": "https://github.com/gagern"
}
```

Set assignee to @gagern.



---

archive/issue_events_055213.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-07-15T13:37:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16533#event-55213"
}
```



---

archive/issue_comments_277439.json:
```json
{
    "body": "<a id='comment:36'></a>\nOK, even as the owner of the ticket I can't close it. Too bad. So let's call this a duplicate now, and be done with it. If anyone with sufficient privileges stumbles upon this, feel free to close.",
    "created_at": "2014-07-15T13:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277439",
    "user": "https://github.com/gagern"
}
```

<a id='comment:36'></a>
OK, even as the owner of the ticket I can't close it. Too bad. So let's call this a duplicate now, and be done with it. If anyone with sufficient privileges stumbles upon this, feel free to close.



---

archive/issue_comments_277440.json:
```json
{
    "body": "<a id='comment:37'></a>\n> OK, even as the owner of the ticket I can't close it. Too bad. So let's call this a duplicate now, and be done with it. If anyone with sufficient privileges stumbles upon this, feel free to close.\n\nCorrect, but you **can** put it to positive review.  The release manager is the only person supposed to close tickets, just so we have everything tracked properly.  But this workflow is the equivalent of that in other projects with \"committers\".",
    "created_at": "2014-07-17T02:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277440",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:37'></a>
> OK, even as the owner of the ticket I can't close it. Too bad. So let's call this a duplicate now, and be done with it. If anyone with sufficient privileges stumbles upon this, feel free to close.

Correct, but you **can** put it to positive review.  The release manager is the only person supposed to close tickets, just so we have everything tracked properly.  But this workflow is the equivalent of that in other projects with "committers".



---

archive/issue_comments_277441.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-17T02:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277441",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_277442.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-17T06:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277442",
    "user": "https://github.com/gagern"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_277443.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [kcrisman](#comment%3A37):\n> Correct, but you **can** put it to positive review. The release manager is the only person supposed to close tickets, just so we have everything tracked properly.\n\n\nThanks for the clarification. I guess I thought of \u201creview\u201d mostly in terms of \u201ccode review\u201d and therefore didn't apply it to situations where there is no code to review.",
    "created_at": "2014-07-17T06:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277443",
    "user": "https://github.com/gagern"
}
```

<a id='comment:38'></a>
Replying to [kcrisman](#comment%3A37):
> Correct, but you **can** put it to positive review. The release manager is the only person supposed to close tickets, just so we have everything tracked properly.


Thanks for the clarification. I guess I thought of “review” mostly in terms of “code review” and therefore didn't apply it to situations where there is no code to review.



---

archive/issue_events_055214.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-17T13:58:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16533#event-55214"
}
```



---

archive/issue_comments_277444.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2014-07-17T13:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16533#issuecomment-277444",
    "user": "https://github.com/vbraun"
}
```

Resolution: duplicate
