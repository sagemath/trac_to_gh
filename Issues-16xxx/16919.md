# Issue 16919: mistake in sage/src/bin/sage-bdist, OSX app is always built 32-bit

archive/issues_016682.json:
```json
{
    "assignees": [],
    "body": "The file sage/src/bin/sage-bdist contains a mistake:\n       'ARCHES' should be 'ARCHS'.\nThe effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command\n    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`\nwhich returns\n/Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386\n\nThis mistake is probably not terribly significant for running sage code, since all the files in sage/local/{bin,lib}/ are 64-bit.\n\n(2) There is a second, more obscure mistake in sage-bdist.  sage-bdist uses `uname -m` to determine the target architecture.  Some older 64-bit Macintoshes can only boot into a 32-bit system.  These machines run 64-bit Sage perfectly well.  \nThey can make and build 64-bit Sage perfectly well.  The problem is that \n`uname -m` returns 'i386' on these machines, so sage-bdist uses 'i386' as the target architecture.\n\nAttached is modified version of sage-bdist which corrects both mistakes.  See below for a description of my modifications.\n\nI am NOT going to submit this via 'git trac'.  As a neophyte, I don't want the responsibility of modifying the build script.\n\nchanges in the attached version of sage-bdist:\n\n(1) 'ARCHES' -> 'ARCHS'\n\n(2) I added an environment variable SAGE_APP_TARGET_ARCH to override `uname -m`.  If one is building Sage on an older 64-bit OSX machine that boots into a 32-bit system, one would do\n    $ export SAGE_APP_TARGET_ARCH=x86_64\n    $ ./sage-bdist\n\n(3) I also added some code to append '-app' to the name \nof the .dmg file produced by sage-bdist.  At present, this has to be done by hand.\n\n(4) I also added an environment variable (SAGE_APP_GZ=no) to prevent \nthe final compression stage, to save time during debugging \nsage-bdist.  One would do\n    $ export SAGE_APP_GZ=no\n    $ export SAGE_APP_DMG=no\n    $ ./sage-bdist\nin order to skip the final compression.\n\n\nCC:  @gvol\n\nKeywords: **OSX, sage-bdist**\n\nBranch: **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**\n\nReviewer: **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Daniel Friedan**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16919_\n\n",
    "closed_at": "2014-10-23T11:15:56Z",
    "created_at": "2014-09-02T10:35:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "mistake in sage/src/bin/sage-bdist, OSX app is always built 32-bit",
    "type": "issue",
    "updated_at": "2014-11-17T15:16:40Z",
    "url": "https://github.com/sagemath/sage/issues/16919",
    "user": "https://github.com/sagetrac-dfriedan"
}
```
The file sage/src/bin/sage-bdist contains a mistake:
       'ARCHES' should be 'ARCHS'.
The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command
    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`
which returns
/Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386

This mistake is probably not terribly significant for running sage code, since all the files in sage/local/{bin,lib}/ are 64-bit.

(2) There is a second, more obscure mistake in sage-bdist.  sage-bdist uses `uname -m` to determine the target architecture.  Some older 64-bit Macintoshes can only boot into a 32-bit system.  These machines run 64-bit Sage perfectly well.  
They can make and build 64-bit Sage perfectly well.  The problem is that 
`uname -m` returns 'i386' on these machines, so sage-bdist uses 'i386' as the target architecture.

Attached is modified version of sage-bdist which corrects both mistakes.  See below for a description of my modifications.

I am NOT going to submit this via 'git trac'.  As a neophyte, I don't want the responsibility of modifying the build script.

changes in the attached version of sage-bdist:

(1) 'ARCHES' -> 'ARCHS'

(2) I added an environment variable SAGE_APP_TARGET_ARCH to override `uname -m`.  If one is building Sage on an older 64-bit OSX machine that boots into a 32-bit system, one would do
    $ export SAGE_APP_TARGET_ARCH=x86_64
    $ ./sage-bdist

(3) I also added some code to append '-app' to the name 
of the .dmg file produced by sage-bdist.  At present, this has to be done by hand.

(4) I also added an environment variable (SAGE_APP_GZ=no) to prevent 
the final compression stage, to save time during debugging 
sage-bdist.  One would do
    $ export SAGE_APP_GZ=no
    $ export SAGE_APP_DMG=no
    $ ./sage-bdist
in order to skip the final compression.


CC:  @gvol

Keywords: **OSX, sage-bdist**

Branch: **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**

Reviewer: **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**

Author: **Daniel Friedan**

_Issue created by migration from https://trac.sagemath.org/ticket/16919_





---

archive/issue_events_224222.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224222"
}
```



---

archive/issue_events_224223.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224223"
}
```



---

archive/issue_events_224224.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224224"
}
```



---

archive/issue_events_224225.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224225"
}
```



---

archive/issue_comments_225518.json:
```json
{
    "body": "Attachment: **[sage-bdist-TARGET_ARCH-app.gz](https://github.com/sagemath/sage/files/ticket16919/sage-bdist-TARGET_ARCH-app.gz)**\n\ncandidate replacement for sage/src/bin/sage-bdist",
    "created_at": "2014-09-02T10:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225518",
    "user": "https://github.com/sagetrac-dfriedan"
}
```

Attachment: **[sage-bdist-TARGET_ARCH-app.gz](https://github.com/sagemath/sage/files/ticket16919/sage-bdist-TARGET_ARCH-app.gz)**

candidate replacement for sage/src/bin/sage-bdist



---

archive/issue_comments_225519.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nWell-done! \n\nOne still has to convert your attachment into a git branch and put it on trac. :-) This does not add any responsibility, as it will still be reviewed etc, before making it into Sage proper.",
    "created_at": "2014-09-02T12:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225519",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'>Comment 1:</a>
Well-done! 

One still has to convert your attachment into a git branch and put it on trac. :-) This does not add any responsibility, as it will still be reviewed etc, before making it into Sage proper.



---

archive/issue_comments_225520.json:
```json
{
    "body": "Branch: **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)**",
    "created_at": "2014-09-02T13:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225520",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)**



---

archive/issue_comments_225521.json:
```json
{
    "body": "Commit: **[da01d6d](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)**",
    "created_at": "2014-09-02T13:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225521",
    "user": "https://github.com/vbraun"
}
```

Commit: **[da01d6d](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)**



---

archive/issue_comments_225522.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nlooks good to me.. somebody wants to try it on their mac?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54\">da01d6d</a></td><td><code>Fix OSX arch detection in sage-bdist</code></td></tr></table>\n",
    "created_at": "2014-09-02T13:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225522",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'>Comment 4:</a>
looks good to me.. somebody wants to try it on their mac?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54">da01d6d</a></td><td><code>Fix OSX arch detection in sage-bdist</code></td></tr></table>




---

archive/issue_events_224226.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-02T13:51:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224226"
}
```



---

archive/issue_comments_225523.json:
```json
{
    "body": "Author: **Daniel Friedan**",
    "created_at": "2014-09-02T13:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225523",
    "user": "https://github.com/vbraun"
}
```

Author: **Daniel Friedan**



---

archive/issue_comments_225524.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\n> looks good to me.. somebody wants to try it on their mac?\n\nSeems likely to me as well, though I'd prefer to have Ivan also check out the part that Xcode will see first.  I definitely won't have time to actually try a bdist with this in the next week.\n\nAlso, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n\n```\nelif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n```\nsince the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.",
    "created_at": "2014-09-02T14:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225524",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>Comment 6:</a>
> looks good to me.. somebody wants to try it on their mac?

Seems likely to me as well, though I'd prefer to have Ivan also check out the part that Xcode will see first.  I definitely won't have time to actually try a bdist with this in the next week.

Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 

```
elif [ "$SAGE_APP_GZ" != "no" ]; then
```
since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.



---

archive/issue_comments_225525.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@vbraun](#comment%3A4):\n> looks good to me.. somebody wants to try it on their mac?\n\nI can try this tonight, assuming my laptop still boots in OSX...",
    "created_at": "2014-09-02T15:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225525",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@vbraun](#comment%3A4):
> looks good to me.. somebody wants to try it on their mac?

I can try this tonight, assuming my laptop still boots in OSX...



---

archive/issue_comments_225526.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI tried it OMM (10.9) and everything seems to be in order.",
    "created_at": "2014-09-04T02:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225526",
    "user": "https://github.com/gvol"
}
```

<a id='comment:8'>Comment 8:</a>
I tried it OMM (10.9) and everything seems to be in order.



---

archive/issue_events_224227.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2014-09-04T02:45:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224227"
}
```



---

archive/issue_events_224228.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2014-09-04T02:45:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224228"
}
```



---

archive/issue_events_224229.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-09-04T12:15:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224229"
}
```



---

archive/issue_events_224230.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-09-04T12:15:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224230"
}
```



---

archive/issue_comments_225527.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\n> Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n> \n> ```\n> elif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n> ```\n> since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.\n\nI haven't heard a response to this, though.",
    "created_at": "2014-09-04T12:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225527",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'>Comment 9:</a>
> Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 
> 
> ```
> elif [ "$SAGE_APP_GZ" != "no" ]; then
> ```
> since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.

I haven't heard a response to this, though.



---

archive/issue_comments_225528.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@kcrisman](#comment%3A9):\n> > Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n> > \n> > ```\n> > elif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n> > ```\n> > since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.\n\n> \n> I haven't heard a response to this, though.\n\nSorry, I didn't see the full description, because I just was thinking about the original discussion.   Both of these now are clear to me but still I think they need to be documented.",
    "created_at": "2014-09-04T12:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225528",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@kcrisman](#comment%3A9):
> > Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 
> > 
> > ```
> > elif [ "$SAGE_APP_GZ" != "no" ]; then
> > ```
> > since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.

> 
> I haven't heard a response to this, though.

Sorry, I didn't see the full description, because I just was thinking about the original discussion.   Both of these now are clear to me but still I think they need to be documented.



---

archive/issue_comments_225529.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI can't test whether changing `SAGE_APP_TARGET_ARCH` will change anything but things built okay on 10.7 and of course the other changes are very salutary.  I will remark that I then got a segmentation fault while trying to start it, but I did bdist from a bdisted binary so that is probably the problem.",
    "created_at": "2014-09-04T18:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225529",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'>Comment 11:</a>
I can't test whether changing `SAGE_APP_TARGET_ARCH` will change anything but things built okay on 10.7 and of course the other changes are very salutary.  I will remark that I then got a segmentation fault while trying to start it, but I did bdist from a bdisted binary so that is probably the problem.



---

archive/issue_comments_225530.json:
```json
{
    "body": "Changed commit from **[da01d6d](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)** to **[c65de4f](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)**",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225530",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[da01d6d](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)** to **[c65de4f](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)**



---

archive/issue_comments_225531.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI have taken the opportunity to correct two typos, and use $UNAME consistently.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f246980eea65b9f2dc81835aaacd9ccd4f4639df\">f246980</a></td><td><code>Merge branch 'u/vbraun/osx_bdist_always_32bit' into 6.4.b6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9\">c65de4f</a></td><td><code>trac #16919 two typos and usage of UNAME</code></td></tr></table>\n",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225531",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'>Comment 12:</a>
I have taken the opportunity to correct two typos, and use $UNAME consistently.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f246980eea65b9f2dc81835aaacd9ccd4f4639df">f246980</a></td><td><code>Merge branch 'u/vbraun/osx_bdist_always_32bit' into 6.4.b6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9">c65de4f</a></td><td><code>trac #16919 two typos and usage of UNAME</code></td></tr></table>




---

archive/issue_comments_225532.json:
```json
{
    "body": "Changed branch from **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)** to **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)**",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225532",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)** to **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)**



---

archive/issue_comments_225533.json:
```json
{
    "body": "Reviewer: **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-10-22T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225533",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**



---

archive/issue_comments_225534.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThanks.  I still say \"needs work\" due to missing documentation of these new environment variables - I think it's the installation guide where these ordinarily appear?",
    "created_at": "2014-10-22T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225534",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'>Comment 13:</a>
Thanks.  I still say "needs work" due to missing documentation of these new environment variables - I think it's the installation guide where these ordinarily appear?



---

archive/issue_comments_225535.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI'll add these docs now. If not me then who, if not now then when...",
    "created_at": "2014-10-22T13:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225535",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
I'll add these docs now. If not me then who, if not now then when...



---

archive/issue_comments_225536.json:
```json
{
    "body": "Changed commit from **[c65de4f](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)** to **[a6896ad](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)**",
    "created_at": "2014-10-22T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225536",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c65de4f](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)** to **[a6896ad](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)**



---

archive/issue_comments_225537.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f\">a6896ad</a></td><td><code>added docs for envvars</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225537",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f">a6896ad</a></td><td><code>added docs for envvars</code></td></tr></table>




---

archive/issue_comments_225538.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n The file sage/src/bin/sage-bdist contains a mistake:\n        'ARCHES' should be 'ARCHS'.\n The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command\n-    $ file /Applications/Sage-6.3.app/Contents/MacOS/Sage\n+    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`\n which returns\n /Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386\n \n``````\n",
    "created_at": "2014-10-22T14:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225538",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 The file sage/src/bin/sage-bdist contains a mistake:
        'ARCHES' should be 'ARCHS'.
 The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command
-    $ file /Applications/Sage-6.3.app/Contents/MacOS/Sage
+    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`
 which returns
 /Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386
 
``````




---

archive/issue_comments_225539.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\ndone. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.",
    "created_at": "2014-10-22T14:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225539",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'>Comment 16:</a>
done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.



---

archive/issue_events_224231.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T14:31:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224231"
}
```



---

archive/issue_events_224232.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T14:31:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224232"
}
```



---

archive/issue_comments_225540.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\ntypo \"terminal version fo Sage\"",
    "created_at": "2014-10-22T14:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225540",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'>Comment 17:</a>
typo "terminal version fo Sage"



---

archive/issue_comments_225541.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338\">913f9d2</a></td><td><code>typo fixed</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225541",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338">913f9d2</a></td><td><code>typo fixed</code></td></tr></table>




---

archive/issue_comments_225542.json:
```json
{
    "body": "Changed commit from **[a6896ad](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)** to **[913f9d2](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)**",
    "created_at": "2014-10-22T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a6896ad](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)** to **[913f9d2](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)**



---

archive/issue_comments_225543.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\n> done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.\n\nQuite.   They are also in the script itself help messages, but that is not the greatest - thanks very much!\n\nIf you look at the built doc the outcome one might expect happens from\n\n```\n`i386` and `x86_64`\n```\ninstead of\n\n```\n``i386`` and ``x86_64``\n```\nso adding those characters would be good.",
    "created_at": "2014-10-22T14:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225543",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'>Comment 19:</a>
> done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.

Quite.   They are also in the script itself help messages, but that is not the greatest - thanks very much!

If you look at the built doc the outcome one might expect happens from

```
`i386` and `x86_64`
```
instead of

```
``i386`` and ``x86_64``
```
so adding those characters would be good.



---

archive/issue_comments_225544.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f\">6ffb3f6</a></td><td><code>ticks added</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225544",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f">6ffb3f6</a></td><td><code>ticks added</code></td></tr></table>




---

archive/issue_comments_225545.json:
```json
{
    "body": "Changed commit from **[913f9d2](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)** to **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**",
    "created_at": "2014-10-22T14:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[913f9d2](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)** to **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**



---

archive/issue_comments_225546.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nThx.\n\nSounds like everyone has used the new bdist script successfully, Mac and Linux?  Anything left?",
    "created_at": "2014-10-22T15:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225546",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'>Comment 21:</a>
Thx.

Sounds like everyone has used the new bdist script successfully, Mac and Linux?  Anything left?



---

archive/issue_comments_225547.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nnot any more now :)",
    "created_at": "2014-10-22T15:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225547",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>Comment 22:</a>
not any more now :)



---

archive/issue_events_224233.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T15:07:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224233"
}
```



---

archive/issue_events_224234.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T15:07:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224234"
}
```



---

archive/issue_events_224235.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-23T11:15:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224235"
}
```



---

archive/issue_events_224236.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b5ed4451111dc24d7c9345b1825f75f33790c75a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-23T11:15:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-224236"
}
```



---

archive/issue_comments_225548.json:
```json
{
    "body": "Changed branch from **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)** to **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**",
    "created_at": "2014-10-23T11:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225548",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)** to **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**



---

archive/issue_comments_225549.json:
```json
{
    "body": "Changed commit from **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)** to none",
    "created_at": "2014-11-14T21:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225549",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[6ffb3f6](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)** to none



---

archive/issue_comments_225550.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nWhy did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??",
    "created_at": "2014-11-14T21:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225550",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'>Comment 24:</a>
Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??



---

archive/issue_comments_225551.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nFollowup: #17346",
    "created_at": "2014-11-14T22:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225551",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'>Comment 25:</a>
Followup: #17346



---

archive/issue_comments_225552.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\n> Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??\n\nI dunno - I just bdisted three times in the past few days with no problem.",
    "created_at": "2014-11-15T02:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225552",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'>Comment 26:</a>
> Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??

I dunno - I just bdisted three times in the past few days with no problem.



---

archive/issue_comments_225553.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nPlease no discussion on closed tickets, any further information should go to #17346",
    "created_at": "2014-11-15T11:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225553",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'>Comment 27:</a>
Please no discussion on closed tickets, any further information should go to #17346



---

archive/issue_comments_225554.json:
```json
{
    "body": "Changed reviewer from **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton** to **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-11-17T15:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-225554",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton** to **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**
