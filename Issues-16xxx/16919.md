# Issue 16919: mistake in sage/src/bin/sage-bdist, OSX app is always built 32-bit

archive/issues_016682.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe file sage/src/bin/sage-bdist contains a mistake:\n       'ARCHES' should be 'ARCHS'.\nThe effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command\n    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`\nwhich returns\n/Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386\n\nThis mistake is probably not terribly significant for running sage code, since all the files in sage/local/{bin,lib}/ are 64-bit.\n\n(2) There is a second, more obscure mistake in sage-bdist.  sage-bdist uses `uname -m` to determine the target architecture.  Some older 64-bit Macintoshes can only boot into a 32-bit system.  These machines run 64-bit Sage perfectly well.  \nThey can make and build 64-bit Sage perfectly well.  The problem is that \n`uname -m` returns 'i386' on these machines, so sage-bdist uses 'i386' as the target architecture.\n\nAttached is modified version of sage-bdist which corrects both mistakes.  See below for a description of my modifications.\n\nI am NOT going to submit this via 'git trac'.  As a neophyte, I don't want the responsibility of modifying the build script.\n\nchanges in the attached version of sage-bdist:\n\n(1) 'ARCHES' -> 'ARCHS'\n\n(2) I added an environment variable SAGE_APP_TARGET_ARCH to override `uname -m`.  If one is building Sage on an older 64-bit OSX machine that boots into a 32-bit system, one would do\n    $ export SAGE_APP_TARGET_ARCH=x86_64\n    $ ./sage-bdist\n\n(3) I also added some code to append '-app' to the name \nof the .dmg file produced by sage-bdist.  At present, this has to be done by hand.\n\n(4) I also added an environment variable (SAGE_APP_GZ=no) to prevent \nthe final compression stage, to save time during debugging \nsage-bdist.  One would do\n    $ export SAGE_APP_GZ=no\n    $ export SAGE_APP_DMG=no\n    $ ./sage-bdist\nin order to skip the final compression.\n\n\nCC:  @gvol\n\nComponent: **build**\n\nKeywords: **OSX, sage-bdist**\n\nAuthor: **Daniel Friedan**\n\nBranch: **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**\n\nReviewer: **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16919_\n\n",
    "closed_at": "2014-10-23T11:15:56Z",
    "created_at": "2014-09-02T10:35:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "mistake in sage/src/bin/sage-bdist, OSX app is always built 32-bit",
    "type": "issue",
    "updated_at": "2014-11-17T15:16:40Z",
    "url": "https://github.com/sagemath/sage/issues/16919",
    "user": "https://github.com/sagetrac-dfriedan"
}
```
<div id="comment:0"></div>

The file sage/src/bin/sage-bdist contains a mistake:
       'ARCHES' should be 'ARCHS'.
The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command
    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`
which returns
/Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386

This mistake is probably not terribly significant for running sage code, since all the files in sage/local/{bin,lib}/ are 64-bit.

(2) There is a second, more obscure mistake in sage-bdist.  sage-bdist uses `uname -m` to determine the target architecture.  Some older 64-bit Macintoshes can only boot into a 32-bit system.  These machines run 64-bit Sage perfectly well.  
They can make and build 64-bit Sage perfectly well.  The problem is that 
`uname -m` returns 'i386' on these machines, so sage-bdist uses 'i386' as the target architecture.

Attached is modified version of sage-bdist which corrects both mistakes.  See below for a description of my modifications.

I am NOT going to submit this via 'git trac'.  As a neophyte, I don't want the responsibility of modifying the build script.

changes in the attached version of sage-bdist:

(1) 'ARCHES' -> 'ARCHS'

(2) I added an environment variable SAGE_APP_TARGET_ARCH to override `uname -m`.  If one is building Sage on an older 64-bit OSX machine that boots into a 32-bit system, one would do
    $ export SAGE_APP_TARGET_ARCH=x86_64
    $ ./sage-bdist

(3) I also added some code to append '-app' to the name 
of the .dmg file produced by sage-bdist.  At present, this has to be done by hand.

(4) I also added an environment variable (SAGE_APP_GZ=no) to prevent 
the final compression stage, to save time during debugging 
sage-bdist.  One would do
    $ export SAGE_APP_GZ=no
    $ export SAGE_APP_DMG=no
    $ ./sage-bdist
in order to skip the final compression.


CC:  @gvol

Component: **build**

Keywords: **OSX, sage-bdist**

Author: **Daniel Friedan**

Branch: **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**

Reviewer: **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/16919_





---

archive/issue_events_239656.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239656"
}
```



---

archive/issue_events_239657.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239657"
}
```



---

archive/issue_events_239658.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239658"
}
```



---

archive/issue_events_239659.json:
```json
{
    "actor": "https://github.com/sagetrac-dfriedan",
    "created_at": "2014-09-02T10:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239659"
}
```



---

archive/issue_comments_222963.json:
```json
{
    "body": "Attachment: **[sage-bdist-TARGET_ARCH-app.gz](https://github.com/sagemath/sage/files/ticket16919/sage-bdist-TARGET_ARCH-app.gz)**\n\ncandidate replacement for sage/src/bin/sage-bdist",
    "created_at": "2014-09-02T10:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222963",
    "user": "https://github.com/sagetrac-dfriedan"
}
```

Attachment: **[sage-bdist-TARGET_ARCH-app.gz](https://github.com/sagemath/sage/files/ticket16919/sage-bdist-TARGET_ARCH-app.gz)**

candidate replacement for sage/src/bin/sage-bdist



---

archive/issue_comments_222964.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWell-done! \n\nOne still has to convert your attachment into a git branch and put it on trac. :-) This does not add any responsibility, as it will still be reviewed etc, before making it into Sage proper.",
    "created_at": "2014-09-02T12:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222964",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

Well-done! 

One still has to convert your attachment into a git branch and put it on trac. :-) This does not add any responsibility, as it will still be reviewed etc, before making it into Sage proper.



---

archive/issue_comments_222965.json:
```json
{
    "body": "Branch: **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)**",
    "created_at": "2014-09-02T13:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222965",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)**



---

archive/issue_comments_222966.json:
```json
{
    "body": "Commit: **[`da01d6d`](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)**",
    "created_at": "2014-09-02T13:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222966",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`da01d6d`](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)**



---

archive/issue_comments_222967.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nlooks good to me.. somebody wants to try it on their mac?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54\"><code>da01d6d</code></a></td><td><code>Fix OSX arch detection in sage-bdist</code></td></tr></table>\n",
    "created_at": "2014-09-02T13:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222967",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

looks good to me.. somebody wants to try it on their mac?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54"><code>da01d6d</code></a></td><td><code>Fix OSX arch detection in sage-bdist</code></td></tr></table>




---

archive/issue_events_239660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-02T13:51:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239660"
}
```



---

archive/issue_comments_222968.json:
```json
{
    "body": "Author: **Daniel Friedan**",
    "created_at": "2014-09-02T13:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222968",
    "user": "https://github.com/vbraun"
}
```

Author: **Daniel Friedan**



---

archive/issue_comments_222969.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> looks good to me.. somebody wants to try it on their mac?\n\nSeems likely to me as well, though I'd prefer to have Ivan also check out the part that Xcode will see first.  I definitely won't have time to actually try a bdist with this in the next week.\n\nAlso, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n\n```\nelif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n```\nsince the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.",
    "created_at": "2014-09-02T14:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222969",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

> looks good to me.. somebody wants to try it on their mac?

Seems likely to me as well, though I'd prefer to have Ivan also check out the part that Xcode will see first.  I definitely won't have time to actually try a bdist with this in the next week.

Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 

```
elif [ "$SAGE_APP_GZ" != "no" ]; then
```
since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.



---

archive/issue_comments_222970.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@vbraun](#comment%3A4):\n> looks good to me.. somebody wants to try it on their mac?\n\nI can try this tonight, assuming my laptop still boots in OSX...",
    "created_at": "2014-09-02T15:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222970",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@vbraun](#comment%3A4):
> looks good to me.. somebody wants to try it on their mac?

I can try this tonight, assuming my laptop still boots in OSX...



---

archive/issue_comments_222971.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI tried it OMM (10.9) and everything seems to be in order.",
    "created_at": "2014-09-04T02:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222971",
    "user": "https://github.com/gvol"
}
```

<div id="comment:8" align="right">comment:8</div>

I tried it OMM (10.9) and everything seems to be in order.



---

archive/issue_events_239661.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2014-09-04T02:45:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239661"
}
```



---

archive/issue_events_239662.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2014-09-04T02:45:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239662"
}
```



---

archive/issue_events_239663.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-09-04T12:15:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239663"
}
```



---

archive/issue_events_239664.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-09-04T12:15:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239664"
}
```



---

archive/issue_comments_222972.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n> \n> ```\n> elif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n> ```\n> since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.\n\nI haven't heard a response to this, though.",
    "created_at": "2014-09-04T12:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222972",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

> Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 
> 
> ```
> elif [ "$SAGE_APP_GZ" != "no" ]; then
> ```
> since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.

I haven't heard a response to this, though.



---

archive/issue_comments_222973.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kcrisman](#comment%3A9):\n> > Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of \n> > \n> > ```\n> > elif [ \"$SAGE_APP_GZ\" != \"no\" ]; then\n> > ```\n> > since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.\n> \n> \n> I haven't heard a response to this, though.\n\nSorry, I didn't see the full description, because I just was thinking about the original discussion.   Both of these now are clear to me but still I think they need to be documented.",
    "created_at": "2014-09-04T12:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222973",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kcrisman](#comment%3A9):
> > Also, there are now TWO new undocumented variables.  I think that it makes sense to have an example of the appropriate new one introduced here in the installation guide or wherever such variables are documented.  Secondly, I fail to see the point of 
> > 
> > ```
> > elif [ "$SAGE_APP_GZ" != "no" ]; then
> > ```
> > since the message is pretty clear that the only two options are dmg and not-dmg.  Returning to `else` would remove the need to document that one, at any rate.
> 
> 
> I haven't heard a response to this, though.

Sorry, I didn't see the full description, because I just was thinking about the original discussion.   Both of these now are clear to me but still I think they need to be documented.



---

archive/issue_comments_222974.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI can't test whether changing `SAGE_APP_TARGET_ARCH` will change anything but things built okay on 10.7 and of course the other changes are very salutary.  I will remark that I then got a segmentation fault while trying to start it, but I did bdist from a bdisted binary so that is probably the problem.",
    "created_at": "2014-09-04T18:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222974",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

I can't test whether changing `SAGE_APP_TARGET_ARCH` will change anything but things built okay on 10.7 and of course the other changes are very salutary.  I will remark that I then got a segmentation fault while trying to start it, but I did bdist from a bdisted binary so that is probably the problem.



---

archive/issue_comments_222975.json:
```json
{
    "body": "Changed commit from **[`da01d6d`](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)** to **[`c65de4f`](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)**",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222975",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`da01d6d`](https://github.com/sagemath/sagetrac-mirror/commit/da01d6d9d46caa9389dea1d091249ea7e68c8c54)** to **[`c65de4f`](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)**



---

archive/issue_comments_222976.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI have taken the opportunity to correct two typos, and use $UNAME consistently.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f246980eea65b9f2dc81835aaacd9ccd4f4639df\"><code>f246980</code></a></td><td><code>Merge branch 'u/vbraun/osx_bdist_always_32bit' into 6.4.b6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9\"><code>c65de4f</code></a></td><td><code>trac #16919 two typos and usage of UNAME</code></td></tr></table>\n",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222976",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

I have taken the opportunity to correct two typos, and use $UNAME consistently.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f246980eea65b9f2dc81835aaacd9ccd4f4639df"><code>f246980</code></a></td><td><code>Merge branch 'u/vbraun/osx_bdist_always_32bit' into 6.4.b6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9"><code>c65de4f</code></a></td><td><code>trac #16919 two typos and usage of UNAME</code></td></tr></table>




---

archive/issue_comments_222977.json:
```json
{
    "body": "Changed branch from **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)** to **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)**",
    "created_at": "2014-10-22T10:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222977",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/vbraun/osx_bdist_always_32bit](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/osx_bdist_always_32bit)** to **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)**



---

archive/issue_comments_222978.json:
```json
{
    "body": "Reviewer: **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-10-22T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222978",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**



---

archive/issue_comments_222979.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks.  I still say \"needs work\" due to missing documentation of these new environment variables - I think it's the installation guide where these ordinarily appear?",
    "created_at": "2014-10-22T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222979",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks.  I still say "needs work" due to missing documentation of these new environment variables - I think it's the installation guide where these ordinarily appear?



---

archive/issue_comments_222980.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'll add these docs now. If not me then who, if not now then when...",
    "created_at": "2014-10-22T13:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222980",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

I'll add these docs now. If not me then who, if not now then when...



---

archive/issue_comments_222981.json:
```json
{
    "body": "Changed commit from **[`c65de4f`](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)** to **[`a6896ad`](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)**",
    "created_at": "2014-10-22T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222981",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c65de4f`](https://github.com/sagemath/sagetrac-mirror/commit/c65de4f5be9488e3040f42bc84eccd44720da5d9)** to **[`a6896ad`](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)**



---

archive/issue_comments_222982.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f\"><code>a6896ad</code></a></td><td><code>added docs for envvars</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222982",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f"><code>a6896ad</code></a></td><td><code>added docs for envvars</code></td></tr></table>




---

archive/issue_comments_222983.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n The file sage/src/bin/sage-bdist contains a mistake:\n        'ARCHES' should be 'ARCHS'.\n The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command\n-    $ file /Applications/Sage-6.3.app/Contents/MacOS/Sage\n+    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`\n which returns\n /Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386\n \n``````\n",
    "created_at": "2014-10-22T14:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222983",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 The file sage/src/bin/sage-bdist contains a mistake:
        'ARCHES' should be 'ARCHS'.
 The effect of the mistake is that the OS X application is always built as 32-bit ('i386').  This can be seen in the OS X 10.9 app version currently being distributed officially by running the unix command
-    $ file /Applications/Sage-6.3.app/Contents/MacOS/Sage
+    $ `file /Applications/Sage-6.3.app/Contents/MacOS/Sage`
 which returns
 /Applications/sage-6.3.app/Contents/MacOS/Sage: Mach-O executable i386
 
``````




---

archive/issue_comments_222984.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\ndone. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.",
    "created_at": "2014-10-22T14:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222984",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.



---

archive/issue_events_239665.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T14:31:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239665"
}
```



---

archive/issue_events_239666.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T14:31:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239666"
}
```



---

archive/issue_comments_222985.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\ntypo \"terminal version fo Sage\"",
    "created_at": "2014-10-22T14:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222985",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

typo "terminal version fo Sage"



---

archive/issue_comments_222986.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338\"><code>913f9d2</code></a></td><td><code>typo fixed</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222986",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338"><code>913f9d2</code></a></td><td><code>typo fixed</code></td></tr></table>




---

archive/issue_comments_222987.json:
```json
{
    "body": "Changed commit from **[`a6896ad`](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)** to **[`913f9d2`](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)**",
    "created_at": "2014-10-22T14:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222987",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a6896ad`](https://github.com/sagemath/sagetrac-mirror/commit/a6896adfca7be8e63f6e2a6c9da7f5791bb3965f)** to **[`913f9d2`](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)**



---

archive/issue_comments_222988.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n> done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.\n\nQuite.   They are also in the script itself help messages, but that is not the greatest - thanks very much!\n\nIf you look at the built doc the outcome one might expect happens from\n\n```\n`i386` and `x86_64`\n```\ninstead of\n\n```\n``i386`` and ``x86_64``\n```\nso adding those characters would be good.",
    "created_at": "2014-10-22T14:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222988",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

> done. apparently `SAGE_APP_BUNDLE` existed before, but wasn't documented either.

Quite.   They are also in the script itself help messages, but that is not the greatest - thanks very much!

If you look at the built doc the outcome one might expect happens from

```
`i386` and `x86_64`
```
instead of

```
``i386`` and ``x86_64``
```
so adding those characters would be good.



---

archive/issue_comments_222989.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f\"><code>6ffb3f6</code></a></td><td><code>ticks added</code></td></tr></table>\n",
    "created_at": "2014-10-22T14:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222989",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f"><code>6ffb3f6</code></a></td><td><code>ticks added</code></td></tr></table>




---

archive/issue_comments_222990.json:
```json
{
    "body": "Changed commit from **[`913f9d2`](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)** to **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**",
    "created_at": "2014-10-22T14:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222990",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`913f9d2`](https://github.com/sagemath/sagetrac-mirror/commit/913f9d244c9fa8eddc4eeffef542f656cfb7c338)** to **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**



---

archive/issue_comments_222991.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThx.\n\nSounds like everyone has used the new bdist script successfully, Mac and Linux?  Anything left?",
    "created_at": "2014-10-22T15:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222991",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Thx.

Sounds like everyone has used the new bdist script successfully, Mac and Linux?  Anything left?



---

archive/issue_comments_222992.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nnot any more now :)",
    "created_at": "2014-10-22T15:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222992",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

not any more now :)



---

archive/issue_events_239667.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T15:07:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239667"
}
```



---

archive/issue_events_239668.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2014-10-22T15:07:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239668"
}
```



---

archive/issue_events_239669.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-23T11:15:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239669"
}
```



---

archive/issue_events_239670.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b5ed4451111dc24d7c9345b1825f75f33790c75a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-10-23T11:15:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16919#event-239670"
}
```



---

archive/issue_comments_222993.json:
```json
{
    "body": "Changed branch from **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)** to **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**",
    "created_at": "2014-10-23T11:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222993",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/16919](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16919)** to **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)**



---

archive/issue_comments_222994.json:
```json
{
    "body": "Changed commit from **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)** to none",
    "created_at": "2014-11-14T21:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222994",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`6ffb3f6`](https://github.com/sagemath/sagetrac-mirror/commit/6ffb3f6d5cb9263468faea4a01855a2ed0890f7f)** to none



---

archive/issue_comments_222995.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWhy did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??",
    "created_at": "2014-11-14T21:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222995",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">comment:24</div>

Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??



---

archive/issue_comments_222996.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nFollowup: #17346",
    "created_at": "2014-11-14T22:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222996",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

Followup: #17346



---

archive/issue_comments_222997.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??\n\nI dunno - I just bdisted three times in the past few days with no problem.",
    "created_at": "2014-11-15T02:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222997",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

> Why did you remove execute permissions from the sage-bdist script? How did anybody manage to run a script that is not executable??

I dunno - I just bdisted three times in the past few days with no problem.



---

archive/issue_comments_222998.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nPlease no discussion on closed tickets, any further information should go to #17346",
    "created_at": "2014-11-15T11:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222998",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

Please no discussion on closed tickets, any further information should go to #17346



---

archive/issue_comments_222999.json:
```json
{
    "body": "Changed reviewer from **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton** to **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2014-11-17T15:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16919#issuecomment-222999",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Dmitrii Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton** to **Dima Pasechnik, Karl-Dieter Crisman, Ivan Andrus, Frédéric Chapoton**
