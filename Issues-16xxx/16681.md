# Issue 16681: Random doctest failures in sage/rings/algebraic_closure_finite_field.py

archive/issues_016444.json:
```json
{
    "assignees": [],
    "body": "This is caused by #15390\n\n```\nsage -t --long src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\nFailed example:\n    for d in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        assert p.factor().prod() == p\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n        assert p.factor().prod() == p\n    AssertionError\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n```\n\nFirst of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=8)\n....:         assert p.factor().prod() == p, p.factor()\n....:     \n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n<ipython-input-22-f31a401fb53b> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=Integer(8))\n----> 3         assert p.factor().prod() == p, p.factor()\n      4 \n\nAssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)\n```\n\nOn a related note, a random element can be zero:\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=randint(2,8))\n....:         assert p.factor().prod() == p, p\n....:     \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-db4aacba08d5> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))\n----> 3         assert p.factor().prod() == p, p\n      4 \n\n/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()\n\nValueError: factorization of 0 not defined\n```\n\nDepends on #16682\n\nCC:  @pjbruin @defeo @videlec @miguelmarco @jpflori\n\nKeywords: **random_fail**\n\nBranch: **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16681_\n\n",
    "closed_at": "2014-08-28T18:42:03Z",
    "created_at": "2014-07-19T04:54:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Random doctest failures in sage/rings/algebraic_closure_finite_field.py",
    "type": "issue",
    "updated_at": "2014-09-03T13:19:59Z",
    "url": "https://github.com/sagemath/sage/issues/16681",
    "user": "https://github.com/vbraun"
}
```
This is caused by #15390

```
sage -t --long src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
Failed example:
    for d in xrange(10):
        p = R.random_element(degree=randint(2,8))
        assert p.factor().prod() == p
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
        assert p.factor().prod() == p
    AssertionError
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
```

First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=8)
....:         assert p.factor().prod() == p, p.factor()
....:     
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-22-f31a401fb53b> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=Integer(8))
----> 3         assert p.factor().prod() == p, p.factor()
      4 

AssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)
```

On a related note, a random element can be zero:

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=randint(2,8))
....:         assert p.factor().prod() == p, p
....:     
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-db4aacba08d5> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))
----> 3         assert p.factor().prod() == p, p
      4 

/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()

ValueError: factorization of 0 not defined
```

Depends on #16682

CC:  @pjbruin @defeo @videlec @miguelmarco @jpflori

Keywords: **random_fail**

Branch: **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**

Reviewer: **Volker Braun**

Author: **Vincent Delecroix**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/16681_





---

archive/issue_events_236324.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T04:54:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236324"
}
```



---

archive/issue_events_236325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T04:54:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236325"
}
```



---

archive/issue_events_236326.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T04:54:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236326"
}
```



---

archive/issue_events_236327.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T04:54:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236327"
}
```



---

archive/issue_comments_217929.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,28 @@\n-This is caused by #15390. \n+This is caused by #15390\n \n-First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.\n+```\n+sage -t --long src/sage/rings/algebraic_closure_finite_field.py\n+**********************************************************************\n+File \"src/sage/rings/algebraic_closure_finite_field.py\", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n+Failed example:\n+    for d in xrange(10):\n+        p = R.random_element(degree=randint(2,8))\n+        assert p.factor().prod() == p\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n+        self.execute(example, compiled, test.globs)\n+      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n+        exec compiled in globs\n+      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n+        assert p.factor().prod() == p\n+    AssertionError\n+**********************************************************************\n+1 item had failures:\n+   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n+```\n \n-The following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)\n+First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:\n \n ```\n sage: K = GF(3).algebraic_closure()\n``````\n",
    "created_at": "2014-07-19T04:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217929",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,28 @@
-This is caused by #15390. 
+This is caused by #15390
 
-First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.
+```
+sage -t --long src/sage/rings/algebraic_closure_finite_field.py
+**********************************************************************
+File "src/sage/rings/algebraic_closure_finite_field.py", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
+Failed example:
+    for d in xrange(10):
+        p = R.random_element(degree=randint(2,8))
+        assert p.factor().prod() == p
+Exception raised:
+    Traceback (most recent call last):
+      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
+        self.execute(example, compiled, test.globs)
+      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
+        exec compiled in globs
+      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
+        assert p.factor().prod() == p
+    AssertionError
+**********************************************************************
+1 item had failures:
+   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
+```
 
-The following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)
+First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:
 
 ```
 sage: K = GF(3).algebraic_closure()
``````




---

archive/issue_comments_217930.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHi,\n\nNice catch! I am on it.\n\nFor the \"related note\", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.\n\nVincent",
    "created_at": "2014-07-19T10:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217930",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

Hi,

Nice catch! I am on it.

For the "related note", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.

Vincent



---

archive/issue_comments_217931.json:
```json
{
    "body": "Dependencies: **#16682**",
    "created_at": "2014-07-19T10:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217931",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#16682**



---

archive/issue_comments_217932.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI do not understand...\n\n```\nsage: K = GF(5).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: while True:\n....:     p = R.random_element(degree=(2,10))\n....:     fac = p.factor()\n....:     assert fac.prod() == p, (p,fac)\nTraceback (most recent call last):\n...\nAssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))\nsage: p == fac.prod()          # fine\nFalse\nsage: p.factor() == fac        # What!?\nFalse\nsage: p.factor().prod() == p   # What again!?\nTrue\n```",
    "created_at": "2014-07-19T10:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217932",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

I do not understand...

```
sage: K = GF(5).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: while True:
....:     p = R.random_element(degree=(2,10))
....:     fac = p.factor()
....:     assert fac.prod() == p, (p,fac)
Traceback (most recent call last):
...
AssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))
sage: p == fac.prod()          # fine
False
sage: p.factor() == fac        # What!?
False
sage: p.factor().prod() == p   # What again!?
True
```



---

archive/issue_comments_217933.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe factorization is not cached but recomputed every time. Sometimes, it is wrong.",
    "created_at": "2014-07-19T15:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217933",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

The factorization is not cached but recomputed every time. Sometimes, it is wrong.



---

archive/issue_comments_217934.json:
```json
{
    "body": "Changed keywords from none to **random_fail**",
    "created_at": "2014-07-25T05:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217934",
    "user": "https://github.com/vbraun"
}
```

Changed keywords from none to **random_fail**



---

archive/issue_events_236328.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236328"
}
```



---

archive/issue_events_236329.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236329"
}
```



---

archive/issue_comments_217935.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAll right. The root finding algorithm from #15390 was wrong.\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1\"><code>a2fa480</code></a></td><td><code>trac #16682: fix random_element in polynomial ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b\"><code>36ee521</code></a></td><td><code>trac #16682: the zero polynomial has degree -1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f\"><code>49b9331</code></a></td><td><code>trac #16682: merge 6.3.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29\"><code>589caad</code></a></td><td><code>trac #16682: input check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad\"><code>6b9ac1b</code></a></td><td><code>trac #16682: better random element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd\"><code>e1b61ff</code></a></td><td><code>trac #16682: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4\"><code>1e0f8d9</code></a></td><td><code>trac #16682: merge sage 6.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43\"><code>975fb54</code></a></td><td><code>trac #16881: fix factorization</code></td></tr></table>\n",
    "created_at": "2014-08-13T10:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217935",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

All right. The root finding algorithm from #15390 was wrong.

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1"><code>a2fa480</code></a></td><td><code>trac #16682: fix random_element in polynomial ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b"><code>36ee521</code></a></td><td><code>trac #16682: the zero polynomial has degree -1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f"><code>49b9331</code></a></td><td><code>trac #16682: merge 6.3.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29"><code>589caad</code></a></td><td><code>trac #16682: input check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad"><code>6b9ac1b</code></a></td><td><code>trac #16682: better random element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd"><code>e1b61ff</code></a></td><td><code>trac #16682: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4"><code>1e0f8d9</code></a></td><td><code>trac #16682: merge sage 6.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43"><code>975fb54</code></a></td><td><code>trac #16881: fix factorization</code></td></tr></table>




---

archive/issue_events_236330.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-13T10:27:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236330"
}
```



---

archive/issue_comments_217936.json:
```json
{
    "body": "Commit: **[`975fb54`](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)**",
    "created_at": "2014-08-13T10:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217936",
    "user": "https://github.com/videlec"
}
```

Commit: **[`975fb54`](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)**



---

archive/issue_comments_217937.json:
```json
{
    "body": "Branch: **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)**",
    "created_at": "2014-08-13T10:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217937",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)**



---

archive/issue_comments_217938.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2014-08-13T10:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217938",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_events_236331.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-24T16:01:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236331"
}
```



---

archive/issue_events_236332.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-24T16:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236332"
}
```



---

archive/issue_comments_217939.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2014-08-24T16:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217939",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_217940.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nlgtm",
    "created_at": "2014-08-24T16:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217940",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

lgtm



---

archive/issue_events_236333.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-24T20:07:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236333"
}
```



---

archive/issue_events_236334.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-24T20:07:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236334"
}
```



---

archive/issue_comments_217941.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n\n```\nsage -t src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    ev = M.eigenvalues(); ev\nExpected:\n    [2*z3, 2*z3 + 2, 2*z3 + 1]\nGot:\n    [2*z3 + 1, 2*z3 + 2, 2*z3]\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    e.as_finite_field_element()\nExpected:\n    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\nGot:\n    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\n**********************************************************************\n1 item had failures:\n   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\n    [2116 tests, 2 failures, 8.52 s]\n----------------------------------------------------------------------\nsage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 9.1 seconds\n    cpu time: 8.4 seconds\n    cumulative wall time: 8.5 seconds\n```",
    "created_at": "2014-08-24T20:07:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217941",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>


```
sage -t src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    ev = M.eigenvalues(); ev
Expected:
    [2*z3, 2*z3 + 2, 2*z3 + 1]
Got:
    [2*z3 + 1, 2*z3 + 2, 2*z3]
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    e.as_finite_field_element()
Expected:
    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
Got:
    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
**********************************************************************
1 item had failures:
   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
    [2116 tests, 2 failures, 8.52 s]
----------------------------------------------------------------------
sage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 9.1 seconds
    cpu time: 8.4 seconds
    cumulative wall time: 8.5 seconds
```



---

archive/issue_comments_217942.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae\"><code>f6dc356</code></a></td><td><code>trac #16881: fix documentation issue</code></td></tr></table>\n",
    "created_at": "2014-08-24T20:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae"><code>f6dc356</code></a></td><td><code>trac #16881: fix documentation issue</code></td></tr></table>




---

archive/issue_comments_217943.json:
```json
{
    "body": "Changed commit from **[`975fb54`](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**",
    "created_at": "2014-08-24T20:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`975fb54`](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**



---

archive/issue_events_236335.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-24T20:15:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236335"
}
```



---

archive/issue_events_236336.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2014-08-24T20:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236336"
}
```



---

archive/issue_comments_217944.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nMight be a good idea to sort the eigenvalues in `.eigenvalues()`...\n\nVincent",
    "created_at": "2014-08-24T20:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217944",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Might be a good idea to sort the eigenvalues in `.eigenvalues()`...

Vincent



---

archive/issue_events_236337.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-25T10:27:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236337"
}
```



---

archive/issue_events_236338.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "124f9bcb946a3b0139f94d10496be63e50df0f81",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-25T10:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236338"
}
```



---

archive/issue_comments_217945.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**",
    "created_at": "2014-08-25T10:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217945",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**



---

archive/issue_comments_217946.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nGot another random failure with this ticket merged:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\nFailed example:\n    for d in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\n    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n    [175 tests, 1 failure, 5.03 s]\n```",
    "created_at": "2014-08-25T20:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217946",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

Got another random failure with this ticket merged:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
Failed example:
    for d in xrange(10):
        p = R.random_element(degree=randint(2,8))
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
    [175 tests, 1 failure, 5.03 s]
```



---

archive/issue_comments_217947.json:
```json
{
    "body": "Changed commit from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to none",
    "created_at": "2014-08-25T20:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217947",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to none



---

archive/issue_events_236339.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-25T20:48:15Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236339"
}
```



---

archive/issue_comments_217948.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHello,\n\nAs said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.\n\nNevertheless, the algorithm which I implemented at a first glance was wrong so:\n- either I move the branch to another ticket\n- or I open a new ticket for the bug about factorization of polynomials over finite fields\n\nVincent",
    "created_at": "2014-08-26T22:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217948",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Hello,

As said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.

Nevertheless, the algorithm which I implemented at a first glance was wrong so:
- either I move the branch to another ticket
- or I open a new ticket for the bug about factorization of polynomials over finite fields

Vincent



---

archive/issue_comments_217949.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nEither way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.",
    "created_at": "2014-08-27T10:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217949",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

Either way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.



---

archive/issue_comments_217950.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe new ticket to track the bug is #16885. It is in critical, I am not sure this is right.\n\nFor the current branch, what about the random failure? Should I tag the test with a `#bug`?\n\nVincent",
    "created_at": "2014-08-27T10:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217950",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

The new ticket to track the bug is #16885. It is in critical, I am not sure this is right.

For the current branch, what about the random failure? Should I tag the test with a `#bug`?

Vincent



---

archive/issue_comments_217951.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLet's keep the test as it is for now, hopefully you can figure out what is wrong ;-)",
    "created_at": "2014-08-27T10:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217951",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

Let's keep the test as it is for now, hopefully you can figure out what is wrong ;-)



---

archive/issue_events_236340.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-27T10:36:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236340"
}
```



---

archive/issue_events_236341.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-27T10:36:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236341"
}
```



---

archive/issue_events_236342.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-27T10:36:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236342"
}
```



---

archive/issue_comments_217952.json:
```json
{
    "body": "Changed branch from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)**",
    "created_at": "2014-08-27T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217952",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)**



---

archive/issue_comments_217953.json:
```json
{
    "body": "Commit: **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**",
    "created_at": "2014-08-27T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217953",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**



---

archive/issue_comments_217954.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1\"><code>a2fa480</code></a></td><td><code>trac #16682: fix random_element in polynomial ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b\"><code>36ee521</code></a></td><td><code>trac #16682: the zero polynomial has degree -1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f\"><code>49b9331</code></a></td><td><code>trac #16682: merge 6.3.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29\"><code>589caad</code></a></td><td><code>trac #16682: input check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad\"><code>6b9ac1b</code></a></td><td><code>trac #16682: better random element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd\"><code>e1b61ff</code></a></td><td><code>trac #16682: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4\"><code>1e0f8d9</code></a></td><td><code>trac #16682: merge sage 6.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43\"><code>975fb54</code></a></td><td><code>trac #16881: fix factorization</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae\"><code>f6dc356</code></a></td><td><code>trac #16881: fix documentation issue</code></td></tr></table>\n",
    "created_at": "2014-08-27T10:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217954",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1"><code>a2fa480</code></a></td><td><code>trac #16682: fix random_element in polynomial ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b"><code>36ee521</code></a></td><td><code>trac #16682: the zero polynomial has degree -1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f"><code>49b9331</code></a></td><td><code>trac #16682: merge 6.3.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29"><code>589caad</code></a></td><td><code>trac #16682: input check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad"><code>6b9ac1b</code></a></td><td><code>trac #16682: better random element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd"><code>e1b61ff</code></a></td><td><code>trac #16682: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4"><code>1e0f8d9</code></a></td><td><code>trac #16682: merge sage 6.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43"><code>975fb54</code></a></td><td><code>trac #16881: fix factorization</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae"><code>f6dc356</code></a></td><td><code>trac #16881: fix documentation issue</code></td></tr></table>




---

archive/issue_events_236343.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-28T18:42:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236343"
}
```



---

archive/issue_events_236344.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-28T18:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16681#event-236344"
}
```



---

archive/issue_comments_217955.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**",
    "created_at": "2014-08-28T18:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217955",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/16881](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/16881)** to **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)**



---

archive/issue_comments_217956.json:
```json
{
    "body": "Changed commit from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to none",
    "created_at": "2014-09-03T12:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217956",
    "user": "https://github.com/nthiery"
}
```

Changed commit from **[`f6dc356`](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)** to none



---

archive/issue_comments_217957.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nFor the record, I just got this error once, with 6.4.beta 2:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi\nal\nFailed example:\n    for _ in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        for r in p.roots(K, multiplicities=False):\n            assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>\", line 4, in <module>\n        assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\n    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial\n    [175 tests, 1 failure, 5.58 s]\n```",
    "created_at": "2014-09-03T12:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217957",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:24" align="right">comment:24</div>

For the record, I just got this error once, with 6.4.beta 2:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi
al
Failed example:
    for _ in xrange(10):
        p = R.random_element(degree=randint(2,8))
        for r in p.roots(K, multiplicities=False):
            assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>", line 4, in <module>
        assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial
    [175 tests, 1 failure, 5.58 s]
```



---

archive/issue_comments_217958.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nDid you try with the fix from #16885?",
    "created_at": "2014-09-03T12:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217958",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

Did you try with the fix from #16885?



---

archive/issue_comments_217959.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nNo. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.",
    "created_at": "2014-09-03T12:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217959",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:26" align="right">comment:26</div>

No. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.



---

archive/issue_comments_217960.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDon't really know, it somehow looks related...\n#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.",
    "created_at": "2014-09-03T13:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217960",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:27" align="right">comment:27</div>

Don't really know, it somehow looks related...
#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.



---

archive/issue_comments_217961.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOk. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.",
    "created_at": "2014-09-03T13:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16681#issuecomment-217961",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Ok. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.
