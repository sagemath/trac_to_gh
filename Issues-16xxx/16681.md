# Issue 16681: Random doctest failures in sage/rings/algebraic_closure_finite_field.py

archive/issues_016444.json:
```json
{
    "body": "This is caused by #15390\n\n```\nsage -t --long src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\nFailed example:\n    for d in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        assert p.factor().prod() == p\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n        assert p.factor().prod() == p\n    AssertionError\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n```\n\nFirst of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=8)\n....:         assert p.factor().prod() == p, p.factor()\n....:     \n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n<ipython-input-22-f31a401fb53b> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=Integer(8))\n----> 3         assert p.factor().prod() == p, p.factor()\n      4 \n\nAssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)\n```\n\nOn a related note, a random element can be zero:\n\n```\nsage: K = GF(3).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: T = R.gen()\nsage: for d in xrange(1000):\n....:         p = R.random_element(degree=randint(2,8))\n....:         assert p.factor().prod() == p, p\n....:     \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-db4aacba08d5> in <module>()\n      1 for d in xrange(Integer(1000)):\n      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))\n----> 3         assert p.factor().prod() == p, p\n      4 \n\n/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()\n\nValueError: factorization of 0 not defined\n```\n\nCC:  @pjbruin @defeo @videlec @miguelmarco jpflori\n\nKeywords: random_fail\n\nReviewer: Volker Braun\n\nAuthor: Vincent Delecroix\n\nBranch: f6dc3562a5b553bebaffc70c64b65ea63466ccae\n\nDependencies: #16682\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16681\n\n",
    "closed_at": "2014-08-28T18:42:03Z",
    "created_at": "2014-07-19T04:54:37Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Random doctest failures in sage/rings/algebraic_closure_finite_field.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16681",
    "user": "https://github.com/vbraun"
}
```
This is caused by #15390

```
sage -t --long src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
Failed example:
    for d in xrange(10):
        p = R.random_element(degree=randint(2,8))
        assert p.factor().prod() == p
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
        assert p.factor().prod() == p
    AssertionError
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
```

First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=8)
....:         assert p.factor().prod() == p, p.factor()
....:     
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-22-f31a401fb53b> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=Integer(8))
----> 3         assert p.factor().prod() == p, p.factor()
      4 

AssertionError: T * (T + 1) * (T + z5 + 1) * (T + z5^3 + 1) * (T + 2*z5^4 + z5) * (T + 2*z5^4 + 2*z5^2) * (T + 2*z5^4 + 2*z5^3 + z5^2 + z5)
```

On a related note, a random element can be zero:

```
sage: K = GF(3).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: T = R.gen()
sage: for d in xrange(1000):
....:         p = R.random_element(degree=randint(2,8))
....:         assert p.factor().prod() == p, p
....:     
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-db4aacba08d5> in <module>()
      1 for d in xrange(Integer(1000)):
      2         p = R.random_element(degree=randint(Integer(2),Integer(8)))
----> 3         assert p.factor().prod() == p, p
      4 

/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.factor (build/cythonized/sage/rings/polynomial/polynomial_element.c:23530)()

ValueError: factorization of 0 not defined
```

CC:  @pjbruin @defeo @videlec @miguelmarco jpflori

Keywords: random_fail

Reviewer: Volker Braun

Author: Vincent Delecroix

Branch: f6dc3562a5b553bebaffc70c64b65ea63466ccae

Dependencies: #16682

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16681





---

archive/issue_comments_281700.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,28 @@\n-This is caused by #15390. \n+This is caused by #15390\n \n-First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.\n+```\n+sage -t --long src/sage/rings/algebraic_closure_finite_field.py\n+**********************************************************************\n+File \"src/sage/rings/algebraic_closure_finite_field.py\", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n+Failed example:\n+    for d in xrange(10):\n+        p = R.random_element(degree=randint(2,8))\n+        assert p.factor().prod() == p\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n+        self.execute(example, compiled, test.globs)\n+      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n+        exec compiled in globs\n+      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n+        assert p.factor().prod() == p\n+    AssertionError\n+**********************************************************************\n+1 item had failures:\n+   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n+```\n \n-The following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)\n+First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:\n \n ```\n sage: K = GF(3).algebraic_closure()\n``````\n",
    "created_at": "2014-07-19T04:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281700",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,28 @@
-This is caused by #15390. 
+This is caused by #15390
 
-First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below.
+```
+sage -t --long src/sage/rings/algebraic_closure_finite_field.py
+**********************************************************************
+File "src/sage/rings/algebraic_closure_finite_field.py", line 940, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
+Failed example:
+    for d in xrange(10):
+        p = R.random_element(degree=randint(2,8))
+        assert p.factor().prod() == p
+Exception raised:
+    Traceback (most recent call last):
+      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
+        self.execute(example, compiled, test.globs)
+      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
+        exec compiled in globs
+      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
+        assert p.factor().prod() == p
+    AssertionError
+**********************************************************************
+1 item had failures:
+   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
+```
 
-The following fails occasionally on OSX 10.9 (cf. algebraic_closure_finite_field.py line 910)
+First of all, you should use a form of assert that gives some minimal information when it can fail, e.g. in the form below. The following fails occasionally and makes it easy enough to reproduce:
 
 ```
 sage: K = GF(3).algebraic_closure()
``````




---

archive/issue_comments_281701.json:
```json
{
    "body": "<a id='comment:2'></a>\nHi,\n\nNice catch! I am on it.\n\nFor the \"related note\", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.\n\nVincent",
    "created_at": "2014-07-19T10:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281701",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>
Hi,

Nice catch! I am on it.

For the "related note", if a polynomial with degree between 2 and 8 can be zero there is definitely a bug but not caused by #15390.

Vincent



---

archive/issue_comments_281702.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#16682\"",
    "created_at": "2014-07-19T10:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281702",
    "user": "https://github.com/videlec"
}
```

Changing dependencies from "" to "#16682"



---

archive/issue_comments_281703.json:
```json
{
    "body": "<a id='comment:4'></a>\nI do not understand...\n\n```\nsage: K = GF(5).algebraic_closure()\nsage: R = PolynomialRing(K, 'T')\nsage: while True:\n....:     p = R.random_element(degree=(2,10))\n....:     fac = p.factor()\n....:     assert fac.prod() == p, (p,fac)\nTraceback (most recent call last):\n...\nAssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))\nsage: p == fac.prod()          # fine\nFalse\nsage: p.factor() == fac        # What!?\nFalse\nsage: p.factor().prod() == p   # What again!?\nTrue\n```",
    "created_at": "2014-07-19T10:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281703",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
I do not understand...

```
sage: K = GF(5).algebraic_closure()
sage: R = PolynomialRing(K, 'T')
sage: while True:
....:     p = R.random_element(degree=(2,10))
....:     fac = p.factor()
....:     assert fac.prod() == p, (p,fac)
Traceback (most recent call last):
...
AssertionError: (2*T^6 + 2*T^5 + 4*T^4 + 2*T^2 + 2*T + 2, (2) * (T + 3) * (T + 3*z5^3 + 2*z5^2 + 1) * (T + 2*z5^4 + 3*z5^2 + 4*z5 + 1) * (T + 2*z5^4 + z5^3 + z5^2 + 3) * (T + 2*z5^4 + 2*z5^3 + 2) * (T + 2*z5^4 + 4*z5^3 + z5^2 + 3*z5 + 2))
sage: p == fac.prod()          # fine
False
sage: p.factor() == fac        # What!?
False
sage: p.factor().prod() == p   # What again!?
True
```



---

archive/issue_comments_281704.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe factorization is not cached but recomputed every time. Sometimes, it is wrong.",
    "created_at": "2014-07-19T15:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281704",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
The factorization is not cached but recomputed every time. Sometimes, it is wrong.



---

archive/issue_comments_281705.json:
```json
{
    "body": "Changing keywords from \"\" to \"random_fail\".",
    "created_at": "2014-07-25T05:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281705",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "random_fail".



---

archive/issue_events_055620.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16681#event-55620"
}
```



---

archive/issue_comments_281706.json:
```json
{
    "body": "<a id='comment:8'></a>\nAll right. The root finding algorithm from #15390 was wrong.\n\nVincent\n\n---\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[a2fa480](https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1)|`trac #16682: fix random_element in polynomial ring`|\n|[36ee521](https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b)|`trac #16682: the zero polynomial has degree -1`|\n|[49b9331](https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f)|`trac #16682: merge 6.3.rc0`|\n|[589caad](https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29)|`trac #16682: input check`|\n|[6b9ac1b](https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad)|`trac #16682: better random element`|\n|[e1b61ff](https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd)|`trac #16682: fix doctests`|\n|[1e0f8d9](https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4)|`trac #16682: merge sage 6.3`|\n|[975fb54](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)|`trac #16881: fix factorization`|",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281706",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
All right. The root finding algorithm from #15390 was wrong.

Vincent

---
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[a2fa480](https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1)|`trac #16682: fix random_element in polynomial ring`|
|[36ee521](https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b)|`trac #16682: the zero polynomial has degree -1`|
|[49b9331](https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f)|`trac #16682: merge 6.3.rc0`|
|[589caad](https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29)|`trac #16682: input check`|
|[6b9ac1b](https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad)|`trac #16682: better random element`|
|[e1b61ff](https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd)|`trac #16682: fix doctests`|
|[1e0f8d9](https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4)|`trac #16682: merge sage 6.3`|
|[975fb54](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)|`trac #16881: fix factorization`|



---

archive/issue_comments_281707.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281707",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281708.json:
```json
{
    "body": "Changing commit from \"\" to \"975fb54a89391fcf189d336908e46be53c389f43\"",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281708",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "975fb54a89391fcf189d336908e46be53c389f43"



---

archive/issue_comments_281709.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/16881\"",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281709",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/16881"



---

archive/issue_comments_281710.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2014-08-13T10:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281710",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_281711.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-24T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281711",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281712.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2014-08-24T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281712",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_281713.json:
```json
{
    "body": "<a id='comment:9'></a>\nlgtm",
    "created_at": "2014-08-24T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281713",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
lgtm



---

archive/issue_comments_281714.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-24T20:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281714",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_281715.json:
```json
{
    "body": "<a id='comment:10'></a>\n\n```\nsage -t src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    ev = M.eigenvalues(); ev\nExpected:\n    [2*z3, 2*z3 + 2, 2*z3 + 1]\nGot:\n    [2*z3 + 1, 2*z3 + 2, 2*z3]\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\nFailed example:\n    e.as_finite_field_element()\nExpected:\n    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\nGot:\n    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:\n      From: Finite Field in z3 of size 3^3\n      To:   Algebraic closure of Finite Field of size 3\n      Defn: z3 |--> z3)\n**********************************************************************\n1 item had failures:\n   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues\n    [2116 tests, 2 failures, 8.52 s]\n----------------------------------------------------------------------\nsage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 9.1 seconds\n    cpu time: 8.4 seconds\n    cumulative wall time: 8.5 seconds\n```",
    "created_at": "2014-08-24T20:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281715",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>

```
sage -t src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5349, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    ev = M.eigenvalues(); ev
Expected:
    [2*z3, 2*z3 + 2, 2*z3 + 1]
Got:
    [2*z3 + 1, 2*z3 + 2, 2*z3]
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 5359, in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
Failed example:
    e.as_finite_field_element()
Expected:
    (Finite Field in z3 of size 3^3, 2*z3, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
Got:
    (Finite Field in z3 of size 3^3, 2*z3 + 1, Ring morphism:
      From: Finite Field in z3 of size 3^3
      To:   Algebraic closure of Finite Field of size 3
      Defn: z3 |--> z3)
**********************************************************************
1 item had failures:
   2 of  19 in sage.matrix.matrix2.Matrix.diagonal.eigenvalues
    [2116 tests, 2 failures, 8.52 s]
----------------------------------------------------------------------
sage -t src/sage/matrix/matrix2.pyx  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 9.1 seconds
    cpu time: 8.4 seconds
    cumulative wall time: 8.5 seconds
```



---

archive/issue_comments_281716.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[f6dc356](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)|`trac #16881: fix documentation issue`|",
    "created_at": "2014-08-24T20:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[f6dc356](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)|`trac #16881: fix documentation issue`|



---

archive/issue_comments_281717.json:
```json
{
    "body": "Changing commit from \"975fb54a89391fcf189d336908e46be53c389f43\" to \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\"",
    "created_at": "2014-08-24T20:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "975fb54a89391fcf189d336908e46be53c389f43" to "f6dc3562a5b553bebaffc70c64b65ea63466ccae"



---

archive/issue_comments_281718.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-24T20:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281718",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281719.json:
```json
{
    "body": "<a id='comment:12'></a>\nMight be a good idea to sort the eigenvalues in `.eigenvalues()`...\n\nVincent",
    "created_at": "2014-08-24T20:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281719",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Might be a good idea to sort the eigenvalues in `.eigenvalues()`...

Vincent



---

archive/issue_events_055621.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-25T10:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16681#event-55621"
}
```



---

archive/issue_comments_281720.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/16881\" to \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\"",
    "created_at": "2014-08-25T10:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281720",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/16881" to "f6dc3562a5b553bebaffc70c64b65ea63466ccae"



---

archive/issue_comments_281721.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-25T10:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281721",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_281722.json:
```json
{
    "body": "<a id='comment:14'></a>\nGot another random failure with this ticket merged:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\nFailed example:\n    for d in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>\", line 3, in <module>\n        assert p.factor().prod() == p, \"error in the factorization of p={}\".format(p)\n    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial\n    [175 tests, 1 failure, 5.03 s]\n```",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281722",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
Got another random failure with this ticket merged:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 942, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
Failed example:
    for d in xrange(10):
        p = R.random_element(degree=randint(2,8))
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial[4]>", line 3, in <module>
        assert p.factor().prod() == p, "error in the factorization of p={}".format(p)
    AssertionError: error in the factorization of p=T^7 + T^6 + T^5 + 2*T^4 + 2*T^3 + 2*T^2 + T + 2
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._factor_univariate_polynomial
    [175 tests, 1 failure, 5.03 s]
```



---

archive/issue_comments_281723.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281723",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_281724.json:
```json
{
    "body": "Changing commit from \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\" to \"\"",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281724",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "f6dc3562a5b553bebaffc70c64b65ea63466ccae" to ""



---

archive/issue_comments_281725.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2014-08-25T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281725",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_281726.json:
```json
{
    "body": "<a id='comment:15'></a>\nHello,\n\nAs said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.\n\nNevertheless, the algorithm which I implemented at a first glance was wrong so:\n- either I move the branch to another ticket\n- or I open a new ticket for the bug about factorization of polynomials over finite fields\n\nVincent",
    "created_at": "2014-08-26T22:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281726",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Hello,

As said on [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pk36tDZIo0c) the bug has nothing to do with algebraic closure of finite fields.

Nevertheless, the algorithm which I implemented at a first glance was wrong so:
- either I move the branch to another ticket
- or I open a new ticket for the bug about factorization of polynomials over finite fields

Vincent



---

archive/issue_comments_281727.json:
```json
{
    "body": "<a id='comment:17'></a>\nEither way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.",
    "created_at": "2014-08-27T10:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281727",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Either way is fine with me. However you decide to split the ticket, feel free to set this branch back to positive review.



---

archive/issue_comments_281728.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe new ticket to track the bug is #16885. It is in critical, I am not sure this is right.\n\nFor the current branch, what about the random failure? Should I tag the test with a `#bug`?\n\nVincent",
    "created_at": "2014-08-27T10:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281728",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
The new ticket to track the bug is #16885. It is in critical, I am not sure this is right.

For the current branch, what about the random failure? Should I tag the test with a `#bug`?

Vincent



---

archive/issue_comments_281729.json:
```json
{
    "body": "<a id='comment:19'></a>\nLet's keep the test as it is for now, hopefully you can figure out what is wrong ;-)",
    "created_at": "2014-08-27T10:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281729",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>
Let's keep the test as it is for now, hopefully you can figure out what is wrong ;-)



---

archive/issue_comments_281730.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-27T10:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281730",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281731.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-27T10:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281731",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281732.json:
```json
{
    "body": "Changing branch from \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\" to \"u/vdelecroix/16881\"",
    "created_at": "2014-08-27T10:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281732",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "f6dc3562a5b553bebaffc70c64b65ea63466ccae" to "u/vdelecroix/16881"



---

archive/issue_comments_281733.json:
```json
{
    "body": "Changing commit from \"\" to \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\"",
    "created_at": "2014-08-27T10:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281733",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "" to "f6dc3562a5b553bebaffc70c64b65ea63466ccae"



---

archive/issue_comments_281734.json:
```json
{
    "body": "<a id='comment:22'></a>\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[a2fa480](https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1)|`trac #16682: fix random_element in polynomial ring`|\n|[36ee521](https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b)|`trac #16682: the zero polynomial has degree -1`|\n|[49b9331](https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f)|`trac #16682: merge 6.3.rc0`|\n|[589caad](https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29)|`trac #16682: input check`|\n|[6b9ac1b](https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad)|`trac #16682: better random element`|\n|[e1b61ff](https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd)|`trac #16682: fix doctests`|\n|[1e0f8d9](https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4)|`trac #16682: merge sage 6.3`|\n|[975fb54](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)|`trac #16881: fix factorization`|\n|[f6dc356](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)|`trac #16881: fix documentation issue`|",
    "created_at": "2014-08-27T10:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281734",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[a2fa480](https://github.com/sagemath/sagetrac-mirror/commit/a2fa4809681cfb0519b4c137d215ec6963f7dac1)|`trac #16682: fix random_element in polynomial ring`|
|[36ee521](https://github.com/sagemath/sagetrac-mirror/commit/36ee521f145b9d17feed59e60221171e25eb3e2b)|`trac #16682: the zero polynomial has degree -1`|
|[49b9331](https://github.com/sagemath/sagetrac-mirror/commit/49b9331a39455ac33d52e971b0b99294a0bc8c8f)|`trac #16682: merge 6.3.rc0`|
|[589caad](https://github.com/sagemath/sagetrac-mirror/commit/589caad6a78988d4bb3aab3c55bd6e0be6d20c29)|`trac #16682: input check`|
|[6b9ac1b](https://github.com/sagemath/sagetrac-mirror/commit/6b9ac1b8d1bf915db89a704fd8c491f6d130e8ad)|`trac #16682: better random element`|
|[e1b61ff](https://github.com/sagemath/sagetrac-mirror/commit/e1b61ff878eeb8c894a5cb00c672cbd3e3b4cddd)|`trac #16682: fix doctests`|
|[1e0f8d9](https://github.com/sagemath/sagetrac-mirror/commit/1e0f8d9e9ac0bf228959b68d480b12a93cc911a4)|`trac #16682: merge sage 6.3`|
|[975fb54](https://github.com/sagemath/sagetrac-mirror/commit/975fb54a89391fcf189d336908e46be53c389f43)|`trac #16881: fix factorization`|
|[f6dc356](https://github.com/sagemath/sagetrac-mirror/commit/f6dc3562a5b553bebaffc70c64b65ea63466ccae)|`trac #16881: fix documentation issue`|



---

archive/issue_comments_281735.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-28T18:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281735",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_055622.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-28T18:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16681#event-55622"
}
```



---

archive/issue_comments_281736.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/16881\" to \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\"",
    "created_at": "2014-08-28T18:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281736",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/16881" to "f6dc3562a5b553bebaffc70c64b65ea63466ccae"



---

archive/issue_comments_281737.json:
```json
{
    "body": "Changing commit from \"f6dc3562a5b553bebaffc70c64b65ea63466ccae\" to \"\"",
    "created_at": "2014-09-03T12:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281737",
    "user": "https://github.com/nthiery"
}
```

Changing commit from "f6dc3562a5b553bebaffc70c64b65ea63466ccae" to ""



---

archive/issue_comments_281738.json:
```json
{
    "body": "<a id='comment:24'></a>\nFor the record, I just got this error once, with 6.4.beta 2:\n\n```\nsage -t src/sage/rings/algebraic_closure_finite_field.py\n**********************************************************************\nFile \"src/sage/rings/algebraic_closure_finite_field.py\", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi\nal\nFailed example:\n    for _ in xrange(10):\n        p = R.random_element(degree=randint(2,8))\n        for r in p.roots(K, multiplicities=False):\n            assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 843, in compile_and_execute\n        exec compiled in globs\n      File \"<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>\", line 4, in <module>\n        assert p(r).is_zero(), \"r={} is not a root of p={}\".format(r,p)\n    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial\n    [175 tests, 1 failure, 5.58 s]\n```",
    "created_at": "2014-09-03T12:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281738",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:24'></a>
For the record, I just got this error once, with 6.4.beta 2:

```
sage -t src/sage/rings/algebraic_closure_finite_field.py
**********************************************************************
File "src/sage/rings/algebraic_closure_finite_field.py", line 890, in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomi
al
Failed example:
    for _ in xrange(10):
        p = R.random_element(degree=randint(2,8))
        for r in p.roots(K, multiplicities=False):
            assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial[4]>", line 4, in <module>
        assert p(r).is_zero(), "r={} is not a root of p={}".format(r,p)
    AssertionError: r=4*t6^3 + 2*t6^2 + 1 is not a root of p=4*x^7 + 2*x^6 + 2*x^5 + 3*x^4 + 2*x^3 + 4*x^2 + 4*x
**********************************************************************
1 item had failures:
   1 of   6 in sage.rings.algebraic_closure_finite_field.AlgebraicClosureFiniteField_generic._roots_univariate_polynomial
    [175 tests, 1 failure, 5.58 s]
```



---

archive/issue_comments_281739.json:
```json
{
    "body": "<a id='comment:25'></a>\nDid you try with the fix from #16885?",
    "created_at": "2014-09-03T12:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281739",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>
Did you try with the fix from #16885?



---

archive/issue_comments_281740.json:
```json
{
    "body": "<a id='comment:26'></a>\nNo. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.",
    "created_at": "2014-09-03T12:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281740",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:26'></a>
No. But also I only got biten by this once, so even if I tried a couple times with #16885, this would not necessarily mean much. But if you think that's useful, I can go for it.



---

archive/issue_comments_281741.json:
```json
{
    "body": "<a id='comment:27'></a>\nDon't really know, it somehow looks related...\n#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.",
    "created_at": "2014-09-03T13:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281741",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
Don't really know, it somehow looks related...
#16885 should fix a very insidious and rarely occurring bug messing with the current characteristic and polynomial defining a finite field which might cause your error.



---

archive/issue_comments_281742.json:
```json
{
    "body": "<a id='comment:28'></a>\nOk. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.",
    "created_at": "2014-09-03T13:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16681",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16681#issuecomment-281742",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:28'></a>
Ok. Ping me if you need more data point. Right now, I'll reserve the power for testing other tickets of mine. I forgot to mention: my machine is a standard Ubuntu box.
