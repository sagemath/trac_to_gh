# Issue 16908: Upgrade Maxima to 5.34.1

archive/issues_016671.json:
```json
{
    "assignees": [],
    "body": "Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n\nThis appears to fix #14965.\n\nCC:  @zimmermann6 @jpflori @williamstein\n\nKeywords: **maxima**\n\nBranch/Commit: **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Peter Bruin**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16908_\n\n",
    "closed_at": "2014-09-16T18:47:42Z",
    "created_at": "2014-08-29T23:29:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Maxima to 5.34.1",
    "type": "issue",
    "updated_at": "2014-09-16T18:47:42Z",
    "url": "https://github.com/sagemath/sage/issues/16908",
    "user": "https://github.com/pjbruin"
}
```
Tarball: ​http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2

This appears to fix #14965.

CC:  @zimmermann6 @jpflori @williamstein

Keywords: **maxima**

Branch/Commit: **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**

Reviewer: **Jeroen Demeyer**

Author: **Peter Bruin**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/16908_





---

archive/issue_events_239532.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-08-29T23:29:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239532"
}
```



---

archive/issue_events_239533.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-08-29T23:29:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239533"
}
```



---

archive/issue_events_239534.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-08-29T23:29:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239534"
}
```



---

archive/issue_comments_222771.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAny tix this fixes, btw?",
    "created_at": "2014-08-31T01:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222771",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

Any tix this fixes, btw?



---

archive/issue_comments_222772.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@kcrisman](#comment%3A1):\n> Any tix this fixes, btw?\n\nI haven't had the time to investigate this in detail.  It doesn't fix any of the tickets listed in #13973 that are still open, but I haven't looked at other open Maxima-related tickets.  The update shouldn't be too difficult, but there are some problems, such as my fix for the matrix exponentation bug (see #13973) not working anymore.",
    "created_at": "2014-09-03T11:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222772",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@kcrisman](#comment%3A1):
> Any tix this fixes, btw?

I haven't had the time to investigate this in detail.  It doesn't fix any of the tickets listed in #13973 that are still open, but I haven't looked at other open Maxima-related tickets.  The update shouldn't be too difficult, but there are some problems, such as my fix for the matrix exponentation bug (see #13973) not working anymore.



---

archive/issue_comments_222773.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nChangelog is here: https://sourceforge.net/p/maxima/code/ci/master/tree/ChangeLog-5.34",
    "created_at": "2014-09-04T08:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222773",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

Changelog is here: https://sourceforge.net/p/maxima/code/ci/master/tree/ChangeLog-5.34



---

archive/issue_comments_222774.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@kcrisman](#comment%3A1):\n> Any tix this fixes, btw?\n\n#14965 claims to be fixed by Maxima 5.34",
    "created_at": "2014-09-04T19:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222774",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@kcrisman](#comment%3A1):
> Any tix this fixes, btw?

#14965 claims to be fixed by Maxima 5.34



---

archive/issue_comments_222775.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHow many patches can we drop with this version?",
    "created_at": "2014-09-04T21:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222775",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

How many patches can we drop with this version?



---

archive/issue_events_239535.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-05T08:12:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239535"
}
```



---

archive/issue_comments_222776.json:
```json
{
    "body": "Branch: **[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)**",
    "created_at": "2014-09-05T08:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222776",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)**



---

archive/issue_comments_222777.json:
```json
{
    "body": "Author: **Peter Bruin**",
    "created_at": "2014-09-05T08:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222777",
    "user": "https://github.com/pjbruin"
}
```

Author: **Peter Bruin**



---

archive/issue_comments_222778.json:
```json
{
    "body": "Commit: **[`0fd6543`](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)**",
    "created_at": "2014-09-05T08:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222778",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`0fd6543`](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)**



---

archive/issue_comments_222779.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jdemeyer](#comment%3A4):\n> Replying to [@kcrisman](#comment%3A1):\n> > Any tix this fixes, btw?\n\n> #14965 claims to be fixed by Maxima 5.34\n\nIt does appear to be fixed; I am not getting an error, but haven't checked if the answer is correct.\n\n[Edit: actually I couldn't reproduce the error with Maxima 5.33.0.]",
    "created_at": "2014-09-05T08:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222779",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jdemeyer](#comment%3A4):
> Replying to [@kcrisman](#comment%3A1):
> > Any tix this fixes, btw?

> #14965 claims to be fixed by Maxima 5.34

It does appear to be fixed; I am not getting an error, but haven't checked if the answer is correct.

[Edit: actually I couldn't reproduce the error with Maxima 5.33.0.]



---

archive/issue_comments_222780.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kiwifb](#comment%3A5):\n> How many patches can we drop with this version?\n\nThis branch removes two patches and updates another one.\n\n[Edit: the one added patch was not necessary after all, there was a better solution.]",
    "created_at": "2014-09-05T08:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222780",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kiwifb](#comment%3A5):
> How many patches can we drop with this version?

This branch removes two patches and updates another one.

[Edit: the one added patch was not necessary after all, there was a better solution.]



---

archive/issue_comments_222781.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI have tested this (and all tests pass) on x86_64 and ARM 32-bit.",
    "created_at": "2014-09-05T08:15:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222781",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:9" align="right">comment:9</div>

I have tested this (and all tests pass) on x86_64 and ARM 32-bit.



---

archive/issue_comments_222782.json:
```json
{
    "body": "Changed commit from **[`0fd6543`](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)** to **[`d83032d`](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)**",
    "created_at": "2014-09-06T10:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222782",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0fd6543`](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)** to **[`d83032d`](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)**



---

archive/issue_comments_222783.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083\"><code>d83032d</code></a></td><td><code>Trac 16908: replace compile-verbose.patch by suitable fixes in Sage code</code></td></tr></table>\n",
    "created_at": "2014-09-06T10:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222783",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083"><code>d83032d</code></a></td><td><code>Trac 16908: replace compile-verbose.patch by suitable fixes in Sage code</code></td></tr></table>




---

archive/issue_events_239536.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "title_is": "Upgrade Maxima to 5.34.1",
    "title_was": "Upgrade Maxima to 5.34.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239536"
}
```



---

archive/issue_comments_222784.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nMaxima 5.34.1 has been released, an updated branch is coming soon.",
    "created_at": "2014-09-10T08:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222784",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

Maxima 5.34.1 has been released, an updated branch is coming soon.



---

archive/issue_comments_222785.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Tarball: \u200bhttp://homepages.warwick.ac.uk/staff/P.Bruin/sage/maxima-5.34.0.tar.bz2\n+Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n``````\n",
    "created_at": "2014-09-10T08:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222785",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Tarball: ​http://homepages.warwick.ac.uk/staff/P.Bruin/sage/maxima-5.34.0.tar.bz2
+Tarball: ​http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2
``````




---

archive/issue_events_239537.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239537"
}
```



---

archive/issue_events_239538.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239538"
}
```



---

archive/issue_comments_222786.json:
```json
{
    "body": "Changed commit from **[`d83032d`](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)** to **[`44c889e`](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)**",
    "created_at": "2014-09-10T09:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222786",
    "user": "https://github.com/pjbruin"
}
```

Changed commit from **[`d83032d`](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)** to **[`44c889e`](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)**



---

archive/issue_comments_222787.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n+\n+This appears to fix #14965.\n``````\n",
    "created_at": "2014-09-10T09:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222787",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Tarball: ​http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2
+
+This appears to fix #14965.
``````




---

archive/issue_comments_222788.json:
```json
{
    "body": "Changed branch from **[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)** to **[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)**",
    "created_at": "2014-09-10T09:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222788",
    "user": "https://github.com/pjbruin"
}
```

Changed branch from **[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)** to **[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)**



---

archive/issue_events_239539.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T09:17:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239539"
}
```



---

archive/issue_events_239540.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T09:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239540"
}
```



---

archive/issue_comments_222789.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nCould you justify this change?\n\n```diff\n- sage: latex(integrate(1/(1+sqrt(x)),x,0,1))\n- \\int_{0}^{1} \\frac{1}{\\sqrt{x} + 1}\\,{d x}\n```\n\nI think the purpose of this test is to show an integral that Maxima cannot compute. You could replace this by a different integral...",
    "created_at": "2014-09-10T12:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222789",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Could you justify this change?

```diff
- sage: latex(integrate(1/(1+sqrt(x)),x,0,1))
- \int_{0}^{1} \frac{1}{\sqrt{x} + 1}\,{d x}
```

I think the purpose of this test is to show an integral that Maxima cannot compute. You could replace this by a different integral...



---

archive/issue_comments_222790.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMaxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.",
    "created_at": "2014-09-10T12:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222790",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.



---

archive/issue_comments_222791.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@pjbruin](#comment%3A15):\n> Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.\n\nWell, the 2 doctests are somewhat different, one calls directly `print_latex` while the removed one uses `latex()`. So yes, please but back a second doctests.\n\nApart from this trivial thing, this ticket looks good to me.",
    "created_at": "2014-09-10T12:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222791",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@pjbruin](#comment%3A15):
> Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.

Well, the 2 doctests are somewhat different, one calls directly `print_latex` while the removed one uses `latex()`. So yes, please but back a second doctests.

Apart from this trivial thing, this ticket looks good to me.



---

archive/issue_comments_222792.json:
```json
{
    "body": "Changed commit from **[`44c889e`](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)** to **[`2785ccc`](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)**",
    "created_at": "2014-09-10T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222792",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`44c889e`](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)** to **[`2785ccc`](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)**



---

archive/issue_comments_222793.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1\"><code>2785ccc</code></a></td><td><code>Trac 16908: upgrade Maxima to 5.34.1</code></td></tr></table>\n",
    "created_at": "2014-09-10T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222793",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1"><code>2785ccc</code></a></td><td><code>Trac 16908: upgrade Maxima to 5.34.1</code></td></tr></table>




---

archive/issue_comments_222794.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI amended the existing commit instead of adding a new one, because the commit message mentioned the wrong Maxima version.  I added the following doctests:\n\n```diff\n--- a/src/sage/symbolic/integration/integral.py\n+++ b/src/sage/symbolic/integration/integral.py\n@@ -116,6 +116,8 @@ class IndefiniteIntegral(BuiltinFunction):\n             sage: f = function('f')\n             sage: print_latex(f(x),x)\n             '\\\\int f\\\\left(x\\\\right)\\\\,{d x}'\n+            sage: latex(integrate(tan(x)/x, x))\n+            \\int \\frac{\\tan\\left(x\\right)}{x}\\,{d x}\n         \"\"\"\n         from sage.misc.latex import latex\n         if not is_SymbolicVariable(x):\n@@ -236,8 +238,8 @@ class DefiniteIntegral(BuiltinFunction):\n             sage: f = function('f')\n             sage: print_latex(f(x),x,0,1)\n             '\\\\int_{0}^{1} f\\\\left(x\\\\right)\\\\,{d x}'\n-            sage: latex(integrate(1/(1+sqrt(x)),x,0,1))\n-            \\int_{0}^{1} \\frac{1}{\\sqrt{x} + 1}\\,{d x}\n+            sage: latex(integrate(tan(x)/x, x, 0, 1))\n+            \\int_{0}^{1} \\frac{\\tan\\left(x\\right)}{x}\\,{d x}\n         \"\"\"\n         from sage.misc.latex import latex\n         if not is_SymbolicVariable(x):\n```",
    "created_at": "2014-09-10T13:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222794",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

I amended the existing commit instead of adding a new one, because the commit message mentioned the wrong Maxima version.  I added the following doctests:

```diff
--- a/src/sage/symbolic/integration/integral.py
+++ b/src/sage/symbolic/integration/integral.py
@@ -116,6 +116,8 @@ class IndefiniteIntegral(BuiltinFunction):
             sage: f = function('f')
             sage: print_latex(f(x),x)
             '\\int f\\left(x\\right)\\,{d x}'
+            sage: latex(integrate(tan(x)/x, x))
+            \int \frac{\tan\left(x\right)}{x}\,{d x}
         """
         from sage.misc.latex import latex
         if not is_SymbolicVariable(x):
@@ -236,8 +238,8 @@ class DefiniteIntegral(BuiltinFunction):
             sage: f = function('f')
             sage: print_latex(f(x),x,0,1)
             '\\int_{0}^{1} f\\left(x\\right)\\,{d x}'
-            sage: latex(integrate(1/(1+sqrt(x)),x,0,1))
-            \int_{0}^{1} \frac{1}{\sqrt{x} + 1}\,{d x}
+            sage: latex(integrate(tan(x)/x, x, 0, 1))
+            \int_{0}^{1} \frac{\tan\left(x\right)}{x}\,{d x}
         """
         from sage.misc.latex import latex
         if not is_SymbolicVariable(x):
```



---

archive/issue_events_239541.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-10T14:40:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239541"
}
```



---

archive/issue_events_239542.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-10T14:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239542"
}
```



---

archive/issue_comments_222795.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2014-09-10T14:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222795",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_222796.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nConflicts with #16651 or #16858",
    "created_at": "2014-09-10T21:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222796",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

Conflicts with #16651 or #16858



---

archive/issue_events_239543.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-10T21:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239543"
}
```



---

archive/issue_events_239544.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-10T21:58:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239544"
}
```



---

archive/issue_comments_222797.json:
```json
{
    "body": "Changed commit from **[`2785ccc`](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)** to **[`b8babff`](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)**",
    "created_at": "2014-09-11T11:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2785ccc`](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)** to **[`b8babff`](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)**



---

archive/issue_comments_222798.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38a52cfb78fbe0ebd5221b5d52bb511210084aaf\"><code>38a52cf</code></a></td><td><code>Make the to_poly_solve option work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2573b80af24cf5938c089758dff7304ca53c9569\"><code>2573b80</code></a></td><td><code>fix two trivial doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fb6bee3a7ef1f692656f615f9361c9e52afeec1\"><code>6fb6bee</code></a></td><td><code>Use for loop instead of while</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c534e55a3cdc0f2dc13262aea91d8a0afd553492\"><code>c534e55</code></a></td><td><code>Merge branch 'develop' into t/16651/buggy_to_poly_solve</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a801e64f1802c2133c2f362ab84aa122c54530b5\"><code>a801e64</code></a></td><td><code>16651: reviewer's patch: language refinements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fa0110eccea00366f326a1cf8da880617eccd32\"><code>1fa0110</code></a></td><td><code>Docstring fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc\"><code>b8babff</code></a></td><td><code>Merge branch 'u/vbraun/buggy_to_poly_solve' of ssh://trac.sagemath.org/sage into ticket/16908-maxima-5.34.1</code></td></tr></table>\n",
    "created_at": "2014-09-11T11:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38a52cfb78fbe0ebd5221b5d52bb511210084aaf"><code>38a52cf</code></a></td><td><code>Make the to_poly_solve option work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2573b80af24cf5938c089758dff7304ca53c9569"><code>2573b80</code></a></td><td><code>fix two trivial doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fb6bee3a7ef1f692656f615f9361c9e52afeec1"><code>6fb6bee</code></a></td><td><code>Use for loop instead of while</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c534e55a3cdc0f2dc13262aea91d8a0afd553492"><code>c534e55</code></a></td><td><code>Merge branch 'develop' into t/16651/buggy_to_poly_solve</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a801e64f1802c2133c2f362ab84aa122c54530b5"><code>a801e64</code></a></td><td><code>16651: reviewer's patch: language refinements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fa0110eccea00366f326a1cf8da880617eccd32"><code>1fa0110</code></a></td><td><code>Docstring fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc"><code>b8babff</code></a></td><td><code>Merge branch 'u/vbraun/buggy_to_poly_solve' of ssh://trac.sagemath.org/sage into ticket/16908-maxima-5.34.1</code></td></tr></table>




---

archive/issue_events_239545.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-11T11:38:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239545"
}
```



---

archive/issue_events_239546.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-11T11:38:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239546"
}
```



---

archive/issue_comments_222799.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI get various doctest failures on top of 6.4.beta3:\n\n```\nsage -t --long --warn-long 40.1 src/sage/calculus/desolvers.py  # 2 doctests failed\nsage -t --long --warn-long 40.1 src/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/tests/french_book/integration_doctest.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/modules/free_module_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/symbolic/relation.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/functions/other.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/functions/special.py  # 2 doctests failed\n```\nLooks like it is all due to changed precision of floats",
    "created_at": "2014-09-11T14:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222799",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

I get various doctest failures on top of 6.4.beta3:

```
sage -t --long --warn-long 40.1 src/sage/calculus/desolvers.py  # 2 doctests failed
sage -t --long --warn-long 40.1 src/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/tests/french_book/integration_doctest.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/modules/free_module_element.pyx  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/symbolic/relation.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/functions/other.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/functions/special.py  # 2 doctests failed
```
Looks like it is all due to changed precision of floats



---

archive/issue_events_239547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-11T14:35:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239547"
}
```



---

archive/issue_events_239548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-11T14:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239548"
}
```



---

archive/issue_comments_222800.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI'll have a look at the doctest failures.",
    "created_at": "2014-09-12T07:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222800",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

I'll have a look at the doctest failures.



---

archive/issue_comments_222801.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jdemeyer](#comment%3A25):\n> I'll have a look at the doctest failures.\n\nThere is no need to, I just fixed them and only have to test them on 32-bit.",
    "created_at": "2014-09-12T07:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222801",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jdemeyer](#comment%3A25):
> I'll have a look at the doctest failures.

There is no need to, I just fixed them and only have to test them on 32-bit.



---

archive/issue_comments_222802.json:
```json
{
    "body": "Changed commit from **[`b8babff`](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)** to **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**",
    "created_at": "2014-09-12T07:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222802",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8babff`](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)** to **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**



---

archive/issue_comments_222803.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dc99734b070f8d411d95de7ad962ee825ca0934\"><code>5dc9973</code></a></td><td><code>Merge branch 'develop' into ticket/16908-maxima-5.34.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245\"><code>e216b6f</code></a></td><td><code>Trac 16908: correct precision in doctests</code></td></tr></table>\n",
    "created_at": "2014-09-12T07:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222803",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dc99734b070f8d411d95de7ad962ee825ca0934"><code>5dc9973</code></a></td><td><code>Merge branch 'develop' into ticket/16908-maxima-5.34.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245"><code>e216b6f</code></a></td><td><code>Trac 16908: correct precision in doctests</code></td></tr></table>




---

archive/issue_comments_222804.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAnother trivial change to a French book test.",
    "created_at": "2014-09-12T07:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222804",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Another trivial change to a French book test.



---

archive/issue_comments_222805.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nDo you understand why floats from Maxima are now printed with one digit less of precision???",
    "created_at": "2014-09-12T08:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222805",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Do you understand why floats from Maxima are now printed with one digit less of precision???



---

archive/issue_comments_222806.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jdemeyer](#comment%3A29):\n> Do you understand why floats from Maxima are now printed with one digit less of precision???\n\nThis is because of recent changes (between 5.33.0 and 5.34.0) to Maxima's `exploden-format-float` function.  In fact, on certain Lisp implementations and platforms (including ECL on x86_64), Maxima used to often print one digit too many; see #15921 for details.",
    "created_at": "2014-09-12T08:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222806",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jdemeyer](#comment%3A29):
> Do you understand why floats from Maxima are now printed with one digit less of precision???

This is because of recent changes (between 5.33.0 and 5.34.0) to Maxima's `exploden-format-float` function.  In fact, on certain Lisp implementations and platforms (including ECL on x86_64), Maxima used to often print one digit too many; see #15921 for details.



---

archive/issue_comments_222807.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAll relevant doctests (the failed ones above, and everything in `sage/interfaces/maxima_*`, `sage/calculus`, `sage/functions`, `sage/symbolic`) pass on x86_64 and ARM.  Since I ran all long doctests before, I now leave it to the buildbot to catch any unlikely remaining failures...",
    "created_at": "2014-09-12T09:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222807",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:31" align="right">comment:31</div>

All relevant doctests (the failed ones above, and everything in `sage/interfaces/maxima_*`, `sage/calculus`, `sage/functions`, `sage/symbolic`) pass on x86_64 and ARM.  Since I ran all long doctests before, I now leave it to the buildbot to catch any unlikely remaining failures...



---

archive/issue_events_239549.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-12T09:38:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239549"
}
```



---

archive/issue_events_239550.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-12T09:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239550"
}
```



---

archive/issue_comments_222808.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI'm not happy with the changes in the French book tests. In some places you use `...`\nwhich should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,\nand might fail with future versions, for example:\n\n```\n     sage: t, y = var('t, y')\n     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n-    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]\n+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n```\nPaul",
    "created_at": "2014-09-12T09:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222808",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:32" align="right">comment:32</div>

I'm not happy with the changes in the French book tests. In some places you use `...`
which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,
and might fail with future versions, for example:

```
     sage: t, y = var('t, y')
     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
-    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]
+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
```
Paul



---

archive/issue_comments_222809.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@zimmermann6](#comment%3A32):\n> I'm not happy with the changes in the French book tests.\n\nI assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\n> In some places you use `...`\n> which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,\n> and might fail with future versions, for example:\n> \n> ```\n>      sage: t, y = var('t, y')\n>      sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n> -    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]\n> +    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n> ```\n\nDo I understand correctly that you propose to always use `...` and only keep the minimum among the various numbers of digits that are output by all existing versions of Sage?\n\nCould you explain more precisely why you object to showing the output of the doctests with the (increased) precision used by the current Sage version?  Does it cause more work for you to keep them updated, or do you expect it may cause confusion among users with different versions of Sage?",
    "created_at": "2014-09-12T10:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222809",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@zimmermann6](#comment%3A32):
> I'm not happy with the changes in the French book tests.

I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

> In some places you use `...`
> which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,
> and might fail with future versions, for example:
> 
> ```
>      sage: t, y = var('t, y')
>      sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
> -    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]
> +    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
> ```

Do I understand correctly that you propose to always use `...` and only keep the minimum among the various numbers of digits that are output by all existing versions of Sage?

Could you explain more precisely why you object to showing the output of the doctests with the (increased) precision used by the current Sage version?  Does it cause more work for you to keep them updated, or do you expect it may cause confusion among users with different versions of Sage?



---

archive/issue_comments_222810.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n> I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\nI refer to changeset `e216b6f` in comment [comment:27].\n\nYes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).\n\nThe intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9. Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.\n\nPaul",
    "created_at": "2014-09-12T10:55:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222810",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:34" align="right">comment:34</div>

> I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

I refer to changeset `e216b6f` in comment [comment:27].

Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).

The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9. Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.

Paul



---

archive/issue_comments_222811.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@zimmermann6](#comment%3A34):\n> > I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\n> \n> I refer to changeset `e216b6f` in comment [comment:27].\n\nThe only change made by that changeset in the `french_book` directory is\n\n```diff\n--- a/src/sage/tests/french_book/integration_doctest.py\n+++ b/src/sage/tests/french_book/integration_doctest.py\n@@ -180,7 +180,7 @@ Sage example in ./integration.tex, line 838::\n \n     sage: t, y = var('t, y')\n     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n-    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]\n \n     Sage example in ./integration.tex, line 861::\n \n```\nThe (earlier) commit that added the extra digits was 7cb1dd50 in #16858.\n> Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).\n> \n> The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9.\n\nOK, but surely a doctest where the only change is an increased precision should be classified as \"still working\"?  In any case, a user who types the doctest in a newer version of Sage will also see the extra digits.\n> Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.\n\nI don't disagree, but given that the doctests need to be updated in any case, I don't understand why adding the extra digits is bad and adding `...` is better.  Feel free to open a ticket for it, though!",
    "created_at": "2014-09-12T11:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222811",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@zimmermann6](#comment%3A34):
> > I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

> 
> I refer to changeset `e216b6f` in comment [comment:27].

The only change made by that changeset in the `french_book` directory is

```diff
--- a/src/sage/tests/french_book/integration_doctest.py
+++ b/src/sage/tests/french_book/integration_doctest.py
@@ -180,7 +180,7 @@ Sage example in ./integration.tex, line 838::
 
     sage: t, y = var('t, y')
     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
-    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]
 
     Sage example in ./integration.tex, line 861::
 
```
The (earlier) commit that added the extra digits was 7cb1dd50 in #16858.
> Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).
> 
> The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9.

OK, but surely a doctest where the only change is an increased precision should be classified as "still working"?  In any case, a user who types the doctest in a newer version of Sage will also see the extra digits.
> Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.

I don't disagree, but given that the doctests need to be updated in any case, I don't understand why adding the extra digits is bad and adding `...` is better.  Feel free to open a ticket for it, though!



---

archive/issue_comments_222812.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.\n\nPaul",
    "created_at": "2014-09-12T11:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222812",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:36" align="right">comment:36</div>

I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.

Paul



---

archive/issue_comments_222813.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@zimmermann6](#comment%3A36):\n> I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.\n\nI agree with Peter Bruin that printing a few less or more digits doesn't really \"break\" the test. Even if the goal of reproducing the *exact output* of the book cannot be achieved, at least the goal of having output *reasonably close* to the book can be maintained.",
    "created_at": "2014-09-12T11:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222813",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@zimmermann6](#comment%3A36):
> I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.

I agree with Peter Bruin that printing a few less or more digits doesn't really "break" the test. Even if the goal of reproducing the *exact output* of the book cannot be achieved, at least the goal of having output *reasonably close* to the book can be maintained.



---

archive/issue_comments_222814.json:
```json
{
    "body": "Changed branch from **[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)** to **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**",
    "created_at": "2014-09-16T18:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-222814",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)** to **[`e216b6f`](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)**



---

archive/issue_events_239551.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-16T18:47:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239551"
}
```



---

archive/issue_events_239552.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5deda28f3e382b1d26f346d47086428a2380fa00",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-09-16T18:47:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-239552"
}
```
