# Issue 16908: Upgrade Maxima to 5.34.1

archive/issues_016671.json:
```json
{
    "body": "Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n\nThis appears to fix #14965.\n\n**CC:**  @zimmermann6 jpflori @williamstein\n\n**Keywords:** maxima\n\n**Branch/Commit:** [e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Peter Bruin\n\nIssue created by migration from https://trac.sagemath.org/ticket/16908\n\n",
    "closed_at": "2014-09-16T18:47:42Z",
    "created_at": "2014-08-29T23:29:15Z",
    "labels": [
        "component: packages: standard",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Upgrade Maxima to 5.34.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16908",
    "user": "https://github.com/pjbruin"
}
```
Tarball: â€‹http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2

This appears to fix #14965.

**CC:**  @zimmermann6 jpflori @williamstein

**Keywords:** maxima

**Branch/Commit:** [e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)

**Reviewer:** Jeroen Demeyer

**Author:** Peter Bruin

Issue created by migration from https://trac.sagemath.org/ticket/16908





---

archive/issue_comments_225264.json:
```json
{
    "body": "<a id='comment:1'></a>\nAny tix this fixes, btw?",
    "created_at": "2014-08-31T01:19:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225264",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
Any tix this fixes, btw?



---

archive/issue_comments_225265.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [kcrisman](#comment%3A1):\n> Any tix this fixes, btw?\n\nI haven't had the time to investigate this in detail.  It doesn't fix any of the tickets listed in #13973 that are still open, but I haven't looked at other open Maxima-related tickets.  The update shouldn't be too difficult, but there are some problems, such as my fix for the matrix exponentation bug (see #13973) not working anymore.",
    "created_at": "2014-09-03T11:55:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225265",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:2'></a>
Replying to [kcrisman](#comment%3A1):
> Any tix this fixes, btw?

I haven't had the time to investigate this in detail.  It doesn't fix any of the tickets listed in #13973 that are still open, but I haven't looked at other open Maxima-related tickets.  The update shouldn't be too difficult, but there are some problems, such as my fix for the matrix exponentation bug (see #13973) not working anymore.



---

archive/issue_comments_225266.json:
```json
{
    "body": "<a id='comment:3'></a>\nChangelog is here: https://sourceforge.net/p/maxima/code/ci/master/tree/ChangeLog-5.34",
    "created_at": "2014-09-04T08:39:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225266",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Changelog is here: https://sourceforge.net/p/maxima/code/ci/master/tree/ChangeLog-5.34



---

archive/issue_comments_225267.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [kcrisman](#comment%3A1):\n> Any tix this fixes, btw?\n\n#14965 claims to be fixed by Maxima 5.34",
    "created_at": "2014-09-04T19:55:55Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225267",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [kcrisman](#comment%3A1):
> Any tix this fixes, btw?

#14965 claims to be fixed by Maxima 5.34



---

archive/issue_comments_225268.json:
```json
{
    "body": "<a id='comment:5'></a>\nHow many patches can we drop with this version?",
    "created_at": "2014-09-04T21:51:19Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225268",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
How many patches can we drop with this version?



---

archive/issue_events_151756.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-05T08:12:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151756"
}
```



---

archive/issue_comments_225269.json:
```json
{
    "body": "**Branch:** [u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)",
    "created_at": "2014-09-05T08:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225269",
    "user": "https://github.com/pjbruin"
}
```

**Branch:** [u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)



---

archive/issue_comments_225270.json:
```json
{
    "body": "**Author:** Peter Bruin",
    "created_at": "2014-09-05T08:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225270",
    "user": "https://github.com/pjbruin"
}
```

**Author:** Peter Bruin



---

archive/issue_comments_225271.json:
```json
{
    "body": "**Commit:** [0fd6543a6f86c8493002641d79c91d05bf28a5bc](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)",
    "created_at": "2014-09-05T08:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225271",
    "user": "https://github.com/pjbruin"
}
```

**Commit:** [0fd6543a6f86c8493002641d79c91d05bf28a5bc](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)



---

archive/issue_comments_225272.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jdemeyer](#comment%3A4):\n> Replying to [kcrisman](#comment%3A1):\n> > Any tix this fixes, btw?\n\n> #14965 claims to be fixed by Maxima 5.34\n\nIt does appear to be fixed; I am not getting an error, but haven't checked if the answer is correct.\n\n[Edit: actually I couldn't reproduce the error with Maxima 5.33.0.]",
    "created_at": "2014-09-05T08:13:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225272",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:7'></a>
Replying to [jdemeyer](#comment%3A4):
> Replying to [kcrisman](#comment%3A1):
> > Any tix this fixes, btw?

> #14965 claims to be fixed by Maxima 5.34

It does appear to be fixed; I am not getting an error, but haven't checked if the answer is correct.

[Edit: actually I couldn't reproduce the error with Maxima 5.33.0.]



---

archive/issue_comments_225273.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [fbissey](#comment%3A5):\n> How many patches can we drop with this version?\n\nThis branch removes two patches and updates another one.\n\n[Edit: the one added patch was not necessary after all, there was a better solution.]",
    "created_at": "2014-09-05T08:14:17Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225273",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:8'></a>
Replying to [fbissey](#comment%3A5):
> How many patches can we drop with this version?

This branch removes two patches and updates another one.

[Edit: the one added patch was not necessary after all, there was a better solution.]



---

archive/issue_comments_225274.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have tested this (and all tests pass) on x86_64 and ARM 32-bit.",
    "created_at": "2014-09-05T08:15:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225274",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:9'></a>
I have tested this (and all tests pass) on x86_64 and ARM 32-bit.



---

archive/issue_comments_225275.json:
```json
{
    "body": "**Changing commit** from \"[0fd6543a6f86c8493002641d79c91d05bf28a5bc](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)\" to \"[d83032da5bce8c654c9cbcda59da215ce1cb0083](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)\".",
    "created_at": "2014-09-06T10:53:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0fd6543a6f86c8493002641d79c91d05bf28a5bc](https://github.com/sagemath/sagetrac-mirror/commit/0fd6543a6f86c8493002641d79c91d05bf28a5bc)" to "[d83032da5bce8c654c9cbcda59da215ce1cb0083](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)".



---

archive/issue_comments_225276.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083\">d83032d</a></td><td><code>Trac 16908: replace compile-verbose.patch by suitable fixes in Sage code</code></td></tr></table>\n",
    "created_at": "2014-09-06T10:53:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083">d83032d</a></td><td><code>Trac 16908: replace compile-verbose.patch by suitable fixes in Sage code</code></td></tr></table>




---

archive/issue_events_151757.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "rename": {
        "from": "Upgrade Maxima to 5.34.0",
        "to": "Upgrade Maxima to 5.34.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151757"
}
```



---

archive/issue_comments_225277.json:
```json
{
    "body": "<a id='comment:12'></a>\nMaxima 5.34.1 has been released, an updated branch is coming soon.",
    "created_at": "2014-09-10T08:24:34Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225277",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:12'></a>
Maxima 5.34.1 has been released, an updated branch is coming soon.



---

archive/issue_comments_225278.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Tarball: \u200bhttp://homepages.warwick.ac.uk/staff/P.Bruin/sage/maxima-5.34.0.tar.bz2\n+Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n``````\n",
    "created_at": "2014-09-10T08:24:34Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225278",
    "user": "https://github.com/pjbruin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Tarball: â€‹http://homepages.warwick.ac.uk/staff/P.Bruin/sage/maxima-5.34.0.tar.bz2
+Tarball: â€‹http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2
``````




---

archive/issue_events_151758.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151758"
}
```



---

archive/issue_events_151759.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T08:24:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151759"
}
```



---

archive/issue_comments_225279.json:
```json
{
    "body": "**Changing commit** from \"[d83032da5bce8c654c9cbcda59da215ce1cb0083](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)\" to \"[44c889e34cb18fadf29e8142b849a11c62a3f2c7](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)\".",
    "created_at": "2014-09-10T09:17:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225279",
    "user": "https://github.com/pjbruin"
}
```

**Changing commit** from "[d83032da5bce8c654c9cbcda59da215ce1cb0083](https://github.com/sagemath/sagetrac-mirror/commit/d83032da5bce8c654c9cbcda59da215ce1cb0083)" to "[44c889e34cb18fadf29e8142b849a11c62a3f2c7](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)".



---

archive/issue_comments_225280.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Tarball: \u200bhttp://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2\n+\n+This appears to fix #14965.\n``````\n",
    "created_at": "2014-09-10T09:17:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225280",
    "user": "https://github.com/pjbruin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Tarball: â€‹http://pub.math.leidenuniv.nl/~bruinpj/sage/maxima-5.34.1.tar.bz2
+
+This appears to fix #14965.
``````




---

archive/issue_comments_225281.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)\" to \"[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)\".",
    "created_at": "2014-09-10T09:17:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225281",
    "user": "https://github.com/pjbruin"
}
```

**Changing branch** from "[u/pbruin/16908-maxima-5.34.0](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.0)" to "[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)".



---

archive/issue_events_151760.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T09:17:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151760"
}
```



---

archive/issue_events_151761.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-10T09:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151761"
}
```



---

archive/issue_comments_225282.json:
```json
{
    "body": "<a id='comment:14'></a>\nCould you justify this change?\n\n```diff\n- sage: latex(integrate(1/(1+sqrt(x)),x,0,1))\n- \\int_{0}^{1} \\frac{1}{\\sqrt{x} + 1}\\,{d x}\n```\n\nI think the purpose of this test is to show an integral that Maxima cannot compute. You could replace this by a different integral...",
    "created_at": "2014-09-10T12:13:53Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225282",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Could you justify this change?

```diff
- sage: latex(integrate(1/(1+sqrt(x)),x,0,1))
- \int_{0}^{1} \frac{1}{\sqrt{x} + 1}\,{d x}
```

I think the purpose of this test is to show an integral that Maxima cannot compute. You could replace this by a different integral...



---

archive/issue_comments_225283.json:
```json
{
    "body": "<a id='comment:15'></a>\nMaxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.",
    "created_at": "2014-09-10T12:20:04Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225283",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:15'></a>
Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.



---

archive/issue_comments_225284.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [pbruin](#comment%3A15):\n> Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.\n\nWell, the 2 doctests are somewhat different, one calls directly `print_latex` while the removed one uses `latex()`. So yes, please but back a second doctests.\n\nApart from this trivial thing, this ticket looks good to me.",
    "created_at": "2014-09-10T12:27:53Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225284",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [pbruin](#comment%3A15):
> Maxima is now able to compute the integral (it equals 2 - 2 log(2)), so the doctest did not test the `_print_latex_()` method anymore.  Of course we could put in another doctest with an integral that Maxima isn't able to evaluate, but I thought this `_print_latex_()` method was simple enough that it wasn't necessary to keep a second doctest.

Well, the 2 doctests are somewhat different, one calls directly `print_latex` while the removed one uses `latex()`. So yes, please but back a second doctests.

Apart from this trivial thing, this ticket looks good to me.



---

archive/issue_comments_225285.json:
```json
{
    "body": "**Changing commit** from \"[44c889e34cb18fadf29e8142b849a11c62a3f2c7](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)\" to \"[2785ccc9b069cb55d804e43a506be7460abd8cd1](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)\".",
    "created_at": "2014-09-10T12:59:23Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[44c889e34cb18fadf29e8142b849a11c62a3f2c7](https://github.com/sagemath/sagetrac-mirror/commit/44c889e34cb18fadf29e8142b849a11c62a3f2c7)" to "[2785ccc9b069cb55d804e43a506be7460abd8cd1](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)".



---

archive/issue_comments_225286.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1\">2785ccc</a></td><td><code>Trac 16908: upgrade Maxima to 5.34.1</code></td></tr></table>\n",
    "created_at": "2014-09-10T12:59:23Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1">2785ccc</a></td><td><code>Trac 16908: upgrade Maxima to 5.34.1</code></td></tr></table>




---

archive/issue_comments_225287.json:
```json
{
    "body": "<a id='comment:18'></a>\nI amended the existing commit instead of adding a new one, because the commit message mentioned the wrong Maxima version.  I added the following doctests:\n\n```diff\n--- a/src/sage/symbolic/integration/integral.py\n+++ b/src/sage/symbolic/integration/integral.py\n@@ -116,6 +116,8 @@ class IndefiniteIntegral(BuiltinFunction):\n             sage: f = function('f')\n             sage: print_latex(f(x),x)\n             '\\\\int f\\\\left(x\\\\right)\\\\,{d x}'\n+            sage: latex(integrate(tan(x)/x, x))\n+            \\int \\frac{\\tan\\left(x\\right)}{x}\\,{d x}\n         \"\"\"\n         from sage.misc.latex import latex\n         if not is_SymbolicVariable(x):\n@@ -236,8 +238,8 @@ class DefiniteIntegral(BuiltinFunction):\n             sage: f = function('f')\n             sage: print_latex(f(x),x,0,1)\n             '\\\\int_{0}^{1} f\\\\left(x\\\\right)\\\\,{d x}'\n-            sage: latex(integrate(1/(1+sqrt(x)),x,0,1))\n-            \\int_{0}^{1} \\frac{1}{\\sqrt{x} + 1}\\,{d x}\n+            sage: latex(integrate(tan(x)/x, x, 0, 1))\n+            \\int_{0}^{1} \\frac{\\tan\\left(x\\right)}{x}\\,{d x}\n         \"\"\"\n         from sage.misc.latex import latex\n         if not is_SymbolicVariable(x):\n```",
    "created_at": "2014-09-10T13:02:08Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225287",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:18'></a>
I amended the existing commit instead of adding a new one, because the commit message mentioned the wrong Maxima version.  I added the following doctests:

```diff
--- a/src/sage/symbolic/integration/integral.py
+++ b/src/sage/symbolic/integration/integral.py
@@ -116,6 +116,8 @@ class IndefiniteIntegral(BuiltinFunction):
             sage: f = function('f')
             sage: print_latex(f(x),x)
             '\\int f\\left(x\\right)\\,{d x}'
+            sage: latex(integrate(tan(x)/x, x))
+            \int \frac{\tan\left(x\right)}{x}\,{d x}
         """
         from sage.misc.latex import latex
         if not is_SymbolicVariable(x):
@@ -236,8 +238,8 @@ class DefiniteIntegral(BuiltinFunction):
             sage: f = function('f')
             sage: print_latex(f(x),x,0,1)
             '\\int_{0}^{1} f\\left(x\\right)\\,{d x}'
-            sage: latex(integrate(1/(1+sqrt(x)),x,0,1))
-            \int_{0}^{1} \frac{1}{\sqrt{x} + 1}\,{d x}
+            sage: latex(integrate(tan(x)/x, x, 0, 1))
+            \int_{0}^{1} \frac{\tan\left(x\right)}{x}\,{d x}
         """
         from sage.misc.latex import latex
         if not is_SymbolicVariable(x):
```



---

archive/issue_events_151762.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-10T14:40:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151762"
}
```



---

archive/issue_events_151763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-09-10T14:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151763"
}
```



---

archive/issue_comments_225288.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2014-09-10T14:40:36Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225288",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_225289.json:
```json
{
    "body": "<a id='comment:20'></a>\nConflicts with #16651 or #16858",
    "created_at": "2014-09-10T21:58:28Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225289",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
Conflicts with #16651 or #16858



---

archive/issue_events_151764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-10T21:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151764"
}
```



---

archive/issue_events_151765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-10T21:58:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151765"
}
```



---

archive/issue_comments_225290.json:
```json
{
    "body": "**Changing commit** from \"[2785ccc9b069cb55d804e43a506be7460abd8cd1](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)\" to \"[b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)\".",
    "created_at": "2014-09-11T11:38:25Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2785ccc9b069cb55d804e43a506be7460abd8cd1](https://github.com/sagemath/sagetrac-mirror/commit/2785ccc9b069cb55d804e43a506be7460abd8cd1)" to "[b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)".



---

archive/issue_comments_225291.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38a52cfb78fbe0ebd5221b5d52bb511210084aaf\">38a52cf</a></td><td><code>Make the to_poly_solve option work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2573b80af24cf5938c089758dff7304ca53c9569\">2573b80</a></td><td><code>fix two trivial doctest failures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fb6bee3a7ef1f692656f615f9361c9e52afeec1\">6fb6bee</a></td><td><code>Use for loop instead of while</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c534e55a3cdc0f2dc13262aea91d8a0afd553492\">c534e55</a></td><td><code>Merge branch 'develop' into t/16651/buggy_to_poly_solve</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a801e64f1802c2133c2f362ab84aa122c54530b5\">a801e64</a></td><td><code>16651: reviewer's patch: language refinements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fa0110eccea00366f326a1cf8da880617eccd32\">1fa0110</a></td><td><code>Docstring fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc\">b8babff</a></td><td><code>Merge branch 'u/vbraun/buggy_to_poly_solve' of ssh://trac.sagemath.org/sage into ticket/16908-maxima-5.34.1</code></td></tr></table>\n",
    "created_at": "2014-09-11T11:38:25Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38a52cfb78fbe0ebd5221b5d52bb511210084aaf">38a52cf</a></td><td><code>Make the to_poly_solve option work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2573b80af24cf5938c089758dff7304ca53c9569">2573b80</a></td><td><code>fix two trivial doctest failures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fb6bee3a7ef1f692656f615f9361c9e52afeec1">6fb6bee</a></td><td><code>Use for loop instead of while</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c534e55a3cdc0f2dc13262aea91d8a0afd553492">c534e55</a></td><td><code>Merge branch 'develop' into t/16651/buggy_to_poly_solve</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a801e64f1802c2133c2f362ab84aa122c54530b5">a801e64</a></td><td><code>16651: reviewer's patch: language refinements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fa0110eccea00366f326a1cf8da880617eccd32">1fa0110</a></td><td><code>Docstring fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc">b8babff</a></td><td><code>Merge branch 'u/vbraun/buggy_to_poly_solve' of ssh://trac.sagemath.org/sage into ticket/16908-maxima-5.34.1</code></td></tr></table>




---

archive/issue_events_151766.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-11T11:38:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151766"
}
```



---

archive/issue_events_151767.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-11T11:38:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151767"
}
```



---

archive/issue_comments_225292.json:
```json
{
    "body": "<a id='comment:23'></a>\nI get various doctest failures on top of 6.4.beta3:\n\n```\nsage -t --long --warn-long 40.1 src/sage/calculus/desolvers.py  # 2 doctests failed\nsage -t --long --warn-long 40.1 src/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/tests/french_book/integration_doctest.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/modules/free_module_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/symbolic/relation.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/functions/other.py  # 1 doctest failed\nsage -t --long --warn-long 40.1 src/sage/functions/special.py  # 2 doctests failed\n```\nLooks like it is all due to changed precision of floats",
    "created_at": "2014-09-11T14:34:55Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225292",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
I get various doctest failures on top of 6.4.beta3:

```
sage -t --long --warn-long 40.1 src/sage/calculus/desolvers.py  # 2 doctests failed
sage -t --long --warn-long 40.1 src/sage/rings/number_field/number_field_element.pyx  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/tests/french_book/integration_doctest.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/modules/free_module_element.pyx  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/symbolic/relation.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/functions/other.py  # 1 doctest failed
sage -t --long --warn-long 40.1 src/sage/functions/special.py  # 2 doctests failed
```
Looks like it is all due to changed precision of floats



---

archive/issue_events_151768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-11T14:35:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151768"
}
```



---

archive/issue_events_151769.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-11T14:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151769"
}
```



---

archive/issue_comments_225293.json:
```json
{
    "body": "<a id='comment:25'></a>\nI'll have a look at the doctest failures.",
    "created_at": "2014-09-12T07:51:51Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225293",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
I'll have a look at the doctest failures.



---

archive/issue_comments_225294.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jdemeyer](#comment%3A25):\n> I'll have a look at the doctest failures.\n\nThere is no need to, I just fixed them and only have to test them on 32-bit.",
    "created_at": "2014-09-12T07:56:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225294",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:26'></a>
Replying to [jdemeyer](#comment%3A25):
> I'll have a look at the doctest failures.

There is no need to, I just fixed them and only have to test them on 32-bit.



---

archive/issue_comments_225295.json:
```json
{
    "body": "**Changing commit** from \"[b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)\" to \"[e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)\".",
    "created_at": "2014-09-12T07:57:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc](https://github.com/sagemath/sagetrac-mirror/commit/b8babffdf9b44a53c1ea4ebfecf0b3cc0e1de0bc)" to "[e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)".



---

archive/issue_comments_225296.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dc99734b070f8d411d95de7ad962ee825ca0934\">5dc9973</a></td><td><code>Merge branch 'develop' into ticket/16908-maxima-5.34.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245\">e216b6f</a></td><td><code>Trac 16908: correct precision in doctests</code></td></tr></table>\n",
    "created_at": "2014-09-12T07:57:22Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dc99734b070f8d411d95de7ad962ee825ca0934">5dc9973</a></td><td><code>Merge branch 'develop' into ticket/16908-maxima-5.34.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245">e216b6f</a></td><td><code>Trac 16908: correct precision in doctests</code></td></tr></table>




---

archive/issue_comments_225297.json:
```json
{
    "body": "<a id='comment:28'></a>\nAnother trivial change to a French book test.",
    "created_at": "2014-09-12T07:59:29Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225297",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Another trivial change to a French book test.



---

archive/issue_comments_225298.json:
```json
{
    "body": "<a id='comment:29'></a>\nDo you understand why floats from Maxima are now printed with one digit less of precision???",
    "created_at": "2014-09-12T08:01:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225298",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Do you understand why floats from Maxima are now printed with one digit less of precision???



---

archive/issue_comments_225299.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jdemeyer](#comment%3A29):\n> Do you understand why floats from Maxima are now printed with one digit less of precision???\n\nThis is because of recent changes (between 5.33.0 and 5.34.0) to Maxima's `exploden-format-float` function.  In fact, on certain Lisp implementations and platforms (including ECL on x86_64), Maxima used to often print one digit too many; see #15921 for details.",
    "created_at": "2014-09-12T08:12:39Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225299",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:30'></a>
Replying to [jdemeyer](#comment%3A29):
> Do you understand why floats from Maxima are now printed with one digit less of precision???

This is because of recent changes (between 5.33.0 and 5.34.0) to Maxima's `exploden-format-float` function.  In fact, on certain Lisp implementations and platforms (including ECL on x86_64), Maxima used to often print one digit too many; see #15921 for details.



---

archive/issue_comments_225300.json:
```json
{
    "body": "<a id='comment:31'></a>\nAll relevant doctests (the failed ones above, and everything in `sage/interfaces/maxima_*`, `sage/calculus`, `sage/functions`, `sage/symbolic`) pass on x86_64 and ARM.  Since I ran all long doctests before, I now leave it to the buildbot to catch any unlikely remaining failures...",
    "created_at": "2014-09-12T09:38:50Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225300",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:31'></a>
All relevant doctests (the failed ones above, and everything in `sage/interfaces/maxima_*`, `sage/calculus`, `sage/functions`, `sage/symbolic`) pass on x86_64 and ARM.  Since I ran all long doctests before, I now leave it to the buildbot to catch any unlikely remaining failures...



---

archive/issue_events_151770.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-12T09:38:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151770"
}
```



---

archive/issue_events_151771.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-09-12T09:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151771"
}
```



---

archive/issue_comments_225301.json:
```json
{
    "body": "<a id='comment:32'></a>\nI'm not happy with the changes in the French book tests. In some places you use `...`\nwhich should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,\nand might fail with future versions, for example:\n\n```\n     sage: t, y = var('t, y')\n     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n-    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]\n+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n```\nPaul",
    "created_at": "2014-09-12T09:40:47Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225301",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:32'></a>
I'm not happy with the changes in the French book tests. In some places you use `...`
which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,
and might fail with future versions, for example:

```
     sage: t, y = var('t, y')
     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
-    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]
+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
```
Paul



---

archive/issue_comments_225302.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [zimmerma](#comment%3A32):\n> I'm not happy with the changes in the French book tests.\n\nI assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\n> In some places you use `...`\n> which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,\n> and might fail with future versions, for example:\n> \n> ```\n>      sage: t, y = var('t, y')\n>      sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n> -    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]\n> +    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n> ```\n\nDo I understand correctly that you propose to always use `...` and only keep the minimum among the various numbers of digits that are output by all existing versions of Sage?\n\nCould you explain more precisely why you object to showing the output of the doctests with the (increased) precision used by the current Sage version?  Does it cause more work for you to keep them updated, or do you expect it may cause confusion among users with different versions of Sage?",
    "created_at": "2014-09-12T10:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225302",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:33'></a>
Replying to [zimmerma](#comment%3A32):
> I'm not happy with the changes in the French book tests.

I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

> In some places you use `...`
> which should make tests pass both with the previous versions of Sage (this should be checked), in some places more digits are printed, which will fail with previous versions,
> and might fail with future versions, for example:
> 
> ```
>      sage: t, y = var('t, y')
>      sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
> -    [[0, 1], [0.5, 1.12419127425], [1.0, 1.46159016229]]
> +    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
> ```

Do I understand correctly that you propose to always use `...` and only keep the minimum among the various numbers of digits that are output by all existing versions of Sage?

Could you explain more precisely why you object to showing the output of the doctests with the (increased) precision used by the current Sage version?  Does it cause more work for you to keep them updated, or do you expect it may cause confusion among users with different versions of Sage?



---

archive/issue_comments_225303.json:
```json
{
    "body": "<a id='comment:34'></a>\n> I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\nI refer to changeset `e216b6f` in comment [comment:27].\n\nYes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).\n\nThe intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9. Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.\n\nPaul",
    "created_at": "2014-09-12T10:55:03Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225303",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:34'></a>
> I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

I refer to changeset `e216b6f` in comment [comment:27].

Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).

The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9. Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.

Paul



---

archive/issue_comments_225304.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [zimmerma](#comment%3A34):\n> > I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.\n\n> \n> I refer to changeset `e216b6f` in comment [comment:27].\n\nThe only change made by that changeset in the `french_book` directory is\n\n```diff\n--- a/src/sage/tests/french_book/integration_doctest.py\n+++ b/src/sage/tests/french_book/integration_doctest.py\n@@ -180,7 +180,7 @@ Sage example in ./integration.tex, line 838::\n \n     sage: t, y = var('t, y')\n     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)\n-    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]\n+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]\n \n     Sage example in ./integration.tex, line 861::\n \n```\nThe (earlier) commit that added the extra digits was 7cb1dd50 in #16858.\n> Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).\n> \n> The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9.\n\nOK, but surely a doctest where the only change is an increased precision should be classified as \"still working\"?  In any case, a user who types the doctest in a newer version of Sage will also see the extra digits.\n> Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.\n\nI don't disagree, but given that the doctests need to be updated in any case, I don't understand why adding the extra digits is bad and adding `...` is better.  Feel free to open a ticket for it, though!",
    "created_at": "2014-09-12T11:12:37Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225304",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:35'></a>
Replying to [zimmerma](#comment%3A34):
> > I assume you are mostly referring to the changes made by #16858; this ticket only removes one digit.

> 
> I refer to changeset `e216b6f` in comment [comment:27].

The only change made by that changeset in the `french_book` directory is

```diff
--- a/src/sage/tests/french_book/integration_doctest.py
+++ b/src/sage/tests/french_book/integration_doctest.py
@@ -180,7 +180,7 @@ Sage example in ./integration.tex, line 838::
 
     sage: t, y = var('t, y')
     sage: desolve_rk4(t*y*(2-y), y, ics=[0,1], end_points=[0, 1], step=0.5)
-    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.4615901622888245]]
+    [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]
 
     Sage example in ./integration.tex, line 861::
 
```
The (earlier) commit that added the extra digits was 7cb1dd50 in #16858.
> Yes it would be better to only keep the minimum number of digits output by all versions of Sage (since the one we use in our book, i.e., 5.9).
> 
> The intent of those doctests is to only to check the examples that were **printed** in the book still work in versions of Sage after 5.9.

OK, but surely a doctest where the only change is an increased precision should be classified as "still working"?  In any case, a user who types the doctest in a newer version of Sage will also see the extra digits.
> Thus it makes no sense to add more digits than those that were actually printed on http://sagebook.gforge.inria.fr/. Any doctests with a different intent should go elsewhere in my opinion.

I don't disagree, but given that the doctests need to be updated in any case, I don't understand why adding the extra digits is bad and adding `...` is better.  Feel free to open a ticket for it, though!



---

archive/issue_comments_225305.json:
```json
{
    "body": "<a id='comment:36'></a>\nI won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.\n\nPaul",
    "created_at": "2014-09-12T11:25:51Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225305",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:36'></a>
I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.

Paul



---

archive/issue_comments_225306.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [zimmerma](#comment%3A36):\n> I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.\n\nI agree with Peter Bruin that printing a few less or more digits doesn't really \"break\" the test. Even if the goal of reproducing the *exact output* of the book cannot be achieved, at least the goal of having output *reasonably close* to the book can be maintained.",
    "created_at": "2014-09-12T11:39:12Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225306",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Replying to [zimmerma](#comment%3A36):
> I won't spend more time on this, please remove the tests corresponding to examples in our book that you break, it makes no sense to maintain them since the original goal is lost.

I agree with Peter Bruin that printing a few less or more digits doesn't really "break" the test. Even if the goal of reproducing the *exact output* of the book cannot be achieved, at least the goal of having output *reasonably close* to the book can be maintained.



---

archive/issue_comments_225307.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)\" to \"[e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)\".",
    "created_at": "2014-09-16T18:47:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16908#issuecomment-225307",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/pbruin/16908-maxima-5.34.1](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/16908-maxima-5.34.1)" to "[e216b6fd358015ff4d22a11e24ed75d491121245](https://github.com/sagemath/sagetrac-mirror/commit/e216b6fd358015ff4d22a11e24ed75d491121245)".



---

archive/issue_events_151772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-09-16T18:47:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151772"
}
```



---

archive/issue_events_151773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5deda28f3e382b1d26f346d47086428a2380fa00",
    "created_at": "2014-09-16T18:47:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16908#event-151773"
}
```
