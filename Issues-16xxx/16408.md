# Issue 16408: Map database

archive/issues_016171.json:
```json
{
    "body": "CC:  pdehaye stumpc5 vivianepons @mantepse\n\nThe current implementation of `combinatorial_map` modifies some methods of objects in order to tag them as being a \"combinatorial map\" (it might be not the case anymore with #16410). In this ticket we propose an implementation of a database (`sage.databases.map_database`) and a decorator (``@`register_method_as_map`) which register the methods but do not modify them. Contrarily to the previous implementation, the version proposed here is centralized. Which is actually consistent with the fact that we want to do some queries.\n\nProblems:\n- the database is built in two times. At startup, (more precisely when the code is executed) the decorator fills a list of constructions. Then, at the first call of `MapDatabase()` the corresponding maps are actually built.\n- some objects have no general enough parents: `AlternatingSignMatrix`, `Core`, `OrderedSetPartition` and the more delicate `Poset`, `Graph` (Vincent: I think that we might fix the three first in some tickets and use a hack for the two last with `Set_PythonType`).\n\nFurther development:\n- add more information into morphisms (especially injectivity/surjectivity, order for endomorphism, ...)\n\nIssue created by migration from https://trac.sagemath.org/ticket/16408\n\n",
    "created_at": "2014-05-29T08:11:56Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Map database",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16408",
    "user": "https://github.com/videlec"
}
```
CC:  pdehaye stumpc5 vivianepons @mantepse

The current implementation of `combinatorial_map` modifies some methods of objects in order to tag them as being a "combinatorial map" (it might be not the case anymore with #16410). In this ticket we propose an implementation of a database (`sage.databases.map_database`) and a decorator (``@`register_method_as_map`) which register the methods but do not modify them. Contrarily to the previous implementation, the version proposed here is centralized. Which is actually consistent with the fact that we want to do some queries.

Problems:
- the database is built in two times. At startup, (more precisely when the code is executed) the decorator fills a list of constructions. Then, at the first call of `MapDatabase()` the corresponding maps are actually built.
- some objects have no general enough parents: `AlternatingSignMatrix`, `Core`, `OrderedSetPartition` and the more delicate `Poset`, `Graph` (Vincent: I think that we might fix the three first in some tickets and use a hack for the two last with `Set_PythonType`).

Further development:
- add more information into morphisms (especially injectivity/surjectivity, order for endomorphism, ...)

Issue created by migration from https://trac.sagemath.org/ticket/16408





---

archive/issue_comments_210905.json:
```json
{
    "body": "This looks great! Thanks Vincent for doing this.",
    "created_at": "2014-05-29T08:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16408#issuecomment-210905",
    "user": "https://trac.sagemath.org/admin/accounts/users/pdehaye"
}
```

This looks great! Thanks Vincent for doing this.



---

archive/issue_comments_210906.json:
```json
{
    "body": "I will not work on this anymore before having some **constructive** comments. Or even better, somebody else contribution. If you apply my branch the file `sage/combinat/combinatorial_map.py` becomes almost empty and I might fix it later on.\n\nVincent\n\n---\nNew commits:",
    "created_at": "2014-05-29T20:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16408#issuecomment-210906",
    "user": "https://github.com/videlec"
}
```

I will not work on this anymore before having some **constructive** comments. Or even better, somebody else contribution. If you apply my branch the file `sage/combinat/combinatorial_map.py` becomes almost empty and I might fix it later on.

Vincent

---
New commits:



---

archive/issue_events_048296.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16408",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16408#event-48296"
}
```
