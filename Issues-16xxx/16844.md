# Issue 16844: matrix constructor of free Z-module homomorphism

archive/issues_016607.json:
```json
{
    "body": "\n```\nH = Hom(ZZ^2, ZZ^2)\nsage: H.an_element()\nFree module morphism defined by the matrix\n[2 0]\n[0 2]\nDomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nCodomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nsage: f = H.an_element()\nsage: f.matrix\n<bound method FreeModuleMorphism.matrix of Free module morphism defined by the matrix\n[2 0]\n[0 2]\nDomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nCodomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring>\nsage: matrix(f)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-5-2da0ca3992a5> in <module>()\n----> 1 matrix(f)\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/matrix/constructor.pyc in _matrix_constructor(*args, **kwds)\n    711                 entries = args[0]\n    712             else:\n--> 713                 raise ValueError(\"Invalid matrix constructor.  Type matrix? for help\")\n    714     else:\n    715         raise ValueError(\"Invalid matrix constructor.  Type matrix? for help\")\nValueError: Invalid matrix constructor.  Type matrix? for help\"\n```\n\nTo modify matrix constructor of morphism of free modules\n\n**Assignee:** pooja\n\n**CC:**  @tscrim\n\n**Branch/Commit:** [e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)\n\n**Reviewer:** Darij Grinberg\n\n**Author:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/16844\n\n",
    "closed_at": "2015-02-18T01:26:41Z",
    "created_at": "2014-08-17T09:19:54Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "matrix constructor of free Z-module homomorphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16844",
    "user": "https://trac.sagemath.org/admin/accounts/users/pooja"
}
```

```
H = Hom(ZZ^2, ZZ^2)
sage: H.an_element()
Free module morphism defined by the matrix
[2 0]
[0 2]
Domain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
Codomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
sage: f = H.an_element()
sage: f.matrix
<bound method FreeModuleMorphism.matrix of Free module morphism defined by the matrix
[2 0]
[0 2]
Domain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
Codomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring>
sage: matrix(f)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-5-2da0ca3992a5> in <module>()
----> 1 matrix(f)

/Applications/sage/local/lib/python2.7/site-packages/sage/matrix/constructor.pyc in _matrix_constructor(*args, **kwds)
    711                 entries = args[0]
    712             else:
--> 713                 raise ValueError("Invalid matrix constructor.  Type matrix? for help")
    714     else:
    715         raise ValueError("Invalid matrix constructor.  Type matrix? for help")
ValueError: Invalid matrix constructor.  Type matrix? for help"
```

To modify matrix constructor of morphism of free modules

**Assignee:** pooja

**CC:**  @tscrim

**Branch/Commit:** [e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)

**Reviewer:** Darij Grinberg

**Author:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/16844





---

archive/issue_comments_223876.json:
```json
{
    "body": "**Commit:** [1c7938a0fec7562e351e007d57593992453b03d0](https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0)",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223876",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [1c7938a0fec7562e351e007d57593992453b03d0](https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0)



---

archive/issue_comments_223877.json:
```json
{
    "body": "**Branch:** [public/linear_algebra/matrix_constructor_module_morphism-16844](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_constructor_module_morphism-16844)",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223877",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/linear_algebra/matrix_constructor_module_morphism-16844](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_constructor_module_morphism-16844)



---

archive/issue_comments_223878.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0\">1c7938a</a></td><td><code>Added `_matrix_` method to MatrixMorphism_abstract.</code></td></tr></table>\n",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223878",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0">1c7938a</a></td><td><code>Added `_matrix_` method to MatrixMorphism_abstract.</code></td></tr></table>




---

archive/issue_comments_223879.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223879",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_events_151128.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-01-26T03:46:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16844#event-151128"
}
```



---

archive/issue_comments_223880.json:
```json
{
    "body": "<a id='comment:2'></a>\nNice, but I don't like the fact that you can change `f.matrix()` and thus get the original `f` changed. Can you somehow clone the matrix?",
    "created_at": "2015-02-05T14:12:40Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223880",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>
Nice, but I don't like the fact that you can change `f.matrix()` and thus get the original `f` changed. Can you somehow clone the matrix?



---

archive/issue_comments_223881.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c124f3fbf130d769270ecf31e93909d1764edab1\">c124f3f</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of trac.sagemath.org:sage into public/linear_algebra/matrix_constructor_module_morphism-16844</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4\">fa7f1df</a></td><td><code>Make matrix morphisms immutable</code></td></tr></table>\n",
    "created_at": "2015-02-07T12:19:11Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c124f3fbf130d769270ecf31e93909d1764edab1">c124f3f</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of trac.sagemath.org:sage into public/linear_algebra/matrix_constructor_module_morphism-16844</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4">fa7f1df</a></td><td><code>Make matrix morphisms immutable</code></td></tr></table>




---

archive/issue_comments_223882.json:
```json
{
    "body": "**Changing commit** from \"[1c7938a0fec7562e351e007d57593992453b03d0](https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0)\" to \"[fa7f1df0ea52e8af6486f8286f1119f6d388bda4](https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4)\".",
    "created_at": "2015-02-07T12:19:11Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1c7938a0fec7562e351e007d57593992453b03d0](https://github.com/sagemath/sagetrac-mirror/commit/1c7938a0fec7562e351e007d57593992453b03d0)" to "[fa7f1df0ea52e8af6486f8286f1119f6d388bda4](https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4)".



---

archive/issue_comments_223883.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59\">5d3bdcc</a></td><td><code>Added flag for copying the matrix.</code></td></tr></table>\n",
    "created_at": "2015-02-07T12:22:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59">5d3bdcc</a></td><td><code>Added flag for copying the matrix.</code></td></tr></table>




---

archive/issue_comments_223884.json:
```json
{
    "body": "**Changing commit** from \"[fa7f1df0ea52e8af6486f8286f1119f6d388bda4](https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4)\" to \"[5d3bdcc712cd08629b1eea55ee06570debbe8b59](https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59)\".",
    "created_at": "2015-02-07T12:22:24Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa7f1df0ea52e8af6486f8286f1119f6d388bda4](https://github.com/sagemath/sagetrac-mirror/commit/fa7f1df0ea52e8af6486f8286f1119f6d388bda4)" to "[5d3bdcc712cd08629b1eea55ee06570debbe8b59](https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59)".



---

archive/issue_comments_223885.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe better thing to do IMO was make the matrix stored in that attribute immutable. In particular, it makes a copy of the matrix when making it immutable (if the added flag `copy_matrix` is `True`, which is the default).",
    "created_at": "2015-02-07T12:24:16Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223885",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
The better thing to do IMO was make the matrix stored in that attribute immutable. In particular, it makes a copy of the matrix when making it immutable (if the added flag `copy_matrix` is `True`, which is the default).



---

archive/issue_comments_223886.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13e55d0437227b7c7ecccce4014cc57050bf2079\">13e55d0</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of git://trac.sagemath.org/sage into matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1aadd4d5a1e3d9aaa24290732b75775a8c5aae7\">b1aadd4</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of git://trac.sagemath.org/sage into matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a\">e5d7227</a></td><td><code>doctest</code></td></tr></table>\n",
    "created_at": "2015-02-07T14:33:17Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13e55d0437227b7c7ecccce4014cc57050bf2079">13e55d0</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of git://trac.sagemath.org/sage into matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1aadd4d5a1e3d9aaa24290732b75775a8c5aae7">b1aadd4</a></td><td><code>Merge branch 'public/linear_algebra/matrix_constructor_module_morphism-16844' of git://trac.sagemath.org/sage into matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a">e5d7227</a></td><td><code>doctest</code></td></tr></table>




---

archive/issue_comments_223887.json:
```json
{
    "body": "**Changing commit** from \"[5d3bdcc712cd08629b1eea55ee06570debbe8b59](https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59)\" to \"[e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)\".",
    "created_at": "2015-02-07T14:33:17Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5d3bdcc712cd08629b1eea55ee06570debbe8b59](https://github.com/sagemath/sagetrac-mirror/commit/5d3bdcc712cd08629b1eea55ee06570debbe8b59)" to "[e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)".



---

archive/issue_comments_223888.json:
```json
{
    "body": "**Reviewer:** Darij Grinberg",
    "created_at": "2015-02-07T14:33:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223888",
    "user": "https://github.com/darijgr"
}
```

**Reviewer:** Darij Grinberg



---

archive/issue_comments_223889.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks, looks good to me!",
    "created_at": "2015-02-07T14:33:44Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223889",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>
Thanks, looks good to me!



---

archive/issue_events_151129.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-02-07T14:33:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16844#event-151129"
}
```



---

archive/issue_events_151130.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-02-07T14:33:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16844#event-151130"
}
```



---

archive/issue_comments_223890.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks (and for adding the doctest).",
    "created_at": "2015-02-07T17:44:07Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223890",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Thanks (and for adding the doctest).



---

archive/issue_comments_223891.json:
```json
{
    "body": "**Changing branch** from \"[public/linear_algebra/matrix_constructor_module_morphism-16844](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_constructor_module_morphism-16844)\" to \"[e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)\".",
    "created_at": "2015-02-18T01:26:41Z",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16844#issuecomment-223891",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/linear_algebra/matrix_constructor_module_morphism-16844](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_constructor_module_morphism-16844)" to "[e5d72278727dfc89b73274361c6c273bd064e88a](https://github.com/sagemath/sagetrac-mirror/commit/e5d72278727dfc89b73274361c6c273bd064e88a)".



---

archive/issue_events_151131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T01:26:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16844#event-151131"
}
```



---

archive/issue_events_151132.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T01:26:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16844",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16844#event-151132"
}
```
