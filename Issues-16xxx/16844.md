# Issue 16844: matrix constructor of free Z-module homomorphism

archive/issues_016607.json:
```json
{
    "body": "\n```\nH = Hom(ZZ^2, ZZ^2)\nsage: H.an_element()\nFree module morphism defined by the matrix\n[2 0]\n[0 2]\nDomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nCodomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nsage: f = H.an_element()\nsage: f.matrix\n<bound method FreeModuleMorphism.matrix of Free module morphism defined by the matrix\n[2 0]\n[0 2]\nDomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring\nCodomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring>\nsage: matrix(f)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-5-2da0ca3992a5> in <module>()\n----> 1 matrix(f)\n\n/Applications/sage/local/lib/python2.7/site-packages/sage/matrix/constructor.pyc in _matrix_constructor(*args, **kwds)\n    711                 entries = args[0]\n    712             else:\n--> 713                 raise ValueError(\"Invalid matrix constructor.  Type matrix? for help\")\n    714     else:\n    715         raise ValueError(\"Invalid matrix constructor.  Type matrix? for help\")\nValueError: Invalid matrix constructor.  Type matrix? for help\"\n```\n\nTo modify matrix constructor of morphism of free modules\n\nAssignee: pooja\n\nCC:  @tscrim\n\nBranch/Commit: e5d72278727dfc89b73274361c6c273bd064e88a\n\nReviewer: Darij Grinberg\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16844\n\n",
    "closed_at": "2015-02-18T01:26:41Z",
    "created_at": "2014-08-17T09:19:54Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "matrix constructor of free Z-module homomorphism",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16844",
    "user": "https://trac.sagemath.org/admin/accounts/users/pooja"
}
```

```
H = Hom(ZZ^2, ZZ^2)
sage: H.an_element()
Free module morphism defined by the matrix
[2 0]
[0 2]
Domain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
Codomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
sage: f = H.an_element()
sage: f.matrix
<bound method FreeModuleMorphism.matrix of Free module morphism defined by the matrix
[2 0]
[0 2]
Domain: Ambient free module of rank 2 over the principal ideal domain Integer Ring
Codomain: Ambient free module of rank 2 over the principal ideal domain Integer Ring>
sage: matrix(f)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-5-2da0ca3992a5> in <module>()
----> 1 matrix(f)

/Applications/sage/local/lib/python2.7/site-packages/sage/matrix/constructor.pyc in _matrix_constructor(*args, **kwds)
    711                 entries = args[0]
    712             else:
--> 713                 raise ValueError("Invalid matrix constructor.  Type matrix? for help")
    714     else:
    715         raise ValueError("Invalid matrix constructor.  Type matrix? for help")
ValueError: Invalid matrix constructor.  Type matrix? for help"
```

To modify matrix constructor of morphism of free modules

Assignee: pooja

CC:  @tscrim

Branch/Commit: e5d72278727dfc89b73274361c6c273bd064e88a

Reviewer: Darij Grinberg

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16844





---

archive/issue_comments_281519.json:
```json
{
    "body": "Changing commit from \"\" to \"1c7938a0fec7562e351e007d57593992453b03d0\"",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281519",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "1c7938a0fec7562e351e007d57593992453b03d0"



---

archive/issue_comments_281520.json:
```json
{
    "body": "Changing branch from \"\" to \"public/linear_algebra/matrix_constructor_module_morphism-16844\"",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281520",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/linear_algebra/matrix_constructor_module_morphism-16844"



---

archive/issue_comments_281521.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281521",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_281522.json:
```json
{
    "body": "Changing author from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281522",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Travis Scrimshaw"



---

archive/issue_comments_281523.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-26T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281523",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281524.json:
```json
{
    "body": "<a id='comment:2'></a>Nice, but I don't like the fact that you can change `f.matrix()` and thus get the original `f` changed. Can you somehow clone the matrix?",
    "created_at": "2015-02-05T14:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281524",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>Nice, but I don't like the fact that you can change `f.matrix()` and thus get the original `f` changed. Can you somehow clone the matrix?



---

archive/issue_comments_281525.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-07T12:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281526.json:
```json
{
    "body": "Changing commit from \"1c7938a0fec7562e351e007d57593992453b03d0\" to \"fa7f1df0ea52e8af6486f8286f1119f6d388bda4\"",
    "created_at": "2015-02-07T12:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1c7938a0fec7562e351e007d57593992453b03d0" to "fa7f1df0ea52e8af6486f8286f1119f6d388bda4"



---

archive/issue_comments_281527.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-07T12:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281528.json:
```json
{
    "body": "Changing commit from \"fa7f1df0ea52e8af6486f8286f1119f6d388bda4\" to \"5d3bdcc712cd08629b1eea55ee06570debbe8b59\"",
    "created_at": "2015-02-07T12:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fa7f1df0ea52e8af6486f8286f1119f6d388bda4" to "5d3bdcc712cd08629b1eea55ee06570debbe8b59"



---

archive/issue_comments_281529.json:
```json
{
    "body": "<a id='comment:5'></a>The better thing to do IMO was make the matrix stored in that attribute immutable. In particular, it makes a copy of the matrix when making it immutable (if the added flag `copy_matrix` is `True`, which is the default).",
    "created_at": "2015-02-07T12:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281529",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>The better thing to do IMO was make the matrix stored in that attribute immutable. In particular, it makes a copy of the matrix when making it immutable (if the added flag `copy_matrix` is `True`, which is the default).



---

archive/issue_comments_281530.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-07T14:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281531.json:
```json
{
    "body": "Changing commit from \"5d3bdcc712cd08629b1eea55ee06570debbe8b59\" to \"e5d72278727dfc89b73274361c6c273bd064e88a\"",
    "created_at": "2015-02-07T14:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d3bdcc712cd08629b1eea55ee06570debbe8b59" to "e5d72278727dfc89b73274361c6c273bd064e88a"



---

archive/issue_comments_281532.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Darij Grinberg\"",
    "created_at": "2015-02-07T14:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281532",
    "user": "https://github.com/darijgr"
}
```

Changing reviewer from "" to "Darij Grinberg"



---

archive/issue_comments_281533.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks, looks good to me!",
    "created_at": "2015-02-07T14:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281533",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>Thanks, looks good to me!



---

archive/issue_comments_281534.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-07T14:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281534",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281535.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks (and for adding the doctest).",
    "created_at": "2015-02-07T17:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281535",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Thanks (and for adding the doctest).



---

archive/issue_comments_281536.json:
```json
{
    "body": "Changing branch from \"public/linear_algebra/matrix_constructor_module_morphism-16844\" to \"e5d72278727dfc89b73274361c6c273bd064e88a\"",
    "created_at": "2015-02-18T01:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281536",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/linear_algebra/matrix_constructor_module_morphism-16844" to "e5d72278727dfc89b73274361c6c273bd064e88a"



---

archive/issue_comments_281537.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-02-18T01:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16844#issuecomment-281537",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-02-18T01:26:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16844",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16844#event-49290"
}
```
