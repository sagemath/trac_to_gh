# Issue 16460: a cache for OA/TD/MOLS existence

archive/issues_016223.json:
```json
{
    "body": "Here it is ! Short and efficient, but OA-specific.\n\nRight now it is not linked wth any constructor, it will be done while #16347 is implemented.\n\nThe same thing will have to be done later for `incomplete_orthogonal_array`.\n\nNathann\n\nCC:  @videlec\n\nBranch/Commit: d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb\n\nReviewer: Vincent Delecroix\n\nAuthor: Nathann Cohen\n\nDependencies: #16356\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16460\n\n",
    "closed_at": "2014-06-14T19:59:29Z",
    "created_at": "2014-06-09T12:30:38Z",
    "labels": [
        "component: combinatorial designs"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "a cache for OA/TD/MOLS existence",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16460",
    "user": "https://github.com/nathanncohen"
}
```
Here it is ! Short and efficient, but OA-specific.

Right now it is not linked wth any constructor, it will be done while #16347 is implemented.

The same thing will have to be done later for `incomplete_orthogonal_array`.

Nathann

CC:  @videlec

Branch/Commit: d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb

Reviewer: Vincent Delecroix

Author: Nathann Cohen

Dependencies: #16356

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16460





---

archive/issue_comments_271124.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/16460\"",
    "created_at": "2014-06-09T12:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271124",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/16460"



---

archive/issue_comments_271125.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-09T12:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271125",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271126.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T12:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271127.json:
```json
{
    "body": "Changing commit from \"\" to \"f23d39c13647376fcb12f2c1825a3053af976174\"",
    "created_at": "2014-06-09T12:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "f23d39c13647376fcb12f2c1825a3053af976174"



---

archive/issue_comments_271128.json:
```json
{
    "body": "<a id='comment:3'></a>Hi Nathann,\n\nI implemented the changes associated to the following comments in u/vdelecroix/16460.\n\n- the default for `min_false` should be `n+2`? No?\n- with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.\n- it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.\n\nOn the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?\n\nVincent",
    "created_at": "2014-06-09T15:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271128",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Hi Nathann,

I implemented the changes associated to the following comments in u/vdelecroix/16460.

- the default for `min_false` should be `n+2`? No?
- with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.
- it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.

On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?

Vincent



---

archive/issue_comments_271129.json:
```json
{
    "body": "<a id='comment:4'></a>Yo !\n\n> - the default for `min_false` should be `n+2`? No?\n\n\nAahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because \"True\" is tested before \"False\" `:-)`\n\n> - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.\n\n\nAnd you think that your added \"if\" have a zero cost ? To me it is rather useless and adds lines for no point...\n\n> - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.\n\n\nI'm not sensible to these problems `:-P`\n\n> On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?\n\n\nAhahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`\n\nOkay... Well, if you insist on having this \"best\" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.\n\nNathann",
    "created_at": "2014-06-09T15:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271129",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Yo !

> - the default for `min_false` should be `n+2`? No?


Aahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because "True" is tested before "False" `:-)`

> - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.


And you think that your added "if" have a zero cost ? To me it is rather useless and adds lines for no point...

> - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.


I'm not sensible to these problems `:-P`

> On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?


Ahahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`

Okay... Well, if you insist on having this "best" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.

Nathann



---

archive/issue_comments_271130.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [ncohen](#comment%3A4):\n> Yo !\n> \n> > - the default for `min_false` should be `n+2`? No?\n \n> \n> Aahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because \"True\" is tested before \"False\" `:-)`\n\n\n> > - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.\n \n> \n> And you think that your added \"if\" have a zero cost ? To me it is rather useless and adds lines for no point...\n> \n> > - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.\n \n> \n> I'm not sensible to these problems `:-P`\n> \n> > On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?\n\n> \n> Ahahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`\n> \n> Okay... Well, if you insist on having this \"best\" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.\n\n\nPlease convert to int **and** set the default `False` to `n+2`. Otherwise, you assume that there is no projective plane except for prime powers.",
    "created_at": "2014-06-09T19:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271130",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>Replying to [ncohen](#comment%3A4):
> Yo !
> 
> > - the default for `min_false` should be `n+2`? No?
 
> 
> Aahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because "True" is tested before "False" `:-)`


> > - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.
 
> 
> And you think that your added "if" have a zero cost ? To me it is rather useless and adds lines for no point...
> 
> > - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.
 
> 
> I'm not sensible to these problems `:-P`
> 
> > On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?

> 
> Ahahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`
> 
> Okay... Well, if you insist on having this "best" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.


Please convert to int **and** set the default `False` to `n+2`. Otherwise, you assume that there is no projective plane except for prime powers.



---

archive/issue_comments_271131.json:
```json
{
    "body": "Changing commit from \"f23d39c13647376fcb12f2c1825a3053af976174\" to \"60b717f372f4a377f946dea21824c86454d2b678\"",
    "created_at": "2014-06-09T21:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f23d39c13647376fcb12f2c1825a3053af976174" to "60b717f372f4a377f946dea21824c86454d2b678"



---

archive/issue_comments_271132.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T21:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271133.json:
```json
{
    "body": "<a id='comment:7'></a>Done !\n\nNathann",
    "created_at": "2014-06-09T21:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271133",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Done !

Nathann



---

archive/issue_comments_271134.json:
```json
{
    "body": "<a id='comment:8'></a>I set to positive review. But anyway, it will be interesting only when it will be integrated in the code.\n\nVincent",
    "created_at": "2014-06-09T21:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271134",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>I set to positive review. But anyway, it will be interesting only when it will be integrated in the code.

Vincent



---

archive/issue_comments_271135.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-09T21:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271135",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271136.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2014-06-09T21:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271136",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_271137.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#16295\"",
    "created_at": "2014-06-12T13:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271137",
    "user": "https://github.com/nathanncohen"
}
```

Changing dependencies from "" to "#16295"



---

archive/issue_comments_271138.json:
```json
{
    "body": "Changing dependencies from \"#16295\" to \"#16356\"",
    "created_at": "2014-06-12T14:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271138",
    "user": "https://github.com/nathanncohen"
}
```

Changing dependencies from "#16295" to "#16356"



---

archive/issue_comments_271139.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-06-12T14:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_271140.json:
```json
{
    "body": "Changing commit from \"60b717f372f4a377f946dea21824c86454d2b678\" to \"d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb\"",
    "created_at": "2014-06-12T14:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271140",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "60b717f372f4a377f946dea21824c86454d2b678" to "d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb"



---

archive/issue_comments_271141.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2014-06-12T14:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_271142.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-12T14:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271142",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_048398.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-06-14T19:59:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16460#event-48398"
}
```



---

archive/issue_comments_271143.json:
```json
{
    "body": "Changing branch from \"u/ncohen/16460\" to \"d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb\"",
    "created_at": "2014-06-14T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271143",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/ncohen/16460" to "d7cb52a2eff7c3683f1557a66a5f06fa0c5225fb"



---

archive/issue_comments_271144.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-14T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16460#issuecomment-271144",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
