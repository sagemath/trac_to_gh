# Issue 16606: Bernstein creation operators and other fixes on symmetric functions

archive/issues_016369.json:
```json
{
    "assignees": [],
    "body": "This patch introduces the Bernstein creation operators on the symmetric and the noncommutative symmetric functions. I don't know whether the implementation on the latter is anywhere near optimal, but the former should be fairly fast.\n\nIt also fixes a mistake I made long ago when implementing the Witt basis of Sym and the Hazewinkel basis of QSym, which caused the following to break:\n\n```\nSym = SymmetricFunctions(ZZ)\nw = Sym.w()\nw[4].coproduct()\n```\nThis failed because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers. The cause was the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...\n\nA few more cases of broken documentation are fixed.\n\nCC:  sage-combinat @nthiery @zabrocki\n\nKeywords: **symmetric functions, sage-combinat**\n\nBranch/Commit: **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Darij Grinberg**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/16606_\n\n",
    "closed_at": "2014-08-24T12:31:43Z",
    "created_at": "2014-07-03T05:16:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bernstein creation operators and other fixes on symmetric functions",
    "type": "issue",
    "updated_at": "2014-08-24T12:31:43Z",
    "url": "https://github.com/sagemath/sage/issues/16606",
    "user": "https://github.com/darijgr"
}
```
This patch introduces the Bernstein creation operators on the symmetric and the noncommutative symmetric functions. I don't know whether the implementation on the latter is anywhere near optimal, but the former should be fairly fast.

It also fixes a mistake I made long ago when implementing the Witt basis of Sym and the Hazewinkel basis of QSym, which caused the following to break:

```
Sym = SymmetricFunctions(ZZ)
w = Sym.w()
w[4].coproduct()
```
This failed because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers. The cause was the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...

A few more cases of broken documentation are fixed.

CC:  sage-combinat @nthiery @zabrocki

Keywords: **symmetric functions, sage-combinat**

Branch/Commit: **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**

Reviewer: **Travis Scrimshaw**

Author: **Darij Grinberg**

_Issue created by migration from https://trac.sagemath.org/ticket/16606_





---

archive/issue_events_219793.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-03T05:16:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219793"
}
```



---

archive/issue_events_219794.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-03T05:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219794"
}
```



---

archive/issue_events_219795.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-03T05:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219795"
}
```



---

archive/issue_events_219796.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-03T05:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219796"
}
```



---

archive/issue_comments_218851.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4145d982582c92b8528b0f7ec3d8fd7950a0d536\">4145d98</a></td><td><code>weird that this worked for QSym; still let's do it right</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4\">3caef59</a></td><td><code>fix a mathematical mistake of mine</code></td></tr></table>\n",
    "created_at": "2014-07-04T07:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218851",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4145d982582c92b8528b0f7ec3d8fd7950a0d536">4145d98</a></td><td><code>weird that this worked for QSym; still let's do it right</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4">3caef59</a></td><td><code>fix a mathematical mistake of mine</code></td></tr></table>




---

archive/issue_comments_218852.json:
```json
{
    "body": "Changed commit from **[328bd2e](https://github.com/sagemath/sagetrac-mirror/commit/328bd2e4682434c2fcd157c1317c5635828270f5)** to **[3caef59](https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4)**",
    "created_at": "2014-07-04T07:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218852",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[328bd2e](https://github.com/sagemath/sagetrac-mirror/commit/328bd2e4682434c2fcd157c1317c5635828270f5)** to **[3caef59](https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4)**



---

archive/issue_comments_218853.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3\">564f6f6</a></td><td><code>another attempt at breaking preservation of bugs</code></td></tr></table>\n",
    "created_at": "2014-07-04T07:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218853",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3">564f6f6</a></td><td><code>another attempt at breaking preservation of bugs</code></td></tr></table>




---

archive/issue_comments_218854.json:
```json
{
    "body": "Changed commit from **[3caef59](https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4)** to **[564f6f6](https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3)**",
    "created_at": "2014-07-04T07:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218854",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3caef59](https://github.com/sagemath/sagetrac-mirror/commit/3caef59bbdff42f2afd3731d6e4e6bd59ebafac4)** to **[564f6f6](https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3)**



---

archive/issue_comments_218855.json:
```json
{
    "body": "Changed commit from **[564f6f6](https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3)** to **[bec6279](https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7)**",
    "created_at": "2014-07-04T07:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218855",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[564f6f6](https://github.com/sagemath/sagetrac-mirror/commit/564f6f6dae0884a9caa404ae52f882ecb25beed3)** to **[bec6279](https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7)**



---

archive/issue_comments_218856.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7\">bec6279</a></td><td><code>because [1,3,1,4] is in need of flattening</code></td></tr></table>\n",
    "created_at": "2014-07-04T07:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218856",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7">bec6279</a></td><td><code>because [1,3,1,4] is in need of flattening</code></td></tr></table>




---

archive/issue_comments_218857.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3\">7bdf161</a></td><td><code>revisiting some high quality work...</code></td></tr></table>\n",
    "created_at": "2014-07-04T07:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218857",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3">7bdf161</a></td><td><code>revisiting some high quality work...</code></td></tr></table>




---

archive/issue_comments_218858.json:
```json
{
    "body": "Changed commit from **[bec6279](https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7)** to **[7bdf161](https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3)**",
    "created_at": "2014-07-04T07:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bec6279](https://github.com/sagemath/sagetrac-mirror/commit/bec6279b731898bfa12803d43b920b321632b3a7)** to **[7bdf161](https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3)**



---

archive/issue_comments_218859.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2\">494cc5c</a></td><td><code>Bernstein creation operators on Sym and NSym</code></td></tr></table>\n",
    "created_at": "2014-07-14T23:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218859",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2">494cc5c</a></td><td><code>Bernstein creation operators on Sym and NSym</code></td></tr></table>




---

archive/issue_comments_218860.json:
```json
{
    "body": "Changed commit from **[7bdf161](https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3)** to **[494cc5c](https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2)**",
    "created_at": "2014-07-14T23:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218860",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7bdf161](https://github.com/sagemath/sagetrac-mirror/commit/7bdf1615a4ea73d531e98f526694fa439226d9f3)** to **[494cc5c](https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2)**



---

archive/issue_comments_218861.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,12 @@\n+This patch introduces the Bernstein creation operators on the symmetric and the noncommutative symmetric functions. I don't know whether the implementation on the latter is anywhere near optimal, but the former should be fairly fast.\n+\n+It also fixes a mistake I made long ago when implementing the Witt basis of Sym and the Hazewinkel basis of QSym, which caused the following to break:\n \n ```\n Sym = SymmetricFunctions(ZZ)\n w = Sym.w()\n w[4].coproduct()\n ```\n-This would fail because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers.\n+This failed because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers. The cause was the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...\n \n-The cause is the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...\n+A few more cases of broken documentation are fixed.\n``````\n",
    "created_at": "2014-07-14T23:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218861",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,12 @@
+This patch introduces the Bernstein creation operators on the symmetric and the noncommutative symmetric functions. I don't know whether the implementation on the latter is anywhere near optimal, but the former should be fairly fast.
+
+It also fixes a mistake I made long ago when implementing the Witt basis of Sym and the Hazewinkel basis of QSym, which caused the following to break:
 
 ```
 Sym = SymmetricFunctions(ZZ)
 w = Sym.w()
 w[4].coproduct()
 ```
-This would fail because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers.
+This failed because `w[4]` would be transformed into the h-basis, which would make some of its coefficients into rationals even though they should be integers. The cause was the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...
 
-The cause is the fact that inverting an integer matrix can turn its entries into rationals even if the matrix is invertible over ZZ. I have fixed this in a way I believe to be suboptimal, but this is all I have time for...
+A few more cases of broken documentation are fixed.
``````




---

archive/issue_events_219797.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-14T23:36:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "title_is": "Bernstein creation operators and other fixes on symmetric functions",
    "title_was": "Symmetric function computations in Witt basis leak into quotient field",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219797"
}
```



---

archive/issue_events_219798.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-15T00:17:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219798"
}
```



---

archive/issue_comments_218862.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nThe info that this ticket is in need for is whether it is OK to rely on sage's ability to invert an invertible matrix over an arbitrary base ring. The matrix is defined over ZZ (and is invertible over ZZ), but Sage does not know that, and the worry is that over some rings it might not find the inverse despite its existence.",
    "created_at": "2014-07-15T00:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218862",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:9'>Comment 9:</a>
The info that this ticket is in need for is whether it is OK to rely on sage's ability to invert an invertible matrix over an arbitrary base ring. The matrix is defined over ZZ (and is invertible over ZZ), but Sage does not know that, and the worry is that over some rings it might not find the inverse despite its existence.



---

archive/issue_comments_218863.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI would perhaps do something like this as the workaround:\n\n```python\ninv_m = ~m\ntry:\n    inv_m = inv_m.change_ring(m.base_ring())\nexcept TypeError: # It's not in the base ring as we thought it was\n    pass\n```\nor without the `try/except` block if it should fail.\n\nI would also say the using Sage's ability to invert the matrix over general base rings is the only realistic way to work (unless I'm missing something).",
    "created_at": "2014-07-15T03:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218863",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'>Comment 10:</a>
I would perhaps do something like this as the workaround:

```python
inv_m = ~m
try:
    inv_m = inv_m.change_ring(m.base_ring())
except TypeError: # It's not in the base ring as we thought it was
    pass
```
or without the `try/except` block if it should fail.

I would also say the using Sage's ability to invert the matrix over general base rings is the only realistic way to work (unless I'm missing something).



---

archive/issue_comments_218864.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThanks, but this begs my question, which I guess was unclear.\n\nThe thing that can fail is not the \"change_ring\"; it's the inversion itself. And what I am worried is that it could fail despite the matrix (which is actually an integer matrix with determinant -+1) having an inverse. The one realistic workaround for that is to do these matrix computations over the base ring ZZ rather than the given base ring for the symmetric functions. This could have the additional advantage that the matrices are constructed only once even if I work over different rings at the same time. Is it worth redesigning the Witt basis?",
    "created_at": "2014-07-15T09:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218864",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'>Comment 11:</a>
Thanks, but this begs my question, which I guess was unclear.

The thing that can fail is not the "change_ring"; it's the inversion itself. And what I am worried is that it could fail despite the matrix (which is actually an integer matrix with determinant -+1) having an inverse. The one realistic workaround for that is to do these matrix computations over the base ring ZZ rather than the given base ring for the symmetric functions. This could have the additional advantage that the matrices are constructed only once even if I work over different rings at the same time. Is it worth redesigning the Witt basis?



---

archive/issue_comments_218865.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nAre you worried about rings with positive characteristic (in which case, if it fails, is the basis even well-defined)? I believe we should just leave it as (doing the matrix inversion over the base ring) is until we come across a definite problem.",
    "created_at": "2014-07-15T17:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218865",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>Comment 12:</a>
Are you worried about rings with positive characteristic (in which case, if it fails, is the basis even well-defined)? I believe we should just leave it as (doing the matrix inversion over the base ring) is until we come across a definite problem.



---

archive/issue_comments_218866.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNot so much positive-characteristic as rings which are too complicated for inversion (I'm thinking of symmetric functions over symmetric functions, but right now this is probably made impossible by other issues).\n\nOK, needs_review then (and thanks for the feedback!).",
    "created_at": "2014-07-15T17:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218866",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:13'>Comment 13:</a>
Not so much positive-characteristic as rings which are too complicated for inversion (I'm thinking of symmetric functions over symmetric functions, but right now this is probably made impossible by other issues).

OK, needs_review then (and thanks for the feedback!).



---

archive/issue_events_219799.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-15T17:40:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219799"
}
```



---

archive/issue_events_219800.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2014-07-15T17:40:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219800"
}
```



---

archive/issue_comments_218867.json:
```json
{
    "body": "Changed commit from **[494cc5c](https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2)** to **[8f8acf8](https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98)**",
    "created_at": "2014-07-29T10:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[494cc5c](https://github.com/sagemath/sagetrac-mirror/commit/494cc5ce34c44c60d1691486fb1663a247ce44f2)** to **[8f8acf8](https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98)**



---

archive/issue_comments_218868.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98\">8f8acf8</a></td><td><code>manual merge</code></td></tr></table>\n",
    "created_at": "2014-07-29T10:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218868",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98">8f8acf8</a></td><td><code>manual merge</code></td></tr></table>




---

archive/issue_events_219801.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219801"
}
```



---

archive/issue_events_219802.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219802"
}
```



---

archive/issue_comments_218869.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00369e7eb61ae8965eafb034dc1c6ba2fc130751\">00369e7</a></td><td><code>Merge branch 'public/combinat/witt-sf-fix' of trac.sagemath.org:sage into public/combinat/witt-sf-fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11ea24111f515457f70aa28614be2e99c2d3b481\">11ea241</a></td><td><code>Some review changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541\">90d2b34</a></td><td><code>Some fixes from me being stupid.</code></td></tr></table>\n",
    "created_at": "2014-08-23T00:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218869",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00369e7eb61ae8965eafb034dc1c6ba2fc130751">00369e7</a></td><td><code>Merge branch 'public/combinat/witt-sf-fix' of trac.sagemath.org:sage into public/combinat/witt-sf-fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11ea24111f515457f70aa28614be2e99c2d3b481">11ea241</a></td><td><code>Some review changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541">90d2b34</a></td><td><code>Some fixes from me being stupid.</code></td></tr></table>




---

archive/issue_comments_218870.json:
```json
{
    "body": "Changed commit from **[8f8acf8](https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98)** to **[90d2b34](https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541)**",
    "created_at": "2014-08-23T00:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218870",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8f8acf8](https://github.com/sagemath/sagetrac-mirror/commit/8f8acf8abfa5e9405ea3f215294be82db9b1aa98)** to **[90d2b34](https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541)**



---

archive/issue_comments_218871.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI made some review tweaks. If you're happy with them, then go ahead and set a positive review.",
    "created_at": "2014-08-23T00:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218871",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>Comment 17:</a>
I made some review tweaks. If you're happy with them, then go ahead and set a positive review.



---

archive/issue_comments_218872.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2014-08-23T00:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218872",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_218873.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThanks a lot for the review! I wish I had the time to reciprocate...\n\nSorry, but your Bernstein operator on the immaculate basis doesn't work, since n could be nonpositive. Maybe you can delegate this case to the \"super\" version of the method? (I'm not saying you should; removing the thing is just as fine.)",
    "created_at": "2014-08-23T01:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218873",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:18'>Comment 18:</a>
Thanks a lot for the review! I wish I had the time to reciprocate...

Sorry, but your Bernstein operator on the immaculate basis doesn't work, since n could be nonpositive. Maybe you can delegate this case to the "super" version of the method? (I'm not saying you should; removing the thing is just as fine.)



---

archive/issue_comments_218874.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nAlternatively, you could use the `immaculate_function` method on any basis (I think they all go through the complete basis, so that's where you want to do it). That gives you the immaculate function for every integer vector.\n\n```\nsage: NSym = NonCommutativeSymmetricFunctions(QQ)\nsage: I = NSym.I()\nsage: I.immaculate_function([-1,2,2,2]) # that should be the -1-st Bernstein of I[2,2,2]\nI[1, 1, 1, 2] + I[1, 1, 2, 1] + I[1, 2, 1, 1] - I[1, 2, 2]\nsage: I.immaculate_function([0,2,3,2])\n-I[1, 1, 3, 2] - I[1, 2, 2, 2] - I[1, 2, 3, 1] + I[2, 3, 2]\n```\n\nBut I am not sure if this is faster than just going through the complete basis...",
    "created_at": "2014-08-23T11:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218874",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:19'>Comment 19:</a>
Alternatively, you could use the `immaculate_function` method on any basis (I think they all go through the complete basis, so that's where you want to do it). That gives you the immaculate function for every integer vector.

```
sage: NSym = NonCommutativeSymmetricFunctions(QQ)
sage: I = NSym.I()
sage: I.immaculate_function([-1,2,2,2]) # that should be the -1-st Bernstein of I[2,2,2]
I[1, 1, 1, 2] + I[1, 1, 2, 1] + I[1, 2, 1, 1] - I[1, 2, 2]
sage: I.immaculate_function([0,2,3,2])
-I[1, 1, 3, 2] - I[1, 2, 2, 2] - I[1, 2, 3, 1] + I[2, 3, 2]
```

But I am not sure if this is faster than just going through the complete basis...



---

archive/issue_comments_218875.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000\">b427fb5</a></td><td><code>Fix for non-positive values of n.</code></td></tr></table>\n",
    "created_at": "2014-08-23T14:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218875",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000">b427fb5</a></td><td><code>Fix for non-positive values of n.</code></td></tr></table>




---

archive/issue_comments_218876.json:
```json
{
    "body": "Changed commit from **[90d2b34](https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541)** to **[b427fb5](https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000)**",
    "created_at": "2014-08-23T14:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218876",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[90d2b34](https://github.com/sagemath/sagetrac-mirror/commit/90d2b34372ab54b9c8b740c8ce1022b9e9026541)** to **[b427fb5](https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000)**



---

archive/issue_comments_218877.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nI decided to push to the super. Fixed.",
    "created_at": "2014-08-23T14:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218877",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>Comment 21:</a>
I decided to push to the super. Fixed.



---

archive/issue_comments_218878.json:
```json
{
    "body": "Changed commit from **[b427fb5](https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000)** to **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**",
    "created_at": "2014-08-23T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218878",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b427fb5](https://github.com/sagemath/sagetrac-mirror/commit/b427fb56885ef14ceea688bde644653b31f8e000)** to **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**



---

archive/issue_comments_218879.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1\">e4d7f53</a></td><td><code>fixing own doc bugs (two variables labelled n)</code></td></tr></table>\n",
    "created_at": "2014-08-23T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218879",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1">e4d7f53</a></td><td><code>fixing own doc bugs (two variables labelled n)</code></td></tr></table>




---

archive/issue_comments_218880.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThanks again. If you are fine with my last commit, please set to positive_review.",
    "created_at": "2014-08-23T15:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218880",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:23'>Comment 23:</a>
Thanks again. If you are fine with my last commit, please set to positive_review.



---

archive/issue_comments_218881.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nLGTM",
    "created_at": "2014-08-23T15:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218881",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'>Comment 24:</a>
LGTM



---

archive/issue_events_219803.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-08-23T15:24:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219803"
}
```



---

archive/issue_events_219804.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2014-08-23T15:24:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219804"
}
```



---

archive/issue_comments_218882.json:
```json
{
    "body": "Changed branch from **[public/combinat/witt-sf-fix](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/witt-sf-fix)** to **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**",
    "created_at": "2014-08-24T12:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16606#issuecomment-218882",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/witt-sf-fix](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/witt-sf-fix)** to **[e4d7f53](https://github.com/sagemath/sagetrac-mirror/commit/e4d7f5395a4437325941ba6526bba92b42ae65c1)**



---

archive/issue_events_219805.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-24T12:31:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219805"
}
```



---

archive/issue_events_219806.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "abacb2065c236aa7d2d9729b44b689498d85b328",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-08-24T12:31:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16606",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16606#event-219806"
}
```
