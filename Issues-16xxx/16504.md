# Issue 16504: A mandatory 'nonnegative' argument for MixedIntegerLinearProgram.new_variable() until the standard changes

archive/issues_016267.json:
```json
{
    "body": "This should create an unbounded real variable:\n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: x = p.new_variable(nonnegative=False) \n```\n\nWe should see `nonnegative` as a toggle, not as a type. The following should also work as expected intuitively:\n\n```\nsage: x = p.new_variable(integer=True, nonnegative=False)\nsage: x = p.new_variable(integer=True, nonnegative=True)\n```\n\nCC:  @nathanncohen @dimpase @vbraun @dcoudert hartke @wdjoyner @johnperry-math @benjaminfjones @ingolfured\n\nBranch/Commit: 45bc9377d525b94d7f9ddfbba15b9f074a324937\n\nReviewer: Jeroen Demeyer\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16504\n\n",
    "closed_at": "2014-07-06T17:55:54Z",
    "created_at": "2014-06-20T15:11:13Z",
    "labels": [
        "component: linear programming",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "A mandatory 'nonnegative' argument for MixedIntegerLinearProgram.new_variable() until the standard changes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16504",
    "user": "https://github.com/jdemeyer"
}
```
This should create an unbounded real variable:

```
sage: p = MixedIntegerLinearProgram()
sage: x = p.new_variable(nonnegative=False) 
```

We should see `nonnegative` as a toggle, not as a type. The following should also work as expected intuitively:

```
sage: x = p.new_variable(integer=True, nonnegative=False)
sage: x = p.new_variable(integer=True, nonnegative=True)
```

CC:  @nathanncohen @dimpase @vbraun @dcoudert hartke @wdjoyner @johnperry-math @benjaminfjones @ingolfured

Branch/Commit: 45bc9377d525b94d7f9ddfbba15b9f074a324937

Reviewer: Jeroen Demeyer

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16504





---

archive/issue_comments_272254.json:
```json
{
    "body": "<a id='comment:1'></a>I personally have no idea on the implementation of all this LP stuff. Would it be easy to implement this?",
    "created_at": "2014-06-20T15:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272254",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>I personally have no idea on the implementation of all this LP stuff. Would it be easy to implement this?



---

archive/issue_comments_272255.json:
```json
{
    "body": "<a id='comment:2'></a>Yes, it would be easy. The main problem is that if you want to change the current behaviour of the function (i.e. if you want nonnegative=False to be the default) then you will have to \"make nonnegative mandatory\" for a while and raise a warning when it is not set. Otherwise when you will change it, guys who currently use \"integer=True\" to mean \"nonnegative integer\" will find themselves with LP returning weird answers.\n\nThat was the point of #15521.\n\nAlso, it may seem weird to see all these variables be nonnegative by default but that's really the standard for LP solvers. The LP backends really assume non negativity unless asked otherwise, and changing the standard in Sage is really something that we do \"for the general mathematicians knowing that it could surprise guys used to LP\".\n\nNathann",
    "created_at": "2014-06-20T20:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272255",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>Yes, it would be easy. The main problem is that if you want to change the current behaviour of the function (i.e. if you want nonnegative=False to be the default) then you will have to "make nonnegative mandatory" for a while and raise a warning when it is not set. Otherwise when you will change it, guys who currently use "integer=True" to mean "nonnegative integer" will find themselves with LP returning weird answers.

That was the point of #15521.

Also, it may seem weird to see all these variables be nonnegative by default but that's really the standard for LP solvers. The LP backends really assume non negativity unless asked otherwise, and changing the standard in Sage is really something that we do "for the general mathematicians knowing that it could surprise guys used to LP".

Nathann



---

archive/issue_comments_272256.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [ncohen](#comment%3A2):\n> That was the point of #15521.\n\nI don't think that #15521 made things more clear...\n\nHow about this:\nwe require at most one of `integer`, `binary`, `real` to be given, with `real` the default if none is given.\n\n`nonnegative` is a boolean determining whether or not the variable is assumed to be nonnegative. In the function, we have `nonnegative=None` by default which is currently interpreted as `nonnegative=True` but with the warning from #15521.\n\nI think this proposal is backwards- and forwards-compatible (unlike #15521, which is backwards- but not forwards-compatible).",
    "created_at": "2014-06-20T20:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272256",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>Replying to [ncohen](#comment%3A2):
> That was the point of #15521.

I don't think that #15521 made things more clear...

How about this:
we require at most one of `integer`, `binary`, `real` to be given, with `real` the default if none is given.

`nonnegative` is a boolean determining whether or not the variable is assumed to be nonnegative. In the function, we have `nonnegative=None` by default which is currently interpreted as `nonnegative=True` but with the warning from #15521.

I think this proposal is backwards- and forwards-compatible (unlike #15521, which is backwards- but not forwards-compatible).



---

archive/issue_comments_272257.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [ncohen](#comment%3A2):\n> The main problem is that if you want to change the current behaviour of the function (i.e. if you want nonnegative=False to be the default) then you will have to \"make nonnegative mandatory\" for a while and raise a warning when it is not set.\n\nI agree with this, but I don't see the problem. The deprecation warning from #15521 isn't a problem either...",
    "created_at": "2014-06-20T20:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272257",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Replying to [ncohen](#comment%3A2):
> The main problem is that if you want to change the current behaviour of the function (i.e. if you want nonnegative=False to be the default) then you will have to "make nonnegative mandatory" for a while and raise a warning when it is not set.

I agree with this, but I don't see the problem. The deprecation warning from #15521 isn't a problem either...



---

archive/issue_comments_272258.json:
```json
{
    "body": "<a id='comment:5'></a>Essentially, the code should look like\n\n```python\ndef new_variable(self, real=False, binary=False, integer=False, nonnegative=None):\n    if sum([real, binary, integer]) >= 2:\n        raise ValueError(\"exactly one of the available types has to be True\")\n    \n    if nonnegative is None:\n        deprecation(15521, \"The default value of 'nonnegative' will change, to \"+\n                    \"False instead of True. \" +\n                    \"You should add the explicit 'nonnegative=True'.\")\n        nonnegative = True\n\n    if binary:\n        vtype = self.__BINARY\n    elif integer:\n        vtype = self.__INTEGER\n    else:  # real is the default if no type is explicitly given\n        vtype = self.__REAL\n        \n    # Set minimum value to 0 or -oo depending on \"nonnegative\"\n    ...\n```",
    "created_at": "2014-06-20T21:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272258",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Essentially, the code should look like

```python
def new_variable(self, real=False, binary=False, integer=False, nonnegative=None):
    if sum([real, binary, integer]) >= 2:
        raise ValueError("exactly one of the available types has to be True")
    
    if nonnegative is None:
        deprecation(15521, "The default value of 'nonnegative' will change, to "+
                    "False instead of True. " +
                    "You should add the explicit 'nonnegative=True'.")
        nonnegative = True

    if binary:
        vtype = self.__BINARY
    elif integer:
        vtype = self.__INTEGER
    else:  # real is the default if no type is explicitly given
        vtype = self.__REAL
        
    # Set minimum value to 0 or -oo depending on "nonnegative"
    ...
```



---

archive/issue_comments_272259.json:
```json
{
    "body": "<a id='comment:6'></a>> I agree with this, but I don't see the problem. The deprecation warning from #15521 isn't a problem either...\n\n\nIt is not a problem, it just means that \"doing the job\" takes one year :-P\n\nNathann",
    "created_at": "2014-06-21T08:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272259",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>> I agree with this, but I don't see the problem. The deprecation warning from #15521 isn't a problem either...


It is not a problem, it just means that "doing the job" takes one year :-P

Nathann



---

archive/issue_comments_272260.json:
```json
{
    "body": "<a id='comment:7'></a>> I don't think that #15521 made things more clear...\n\n\nWell, then improve it if you do not like it :-P\n\n> How about this:\n> we require at most one of `integer`, `binary`, `real` to be given, with `real` the default if none is given.\n\n\nMakes sense. Even though, with the turn that events take, I wonder if it would not be better to require one of them to be explicitly given : no default. Again, nonnegative variables are the default in this field, and we switched to another. Requiring a variable would require the users to read the doc, which may avoid misunderstandings.\n\n> `nonnegative` is a boolean determining whether or not the variable is assumed to be nonnegative. In the function, we have `nonnegative=None` by default which is currently interpreted as `nonnegative=True` but with the warning from #15521.\n> \n> I think this proposal is backwards- and forwards-compatible (unlike #15521, which is backwards- but not forwards-compatible).\n\n\nIt does make sense.\n\nNathann",
    "created_at": "2014-06-21T08:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272260",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>> I don't think that #15521 made things more clear...


Well, then improve it if you do not like it :-P

> How about this:
> we require at most one of `integer`, `binary`, `real` to be given, with `real` the default if none is given.


Makes sense. Even though, with the turn that events take, I wonder if it would not be better to require one of them to be explicitly given : no default. Again, nonnegative variables are the default in this field, and we switched to another. Requiring a variable would require the users to read the doc, which may avoid misunderstandings.

> `nonnegative` is a boolean determining whether or not the variable is assumed to be nonnegative. In the function, we have `nonnegative=None` by default which is currently interpreted as `nonnegative=True` but with the warning from #15521.
> 
> I think this proposal is backwards- and forwards-compatible (unlike #15521, which is backwards- but not forwards-compatible).


It does make sense.

Nathann



---

archive/issue_comments_272261.json:
```json
{
    "body": "<a id='comment:8'></a>Yo !\n\n> Essentially, the code should look like\n\n\nLooks good.\n\nNathann",
    "created_at": "2014-06-21T08:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272261",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>Yo !

> Essentially, the code should look like


Looks good.

Nathann



---

archive/issue_comments_272262.json:
```json
{
    "body": "<a id='comment:9'></a>Since `integer, binary, real` are mutually exclusive, why not simply have a `type` variable that takes one on the three values ?",
    "created_at": "2014-06-21T10:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272262",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:9'></a>Since `integer, binary, real` are mutually exclusive, why not simply have a `type` variable that takes one on the three values ?



---

archive/issue_comments_272263.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [tmonteil](#comment%3A9):\n> Since `integer, binary, real` are mutually exclusive, why not simply have a `type` variable that takes one on the three values ?\n\nBackwards compatibility. With my proposal, we would have full backwards compatibility.",
    "created_at": "2014-06-22T18:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272263",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Replying to [tmonteil](#comment%3A9):
> Since `integer, binary, real` are mutually exclusive, why not simply have a `type` variable that takes one on the three values ?

Backwards compatibility. With my proposal, we would have full backwards compatibility.



---

archive/issue_comments_272264.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [ncohen](#comment%3A7):\n> Even though, with the turn that events take, I wonder if it would not be better to require one of them to be explicitly given : no default.\n\nAgain, for backwards compatibility, we cannot just do that.",
    "created_at": "2014-06-22T18:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272264",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Replying to [ncohen](#comment%3A7):
> Even though, with the turn that events take, I wonder if it would not be better to require one of them to be explicitly given : no default.

Again, for backwards compatibility, we cannot just do that.



---

archive/issue_comments_272265.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [ncohen](#comment%3A7):\n> nonnegative variables are the default in this field, and we switched to another.\n\nNo, we didn't switch, we just added a deprecation warning. This ticket doesn't change that.",
    "created_at": "2014-06-22T18:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272265",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [ncohen](#comment%3A7):
> nonnegative variables are the default in this field, and we switched to another.

No, we didn't switch, we just added a deprecation warning. This ticket doesn't change that.



---

archive/issue_comments_272266.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [ncohen](#comment%3A8):\n> Looks good.\n\nHi Nathann,\n\nGiven that you know this code and I don't, could you make the final implementation based on my pseudo-code?",
    "created_at": "2014-06-22T18:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272266",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [ncohen](#comment%3A8):
> Looks good.

Hi Nathann,

Given that you know this code and I don't, could you make the final implementation based on my pseudo-code?



---

archive/issue_comments_272267.json:
```json
{
    "body": "<a id='comment:14'></a>Yo !\n\n> Given that you know this code and I don't, could you make the final implementation\n\n\nHmmmm.... You are hardly a beginner with Sage, but let's make a deal : I implement this ticket and you finish #16308 using #16374 that has been merged in the meantime ? I need this for my combinatorial design stuff `:-P`\n\nNathann",
    "created_at": "2014-06-23T08:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272267",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>Yo !

> Given that you know this code and I don't, could you make the final implementation


Hmmmm.... You are hardly a beginner with Sage, but let's make a deal : I implement this ticket and you finish #16308 using #16374 that has been merged in the meantime ? I need this for my combinatorial design stuff `:-P`

Nathann



---

archive/issue_comments_272268.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-23T10:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272268",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_272269.json:
```json
{
    "body": "Changing branch from \"\" to \"u/ncohen/16504\"",
    "created_at": "2014-06-23T10:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272269",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "u/ncohen/16504"



---

archive/issue_comments_272270.json:
```json
{
    "body": "<a id='comment:15'></a>Hello !\n\nHere is the branch. Took much longer than I thought.\n\nWhat it does :\n- Removes the `is_nonnegative`, `set_nonnegative` functions that were introduced in #15521 as 'nonnegative' is not meant to be a variable type but a  'property' of any type. Those functions are renamed to `is_real` and `set_real`, i.e. their status before #16504\n\n- It was formerly possible to do things like that \n\n```\nsage: p = MixedIntegerLinearProgram()\nsage: v = p.new_variable()\nsage: p.set_min(v[0],15)\nsage: p.get_min(v[0])\n15.0\n```\n  but it was NOT possible to do things like that\n\n```\nsage: p.set_min(v,17)\nsage: p.get_min(v[18])\n17.0\n```\ni.e. it was possible to define upper/lower bound on a specific variable, but not to do the same on a dictionary of variables in such a way that the new variables created fro the dictionary will inherit the bounds. But that's exactly what we wanted to do here.\n\n  Thus I needed to add arguments lower/upper bound to the constructor of `MIPVariable`, plus set functions where it was needed.\n\nWell... `needs_review` !\n\nNathann",
    "created_at": "2014-06-23T10:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272270",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>Hello !

Here is the branch. Took much longer than I thought.

What it does :
- Removes the `is_nonnegative`, `set_nonnegative` functions that were introduced in #15521 as 'nonnegative' is not meant to be a variable type but a  'property' of any type. Those functions are renamed to `is_real` and `set_real`, i.e. their status before #16504

- It was formerly possible to do things like that 

```
sage: p = MixedIntegerLinearProgram()
sage: v = p.new_variable()
sage: p.set_min(v[0],15)
sage: p.get_min(v[0])
15.0
```
  but it was NOT possible to do things like that

```
sage: p.set_min(v,17)
sage: p.get_min(v[18])
17.0
```
i.e. it was possible to define upper/lower bound on a specific variable, but not to do the same on a dictionary of variables in such a way that the new variables created fro the dictionary will inherit the bounds. But that's exactly what we wanted to do here.

  Thus I needed to add arguments lower/upper bound to the constructor of `MIPVariable`, plus set functions where it was needed.

Well... `needs_review` !

Nathann



---

archive/issue_comments_272271.json:
```json
{
    "body": "Changing commit from \"\" to \"b1f43af754d4ab7e136015519c7fc0cdbe32dd36\"",
    "created_at": "2014-06-23T10:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "b1f43af754d4ab7e136015519c7fc0cdbe32dd36"



---

archive/issue_comments_272272.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-23T10:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272273.json:
```json
{
    "body": "<a id='comment:18'></a>As now `p.set_min(v,17)` becomes possible, why not have optional `max` and `min` in `new_variable()` (many solvers have it, at least per variable) ? E.g. `v=p.new_variable(min=17, max=18)`. A usual application is relaxation of binary IPs, so one would have real variables `p.new_variable(min=0, max=1)`.",
    "created_at": "2014-06-23T11:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272273",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>As now `p.set_min(v,17)` becomes possible, why not have optional `max` and `min` in `new_variable()` (many solvers have it, at least per variable) ? E.g. `v=p.new_variable(min=17, max=18)`. A usual application is relaxation of binary IPs, so one would have real variables `p.new_variable(min=0, max=1)`.



---

archive/issue_comments_272274.json:
```json
{
    "body": "Changing author from \"\" to \"Nathann Cohen\"",
    "created_at": "2014-06-23T11:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272274",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Nathann Cohen"



---

archive/issue_comments_272275.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [dimpase](#comment%3A18):\n> As now `p.set_min(v,17)` becomes possible, why not have optional `max` and `min` in `new_variable()` (many solvers have it, at least per variable) ? E.g. `v=p.new_variable(min=17, max=18)`. A usual application is relaxation of binary IPs, so one would have real variables `p.new_variable(min=0, max=1)`.\n\nI agree, but perhaps not on this ticket. Let's try not to do too many things at the same time.",
    "created_at": "2014-06-23T11:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272275",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Replying to [dimpase](#comment%3A18):
> As now `p.set_min(v,17)` becomes possible, why not have optional `max` and `min` in `new_variable()` (many solvers have it, at least per variable) ? E.g. `v=p.new_variable(min=17, max=18)`. A usual application is relaxation of binary IPs, so one would have real variables `p.new_variable(min=0, max=1)`.

I agree, but perhaps not on this ticket. Let's try not to do too many things at the same time.



---

archive/issue_comments_272276.json:
```json
{
    "body": "<a id='comment:21'></a>Can you undo this change:\n\n```diff\n@@ -241,11 +239,10 @@ cdef class MixedIntegerLinearProgram(SageObject):\nsage: g = graphs.PetersenGraph()\nsage: p = MixedIntegerLinearProgram(maximization=True)\n- sage: b = p.new_variable()\n+ sage: b = p.new_variable(binary=True)\nsage: p.set_objective(sum([b[v] for v in g]))\nsage: for (u,v) in g.edges(labels=None):\n... p.add_constraint(b[u] + b[v], max=1)\n- sage: p.set_binary(b)\nsage: p.solve(objective_only=True)\n4.0\n\"\"\"\n```",
    "created_at": "2014-06-23T12:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272276",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Can you undo this change:

```diff
@@ -241,11 +239,10 @@ cdef class MixedIntegerLinearProgram(SageObject):
sage: g = graphs.PetersenGraph()
sage: p = MixedIntegerLinearProgram(maximization=True)
- sage: b = p.new_variable()
+ sage: b = p.new_variable(binary=True)
sage: p.set_objective(sum([b[v] for v in g]))
sage: for (u,v) in g.edges(labels=None):
... p.add_constraint(b[u] + b[v], max=1)
- sage: p.set_binary(b)
sage: p.solve(objective_only=True)
4.0
"""
```



---

archive/issue_comments_272277.json:
```json
{
    "body": "<a id='comment:22'></a>And why remove this warning?\n\n```diff\n.. WARNING::\n-\n- By default, all ``x[i]`` are assumed to be non-negative. See\n- :meth:`set_min` to set a different lower bound.\n```",
    "created_at": "2014-06-23T12:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272277",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>And why remove this warning?

```diff
.. WARNING::
-
- By default, all ``x[i]`` are assumed to be non-negative. See
- :meth:`set_min` to set a different lower bound.
```



---

archive/issue_comments_272278.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-06-23T12:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272278",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_272279.json:
```json
{
    "body": "<a id='comment:23'></a>You should add more doctests for `nonnegative=False`. As far as I can see, there is no doctest for an actual MILP problem with `nonnegative=False` variables. You should doctest this both for `integer` and `real` types.",
    "created_at": "2014-06-23T12:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272279",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>You should add more doctests for `nonnegative=False`. As far as I can see, there is no doctest for an actual MILP problem with `nonnegative=False` variables. You should doctest this both for `integer` and `real` types.



---

archive/issue_comments_272280.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-23T12:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272280",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272281.json:
```json
{
    "body": "Changing work_issues from \"\" to \"nonnegative=False doctests\"",
    "created_at": "2014-06-23T12:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272281",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to "nonnegative=False doctests"



---

archive/issue_comments_272282.json:
```json
{
    "body": "Changing reviewer from \"Jeroen Demeyer\" to \"\"",
    "created_at": "2014-06-23T12:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272282",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Jeroen Demeyer" to ""



---

archive/issue_comments_272283.json:
```json
{
    "body": "<a id='comment:24'></a>Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?",
    "created_at": "2014-06-23T12:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272283",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?



---

archive/issue_comments_272284.json:
```json
{
    "body": "Changing work_issues from \"nonnegative=False doctests\" to \"\"",
    "created_at": "2014-06-23T12:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272284",
    "user": "https://github.com/dimpase"
}
```

Changing work_issues from "nonnegative=False doctests" to ""



---

archive/issue_comments_272285.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [dimpase](#comment%3A24):\n> Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?\n\nOld code should work exactly as before, possibly with a deprecation warning.",
    "created_at": "2014-06-23T12:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272285",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>Replying to [dimpase](#comment%3A24):
> Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?

Old code should work exactly as before, possibly with a deprecation warning.



---

archive/issue_comments_272286.json:
```json
{
    "body": "Changing work_issues from \"\" to \"nonnegative=False doctests\"",
    "created_at": "2014-06-23T12:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272286",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "" to "nonnegative=False doctests"



---

archive/issue_comments_272287.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2014-06-23T12:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272287",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_272288.json:
```json
{
    "body": "<a id='comment:27'></a>Could you replace\n\n```\nif isinstance(v, MIPVariable):\n    v.set_min(min)\nelse:\n    self._backend.variable_lower_bound(self._variables[v], min)\n```\nby the more Pythonic\n\n```\ntry:\n    v.set_min(min)\nexcept AttributeError:\n    self._backend.variable_lower_bound(self._variables[v], min)\n```\n\nMy personal opinion is that `v.set_min(min)` should actually work in all cases, but that's perhaps for a new ticket.",
    "created_at": "2014-06-23T12:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272288",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Could you replace

```
if isinstance(v, MIPVariable):
    v.set_min(min)
else:
    self._backend.variable_lower_bound(self._variables[v], min)
```
by the more Pythonic

```
try:
    v.set_min(min)
except AttributeError:
    self._backend.variable_lower_bound(self._variables[v], min)
```

My personal opinion is that `v.set_min(min)` should actually work in all cases, but that's perhaps for a new ticket.



---

archive/issue_comments_272289.json:
```json
{
    "body": "Changing work_issues from \"nonnegative=False doctests\" to \"nonnegative=False doctests, avoid isinstance()\"",
    "created_at": "2014-06-23T12:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272289",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "nonnegative=False doctests" to "nonnegative=False doctests, avoid isinstance()"



---

archive/issue_comments_272290.json:
```json
{
    "body": "<a id='comment:29'></a>> Can you undo this change:\n\n\nWhy ? `O_o`\n\nIt's better in the new version, isn't it ? `O_o`\n\nNathann",
    "created_at": "2014-06-23T14:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272290",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>> Can you undo this change:


Why ? `O_o`

It's better in the new version, isn't it ? `O_o`

Nathann



---

archive/issue_comments_272291.json:
```json
{
    "body": "<a id='comment:30'></a>> And why remove this warning?\n> \n> ```\n> #!diff\n> .. WARNING::\n> -\n> - By default, all ``x[i]`` are assumed to be non-negative. See\n> - :meth:`set_min` to set a different lower bound.\n> ```\n\n\nBecause there is no need for a warning anymore : now the user explicitly says whether he wants the variables to be nonnegative or not, or he gets a warning.\n\nPlus it will be the other way around next year.\n\nNathann",
    "created_at": "2014-06-23T14:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272291",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>> And why remove this warning?
> 
> ```
> #!diff
> .. WARNING::
> -
> - By default, all ``x[i]`` are assumed to be non-negative. See
> - :meth:`set_min` to set a different lower bound.
> ```


Because there is no need for a warning anymore : now the user explicitly says whether he wants the variables to be nonnegative or not, or he gets a warning.

Plus it will be the other way around next year.

Nathann



---

archive/issue_comments_272292.json:
```json
{
    "body": "<a id='comment:31'></a>> Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?\n\n\nIt will work, and there should be no wrong answer (unless there is a bug somewhere). The default behaviour is now \"nonnegative + warning\", and the correct way to use this class is to specify a value for nonnegative.\n\nNathann",
    "created_at": "2014-06-23T14:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272292",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'></a>> Am I correct that this is a safe change in the sense that the existing code using `nonnegative=True` as default would either continue to work, or will refuse to work? I.e. people won't possibly start getting wrong answers?


It will work, and there should be no wrong answer (unless there is a bug somewhere). The default behaviour is now "nonnegative + warning", and the correct way to use this class is to specify a value for nonnegative.

Nathann



---

archive/issue_comments_272293.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-23T14:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272293",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272294.json:
```json
{
    "body": "Changing commit from \"b1f43af754d4ab7e136015519c7fc0cdbe32dd36\" to \"97b2f1fa06456de3e54da1787ce20915aceb8ad9\"",
    "created_at": "2014-06-23T14:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b1f43af754d4ab7e136015519c7fc0cdbe32dd36" to "97b2f1fa06456de3e54da1787ce20915aceb8ad9"



---

archive/issue_comments_272295.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-23T14:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272296.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-06-23T14:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_272297.json:
```json
{
    "body": "Changing commit from \"97b2f1fa06456de3e54da1787ce20915aceb8ad9\" to \"d437be4a258a648e86f8cc1845ade75467609601\"",
    "created_at": "2014-06-23T14:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "97b2f1fa06456de3e54da1787ce20915aceb8ad9" to "d437be4a258a648e86f8cc1845ade75467609601"



---

archive/issue_comments_272298.json:
```json
{
    "body": "Changing work_issues from \"nonnegative=False doctests, avoid isinstance()\" to \"nonnegative=False doctests\"",
    "created_at": "2014-06-23T17:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272298",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "nonnegative=False doctests, avoid isinstance()" to "nonnegative=False doctests"



---

archive/issue_comments_272299.json:
```json
{
    "body": "<a id='comment:35'></a>Still needs `nonnegative=False` doctests.",
    "created_at": "2014-06-23T17:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272299",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>Still needs `nonnegative=False` doctests.



---

archive/issue_comments_272300.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-23T17:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272300",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272301.json:
```json
{
    "body": "<a id='comment:36'></a>Here are the 10 lines you requested. \n\nNathann",
    "created_at": "2014-06-24T07:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272301",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:36'></a>Here are the 10 lines you requested. 

Nathann



---

archive/issue_comments_272302.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-24T07:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272302",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272303.json:
```json
{
    "body": "Changing commit from \"d437be4a258a648e86f8cc1845ade75467609601\" to \"ebc3316525036bcc2a94edcddaa81bca26f3ea9c\"",
    "created_at": "2014-06-24T07:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d437be4a258a648e86f8cc1845ade75467609601" to "ebc3316525036bcc2a94edcddaa81bca26f3ea9c"



---

archive/issue_comments_272304.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-24T07:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272305.json:
```json
{
    "body": "Changing branch from \"u/ncohen/16504\" to \"u/jdemeyer/ticket/16504\"",
    "created_at": "2014-06-24T13:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272305",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/ncohen/16504" to "u/jdemeyer/ticket/16504"



---

archive/issue_comments_272306.json:
```json
{
    "body": "Changing commit from \"ebc3316525036bcc2a94edcddaa81bca26f3ea9c\" to \"e6ff553f8280f25854b2192cf3a4fa5dcd923a0b\"",
    "created_at": "2014-06-24T13:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272306",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "ebc3316525036bcc2a94edcddaa81bca26f3ea9c" to "e6ff553f8280f25854b2192cf3a4fa5dcd923a0b"



---

archive/issue_comments_272307.json:
```json
{
    "body": "Changing work_issues from \"nonnegative=False doctests\" to \"\"",
    "created_at": "2014-06-24T13:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272307",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "nonnegative=False doctests" to ""



---

archive/issue_comments_272308.json:
```json
{
    "body": "<a id='comment:40'></a>New commits:",
    "created_at": "2014-06-24T13:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272308",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>New commits:



---

archive/issue_comments_272309.json:
```json
{
    "body": "<a id='comment:41'></a>Please review this commit.",
    "created_at": "2014-06-24T13:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272309",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>Please review this commit.



---

archive/issue_comments_272310.json:
```json
{
    "body": "<a id='comment:42'></a>I see nothing wrong with it !\n\nNathann",
    "created_at": "2014-06-24T13:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272310",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:42'></a>I see nothing wrong with it !

Nathann



---

archive/issue_comments_272311.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-24T13:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272311",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272312.json:
```json
{
    "body": "<a id='comment:44'></a>Hey man... What about #16308 ?\n\nNathann",
    "created_at": "2014-06-24T13:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272312",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:44'></a>Hey man... What about #16308 ?

Nathann



---

archive/issue_comments_272313.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [ncohen](#comment%3A44):\n> Hey man... What about #16308 ?\n\nEasy, I will look at it...",
    "created_at": "2014-06-24T14:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272313",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>Replying to [ncohen](#comment%3A44):
> Hey man... What about #16308 ?

Easy, I will look at it...



---

archive/issue_comments_272314.json:
```json
{
    "body": "<a id='comment:46'></a>doctest failure src/doc/en/thematic_tutorials/linear_programming.rst",
    "created_at": "2014-06-25T13:49:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272314",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>doctest failure src/doc/en/thematic_tutorials/linear_programming.rst



---

archive/issue_comments_272315.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-06-25T13:49:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272315",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_272316.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-25T14:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272316",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272317.json:
```json
{
    "body": "Changing commit from \"e6ff553f8280f25854b2192cf3a4fa5dcd923a0b\" to \"190393753fff48a6e210066fe0f0fff931ef404c\"",
    "created_at": "2014-06-25T14:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272317",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "e6ff553f8280f25854b2192cf3a4fa5dcd923a0b" to "190393753fff48a6e210066fe0f0fff931ef404c"



---

archive/issue_comments_272318.json:
```json
{
    "body": "<a id='comment:47'></a>Cursed tutorial. Sorry 'bout that `:-/`\n\nI rewrote the necessary part in an additional commit.\n\nNathann\n\n---\nNew commits:",
    "created_at": "2014-06-25T14:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272318",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:47'></a>Cursed tutorial. Sorry 'bout that `:-/`

I rewrote the necessary part in an additional commit.

Nathann

---
New commits:



---

archive/issue_comments_272319.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/16504\" to \"public/16504\"",
    "created_at": "2014-06-25T14:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272319",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "u/jdemeyer/ticket/16504" to "public/16504"



---

archive/issue_comments_272320.json:
```json
{
    "body": "<a id='comment:48'></a>Yo!\nYLC LGTM.",
    "created_at": "2014-06-26T14:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272320",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>Yo!
YLC LGTM.



---

archive/issue_comments_272321.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-06-26T14:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272321",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272322.json:
```json
{
    "body": "<a id='comment:49'></a>Your Loving Cousin ? `O_o`",
    "created_at": "2014-06-26T14:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272322",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:49'></a>Your Loving Cousin ? `O_o`



---

archive/issue_comments_272323.json:
```json
{
    "body": "<a id='comment:50'></a>YOUR LAST CHANGES ????\n\n(I think I got it `:-P`)",
    "created_at": "2014-06-26T14:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272323",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:50'></a>YOUR LAST CHANGES ????

(I think I got it `:-P`)



---

archive/issue_comments_272324.json:
```json
{
    "body": "<a id='comment:51'></a>Your Last Commit ;-)",
    "created_at": "2014-06-26T14:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272324",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>Your Last Commit ;-)



---

archive/issue_comments_272325.json:
```json
{
    "body": "<a id='comment:52'></a>Doctests fail in src/sage/numerical/mip.pyx",
    "created_at": "2014-06-27T02:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272325",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>Doctests fail in src/sage/numerical/mip.pyx



---

archive/issue_comments_272326.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-06-27T02:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272326",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_272327.json:
```json
{
    "body": "<a id='comment:53'></a>Not on my computer. Did you merge anything in between ?\n\nNathann",
    "created_at": "2014-06-27T07:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272327",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:53'></a>Not on my computer. Did you merge anything in between ?

Nathann



---

archive/issue_comments_272328.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [ncohen](#comment%3A53):\n> Not on my computer. Did you merge anything in between ?\n\nsame here, works for me too, so that must be cosmic rays (possibly emitted by git) affecting Volker's machine...",
    "created_at": "2014-06-27T07:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272328",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'></a>Replying to [ncohen](#comment%3A53):
> Not on my computer. Did you merge anything in between ?

same here, works for me too, so that must be cosmic rays (possibly emitted by git) affecting Volker's machine...



---

archive/issue_comments_272329.json:
```json
{
    "body": "<a id='comment:55'></a>just to make sure I merged public/16504 over the latest 6.3.beta5, and I get 2 failures:\n\n```\nsage -t src/sage/numerical/mip.pyx\n**********************************************************************\nFile \"src/sage/numerical/mip.pyx\", line 253, in sage.numerical.mip.MixedIntegerLinearProgram\nFailed example:\n    for type in [\"binary\", \"integer\"]:\n        k = 3\n        items = [1/5, 1/3, 2/3, 3/4, 5/7]\n        maximum=1\n        p=MixedIntegerLinearProgram()\n        box=p.new_variable(**{type:True})\n        for b in range(k):\n             p.add_constraint(p.sum([items[i]*box[i,b] for i in range(len(items))]) <= maximum)\n        for i in range(len(items)):\n            p.add_constraint(p.sum([box[i,b] for b in range(k)]) == 1)\n        p.set_objective(None)\n        _ = p.solve()\n        box=p.get_values(box)\n        print(all(v in ZZ for v in box.values()))\nExpected:\n    True\n    True\nGot:\n    True\n    doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False instead of True. You should add the explicit 'nonnegative=True'.\n    See http://trac.sagemath.org/15521 for details.\n    True\n**********************************************************************\nFile \"src/sage/numerical/mip.pyx\", line 364, in sage.numerical.mip.MixedIntegerLinearProgram.?\nFailed example:\n    v = p.new_variable(real=True)\nExpected:\n    doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False instead of True. You should add the explicit 'nonnegative=True'.\n    See http://trac.sagemath.org/15521 for details.\nGot:\n    <BLANKLINE>\n**********************************************************************\n2 items had failures:\n   1 of   9 in sage.numerical.mip.MixedIntegerLinearProgram\n   1 of  15 in sage.numerical.mip.MixedIntegerLinearProgram.?\n    [440 tests, 2 failures, 8.08 s]\n----------------------------------------------------------------------\nsage -t src/sage/numerical/mip.pyx  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 8.7 seconds\n    cpu time: 8.1 seconds\n    cumulative wall time: 8.1 seconds\n```",
    "created_at": "2014-07-03T10:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272329",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:55'></a>just to make sure I merged public/16504 over the latest 6.3.beta5, and I get 2 failures:

```
sage -t src/sage/numerical/mip.pyx
**********************************************************************
File "src/sage/numerical/mip.pyx", line 253, in sage.numerical.mip.MixedIntegerLinearProgram
Failed example:
    for type in ["binary", "integer"]:
        k = 3
        items = [1/5, 1/3, 2/3, 3/4, 5/7]
        maximum=1
        p=MixedIntegerLinearProgram()
        box=p.new_variable(**{type:True})
        for b in range(k):
             p.add_constraint(p.sum([items[i]*box[i,b] for i in range(len(items))]) <= maximum)
        for i in range(len(items)):
            p.add_constraint(p.sum([box[i,b] for b in range(k)]) == 1)
        p.set_objective(None)
        _ = p.solve()
        box=p.get_values(box)
        print(all(v in ZZ for v in box.values()))
Expected:
    True
    True
Got:
    True
    doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False instead of True. You should add the explicit 'nonnegative=True'.
    See http://trac.sagemath.org/15521 for details.
    True
**********************************************************************
File "src/sage/numerical/mip.pyx", line 364, in sage.numerical.mip.MixedIntegerLinearProgram.?
Failed example:
    v = p.new_variable(real=True)
Expected:
    doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False instead of True. You should add the explicit 'nonnegative=True'.
    See http://trac.sagemath.org/15521 for details.
Got:
    <BLANKLINE>
**********************************************************************
2 items had failures:
   1 of   9 in sage.numerical.mip.MixedIntegerLinearProgram
   1 of  15 in sage.numerical.mip.MixedIntegerLinearProgram.?
    [440 tests, 2 failures, 8.08 s]
----------------------------------------------------------------------
sage -t src/sage/numerical/mip.pyx  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 8.7 seconds
    cpu time: 8.1 seconds
    cumulative wall time: 8.1 seconds
```



---

archive/issue_comments_272330.json:
```json
{
    "body": "<a id='comment:56'></a>the following obvious change fixes the things:\n\n```\ndiff --git a/src/sage/numerical/mip.pyx b/src/sage/numerical/mip.pyx\nindex 2f8d0e3..5741f68 100644\n--- a/src/sage/numerical/mip.pyx\n+++ b/src/sage/numerical/mip.pyx\n@@ -265,6 +265,8 @@ cdef class MixedIntegerLinearProgram(SageObject):\n         ....:     box=p.get_values(box)\n         ....:     print(all(v in ZZ for v in box.values()))\n         True\n+        doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False inst\n+        See http://trac.sagemath.org/15521 for details.\n         True\n     \"\"\"\n \n@@ -362,8 +364,6 @@ cdef class MixedIntegerLinearProgram(SageObject):\n \n             sage: p = MixedIntegerLinearProgram()\n             sage: v = p.new_variable(real=True)\n-            doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False \n-            See http://trac.sagemath.org/15521 for details.\n             sage: p.get_min(v[0])\n             0.0\n         \"\"\"\n```",
    "created_at": "2014-07-03T11:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272330",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>the following obvious change fixes the things:

```
diff --git a/src/sage/numerical/mip.pyx b/src/sage/numerical/mip.pyx
index 2f8d0e3..5741f68 100644
--- a/src/sage/numerical/mip.pyx
+++ b/src/sage/numerical/mip.pyx
@@ -265,6 +265,8 @@ cdef class MixedIntegerLinearProgram(SageObject):
         ....:     box=p.get_values(box)
         ....:     print(all(v in ZZ for v in box.values()))
         True
+        doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False inst
+        See http://trac.sagemath.org/15521 for details.
         True
     """
 
@@ -362,8 +364,6 @@ cdef class MixedIntegerLinearProgram(SageObject):
 
             sage: p = MixedIntegerLinearProgram()
             sage: v = p.new_variable(real=True)
-            doctest:839: DeprecationWarning: The default value of 'nonnegative' will change, to False 
-            See http://trac.sagemath.org/15521 for details.
             sage: p.get_min(v[0])
             0.0
         """
```



---

archive/issue_comments_272331.json:
```json
{
    "body": "<a id='comment:57'></a>To fix this properly, some commit untangling is needed, I suppose. Probably, a rebase over beta5 might be the easiest option, but I am not 100% sure.",
    "created_at": "2014-07-03T11:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272331",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:57'></a>To fix this properly, some commit untangling is needed, I suppose. Probably, a rebase over beta5 might be the easiest option, but I am not 100% sure.



---

archive/issue_comments_272332.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-03T11:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272333.json:
```json
{
    "body": "Changing commit from \"190393753fff48a6e210066fe0f0fff931ef404c\" to \"45bc9377d525b94d7f9ddfbba15b9f074a324937\"",
    "created_at": "2014-07-03T11:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "190393753fff48a6e210066fe0f0fff931ef404c" to "45bc9377d525b94d7f9ddfbba15b9f074a324937"



---

archive/issue_comments_272334.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-03T11:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272334",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272335.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-03T21:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272335",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272336.json:
```json
{
    "body": "<a id='comment:60'></a>LGTM",
    "created_at": "2014-07-03T21:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272336",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'></a>LGTM



---

archive/issue_events_048489.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-06T17:55:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16504#event-48489"
}
```



---

archive/issue_comments_272337.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-06T17:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272337",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_272338.json:
```json
{
    "body": "Changing branch from \"public/16504\" to \"45bc9377d525b94d7f9ddfbba15b9f074a324937\"",
    "created_at": "2014-07-06T17:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16504#issuecomment-272338",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/16504" to "45bc9377d525b94d7f9ddfbba15b9f074a324937"
