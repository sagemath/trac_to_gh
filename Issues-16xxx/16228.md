# Issue 16228: Category of classes of combinatorial structures

archive/issues_016228.json:
```json
{
    "body": "CC:  @nthiery @mantepse @avirmaux\n\nKeywords: combinatorics\n\nThat category gives a good and easy pattern of combinatorial structures.\n\nThe ideas (a list of others tickets) behind that are\n- a simple framework of combinatorial structures\n- sum, product, cartesian product, sequence, multi-set, cycle, ...\n- species (simplified such that it becomes easy to implement our species of structures)\n- change the world (may be)\n\nIssue created by migration from https://trac.sagemath.org/ticket/16465\n\n",
    "created_at": "2014-06-10T04:07:54Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Category of classes of combinatorial structures",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16228",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```
CC:  @nthiery @mantepse @avirmaux

Keywords: combinatorics

That category gives a good and easy pattern of combinatorial structures.

The ideas (a list of others tickets) behind that are
- a simple framework of combinatorial structures
- sum, product, cartesian product, sequence, multi-set, cycle, ...
- species (simplified such that it becomes easy to implement our species of structures)
- change the world (may be)

Issue created by migration from https://trac.sagemath.org/ticket/16465





---

archive/issue_comments_211886.json:
```json
{
    "body": "It would be very useful to know what difficulties you encounter with the species framework!\n\nCurrently, one hold-up for progress regarding species is #16137 and a multivariate companion.",
    "created_at": "2014-06-10T12:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211886",
    "user": "https://github.com/mantepse"
}
```

It would be very useful to know what difficulties you encounter with the species framework!

Currently, one hold-up for progress regarding species is #16137 and a multivariate companion.



---

archive/issue_comments_211887.json:
```json
{
    "body": "I don't have (especially) problem with the species framework. I have a problem with how to implement a class of combinatorial structures.\n\nThe current way to do that consist in copy-paste a file like `sage.combinat.binay_trees.py` with some obscurs lines then adapt the code.\n\nMy patch (when I would tame git) will propose a simple framework to design a class of (combinatorial) structures.\n\nMy opinion about species of structures is a species is a class of combinatorial structures! That is a class of combinatorial structures with some specific \"method\": transport of structures, isomophism types, cycle index series... so in the best of worlds, I want use a species as a parent and I want define more sophisticate structures with its elements.\n\nFurthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).\n\nAbout #16137, it seems to me your patch treats generating series but not about the framework of structures, so that is not directly linked. Nowadays, I am not convinced by sage to compute generating series... There exists a deterministic way to define and extract some coefficients in a generating series?? I believe users don't have to learn a new tool to do compute something so `LazyPowerSeries`, `SymbolicRing` or whatever must be integrated in an unique manner in sage which one is user friendly...",
    "created_at": "2014-06-10T13:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211887",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

I don't have (especially) problem with the species framework. I have a problem with how to implement a class of combinatorial structures.

The current way to do that consist in copy-paste a file like `sage.combinat.binay_trees.py` with some obscurs lines then adapt the code.

My patch (when I would tame git) will propose a simple framework to design a class of (combinatorial) structures.

My opinion about species of structures is a species is a class of combinatorial structures! That is a class of combinatorial structures with some specific "method": transport of structures, isomophism types, cycle index series... so in the best of worlds, I want use a species as a parent and I want define more sophisticate structures with its elements.

Furthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).

About #16137, it seems to me your patch treats generating series but not about the framework of structures, so that is not directly linked. Nowadays, I am not convinced by sage to compute generating series... There exists a deterministic way to define and extract some coefficients in a generating series?? I believe users don't have to learn a new tool to do compute something so `LazyPowerSeries`, `SymbolicRing` or whatever must be integrated in an unique manner in sage which one is user friendly...



---

archive/issue_comments_211888.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-06-11T14:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211888",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

New commits:



---

archive/issue_comments_211889.json:
```json
{
    "body": "A comment about a comment in the code: I think it's a misconception that a species is a \"labelled structure\".  Clearly, I can consider every \"class of unlabelled structures\" as a combinatorial species, albeit possibly not in a very interesting way: simply let the symmetric group act trivially.",
    "created_at": "2014-06-11T20:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211889",
    "user": "https://github.com/mantepse"
}
```

A comment about a comment in the code: I think it's a misconception that a species is a "labelled structure".  Clearly, I can consider every "class of unlabelled structures" as a combinatorial species, albeit possibly not in a very interesting way: simply let the symmetric group act trivially.



---

archive/issue_comments_211890.json:
```json
{
    "body": "Replying to [comment:2 elixyre]:\n> I don't have (especially) problem with the species framework. I have a problem with how to implement a class of combinatorial structures.\n\n\n> The current way to do that consist in copy-paste a file like `sage.combinat.binay_trees.py` with some obscurs lines then adapt the code.\n\n\nI really would like to improve the usability of the species code, to make this task simpler.  But I do not yet understand: `binary_trees.py' does not define a species, does it?\n\n> I want use a species as a parent and I want define more sophisticate structures with its elements.\n\n\nHm.  What I'd like to see is a simple way to turn any given parent (eg. `BinaryTree') into a species simply by providing the action of the symmetric group.  But I think it's a really bad idea to have something like \"species\" and something like \"combinatorial structures\" side by side. \n \n> Furthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).\n\n\nI'm not sure if I understand.\n\n> About #16137, it seems to me your patch treats generating series but not about the framework of structures\n\n\nquite right (except that it's not my patch).  however, it's holding me up from implementing multivariate species, which are necessary to deal with most interesting structures.\n\nI admit that my second big holdup is that I find python a very very very difficult language.\n\nMartin",
    "created_at": "2014-06-11T20:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211890",
    "user": "https://github.com/mantepse"
}
```

Replying to [comment:2 elixyre]:
> I don't have (especially) problem with the species framework. I have a problem with how to implement a class of combinatorial structures.


> The current way to do that consist in copy-paste a file like `sage.combinat.binay_trees.py` with some obscurs lines then adapt the code.


I really would like to improve the usability of the species code, to make this task simpler.  But I do not yet understand: `binary_trees.py' does not define a species, does it?

> I want use a species as a parent and I want define more sophisticate structures with its elements.


Hm.  What I'd like to see is a simple way to turn any given parent (eg. `BinaryTree') into a species simply by providing the action of the symmetric group.  But I think it's a really bad idea to have something like "species" and something like "combinatorial structures" side by side. 
 
> Furthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).


I'm not sure if I understand.

> About #16137, it seems to me your patch treats generating series but not about the framework of structures


quite right (except that it's not my patch).  however, it's holding me up from implementing multivariate species, which are necessary to deal with most interesting structures.

I admit that my second big holdup is that I find python a very very very difficult language.

Martin



---

archive/issue_comments_211891.json:
```json
{
    "body": "Replying to [comment:5 mantepse]:\n> A comment about a comment in the code: I think it's a misconception that a species is a \"labelled structure\".  Clearly, I can consider every \"class of unlabelled structures\" as a combinatorial species, albeit possibly not in a very interesting way: simply let the symmetric group act trivially.\n\n\nOk you are right every class of combinatorial structures is a species (and by default there an trivial action of $S_n$). But my opinion is most of people don't know species and they want only to use/develop class of structures (so roughly a disjoint union of graded set). \nIt is why I want make a distinction between species and class of combinatorial structures. \n\nSpecially one problem if everything is species, that is one has to compute each isomorphism type for every unlabeled class of objects! Most of the time, we have already implemented this class! Furthermore, most of the operation on unlabeled object are well defined: cartesian product, cauchy product, sum, derivation, ... So if someone want use only an unlabeled class it is possible to do it efficiently.\n\n\n\nReplying to [comment:6 mantepse]:\n> I really would like to improve the usability of the species code, to make this task simpler.  But I do not yet understand: `binary_trees.py' does not define a species, does it?\n\n\nI have implemented a really simple example of class of structures in my last commit `mod:sage.categories.example.combinatorial_structures_compositions`:\n> |                                                                                                                                          |                                                                                               |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|\n> |[16685a3](http://git.sagemath.org/sage.git/commit/?id=16685a3be9c5deee1b76dddc2adbe33a10d1ad94)|`Ticket 16465 : improve the category and give a framework of class of combinatorial structures`|\n\n\nI like this design (not only because it is mine). It is really simple and understandable. If you have any comment... I want.\n\n\n\n> But I think it's a really bad idea to have something like \"species\" and something like \"combinatorial structures\" side by side. \n\n\nIt is a bad idea to make a great distinction between `permutations as simple combinatorial objects` and `permutations as species`!\nAnd I don't want them side by side! I want say a species is a refinement of a class of combinatorial structures.\n\n\n\n> > Furthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).\n\n> \n> I'm not sure if I understand.\n\n\nSorry my sentence is wrong : \"Set partitions, permutations have a (mathematical) structure of species (so both are in the species category)\" There is no disadvantage to patch the usual sets as species!\n\n\n\n> however, it's holding me up from implementing multivariate species, which are necessary to deal with most interesting structures. \n\n\n> I admit that my second big holdup is that I find python a very very very difficult language.\n\n\nThe fact is the Category framework of [comment: nthiery] is really a usefull tool to do that! I want to implementing linear species... but with category, that it is not necessary to reimplement everything from scratch or nearly from. Multivariate, ordered, linear species are species with a refinement of the category after that operations are still same!\n\n\n\nObviously, I understand your problem is not mine, you want enumeration and I want generation! And like I have already say:\n\n>> There exists a deterministic way to define and extract some coefficients in a generating series?? \n\n\nIt was rhetoric... Until that is not user friendly and homogeneous that is not possible to attune enumeration and generation...",
    "created_at": "2014-06-12T21:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211891",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Replying to [comment:5 mantepse]:
> A comment about a comment in the code: I think it's a misconception that a species is a "labelled structure".  Clearly, I can consider every "class of unlabelled structures" as a combinatorial species, albeit possibly not in a very interesting way: simply let the symmetric group act trivially.


Ok you are right every class of combinatorial structures is a species (and by default there an trivial action of $S_n$). But my opinion is most of people don't know species and they want only to use/develop class of structures (so roughly a disjoint union of graded set). 
It is why I want make a distinction between species and class of combinatorial structures. 

Specially one problem if everything is species, that is one has to compute each isomorphism type for every unlabeled class of objects! Most of the time, we have already implemented this class! Furthermore, most of the operation on unlabeled object are well defined: cartesian product, cauchy product, sum, derivation, ... So if someone want use only an unlabeled class it is possible to do it efficiently.



Replying to [comment:6 mantepse]:
> I really would like to improve the usability of the species code, to make this task simpler.  But I do not yet understand: `binary_trees.py' does not define a species, does it?


I have implemented a really simple example of class of structures in my last commit `mod:sage.categories.example.combinatorial_structures_compositions`:
> |                                                                                                                                          |                                                                                               |
> |------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
> |[16685a3](http://git.sagemath.org/sage.git/commit/?id=16685a3be9c5deee1b76dddc2adbe33a10d1ad94)|`Ticket 16465 : improve the category and give a framework of class of combinatorial structures`|


I like this design (not only because it is mine). It is really simple and understandable. If you have any comment... I want.



> But I think it's a really bad idea to have something like "species" and something like "combinatorial structures" side by side. 


It is a bad idea to make a great distinction between `permutations as simple combinatorial objects` and `permutations as species`!
And I don't want them side by side! I want say a species is a refinement of a class of combinatorial structures.



> > Furthermore, a set partition, a permutation, ... are structures of a species. It would be nice to merge the module `sage.combinat.species`. (That will be a second patch...).

> 
> I'm not sure if I understand.


Sorry my sentence is wrong : "Set partitions, permutations have a (mathematical) structure of species (so both are in the species category)" There is no disadvantage to patch the usual sets as species!



> however, it's holding me up from implementing multivariate species, which are necessary to deal with most interesting structures. 


> I admit that my second big holdup is that I find python a very very very difficult language.


The fact is the Category framework of [comment: nthiery] is really a usefull tool to do that! I want to implementing linear species... but with category, that it is not necessary to reimplement everything from scratch or nearly from. Multivariate, ordered, linear species are species with a refinement of the category after that operations are still same!



Obviously, I understand your problem is not mine, you want enumeration and I want generation! And like I have already say:

>> There exists a deterministic way to define and extract some coefficients in a generating series?? 


It was rhetoric... Until that is not user friendly and homogeneous that is not possible to attune enumeration and generation...



---

archive/issue_comments_211892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-13T03:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211893.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-13T15:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211893",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211894.json:
```json
{
    "body": "Some of my tests fails in `sage.combinat.structures.operations.sequences` but I can't reproduce the failure in the terminal. I don't understand that... I believe there is some problem with `Categories` during the tests. Do you have any idea, [comment: nthiery]?",
    "created_at": "2014-06-13T15:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211894",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Some of my tests fails in `sage.combinat.structures.operations.sequences` but I can't reproduce the failure in the terminal. I don't understand that... I believe there is some problem with `Categories` during the tests. Do you have any idea, [comment: nthiery]?



---

archive/issue_comments_211895.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-17T04:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211896.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-17T16:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211897.json:
```json
{
    "body": "Ummm i fixed some documentation, is it possible to push it without changing the branch ?",
    "created_at": "2014-07-03T20:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211897",
    "user": "https://github.com/avirmaux"
}
```

Ummm i fixed some documentation, is it possible to push it without changing the branch ?



---

archive/issue_comments_211898.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-07-09T03:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211898",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

New commits:



---

archive/issue_comments_211899.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-09T04:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-10T23:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_048403.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16228#event-48403"
}
```



---

archive/issue_comments_211901.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-22T10:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211902.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-11-22T10:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211902",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

New commits:



---

archive/issue_comments_211903.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-22T10:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211903",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211904.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-09T17:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T14:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211906.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-13T14:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211906",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_211907.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-23T10:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16228",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16228#issuecomment-211907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
