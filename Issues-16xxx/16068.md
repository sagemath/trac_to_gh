# Issue 16068: Use base_ring in chord_and_tangent

archive/issues_015831.json:
```json
{
    "body": "Right now, the following fails:\n\n```\nsage: from sage.schemes.elliptic_curves.constructor import chord_and_tangent\nsage: R = PolynomialRing(QQ, 'x,y,z')\nsage: x,y,z = R.gens()\nsage: cubic = x**3 - 4*x**2*y - 65*x*y**2 + 3*x*y*z - 76*y*z**2\nsage: f0 = (0, 1, 0)\nsage: chord_and_tangent(cubic, f0)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-9-05d9ab02db04> in <module>()\n----> 1 chord_and_tangent(cubic, f0)\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    898             g = F.substitute({x:y, y:x})\n    899             Q = [P[1], P[0], P[2]]\n--> 900             R = chord_and_tangent(g, Q)\n    901             return [R[1], R[0], R[2]]\n    902         elif dz != 0:\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    917         g = F.substitute({x:z, z:x})\n    918         Q = [P[2], P[1], P[0]]\n--> 919         R = chord_and_tangent(g, Q)\n    920         return [R[2], R[1], R[0]]\n    921     # Ft has a double zero at t=0 by construction, which we now remove\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    924     # first case: the third point is at t=infinity\n    925     if Ft.is_constant():\n--> 926         return projective_point([dy, -dx, 0])\n    927     # second case: the third point is at finite t\n    928     else:\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in projective_point(p)\n    955     from sage.rings.integer import GCD_list, LCM_list\n    956     try:\n--> 957         p_gcd = GCD_list([x.numerator() for x in p])\n    958         p_lcm = LCM_list([x.denominator() for x in p])\n    959     except AttributeError:\n\nTypeError: 'int' object is not callable\n```\n\nThis is very simple to fix - convert a 0 into an element of the base ring of the curve and I've attached a branch that does that.\n\nCC:  @vbraun\n\nBranch/Commit: 2c6778933512a38353951459e75cebbf84131346\n\nReviewer: Peter Bruin\n\nAuthor: Jan Keitel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/16068\n\n",
    "closed_at": "2014-04-07T19:08:55Z",
    "created_at": "2014-04-07T08:40:28Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Use base_ring in chord_and_tangent",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16068",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```
Right now, the following fails:

```
sage: from sage.schemes.elliptic_curves.constructor import chord_and_tangent
sage: R = PolynomialRing(QQ, 'x,y,z')
sage: x,y,z = R.gens()
sage: cubic = x**3 - 4*x**2*y - 65*x*y**2 + 3*x*y*z - 76*y*z**2
sage: f0 = (0, 1, 0)
sage: chord_and_tangent(cubic, f0)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-9-05d9ab02db04> in <module>()
----> 1 chord_and_tangent(cubic, f0)

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    898             g = F.substitute({x:y, y:x})
    899             Q = [P[1], P[0], P[2]]
--> 900             R = chord_and_tangent(g, Q)
    901             return [R[1], R[0], R[2]]
    902         elif dz != 0:

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    917         g = F.substitute({x:z, z:x})
    918         Q = [P[2], P[1], P[0]]
--> 919         R = chord_and_tangent(g, Q)
    920         return [R[2], R[1], R[0]]
    921     # Ft has a double zero at t=0 by construction, which we now remove

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    924     # first case: the third point is at t=infinity
    925     if Ft.is_constant():
--> 926         return projective_point([dy, -dx, 0])
    927     # second case: the third point is at finite t
    928     else:

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in projective_point(p)
    955     from sage.rings.integer import GCD_list, LCM_list
    956     try:
--> 957         p_gcd = GCD_list([x.numerator() for x in p])
    958         p_lcm = LCM_list([x.denominator() for x in p])
    959     except AttributeError:

TypeError: 'int' object is not callable
```

This is very simple to fix - convert a 0 into an element of the base ring of the curve and I've attached a branch that does that.

CC:  @vbraun

Branch/Commit: 2c6778933512a38353951459e75cebbf84131346

Reviewer: Peter Bruin

Author: Jan Keitel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/16068





---

archive/issue_comments_257662.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257662",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257663.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jkeitel/chord_and_tangent\"",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257663",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing branch from "" to "u/jkeitel/chord_and_tangent"



---

archive/issue_comments_257664.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[caeb6e1](https://github.com/sagemath/sagetrac-mirror/commit/caeb6e1cfb5af2139571e95148d62e17bebd87da)|`Merge branch 'develop' of trac.sagemath.org:sage into develop`|\n|[3f35e0b](https://github.com/sagemath/sagetrac-mirror/commit/3f35e0bbadf256e1a1e8320ddeb24e5de76eefb8)|`Merge branch 'develop' of trac.sagemath.org:sage into develop`|\n|[2a57b18](https://github.com/sagemath/sagetrac-mirror/commit/2a57b1843b30b38ac84da8d7a57b05d93d3113b9)|`Fixed appearence of int in chord_and_tangent`|",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257664",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[caeb6e1](https://github.com/sagemath/sagetrac-mirror/commit/caeb6e1cfb5af2139571e95148d62e17bebd87da)|`Merge branch 'develop' of trac.sagemath.org:sage into develop`|
|[3f35e0b](https://github.com/sagemath/sagetrac-mirror/commit/3f35e0bbadf256e1a1e8320ddeb24e5de76eefb8)|`Merge branch 'develop' of trac.sagemath.org:sage into develop`|
|[2a57b18](https://github.com/sagemath/sagetrac-mirror/commit/2a57b1843b30b38ac84da8d7a57b05d93d3113b9)|`Fixed appearence of int in chord_and_tangent`|



---

archive/issue_comments_257665.json:
```json
{
    "body": "Changing commit from \"\" to \"2a57b1843b30b38ac84da8d7a57b05d93d3113b9\"",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257665",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing commit from "" to "2a57b1843b30b38ac84da8d7a57b05d93d3113b9"



---

archive/issue_comments_257666.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257666",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_257667.json:
```json
{
    "body": "<a id='comment:2'></a>\nLooks good, but the line `See :trac:`16068`::` is indented one level too many.\n\n(I wonder why this function is called `chord_and_tangent` given that it only implements the \"tangent\" part, but that is irrelevant for this bug.)",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257667",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:2'></a>
Looks good, but the line `See :trac:`16068`::` is indented one level too many.

(I wonder why this function is called `chord_and_tangent` given that it only implements the "tangent" part, but that is irrelevant for this bug.)



---

archive/issue_comments_257668.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Peter Bruin\"",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257668",
    "user": "https://github.com/pjbruin"
}
```

Changing reviewer from "" to "Peter Bruin"



---

archive/issue_comments_257669.json:
```json
{
    "body": "Changing commit from \"2a57b1843b30b38ac84da8d7a57b05d93d3113b9\" to \"2c6778933512a38353951459e75cebbf84131346\"",
    "created_at": "2014-04-07T10:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a57b1843b30b38ac84da8d7a57b05d93d3113b9" to "2c6778933512a38353951459e75cebbf84131346"



---

archive/issue_comments_257670.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[2c67789](https://github.com/sagemath/sagetrac-mirror/commit/2c6778933512a38353951459e75cebbf84131346)|`Fixed indentation.`|",
    "created_at": "2014-04-07T10:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[2c67789](https://github.com/sagemath/sagetrac-mirror/commit/2c6778933512a38353951459e75cebbf84131346)|`Fixed indentation.`|



---

archive/issue_comments_257671.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-07T10:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257671",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257672.json:
```json
{
    "body": "<a id='comment:4'></a>\nThanks, I've changed the indentation.",
    "created_at": "2014-04-07T10:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257672",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

<a id='comment:4'></a>
Thanks, I've changed the indentation.



---

archive/issue_comments_257673.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-07T12:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257673",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T19:08:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16068#event-61563"
}
```



---

archive/issue_comments_257674.json:
```json
{
    "body": "Changing branch from \"u/jkeitel/chord_and_tangent\" to \"2c6778933512a38353951459e75cebbf84131346\"",
    "created_at": "2014-04-07T19:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257674",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jkeitel/chord_and_tangent" to "2c6778933512a38353951459e75cebbf84131346"



---

archive/issue_comments_257675.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-07T19:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16068",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16068#issuecomment-257675",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
