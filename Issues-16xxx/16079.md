# Issue 16079: Python 3 preparation: In Py3 there is only one string type "str" (which is unicode!)

archive/issues_015842.json:
```json
{
    "body": "This is often considered the most important change in Py3. The approach still has to be determined!\n\nThe tool 2to3 simple changes `unicode` to `str` and removes the u-prefix from string literals (`u'xxx'` to `'xxx'`).\n\n\nBut the code has to depend on the Python version! \n\nThis ticket is tracked as a dependency of meta-ticket #16052.\n\nCC:  @tscrim @jm58660 @jdemeyer\n\nKeywords: python3, unicode\n\nAuthor: Andr\u00e9 Apitzsch\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/16079\n\n",
    "closed_at": "2020-01-07T15:23:49Z",
    "created_at": "2014-04-07T09:02:53Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Python 3 preparation: In Py3 there is only one string type \"str\" (which is unicode!)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16079",
    "user": "https://github.com/wluebbe"
}
```
This is often considered the most important change in Py3. The approach still has to be determined!

The tool 2to3 simple changes `unicode` to `str` and removes the u-prefix from string literals (`u'xxx'` to `'xxx'`).


But the code has to depend on the Python version! 

This ticket is tracked as a dependency of meta-ticket #16052.

CC:  @tscrim @jm58660 @jdemeyer

Keywords: python3, unicode

Author: Andr√© Apitzsch

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/16079





---

archive/issue_events_047326.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47326"
}
```



---

archive/issue_events_047327.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47327"
}
```



---

archive/issue_events_047328.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47328"
}
```



---

archive/issue_comments_219112.json:
```json
{
    "body": "<a id='comment:3'></a>The u-prefix has been readded to python 3.3, so we don't have to care about it (now).",
    "created_at": "2015-05-25T21:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219112",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:3'></a>The u-prefix has been readded to python 3.3, so we don't have to care about it (now).



---

archive/issue_comments_219113.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-25T21:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219113",
    "user": "https://github.com/a-andre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_219114.json:
```json
{
    "body": "<a id='comment:4'></a>this breaks the doc building, see patchbot report",
    "created_at": "2015-05-27T19:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219114",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>this breaks the doc building, see patchbot report



---

archive/issue_comments_219115.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-27T19:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219115",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_047329.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-04-28T06:50:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47329"
}
```



---

archive/issue_events_047330.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-04-28T06:50:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47330"
}
```



---

archive/issue_comments_219116.json:
```json
{
    "body": "Changing component from distribution to python3.",
    "created_at": "2016-04-28T06:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219116",
    "user": "https://github.com/fchapoton"
}
```

Changing component from distribution to python3.



---

archive/issue_comments_219117.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2016-05-15T07:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219117",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_219118.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-06-29T19:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219119.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-03T08:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219120.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-03T13:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_047331.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-03T19:17:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47331"
}
```



---

archive/issue_events_047332.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-03T19:17:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47332"
}
```



---

archive/issue_comments_219121.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-05T10:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219121",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_219122.json:
```json
{
    "body": "<a id='comment:11'></a>bot is green\n\nmaybe this is only a good step, to be done in another ticket ?",
    "created_at": "2016-08-05T10:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219122",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>bot is green

maybe this is only a good step, to be done in another ticket ?



---

archive/issue_comments_219123.json:
```json
{
    "body": "<a id='comment:12'></a>I don't believe that `src/sage/misc/lazy_string.pyx` needs any changes at all. There is nothing wrong with having a `__unicode__` method (I guess it would not be used in Python 3, but that is fine).",
    "created_at": "2016-08-12T09:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219123",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>I don't believe that `src/sage/misc/lazy_string.pyx` needs any changes at all. There is nothing wrong with having a `__unicode__` method (I guess it would not be used in Python 3, but that is fine).



---

archive/issue_comments_219124.json:
```json
{
    "body": "<a id='comment:13'></a>In `src/sage/misc/sage_input.py` and `six.string_types`, I would use `six.string_types` instead of `(str, six.text_type)` or `[str, six.text_type]`.\n\nFor the docbuilder and related modules (like `sageinspect.py`), maybe we should do that in a separate ticket and go unicode all-the-way in that ticket.",
    "created_at": "2016-08-12T09:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219124",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>In `src/sage/misc/sage_input.py` and `six.string_types`, I would use `six.string_types` instead of `(str, six.text_type)` or `[str, six.text_type]`.

For the docbuilder and related modules (like `sageinspect.py`), maybe we should do that in a separate ticket and go unicode all-the-way in that ticket.



---

archive/issue_comments_219125.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-13T08:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219126.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-19T09:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219127.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-27T06:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219127",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_047333.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:04:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47333"
}
```



---

archive/issue_events_047334.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-12T18:04:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47334"
}
```



---

archive/issue_comments_219128.json:
```json
{
    "body": "<a id='comment:18'></a>see #14153 for the documentation framework",
    "created_at": "2017-04-30T18:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219128",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>see #14153 for the documentation framework



---

archive/issue_comments_219129.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,9 +5,7 @@\n \n But the code has to depend on the Python version! \n \n-This ticket is tracked as a dependency of meta-ticket ticket:16052.\n-\n-Keywords: python3\n+This ticket is tracked as a dependency of meta-ticket #16052.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-04-30T18:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219129",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,9 +5,7 @@
 
 But the code has to depend on the Python version! 
 
-This ticket is tracked as a dependency of meta-ticket ticket:16052.
-
-Keywords: python3
+This ticket is tracked as a dependency of meta-ticket #16052.
 
 Comment: 1
 
``````




---

archive/issue_events_047335.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-30T18:21:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47335"
}
```



---

archive/issue_events_047336.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-30T18:21:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47336"
}
```



---

archive/issue_comments_219130.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-30T19:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219131.json:
```json
{
    "body": "<a id='comment:21'></a>see #22916 for a preliminary tiny step",
    "created_at": "2017-04-30T19:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219131",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>see #22916 for a preliminary tiny step



---

archive/issue_comments_219132.json:
```json
{
    "body": "Changing keywords from \"python3\" to \"python3, unicode\".",
    "created_at": "2017-05-01T12:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219132",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "python3" to "python3, unicode".



---

archive/issue_comments_219133.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-20T11:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219134.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-20T12:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219135.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-29T08:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219136.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-29T08:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219137.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-19T19:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_219138.json:
```json
{
    "body": "<a id='comment:28'></a>I have created a new ticket that just wants to introduce the conversion tools: #24186.",
    "created_at": "2017-11-10T13:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219138",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>I have created a new ticket that just wants to introduce the conversion tools: #24186.



---

archive/issue_events_047337.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-07T15:23:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47337"
}
```



---

archive/issue_events_047338.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-07T15:23:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47338"
}
```



---

archive/issue_events_047339.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-07T15:23:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16079#event-47339"
}
```



---

archive/issue_comments_219139.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-01-07T15:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219139",
    "user": "https://github.com/embray"
}
```

Resolution: worksforme



---

archive/issue_comments_219140.json:
```json
{
    "body": "<a id='comment:30'></a>I think this can be considered \"fixed\"--we've addressed all major string-related issues in the Python 3 port.",
    "created_at": "2020-01-07T15:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16079",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16079#issuecomment-219140",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>I think this can be considered "fixed"--we've addressed all major string-related issues in the Python 3 port.
