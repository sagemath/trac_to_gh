# Issue 10193: Enumerated set factories

Issue created by migration from https://trac.sagemath.org/ticket/10194

Original creator: nthiery

Original creation time: 2010-10-31 10:05:36

Assignee: sage-combinat

CC:  sage-combinat hivert




---

Comment by nthiery created at 2010-10-31 10:06:02

Patch under development on the Sage-Combinat patch server.


---

Comment by hivert created at 2011-05-09 19:45:24

Changing assignee from sage-combinat to hivert.


---

Comment by hivert created at 2011-05-09 19:46:24

Changing keywords from "" to "factories, days30".


---

Comment by hivert created at 2012-02-06 14:53:34

Changing keywords from "factories, days30" to "factories, days30, Cernay2012".


---

Comment by hivert created at 2012-03-29 20:30:12

Changing status from new to needs_review.


---

Attachment


---

Comment by davidloeffler created at 2012-04-06 08:43:15

Changing status from needs_review to needs_work.


---

Comment by davidloeffler created at 2012-04-06 08:43:15

This fails doctests on every version tested -- see patchbot logs


---

Comment by hivert created at 2012-04-06 09:03:20

Replying to [comment:7 davidloeffler]:
> This fails doctests on every version tested -- see patchbot logs

I forgot a dependency to #10963. Thanks for pointing this out.


---

Comment by hivert created at 2012-04-06 09:03:20

Changing status from needs_work to needs_review.


---

Comment by davidloeffler created at 2012-04-06 09:38:40

There is no patch at #10963. I don't think this can be meaningfully tagged as "needs review" when one of its dependencies doesn't exist yet.


---

Comment by davidloeffler created at 2012-04-06 09:38:40

Changing status from needs_review to needs_info.


---

Comment by hivert created at 2012-04-06 10:46:53

Replying to [comment:9 davidloeffler]:
> There is no patch at #10963. I don't think this can be meaningfully tagged as "needs review" when one of its dependencies doesn't exist yet.

As you can see on #10963, the patch is far for being inexistent as Simon and Christian started to review it. Of course it is on the Sage-Combinat queue. I need to ping Nicolas to have him finish it. Now, I don't see why having Nicolas's patch unfinished forbid me to have some feedback on this one. And asking for such a feedback seems to be a perfectly meaningful reason for putting "needs review"... The only reason I can see for not doing it is that it can trouble the patchbot. Do you have another one ?


---

Comment by nthiery created at 2012-04-07 07:31:04

Salut Florent!

Why is there a dependency on 10963? In the queue, this patch is much lower than 10963.


---

Comment by nthiery created at 2012-04-07 07:41:53

Ah, I see, it's about the glitch Sets().Facade() <-> Sets().Facades().

Since anyway the patch is up the queue, I suggest we finish commuting the two patches. Just use Sets().Facades() (we will need to keep the backward compatibility anyway).

With that, the tests pass up to to trivially failing doctests:

```
File "/opt/sage-5.0.beta11/devel/sage-combinat/sage/structureset_factories.py", line 644:
    sage: P2.category()
Expected:
    Join of Category of facade finite enumerated sets and Policy category with facade parent AllPairs
Got:
    Join of Category of finite enumerated sets and Policy category with facade parent AllPairs
**********************************************************************
File "/opt/sage-5.0.beta11/devel/sage-combinat/sage/structure/set_factories.py", line 972:
    sage: P.category()
Expected:
    Join of Category of facade finite enumerated sets and Policy category with facade parent AllPairs
Got:
    Join of Category of finite enumerated sets and Policy category with facade parent AllPairs
```


Cheers,


---

Attachment

new version, rebased on 5.12.beta0, with cleanup


---

Comment by chapoton created at 2014-01-04 20:49:24

I have made a git branch, but it seems to be massively broken.

Some problems come from Sets().Facade() versus Sets().Facades() as explained before

Some other problems come from #14519

And some other problems I do not understand..
----
New commits:


---

Comment by git created at 2014-01-22 15:16:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-01-22 17:19:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-01-22 20:18:59

Temporary : emptied dependency field (was #10963)


---

Comment by git created at 2014-01-22 20:34:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-01-23 21:16:02

Changing status from needs_info to needs_work.


---

Comment by chapoton created at 2014-01-23 21:16:02

This needs to be worked upon, as it is not working at all.


---

Comment by chapoton created at 2014-01-28 20:34:44

Maybe some of the problems come from #13801 ?


---

Comment by git created at 2014-04-08 09:06:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nborie created at 2014-04-08 15:07:37

Changing keywords from "factories, days30, Cernay2012" to "factories, days30, Cernay2012, days57".


---

Comment by git created at 2014-04-08 15:27:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-08 16:58:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by hivert created at 2014-04-08 18:49:26

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2014-04-08 19:08:24

Maybe you should add #13580 as a dependency ?


---

Comment by hivert created at 2014-04-08 19:22:43

Replying to [comment:29 chapoton]:
> Maybe you should add #13580 as a dependency ?

Why ? Those are completely different things.


---

Comment by chapoton created at 2014-04-08 19:29:31

Then why do you have that in the commits of this ticket ?


---

Comment by hivert created at 2014-04-08 19:32:37

Replying to [comment:31 chapoton]:
> Then why do you have that in the commits of this ticket ?

I probably screwed things up with git ! I'm trying to fix the problem.


---

Comment by nborie created at 2014-04-08 19:43:09

For information, this features is largely tested in #16094


---

Comment by hivert created at 2014-04-08 20:10:41

Should be fixed now ! But I had to **rebase** the branch. So Nicolas, you will have to rebase yours at some point. Sorry !
----
New commits:


---

Comment by chapoton created at 2014-04-15 12:11:25

I have made one more commit. Now all tests pass, and code is in the pep8 standard.
----
New commits:


---

Comment by chapoton created at 2014-04-15 12:13:51

There remains a pyflakes warning thta needs to be taken care of :

```
src/sage/structure/set_factories.py:722: undefined name 'FacadeParentPolicyCategory'
```



---

Comment by chapoton created at 2014-04-16 10:17:58

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-05-09 20:24:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-05-10 07:47:41

what about the pyflakes warning ? could you take care of that please ?


---

Comment by git created at 2014-05-23 20:13:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-10 19:13:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-07-10 19:15:52

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2014-08-23 12:15:35

At last, got a green report from the bot. Florent, do you think that this is ready ?


---

Comment by git created at 2014-08-26 19:41:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-26 19:50:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-25 19:29:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-09-25 19:32:29

`@`Florent : What is the meaning of the sentences

`Put a nice warning _single_pair`

and 

`Comment that and put link to documentation caveat....`

in the example file ?


---

Comment by git created at 2014-10-17 13:12:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-10-22 08:29:42

`@`Florent : PING, cf comment 53


---

Comment by chapoton created at 2014-10-22 08:29:42

Changing status from needs_review to needs_info.


---

Comment by git created at 2015-05-08 21:54:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-05-12 08:11:33

9 failing doctests, see patchbot report


---

Comment by git created at 2015-05-12 15:16:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by hivert created at 2015-05-12 15:18:49

Replying to [comment:57 chapoton]:
> 9 failing doctests, see patchbot report

Hi Frederic,

I should have fixed most of the problems (including comment 53). I still need a last pass of re-reading before putting it as needs review.

Florent


---

Comment by git created at 2015-05-18 22:14:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by hivert created at 2015-05-18 22:16:16

Changing status from needs_info to needs_review.


---

Comment by hivert created at 2015-05-18 22:16:16

This should be ready for review

Florent


---

Comment by git created at 2015-05-19 16:38:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-05-19 18:24:46

Was there any need for a merge ?
By the way, I usually do the merge in the other direction. This gives much smaller commits,
as you can see in the commit list.


---

Comment by hivert created at 2015-05-19 22:05:05

Replying to [comment:63 chapoton]:
> Was there any need for a merge ?
> By the way, I usually do the merge in the other direction. This gives much smaller commits,
> as you can see in the commit list.

No there wasn't, but my goal is to update trees to use factories and ultimately to do computation in operads. As you merged 6.7 in operads I also merged this one to avoid going back and forth. 

There is not diff before and after the merge so that you can review on the unmerged version.


---

Comment by chapoton created at 2015-08-01 08:18:06

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2015-08-01 08:18:06

ok, let this get in. There are several combinatorial tickets on top of it.


---

Comment by vbraun created at 2015-08-01 11:37:53

Resolution: fixed
