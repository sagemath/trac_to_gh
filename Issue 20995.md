# Issue 20995: Fractional part function {x}

archive/issues_020995.json:
```json
{
    "body": "This symbolic function will also be needed by the periodic piecewise function enhancement (#21215). It is in Sympy too.\n\nhttps://en.wikipedia.org/wiki/Fractional_part\n\nIssue created by migration from https://trac.sagemath.org/ticket/21232\n\n",
    "created_at": "2016-08-12T12:47:57Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Fractional part function {x}",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20995",
    "user": "https://github.com/rwst"
}
```
This symbolic function will also be needed by the periodic piecewise function enhancement (#21215). It is in Sympy too.

https://en.wikipedia.org/wiki/Fractional_part

Issue created by migration from https://trac.sagemath.org/ticket/21232





---

archive/issue_comments_290490.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-13T15:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290490",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_290491.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-13T15:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290491",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_290492.json:
```json
{
    "body": "\n```\n+            if isinstance(x, (int, long)):\n+                return x - Integer(x)\n```\n\nProbably can just return Integer(0)\n\n\n```\n+    def _print_latex_(self, x):\n+        r\"\"\"\n+        EXAMPLES::\n+\n+            sage: latex(frac(x))\n+            \\left\\{ x \\right\\}\n+        \"\"\"\n+        return r\"\\left\\{ %s \\right\\}\"%latex(x)\n```\n\nI use this braces notation myself, but I can imagine that it's not universally used, and some people may prefer `\\mathop{\\mathrm{frac}}(x)`.  Perhaps a global option?",
    "created_at": "2016-08-13T19:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290492",
    "user": "https://github.com/mkoeppe"
}
```


```
+            if isinstance(x, (int, long)):
+                return x - Integer(x)
```

Probably can just return Integer(0)


```
+    def _print_latex_(self, x):
+        r"""
+        EXAMPLES::
+
+            sage: latex(frac(x))
+            \left\{ x \right\}
+        """
+        return r"\left\{ %s \right\}"%latex(x)
```

I use this braces notation myself, but I can imagine that it's not universally used, and some people may prefer `\mathop{\mathrm{frac}}(x)`.  Perhaps a global option?



---

archive/issue_comments_290493.json:
```json
{
    "body": "\n```\n+            elif isinstance(x, (float, complex)):\n+                return x - Integer(int(math.floor(x)))\n```\n\nAlso, going through int seems dangerous here",
    "created_at": "2016-08-13T19:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290493",
    "user": "https://github.com/mkoeppe"
}
```


```
+            elif isinstance(x, (float, complex)):
+                return x - Integer(int(math.floor(x)))
```

Also, going through int seems dangerous here



---

archive/issue_comments_290494.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-08-13T19:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290494",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290495.json:
```json
{
    "body": "Replying to [comment:5 mkoeppe]:\n> {{{\n> +            elif isinstance(x, (float, complex)):\n> +                return x - Integer(int(math.floor(x)))\n> }}}\n> Also, going through int seems dangerous here\nI retract this comment. I didn't realize `int()` makes Python bignums.",
    "created_at": "2016-08-13T19:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290495",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 mkoeppe]:
> {{{
> +            elif isinstance(x, (float, complex)):
> +                return x - Integer(int(math.floor(x)))
> }}}
> Also, going through int seems dangerous here
I retract this comment. I didn't realize `int()` makes Python bignums.



---

archive/issue_comments_290496.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-17T06:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290497.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-17T06:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290497",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290498.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-17T18:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290498",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290499.json:
```json
{
    "body": "Looks good to me.\n\nFor full symbolic functionality (which I never use), I guess one would need to tie this in with the simplification and assumptions machinery, so that things like this behave better:\n\n```\nsage: simplify(frac(frac(x)))\nfrac(frac(x))\nsage: simplify(frac(floor(x)))\nfrac(floor(x))\nsage: assume(x, 'integer')\nsage: simplify(frac(x))\nfrac(x)\n```\n\nPerhaps on a follow-up ticket?",
    "created_at": "2016-08-17T18:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290499",
    "user": "https://github.com/mkoeppe"
}
```

Looks good to me.

For full symbolic functionality (which I never use), I guess one would need to tie this in with the simplification and assumptions machinery, so that things like this behave better:

```
sage: simplify(frac(frac(x)))
frac(frac(x))
sage: simplify(frac(floor(x)))
frac(floor(x))
sage: assume(x, 'integer')
sage: simplify(frac(x))
frac(x)
```

Perhaps on a follow-up ticket?



---

archive/issue_comments_290500.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-19T22:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20995#issuecomment-290500",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_019905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:44:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20995",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20995#event-19905"
}
```
