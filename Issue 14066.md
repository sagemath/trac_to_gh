# Issue 14066: Remove function call syntax for symbolic expressions

archive/issues_014066.json:
```json
{
    "body": "Assignee: burcin\n\nCC:  nthiery kini @davewittemorris nbruin egourgoulhon\n\nThe function call syntax for symbolic expressions has been deprecated for over four years. It is about time it raised some errors. This will prevent people from getting confused because of behavior [like this](http://ask.sagemath.org/question/2357/the-difference-between-fx3-and-f3-of-callable).\n\nIssue created by migration from https://trac.sagemath.org/ticket/14270\n\n",
    "created_at": "2013-03-14T16:04:31Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "title": "Remove function call syntax for symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14066",
    "user": "ppurka"
}
```
Assignee: burcin

CC:  nthiery kini @davewittemorris nbruin egourgoulhon

The function call syntax for symbolic expressions has been deprecated for over four years. It is about time it raised some errors. This will prevent people from getting confused because of behavior [like this](http://ask.sagemath.org/question/2357/the-difference-between-fx3-and-f3-of-callable).

Issue created by migration from https://trac.sagemath.org/ticket/14270





---

archive/issue_comments_176088.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-14T16:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176088",
    "user": "ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_176089.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-03-15T03:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176089",
    "user": "ppurka"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176090.json:
```json
{
    "body": "I am able to fix all the doctests except for the following one in combinat/tutorial.py.\n\nThe example which fails seems to make no sense to me. A `substitute_function` method is being used to substitute a function with a symbolic expression.\n\n```\nsage: C, z = var('C,z');\nsage: sys = [ C == z + C*C ]\nsage: sol = solve(sys, C, solution_dict=True); sol\n[{C: -1/2*sqrt(-4*z + 1) + 1/2}, {C: 1/2*sqrt(-4*z + 1) + 1/2}]\nsage: s0 = sol[0][C]; s1 = sol[1][C]\n\n...\n\nsage: C = s0; C\n-1/2*sqrt(-4*z + 1) + 1/2\n\n...\n\nsage: equadiff\n(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0\nsage: Cf = sage.symbolic.function_factory.function('C')\nsage: equadiff.substitute_function(Cf, s0)  # Original answer is the deprecation + answer\n...\nTypeError: %d format: a number is required, not NoneType\n```\n\nLet us try to \"fix\" this (`z` is a symbolic variable). Somehow the following works (beats me why it does):\n\n```\nsage: equadiff.substitute_function(Cf(z), s0)\n(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0     # OK, so this seems to work\n```\n\nBut now the next command in the tutorial gives `False` instead of `True`\n\n```\nsage: bool(equadiff.substitute_function(Cf(z), s0))  \nFalse\n```\n\n\nWhy is all this happening? Looking at the documentation of `substitute_function` shows that it should be used for substituting *functions*, not anything else\n\n```\n    def substitute_function(self, original, new):\n        \"\"\"\n        Returns this symbolic expressions all occurrences of the\n        function *original* replaced with the function *new*.\n```\n\n\nAnd what exactly are we substituting above?\n\n```\nsage: type(Cf)\nsage.symbolic.function_factory.NewSymbolicFunction\nsage: type(s0)\nsage.symbolic.expression.Expression\n```\n\nWe are substituting a symbolic function with a symbolic expression! How was this even working earlier?\n\nWhat should I do with this portion of the tutorial? Delete this?",
    "created_at": "2013-03-19T08:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176090",
    "user": "ppurka"
}
```

I am able to fix all the doctests except for the following one in combinat/tutorial.py.

The example which fails seems to make no sense to me. A `substitute_function` method is being used to substitute a function with a symbolic expression.

```
sage: C, z = var('C,z');
sage: sys = [ C == z + C*C ]
sage: sol = solve(sys, C, solution_dict=True); sol
[{C: -1/2*sqrt(-4*z + 1) + 1/2}, {C: 1/2*sqrt(-4*z + 1) + 1/2}]
sage: s0 = sol[0][C]; s1 = sol[1][C]

...

sage: C = s0; C
-1/2*sqrt(-4*z + 1) + 1/2

...

sage: equadiff
(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0
sage: Cf = sage.symbolic.function_factory.function('C')
sage: equadiff.substitute_function(Cf, s0)  # Original answer is the deprecation + answer
...
TypeError: %d format: a number is required, not NoneType
```

Let us try to "fix" this (`z` is a symbolic variable). Somehow the following works (beats me why it does):

```
sage: equadiff.substitute_function(Cf(z), s0)
(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0     # OK, so this seems to work
```

But now the next command in the tutorial gives `False` instead of `True`

```
sage: bool(equadiff.substitute_function(Cf(z), s0))  
False
```


Why is all this happening? Looking at the documentation of `substitute_function` shows that it should be used for substituting *functions*, not anything else

```
    def substitute_function(self, original, new):
        """
        Returns this symbolic expressions all occurrences of the
        function *original* replaced with the function *new*.
```


And what exactly are we substituting above?

```
sage: type(Cf)
sage.symbolic.function_factory.NewSymbolicFunction
sage: type(s0)
sage.symbolic.expression.Expression
```

We are substituting a symbolic function with a symbolic expression! How was this even working earlier?

What should I do with this portion of the tutorial? Delete this?



---

archive/issue_comments_176091.json:
```json
{
    "body": "Apply to devel/sage",
    "created_at": "2013-03-19T08:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176091",
    "user": "ppurka"
}
```

Apply to devel/sage



---

archive/issue_comments_176092.json:
```json
{
    "body": "Attachment [trac_14270-raise_error_on_function-call.patch](tarball://root/attachments/some-uuid/ticket14270/trac_14270-raise_error_on_function-call.patch) by kcrisman created at 2013-03-20 03:16:12\n\nReplying to [comment:3 ppurka]:\n> I am able to fix all the doctests except for the following one in combinat/tutorial.py.\n<snip>\n> What should I do with this portion of the tutorial? Delete this?\nI'm cc:ing Nicolas, who should know what is going on here.",
    "created_at": "2013-03-20T03:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176092",
    "user": "kcrisman"
}
```

Attachment [trac_14270-raise_error_on_function-call.patch](tarball://root/attachments/some-uuid/ticket14270/trac_14270-raise_error_on_function-call.patch) by kcrisman created at 2013-03-20 03:16:12

Replying to [comment:3 ppurka]:
> I am able to fix all the doctests except for the following one in combinat/tutorial.py.
<snip>
> What should I do with this portion of the tutorial? Delete this?
I'm cc:ing Nicolas, who should know what is going on here.



---

archive/issue_comments_176093.json:
```json
{
    "body": "I'd also say that I think the prep tutorial one should still talk about this at some length, to explain (in the event this is done) *why* this doesn't work, because a lot of people will now and forevermore expect that it will work.  Similarly, most of these examples presumably should be moved to the new syntax, perhaps even with an explanatory remark as to exactly why that is the syntax.  For instance, how *would* one do the matrix example `h(x)` now?    We should be careful not to remove anything, just to change how it works to the appropriate way post-this-ticket.\n\nRant I don't actually want to rehash any more, but put here for completeness:\n\n    <rant>\n    Because distinguishing between a function and a symbolic expression is an unnatural, CS-y thing to do; any symbolic expression is obviously a function of all variables in it, mathematically; for any function with more than one `var` I agree we don't want this (as indeed the example in the prep document points out) but for one-variable expressions (pace Jason, who will immediately ask whether `x+y-y` is one variable) it seems worth the potential for confusion...\n    </rant>",
    "created_at": "2013-03-20T03:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176093",
    "user": "kcrisman"
}
```

I'd also say that I think the prep tutorial one should still talk about this at some length, to explain (in the event this is done) *why* this doesn't work, because a lot of people will now and forevermore expect that it will work.  Similarly, most of these examples presumably should be moved to the new syntax, perhaps even with an explanatory remark as to exactly why that is the syntax.  For instance, how *would* one do the matrix example `h(x)` now?    We should be careful not to remove anything, just to change how it works to the appropriate way post-this-ticket.

Rant I don't actually want to rehash any more, but put here for completeness:

    <rant>
    Because distinguishing between a function and a symbolic expression is an unnatural, CS-y thing to do; any symbolic expression is obviously a function of all variables in it, mathematically; for any function with more than one `var` I agree we don't want this (as indeed the example in the prep document points out) but for one-variable expressions (pace Jason, who will immediately ask whether `x+y-y` is one variable) it seems worth the potential for confusion...
    </rant>



---

archive/issue_comments_176094.json:
```json
{
    "body": "Replying to [comment:5 kcrisman]:\n> I'd also say that I think the prep tutorial one should still talk about this at some length, to explain (in the event this is done) *why* this doesn't work, because a lot of people will now and forevermore expect that it will work.\n\nIMHO, the people who expect this to *still* work need to change their code. It has been in deprecated mode for over four years. That's more than enough time to change their habit and old code. I think someone hasn't complained before either because they are complacent or because they don't use this at all.\n\nWhile teaching a course with Sage, I remember that we ourselves ran into this problem with the students. It was annoying and confusing because we were unaware of the code and how to fix it. We would just ask the students to ignore those warnings. What would a beginner do after defining `f(x) = x^2`? The most natural thing would be to do `f(2)` or something similar to \"see\" that it can actually evaluate. Now imagine the same with `f = x^2` and what you get is the deprecation message and then the correct answer. Second time it is evaluated, there is no deprecation message, so a beginner will wonder what just happened in the first invocation. It is not a favorable impression. It gives the impression of a half-done software.\n\nI agree with you that it should be explained in the tutorial that there is a difference between symbolic functions and symbolic expressions and python functions.",
    "created_at": "2013-03-20T05:00:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176094",
    "user": "ppurka"
}
```

Replying to [comment:5 kcrisman]:
> I'd also say that I think the prep tutorial one should still talk about this at some length, to explain (in the event this is done) *why* this doesn't work, because a lot of people will now and forevermore expect that it will work.

IMHO, the people who expect this to *still* work need to change their code. It has been in deprecated mode for over four years. That's more than enough time to change their habit and old code. I think someone hasn't complained before either because they are complacent or because they don't use this at all.

While teaching a course with Sage, I remember that we ourselves ran into this problem with the students. It was annoying and confusing because we were unaware of the code and how to fix it. We would just ask the students to ignore those warnings. What would a beginner do after defining `f(x) = x^2`? The most natural thing would be to do `f(2)` or something similar to "see" that it can actually evaluate. Now imagine the same with `f = x^2` and what you get is the deprecation message and then the correct answer. Second time it is evaluated, there is no deprecation message, so a beginner will wonder what just happened in the first invocation. It is not a favorable impression. It gives the impression of a half-done software.

I agree with you that it should be explained in the tutorial that there is a difference between symbolic functions and symbolic expressions and python functions.



---

archive/issue_comments_176095.json:
```json
{
    "body": "This is actually the same as #8214, but that has no code, so I'm copying the two links from there to here before declaring it a dupe.",
    "created_at": "2015-02-01T09:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176095",
    "user": "rws"
}
```

This is actually the same as #8214, but that has no code, so I'm copying the two links from there to here before declaring it a dupe.



---

archive/issue_comments_176096.json:
```json
{
    "body": "This ticket is unlikely to get fixed unless someone who knows the code really well addresses  comment:3",
    "created_at": "2015-02-01T15:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176096",
    "user": "ppurka"
}
```

This ticket is unlikely to get fixed unless someone who knows the code really well addresses  comment:3



---

archive/issue_comments_176097.json:
```json
{
    "body": "Replying to [comment:3 ppurka]:\n> I am able to fix all the doctests except for the following one in combinat/tutorial.py.\n\nOK, from what you've written down here, I can come up with one way of rewriting the example.\n\n> {{{\n> sage: C, z = var('C,z');\n> sage: sys = [ C == z + C*C ]\n> sage: sol = solve(sys, C, solution_dict=True); sol\n> [{C: -1/2*sqrt(-4*z + 1) + 1/2}, {C: 1/2*sqrt(-4*z + 1) + 1/2}]\n> sage: s0 = sol[0][C]; s1 = sol[1][C]\n> }}}\n\n> {{{\n> sage: C = s0; C\n> -1/2*sqrt(-4*z + 1) + 1/2\n> }}}\nI think this should be deleted. Use s0 if you want that and just leave C bound to the variable. It's already bad enough that we need \"C as a function\" further down.\n\n> {{{\n> sage: equadiff\n> (4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0\n> sage: Cf = sage.symbolic.function_factory.function('C')\n> }}}\nDidn't we need Cf before to arrive at `equadiff`? How did `C(z)` get into that expression in the first place?\n\n> {{{\n> sage: equadiff.substitute_function(Cf, s0)  # Original answer is the deprecation + answer\n> ...\n> TypeError: %d format: a number is required, not NoneType\n> }}}\nI think the following should work (it does in vanilla, without a deprecation warning):\n\n```\nsage: equadiff.substitute_function(Cf, s0.function(z))\n```\n\n> Let us try to \"fix\" this (`z` is a symbolic variable). Somehow the following works (beats me why it does):\n> {{{\n> sage: equadiff.substitute_function(Cf(z), s0)\n> (4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0     # OK, so this seems to work\n> }}}\nI'm not so sure it \"works\". It doesn't give an error (which is surprising in its own right; perhaps that should change), but I don't think it gives the same answer. In vanilla:\n\n```\nsage: equadiff.substitute_function(Cf(z), s0)\n(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0\nsage: equadiff.substitute_function(Cf, s0.function(z))\n(4*z - 1)/sqrt(-4*z + 1) + sqrt(-4*z + 1) == 0\n```\n\n\n> But now the next command in the tutorial gives `False` instead of `True`\nRightly so, judging from the results above.\n\n> Why is all this happening? Looking at the documentation of `substitute_function` shows that it should be used for substituting *functions*, not anything else\n> {{{\n>     def substitute_function(self, original, new):\n>         \"\"\"\n>         Returns this symbolic expressions all occurrences of the\n>         function *original* replaced with the function *new*.\n> }}}\n> \n> And what exactly are we substituting above?\n> {{{\n> sage: type(Cf)\n> sage.symbolic.function_factory.NewSymbolicFunction\n> sage: type(s0)\n> sage.symbolic.expression.Expression\n> }}}\n> We are substituting a symbolic function with a symbolic expression! How was this even working earlier?\n\nI guess because symbolic expressions were deprecated \"functions\": you could call then with symbolic arguments and get a symbolic expression, at the cost of a deprecation warning.\n\n> What should I do with this portion of the tutorial? Delete this?\n\nNo, just do\n\n```\nsage: equadiff.substitute_function(Cf, s0.function(z))\n```\n\nThat's probably a useful example to have anyway. It shows how to turn a symbolic expression into a function in a non-ambiguous way, because you need to specify argument order.",
    "created_at": "2015-02-01T17:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176097",
    "user": "nbruin"
}
```

Replying to [comment:3 ppurka]:
> I am able to fix all the doctests except for the following one in combinat/tutorial.py.

OK, from what you've written down here, I can come up with one way of rewriting the example.

> {{{
> sage: C, z = var('C,z');
> sage: sys = [ C == z + C*C ]
> sage: sol = solve(sys, C, solution_dict=True); sol
> [{C: -1/2*sqrt(-4*z + 1) + 1/2}, {C: 1/2*sqrt(-4*z + 1) + 1/2}]
> sage: s0 = sol[0][C]; s1 = sol[1][C]
> }}}

> {{{
> sage: C = s0; C
> -1/2*sqrt(-4*z + 1) + 1/2
> }}}
I think this should be deleted. Use s0 if you want that and just leave C bound to the variable. It's already bad enough that we need "C as a function" further down.

> {{{
> sage: equadiff
> (4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0
> sage: Cf = sage.symbolic.function_factory.function('C')
> }}}
Didn't we need Cf before to arrive at `equadiff`? How did `C(z)` get into that expression in the first place?

> {{{
> sage: equadiff.substitute_function(Cf, s0)  # Original answer is the deprecation + answer
> ...
> TypeError: %d format: a number is required, not NoneType
> }}}
I think the following should work (it does in vanilla, without a deprecation warning):

```
sage: equadiff.substitute_function(Cf, s0.function(z))
```

> Let us try to "fix" this (`z` is a symbolic variable). Somehow the following works (beats me why it does):
> {{{
> sage: equadiff.substitute_function(Cf(z), s0)
> (4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0     # OK, so this seems to work
> }}}
I'm not so sure it "works". It doesn't give an error (which is surprising in its own right; perhaps that should change), but I don't think it gives the same answer. In vanilla:

```
sage: equadiff.substitute_function(Cf(z), s0)
(4*z - 1)*D[0](C)(z) - 2*C(z) + 1 == 0
sage: equadiff.substitute_function(Cf, s0.function(z))
(4*z - 1)/sqrt(-4*z + 1) + sqrt(-4*z + 1) == 0
```


> But now the next command in the tutorial gives `False` instead of `True`
Rightly so, judging from the results above.

> Why is all this happening? Looking at the documentation of `substitute_function` shows that it should be used for substituting *functions*, not anything else
> {{{
>     def substitute_function(self, original, new):
>         """
>         Returns this symbolic expressions all occurrences of the
>         function *original* replaced with the function *new*.
> }}}
> 
> And what exactly are we substituting above?
> {{{
> sage: type(Cf)
> sage.symbolic.function_factory.NewSymbolicFunction
> sage: type(s0)
> sage.symbolic.expression.Expression
> }}}
> We are substituting a symbolic function with a symbolic expression! How was this even working earlier?

I guess because symbolic expressions were deprecated "functions": you could call then with symbolic arguments and get a symbolic expression, at the cost of a deprecation warning.

> What should I do with this portion of the tutorial? Delete this?

No, just do

```
sage: equadiff.substitute_function(Cf, s0.function(z))
```

That's probably a useful example to have anyway. It shows how to turn a symbolic expression into a function in a non-ambiguous way, because you need to specify argument order.



---

archive/issue_comments_176098.json:
```json
{
    "body": "Replying to [comment:5 kcrisman]:\n>     <rant>\n>     Because distinguishing between a function and a symbolic expression is an unnatural, CS-y thing to do; any symbolic expression is obviously a function of all variables in it, mathematically; for any function with more than one `var` I agree we don't want this (as indeed the example in the prep document points out) but for one-variable expressions (pace Jason, who will immediately ask whether `x+y-y` is one variable) it seems worth the potential for confusion...\n>     </rant>\n\nI actually agree and I don't see why a function call with non-relational argument should not be allowed IF there is only one variable in the expression. The confusion comes from the fact that things like `sqrt(2)(x+y)` almost always are typos where the `*` is missing. These should be marked as error. Now Sage cannot distinguish between `f=x^2; f(2)` and `sqrt(2)(x+y)` because `f` is replaced immediately with `x^2` and so in both cases an expression has its `__call__` member executed. BUT, first with `sqrt(2)(x+y)` the expression has no variables and so it can be doubtlessy marked as error; secondly, before `f` is silently expanded to `x^2` it is seen by the parser---maybe the parser can distinguish between calls that are done to `f` (like calls to functions) and other calls, and only allow the former?",
    "created_at": "2017-08-23T07:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176098",
    "user": "rws"
}
```

Replying to [comment:5 kcrisman]:
>     <rant>
>     Because distinguishing between a function and a symbolic expression is an unnatural, CS-y thing to do; any symbolic expression is obviously a function of all variables in it, mathematically; for any function with more than one `var` I agree we don't want this (as indeed the example in the prep document points out) but for one-variable expressions (pace Jason, who will immediately ask whether `x+y-y` is one variable) it seems worth the potential for confusion...
>     </rant>

I actually agree and I don't see why a function call with non-relational argument should not be allowed IF there is only one variable in the expression. The confusion comes from the fact that things like `sqrt(2)(x+y)` almost always are typos where the `*` is missing. These should be marked as error. Now Sage cannot distinguish between `f=x^2; f(2)` and `sqrt(2)(x+y)` because `f` is replaced immediately with `x^2` and so in both cases an expression has its `__call__` member executed. BUT, first with `sqrt(2)(x+y)` the expression has no variables and so it can be doubtlessy marked as error; secondly, before `f` is silently expanded to `x^2` it is seen by the parser---maybe the parser can distinguish between calls that are done to `f` (like calls to functions) and other calls, and only allow the former?



---

archive/issue_comments_176099.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-08-23T07:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176099",
    "user": "rws"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_176100.json:
```json
{
    "body": "Replying to [comment:16 rws]:\n> maybe the parser can distinguish between calls that are done to `f` (like calls to functions) and other calls, and only allow the former?\n\nThat would be adding even more special cases just for Sage.\n\nIn Python, you expect the following two to do the same thing\n\n```\nf = x^2\nprint(f(2))\n```\n\nand\n\n```\nprint((x^2)(2))\n```\n\nIt would be very surprising if somehow these would become different.",
    "created_at": "2017-08-23T07:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176100",
    "user": "jdemeyer"
}
```

Replying to [comment:16 rws]:
> maybe the parser can distinguish between calls that are done to `f` (like calls to functions) and other calls, and only allow the former?

That would be adding even more special cases just for Sage.

In Python, you expect the following two to do the same thing

```
f = x^2
print(f(2))
```

and

```
print((x^2)(2))
```

It would be very surprising if somehow these would become different.



---

archive/issue_comments_176101.json:
```json
{
    "body": "But of course Jason's `x+y-y` still has to be dealt with, if only to ignore it ...",
    "created_at": "2017-08-23T12:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176101",
    "user": "kcrisman"
}
```

But of course Jason's `x+y-y` still has to be dealt with, if only to ignore it ...



---

archive/issue_comments_176102.json:
```json
{
    "body": "This is equality (or zero) proving in the symbolic ring, so it can be arbitrarily complex. Ignore it, yes.",
    "created_at": "2017-08-23T13:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176102",
    "user": "rws"
}
```

This is equality (or zero) proving in the symbolic ring, so it can be arbitrarily complex. Ignore it, yes.



---

archive/issue_comments_176103.json:
```json
{
    "body": "> ... The confusion comes from the fact that things like `sqrt(2)(x+y)` almost always are typos where the `*` is missing. These should be marked as error.\n\nThis is now #23684",
    "created_at": "2017-08-23T13:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176103",
    "user": "rws"
}
```

> ... The confusion comes from the fact that things like `sqrt(2)(x+y)` almost always are typos where the `*` is missing. These should be marked as error.

This is now #23684



---

archive/issue_comments_176104.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2021-07-05T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176104",
    "user": "mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_176105.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-05T23:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176105",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_176106.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-05T23:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176106",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-07T00:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_176108.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-17T21:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176108",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176109.json:
```json
{
    "body": "patchbot found some doctest failures",
    "created_at": "2021-07-17T21:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176109",
    "user": "mkoeppe"
}
```

patchbot found some doctest failures



---

archive/issue_comments_176110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-17T22:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_176111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-07-17T22:45:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176111",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_176112.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-17T22:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176112",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176113.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-18T20:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176113",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-18T20:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176114",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_176115.json:
```json
{
    "body": "`fast_callable` still needs updating",
    "created_at": "2021-07-18T20:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176115",
    "user": "mkoeppe"
}
```

`fast_callable` still needs updating



---

archive/issue_comments_176116.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-18T23:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176116",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_176117.json:
```json
{
    "body": "As `fast_callable` is used in plotting, this should be checked carefully for any regressions",
    "created_at": "2021-07-18T23:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176117",
    "user": "mkoeppe"
}
```

As `fast_callable` is used in plotting, this should be checked carefully for any regressions



---

archive/issue_comments_176118.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-18T23:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176118",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176119.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-24T22:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176119",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176120.json:
```json
{
    "body": "\n```\nsage -t --long --random-seed=0 src/sage/calculus/desolvers.py\n**********************************************************************\nFile \"src/sage/calculus/desolvers.py\", line 1609, in sage.calculus.desolvers.?\nFailed example:\n    sol=desolve_odeint(f,[0.5,2],srange(0,10,0.1),[x,y])\nException raised:\n    Traceback (most recent call last):\n      File \"/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 718, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1137, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.calculus.desolvers.?[3]>\", line 1, in <module>\n        sol=desolve_odeint(f,[RealNumber('0.5'),Integer(2)],srange(Integer(0),Integer(10),RealNumber('0.1')),[x,y])\n      File \"/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/calculus/desolvers.py\", line 1726, in desolve_odeint\n        return desolve_odeint_inner(ivar)\n      File \"/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/calculus/desolvers.py\", line 1679, in desolve_odeint_inner\n        desc.append(fast_float(de,*variabs))\n      File \"sage/ext/fast_eval.pyx\", line 1391, in sage.ext.fast_eval.fast_float (build/cythonized/sage/ext/fast_eval.c:11249)\n        return fast_callable(f, vars=vars, domain=float,\n      File \"sage/ext/fast_callable.pyx\", line 457, in sage.ext.fast_callable.fast_callable (build/cythonized/sage/ext/fast_callable.c:4734)\n        vars = [to_var(var) for var in vars]\n      File \"sage/ext/fast_callable.pyx\", line 456, in sage.ext.fast_callable.fast_callable.to_var (build/cythonized/sage/ext/fast_callable.c:4147)\n        return SR.var(var)\n      File \"sage/symbolic/ring.pyx\", line 999, in sage.symbolic.ring.SymbolicRing.var (build/cythonized/sage/symbolic/ring.cpp:11232)\n        raise ValueError(f'The name \"{s}\" is not a valid Python identifier.')\n    ValueError: The name \"(symbol1790\" is not a valid Python identifier.\n```\n",
    "created_at": "2021-07-24T22:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176120",
    "user": "mkoeppe"
}
```


```
sage -t --long --random-seed=0 src/sage/calculus/desolvers.py
**********************************************************************
File "src/sage/calculus/desolvers.py", line 1609, in sage.calculus.desolvers.?
Failed example:
    sol=desolve_odeint(f,[0.5,2],srange(0,10,0.1),[x,y])
Exception raised:
    Traceback (most recent call last):
      File "/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.calculus.desolvers.?[3]>", line 1, in <module>
        sol=desolve_odeint(f,[RealNumber('0.5'),Integer(2)],srange(Integer(0),Integer(10),RealNumber('0.1')),[x,y])
      File "/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/calculus/desolvers.py", line 1726, in desolve_odeint
        return desolve_odeint_inner(ivar)
      File "/home/sage-patchbot/sage/local/lib/python3.8/site-packages/sage/calculus/desolvers.py", line 1679, in desolve_odeint_inner
        desc.append(fast_float(de,*variabs))
      File "sage/ext/fast_eval.pyx", line 1391, in sage.ext.fast_eval.fast_float (build/cythonized/sage/ext/fast_eval.c:11249)
        return fast_callable(f, vars=vars, domain=float,
      File "sage/ext/fast_callable.pyx", line 457, in sage.ext.fast_callable.fast_callable (build/cythonized/sage/ext/fast_callable.c:4734)
        vars = [to_var(var) for var in vars]
      File "sage/ext/fast_callable.pyx", line 456, in sage.ext.fast_callable.fast_callable.to_var (build/cythonized/sage/ext/fast_callable.c:4147)
        return SR.var(var)
      File "sage/symbolic/ring.pyx", line 999, in sage.symbolic.ring.SymbolicRing.var (build/cythonized/sage/symbolic/ring.cpp:11232)
        raise ValueError(f'The name "{s}" is not a valid Python identifier.')
    ValueError: The name "(symbol1790" is not a valid Python identifier.
```




---

archive/issue_comments_176121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-07-25T01:39:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176121",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_176122.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-25T04:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176122",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176123.json:
```json
{
    "body": "I think this needs a rebase onto rc0? Trac merge failed even though it rebases cleanly.",
    "created_at": "2021-07-28T12:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176123",
    "user": "mjo"
}
```

I think this needs a rebase onto rc0? Trac merge failed even though it rebases cleanly.



---

archive/issue_comments_176124.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-28T12:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176124",
    "user": "mjo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_176125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-01T21:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176125",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_176126.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-01T21:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176126",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_176127.json:
```json
{
    "body": "We have given people plenty of time to stop using this. Time to bring down the hammer. I am setting this to a positive review, but setting it to 9.5 just to make sure it does not go into the soon-to-be-released 9.4 to get more testing.",
    "created_at": "2021-08-05T22:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176127",
    "user": "tscrim"
}
```

We have given people plenty of time to stop using this. Time to bring down the hammer. I am setting this to a positive review, but setting it to 9.5 just to make sure it does not go into the soon-to-be-released 9.4 to get more testing.



---

archive/issue_comments_176128.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-05T22:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176128",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_176129.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-08-09T20:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176129",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_176130.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-29T09:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14066#issuecomment-176130",
    "user": "vbraun"
}
```

Resolution: fixed
