# Issue 24364: 3D plot missing axis labels and tick numbers with viewer='threejs' and displayed in chrome.

archive/issues_024364.json:
```json
{
    "body": "CC:  @egourgoulhon\n\nKeywords: threejs plot3d\n\nThis one liner:\n\nline([(0,0,0),(1,1,1)]).show(viewer=\"threejs\")\n\ndoes not display correctly in Chrome Version 63.0.3239.132 (Official Build) Built on Ubuntu , running on Ubuntu 17.10 (64-bit) or the same version in Windows. Sage 8.0 and 8.2beta3 produce the same HTML, other than the location of the threejs code. Both don't display in Chrome.\n\nIt displays fine in firefox 58 under Ubuntu 17.10.\n\nMy javascript skills are pretty limited. I did step through the code in both browsers. I didn't see any obvious differences\n\nI'll attach screen shots.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24601\n\n",
    "closed_at": "2020-05-04T06:40:44Z",
    "created_at": "2018-01-28T14:31:50Z",
    "labels": [
        "component: graphics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "3D plot missing axis labels and tick numbers with viewer='threejs' and displayed in chrome.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24364",
    "user": "https://trac.sagemath.org/admin/accounts/users/andy"
}
```
CC:  @egourgoulhon

Keywords: threejs plot3d

This one liner:

line([(0,0,0),(1,1,1)]).show(viewer="threejs")

does not display correctly in Chrome Version 63.0.3239.132 (Official Build) Built on Ubuntu , running on Ubuntu 17.10 (64-bit) or the same version in Windows. Sage 8.0 and 8.2beta3 produce the same HTML, other than the location of the threejs code. Both don't display in Chrome.

It displays fine in firefox 58 under Ubuntu 17.10.

My javascript skills are pretty limited. I did step through the code in both browsers. I didn't see any obvious differences

I'll attach screen shots.



Issue created by migration from https://trac.sagemath.org/ticket/24601





---

archive/issue_comments_340990.json:
```json
{
    "body": "Attachment [firefox-threejs-display.png](tarball://root/attachments/some-uuid/ticket24601/firefox-threejs-display.png) by andy created at 2018-01-28 14:33:31\n\nFirefox display",
    "created_at": "2018-01-28T14:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340990",
    "user": "https://trac.sagemath.org/admin/accounts/users/andy"
}
```

Attachment [firefox-threejs-display.png](tarball://root/attachments/some-uuid/ticket24601/firefox-threejs-display.png) by andy created at 2018-01-28 14:33:31

Firefox display



---

archive/issue_comments_340991.json:
```json
{
    "body": "Attachment [chrome-threejs-display.png](tarball://root/attachments/some-uuid/ticket24601/chrome-threejs-display.png) by andy created at 2018-01-28 14:34:09\n\nChrome display",
    "created_at": "2018-01-28T14:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340991",
    "user": "https://trac.sagemath.org/admin/accounts/users/andy"
}
```

Attachment [chrome-threejs-display.png](tarball://root/attachments/some-uuid/ticket24601/chrome-threejs-display.png) by andy created at 2018-01-28 14:34:09

Chrome display



---

archive/issue_comments_340992.json:
```json
{
    "body": "Attachment [tmp_2E60EC.html](tarball://root/attachments/some-uuid/ticket24601/tmp_2E60EC.html) by andy created at 2018-01-28 14:37:00\n\nGenerated HTML for plot",
    "created_at": "2018-01-28T14:37:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340992",
    "user": "https://trac.sagemath.org/admin/accounts/users/andy"
}
```

Attachment [tmp_2E60EC.html](tarball://root/attachments/some-uuid/ticket24601/tmp_2E60EC.html) by andy created at 2018-01-28 14:37:00

Generated HTML for plot



---

archive/issue_comments_340993.json:
```json
{
    "body": "Is this still a problem or has it gone away? Sounds like a browser issue.",
    "created_at": "2019-10-29T22:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340993",
    "user": "https://github.com/paulmasson"
}
```

Is this still a problem or has it gone away? Sounds like a browser issue.



---

archive/issue_comments_340994.json:
```json
{
    "body": "Paul, it is still an issue under Ubuntu 19.04 with 9.0beta3\n\nWith Chrome 76.0.3809.100. Viewers threejs and tachyon do NOT display numbers and ticks. Viewers canvas3d, jmol and wavefront work.\n\nUnder Firfox 70.0, only viewer threejs does not display tics and numbers.",
    "created_at": "2019-10-30T00:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340994",
    "user": "https://trac.sagemath.org/admin/accounts/users/andy"
}
```

Paul, it is still an issue under Ubuntu 19.04 with 9.0beta3

With Chrome 76.0.3809.100. Viewers threejs and tachyon do NOT display numbers and ticks. Viewers canvas3d, jmol and wavefront work.

Under Firfox 70.0, only viewer threejs does not display tics and numbers.



---

archive/issue_comments_340995.json:
```json
{
    "body": "Hello. I was able to replicate this bug on my Ubuntu machine in Chrome, and I've pushed a fix for review.\n\nThe z-component was left undefined when setting the text sprites' scales. I'm not sure why this bug didn't also appear in Firefox or on Windows. Particulars of the javascript engines with each browser/platform I suppose.\n\nBest regards!",
    "created_at": "2020-04-28T22:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340995",
    "user": "https://github.com/jcamp0x2a"
}
```

Hello. I was able to replicate this bug on my Ubuntu machine in Chrome, and I've pushed a fix for review.

The z-component was left undefined when setting the text sprites' scales. I'm not sure why this bug didn't also appear in Firefox or on Windows. Particulars of the javascript engines with each browser/platform I suppose.

Best regards!



---

archive/issue_comments_340996.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-28T22:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340996",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_340997.json:
```json
{
    "body": "Example HTML plot after the changes",
    "created_at": "2020-04-28T22:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340997",
    "user": "https://github.com/jcamp0x2a"
}
```

Example HTML plot after the changes



---

archive/issue_comments_340998.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-28T23:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340998",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_340999.json:
```json
{
    "body": "Attachment [graphic.html](tarball://root/attachments/some-uuid/ticket24601/graphic.html) by @paulmasson created at 2020-04-28 23:00:14\n\nYour modification is in line with Three.js examples, so positive review. Curious that it worked on most machines without this. Nice catch!",
    "created_at": "2020-04-28T23:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-340999",
    "user": "https://github.com/paulmasson"
}
```

Attachment [graphic.html](tarball://root/attachments/some-uuid/ticket24601/graphic.html) by @paulmasson created at 2020-04-28 23:00:14

Your modification is in line with Three.js examples, so positive review. Curious that it worked on most machines without this. Nice catch!



---

archive/issue_events_062006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-28T23:33:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24364#event-62006"
}
```



---

archive/issue_events_062007.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-04T06:40:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24364#event-62007"
}
```



---

archive/issue_comments_341000.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-04T06:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24364#issuecomment-341000",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
