# Issue 21119: Doctest failure in generic_graph.py

Issue created by migration from https://trac.sagemath.org/ticket/21356

Original creator: jdemeyer

Original creation time: 2016-08-27 17:23:53

CC:  tscrim jmantysalo

In a doctest introduced by #21111:

```
sage -t --long src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 20930, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.canonical_label(certify=True)
Expected:
    doctest:...: DeprecationWarning: use the option 'certificate' instead of 'certify'
    See http://trac.sagemath.org/21111 for details.
    (Graph on 2 vertices, {'a': 0, 'b': 1})
Got:
    doctest:warning
      File "/home/worker/sage-patchbot/src/bin/sage-runtests", line 89, in <module>
        err = DC.run()
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/control.py", line 1130, in run
        self.run_doctests()
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/control.py", line 854, in run_doctests
        self.dispatcher.dispatch()
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1698, in dispatch
        self.parallel_dispatch()
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1588, in parallel_dispatch
        w.start()  # This might take some time
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1864, in start
        super(DocTestWorker, self).start()
      File "/home/worker/sage-patchbot/local/lib/python/multiprocessing/process.py", line 130, in start
        self._popen = Popen(self)
      File "/home/worker/sage-patchbot/local/lib/python/multiprocessing/forking.py", line 126, in __init__
        code = process_obj._bootstrap()
      File "/home/worker/sage-patchbot/local/lib/python/multiprocessing/process.py", line 258, in _bootstrap
        self.run()
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1837, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2130, in __call__
        runner.run(test)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 636, in run
        return self._run(test, compileflags, out)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[26]>", line 1, in <module>
        G.canonical_label(certify=True)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/misc/decorators.py", line 709, in wrapper
        "%r instead of %r" % (new_name, old_name))
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 100, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 141, in warning
        warn(message, warning_class, stacklevel)
    :
    DeprecationWarning: use the option 'certificate' instead of 'certify'
    See http://trac.sagemath.org/21111 for details.
    (Graph on 2 vertices, {'a': 1, 'b': 0})
**********************************************************************
```



---

Comment by tscrim created at 2016-08-27 19:51:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-08-27 19:51:23

I could not reproduce this. From looking at the code, I'm guessing you have `bliss` installed. Try this branch.
----
New commits:


---

Comment by jdemeyer created at 2016-08-27 19:58:08

Replying to [comment:1 tscrim]:
> From looking at the code, I'm guessing you have `bliss` installed.

Yes, I do:

```
Using --optional=bliss,mpir,ore_algebra,python2,sage
```


> Try this branch.

I will when I finish testing something else.


---

Comment by jdemeyer created at 2016-08-27 20:37:08

Changing status from needs_review to positive_review.


---

Comment by leif created at 2016-08-28 01:35:00

Hmmm, #21357 is better... :-)


---

Comment by leif created at 2016-08-28 01:39:43

Replying to [comment:4 leif]:
> Hmmm, #21357 is better... :-)

(The test is supposed to just test the deprecation of `certify`, cf. sage-release.)


---

Comment by leif created at 2016-08-28 01:39:43

Changing keywords from "" to "random_fail certify".


---

Comment by vbraun created at 2016-08-29 16:56:20

Resolution: fixed
