# Issue 16943: Move rational_reconstruction to fast_arith.pyx

Issue created by migration from https://trac.sagemath.org/ticket/17180

Original creator: jdemeyer

Original creation time: 2014-10-19 19:29:25

Move the implementation of rational reconstruction to `src/sage/fast_arith.pyx` as part of the effort to clean up `gmp.pxi`.


---

Comment by git created at 2014-10-20 18:57:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2014-10-20 18:59:40

Changing status from new to needs_review.


---

Comment by git created at 2014-10-21 21:38:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2014-10-29 13:37:39

Hello,

In `rational_reconstruction.pyx` why did you import `Integer` from `sage.rings.integer`?

The following also looks like a type as there is neither `w1` nor `w2`

```
            mpz_swap(u1, v1)       # u1 = v1; v1 = w1
            mpz_swap(u2, v2)       # u2 = v2; v2 = w2
```


Beyond that, it looks nice.

Vincent


---

Comment by vdelecroix created at 2014-10-29 13:37:39

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2014-10-29 13:42:02

The `w1` and `w2` are not typos: they are "virtual" variables, see the lines above

```
mpz_submul(u1, q, v1) # w1 = u1 - q*v
mpz_submul(u2, q, v2) # w2 = u2 - q*v2
mpz_swap(u1, v1) # u1 = v1; v1 = w1
mpz_swap(u2, v2) # u2 = v2; v2 = w2
```


Introducing actual variables `w1` and `w2` would be slower than reusing `u1` and `u2`. Perhaps this should be documented better, but it's not a mistake.


---

Comment by jdemeyer created at 2014-10-29 13:42:15

Replying to [comment:7 vdelecroix]:
> Hello,
> 
> In `rational_reconstruction.pyx` why did you import `Integer` from `sage.rings.integer`?
No reason, this can be removed.


---

Comment by git created at 2014-10-30 08:21:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-10-30 08:21:37

Changing status from needs_info to needs_review.


---

Comment by vdelecroix created at 2014-10-30 12:56:40

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-10-30 22:28:39

Resolution: fixed
