# Issue 13940: Print current branch name (again)

archive/issues_013940.json:
```json
{
    "body": "Assignee: tbd\n\nAnother issue with the new IPython: if someone has cloned their Sage library, then previous versions of Sage would print the branch name on startup:\n\n```\nLoading Sage library. Current Mercurial branch is: my-branch\n```\nWith #12719, the branch no longer prints on startup. The sage-combinat group, for example, use branches all the time, so this behavior should be restored.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14144\n\n",
    "closed_at": "2014-01-31T19:47:30Z",
    "created_at": "2013-02-17T16:32:11Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Print current branch name (again)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13940",
    "user": "https://github.com/jhpalmieri"
}
```
Assignee: tbd

Another issue with the new IPython: if someone has cloned their Sage library, then previous versions of Sage would print the branch name on startup:

```
Loading Sage library. Current Mercurial branch is: my-branch
```
With #12719, the branch no longer prints on startup. The sage-combinat group, for example, use branches all the time, so this behavior should be restored.

Issue created by migration from https://trac.sagemath.org/ticket/14144





---

archive/issue_comments_173566.json:
```json
{
    "body": "Attachment [trac_14144-branch.patch](tarball://root/attachments/some-uuid/ticket14144/trac_14144-branch.patch) by @jhpalmieri created at 2013-02-17 16:32:49",
    "created_at": "2013-02-17T16:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173566",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_14144-branch.patch](tarball://root/attachments/some-uuid/ticket14144/trac_14144-branch.patch) by @jhpalmieri created at 2013-02-17 16:32:49



---

archive/issue_comments_173567.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-17T16:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173567",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_173568.json:
```json
{
    "body": "Did I do this right? It works for me in limited testing.",
    "created_at": "2013-02-17T16:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173568",
    "user": "https://github.com/jhpalmieri"
}
```

Did I do this right? It works for me in limited testing.



---

archive/issue_comments_173569.json:
```json
{
    "body": "In general, I don't think its a good idea to make the startup banner depend on any externalities. The more miscellaneous stuff you print at startup, the more likely you are to break the sage<->sage interface or doctests for a few users with a peculiar setup.\n\nFor the record, I removed the branch printing in #14024 because it was broken and nobody noticed (until it hit my patchbot, which uses branches). \n\nI don't mind putting it back in, but is view of the switch to git I don't think its worth the effort.",
    "created_at": "2013-02-17T16:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173569",
    "user": "https://github.com/vbraun"
}
```

In general, I don't think its a good idea to make the startup banner depend on any externalities. The more miscellaneous stuff you print at startup, the more likely you are to break the sage<->sage interface or doctests for a few users with a peculiar setup.

For the record, I removed the branch printing in #14024 because it was broken and nobody noticed (until it hit my patchbot, which uses branches). 

I don't mind putting it back in, but is view of the switch to git I don't think its worth the effort.



---

archive/issue_comments_173570.json:
```json
{
    "body": "I don't use branches, so it doesn't affect me, but the sage-combinat script starts by making a clone of the Sage library. So anyone who uses that uses branches. It seems like an overly hasty decision to stop printing the branches, since it affects a large group of people.",
    "created_at": "2013-02-17T17:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173570",
    "user": "https://github.com/jhpalmieri"
}
```

I don't use branches, so it doesn't affect me, but the sage-combinat script starts by making a clone of the Sage library. So anyone who uses that uses branches. It seems like an overly hasty decision to stop printing the branches, since it affects a large group of people.



---

archive/issue_comments_173571.json:
```json
{
    "body": "I agree that it'll be a cosmetic change in the startup banner for users of the combinat queue, but I fail to see the issue. If you switch branches regularly then you probably know which one you are on (and can be found out easier than to start Sage and look at the banner; its wrong to train our users to rely on that). If you just use Sage then its of no concern to you whether the sage-combinat script made a branch or not.",
    "created_at": "2013-02-17T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173571",
    "user": "https://github.com/vbraun"
}
```

I agree that it'll be a cosmetic change in the startup banner for users of the combinat queue, but I fail to see the issue. If you switch branches regularly then you probably know which one you are on (and can be found out easier than to start Sage and look at the banner; its wrong to train our users to rely on that). If you just use Sage then its of no concern to you whether the sage-combinat script made a branch or not.



---

archive/issue_comments_173572.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages.",
    "created_at": "2013-02-17T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173572",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to packages.



---

archive/issue_comments_173573.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-02-17T19:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173573",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_173574.json:
```json
{
    "body": "Here's a variation on the first patch, which I hope won't interfere with doctesting.",
    "created_at": "2013-02-17T20:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173574",
    "user": "https://github.com/jhpalmieri"
}
```

Here's a variation on the first patch, which I hope won't interfere with doctesting.



---

archive/issue_comments_173575.json:
```json
{
    "body": "Changing component from packages: standard to interfaces.",
    "created_at": "2013-05-16T07:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173575",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from packages: standard to interfaces.



---

archive/issue_comments_173576.json:
```json
{
    "body": "Dare I ask if this needs a doctest?  Perhaps it's not possible, but then we should somehow indicate this...",
    "created_at": "2013-07-10T19:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173576",
    "user": "https://github.com/kcrisman"
}
```

Dare I ask if this needs a doctest?  Perhaps it's not possible, but then we should somehow indicate this...



---

archive/issue_comments_173577.json:
```json
{
    "body": "I think there is no point in working on this ticket, work on the git transition instead.",
    "created_at": "2013-07-10T19:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173577",
    "user": "https://github.com/vbraun"
}
```

I think there is no point in working on this ticket, work on the git transition instead.



---

archive/issue_comments_173578.json:
```json
{
    "body": "Well, perhaps one should say that those working on the git transition should work on the git transition.  If that goes for another year (which seems plausible if only one person is currently working hard on it) then this ticket is useful.",
    "created_at": "2013-07-10T19:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173578",
    "user": "https://github.com/kcrisman"
}
```

Well, perhaps one should say that those working on the git transition should work on the git transition.  If that goes for another year (which seems plausible if only one person is currently working hard on it) then this ticket is useful.



---

archive/issue_comments_173579.json:
```json
{
    "body": "Re a doctest: the code says\n\n```\nif (not DOCTEST_MODE) and branch: \n    print branch \n```\nso I don't know how to make a doctest that will reveal anything helpful. Here's an updated version with a longer docstring.",
    "created_at": "2013-07-10T20:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173579",
    "user": "https://github.com/jhpalmieri"
}
```

Re a doctest: the code says

```
if (not DOCTEST_MODE) and branch: 
    print branch 
```
so I don't know how to make a doctest that will reveal anything helpful. Here's an updated version with a longer docstring.



---

archive/issue_comments_173580.json:
```json
{
    "body": "Attachment [trac_14144-branch-nodoctest.patch](tarball://root/attachments/some-uuid/ticket14144/trac_14144-branch-nodoctest.patch) by @jhpalmieri created at 2013-07-10 20:01:03",
    "created_at": "2013-07-10T20:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173580",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_14144-branch-nodoctest.patch](tarball://root/attachments/some-uuid/ticket14144/trac_14144-branch-nodoctest.patch) by @jhpalmieri created at 2013-07-10 20:01:03



---

archive/issue_events_039905.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13940#event-39905"
}
```



---

archive/issue_comments_173581.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2013-12-02T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173581",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_173582.json:
```json
{
    "body": "Hmmmm... With the first git release planned for the end of the year, does this still make sense ? I've been using sage-git for a while myself and there are no branches there `^^;`\nI mean. Not the same kind `^^;`\n\nNathann",
    "created_at": "2013-12-02T15:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173582",
    "user": "https://github.com/nathanncohen"
}
```

Hmmmm... With the first git release planned for the end of the year, does this still make sense ? I've been using sage-git for a while myself and there are no branches there `^^;`
I mean. Not the same kind `^^;`

Nathann



---

archive/issue_events_039906.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13940#event-39906"
}
```



---

archive/issue_events_039907.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13940#event-39907"
}
```



---

archive/issue_comments_173583.json:
```json
{
    "body": "Should we close this ticket? Is there any reason we should be printing the git branch as part of the banner? (I'm happy to close it.)",
    "created_at": "2014-01-31T19:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173583",
    "user": "https://github.com/jhpalmieri"
}
```

Should we close this ticket? Is there any reason we should be printing the git branch as part of the banner? (I'm happy to close it.)



---

archive/issue_comments_173584.json:
```json
{
    "body": "If you want to keep track of the git branch then I'd recommend putting it in the bash prompt (#15590). Thats what I'm using personally. Bonus: works for other projects using git, too.",
    "created_at": "2014-01-31T19:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173584",
    "user": "https://github.com/vbraun"
}
```

If you want to keep track of the git branch then I'd recommend putting it in the bash prompt (#15590). Thats what I'm using personally. Bonus: works for other projects using git, too.



---

archive/issue_comments_173585.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2014-01-31T19:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13940#issuecomment-173585",
    "user": "https://github.com/vbraun"
}
```

Resolution: wontfix



---

archive/issue_events_039908.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-31T19:47:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13940",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13940#event-39908"
}
```
