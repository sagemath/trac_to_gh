# Issue 13689: Fix upgrading from relocated Sage with GCC

archive/issues_013485.json:
```json
{
    "body": "Older versions of `sage-location` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3 if GCC was installed and Sage was relocated after building GCC but before upgrading. The problem shows up during the build of LinBox from #12883:\n\n```\nmake[6]: Entering directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C\n/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o\n/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro\n/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\n/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\nlibtool: link: `/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive\nmake[6]: *** [libutil.la] Error 1\nmake[6]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\nmake[5]: *** [all-recursive] Error 1\nmake[5]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\nmake[4]: *** [all-recursive] Error 1\nmake[4]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\n```\n\nBlocker because it breaks upgrading from sage-5.3.\n\nAssignee: GeorgSWeber\n\nCC:  @nexttime\n\nReviewer: John Palmieri\n\nAuthor: Jeroen Demeyer\n\nMerged: sage-5.4.1.rc1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13689\n\n",
    "closed_at": "2012-11-14T08:30:32Z",
    "created_at": "2012-11-06T21:52:58Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4.1",
    "title": "Fix upgrading from relocated Sage with GCC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13689",
    "user": "https://github.com/jdemeyer"
}
```
Older versions of `sage-location` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3 if GCC was installed and Sage was relocated after building GCC but before upgrading. The problem shows up during the build of LinBox from #12883:

```
make[6]: Entering directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C
/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o
/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro
/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
libtool: link: `/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive
make[6]: *** [libutil.la] Error 1
make[6]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
make[5]: *** [all-recursive] Error 1
make[5]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
```

Blocker because it breaks upgrading from sage-5.3.

Assignee: GeorgSWeber

CC:  @nexttime

Reviewer: John Palmieri

Author: Jeroen Demeyer

Merged: sage-5.4.1.rc1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13689





---

archive/issue_comments_177070.json:
```json
{
    "body": "Description changed:\n```diff\n\n```\n",
    "created_at": "2012-11-07T16:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177070",
    "user": "https://github.com/nexttime"
}
```

Description changed:
```diff

```




---

archive/issue_comments_177071.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+It seems the old version of \\`sage-location\\` does not properly fix GCC, leading to problems with upgrading in the following scenario:\n+1. install sage-5.3 from source, including Sage's GCC\n+2. relocate Sage\n+3. rebuild PPL\n+4. rebuild LinBox\n \n+The \\`sage-location\\` in \\`sage-5.4.1.rc0\\` does things properly, but that's not sufficient for upgrading.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-11-07T22:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177071",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+It seems the old version of \`sage-location\` does not properly fix GCC, leading to problems with upgrading in the following scenario:
+1. install sage-5.3 from source, including Sage's GCC
+2. relocate Sage
+3. rebuild PPL
+4. rebuild LinBox
 
+The \`sage-location\` in \`sage-5.4.1.rc0\` does things properly, but that's not sufficient for upgrading.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_177072.json:
```json
{
    "body": "Attachment [13689_relocate_gcc.patch](tarball://root/attachments/some-uuid/ticket13689/13689_relocate_gcc.patch) by @jdemeyer created at 2012-11-08 13:14:13",
    "created_at": "2012-11-08T13:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177072",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [13689_relocate_gcc.patch](tarball://root/attachments/some-uuid/ticket13689/13689_relocate_gcc.patch) by @jdemeyer created at 2012-11-08 13:14:13



---

archive/issue_comments_177073.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-09T11:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177073",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_177074.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Older versions of \\`sage-location\\` (before #13397) do not properly fix GCC, leading to problems with upgrading in the following scenario:\n+1. install sage-5.3 from source, including Sage's GCC\n+2. relocate Sage\n+3. rebuild PPL\n+4. rebuild LinBox\n \n+The \\`sage-location\\` in \\`sage-5.4.1.rc0\\` does things properly, but that's not sufficient for upgrading.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-11-09T11:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177074",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Older versions of \`sage-location\` (before #13397) do not properly fix GCC, leading to problems with upgrading in the following scenario:
+1. install sage-5.3 from source, including Sage's GCC
+2. relocate Sage
+3. rebuild PPL
+4. rebuild LinBox
 
+The \`sage-location\` in \`sage-5.4.1.rc0\` does things properly, but that's not sufficient for upgrading.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_177075.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Older versions of \\`sage-location\\` (before #13397) do not properly fix GCC, leading to problems with upgrading in the following scenario:\n+1. install sage <= 5.3 from source, including Sage's GCC\n+2. relocate Sage (using the old \\`sage-location\\`)\n+3. rebuild PPL\n+4. rebuild LinBox\n \n+Blocker because it potentially breaks upgrading from sage-5.3.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-11-09T11:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177075",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Older versions of \`sage-location\` (before #13397) do not properly fix GCC, leading to problems with upgrading in the following scenario:
+1. install sage <= 5.3 from source, including Sage's GCC
+2. relocate Sage (using the old \`sage-location\`)
+3. rebuild PPL
+4. rebuild LinBox
 
+Blocker because it potentially breaks upgrading from sage-5.3.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_177076.json:
```json
{
    "body": "<a id='comment:7'></a>I haven't been able to reproduce a problem by following the directions, but I can see that some paths are wrong in `local/lib64/*.la` files, and they're fixed after upgrading from a version of Sage which includes this patch. For `libgfortran.la`, the path for `dependency_libs` is still wrong, but all of the `libdir` paths are okay. Does the wrong path for `dependency_libs` actually matter?",
    "created_at": "2012-11-10T19:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177076",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>I haven't been able to reproduce a problem by following the directions, but I can see that some paths are wrong in `local/lib64/*.la` files, and they're fixed after upgrading from a version of Sage which includes this patch. For `libgfortran.la`, the path for `dependency_libs` is still wrong, but all of the `libdir` paths are okay. Does the wrong path for `dependency_libs` actually matter?



---

archive/issue_comments_177077.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jhpalmieri]:\n> I haven't been able to reproduce a problem by following the directions\n\nWhich exact version of Sage did you try?\n\n> Does the wrong path for `dependency_libs` actually matter?\n\nNot sure.  The main point is that this patch makes upgrading work.",
    "created_at": "2012-11-11T09:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177077",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:7 jhpalmieri]:
> I haven't been able to reproduce a problem by following the directions

Which exact version of Sage did you try?

> Does the wrong path for `dependency_libs` actually matter?

Not sure.  The main point is that this patch makes upgrading work.



---

archive/issue_comments_177078.json:
```json
{
    "body": "<a id='comment:9'></a>Also: with #13452 and #13407, all paths would be fixed at least *after* the build.",
    "created_at": "2012-11-11T09:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177078",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Also: with #13452 and #13407, all paths would be fixed at least *after* the build.



---

archive/issue_comments_177079.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 jdemeyer]:\n> Replying to [comment:7 jhpalmieri]:\n> > I haven't been able to reproduce a problem by following the directions\n\n> Which exact version of Sage did you try?\n\nI built Sage 5.3 from scratch, moved the build directory, did `./sage -f spkg/standard/ppl-...` and `./sage -f spkg/standard/linbox-...`. No obvious errors. I also tried doing `./sage -upgrade ...`, upgrading from 5.4-rc4. This was all on sage.math.\n\n> Also: with #13452 and #13407, all paths would be fixed at least after the build.\n\n\nI'm not sure about that. When you upgrade, the old sage-location script is run so sage-current-location.txt is changed but a few paths aren't, so how can those old paths ever be fixed?",
    "created_at": "2012-11-11T16:23:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177079",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>Replying to [comment:8 jdemeyer]:
> Replying to [comment:7 jhpalmieri]:
> > I haven't been able to reproduce a problem by following the directions

> Which exact version of Sage did you try?

I built Sage 5.3 from scratch, moved the build directory, did `./sage -f spkg/standard/ppl-...` and `./sage -f spkg/standard/linbox-...`. No obvious errors. I also tried doing `./sage -upgrade ...`, upgrading from 5.4-rc4. This was all on sage.math.

> Also: with #13452 and #13407, all paths would be fixed at least after the build.


I'm not sure about that. When you upgrade, the old sage-location script is run so sage-current-location.txt is changed but a few paths aren't, so how can those old paths ever be fixed?



---

archive/issue_comments_177080.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Older versions of \\`sage-location\\` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3, during the build of LinBox from #12883:\n \n+\\`\\`\\`\n+make[6]: Entering directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C\n+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C\n+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o\n+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o\n+/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro\n+/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\n+/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\n+libtool: link: \\`/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive\n+make[6]: *** [libutil.la] Error 1\n+make[6]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+make[5]: *** [all-recursive] Error 1\n+make[5]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+make[4]: *** [all-recursive] Error 1\n+make[4]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'\n+make[3]: *** [all-recursive] Error 1\n+make[3]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\n+make[2]: *** [all] Error 2\n+make[2]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\n+\\`\\`\\`\n+\n+Blocker because it breaks upgrading from sage-5.3.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-11-12T07:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177080",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Older versions of \`sage-location\` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3, during the build of LinBox from #12883:
 
+\`\`\`
+make[6]: Entering directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C
+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C
+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o
+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o
+/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro
+/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
+/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
+libtool: link: \`/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive
+make[6]: *** [libutil.la] Error 1
+make[6]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+make[5]: *** [all-recursive] Error 1
+make[5]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+make[4]: *** [all-recursive] Error 1
+make[4]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'
+make[3]: *** [all-recursive] Error 1
+make[3]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
+make[2]: *** [all] Error 2
+make[2]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
+\`\`\`
+
+Blocker because it breaks upgrading from sage-5.3.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_177081.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+Older versions of \\`sage-location\\` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3 if GCC was installed and Sage was relocated after building GCC but before upgrading. The problem shows up during the build of LinBox from #12883:\n \n+\\`\\`\\`\n+make[6]: Entering directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C\n+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C\n+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o\n+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o\n+/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro\n+/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\n+/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory\n+libtool: link: \\`/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive\n+make[6]: *** [libutil.la] Error 1\n+make[6]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+make[5]: *** [all-recursive] Error 1\n+make[5]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'\n+make[4]: *** [all-recursive] Error 1\n+make[4]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'\n+make[3]: *** [all-recursive] Error 1\n+make[3]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\n+make[2]: *** [all] Error 2\n+make[2]: Leaving directory \\`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'\n+\\`\\`\\`\n+\n+Blocker because it breaks upgrading from sage-5.3.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2012-11-12T07:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177081",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,28 @@
+Older versions of \`sage-location\` (before #13397) do not properly fix GCC, leading to problems with upgrading from sage-5.3 if GCC was installed and Sage was relocated after building GCC but before upgrading. The problem shows up during the build of LinBox from #12883:
 
+\`\`\`
+make[6]: Entering directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o error.lo error.C
+/bin/bash ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../..  -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -c -o debug.lo debug.C
+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c debug.C  -fPIC -DPIC -o .libs/debug.o
+libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I../.. -I../../linbox -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -DDISABLE_COMMENTATOR -O2 -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include -g -fPIC -c error.C  -fPIC -DPIC -o .libs/error.o
+/bin/bash ../../libtool --tag=CXX   --mode=link g++ -O2    -g -DNDEBUG -U_LB_DEBUG -I/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/include  -g -fPIC -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lcblas -latlas -o libutil.la  error.lo debug.lo  -L/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/local/lib -lgivaro
+/bin/grep: /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
+/bin/sed: can't read /home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la: No such file or directory
+libtool: link: \`/home/buildbot/sage-5.3/local/lib/../lib64/libstdc++.la' is not a valid libtool archive
+make[6]: *** [libutil.la] Error 1
+make[6]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+make[5]: *** [all-recursive] Error 1
+make[5]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox/util'
+make[4]: *** [all-recursive] Error 1
+make[4]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src/linbox'
+make[3]: *** [all-recursive] Error 1
+make[3]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
+make[2]: *** [all] Error 2
+make[2]: Leaving directory \`/release/buildbot/sage/sage-1/sage_upgrade_5.3/build/sage-5.4.1.rc0/spkg/build/linbox-1.3.2/src'
+\`\`\`
+
+Blocker because it breaks upgrading from sage-5.3.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_177082.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 jhpalmieri]:\n> I'm not sure about that. When you upgrade, the old sage-location script is run so sage-current-location.txt is changed but a few paths aren't, so how can those old paths ever be fixed?\n\nBecause I changed `sage-location` in #13407 to always relocate after the build is finished, even if no paths have changed.",
    "created_at": "2012-11-12T07:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177082",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:10 jhpalmieri]:
> I'm not sure about that. When you upgrade, the old sage-location script is run so sage-current-location.txt is changed but a few paths aren't, so how can those old paths ever be fixed?

Because I changed `sage-location` in #13407 to always relocate after the build is finished, even if no paths have changed.



---

archive/issue_comments_177083.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-12T17:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177083",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_177084.json:
```json
{
    "body": "<a id='comment:13'></a>I guess I don't see anything which changes the `dependency_libs` path, before or after #13407. But that's not new to this ticket, so we won't worry about it.\n\nThe patch does fix upgrading, though, at least on sage.math. (At first I didn't see the problem because I built Sage 5.3, then *copied* the installation elsewhere, so the hard-coded path referred to a still-existing file. When I moved the installation instead, upgrading failed unless I upgraded from a copy of 5.4.rc4 with this patch applied.)",
    "created_at": "2012-11-12T17:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177084",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>I guess I don't see anything which changes the `dependency_libs` path, before or after #13407. But that's not new to this ticket, so we won't worry about it.

The patch does fix upgrading, though, at least on sage.math. (At first I didn't see the problem because I built Sage 5.3, then *copied* the installation elsewhere, so the hard-coded path referred to a still-existing file. When I moved the installation instead, upgrading failed unless I upgraded from a copy of 5.4.rc4 with this patch applied.)



---

archive/issue_comments_177085.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 jhpalmieri]:\n> I guess I don't see anything which changes the `dependency_libs` path, before or after #13407.\n\n`sage-location` doesn't specifically change `dependency_libs`, it changes the `.la` file as a whole.",
    "created_at": "2012-11-12T21:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177085",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Replying to [comment:13 jhpalmieri]:
> I guess I don't see anything which changes the `dependency_libs` path, before or after #13407.

`sage-location` doesn't specifically change `dependency_libs`, it changes the `.la` file as a whole.



---

archive/issue_comments_177086.json:
```json
{
    "body": "<a id='comment:15'></a>If you build sage 5.3, then move the installation, then upgrade, then dependency_libs is not fixed. The reason is that files in lib64 aren't touched by the old version of sage-location, just spkg/install, and spkg/install only fixes libdir. Then later, when sage-location is run, it looks for the path in libdir, then changes other paths in that file to match them. But once the path for dependency_libs is not in SAGE_ROOT and is not related to the path for libdir, sage-location can't fix that path.\n\nIn practice, I applied the patches here, #13407, and #13452, to sage-5.4.rc4, built a copy of sage 5.3, moved it, and upgraded it from the patched 5.4.rc4. The path for dependency_libs was not fixed.",
    "created_at": "2012-11-12T23:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177086",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>If you build sage 5.3, then move the installation, then upgrade, then dependency_libs is not fixed. The reason is that files in lib64 aren't touched by the old version of sage-location, just spkg/install, and spkg/install only fixes libdir. Then later, when sage-location is run, it looks for the path in libdir, then changes other paths in that file to match them. But once the path for dependency_libs is not in SAGE_ROOT and is not related to the path for libdir, sage-location can't fix that path.

In practice, I applied the patches here, #13407, and #13452, to sage-5.4.rc4, built a copy of sage 5.3, moved it, and upgraded it from the patched 5.4.rc4. The path for dependency_libs was not fixed.



---

archive/issue_comments_177087.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-14T08:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13689#issuecomment-177087",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_038284.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-14T08:30:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13689",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13689#event-38284"
}
```
