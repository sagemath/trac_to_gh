# Issue 13289: Determine if a vertex is a cut vertex

archive/issues_013117.json:
```json
{
    "body": "This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.\n\n\nAssignee: jason, ncohen, rlm\n\nCC:  lkeough\n\nReviewer: Sebastian Luther\n\nAuthor: David Coudert\n\nMerged: sage-5.4.rc0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13289\n\n",
    "closed_at": "2012-09-28T07:47:53Z",
    "created_at": "2012-07-24T22:17:25Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Determine if a vertex is a cut vertex",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13289",
    "user": "https://github.com/dcoudert"
}
```
This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.


Assignee: jason, ncohen, rlm

CC:  lkeough

Reviewer: Sebastian Luther

Author: David Coudert

Merged: sage-5.4.rc0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13289





---

archive/issue_comments_198235.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-24T22:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198235",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_198236.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'm not fully satisfied of this patch, but I have no better implementation in mind.\n\nFor digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.",
    "created_at": "2012-07-24T22:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198236",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
I'm not fully satisfied of this patch, but I have no better implementation in mind.

For digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.



---

archive/issue_comments_198237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.\n+\n+For digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.\n``````\n",
    "created_at": "2012-07-24T22:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198237",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.
+
+For digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.
``````




---

archive/issue_comments_198238.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.\n \n-For digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.\n``````\n",
    "created_at": "2012-07-24T22:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198238",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
 This patch test if a given vertex is a cut vertex, that is if its removal from the (di)graph increases the number of (weakly) connected components.
 
-For digraphs, this patch considers weakly connected components, but it could also considers strongly connected components. I'm not sure of the most relevant definition.
``````




---

archive/issue_comments_198239.json:
```json
{
    "body": "<a id='comment:3'></a>\nI'm not sure of the most relevant definition either, but blocks_and_cut_vertices also uses the underlying graph for directed graphs.\n\nI tried using blocks and cut vertices to write is_cut_vertex, but it appears to be much slower (as expected).  I'm not sure of a better way to implement this.\n\nThe tests all ran fine, maybe it's a good idea to add a digraphs test/example?",
    "created_at": "2012-07-25T15:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198239",
    "user": "https://trac.sagemath.org/admin/accounts/users/lkeough"
}
```

<a id='comment:3'></a>
I'm not sure of the most relevant definition either, but blocks_and_cut_vertices also uses the underlying graph for directed graphs.

I tried using blocks and cut vertices to write is_cut_vertex, but it appears to be much slower (as expected).  I'm not sure of a better way to implement this.

The tests all ran fine, maybe it's a good idea to add a digraphs test/example?



---

archive/issue_comments_198240.json:
```json
{
    "body": "<a id='comment:4'></a>\nI added a test on a digraph.\n\nI don't know how to make this patch faster. So unless someone has a better proposition now, you can validate this patch, and future improvements will go to a new patch.\n\nThanks.",
    "created_at": "2012-07-25T16:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198240",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I added a test on a digraph.

I don't know how to make this patch faster. So unless someone has a better proposition now, you can validate this patch, and future improvements will go to a new patch.

Thanks.



---

archive/issue_comments_198241.json:
```json
{
    "body": "<a id='comment:5'></a>\nGood, all the tests ran fine.  When I built the documentation I noticed a colon is missing in line 4026 so the example with giving a vertex not in the graph isn't showing up properly.  Once that is fixed I'll give a positive review.",
    "created_at": "2012-07-26T17:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198241",
    "user": "https://trac.sagemath.org/admin/accounts/users/lkeough"
}
```

<a id='comment:5'></a>
Good, all the tests ran fine.  When I built the documentation I noticed a colon is missing in line 4026 so the example with giving a vertex not in the graph isn't showing up properly.  Once that is fixed I'll give a positive review.



---

archive/issue_comments_198242.json:
```json
{
    "body": "<a id='comment:6'></a>\nOups. That's the default of working remotely. I don't always notice such mistakes.\nIt should now be OK.",
    "created_at": "2012-07-26T19:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198242",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
Oups. That's the default of working remotely. I don't always notice such mistakes.
It should now be OK.



---

archive/issue_comments_198243.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-26T20:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198243",
    "user": "https://trac.sagemath.org/admin/accounts/users/lkeough"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198244.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks for the review !",
    "created_at": "2012-07-26T20:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198244",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
Thanks for the review !



---

archive/issue_comments_198245.json:
```json
{
    "body": "<a id='comment:9'></a>\nPlease fill in your real name as Reviewer.",
    "created_at": "2012-07-27T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198245",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Please fill in your real name as Reviewer.



---

archive/issue_comments_198246.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-07-29T20:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198246",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_198247.json:
```json
{
    "body": "<a id='comment:10'></a>\nThere is major problem with this patch. It modifies the given graph.\n\nWhile it tries to revert the effect, this is still a bad idea. If an exception occurs between the removal of the vertex and the addition of the edges then the graph will end up modified (just think of CTRL+C or out of memory).\n\nAlso the reversal doesn't work for directed graphs currently. Just check the number of edges of D in your test case.\n\nI'd argue that you shouldn't try to fix the reversal, but get rid of it. I don't now much about the problem, so can't suggest a better algorithm that what a quick google search would reveal. If you can't find a better algorithm, make a copy of the graph and modify this copy.",
    "created_at": "2012-07-29T20:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198247",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:10'></a>
There is major problem with this patch. It modifies the given graph.

While it tries to revert the effect, this is still a bad idea. If an exception occurs between the removal of the vertex and the addition of the edges then the graph will end up modified (just think of CTRL+C or out of memory).

Also the reversal doesn't work for directed graphs currently. Just check the number of edges of D in your test case.

I'd argue that you shouldn't try to fix the reversal, but get rid of it. I don't now much about the problem, so can't suggest a better algorithm that what a quick google search would reveal. If you can't find a better algorithm, make a copy of the graph and modify this copy.



---

archive/issue_comments_198248.json:
```json
{
    "body": "<a id='comment:11'></a>\nThat's right, the patch should not modify the graph. Unfortunately I have no got implementation to propose. In particular, it is impossible to use the blocks and cuts procedure since it is way to slow (should be cythonized some day).\n\nI have changed the patch. I'm not happy with this implementation but it's working. One may later propose a faster implementation.",
    "created_at": "2012-07-29T22:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198248",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>
That's right, the patch should not modify the graph. Unfortunately I have no got implementation to propose. In particular, it is impossible to use the blocks and cuts procedure since it is way to slow (should be cythonized some day).

I have changed the patch. I'm not happy with this implementation but it's working. One may later propose a faster implementation.



---

archive/issue_comments_198249.json:
```json
{
    "body": "<a id='comment:12'></a>\nIf fact the running time of the function is largely dominated by the copy of the graph. This is boring.",
    "created_at": "2012-07-30T06:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198249",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
If fact the running time of the function is largely dominated by the copy of the graph. This is boring.



---

archive/issue_comments_198250.json:
```json
{
    "body": "<a id='comment:13'></a>\nAt least for the undirected case you could perform two DFSs and count the visited vertices. The first search would start at v and run on the orginal graph. The second one would ignore all edges incident to v and start at any neighbor of v. If v is not a cut vertex, the number of visited vertices should decrese only by 1.\n\nFor the first search you could call connected_component_containing_vertex. For the second run you need to inline the code and add the ability to ignore edges.",
    "created_at": "2012-07-30T08:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198250",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:13'></a>
At least for the undirected case you could perform two DFSs and count the visited vertices. The first search would start at v and run on the orginal graph. The second one would ignore all edges incident to v and start at any neighbor of v. If v is not a cut vertex, the number of visited vertices should decrese only by 1.

For the first search you could call connected_component_containing_vertex. For the second run you need to inline the code and add the ability to ignore edges.



---

archive/issue_comments_198251.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-30T11:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198251",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_198252.json:
```json
{
    "body": "<a id='comment:14'></a>\nI fact, only one DFS is required for undirected graphs (or weak connectivity), and two for the strong connectivity of directed graphs. I don't need to copy the graph anymore and the running time of the resulting algorithm is acceptable.\n\n```\nsage: G = digraphs.RandomDirectedGNP(1000,.3)\nsage: H = digraphs.RandomDirectedGNP(1000,.3)\nsage: K = G+H\nsage: K.add_edge(0,1000)\nsage: K.add_edge(1200,300)\nsage: %time K.is_strongly_connected()\nCPU times: user 0.09 s, sys: 0.00 s, total: 0.09 s\nWall time: 0.09 s\nTrue\nsage: %time K.is_cut_vertex(0)\nCPU times: user 0.23 s, sys: 0.00 s, total: 0.23 s\nWall time: 0.23 s\nTrue\nsage: %time K.is_cut_vertex(0, weak=True)\nCPU times: user 1.01 s, sys: 0.00 s, total: 1.01 s\nWall time: 1.01 s\nFalse\n```\nThe only way to be faster is to use cython, as for the is_strongly_connected function. But I'm not sure it is worth the effort.",
    "created_at": "2012-07-30T11:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198252",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
I fact, only one DFS is required for undirected graphs (or weak connectivity), and two for the strong connectivity of directed graphs. I don't need to copy the graph anymore and the running time of the resulting algorithm is acceptable.

```
sage: G = digraphs.RandomDirectedGNP(1000,.3)
sage: H = digraphs.RandomDirectedGNP(1000,.3)
sage: K = G+H
sage: K.add_edge(0,1000)
sage: K.add_edge(1200,300)
sage: %time K.is_strongly_connected()
CPU times: user 0.09 s, sys: 0.00 s, total: 0.09 s
Wall time: 0.09 s
True
sage: %time K.is_cut_vertex(0)
CPU times: user 0.23 s, sys: 0.00 s, total: 0.23 s
Wall time: 0.23 s
True
sage: %time K.is_cut_vertex(0, weak=True)
CPU times: user 1.01 s, sys: 0.00 s, total: 1.01 s
Wall time: 1.01 s
False
```
The only way to be faster is to use cython, as for the is_strongly_connected function. But I'm not sure it is worth the effort.



---

archive/issue_comments_198253.json:
```json
{
    "body": "<a id='comment:15'></a>\nNice work!\n\n1)\n\n```\n4034\t        if not u in self.vertices(): \n```\nshould be:\n\n```\n4034\t        if u not in self:\n```\n\n2) Any reason you're using self._directed instead of self.is_directed() \\\\\n3) \n\n```\nwhile len(queue) > 0: \n```\nshould be:\n\n```\nwhile queue:\n```\n4) There is a potential performance optimization. Currently you first perform the full dfs and then check if all neighbors of v have been seen. You could instead mark the neighbors as seen once you saw them and abort the dfs once you saw all of them. \\\\\ni.e. store them in a set and call discard on the set whenever you add a vertex to 'seen'. Then abort the dfs when the set is empty.",
    "created_at": "2012-07-30T11:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198253",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:15'></a>
Nice work!

1)

```
4034	        if not u in self.vertices(): 
```
should be:

```
4034	        if u not in self:
```

2) Any reason you're using self._directed instead of self.is_directed() \\
3) 

```
while len(queue) > 0: 
```
should be:

```
while queue:
```
4) There is a potential performance optimization. Currently you first perform the full dfs and then check if all neighbors of v have been seen. You could instead mark the neighbors as seen once you saw them and abort the dfs once you saw all of them. \\
i.e. store them in a set and call discard on the set whenever you add a vertex to 'seen'. Then abort the dfs when the set is empty.



---

archive/issue_comments_198254.json:
```json
{
    "body": "<a id='comment:16'></a>\nYou are right for 1 and 3. It's not obvious for me to write such stuff.\n\n2: it's just that both are working. I changed to is_directed() which is cleaner.\n\n4: I did it. So far I have not seen any difference but it could be interesting for some graphs, and it is strongly dependent on the dfs ordering.\n\nI have also changed seen from set to dict. It could be faster to access a cell of a dictionary than to test is a elt is in a set. Furthermore, I avoid testing w!=u by initializing seen[u] to True, so it will never be considered.\n\nThanks for the comments.",
    "created_at": "2012-07-30T12:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198254",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
You are right for 1 and 3. It's not obvious for me to write such stuff.

2: it's just that both are working. I changed to is_directed() which is cleaner.

4: I did it. So far I have not seen any difference but it could be interesting for some graphs, and it is strongly dependent on the dfs ordering.

I have also changed seen from set to dict. It could be faster to access a cell of a dictionary than to test is a elt is in a set. Furthermore, I avoid testing w!=u by initializing seen[u] to True, so it will never be considered.

Thanks for the comments.



---

archive/issue_comments_198255.json:
```json
{
    "body": "<a id='comment:17'></a>\nI changed the position of the targets.discard(w) to discard when it enters the queue and not when it is removed. That's better.",
    "created_at": "2012-07-30T12:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198255",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>
I changed the position of the targets.discard(w) to discard when it enters the queue and not when it is removed. That's better.



---

archive/issue_comments_198256.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [dcoudert](#comment%3A16):\n> I have also changed seen from set to dict. It could be faster to access a cell of a >dictionary than to test is a elt is in a set.\n\nIIRC they are both implemented as hash maps, which should make the set faster. I think it has something to do with the fact that the \"v in s\" has to catch the KeyError and return False instead of just raising the exception. That's exactly what happens with your dict here. It doesn't catch KeyError, but that's fine because it never occurs. Making it faster.\n\nIn contrast, if you let it catch the exception aka \"seen.get(w, False)\", the dict is a lot slower.\n\n\n>Furthermore, I avoid testing w!=u by initializing seen[u] to True, so it will never be considered.\n>\n\nGood idea.\n\nOnce I checked the manual and ptestlong, I'll give it a positive review.",
    "created_at": "2012-07-30T13:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198256",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:18'></a>
Replying to [dcoudert](#comment%3A16):
> I have also changed seen from set to dict. It could be faster to access a cell of a >dictionary than to test is a elt is in a set.

IIRC they are both implemented as hash maps, which should make the set faster. I think it has something to do with the fact that the "v in s" has to catch the KeyError and return False instead of just raising the exception. That's exactly what happens with your dict here. It doesn't catch KeyError, but that's fine because it never occurs. Making it faster.

In contrast, if you let it catch the exception aka "seen.get(w, False)", the dict is a lot slower.


>Furthermore, I avoid testing w!=u by initializing seen[u] to True, so it will never be considered.
>

Good idea.

Once I checked the manual and ptestlong, I'll give it a positive review.



---

archive/issue_comments_198257.json:
```json
{
    "body": "<a id='comment:19'></a>\nI found a bug in the directed case. \n\n```\nsage: D = DiGraph()\nsage: D.add_edges(((1,2),(2,1),(2,5),(3,4),(4,3),(4,5),(5,6),(6,5),(5,7),(7,5),(6,7),(7,6)))\nsage: D.is_cut_vertex(5) # Should be False\nTrue\nsage: D.strongly_connected_components()\n[[1, 2], [3, 4], [5, 6, 7]]\nsage: D.delete_vertex(5)\nsage: D.strongly_connected_components()  # The number of components did not increase.\n[[1, 2], [3, 4], [6, 7]]\n```\n\nEdit: Possible solution: Check only those neighbors which are in the same strong component as v.",
    "created_at": "2012-07-30T16:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198257",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:19'></a>
I found a bug in the directed case. 

```
sage: D = DiGraph()
sage: D.add_edges(((1,2),(2,1),(2,5),(3,4),(4,3),(4,5),(5,6),(6,5),(5,7),(7,5),(6,7),(7,6)))
sage: D.is_cut_vertex(5) # Should be False
True
sage: D.strongly_connected_components()
[[1, 2], [3, 4], [5, 6, 7]]
sage: D.delete_vertex(5)
sage: D.strongly_connected_components()  # The number of components did not increase.
[[1, 2], [3, 4], [6, 7]]
```

Edit: Possible solution: Check only those neighbors which are in the same strong component as v.



---

archive/issue_comments_198258.json:
```json
{
    "body": "<a id='comment:20'></a>\nOuppss. This is solved in this new version. I'm using a set of vertices to restrict the DFS to the vertices in the connected or strongly connected component containing u.\n\nI have also restored the `seen = set([start, u])` instead of a dict since only a subset of the vertices are now considered. In fact I don't know if it has a real impact on the performances, but it reduces initialization cost per loop.\n\nI hope everything is in order now ;-)\n\nDon't forget to put your name as reviewer.",
    "created_at": "2012-07-30T17:29:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198258",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>
Ouppss. This is solved in this new version. I'm using a set of vertices to restrict the DFS to the vertices in the connected or strongly connected component containing u.

I have also restored the `seen = set([start, u])` instead of a dict since only a subset of the vertices are now considered. In fact I don't know if it has a real impact on the performances, but it reduces initialization cost per loop.

I hope everything is in order now ;-)

Don't forget to put your name as reviewer.



---

archive/issue_comments_198259.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [dcoudert](#comment%3A20):\n> Ouppss. This is solved in this new version. I'm using a set of vertices to restrict the DFS to the vertices in the connected or strongly connected component containing u.\n> \n  \nIs this really necessary for the undirected case? Aren't all neighbors of v in the same connected component as v?",
    "created_at": "2012-07-30T18:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198259",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:21'></a>
Replying to [dcoudert](#comment%3A20):
> Ouppss. This is solved in this new version. I'm using a set of vertices to restrict the DFS to the vertices in the connected or strongly connected component containing u.
> 
  
Is this really necessary for the undirected case? Aren't all neighbors of v in the same connected component as v?



---

archive/issue_comments_198260.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Sebastian Luther\"",
    "created_at": "2012-07-30T18:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198260",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

Changing reviewer from "" to "Sebastian Luther"



---

archive/issue_comments_198261.json:
```json
{
    "body": "<a id='comment:23'></a>\nYes, all neighbors of v are in the same connected component. I have replaced the code with `CC = [self.vertex_iterator()]`.\n\nI did several tests to see if it would be faster to duplicate the code to avoid the test `w in CC` but then we need to add the test `w != u` which takes some time as well (although very little) and overall the difference is very small. So I have finally decided not to duplicate the code.",
    "created_at": "2012-07-30T22:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198261",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>
Yes, all neighbors of v are in the same connected component. I have replaced the code with `CC = [self.vertex_iterator()]`.

I did several tests to see if it would be faster to duplicate the code to avoid the test `w in CC` but then we need to add the test `w != u` which takes some time as well (although very little) and overall the difference is very small. So I have finally decided not to duplicate the code.



---

archive/issue_comments_198262.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-01T05:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198262",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198263.json:
```json
{
    "body": "<a id='comment:24'></a>\nTests pass, documentation looks good. Positiv review!",
    "created_at": "2012-08-01T05:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198263",
    "user": "https://trac.sagemath.org/admin/accounts/users/sluther"
}
```

<a id='comment:24'></a>
Tests pass, documentation looks good. Positiv review!



---

archive/issue_comments_198264.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks for the review and all the comments. The patch is much better now.",
    "created_at": "2012-08-01T06:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198264",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>
Thanks for the review and all the comments. The patch is much better now.



---

archive/issue_comments_198265.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-13T06:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198265",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_198266.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis needs to be rebased to sage-5.3.beta1.",
    "created_at": "2012-08-13T06:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198266",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
This needs to be rebased to sage-5.3.beta1.



---

archive/issue_comments_198267.json:
```json
{
    "body": "Attachment [trac_13289_is_cut_vertex.patch](tarball://root/attachments/some-uuid/ticket13289/trac_13289_is_cut_vertex.patch) by @dcoudert created at 2012-08-13 14:30:18\n\nrebased for sage-5.3.beta1",
    "created_at": "2012-08-13T14:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198267",
    "user": "https://github.com/dcoudert"
}
```

Attachment [trac_13289_is_cut_vertex.patch](tarball://root/attachments/some-uuid/ticket13289/trac_13289_is_cut_vertex.patch) by @dcoudert created at 2012-08-13 14:30:18

rebased for sage-5.3.beta1



---

archive/issue_comments_198268.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-13T14:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198268",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_198269.json:
```json
{
    "body": "<a id='comment:27'></a>\nHello,\n\nI have rebased the patch to sage-5.3.beta1, so it should be easily reviewed.\n\nBest,",
    "created_at": "2012-08-13T14:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198269",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>
Hello,

I have rebased the patch to sage-5.3.beta1, so it should be easily reviewed.

Best,



---

archive/issue_comments_198270.json:
```json
{
    "body": "<a id='comment:28'></a>\nFor a trivial rebase, you can change the status yourself to `positive_review`.",
    "created_at": "2012-09-26T07:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198270",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
For a trivial rebase, you can change the status yourself to `positive_review`.



---

archive/issue_comments_198271.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-26T07:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198271",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_198272.json:
```json
{
    "body": "<a id='comment:29'></a>\nI didn't know that.\nThank you.",
    "created_at": "2012-09-26T08:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198272",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'></a>
I didn't know that.
Thank you.



---

archive/issue_comments_198273.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.4.rc0\"",
    "created_at": "2012-09-28T07:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198273",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.4.rc0"



---

archive/issue_comments_198274.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-28T07:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13289#issuecomment-198274",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_036767.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-28T07:47:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13289",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13289#event-36767"
}
```
