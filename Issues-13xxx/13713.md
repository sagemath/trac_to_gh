# Issue 13713: view: change engine default value from 'latex' to 'pdflatex'

archive/issues_013509.json:
```json
{
    "assignees": [],
    "body": "In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n\nWhen engine is `'pdflatex'`, the compilation just work.\n\nThe purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.\n\nEXAMPLE::\n\nCreate this graph:\n\n```\nsage: F = GF(3)\nsage: gens = [matrix(F,2,[1,0, 1,1]), matrix(F,2, [1,1, 0,1])]\nsage: group = MatrixGroup(gens)\nsage: G = group.cayley_graph()\n```\n\nIt is not too big:\n\n```\nsage: G\nDigraph on 24 vertices\n```\n\nNote that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.\n\nWith dot2tex-2.8.7-2 and graphviz installed, the following work:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='neato')\nsage: view(G)\nsage: G.set_latex_options(format='dot2tex', prog='twopi')\nsage: view(G)\nsage: G.set_latex_options(format='dot2tex', prog='fdp')\nsage: view(G)\n```\n\nBut not these ones:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G)\nAn error occurred.\n...\nLaTex error\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G)\nAn error occurred.\n...\nLaTex error\n```\n\nIt turns out that the following works:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex')\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex')\n```\n\n\nThe following does the trick:\n\n```\nsage: view(G, engine='pdflatex', tightpage=True)\n```\n\nApply [attachment: trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz), [attachment: trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz).\n\nComponent: **graphics**\n\nKeywords: **dot2tex**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\nReviewer: **John Palmieri, Travis Scrimshaw**\n\nMerged: **sage-5.10.beta0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13713_\n\n",
    "closed_at": "2013-04-13T13:49:18Z",
    "created_at": "2012-11-15T14:35:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "view: change engine default value from 'latex' to 'pdflatex'",
    "type": "issue",
    "updated_at": "2013-04-13T13:49:18Z",
    "url": "https://github.com/sagemath/sage/issues/13713",
    "user": "https://github.com/seblabbe"
}
```
In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.

When engine is `'pdflatex'`, the compilation just work.

The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.

EXAMPLE::

Create this graph:

```
sage: F = GF(3)
sage: gens = [matrix(F,2,[1,0, 1,1]), matrix(F,2, [1,1, 0,1])]
sage: group = MatrixGroup(gens)
sage: G = group.cayley_graph()
```

It is not too big:

```
sage: G
Digraph on 24 vertices
```

Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.

With dot2tex-2.8.7-2 and graphviz installed, the following work:

```
sage: G.set_latex_options(format='dot2tex', prog='neato')
sage: view(G)
sage: G.set_latex_options(format='dot2tex', prog='twopi')
sage: view(G)
sage: G.set_latex_options(format='dot2tex', prog='fdp')
sage: view(G)
```

But not these ones:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G)
An error occurred.
...
LaTex error
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G)
An error occurred.
...
LaTex error
```

It turns out that the following works:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex')
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex')
```


The following does the trick:

```
sage: view(G, engine='pdflatex', tightpage=True)
```

Apply [attachment: trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz), [attachment: trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz).

Component: **graphics**

Keywords: **dot2tex**

Author: **Sébastien Labbé**

Reviewer: **John Palmieri, Travis Scrimshaw**

Merged: **sage-5.10.beta0**

_Issue created by migration from https://trac.sagemath.org/ticket/13713_





---

archive/issue_events_190310.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-15T14:35:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190310"
}
```



---

archive/issue_events_190311.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-15T14:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190311"
}
```



---

archive/issue_events_190312.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-15T14:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190312"
}
```



---

archive/issue_events_190313.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-15T14:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190313"
}
```



---

archive/issue_comments_161094.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIf you run `view(G, debug=True)`, you should get more information about the error.",
    "created_at": "2012-11-15T15:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161094",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

If you run `view(G, debug=True)`, you should get more information about the error.



---

archive/issue_comments_161095.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,14 +14,18 @@\n Digraph on 24 vertices\n ```\n \n-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, this works:\n+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='neato')\n sage: view(G)\n+sage: G.set_latex_options(format='dot2tex', prog='twopi')\n+sage: view(G)\n+sage: G.set_latex_options(format='dot2tex', prog='fdp')\n+sage: view(G)\n ```\n \n-But not this one:\n+But not these ones:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='dot')\n@@ -29,6 +33,11 @@\n An error occurred.\n ...\n LaTex error\n+sage: G.set_latex_options(format='dot2tex', prog='circo')\n+sage: view(G)\n+An error occurred.\n+...\n+LaTex error\n ```\n \n I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.\n``````\n",
    "created_at": "2012-11-15T22:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161095",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,14 +14,18 @@
 Digraph on 24 vertices
 ```
 
-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, this works:
+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='neato')
 sage: view(G)
+sage: G.set_latex_options(format='dot2tex', prog='twopi')
+sage: view(G)
+sage: G.set_latex_options(format='dot2tex', prog='fdp')
+sage: view(G)
 ```
 
-But not this one:
+But not these ones:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='dot')
@@ -29,6 +33,11 @@
 An error occurred.
 ...
 LaTex error
+sage: G.set_latex_options(format='dot2tex', prog='circo')
+sage: view(G)
+An error occurred.
+...
+LaTex error
 ```
 
 I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.
``````




---

archive/issue_comments_161096.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n> If you run `view(G, debug=True)`, you should get more information about the error.\n\nIn a working example, relevant part of the log is below. So if I understand correctly, the command view is first trying the path tex -> dvi -> png, if some error occurs, then tries dvi -> ps -> pdf. And now I understand why it is so slow when it works::\n\n```\nsage: sage: G.set_latex_options(format='dot2tex', prog='neato')\nsage: view(G, debug=True)\n\\documentclass{article}\n...\n\\begin{document}\n...\n\\end{document}\n['sage-native-execute', 'latex', '\\\\nonstopmode', '\\\\input{sage.tex}']\n['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)\nentering extended mode\nLaTeX2e <2009/09/24>\nBabel ...\n...\nOutput written on sage.dvi (1 page, 32420 bytes).\nTranscript written on sage.log.\nThis is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\n...\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\nbad dvi file; running dvips and ps2pdf instead...\n['sage-native-execute', 'dvips', 'sage.dvi']\n['sage-native-execute', 'ps2pdf', 'sage.ps']\nThis is dvips(k) 5.98 Copyright 2009 Radical Eye Software (www.radicaleye.com)\n' TeX output 2012.11.16:0002' -> sage.ps\n...\nviewer: \"sage-open\"\nsage: \n```\n\nAnd, now the log of the non working example is below. There are some Overfull vbox and hbox during the latex -> dvi phase so that the next dvi -> png ends with an error and thus does not try \"running dvips and ps2pdf instead...\" as above :\n\n```\nsage: sage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, debug=True)\n\\documentclass{article}\n...\n\\begin{document}\n...\n\\end{document}\n['sage-native-execute', 'latex', '\\\\nonstopmode', '\\\\input{sage.tex}']\n['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)\nentering extended mode\nLaTeX2e <2009/09/24>\nBabel ...\n...\nOverfull \\hbox (138.51622pt too wide) detected at line 119\n[]\n[1]\nOverfull \\vbox (677.07953pt too high) has occurred while \\output is active [2] (./sage.aux) )\n(see the transcript file for additional information)\nOutput written on sage.dvi (2 pages, 35212 bytes).\nTranscript written on sage.log.\nThis is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\n...\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\nAn error occurred.\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009) (format=latex 2011.4.19)  15 NOV 2012 23:59\nentering extended mode\n...\n...\n...\n...\n...\nOverfull \\hbox (138.51622pt too wide) detected at line 119 [] []\n[1] Overfull \\vbox (677.07953pt too high) has occurred while \\output is active []\n...\n...\nOutput written on sage.dvi (2 pages, 35212 bytes).\n\nLatex error\nsage: \n```",
    "created_at": "2012-11-15T23:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161096",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">comment:3</div>

> If you run `view(G, debug=True)`, you should get more information about the error.

In a working example, relevant part of the log is below. So if I understand correctly, the command view is first trying the path tex -> dvi -> png, if some error occurs, then tries dvi -> ps -> pdf. And now I understand why it is so slow when it works::

```
sage: sage: G.set_latex_options(format='dot2tex', prog='neato')
sage: view(G, debug=True)
\documentclass{article}
...
\begin{document}
...
\end{document}
['sage-native-execute', 'latex', '\\nonstopmode', '\\input{sage.tex}']
['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)
entering extended mode
LaTeX2e <2009/09/24>
Babel ...
...
Output written on sage.dvi (1 page, 32420 bytes).
Transcript written on sage.log.
This is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
...
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
bad dvi file; running dvips and ps2pdf instead...
['sage-native-execute', 'dvips', 'sage.dvi']
['sage-native-execute', 'ps2pdf', 'sage.ps']
This is dvips(k) 5.98 Copyright 2009 Radical Eye Software (www.radicaleye.com)
' TeX output 2012.11.16:0002' -> sage.ps
...
viewer: "sage-open"
sage: 
```

And, now the log of the non working example is below. There are some Overfull vbox and hbox during the latex -> dvi phase so that the next dvi -> png ends with an error and thus does not try "running dvips and ps2pdf instead..." as above :

```
sage: sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, debug=True)
\documentclass{article}
...
\begin{document}
...
\end{document}
['sage-native-execute', 'latex', '\\nonstopmode', '\\input{sage.tex}']
['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)
entering extended mode
LaTeX2e <2009/09/24>
Babel ...
...
Overfull \hbox (138.51622pt too wide) detected at line 119
[]
[1]
Overfull \vbox (677.07953pt too high) has occurred while \output is active [2] (./sage.aux) )
(see the transcript file for additional information)
Output written on sage.dvi (2 pages, 35212 bytes).
Transcript written on sage.log.
This is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
...
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
An error occurred.
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009) (format=latex 2011.4.19)  15 NOV 2012 23:59
entering extended mode
...
...
...
...
...
Overfull \hbox (138.51622pt too wide) detected at line 119 [] []
[1] Overfull \vbox (677.07953pt too high) has occurred while \output is active []
...
...
Output written on sage.dvi (2 pages, 35212 bytes).

Latex error
sage: 
```



---

archive/issue_events_190314.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-16T00:12:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "title_is": "view generates a LaTex error on a graph of size 24",
    "title_was": "view generates a LaTex (memory?) error on a graph of size 24",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190314"
}
```



---

archive/issue_comments_161097.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOkay, it turns out that the default compilation (try : tex -> dvi -> png, except: dvi -> ps -> pdf) which doesn't like overfull vbox and hbox can be changed using the `engine` option. Thus,\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex')\n```\n\nand\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex')\n```\n\nboth compile fine and give pdf files with clear overfull vbox and hbox. And, one can see the complete graphs by using `tightpage=True`:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex', tightpage=True)\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex', tightpage=True)\n```",
    "created_at": "2012-11-16T00:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161097",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:4" align="right">comment:4</div>

Okay, it turns out that the default compilation (try : tex -> dvi -> png, except: dvi -> ps -> pdf) which doesn't like overfull vbox and hbox can be changed using the `engine` option. Thus,

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex')
```

and

```
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex')
```

both compile fine and give pdf files with clear overfull vbox and hbox. And, one can see the complete graphs by using `tightpage=True`:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex', tightpage=True)
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex', tightpage=True)
```



---

archive/issue_comments_161098.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSo before closing this ticket, I ask the following question:\n\nWhy is the default compilation of the command view doing (try : tex -> dvi -> png, except: dvi -> ps -> pdf) ? In which case is it better to do (tex -> dvi -> png) or (tex -> dvi -> ps -> pdf) rather then simply (tex -> pdf) ?\n\nIt has been a long time since I have seen pstricks code around here... and I would like \n\n```\nview(G)\n```\n\nto just work.",
    "created_at": "2012-11-16T00:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161098",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:5" align="right">comment:5</div>

So before closing this ticket, I ask the following question:

Why is the default compilation of the command view doing (try : tex -> dvi -> png, except: dvi -> ps -> pdf) ? In which case is it better to do (tex -> dvi -> png) or (tex -> dvi -> ps -> pdf) rather then simply (tex -> pdf) ?

It has been a long time since I have seen pstricks code around here... and I would like 

```
view(G)
```

to just work.



---

archive/issue_comments_161099.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,4 +40,19 @@\n LaTex error\n ```\n \n-I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.\n+It turns out that the following works:\n+\n+```\n+sage: G.set_latex_options(format='dot2tex', prog='dot')\n+sage: view(G, engine='pdflatex')\n+sage: G.set_latex_options(format='dot2tex', prog='circo')\n+sage: view(G, engine='pdflatex')\n+```\n+\n+The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n+\n+The following does the trick:\n+\n+```\n+sage: view(G, engine='pdflatex', tightpage=True)\n+```\n``````\n",
    "created_at": "2012-11-16T01:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161099",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,4 +40,19 @@
 LaTex error
 ```
 
-I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.
+It turns out that the following works:
+
+```
+sage: G.set_latex_options(format='dot2tex', prog='dot')
+sage: view(G, engine='pdflatex')
+sage: G.set_latex_options(format='dot2tex', prog='circo')
+sage: view(G, engine='pdflatex')
+```
+
+The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
+
+The following does the trick:
+
+```
+sage: view(G, engine='pdflatex', tightpage=True)
+```
``````




---

archive/issue_comments_161100.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAt first sight, I am also in favor of switching to pdflatex as default engine.",
    "created_at": "2013-03-11T18:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161100",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:7" align="right">comment:7</div>

At first sight, I am also in favor of switching to pdflatex as default engine.



---

archive/issue_comments_161101.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nthiery](#comment%3A7):\n> At first sight, I am also in favor of switching to pdflatex as default engine.\n\nSounds okay to me.",
    "created_at": "2013-03-11T18:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161101",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nthiery](#comment%3A7):
> At first sight, I am also in favor of switching to pdflatex as default engine.

Sounds okay to me.



---

archive/issue_comments_161102.json:
```json
{
    "body": "tested on sage-5.7.beta4",
    "created_at": "2013-04-02T15:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161102",
    "user": "https://github.com/seblabbe"
}
```

tested on sage-5.7.beta4



---

archive/issue_comments_161103.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+view generates a LaTex error on a graph of size 24:\n+\n+In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n+\n+When engine is `'pdflatex'`, the compilation just work.\n+\n+EXAMPLE::\n+\n Create this graph:\n \n ```\n@@ -14,7 +22,9 @@\n Digraph on 24 vertices\n ```\n \n-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:\n+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.\n+\n+With dot2tex-2.8.7-2 and graphviz installed, the following work:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='neato')\n@@ -49,7 +59,6 @@\n sage: view(G, engine='pdflatex')\n ```\n \n-The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n \n The following does the trick:\n \n``````\n",
    "created_at": "2013-04-02T15:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161103",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
+view generates a LaTex error on a graph of size 24:
+
+In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
+
+When engine is `'pdflatex'`, the compilation just work.
+
+EXAMPLE::
+
 Create this graph:
 
 ```
@@ -14,7 +22,9 @@
 Digraph on 24 vertices
 ```
 
-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:
+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.
+
+With dot2tex-2.8.7-2 and graphviz installed, the following work:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='neato')
@@ -49,7 +59,6 @@
 sage: view(G, engine='pdflatex')
 ```
 
-The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
 
 The following does the trick:
 
``````




---

archive/issue_comments_161104.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[trac_13713_engine_pdflatex-sl.patch.gz](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz)**",
    "created_at": "2013-04-02T15:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161104",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[trac_13713_engine_pdflatex-sl.patch.gz](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz)**



---

archive/issue_events_190315.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2013-04-02T15:37:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "title_is": "view: change engine default value from 'latex' to 'pdflatex'",
    "title_was": "view generates a LaTex error on a graph of size 24",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190315"
}
```



---

archive/issue_comments_161105.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-view generates a LaTex error on a graph of size 24:\n-\n In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n \n When engine is `'pdflatex'`, the compilation just work.\n+\n+The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.\n \n EXAMPLE::\n \n``````\n",
    "created_at": "2013-04-02T15:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161105",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-view generates a LaTex error on a graph of size 24:
-
 In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
 
 When engine is `'pdflatex'`, the compilation just work.
+
+The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.
 
 EXAMPLE::
 
``````




---

archive/issue_events_190316.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2013-04-02T15:50:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190316"
}
```



---

archive/issue_comments_161106.json:
```json
{
    "body": "Author: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2013-04-02T15:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161106",
    "user": "https://github.com/seblabbe"
}
```

Author: **Sébastien Labbé**



---

archive/issue_comments_161107.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'm happy with the main patch. I think it requires some modifications to the documentation in the `latex_examples` class, so I've attached a referee patch to deal with that.",
    "created_at": "2013-04-02T18:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161107",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

I'm happy with the main patch. I think it requires some modifications to the documentation in the `latex_examples` class, so I've attached a referee patch to deal with that.



---

archive/issue_comments_161108.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2013-04-02T18:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161108",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_161109.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_13713-examples-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz)**\n\nFor what it's worth, I was getting the \"latex error\" on just using view with 'latex' after I did some updatings (even doing something as simple as `view(2)`). However with the 'pdflatex', things are working again, so I think this is a good switch to make.",
    "created_at": "2013-04-02T18:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161109",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_13713-examples-jhp.patch.gz](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz)**

For what it's worth, I was getting the "latex error" on just using view with 'latex' after I did some updatings (even doing something as simple as `view(2)`). However with the 'pdflatex', things are working again, so I think this is a good switch to make.



---

archive/issue_comments_161110.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDon't forget to indicate which patch(es) need to be applied.",
    "created_at": "2013-04-03T07:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161110",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Don't forget to indicate which patch(es) need to be applied.



---

archive/issue_events_190317.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T07:44:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190317"
}
```



---

archive/issue_events_190318.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T07:44:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190318"
}
```



---

archive/issue_comments_161111.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -65,3 +65,5 @@\n ```\n sage: view(G, engine='pdflatex', tightpage=True)\n ```\n+\n+Apply [attachment: trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz), [attachment: trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz).\n``````\n",
    "created_at": "2013-04-03T09:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161111",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -65,3 +65,5 @@
 ```
 sage: view(G, engine='pdflatex', tightpage=True)
 ```
+
+Apply [attachment: trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch.gz), [attachment: trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch.gz).
``````




---

archive/issue_comments_161112.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThere are 5 tests failing on the patchbot, but do not seem related to this ticket :\n\n```\nsage -t sage/interfaces/expect.py  # 1 doctest failed\nsage -t sage/interacts/debugger.py  # 8 doctests failed\nsage -t doc/en/prep/Intro-Tutorial.rst  # Killed due to kill signal\nsage -t sage/modules/free_module_homspace.py  # Killed due to kill signal\nsage -t sage/graphs/generators/world_map.py  # Killed due to kill signal\n```",
    "created_at": "2013-04-03T09:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161112",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

There are 5 tests failing on the patchbot, but do not seem related to this ticket :

```
sage -t sage/interfaces/expect.py  # 1 doctest failed
sage -t sage/interacts/debugger.py  # 8 doctests failed
sage -t doc/en/prep/Intro-Tutorial.rst  # Killed due to kill signal
sage -t sage/modules/free_module_homspace.py  # Killed due to kill signal
sage -t sage/graphs/generators/world_map.py  # Killed due to kill signal
```



---

archive/issue_events_190319.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-08T22:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190319"
}
```



---

archive/issue_events_190320.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-08T22:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190320"
}
```



---

archive/issue_comments_161113.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nEverything looks good to me.",
    "created_at": "2013-04-08T22:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161113",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Everything looks good to me.



---

archive/issue_comments_161114.json:
```json
{
    "body": "Changed reviewer from **John Palmieri** to **John Palmieri, Travis Scrimshaw**",
    "created_at": "2013-04-08T22:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161114",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **John Palmieri** to **John Palmieri, Travis Scrimshaw**



---

archive/issue_events_190321.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-09T06:45:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190321"
}
```



---

archive/issue_events_190322.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-09T06:45:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190322"
}
```



---

archive/issue_comments_161115.json:
```json
{
    "body": "Merged: **sage-5.10.beta0**",
    "created_at": "2013-04-13T13:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-161115",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta0**



---

archive/issue_events_190323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-13T13:49:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190323"
}
```



---

archive/issue_events_190324.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-13T13:49:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-190324"
}
```
