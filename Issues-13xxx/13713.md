# Issue 13713: view: change engine default value from 'latex' to 'pdflatex'

archive/issues_013509.json:
```json
{
    "body": "In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n\nWhen engine is `'pdflatex'`, the compilation just work.\n\nThe purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.\n\nEXAMPLE::\n\nCreate this graph:\n\n```\nsage: F = GF(3)\nsage: gens = [matrix(F,2,[1,0, 1,1]), matrix(F,2, [1,1, 0,1])]\nsage: group = MatrixGroup(gens)\nsage: G = group.cayley_graph()\n```\n\nIt is not too big:\n\n```\nsage: G\nDigraph on 24 vertices\n```\n\nNote that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.\n\nWith dot2tex-2.8.7-2 and graphviz installed, the following work:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='neato')\nsage: view(G)\nsage: G.set_latex_options(format='dot2tex', prog='twopi')\nsage: view(G)\nsage: G.set_latex_options(format='dot2tex', prog='fdp')\nsage: view(G)\n```\n\nBut not these ones:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G)\nAn error occurred.\n...\nLaTex error\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G)\nAn error occurred.\n...\nLaTex error\n```\n\nIt turns out that the following works:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex')\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex')\n```\n\n\nThe following does the trick:\n\n```\nsage: view(G, engine='pdflatex', tightpage=True)\n```\n\nApply [[attachment:trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/b7522f8363d9bb9b7702581b643d9c0d.patch](https://github.com/sagemath/sage/files/ticket13713/0c54cf0be2bc1a12916e890496b82e65.patch),).\n\n**Keywords:** dot2tex\n\n**Reviewer:** John Palmieri, Travis Scrimshaw\n\n**Author:** S\u00e9bastien Labb\u00e9\n\n**Merged:** sage-5.10.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/13713\n\n",
    "closed_at": "2013-04-13T13:49:18Z",
    "created_at": "2012-11-15T14:35:56Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "title": "view: change engine default value from 'latex' to 'pdflatex'",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/13713",
    "user": "https://github.com/seblabbe"
}
```
In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.

When engine is `'pdflatex'`, the compilation just work.

The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.

EXAMPLE::

Create this graph:

```
sage: F = GF(3)
sage: gens = [matrix(F,2,[1,0, 1,1]), matrix(F,2, [1,1, 0,1])]
sage: group = MatrixGroup(gens)
sage: G = group.cayley_graph()
```

It is not too big:

```
sage: G
Digraph on 24 vertices
```

Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.

With dot2tex-2.8.7-2 and graphviz installed, the following work:

```
sage: G.set_latex_options(format='dot2tex', prog='neato')
sage: view(G)
sage: G.set_latex_options(format='dot2tex', prog='twopi')
sage: view(G)
sage: G.set_latex_options(format='dot2tex', prog='fdp')
sage: view(G)
```

But not these ones:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G)
An error occurred.
...
LaTex error
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G)
An error occurred.
...
LaTex error
```

It turns out that the following works:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex')
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex')
```


The following does the trick:

```
sage: view(G, engine='pdflatex', tightpage=True)
```

Apply [[attachment:trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/b7522f8363d9bb9b7702581b643d9c0d.patch](https://github.com/sagemath/sage/files/ticket13713/0c54cf0be2bc1a12916e890496b82e65.patch),).

**Keywords:** dot2tex

**Reviewer:** John Palmieri, Travis Scrimshaw

**Author:** Sébastien Labbé

**Merged:** sage-5.10.beta0

Issue created by migration from https://trac.sagemath.org/ticket/13713





---

archive/issue_comments_163447.json:
```json
{
    "body": "<a id='comment:1'></a>\nIf you run `view(G, debug=True)`, you should get more information about the error.",
    "created_at": "2012-11-15T15:38:34Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163447",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'></a>
If you run `view(G, debug=True)`, you should get more information about the error.



---

archive/issue_comments_163448.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,14 +14,18 @@\n Digraph on 24 vertices\n ```\n \n-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, this works:\n+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='neato')\n sage: view(G)\n+sage: G.set_latex_options(format='dot2tex', prog='twopi')\n+sage: view(G)\n+sage: G.set_latex_options(format='dot2tex', prog='fdp')\n+sage: view(G)\n ```\n \n-But not this one:\n+But not these ones:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='dot')\n@@ -29,6 +33,11 @@\n An error occurred.\n ...\n LaTex error\n+sage: G.set_latex_options(format='dot2tex', prog='circo')\n+sage: view(G)\n+An error occurred.\n+...\n+LaTex error\n ```\n \n I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.\n``````\n",
    "created_at": "2012-11-15T22:56:18Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163448",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,14 +14,18 @@
 Digraph on 24 vertices
 ```
 
-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, this works:
+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='neato')
 sage: view(G)
+sage: G.set_latex_options(format='dot2tex', prog='twopi')
+sage: view(G)
+sage: G.set_latex_options(format='dot2tex', prog='fdp')
+sage: view(G)
 ```
 
-But not this one:
+But not these ones:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='dot')
@@ -29,6 +33,11 @@
 An error occurred.
 ...
 LaTex error
+sage: G.set_latex_options(format='dot2tex', prog='circo')
+sage: view(G)
+An error occurred.
+...
+LaTex error
 ```
 
 I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.
``````




---

archive/issue_comments_163449.json:
```json
{
    "body": "<a id='comment:3'></a>\n> If you run `view(G, debug=True)`, you should get more information about the error.\n\nIn a working example, relevant part of the log is below. So if I understand correctly, the command view is first trying the path tex -> dvi -> png, if some error occurs, then tries dvi -> ps -> pdf. And now I understand why it is so slow when it works::\n\n```\nsage: sage: G.set_latex_options(format='dot2tex', prog='neato')\nsage: view(G, debug=True)\n\\documentclass{article}\n...\n\\begin{document}\n...\n\\end{document}\n['sage-native-execute', 'latex', '\\\\nonstopmode', '\\\\input{sage.tex}']\n['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)\nentering extended mode\nLaTeX2e <2009/09/24>\nBabel ...\n...\nOutput written on sage.dvi (1 page, 32420 bytes).\nTranscript written on sage.log.\nThis is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\n...\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\nbad dvi file; running dvips and ps2pdf instead...\n['sage-native-execute', 'dvips', 'sage.dvi']\n['sage-native-execute', 'ps2pdf', 'sage.ps']\nThis is dvips(k) 5.98 Copyright 2009 Radical Eye Software (www.radicaleye.com)\n' TeX output 2012.11.16:0002' -> sage.ps\n...\nviewer: \"sage-open\"\nsage: \n```\n\nAnd, now the log of the non working example is below. There are some Overfull vbox and hbox during the latex -> dvi phase so that the next dvi -> png ends with an error and thus does not try \"running dvips and ps2pdf instead...\" as above :\n\n```\nsage: sage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, debug=True)\n\\documentclass{article}\n...\n\\begin{document}\n...\n\\end{document}\n['sage-native-execute', 'latex', '\\\\nonstopmode', '\\\\input{sage.tex}']\n['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)\nentering extended mode\nLaTeX2e <2009/09/24>\nBabel ...\n...\nOverfull \\hbox (138.51622pt too wide) detected at line 119\n[]\n[1]\nOverfull \\vbox (677.07953pt too high) has occurred while \\output is active [2] (./sage.aux) )\n(see the transcript file for additional information)\nOutput written on sage.dvi (2 pages, 35212 bytes).\nTranscript written on sage.log.\nThis is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\n...\nGPL Ghostscript 8.70: Unrecoverable error, exit code 1\nAn error occurred.\nThis is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009) (format=latex 2011.4.19)  15 NOV 2012 23:59\nentering extended mode\n...\n...\n...\n...\n...\nOverfull \\hbox (138.51622pt too wide) detected at line 119 [] []\n[1] Overfull \\vbox (677.07953pt too high) has occurred while \\output is active []\n...\n...\nOutput written on sage.dvi (2 pages, 35212 bytes).\n\nLatex error\nsage: \n```",
    "created_at": "2012-11-15T23:54:23Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163449",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
> If you run `view(G, debug=True)`, you should get more information about the error.

In a working example, relevant part of the log is below. So if I understand correctly, the command view is first trying the path tex -> dvi -> png, if some error occurs, then tries dvi -> ps -> pdf. And now I understand why it is so slow when it works::

```
sage: sage: G.set_latex_options(format='dot2tex', prog='neato')
sage: view(G, debug=True)
\documentclass{article}
...
\begin{document}
...
\end{document}
['sage-native-execute', 'latex', '\\nonstopmode', '\\input{sage.tex}']
['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)
entering extended mode
LaTeX2e <2009/09/24>
Babel ...
...
Output written on sage.dvi (1 page, 32420 bytes).
Transcript written on sage.log.
This is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
...
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
bad dvi file; running dvips and ps2pdf instead...
['sage-native-execute', 'dvips', 'sage.dvi']
['sage-native-execute', 'ps2pdf', 'sage.ps']
This is dvips(k) 5.98 Copyright 2009 Radical Eye Software (www.radicaleye.com)
' TeX output 2012.11.16:0002' -> sage.ps
...
viewer: "sage-open"
sage: 
```

And, now the log of the non working example is below. There are some Overfull vbox and hbox during the latex -> dvi phase so that the next dvi -> png ends with an error and thus does not try "running dvips and ps2pdf instead..." as above :

```
sage: sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, debug=True)
\documentclass{article}
...
\begin{document}
...
\end{document}
['sage-native-execute', 'latex', '\\nonstopmode', '\\input{sage.tex}']
['sage-native-execute', 'dvipng', '--picky', '-q', '-T', 'tight', '-D', '150', 'sage.dvi', '-o', 'sage.png']
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009)
entering extended mode
LaTeX2e <2009/09/24>
Babel ...
...
Overfull \hbox (138.51622pt too wide) detected at line 119
[]
[1]
Overfull \vbox (677.07953pt too high) has occurred while \output is active [2] (./sage.aux) )
(see the transcript file for additional information)
Output written on sage.dvi (2 pages, 35212 bytes).
Transcript written on sage.log.
This is dvipng 1.12 Copyright 2002-2008 Jan-Ake Larsson
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
...
GPL Ghostscript 8.70: Unrecoverable error, exit code 1
An error occurred.
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009) (format=latex 2011.4.19)  15 NOV 2012 23:59
entering extended mode
...
...
...
...
...
Overfull \hbox (138.51622pt too wide) detected at line 119 [] []
[1] Overfull \vbox (677.07953pt too high) has occurred while \output is active []
...
...
Output written on sage.dvi (2 pages, 35212 bytes).

Latex error
sage: 
```



---

archive/issue_events_117401.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2012-11-16T00:12:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "rename": {
        "from": "view generates a LaTex (memory?) error on a graph of size 24",
        "to": "view generates a LaTex error on a graph of size 24"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117401"
}
```



---

archive/issue_comments_163450.json:
```json
{
    "body": "<a id='comment:4'></a>\nOkay, it turns out that the default compilation (try : tex -> dvi -> png, except: dvi -> ps -> pdf) which doesn't like overfull vbox and hbox can be changed using the `engine` option. Thus,\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex')\n```\n\nand\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex')\n```\n\nboth compile fine and give pdf files with clear overfull vbox and hbox. And, one can see the complete graphs by using `tightpage=True`:\n\n```\nsage: G.set_latex_options(format='dot2tex', prog='dot')\nsage: view(G, engine='pdflatex', tightpage=True)\nsage: G.set_latex_options(format='dot2tex', prog='circo')\nsage: view(G, engine='pdflatex', tightpage=True)\n```",
    "created_at": "2012-11-16T00:12:56Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163450",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'></a>
Okay, it turns out that the default compilation (try : tex -> dvi -> png, except: dvi -> ps -> pdf) which doesn't like overfull vbox and hbox can be changed using the `engine` option. Thus,

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex')
```

and

```
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex')
```

both compile fine and give pdf files with clear overfull vbox and hbox. And, one can see the complete graphs by using `tightpage=True`:

```
sage: G.set_latex_options(format='dot2tex', prog='dot')
sage: view(G, engine='pdflatex', tightpage=True)
sage: G.set_latex_options(format='dot2tex', prog='circo')
sage: view(G, engine='pdflatex', tightpage=True)
```



---

archive/issue_comments_163451.json:
```json
{
    "body": "<a id='comment:5'></a>\nSo before closing this ticket, I ask the following question:\n\nWhy is the default compilation of the command view doing (try : tex -> dvi -> png, except: dvi -> ps -> pdf) ? In which case is it better to do (tex -> dvi -> png) or (tex -> dvi -> ps -> pdf) rather then simply (tex -> pdf) ?\n\nIt has been a long time since I have seen pstricks code around here... and I would like \n\n```\nview(G)\n```\n\nto just work.",
    "created_at": "2012-11-16T00:23:29Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163451",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
So before closing this ticket, I ask the following question:

Why is the default compilation of the command view doing (try : tex -> dvi -> png, except: dvi -> ps -> pdf) ? In which case is it better to do (tex -> dvi -> png) or (tex -> dvi -> ps -> pdf) rather then simply (tex -> pdf) ?

It has been a long time since I have seen pstricks code around here... and I would like 

```
view(G)
```

to just work.



---

archive/issue_comments_163452.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -40,4 +40,19 @@\n LaTex error\n ```\n \n-I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.\n+It turns out that the following works:\n+\n+```\n+sage: G.set_latex_options(format='dot2tex', prog='dot')\n+sage: view(G, engine='pdflatex')\n+sage: G.set_latex_options(format='dot2tex', prog='circo')\n+sage: view(G, engine='pdflatex')\n+```\n+\n+The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n+\n+The following does the trick:\n+\n+```\n+sage: view(G, engine='pdflatex', tightpage=True)\n+```\n``````\n",
    "created_at": "2012-11-16T01:23:21Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163452",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -40,4 +40,19 @@
 LaTex error
 ```
 
-I know a workaround which is to [use the tikz2pdf script](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/11/using-sage-graphviz-dot2tex-tikz-tikz2pdf-to-draw-a-graph) which compiles fine. But, it would be nice if view could compile G as well.
+It turns out that the following works:
+
+```
+sage: G.set_latex_options(format='dot2tex', prog='dot')
+sage: view(G, engine='pdflatex')
+sage: G.set_latex_options(format='dot2tex', prog='circo')
+sage: view(G, engine='pdflatex')
+```
+
+The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
+
+The following does the trick:
+
+```
+sage: view(G, engine='pdflatex', tightpage=True)
+```
``````




---

archive/issue_comments_163453.json:
```json
{
    "body": "<a id='comment:7'></a>\nAt first sight, I am also in favor of switching to pdflatex as default engine.",
    "created_at": "2013-03-11T18:04:19Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163453",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>
At first sight, I am also in favor of switching to pdflatex as default engine.



---

archive/issue_comments_163454.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@nthiery](#comment%3A7):\n> At first sight, I am also in favor of switching to pdflatex as default engine.\n\nSounds okay to me.",
    "created_at": "2013-03-11T18:06:55Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163454",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Replying to [@nthiery](#comment%3A7):
> At first sight, I am also in favor of switching to pdflatex as default engine.

Sounds okay to me.



---

archive/issue_comments_163455.json:
```json
{
    "body": "tested on sage-5.7.beta4",
    "created_at": "2013-04-02T15:00:12Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163455",
    "user": "https://github.com/seblabbe"
}
```

tested on sage-5.7.beta4



---

archive/issue_comments_163456.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+view generates a LaTex error on a graph of size 24:\n+\n+In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n+\n+When engine is `'pdflatex'`, the compilation just work.\n+\n+EXAMPLE::\n+\n Create this graph:\n \n ```\n@@ -14,7 +22,9 @@\n Digraph on 24 vertices\n ```\n \n-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:\n+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.\n+\n+With dot2tex-2.8.7-2 and graphviz installed, the following work:\n \n ```\n sage: G.set_latex_options(format='dot2tex', prog='neato')\n@@ -49,7 +59,6 @@\n sage: view(G, engine='pdflatex')\n ```\n \n-The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n \n The following does the trick:\n \n``````\n",
    "created_at": "2013-04-02T15:37:39Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163456",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
+view generates a LaTex error on a graph of size 24:
+
+In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
+
+When engine is `'pdflatex'`, the compilation just work.
+
+EXAMPLE::
+
 Create this graph:
 
 ```
@@ -14,7 +22,9 @@
 Digraph on 24 vertices
 ```
 
-Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`. With dot2tex-2.8.7-2 and graphviz installed, the following work:
+Note that since the vertices of G are matrices, the default `format='tkz_graph'` [does not work](http://www.liafa.univ-paris-diderot.fr/~labbe/blogue/2012/10/draw-a-graph-of-matrices-in-latex-using-sage/). One need to use `format='dot2tex'`.
+
+With dot2tex-2.8.7-2 and graphviz installed, the following work:
 
 ```
 sage: G.set_latex_options(format='dot2tex', prog='neato')
@@ -49,7 +59,6 @@
 sage: view(G, engine='pdflatex')
 ```
 
-The default compilation is trying (tex -> dvi -> png, dvi -> ps -> pdf) and the useless (dvi -> png) conversion is broken because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
 
 The following does the trick:
 
``````




---

archive/attachments_019186.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13713_engine_pdflatex-sl.patch",
    "asset_url": "tarball://root/attachments/ticket13713/trac_13713_engine_pdflatex-sl.patch",
    "created_at": "2013-04-02T15:37:39Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch",
    "user": "https://github.com/seblabbe"
}
```



---

archive/issue_comments_163457.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Attachment:** [trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch)",
    "created_at": "2013-04-02T15:37:39Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163457",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
**Attachment:** [trac_13713_engine_pdflatex-sl.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713_engine_pdflatex-sl.patch)



---

archive/issue_events_117402.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2013-04-02T15:37:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "rename": {
        "from": "view generates a LaTex error on a graph of size 24",
        "to": "view: change engine default value from 'latex' to 'pdflatex'"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117402"
}
```



---

archive/issue_comments_163458.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-view generates a LaTex error on a graph of size 24:\n-\n In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.\n \n When engine is `'pdflatex'`, the compilation just work.\n+\n+The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.\n \n EXAMPLE::\n \n``````\n",
    "created_at": "2013-04-02T15:44:46Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163458",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-view generates a LaTex error on a graph of size 24:
-
 In `view` function, the default value for engine argument is `'latex'`. With this value, the compilation is trying (tex -> dvi -> png, and if an exception raised then dvi -> ps -> pdf). For some input, it is broken (example below) because of overfull vbox and overfull hbox created in the first tex -> dvi compilation.
 
 When engine is `'pdflatex'`, the compilation just work.
+
+The purpose of this ticket is to change engine default value from 'latex' to 'pdflatex'.
 
 EXAMPLE::
 
``````




---

archive/issue_events_117403.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2013-04-02T15:50:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117403"
}
```



---

archive/issue_comments_163459.json:
```json
{
    "body": "**Author:** S\u00e9bastien Labb\u00e9",
    "created_at": "2013-04-02T15:50:34Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163459",
    "user": "https://github.com/seblabbe"
}
```

**Author:** Sébastien Labbé



---

archive/issue_comments_163460.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'm happy with the main patch. I think it requires some modifications to the documentation in the `latex_examples` class, so I've attached a referee patch to deal with that.",
    "created_at": "2013-04-02T18:34:12Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163460",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
I'm happy with the main patch. I think it requires some modifications to the documentation in the `latex_examples` class, so I've attached a referee patch to deal with that.



---

archive/issue_comments_163461.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2013-04-02T18:34:12Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163461",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/attachments_019187.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13713-examples-jhp.patch",
    "asset_url": "tarball://root/attachments/ticket13713/trac_13713-examples-jhp.patch",
    "created_at": "2013-04-02T18:59:03Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_163462.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Attachment:** [trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch)\n\nFor what it's worth, I was getting the \"latex error\" on just using view with 'latex' after I did some updatings (even doing something as simple as `view(2)`). However with the 'pdflatex', things are working again, so I think this is a good switch to make.",
    "created_at": "2013-04-02T18:59:03Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163462",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
**Attachment:** [trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/trac_13713-examples-jhp.patch)

For what it's worth, I was getting the "latex error" on just using view with 'latex' after I did some updatings (even doing something as simple as `view(2)`). However with the 'pdflatex', things are working again, so I think this is a good switch to make.



---

archive/issue_comments_163463.json:
```json
{
    "body": "<a id='comment:14'></a>\nDon't forget to indicate which patch(es) need to be applied.",
    "created_at": "2013-04-03T07:44:46Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163463",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Don't forget to indicate which patch(es) need to be applied.



---

archive/issue_events_117404.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T07:44:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117404"
}
```



---

archive/issue_events_117405.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-03T07:44:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "component: graphics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117405"
}
```



---

archive/issue_comments_163464.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -65,3 +65,5 @@\n ```\n sage: view(G, engine='pdflatex', tightpage=True)\n ```\n+\n+Apply [[attachment:trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/b7522f8363d9bb9b7702581b643d9c0d.patch](https://github.com/sagemath/sage/files/ticket13713/0c54cf0be2bc1a12916e890496b82e65.patch),).\n``````\n",
    "created_at": "2013-04-03T09:53:38Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163464",
    "user": "https://github.com/seblabbe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -65,3 +65,5 @@
 ```
 sage: view(G, engine='pdflatex', tightpage=True)
 ```
+
+Apply [[attachment:trac_13713-examples-jhp.patch](https://github.com/sagemath/sage/files/ticket13713/b7522f8363d9bb9b7702581b643d9c0d.patch](https://github.com/sagemath/sage/files/ticket13713/0c54cf0be2bc1a12916e890496b82e65.patch),).
``````




---

archive/issue_comments_163465.json:
```json
{
    "body": "<a id='comment:16'></a>\nThere are 5 tests failing on the patchbot, but do not seem related to this ticket :\n\n```\nsage -t sage/interfaces/expect.py  # 1 doctest failed\nsage -t sage/interacts/debugger.py  # 8 doctests failed\nsage -t doc/en/prep/Intro-Tutorial.rst  # Killed due to kill signal\nsage -t sage/modules/free_module_homspace.py  # Killed due to kill signal\nsage -t sage/graphs/generators/world_map.py  # Killed due to kill signal\n```",
    "created_at": "2013-04-03T09:57:19Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163465",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>
There are 5 tests failing on the patchbot, but do not seem related to this ticket :

```
sage -t sage/interfaces/expect.py  # 1 doctest failed
sage -t sage/interacts/debugger.py  # 8 doctests failed
sage -t doc/en/prep/Intro-Tutorial.rst  # Killed due to kill signal
sage -t sage/modules/free_module_homspace.py  # Killed due to kill signal
sage -t sage/graphs/generators/world_map.py  # Killed due to kill signal
```



---

archive/issue_events_117406.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-08T22:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117406"
}
```



---

archive/issue_events_117407.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-04-08T22:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117407"
}
```



---

archive/issue_comments_163466.json:
```json
{
    "body": "<a id='comment:17'></a>\nEverything looks good to me.",
    "created_at": "2013-04-08T22:05:57Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163466",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
Everything looks good to me.



---

archive/issue_comments_163467.json:
```json
{
    "body": "**Changing reviewer** from \"John Palmieri\" to \"John Palmieri, Travis Scrimshaw\".",
    "created_at": "2013-04-08T22:05:57Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163467",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "John Palmieri" to "John Palmieri, Travis Scrimshaw".



---

archive/issue_events_117408.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-09T06:45:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "milestone": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117408"
}
```



---

archive/issue_events_117409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-09T06:45:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "milestone": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117409"
}
```



---

archive/issue_comments_163468.json:
```json
{
    "body": "**Merged:** sage-5.10.beta0",
    "created_at": "2013-04-13T13:49:18Z",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13713#issuecomment-163468",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.10.beta0



---

archive/issue_events_117410.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-13T13:49:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117410"
}
```



---

archive/issue_events_117411.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-13T13:49:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13713",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13713#event-117411"
}
```
