# Issue 13364: Upgrade Maxima to 5.29.1

archive/issues_013192.json:
```json
{
    "assignees": [],
    "body": "\n```\nMessage: 5\nDate: Sun, 12 Aug 2012 23:18:05 +0000 (UTC)\nFrom: Robert Dodier <robert.dodier@gmail.com>\nTo: maxima@math.utexas.edu\nSubject: [Maxima] Maxima 5.28.0 release\nMessage-ID: <k09djd$dvj$2@dough.gmane.org>\n\nHi, I've created branch-5_28 in Git and tagged branch-5_28-base and\n5.28.0. I've created tar.gz, srpm, and rpm's and uploaded them to the\nSourceForge file manager. (http://sourceforge.net/projects/maxima/files)\n\n```\n\nThe new spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\nan **upstream patch** preventing segfaults. This fixes few tickets. \n\nInstall [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg)\n\nApply \n* [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)\n\nCC:  @jpflori @dimpase @nbruin @zimmermann6\n\nKeywords: **maxima spkg**\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\nReviewer: **Karl-Dieter Crisman, Fran\u00e7ois Bissey, Leif Leonhardy, Paul Zimmermann**\n\nAuthor: **Jean-Pierre Flori, Dmitrii Pasechnik**\n\nMerged: **sage-5.7.beta0**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13364_\n\n",
    "closed_at": "2013-01-21T21:06:58Z",
    "created_at": "2012-08-14T01:16:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Maxima to 5.29.1",
    "type": "issue",
    "updated_at": "2021-11-15T12:18:10Z",
    "url": "https://github.com/sagemath/sage/issues/13364",
    "user": "https://github.com/kcrisman"
}
```

```
Message: 5
Date: Sun, 12 Aug 2012 23:18:05 +0000 (UTC)
From: Robert Dodier <robert.dodier@gmail.com>
To: maxima@math.utexas.edu
Subject: [Maxima] Maxima 5.28.0 release
Message-ID: <k09djd$dvj$2@dough.gmane.org>

Hi, I've created branch-5_28 in Git and tagged branch-5_28-base and
5.28.0. I've created tar.gz, srpm, and rpm's and uploaded them to the
SourceForge file manager. (http://sourceforge.net/projects/maxima/files)

```

The new spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
an **upstream patch** preventing segfaults. This fixes few tickets. 

Install [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg)

Apply 
* [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)

CC:  @jpflori @dimpase @nbruin @zimmermann6

Keywords: **maxima spkg**

Upstream: **Reported upstream. Developers acknowledge bug.**

Reviewer: **Karl-Dieter Crisman, Fran√ßois Bissey, Leif Leonhardy, Paul Zimmermann**

Author: **Jean-Pierre Flori, Dmitrii Pasechnik**

Merged: **sage-5.7.beta0**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/13364_





---

archive/issue_events_184743.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-08-14T01:16:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184743"
}
```



---

archive/issue_events_184744.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-08-14T01:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184744"
}
```



---

archive/issue_events_184745.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-08-14T01:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184745"
}
```



---

archive/issue_events_184746.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-08-14T01:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184746"
}
```



---

archive/issue_comments_155087.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFrom my test with 5.27.0 that will break a number of things.... The interface to a number of functions changed and requires extra arguments which throws things all over the place of course.",
    "created_at": "2012-08-14T09:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155087",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">comment:1</div>

From my test with 5.27.0 that will break a number of things.... The interface to a number of functions changed and requires extra arguments which throws things all over the place of course.



---

archive/issue_comments_155088.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nTrue.  I just opened this in order to have a ticket for it at all; I couldn't find one for 5.27 update alone (as opposed to things noting that 5.27 would fix various things) so I opened this. Feel free to close it if it's a dup.",
    "created_at": "2012-08-14T12:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155088",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

True.  I just opened this in order to have a ticket for it at all; I couldn't find one for 5.27 update alone (as opposed to things noting that 5.27 would fix various things) so I opened this. Feel free to close it if it's a dup.



---

archive/issue_comments_155089.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNo duplicate that I know off. May be an opportunity to update ecl as well, 12.2.1 works well with a few tweaks. 12.7.1 seems to have issues see #12985.",
    "created_at": "2012-08-15T09:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155089",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

No duplicate that I know off. May be an opportunity to update ecl as well, 12.2.1 works well with a few tweaks. 12.7.1 seems to have issues see #12985.



---

archive/issue_events_184747.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-05T15:41:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "title_is": "Upgrade Maxima to latest upstream release",
    "title_was": "Upgrade Maxima to 5.28",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184747"
}
```



---

archive/issue_comments_155090.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe newest Maxima is now 5.29.  Ugrading ECL is #13324 and hopefully will have positive review soon.",
    "created_at": "2012-12-05T15:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155090",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

The newest Maxima is now 5.29.  Ugrading ECL is #13324 and hopefully will have positive review soon.



---

archive/issue_comments_155091.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWe'll have to make some change to spkg-install when ECL >= 12.12.1 gets in.\nSee\nhttps://github.com/sagemath/sage/issues/13324#comment:77\n\nI'm waiting for more info from upstream ECL on this change.",
    "created_at": "2012-12-14T17:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155091",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

We'll have to make some change to spkg-install when ECL >= 12.12.1 gets in.
See
https://github.com/sagemath/sage/issues/13324#comment:77

I'm waiting for more info from upstream ECL on this change.



---

archive/issue_comments_155092.json:
```json
{
    "body": "Changed keywords from none to **maxima spkg**",
    "created_at": "2012-12-14T17:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155092",
    "user": "https://github.com/jpflori"
}
```

Changed keywords from none to **maxima spkg**



---

archive/issue_comments_155093.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHere comes a 5.29.1 spkg at\nhttp://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg\n\nIt builds and runs and passes most tests in sage/calculus on Linux.\nSome tests fails because Maxima adds ? in some strings in calculus.py.",
    "created_at": "2012-12-14T18:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155093",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

Here comes a 5.29.1 spkg at
http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg

It builds and runs and passes most tests in sage/calculus on Linux.
Some tests fails because Maxima adds ? in some strings in calculus.py.



---

archive/issue_comments_155094.json:
```json
{
    "body": "Work Issues: **fix doctets**",
    "created_at": "2012-12-14T18:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155094",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **fix doctets**



---

archive/issue_events_184748.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-14T18:38:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "title_is": "Upgrade Maxima to 5.29.1",
    "title_was": "Upgrade Maxima to latest upstream release",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184748"
}
```



---

archive/issue_comments_155095.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYour spkg diff for the readme says that you removed a patch, but I don't see that in the diff.  But we track the patches directory, right?",
    "created_at": "2012-12-14T18:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155095",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">comment:9</div>

Your spkg diff for the readme says that you removed a patch, but I don't see that in the diff.  But we track the patches directory, right?



---

archive/issue_comments_155096.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYup, I forgot to run hg addremove.",
    "created_at": "2012-12-14T18:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155096",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

Yup, I forgot to run hg addremove.



---

archive/issue_comments_155097.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIt also seems Maxima does not integrate sqrt(x + sqrt(x)) anymore, maybe that needs assumptions which were incorectly assumed before, don't want to think about that now.",
    "created_at": "2012-12-14T19:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155097",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">comment:11</div>

It also seems Maxima does not integrate sqrt(x + sqrt(x)) anymore, maybe that needs assumptions which were incorectly assumed before, don't want to think about that now.



---

archive/issue_comments_155098.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nYes, don't worry about this now, as Fran\u00e7ois has put a lot of time into cataloguing things anyway on some sage-devel discussion a while ago.",
    "created_at": "2012-12-14T19:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155098",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

Yes, don't worry about this now, as Fran√ßois has put a lot of time into cataloguing things anyway on some sage-devel discussion a while ago.



---

archive/issue_comments_155099.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nCould you provide a link to that discussion?",
    "created_at": "2012-12-14T19:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155099",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

Could you provide a link to that discussion?



---

archive/issue_comments_155100.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNo, it's too old, I'm not sure how to find it.  It wasn't part of a thread only about this, I think.  Fran\u00e7ois, do you remember?",
    "created_at": "2012-12-14T20:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155100",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

No, it's too old, I'm not sure how to find it.  It wasn't part of a thread only about this, I think.  Fran√ßois, do you remember?



---

archive/issue_comments_155101.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHaven't tried 5.29.1 only 5.28 after it came out. I remember that a number of function now require an extra argument (an assumption) as you have found out. But I haven't looked at it in a long time. I'll check what I can find.",
    "created_at": "2012-12-14T23:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155101",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Haven't tried 5.29.1 only 5.28 after it came out. I remember that a number of function now require an extra argument (an assumption) as you have found out. But I haven't looked at it in a long time. I'll check what I can find.



---

archive/issue_comments_155102.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nActually I haven't done a report on upgrade that break things badly for a little while. You may remember a report from a long time ago. I don't have as much time to write those these days.",
    "created_at": "2012-12-14T23:38:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155102",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Actually I haven't done a report on upgrade that break things badly for a little while. You may remember a report from a long time ago. I don't have as much time to write those these days.



---

archive/issue_comments_155103.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nDoing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\n\n```\nsage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n```\nProbably ecl/maxima rather than pure maxima it goes in a panic\n\n```\n;;;\n;;; Stack overflow.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n```\nfor quite a bit before getting killed. The other interesting bits:\n\n```\nsage -t -long \"devel/sage-main/sage/interfaces/maxima_abstract.py\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 422:\n    sage: maxima.version()\nExpected:\n    '5.26.0'\nGot:\n    '5.29.1'\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 2354:\n    sage: maxima_version()\nExpected:\n    '5.26.0'\nGot:\n    '5.29.1'\n**********************************************************************\n2 items had failures:\n   1 of   4 in __main__.example_13\n   1 of   5 in __main__.example_84\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py\n         [7.4 s]\nsage -t -long \"devel/sage-main/sage/interfaces/maxima_lib.py\"\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 716:\n    sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()\nExpected:\n    1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))\nGot:\n    integrate(sqrt(x + sqrt(x)), x)\n#0: simplify_sum(expr='sum(q^k,k,0,inf))\n#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\n**********************************************************************\nFile \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 819:\n    sage: limit(x^a,x=0)\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: Computation failed since Maxima requested additional\n    constraints; using the 'assume' command before limit evaluation\n    *may* help (see `assume?` for more details)\n    Is a an integer?\nGot:\n    Traceback (most recent call last):\n      File \"/usr/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_26[9]>\", line 1, in <module>\n        limit(x**a,x=Integer(0))###line 819:\n    sage: limit(x^a,x=0)\n      File \"/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py\", line 1188, in limit\n        l = maxima.sr_limit(ex, v, a)\n      File \"/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py\", line 856, in sr_limit\n        raise ValueError, \"Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\\n\" + s\n    ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n    Is a an ?integer?\n**********************************************************************\n2 items had failures:\n   1 of  25 in __main__.example_24\n   1 of  19 in __main__.example_26\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py\n         [4.0 s]\n```\nit is not as bad as I remember but it is just pinpointing on some obvious tests right now.",
    "created_at": "2012-12-15T10:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155103",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty

```
sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
```
Probably ecl/maxima rather than pure maxima it goes in a panic

```
;;;
;;; Stack overflow.
;;; Jumping to the outermost toplevel prompt
;;;

```
for quite a bit before getting killed. The other interesting bits:

```
sage -t -long "devel/sage-main/sage/interfaces/maxima_abstract.py"
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 422:
    sage: maxima.version()
Expected:
    '5.26.0'
Got:
    '5.29.1'
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 2354:
    sage: maxima_version()
Expected:
    '5.26.0'
Got:
    '5.29.1'
**********************************************************************
2 items had failures:
   1 of   4 in __main__.example_13
   1 of   5 in __main__.example_84
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py
         [7.4 s]
sage -t -long "devel/sage-main/sage/interfaces/maxima_lib.py"
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 716:
    sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()
Expected:
    1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))
Got:
    integrate(sqrt(x + sqrt(x)), x)
#0: simplify_sum(expr='sum(q^k,k,0,inf))
#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
**********************************************************************
File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 819:
    sage: limit(x^a,x=0)
Expected:
    Traceback (most recent call last):
    ...
    ValueError: Computation failed since Maxima requested additional
    constraints; using the 'assume' command before limit evaluation
    *may* help (see `assume?` for more details)
    Is a an integer?
Got:
    Traceback (most recent call last):
      File "/usr/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_26[9]>", line 1, in <module>
        limit(x**a,x=Integer(0))###line 819:
    sage: limit(x^a,x=0)
      File "/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py", line 1188, in limit
        l = maxima.sr_limit(ex, v, a)
      File "/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 856, in sr_limit
        raise ValueError, "Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n" + s
    ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)
    Is a an ?integer?
**********************************************************************
2 items had failures:
   1 of  25 in __main__.example_24
   1 of  19 in __main__.example_26
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py
         [4.0 s]
```
it is not as bad as I remember but it is just pinpointing on some obvious tests right now.



---

archive/issue_comments_155104.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kiwifb](#comment%3A17):\n> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\n\nYup 12.12.1 plus 5.29.1.\nAbout the name changes I mentioned here and on #13324, I got upstream confimation it was expected and is not a problem, see\nhttp://sourceforge.net/mailarchive/message.php?msg_id=30232028\n\nI'd prefer to postpone Unicode and deal with it in let's say #12985, unless it is really trivial. \n> \n> ```\n> sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> ```\n> Probably ecl/maxima rather than pure maxima it goes in a panic\n> \n> ```\n> ;;;\n> ;;; Stack overflow.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> ```\n\nNice, I did not get that one though.\n> for quite a bit before getting killed. The other interesting bits:\n> \n> ```\n> sage -t -long \"devel/sage-main/sage/interfaces/maxima_abstract.py\"\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 422:\n>     sage: maxima.version()\n> Expected:\n>     '5.26.0'\n> Got:\n>     '5.29.1'\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py\", line 2354:\n>     sage: maxima_version()\n> Expected:\n>     '5.26.0'\n> Got:\n>     '5.29.1'\n> **********************************************************************\n> 2 items had failures:\n>    1 of   4 in __main__.example_13\n>    1 of   5 in __main__.example_84\n> ***Test Failed*** 2 failures.\n> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py\n>          [7.4 s]\n> sage -t -long \"devel/sage-main/sage/interfaces/maxima_lib.py\"\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 716:\n>     sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()\n> Expected:\n>     1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))\n> Got:\n>     integrate(sqrt(x + sqrt(x)), x)\n> #0: simplify_sum(expr='sum(q^k,k,0,inf))\n> #1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\n> **********************************************************************\n> File \"/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py\", line 819:\n>     sage: limit(x^a,x=0)\n> Expected:\n>     Traceback (most recent call last):\n>     ...\n>     ValueError: Computation failed since Maxima requested additional\n>     constraints; using the 'assume' command before limit evaluation\n>     *may* help (see `assume?` for more details)\n>     Is a an integer?\n> Got:\n>     Traceback (most recent call last):\n>       File \"/usr/bin/ncadoctest.py\", line 1231, in run_one_test\n>         self.run_one_example(test, example, filename, compileflags)\n>       File \"/usr/bin/sagedoctest.py\", line 38, in run_one_example\n>         OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n>       File \"/usr/bin/ncadoctest.py\", line 1172, in run_one_example\n>         compileflags, 1) in test.globs\n>       File \"<doctest __main__.example_26[9]>\", line 1, in <module>\n>         limit(x**a,x=Integer(0))###line 819:\n>     sage: limit(x^a,x=0)\n>       File \"/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py\", line 1188, in limit\n>         l = maxima.sr_limit(ex, v, a)\n>       File \"/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py\", line 856, in sr_limit\n>         raise ValueError, \"Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\\n\" + s\n>     ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n>     Is a an ?integer?\n> **********************************************************************\n> 2 items had failures:\n>    1 of  25 in __main__.example_24\n>    1 of  19 in __main__.example_26\n> ***Test Failed*** 2 failures.\n> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py\n>          [4.0 s]\n> ```\n> it is not as bad as I remember but it is just pinpointing on some obvious tests right now.\n> \n\nGot these ones and similar in other places.\nEverything looked trivial to fix and consisted in:\n- version number changes,\n- integration which did nothing, surely the assumption stuff we mentioned here,\n- trivial simplification which was not done anymore, maybe a call to simplify could fix these,\n- the strange ? things.",
    "created_at": "2012-12-15T11:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155104",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kiwifb](#comment%3A17):
> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty

Yup 12.12.1 plus 5.29.1.
About the name changes I mentioned here and on #13324, I got upstream confimation it was expected and is not a problem, see
http://sourceforge.net/mailarchive/message.php?msg_id=30232028

I'd prefer to postpone Unicode and deal with it in let's say #12985, unless it is really trivial. 
> 
> ```
> sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> ```
> Probably ecl/maxima rather than pure maxima it goes in a panic
> 
> ```
> ;;;
> ;;; Stack overflow.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> ```

Nice, I did not get that one though.
> for quite a bit before getting killed. The other interesting bits:
> 
> ```
> sage -t -long "devel/sage-main/sage/interfaces/maxima_abstract.py"
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 422:
>     sage: maxima.version()
> Expected:
>     '5.26.0'
> Got:
>     '5.29.1'
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_abstract.py", line 2354:
>     sage: maxima_version()
> Expected:
>     '5.26.0'
> Got:
>     '5.29.1'
> **********************************************************************
> 2 items had failures:
>    1 of   4 in __main__.example_13
>    1 of   5 in __main__.example_84
> ***Test Failed*** 2 failures.
> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_abstract_3312.py
>          [7.4 s]
> sage -t -long "devel/sage-main/sage/interfaces/maxima_lib.py"
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 716:
>     sage: integrate(sqrt(x + sqrt(x)), x).simplify_full()
> Expected:
>     1/12*sqrt(sqrt(x) + 1)*((8*x - 3)*x^(1/4) + 2*x^(3/4)) - 1/8*log(sqrt(sqrt(x) + 1) - x^(1/4)) + 1/8*log(sqrt(sqrt(x) + 1) + x^(1/4))
> Got:
>     integrate(sqrt(x + sqrt(x)), x)
> #0: simplify_sum(expr='sum(q^k,k,0,inf))
> #1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
> **********************************************************************
> File "/usr/share/sage/devel/sage-main/sage/interfaces/maxima_lib.py", line 819:
>     sage: limit(x^a,x=0)
> Expected:
>     Traceback (most recent call last):
>     ...
>     ValueError: Computation failed since Maxima requested additional
>     constraints; using the 'assume' command before limit evaluation
>     *may* help (see `assume?` for more details)
>     Is a an integer?
> Got:
>     Traceback (most recent call last):
>       File "/usr/bin/ncadoctest.py", line 1231, in run_one_test
>         self.run_one_example(test, example, filename, compileflags)
>       File "/usr/bin/sagedoctest.py", line 38, in run_one_example
>         OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
>       File "/usr/bin/ncadoctest.py", line 1172, in run_one_example
>         compileflags, 1) in test.globs
>       File "<doctest __main__.example_26[9]>", line 1, in <module>
>         limit(x**a,x=Integer(0))###line 819:
>     sage: limit(x^a,x=0)
>       File "/usr/lib64/python2.7/site-packages/sage/calculus/calculus.py", line 1188, in limit
>         l = maxima.sr_limit(ex, v, a)
>       File "/usr/lib64/python2.7/site-packages/sage/interfaces/maxima_lib.py", line 856, in sr_limit
>         raise ValueError, "Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)\n" + s
>     ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before limit evaluation *may* help (see `assume?` for more details)
>     Is a an ?integer?
> **********************************************************************
> 2 items had failures:
>    1 of  25 in __main__.example_24
>    1 of  19 in __main__.example_26
> ***Test Failed*** 2 failures.
> For whitespace errors, see the file /home/fbissey/.sage/tmp/maxima_lib_3431.py
>          [4.0 s]
> ```
> it is not as bad as I remember but it is just pinpointing on some obvious tests right now.
> 

Got these ones and similar in other places.
Everything looked trivial to fix and consisted in:
- version number changes,
- integration which did nothing, surely the assumption stuff we mentioned here,
- trivial simplification which was not done anymore, maybe a call to simplify could fix these,
- the strange ? things.



---

archive/issue_comments_155105.json:
```json
{
    "body": "Dependencies: **#13324**",
    "created_at": "2012-12-15T12:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155105",
    "user": "https://github.com/jpflori"
}
```

Dependencies: **#13324**



---

archive/issue_comments_155106.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2012-12-15T12:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155106",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_155107.json:
```json
{
    "body": "Changed work issues from **fix doctets** to **fix doctests, build with latest ECL**",
    "created_at": "2012-12-15T12:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155107",
    "user": "https://github.com/jpflori"
}
```

Changed work issues from **fix doctets** to **fix doctests, build with latest ECL**



---

archive/issue_comments_155108.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe Maxima spkg fails to build for me because `makeinfo` is missing... :-)",
    "created_at": "2012-12-15T14:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155108",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:21" align="right">comment:21</div>

The Maxima spkg fails to build for me because `makeinfo` is missing... :-)



---

archive/issue_comments_155109.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOk, now the build \"succeeded\", although I get:\n\n```\nNow installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\ncp: cannot stat `maxima.fasb': No such file or directory\n\nreal    18m37.266s\nuser    14m24.494s\nsys     1m52.139s\nSuccessfully installed maxima-5.29.1.p0\n...\n```\n\n(I think this was already mentioned on the ECL ticket.  Not sure how the *new* library is supposed to work when it doesn't get installed...)\n\n\n\n\nI also get a couple of new warnings (w.r.t. Maxima 5.26.0 and the old ECL) like\n\n```\n;;; Compiling (DEFUN HAIPART ...).\n;;; Warning:\n;;;   in file clmacs.lisp, position 6071\n;;;   at (DEFUN HAIPART ...)\n;;;   ! Too few arguments for proclaimed function LOGAND\n```\n\n(I.e., 164/2 [I think] instances of *\"Too few arguments for proclaimed function LOGAND\"*.)",
    "created_at": "2012-12-15T15:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155109",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

Ok, now the build "succeeded", although I get:

```
Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
cp: cannot stat `maxima.fasb': No such file or directory

real    18m37.266s
user    14m24.494s
sys     1m52.139s
Successfully installed maxima-5.29.1.p0
...
```

(I think this was already mentioned on the ECL ticket.  Not sure how the *new* library is supposed to work when it doesn't get installed...)




I also get a couple of new warnings (w.r.t. Maxima 5.26.0 and the old ECL) like

```
;;; Compiling (DEFUN HAIPART ...).
;;; Warning:
;;;   in file clmacs.lisp, position 6071
;;;   at (DEFUN HAIPART ...)
;;;   ! Too few arguments for proclaimed function LOGAND
```

(I.e., 164/2 [I think] instances of *"Too few arguments for proclaimed function LOGAND"*.)



---

archive/issue_comments_155110.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nexttime](#comment%3A22):\n> Ok, now the build \"succeeded\", although I get:\n> \n> ```\n> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> cp: cannot stat `maxima.fasb': No such file or directory\n> ```\n\nas far as I understand, the name might have changed, due to asdf changes in ECL.\nIt might be maxima-system.* rather than maxima.*",
    "created_at": "2012-12-15T15:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155110",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nexttime](#comment%3A22):
> Ok, now the build "succeeded", although I get:
> 
> ```
> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> cp: cannot stat `maxima.fasb': No such file or directory
> ```

as far as I understand, the name might have changed, due to asdf changes in ECL.
It might be maxima-system.* rather than maxima.*



---

archive/issue_comments_155111.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman, Fran\u00e7ois Bissey, Leif Leonhardy**",
    "created_at": "2012-12-15T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155111",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Karl-Dieter Crisman, Fran√ßois Bissey, Leif Leonhardy**



---

archive/issue_comments_155112.json:
```json
{
    "body": "Changed work issues from **fix doctests, build with latest ECL** to **fix doctests, build with latest ECL, fix `spkg-install`**",
    "created_at": "2012-12-15T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155112",
    "user": "https://github.com/nexttime"
}
```

Changed work issues from **fix doctests, build with latest ECL** to **fix doctests, build with latest ECL, fix `spkg-install`**



---

archive/issue_comments_155113.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nexttime](#comment%3A22):\n> Ok, now the build \"succeeded\", although I get:\n> \n> ```\n> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> cp: cannot stat `maxima.fasb': No such file or directory\n> \n> real    18m37.266s\n> user    14m24.494s\n> sys     1m52.139s\n> Successfully installed maxima-5.29.1.p0\n> ...\n> ```\n\nThat the build \"succeeded\" despite of the error is due to a subtle bug in `spkg-install`:\n\n```sh\n...\ncheck_error() {\n    if [[ $? -ne 0 ]]; then\n        echo >&2 \"***********************************************************\"\n        echo >&2 \"Error:\" $@\n        echo >&2 \"***********************************************************\"\n        exit 1\n    fi\n}\n\n...\n\necho \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\ncp -f maxima.fasb \"$ECLLIB/maxima.fas\"\ncheck_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n\n...\n```\n\nThe exit status (`$?`) tested in `check_error()` is that of <code>\\`pwd\\`</code>, not the one we're interested in, namely that of `cp`.",
    "created_at": "2012-12-15T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155113",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nexttime](#comment%3A22):
> Ok, now the build "succeeded", although I get:
> 
> ```
> Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> cp: cannot stat `maxima.fasb': No such file or directory
> 
> real    18m37.266s
> user    14m24.494s
> sys     1m52.139s
> Successfully installed maxima-5.29.1.p0
> ...
> ```

That the build "succeeded" despite of the error is due to a subtle bug in `spkg-install`:

```sh
...
check_error() {
    if [[ $? -ne 0 ]]; then
        echo >&2 "***********************************************************"
        echo >&2 "Error:" $@
        echo >&2 "***********************************************************"
        exit 1
    fi
}

...

echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
cp -f maxima.fasb "$ECLLIB/maxima.fas"
check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."

...
```

The exit status (`$?`) tested in `check_error()` is that of <code>\`pwd\`</code>, not the one we're interested in, namely that of `cp`.



---

archive/issue_comments_155114.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@dimpase](#comment%3A23):\n> Replying to [@nexttime](#comment%3A22):\n> > Ok, now the build \"succeeded\", although I get:\n> > \n> > ```\n> > Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...\n> > cp: cannot stat `maxima.fasb': No such file or directory\n> > ```\n\n> as far as I understand, the name might have changed, due to asdf changes in ECL.\n> It might be maxima-system.* rather than maxima.*\n\nI do have `$SPKG_BUILD_DIR/src/src/maxima.system.fasb` (i.e., with a period rather than a hyphen).",
    "created_at": "2012-12-15T16:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155114",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@dimpase](#comment%3A23):
> Replying to [@nexttime](#comment%3A22):
> > Ok, now the build "succeeded", although I get:
> > 
> > ```
> > Now installing the Maxima library as '$SAGE_ROOT/local/lib/ecl//maxima.fas'...
> > cp: cannot stat `maxima.fasb': No such file or directory
> > ```

> as far as I understand, the name might have changed, due to asdf changes in ECL.
> It might be maxima-system.* rather than maxima.*

I do have `$SPKG_BUILD_DIR/src/src/maxima.system.fasb` (i.e., with a period rather than a hyphen).



---

archive/issue_comments_155115.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe fact that this spkg would not install the maxima library (and the error was undetected) was expected.\nThat is what I meant by \"build with latest ECL\".\nAnd thanks for finding out why the error was undetected!!!\nAnd yes the new library file is the maxima.system.fasb.\nSee\nhttp://sourceforge.net/mailarchive/message.php?msg_id=30232028\nI've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\nWe'll just change the filename in spkg-install.\n\nThe makeinfo thing reminds me of something.\nIt should definitely not be required.\nI think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.",
    "created_at": "2012-12-15T18:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155115",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:26" align="right">comment:26</div>

The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
That is what I meant by "build with latest ECL".
And thanks for finding out why the error was undetected!!!
And yes the new library file is the maxima.system.fasb.
See
http://sourceforge.net/mailarchive/message.php?msg_id=30232028
I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
We'll just change the filename in spkg-install.

The makeinfo thing reminds me of something.
It should definitely not be required.
I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.



---

archive/issue_comments_155116.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jpflori](#comment%3A26):\n> The fact that this spkg would not install the maxima library (and the error was undetected) was expected.\n> That is what I meant by \"build with latest ECL\".\n\n? \n\n> And thanks for finding out why the error was undetected!!!\n> And yes the new library file is the maxima.system.fasb.\n> See\n> http://sourceforge.net/mailarchive/message.php?msg_id=30232028\n> I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\n> We'll just change the filename in spkg-install.\n\nI just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)\n\nOr should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?\n\n\n\n\n> The makeinfo thing reminds me of something.\n> It should definitely not be required.\n> I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.\n\nPresumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)\n\nProbably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get \"needless\" questions regarding such on the IRC.)",
    "created_at": "2012-12-15T19:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155116",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jpflori](#comment%3A26):
> The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
> That is what I meant by "build with latest ECL".

? 

> And thanks for finding out why the error was undetected!!!
> And yes the new library file is the maxima.system.fasb.
> See
> http://sourceforge.net/mailarchive/message.php?msg_id=30232028
> I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
> We'll just change the filename in spkg-install.

I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)

Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?




> The makeinfo thing reminds me of something.
> It should definitely not be required.
> I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.

Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)

Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get "needless" questions regarding such on the IRC.)



---

archive/issue_comments_155117.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nexttime](#comment%3A27):\n> Replying to [@jpflori](#comment%3A26):\n> > The fact that this spkg would not install the maxima library (and the error was undetected) was expected.\n> > That is what I meant by \"build with latest ECL\".\n\n> \n> ? \n\nI mean the fact that the produced file for Maxima in Lisp libary mode is no longer maxima.fasb but maxima.system.fasb and its not because of the updated Maxima, but of the updated ECL.\n> \n> > And thanks for finding out why the error was undetected!!!\n> > And yes the new library file is the maxima.system.fasb.\n> > See\n> > http://sourceforge.net/mailarchive/message.php?msg_id=30232028\n> > I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.\n> > We'll just change the filename in spkg-install.\n\n> \n> I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)\n> \n> Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?\n\nI thing we keep maxima.fas as the name of the file in the Sage library ($SAGE_???/lib/ecl/).\n\n> \n> \n\n> \n> > The makeinfo thing reminds me of something.\n> > It should definitely not be required.\n> > I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.\n\n> \n> Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)\n> \n> Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get \"needless\" questions regarding such on the IRC.)\n>   \n\n>",
    "created_at": "2012-12-15T19:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155117",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nexttime](#comment%3A27):
> Replying to [@jpflori](#comment%3A26):
> > The fact that this spkg would not install the maxima library (and the error was undetected) was expected.
> > That is what I meant by "build with latest ECL".

> 
> ? 

I mean the fact that the produced file for Maxima in Lisp libary mode is no longer maxima.fasb but maxima.system.fasb and its not because of the updated Maxima, but of the updated ECL.
> 
> > And thanks for finding out why the error was undetected!!!
> > And yes the new library file is the maxima.system.fasb.
> > See
> > http://sourceforge.net/mailarchive/message.php?msg_id=30232028
> > I've not replied yet but I don't think we need to ask more work from upstream adsf-bundle.
> > We'll just change the filename in spkg-install.

> 
> I just manually copied `maxima.system.fasb` to `$SAGE_LOCAL/lib/ecl/maxima.fas`, hoping that this was correct.  (Currently running `ptestlong` with Sage 5.5.rc0 on Ubuntu 10.04.4 x86, i.e., an old Pentium4 with currently just 1 GB RAM, which will take ages...)
> 
> Or should we keep the new name (`.fas` or `.fasb`?), probably having to make changes elsewhere?

I thing we keep maxima.fas as the name of the file in the Sage library ($SAGE_???/lib/ecl/).

> 
> 

> 
> > The makeinfo thing reminds me of something.
> > It should definitely not be required.
> > I think the solution was to touch some files, but I guess something changed in Maxima and the file we touch are not sufficient now.

> 
> Presumably yes, I was thinking of the same...  (Although IMHO `configure` should have checked whether `makeinfo` is available in advance, in order to eventually skip a few things later.)
> 
> Probably similar for some autotools-generated files, although at least some of the warnings were present in previous spkg logs as well.  (I personally don't mind, but these may annoy a few users actually reading or grepping the logs, or watching the build process...  We occasionally get "needless" questions regarding such on the IRC.)
>   

>



---

archive/issue_comments_155118.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nP.S.:  The new Maxima (and/or ECL) seems to [*somehow<sup>TM</sup>*] fix #13831...",
    "created_at": "2012-12-15T20:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155118",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:29" align="right">comment:29</div>

P.S.:  The new Maxima (and/or ECL) seems to [*somehow<sup>TM</sup>*] fix #13831...



---

archive/issue_comments_155119.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@nexttime](#comment%3A21):\n> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n\nI had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.",
    "created_at": "2012-12-15T20:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155119",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@nexttime](#comment%3A21):
> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)

I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.



---

archive/issue_comments_155120.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n\n> \n> I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.\n\nYeah, that sounded familiar to me too.",
    "created_at": "2012-12-16T03:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155120",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:31" align="right">comment:31</div>

> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)

> 
> I had fixed that in a previous spkg. One file needed touching. The doc is ready for dispatch but one of the source file is regenerated which triggers rebuild.

Yeah, that sounded familiar to me too.



---

archive/issue_comments_155121.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@kiwifb](#comment%3A17):\n> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty\n> \n> ```\n> sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> ```\n> Probably ecl/maxima rather than pure maxima it goes in a panic\n> \n> ```\n> ;;;\n> ;;; Stack overflow.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> ```\n> for quite a bit before getting killed.\n\nOn Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n\n```\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n```\nand finally\n\n```\nSegmentation fault\n\n\t [56.5 s]\n\n...\n\nThe following tests failed:\n\n\tsage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 66.3 seconds\n```\n(with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).\n\n\n\n\nP.S.: The *\"kwown\"* is not a copy-paste accident.  Probably some ECL idiom, like ''\"outermost toplevel\"'... ;-)",
    "created_at": "2012-12-16T03:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155121",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@kiwifb](#comment%3A17):
> Doing some tests with ecl 12.2.1+maxima 5.29.1 right now. I assume the target will be 12.12.1 /5.29.1 and enabling unicode in ecl if possible. Anyway I have a nasty
> 
> ```
> sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> ```
> Probably ecl/maxima rather than pure maxima it goes in a panic
> 
> ```
> ;;;
> ;;; Stack overflow.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> ```
> for quite a bit before getting killed.

On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of

```
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;
```
and finally

```
Segmentation fault

	 [56.5 s]

...

The following tests failed:

	sage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed
----------------------------------------------------------------------
Total time for all tests: 66.3 seconds
```
(with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).




P.S.: The *"kwown"* is not a copy-paste accident.  Probably some ECL idiom, like ''"outermost toplevel"'... ;-)



---

archive/issue_comments_155122.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe other failing doctests seem to be the same you already reported:\n\n```\nThe following tests failed:\n\n        sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed\n        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed\n        sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed\n```\n\nNot sure whether you also get\n\n```\nsage -t --long -force_lib devel/sage/sage/functions/exp_integral.py\n**********************************************************************\nFile \"$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py\", line 1074:\n    sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\nExpected:\n    0.125872409703453 + 1.57079632679490*I\nGot:\n    0.125872409703453\n**********************************************************************\n1 items had failures:\n   1 of  18 in __main__.example_31\n***Test Failed*** 1 failures.\n```",
    "created_at": "2012-12-16T04:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155122",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:33" align="right">comment:33</div>

The other failing doctests seem to be the same you already reported:

```
The following tests failed:

        sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed
        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed
        sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed
```

Not sure whether you also get

```
sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py
**********************************************************************
File "$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py", line 1074:
    sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
Expected:
    0.125872409703453 + 1.57079632679490*I
Got:
    0.125872409703453
**********************************************************************
1 items had failures:
   1 of  18 in __main__.example_31
***Test Failed*** 1 failures.
```



---

archive/issue_comments_155123.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@nexttime](#comment%3A32):\n> Replying to [@kiwifb](#comment%3A17):\n> > I have a nasty\n> > \n> > ```\n> > sage -t -long -verbose \"devel/sage-main/sage/symbolic/integration/integral.py\" # Killed/crashed\n> > ```\n> > Probably ecl/maxima rather than pure maxima it goes in a panic\n> > \n> > ```\n> > ;;;\n> > ;;; Stack overflow.\n> > ;;; Jumping to the outermost toplevel prompt\n> > ;;;\n> > \n> > ```\n> > for quite a bit before getting killed.\n\n> \n> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n> \n> ```\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> ```\n> and finally\n> \n> ```\n> Segmentation fault\n> \n> \t [56.5 s]\n> \n> ...\n> \n> The following tests failed:\n> \n> \tsage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed\n> ----------------------------------------------------------------------\n> Total time for all tests: 66.3 seconds\n> ```\n> (with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).\n\nThe offending test seems to be\n\n```\n...\n\nTrying:\n    f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))\nExpecting nothing\nok\nTrying:\n    integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)\nExpecting:\n    integrate(abs(sin(x)), x, 0, 2*pi)\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n...\n```\n(provided the output is in sync, which is not always the case with `-verbose`).",
    "created_at": "2012-12-16T04:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155123",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@nexttime](#comment%3A32):
> Replying to [@kiwifb](#comment%3A17):
> > I have a nasty
> > 
> > ```
> > sage -t -long -verbose "devel/sage-main/sage/symbolic/integration/integral.py" # Killed/crashed
> > ```
> > Probably ecl/maxima rather than pure maxima it goes in a panic
> > 
> > ```
> > ;;;
> > ;;; Stack overflow.
> > ;;; Jumping to the outermost toplevel prompt
> > ;;;
> > 
> > ```
> > for quite a bit before getting killed.

> 
> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of
> 
> ```
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> ```
> and finally
> 
> ```
> Segmentation fault
> 
> 	 [56.5 s]
> 
> ...
> 
> The following tests failed:
> 
> 	sage -t --long -force_lib devel/sage/sage/symbolic/integration/integral.py # 0 doctests failed
> ----------------------------------------------------------------------
> Total time for all tests: 66.3 seconds
> ```
> (with `./sage -tp 1 --long ...`; with `make ptestlong`, the test was said to have timed out).

The offending test seems to be

```
...

Trying:
    f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))
Expecting nothing
ok
Trying:
    integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)
Expecting:
    integrate(abs(sin(x)), x, 0, 2*pi)
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

...
```
(provided the output is in sync, which is not always the case with `-verbose`).



---

archive/issue_comments_155124.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@nexttime](#comment%3A34):\n> The offending test seems to be\n> \n> ```\n> ...\n> \n> Trying:\n>     f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))\n> Expecting nothing\n> ok\n> Trying:\n>     integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)\n> Expecting:\n>     integrate(abs(sin(x)), x, 0, 2*pi)\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> \n> ...\n> ```\n> (provided the output is in sync, which is not always the case with `-verbose`).\n\nYep,\n\n```\nsage: f = abs(sin(x))\nsage: integrate(f, x, 0, 2*pi)\n```\nbehaves exactly the same, i.e., the interpreter \"exits\" with a segmentation fault, after thousands of *\"Detected access to protected memory ...\"* messages.\n\n(Sage's own signal handler doesn't get called.)",
    "created_at": "2012-12-16T04:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155124",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@nexttime](#comment%3A34):
> The offending test seems to be
> 
> ```
> ...
> 
> Trying:
>     f = abs(sin(x))###line 653:_sage_    >>> f = abs(sin(x))
> Expecting nothing
> ok
> Trying:
>     integrate(f, x, Integer(0), Integer(2)*pi)  # long time (4s on sage.math, 2012)###line 654:_sage_    >>> integrate(f, x, 0, 2*pi)  # long time (4s on sage.math, 2012)
> Expecting:
>     integrate(abs(sin(x)), x, 0, 2*pi)
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> 
> ...
> ```
> (provided the output is in sync, which is not always the case with `-verbose`).

Yep,

```
sage: f = abs(sin(x))
sage: integrate(f, x, 0, 2*pi)
```
behaves exactly the same, i.e., the interpreter "exits" with a segmentation fault, after thousands of *"Detected access to protected memory ..."* messages.

(Sage's own signal handler doesn't get called.)



---

archive/issue_comments_155125.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nP.S.: That's the only test that fails in `.../symbolic/integration/integral.py` (i.e., all other tests pass if I comment it out).",
    "created_at": "2012-12-16T04:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155125",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:36" align="right">comment:36</div>

P.S.: That's the only test that fails in `.../symbolic/integration/integral.py` (i.e., all other tests pass if I comment it out).



---

archive/issue_comments_155126.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDo we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.",
    "created_at": "2012-12-16T05:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155126",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.



---

archive/issue_comments_155127.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@kiwifb](#comment%3A37):\n> Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n\nWell, using the Maxima library segfaults.\n\nI'm not at all familiar with Maxima, but\n\n```\n\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp ECL 12.12.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(sin(x)),x,0,2*pi);\n                              2 pi\n                             /\n                             [\n(%o1)                        I     abs(sin(x)) dx\n                             ]\n                             /\n                              0\n(%i2) display2d : false$\n\n(%i3) integrate(abs(sin(x)),x,0,2*pi);\n\n(%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n(%i4)\n```\n\nFWIW.",
    "created_at": "2012-12-16T06:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155127",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@kiwifb](#comment%3A37):
> Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.

Well, using the Maxima library segfaults.

I'm not at all familiar with Maxima, but

```

Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp ECL 12.12.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(sin(x)),x,0,2*pi);
                              2 pi
                             /
                             [
(%o1)                        I     abs(sin(x)) dx
                             ]
                             /
                              0
(%i2) display2d : false$

(%i3) integrate(abs(sin(x)),x,0,2*pi);

(%o3) 'integrate(abs(sin(x)),x,0,2*pi)
(%i4)
```

FWIW.



---

archive/issue_comments_155128.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI tried the spkg, and I needed to modify it as follows \n\n```\ndiff -r 31ff16046f0b spkg-install\n--- a/spkg-install      Fri Dec 14 19:46:53 2012 +0100\n+++ b/spkg-install      Sun Dec 16 15:13:21 2012 +0800\n@@ -110,7 +110,7 @@\n ECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n echo\n echo \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\n-cp -f maxima.fasb \"$ECLLIB/maxima.fas\"\n+cp -f maxima.system.fasb \"$ECLLIB/maxima.fas\"\n check_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n```\nto get it installed.\n\nI can confirm the trouble with `integrate(abs(sin(x)))`. It's in the library interface, I reckon.",
    "created_at": "2012-12-16T07:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155128",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

I tried the spkg, and I needed to modify it as follows 

```
diff -r 31ff16046f0b spkg-install
--- a/spkg-install      Fri Dec 14 19:46:53 2012 +0100
+++ b/spkg-install      Sun Dec 16 15:13:21 2012 +0800
@@ -110,7 +110,7 @@
 ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
 echo
 echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
-cp -f maxima.fasb "$ECLLIB/maxima.fas"
+cp -f maxima.system.fasb "$ECLLIB/maxima.fas"
 check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."
```
to get it installed.

I can confirm the trouble with `integrate(abs(sin(x)))`. It's in the library interface, I reckon.



---

archive/issue_comments_155129.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nexttime](#comment%3A32):\n\n> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of\n> \n> ```\n> ;;;\n> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n> ;;; Jumping to the outermost toplevel prompt\n> ;;;\n> ```\n\nthis comes from ECL, namely, from `handler_fn_prototype` in `src/src/c/unixint.d`.",
    "created_at": "2012-12-16T07:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155129",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nexttime](#comment%3A32):

> On Ubuntu 10.04.4 x86 (Pentium4; FSF GCC 4.7.2, with `-march=native` and `-O3`, FWIW) I get slightly more than 23,000 instances (exact number varies) of
> 
> ```
> ;;;
> ;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
> ;;; Jumping to the outermost toplevel prompt
> ;;;
> ```

this comes from ECL, namely, from `handler_fn_prototype` in `src/src/c/unixint.d`.



---

archive/issue_comments_155130.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@nexttime](#comment%3A38):\n> Replying to [@kiwifb](#comment%3A37):\n> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n\n> \n> Well, using the Maxima library segfaults.\n> \n> I'm not at all familiar with Maxima, but\n> \n> ```\n> \n> Maxima 5.29.1 http://maxima.sourceforge.net\n> using Lisp ECL 12.12.1\n> Distributed under the GNU Public License. See the file COPYING.\n> Dedicated to the memory of William Schelter.\n> The function bug_report() provides bug reporting information.\n> (%i1) integrate(abs(sin(x)),x,0,2*pi);\n>                               2 pi\n>                              /\n>                              [\n> (%o1)                        I     abs(sin(x)) dx\n>                              ]\n>                              /\n>                               0\n> (%i2) display2d : false$\n> \n> (%i3) integrate(abs(sin(x)),x,0,2*pi);\n> \n> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n> (%i4)\n> ```\n> \n> FWIW.\n\nWhich according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.",
    "created_at": "2012-12-16T09:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155130",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@nexttime](#comment%3A38):
> Replying to [@kiwifb](#comment%3A37):
> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.

> 
> Well, using the Maxima library segfaults.
> 
> I'm not at all familiar with Maxima, but
> 
> ```
> 
> Maxima 5.29.1 http://maxima.sourceforge.net
> using Lisp ECL 12.12.1
> Distributed under the GNU Public License. See the file COPYING.
> Dedicated to the memory of William Schelter.
> The function bug_report() provides bug reporting information.
> (%i1) integrate(abs(sin(x)),x,0,2*pi);
>                               2 pi
>                              /
>                              [
> (%o1)                        I     abs(sin(x)) dx
>                              ]
>                              /
>                               0
> (%i2) display2d : false$
> 
> (%i3) integrate(abs(sin(x)),x,0,2*pi);
> 
> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)
> (%i4)
> ```
> 
> FWIW.

Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.



---

archive/issue_comments_155131.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@nexttime](#comment%3A33):\n> The other failing doctests seem to be the same you already reported:\n> \n> ```\n> The following tests failed:\n> \n>         sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed\n>         sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed\n> ```\n> \n> Not sure whether you also get\n> \n> ```\n> sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py\n> **********************************************************************\n> File \"$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py\", line 1074:\n>     sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\n> Expected:\n>     0.125872409703453 + 1.57079632679490*I\n> Got:\n>     0.125872409703453\n> **********************************************************************\n> 1 items had failures:\n>    1 of  18 in __main__.example_31\n> ***Test Failed*** 1 failures.\n> ```\n\nI get all of these and that last doctest is actually a good thing<sup>TM</sup> from the file\n\n```\n    Note that due to some problems with the way Maxima handles these\n    expressions, definite integrals can sometimes give unexpected\n    results (typically when using inexact endpoints) due to\n    inconsistent branching::\n\n       sage: integrate(sinh_integral(x), x, 0, 1/2)\n        -cosh(1/2) + 1/2*sinh_integral(1/2) + 1\n        sage: integrate(sinh_integral(x), x, 0, 1/2).n() # correct\n        0.125872409703453\n        sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!\n        0.125872409703453 + 1.57079632679490*I\n```\nOne problem may be fixed here.",
    "created_at": "2012-12-16T10:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155131",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@nexttime](#comment%3A33):
> The other failing doctests seem to be the same you already reported:
> 
> ```
> The following tests failed:
> 
>         sage -t --long -force_lib devel/sage/sage/calculus/calculus.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py # 1 doctests failed
>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_abstract.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/interfaces/maxima_lib.py # 2 doctests failed
>         sage -t --long -force_lib devel/sage/sage/misc/functional.py # 1 doctests failed
> ```
> 
> Not sure whether you also get
> 
> ```
> sage -t --long -force_lib devel/sage/sage/functions/exp_integral.py
> **********************************************************************
> File "$SAGE_ROOT/devel/sage-main/sage/functions/exp_integral.py", line 1074:
>     sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
> Expected:
>     0.125872409703453 + 1.57079632679490*I
> Got:
>     0.125872409703453
> **********************************************************************
> 1 items had failures:
>    1 of  18 in __main__.example_31
> ***Test Failed*** 1 failures.
> ```

I get all of these and that last doctest is actually a good thing<sup>TM</sup> from the file

```
    Note that due to some problems with the way Maxima handles these
    expressions, definite integrals can sometimes give unexpected
    results (typically when using inexact endpoints) due to
    inconsistent branching::

       sage: integrate(sinh_integral(x), x, 0, 1/2)
        -cosh(1/2) + 1/2*sinh_integral(1/2) + 1
        sage: integrate(sinh_integral(x), x, 0, 1/2).n() # correct
        0.125872409703453
        sage: integrate(sinh_integral(x), x, 0, 0.5).n() # incorrect!
        0.125872409703453 + 1.57079632679490*I
```
One problem may be fixed here.



---

archive/issue_comments_155132.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@nexttime](#comment%3A21):\n> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n\nDo you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.",
    "created_at": "2012-12-16T10:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155132",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@nexttime](#comment%3A21):
> The Maxima spkg fails to build for me because `makeinfo` is missing... :-)

Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.



---

archive/issue_comments_155133.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@kiwifb](#comment%3A41):\n[...]\n\n> Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.\n\n\nI checked that the new ECL is (probably) not guilty, as this example with Maxima 5.26.0 works as expected.",
    "created_at": "2012-12-16T12:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155133",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@kiwifb](#comment%3A41):
[...]

> Which according to the doctest is pretty much what we expect. Trying with clisp give exactly the same result. Problem at the library interface is a good candidate.


I checked that the new ECL is (probably) not guilty, as this example with Maxima 5.26.0 works as expected.



---

archive/issue_comments_155134.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@kiwifb](#comment%3A43):\n> Replying to [@nexttime](#comment%3A21):\n> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)\n\n> Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.\n\nWell, if you **like to**... -- Have fun, it's [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/maxima-5.29.1.p0.failed_build-makeinfo_missing.log).",
    "created_at": "2012-12-16T14:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155134",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@kiwifb](#comment%3A43):
> Replying to [@nexttime](#comment%3A21):
> > The Maxima spkg fails to build for me because `makeinfo` is missing... :-)

> Do you have a log for that? I'd like to pinpoint the file(s) that cause this, this time around.

Well, if you **like to**... -- Have fun, it's [here](http://boxen.math.washington.edu/home/leif/Sage/tmp/maxima-5.29.1.p0.failed_build-makeinfo_missing.log).



---

archive/issue_comments_155135.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHmmm, I was probably quicker (but I'm leaving it up to you to fix this! :-) ):\n\n```sh\n\n# Touching html and info files to avoid to regenerate them.\n# This must be done after configuration since the timestamps need\n# to be later than include-maxima.texi which is generated at\n# configuration time:\nfor i in doc/info/*.html ; do\n    touch \"${i}\"\ndone\ntouch doc/info/maxima.info*\n\n```\n\n```\n...\nconfig.status: creating doc/info/Makefile\nconfig.status: creating doc/info/include-maxima.texi\nconfig.status: creating doc/info/de/Makefile\n...\n```\n\n(The TeXinfo file is created twice, since `config.status` gets run when *building* Maxima as well.)\n\n\n\n\nThere are also\n\n```\nmaxima-5.29.1.p0/src/interfaces/xmaxima/doc/xmaxima.info\nmaxima-5.29.1.p0/src/interfaces/emacs/imaxima/imaxima.info\n```\nso we should perhaps use\n\n```sh\ntouch `find doc/info -name \\*.info\\*`\n```\nor\n\n```sh\nfind doc/info -name \\*.info\\* -exec touch {} \\;\n```\n\nUsing `-name \\*.info\\* -o -name \\*.html` in a single statement (instead of the `for`-loop) would also make sense.",
    "created_at": "2012-12-16T14:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155135",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:46" align="right">comment:46</div>

Hmmm, I was probably quicker (but I'm leaving it up to you to fix this! :-) ):

```sh

# Touching html and info files to avoid to regenerate them.
# This must be done after configuration since the timestamps need
# to be later than include-maxima.texi which is generated at
# configuration time:
for i in doc/info/*.html ; do
    touch "${i}"
done
touch doc/info/maxima.info*

```

```
...
config.status: creating doc/info/Makefile
config.status: creating doc/info/include-maxima.texi
config.status: creating doc/info/de/Makefile
...
```

(The TeXinfo file is created twice, since `config.status` gets run when *building* Maxima as well.)




There are also

```
maxima-5.29.1.p0/src/interfaces/xmaxima/doc/xmaxima.info
maxima-5.29.1.p0/src/interfaces/emacs/imaxima/imaxima.info
```
so we should perhaps use

```sh
touch `find doc/info -name \*.info\*`
```
or

```sh
find doc/info -name \*.info\* -exec touch {} \;
```

Using `-name \*.info\* -o -name \*.html` in a single statement (instead of the `for`-loop) would also make sense.



---

archive/issue_comments_155136.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nP.S.:  Now that I've *read* the comment in `spkg-install`...  We probably have to \"patch\" `config.status` after configuring Maxima, to avoid \"recreation\" of the TeXinfo file.",
    "created_at": "2012-12-16T14:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155136",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:47" align="right">comment:47</div>

P.S.:  Now that I've *read* the comment in `spkg-install`...  We probably have to "patch" `config.status` after configuring Maxima, to avoid "recreation" of the TeXinfo file.



---

archive/issue_comments_155137.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nBack to integration:\n\nDid anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n\n```\nsage: integrate(abs(cos(x)),x,0,pi)\n-1\nsage: integrate(abs(cos(x)),x,0,2*pi)\n0\nsage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n-2\n```\n\nUnless I'm missing something...",
    "created_at": "2012-12-16T18:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155137",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:48" align="right">comment:48</div>

Back to integration:

Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:

```
sage: integrate(abs(cos(x)),x,0,pi)
-1
sage: integrate(abs(cos(x)),x,0,2*pi)
0
sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
-2
```

Unless I'm missing something...



---

archive/issue_comments_155138.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@nexttime](#comment%3A48):\n> Back to integration:\n> \n> Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> \n> ```\n> sage: integrate(abs(cos(x)),x,0,pi)\n> -1\n> sage: integrate(abs(cos(x)),x,0,2*pi)\n> 0\n> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> -2\n> ```\n> \n> Unless I'm missing something...\n\nJust noticed Sage 5.4 gives the same results.",
    "created_at": "2012-12-16T18:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155138",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@nexttime](#comment%3A48):
> Back to integration:
> 
> Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> 
> ```
> sage: integrate(abs(cos(x)),x,0,pi)
> -1
> sage: integrate(abs(cos(x)),x,0,2*pi)
> 0
> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> -2
> ```
> 
> Unless I'm missing something...

Just noticed Sage 5.4 gives the same results.



---

archive/issue_comments_155139.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@nexttime](#comment%3A49):\n> Replying to [@nexttime](#comment%3A48):\n> > Back to integration:\n> > \n> > Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> > \n> > ```\n> > sage: integrate(abs(cos(x)),x,0,pi)\n> > -1\n> > sage: integrate(abs(cos(x)),x,0,2*pi)\n> > 0\n> > sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> > -2\n> > ```\n> > \n> > Unless I'm missing something...\n\n> \n> Just noticed Sage 5.4 gives the same results.\n\nIn contrast:\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.7.2, Release Date: 2011-10-29                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: integrate(abs(sin(x)),x,0,2*pi)\n0\nsage: integrate(abs(cos(x)),x,0,2*pi)\nintegrate(abs(cos(x)), x, 0, 2*pi)\nsage: integrate(abs(cos(x)),x,0,pi)\nintegrate(abs(cos(x)), x, 0, pi)\nsage: integrate(abs(cos(x)),x,1/2*pi,3/2*pi)\nintegrate(abs(cos(x)), x, 1/2*pi, 3/2*pi)\n```\n(Same for Sage 4.8.)",
    "created_at": "2012-12-16T18:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155139",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@nexttime](#comment%3A49):
> Replying to [@nexttime](#comment%3A48):
> > Back to integration:
> > 
> > Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> > 
> > ```
> > sage: integrate(abs(cos(x)),x,0,pi)
> > -1
> > sage: integrate(abs(cos(x)),x,0,2*pi)
> > 0
> > sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> > -2
> > ```
> > 
> > Unless I'm missing something...

> 
> Just noticed Sage 5.4 gives the same results.

In contrast:

```
----------------------------------------------------------------------
| Sage Version 4.7.2, Release Date: 2011-10-29                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: integrate(abs(sin(x)),x,0,2*pi)
0
sage: integrate(abs(cos(x)),x,0,2*pi)
integrate(abs(cos(x)), x, 0, 2*pi)
sage: integrate(abs(cos(x)),x,0,pi)
integrate(abs(cos(x)), x, 0, pi)
sage: integrate(abs(cos(x)),x,1/2*pi,3/2*pi)
integrate(abs(cos(x)), x, 1/2*pi, 3/2*pi)
```
(Same for Sage 4.8.)



---

archive/issue_comments_155140.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@nexttime](#comment%3A48):\n> Back to integration:\n> \n> Did anyone try using `cos()` instead?  After apparently \"deep thinking\", I for example get:\n> \n> ```\n> sage: integrate(abs(cos(x)),x,0,pi)\n> -1\n> sage: integrate(abs(cos(x)),x,0,2*pi)\n> 0\n> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)\n> -2\n> ```\n> \n> Unless I'm missing something...\n\nsame for 5.1. So I suppose this is a bug in Maxima 5.26, which remained in 5.29. Oh dear. Both 5.26 and 5.29 give the following nonsense:\n\n```\nsage: from sage.symbolic.integration.external import maxima_integrator\nsage: g(x)=maxima_integrator(abs(cos(x)), x); g(x)\n-((2*sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) - 1)*sgn(sin(x)/(cos(x) + 1) - 1) - 2)*sgn(sin(x)/(cos(x) + 1) + 1)\nsage: g(0)                                                            \n1\nsage: g.limit(x=pi)\nx |--> 0\n```\nThis, indeed, one gets -1...\n\nthey also both \"can\" compute maxima_integrator(abs(sin(x)), x)...\n\n```\nsage: g(x)=maxima_integrator(abs(sin(x)), x); g(x)\n-(2*sin(x)*arctan(sin(x)/(cos(x) + 1))/(cos(x) + 1) - log(2))*sgn(1/(cos(x) + 1))*sgn(sin(x)) + log(sin(x)^2/(cos(x) + 1)^2 + 1)*sgn(1/(cos(x) + 1))*sgn(sin(x)) - log(2*sin(x)^2/(cos(x) + 1)^2 + 2)*sgn(1/(cos(x) + 1))*sgn(sin(x)) + 2*(sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) + arctan(sin(x)/(cos(x) + 1)))*abs(sin(x))/abs(cos(x) + 1)\nsage: g(0)\n0\n```",
    "created_at": "2012-12-17T04:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155140",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@nexttime](#comment%3A48):
> Back to integration:
> 
> Did anyone try using `cos()` instead?  After apparently "deep thinking", I for example get:
> 
> ```
> sage: integrate(abs(cos(x)),x,0,pi)
> -1
> sage: integrate(abs(cos(x)),x,0,2*pi)
> 0
> sage: integrate(abs(cos(x)),1/2*pi,3/2*pi)
> -2
> ```
> 
> Unless I'm missing something...

same for 5.1. So I suppose this is a bug in Maxima 5.26, which remained in 5.29. Oh dear. Both 5.26 and 5.29 give the following nonsense:

```
sage: from sage.symbolic.integration.external import maxima_integrator
sage: g(x)=maxima_integrator(abs(cos(x)), x); g(x)
-((2*sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) - 1)*sgn(sin(x)/(cos(x) + 1) - 1) - 2)*sgn(sin(x)/(cos(x) + 1) + 1)
sage: g(0)                                                            
1
sage: g.limit(x=pi)
x |--> 0
```
This, indeed, one gets -1...

they also both "can" compute maxima_integrator(abs(sin(x)), x)...

```
sage: g(x)=maxima_integrator(abs(sin(x)), x); g(x)
-(2*sin(x)*arctan(sin(x)/(cos(x) + 1))/(cos(x) + 1) - log(2))*sgn(1/(cos(x) + 1))*sgn(sin(x)) + log(sin(x)^2/(cos(x) + 1)^2 + 1)*sgn(1/(cos(x) + 1))*sgn(sin(x)) - log(2*sin(x)^2/(cos(x) + 1)^2 + 2)*sgn(1/(cos(x) + 1))*sgn(sin(x)) + 2*(sin(x)/((cos(x) + 1)*(sin(x)^2/(cos(x) + 1)^2 + 1)) + arctan(sin(x)/(cos(x) + 1)))*abs(sin(x))/abs(cos(x) + 1)
sage: g(0)
0
```



---

archive/issue_comments_155141.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nsee https://github.com/sagemath/sage/issues/11483#comment:12 (this is where maxima's abs_integrate was added, to Sage 5.0).",
    "created_at": "2012-12-17T06:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155141",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

see https://github.com/sagemath/sage/issues/11483#comment:12 (this is where maxima's abs_integrate was added, to Sage 5.0).



---

archive/issue_comments_155142.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@nexttime](#comment%3A38):\n> Replying to [@kiwifb](#comment%3A37):\n> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.\n\n> \n> Well, using the Maxima library segfaults.\n> \n> I'm not at all familiar with Maxima, but\n> \n> ```\n> \n> Maxima 5.29.1 http://maxima.sourceforge.net\n> using Lisp ECL 12.12.1\n> Distributed under the GNU Public License. See the file COPYING.\n> Dedicated to the memory of William Schelter.\n> The function bug_report() provides bug reporting information.\n> (%i1) integrate(abs(sin(x)),x,0,2*pi);\n>                               2 pi\n>                              /\n>                              [\n> (%o1)                        I     abs(sin(x)) dx\n>                              ]\n>                              /\n>                               0\n> (%i2) display2d : false$\n> \n> (%i3) integrate(abs(sin(x)),x,0,2*pi);\n> \n> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)\n> (%i4)\n> ```\n> \n> FWIW.\n\nno, you  need to load some stuff, as spelled out at `maxima_lib.py`:\n\n```\ninit_code = ['display2d : false', 'domain : complex', 'keepfloat : true',\n            'load(to_poly_solver)', 'load(simplify_sum)',\n            'load(abs_integrate)']\n```\nIn maxima, you type in\n\n```\ndisplay2d : false;\ndomain : complex;\nkeepfloat : true;\nload(to_poly_solver);\nload(simplify_sum);\nload(abs_integrate);\nintegrate(abs(sin(x)),x);\n```\nto get a symbolic answer. It's weird that the definite integral does not get computed, perhaps due to an uncaught error...",
    "created_at": "2012-12-17T08:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155142",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@nexttime](#comment%3A38):
> Replying to [@kiwifb](#comment%3A37):
> > Do we know the expression that get passed to maxima? I would check a direct call to maxima and possibly a couple of lisp to check it is not actually a lisp fault.

> 
> Well, using the Maxima library segfaults.
> 
> I'm not at all familiar with Maxima, but
> 
> ```
> 
> Maxima 5.29.1 http://maxima.sourceforge.net
> using Lisp ECL 12.12.1
> Distributed under the GNU Public License. See the file COPYING.
> Dedicated to the memory of William Schelter.
> The function bug_report() provides bug reporting information.
> (%i1) integrate(abs(sin(x)),x,0,2*pi);
>                               2 pi
>                              /
>                              [
> (%o1)                        I     abs(sin(x)) dx
>                              ]
>                              /
>                               0
> (%i2) display2d : false$
> 
> (%i3) integrate(abs(sin(x)),x,0,2*pi);
> 
> (%o3) 'integrate(abs(sin(x)),x,0,2*pi)
> (%i4)
> ```
> 
> FWIW.

no, you  need to load some stuff, as spelled out at `maxima_lib.py`:

```
init_code = ['display2d : false', 'domain : complex', 'keepfloat : true',
            'load(to_poly_solver)', 'load(simplify_sum)',
            'load(abs_integrate)']
```
In maxima, you type in

```
display2d : false;
domain : complex;
keepfloat : true;
load(to_poly_solver);
load(simplify_sum);
load(abs_integrate);
integrate(abs(sin(x)),x);
```
to get a symbolic answer. It's weird that the definite integral does not get computed, perhaps due to an uncaught error...



---

archive/issue_comments_155143.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nAn uncaught error?\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) display2d : false;\n(%o1) false\n(%i2)  domain : complex;\n(%o2) complex\n(%i3)  keepfloat : true;\n(%o3) true\n(%i4)  load(to_poly_solver);\nto_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.\nLoading maxima-grobner $Revision: 1.6 $ $Date: 2009-06-02 07:49:49 $\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o4) \"/usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solver.mac\"\n(%i5)  load(simplify_sum);\n(%o5) \"/usr/share/maxima/5.29.1/share/solve_rec/simplify_sum.mac\"\n(%i6)  load(abs_integrate);\n(%o6) \"/usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\"\n(%i7)  integrate(abs(sin(x)),x);\n(%o7) 4*(abs(sin(x))*(atan(sin(x)/(cos(x)+1))/2\n                     +sin(x)/((cos(x)+1)*(2*sin(x)^2/(cos(x)+1)^2+2)))\n        /abs(cos(x)+1)\n        -(signum(1/(cos(x)+1))*signum(sin(x))*log(2*sin(x)^2/(cos(x)+1)^2+2)\n         -signum(1/(cos(x)+1))*signum(sin(x))*log(sin(x)^2/(cos(x)+1)^2+1)\n         +signum(1/(cos(x)+1))*signum(sin(x))\n                              *(2*sin(x)*atan(sin(x)/(cos(x)+1))/(cos(x)+1)\n                               -log(2)))\n         /4)\n(%i8)\n```\nDo you think that could be that obsolete module?",
    "created_at": "2012-12-17T08:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155143",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:54" align="right">comment:54</div>

An uncaught error?

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) display2d : false;
(%o1) false
(%i2)  domain : complex;
(%o2) complex
(%i3)  keepfloat : true;
(%o3) true
(%i4)  load(to_poly_solver);
to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.
Loading maxima-grobner $Revision: 1.6 $ $Date: 2009-06-02 07:49:49 $
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o4) "/usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solver.mac"
(%i5)  load(simplify_sum);
(%o5) "/usr/share/maxima/5.29.1/share/solve_rec/simplify_sum.mac"
(%i6)  load(abs_integrate);
(%o6) "/usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac"
(%i7)  integrate(abs(sin(x)),x);
(%o7) 4*(abs(sin(x))*(atan(sin(x)/(cos(x)+1))/2
                     +sin(x)/((cos(x)+1)*(2*sin(x)^2/(cos(x)+1)^2+2)))
        /abs(cos(x)+1)
        -(signum(1/(cos(x)+1))*signum(sin(x))*log(2*sin(x)^2/(cos(x)+1)^2+2)
         -signum(1/(cos(x)+1))*signum(sin(x))*log(sin(x)^2/(cos(x)+1)^2+1)
         +signum(1/(cos(x)+1))*signum(sin(x))
                              *(2*sin(x)*atan(sin(x)/(cos(x)+1))/(cos(x)+1)
                               -log(2)))
         /4)
(%i8)
```
Do you think that could be that obsolete module?



---

archive/issue_comments_155144.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@kiwifb](#comment%3A54):\n> Do you think that could be that obsolete module?\n\nno, it does not matter. It suffices to load abs_integrate only.\nActually, then I can reproduce \n\n```\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n```\nfrom within maxima (so no, the library interface does not matter!) if I try \n\n```\nintegrate(abs(sin(x)),x,0,2*%pi);\n```\nWhat will you get with the CLISP-based maxima here? \n\nIf I try the same on 5.26.0 (from Sage 5.5.rc0 on OSX 10.6.8) , I don't get a segfault; I just get back an unevaluated integral, if I try definite integral, and I get the same (wrong) symbolic expression for the indefinite integral.",
    "created_at": "2012-12-17T08:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155144",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@kiwifb](#comment%3A54):
> Do you think that could be that obsolete module?

no, it does not matter. It suffices to load abs_integrate only.
Actually, then I can reproduce 

```
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;
```
from within maxima (so no, the library interface does not matter!) if I try 

```
integrate(abs(sin(x)),x,0,2*%pi);
```
What will you get with the CLISP-based maxima here? 

If I try the same on 5.26.0 (from Sage 5.5.rc0 on OSX 10.6.8) , I don't get a segfault; I just get back an unevaluated integral, if I try definite integral, and I get the same (wrong) symbolic expression for the indefinite integral.



---

archive/issue_comments_155145.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nDo you mean doing this?\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x);\n                             sin(x)\n                      atan(----------)\n                           cos(x) + 1                 sin(x)\n         abs(sin(x)) (---------------- + --------------------------------)\n                             2                                2\n                                                         2 sin (x)\n                                         (cos(x) + 1) (------------- + 2)\n                                                                   2\n                                                       (cos(x) + 1)\n(%o2) 4 (-----------------------------------------------------------------\n                                  abs(cos(x) + 1)\n                                                 2\n               1                            2 sin (x)\n - (signum(----------) signum(sin(x)) log(------------- + 2)\n           cos(x) + 1                                 2\n                                          (cos(x) + 1)\n                                               2\n              1                             sin (x)\n - signum(----------) signum(sin(x)) log(------------- + 1)\n          cos(x) + 1                                 2\n                                         (cos(x) + 1)\n                                                      sin(x)\n                                      2 sin(x) atan(----------)\n              1                                     cos(x) + 1\n + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)\n          cos(x) + 1                         cos(x) + 1\n(%i3)\n```",
    "created_at": "2012-12-17T08:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155145",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:56" align="right">comment:56</div>

Do you mean doing this?

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x);
                             sin(x)
                      atan(----------)
                           cos(x) + 1                 sin(x)
         abs(sin(x)) (---------------- + --------------------------------)
                             2                                2
                                                         2 sin (x)
                                         (cos(x) + 1) (------------- + 2)
                                                                   2
                                                       (cos(x) + 1)
(%o2) 4 (-----------------------------------------------------------------
                                  abs(cos(x) + 1)
                                                 2
               1                            2 sin (x)
 - (signum(----------) signum(sin(x)) log(------------- + 2)
           cos(x) + 1                                 2
                                          (cos(x) + 1)
                                               2
              1                             sin (x)
 - signum(----------) signum(sin(x)) log(------------- + 1)
          cos(x) + 1                                 2
                                         (cos(x) + 1)
                                                      sin(x)
                                      2 sin(x) atan(----------)
              1                                     cos(x) + 1
 + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)
          cos(x) + 1                         cos(x) + 1
(%i3)
```



---

archive/issue_comments_155146.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nAnd i get the same thing with ecl in fact (all system maxima):\n\n```\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/sb-bsd-sockets.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/sockets.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/defsystem.fas\"\n;;; Loading #P\"/usr/lib64/ecl-12.12.1/cmp.fas\"\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp ECL 12.12.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x);\n                             sin(x)\n                      atan(----------)\n                           cos(x) + 1                 sin(x)\n         abs(sin(x)) (---------------- + --------------------------------)\n                             2                                2\n                                                         2 sin (x)\n                                         (cos(x) + 1) (------------- + 2)\n                                                                   2\n                                                       (cos(x) + 1)\n(%o2) 4 (-----------------------------------------------------------------\n                                  abs(cos(x) + 1)\n                                                 2\n               1                            2 sin (x)\n - (signum(----------) signum(sin(x)) log(------------- + 2)\n           cos(x) + 1                                 2\n                                          (cos(x) + 1)\n                                               2\n              1                             sin (x)\n - signum(----------) signum(sin(x)) log(------------- + 1)\n          cos(x) + 1                                 2\n                                         (cos(x) + 1)\n                                                      sin(x)\n                                      2 sin(x) atan(----------)\n              1                                     cos(x) + 1\n + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)\n          cos(x) + 1                         cos(x) + 1\n(%i3)\n```",
    "created_at": "2012-12-17T09:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155146",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">comment:57</div>

And i get the same thing with ecl in fact (all system maxima):

```
;;; Loading #P"/usr/lib64/ecl-12.12.1/sb-bsd-sockets.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/sockets.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/defsystem.fas"
;;; Loading #P"/usr/lib64/ecl-12.12.1/cmp.fas"
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp ECL 12.12.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x);
                             sin(x)
                      atan(----------)
                           cos(x) + 1                 sin(x)
         abs(sin(x)) (---------------- + --------------------------------)
                             2                                2
                                                         2 sin (x)
                                         (cos(x) + 1) (------------- + 2)
                                                                   2
                                                       (cos(x) + 1)
(%o2) 4 (-----------------------------------------------------------------
                                  abs(cos(x) + 1)
                                                 2
               1                            2 sin (x)
 - (signum(----------) signum(sin(x)) log(------------- + 2)
           cos(x) + 1                                 2
                                          (cos(x) + 1)
                                               2
              1                             sin (x)
 - signum(----------) signum(sin(x)) log(------------- + 1)
          cos(x) + 1                                 2
                                         (cos(x) + 1)
                                                      sin(x)
                                      2 sin(x) atan(----------)
              1                                     cos(x) + 1
 + signum(----------) signum(sin(x)) (------------------------- - log(2)))/4)
          cos(x) + 1                         cos(x) + 1
(%i3)
```



---

archive/issue_comments_155147.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@kiwifb](#comment%3A56):\n> Do you mean doing this?\n\nI meant the definite integral, which causes the segfault for us:\n\n```\nintegrate(abs(sin(x)),x,0,2*%pi);\n```",
    "created_at": "2012-12-17T09:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155147",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@kiwifb](#comment%3A56):
> Do you mean doing this?

I meant the definite integral, which causes the segfault for us:

```
integrate(abs(sin(x)),x,0,2*%pi);
```



---

archive/issue_comments_155148.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nOK didn\u00b4t spot the definite bit, fails also with clisp:\n\n```\nMaxima 5.29.1 http://maxima.sourceforge.net\nusing Lisp CLISP 2.48 (2009-07-28)\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) load(abs_integrate);\nWARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\nWARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in\n         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas\nWARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was\n         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp\n(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac\n(%i2) integrate(abs(sin(x)),x,0,2*%pi);\n\n*** - Program stack overflow. RESET\n\n[../src/eval.d:573] reset() found no driver frame (sp=0x7fff1606f430-0x7fff160690b0)\nExiting on signal 6\nAborted\n```",
    "created_at": "2012-12-17T09:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155148",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:59" align="right">comment:59</div>

OK didn¬¥t spot the definite bit, fails also with clisp:

```
Maxima 5.29.1 http://maxima.sourceforge.net
using Lisp CLISP 2.48 (2009-07-28)
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) load(abs_integrate);
WARNING: DEFUN/DEFMACRO: redefining macro OPAPPLY in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
WARNING: DEFUN/DEFMACRO: redefining macro OPCONS in /usr/share/maxima/5.29.1/share/fourier_elim/fourier_elim.lisp, was defined in
         /scratch/portage/sci-mathematics/maxima-5.29.1/work/maxima-5.29.1/src/binary-clisp/nummod.fas
WARNING: DEFUN/DEFMACRO: redefining function SIMP-ISREAL-P in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly_solve_extra.lisp, was
         defined in /usr/share/maxima/5.29.1/share/to_poly_solve/to_poly.lisp
(%o1) /usr/share/maxima/5.29.1/share/contrib/integration/abs_integrate.mac
(%i2) integrate(abs(sin(x)),x,0,2*%pi);

*** - Program stack overflow. RESET

[../src/eval.d:573] reset() found no driver frame (sp=0x7fff1606f430-0x7fff160690b0)
Exiting on signal 6
Aborted
```



---

archive/issue_comments_155149.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@kiwifb](#comment%3A59):\n> OK didn\u00b4t spot the definite bit, fails also with clisp:\n\nOK, now we have something to report upstream... The homepage of the author of abs_integrate is [here](http://www.unk.edu/facultyandstaff.aspx?id=669). Perhaps one should at least cc him when reporting. Can you do this?",
    "created_at": "2012-12-17T09:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155149",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@kiwifb](#comment%3A59):
> OK didn¬¥t spot the definite bit, fails also with clisp:

OK, now we have something to report upstream... The homepage of the author of abs_integrate is [here](http://www.unk.edu/facultyandstaff.aspx?id=669). Perhaps one should at least cc him when reporting. Can you do this?



---

archive/issue_comments_155150.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2012-12-17T09:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155150",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_155151.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.",
    "created_at": "2012-12-17T09:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155151",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:62" align="right">comment:62</div>

I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.



---

archive/issue_comments_155152.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@kiwifb](#comment%3A62):\n> I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.\n\nOK, I'll take care of this.",
    "created_at": "2012-12-17T09:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155152",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@kiwifb](#comment%3A62):
> I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.

OK, I'll take care of this.



---

archive/issue_comments_155153.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**",
    "created_at": "2012-12-17T10:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155153",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_155154.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReported as maxima's bug [2520](https://sourceforge.net/p/maxima/bugs/2520/).",
    "created_at": "2012-12-17T10:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155154",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

Reported as maxima's bug [2520](https://sourceforge.net/p/maxima/bugs/2520/).



---

archive/issue_comments_155155.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nI think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory and I think this triggers the regeneration of some autocrap and finally lead to running a second time config.status.\n\nI'm reuploading a proper spkg in a few minutes.",
    "created_at": "2012-12-17T10:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155155",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:65" align="right">comment:65</div>

I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory and I think this triggers the regeneration of some autocrap and finally lead to running a second time config.status.

I'm reuploading a proper spkg in a few minutes.



---

archive/issue_comments_155156.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nNew spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.",
    "created_at": "2012-12-17T11:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155156",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:66" align="right">comment:66</div>

New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.



---

archive/issue_comments_155157.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nmakeinfo is still invoked, too bad.",
    "created_at": "2012-12-17T11:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155157",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:67" align="right">comment:67</div>

makeinfo is still invoked, too bad.



---

archive/issue_comments_155158.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\n> > I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.\n\n> \n> OK, I'll take care of this.\n\nJust for future reference, bug tracker is best, but also putting something on the mailing list as a \"heads up\" doesn't hurt - but my experience is that the mailing list either gets lots of traction or none.",
    "created_at": "2012-12-17T13:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155158",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:68" align="right">comment:68</div>

> > I am not sure about the usual procedure favored by maxima people. A message on their mailing list or straight to sourceforge bugtracker? I am also not sure how to title the report.

> 
> OK, I'll take care of this.

Just for future reference, bug tracker is best, but also putting something on the mailing list as a "heads up" doesn't hurt - but my experience is that the mailing list either gets lots of traction or none.



---

archive/issue_comments_155159.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n> New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.\n\nThis installed properly on Cygwin on XP.  How do I check whether the library is correct (other than the fact that there is a `local/lib/ecl/maxima.fas`) since #9671 is still unresolved?",
    "created_at": "2012-12-17T15:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155159",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:69" align="right">comment:69</div>

> New spkg which should install properly with ECL 12.12.1 from #13324, should not need makeinfo as well.

This installed properly on Cygwin on XP.  How do I check whether the library is correct (other than the fact that there is a `local/lib/ecl/maxima.fas`) since #9671 is still unresolved?



---

archive/issue_comments_155160.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nI guess you can launch a ecl shell with sage -ecl and then type (require :maxima).\nThis should not be affected by #9671.",
    "created_at": "2012-12-17T16:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155160",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:70" align="right">comment:70</div>

I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).
This should not be affected by #9671.



---

archive/issue_comments_155161.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nOk, I just copied pasted some of the above find command and modified it and did not think, and what happens is that the *.info* files are not touched.\nSo the fix is easy.",
    "created_at": "2012-12-17T16:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155161",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:71" align="right">comment:71</div>

Ok, I just copied pasted some of the above find command and modified it and did not think, and what happens is that the *.info* files are not touched.
So the fix is easy.



---

archive/issue_comments_155162.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@jpflori](#comment%3A65):\n> I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory\n\nYeah, I also noticed that and made an spkg with \"fresh\" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.\n\nIMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.",
    "created_at": "2012-12-17T16:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155162",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@jpflori](#comment%3A65):
> I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory

Yeah, I also noticed that and made an spkg with "fresh" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.

IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.



---

archive/issue_comments_155163.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nWith the just uploaded spkg, everything is correctly touched, timestamps are ok and makeinfo is not invoked.\n\nSo I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok.",
    "created_at": "2012-12-17T16:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155163",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:73" align="right">comment:73</div>

With the just uploaded spkg, everything is correctly touched, timestamps are ok and makeinfo is not invoked.

So I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok.



---

archive/issue_comments_155164.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nOk, building Sage 5.5.rc0 from scratch with the ECL and Maxima spkgs replaced, this time with GCC 4.4.3 and without setting any flags, gives exactly the same doctest errors (plus those due to not having applied the patch from #13324), including the famous *access to protected memory* messages.\n\n(Haven't tried or looked at JP's new p0 yet.)",
    "created_at": "2012-12-17T17:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155164",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:74" align="right">comment:74</div>

Ok, building Sage 5.5.rc0 from scratch with the ECL and Maxima spkgs replaced, this time with GCC 4.4.3 and without setting any flags, gives exactly the same doctest errors (plus those due to not having applied the patch from #13324), including the famous *access to protected memory* messages.

(Haven't tried or looked at JP's new p0 yet.)



---

archive/issue_comments_155165.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@jpflori](#comment%3A73):\n> I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok. \n\nWell, presumably we'll never merge a new Maxima without new *known* bugs (although fixing some old ones), probably even regressions, but I feel a bit uncomfortable with *how* symbolic integration (using the Maxima library interface) now fails, since Sage actually *crashes* (without itself catching the segfault).\n\n(Others may say that's better than \"silently\" giving a wrong answer... ;-) )\n\nWe could mark the doctest `# not tested` for now, but who knows where else similar can or will happen.\n\nThoughts?",
    "created_at": "2012-12-17T17:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155165",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@jpflori](#comment%3A73):
> I guess that apart from fixing the doctests, and the Maxima upstream bug, everything looks rather ok. 

Well, presumably we'll never merge a new Maxima without new *known* bugs (although fixing some old ones), probably even regressions, but I feel a bit uncomfortable with *how* symbolic integration (using the Maxima library interface) now fails, since Sage actually *crashes* (without itself catching the segfault).

(Others may say that's better than "silently" giving a wrong answer... ;-) )

We could mark the doctest `# not tested` for now, but who knows where else similar can or will happen.

Thoughts?



---

archive/issue_comments_155166.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@kiwifb](#comment%3A54):\n> \n> ```\n> ...\n> (%i4)  load(to_poly_solver);\n> to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.\n> ...\n> ```\n\nWe should probably fix that in `sage/interfaces/maxima_lib.py` (in the `init_code` list), perhaps `sage/calculus/calculus.py` (where the code is commented out, and is there for explanation only, apparently), and in a couple of docstrings elsewhere (`sage/symbolic/{expression,relation}.py*`).",
    "created_at": "2012-12-17T18:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155166",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@kiwifb](#comment%3A54):
> 
> ```
> ...
> (%i4)  load(to_poly_solver);
> to_poly_solve: to_poly_solver.mac is obsolete; I'm loading to_poly_solve.mac instead.
> ...
> ```

We should probably fix that in `sage/interfaces/maxima_lib.py` (in the `init_code` list), perhaps `sage/calculus/calculus.py` (where the code is commented out, and is there for explanation only, apparently), and in a couple of docstrings elsewhere (`sage/symbolic/{expression,relation}.py*`).



---

archive/issue_comments_155167.json:
```json
{
    "body": "Changed work issues from **fix doctests, build with latest ECL, fix `spkg-install`** to **fix doctests**",
    "created_at": "2012-12-17T18:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155167",
    "user": "https://github.com/nexttime"
}
```

Changed work issues from **fix doctests, build with latest ECL, fix `spkg-install`** to **fix doctests**



---

archive/issue_comments_155168.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,8 @@\n \n ```\n This should fix at least a few tickets.\n+\n+---\n+\n+**New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)\n+\n``````\n",
    "created_at": "2012-12-17T18:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155168",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,8 @@
 
 ```
 This should fix at least a few tickets.
+
+---
+
+**New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)
+
``````




---

archive/issue_comments_155169.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@nexttime](#comment%3A72):\n> Replying to [@jpflori](#comment%3A65):\n> > I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory\n\n> \n> Yeah, I also noticed that and made an spkg with \"fresh\" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.\n> \n> IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.\n\nYes, that fixed the issue.\n\nI used\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -38,14 +38,16 @@\n ./configure --prefix=\"$SAGE_LOCAL\" --libdir=\"$SAGE_LOCAL/lib\" --enable-ecl\n check_error \"Failed to configure Maxima.\"\n\n+echo\n # Touching html and info files to avoid to regenerate them.\n # This must be done after configuration since the timestamps need\n # to be later than include-maxima.texi which is generated at\n # configuration time:\n-for i in doc/info/*.html ; do\n-    touch \"${i}\"\n+echo \"Touching some HTML and info files to avoid their regeneration...\"\n+for f in doc/info/*.html doc/info/maxima.info*; do\n+    echo \"  $f\"\n+    touch \"$f\"\n done\n-touch doc/info/maxima.info*\n\n\n echo\n@@ -108,10 +110,13 @@\n check_error \"Failed to build Maxima as an ECL library.\"\n\n ECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n+src_dir=`pwd`\n+src_name=\"maxima.system.fasb\" # This has changed from 'maxima.fasb'.\n+tgt_name=\"maxima.fas\"\n echo\n-echo \"Now installing the Maxima library as '$ECLLIB/maxima.fas'...\"\n-cp -f maxima.fasb \"$ECLLIB/maxima.fas\"\n-check_error \"Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'.\"\n+echo \"Now installing the Maxima library as '$ECLLIB/${tgt_name}'...\"\n+cp -f \"${src_dir}/${src_name}\" \"$ECLLIB/${tgt_name}\"\n+check_error \"Failed to install '${src_dir}/${src_name}' as '$ECLLIB/${tgt_name}'.\"\n\n\n if [[ \"$SAGE_SPKG_INSTALL_DOCS\" = yes ]] ; then\n```\n\nbut JP's solution looks ok as well.",
    "created_at": "2012-12-17T19:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155169",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@nexttime](#comment%3A72):
> Replying to [@jpflori](#comment%3A65):
> > I think the makeinfo problem is my fault, I did not preserved timestamps when updating the src directory

> 
> Yeah, I also noticed that and made an spkg with "fresh" `src/` (also `spkg-dist`'ed), but only after I had already triggered a new build from scratch with the ECL and Maxima spkgs replaced, so haven't tested that yet.
> 
> IMHO all necessary files get touched, but as mentioned, the TeXinfo file gets recreated upon building as well.

Yes, that fixed the issue.

I used

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -38,14 +38,16 @@
 ./configure --prefix="$SAGE_LOCAL" --libdir="$SAGE_LOCAL/lib" --enable-ecl
 check_error "Failed to configure Maxima."

+echo
 # Touching html and info files to avoid to regenerate them.
 # This must be done after configuration since the timestamps need
 # to be later than include-maxima.texi which is generated at
 # configuration time:
-for i in doc/info/*.html ; do
-    touch "${i}"
+echo "Touching some HTML and info files to avoid their regeneration..."
+for f in doc/info/*.html doc/info/maxima.info*; do
+    echo "  $f"
+    touch "$f"
 done
-touch doc/info/maxima.info*


 echo
@@ -108,10 +110,13 @@
 check_error "Failed to build Maxima as an ECL library."

 ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
+src_dir=`pwd`
+src_name="maxima.system.fasb" # This has changed from 'maxima.fasb'.
+tgt_name="maxima.fas"
 echo
-echo "Now installing the Maxima library as '$ECLLIB/maxima.fas'..."
-cp -f maxima.fasb "$ECLLIB/maxima.fas"
-check_error "Failed to install '`pwd`/maxima.fasb' as '$ECLLIB/maxima.fas'."
+echo "Now installing the Maxima library as '$ECLLIB/${tgt_name}'..."
+cp -f "${src_dir}/${src_name}" "$ECLLIB/${tgt_name}"
+check_error "Failed to install '${src_dir}/${src_name}' as '$ECLLIB/${tgt_name}'."


 if [[ "$SAGE_SPKG_INSTALL_DOCS" = yes ]] ; then
```

but JP's solution looks ok as well.



---

archive/issue_comments_155170.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@jpflori](#comment%3A70):\n> I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).\n> This should not be affected by #9671.\n\n\n```\n$ ./sage -ecl\nECL (Embeddable Common-Lisp) 12.12.1 (git:UNKNOWN)\nCopyright (C) 1984 Taiichi Yuasa and Masami Hagiya\nCopyright (C) 1993 Giuseppe Attardi\nCopyright (C) 2000 Juan J. Garcia-Ripoll\nECL is free software, and you are welcome to redistribute it\nunder certain conditions; see file 'Copyright' for details.\nType :h for Help.\nTop level.\n> (require :maxima)\n\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/maxima.fas\"\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sb-bsd-sockets.fas\"\n;;; Loading #P\"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sockets.fas\"\n(\"SB-BSD-SOCKETS\" \"SOCKETS\" \"MAXIMA\")\n> (+ 2 2);\n\n4\n```\nThough I didn't know how to run a Maxima command in this, the fact that no error was raised seems good.",
    "created_at": "2012-12-17T20:34:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155170",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@jpflori](#comment%3A70):
> I guess you can launch a ecl shell with sage -ecl and then type (require :maxima).
> This should not be affected by #9671.


```
$ ./sage -ecl
ECL (Embeddable Common-Lisp) 12.12.1 (git:UNKNOWN)
Copyright (C) 1984 Taiichi Yuasa and Masami Hagiya
Copyright (C) 1993 Giuseppe Attardi
Copyright (C) 2000 Juan J. Garcia-Ripoll
ECL is free software, and you are welcome to redistribute it
under certain conditions; see file 'Copyright' for details.
Type :h for Help.
Top level.
> (require :maxima)

;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/maxima.fas"
;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sb-bsd-sockets.fas"
;;; Loading #P"/home/newsagetest/sage-5.5.rc0/local/lib/ecl/sockets.fas"
("SB-BSD-SOCKETS" "SOCKETS" "MAXIMA")
> (+ 2 2);

4
```
Though I didn't know how to run a Maxima command in this, the fact that no error was raised seems good.



---

archive/issue_comments_155171.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2012-12-17T23:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155171",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_155172.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nthere is quite a bit of activity on maxima's tracker on the reported bug. There seem to be several(?) bugs triggered, not in abs_integrate package, but in the \"core\" maxima.",
    "created_at": "2012-12-17T23:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155172",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:80" align="right">comment:80</div>

there is quite a bit of activity on maxima's tracker on the reported bug. There seem to be several(?) bugs triggered, not in abs_integrate package, but in the "core" maxima.



---

archive/issue_comments_155173.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nAnybody a clue where the extra question mark (in e.g. \"Is a an ?integer?\") may originate from?\n\nI don't get it with `sage --maxima`.",
    "created_at": "2012-12-17T23:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155173",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:81" align="right">comment:81</div>

Anybody a clue where the extra question mark (in e.g. "Is a an ?integer?") may originate from?

I don't get it with `sage --maxima`.



---

archive/issue_comments_155174.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?",
    "created_at": "2012-12-18T00:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155174",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:82" align="right">comment:82</div>

I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?



---

archive/issue_comments_155175.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@jpflori](#comment%3A82):\n> I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?\n\nAhem, yes, presumably... ;-)  [AFAICS the original `retrieve` function hasn't changed.]\n\nI was wondering whether some non-printable character (like ASCII BEL) gets mapped to a literal `?`, but at least the position is strange, and e.g. \"Is  a  positve, negative, or zero?\" (note the [IMHO inconsistent] extra spaces) in contrast is just as before (at least on the Python level, i.e., the string passed with the exception, before we strip \"ECL says: Maxima asks: \").",
    "created_at": "2012-12-18T00:46:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155175",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@jpflori](#comment%3A82):
> I guess the string produced by Maxima and the way it is treated before printing changed, so the way we do it in maxima_lib at the lisp level is not uptodate anymore?

Ahem, yes, presumably... ;-)  [AFAICS the original `retrieve` function hasn't changed.]

I was wondering whether some non-printable character (like ASCII BEL) gets mapped to a literal `?`, but at least the position is strange, and e.g. "Is  a  positve, negative, or zero?" (note the [IMHO inconsistent] extra spaces) in contrast is just as before (at least on the Python level, i.e., the string passed with the exception, before we strip "ECL says: Maxima asks: ").



---

archive/issue_comments_155176.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nfor the record, maxima 5.26.0 cannot do similar definite integrals involving abs, either:\n\n```\n(%i2) integrate(abs(cos(x)),x,0,2*%pi);\n\nlog: encountered log(0).\n[...]\n(%o2)                                  0\n```",
    "created_at": "2012-12-19T16:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155176",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:85" align="right">comment:85</div>

for the record, maxima 5.26.0 cannot do similar definite integrals involving abs, either:

```
(%i2) integrate(abs(cos(x)),x,0,2*%pi);

log: encountered log(0).
[...]
(%o2)                                  0
```



---

archive/issue_comments_155177.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nDima's Maxima 5.26.0.p1 spkg from #13860 now builds with both the old (our current) and the new ECL (from #13324), so the spkg here should be (re-)based on that one.  (It would then no longer depend on #13324, too.)",
    "created_at": "2012-12-24T17:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155177",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:86" align="right">comment:86</div>

Dima's Maxima 5.26.0.p1 spkg from #13860 now builds with both the old (our current) and the new ECL (from #13324), so the spkg here should be (re-)based on that one.  (It would then no longer depend on #13324, too.)



---

archive/issue_comments_155178.json:
```json
{
    "body": "Changed dependencies from **#13324** to **#13860**",
    "created_at": "2012-12-24T17:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155178",
    "user": "https://github.com/nexttime"
}
```

Changed dependencies from **#13324** to **#13860**



---

archive/issue_comments_155179.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,3 +18,4 @@\n \n **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)\n \n+**with un upstream patch preventing segfaults:**  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n``````\n",
    "created_at": "2012-12-29T11:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155179",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,3 +18,4 @@
 
 **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)
 
+**with un upstream patch preventing segfaults:**  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
``````




---

archive/issue_comments_155180.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nadded to the spkg patch (from Maxima bug tracker: a [patch](http://sourceforge.net/p/maxima/bugs/_discuss/thread/5a346754/e3a5/attachment/0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch) for bug 2520) gets rid of the segfaults on `integrate(abs(sin(x)),x,0,2*pi)` reported here.",
    "created_at": "2012-12-29T11:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155180",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:87" align="right">comment:87</div>

added to the spkg patch (from Maxima bug tracker: a [patch](http://sourceforge.net/p/maxima/bugs/_discuss/thread/5a346754/e3a5/attachment/0001-taylor2-Avoid-blowing-the-stack-when-diff-expand-isn.patch) for bug 2520) gets rid of the segfaults on `integrate(abs(sin(x)),x,0,2*pi)` reported here.



---

archive/issue_comments_155181.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nThere is a regression: maxima 5.29 (and 5.28) cannot compute `integrate(sqrt(x + sqrt(x)), x)`. Reported as issue [2526](https://sourceforge.net/p/maxima/bugs/2526/) on Maxima's tracker. This leads to a doctest failure in `maxima_lib.py` (line 716).",
    "created_at": "2012-12-29T14:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155181",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:88" align="right">comment:88</div>

There is a regression: maxima 5.29 (and 5.28) cannot compute `integrate(sqrt(x + sqrt(x)), x)`. Reported as issue [2526](https://sourceforge.net/p/maxima/bugs/2526/) on Maxima's tracker. This leads to a doctest failure in `maxima_lib.py` (line 716).



---

archive/issue_events_184749.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-29T15:59:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184749"
}
```



---

archive/issue_comments_155182.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,10 +12,13 @@\n SourceForge file manager. (http://sourceforge.net/projects/maxima/files)\n \n ```\n-This should fix at least a few tickets.\n+This should fix at least a few tickets. The following spkgs are for ECL 12.12 (new ASDF)\n \n ---\n \n **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)\n \n-**with un upstream patch preventing segfaults:**  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n+with an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n+\n+apply \n+* [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)\n``````\n",
    "created_at": "2012-12-29T15:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155182",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,10 +12,13 @@
 SourceForge file manager. (http://sourceforge.net/projects/maxima/files)
 
 ```
-This should fix at least a few tickets.
+This should fix at least a few tickets. The following spkgs are for ECL 12.12 (new ASDF)
 
 ---
 
 **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)
 
-**with un upstream patch preventing segfaults:**  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
+with an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
+
+apply 
+* [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)
``````




---

archive/issue_comments_155183.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nremaining doctest issues are due to extra `?` characters appearing in Maxima library interactions in `sage/calculus.py`, such as \n\n```\n    Is a an ?integer?\n``` \nand \n\n```\n    Is a an ?even?\\ ?number?\n```\ninstead of \n\n```\n    Is a an integer?\n``` \nand \n\n```\n    Is a an even number?\n```\nThis needs to be investigated, IMHO.",
    "created_at": "2012-12-29T15:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155183",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:89" align="right">comment:89</div>

remaining doctest issues are due to extra `?` characters appearing in Maxima library interactions in `sage/calculus.py`, such as 

```
    Is a an ?integer?
``` 
and 

```
    Is a an ?even?\ ?number?
```
instead of 

```
    Is a an integer?
``` 
and 

```
    Is a an even number?
```
This needs to be investigated, IMHO.



---

archive/issue_events_184750.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-29T15:59:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184750"
}
```



---

archive/issue_events_184751.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-29T15:59:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184751"
}
```



---

archive/issue_comments_155184.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,13 +12,14 @@\n SourceForge file manager. (http://sourceforge.net/projects/maxima/files)\n \n ```\n-This should fix at least a few tickets. The following spkgs are for ECL 12.12 (new ASDF)\n+This should fix at least a few tickets. The following spkg is for ECL 12.12 (new ASDF)\n \n ---\n \n **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)\n \n-with an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n+The following spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\n+an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n \n apply \n * [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)\n``````\n",
    "created_at": "2012-12-29T18:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155184",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,13 +12,14 @@
 SourceForge file manager. (http://sourceforge.net/projects/maxima/files)
 
 ```
-This should fix at least a few tickets. The following spkgs are for ECL 12.12 (new ASDF)
+This should fix at least a few tickets. The following spkg is for ECL 12.12 (new ASDF)
 
 ---
 
 **New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)
 
-with an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
+The following spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
+an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
 
 apply 
 * [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)
``````




---

archive/issue_comments_155185.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@dimpase](#comment%3A90):\n\nthe spkg is updated to work with ECL 11.1.1, as well as with the new ECL 12.12. Doctests show that the `?integer?` stuff does not go away if ECL 11.1.1 is used. So this is the new Maxima to blame for.",
    "created_at": "2012-12-29T18:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155185",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@dimpase](#comment%3A90):

the spkg is updated to work with ECL 11.1.1, as well as with the new ECL 12.12. Doctests show that the `?integer?` stuff does not go away if ECL 11.1.1 is used. So this is the new Maxima to blame for.



---

archive/issue_comments_155186.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nI'm doing `git bisect` on the Maxima repo to try to find the places to blame. It looks it was a long story, more than just a single change to undo. The first bad commit after the clean situation, as if in 5.26.0, is\n\n```\n4e2e7fb738e6f9f1955a5378ae392a1930b30bce\nMerge branch 'share-cleanup-branch-2011-10'\n```\nMaxima identifies itself as `Maxima 5.26.0_70_g4e2e7fb_dirty`, and one gets\n\n```\nsage: var('a');assume(a>0);limit(x^a,x=0)\na\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line string', (205, 187))\n[...]\nRuntimeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.\n```\nlooking at the commit more carefully, one sees renaming `to_poly_solver` to `to_poly_solve`.\nIf I make this change in sage/interfaces/maxima_lib.py, line 142, the error go away. So in fact these `?integer?` things got in later.\n\nBack to `git bisect` now.",
    "created_at": "2012-12-30T12:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155186",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:92" align="right">comment:92</div>

I'm doing `git bisect` on the Maxima repo to try to find the places to blame. It looks it was a long story, more than just a single change to undo. The first bad commit after the clean situation, as if in 5.26.0, is

```
4e2e7fb738e6f9f1955a5378ae392a1930b30bce
Merge branch 'share-cleanup-branch-2011-10'
```
Maxima identifies itself as `Maxima 5.26.0_70_g4e2e7fb_dirty`, and one gets

```
sage: var('a');assume(a>0);limit(x^a,x=0)
a
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line string', (205, 187))
[...]
RuntimeError: ECL says: THROW: The catch MACSYMA-QUIT is undefined.
```
looking at the commit more carefully, one sees renaming `to_poly_solver` to `to_poly_solve`.
If I make this change in sage/interfaces/maxima_lib.py, line 142, the error go away. So in fact these `?integer?` things got in later.

Back to `git bisect` now.



---

archive/issue_comments_155187.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nAfter some more `git bisect`, finally, it is here:\nhttps://sourceforge.net/p/maxima/code/ci/f5e9b0f7eb122c4e48ea9df144dd57221e5ea0ca\n\nto blame for `?integer?`\n\nIt was meant to fix [this](http://www.math.utexas.edu/pipermail/maxima/2012/027927.html), but Sage has it fixed already. I will post a patched spkg with this patch undone.",
    "created_at": "2012-12-30T15:15:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155187",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:93" align="right">comment:93</div>

After some more `git bisect`, finally, it is here:
https://sourceforge.net/p/maxima/code/ci/f5e9b0f7eb122c4e48ea9df144dd57221e5ea0ca

to blame for `?integer?`

It was meant to fix [this](http://www.math.utexas.edu/pipermail/maxima/2012/027927.html), but Sage has it fixed already. I will post a patched spkg with this patch undone.



---

archive/issue_comments_155188.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nthe update tested on Sage 5.5, and passes all the longtests (provided the doctests.patch is installed, of course). Needs review!",
    "created_at": "2012-12-31T12:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155188",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:94" align="right">comment:94</div>

the update tested on Sage 5.5, and passes all the longtests (provided the doctests.patch is installed, of course). Needs review!



---

archive/issue_comments_155189.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,14 +12,13 @@\n SourceForge file manager. (http://sourceforge.net/projects/maxima/files)\n \n ```\n-This should fix at least a few tickets. The following spkg is for ECL 12.12 (new ASDF)\n \n----\n+**New spkg:** \n \n-**New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)\n+The updated spkg, based on a version [here](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg), is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\n+an **upstream patch** preventing segfaults. This fixes few tickets. \n \n-The following spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\n-an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)\n+Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and\n \n-apply \n+Apply \n * [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)\n``````\n",
    "created_at": "2012-12-31T12:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155189",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,14 +12,13 @@
 SourceForge file manager. (http://sourceforge.net/projects/maxima/files)
 
 ```
-This should fix at least a few tickets. The following spkg is for ECL 12.12 (new ASDF)
 
----
+**New spkg:** 
 
-**New spkg:** [http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg)
+The updated spkg, based on a version [here](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg), is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
+an **upstream patch** preventing segfaults. This fixes few tickets. 
 
-The following spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
-an **upstream patch** preventing segfaults:  [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg)
+Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and
 
-apply 
+Apply 
 * [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)
``````




---

archive/issue_comments_155190.json:
```json
{
    "body": "Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, Dmitrii Pasechnik**",
    "created_at": "2012-12-31T12:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155190",
    "user": "https://github.com/dimpase"
}
```

Changed author from **Jean-Pierre Flori** to **Jean-Pierre Flori, Dmitrii Pasechnik**



---

archive/issue_events_184752.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-31T12:40:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184752"
}
```



---

archive/issue_events_184753.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-12-31T12:40:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184753"
}
```



---

archive/issue_comments_155191.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put \"needs work\" for such things either.",
    "created_at": "2013-01-03T20:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155191",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:95" align="right">comment:95</div>

I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put "needs work" for such things either.



---

archive/issue_comments_155192.json:
```json
{
    "body": "Changed work issues from **fix doctests** to none",
    "created_at": "2013-01-03T20:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155192",
    "user": "https://github.com/kcrisman"
}
```

Changed work issues from **fix doctests** to none



---

archive/issue_comments_155193.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nThis does work!   Nicely done.  \"Needs info\" for the whole spkg rebasing issue.",
    "created_at": "2013-01-03T20:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155193",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:96" align="right">comment:96</div>

This does work!   Nicely done.  "Needs info" for the whole spkg rebasing issue.



---

archive/issue_events_184754.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T20:55:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184754"
}
```



---

archive/issue_events_184755.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T20:55:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184755"
}
```



---

archive/issue_events_184756.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-01-04T01:17:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184756"
}
```



---

archive/issue_events_184757.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2013-01-04T01:17:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184757"
}
```



---

archive/issue_comments_155194.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@kcrisman](#comment%3A95):\n> I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put \"needs work\" for such things either.\n\n#13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.",
    "created_at": "2013-01-04T01:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155194",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@kcrisman](#comment%3A95):
> I like this!  Only issue is that now #13860 has been merged in the meantime, so possibly this should be based on that?  Clearly some of the changes are identical (like the image removal, asdf compatibility), since Dima made both of them!  Unsure also on how JP's changes should be handled...  But I'm very reluctant to put "needs work" for such things either.

#13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.



---

archive/issue_comments_155195.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\n> #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.\n\nI just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.",
    "created_at": "2013-01-04T01:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155195",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:98" align="right">comment:98</div>

> #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.

I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.



---

archive/issue_comments_155196.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@kcrisman](#comment%3A98):\n> > #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.\n\n> I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.\n\nI don't understand. Indeed, 5.26.0.p1 and 5.29.1.p1 are separate branches. So what?",
    "created_at": "2013-01-04T02:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155196",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@kcrisman](#comment%3A98):
> > #13860 and this ticket are independent of each other. Indeed there is small parallelism in changes, but that's all.

> I just meant in terms of the HG repository for this spkg, which would seem to indicate that one should base the p0 and p1 here on the p1 there.

I don't understand. Indeed, 5.26.0.p1 and 5.29.1.p1 are separate branches. So what?



---

archive/issue_comments_155197.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nWell I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.",
    "created_at": "2013-01-04T03:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155197",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:100" align="right">comment:100</div>

Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.



---

archive/issue_comments_155198.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@kiwifb](#comment%3A100):\n> Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.\n\nI think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.",
    "created_at": "2013-01-04T03:17:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155198",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@kiwifb](#comment%3A100):
> Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.

I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.



---

archive/issue_comments_155199.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\n> > Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.\n\n*been* chastised - just for those reading\n> I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.\n\nFair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.",
    "created_at": "2013-01-04T03:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155199",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:102" align="right">comment:102</div>

> > Well I and other have chastised before for not staying on a single branch for a spkg. I would assume you will be told off too. Unless we just skip one of them.

*been* chastised - just for those reading
> I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.

Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.



---

archive/issue_comments_155200.json:
```json
{
    "body": "Changed dependencies from **#13860** to none",
    "created_at": "2013-01-04T03:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155200",
    "user": "https://github.com/kcrisman"
}
```

Changed dependencies from **#13860** to none



---

archive/issue_comments_155201.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\n> > I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.\n\n> Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.\n\nActually, he had fewer changes than I thought.  The change in Dima's package to deal with various names for the library was already positively reviewed at #13860.  So... lookin' good.  Shall we say positive review?  It's certainly been tested quite a bit.",
    "created_at": "2013-01-05T03:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155201",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:103" align="right">comment:103</div>

> > I think this is pure bullshit in this case, about single branch. Let's deal with bullshit when/if it comes to it. If we are quick enough 5.26.0.p1 won't even get merged in any (stable) release.

> Fair enough, in which case I'll remove that dependency, which leif introduced.  Anyway, I can't review some of the more technical changes in JP's package, but the Sage side seems okay.

Actually, he had fewer changes than I thought.  The change in Dima's package to deal with various names for the library was already positively reviewed at #13860.  So... lookin' good.  Shall we say positive review?  It's certainly been tested quite a bit.



---

archive/issue_comments_155202.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\na minor point: for the test in functional.py that (now) takes a long time, without the\n`-long` option, the variable `t` is not defined, and the test on\n`t.simplify_exp()` fails with:\n\n```\nNameError: name 't' is not defined\n```\nProbably the `t.simplify_exp()` line should be commented with `# long time` too.\n\nOtherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...\n\nPaul",
    "created_at": "2013-01-07T14:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155202",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:105" align="right">comment:105</div>

a minor point: for the test in functional.py that (now) takes a long time, without the
`-long` option, the variable `t` is not defined, and the test on
`t.simplify_exp()` fails with:

```
NameError: name 't' is not defined
```
Probably the `t.simplify_exp()` line should be commented with `# long time` too.

Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...

Paul



---

archive/issue_comments_155203.json:
```json
{
    "body": "Use this patch",
    "created_at": "2013-01-07T14:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155203",
    "user": "https://github.com/kcrisman"
}
```

Use this patch



---

archive/issue_events_184758.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-07T14:50:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184758"
}
```



---

archive/issue_events_184759.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-07T14:50:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184759"
}
```



---

archive/issue_comments_155204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,4 +21,4 @@\n Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and\n \n Apply \n-* [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)\n+* [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)\n``````\n",
    "created_at": "2013-01-07T14:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155204",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,4 +21,4 @@
 Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and
 
 Apply 
-* [attachment: doctests.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.patch.gz)
+* [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)
``````




---

archive/issue_comments_155205.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nAttachment: **[doctests.2.patch.gz](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)**\n\n> Probably the `t.simplify_exp()` line should be commented with `# long time` too.\n\nGreat point, I've updated the patch.\n> Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...\n\nLet's do it and see what happens.  At some point we have to try it, and it looks like it's been tested on Mac and several Linuces.",
    "created_at": "2013-01-07T14:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155205",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:106" align="right">comment:106</div>

Attachment: **[doctests.2.patch.gz](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)**

> Probably the `t.simplify_exp()` line should be commented with `# long time` too.

Great point, I've updated the patch.
> Otherwise all doctests pass on top of Sage 5.5, thus I would give a positive review, but since this ticket is quite long, I'm not sure...

Let's do it and see what happens.  At some point we have to try it, and it looks like it's been tested on Mac and several Linuces.



---

archive/issue_comments_155206.json:
```json
{
    "body": "Changed reviewer from **Karl-Dieter Crisman, Fran\u00e7ois Bissey, Leif Leonhardy** to **Karl-Dieter Crisman, Fran\u00e7ois Bissey, Leif Leonhardy, Paul Zimmermann**",
    "created_at": "2013-01-07T14:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155206",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Karl-Dieter Crisman, Fran√ßois Bissey, Leif Leonhardy** to **Karl-Dieter Crisman, Fran√ßois Bissey, Leif Leonhardy, Paul Zimmermann**



---

archive/issue_comments_155207.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nWell it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n\n```\n    Note that due to some problems with the way Maxima handles these\n    expressions, definite integrals can sometimes give unexpected\n    results (typically when using inexact endpoints) due to\n    inconsistent branching::\n```\nThat may be a bit pedantic however.",
    "created_at": "2013-01-08T10:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155207",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:107" align="right">comment:107</div>

Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:

```
    Note that due to some problems with the way Maxima handles these
    expressions, definite integrals can sometimes give unexpected
    results (typically when using inexact endpoints) due to
    inconsistent branching::
```
That may be a bit pedantic however.



---

archive/issue_events_184760.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-08T15:19:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184760"
}
```



---

archive/issue_events_184761.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-08T15:19:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184761"
}
```



---

archive/issue_comments_155208.json:
```json
{
    "body": "Dependencies: **#13324**",
    "created_at": "2013-01-08T15:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155208",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#13324**



---

archive/issue_comments_155209.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@kiwifb](#comment%3A107):\n> Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n> \n> ```\n>     Note that due to some problems with the way Maxima handles these\n>     expressions, definite integrals can sometimes give unexpected\n>     results (typically when using inexact endpoints) due to\n>     inconsistent branching::\n> ```\n> That may be a bit pedantic however.\n\nNo, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)",
    "created_at": "2013-01-08T15:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155209",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@kiwifb](#comment%3A107):
> Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:
> 
> ```
>     Note that due to some problems with the way Maxima handles these
>     expressions, definite integrals can sometimes give unexpected
>     results (typically when using inexact endpoints) due to
>     inconsistent branching::
> ```
> That may be a bit pedantic however.

No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)



---

archive/issue_comments_155210.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nReplying to [@jdemeyer](#comment%3A108):\n\nThis ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\n\nBut the dependency is probably some artificial one for the release process, some I'm leaving it as is...",
    "created_at": "2013-01-08T17:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155210",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:110" align="right">comment:110</div>

Replying to [@jdemeyer](#comment%3A108):

This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.

But the dependency is probably some artificial one for the release process, some I'm leaving it as is...



---

archive/issue_comments_155211.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nReplying to [@nexttime](#comment%3A110):\n> Replying to [@jdemeyer](#comment%3A108):\n> \n> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\n\nP.S.: ... as stated in the ticket's description btw. :-)",
    "created_at": "2013-01-08T17:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155211",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:111" align="right">comment:111</div>

Replying to [@nexttime](#comment%3A110):
> Replying to [@jdemeyer](#comment%3A108):
> 
> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.

P.S.: ... as stated in the ticket's description btw. :-)



---

archive/issue_comments_155212.json:
```json
{
    "body": "Changed dependencies from **#13324** to none",
    "created_at": "2013-01-08T19:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155212",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#13324** to none



---

archive/issue_comments_155213.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nReplying to [@nexttime](#comment%3A110):\n> Replying to [@jdemeyer](#comment%3A108):\n> \n> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.\n\nThen I was confused by a comment on #13324.",
    "created_at": "2013-01-08T19:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155213",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:112" align="right">comment:112</div>

Replying to [@nexttime](#comment%3A110):
> Replying to [@jdemeyer](#comment%3A108):
> 
> This ticket doesn't depend on #13324, as now both Maxima versions (5.26.0.p1 from #13860, and the 5.29.1.p1 from here) can cope with the new as well as the old ASDF naming scheme.

Then I was confused by a comment on #13324.



---

archive/issue_comments_155214.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@kcrisman](#comment%3A109):\n> Replying to [@kiwifb](#comment%3A107):\n> > Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:\n> > \n> > ```\n> >     Note that due to some problems with the way Maxima handles these\n> >     expressions, definite integrals can sometimes give unexpected\n> >     results (typically when using inexact endpoints) due to\n> >     inconsistent branching::\n> > ```\n> > That may be a bit pedantic however.\n\n> No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)\n\nYou are welcome, I guess :P",
    "created_at": "2013-01-09T09:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155214",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@kcrisman](#comment%3A109):
> Replying to [@kiwifb](#comment%3A107):
> > Well it works but I am not sure we should patch exp_integral.py this way. The old result was to demonstrate that something was broken. We should change the comment to reflect that is fixed or find another broken example. By comment I mean this bit:
> > 
> > ```
> >     Note that due to some problems with the way Maxima handles these
> >     expressions, definite integrals can sometimes give unexpected
> >     results (typically when using inexact endpoints) due to
> >     inconsistent branching::
> > ```
> > That may be a bit pedantic however.

> No, that's a good point actually.  Thanks for volunteering to ask the Maxima list for such an example :-)

You are welcome, I guess :P



---

archive/issue_comments_155215.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nThis spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.",
    "created_at": "2013-01-10T10:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155215",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:114" align="right">comment:114</div>

This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.



---

archive/issue_events_184762.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-10T10:24:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184762"
}
```



---

archive/issue_events_184763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-10T10:24:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184763"
}
```



---

archive/issue_comments_155216.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@jdemeyer](#comment%3A114):\n> This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.\n\nas far as I am concerned, maxima-5.26.0.p1 may just as well die. It would cost me half an hour of fooling around with hg, with 0 benefit for anything.",
    "created_at": "2013-01-10T10:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155216",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@jdemeyer](#comment%3A114):
> This spkg should be rebased to maxima-5.26.0.p1, it is currently based on maxima-5.26.0.p0.

as far as I am concerned, maxima-5.26.0.p1 may just as well die. It would cost me half an hour of fooling around with hg, with 0 benefit for anything.



---

archive/issue_comments_155217.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nReplying to [@dimpase](#comment%3A115):\n> 0 benefit for anything.\n\nSo all the changes in #13860 were completely pointless then?",
    "created_at": "2013-01-10T10:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155217",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:116" align="right">comment:116</div>

Replying to [@dimpase](#comment%3A115):
> 0 benefit for anything.

So all the changes in #13860 were completely pointless then?



---

archive/issue_comments_155218.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nReplying to [@jdemeyer](#comment%3A116):\n> Replying to [@dimpase](#comment%3A115):\n> > 0 benefit for anything.\n\n> So all the changes in #13860 were completely pointless then?\n\nWhen I worked on #13860 it was not clear that the current ticket can be done so fast.\n\nThe  changes on #13860 are all basically repeated, in a slightly different way, on this ticket. Due to our scheme of working on packages it wasn't trivial to properly merge the changes, so I just copy/pasted from source.",
    "created_at": "2013-01-10T10:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155218",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:117" align="right">comment:117</div>

Replying to [@jdemeyer](#comment%3A116):
> Replying to [@dimpase](#comment%3A115):
> > 0 benefit for anything.

> So all the changes in #13860 were completely pointless then?

When I worked on #13860 it was not clear that the current ticket can be done so fast.

The  changes on #13860 are all basically repeated, in a slightly different way, on this ticket. Due to our scheme of working on packages it wasn't trivial to properly merge the changes, so I just copy/pasted from source.



---

archive/issue_comments_155219.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nOK, I rebased.  diff attached.\n\nI also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.",
    "created_at": "2013-01-10T10:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155219",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:118" align="right">comment:118</div>

OK, I rebased.  diff attached.

I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.



---

archive/issue_comments_155220.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,12 +13,10 @@\n \n ```\n \n-**New spkg:** \n-\n-The updated spkg, based on a version [here](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg), is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\n+The new spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has\n an **upstream patch** preventing segfaults. This fixes few tickets. \n \n-Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and\n+Install [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg)\n \n Apply \n * [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)\n``````\n",
    "created_at": "2013-01-10T10:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155220",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,12 +13,10 @@
 
 ```
 
-**New spkg:** 
-
-The updated spkg, based on a version [here](http://boxen.math.washington.edu/home/jpflori/maxima-5.29.1.p0.spkg), is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
+The new spkg is for ECL 11 as well as for ECL 12, i.e. ASDF-agnostic, along the lines of maxima 5.26.0 at #13860. Moreover it has
 an **upstream patch** preventing segfaults. This fixes few tickets. 
 
-Install [http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/dima/packages/maxima-5.29.1.p1.spkg) and
+Install [http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/maxima-5.29.1.p1.spkg)
 
 Apply 
 * [attachment: doctests.2.patch](https://github.com/sagemath/sage/files/ticket13364/doctests.2.patch.gz)
``````




---

archive/issue_events_184764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-10T10:37:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184764"
}
```



---

archive/issue_events_184765.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-10T10:37:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184765"
}
```



---

archive/issue_comments_155221.json:
```json
{
    "body": "spkg diff, for review only",
    "created_at": "2013-01-10T10:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155221",
    "user": "https://github.com/jdemeyer"
}
```

spkg diff, for review only



---

archive/issue_events_184766.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-10T10:42:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184766"
}
```



---

archive/issue_events_184767.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-01-10T10:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184767"
}
```



---

archive/issue_comments_155222.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nAttachment: **[maxima-5.29.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket13364/maxima-5.29.1.p1.diff.gz)**",
    "created_at": "2013-01-10T10:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155222",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:120" align="right">comment:120</div>

Attachment: **[maxima-5.29.1.p1.diff.gz](https://github.com/sagemath/sage/files/ticket13364/maxima-5.29.1.p1.diff.gz)**



---

archive/issue_comments_155223.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@jdemeyer](#comment%3A118):\n> OK, I rebased.  diff attached.\n> \n> I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.\n\ndank u wel!",
    "created_at": "2013-01-10T12:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155223",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@jdemeyer](#comment%3A118):
> OK, I rebased.  diff attached.
> 
> I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.

dank u wel!



---

archive/issue_comments_155224.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\n> > I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.\n\n> dank u wel!\n\nAgreed!",
    "created_at": "2013-01-10T16:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155224",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:122" align="right">comment:122</div>

> > I also renamed `spkg-dist` to `spkg-src` since the former name should be reserved for scripts which *create* a spkg.

> dank u wel!

Agreed!



---

archive/issue_comments_155225.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nI've opened #13973 to deal with including the latest upstream patches.",
    "created_at": "2013-01-19T12:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155225",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:123" align="right">comment:123</div>

I've opened #13973 to deal with including the latest upstream patches.



---

archive/issue_comments_155226.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nHere are some tickets the current ticket should fix (i.e., they just need a patch to doctest it).  Not that I've tried them, just that in theory they are in 5.29.1.  Unfortunately, so far I only found these two...\n* #8728\n* #12708",
    "created_at": "2013-01-20T01:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155226",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:124" align="right">comment:124</div>

Here are some tickets the current ticket should fix (i.e., they just need a patch to doctest it).  Not that I've tried them, just that in theory they are in 5.29.1.  Unfortunately, so far I only found these two...
* #8728
* #12708



---

archive/issue_events_184768.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:06:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184768"
}
```



---

archive/issue_events_184769.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:06:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13364#event-184769"
}
```



---

archive/issue_comments_155227.json:
```json
{
    "body": "Merged: **sage-5.7.beta0**",
    "created_at": "2013-01-21T21:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155227",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta0**



---

archive/issue_comments_155228.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nNote that [this commit](https://sourceforge.net/p/maxima/code/ci/3ca4235b8206b44e6670788696e6614b616f8994/) in Maxima apparently fixes one of the problems in question.",
    "created_at": "2021-11-15T12:18:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13364#issuecomment-155228",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:126" align="right">comment:126</div>

Note that [this commit](https://sourceforge.net/p/maxima/code/ci/3ca4235b8206b44e6670788696e6614b616f8994/) in Maxima apparently fixes one of the problems in question.
