# Issue 13720: Scale legendre_P to [a,b]

archive/issues_013516.json:
```json
{
    "assignees": [],
    "body": "The Legendre polynomials, returned by `legendre_P()`, of the first kind are orthogonal over [-1,1] and are normalized to have value +-1 at the endpoints.\n\nWhen solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].\n\n\n\nAssignee: **@burcin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13720_\n\n",
    "created_at": "2012-11-18T01:27:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Scale legendre_P to [a,b]",
    "type": "issue",
    "updated_at": "2021-02-23T03:56:38Z",
    "url": "https://github.com/sagemath/sage/issues/13720",
    "user": "https://github.com/orlitzky"
}
```
The Legendre polynomials, returned by `legendre_P()`, of the first kind are orthogonal over [-1,1] and are normalized to have value +-1 at the endpoints.

When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].



Assignee: **@burcin**

_Issue created by migration from https://trac.sagemath.org/ticket/13720_





---

archive/issue_events_176281.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-18T01:27:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176281"
}
```



---

archive/issue_events_176282.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-18T01:27:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176282"
}
```



---

archive/issue_events_176283.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-18T01:27:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176283"
}
```



---

archive/issue_events_176284.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-18T01:27:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176284"
}
```



---

archive/issue_events_176285.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-19T04:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176285"
}
```



---

archive/issue_comments_163583.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2012-11-19T04:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163583",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_163584.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\n* The code seems over-complicated to me.  Replacing the last few lines with \n\n```\n    R = PolynomialRing(ZZ, 't')\n    f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])\n    return f((x - a)/(b - a))\n```\n  is much simpler and is significantly faster.  Moreover, this makes expressions such as\n\n```\nlegendre_P(4, Zmod(5), 3, 6)\n```\n   evaluate correctly; at it stands the patch yields an\n\n```\nArithmeticError: 0^0 is undefined.\n```\n\n* I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:\n\n```\nsage: R.<r,s,t> = QQ[]\nsage: legendre_P(2, t, r, s)\n6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1\n```\n\n* I don't see the need to use `bool` in doctests such as\n\n```\nbool(legendre_P(0, x, 0, 1) == p0)\n```\n\n* It's not clear to me why back-quotes are used in some of the error strings:\n\n```\n        raise TypeError('`n` must be a natural number')\n```\n   but\n\n```\n        raise ValueError('n must be nonnegative')\n```",
    "created_at": "2012-11-25T18:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163584",
    "user": "https://github.com/sagetrac-fwclarke"
}
```

<div id="comment:2" align="right">Comment 2</div>

* The code seems over-complicated to me.  Replacing the last few lines with 

```
    R = PolynomialRing(ZZ, 't')
    f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])
    return f((x - a)/(b - a))
```
  is much simpler and is significantly faster.  Moreover, this makes expressions such as

```
legendre_P(4, Zmod(5), 3, 6)
```
   evaluate correctly; at it stands the patch yields an

```
ArithmeticError: 0^0 is undefined.
```

* I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:

```
sage: R.<r,s,t> = QQ[]
sage: legendre_P(2, t, r, s)
6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1
```

* I don't see the need to use `bool` in doctests such as

```
bool(legendre_P(0, x, 0, 1) == p0)
```

* It's not clear to me why back-quotes are used in some of the error strings:

```
        raise TypeError('`n` must be a natural number')
```
   but

```
        raise ValueError('n must be nonnegative')
```



---

archive/issue_events_176286.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2012-11-25T18:54:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176286"
}
```



---

archive/issue_events_176287.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2012-11-25T18:54:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176287"
}
```



---

archive/issue_comments_163585.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nReplying to [@sagetrac-fwclarke](#comment%3A2):\n> * The code seems over-complicated to me.  Replacing the last few lines with \n> \n> ```\n>     R = PolynomialRing(ZZ, 't')\n>     f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])\n>     return f((x - a)/(b - a))\n> ```\n>   is much simpler and is significantly faster.  Moreover, this makes expressions such as\n> \n> ```\n> legendre_P(4, Zmod(5), 3, 6)\n> ```\n>    evaluate correctly; at it stands the patch yields an\n> \n> ```\n> ArithmeticError: 0^0 is undefined.\n> ```\n> \n\n\n\nI tried this, but it's producing the wrong results. For example,\n\n```\nsage: legendre_P(1, x)\n-1/2*x - 5/2\n```\n\nThat said, there are two reasons it might seem over-complicated.\n\nThe first is that I was very careful not to break any existing doctests, even though they're doing some crazy things. I tried to comment each of these hurdles.\n\nThe second is that I wanted to be clear about what was happening. The `c(m)` and `g(m)` functions are as defined in A&S. So the final `return` statement is exactly the form given in the reference. The use of the affine transform `phi()` allows me to retain that form, and also provides some rationale for the result. I think this makes it (more) clear that we're composing the standard `P()` over [-1,1] with an affine transform, which will intuitively preserve orthogonality.\n\n\n\n> * I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:\n> \n> ```\n> sage: R.<r,s,t> = QQ[]\n> sage: legendre_P(2, t, r, s)\n> 6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1\n> ```\n> \n\n\n\nI'm happy to change this if it can be done without breaking the existing doctests. I'll wait to see what you say about the first thing.\n\n\n\n> * I don't see the need to use `bool` in doctests such as\n> \n> ```\n> bool(legendre_P(0, x, 0, 1) == p0)\n> ```\n\n\n\nOften, the `==` operator will return a symbolic equality rather than True/False. This is true even in this simple case:\n\n```\nsage: p0 = 1\nsage: legendre_P(0, x, 0, 1) == p0\n1 == 1\n```\n\nIf you cast the symbolic equality to `bool`, you get,\n\n* True, if Sage can convince itself that equality holds.\n* False, if Sage can \"prove\" inequality.\n* False, if it's not sure.\n\nSo it should be safe to test for `True`.\n\n\n\n> * It's not clear to me why back-quotes are used in some of the error strings:\n> \n> ```\n>         raise TypeError('`n` must be a natural number')\n> ```\n>    but\n> \n> ```\n>         raise ValueError('n must be nonnegative')\n> ```\n\n\n\nI was just careless with that one, I'll fix it. I think backticks or single quotes are needed around 'a' and 'b', otherwise it reads weird. But 'n' at the beginning is fine without it.",
    "created_at": "2012-11-26T06:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163585",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:3" align="right">Comment 3</div>

Replying to [@sagetrac-fwclarke](#comment%3A2):
> * The code seems over-complicated to me.  Replacing the last few lines with 
> 
> ```
>     R = PolynomialRing(ZZ, 't')
>     f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])
>     return f((x - a)/(b - a))
> ```
>   is much simpler and is significantly faster.  Moreover, this makes expressions such as
> 
> ```
> legendre_P(4, Zmod(5), 3, 6)
> ```
>    evaluate correctly; at it stands the patch yields an
> 
> ```
> ArithmeticError: 0^0 is undefined.
> ```
> 



I tried this, but it's producing the wrong results. For example,

```
sage: legendre_P(1, x)
-1/2*x - 5/2
```

That said, there are two reasons it might seem over-complicated.

The first is that I was very careful not to break any existing doctests, even though they're doing some crazy things. I tried to comment each of these hurdles.

The second is that I wanted to be clear about what was happening. The `c(m)` and `g(m)` functions are as defined in A&S. So the final `return` statement is exactly the form given in the reference. The use of the affine transform `phi()` allows me to retain that form, and also provides some rationale for the result. I think this makes it (more) clear that we're composing the standard `P()` over [-1,1] with an affine transform, which will intuitively preserve orthogonality.



> * I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:
> 
> ```
> sage: R.<r,s,t> = QQ[]
> sage: legendre_P(2, t, r, s)
> 6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1
> ```
> 



I'm happy to change this if it can be done without breaking the existing doctests. I'll wait to see what you say about the first thing.



> * I don't see the need to use `bool` in doctests such as
> 
> ```
> bool(legendre_P(0, x, 0, 1) == p0)
> ```



Often, the `==` operator will return a symbolic equality rather than True/False. This is true even in this simple case:

```
sage: p0 = 1
sage: legendre_P(0, x, 0, 1) == p0
1 == 1
```

If you cast the symbolic equality to `bool`, you get,

* True, if Sage can convince itself that equality holds.
* False, if Sage can "prove" inequality.
* False, if it's not sure.

So it should be safe to test for `True`.



> * It's not clear to me why back-quotes are used in some of the error strings:
> 
> ```
>         raise TypeError('`n` must be a natural number')
> ```
>    but
> 
> ```
>         raise ValueError('n must be nonnegative')
> ```



I was just careless with that one, I'll fix it. I think backticks or single quotes are needed around 'a' and 'b', otherwise it reads weird. But 'n' at the beginning is fine without it.



---

archive/issue_events_176288.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-29T04:18:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176288"
}
```



---

archive/issue_events_176289.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-11-29T04:18:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176289"
}
```



---

archive/issue_comments_163586.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.\n\nI haven't heard back, so maybe you bought my reasoning for the affine transform =)\n\nThe `bool()` casts do have to stay, otherwise the tests just don't work.\n\nThanks for taking a look.",
    "created_at": "2012-11-29T04:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163586",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:4" align="right">Comment 4</div>

I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.

I haven't heard back, so maybe you bought my reasoning for the affine transform =)

The `bool()` casts do have to stay, otherwise the tests just don't work.

Thanks for taking a look.



---

archive/issue_comments_163587.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@orlitzky](#comment%3A4):\n> I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.\n\nWhy force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. \n\n> I haven't heard back, so maybe you bought my reasoning for the affine transform =)\n\nNo, just busy with other things.  There is an affine transform in what I wrote, but it's a transform of the interval [a, b] onto [0, 1] rather than [-1, 1].  This is simpler, and the Legendre polynomials on the interval [0, 1] have a simple form.\n\n>  I tried this, but it's producing the wrong results. For example,\n> \n> ```\n> sage: legendre_P(1, x)\n> -1/2*x - 5/2\n> ```\n\nThis is what results from using `^` rather than `**` in python.  I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error\n\n```\nsage: legendre_P(4, Zmod(5)(1), 3, 6)\n...\nArithmeticError: 0^0 is undefined.\n```\nis eliminated.  Apologies for mistyping this before.\n\n> The `bool()` casts do have to stay, otherwise the tests just don't work.\n\nAnother way of doing this is to introduce a polynomial variable.  Thus\n\n```\nsage: R.<x> = QQ[]\nsage: legendre_P(1, x) == x\nTrue\n```\nI know very little about the symbolic side of Sage, but I do find things like\n\n```\nsage: SR(1) == SR(1)\n1 == 1\n```\nvery strange, and confusing when compared with\n\n```\nsage: 1 == 1\nTrue\n```",
    "created_at": "2012-11-29T10:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163587",
    "user": "https://github.com/sagetrac-fwclarke"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@orlitzky](#comment%3A4):
> I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.

Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. 

> I haven't heard back, so maybe you bought my reasoning for the affine transform =)

No, just busy with other things.  There is an affine transform in what I wrote, but it's a transform of the interval [a, b] onto [0, 1] rather than [-1, 1].  This is simpler, and the Legendre polynomials on the interval [0, 1] have a simple form.

>  I tried this, but it's producing the wrong results. For example,
> 
> ```
> sage: legendre_P(1, x)
> -1/2*x - 5/2
> ```

This is what results from using `^` rather than `**` in python.  I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error

```
sage: legendre_P(4, Zmod(5)(1), 3, 6)
...
ArithmeticError: 0^0 is undefined.
```
is eliminated.  Apologies for mistyping this before.

> The `bool()` casts do have to stay, otherwise the tests just don't work.

Another way of doing this is to introduce a polynomial variable.  Thus

```
sage: R.<x> = QQ[]
sage: legendre_P(1, x) == x
True
```
I know very little about the symbolic side of Sage, but I do find things like

```
sage: SR(1) == SR(1)
1 == 1
```
very strange, and confusing when compared with

```
sage: 1 == 1
True
```



---

archive/issue_events_176290.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2012-11-29T10:30:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176290"
}
```



---

archive/issue_events_176291.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2012-11-29T10:30:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176291"
}
```



---

archive/issue_comments_163588.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@sagetrac-fwclarke](#comment%3A5):\n> Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. \n\n\n\nI removed the RR check, so you can actually pass in anything you want now. I'm not convinced this isn't a foot-gun, but it's still a clear improvement over what we have now so I'm happy with it.\n\n\n\n> This is what results from using `^` rather than `**` in python.\n\n\n\nAh, yes, I should have caught that, sorry.\n\n\n\n\n> I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error\n> \n> ```\n> sage: legendre_P(4, Zmod(5)(1), 3, 6)\n> ...\n> ArithmeticError: 0^0 is undefined.\n> ```\n> is eliminated.  Apologies for mistyping this before.\n> \n\n\nI believe this is another bug, elsewhere. I've set out to fix it and am trapped in a rabbit hole at the moment, about four bugs from here. Once that's sorted out, I'll do some experiments.\n\n\n\n\n> > The `bool()` casts do have to stay, otherwise the tests just don't work.\n\n> \n> Another way of doing this is to introduce a polynomial variable.  Thus\n> \n> ```\n> sage: R.<x> = QQ[]\n> sage: legendre_P(1, x) == x\n> True\n> ```\n> I know very little about the symbolic side of Sage, but I do find things like\n> \n> ```\n> sage: SR(1) == SR(1)\n> 1 == 1\n> ```\n> very strange, and confusing when compared with\n> \n> ```\n> sage: 1 == 1\n> True\n> ```\n\n\n\nYou'll get no argument from me there. I do prefer to test with the default symbol `x` though just because that's what most people will use.",
    "created_at": "2012-12-01T04:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163588",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@sagetrac-fwclarke](#comment%3A5):
> Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. 



I removed the RR check, so you can actually pass in anything you want now. I'm not convinced this isn't a foot-gun, but it's still a clear improvement over what we have now so I'm happy with it.



> This is what results from using `^` rather than `**` in python.



Ah, yes, I should have caught that, sorry.




> I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error
> 
> ```
> sage: legendre_P(4, Zmod(5)(1), 3, 6)
> ...
> ArithmeticError: 0^0 is undefined.
> ```
> is eliminated.  Apologies for mistyping this before.
> 


I believe this is another bug, elsewhere. I've set out to fix it and am trapped in a rabbit hole at the moment, about four bugs from here. Once that's sorted out, I'll do some experiments.




> > The `bool()` casts do have to stay, otherwise the tests just don't work.

> 
> Another way of doing this is to introduce a polynomial variable.  Thus
> 
> ```
> sage: R.<x> = QQ[]
> sage: legendre_P(1, x) == x
> True
> ```
> I know very little about the symbolic side of Sage, but I do find things like
> 
> ```
> sage: SR(1) == SR(1)
> 1 == 1
> ```
> very strange, and confusing when compared with
> 
> ```
> sage: 1 == 1
> True
> ```



You'll get no argument from me there. I do prefer to test with the default symbol `x` though just because that's what most people will use.



---

archive/issue_comments_163589.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.",
    "created_at": "2013-04-21T03:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163589",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">Comment 7</div>

I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.



---

archive/issue_events_176292.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-04-23T15:54:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176292"
}
```



---

archive/issue_events_176293.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-04-23T15:54:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176293"
}
```



---

archive/issue_comments_163590.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@kcrisman](#comment%3A7):\n> I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.\n\nThat's too big to ever get merged... I would break out the functions into individual tickets where possible.\n\nAnyway, I was waiting here on #13786 which fixes the `ArithmeticError: 0^0 is undefined` mentioned above. Unfortunately, both implementations now fail due to some other error on `legendre_P(4, Zmod(5)(1), 3, 6)`, but what can you do.\n\nNow the only difference between my implementation and the one in comment 2 is speed: mine is slightly faster unscaled, and that one is slightly faster on a nonstandard interval. But both deltas are negligible, and I have an aesthetic preference for the algorithm that's described in the reference.\n\nThis still passes all the tests and is a big improvement over what we have so I'm going to put it up for review again.",
    "created_at": "2013-04-23T15:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163590",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@kcrisman](#comment%3A7):
> I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.

That's too big to ever get merged... I would break out the functions into individual tickets where possible.

Anyway, I was waiting here on #13786 which fixes the `ArithmeticError: 0^0 is undefined` mentioned above. Unfortunately, both implementations now fail due to some other error on `legendre_P(4, Zmod(5)(1), 3, 6)`, but what can you do.

Now the only difference between my implementation and the one in comment 2 is speed: mine is slightly faster unscaled, and that one is slightly faster on a nonstandard interval. But both deltas are negligible, and I have an aesthetic preference for the algorithm that's described in the reference.

This still passes all the tests and is a big improvement over what we have so I'm going to put it up for review again.



---

archive/issue_comments_163591.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBrief questions:\n* When special-casing `n=0`, you have \n\n```\nreturn 1\n```\n  Will this be a Python int?\n* What if `n` is a Python int?\n\n```\nWe can accept Python integers for ``x`` as well::\n```\n* How's speed?  I can imagine the sum thing getting slow.\n* Am I misreading this?  Should it be beta = 1?\n\n```\n# From Abramowitz & Stegun, (22.3.2) with alpha = beta = 0. \n```\n  Oh, I see.  [It's actually (22.3.1)](http://people.math.sfu.ca/~cbm/aands/page_775.htm) and maybe this should be in the code with a reference section.",
    "created_at": "2013-06-18T21:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163591",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:9" align="right">Comment 9</div>

Brief questions:
* When special-casing `n=0`, you have 

```
return 1
```
  Will this be a Python int?
* What if `n` is a Python int?

```
We can accept Python integers for ``x`` as well::
```
* How's speed?  I can imagine the sum thing getting slow.
* Am I misreading this?  Should it be beta = 1?

```
# From Abramowitz & Stegun, (22.3.2) with alpha = beta = 0. 
```
  Oh, I see.  [It's actually (22.3.1)](http://people.math.sfu.ca/~cbm/aands/page_775.htm) and maybe this should be in the code with a reference section.



---

archive/issue_comments_163592.json:
```json
{
    "body": "Reviewer: **Francis Clarke, Karl-Dieter Crisman**",
    "created_at": "2013-06-18T21:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163592",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Francis Clarke, Karl-Dieter Crisman**



---

archive/issue_comments_163593.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nAttachment: **[sage-trac_13720.2.patch.gz](https://github.com/sagemath/sage/files/ticket13720/sage-trac_13720.2.patch.gz)**\n\nWhen n=0, I try to return unity from the same ring as the variable:\n\n```\nif n == 0:\n    # Easy base case, save time. Attempt to return a value in the\n    # same field/ring as x.\n    try:\n        return x.parent()(1)\n    except AttributeError:\n        # In case something without a parent was given for x.\n        return 1\n```\n\nThe exceptional case is just there as a failsafe, and it would probably give a python int. I guess ZZ(1) is better, so I've changed it.\n\nIf `n` is a python int, we're happy. Early in the function we check that `n` can be coerced into `ZZ`. Then later,\n\n```\n# Ensure that (2**n) is an element of ZZ. This is used later --\n# we can divide finite field elements by integers but we can't\n# multiply them by rationals at the moment.\nn = ZZ(n)\n```\n\n\nFor speed, the current implementation has,\n\n```\nsage: timeit('legendre_P(100,x)')\n5 loops, best of 3: 57.1 ms per loop\n```\n\nThe posted patch has,\n\n```\nsage: timeit('legendre_P(100,x)')\n5 loops, best of 3: 47.3 ms per loop\n```\n\nSo, even for the unscaled version it's an improvement. There's a slowdown for the scaled version, of course:\n\n```\nsage: timeit('legendre_P(100,x,-5,10)')\n5 loops, best of 3: 70.4 ms per loop\n```\n\nBut it's still very fast.\n\nYou're right about the reference, I must have typo'd it. It's fixed, and I've added a REFERENCES section to the docs.\n\nThe new patch is up, I forgot to check the box, so use the one with the \"2\" at the end.",
    "created_at": "2013-06-19T01:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163593",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">Comment 11</div>

Attachment: **[sage-trac_13720.2.patch.gz](https://github.com/sagemath/sage/files/ticket13720/sage-trac_13720.2.patch.gz)**

When n=0, I try to return unity from the same ring as the variable:

```
if n == 0:
    # Easy base case, save time. Attempt to return a value in the
    # same field/ring as x.
    try:
        return x.parent()(1)
    except AttributeError:
        # In case something without a parent was given for x.
        return 1
```

The exceptional case is just there as a failsafe, and it would probably give a python int. I guess ZZ(1) is better, so I've changed it.

If `n` is a python int, we're happy. Early in the function we check that `n` can be coerced into `ZZ`. Then later,

```
# Ensure that (2**n) is an element of ZZ. This is used later --
# we can divide finite field elements by integers but we can't
# multiply them by rationals at the moment.
n = ZZ(n)
```


For speed, the current implementation has,

```
sage: timeit('legendre_P(100,x)')
5 loops, best of 3: 57.1 ms per loop
```

The posted patch has,

```
sage: timeit('legendre_P(100,x)')
5 loops, best of 3: 47.3 ms per loop
```

So, even for the unscaled version it's an improvement. There's a slowdown for the scaled version, of course:

```
sage: timeit('legendre_P(100,x,-5,10)')
5 loops, best of 3: 70.4 ms per loop
```

But it's still very fast.

You're right about the reference, I must have typo'd it. It's fixed, and I've added a REFERENCES section to the docs.

The new patch is up, I forgot to check the box, so use the one with the "2" at the end.



---

archive/issue_events_176294.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-20T00:05:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176294"
}
```



---

archive/issue_events_176295.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-20T00:05:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176295"
}
```



---

archive/issue_comments_163594.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nThanks.  I'm glad I asked, because before\n\n```\nsage: legendre_P(0,float(1))\n1\nsage: type(_)\n<type 'int'>\n```\nbut now\n\n```\nsage: legendre_P(0,float(1))\n1\nsage: type(_)\n<type 'sage.rings.integer.Integer'>\n```\n\nWork:\n* So to my surprise, plotting these things works great.  It would be nice to add one or two examples.\n* I wouldn't ask for this on this ticket, but it probably should have one or two examples of the errors actually catching silly input.  I find it worthwhile to test those branches.\nIs that okay?  Otherwise I think this is nice.",
    "created_at": "2013-06-20T00:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163594",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">Comment 12</div>

Thanks.  I'm glad I asked, because before

```
sage: legendre_P(0,float(1))
1
sage: type(_)
<type 'int'>
```
but now

```
sage: legendre_P(0,float(1))
1
sage: type(_)
<type 'sage.rings.integer.Integer'>
```

Work:
* So to my surprise, plotting these things works great.  It would be nice to add one or two examples.
* I wouldn't ask for this on this ticket, but it probably should have one or two examples of the errors actually catching silly input.  I find it worthwhile to test those branches.
Is that okay?  Otherwise I think this is nice.



---

archive/issue_comments_163595.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nOh, I should ask the dumb question of whether this scaling is standard in terminology, or whether we need any other disclaimers.",
    "created_at": "2013-06-20T00:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163595",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">Comment 13</div>

Oh, I should ask the dumb question of whether this scaling is standard in terminology, or whether we need any other disclaimers.



---

archive/issue_comments_163596.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nOk, I added a plotting example, and three tests for nonsense input. They're at the end of their respective sections.\n\nWhat might not be standard terminology? \"Scaling\"? In any case I don't think I'm qualified to say, but it made sense to me at the time.",
    "created_at": "2013-06-24T01:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163596",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:14" align="right">Comment 14</div>

Ok, I added a plotting example, and three tests for nonsense input. They're at the end of their respective sections.

What might not be standard terminology? "Scaling"? In any case I don't think I'm qualified to say, but it made sense to me at the time.



---

archive/issue_comments_163597.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n \n When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].\n \n+apply: sage-trac_13720.patch\n+\n``````\n",
    "created_at": "2013-06-24T01:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163597",
    "user": "https://github.com/orlitzky"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 
 When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].
 
+apply: sage-trac_13720.patch
+
``````




---

archive/issue_events_176296.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-06-24T01:53:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176296"
}
```



---

archive/issue_events_176297.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-06-24T01:53:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176297"
}
```



---

archive/issue_comments_163598.json:
```json
{
    "body": "Use tmp_filename() instead of SAGE_TMP",
    "created_at": "2013-06-24T01:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163598",
    "user": "https://github.com/orlitzky"
}
```

Use tmp_filename() instead of SAGE_TMP



---

archive/issue_comments_163599.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nAttachment: **[sage-trac_13720.patch.gz](https://github.com/sagemath/sage/files/ticket13720/sage-trac_13720.patch.gz)**\n\nQuick update to use tmp_filename() per Jeroen's comment on #12852.",
    "created_at": "2013-06-24T02:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163599",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:15" align="right">Comment 15</div>

Attachment: **[sage-trac_13720.patch.gz](https://github.com/sagemath/sage/files/ticket13720/sage-trac_13720.patch.gz)**

Quick update to use tmp_filename() per Jeroen's comment on #12852.



---

archive/issue_events_176298.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176298"
}
```



---

archive/issue_events_176299.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176299"
}
```



---

archive/issue_comments_163600.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\napply only sage-trac_13720.patch",
    "created_at": "2013-08-21T08:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163600",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">Comment 17</div>

apply only sage-trac_13720.patch



---

archive/issue_events_176300.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2013-11-01T10:07:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176300"
}
```



---

archive/issue_events_176301.json:
```json
{
    "actor": "https://github.com/sagetrac-fwclarke",
    "created_at": "2013-11-01T10:07:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176301"
}
```



---

archive/issue_comments_163601.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nAttachment: **[trac_13720_review.patch.gz](https://github.com/sagemath/sage/files/ticket13720/trac_13720_review.patch.gz)**\n\nI really don't understand why `a` and `b` get converted into symbolic expressions. \u00a0This has some very strange consequences, e.g.,\n\n```\nsage: legendre_P(3, 7, -1/2, 1/2).parent()\nSymbolic Ring\n```\nIt is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts. \u00a0It is thus wrong to force (almost) everything into the Symbolic Ring.\n\nBut anyway, I'm afraid I still prefer my version of the code: (1) for its simplicity (having 3 local functions, two of them only used once, seems far too over-elaborate); (2) my code is significantly faster.\n\nIf you don't like that then something like\n\n```\n\u00a0 \u00a0 if a == -1 and b == 1:\n\u00a0 \u00a0 \u00a0 \u00a0 _init()\n\u00a0 \u00a0 \u00a0 \u00a0 return sage_eval(maxima.eval('legendre_p(%s,x)'%ZZ(n)), locals={'x':x})\n\u00a0 \u00a0 else:\n\u00a0 \u00a0 \u00a0 \u00a0 return legendre_P(n, (2*x - a - b)/(b - a), -1, 1)\n```\nwould be a very simple change to the existing code which avoids 'reinventing the wheel'. \u00a0This would also have the advantage that an almost identical change would provide scaled versions for the the Legendre functions `legendre_Q` of the second kind. \u00a0However the maxima code is very slow.\n\nIncidentally, in all cases there needs to be a check to see if `a == b`.",
    "created_at": "2013-11-01T10:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163601",
    "user": "https://github.com/sagetrac-fwclarke"
}
```

<div id="comment:18" align="right">Comment 18</div>

Attachment: **[trac_13720_review.patch.gz](https://github.com/sagemath/sage/files/ticket13720/trac_13720_review.patch.gz)**

I really don't understand why `a` and `b` get converted into symbolic expressions.  This has some very strange consequences, e.g.,

```
sage: legendre_P(3, 7, -1/2, 1/2).parent()
Symbolic Ring
```
It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts.  It is thus wrong to force (almost) everything into the Symbolic Ring.

But anyway, I'm afraid I still prefer my version of the code: (1) for its simplicity (having 3 local functions, two of them only used once, seems far too over-elaborate); (2) my code is significantly faster.

If you don't like that then something like

```
    if a == -1 and b == 1:
        _init()
        return sage_eval(maxima.eval('legendre_p(%s,x)'%ZZ(n)), locals={'x':x})
    else:
        return legendre_P(n, (2*x - a - b)/(b - a), -1, 1)
```
would be a very simple change to the existing code which avoids 'reinventing the wheel'.  This would also have the advantage that an almost identical change would provide scaled versions for the the Legendre functions `legendre_Q` of the second kind.  However the maxima code is very slow.

Incidentally, in all cases there needs to be a check to see if `a == b`.



---

archive/issue_comments_163602.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@sagetrac-fwclarke](#comment%3A18):\n> I really don't understand why `a` and `b` get converted into symbolic expressions. \u00a0This has some very strange consequences, e.g.,\n> \n> ```\n> sage: legendre_P(3, 7, -1/2, 1/2).parent()\n> Symbolic Ring\n> ```\n> It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts. \u00a0It is thus wrong to force (almost) everything into the Symbolic Ring.\n\nI had a comment in the code about this, but I've forgotten the details. In any case -- whatever the issue was -- it seems to be fixed. I removed the manual coercions of n,a,b and all of the tests still pass.\n\nSo this is fixed:\n\n```\nsage: legendre_P(3, 7, -1/2, 1/2).parent()\nRational Field\n```\n\n\n> Incidentally, in all cases there needs to be a check to see if `a == b`. \u00a0\n\nThis will throw a divide-by-zero. What's the alternative?",
    "created_at": "2013-12-11T17:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163602",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@sagetrac-fwclarke](#comment%3A18):
> I really don't understand why `a` and `b` get converted into symbolic expressions.  This has some very strange consequences, e.g.,
> 
> ```
> sage: legendre_P(3, 7, -1/2, 1/2).parent()
> Symbolic Ring
> ```
> It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts.  It is thus wrong to force (almost) everything into the Symbolic Ring.

I had a comment in the code about this, but I've forgotten the details. In any case -- whatever the issue was -- it seems to be fixed. I removed the manual coercions of n,a,b and all of the tests still pass.

So this is fixed:

```
sage: legendre_P(3, 7, -1/2, 1/2).parent()
Rational Field
```


> Incidentally, in all cases there needs to be a check to see if `a == b`.  

This will throw a divide-by-zero. What's the alternative?



---

archive/issue_comments_163603.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\n> This will throw a divide-by-zero. What's the alternative? \n\nNevermind, stupid question =)",
    "created_at": "2013-12-11T17:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163603",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:20" align="right">Comment 20</div>

> This will throw a divide-by-zero. What's the alternative? 

Nevermind, stupid question =)



---

archive/issue_events_176302.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-12-11T17:34:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176302"
}
```



---

archive/issue_events_176303.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2013-12-11T17:34:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176303"
}
```



---

archive/issue_comments_163604.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/13720)**",
    "created_at": "2013-12-11T17:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163604",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/13720)**



---

archive/issue_comments_163605.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThis should address the `a==b` issue and avoid the coercions.\n\n---\nNew commits:\n<table><tr><td>[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a457)</td><td><code>Trac #13720: Allow scaling of legendre_P to an arbitrary interval [a,b].</code></td></tr></table>\n",
    "created_at": "2013-12-11T17:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163605",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:21" align="right">Comment 21</div>

This should address the `a==b` issue and avoid the coercions.

---
New commits:
<table><tr><td>[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a457)</td><td><code>Trac #13720: Allow scaling of legendre_P to an arbitrary interval [a,b].</code></td></tr></table>




---

archive/issue_comments_163606.json:
```json
{
    "body": "Commit: **[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a4578af9efdef9356d318d698daed1ef27e9b)**",
    "created_at": "2013-12-11T17:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163606",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a4578af9efdef9356d318d698daed1ef27e9b)**



---

archive/issue_comments_163607.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,4 @@\n \n When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].\n \n-apply: sage-trac_13720.patch\n \n``````\n",
    "created_at": "2013-12-11T17:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163607",
    "user": "https://github.com/orlitzky"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,4 @@
 
 When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].
 
-apply: sage-trac_13720.patch
 
``````




---

archive/issue_comments_163608.json:
```json
{
    "body": "Changed author from **Michael Orlitzky** to **Michael Orlitzky, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2013-12-11T17:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163608",
    "user": "https://github.com/orlitzky"
}
```

Changed author from **Michael Orlitzky** to **Michael Orlitzky, Frédéric Chapoton**



---

archive/issue_comments_163609.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nAdding an author, as I merged the reviewer patch.",
    "created_at": "2013-12-11T17:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163609",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:22" align="right">Comment 22</div>

Adding an author, as I merged the reviewer patch.



---

archive/issue_events_176304.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176304"
}
```



---

archive/issue_events_176305.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176305"
}
```



---

archive/issue_events_176306.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-04-09T20:59:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176306"
}
```



---

archive/issue_events_176307.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-04-09T20:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176307"
}
```



---

archive/issue_comments_163610.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nThis needs to be rebased.",
    "created_at": "2014-04-09T20:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163610",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">Comment 24</div>

This needs to be rebased.



---

archive/issue_comments_163611.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3\">36b4c29</a></td><td><code>Trac #13720: Allow scaling of legendre_P to an arbitrary interval [a,b].</code></td></tr></table>\n",
    "created_at": "2014-04-23T04:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3">36b4c29</a></td><td><code>Trac #13720: Allow scaling of legendre_P to an arbitrary interval [a,b].</code></td></tr></table>




---

archive/issue_comments_163612.json:
```json
{
    "body": "Changed commit from **[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a4578af9efdef9356d318d698daed1ef27e9b)** to **[36b4c29](https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3)**",
    "created_at": "2014-04-23T04:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ce0a457](https://github.com/sagemath/sagetrac-mirror/commit/ce0a4578af9efdef9356d318d698daed1ef27e9b)** to **[36b4c29](https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3)**



---

archive/issue_comments_163613.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI had to change the `_init()` doctest to use the laguerre polynomials instead, since the implementation of `legendre_P()` no longer uses maxima.",
    "created_at": "2014-04-23T04:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163613",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:26" align="right">Comment 26</div>

I had to change the `_init()` doctest to use the laguerre polynomials instead, since the implementation of `legendre_P()` no longer uses maxima.



---

archive/issue_events_176308.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2014-04-23T04:53:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176308"
}
```



---

archive/issue_events_176309.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2014-04-23T04:53:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176309"
}
```



---

archive/issue_comments_163614.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI'm not sure if they're related, but the Maxima\n\n```\nassoc_legendre_p[v,u] (z)      Legendre function of degree v and order u \nassoc_legendre_q[v,u] (z)      Legendre function, 2nd kind\n```\nfrom [the symbolic wiki on Trac](http://trac.sagemath.org/wiki/symbolics/functions) could be relevant here.  If so, we should have conversions - if not, sorry for the noise.",
    "created_at": "2014-04-23T14:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163614",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">Comment 27</div>

I'm not sure if they're related, but the Maxima

```
assoc_legendre_p[v,u] (z)      Legendre function of degree v and order u 
assoc_legendre_q[v,u] (z)      Legendre function, 2nd kind
```
from [the symbolic wiki on Trac](http://trac.sagemath.org/wiki/symbolics/functions) could be relevant here.  If so, we should have conversions - if not, sorry for the noise.



---

archive/issue_comments_163615.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@kcrisman](#comment%3A27):\n> I'm not sure if they're related, ...\n\nThose two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.\n\nI updated the note on the wiki page.",
    "created_at": "2014-04-23T14:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163615",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@kcrisman](#comment%3A27):
> I'm not sure if they're related, ...

Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.

I updated the note on the wiki page.



---

archive/issue_comments_163616.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\n> > I'm not sure if they're related, ...\n\n> \n> Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.\n> \n> I updated the note on the wiki page.\n\nThanks, and I updated based on that update, very helpful.",
    "created_at": "2014-04-23T15:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163616",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:29" align="right">Comment 29</div>

> > I'm not sure if they're related, ...

> 
> Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.
> 
> I updated the note on the wiki page.

Thanks, and I updated based on that update, very helpful.



---

archive/issue_events_176310.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176310"
}
```



---

archive/issue_events_176311.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176311"
}
```



---

archive/issue_comments_163617.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\npatchbot:\n\n```\nsage -t --long src/sage/functions/orthogonal_polys.py  # 33 doctests failed\n```",
    "created_at": "2014-05-09T09:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163617",
    "user": "https://github.com/rwst"
}
```

<div id="comment:31" align="right">Comment 31</div>

patchbot:

```
sage -t --long src/sage/functions/orthogonal_polys.py  # 33 doctests failed
```



---

archive/issue_events_176312.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T09:01:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176312"
}
```



---

archive/issue_events_176313.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-05-09T09:01:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176313"
}
```



---

archive/issue_comments_163618.json:
```json
{
    "body": "Changed commit from **[36b4c29](https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3)** to **[1de3cf4](https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4)**",
    "created_at": "2014-05-09T20:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163618",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[36b4c29](https://github.com/sagemath/sagetrac-mirror/commit/36b4c29920bc4cfbc09b8b7a1fd9de757f8179d3)** to **[1de3cf4](https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4)**



---

archive/issue_events_176314.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-09T20:00:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176314"
}
```



---

archive/issue_events_176315.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-05-09T20:00:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176315"
}
```



---

archive/issue_comments_163619.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nI have corrected the problem (and also make a little cleanup). Back to needs review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09ed77c084435f1e73e0b6bafcc33c265b2479ab\">09ed77c</a></td><td><code>Merge branch 'u/mjo/ticket/13720' of ssh://trac.sagemath.org:22/sage into 13720</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4\">1de3cf4</a></td><td><code>trac #13720 pep8 and pyflakes cleanup</code></td></tr></table>\n",
    "created_at": "2014-05-09T20:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163619",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:32" align="right">Comment 32</div>

I have corrected the problem (and also make a little cleanup). Back to needs review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09ed77c084435f1e73e0b6bafcc33c265b2479ab">09ed77c</a></td><td><code>Merge branch 'u/mjo/ticket/13720' of ssh://trac.sagemath.org:22/sage into 13720</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4">1de3cf4</a></td><td><code>trac #13720 pep8 and pyflakes cleanup</code></td></tr></table>




---

archive/issue_comments_163620.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**",
    "created_at": "2014-05-09T20:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163620",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/mjo/ticket/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**



---

archive/issue_events_176316.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176316"
}
```



---

archive/issue_events_176317.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176317"
}
```



---

archive/issue_comments_163621.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba\">0843342</a></td><td><code>Merge branch 'u/chapoton/13720' into 6.5.b2</code></td></tr></table>\n",
    "created_at": "2014-12-09T21:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163621",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34" align="right">Comment 34</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba">0843342</a></td><td><code>Merge branch 'u/chapoton/13720' into 6.5.b2</code></td></tr></table>




---

archive/issue_comments_163622.json:
```json
{
    "body": "Changed commit from **[1de3cf4](https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4)** to **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)**",
    "created_at": "2014-12-09T21:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163622",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1de3cf4](https://github.com/sagemath/sagetrac-mirror/commit/1de3cf47ac8d5d696d2ccf8f1e46281eba4564b4)** to **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)**



---

archive/issue_comments_163623.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThanks for cleaning that up, I had forgotten about it.",
    "created_at": "2014-12-09T22:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163623",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:35" align="right">Comment 35</div>

Thanks for cleaning that up, I had forgotten about it.



---

archive/issue_comments_163624.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nConflicts with #16813. We might want to merge efforts.",
    "created_at": "2015-03-11T17:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163624",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">Comment 36</div>

Conflicts with #16813. We might want to merge efforts.



---

archive/issue_events_176318.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-17T12:06:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176318"
}
```



---

archive/issue_events_176319.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-17T12:06:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176319"
}
```



---

archive/issue_comments_163625.json:
```json
{
    "body": "Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)**",
    "created_at": "2015-10-11T19:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163625",
    "user": "https://github.com/kevindilks"
}
```

Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)**



---

archive/issue_comments_163626.json:
```json
{
    "body": "Changed branch from **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**",
    "created_at": "2015-10-11T19:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163626",
    "user": "https://github.com/kevindilks"
}
```

Changed branch from **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**



---

archive/issue_events_176320.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2015-10-11T19:36:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176320"
}
```



---

archive/issue_events_176321.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2015-10-11T19:36:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176321"
}
```



---

archive/issue_comments_163627.json:
```json
{
    "body": "Changed commit from **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)** to **[8d1354c](https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f)**",
    "created_at": "2015-10-11T20:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163627",
    "user": "https://github.com/kevindilks"
}
```

Changed commit from **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)** to **[8d1354c](https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f)**



---

archive/issue_comments_163628.json:
```json
{
    "body": "Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)**",
    "created_at": "2015-10-11T20:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163628",
    "user": "https://github.com/kevindilks"
}
```

Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)**



---

archive/issue_comments_163629.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f\">8d1354c</a></td><td><code>fixed merge conflict</code></td></tr></table>\n",
    "created_at": "2015-10-11T20:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163629",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:40" align="right">Comment 40</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f">8d1354c</a></td><td><code>fixed merge conflict</code></td></tr></table>




---

archive/issue_events_176322.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-12T05:52:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176322"
}
```



---

archive/issue_events_176323.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-12T05:52:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176323"
}
```



---

archive/issue_comments_163630.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nYou introduced merge conflict markers in your branch. Better always eyeball your diff before committing.",
    "created_at": "2015-10-12T05:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163630",
    "user": "https://github.com/rwst"
}
```

<div id="comment:41" align="right">Comment 41</div>

You introduced merge conflict markers in your branch. Better always eyeball your diff before committing.



---

archive/issue_comments_163631.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nYeesh, yeah, thought it was just the one thing, but a lot more needs to be cleaned up. I'll take care of that tomorrow.",
    "created_at": "2015-10-12T06:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163631",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:42" align="right">Comment 42</div>

Yeesh, yeah, thought it was just the one thing, but a lot more needs to be cleaned up. I'll take care of that tomorrow.



---

archive/issue_comments_163632.json:
```json
{
    "body": "Changed commit from **[8d1354c](https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f)** to **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)**",
    "created_at": "2015-10-12T15:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163632",
    "user": "https://github.com/kevindilks"
}
```

Changed commit from **[8d1354c](https://github.com/sagemath/sagetrac-mirror/commit/8d1354cf63bcca9b01733e4f57aaa16556e3ba0f)** to **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)**



---

archive/issue_comments_163633.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nI'll just change it back and let Fr\u00e9d\u00e9ric deal with rebasing.",
    "created_at": "2015-10-12T15:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163633",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:43" align="right">Comment 43</div>

I'll just change it back and let Frédéric deal with rebasing.



---

archive/issue_comments_163634.json:
```json
{
    "body": "Changed branch from **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**",
    "created_at": "2015-10-12T15:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163634",
    "user": "https://github.com/kevindilks"
}
```

Changed branch from **[u/kdilks/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/kdilks/13720)** to **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)**



---

archive/issue_events_176324.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:42:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176324"
}
```



---

archive/issue_events_176325.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176325"
}
```



---

archive/issue_events_176326.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176326"
}
```



---

archive/issue_comments_163635.json:
```json
{
    "body": "Changed author from **Michael Orlitzky, Fr\u00e9d\u00e9ric Chapoton** to none",
    "created_at": "2021-02-23T02:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163635",
    "user": "https://github.com/orlitzky"
}
```

Changed author from **Michael Orlitzky, Frédéric Chapoton** to none



---

archive/issue_comments_163636.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nLet's just kill this. I'm not going to rewrite the whole function from scratch, as would be necessary at this point.",
    "created_at": "2021-02-23T02:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163636",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:44" align="right">Comment 44</div>

Let's just kill this. I'm not going to rewrite the whole function from scratch, as would be necessary at this point.



---

archive/issue_events_176327.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176327"
}
```



---

archive/issue_events_176328.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176328"
}
```



---

archive/issue_comments_163637.json:
```json
{
    "body": "Changed reviewer from **Francis Clarke, Karl-Dieter Crisman** to **Michael Orlitzky**",
    "created_at": "2021-02-23T02:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163637",
    "user": "https://github.com/orlitzky"
}
```

Changed reviewer from **Francis Clarke, Karl-Dieter Crisman** to **Michael Orlitzky**



---

archive/issue_comments_163638.json:
```json
{
    "body": "Changed commit from **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)** to none",
    "created_at": "2021-02-23T03:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163638",
    "user": "https://github.com/kcrisman"
}
```

Changed commit from **[0843342](https://github.com/sagemath/sagetrac-mirror/commit/0843342b41d1ce501cab9b84c89e2ef1d84e5dba)** to none



---

archive/issue_comments_163639.json:
```json
{
    "body": "Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to none",
    "created_at": "2021-02-23T03:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163639",
    "user": "https://github.com/kcrisman"
}
```

Changed branch from **[u/chapoton/13720](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/13720)** to none



---

archive/issue_events_176329.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-02-23T03:34:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176329"
}
```



---

archive/issue_events_176330.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-02-23T03:34:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13720#event-176330"
}
```



---

archive/issue_comments_163640.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nCan't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.",
    "created_at": "2021-02-23T03:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163640",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:45" align="right">Comment 45</div>

Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.



---

archive/issue_comments_163641.json:
```json
{
    "body": "Changed reviewer from **Michael Orlitzky** to none",
    "created_at": "2021-02-23T03:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163641",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Michael Orlitzky** to none



---

archive/issue_comments_163642.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@kcrisman](#comment%3A45):\n> Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.\n\nIt would be tricky since `legendre_P` is now implemented as a `BuiltinFunction`. You would need a different symbolic function for each interval `[a,b]` because, for example, its symbolic derivative changes when the interval does. But it's probably doable somehow.\n\nI was the original reporter and also the author. If I remember correctly, I needed it to simplify  some finite element example problem, and these days I have no need for it. But naturally I wouldn't object to someone else making an attempt.",
    "created_at": "2021-02-23T03:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13720#issuecomment-163642",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@kcrisman](#comment%3A45):
> Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.

It would be tricky since `legendre_P` is now implemented as a `BuiltinFunction`. You would need a different symbolic function for each interval `[a,b]` because, for example, its symbolic derivative changes when the interval does. But it's probably doable somehow.

I was the original reporter and also the author. If I remember correctly, I needed it to simplify  some finite element example problem, and these days I have no need for it. But naturally I wouldn't object to someone else making an attempt.
