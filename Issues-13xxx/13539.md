# Issue 13539: Add inverse_of_unit() for padics

archive/issues_013335.json:
```json
{
    "body": "Assignee: @roed314\n\nCurrently, the padics lack an `inverse_of_unit()` method:\n\n```\nsage: (-1).inverse_of_unit()\n-1\nsage: ZpCA(3)(-1).inverse_of_unit()\nAttributeError\n```\n\nThe drawback with simply using `~` is that it puts the result in the fraction field and it can be annoying to always convert it back to the original ring when implementing general algorithms for all padics rings and fields:\n\n```\nsage: t = ZpCA(3,2)(-1)\nsage: t\n2 + 2*3 + O(3^2)\nsage: t.parent()\n3-adic Ring with capped absolute precision 2\nsage: ~t\n2 + 2*3 + O(3^2)\nsage: (~t).parent()\n3-adic Field with capped relative precision 2\n```\n\nThe attached patch implements a method `inverse_of_unit()` and fixes a conversion error that came up when testing it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13539\n\n",
    "closed_at": "2013-02-28T10:31:24Z",
    "created_at": "2012-09-26T17:09:26Z",
    "labels": [
        "component: padics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.8",
    "title": "Add inverse_of_unit() for padics",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13539",
    "user": "https://github.com/saraedum"
}
```
Assignee: @roed314

Currently, the padics lack an `inverse_of_unit()` method:

```
sage: (-1).inverse_of_unit()
-1
sage: ZpCA(3)(-1).inverse_of_unit()
AttributeError
```

The drawback with simply using `~` is that it puts the result in the fraction field and it can be annoying to always convert it back to the original ring when implementing general algorithms for all padics rings and fields:

```
sage: t = ZpCA(3,2)(-1)
sage: t
2 + 2*3 + O(3^2)
sage: t.parent()
3-adic Ring with capped absolute precision 2
sage: ~t
2 + 2*3 + O(3^2)
sage: (~t).parent()
3-adic Field with capped relative precision 2
```

The attached patch implements a method `inverse_of_unit()` and fixes a conversion error that came up when testing it.

Issue created by migration from https://trac.sagemath.org/ticket/13539





---

archive/issue_comments_163581.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-11T20:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163581",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_163582.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-11T22:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163582",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_163583.json:
```json
{
    "body": "I'm happy with the changes to `LocalGenericElement`.  There are changes to `pAdicZZpXCAElement` though that I think make the code less readable (and actually change the functionality a bit).  Were those intended?",
    "created_at": "2012-10-11T22:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163583",
    "user": "https://github.com/roed314"
}
```

I'm happy with the changes to `LocalGenericElement`.  There are changes to `pAdicZZpXCAElement` though that I think make the code less readable (and actually change the functionality a bit).  Were those intended?



---

archive/issue_comments_163584.json:
```json
{
    "body": "You're right. I didn't understand these changes myself anymore now. I tried to put them into a separate ticket and turned them into something that is hopefully more readable #13600.",
    "created_at": "2012-10-15T00:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163584",
    "user": "https://github.com/saraedum"
}
```

You're right. I didn't understand these changes myself anymore now. I tried to put them into a separate ticket and turned them into something that is hopefully more readable #13600.



---

archive/issue_comments_163585.json:
```json
{
    "body": "Cool.  Once you update the patch here and it passes doctests I can give it a positive review",
    "created_at": "2012-10-15T07:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163585",
    "user": "https://github.com/roed314"
}
```

Cool.  Once you update the patch here and it passes doctests I can give it a positive review



---

archive/issue_comments_163586.json:
```json
{
    "body": "I removed the pieces that are now in #13600. I also added a copyright notice since it was missing (I took the years from the repo history).",
    "created_at": "2012-10-15T17:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163586",
    "user": "https://github.com/saraedum"
}
```

I removed the pieces that are now in #13600. I also added a copyright notice since it was missing (I took the years from the repo history).



---

archive/issue_comments_163587.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-15T17:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163587",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_163588.json:
```json
{
    "body": "Your apply failed against 5.4.rc1 according to patchbot.  I'm a bit confused though, since I'm succeeding....  If you don't know what's going on I'll take a look later.",
    "created_at": "2012-10-15T19:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163588",
    "user": "https://github.com/roed314"
}
```

Your apply failed against 5.4.rc1 according to patchbot.  I'm a bit confused though, since I'm succeeding....  If you don't know what's going on I'll take a look later.



---

archive/issue_comments_163589.json:
```json
{
    "body": "Attachment [trac_13539.patch](tarball://root/attachments/some-uuid/ticket13539/trac_13539.patch) by @saraedum created at 2012-10-22 12:48:43",
    "created_at": "2012-10-22T12:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163589",
    "user": "https://github.com/saraedum"
}
```

Attachment [trac_13539.patch](tarball://root/attachments/some-uuid/ticket13539/trac_13539.patch) by @saraedum created at 2012-10-22 12:48:43



---

archive/issue_comments_163590.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-24T04:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163590",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_163591.json:
```json
{
    "body": "Okay, patchbot is succeeding now, so I'll give this a positive review.",
    "created_at": "2012-10-24T04:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163591",
    "user": "https://github.com/roed314"
}
```

Okay, patchbot is succeeding now, so I'll give this a positive review.



---

archive/issue_events_037595.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-10-24T06:45:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13539#event-37595"
}
```



---

archive/issue_events_037596.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:36:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13539#event-37596"
}
```



---

archive/issue_events_037597.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-19T10:36:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "milestone": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13539#event-37597"
}
```



---

archive/issue_comments_163592.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-28T10:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13539#issuecomment-163592",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_037598.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-28T10:31:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13539",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13539#event-37598"
}
```
