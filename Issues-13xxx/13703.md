# Issue 13703: special matrices

archive/issues_013499.json:
```json
{
    "assignees": [],
    "body": "It would be great to have a matrices namespace to put special matrix commands, sort of like the:\n\n- graphs.* namespace \n- groups.* namespace\n- polytopes.* namespace\n\nHere are some starter definitions:\n\n```\ndef hilbert(R,n): return matrix(R, n, lambda i,j: 1/(i+j+1))\ndef vandermonde(R, v): return matrix(R, len(v), lambda i,j: v[i]^j)\ndef toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])\ndef hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])\ndef circulant(R, E): return toeplitz(R, E[0:1]+E[-1:0:-1], E)\ndef skew_circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])\n\n#Hadamard matrices:\ndef legendre_symbol(x):\n    \"\"\"Extend the built in legendre_symbol function to handle prime power fields.  Assume x is an element of a finite field as well\"\"\"\n    if x==0: \n        return 0\n    elif x.is_square(): \n        return 1\n    else: \n        return -1\n\ndef jacobsthal(p,n):\n    \"\"\"See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices\"\"\"\n     if n == 1:\n        elts = GF(p).list()\n    else:\n        elts = GF(p^n,'a').list()\n    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j]))\ndef paley_matrix(p,n):\n    \"\"\"See http://en.wikipedia.org/wiki/Paley_construction\"\"\"\n    mod = p^n%4\n    if mod == 3:\n        # Paley Type 1 construction\n        ones = vector([1]*p^n)\n        QplusI = jacobsthal(p,n)\n        # Q+=I efficiently\n        for i in range(p^n):\n            QplusI[i,i]=-1\n        return block_matrix(2,[\n        [1,ones.row()],\n        [ones.column(), QplusI]])\n    elif mod == 1:\n        # Paley Type 2 construction\n        ones = vector([1]*p^n)\n        QplusI = jacobsthal(p,n)\n        QminusI = copy(QplusI)\n        for i in range(p^n):\n            QplusI[i,i]=1\n            QminusI[i,i]=-1\n        SplusI = block_matrix(2,[[1,ones.row()],[ones.column(), QplusI]])\n        SminusI = block_matrix(2,[[-1,ones.row()], [ones.column(), QminusI]])\n        return block_matrix(2,[[SplusI,SminusI],[SminusI,-SplusI]])        \n    else:\n        raise ValueError(\"p^n must be congruent to 1 or 3 mod 4\")\n\n}}\n\nThe matrixform patch below first implements a decorator to take care of an optional first argument of the ring, as well as an optional keyword argument of 'sparse'.  Then it implements most of these using that decorator, so the boilerplate code is abstracted away.\n\nAdditionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices\n\n(thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )\n\nAssignee: **@jasongrout, @williamstein**\n\nCC:  @rbeezer @kcrisman @mforets\n\nBranch/Commit: **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**\n\nReviewer: **Dima Pasechnik, Marcelo Forets**\n\nAuthor: **Jason Grout, Marcelo Forets**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13703_\n\n",
    "closed_at": "2017-05-27T23:42:20Z",
    "created_at": "2012-11-12T20:38:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "special matrices",
    "type": "issue",
    "updated_at": "2017-05-27T23:42:20Z",
    "url": "https://github.com/sagemath/sage/issues/13703",
    "user": "https://github.com/jasongrout"
}
```
It would be great to have a matrices namespace to put special matrix commands, sort of like the:

- graphs.* namespace 
- groups.* namespace
- polytopes.* namespace

Here are some starter definitions:

```
def hilbert(R,n): return matrix(R, n, lambda i,j: 1/(i+j+1))
def vandermonde(R, v): return matrix(R, len(v), lambda i,j: v[i]^j)
def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])
def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])
def circulant(R, E): return toeplitz(R, E[0:1]+E[-1:0:-1], E)
def skew_circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])

#Hadamard matrices:
def legendre_symbol(x):
    """Extend the built in legendre_symbol function to handle prime power fields.  Assume x is an element of a finite field as well"""
    if x==0: 
        return 0
    elif x.is_square(): 
        return 1
    else: 
        return -1

def jacobsthal(p,n):
    """See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices"""
     if n == 1:
        elts = GF(p).list()
    else:
        elts = GF(p^n,'a').list()
    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j]))
def paley_matrix(p,n):
    """See http://en.wikipedia.org/wiki/Paley_construction"""
    mod = p^n%4
    if mod == 3:
        # Paley Type 1 construction
        ones = vector([1]*p^n)
        QplusI = jacobsthal(p,n)
        # Q+=I efficiently
        for i in range(p^n):
            QplusI[i,i]=-1
        return block_matrix(2,[
        [1,ones.row()],
        [ones.column(), QplusI]])
    elif mod == 1:
        # Paley Type 2 construction
        ones = vector([1]*p^n)
        QplusI = jacobsthal(p,n)
        QminusI = copy(QplusI)
        for i in range(p^n):
            QplusI[i,i]=1
            QminusI[i,i]=-1
        SplusI = block_matrix(2,[[1,ones.row()],[ones.column(), QplusI]])
        SminusI = block_matrix(2,[[-1,ones.row()], [ones.column(), QminusI]])
        return block_matrix(2,[[SplusI,SminusI],[SminusI,-SplusI]])        
    else:
        raise ValueError("p^n must be congruent to 1 or 3 mod 4")

}}

The matrixform patch below first implements a decorator to take care of an optional first argument of the ring, as well as an optional keyword argument of 'sparse'.  Then it implements most of these using that decorator, so the boilerplate code is abstracted away.

Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices

(thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )

Assignee: **@jasongrout, @williamstein**

CC:  @rbeezer @kcrisman @mforets

Branch/Commit: **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**

Reviewer: **Dima Pasechnik, Marcelo Forets**

Author: **Jason Grout, Marcelo Forets**

_Issue created by migration from https://trac.sagemath.org/ticket/13703_





---

archive/issue_events_169833.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-12T20:38:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169833"
}
```



---

archive/issue_events_169834.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-12T20:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169834"
}
```



---

archive/issue_events_169835.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-12T20:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169835"
}
```



---

archive/issue_events_169836.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-12T20:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169836"
}
```



---

archive/issue_comments_163309.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nLike this:  #13678 ?  (Which I should finish reviewing.)",
    "created_at": "2012-11-12T21:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163309",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'>Comment 1:</a>
Like this:  #13678 ?  (Which I should finish reviewing.)



---

archive/issue_comments_163310.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAh, yes, nice.  Should we close this ticket and move these examples over or make it an addition to that ticket?",
    "created_at": "2012-11-12T21:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163310",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'>Comment 2:</a>
Ah, yes, nice.  Should we close this ticket and move these examples over or make it an addition to that ticket?



---

archive/issue_comments_163311.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI'd vote for implementing the new matrices on this ticket, making sure they build on the namespace/tab-completion decorator in #13678.  Just change the description slightly to speak of just the special matrices.\n\nNote:  These could be named, e.g., `hilbert_matrix()`, and the `_matrix` part gets stripped put when found with tab-completion.",
    "created_at": "2012-11-13T00:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163311",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:3'>Comment 3:</a>
I'd vote for implementing the new matrices on this ticket, making sure they build on the namespace/tab-completion decorator in #13678.  Just change the description slightly to speak of just the special matrices.

Note:  These could be named, e.g., `hilbert_matrix()`, and the `_matrix` part gets stripped put when found with tab-completion.



---

archive/issue_comments_163312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,10 @@\n def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])\n def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])\n def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])\n+def jacobsthal(p,n):\n+    \"\"\"See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices\"\"\"\n+    elts = GF(p^n).list()\n+    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j],p))\n ```\n \n Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices\n``````\n",
    "created_at": "2012-12-01T15:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163312",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,10 @@
 def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])
 def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])
 def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])
+def jacobsthal(p,n):
+    """See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices"""
+    elts = GF(p^n).list()
+    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j],p))
 ```
 
 Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices
``````




---

archive/issue_comments_163313.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nMore code, this time for Hadamard matrices.  Thanks to wikipedia and a paper by Alex Kramer summarizing these ideas.  I can't seem to find a source for the Paley type 2 matrix construction, but it seems to check out for small values of p^n, and it looks like a reasonable modification of the wikipedia method.",
    "created_at": "2012-12-01T17:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163313",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'>Comment 5:</a>
More code, this time for Hadamard matrices.  Thanks to wikipedia and a paper by Alex Kramer summarizing these ideas.  I can't seem to find a source for the Paley type 2 matrix construction, but it seems to check out for small values of p^n, and it looks like a reasonable modification of the wikipedia method.



---

archive/issue_comments_163314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,10 +6,51 @@\n def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])\n def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])\n def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])\n+\n+#Hadamard matrices:\n+def legendre_symbol(x):\n+    \"\"\"Extend the built in legendre_symbol function to handle prime power fields.  Assume x is an element of a finite field as well\"\"\"\n+    if x==0: \n+        return 0\n+    elif x.is_square(): \n+        return 1\n+    else: \n+        return -1\n+\n def jacobsthal(p,n):\n     \"\"\"See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices\"\"\"\n-    elts = GF(p^n).list()\n-    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j],p))\n-```\n+     if n == 1:\n+        elts = GF(p).list()\n+    else:\n+        elts = GF(p^n,'a').list()\n+    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j]))\n+def paley_matrix(p,n):\n+    \"\"\"See http://en.wikipedia.org/wiki/Paley_construction\"\"\"\n+    mod = p^n%4\n+    if mod == 3:\n+        # Paley Type 1 construction\n+        ones = vector([1]*p^n)\n+        QplusI = jacobsthal(p,n)\n+        # Q+=I efficiently\n+        for i in range(p^n):\n+            QplusI[i,i]=-1\n+        return block_matrix(2,[\n+        [1,ones.row()],\n+        [ones.column(), QplusI]])\n+    elif mod == 1:\n+        # Paley Type 2 construction\n+        ones = vector([1]*p^n)\n+        QplusI = jacobsthal(p,n)\n+        QminusI = copy(QplusI)\n+        for i in range(p^n):\n+            QplusI[i,i]=1\n+            QminusI[i,i]=-1\n+        SplusI = block_matrix(2,[[1,ones.row()],[ones.column(), QplusI]])\n+        SminusI = block_matrix(2,[[-1,ones.row()], [ones.column(), QminusI]])\n+        return block_matrix(2,[[SplusI,SminusI],[SminusI,-SplusI]])        \n+    else:\n+        raise ValueError(\"p^n must be congruent to 1 or 3 mod 4\")\n+\n+}}\n \n Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices\n``````\n",
    "created_at": "2012-12-01T17:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163314",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,10 +6,51 @@
 def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])
 def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])
 def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])
+
+#Hadamard matrices:
+def legendre_symbol(x):
+    """Extend the built in legendre_symbol function to handle prime power fields.  Assume x is an element of a finite field as well"""
+    if x==0: 
+        return 0
+    elif x.is_square(): 
+        return 1
+    else: 
+        return -1
+
 def jacobsthal(p,n):
     """See http://en.wikipedia.org/wiki/Paley_construction for a way to use jacobsthal matrices to construct hadamard matrices"""
-    elts = GF(p^n).list()
-    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j],p))
-```
+     if n == 1:
+        elts = GF(p).list()
+    else:
+        elts = GF(p^n,'a').list()
+    return matrix(len(elts), lambda i,j: legendre_symbol(elts[i]-elts[j]))
+def paley_matrix(p,n):
+    """See http://en.wikipedia.org/wiki/Paley_construction"""
+    mod = p^n%4
+    if mod == 3:
+        # Paley Type 1 construction
+        ones = vector([1]*p^n)
+        QplusI = jacobsthal(p,n)
+        # Q+=I efficiently
+        for i in range(p^n):
+            QplusI[i,i]=-1
+        return block_matrix(2,[
+        [1,ones.row()],
+        [ones.column(), QplusI]])
+    elif mod == 1:
+        # Paley Type 2 construction
+        ones = vector([1]*p^n)
+        QplusI = jacobsthal(p,n)
+        QminusI = copy(QplusI)
+        for i in range(p^n):
+            QplusI[i,i]=1
+            QminusI[i,i]=-1
+        SplusI = block_matrix(2,[[1,ones.row()],[ones.column(), QplusI]])
+        SminusI = block_matrix(2,[[-1,ones.row()], [ones.column(), QminusI]])
+        return block_matrix(2,[[SplusI,SminusI],[SminusI,-SplusI]])        
+    else:
+        raise ValueError("p^n must be congruent to 1 or 3 mod 4")
+
+}}
 
 Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices
``````




---

archive/issue_comments_163315.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nMaybe just convert the example definitions to actual functions, add a few examples, and add them to Sage. It's better than letting this code \"bitrot\" in trac :)",
    "created_at": "2013-03-15T08:01:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163315",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:6'>Comment 6:</a>
Maybe just convert the example definitions to actual functions, add a few examples, and add them to Sage. It's better than letting this code "bitrot" in trac :)



---

archive/issue_comments_163316.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,8 @@\n def vandermonde(R, v): return matrix(R, len(v), lambda i,j: v[i]^j)\n def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])\n def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])\n-def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])\n+def circulant(R, E): return toeplitz(R, E[0:1]+E[-1:0:-1], E)\n+def skew_circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])\n \n #Hadamard matrices:\n def legendre_symbol(x):\n@@ -54,3 +55,5 @@\n }}\n \n Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices\n+\n+(thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )\n``````\n",
    "created_at": "2013-03-15T13:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163316",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,8 @@
 def vandermonde(R, v): return matrix(R, len(v), lambda i,j: v[i]^j)
 def toeplitz(R,c,r): return matrix(R, len(c), len(r), lambda i,j: c[i-j] if i>=j else r[j-i])
 def hankel(R,c,r): entries=c+r[1:]; return matrix(R, len(c), len(r), lambda i,j: entries[i+j])
-def circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])
+def circulant(R, E): return toeplitz(R, E[0:1]+E[-1:0:-1], E)
+def skew_circulant(R,E): return hankel(R, E, E[-1:]+E[:-1])
 
 #Hadamard matrices:
 def legendre_symbol(x):
@@ -54,3 +55,5 @@
 }}
 
 Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices
+
+(thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )
``````




---

archive/issue_comments_163317.json:
```json
{
    "body": "Attachment: **[trac-13703.patch.gz](https://github.com/sagemath/sage/files/ticket13703/trac-13703.patch.gz)**",
    "created_at": "2013-03-15T15:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163317",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-13703.patch.gz](https://github.com/sagemath/sage/files/ticket13703/trac-13703.patch.gz)**



---

archive/issue_events_169837.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-03-15T15:10:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169837"
}
```



---

archive/issue_events_169838.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-03-15T15:12:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169838"
}
```



---

archive/issue_events_169839.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2013-03-15T15:12:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169839"
}
```



---

archive/issue_comments_163318.json:
```json
{
    "body": "Work Issues: **documentation, doctests, checking**",
    "created_at": "2013-03-15T15:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163318",
    "user": "https://github.com/jasongrout"
}
```

Work Issues: **documentation, doctests, checking**



---

archive/issue_comments_163319.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nDocumentation (and doctests) should still be added to the new functions, as well as the offset argument for the diagonal matrix constructor.\n\nIdeally, we should have a new decorator that handles the optional ring argument automatically.",
    "created_at": "2013-03-15T15:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163319",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'>Comment 9:</a>
Documentation (and doctests) should still be added to the new functions, as well as the offset argument for the diagonal matrix constructor.

Ideally, we should have a new decorator that handles the optional ring argument automatically.



---

archive/issue_comments_163320.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAdding that documentation sounds like a great student project...",
    "created_at": "2013-03-15T18:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163320",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'>Comment 10:</a>
Adding that documentation sounds like a great student project...



---

archive/issue_comments_163321.json:
```json
{
    "body": "Attachment: **[trac-13703-matrixform.patch.gz](https://github.com/sagemath/sage/files/ticket13703/trac-13703-matrixform.patch.gz)**\n\ntake 2, apply this patch *or* the other patch, but not both.",
    "created_at": "2013-03-15T22:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163321",
    "user": "https://github.com/jasongrout"
}
```

Attachment: **[trac-13703-matrixform.patch.gz](https://github.com/sagemath/sage/files/ticket13703/trac-13703-matrixform.patch.gz)**

take 2, apply this patch *or* the other patch, but not both.



---

archive/issue_comments_163322.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -54,6 +54,8 @@\n \n }}\n \n+The matrixform patch below first implements a decorator to take care of an optional first argument of the ring, as well as an optional keyword argument of 'sparse'.  Then it implements most of these using that decorator, so the boilerplate code is abstracted away.\n+\n Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices\n \n (thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )\n``````\n",
    "created_at": "2013-03-15T22:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163322",
    "user": "https://github.com/jasongrout"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -54,6 +54,8 @@
 
 }}
 
+The matrixform patch below first implements a decorator to take care of an optional first argument of the ring, as well as an optional keyword argument of 'sparse'.  Then it implements most of these using that decorator, so the boilerplate code is abstracted away.
+
 Additionally, we could use scipy to create more matrices (or do it ourselves): http://docs.scipy.org/doc/scipy/reference/linalg.html#special-matrices
 
 (thanks to pascal on sage-support for correcting the circulant code above: https://groups.google.com/d/msg/sage-support/RnKjQ9n2YB0/vfCEvIV_HZUJ )
``````




---

archive/issue_comments_163323.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI would be happy to review this patch. Should I ?",
    "created_at": "2013-03-16T09:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163323",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:12'>Comment 12:</a>
I would be happy to review this patch. Should I ?



---

archive/issue_comments_163324.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThe functions still need documentation, so it's not quite ready to go in yet.  However, if you want to add docs, or if you want to check correctness of the functions, that would be great too.",
    "created_at": "2013-03-16T09:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163324",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'>Comment 13:</a>
The functions still need documentation, so it's not quite ready to go in yet.  However, if you want to add docs, or if you want to check correctness of the functions, that would be great too.



---

archive/issue_events_169840.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169840"
}
```



---

archive/issue_events_169841.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169841"
}
```



---

archive/issue_events_169842.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169842"
}
```



---

archive/issue_events_169843.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169843"
}
```



---

archive/issue_events_169844.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169844"
}
```



---

archive/issue_events_169845.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169845"
}
```



---

archive/issue_events_169846.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169846"
}
```



---

archive/issue_events_169847.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169847"
}
```



---

archive/issue_comments_163325.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n-It would be great to have a matrices namespace to put special matrix commands, sort of like the graphs.* namespace or groups.* namespace.  Here are some starter definitions:\n+It would be great to have a matrices namespace to put special matrix commands, sort of like the:\n+\n+- graphs.* namespace \n+- groups.* namespace\n+- polytopes.* namespace\n+\n+Here are some starter definitions:\n \n ```\n def hilbert(R,n): return matrix(R, n, lambda i,j: 1/(i+j+1))\n``````\n",
    "created_at": "2017-04-15T08:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163325",
    "user": "https://github.com/mforets"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
-It would be great to have a matrices namespace to put special matrix commands, sort of like the graphs.* namespace or groups.* namespace.  Here are some starter definitions:
+It would be great to have a matrices namespace to put special matrix commands, sort of like the:
+
+- graphs.* namespace 
+- groups.* namespace
+- polytopes.* namespace
+
+Here are some starter definitions:
 
 ```
 def hilbert(R,n): return matrix(R, n, lambda i,j: 1/(i+j+1))
``````




---

archive/issue_comments_163326.json:
```json
{
    "body": "Branch: **[u/mforets/13703](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/13703)**",
    "created_at": "2017-04-23T18:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163326",
    "user": "https://github.com/mforets"
}
```

Branch: **[u/mforets/13703](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/13703)**



---

archive/issue_comments_163327.json:
```json
{
    "body": "Commit: **[039b3e2](https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4)**",
    "created_at": "2017-04-23T18:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163327",
    "user": "https://github.com/mforets"
}
```

Commit: **[039b3e2](https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4)**



---

archive/issue_comments_163328.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\n- added documentation and tests to hankel, vandermonde, toeplitz and hilbert\n- using the approach from the 1st patch (matrix method) decorator, because it is more in line with the current `special.py`\n- added the file `special.py` to the html reference, because it was not there at all\n- added a table with the available constructions, in the same lines as with the polytopes library\n\nit is missing to document and add doctests for the Paley construction. perhaps a person with a number theory background can continue that part.\n\n---\n\nthis is related to documentation here but less important issue: since we are using the matrix method decorator, it adds the strings `This function is available as xxx(...) and matrix.xxx(...).`, although this is not true in general. it applies not only for this ticket; see for instance the help for `random_rref_matrix`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ccddabcdad2d463c89400dafed6eced6d7ffd9b\">8ccddab</a></td><td><code>add doc and examples to 4 functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4\">039b3e2</a></td><td><code>switch to matix method approach</code></td></tr></table>\n",
    "created_at": "2017-04-23T18:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163328",
    "user": "https://github.com/mforets"
}
```

<a id='comment:19'>Comment 19:</a>
- added documentation and tests to hankel, vandermonde, toeplitz and hilbert
- using the approach from the 1st patch (matrix method) decorator, because it is more in line with the current `special.py`
- added the file `special.py` to the html reference, because it was not there at all
- added a table with the available constructions, in the same lines as with the polytopes library

it is missing to document and add doctests for the Paley construction. perhaps a person with a number theory background can continue that part.

---

this is related to documentation here but less important issue: since we are using the matrix method decorator, it adds the strings `This function is available as xxx(...) and matrix.xxx(...).`, although this is not true in general. it applies not only for this ticket; see for instance the help for `random_rref_matrix`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ccddabcdad2d463c89400dafed6eced6d7ffd9b">8ccddab</a></td><td><code>add doc and examples to 4 functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4">039b3e2</a></td><td><code>switch to matix method approach</code></td></tr></table>




---

archive/issue_events_169848.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-23T18:56:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169848"
}
```



---

archive/issue_events_169849.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-23T18:56:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169849"
}
```



---

archive/issue_comments_163329.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nnote that there is now a lot on Hadamard matrices in `src/sage/combinat/matrices/hadamard_matrix.py` so no need to duplicate this in `special.py`. (Perhaps more docs can be added and/or cross-linked)",
    "created_at": "2017-04-24T21:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163329",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>Comment 20:</a>
note that there is now a lot on Hadamard matrices in `src/sage/combinat/matrices/hadamard_matrix.py` so no need to duplicate this in `special.py`. (Perhaps more docs can be added and/or cross-linked)



---

archive/issue_comments_163330.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nregarding `is available as xxx(...) and matrix.xxx(...)`, I think there is a consensus that nothing should be added to the global namespace, which is already quite full, rather, it should be pruned...",
    "created_at": "2017-04-24T21:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163330",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'>Comment 21:</a>
regarding `is available as xxx(...) and matrix.xxx(...)`, I think there is a consensus that nothing should be added to the global namespace, which is already quite full, rather, it should be pruned...



---

archive/issue_comments_163331.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@dimpase](#comment%3A21):\n> regarding `is available as xxx(...) and matrix.xxx(...)`, I think there is a consensus that nothing should be added to the global namespace, which is already quite full, rather, it should be pruned...\n\nthe `@matrix_method` decorator adds the possibility for tab-completion, hence `matrix.xxx` works. this is good. but it also adds a string to the inline help saying that \n\n```\n...\nprefix = \"    This function is available as %s(...) and matrix.%s(...).\" \n% (func.__name__, name\n...\n```\nbut the `%s(...)` is not true; it is only true if the function is included in `all.py`. \n\ni was not proposing to add anything to `all.py`, just that someone revises and eventually confirms that this prefix to the docstring is false and should be fixed (or not).",
    "created_at": "2017-04-25T00:48:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163331",
    "user": "https://github.com/mforets"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@dimpase](#comment%3A21):
> regarding `is available as xxx(...) and matrix.xxx(...)`, I think there is a consensus that nothing should be added to the global namespace, which is already quite full, rather, it should be pruned...

the `@matrix_method` decorator adds the possibility for tab-completion, hence `matrix.xxx` works. this is good. but it also adds a string to the inline help saying that 

```
...
prefix = "    This function is available as %s(...) and matrix.%s(...)." 
% (func.__name__, name
...
```
but the `%s(...)` is not true; it is only true if the function is included in `all.py`. 

i was not proposing to add anything to `all.py`, just that someone revises and eventually confirms that this prefix to the docstring is false and should be fixed (or not).



---

archive/issue_comments_163332.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@dimpase](#comment%3A20):\n> note that there is now a lot on Hadamard matrices in `src/sage/combinat/matrices/hadamard_matrix.py` so no need to duplicate this in `special.py`. (Perhaps more docs can be added and/or cross-linked)\n\nthis is great, thanks for pointing it out! i'll take care to add the relevant cross-link, in the new class docstring of `special.py`",
    "created_at": "2017-04-25T00:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163332",
    "user": "https://github.com/mforets"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@dimpase](#comment%3A20):
> note that there is now a lot on Hadamard matrices in `src/sage/combinat/matrices/hadamard_matrix.py` so no need to duplicate this in `special.py`. (Perhaps more docs can be added and/or cross-linked)

this is great, thanks for pointing it out! i'll take care to add the relevant cross-link, in the new class docstring of `special.py`



---

archive/issue_comments_163333.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a08f04ac63ea0e28af8fe7bc86383ea5662dd3fb\">a08f04a</a></td><td><code>remove unused decorator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac\">84d1056</a></td><td><code>add cross-link to combinats module</code></td></tr></table>\n",
    "created_at": "2017-04-25T11:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163333",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a08f04ac63ea0e28af8fe7bc86383ea5662dd3fb">a08f04a</a></td><td><code>remove unused decorator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac">84d1056</a></td><td><code>add cross-link to combinats module</code></td></tr></table>




---

archive/issue_comments_163334.json:
```json
{
    "body": "Changed commit from **[039b3e2](https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4)** to **[84d1056](https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac)**",
    "created_at": "2017-04-25T11:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[039b3e2](https://github.com/sagemath/sagetrac-mirror/commit/039b3e29cff022f820a5299479f5f4f4db5f9ed4)** to **[84d1056](https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac)**



---

archive/issue_events_169850.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-25T11:39:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169850"
}
```



---

archive/issue_events_169851.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-25T11:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169851"
}
```



---

archive/issue_comments_163335.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\n- added Jason Grout as author, because this applies his patch to 4 special matrices (uploaded the original patches)\n- leaving the (minor) issue that i didn't understand about the meaning of the `prefix` string of the `@matrix_method` decorator outside the scope of this ticket.\n- adding myself as reviewer (?) \n- added cross links to combinat\n\ncan someone else have a look? thanks !",
    "created_at": "2017-04-25T11:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163335",
    "user": "https://github.com/mforets"
}
```

<a id='comment:25'>Comment 25:</a>
- added Jason Grout as author, because this applies his patch to 4 special matrices (uploaded the original patches)
- leaving the (minor) issue that i didn't understand about the meaning of the `prefix` string of the `@matrix_method` decorator outside the scope of this ticket.
- adding myself as reviewer (?) 
- added cross links to combinat

can someone else have a look? thanks !



---

archive/issue_comments_163336.json:
```json
{
    "body": "Author: **Jason Grout**",
    "created_at": "2017-04-25T11:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163336",
    "user": "https://github.com/mforets"
}
```

Author: **Jason Grout**



---

archive/issue_comments_163337.json:
```json
{
    "body": "Changed work issues from **documentation, doctests, checking** to none",
    "created_at": "2017-04-25T11:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163337",
    "user": "https://github.com/mforets"
}
```

Changed work issues from **documentation, doctests, checking** to none



---

archive/issue_comments_163338.json:
```json
{
    "body": "Changed commit from **[84d1056](https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac)** to **[4fdccb6](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1)**",
    "created_at": "2017-04-25T11:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163338",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[84d1056](https://github.com/sagemath/sagetrac-mirror/commit/84d105685e556a05540f11ba91589e40c0a242ac)** to **[4fdccb6](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1)**



---

archive/issue_comments_163339.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1\">4fdccb6</a></td><td><code>revert to original module title</code></td></tr></table>\n",
    "created_at": "2017-04-25T11:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163339",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1">4fdccb6</a></td><td><code>revert to original module title</code></td></tr></table>




---

archive/issue_comments_163340.json:
```json
{
    "body": "Changed author from **Jason Grout** to **Jason Grout, Marcelo Forets**",
    "created_at": "2017-04-25T16:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163340",
    "user": "https://github.com/dimpase"
}
```

Changed author from **Jason Grout** to **Jason Grout, Marcelo Forets**



---

archive/issue_comments_163341.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik, Marcelo Forets**",
    "created_at": "2017-04-25T16:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163341",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik, Marcelo Forets**



---

archive/issue_comments_163342.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nlooks good to me.",
    "created_at": "2017-04-25T16:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163342",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'>Comment 28:</a>
looks good to me.



---

archive/issue_events_169852.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-04-25T16:31:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169852"
}
```



---

archive/issue_events_169853.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-04-25T16:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169853"
}
```



---

archive/issue_events_169854.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-26T06:02:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169854"
}
```



---

archive/issue_events_169855.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-26T06:02:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169855"
}
```



---

archive/issue_comments_163343.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThanks dimpase for the review!!! I've realized the word \"vector\" is innacurate in the docstring of hankel, because `entries = c + r[1:]` makes sense for lists. \n\ndo you have some recommendation about being permissible with arguments? (only list/only vector/both). from my side i'll check how other parts of sage handle a similar issue.",
    "created_at": "2017-04-26T06:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163343",
    "user": "https://github.com/mforets"
}
```

<a id='comment:29'>Comment 29:</a>
Thanks dimpase for the review!!! I've realized the word "vector" is innacurate in the docstring of hankel, because `entries = c + r[1:]` makes sense for lists. 

do you have some recommendation about being permissible with arguments? (only list/only vector/both). from my side i'll check how other parts of sage handle a similar issue.



---

archive/issue_comments_163344.json:
```json
{
    "body": "Changed commit from **[4fdccb6](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1)** to **[4d8e6bb](https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa)**",
    "created_at": "2017-04-26T17:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163344",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4fdccb6](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb6cf9a33d136521b5d6ada06b43eae9f7f1)** to **[4d8e6bb](https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa)**



---

archive/issue_comments_163345.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa\">4d8e6bb</a></td><td><code>accept vector in hankel, typos</code></td></tr></table>\n",
    "created_at": "2017-04-26T17:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163345",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>Comment 30:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa">4d8e6bb</a></td><td><code>accept vector in hankel, typos</code></td></tr></table>




---

archive/issue_events_169856.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-26T17:26:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169856"
}
```



---

archive/issue_events_169857.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-26T17:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169857"
}
```



---

archive/issue_comments_163346.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\npropose to do the computation by accessing directly to the elements (as in the other cases). this way without type checking we are a little more robust in the sense that it accepts both lists and vectors. it is mathematically equivalent. \n\nthere is a price to pay indeed if we use a lambda function instead of straightforward concatenation of lists,  but i judge \"small\" (~30ms for a 300x600 hankel matrix).  \n\nin sage there are indeed a couple of docstrings which explicitly say \"vector or list\" (or \"list or vector\") as a search shows, eg. setting rows/cols in a matrix, or a polyhedral fan. in our case i'm just keeping the word \"vector\"..",
    "created_at": "2017-04-26T17:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163346",
    "user": "https://github.com/mforets"
}
```

<a id='comment:31'>Comment 31:</a>
propose to do the computation by accessing directly to the elements (as in the other cases). this way without type checking we are a little more robust in the sense that it accepts both lists and vectors. it is mathematically equivalent. 

there is a price to pay indeed if we use a lambda function instead of straightforward concatenation of lists,  but i judge "small" (~30ms for a 300x600 hankel matrix).  

in sage there are indeed a couple of docstrings which explicitly say "vector or list" (or "list or vector") as a search shows, eg. setting rows/cols in a matrix, or a polyhedral fan. in our case i'm just keeping the word "vector"..



---

archive/issue_comments_163347.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nactually, I don't like the interface for Hankel matrices. The normal\nconvention is that you have a potentially infinite matrix \n\n```\na b c d e f.....\nb c d e f ......\nc d e f ........\n................\n```\ncorresponding to the sequence (a,b,c,d,e,f,...) and then you just cut out the first\nn rows and columns. (so it's square by default), see https://en.wikipedia.org/wiki/Hankel_matrix",
    "created_at": "2017-04-26T17:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163347",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'>Comment 32:</a>
actually, I don't like the interface for Hankel matrices. The normal
convention is that you have a potentially infinite matrix 

```
a b c d e f.....
b c d e f ......
c d e f ........
................
```
corresponding to the sequence (a,b,c,d,e,f,...) and then you just cut out the first
n rows and columns. (so it's square by default), see https://en.wikipedia.org/wiki/Hankel_matrix



---

archive/issue_comments_163348.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@dimpase](#comment%3A32):\n> actually, I don't like the interface for Hankel matrices. The normal\n> convention is that you have a potentially infinite matrix \n> \n> ```\n> a b c d e f.....\n> b c d e f ......\n> c d e f ........\n> ................\n> ```\n> corresponding to the sequence (a,b,c,d,e,f,...) and then you just cut out the first\n> n rows and columns. (so it's square by default), see https://en.wikipedia.org/wiki/Hankel_matrix\n\nok. square by default is:\n\n```\ndef hankel(c, r=None):\n\n    m = len(c)\n    if r is not None:\n        n = len(r)\n        entries = lambda i: c[i] if i < m else r[i-m+1]\n    else:\n        n = len(c)\n        entries = lambda i: c[i] if i < m else c[i-m+1]\n    return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n)\n```\n\ni don't have any particular opinion about allowing rectangular matrices as optional, or removing it altogether. \n\nnotice that the original code was like that, and there a similar Matlab command: `hankel(c, r)`.",
    "created_at": "2017-04-26T19:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163348",
    "user": "https://github.com/mforets"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@dimpase](#comment%3A32):
> actually, I don't like the interface for Hankel matrices. The normal
> convention is that you have a potentially infinite matrix 
> 
> ```
> a b c d e f.....
> b c d e f ......
> c d e f ........
> ................
> ```
> corresponding to the sequence (a,b,c,d,e,f,...) and then you just cut out the first
> n rows and columns. (so it's square by default), see https://en.wikipedia.org/wiki/Hankel_matrix

ok. square by default is:

```
def hankel(c, r=None):

    m = len(c)
    if r is not None:
        n = len(r)
        entries = lambda i: c[i] if i < m else r[i-m+1]
    else:
        n = len(c)
        entries = lambda i: c[i] if i < m else c[i-m+1]
    return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n)
```

i don't have any particular opinion about allowing rectangular matrices as optional, or removing it altogether. 

notice that the original code was like that, and there a similar Matlab command: `hankel(c, r)`.



---

archive/issue_comments_163349.json:
```json
{
    "body": "Changed commit from **[4d8e6bb](https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa)** to **[c636bbf](https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca)**",
    "created_at": "2017-04-28T17:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163349",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4d8e6bb](https://github.com/sagemath/sagetrac-mirror/commit/4d8e6bb2daa1784a8f5c203bd596e80b6e05e8aa)** to **[c636bbf](https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca)**



---

archive/issue_comments_163350.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca\">c636bbf</a></td><td><code>square by default in Hankel</code></td></tr></table>\n",
    "created_at": "2017-04-28T17:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163350",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca">c636bbf</a></td><td><code>square by default in Hankel</code></td></tr></table>




---

archive/issue_comments_163351.json:
```json
{
    "body": "Changed commit from **[c636bbf](https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca)** to **[a5c5ed6](https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6)**",
    "created_at": "2017-04-28T17:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163351",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c636bbf](https://github.com/sagemath/sagetrac-mirror/commit/c636bbfe1576b124b15e795b51570e5a1e382fca)** to **[a5c5ed6](https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6)**



---

archive/issue_comments_163352.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6\">a5c5ed6</a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2017-04-28T17:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163352",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>Comment 35:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6">a5c5ed6</a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_163353.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\n@dimpase : done with the suggested interface to the Hankel matrices. let me know if you'd like me to add other special matrices or related issues to this ticket (eg. custom specification of the `base_ring`).\n\nsomething i have needed before (and there are several requests for this in asksage as you know) is to provide an \"abstract matrix\" constructor like `matrix.symbolic(5)` or `matrix.abstract('a', 5)` to return the matrix with SR coefficients labelled `aij`.",
    "created_at": "2017-05-02T21:19:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163353",
    "user": "https://github.com/mforets"
}
```

<a id='comment:36'>Comment 36:</a>
@dimpase : done with the suggested interface to the Hankel matrices. let me know if you'd like me to add other special matrices or related issues to this ticket (eg. custom specification of the `base_ring`).

something i have needed before (and there are several requests for this in asksage as you know) is to provide an "abstract matrix" constructor like `matrix.symbolic(5)` or `matrix.abstract('a', 5)` to return the matrix with SR coefficients labelled `aij`.



---

archive/issue_comments_163354.json:
```json
{
    "body": "Changed commit from **[a5c5ed6](https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6)** to **[b58e47e](https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424)**",
    "created_at": "2017-05-09T20:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163354",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a5c5ed6](https://github.com/sagemath/sagetrac-mirror/commit/a5c5ed68440581ae7f4df1b8f5f3abe7b82073e6)** to **[b58e47e](https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424)**



---

archive/issue_comments_163355.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c978b578290d4f0b98815481148abfba0b8a7f83\">c978b57</a></td><td><code>use optional ring keyword</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8478401eaa16980270ba893cfa55e9274efb3a3\">c847840</a></td><td><code>Merge branch 'develop' into t/mforets/13703/matrixforms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424\">b58e47e</a></td><td><code>some tweaks</code></td></tr></table>\n",
    "created_at": "2017-05-09T20:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163355",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>Comment 37:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c978b578290d4f0b98815481148abfba0b8a7f83">c978b57</a></td><td><code>use optional ring keyword</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8478401eaa16980270ba893cfa55e9274efb3a3">c847840</a></td><td><code>Merge branch 'develop' into t/mforets/13703/matrixforms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424">b58e47e</a></td><td><code>some tweaks</code></td></tr></table>




---

archive/issue_comments_163356.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nfrom my side this ticket is good to go :) i've run tests and built the html doc. please let me now if you have changes or improvements so i can make them. Thanks.",
    "created_at": "2017-05-09T20:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163356",
    "user": "https://github.com/mforets"
}
```

<a id='comment:38'>Comment 38:</a>
from my side this ticket is good to go :) i've run tests and built the html doc. please let me now if you have changes or improvements so i can make them. Thanks.



---

archive/issue_comments_163357.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nPlease add an example illustrating the rule about row/column \"conflict\" for Hankel matrices.",
    "created_at": "2017-05-14T23:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163357",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'>Comment 39:</a>
Please add an example illustrating the rule about row/column "conflict" for Hankel matrices.



---

archive/issue_comments_163358.json:
```json
{
    "body": "Changed commit from **[b58e47e](https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424)** to **[5f4504b](https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913)**",
    "created_at": "2017-05-15T07:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163358",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b58e47e](https://github.com/sagemath/sagetrac-mirror/commit/b58e47e1f1fefc0093d831a1580beda2bc9ad424)** to **[5f4504b](https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913)**



---

archive/issue_comments_163359.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913\">5f4504b</a></td><td><code>add two illustrating examples in Hankel</code></td></tr></table>\n",
    "created_at": "2017-05-15T07:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163359",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913">5f4504b</a></td><td><code>add two illustrating examples in Hankel</code></td></tr></table>




---

archive/issue_comments_163360.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nReplying to [@dimpase](#comment%3A39):\n> Please add an example illustrating the rule about row/column \"conflict\" for Hankel matrices.\n\nGood idea, done.",
    "created_at": "2017-05-22T08:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163360",
    "user": "https://github.com/mforets"
}
```

<a id='comment:41'>Comment 41:</a>
Replying to [@dimpase](#comment%3A39):
> Please add an example illustrating the rule about row/column "conflict" for Hankel matrices.

Good idea, done.



---

archive/issue_comments_163361.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nOK, at least now I understand the rule implemented easily. But why is this chosen?\n\nWould it be more natural to just \nignore the \"conflict\" thing completely and assume that the\nthe 2nd argument is the last row without the 1st entry?\nThis way the users do not even need to know the last entry of the 1st column to\nhave full control over the matrix they create. E.g., in the present design\none can have a match by accident, resulting in an wrong matrix. \nIn the design I propose the user does not need to worry about this.",
    "created_at": "2017-05-22T12:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163361",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'>Comment 42:</a>
OK, at least now I understand the rule implemented easily. But why is this chosen?

Would it be more natural to just 
ignore the "conflict" thing completely and assume that the
the 2nd argument is the last row without the 1st entry?
This way the users do not even need to know the last entry of the 1st column to
have full control over the matrix they create. E.g., in the present design
one can have a match by accident, resulting in an wrong matrix. 
In the design I propose the user does not need to worry about this.



---

archive/issue_comments_163362.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nReplying to [@dimpase](#comment%3A42):\n> OK, at least now I understand the rule implemented easily. But why is this chosen?\n> \n\nit was there in the patch in this thread, and it seemed ok since it is similar in [matlab](https://fr.mathworks.com/help/matlab/ref/hankel.html) software, [scipy](https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.hankel.html), and [mathematica](https://reference.wolfram.com/language/ref/HankelMatrix.html). But ok to improve things.\n \n> Would it be more natural to just \n> ignore the \"conflict\" thing completely and assume that the\n> the 2nd argument is the last row without the 1st entry?\n> This way the users do not even need to know the last entry of the 1st column to\n> have full control over the matrix they create. E.g., in the present design\n> one can have a match by accident, resulting in an wrong matrix. \n> In the design I propose the user does not need to worry about this.\n\nsorry i didnt't follow the suggestion; do you mean at the docstring level?\n(e.g. `conflict -> ignore`? that sounds good) if it's in the code could you reformulate please? maybe an example would help.",
    "created_at": "2017-05-23T06:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163362",
    "user": "https://github.com/mforets"
}
```

<a id='comment:43'>Comment 43:</a>
Replying to [@dimpase](#comment%3A42):
> OK, at least now I understand the rule implemented easily. But why is this chosen?
> 

it was there in the patch in this thread, and it seemed ok since it is similar in [matlab](https://fr.mathworks.com/help/matlab/ref/hankel.html) software, [scipy](https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.hankel.html), and [mathematica](https://reference.wolfram.com/language/ref/HankelMatrix.html). But ok to improve things.
 
> Would it be more natural to just 
> ignore the "conflict" thing completely and assume that the
> the 2nd argument is the last row without the 1st entry?
> This way the users do not even need to know the last entry of the 1st column to
> have full control over the matrix they create. E.g., in the present design
> one can have a match by accident, resulting in an wrong matrix. 
> In the design I propose the user does not need to worry about this.

sorry i didnt't follow the suggestion; do you mean at the docstring level?
(e.g. `conflict -> ignore`? that sounds good) if it's in the code could you reformulate please? maybe an example would help.



---

archive/issue_comments_163363.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nIn the branch implementation of`hankel(a,b)`, the 1st entry of `b`, i.e. `b[0]` is always ignored. While this is what Matlab does (Mathematica too, and Mathematica [documentation](https://reference.wolfram.com/language/ref/HankelMatrix.html) requires the last entry of `a` to be equal to the 1st entry of `b`), it is ugly and illogical.\n\nI propose that `hankel(a,b)` should do the same what `hankel(a,[None]+b)` does in the implementation on the branch.\n\nSame applies to `toeplitz()` - it suffers from the same inconsistency.",
    "created_at": "2017-05-23T10:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163363",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'>Comment 44:</a>
In the branch implementation of`hankel(a,b)`, the 1st entry of `b`, i.e. `b[0]` is always ignored. While this is what Matlab does (Mathematica too, and Mathematica [documentation](https://reference.wolfram.com/language/ref/HankelMatrix.html) requires the last entry of `a` to be equal to the 1st entry of `b`), it is ugly and illogical.

I propose that `hankel(a,b)` should do the same what `hankel(a,[None]+b)` does in the implementation on the branch.

Same applies to `toeplitz()` - it suffers from the same inconsistency.



---

archive/issue_comments_163364.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nok, we are on the same page now. i'll take care.",
    "created_at": "2017-05-23T10:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163364",
    "user": "https://github.com/mforets"
}
```

<a id='comment:45'>Comment 45:</a>
ok, we are on the same page now. i'll take care.



---

archive/issue_comments_163365.json:
```json
{
    "body": "Changed commit from **[5f4504b](https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913)** to **[9d92967](https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621)**",
    "created_at": "2017-05-24T11:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163365",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5f4504b](https://github.com/sagemath/sagetrac-mirror/commit/5f4504bb89d8f75321d0caa5c6fa38fa41ab5913)** to **[9d92967](https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621)**



---

archive/issue_comments_163366.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f39ec3c81795af3621afe08a913a8d3eb841ea33\">f39ec3c</a></td><td><code>change hankel interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38246384921d218b1c7605ae625a25f2efcc5e7e\">3824638</a></td><td><code>add base ring to hankel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5950b5e570be686ff6bddfa32bcc545acbc641ac\">5950b5e</a></td><td><code>add base ring to INPUT of other functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b1da36df88d6ce16a6a337371544fb6482e9130\">0b1da36</a></td><td><code>Merge branch 'develop' into t/mforets/13703/matrixforms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3a8a679e172e1659bce26ce7a9bd651f4ef8ba9\">c3a8a67</a></td><td><code>change Toeplitz design; add one more example</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621\">9d92967</a></td><td><code>precision in toeplitz docstring</code></td></tr></table>\n",
    "created_at": "2017-05-24T11:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163366",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:46'>Comment 46:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f39ec3c81795af3621afe08a913a8d3eb841ea33">f39ec3c</a></td><td><code>change hankel interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38246384921d218b1c7605ae625a25f2efcc5e7e">3824638</a></td><td><code>add base ring to hankel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5950b5e570be686ff6bddfa32bcc545acbc641ac">5950b5e</a></td><td><code>add base ring to INPUT of other functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b1da36df88d6ce16a6a337371544fb6482e9130">0b1da36</a></td><td><code>Merge branch 'develop' into t/mforets/13703/matrixforms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3a8a679e172e1659bce26ce7a9bd651f4ef8ba9">c3a8a67</a></td><td><code>change Toeplitz design; add one more example</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621">9d92967</a></td><td><code>precision in toeplitz docstring</code></td></tr></table>




---

archive/issue_comments_163367.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nReplying to [@dimpase](#comment%3A44):\n> In the branch implementation of`hankel(a,b)`, the 1st entry of `b`, i.e. `b[0]` is always ignored. While this is what Matlab does (Mathematica too, and Mathematica [documentation](https://reference.wolfram.com/language/ref/HankelMatrix.html) requires the last entry of `a` to be equal to the 1st entry of `b`), it is ugly and illogical.\n> \n> I propose that `hankel(a,b)` should do the same what `hankel(a,[None]+b)` does in the implementation on the branch.\n> \n> Same applies to `toeplitz()` - it suffers from the same inconsistency.\n>  \n\ndone ==> needs review",
    "created_at": "2017-05-24T11:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163367",
    "user": "https://github.com/mforets"
}
```

<a id='comment:47'>Comment 47:</a>
Replying to [@dimpase](#comment%3A44):
> In the branch implementation of`hankel(a,b)`, the 1st entry of `b`, i.e. `b[0]` is always ignored. While this is what Matlab does (Mathematica too, and Mathematica [documentation](https://reference.wolfram.com/language/ref/HankelMatrix.html) requires the last entry of `a` to be equal to the 1st entry of `b`), it is ugly and illogical.
> 
> I propose that `hankel(a,b)` should do the same what `hankel(a,[None]+b)` does in the implementation on the branch.
> 
> Same applies to `toeplitz()` - it suffers from the same inconsistency.
>  

done ==> needs review



---

archive/issue_comments_163368.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nthis is nitpicking, I know, sorry, but why do you prepend [None] to `r` in\n\n```\n+    r = c if r is None else [None] + list(r)\n+    n = len(r)\n+    entries = lambda i: c[i] if i < m else r[i-m+1]\n```\ninstead of adjusting the indexing (i.e. removing `+1`) of `r` in the last line (and adding `1` to `n`)?",
    "created_at": "2017-05-24T12:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163368",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'>Comment 48:</a>
this is nitpicking, I know, sorry, but why do you prepend [None] to `r` in

```
+    r = c if r is None else [None] + list(r)
+    n = len(r)
+    entries = lambda i: c[i] if i < m else r[i-m+1]
```
instead of adjusting the indexing (i.e. removing `+1`) of `r` in the last line (and adding `1` to `n`)?



---

archive/issue_comments_163369.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nWhile we are at it, I don't understand the choice made for r if it is not supplied. Would all 0s be more natural, i.e.? (This is what MMa's do, in fact).\n\n```\nif r is None:\n    r = [0*c[0]]*(m-1)\n```",
    "created_at": "2017-05-24T14:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163369",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'>Comment 49:</a>
While we are at it, I don't understand the choice made for r if it is not supplied. Would all 0s be more natural, i.e.? (This is what MMa's do, in fact).

```
if r is None:
    r = [0*c[0]]*(m-1)
```



---

archive/issue_comments_163370.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nno worries, i'm here to learn.\n\nif instead of the code in the branch one has:\n\n```\nsage: r = c if r is None else list(r)\nsage: n = len(r)\nsage: entries = lambda i: c[i] if i < m else r[i-m]\nsage: return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n+1, ring=ring)\n```\n\nthen the behaviour when r is not given does change (of course the matrix is no longer square):\n\n```\nFailed\u00a0example:\n\u00a0\u00a0\u00a0\u00a0matrix.hankel([1..3])\nExpected:\n\n\u00a0\u00a0\u00a0\u00a0[1\u00a02\u00a03]\n\u00a0\u00a0\u00a0\u00a0[2\u00a03\u00a02]\n\u00a0\u00a0\u00a0\u00a0[3\u00a02\u00a03]\nGot:\n\u00a0\u00a0\u00a0\u00a0[1\u00a02\u00a03\u00a01]\n\u00a0\u00a0\u00a0\u00a0[2\u00a03\u00a01\u00a02]\n\u00a0\u00a0\u00a0\u00a0[3\u00a01\u00a02\u00a03]\n```\n\ni think this was the reason i kept the None. \n\nhowever and in relation to your newer comment, i understand correctly, you've suggested to have this:\n\n```\nsage: r = c[1:] if r is None else list(r)\nsage: n = len(r)\nsage: entries = lambda i: c[i] if i < m else r[i-m]\nsage: return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n+1, ring=ring)\n``` \n\nin this situation, all current tests pass.",
    "created_at": "2017-05-25T09:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163370",
    "user": "https://github.com/mforets"
}
```

<a id='comment:50'>Comment 50:</a>
no worries, i'm here to learn.

if instead of the code in the branch one has:

```
sage: r = c if r is None else list(r)
sage: n = len(r)
sage: entries = lambda i: c[i] if i < m else r[i-m]
sage: return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n+1, ring=ring)
```

then the behaviour when r is not given does change (of course the matrix is no longer square):

```
Failed example:
    matrix.hankel([1..3])
Expected:

    [1 2 3]
    [2 3 2]
    [3 2 3]
Got:
    [1 2 3 1]
    [2 3 1 2]
    [3 1 2 3]
```

i think this was the reason i kept the None. 

however and in relation to your newer comment, i understand correctly, you've suggested to have this:

```
sage: r = c[1:] if r is None else list(r)
sage: n = len(r)
sage: entries = lambda i: c[i] if i < m else r[i-m]
sage: return matrix(lambda i,j: entries(i+j), nrows=m, ncols=n+1, ring=ring)
``` 

in this situation, all current tests pass.



---

archive/issue_comments_163371.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nwell, sorry i read too fast :/ let me think about all zeros.",
    "created_at": "2017-05-25T09:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163371",
    "user": "https://github.com/mforets"
}
```

<a id='comment:51'>Comment 51:</a>
well, sorry i read too fast :/ let me think about all zeros.



---

archive/issue_comments_163372.json:
```json
{
    "body": "Changed commit from **[9d92967](https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621)** to **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**",
    "created_at": "2017-05-25T10:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163372",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9d92967](https://github.com/sagemath/sagetrac-mirror/commit/9d92967f4eca938b8446ca21a0fbd0f4bfeb9621)** to **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**



---

archive/issue_comments_163373.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84\">b29d152</a></td><td><code>change hankel 0's below and update doctests</code></td></tr></table>\n",
    "created_at": "2017-05-25T10:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163373",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>Comment 52:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84">b29d152</a></td><td><code>change hankel 0's below and update doctests</code></td></tr></table>




---

archive/issue_comments_163374.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\n*To summarize:* \n\nthe current behaviour for `hankel(c)` is the same as in matlab and mathematica. for example,\n\n```\nsage: matrix.hankel([1, 2, 3, 4])\n\n[1 2 3 4]\n[2 3 4 0]\n[3 4 0 0]\n[4 0 0 0]\n\nsage: matlab('hankel([1, 2, 3, 4])')\n\n1     2     3     4\n2     3     4     0\n3     4     0     0\n4     0     0     0\n```\n\nhowever, if row and column are passed all the data in the row is considered:\n\n```\nsage: matrix.hankel([1, 2, 3], [7, 8, 9, 10])\n\n[ 1  2  3  7  8]\n[ 2  3  7  8  9]\n[ 3  7  8  9 10]\n```\n\nwhile:\n\n```\nsage: matlab('hankel([1, 2, 3], [7, 8, 9, 10])')\n\n1     2     3     8\n2     3     8     9\n3     8     9    10\n```",
    "created_at": "2017-05-25T10:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163374",
    "user": "https://github.com/mforets"
}
```

<a id='comment:53'>Comment 53:</a>
*To summarize:* 

the current behaviour for `hankel(c)` is the same as in matlab and mathematica. for example,

```
sage: matrix.hankel([1, 2, 3, 4])

[1 2 3 4]
[2 3 4 0]
[3 4 0 0]
[4 0 0 0]

sage: matlab('hankel([1, 2, 3, 4])')

1     2     3     4
2     3     4     0
3     4     0     0
4     0     0     0
```

however, if row and column are passed all the data in the row is considered:

```
sage: matrix.hankel([1, 2, 3], [7, 8, 9, 10])

[ 1  2  3  7  8]
[ 2  3  7  8  9]
[ 3  7  8  9 10]
```

while:

```
sage: matlab('hankel([1, 2, 3], [7, 8, 9, 10])')

1     2     3     8
2     3     8     9
3     8     9    10
```



---

archive/issue_comments_163375.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nLooks good to me.",
    "created_at": "2017-05-26T08:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163375",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'>Comment 54:</a>
Looks good to me.



---

archive/issue_events_169858.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-26T08:07:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169858"
}
```



---

archive/issue_events_169859.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-26T08:07:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169859"
}
```



---

archive/issue_events_169860.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-27T23:42:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169860"
}
```



---

archive/issue_events_169861.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5d4d022a076dca8445d923d75db14d117d0a074c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-27T23:42:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13703#event-169861"
}
```



---

archive/issue_comments_163376.json:
```json
{
    "body": "Changed branch from **[u/mforets/13703](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/13703)** to **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**",
    "created_at": "2017-05-27T23:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13703#issuecomment-163376",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mforets/13703](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/13703)** to **[b29d152](https://github.com/sagemath/sagetrac-mirror/commit/b29d152bdafed69f6030a1870f38587177995d84)**
