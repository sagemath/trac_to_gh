# Issue 13806: Building complex_double.pyx fails on Cygwin

archive/issues_013602.json:
```json
{
    "assignees": [],
    "body": "At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\nSo the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n\n**Apply** [attachment: trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).\n\nCC:  @kcrisman @dimpase\n\nKeywords: **cygwin cephes spkg**\n\nReviewer: **Karl-Dieter Crisman**\n\nAuthor: **Jean-Pierre Flori**\n\nMerged: **sage-5.6.beta3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13806_\n\n",
    "closed_at": "2013-01-07T20:56:28Z",
    "created_at": "2012-12-06T16:25:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Building complex_double.pyx fails on Cygwin",
    "type": "issue",
    "updated_at": "2013-01-07T20:56:28Z",
    "url": "https://github.com/sagemath/sage/issues/13806",
    "user": "https://github.com/sagetrac-jpflori"
}
```
At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.

**Apply** [attachment: trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).

CC:  @kcrisman @dimpase

Keywords: **cygwin cephes spkg**

Reviewer: **Karl-Dieter Crisman**

Author: **Jean-Pierre Flori**

Merged: **sage-5.6.beta3**

_Issue created by migration from https://trac.sagemath.org/ticket/13806_





---

archive/issue_events_177568.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177568"
}
```



---

archive/issue_events_177569.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "component: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177569"
}
```



---

archive/issue_events_177570.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177570"
}
```



---

archive/issue_events_177571.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177571"
}
```



---

archive/issue_comments_165006.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\n???  I didn't have any troubles with this.\n\n```\nsage: CDF(1)\n1.0\n```",
    "created_at": "2012-12-06T16:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165006",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'>Comment 1:</a>
???  I didn't have any troubles with this.

```
sage: CDF(1)
1.0
```



---

archive/issue_comments_165007.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI already had this problem the first time I tried building on Cygwin (see [CygwinPort](../wiki/CygwinPort) page) but it magically disappeared the second time so I did not really care.\n\nAs I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.\n\nBut anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).",
    "created_at": "2012-12-06T16:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165007",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:2'>Comment 2:</a>
I already had this problem the first time I tried building on Cygwin (see [CygwinPort](../wiki/CygwinPort) page) but it magically disappeared the second time so I did not really care.

As I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.

But anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).



---

archive/issue_events_177572.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-10T23:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177572"
}
```



---

archive/issue_comments_165008.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nJP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...",
    "created_at": "2012-12-11T02:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165008",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'>Comment 4:</a>
JP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...



---

archive/issue_comments_165009.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOkay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n\nAs to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?",
    "created_at": "2012-12-14T14:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165009",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>Comment 5:</a>
Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.

As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?



---

archive/issue_comments_165010.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2012-12-14T14:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165010",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_165011.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2012-12-14T14:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165011",
    "user": "https://github.com/kcrisman"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_165012.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@kcrisman](#comment%3A5):\n> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n> \n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\nhuh, `mc` ? Midnight Commander? Something else? \nMedical Condition? ;-)",
    "created_at": "2012-12-14T14:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165012",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@kcrisman](#comment%3A5):
> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.
> 
> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?

huh, `mc` ? Midnight Commander? Something else? 
Medical Condition? ;-)



---

archive/issue_comments_165013.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\n> huh, `mc` ? Midnight Commander? Something else? \n> Medical Condition? ;-)\n\nWell, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)",
    "created_at": "2012-12-14T14:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165013",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>Comment 8:</a>
> huh, `mc` ? Midnight Commander? Something else? 
> Medical Condition? ;-)

Well, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)



---

archive/issue_comments_165014.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI don't think the problem is 7 specific.\nAs I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n\nAnd I'm not sure what this is...\nMaybe that's some Cygwin specific version of libm for complex? and md would be for double?",
    "created_at": "2012-12-14T14:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165014",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:9'>Comment 9:</a>
I don't think the problem is 7 specific.
As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.

And I'm not sure what this is...
Maybe that's some Cygwin specific version of libm for complex? and md would be for double?



---

archive/issue_comments_165015.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nMaybe see #9543 as well.",
    "created_at": "2012-12-14T14:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165015",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'>Comment 10:</a>
Maybe see #9543 as well.



---

archive/issue_comments_165016.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [jpflori](#comment%3A9):\n> I don't think the problem is 7 specific.\n> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n> \n> And I'm not sure what this is...\n> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?\n\nMaybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?",
    "created_at": "2012-12-14T14:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165016",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [jpflori](#comment%3A9):
> I don't think the problem is 7 specific.
> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.
> 
> And I'm not sure what this is...
> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?

Maybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?



---

archive/issue_comments_165017.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\nWhen I do this, I don't find it, or `md`, for that matter:\n\n```\n$ls /cygdrive/c/cygwin/lib/libm<tab>\nlibm.a\n<irrelevant stuff>\n```\nand other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.\n\nAnyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.",
    "created_at": "2012-12-14T16:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165017",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'>Comment 12:</a>
> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?

When I do this, I don't find it, or `md`, for that matter:

```
$ls /cygdrive/c/cygwin/lib/libm<tab>
libm.a
<irrelevant stuff>
```
and other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.

Anyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.



---

archive/issue_comments_165018.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\nSee #9543 and #8780.\n\nI think we should try to remove all the Cygwin specific mc and md things.",
    "created_at": "2012-12-14T17:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165018",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:13'>Comment 13:</a>
I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/
See #9543 and #8780.

I think we should try to remove all the Cygwin specific mc and md things.



---

archive/issue_comments_165019.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\n> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n\nIt's certainly possible.\n> I think we should try to remove all the Cygwin specific mc and md things.\n\nLet's please try to do this *after* we get Sage to build on Cygwin reliably, though :)",
    "created_at": "2012-12-14T18:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165019",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'>Comment 14:</a>
> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/

It's certainly possible.
> I think we should try to remove all the Cygwin specific mc and md things.

Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)



---

archive/issue_comments_165020.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@kcrisman](#comment%3A14):\n> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n\n> It's certainly possible.\n> > I think we should try to remove all the Cygwin specific mc and md things.\n\n> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)\n\nSo let's merge the ticket as is!\nit needs review :)",
    "created_at": "2012-12-17T09:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165020",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@kcrisman](#comment%3A14):
> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/

> It's certainly possible.
> > I think we should try to remove all the Cygwin specific mc and md things.

> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)

So let's merge the ticket as is!
it needs review :)



---

archive/issue_comments_165021.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\n> So let's merge the ticket as is!\n> it needs review :)\n\nFair enough, but it's hard for me to check whether I even *have* these libraries.",
    "created_at": "2012-12-17T17:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165021",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>Comment 16:</a>
> So let's merge the ticket as is!
> it needs review :)

Fair enough, but it's hard for me to check whether I even *have* these libraries.



---

archive/issue_events_177573.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177573"
}
```



---

archive/issue_events_177574.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177574"
}
```



---

archive/issue_comments_165022.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nJust got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...",
    "created_at": "2012-12-17T21:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165022",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'>Comment 17:</a>
Just got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...



---

archive/issue_comments_165023.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWooo, I think we have to get back on this one and think a little more.\nIndeed I spotted that the cephes spkg failed to install (although that was not detected properly...).\nSo we have to check two things:\n- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),\n- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).\n\nSo I think we should first:\n- fix the cephes spkg.\nCheck it is not needed on Cygwin anymore, and if so:\n- disable its installation on Cygwin,\n- removed all Cygwin specific code involving libmc and libmd.",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165023",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:18'>Comment 18:</a>
Wooo, I think we have to get back on this one and think a little more.
Indeed I spotted that the cephes spkg failed to install (although that was not detected properly...).
So we have to check two things:
- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),
- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).

So I think we should first:
- fix the cephes spkg.
Check it is not needed on Cygwin anymore, and if so:
- disable its installation on Cygwin,
- removed all Cygwin specific code involving libmc and libmd.



---

archive/issue_events_177575.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177575"
}
```



---

archive/issue_events_177576.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177576"
}
```



---

archive/issue_comments_165024.json:
```json
{
    "body": "Changed keywords from **cygwin** to **cygwin cephes spkg**",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165024",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Changed keywords from **cygwin** to **cygwin cephes spkg**



---

archive/issue_comments_165025.json:
```json
{
    "body": "Work Issues: **cephes spkg**",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165025",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Work Issues: **cephes spkg**



---

archive/issue_comments_165026.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nIn fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).",
    "created_at": "2012-12-18T15:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165026",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:19'>Comment 19:</a>
In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).



---

archive/issue_comments_165027.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\n> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).\n\nThat's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.\n\nI agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.",
    "created_at": "2012-12-18T16:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165027",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'>Comment 20:</a>
> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).

That's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.

I agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.



---

archive/issue_comments_165028.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nI remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)\nI've not looked further or at #9543 again to gather more information.",
    "created_at": "2012-12-18T16:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165028",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:21'>Comment 21:</a>
I remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)
I've not looked further or at #9543 again to gather more information.



---

archive/issue_comments_165029.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nIndeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.\n\n#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?",
    "created_at": "2012-12-18T16:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165029",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:22'>Comment 22:</a>
Indeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.

#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?



---

archive/issue_comments_165030.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nhttp://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html\nmight be of interest for FreeBSD.",
    "created_at": "2012-12-18T16:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165030",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:23'>Comment 23:</a>
http://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html
might be of interest for FreeBSD.



---

archive/issue_comments_165031.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nNo, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.",
    "created_at": "2012-12-18T16:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165031",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'>Comment 24:</a>
No, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.



---

archive/issue_comments_165032.json:
```json
{
    "body": "New version completly discarding Cephes use on Cygwin.",
    "created_at": "2012-12-19T10:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165032",
    "user": "https://github.com/sagetrac-jpflori"
}
```

New version completly discarding Cephes use on Cygwin.



---

archive/issue_comments_165033.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nAttachment: **[trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz)**\n\nHere comes a new patches discarding any Cephes reference on Cygwin.",
    "created_at": "2012-12-19T10:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165033",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:25'>Comment 25:</a>
Attachment: **[trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz)**

Here comes a new patches discarding any Cephes reference on Cygwin.



---

archive/issue_comments_165034.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThis seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?",
    "created_at": "2012-12-19T16:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165034",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'>Comment 26:</a>
This seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?



---

archive/issue_comments_165035.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI think you did install it, or the installation would have failed as for me.\nIt is maybe 7 specific.\nCan you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nBut what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.",
    "created_at": "2012-12-19T16:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165035",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:27'>Comment 27:</a>
I think you did install it, or the installation would have failed as for me.
It is maybe 7 specific.
Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.



---

archive/issue_comments_165036.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\n> I think you did install it, or the installation would have failed as for me.\n> It is maybe 7 specific.\n> Can you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nOh, that's where they lived!  Yes, they are there.\n> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.\n\nAgreed.\n\nPatchbot, apply trac_13806.2.patch",
    "created_at": "2012-12-19T16:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165036",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:28'>Comment 28:</a>
> I think you did install it, or the installation would have failed as for me.
> It is maybe 7 specific.
> Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

Oh, that's where they lived!  Yes, they are there.
> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.

Agreed.

Patchbot, apply trac_13806.2.patch



---

archive/issue_comments_165037.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\n So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n+\n+**Apply** [attachment: trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).\n``````\n",
    "created_at": "2012-12-19T16:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165037",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
 So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.
+
+**Apply** [attachment: trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).
``````




---

archive/issue_events_177577.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177577"
}
```



---

archive/issue_events_177578.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177578"
}
```



---

archive/issue_comments_165038.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nDumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\n```\n'sage/ext/interpreters/interp_cdf.c'],), \n```\nin the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like\n\n```\nsage: integrate(x^2,x,)\n1/3*x^3\n```",
    "created_at": "2012-12-20T18:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165038",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'>Comment 30:</a>
Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

```
'sage/ext/interpreters/interp_cdf.c'],), 
```
in the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like

```
sage: integrate(x^2,x,)
1/3*x^3
```



---

archive/issue_events_177579.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177579"
}
```



---

archive/issue_events_177580.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177580"
}
```



---

archive/issue_comments_165039.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\n> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\nWell, who cares?  It is valid syntax.  I don't want to hold this up.",
    "created_at": "2013-01-03T19:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165039",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'>Comment 31:</a>
> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

Well, who cares?  It is valid syntax.  I don't want to hold this up.



---

archive/issue_comments_165040.json:
```json
{
    "body": "Changed work issues from **cephes spkg** to none",
    "created_at": "2013-01-07T09:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165040",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **cephes spkg** to none



---

archive/issue_comments_165041.json:
```json
{
    "body": "Merged: **sage-5.6.beta3**",
    "created_at": "2013-01-07T20:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-165041",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta3**



---

archive/issue_events_177581.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177581"
}
```



---

archive/issue_events_177582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-177582"
}
```
