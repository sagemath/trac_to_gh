# Issue 13806: Building complex_double.pyx fails on Cygwin

archive/issues_013602.json:
```json
{
    "body": "At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\nSo the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n\n**Apply** [attachment:trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch).\n\n**CC:**  @kcrisman @dimpase\n\n**Keywords:** cygwin cephes spkg\n\n**Reviewer:** Karl-Dieter Crisman\n\n**Author:** Jean-Pierre Flori\n\n**Merged:** sage-5.6.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/13806\n\n",
    "closed_at": "2013-01-07T20:56:28Z",
    "created_at": "2012-12-06T16:25:27Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "title": "Building complex_double.pyx fails on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/13806",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.

**Apply** [attachment:trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch).

**CC:**  @kcrisman @dimpase

**Keywords:** cygwin cephes spkg

**Reviewer:** Karl-Dieter Crisman

**Author:** Jean-Pierre Flori

**Merged:** sage-5.6.beta3

Issue created by migration from https://trac.sagemath.org/ticket/13806





---

archive/issue_comments_164962.json:
```json
{
    "body": "<a id='comment:1'></a>\n???  I didn't have any troubles with this.\n\n```\nsage: CDF(1)\n1.0\n```",
    "created_at": "2012-12-06T16:41:18Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164962",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>
???  I didn't have any troubles with this.

```
sage: CDF(1)
1.0
```



---

archive/issue_comments_164963.json:
```json
{
    "body": "<a id='comment:2'></a>\nI already had this problem the first time I tried building on Cygwin (see [CygwinPort](CygwinPort) page) but it magically disappeared the second time so I did not really care.\n\nAs I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.\n\nBut anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).",
    "created_at": "2012-12-06T16:57:45Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164963",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:2'></a>
I already had this problem the first time I tried building on Cygwin (see [CygwinPort](CygwinPort) page) but it magically disappeared the second time so I did not really care.

As I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.

But anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).



---

archive/issue_events_118395.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-12-10T23:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118395"
}
```



---

archive/issue_comments_164964.json:
```json
{
    "body": "<a id='comment:4'></a>\nJP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...",
    "created_at": "2012-12-11T02:56:33Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164964",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>
JP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...



---

archive/issue_comments_164965.json:
```json
{
    "body": "<a id='comment:5'></a>\nOkay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n\nAs to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?",
    "created_at": "2012-12-14T14:19:34Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164965",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.

As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?



---

archive/issue_comments_164966.json:
```json
{
    "body": "**Reviewer:** Karl-Dieter Crisman",
    "created_at": "2012-12-14T14:19:51Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164966",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Karl-Dieter Crisman



---

archive/issue_comments_164967.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2012-12-14T14:19:51Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164967",
    "user": "https://github.com/kcrisman"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_comments_164968.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [kcrisman](#comment%3A5):\n> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n> \n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\n\nhuh, `mc` ? Midnight Commander? Something else? \nMedical Condition? ;-)",
    "created_at": "2012-12-14T14:29:05Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164968",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
Replying to [kcrisman](#comment%3A5):
> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.
> 
> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?


huh, `mc` ? Midnight Commander? Something else? 
Medical Condition? ;-)



---

archive/issue_comments_164969.json:
```json
{
    "body": "<a id='comment:8'></a>\n> huh, `mc` ? Midnight Commander? Something else? \n> Medical Condition? ;-)\n\n\nWell, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)",
    "created_at": "2012-12-14T14:31:57Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164969",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>
> huh, `mc` ? Midnight Commander? Something else? 
> Medical Condition? ;-)


Well, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)



---

archive/issue_comments_164970.json:
```json
{
    "body": "<a id='comment:9'></a>\nI don't think the problem is 7 specific.\nAs I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n\nAnd I'm not sure what this is...\nMaybe that's some Cygwin specific version of libm for complex? and md would be for double?",
    "created_at": "2012-12-14T14:39:50Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164970",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
I don't think the problem is 7 specific.
As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.

And I'm not sure what this is...
Maybe that's some Cygwin specific version of libm for complex? and md would be for double?



---

archive/issue_comments_164971.json:
```json
{
    "body": "<a id='comment:10'></a>\nMaybe see #9543 as well.",
    "created_at": "2012-12-14T14:41:23Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164971",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
Maybe see #9543 as well.



---

archive/issue_comments_164972.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jpflori](#comment%3A9):\n> I don't think the problem is 7 specific.\n> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n> \n> And I'm not sure what this is...\n> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?\nMaybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?",
    "created_at": "2012-12-14T14:49:09Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164972",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Replying to [jpflori](#comment%3A9):
> I don't think the problem is 7 specific.
> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.
> 
> And I'm not sure what this is...
> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?
Maybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?



---

archive/issue_comments_164973.json:
```json
{
    "body": "<a id='comment:12'></a>\n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\n\nWhen I do this, I don't find it, or `md`, for that matter:\n\n```\n$ls /cygdrive/c/cygwin/lib/libm<tab>\nlibm.a\n<irrelevant stuff>\n```\nand other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.\n\nAnyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.",
    "created_at": "2012-12-14T16:22:15Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164973",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>
> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?


When I do this, I don't find it, or `md`, for that matter:

```
$ls /cygdrive/c/cygwin/lib/libm<tab>
libm.a
<irrelevant stuff>
```
and other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.

Anyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.



---

archive/issue_comments_164974.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\nSee #9543 and #8780.\n\nI think we should try to remove all the Cygwin specific mc and md things.",
    "created_at": "2012-12-14T17:24:48Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164974",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/
See #9543 and #8780.

I think we should try to remove all the Cygwin specific mc and md things.



---

archive/issue_comments_164975.json:
```json
{
    "body": "<a id='comment:14'></a>\n> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n\nIt's certainly possible.\n> I think we should try to remove all the Cygwin specific mc and md things.\n\nLet's please try to do this *after* we get Sage to build on Cygwin reliably, though :)",
    "created_at": "2012-12-14T18:15:16Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164975",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/

It's certainly possible.
> I think we should try to remove all the Cygwin specific mc and md things.

Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)



---

archive/issue_comments_164976.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [kcrisman](#comment%3A14):\n> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n\n> It's certainly possible.\n> > I think we should try to remove all the Cygwin specific mc and md things.\n\n> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)\nSo let's merge the ticket as is!\nit needs review :)",
    "created_at": "2012-12-17T09:53:49Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164976",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>
Replying to [kcrisman](#comment%3A14):
> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/

> It's certainly possible.
> > I think we should try to remove all the Cygwin specific mc and md things.

> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)
So let's merge the ticket as is!
it needs review :)



---

archive/issue_comments_164977.json:
```json
{
    "body": "<a id='comment:16'></a>\n> So let's merge the ticket as is!\n> it needs review :)\n\nFair enough, but it's hard for me to check whether I even *have* these libraries.",
    "created_at": "2012-12-17T17:55:19Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164977",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>
> So let's merge the ticket as is!
> it needs review :)

Fair enough, but it's hard for me to check whether I even *have* these libraries.



---

archive/issue_events_118396.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118396"
}
```



---

archive/issue_events_118397.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118397"
}
```



---

archive/issue_comments_164978.json:
```json
{
    "body": "<a id='comment:17'></a>\nJust got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...",
    "created_at": "2012-12-17T21:13:16Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164978",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>
Just got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...



---

archive/issue_comments_164979.json:
```json
{
    "body": "<a id='comment:18'></a>\nWooo, I think we have to get back on this one and think a little more.\nIndeed I spotted that the cephes spkg failed to install (although that was not detected properly...).\nSo we have to check two things:\n- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),\n- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).\n\nSo I think we should first:\n- fix the cephes spkg.\nCheck it is not needed on Cygwin anymore, and if so:\n- disable its installation on Cygwin,\n- removed all Cygwin specific code involving libmc and libmd.",
    "created_at": "2012-12-18T15:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164979",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
Wooo, I think we have to get back on this one and think a little more.
Indeed I spotted that the cephes spkg failed to install (although that was not detected properly...).
So we have to check two things:
- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),
- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).

So I think we should first:
- fix the cephes spkg.
Check it is not needed on Cygwin anymore, and if so:
- disable its installation on Cygwin,
- removed all Cygwin specific code involving libmc and libmd.



---

archive/issue_events_118398.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118398"
}
```



---

archive/issue_events_118399.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118399"
}
```



---

archive/issue_comments_164980.json:
```json
{
    "body": "**Changing keywords** from \"cygwin\" to \"cygwin cephes spkg\".",
    "created_at": "2012-12-18T15:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Changing keywords** from "cygwin" to "cygwin cephes spkg".



---

archive/issue_comments_164981.json:
```json
{
    "body": "**Work Issues:** cephes spkg",
    "created_at": "2012-12-18T15:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164981",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Work Issues:** cephes spkg



---

archive/issue_comments_164982.json:
```json
{
    "body": "<a id='comment:19'></a>\nIn fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).",
    "created_at": "2012-12-18T15:58:57Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164982",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).



---

archive/issue_comments_164983.json:
```json
{
    "body": "<a id='comment:20'></a>\n> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).\n\n\nThat's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.\n\nI agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.",
    "created_at": "2012-12-18T16:01:37Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164983",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).


That's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.

I agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.



---

archive/issue_comments_164984.json:
```json
{
    "body": "<a id='comment:21'></a>\nI remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)\nI've not looked further or at #9543 again to gather more information.",
    "created_at": "2012-12-18T16:06:25Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164984",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
I remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)
I've not looked further or at #9543 again to gather more information.



---

archive/issue_comments_164985.json:
```json
{
    "body": "<a id='comment:22'></a>\nIndeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.\n\n#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?",
    "created_at": "2012-12-18T16:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164985",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:22'></a>
Indeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.

#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?



---

archive/issue_comments_164986.json:
```json
{
    "body": "<a id='comment:23'></a>\nhttp://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html\nmight be of interest for FreeBSD.",
    "created_at": "2012-12-18T16:33:53Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164986",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:23'></a>
http://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html
might be of interest for FreeBSD.



---

archive/issue_comments_164987.json:
```json
{
    "body": "<a id='comment:24'></a>\nNo, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.",
    "created_at": "2012-12-18T16:53:34Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164987",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:24'></a>
No, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.



---

archive/issue_comments_164988.json:
```json
{
    "body": "New version completly discarding Cephes use on Cygwin.",
    "created_at": "2012-12-19T10:44:18Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164988",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

New version completly discarding Cephes use on Cygwin.



---

archive/attachments_019309.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13806.2.patch",
    "asset_url": "tarball://root/attachments/ticket13806/trac_13806.2.patch",
    "created_at": "2012-12-19T10:44:44Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```



---

archive/issue_comments_164989.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Attachment:** [trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch)\n\nHere comes a new patches discarding any Cephes reference on Cygwin.",
    "created_at": "2012-12-19T10:44:44Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164989",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>
**Attachment:** [trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch)

Here comes a new patches discarding any Cephes reference on Cygwin.



---

archive/issue_comments_164990.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?",
    "created_at": "2012-12-19T16:18:06Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164990",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:26'></a>
This seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?



---

archive/issue_comments_164991.json:
```json
{
    "body": "<a id='comment:27'></a>\nI think you did install it, or the installation would have failed as for me.\nIt is maybe 7 specific.\nCan you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nBut what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.",
    "created_at": "2012-12-19T16:20:21Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164991",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
I think you did install it, or the installation would have failed as for me.
It is maybe 7 specific.
Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.



---

archive/issue_comments_164992.json:
```json
{
    "body": "<a id='comment:28'></a>\n> I think you did install it, or the installation would have failed as for me.\n> It is maybe 7 specific.\n> Can you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nOh, that's where they lived!  Yes, they are there.\n> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.\n\nAgreed.\n\nPatchbot, apply trac_13806.2.patch",
    "created_at": "2012-12-19T16:29:58Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164992",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:28'></a>
> I think you did install it, or the installation would have failed as for me.
> It is maybe 7 specific.
> Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

Oh, that's where they lived!  Yes, they are there.
> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.

Agreed.

Patchbot, apply trac_13806.2.patch



---

archive/issue_comments_164993.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\n So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n+\n+**Apply** [attachment:trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch).\n``````\n",
    "created_at": "2012-12-19T16:29:58Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164993",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
 So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.
+
+**Apply** [attachment:trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch).
``````




---

archive/issue_events_118400.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118400"
}
```



---

archive/issue_events_118401.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118401"
}
```



---

archive/issue_comments_164994.json:
```json
{
    "body": "<a id='comment:30'></a>\nDumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\n```\n'sage/ext/interpreters/interp_cdf.c'],), \n```\nin the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like\n\n```\nsage: integrate(x^2,x,)\n1/3*x^3\n```",
    "created_at": "2012-12-20T18:19:06Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164994",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'></a>
Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

```
'sage/ext/interpreters/interp_cdf.c'],), 
```
in the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like

```
sage: integrate(x^2,x,)
1/3*x^3
```



---

archive/issue_events_118402.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118402"
}
```



---

archive/issue_events_118403.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118403"
}
```



---

archive/issue_comments_164995.json:
```json
{
    "body": "<a id='comment:31'></a>\n> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\nWell, who cares?  It is valid syntax.  I don't want to hold this up.",
    "created_at": "2013-01-03T19:53:13Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164995",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'></a>
> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

Well, who cares?  It is valid syntax.  I don't want to hold this up.



---

archive/issue_comments_164996.json:
```json
{
    "body": "**Changing work issues** from \"cephes spkg\" to \"\".",
    "created_at": "2013-01-07T09:24:22Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164996",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "cephes spkg" to "".



---

archive/issue_comments_164997.json:
```json
{
    "body": "**Merged:** sage-5.6.beta3",
    "created_at": "2013-01-07T20:56:28Z",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-164997",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.6.beta3



---

archive/issue_events_118404.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118404"
}
```



---

archive/issue_events_118405.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-118405"
}
```
