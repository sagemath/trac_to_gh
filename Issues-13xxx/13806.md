# Issue 13806: Building complex_double.pyx fails on Cygwin

archive/issues_013602.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nAt some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\nSo the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n\n**Apply** [attachment: trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).\n\nCC:  @kcrisman @dimpase\n\nComponent: **porting: Cygwin**\n\nKeywords: **cygwin cephes spkg**\n\nAuthor: **Jean-Pierre Flori**\n\nReviewer: **Karl-Dieter Crisman**\n\nMerged: **sage-5.6.beta3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13806_\n\n",
    "closed_at": "2013-01-07T20:56:28Z",
    "created_at": "2012-12-06T16:25:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Building complex_double.pyx fails on Cygwin",
    "type": "issue",
    "updated_at": "2013-01-07T20:56:28Z",
    "url": "https://github.com/sagemath/sage/issues/13806",
    "user": "https://github.com/jpflori"
}
```
<div id="comment:0"></div>

At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.

**Apply** [attachment: trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).

CC:  @kcrisman @dimpase

Component: **porting: Cygwin**

Keywords: **cygwin cephes spkg**

Author: **Jean-Pierre Flori**

Reviewer: **Karl-Dieter Crisman**

Merged: **sage-5.6.beta3**

_Issue created by migration from https://trac.sagemath.org/ticket/13806_





---

archive/issue_events_191798.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191798"
}
```



---

archive/issue_events_191799.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191799"
}
```



---

archive/issue_events_191800.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191800"
}
```



---

archive/issue_events_191801.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191801"
}
```



---

archive/issue_events_191802.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-06T16:25:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "0000b0",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191802"
}
```



---

archive/issue_comments_162608.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n???  I didn't have any troubles with this.\n\n```\nsage: CDF(1)\n1.0\n```",
    "created_at": "2012-12-06T16:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162608",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

???  I didn't have any troubles with this.

```
sage: CDF(1)
1.0
```



---

archive/issue_comments_162609.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI already had this problem the first time I tried building on Cygwin (see [CygwinPort](../wiki/CygwinPort) page) but it magically disappeared the second time so I did not really care.\n\nAs I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.\n\nBut anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).",
    "created_at": "2012-12-06T16:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162609",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

I already had this problem the first time I tried building on Cygwin (see [CygwinPort](../wiki/CygwinPort) page) but it magically disappeared the second time so I did not really care.

As I wrote in the description I think the lib got installed by some Cygwin package between my two attempts.

But anyway, everything buids fine without linking to that lib, so its definitely useless and dangerous to leave 'mc' in these file dependencies (there is the same problem with the complex_... file generated by gen_interpreters.py).



---

archive/issue_events_191803.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-10T23:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191803"
}
```



---

archive/issue_comments_162610.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nJP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...",
    "created_at": "2012-12-11T02:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162610",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

JP, am I correct in seeing that this patch only affects Cygwin-only code in any case?  I find the different syntax for the two files irksome, but they both make sense.   I can't test this right now but will try to do so tomorrow.  How do I check whether I even have `mc`?  I guess I must since this didn't cause trouble on my machine...



---

archive/issue_comments_162611.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOkay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n\nAs to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?",
    "created_at": "2012-12-14T14:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162611",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.

As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?



---

archive/issue_comments_162612.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman**",
    "created_at": "2012-12-14T14:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162612",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman**



---

archive/issue_comments_162613.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2012-12-14T14:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162613",
    "user": "https://github.com/kcrisman"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_162614.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kcrisman](#comment%3A5):\n> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.\n> \n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\nhuh, `mc` ? Midnight Commander? Something else? \nMedical Condition? ;-)",
    "created_at": "2012-12-14T14:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162614",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kcrisman](#comment%3A5):
> Okay, I checked this an it's so.  Positive review on the patch part - it should not affect any other systems.
> 
> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?

huh, `mc` ? Midnight Commander? Something else? 
Medical Condition? ;-)



---

archive/issue_comments_162615.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n> huh, `mc` ? Midnight Commander? Something else? \n> Medical Condition? ;-)\n\nWell, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)",
    "created_at": "2012-12-14T14:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162615",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

> huh, `mc` ? Midnight Commander? Something else? 
> Medical Condition? ;-)

Well, I have no idea!  Though I suspect not these... maybe Multiplication, Complex.  Did you read the patch?  It's some library I've never heard of (which describes most libraries, but still...)



---

archive/issue_comments_162616.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't think the problem is 7 specific.\nAs I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n\nAnd I'm not sure what this is...\nMaybe that's some Cygwin specific version of libm for complex? and md would be for double?",
    "created_at": "2012-12-14T14:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162616",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't think the problem is 7 specific.
As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.

And I'm not sure what this is...
Maybe that's some Cygwin specific version of libm for complex? and md would be for double?



---

archive/issue_comments_162617.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMaybe see #9543 as well.",
    "created_at": "2012-12-14T14:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162617",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

Maybe see #9543 as well.



---

archive/issue_comments_162618.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jpflori](#comment%3A9):\n> I don't think the problem is 7 specific.\n> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.\n> \n> And I'm not sure what this is...\n> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?\n\nMaybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?",
    "created_at": "2012-12-14T14:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162618",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jpflori](#comment%3A9):
> I don't think the problem is 7 specific.
> As I mentioned before i think the problem that libmc is installed by a quite common package that I did not install myself, as I use a fresh and minimal Cygwin setup.
> 
> And I'm not sure what this is...
> Maybe that's some Cygwin specific version of libm for complex? and md would be for double?

Maybe.  Do the files in question actually test ok on your Cygwin without this `libmc`?



---

archive/issue_comments_162619.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has \"mc\" somehow?\n\nWhen I do this, I don't find it, or `md`, for that matter:\n\n```\n$ls /cygdrive/c/cygwin/lib/libm<tab>\nlibm.a\n<irrelevant stuff>\n```\nand other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.\n\nAnyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.",
    "created_at": "2012-12-14T16:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162619",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:12" align="right">comment:12</div>

> As to whether it works... I have no way of checking this on Windows 7.  I don't even have this problem on XP, though I will try to check that it's not evil.  How do I see whether my Cygwin has "mc" somehow?

When I do this, I don't find it, or `md`, for that matter:

```
$ls /cygdrive/c/cygwin/lib/libm<tab>
libm.a
<irrelevant stuff>
```
and other directories with `lib` also have either nothing or at any rate nothing related, including not `libm`.

Anyway, this file passes some tests for me, though it gives a different answer for one of the algdep things and gives annoying errors about being unable to start pari because `gp --emacs --quiet --stacksize 1000000 failed`.   Is it possible that this is not possible to do in this (our Cygwin Sage) setup?  But it looks like the standard way for our pexpect interface, and doing this command by hand `./sage -gp ...` works fine.



---

archive/issue_comments_162620.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\nSee #9543 and #8780.\n\nI think we should try to remove all the Cygwin specific mc and md things.",
    "created_at": "2012-12-14T17:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162620",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/
See #9543 and #8780.

I think we should try to remove all the Cygwin specific mc and md things.



---

archive/issue_comments_162621.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n\nIt's certainly possible.\n> I think we should try to remove all the Cygwin specific mc and md things.\n\nLet's please try to do this *after* we get Sage to build on Cygwin reliably, though :)",
    "created_at": "2012-12-14T18:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162621",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

> I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/

It's certainly possible.
> I think we should try to remove all the Cygwin specific mc and md things.

Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)



---

archive/issue_comments_162622.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@kcrisman](#comment%3A14):\n> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/\n> \n> It's certainly possible.\n> > I think we should try to remove all the Cygwin specific mc and md things.\n> \n> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)\n\nSo let's merge the ticket as is!\nit needs review :)",
    "created_at": "2012-12-17T09:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162622",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@kcrisman](#comment%3A14):
> > I think the libm* problems are from the time the Cygwin's libm was not C99 compliant or something like that and we needed cephes at http://www.netlib.org/cephes/
> 
> It's certainly possible.
> > I think we should try to remove all the Cygwin specific mc and md things.
> 
> Let's please try to do this *after* we get Sage to build on Cygwin reliably, though :)

So let's merge the ticket as is!
it needs review :)



---

archive/issue_comments_162623.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> So let's merge the ticket as is!\n> it needs review :)\n\nFair enough, but it's hard for me to check whether I even *have* these libraries.",
    "created_at": "2012-12-17T17:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162623",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

> So let's merge the ticket as is!
> it needs review :)

Fair enough, but it's hard for me to check whether I even *have* these libraries.



---

archive/issue_events_191804.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191804"
}
```



---

archive/issue_events_191805.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-12-17T21:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191805"
}
```



---

archive/issue_comments_162624.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nJust got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...",
    "created_at": "2012-12-17T21:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162624",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">comment:17</div>

Just got past `complex_double.o` in compiling with this patch (it had been blocked at the algebras/letterplace stuff, so cleanly), so presumably the lack of the library isn't a problem.  I'll assume this is indeed necessary on Win 7, though if Dima could independently verify this it would be nice...



---

archive/issue_comments_162625.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWooo, I think we have to get back on this one and think a little more.\nIndeed I spotted that the cephes spkg failed to install (although that was not detected properly...).\nSo we have to check two things:\n- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),\n- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).\n\nSo I think we should first:\n- fix the cephes spkg.\nCheck it is not needed on Cygwin anymore, and if so:\n- disable its installation on Cygwin,\n- removed all Cygwin specific code involving libmc and libmd.",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162625",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

Wooo, I think we have to get back on this one and think a little more.
Indeed I spotted that the cephes spkg failed to install (although that was not detected properly...).
So we have to check two things:
- why the cephes spkg fails (if it succeeds, it will provide libmc and libmd),
- if the cephes spkg is really needed, indeed as I mentioned before, I think that the libm provided by Cygwin is now C99 compliant (enough) and cephes is not needed anymore (and I don't think keeping it in case one wants to build Sage on a very old Cygwin with a poor libm is any kind of justification).

So I think we should first:
- fix the cephes spkg.
Check it is not needed on Cygwin anymore, and if so:
- disable its installation on Cygwin,
- removed all Cygwin specific code involving libmc and libmd.



---

archive/issue_events_191806.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191806"
}
```



---

archive/issue_events_191807.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-18T15:57:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191807"
}
```



---

archive/issue_comments_162626.json:
```json
{
    "body": "Changed keywords from none to **cygwin cephes spkg**",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162626",
    "user": "https://github.com/jpflori"
}
```

Changed keywords from none to **cygwin cephes spkg**



---

archive/issue_comments_162627.json:
```json
{
    "body": "Work Issues: **cephes spkg**",
    "created_at": "2012-12-18T15:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162627",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **cephes spkg**



---

archive/issue_comments_162628.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIn fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).",
    "created_at": "2012-12-18T15:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162628",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).



---

archive/issue_comments_162629.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).\n\nThat's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.\n\nI agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.",
    "created_at": "2012-12-18T16:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162629",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

> In fact cephes is currently only used on Cygwin, so if it is not needed, it should be removed completely (and we could as well not waste time fixing it).

That's not quite correct - see #9543.  So I would be happy to disable it on Cygwin, but not in general.

I agree that we should only support the newest Cygwin, given that this would primarily be used in binary form.



---

archive/issue_comments_162630.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)\nI've not looked further or at #9543 again to gather more information.",
    "created_at": "2012-12-18T16:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162630",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:21" align="right">comment:21</div>

I remember of #9543, but I worte my previous post after reading the first lines of spkg-install which states that is only installed on Cygwin :)
I've not looked further or at #9543 again to gather more information.



---

archive/issue_comments_162631.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIndeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.\n\n#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?",
    "created_at": "2012-12-18T16:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162631",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

Indeed there is no error checking at all in the spkg-install script and it is only installed on Cygwin.

#9543 is two years old, potentially the FreeBSD libm has gotten better since then just as the Cygwin one?



---

archive/issue_comments_162632.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nhttp://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html\nmight be of interest for FreeBSD.",
    "created_at": "2012-12-18T16:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162632",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:23" align="right">comment:23</div>

http://freebsd.1045724.n5.nabble.com/Use-of-C99-extra-long-double-math-functions-after-r236148-td5712748.html
might be of interest for FreeBSD.



---

archive/issue_comments_162633.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNo, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.",
    "created_at": "2012-12-18T16:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162633",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

No, see [this FreeBSD port patch](http://www.freebsd.org/cgi/cvsweb.cgi/ports/math/sage/files/spkg-patch-cephes_-_big-patch?annotate=1.1) which is basically #9543's patch and which afaik is definitely still needed on FreeBSD.  I'll put that link on #9543, though, in case it turns out to be useful.



---

archive/issue_comments_162634.json:
```json
{
    "body": "New version completly discarding Cephes use on Cygwin.",
    "created_at": "2012-12-19T10:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162634",
    "user": "https://github.com/jpflori"
}
```

New version completly discarding Cephes use on Cygwin.



---

archive/issue_comments_162635.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz)**\n\nHere comes a new patches discarding any Cephes reference on Cygwin.",
    "created_at": "2012-12-19T10:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162635",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[trac_13806.2.patch.gz](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz)**

Here comes a new patches discarding any Cephes reference on Cygwin.



---

archive/issue_comments_162636.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThis seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?",
    "created_at": "2012-12-19T16:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162636",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

This seems to work fine with `./sage -ba` on Cygwin.  Interesting that we never actually installed Cephes - do I understand you correctly?



---

archive/issue_comments_162637.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI think you did install it, or the installation would have failed as for me.\nIt is maybe 7 specific.\nCan you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nBut what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.",
    "created_at": "2012-12-19T16:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162637",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:27" align="right">comment:27</div>

I think you did install it, or the installation would have failed as for me.
It is maybe 7 specific.
Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.



---

archive/issue_comments_162638.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> I think you did install it, or the installation would have failed as for me.\n> It is maybe 7 specific.\n> Can you check for \"$SAGE_LOCAL/lib/libm[c|d].a\" ?\n\nOh, that's where they lived!  Yes, they are there.\n> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.\n\nAgreed.\n\nPatchbot, apply trac_13806.2.patch",
    "created_at": "2012-12-19T16:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162638",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:28" align="right">comment:28</div>

> I think you did install it, or the installation would have failed as for me.
> It is maybe 7 specific.
> Can you check for "$SAGE_LOCAL/lib/libm[c|d].a" ?

Oh, that's where they lived!  Yes, they are there.
> But what you just pointed out and confirmed is that linking to these files (and so installing Cephes) is not needed anymore on Cygwin.

Agreed.

Patchbot, apply trac_13806.2.patch



---

archive/issue_comments_162639.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.\n So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.\n+\n+**Apply** [attachment: trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).\n``````\n",
    "created_at": "2012-12-19T16:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162639",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 At some point a dependency on the mc library was added, but this is not available by default on Cygwin (this surely lives in a very common and useful package, but I've reinstalled Cygwin recently and it has not appeared yet) and is not needed anyway.
 So the dependency should be removed thus avoiding overlinking and build failure where this lib is not available.
+
+**Apply** [attachment: trac_13806.2.patch](https://github.com/sagemath/sage/files/ticket13806/trac_13806.2.patch.gz).
``````




---

archive/issue_events_191808.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191808"
}
```



---

archive/issue_events_191809.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-20T14:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191809"
}
```



---

archive/issue_comments_162640.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nDumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\n```\n'sage/ext/interpreters/interp_cdf.c'],), \n```\nin the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like\n\n```\nsage: integrate(x^2,x,)\n1/3*x^3\n```",
    "created_at": "2012-12-20T18:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162640",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:30" align="right">comment:30</div>

Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

```
'sage/ext/interpreters/interp_cdf.c'],), 
```
in the new code.  I assume that as usual Python tuples can end with commas, so it doesn't affect anything, but it looks a little silly, like

```
sage: integrate(x^2,x,)
1/3*x^3
```



---

archive/issue_events_191810.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191810"
}
```



---

archive/issue_events_191811.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-01-03T19:53:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191811"
}
```



---

archive/issue_comments_162641.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.\n\nWell, who cares?  It is valid syntax.  I don't want to hold this up.",
    "created_at": "2013-01-03T19:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162641",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:31" align="right">comment:31</div>

> Dumb question:  Even though this patch worked fine, there seems to be an extraneous comma.

Well, who cares?  It is valid syntax.  I don't want to hold this up.



---

archive/issue_comments_162642.json:
```json
{
    "body": "Changed work issues from **cephes spkg** to none",
    "created_at": "2013-01-07T09:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162642",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **cephes spkg** to none



---

archive/issue_comments_162643.json:
```json
{
    "body": "Merged: **sage-5.6.beta3**",
    "created_at": "2013-01-07T20:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13806#issuecomment-162643",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.6.beta3**



---

archive/issue_events_191812.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191812"
}
```



---

archive/issue_events_191813.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-07T20:56:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13806#event-191813"
}
```
