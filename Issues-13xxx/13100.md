# Issue 13100: EllipticCurve_from_j (over QQ) should not always compute minimal twist

archive/issues_012928.json:
```json
{
    "body": "Currently when constructing an elliptic curve from a j-invariant over QQ,  a curve with minimal conductor is created (the so-called \"minimal twist\").  This could be expensive since it involves factoring j and j-1728, so an option to *not* find the minimal twist should be allowed, with the current behaviour as default for backwards compatibility.\n\nFor example:\n\n```\nsage: EllipticCurve(j=2^256+1)\n```\ncurrently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).\n\nApply [attachment:trac13100-elliptic-rebased.patch].\n\n**Assignee:** @JohnCremona\n\n**CC:**  @roed314 @vbraun\n\n**Keywords:** elliptic curve construction\n\n**Reviewer:** David Roe\n\n**Author:** John Cremona\n\n**Merged:** sage-5.3.beta0\n\n**Dependencies:** #13109\n\nIssue created by migration from https://trac.sagemath.org/ticket/13100\n\n",
    "closed_at": "2012-08-01T12:11:47Z",
    "created_at": "2012-06-10T15:48:29Z",
    "labels": [
        "component: elliptic curves",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "EllipticCurve_from_j (over QQ) should not always compute minimal twist",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13100",
    "user": "https://github.com/JohnCremona"
}
```
Currently when constructing an elliptic curve from a j-invariant over QQ,  a curve with minimal conductor is created (the so-called "minimal twist").  This could be expensive since it involves factoring j and j-1728, so an option to *not* find the minimal twist should be allowed, with the current behaviour as default for backwards compatibility.

For example:

```
sage: EllipticCurve(j=2^256+1)
```
currently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).

Apply [attachment:trac13100-elliptic-rebased.patch].

**Assignee:** @JohnCremona

**CC:**  @roed314 @vbraun

**Keywords:** elliptic curve construction

**Reviewer:** David Roe

**Author:** John Cremona

**Merged:** sage-5.3.beta0

**Dependencies:** #13109

Issue created by migration from https://trac.sagemath.org/ticket/13100





---

archive/issue_comments_186266.json:
```json
{
    "body": "Applies to 5.1.beta3",
    "created_at": "2012-06-10T17:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186266",
    "user": "https://github.com/JohnCremona"
}
```

Applies to 5.1.beta3



---

archive/issue_comments_186267.json:
```json
{
    "body": "**Author:** John Cremona",
    "created_at": "2012-06-10T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186267",
    "user": "https://github.com/JohnCremona"
}
```

**Author:** John Cremona



---

archive/attachments_017689.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13100-elliptic.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13100/trac13100-elliptic.patch",
    "created_at": "2012-06-10T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/JohnCremona"
}
```



---

archive/issue_comments_186268.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe patch fixes this, and also the issue at #11773 which can be closed as a duplicate.",
    "created_at": "2012-06-10T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186268",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>
The patch fixes this, and also the issue at #11773 which can be closed as a duplicate.



---

archive/issue_comments_186269.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2012-06-10T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186269",
    "user": "https://github.com/JohnCremona"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_186270.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis looks fine to me.  I have no idea what the doctest failing on patchbot is about.  Patchbot is also complaining about trailing whitespace....",
    "created_at": "2012-06-11T08:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186270",
    "user": "https://github.com/roed314"
}
```

<a id='comment:2'></a>
This looks fine to me.  I have no idea what the doctest failing on patchbot is about.  Patchbot is also complaining about trailing whitespace....



---

archive/issue_comments_186271.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2012-06-11T08:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186271",
    "user": "https://github.com/roed314"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_186272.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [roed](#comment%3A2):\n> This looks fine to me.  I have no idea what the doctest failing on patchbot is about.  Patchbot is also complaining about trailing whitespace....\n\n\n I removed trailing whitespace on lines I edited (or nearby) but not on the whole file as that makes it harder for reviewers to see what has changed.  Of course I could go back and remove the rest.  Does patchbot tell us what tests actually fail?",
    "created_at": "2012-06-11T08:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186272",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>
Replying to [roed](#comment%3A2):
> This looks fine to me.  I have no idea what the doctest failing on patchbot is about.  Patchbot is also complaining about trailing whitespace....


 I removed trailing whitespace on lines I edited (or nearby) but not on the whole file as that makes it harder for reviewers to see what has changed.  Of course I could go back and remove the rest.  Does patchbot tell us what tests actually fail?



---

archive/issue_comments_186273.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe patchbot will tell you if you click on the yellow disc (or whatever other color it might be), then click on \"shortlog.\"\n\nI ran the tests on my own machine and am not getting the same failure patchbot is.  Since I have no idea why your changes would cause a problem in sage.misc.trace, I'm going to give it a positive review.",
    "created_at": "2012-06-11T16:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186273",
    "user": "https://github.com/roed314"
}
```

<a id='comment:4'></a>
The patchbot will tell you if you click on the yellow disc (or whatever other color it might be), then click on "shortlog."

I ran the tests on my own machine and am not getting the same failure patchbot is.  Since I have no idea why your changes would cause a problem in sage.misc.trace, I'm going to give it a positive review.



---

archive/issue_comments_186274.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2012-06-11T16:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186274",
    "user": "https://github.com/roed314"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_186275.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [roed](#comment%3A4):\n> The patchbot will tell you if you click on the yellow disc (or whatever other color it might be), then click on \"shortlog.\"\n> \n> I ran the tests on my own machine and am not getting the same failure patchbot is.  Since I have no idea why your changes would cause a problem in sage.misc.trace, I'm going to give it a positive review.\n\n\nThanks.  I agree that the failure reported by patchbot has nothing to do with this ticket.",
    "created_at": "2012-06-15T11:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186275",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
Replying to [roed](#comment%3A4):
> The patchbot will tell you if you click on the yellow disc (or whatever other color it might be), then click on "shortlog."
> 
> I ran the tests on my own machine and am not getting the same failure patchbot is.  Since I have no idea why your changes would cause a problem in sage.misc.trace, I'm going to give it a positive review.


Thanks.  I agree that the failure reported by patchbot has nothing to do with this ticket.



---

archive/issue_comments_186276.json:
```json
{
    "body": "**Reviewer:** David Roe",
    "created_at": "2012-06-18T13:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186276",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** David Roe



---

archive/issue_events_041584.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-18T13:37:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41584"
}
```



---

archive/issue_comments_186277.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2012-06-30T17:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186277",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_186278.json:
```json
{
    "body": "**Dependencies:** #13109",
    "created_at": "2012-06-30T17:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186278",
    "user": "https://github.com/jhpalmieri"
}
```

**Dependencies:** #13109



---

archive/issue_comments_186279.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,5 @@\n sage: EllipticCurve(j=2^256+1)\n ```\n currently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).\n+\n+Apply [attachment:trac13100-elliptic.patch] and [attachment:trac13100-rebase-on-13109.patch].\n``````\n",
    "created_at": "2012-06-30T17:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186279",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,5 @@
 sage: EllipticCurve(j=2^256+1)
 ```
 currently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).
+
+Apply [attachment:trac13100-elliptic.patch] and [attachment:trac13100-rebase-on-13109.patch].
``````




---

archive/issue_comments_186280.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis needs to be rebased to #13109. Patch attached, and I've cc'ed Volker, who should be able to review it quickly.",
    "created_at": "2012-06-30T17:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186280",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
This needs to be rebased to #13109. Patch attached, and I've cc'ed Volker, who should be able to review it quickly.



---

archive/issue_comments_186281.json:
```json
{
    "body": "fix a deprecation",
    "created_at": "2012-06-30T17:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186281",
    "user": "https://github.com/jhpalmieri"
}
```

fix a deprecation



---

archive/issue_comments_186282.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2012-06-30T17:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186282",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_017690.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13100-rebase-on-13109.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13100/trac13100-rebase-on-13109.patch",
    "created_at": "2012-06-30T17:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jhpalmieri"
}
```



---

archive/issue_comments_186283.json:
```json
{
    "body": "<a id='comment:8'></a>\n",
    "created_at": "2012-06-30T17:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186283",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>




---

archive/issue_comments_186284.json:
```json
{
    "body": "<a id='comment:9'></a>\nJohn, trac13100-elliptic.patch conflicts with my version of #13109.",
    "created_at": "2012-06-30T19:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186284",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
John, trac13100-elliptic.patch conflicts with my version of #13109.



---

archive/issue_comments_186285.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [vbraun](#comment%3A9):\n> John, trac13100-elliptic.patch conflicts with my version of #13109. \n\n\nI understand, but doesn't Joh Palmieri's patch fix it (thanks John)?",
    "created_at": "2012-06-30T19:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186285",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
Replying to [vbraun](#comment%3A9):
> John, trac13100-elliptic.patch conflicts with my version of #13109. 


I understand, but doesn't Joh Palmieri's patch fix it (thanks John)?



---

archive/attachments_017691.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13100-elliptic-rebased.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13100/trac13100-elliptic-rebased.patch",
    "created_at": "2012-06-30T19:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jhpalmieri"
}
```



---

archive/issue_comments_186286.json:
```json
{
    "body": "",
    "created_at": "2012-06-30T19:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186286",
    "user": "https://github.com/jhpalmieri"
}
```





---

archive/issue_comments_186287.json:
```json
{
    "body": "<a id='comment:11'></a>\nSorry, try this one instead. (I got this one confused with another ticket dealing with elliptic curves.)",
    "created_at": "2012-06-30T19:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186287",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
Sorry, try this one instead. (I got this one confused with another ticket dealing with elliptic curves.)



---

archive/issue_comments_186288.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ```\n currently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).\n \n-Apply [attachment:trac13100-elliptic.patch] and [attachment:trac13100-rebase-on-13109.patch].\n+Apply [attachment:trac13100-elliptic-rebased.patch].\n``````\n",
    "created_at": "2012-06-30T19:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186288",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ```
 currently triggers factorization of `F_8` (which is quite quick) but also `F_8-1728` (which is not).
 
-Apply [attachment:trac13100-elliptic.patch] and [attachment:trac13100-rebase-on-13109.patch].
+Apply [attachment:trac13100-elliptic-rebased.patch].
``````




---

archive/issue_comments_186289.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2012-06-30T19:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186289",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_186290.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis is just a rebasing, so I don't think it needs review.",
    "created_at": "2012-06-30T19:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186290",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
This is just a rebasing, so I don't think it needs review.



---

archive/issue_events_041585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-01T18:51:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41585"
}
```



---

archive/issue_events_041586.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-01T18:51:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41586"
}
```



---

archive/issue_events_041587.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T20:24:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41587"
}
```



---

archive/issue_events_041588.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-27T20:24:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41588"
}
```



---

archive/issue_events_041589.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-01T12:11:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13100#event-41589"
}
```



---

archive/issue_comments_186291.json:
```json
{
    "body": "**Merged:** sage-5.3.beta0",
    "created_at": "2012-08-01T12:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13100#issuecomment-186291",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.3.beta0
