# Issue 13972: Implement the inverse of the method area_dinv_to_bounce_area_map in dyck_word.py

archive/issues_013768.json:
```json
{
    "body": "In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.\n\nAssignee: @zabrocki\n\nCC:  dorota@yorku.ca stumpc5\n\nKeywords: dyck_words\n\nReviewer: Christian Stump, Dorota Mazur\n\nAuthor: Mike Zabrocki\n\nMerged: sage-5.7.beta1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13972\n\n",
    "closed_at": "2013-01-25T13:08:03Z",
    "created_at": "2013-01-19T12:25:14Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Implement the inverse of the method area_dinv_to_bounce_area_map in dyck_word.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13972",
    "user": "https://github.com/zabrocki"
}
```
In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.

Assignee: @zabrocki

CC:  dorota@yorku.ca stumpc5

Keywords: dyck_words

Reviewer: Christian Stump, Dorota Mazur

Author: Mike Zabrocki

Merged: sage-5.7.beta1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13972





---

archive/issue_comments_213011.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-01-19T13:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213011",
    "user": "https://github.com/zabrocki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213012.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.\n+In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.  The map area_dinv_to_bounce_area_map is also modified and made slightly shorter.\n \n Author: zabrocki\n \n``````\n",
    "created_at": "2013-01-19T13:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213012",
    "user": "https://github.com/zabrocki"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.
+In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.  The map area_dinv_to_bounce_area_map is also modified and made slightly shorter.
 
 Author: zabrocki
 
``````




---

archive/issue_comments_213013.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.\n \n Author: zabrocki\n \n``````\n",
    "created_at": "2013-01-19T15:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213013",
    "user": "https://github.com/zabrocki"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.
 
 Author: zabrocki
 
``````




---

archive/issue_comments_213014.json:
```json
{
    "body": "<a id='comment:2'></a>I restored the code for `area_dinv_to_bounce_area_map` because of the following timing tests.\nOriginal:\n\n```\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]') \n5 loops, best of 3: 62.3 ms per loop\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]') \n5 loops, best of 3: 220 ms per loop\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')\n5 loops, best of 3: 793 ms per loop\n```\nMy version:\n\n```\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]')\n5 loops, best of 3: 82.2 ms per loop\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]')\n5 loops, best of 3: 303 ms per loop\nsage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')\n5 loops, best of 3: 1.1 s per loop\n```\nThe difference is probably due to the fact that my version had to call `to_area_sequence` and then output the `DyckWord` using the area sequence that it constructed.",
    "created_at": "2013-01-19T15:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213014",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:2'></a>I restored the code for `area_dinv_to_bounce_area_map` because of the following timing tests.
Original:

```
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]') 
5 loops, best of 3: 62.3 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]') 
5 loops, best of 3: 220 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')
5 loops, best of 3: 793 ms per loop
```
My version:

```
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]')
5 loops, best of 3: 82.2 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]')
5 loops, best of 3: 303 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')
5 loops, best of 3: 1.1 s per loop
```
The difference is probably due to the fact that my version had to call `to_area_sequence` and then output the `DyckWord` using the area sequence that it constructed.



---

archive/issue_comments_213015.json:
```json
{
    "body": "<a id='comment:3'></a>Attachment [trac_13972_dyck_word_bounce_area_dinv_inverse-mz.patch](tarball://root/attachments/some-uuid/ticket13972/trac_13972_dyck_word_bounce_area_dinv_inverse-mz.patch) by @zabrocki created at 2013-01-19 16:07:02\n\nI just figured a way to speed up `bounce_area_to_area_dinv_map` based on my last comment.  Its not a major difference, but it helps.",
    "created_at": "2013-01-19T16:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213015",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:3'></a>Attachment [trac_13972_dyck_word_bounce_area_dinv_inverse-mz.patch](tarball://root/attachments/some-uuid/ticket13972/trac_13972_dyck_word_bounce_area_dinv_inverse-mz.patch) by @zabrocki created at 2013-01-19 16:07:02

I just figured a way to speed up `bounce_area_to_area_dinv_map` based on my last comment.  Its not a major difference, but it helps.



---

archive/issue_comments_213016.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:1 zabrocki]:\n\nHi Mike,\n\nI am happy with the patch and give it a positive review once the patchbot is happy as well. The only suggested change would be: could you add a combinatorial decorator, so we can use this map in the statistic finder?\n\nCheers, Christian",
    "created_at": "2013-01-20T10:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213016",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>Replying to [comment:1 zabrocki]:

Hi Mike,

I am happy with the patch and give it a positive review once the patchbot is happy as well. The only suggested change would be: could you add a combinatorial decorator, so we can use this map in the statistic finder?

Cheers, Christian



---

archive/issue_comments_213017.json:
```json
{
    "body": "<a id='comment:5'></a>Hi Christian,\nDoesn't that require #11641 to add combinatorial decorator?  What is the status of that patch?   I looked at the patch and it seems that (a) it needs a review (b) it doesn't have most of the combinatorial decorators that were there before.\n-Mike",
    "created_at": "2013-01-20T13:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213017",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:5'></a>Hi Christian,
Doesn't that require #11641 to add combinatorial decorator?  What is the status of that patch?   I looked at the patch and it seems that (a) it needs a review (b) it doesn't have most of the combinatorial decorators that were there before.
-Mike



---

archive/issue_comments_213018.json:
```json
{
    "body": "<a id='comment:6'></a>Hi Mike, \n\nI agree with Christian. \nIt passed all the tests and the documentation also seems ok.\nDorota",
    "created_at": "2013-01-20T14:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213018",
    "user": "https://trac.sagemath.org/admin/accounts/users/DorotaMazur"
}
```

<a id='comment:6'></a>Hi Mike, 

I agree with Christian. 
It passed all the tests and the documentation also seems ok.
Dorota



---

archive/issue_comments_213019.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-21T20:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213019",
    "user": "https://trac.sagemath.org/admin/accounts/users/DorotaMazur"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_213020.json:
```json
{
    "body": "<a id='comment:8'></a>Please write your real names in the Author resp. Reviewer fields.",
    "created_at": "2013-01-21T21:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213020",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Please write your real names in the Author resp. Reviewer fields.



---

archive/issue_comments_213021.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:5 zabrocki]:\n> Doesn't that require #11641 to add combinatorial decorator?\n\n\nHi Mike (sorry for the delay...),\n\nThat's right, I was somewhat loosing track of the tickets and thought that #11641 was merged in in some 5.6 release.\n\n+1 for the positive review...\n\nReplying to [comment:8 jdemeyer]:\n> Please write your real names in the Author resp. Reviewer fields.\n\n\nI was actually doing that while you were writing this message...\n\nChristian",
    "created_at": "2013-01-21T21:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213021",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:9'></a>Replying to [comment:5 zabrocki]:
> Doesn't that require #11641 to add combinatorial decorator?


Hi Mike (sorry for the delay...),

That's right, I was somewhat loosing track of the tickets and thought that #11641 was merged in in some 5.6 release.

+1 for the positive review...

Replying to [comment:8 jdemeyer]:
> Please write your real names in the Author resp. Reviewer fields.


I was actually doing that while you were writing this message...

Christian



---

archive/issue_comments_213022.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Christian Stump, Dorota Mazur\"",
    "created_at": "2013-01-21T21:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213022",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing reviewer from "" to "Christian Stump, Dorota Mazur"



---

archive/issue_comments_213023.json:
```json
{
    "body": "Changing author from \"zabrocki\" to \"Mike Zabrocki\"",
    "created_at": "2013-01-21T21:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213023",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing author from "zabrocki" to "Mike Zabrocki"



---

archive/issue_comments_213024.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.7.beta1\"",
    "created_at": "2013-01-25T13:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213024",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.7.beta1"



---

archive/issue_comments_213025.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-25T13:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13972#issuecomment-213025",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_039231.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T13:08:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13972",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13972#event-39231"
}
```
