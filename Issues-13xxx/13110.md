# Issue 13110: Deprecate global RealNumber() and ComplexNumber()

archive/issues_012938.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/sagetrac-jkantor"
    ],
    "body": "The `RealNumber()` and `ComplexNumber()` global functions are converting string to floating-point numbers. They do not do what their names suggest\n\n```\nsage: RealNumber(1/3)\nTraceback (most recent call last):\n...\nTypeError: unable to convert '1/3' to a real number\nsage: ComplexNumber(complex('13.8+6.2j'))\nTraceback (most recent call last):\n...\nTypeError: unable to coerce to a ComplexNumber: <type 'str'>\n```\n\nThese two functions are mostly intended for the Sage preparser and shouldn't be used directly. We deprecate them in view of removing them from the global namespace. In the future, we might use the names `RealNumber` and `ComplexNumber` as proper factories.\n\nBranch/Commit: **[u/vdelecroix/13110](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/13110) @ [`140f7bd`](https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd)**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **numerical**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13110_\n\n",
    "created_at": "2012-06-13T00:43:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Deprecate global RealNumber() and ComplexNumber()",
    "type": "issue",
    "updated_at": "2022-12-29T01:40:48Z",
    "url": "https://github.com/sagemath/sage/issues/13110",
    "user": "https://github.com/eviatarbach"
}
```
The `RealNumber()` and `ComplexNumber()` global functions are converting string to floating-point numbers. They do not do what their names suggest

```
sage: RealNumber(1/3)
Traceback (most recent call last):
...
TypeError: unable to convert '1/3' to a real number
sage: ComplexNumber(complex('13.8+6.2j'))
Traceback (most recent call last):
...
TypeError: unable to coerce to a ComplexNumber: <type 'str'>
```

These two functions are mostly intended for the Sage preparser and shouldn't be used directly. We deprecate them in view of removing them from the global namespace. In the future, we might use the names `RealNumber` and `ComplexNumber` as proper factories.

Branch/Commit: **[u/vdelecroix/13110](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/13110) @ [`140f7bd`](https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd)**

Author: **Vincent Delecroix**

Component: **numerical**

_Issue created by migration from https://trac.sagemath.org/ticket/13110_





---

archive/issue_events_181946.json:
```json
{
    "actor": "https://github.com/eviatarbach",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181946"
}
```



---

archive/issue_events_181947.json:
```json
{
    "actor": "https://github.com/eviatarbach",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181947"
}
```



---

archive/issue_events_181948.json:
```json
{
    "actor": "https://github.com/eviatarbach",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181948"
}
```



---

archive/issue_events_181949.json:
```json
{
    "actor": "https://github.com/eviatarbach",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181949"
}
```



---

archive/issue_events_181950.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "subject": "https://github.com/eviatarbach",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181950"
}
```



---

archive/issue_events_181951.json:
```json
{
    "actor": "https://github.com/sagetrac-jkantor",
    "created_at": "2012-06-13T00:43:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "subject": "https://github.com/eviatarbach",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181951"
}
```



---

archive/issue_events_181952.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-02-09T20:47:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181952"
}
```



---

archive/issue_comments_149604.json:
```json
{
    "body": "Changed keywords from none to **complex**",
    "created_at": "2013-02-09T20:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149604",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from none to **complex**



---

archive/issue_events_181953.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-02-09T20:47:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181953"
}
```



---

archive/issue_comments_149605.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2013-02-09T20:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149605",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_comments_149606.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSimple fix and easy to review.",
    "created_at": "2013-02-09T20:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149606",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Simple fix and easy to review.



---

archive/issue_comments_149607.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDon't you want it more along the lines of\n\n```\n    if s_imag is None: \n        if isinstance(s_real, complex): \n            s_imag = s_real.imag \n            s_real = s_real.real \n        else:\n            s_imag = 0 \n```\nto avoid accepting malformed input such as\n\n```\nComplexNumber(complex(1,1),1)\n```\nperhaps?",
    "created_at": "2013-02-09T21:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149607",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

Don't you want it more along the lines of

```
    if s_imag is None: 
        if isinstance(s_real, complex): 
            s_imag = s_real.imag 
            s_real = s_real.real 
        else:
            s_imag = 0 
```
to avoid accepting malformed input such as

```
ComplexNumber(complex(1,1),1)
```
perhaps?



---

archive/issue_comments_149608.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAlso, a typo; 'fixzed'>'fixed'",
    "created_at": "2013-02-09T21:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149608",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:3" align="right">comment:3</div>

Also, a typo; 'fixzed'>'fixed'



---

archive/issue_comments_149609.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThat is a good idea. Updated (and typo fixzed :P) and now it will also work for `CDF` and `ComplexField` elements as well.",
    "created_at": "2013-02-09T21:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149609",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

That is a good idea. Updated (and typo fixzed :P) and now it will also work for `CDF` and `ComplexField` elements as well.



---

archive/issue_comments_149610.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt seems to me that you should explain in the doc that a new kind of input is now allowed. So far, the doc says that the only possible input is a pair of numbers.",
    "created_at": "2013-04-03T20:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149610",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

It seems to me that you should explain in the doc that a new kind of input is now allowed. So far, the doc says that the only possible input is a pair of numbers.



---

archive/issue_comments_149611.json:
```json
{
    "body": "Attachment: **[trac_13110-python_complex_input-ts.patch.gz](https://github.com/sagemath/sage/files/ticket13110/trac_13110-python_complex_input-ts.patch.gz)**",
    "created_at": "2013-04-03T22:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149611",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_13110-python_complex_input-ts.patch.gz](https://github.com/sagemath/sage/files/ticket13110/trac_13110-python_complex_input-ts.patch.gz)**



---

archive/issue_comments_149612.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI've updated the documentation and added a (quick 'n' dirty) parser for string inputs as well.",
    "created_at": "2013-04-03T22:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149612",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

I've updated the documentation and added a (quick 'n' dirty) parser for string inputs as well.



---

archive/issue_comments_149613.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis is really nice, but I think the string parser should be more strict in order to enforce a more consistent syntax. How about just accepting the Python `complex` syntax?",
    "created_at": "2013-04-04T04:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149613",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:7" align="right">comment:7</div>

This is really nice, but I think the string parser should be more strict in order to enforce a more consistent syntax. How about just accepting the Python `complex` syntax?



---

archive/issue_comments_149614.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@eviatarbach](#comment:7):\n> This is really nice, but I think the string parser should be more strict in order to enforce a more consistent syntax. How about just accepting the Python `complex` syntax?\n\nI disagree since the output from `ComplexNumber(1, 1)` is `1.0... + 1.0...*I`, so we should allow this as valid input to be consistent with python's `complex` function and because we do accept python `complex` strings.",
    "created_at": "2013-04-08T13:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149614",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@eviatarbach](#comment:7):
> This is really nice, but I think the string parser should be more strict in order to enforce a more consistent syntax. How about just accepting the Python `complex` syntax?

I disagree since the output from `ComplexNumber(1, 1)` is `1.0... + 1.0...*I`, so we should allow this as valid input to be consistent with python's `complex` function and because we do accept python `complex` strings.



---

archive/issue_comments_149615.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis makes sense, but `2.0+5.0I` isn't valid syntax in either Python or Sage.",
    "created_at": "2013-04-08T17:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149615",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:9" align="right">comment:9</div>

This makes sense, but `2.0+5.0I` isn't valid syntax in either Python or Sage.



---

archive/issue_comments_149616.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTrue, but it's the \"natural\" in between since python complex strings are `2 + 2j` and I think a typical user is likely to try `2 + 2i` first. However, if you feel strongly about it, I'll remove it since it is easier to add functionality into sage than to remove it; and I'm 95% certain there's a bug in my current implementation that I have to fix (it should fail on `2 + -2*I`).",
    "created_at": "2013-04-08T17:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149616",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

True, but it's the "natural" in between since python complex strings are `2 + 2j` and I think a typical user is likely to try `2 + 2i` first. However, if you feel strongly about it, I'll remove it since it is easier to add functionality into sage than to remove it; and I'm 95% certain there's a bug in my current implementation that I have to fix (it should fail on `2 + -2*I`).



---

archive/issue_comments_149617.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWe already have a clash\n\n```\nsage: 2.0j\n2.00000000000000*I\nsage: implicit_multiplication(True)\nsage: 2.0j\nNameError: name 'j' is not defined\n```\nand I'm pretty sure you won't get to predefine `i` and `j`.",
    "created_at": "2013-04-08T18:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149617",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

We already have a clash

```
sage: 2.0j
2.00000000000000*I
sage: implicit_multiplication(True)
sage: 2.0j
NameError: name 'j' is not defined
```
and I'm pretty sure you won't get to predefine `i` and `j`.



---

archive/issue_comments_149618.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'm a bit scared by the included number parser ;-) Can we use a regex? This would also be better at validating input.",
    "created_at": "2013-05-11T19:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149618",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

I'm a bit scared by the included number parser ;-) Can we use a regex? This would also be better at validating input.



---

archive/issue_comments_149619.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe ticket states that `ComplexNumber(complex(...))` doesn't work and proceeds by implementing a more elaborate string parser. That's not the most obvious way of soving the ticket:\n- a python `complex` already has a nice `.real()` and `.imag()`, so stuffing them together in a string to just pry them apart is not a smart move. Doing\n\n```\n    if isinstance(s_real, complex):\n        s_real, s_imag = s_real.real(), s_real.imag()\n```\nmakes much more sense to solve the problem at hand.\n- The fact that `ComplexNumber` would assemble a complex number from numerical input by converting to a string is ludicrous in its own right: If you're handed real and imaginary parts in numerical form, you should NOT be converting to strings as an intermediate. That's just asking for precision loss (and horrible performance).\n\nI realize that we have the documentation:\n\n```\ndef create_ComplexNumber(s_real, s_imag=None, int pad=0, min_prec=53):\n    Return the complex number defined by the strings s_real and\n    s_imag as an element of ``ComplexField(prec=n)``,\n    where n potentially has slightly more (controlled by pad) bits than\n    given by s.\n```\nAccording to that documentation, the proposed input is not valid anyway. By changing that you're changing the interface the routine offers. That's fine, but once you start changing it, you should *improve* it.\n\nNote that `CC(complex(\"1+2j\"))` already works. By the looks of it, `CC.__call__` is already taking a much saner approach. Perhaps `ComplexNumber` should share more with that routine? Or be documented that people should really use `CC(...)`? or perhaps `ComplexNumber` can be deprecated altogether?",
    "created_at": "2013-05-11T20:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149619",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

The ticket states that `ComplexNumber(complex(...))` doesn't work and proceeds by implementing a more elaborate string parser. That's not the most obvious way of soving the ticket:
- a python `complex` already has a nice `.real()` and `.imag()`, so stuffing them together in a string to just pry them apart is not a smart move. Doing

```
    if isinstance(s_real, complex):
        s_real, s_imag = s_real.real(), s_real.imag()
```
makes much more sense to solve the problem at hand.
- The fact that `ComplexNumber` would assemble a complex number from numerical input by converting to a string is ludicrous in its own right: If you're handed real and imaginary parts in numerical form, you should NOT be converting to strings as an intermediate. That's just asking for precision loss (and horrible performance).

I realize that we have the documentation:

```
def create_ComplexNumber(s_real, s_imag=None, int pad=0, min_prec=53):
    Return the complex number defined by the strings s_real and
    s_imag as an element of ``ComplexField(prec=n)``,
    where n potentially has slightly more (controlled by pad) bits than
    given by s.
```
According to that documentation, the proposed input is not valid anyway. By changing that you're changing the interface the routine offers. That's fine, but once you start changing it, you should *improve* it.

Note that `CC(complex("1+2j"))` already works. By the looks of it, `CC.__call__` is already taking a much saner approach. Perhaps `ComplexNumber` should share more with that routine? Or be documented that people should really use `CC(...)`? or perhaps `ComplexNumber` can be deprecated altogether?



---

archive/issue_comments_149620.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@nbruin](#comment:13):\n> The ticket states that `ComplexNumber(complex(...))` doesn't work and proceeds by implementing a more elaborate string parser. That's not the most obvious way of soving the ticket:\n> - a python `complex` already has a nice `.real()` and `.imag()`, so stuffing them together in a string to just pry them apart is not a smart move. Doing\n> \n> ```\n>     if isinstance(s_real, complex):\n>         s_real, s_imag = s_real.real(), s_real.imag()\n> ```\n>    makes much more sense to solve the problem at hand.\n\nThis is already how I've done it done in the current patch.\n\n> - The fact that `ComplexNumber` would assemble a complex number from numerical input by converting to a string is ludicrous in its own right: If you're handed real and imaginary parts in numerical form, you should NOT be converting to strings as an intermediate. That's just asking for precision loss (and horrible performance).\n\nThat was the original implementation with two reals as input, and I haven't changed that. Nevertheless, I agree that it should be changed (see below).\n\n> \n> I realize that we have the documentation:\n> \n> ```\n> def create_ComplexNumber(s_real, s_imag=None, int pad=0, min_prec=53):\n>     Return the complex number defined by the strings s_real and\n>     s_imag as an element of ``ComplexField(prec=n)``,\n>     where n potentially has slightly more (controlled by pad) bits than\n>     given by s.\n> ```\n>    According to that documentation, the proposed input is not valid anyway. By changing that you're changing the interface the routine offers. That's fine, but once you start changing it, you should *improve* it.\n> \n> Note that `CC(complex(\"1+2j\"))` already works. By the looks of it, `CC.__call__` is already taking a much saner approach. Perhaps `ComplexNumber` should share more with that routine? Or be documented that people should really use `CC(...)`? or perhaps `ComplexNumber` can be deprecated altogether?\n\nHow about we check if the input is a (pair of) `str`, and if not, then it just feeds it to `CC` in an appropriate fashion? I don't think we should deprecate it because the naive person IMO would likely look for `ComplexNumber` before `CC`.\n\n\nVolker, good point. I don't use regex too often so it's never really something I think of. I'll do that on the next patch.",
    "created_at": "2013-05-11T21:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149620",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@nbruin](#comment:13):
> The ticket states that `ComplexNumber(complex(...))` doesn't work and proceeds by implementing a more elaborate string parser. That's not the most obvious way of soving the ticket:
> - a python `complex` already has a nice `.real()` and `.imag()`, so stuffing them together in a string to just pry them apart is not a smart move. Doing
> 
> ```
>     if isinstance(s_real, complex):
>         s_real, s_imag = s_real.real(), s_real.imag()
> ```
>    makes much more sense to solve the problem at hand.

This is already how I've done it done in the current patch.

> - The fact that `ComplexNumber` would assemble a complex number from numerical input by converting to a string is ludicrous in its own right: If you're handed real and imaginary parts in numerical form, you should NOT be converting to strings as an intermediate. That's just asking for precision loss (and horrible performance).

That was the original implementation with two reals as input, and I haven't changed that. Nevertheless, I agree that it should be changed (see below).

> 
> I realize that we have the documentation:
> 
> ```
> def create_ComplexNumber(s_real, s_imag=None, int pad=0, min_prec=53):
>     Return the complex number defined by the strings s_real and
>     s_imag as an element of ``ComplexField(prec=n)``,
>     where n potentially has slightly more (controlled by pad) bits than
>     given by s.
> ```
>    According to that documentation, the proposed input is not valid anyway. By changing that you're changing the interface the routine offers. That's fine, but once you start changing it, you should *improve* it.
> 
> Note that `CC(complex("1+2j"))` already works. By the looks of it, `CC.__call__` is already taking a much saner approach. Perhaps `ComplexNumber` should share more with that routine? Or be documented that people should really use `CC(...)`? or perhaps `ComplexNumber` can be deprecated altogether?

How about we check if the input is a (pair of) `str`, and if not, then it just feeds it to `CC` in an appropriate fashion? I don't think we should deprecate it because the naive person IMO would likely look for `ComplexNumber` before `CC`.


Volker, good point. I don't use regex too often so it's never really something I think of. I'll do that on the next patch.



---

archive/issue_comments_149621.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n`CC._element_constructor_` is probably slow for string input since it evaluates the input. I'm a bit uncomfortable with that security-wise, though there are certainly bigger fish to fry.\n\nI agree that it would be best if `ComplexNumber` would just delegate everything to `CC`. The latter even handles two strings as input. The docstring should reflect that and say that it is preferred to use `CC` / `CDF` directly.",
    "created_at": "2013-05-11T21:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149621",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

`CC._element_constructor_` is probably slow for string input since it evaluates the input. I'm a bit uncomfortable with that security-wise, though there are certainly bigger fish to fry.

I agree that it would be best if `ComplexNumber` would just delegate everything to `CC`. The latter even handles two strings as input. The docstring should reflect that and say that it is preferred to use `CC` / `CDF` directly.



---

archive/issue_comments_149622.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHmm. What do you all think of just making `ComplexNumber` an alias for `CC`? In fact, I think this could also be done to `RealNumber` with `RR`.",
    "created_at": "2013-05-11T23:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149622",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:16" align="right">comment:16</div>

Hmm. What do you all think of just making `ComplexNumber` an alias for `CC`? In fact, I think this could also be done to `RealNumber` with `RR`.



---

archive/issue_comments_149623.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@vbraun](#comment:15):\n> `CC._element_constructor_` is probably slow for string input since it evaluates the input. I'm a bit uncomfortable with that security-wise, though there are certainly bigger fish to fry.\n\nYes, indeed. That very \"eval\" instruction is marked with a \"TODO\", indicating that it could use improvements. I'd say that's the place to a string interpretation routine, rather than in `create_ComplexNumber`. Note, by the way, that most machinery for making complex numbers sits in `sage.rings.complex_number.ComplexNumber.__init__`. It can deal with various inputs, including strings for real and imag, by virtue of just calling `RR(real)` and `RR(imag)` (where `RR` is the underlying real field). Thus, the only thing a \"complex number\" parser would have to do is locate the likely real and imaginary part in the string and pass them on. This could even be put in this routine itself.\n\nThere is one thing that `create_ComplexNumber` does that other routines don't: It takes the string lengths as an indication of the number of bits required in the representation. None of the other routines do that. It also indicates that `create_ComplexNumber` perhaps shouldn't be used for anything more general, or in its other roles, take a hint from its input to choose what precision to use.\n\nI think in general, guessing precision from number of digits written down is rarely going to produce desirable results, so I'd be for providing the user interface with a default precision (complex) field.",
    "created_at": "2013-05-12T01:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149623",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@vbraun](#comment:15):
> `CC._element_constructor_` is probably slow for string input since it evaluates the input. I'm a bit uncomfortable with that security-wise, though there are certainly bigger fish to fry.

Yes, indeed. That very "eval" instruction is marked with a "TODO", indicating that it could use improvements. I'd say that's the place to a string interpretation routine, rather than in `create_ComplexNumber`. Note, by the way, that most machinery for making complex numbers sits in `sage.rings.complex_number.ComplexNumber.__init__`. It can deal with various inputs, including strings for real and imag, by virtue of just calling `RR(real)` and `RR(imag)` (where `RR` is the underlying real field). Thus, the only thing a "complex number" parser would have to do is locate the likely real and imaginary part in the string and pass them on. This could even be put in this routine itself.

There is one thing that `create_ComplexNumber` does that other routines don't: It takes the string lengths as an indication of the number of bits required in the representation. None of the other routines do that. It also indicates that `create_ComplexNumber` perhaps shouldn't be used for anything more general, or in its other roles, take a hint from its input to choose what precision to use.

I think in general, guessing precision from number of digits written down is rarely going to produce desirable results, so I'd be for providing the user interface with a default precision (complex) field.



---

archive/issue_events_181954.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-12T19:14:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181954"
}
```



---

archive/issue_events_181955.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-12T19:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181955"
}
```



---

archive/issue_events_181956.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181956"
}
```



---

archive/issue_events_181957.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181957"
}
```



---

archive/issue_comments_149624.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nFor reference, Python's built-in function for generating a `complex` from a string is defined at http://hg.python.org/cpython/file/c6880edaf6f3/Objects/complexobject.c as `complex_subtype_from_string`. We should probably try to emulate that for our parser.",
    "created_at": "2013-08-19T23:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149624",
    "user": "https://github.com/eviatarbach"
}
```

<div id="comment:20" align="right">comment:20</div>

For reference, Python's built-in function for generating a `complex` from a string is defined at http://hg.python.org/cpython/file/c6880edaf6f3/Objects/complexobject.c as `complex_subtype_from_string`. We should probably try to emulate that for our parser.



---

archive/issue_events_181958.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181958"
}
```



---

archive/issue_events_181959.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181959"
}
```



---

archive/issue_events_181960.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181960"
}
```



---

archive/issue_events_181961.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181961"
}
```



---

archive/issue_events_181962.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181962"
}
```



---

archive/issue_events_181963.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181963"
}
```



---

archive/issue_comments_149625.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,21 @@\n-`ComplexNumber` does not know how to convert from the Python `complex` type:\n+This works fine:\n \n ```\n-sage: ComplexNumber(complex('13.8+6.2j'))\n-TypeError: unable to coerce to a ComplexNumber: <type 'str'>\n+sage: CC(complex('13.8+6.2j'))\n+13.8000000000000 + 6.20000000000000*I\n+sage: CDF(complex('13.8+6.2j'))\n+13.8 + 6.2*I\n ```\n+\n+However, it is a *conversion* while it should be a *coercion*.\n+\n+```\n+sage: CC.has_coerce_map_from(complex)\n+False\n+```\n+This is inconsistent with\n+\n+```\n+sage: CC.has_coerce_map_from(float)\n+True\n+```\n``````\n",
    "created_at": "2014-10-16T17:38:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149625",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,21 @@
-`ComplexNumber` does not know how to convert from the Python `complex` type:
+This works fine:
 
 ```
-sage: ComplexNumber(complex('13.8+6.2j'))
-TypeError: unable to coerce to a ComplexNumber: <type 'str'>
+sage: CC(complex('13.8+6.2j'))
+13.8000000000000 + 6.20000000000000*I
+sage: CDF(complex('13.8+6.2j'))
+13.8 + 6.2*I
 ```
+
+However, it is a *conversion* while it should be a *coercion*.
+
+```
+sage: CC.has_coerce_map_from(complex)
+False
+```
+This is inconsistent with
+
+```
+sage: CC.has_coerce_map_from(float)
+True
+```
``````




---

archive/issue_events_181964.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:38:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181964"
}
```



---

archive/issue_events_181965.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:38:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181965"
}
```



---

archive/issue_events_181966.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:38:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "title_is": "Allow coercion complex -> CC",
    "title_was": "ComplexNumber should be able to accept the Python complex type",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181966"
}
```



---

archive/issue_comments_149626.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,21 +1,6 @@\n-This works fine:\n+The `RealNumber()` and `ComplexNumber()` are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work:\n \n ```\n-sage: CC(complex('13.8+6.2j'))\n-13.8000000000000 + 6.20000000000000*I\n-sage: CDF(complex('13.8+6.2j'))\n-13.8 + 6.2*I\n+sage: ComplexNumber(complex('13.8+6.2j'))\n+TypeError: unable to coerce to a ComplexNumber: <type 'str'>\n ```\n-\n-However, it is a *conversion* while it should be a *coercion*.\n-\n-```\n-sage: CC.has_coerce_map_from(complex)\n-False\n-```\n-This is inconsistent with\n-\n-```\n-sage: CC.has_coerce_map_from(float)\n-True\n-```\n``````\n",
    "created_at": "2014-10-16T17:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149626",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,21 +1,6 @@
-This works fine:
+The `RealNumber()` and `ComplexNumber()` are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work:
 
 ```
-sage: CC(complex('13.8+6.2j'))
-13.8000000000000 + 6.20000000000000*I
-sage: CDF(complex('13.8+6.2j'))
-13.8 + 6.2*I
+sage: ComplexNumber(complex('13.8+6.2j'))
+TypeError: unable to coerce to a ComplexNumber: <type 'str'>
 ```
-
-However, it is a *conversion* while it should be a *coercion*.
-
-```
-sage: CC.has_coerce_map_from(complex)
-False
-```
-This is inconsistent with
-
-```
-sage: CC.has_coerce_map_from(float)
-True
-```
``````




---

archive/issue_events_181967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:44:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181967"
}
```



---

archive/issue_events_181968.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:44:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181968"
}
```



---

archive/issue_events_181969.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T17:44:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "title_is": "Deprecate global RealNumber() and ComplexNumber()",
    "title_was": "Allow coercion complex -> CC",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181969"
}
```



---

archive/issue_comments_149627.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSorry, I shouldn't have taken over this ticket, it's about something else.",
    "created_at": "2014-10-16T17:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149627",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Sorry, I shouldn't have taken over this ticket, it's about something else.



---

archive/issue_comments_149628.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The `RealNumber()` and `ComplexNumber()` are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work:\n+The `RealNumber()` and `ComplexNumber()` global functions are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work (and it shouldn't):\n \n ```\n sage: ComplexNumber(complex('13.8+6.2j'))\n``````\n",
    "created_at": "2014-10-16T18:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149628",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The `RealNumber()` and `ComplexNumber()` are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work:
+The `RealNumber()` and `ComplexNumber()` global functions are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work (and it shouldn't):
 
 ```
 sage: ComplexNumber(complex('13.8+6.2j'))
``````




---

archive/issue_comments_149629.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI am interested on working on the issue. How do I start?",
    "created_at": "2016-11-24T14:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149629",
    "user": "https://github.com/sagetrac-souravsingh"
}
```

<div id="comment:27" align="right">comment:27</div>

I am interested on working on the issue. How do I start?



---

archive/issue_comments_149630.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI believe all that is needed is changing the [ComplexNumber](../wiki/ComplexNumber) function and the RealNumber function to point to CC and RR instead.",
    "created_at": "2016-11-27T00:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149630",
    "user": "https://github.com/sagetrac-zonova"
}
```

<div id="comment:28" align="right">comment:28</div>

I believe all that is needed is changing the [ComplexNumber](../wiki/ComplexNumber) function and the RealNumber function to point to CC and RR instead.



---

archive/issue_comments_149631.json:
```json
{
    "body": "Branch: **[u/epilys/deprecate_global_realnumber___and_complexnumber__](https://github.com/sagemath/sagetrac-mirror/tree/u/epilys/deprecate_global_realnumber___and_complexnumber__)**",
    "created_at": "2017-03-15T18:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149631",
    "user": "https://github.com/sagetrac-epilys"
}
```

Branch: **[u/epilys/deprecate_global_realnumber___and_complexnumber__](https://github.com/sagemath/sagetrac-mirror/tree/u/epilys/deprecate_global_realnumber___and_complexnumber__)**



---

archive/issue_comments_149632.json:
```json
{
    "body": "Commit: **[`c1995f1`](https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9)**",
    "created_at": "2017-03-15T18:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149632",
    "user": "https://github.com/sagetrac-epilys"
}
```

Commit: **[`c1995f1`](https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9)**



---

archive/issue_comments_149633.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix. How should [ComplexNumber](../wiki/ComplexNumber) and RealNumber point to CC and RR? Just make them aliases or eg call CC with the same input inside `create_ComplexNumber`?  \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9\"><code>c1995f1</code></a></td><td><code>Allow type complex input in ComplexNumber()</code></td></tr></table>\n",
    "created_at": "2017-03-15T18:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149633",
    "user": "https://github.com/sagetrac-epilys"
}
```

<div id="comment:30" align="right">comment:30</div>

I modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix. How should [ComplexNumber](../wiki/ComplexNumber) and RealNumber point to CC and RR? Just make them aliases or eg call CC with the same input inside `create_ComplexNumber`?  

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9"><code>c1995f1</code></a></td><td><code>Allow type complex input in ComplexNumber()</code></td></tr></table>




---

archive/issue_events_181970.json:
```json
{
    "actor": "https://github.com/sagetrac-epilys",
    "created_at": "2017-03-15T18:07:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181970"
}
```



---

archive/issue_events_181971.json:
```json
{
    "actor": "https://github.com/sagetrac-epilys",
    "created_at": "2017-03-15T18:07:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181971"
}
```



---

archive/issue_comments_149634.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@sagetrac-epilys](#comment:30):\n> I modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix.\n\nBut why? I don't think there is much reason to allow `RealNumber()` and `ComplexNumber`, that's why I think they should be deprecated instead.",
    "created_at": "2017-03-21T09:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149634",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@sagetrac-epilys](#comment:30):
> I modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix.

But why? I don't think there is much reason to allow `RealNumber()` and `ComplexNumber`, that's why I think they should be deprecated instead.



---

archive/issue_events_181972.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-21T09:37:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181972"
}
```



---

archive/issue_events_181973.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-21T09:37:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181973"
}
```



---

archive/issue_comments_149635.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@sagetrac-epilys](#comment:30):\n> I modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix. How should [ComplexNumber](../wiki/ComplexNumber) and RealNumber point to CC and RR? Just make them aliases or eg call CC with the same input inside `create_ComplexNumber`?  \n> \n> ---\n> New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9\"><code>c1995f1</code></a></td><td><code>Allow type complex input in ComplexNumber()</code></td></tr></table>\n\n\nYes, I was suggesting that [ComplexNumber](../wiki/ComplexNumber) and RealNumber be aliases for CC and RR. Unless I am missing some functionality that these are supposed to provide that CC and RR don't. I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber), but might not recognize the command CC, so I think it is useful as an alias.",
    "created_at": "2017-03-21T14:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149635",
    "user": "https://github.com/sagetrac-zonova"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@sagetrac-epilys](#comment:30):
> I modified `create_ComplexNumber` to allow the input as stated in the ticket description as a temporary fix. How should [ComplexNumber](../wiki/ComplexNumber) and RealNumber point to CC and RR? Just make them aliases or eg call CC with the same input inside `create_ComplexNumber`?  
> 
> ---
> New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9"><code>c1995f1</code></a></td><td><code>Allow type complex input in ComplexNumber()</code></td></tr></table>


Yes, I was suggesting that [ComplexNumber](../wiki/ComplexNumber) and RealNumber be aliases for CC and RR. Unless I am missing some functionality that these are supposed to provide that CC and RR don't. I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber), but might not recognize the command CC, so I think it is useful as an alias.



---

archive/issue_comments_149636.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@sagetrac-zonova](#comment:33):\n> I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber)\n\nWhy *should* they recognize the command `ComplexNumber`? Most likely they will type something like `1.2 + 3.4 * I` and that works fine.",
    "created_at": "2017-03-21T15:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149636",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@sagetrac-zonova](#comment:33):
> I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber)

Why *should* they recognize the command `ComplexNumber`? Most likely they will type something like `1.2 + 3.4 * I` and that works fine.



---

archive/issue_comments_149637.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jdemeyer](#comment:34):\n> Replying to [@sagetrac-zonova](#comment:33):\n> > I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber)\n\n> \n> Why *should* they recognize the command `ComplexNumber`? Most likely they will type something like `1.2 + 3.4 * I` and that works fine.\n\nThat does not\n\n```\nsage: parent(1.2 + 3.4 * I)\nSymbolic Ring\n```",
    "created_at": "2018-01-17T17:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149637",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jdemeyer](#comment:34):
> Replying to [@sagetrac-zonova](#comment:33):
> > I think that, for a lot of students, they would easily recognize the command [ComplexNumber](../wiki/ComplexNumber)

> 
> Why *should* they recognize the command `ComplexNumber`? Most likely they will type something like `1.2 + 3.4 * I` and that works fine.

That does not

```
sage: parent(1.2 + 3.4 * I)
Symbolic Ring
```



---

archive/issue_comments_149638.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI think that the simplest would just be to remove `RealNumber` and `ComplexNumber` from the global namespace (ie deprecate them). These functions are intended to parse a very special kind of strings in a very particular way. This can be achieved by other means in the console like `RR(my_string)`/`CC(my_string)` as was suggested.",
    "created_at": "2018-01-17T17:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149638",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

I think that the simplest would just be to remove `RealNumber` and `ComplexNumber` from the global namespace (ie deprecate them). These functions are intended to parse a very special kind of strings in a very particular way. This can be achieved by other means in the console like `RR(my_string)`/`CC(my_string)` as was suggested.



---

archive/issue_comments_149639.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,16 @@\n-The `RealNumber()` and `ComplexNumber()` global functions are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work (and it shouldn't):\n+The `RealNumber()` and `ComplexNumber()` global functions are converting string to floating-point numbers. They do not do what their names suggest\n \n ```\n+sage: RealNumber(1/3)\n+Traceback (most recent call last):\n+...\n+TypeError: unable to convert '1/3' to a real number\n sage: ComplexNumber(complex('13.8+6.2j'))\n+Traceback (most recent call last):\n+...\n TypeError: unable to coerce to a ComplexNumber: <type 'str'>\n ```\n+\n+These two functions are mostly intended for the Sage preparser and shouldn't be used directly. There are two proposals under discussion:\n+- deprecate them in view of removing them from the global namespace\n+- make them what they should be: factory for real/complex numbers\n``````\n",
    "created_at": "2018-01-17T17:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149639",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,16 @@
-The `RealNumber()` and `ComplexNumber()` global functions are meant for the Sage preparser and shouldn't be used directly. For example, the following doesn't work (and it shouldn't):
+The `RealNumber()` and `ComplexNumber()` global functions are converting string to floating-point numbers. They do not do what their names suggest
 
 ```
+sage: RealNumber(1/3)
+Traceback (most recent call last):
+...
+TypeError: unable to convert '1/3' to a real number
 sage: ComplexNumber(complex('13.8+6.2j'))
+Traceback (most recent call last):
+...
 TypeError: unable to coerce to a ComplexNumber: <type 'str'>
 ```
+
+These two functions are mostly intended for the Sage preparser and shouldn't be used directly. There are two proposals under discussion:
+- deprecate them in view of removing them from the global namespace
+- make them what they should be: factory for real/complex numbers
``````




---

archive/issue_comments_149640.json:
```json
{
    "body": "Changed keywords from **complex** to none",
    "created_at": "2018-01-17T17:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149640",
    "user": "https://github.com/videlec"
}
```

Changed keywords from **complex** to none



---

archive/issue_events_181974.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-17T17:19:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/good%20first%20issue",
    "label_color": "7057ff",
    "label_name": "good first issue",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181974"
}
```



---

archive/issue_events_181975.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-17T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181975"
}
```



---

archive/issue_events_181976.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-17T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181976"
}
```



---

archive/issue_comments_149641.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nIf we decide to keep `RealNumber`/`ComplexNumber` in the global namespace, I think that what they should be would better be left to #24456 and #24457. This is one more reason to make this ticket used only for deprecation.",
    "created_at": "2018-01-17T17:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149641",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

If we decide to keep `RealNumber`/`ComplexNumber` in the global namespace, I think that what they should be would better be left to #24456 and #24457. This is one more reason to make this ticket used only for deprecation.



---

archive/issue_events_181977.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-25T15:57:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181977"
}
```



---

archive/issue_events_181978.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-25T15:57:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181978"
}
```



---

archive/issue_comments_149642.json:
```json
{
    "body": "Changed author from **Travis Scrimshaw** to **Vincent Delecroix**",
    "created_at": "2018-01-25T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149642",
    "user": "https://github.com/videlec"
}
```

Changed author from **Travis Scrimshaw** to **Vincent Delecroix**



---

archive/issue_comments_149643.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/064e6681dd2fae1e944365e8acb5ac3504bec1ce\"><code>064e668</code></a></td><td><code>13110: deprecate RealNumber/ComplexNumber</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865\"><code>588b9ac</code></a></td><td><code>13110: fix doctests</code></td></tr></table>\n",
    "created_at": "2018-01-25T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149643",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/064e6681dd2fae1e944365e8acb5ac3504bec1ce"><code>064e668</code></a></td><td><code>13110: deprecate RealNumber/ComplexNumber</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865"><code>588b9ac</code></a></td><td><code>13110: fix doctests</code></td></tr></table>




---

archive/issue_comments_149644.json:
```json
{
    "body": "Changed branch from **[u/epilys/deprecate_global_realnumber___and_complexnumber__](https://github.com/sagemath/sagetrac-mirror/tree/u/epilys/deprecate_global_realnumber___and_complexnumber__)** to **[u/vdelecroix/13110](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/13110)**",
    "created_at": "2018-01-25T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149644",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/epilys/deprecate_global_realnumber___and_complexnumber__](https://github.com/sagemath/sagetrac-mirror/tree/u/epilys/deprecate_global_realnumber___and_complexnumber__)** to **[u/vdelecroix/13110](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/13110)**



---

archive/issue_comments_149645.json:
```json
{
    "body": "Changed commit from **[`c1995f1`](https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9)** to **[`588b9ac`](https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865)**",
    "created_at": "2018-01-25T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149645",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`c1995f1`](https://github.com/sagemath/sagetrac-mirror/commit/c1995f12a8529bdb5c5ff25288b481caf01a40c9)** to **[`588b9ac`](https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865)**



---

archive/issue_comments_149646.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,4 @@\n TypeError: unable to coerce to a ComplexNumber: <type 'str'>\n ```\n \n-These two functions are mostly intended for the Sage preparser and shouldn't be used directly. There are two proposals under discussion:\n-- deprecate them in view of removing them from the global namespace\n-- make them what they should be: factory for real/complex numbers\n+These two functions are mostly intended for the Sage preparser and shouldn't be used directly. We deprecate them in view of removing them from the global namespace. In the future, we might use the names `RealNumber` and `ComplexNumber` as proper factories.\n``````\n",
    "created_at": "2018-01-25T15:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149646",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,4 @@
 TypeError: unable to coerce to a ComplexNumber: <type 'str'>
 ```
 
-These two functions are mostly intended for the Sage preparser and shouldn't be used directly. There are two proposals under discussion:
-- deprecate them in view of removing them from the global namespace
-- make them what they should be: factory for real/complex numbers
+These two functions are mostly intended for the Sage preparser and shouldn't be used directly. We deprecate them in view of removing them from the global namespace. In the future, we might use the names `RealNumber` and `ComplexNumber` as proper factories.
``````




---

archive/issue_comments_149647.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nMostly setting to needs review in order to let patchbots test it!",
    "created_at": "2018-01-25T15:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149647",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Mostly setting to needs review in order to let patchbots test it!



---

archive/issue_comments_149648.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.",
    "created_at": "2018-01-25T16:07:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149648",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

I don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.



---

archive/issue_comments_149649.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jdemeyer](#comment:41):\n> I don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.\n\nFine for me.",
    "created_at": "2018-01-25T16:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149649",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jdemeyer](#comment:41):
> I don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.

Fine for me.



---

archive/issue_comments_149650.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@videlec](#comment:42):\n> Replying to [@jdemeyer](#comment:41):\n> > I don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.\n\n> \n> Fine for me.\n\nThough a problem is that names starting with underscore in `all.py` files are not imported.",
    "created_at": "2018-01-25T16:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149650",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@videlec](#comment:42):
> Replying to [@jdemeyer](#comment:41):
> > I don't like the verbosity of `sage.rings.real_mpfr.create_RealNumber`. I would suggest still keeping it in the global namespace but under a (short) private name like `_Real`.

> 
> Fine for me.

Though a problem is that names starting with underscore in `all.py` files are not imported.



---

archive/issue_comments_149651.json:
```json
{
    "body": "Changed commit from **[`588b9ac`](https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865)** to **[`140f7bd`](https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd)**",
    "created_at": "2018-01-25T18:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`588b9ac`](https://github.com/sagemath/sagetrac-mirror/commit/588b9ac6c7b2b906c0d31f9dd925968d1e300865)** to **[`140f7bd`](https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd)**



---

archive/issue_comments_149652.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd\"><code>140f7bd</code></a></td><td><code>13110: fix doctests</code></td></tr></table>\n",
    "created_at": "2018-01-25T18:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/140f7bdb4665396e88d98d9767c480ee9af990cd"><code>140f7bd</code></a></td><td><code>13110: fix doctests</code></td></tr></table>




---

archive/issue_comments_149653.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@videlec](#comment:43):\n> Though a problem is that names starting with underscore in `all.py` files are not imported.\n\nNot a big problem, just import `_Real` and `_Complex` explicitly.",
    "created_at": "2018-01-25T21:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149653",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@videlec](#comment:43):
> Though a problem is that names starting with underscore in `all.py` files are not imported.

Not a big problem, just import `_Real` and `_Complex` explicitly.



---

archive/issue_comments_149654.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@jdemeyer](#comment:45):\n> Replying to [@videlec](#comment:43):\n> > Though a problem is that names starting with underscore in `all.py` files are not imported.\n\n> \n> Not a big problem, just import `_Real` and `_Complex` explicitly.\n\nFrom where? This is about the preparser...",
    "created_at": "2018-01-25T21:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149654",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@jdemeyer](#comment:45):
> Replying to [@videlec](#comment:43):
> > Though a problem is that names starting with underscore in `all.py` files are not imported.

> 
> Not a big problem, just import `_Real` and `_Complex` explicitly.

From where? This is about the preparser...



---

archive/issue_comments_149655.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@videlec](#comment:46):\n> From where?\n\nPut this in `sage.all`:\n\n```\nfrom sage.rings.real_mpfr import create_RealNumber as _Real\n```",
    "created_at": "2018-01-25T21:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149655",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@videlec](#comment:46):
> From where?

Put this in `sage.all`:

```
from sage.rings.real_mpfr import create_RealNumber as _Real
```



---

archive/issue_comments_149656.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@jdemeyer](#comment:47):\n> Replying to [@videlec](#comment:46):\n> > From where?\n\n> \n> Put this in `sage.all`:\n> \n> ```\n> from sage.rings.real_mpfr import create_RealNumber as _Real\n> ```\n\nDoes not work. Names starting with an underscore are ignored by the `import *` syntax.",
    "created_at": "2018-01-25T21:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149656",
    "user": "https://github.com/videlec"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@jdemeyer](#comment:47):
> Replying to [@videlec](#comment:46):
> > From where?

> 
> Put this in `sage.all`:
> 
> ```
> from sage.rings.real_mpfr import create_RealNumber as _Real
> ```

Does not work. Names starting with an underscore are ignored by the `import *` syntax.



---

archive/issue_comments_149657.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@videlec](#comment:48):\n> Replying to [@jdemeyer](#comment:47):\n> > Replying to [@videlec](#comment:46):\n> > > From where?\n\n> > \n> > Put this in `sage.all`:\n> > \n> > ```\n> > from sage.rings.real_mpfr import create_RealNumber as _Real\n> > ```\n\n> \n> Does not work. Names starting with an underscore are ignored by the `import *` syntax.\n\nThis would be a (not very elegant) solution\n\n```diff\ndiff --git a/src/sage/repl/ipython_extension.py b/src/sage/repl/ipython_extension.py\nindex 90a8049d72..22110fe5ac 100644\n--- a/src/sage/repl/ipython_extension.py\n+++ b/src/sage/repl/ipython_extension.py\n@@ -476,8 +476,12 @@ class SageCustomizations(object):\n         Set up Sage command-line environment\n         \"\"\"\n         # import outside of cell so we don't get a traceback\n-        from sage.repl.user_globals import initialize_globals\n+        from sage.repl.user_globals import initialize_globals, set_global\n+        from sage.rings.real_mpfr import create_RealNumber\n+        from sage.rings.complex_number import create_ComplexNumber\n         initialize_globals(self.all_globals(), self.shell.user_ns)\n+        set_global('_Real', create_RealNumber)\n+        set_global('_Complex', create_ComplexNumber)\n         self.run_init()\n```",
    "created_at": "2018-01-25T23:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149657",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@videlec](#comment:48):
> Replying to [@jdemeyer](#comment:47):
> > Replying to [@videlec](#comment:46):
> > > From where?

> > 
> > Put this in `sage.all`:
> > 
> > ```
> > from sage.rings.real_mpfr import create_RealNumber as _Real
> > ```

> 
> Does not work. Names starting with an underscore are ignored by the `import *` syntax.

This would be a (not very elegant) solution

```diff
diff --git a/src/sage/repl/ipython_extension.py b/src/sage/repl/ipython_extension.py
index 90a8049d72..22110fe5ac 100644
--- a/src/sage/repl/ipython_extension.py
+++ b/src/sage/repl/ipython_extension.py
@@ -476,8 +476,12 @@ class SageCustomizations(object):
         Set up Sage command-line environment
         """
         # import outside of cell so we don't get a traceback
-        from sage.repl.user_globals import initialize_globals
+        from sage.repl.user_globals import initialize_globals, set_global
+        from sage.rings.real_mpfr import create_RealNumber
+        from sage.rings.complex_number import create_ComplexNumber
         initialize_globals(self.all_globals(), self.shell.user_ns)
+        set_global('_Real', create_RealNumber)
+        set_global('_Complex', create_ComplexNumber)
         self.run_init()
```



---

archive/issue_events_181979.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-09T15:40:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181979"
}
```



---

archive/issue_events_181980.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-02-09T15:40:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181980"
}
```



---

archive/issue_comments_149658.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\ndoes not apply",
    "created_at": "2018-02-09T15:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13110#issuecomment-149658",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:50" align="right">comment:50</div>

does not apply



---

archive/issue_events_181981.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:40:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13110",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13110#event-181981"
}
```
