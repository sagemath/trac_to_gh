# Issue 13610: Make sage -t --debug trigger on an incorrect doctest in addition to an unexpected error

archive/issues_013406.json:
```json
{
    "body": "#12415 introduces the ability to drop into a Python debugger when an unexpected error is encountered.  I was attempting to have a similar behavior happen when an incorrect result was obtained so that it's easier to figure out what has gone wrong in the doctest.  But problems with interrupt handling were delaying the completion of #12415 (already a patchbomb), so I've stripped out that functionality and put it here.\n\nAssignee: mvngu\n\nReviewer: Jeroen Demeyer\n\nAuthor: David Roe\n\nMerged: sage-5.9.beta4\n\nDependencies: #14289, #14290, #14331, #13278, #14370\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13610\n\n",
    "closed_at": "2013-04-04T17:39:41Z",
    "created_at": "2012-10-17T05:34:42Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Make sage -t --debug trigger on an incorrect doctest in addition to an unexpected error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13610",
    "user": "https://github.com/roed314"
}
```
#12415 introduces the ability to drop into a Python debugger when an unexpected error is encountered.  I was attempting to have a similar behavior happen when an incorrect result was obtained so that it's easier to figure out what has gone wrong in the doctest.  But problems with interrupt handling were delaying the completion of #12415 (already a patchbomb), so I've stripped out that functionality and put it here.

Assignee: mvngu

Reviewer: Jeroen Demeyer

Author: David Roe

Merged: sage-5.9.beta4

Dependencies: #14289, #14290, #14331, #13278, #14370

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13610





---

archive/issue_comments_205488.json:
```json
{
    "body": "Changing dependencies from \"#12415\" to \"#14289\"",
    "created_at": "2013-03-18T09:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205488",
    "user": "https://github.com/roed314"
}
```

Changing dependencies from "#12415" to "#14289"



---

archive/issue_comments_205489.json:
```json
{
    "body": "Changing dependencies from \"#14289\" to \"#14289, #14290\"",
    "created_at": "2013-03-18T09:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205489",
    "user": "https://github.com/roed314"
}
```

Changing dependencies from "#14289" to "#14289, #14290"



---

archive/issue_comments_205490.json:
```json
{
    "body": "Attachment [13610.patch](tarball://root/attachments/some-uuid/ticket13610/13610.patch) by @roed314 created at 2013-03-18 09:58:11",
    "created_at": "2013-03-18T09:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205490",
    "user": "https://github.com/roed314"
}
```

Attachment [13610.patch](tarball://root/attachments/some-uuid/ticket13610/13610.patch) by @roed314 created at 2013-03-18 09:58:11



---

archive/issue_comments_205491.json:
```json
{
    "body": "<a id='comment:3'></a>\nAlright, this works for me on OS X.  Needs review.",
    "created_at": "2013-03-18T09:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205491",
    "user": "https://github.com/roed314"
}
```

<a id='comment:3'></a>
Alright, this works for me on OS X.  Needs review.



---

archive/issue_comments_205492.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-18T09:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205492",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_205493.json:
```json
{
    "body": "Changing component from doctest to doctest framework.",
    "created_at": "2013-03-28T22:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205493",
    "user": "https://github.com/roed314"
}
```

Changing component from doctest to doctest framework.



---

archive/issue_comments_205494.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-04-01T12:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205494",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_205495.json:
```json
{
    "body": "Changing dependencies from \"#14289, #14290\" to \"#14289, #14290, #14331, #13278, #14370\"",
    "created_at": "2013-04-01T12:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205495",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#14289, #14290" to "#14289, #14290, #14331, #13278, #14370"



---

archive/issue_comments_205496.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-01T13:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205496",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_205497.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2013-04-01T13:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205497",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_205498.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-02T11:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205498",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_205499.json:
```json
{
    "body": "<a id='comment:7'></a>\nReview patch looks good to me.",
    "created_at": "2013-04-02T11:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205499",
    "user": "https://github.com/roed314"
}
```

<a id='comment:7'></a>
Review patch looks good to me.



---

archive/issue_comments_205500.json:
```json
{
    "body": "Changing work_issues from \"keyboard interrupt, doctesting after exiting the debugger not working correctly\" to \"\"",
    "created_at": "2013-04-02T12:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205500",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "keyboard interrupt, doctesting after exiting the debugger not working correctly" to ""



---

archive/issue_comments_205501.json:
```json
{
    "body": "<a id='comment:9'></a>\nDoctest failure in `sage/tests/cmdline.py`",
    "created_at": "2013-04-02T15:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205501",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Doctest failure in `sage/tests/cmdline.py`



---

archive/issue_comments_205502.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-04-02T15:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205502",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_205503.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-03T08:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205503",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_205504.json:
```json
{
    "body": "<a id='comment:10'></a>\nAttachment [13610_review.patch](tarball://root/attachments/some-uuid/ticket13610/13610_review.patch) by @jdemeyer created at 2013-04-03 08:21:02",
    "created_at": "2013-04-03T08:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205504",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Attachment [13610_review.patch](tarball://root/attachments/some-uuid/ticket13610/13610_review.patch) by @jdemeyer created at 2013-04-03 08:21:02



---

archive/issue_comments_205505.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-03T08:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205505",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_205506.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks good.",
    "created_at": "2013-04-03T08:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205506",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'></a>
Looks good.



---

archive/issue_comments_205507.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.9.beta4\"",
    "created_at": "2013-04-04T17:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205507",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.9.beta4"



---

archive/issue_comments_205508.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-04T17:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13610#issuecomment-205508",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_037938.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-04T17:39:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13610",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13610#event-37938"
}
```
