# Issue 13368: plot(x, xmin=1, xmax=-1) comes up empty

archive/issues_013196.json:
```json
{
    "assignees": [],
    "body": "The following two plots\n\n```\nplot(x, xmin=1, xmax=-1)\nplot(x).show(xmin=1, xmax=-1)\n```\ngive different outputs. In particular, the plot comes up empty in the\nformer one. This seems to be a conscious decision taken in #5651. The main\nline seems to be this line in `sage/plot/plot.py` and similar lines in\nseveral other files.\n\n```\n    G_kwds = Graphics._extract_kwds_for_show(kwds, ignore=['xmin', 'xmax'])\n```\nIs there a reason for this? Should this be \"fixed?\"\n\nAssignee: **@jasongrout, @williamstein**\n\nCC:  @kcrisman @sagetrac-jakobkroeker @paulmasson @sagetrac-jhonrubia6 @novoselt @alauve @tscrim @jm58660\n\nBranch/Commit: **[u/paulmasson/13368](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/13368) @ [f0eebbb](https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989)**\n\nReviewer: **Javier Honrubia Gonz\u00e1lez**\n\nAuthor: **Paul Masson**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13368_\n\n",
    "created_at": "2012-08-15T03:34:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "plot(x, xmin=1, xmax=-1) comes up empty",
    "type": "issue",
    "updated_at": "2022-12-29T01:37:14Z",
    "url": "https://github.com/sagemath/sage/issues/13368",
    "user": "https://github.com/ppurka"
}
```
The following two plots

```
plot(x, xmin=1, xmax=-1)
plot(x).show(xmin=1, xmax=-1)
```
give different outputs. In particular, the plot comes up empty in the
former one. This seems to be a conscious decision taken in #5651. The main
line seems to be this line in `sage/plot/plot.py` and similar lines in
several other files.

```
    G_kwds = Graphics._extract_kwds_for_show(kwds, ignore=['xmin', 'xmax'])
```
Is there a reason for this? Should this be "fixed?"

Assignee: **@jasongrout, @williamstein**

CC:  @kcrisman @sagetrac-jakobkroeker @paulmasson @sagetrac-jhonrubia6 @novoselt @alauve @tscrim @jm58660

Branch/Commit: **[u/paulmasson/13368](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/13368) @ [f0eebbb](https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989)**

Reviewer: **Javier Honrubia Gonz√°lez**

Author: **Paul Masson**

_Issue created by migration from https://trac.sagemath.org/ticket/13368_





---

archive/issue_events_171013.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-08-15T03:34:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171013"
}
```



---

archive/issue_events_171014.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-08-15T03:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171014"
}
```



---

archive/issue_events_171015.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-08-15T03:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171015"
}
```



---

archive/issue_events_171016.json:
```json
{
    "actor": "https://github.com/ppurka",
    "created_at": "2012-08-15T03:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171016"
}
```



---

archive/issue_comments_157657.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nOne data point is an email I got today (unrelated to Sage development, just use) asking why\n\n```\nplot(1/x,xmin=-5,xmax=5)\n```\ndidn't result as expected.  So maybe we should do more than ignore them, but raise an error or something...\n\n---\n\nNO!  My belief is that this is a typo.  Notice that in #5651, the places where this is ignored are ALL some kind of contour or \"rectangular\" plot, except for plot.py, but then plot_field.py does *not* have this, even though it's this kind of plot.  In fact, we probably should support things like\n\n```\nsage: plot(x,(x,1,5),xmin=2)\n```\nsince we might want to keep the data but not show it.",
    "created_at": "2013-06-20T01:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157657",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">Comment 1</div>

One data point is an email I got today (unrelated to Sage development, just use) asking why

```
plot(1/x,xmin=-5,xmax=5)
```
didn't result as expected.  So maybe we should do more than ignore them, but raise an error or something...

---

NO!  My belief is that this is a typo.  Notice that in #5651, the places where this is ignored are ALL some kind of contour or "rectangular" plot, except for plot.py, but then plot_field.py does *not* have this, even though it's this kind of plot.  In fact, we probably should support things like

```
sage: plot(x,(x,1,5),xmin=2)
```
since we might want to keep the data but not show it.



---

archive/issue_comments_157658.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThough we'd probably have to deal with\n\n```\nsage: plot(x,(x,1,5),xmin=2).show(xmin=3)\n```\nsomehow...",
    "created_at": "2013-06-20T01:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157658",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">Comment 2</div>

Though we'd probably have to deal with

```
sage: plot(x,(x,1,5),xmin=2).show(xmin=3)
```
somehow...



---

archive/issue_comments_157659.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nwith ymin, the parameter in show overrides the parameter in plot.",
    "created_at": "2013-06-20T01:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157659",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:3" align="right">Comment 3</div>

with ymin, the parameter in show overrides the parameter in plot.



---

archive/issue_events_171017.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171017"
}
```



---

archive/issue_events_171018.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171018"
}
```



---

archive/issue_events_171019.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171019"
}
```



---

archive/issue_events_171020.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171020"
}
```



---

archive/issue_comments_157660.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nAn example from #5124 (duplicate of this ticket; note that this was created before #5651):\n\n```\nE = EllipticCurve('37a')\nE.plot(xmin=-10, xmax=10)\n```",
    "created_at": "2014-04-11T00:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157660",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:6" align="right">Comment 6</div>

An example from #5124 (duplicate of this ticket; note that this was created before #5651):

```
E = EllipticCurve('37a')
E.plot(xmin=-10, xmax=10)
```



---

archive/issue_comments_157661.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI think I had some idea how to fix this. If I get some time I will look at it again. It will not be any time soon, unfortunately. Essentially, we just need to mimic how ymin and ymax are handled.",
    "created_at": "2014-04-11T05:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157661",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:7" align="right">Comment 7</div>

I think I had some idea how to fix this. If I get some time I will look at it again. It will not be any time soon, unfortunately. Essentially, we just need to mimic how ymin and ymax are handled.



---

archive/issue_events_171021.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171021"
}
```



---

archive/issue_events_171022.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171022"
}
```



---

archive/issue_events_171023.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171023"
}
```



---

archive/issue_events_171024.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171024"
}
```



---

archive/issue_comments_157662.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nJust came across this again.  Really, *all* relevant options should be passed to show!",
    "created_at": "2015-06-26T19:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157662",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">Comment 11</div>

Just came across this again.  Really, *all* relevant options should be passed to show!



---

archive/issue_comments_157663.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nAs of 7.3.beta8 evaluating `plot(x, xmin=-1, xmax=1)` and `plot(1/x,xmin=-5,xmax=5,ymin=-5,ymax=5)` both produce the expected graphs.\n\nEvaluating `plot(x, xmin=1, xmax=-1)` with a reversed domain does not produce a plot. Evaluating`plot(1/x,xmin=-5,xmax=5,ymin=5,ymax=-5)` with an inverted range flips the plot upside down.\n\nShouldn't this ticket be first about a sanity check on domain and range? Is there a good reason to allow reversal and inversion?",
    "created_at": "2016-07-20T21:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157663",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:12" align="right">Comment 12</div>

As of 7.3.beta8 evaluating `plot(x, xmin=-1, xmax=1)` and `plot(1/x,xmin=-5,xmax=5,ymin=-5,ymax=5)` both produce the expected graphs.

Evaluating `plot(x, xmin=1, xmax=-1)` with a reversed domain does not produce a plot. Evaluating`plot(1/x,xmin=-5,xmax=5,ymin=5,ymax=-5)` with an inverted range flips the plot upside down.

Shouldn't this ticket be first about a sanity check on domain and range? Is there a good reason to allow reversal and inversion?



---

archive/issue_events_171025.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-20T21:02:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171025"
}
```



---

archive/issue_comments_157664.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@paulmasson](#comment%3A12):\n> Evaluating `plot(x, xmin=1, xmax=-1)` with a reversed domain does not produce a plot. Evaluating`plot(1/x,xmin=-5,xmax=5,ymin=5,ymax=-5)` with an inverted range flips the plot upside down.\n\nSecond command should be the desired output.\n\n> Shouldn't this ticket be first about a sanity check on domain and range? Is there a good reason to allow reversal and inversion?\n\nA good reason to allow flipped axis is to have axes that are decreasing instead of increasing. It is already possible by using `plot(...).show(xmax=-1,xmin=1)`. This ticket was about making the behavior of plot *consistent* with what `plot(...).show()` does.",
    "created_at": "2016-07-21T15:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157664",
    "user": "https://github.com/ppurka"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@paulmasson](#comment%3A12):
> Evaluating `plot(x, xmin=1, xmax=-1)` with a reversed domain does not produce a plot. Evaluating`plot(1/x,xmin=-5,xmax=5,ymin=5,ymax=-5)` with an inverted range flips the plot upside down.

Second command should be the desired output.

> Shouldn't this ticket be first about a sanity check on domain and range? Is there a good reason to allow reversal and inversion?

A good reason to allow flipped axis is to have axes that are decreasing instead of increasing. It is already possible by using `plot(...).show(xmax=-1,xmin=1)`. This ticket was about making the behavior of plot *consistent* with what `plot(...).show()` does.



---

archive/issue_comments_157665.json:
```json
{
    "body": "Branch: **[u/paulmasson/13368](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/13368)**",
    "created_at": "2016-07-22T20:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157665",
    "user": "https://github.com/paulmasson"
}
```

Branch: **[u/paulmasson/13368](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/13368)**



---

archive/issue_comments_157666.json:
```json
{
    "body": "Commit: **[0f674f2](https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119)**",
    "created_at": "2016-07-22T20:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157666",
    "user": "https://github.com/paulmasson"
}
```

Commit: **[0f674f2](https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119)**



---

archive/issue_events_171026.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-22T20:31:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171026"
}
```



---

archive/issue_events_171027.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-22T20:31:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171027"
}
```



---

archive/issue_events_171028.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-22T20:31:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171028"
}
```



---

archive/issue_events_171029.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-22T20:31:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171029"
}
```



---

archive/issue_comments_157667.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nHe's a solution to this problem. Part of the reason the plots were empty is that the function `setup_for_eval_on_grid()` in `plot/misc.py` outputs plotting steps as an absolute value, not a signed value. I've removed that and modified the doctests accordingly, but six other plotting files use that function in addition to `plot.py`.\n\nAll plotting doctests pass and documentation all builds. I scanned all seven plotting documentation HTML files that use `setup_for_eval_on_grid()` and didn't see anything strange, but other eyes need to look at them closely.\n\nAdding Javier to cc list since he's been working on plotting examples and might spot something wrong.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d577880141173f2defd0fe5cc8e99f2bf06d0e\">46d5778</a></td><td><code>Pass xmin and xmax to show()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119\">0f674f2</a></td><td><code>Fix doctests after removing 'abs'</code></td></tr></table>\n",
    "created_at": "2016-07-22T20:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157667",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:15" align="right">Comment 15</div>

He's a solution to this problem. Part of the reason the plots were empty is that the function `setup_for_eval_on_grid()` in `plot/misc.py` outputs plotting steps as an absolute value, not a signed value. I've removed that and modified the doctests accordingly, but six other plotting files use that function in addition to `plot.py`.

All plotting doctests pass and documentation all builds. I scanned all seven plotting documentation HTML files that use `setup_for_eval_on_grid()` and didn't see anything strange, but other eyes need to look at them closely.

Adding Javier to cc list since he's been working on plotting examples and might spot something wrong.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d577880141173f2defd0fe5cc8e99f2bf06d0e">46d5778</a></td><td><code>Pass xmin and xmax to show()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119">0f674f2</a></td><td><code>Fix doctests after removing 'abs'</code></td></tr></table>




---

archive/issue_comments_157668.json:
```json
{
    "body": "Author: **Paul Masson**",
    "created_at": "2016-07-22T20:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157668",
    "user": "https://github.com/paulmasson"
}
```

Author: **Paul Masson**



---

archive/issue_comments_157669.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nAndrey, after reading some older Trac tickets I see that you've been active in the plotting parts of Sage, so I'm adding you to the cc list. I want to make sure the change I made to `setup_for_eval_on_grid()` in `plot/misc.py` doesn't have unintended consequences, so if you have any input on that it would be appreciated.",
    "created_at": "2016-07-23T22:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157669",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:17" align="right">Comment 17</div>

Andrey, after reading some older Trac tickets I see that you've been active in the plotting parts of Sage, so I'm adding you to the cc list. I want to make sure the change I made to `setup_for_eval_on_grid()` in `plot/misc.py` doesn't have unintended consequences, so if you have any input on that it would be appreciated.



---

archive/issue_comments_157670.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI think you need to adjust logic here:\n\n```diff\n@@ -131,7 +131,7 @@ def setup_for_eval_on_grid(funcs, ranges, plot_points=None, return_vars=False):\n         raise ValueError(\"plot_points must be either an integer or a list of integers, one for each range\")\n \n     plot_points = [int(p) if p>=2 else 2 for p in plot_points]\n-    range_steps = [abs(range[1] - range[0])/(p-1) for range, p in zip(ranges, plot_points)]\n+    range_steps = [(range[1] - range[0])/(p-1) for range, p in zip(ranges, plot_points)]\n     if min(range_steps) == float(0):\n         raise ValueError(\"plot start point and end point must be different\")\n```\nSince the question is about any of the steps being 0. (Which, ideally, should not be a problem, but assuming that it is now let's keep the error.\n\nOtherwise, PLEASE, let keywords have the same meaning in all related functions and let them be handled in the same way!",
    "created_at": "2016-07-24T18:41:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157670",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:18" align="right">Comment 18</div>

I think you need to adjust logic here:

```diff
@@ -131,7 +131,7 @@ def setup_for_eval_on_grid(funcs, ranges, plot_points=None, return_vars=False):
         raise ValueError("plot_points must be either an integer or a list of integers, one for each range")
 
     plot_points = [int(p) if p>=2 else 2 for p in plot_points]
-    range_steps = [abs(range[1] - range[0])/(p-1) for range, p in zip(ranges, plot_points)]
+    range_steps = [(range[1] - range[0])/(p-1) for range, p in zip(ranges, plot_points)]
     if min(range_steps) == float(0):
         raise ValueError("plot start point and end point must be different")
```
Since the question is about any of the steps being 0. (Which, ideally, should not be a problem, but assuming that it is now let's keep the error.

Otherwise, PLEASE, let keywords have the same meaning in all related functions and let them be handled in the same way!



---

archive/issue_comments_157671.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nAndrey, I haven't changed any keywords and don't plan to. All I did was remove `abs` so that `range_steps` can take negative as well as positive values. This is necessary for creating plots in `plot.py` when `xmin > xmax`.\n\nThe question is whether the change of allowing `range_steps` to be negative will have an unintended impact on other plotting routines. I don't expect you to read all of the plotting code, but if anything else comes to mind let me know. Thanks!",
    "created_at": "2016-07-24T19:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157671",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:19" align="right">Comment 19</div>

Andrey, I haven't changed any keywords and don't plan to. All I did was remove `abs` so that `range_steps` can take negative as well as positive values. This is necessary for creating plots in `plot.py` when `xmin > xmax`.

The question is whether the change of allowing `range_steps` to be negative will have an unintended impact on other plotting routines. I don't expect you to read all of the plotting code, but if anything else comes to mind let me know. Thanks!



---

archive/issue_comments_157672.json:
```json
{
    "body": "Changed commit from **[0f674f2](https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119)** to **[c3a7f71](https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22)**",
    "created_at": "2016-08-18T22:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0f674f2](https://github.com/sagemath/sagetrac-mirror/commit/0f674f2d7e09d7c564ad093ac310d6749a607119)** to **[c3a7f71](https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22)**



---

archive/issue_comments_157673.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22\">c3a7f71</a></td><td><code>Rebase for consistency with #20924</code></td></tr></table>\n",
    "created_at": "2016-08-18T22:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157673",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22">c3a7f71</a></td><td><code>Rebase for consistency with #20924</code></td></tr></table>




---

archive/issue_comments_157674.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b85a571dae8fbe55c789d744a1de1957bd47f95\">2b85a57</a></td><td><code>Pass xmin and xmax to show()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989\">f0eebbb</a></td><td><code>Fix doctests after removing 'abs'</code></td></tr></table>\n",
    "created_at": "2016-08-18T22:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157674",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b85a571dae8fbe55c789d744a1de1957bd47f95">2b85a57</a></td><td><code>Pass xmin and xmax to show()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989">f0eebbb</a></td><td><code>Fix doctests after removing 'abs'</code></td></tr></table>




---

archive/issue_comments_157675.json:
```json
{
    "body": "Changed commit from **[c3a7f71](https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22)** to **[f0eebbb](https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989)**",
    "created_at": "2016-08-18T22:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c3a7f71](https://github.com/sagemath/sagetrac-mirror/commit/c3a7f719829b7ac66bf2d88bff71797f01972f22)** to **[f0eebbb](https://github.com/sagemath/sagetrac-mirror/commit/f0eebbb05f0b3d39a6dc6de550b900ef84caf989)**



---

archive/issue_events_171030.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-08-18T23:05:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171030"
}
```



---

archive/issue_events_171031.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-08-18T23:05:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171031"
}
```



---

archive/issue_comments_157676.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nCode rewritten for consistency with #20924",
    "created_at": "2016-08-18T23:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157676",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:22" align="right">Comment 22</div>

Code rewritten for consistency with #20924



---

archive/issue_events_171032.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T10:03:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171032"
}
```



---

archive/issue_events_171033.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T10:03:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171033"
}
```



---

archive/issue_comments_157677.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\neverything looks good to me. As I see no negative vote, I'll make it a positive review",
    "created_at": "2016-10-23T10:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157677",
    "user": "https://github.com/sagetrac-jhonrubia6"
}
```

<div id="comment:23" align="right">Comment 23</div>

everything looks good to me. As I see no negative vote, I'll make it a positive review



---

archive/issue_events_171034.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-23T14:04:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171034"
}
```



---

archive/issue_events_171035.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-23T14:04:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171035"
}
```



---

archive/issue_comments_157678.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReviewer name is needed.",
    "created_at": "2016-10-23T14:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157678",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">Comment 24</div>

Reviewer name is needed.



---

archive/issue_events_171036.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-23T14:04:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171036"
}
```



---

archive/issue_events_171037.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-23T14:04:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171037"
}
```



---

archive/issue_events_171038.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T16:13:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171038"
}
```



---

archive/issue_events_171039.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T16:13:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171039"
}
```



---

archive/issue_events_171040.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T16:13:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171040"
}
```



---

archive/issue_events_171041.json:
```json
{
    "actor": "https://github.com/sagetrac-jhonrubia6",
    "created_at": "2016-10-23T16:13:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171041"
}
```



---

archive/issue_comments_157679.json:
```json
{
    "body": "Reviewer: **Javier Honrubia Gonz\u00e1lez**",
    "created_at": "2016-10-23T16:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157679",
    "user": "https://github.com/sagetrac-jhonrubia6"
}
```

Reviewer: **Javier Honrubia Gonz√°lez**



---

archive/issue_events_171042.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-29T14:21:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171042"
}
```



---

archive/issue_events_171043.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-29T14:21:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171043"
}
```



---

archive/issue_comments_157680.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\n\n```\nsage -t --long src/sage/schemes/elliptic_curves/ell_generic.py  # 1 doctest failed\n```\nsee patchbot",
    "created_at": "2016-10-29T14:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157680",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">Comment 26</div>


```
sage -t --long src/sage/schemes/elliptic_curves/ell_generic.py  # 1 doctest failed
```
see patchbot



---

archive/issue_comments_157681.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nThe changes on this ticket produce unexpected results for elliptic curves. Needs to be investigated.",
    "created_at": "2016-11-14T00:19:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157681",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:27" align="right">Comment 27</div>

The changes on this ticket produce unexpected results for elliptic curves. Needs to be investigated.



---

archive/issue_events_171044.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-01-19T20:10:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "title_is": "plot(x, xmin=1, xmax=-1) comes up empty",
    "title_was": "plot(x, xmax=1, xmin=-1) comes up empty",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171044"
}
```



---

archive/issue_comments_157682.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nMaybe not related, but why \"e\" in \"2.717e\" in\n\n```\nplot(x/log_b(x, 2), (2.717, 2.72))\n```",
    "created_at": "2017-01-23T06:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157682",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:30" align="right">Comment 30</div>

Maybe not related, but why "e" in "2.717e" in

```
plot(x/log_b(x, 2), (2.717, 2.72))
```



---

archive/issue_comments_157683.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\n> Maybe not related, but why \"e\" in \"2.717e\" in\n\nIndeed unrelated, but also worth a ticket.  We don't do a good job dealing with scientific notation that ends up in the tick labels, and you can see that if you try plotting things with really high output values but in a narrow range.  [For example](http://sagecell.sagemath.org/?z=eJwryMkv0aiIM9LRqNAxNIgzAxPahpqaAGNfBqw=&lang=sage):\n\n```\nplot(x^2,(x,10^6,10^6+1))\n```",
    "created_at": "2017-01-23T15:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13368#issuecomment-157683",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:31" align="right">Comment 31</div>

> Maybe not related, but why "e" in "2.717e" in

Indeed unrelated, but also worth a ticket.  We don't do a good job dealing with scientific notation that ends up in the tick labels, and you can see that if you try plotting things with really high output values but in a narrow range.  [For example](http://sagecell.sagemath.org/?z=eJwryMkv0aiIM9LRqNAxNIgzAxPahpqaAGNfBqw=&lang=sage):

```
plot(x^2,(x,10^6,10^6+1))
```



---

archive/issue_events_171045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:37:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13368",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13368#event-171045"
}
```
