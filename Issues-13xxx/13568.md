# Issue 13568: Quaternion Orders over Number Fields

archive/issues_013364.json:
```json
{
    "body": "Generalizes the code for quaternion orders of quaternion algebras over QQ to allow for quaternion orders of quaternion algebras over number fields.\n\nAssignee: @aghitza\n\nCC:  schisholm @dansme\n\nKeywords: quaternion, order\n\nReviewer: Gonzalo Tornar\u00eda\n\nAuthor: Aly Deines\n\nBranch: u/aurel/13568-review\n\nStatus: needs_work\n\nCommit: afba2742b6e1696172343fbe439bb2e2af5059e7\n\nIssue created by migration from https://trac.sagemath.org/ticket/13568\n\n",
    "created_at": "2012-10-04T15:30:09Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Quaternion Orders over Number Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13568",
    "user": "https://github.com/adeines"
}
```
Generalizes the code for quaternion orders of quaternion algebras over QQ to allow for quaternion orders of quaternion algebras over number fields.

Assignee: @aghitza

CC:  schisholm @dansme

Keywords: quaternion, order

Reviewer: Gonzalo Tornar√≠a

Author: Aly Deines

Branch: u/aurel/13568-review

Status: needs_work

Commit: afba2742b6e1696172343fbe439bb2e2af5059e7

Issue created by migration from https://trac.sagemath.org/ticket/13568





---

archive/issue_comments_174839.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [Trac13569_quaternion_orders.patch](tarball://root/attachments/some-uuid/ticket13568/Trac13569_quaternion_orders.patch) by @adeines created at 2012-10-04 17:12:54",
    "created_at": "2012-10-04T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174839",
    "user": "https://github.com/adeines"
}
```

<a id='comment:1'></a>Attachment [Trac13569_quaternion_orders.patch](tarball://root/attachments/some-uuid/ticket13568/Trac13569_quaternion_orders.patch) by @adeines created at 2012-10-04 17:12:54



---

archive/issue_comments_174840.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-04T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174840",
    "user": "https://github.com/adeines"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_174841.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-09T18:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174841",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_037766.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37766"
}
```



---

archive/issue_events_037767.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37767"
}
```



---

archive/issue_events_037768.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37768"
}
```



---

archive/issue_events_037769.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37769"
}
```



---

archive/issue_events_037770.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37770"
}
```



---

archive/issue_events_037771.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37771"
}
```



---

archive/issue_events_037772.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13568#event-37772"
}
```



---

archive/issue_comments_174842.json:
```json
{
    "body": "<a id='comment:8'></a>Rebased the patch to sage-6.4.beta1 and moved to git",
    "created_at": "2014-08-26T11:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174842",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:8'></a>Rebased the patch to sage-6.4.beta1 and moved to git



---

archive/issue_comments_174843.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-26T16:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174843",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174844.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T14:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174845.json:
```json
{
    "body": "<a id='comment:11'></a>I've pushed a bunch of reviewer commits, the log explains them (esp f824306).\n\nThere's still a bug, namely when the base field is QQ and a pseudo-basis is given, the current code will just ignore the ideals.",
    "created_at": "2014-08-27T15:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174845",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:11'></a>I've pushed a bunch of reviewer commits, the log explains them (esp f824306).

There's still a bug, namely when the base field is QQ and a pseudo-basis is given, the current code will just ignore the ideals.



---

archive/issue_comments_174846.json:
```json
{
    "body": "<a id='comment:12'></a>Okay.  I'll get on that.",
    "created_at": "2014-08-27T15:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174846",
    "user": "https://github.com/adeines"
}
```

<a id='comment:12'></a>Okay.  I'll get on that.



---

archive/issue_comments_174847.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-27T15:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174847",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174848.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-27T23:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174849.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-27T23:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174849",
    "user": "https://github.com/tornaria"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174850.json:
```json
{
    "body": "<a id='comment:14'></a>I'm happy with this now. Since I made a lot of changes I'm leaving it as *needs_review*.",
    "created_at": "2014-08-27T23:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174850",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:14'></a>I'm happy with this now. Since I made a lot of changes I'm leaving it as *needs_review*.



---

archive/issue_comments_174851.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T09:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174852.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-29T12:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174853.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-06T21:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_174854.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-09-12T13:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174854",
    "user": "https://github.com/mmasdeu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174855.json:
```json
{
    "body": "<a id='comment:20'></a>I started reviewing it, and made some changes. Some are to make it more pythonic, some are for clarity.\n\nI've set it to needs_work because the patch fails when using quaternion algebras not defined over number fields:\n\n```\nsage: A.<i,j,k> = QuaternionAlgebra(ZZ['x'].fraction_field(),-1,-1)\nsage: A.quaternion_order([1,i,j,k])                                \n---------------------------------------------------------------------------\nUnboundLocalError                         Traceback (most recent call last)\n...\nUnboundLocalError: local variable 'M1' referenced before assignment\n```",
    "created_at": "2014-09-12T13:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174855",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:20'></a>I started reviewing it, and made some changes. Some are to make it more pythonic, some are for clarity.

I've set it to needs_work because the patch fails when using quaternion algebras not defined over number fields:

```
sage: A.<i,j,k> = QuaternionAlgebra(ZZ['x'].fraction_field(),-1,-1)
sage: A.quaternion_order([1,i,j,k])                                
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
...
UnboundLocalError: local variable 'M1' referenced before assignment
```



---

archive/issue_comments_174856.json:
```json
{
    "body": "<a id='comment:21'></a>Just a remark: this functionality is in PARI now, so you could just try to wrap PARI.",
    "created_at": "2015-05-30T10:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174856",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Just a remark: this functionality is in PARI now, so you could just try to wrap PARI.



---

archive/issue_comments_174857.json:
```json
{
    "body": "<a id='comment:23'></a>With Marc Masdeu, we checked that this is still compiling after rebasing on develop. We intend to have a look at this ticket.\n\n---\nLast 10 new commits:",
    "created_at": "2017-03-02T23:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13568#issuecomment-174857",
    "user": "https://trac.sagemath.org/admin/accounts/users/aurel"
}
```

<a id='comment:23'></a>With Marc Masdeu, we checked that this is still compiling after rebasing on develop. We intend to have a look at this ticket.

---
Last 10 new commits:
