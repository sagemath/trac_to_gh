# Issue 13608: exp() does not work on mpmath mpf numbers

archive/issues_013404.json:
```json
{
    "body": "As reported in https://groups.google.com/forum/?fromgroups=#!topic/sage-support/_SGY3ohrmk8 :\n\n```\nsage: import mpmath\nsage: exp(mpmath.mpf('-0.0712959029907420240935')) \n```\nfails with \"`TypeError: 'int' object is not callable`\". As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.\n\nOur top-level `exp()` function should properly evaluate mpf numbers!\n\n\n**Assignee:** @burcin\n\n**CC:**  @kcrisman @gagern @eviatarbach\n\n**Keywords:** exp mpmath mpf\n\n**Branch/Commit:** [8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)\n\n**Reviewer:** Dan Drake, Karl-Dieter Crisman, Ralf Stephan\n\n**Author:** Martin von Gagern\n\nIssue created by migration from https://trac.sagemath.org/ticket/13608\n\n",
    "closed_at": "2014-04-07T19:08:58Z",
    "created_at": "2012-10-16T19:03:08Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.2",
    "title": "exp() does not work on mpmath mpf numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/13608",
    "user": "https://github.com/dandrake"
}
```
As reported in https://groups.google.com/forum/?fromgroups=#!topic/sage-support/_SGY3ohrmk8 :

```
sage: import mpmath
sage: exp(mpmath.mpf('-0.0712959029907420240935')) 
```
fails with "`TypeError: 'int' object is not callable`". As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.

Our top-level `exp()` function should properly evaluate mpf numbers!


**Assignee:** @burcin

**CC:**  @kcrisman @gagern @eviatarbach

**Keywords:** exp mpmath mpf

**Branch/Commit:** [8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)

**Reviewer:** Dan Drake, Karl-Dieter Crisman, Ralf Stephan

**Author:** Martin von Gagern

Issue created by migration from https://trac.sagemath.org/ticket/13608





---

archive/issue_comments_161712.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n sage: import mpmath\n sage: exp(mpmath.mpf('-0.0712959029907420240935')) \n ```\n-fails with a `TypeError`. As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.\n+fails with \"`TypeError: 'int' object is not callable`\". As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.\n \n Our top-level `exp()` function should properly evaluate mpf numbers!\n \n``````\n",
    "created_at": "2012-10-16T19:04:26Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161712",
    "user": "https://github.com/dandrake"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 sage: import mpmath
 sage: exp(mpmath.mpf('-0.0712959029907420240935')) 
 ```
-fails with a `TypeError`. As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.
+fails with "`TypeError: 'int' object is not callable`". As Karl-Dieter Crisman discovered, this is because `exp(a)` by default calls `a.exp()`, and for mpmath floats, `a.exp` (no parentheses) returns a Python int representing its binary exponent -- which isn't callable.
 
 Our top-level `exp()` function should properly evaluate mpf numbers!
 
``````




---

archive/issue_comments_161713.json:
```json
{
    "body": "<a id='comment:2'></a>\nI feel like we should have a more solid workaround for mpmath numbers.  Are there other things which don't work?  Plus, what about those people who **DO** want this `exp` attribute?",
    "created_at": "2012-10-16T19:48:30Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161713",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
I feel like we should have a more solid workaround for mpmath numbers.  Are there other things which don't work?  Plus, what about those people who **DO** want this `exp` attribute?



---

archive/issue_comments_161714.json:
```json
{
    "body": "<a id='comment:3'></a>\nI agree, we need better mpmath integration. The \"workaround\" patch does fix the problem, although it seems like not a very good solution.\n\nI would say anyone who *does* want the mpmath exp attribute can call it directly. \n\nAs for other things that don't work:\n\n* `log` and trig functions (`sin`, `arccos`, as well as hyperbolics) all fail because they can't convert the `mpf` to the symbolic ring. That's a different problem than we have for `exp`.\n\n* `gamma` works but throws a strange deprecation error.\n\n* `sqrt` works.\n\nSo the problem here is unique and due to the \"exp\" collision.",
    "created_at": "2012-10-16T19:57:20Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161714",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:3'></a>
I agree, we need better mpmath integration. The "workaround" patch does fix the problem, although it seems like not a very good solution.

I would say anyone who *does* want the mpmath exp attribute can call it directly. 

As for other things that don't work:

* `log` and trig functions (`sin`, `arccos`, as well as hyperbolics) all fail because they can't convert the `mpf` to the symbolic ring. That's a different problem than we have for `exp`.

* `gamma` works but throws a strange deprecation error.

* `sqrt` works.

So the problem here is unique and due to the "exp" collision.



---

archive/issue_comments_161715.json:
```json
{
    "body": "<a id='comment:4'></a>\nMarking as \"needs review\" in case that attracts attention of someone who has a better solution...",
    "created_at": "2012-10-16T19:59:01Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161715",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:4'></a>
Marking as "needs review" in case that attracts attention of someone who has a better solution...



---

archive/issue_events_116084.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2012-10-16T19:59:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116084"
}
```



---

archive/issue_comments_161716.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm wondering whether it's even appropriate to convert mpf things to non-mpf things here.  Presumably mpmath does support exp and trigs! \n\n```\nsage: import mpmath\nsage: a = mpmath.mpf('-0.0712959029907420240935')\nsage: mpmath.gamma(a)\nmpf('-14.678778643873606')\nsage: mpmath.acos(a)\nmpf('1.6421527691351614')\n```\nI'd hate to have a check in every single function for mpmath objects, very inelegant.  But this seems like the \"right\" way to handle it (i.e., use mpmath versions of functions for mpf objects).",
    "created_at": "2012-10-16T20:17:06Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161716",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
I'm wondering whether it's even appropriate to convert mpf things to non-mpf things here.  Presumably mpmath does support exp and trigs! 

```
sage: import mpmath
sage: a = mpmath.mpf('-0.0712959029907420240935')
sage: mpmath.gamma(a)
mpf('-14.678778643873606')
sage: mpmath.acos(a)
mpf('1.6421527691351614')
```
I'd hate to have a check in every single function for mpmath objects, very inelegant.  But this seems like the "right" way to handle it (i.e., use mpmath versions of functions for mpf objects).



---

archive/issue_comments_161717.json:
```json
{
    "body": "<a id='comment:6'></a>\nkcrisman pointed out this issue here in response to [my question on Ask Sage](http://ask.sagemath.org/question/1937/write-function-for-use-by-both-mpmath-and-sage). I'd like to see this fixed eventually. I agree with ddrake that the `exp` issue is special, and might therefore need special attention. If this ticket here should focus on `exp` alone, please point out or create a new ticket for other functions.\n\nThe problem with `exp` being an attribute but not callable are due to [sage/symbolic/function.pyx@16735#L721.](../tree/master/sage/symbolic/function.pyx@16735#L721.) Perhaps this could be fixed by changing `hasattr(args[0], self._name)` to `callable(getattr(args[0], self._name, None))` to ensure that the attribute not only exists but actually is a function. We might cache the result from `getattr` to avoid calling that again. With this modification, `exp` should be treated like most builtin functions, e.g. `sin`.\n\nkcrisman suggested using functions from the `mpmath` module where appropriate. According to [sage/symbolic/function.pyx@16735#L348](../tree/master/sage/symbolic/function.pyx@16735#L348) there is some customized handling of function evaluation for `numpy` objects. I guess the same approach should be possible for `mpmath` as well: detect whether one of the arguments (or the first argument) is an `mpf` object. Check the namespace first to avoid unneccessary imports. If an object is `mpf`, then either try a `_eval_mpmath_` method of the function object, or a function with the same name from the `mpmath` module. The `_eval_mpmath_` function might default to an implementation that tries to convert arguments to `RR` and results back to `mpf`.\n\nAs an alternative, we might try to support conversion from `mpf` to `SR`. Again there is a precedence with `numpy`, this time found in [sage/symbolic/ring.pyx@16681#L140.](../tree/master/sage/symbolic/ring.pyx@16681#L140.) Providing another morphism from `mpf` to a `RR` of the current working precision should be easy. One benefit of this approach is that it allows mixing of argument types. On the other hand, a drawback of this approach might be that the result of the function call will remain a Sage type, not an `mpf`. To change that, an additional clause in the back conversion code from [sage/symbolic/function.pyx@16735#L733](../tree/master/sage/symbolic/function.pyx@16735#L733) might be used.\n\nShould I write a patch for any of this?",
    "created_at": "2012-10-31T20:42:10Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161717",
    "user": "https://github.com/gagern"
}
```

<a id='comment:6'></a>
kcrisman pointed out this issue here in response to [my question on Ask Sage](http://ask.sagemath.org/question/1937/write-function-for-use-by-both-mpmath-and-sage). I'd like to see this fixed eventually. I agree with ddrake that the `exp` issue is special, and might therefore need special attention. If this ticket here should focus on `exp` alone, please point out or create a new ticket for other functions.

The problem with `exp` being an attribute but not callable are due to [sage/symbolic/function.pyx@16735#L721.](../tree/master/sage/symbolic/function.pyx@16735#L721.) Perhaps this could be fixed by changing `hasattr(args[0], self._name)` to `callable(getattr(args[0], self._name, None))` to ensure that the attribute not only exists but actually is a function. We might cache the result from `getattr` to avoid calling that again. With this modification, `exp` should be treated like most builtin functions, e.g. `sin`.

kcrisman suggested using functions from the `mpmath` module where appropriate. According to [sage/symbolic/function.pyx@16735#L348](../tree/master/sage/symbolic/function.pyx@16735#L348) there is some customized handling of function evaluation for `numpy` objects. I guess the same approach should be possible for `mpmath` as well: detect whether one of the arguments (or the first argument) is an `mpf` object. Check the namespace first to avoid unneccessary imports. If an object is `mpf`, then either try a `_eval_mpmath_` method of the function object, or a function with the same name from the `mpmath` module. The `_eval_mpmath_` function might default to an implementation that tries to convert arguments to `RR` and results back to `mpf`.

As an alternative, we might try to support conversion from `mpf` to `SR`. Again there is a precedence with `numpy`, this time found in [sage/symbolic/ring.pyx@16681#L140.](../tree/master/sage/symbolic/ring.pyx@16681#L140.) Providing another morphism from `mpf` to a `RR` of the current working precision should be easy. One benefit of this approach is that it allows mixing of argument types. On the other hand, a drawback of this approach might be that the result of the function call will remain a Sage type, not an `mpf`. To change that, an additional clause in the back conversion code from [sage/symbolic/function.pyx@16735#L733](../tree/master/sage/symbolic/function.pyx@16735#L733) might be used.

Should I write a patch for any of this?



---

archive/issue_comments_161718.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [gagern](#comment%3A6):\n> Should I write a patch for any of this?\n\n\nSure! If you think you have a good solution, just write a patch. A little improvement is (almost always) better than none...",
    "created_at": "2012-10-31T21:09:32Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161718",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:8'></a>
Replying to [gagern](#comment%3A6):
> Should I write a patch for any of this?


Sure! If you think you have a good solution, just write a patch. A little improvement is (almost always) better than none...



---

archive/attachments_019037.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac13608-workaround.patch",
    "asset_url": "tarball://root/attachments/ticket13608/trac13608-workaround.patch",
    "created_at": "2012-10-31T21:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13608/trac13608-workaround.patch",
    "user": "https://github.com/dandrake"
}
```



---

archive/issue_comments_161719.json:
```json
{
    "body": "**Attachment:** [trac13608-workaround.patch](https://github.com/sagemath/sage/files/ticket13608/trac13608-workaround.patch)\n\nfix trailing whitespace, make patchbot happy",
    "created_at": "2012-10-31T21:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161719",
    "user": "https://github.com/dandrake"
}
```

**Attachment:** [trac13608-workaround.patch](https://github.com/sagemath/sage/files/ticket13608/trac13608-workaround.patch)

fix trailing whitespace, make patchbot happy



---

archive/attachments_019038.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "bug13608a.patch",
    "asset_url": "tarball://root/attachments/ticket13608/bug13608a.patch",
    "created_at": "2012-10-31T23:33:53Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13608/bug13608a.patch",
    "user": "https://github.com/gagern"
}
```



---

archive/issue_comments_161720.json:
```json
{
    "body": "**Attachment:** [bug13608a.patch](https://github.com/sagemath/sage/files/ticket13608/bug13608a.patch)\n\nEnsure member is callable, use functions from mpmath module",
    "created_at": "2012-10-31T23:33:53Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161720",
    "user": "https://github.com/gagern"
}
```

**Attachment:** [bug13608a.patch](https://github.com/sagemath/sage/files/ticket13608/bug13608a.patch)

Ensure member is callable, use functions from mpmath module



---

archive/issue_comments_161721.json:
```json
{
    "body": "<a id='comment:9'></a>\nOK, this `bug13608a.patch` does the `callable` check described in [comment:6](#comment%3A6), and also the special-casing to use `mpmath` functions where available, and fall back to using implicit conversions otherwise. There still is no automatic coercion of `mpf` to `SR`. If that is still desired, I believe it should be in another commit.\n\nAs a drive-by fix, this patch does limit the scope of a number of `try`\u2026`except` in such a way that an exception encountered while *searching* for a function does not get confused with an exception caused by *executing* that function. This could lead to more useful error messages in some cases, and perhaps even affect correctness of behaviour in some other cases. I don't have concrete examples, though, as I don't know a sure way to trigger one of these exceptions in a builtin function.",
    "created_at": "2012-10-31T23:40:44Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161721",
    "user": "https://github.com/gagern"
}
```

<a id='comment:9'></a>
OK, this `bug13608a.patch` does the `callable` check described in [comment:6](#comment%3A6), and also the special-casing to use `mpmath` functions where available, and fall back to using implicit conversions otherwise. There still is no automatic coercion of `mpf` to `SR`. If that is still desired, I believe it should be in another commit.

As a drive-by fix, this patch does limit the scope of a number of `try`…`except` in such a way that an exception encountered while *searching* for a function does not get confused with an exception caused by *executing* that function. This could lead to more useful error messages in some cases, and perhaps even affect correctness of behaviour in some other cases. I don't have concrete examples, though, as I don't know a sure way to trigger one of these exceptions in a builtin function.



---

archive/issue_comments_161722.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [gagern](#comment%3A9):\n> OK, this `bug13608a.patch` does the `callable` check described in [comment:6](#comment%3A6), and also the special-casing to use `mpmath` functions where available, and fall back to using implicit conversions otherwise. There still is no automatic coercion of `mpf` to `SR`. If that is still desired, I believe it should be in another commit.\n> \n\n\nThat seems very reasonable.  Also, perhaps we should first coerce mpmath numbers to `RR(prec=foo)` as you suggest above (in that later ticket).\n\nMight want to add a test that the `exp` of mpmath works.\n\n```\nsage: mpmath.mpf('0.5').exp\n-1\n```\nor something.  I think more tests in general would be good - maybe for a complex `mpc` and some interesting function, for some interesting input.  Similarly, an example where the `except AttributeError: ` branch is reached would be nice, since in Sage 5.2 I get\n\n```\nsage: import mpmath\nsage: getattr(mpmath,'exp')\n<built-in method _sage_exp of MPContext object at 0x117f21600>\nsage: modulefn = getattr(mpmath,'exp')\nsage: modulefn(mpmath.mpf('0.5'))\nmpf('1.6487212707001282')\n```\nso it seems the first branch is the one that fixes the problem in question.\n\n\n> As a drive-by fix, this patch does limit the scope of a number of `try`\u2026`except` in such a way that an exception encountered while *searching* for a function does not get confused with an exception caused by *executing* that function. This could lead to more useful error messages in some cases, and perhaps even affect correctness of behaviour in some other cases. I don't have concrete examples, though, as I don't know a sure way to trigger one of these exceptions in a builtin function.\n\n\nThat's a great idea; I always forget about the else clause but it is a good idea to do this here, I think.  These are some really nice idiomatic fixes.\n\nThere seems to be something missing, by the way, immediately above `if len(args) == 1: ` - maybe hg blame can help here.  I think it's just\n\n```\n                #     exp(M)\n```\nand I think I may have even been involved on that ticket, but I'm not sure how that didn't get in properly.",
    "created_at": "2012-11-01T01:12:01Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161722",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
Replying to [gagern](#comment%3A9):
> OK, this `bug13608a.patch` does the `callable` check described in [comment:6](#comment%3A6), and also the special-casing to use `mpmath` functions where available, and fall back to using implicit conversions otherwise. There still is no automatic coercion of `mpf` to `SR`. If that is still desired, I believe it should be in another commit.
> 


That seems very reasonable.  Also, perhaps we should first coerce mpmath numbers to `RR(prec=foo)` as you suggest above (in that later ticket).

Might want to add a test that the `exp` of mpmath works.

```
sage: mpmath.mpf('0.5').exp
-1
```
or something.  I think more tests in general would be good - maybe for a complex `mpc` and some interesting function, for some interesting input.  Similarly, an example where the `except AttributeError: ` branch is reached would be nice, since in Sage 5.2 I get

```
sage: import mpmath
sage: getattr(mpmath,'exp')
<built-in method _sage_exp of MPContext object at 0x117f21600>
sage: modulefn = getattr(mpmath,'exp')
sage: modulefn(mpmath.mpf('0.5'))
mpf('1.6487212707001282')
```
so it seems the first branch is the one that fixes the problem in question.


> As a drive-by fix, this patch does limit the scope of a number of `try`…`except` in such a way that an exception encountered while *searching* for a function does not get confused with an exception caused by *executing* that function. This could lead to more useful error messages in some cases, and perhaps even affect correctness of behaviour in some other cases. I don't have concrete examples, though, as I don't know a sure way to trigger one of these exceptions in a builtin function.


That's a great idea; I always forget about the else clause but it is a good idea to do this here, I think.  These are some really nice idiomatic fixes.

There seems to be something missing, by the way, immediately above `if len(args) == 1: ` - maybe hg blame can help here.  I think it's just

```
                #     exp(M)
```
and I think I may have even been involved on that ticket, but I'm not sure how that didn't get in properly.



---

archive/issue_comments_161723.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [kcrisman](#comment%3A10):\n> That seems very reasonable.  Also, perhaps we should first coerce mpmath numbers to `RR(prec=foo)` as you suggest above (in that later ticket).\n\n\nAgreed: coercion to `SR` should go via the `RealField` of appropriate precision.\n\n> Might want to add a test that the `exp` of mpmath works.\n\n\nGood idea, will add that later.\n\n> or something.  I think more tests in general would be good - maybe for a complex `mpc` and some interesting function, for some interesting input.\n\n\nOK, will try one or two later on.\n\n>  Similarly, an example where the `except AttributeError: ` branch is reached would be nice,\n\n\nCurrently, my `arcsin` example should cater for that, as there is only `mpmath.asin`, not `mpmath.arcsin`. But in the long run, there should be some aliasing mechanism that invokes `arin` in this case. \n\nOne problem here is telling the difference: in an ideal world, both versions of a function would yield identical results, so it's hard to tell which function actually got called. And if there is a case where results differ, then that difference is likely a bug, and nothing we'd want to rely on in tests. So how can we see which implementation got called, short of monkey-patching the module to use a different function?\n\n> There seems to be something missing, by the way, immediately above `if len(args) == 1: ` - maybe hg blame can help here.  I think it's just\n> \n> ```\n>                 #     exp(M)\n> ```\n> and I think I may have even been involved on that ticket, but I'm not sure how that didn't get in properly.\n\n\nCan't follow you: why do you believe something is missing? My patch was the result of a `hg diff` based on `17335:d06cf4b2215d`.",
    "created_at": "2012-11-01T07:01:23Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161723",
    "user": "https://github.com/gagern"
}
```

<a id='comment:11'></a>
Replying to [kcrisman](#comment%3A10):
> That seems very reasonable.  Also, perhaps we should first coerce mpmath numbers to `RR(prec=foo)` as you suggest above (in that later ticket).


Agreed: coercion to `SR` should go via the `RealField` of appropriate precision.

> Might want to add a test that the `exp` of mpmath works.


Good idea, will add that later.

> or something.  I think more tests in general would be good - maybe for a complex `mpc` and some interesting function, for some interesting input.


OK, will try one or two later on.

>  Similarly, an example where the `except AttributeError: ` branch is reached would be nice,


Currently, my `arcsin` example should cater for that, as there is only `mpmath.asin`, not `mpmath.arcsin`. But in the long run, there should be some aliasing mechanism that invokes `arin` in this case. 

One problem here is telling the difference: in an ideal world, both versions of a function would yield identical results, so it's hard to tell which function actually got called. And if there is a case where results differ, then that difference is likely a bug, and nothing we'd want to rely on in tests. So how can we see which implementation got called, short of monkey-patching the module to use a different function?

> There seems to be something missing, by the way, immediately above `if len(args) == 1: ` - maybe hg blame can help here.  I think it's just
> 
> ```
>                 #     exp(M)
> ```
> and I think I may have even been involved on that ticket, but I'm not sure how that didn't get in properly.


Can't follow you: why do you believe something is missing? My patch was the result of a `hg diff` based on `17335:d06cf4b2215d`.



---

archive/issue_events_116085.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-01T16:33:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116085"
}
```



---

archive/issue_events_116086.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-11-01T16:33:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116086"
}
```



---

archive/issue_comments_161724.json:
```json
{
    "body": "**Reviewer:** Dan Drake, Karl-Dieter Crisman",
    "created_at": "2012-11-01T16:33:31Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161724",
    "user": "https://github.com/kcrisman"
}
```

**Reviewer:** Dan Drake, Karl-Dieter Crisman



---

archive/issue_comments_161725.json:
```json
{
    "body": "<a id='comment:12'></a>\nAll sounds good.  You could create a custom function that had two different versions, I suppose, and then delete it, in the doctest...  the point is just to make sure that all branches are indeed functioning, even if you comment in the explanation.\n\nAs for the `exp(M)`, that wasn't something *you* made missing, but rather something that at some point went missing, so it might as well be added back.  If you look at the syntax in that comment you'll see what I mean; it is nonsensical without that extra line.",
    "created_at": "2012-11-01T16:33:31Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161725",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>
All sounds good.  You could create a custom function that had two different versions, I suppose, and then delete it, in the doctest...  the point is just to make sure that all branches are indeed functioning, even if you comment in the explanation.

As for the `exp(M)`, that wasn't something *you* made missing, but rather something that at some point went missing, so it might as well be added back.  If you look at the syntax in that comment you'll see what I mean; it is nonsensical without that extra line.



---

archive/issue_comments_161726.json:
```json
{
    "body": "<a id='comment:13'></a>\nSorry, appears I lost track of this one here. As I'm pretty busy just now, is there any chance someone will pick up my patch and polish it ready for inclusion? If not, it might still be some time before I get around to that.",
    "created_at": "2013-02-02T14:25:51Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161726",
    "user": "https://github.com/gagern"
}
```

<a id='comment:13'></a>
Sorry, appears I lost track of this one here. As I'm pretty busy just now, is there any chance someone will pick up my patch and polish it ready for inclusion? If not, it might still be some time before I get around to that.



---

archive/issue_comments_161727.json:
```json
{
    "body": "<a id='comment:14'></a>\nI don't have time to investigate right now, so just a quick comment.\n\nThe code path for evaluating symbolic functions is very time sensitive. We should check for speed regressions before accepting anything that modifies it. I'm afraid adding a callable check, or a new Python function call for mpmath function might be too expensive.",
    "created_at": "2013-02-02T16:03:04Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161727",
    "user": "https://github.com/burcin"
}
```

<a id='comment:14'></a>
I don't have time to investigate right now, so just a quick comment.

The code path for evaluating symbolic functions is very time sensitive. We should check for speed regressions before accepting anything that modifies it. I'm afraid adding a callable check, or a new Python function call for mpmath function might be too expensive.



---

archive/issue_comments_161728.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [burcin](#comment%3A14):\n> We should check for speed regressions before accepting anything that modifies it.\n> I'm afraid adding a callable check [\u2026] might be too expensive.\n\n\nI did the following check:\n\n```\na = [RDF(i*0.01) for i in range(100)]\ntimeit('[sin(i) for i in a]', repeat=100, number=10000)\n```\n\nand studied the effect of the following code change:\n\n```\n-        if len(args) == 1 and not hold and not dont_call_method_on_arg and \\\n-                hasattr(args[0], self._name):\n-            return getattr(args[0], self._name)()\n+        if len(args) == 1 and not hold and not dont_call_method_on_arg:\n+            memberfn = getattr(args[0], self._name, None)\n+            if callable(memberfn): \n+                return memberfn()\n```\n\nThe time per loop went *down* from 47 \u00b5s to 42 \u00b5s. So the cost of that `callable` seems to be far less than the overhead due to the `hasattr` in the original code. And in any case the change is very small. Avoiding `hasattr` but doing a `memberfn is not None` instead of the `callable(memberfn)` I got those 42 \u00b5s again, so the cost of `callable` gets lost in the noise. For reference: the direct method invocation `i.sin()` amounts to 29 \u00b5s per loop.\n\n> or a new Python function call for mpmath function\n\n\nTo judge the cost of the mpmath check, I used the two-argument function `atan2` like this:\n\n```\na = [(RDF(i), RDF(i + 2)) for i in range(100)]\ntimeit('[atan2(y, x) for y, x in a]', repeat=10, number=1000)\n```\n\nSubject to the whole patch (basically as submitted before, although I'll attach an updated version shortly) the running time increased from 5.7 ms to 5.8 ms per loop. Not much, perhaps not even significant. And this won't affect GiNaC functions that translate to member invocations, which should cover quite a large number of use cases. Even more after `@`a526457085e3f07440dc39cb77f93ef3e32ae2af which isn't included in my 5.10 code base yet.\n\nTalking of turning function calls to member invocations: in [src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L387](../tree/master/src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L387) the `Function.__call__` implementation claims to contain work which enables `exp(M)` for matrices `M`. But my experiments showed the `GinacFunction.__call__` implementation at [src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L738](../tree/master/src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L738) is actually responsible for this behavior. After `@`a526457085e3f07440dc39cb77f93ef3e32ae2af that will be `BuiltinFunction.__call__`. I'm a bit surprised about this duplicate code, haven't really figured out whether or not this makes sense.",
    "created_at": "2013-07-23T21:02:10Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161728",
    "user": "https://github.com/gagern"
}
```

<a id='comment:15'></a>
Replying to [burcin](#comment%3A14):
> We should check for speed regressions before accepting anything that modifies it.
> I'm afraid adding a callable check […] might be too expensive.


I did the following check:

```
a = [RDF(i*0.01) for i in range(100)]
timeit('[sin(i) for i in a]', repeat=100, number=10000)
```

and studied the effect of the following code change:

```
-        if len(args) == 1 and not hold and not dont_call_method_on_arg and \
-                hasattr(args[0], self._name):
-            return getattr(args[0], self._name)()
+        if len(args) == 1 and not hold and not dont_call_method_on_arg:
+            memberfn = getattr(args[0], self._name, None)
+            if callable(memberfn): 
+                return memberfn()
```

The time per loop went *down* from 47 µs to 42 µs. So the cost of that `callable` seems to be far less than the overhead due to the `hasattr` in the original code. And in any case the change is very small. Avoiding `hasattr` but doing a `memberfn is not None` instead of the `callable(memberfn)` I got those 42 µs again, so the cost of `callable` gets lost in the noise. For reference: the direct method invocation `i.sin()` amounts to 29 µs per loop.

> or a new Python function call for mpmath function


To judge the cost of the mpmath check, I used the two-argument function `atan2` like this:

```
a = [(RDF(i), RDF(i + 2)) for i in range(100)]
timeit('[atan2(y, x) for y, x in a]', repeat=10, number=1000)
```

Subject to the whole patch (basically as submitted before, although I'll attach an updated version shortly) the running time increased from 5.7 ms to 5.8 ms per loop. Not much, perhaps not even significant. And this won't affect GiNaC functions that translate to member invocations, which should cover quite a large number of use cases. Even more after `@`a526457085e3f07440dc39cb77f93ef3e32ae2af which isn't included in my 5.10 code base yet.

Talking of turning function calls to member invocations: in [src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L387](../tree/master/src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L387) the `Function.__call__` implementation claims to contain work which enables `exp(M)` for matrices `M`. But my experiments showed the `GinacFunction.__call__` implementation at [src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L738](../tree/master/src/sage/symbolic/function.pyx@8118b2b39e3a129a5a6186fdc9917940f92b87a6#L738) is actually responsible for this behavior. After `@`a526457085e3f07440dc39cb77f93ef3e32ae2af that will be `BuiltinFunction.__call__`. I'm a bit surprised about this duplicate code, haven't really figured out whether or not this makes sense.



---

archive/issue_events_116087.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2013-07-23T21:08:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116087"
}
```



---

archive/issue_events_116088.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2013-07-23T21:08:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116088"
}
```



---

archive/attachments_019039.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13608_mpmath.patch",
    "asset_url": "tarball://root/attachments/ticket13608/trac_13608_mpmath.patch",
    "created_at": "2013-07-23T21:08:53Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket13608/trac_13608_mpmath.patch",
    "user": "https://github.com/gagern"
}
```



---

archive/issue_comments_161729.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Attachment:** [trac_13608_mpmath.patch](https://github.com/sagemath/sage/files/ticket13608/trac_13608_mpmath.patch)\n\nThe file I just attached has improved doctests compared to my previous attempt. I hope this is ready for inclusion now, in the light of my performance checks from [comment:15](#comment%3A15).",
    "created_at": "2013-07-23T21:08:53Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161729",
    "user": "https://github.com/gagern"
}
```

<a id='comment:16'></a>
**Attachment:** [trac_13608_mpmath.patch](https://github.com/sagemath/sage/files/ticket13608/trac_13608_mpmath.patch)

The file I just attached has improved doctests compared to my previous attempt. I hope this is ready for inclusion now, in the light of my performance checks from [comment:15](#comment%3A15).



---

archive/issue_comments_161730.json:
```json
{
    "body": "<a id='comment:18'></a>\nPatchbot:\nApply trac_13608_mpmath.patch\u200b\n\n(I hope this is the right syntax, and I hope that I may issue such directives as an unprivileged contributor.)",
    "created_at": "2013-07-30T15:29:24Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161730",
    "user": "https://github.com/gagern"
}
```

<a id='comment:18'></a>
Patchbot:
Apply trac_13608_mpmath.patch​

(I hope this is the right syntax, and I hope that I may issue such directives as an unprivileged contributor.)



---

archive/issue_comments_161731.json:
```json
{
    "body": "<a id='comment:19'></a>\nLet's hope it works!",
    "created_at": "2013-07-31T18:48:29Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161731",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
Let's hope it works!



---

archive/issue_events_116089.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116089"
}
```



---

archive/issue_events_116090.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116090"
}
```



---

archive/issue_comments_161732.json:
```json
{
    "body": "<a id='comment:21'></a>\nyes, in principle anybody can tell the bot which patch to apply. But the bot may choose not to obey its orders... :)\n\napply trac_13608_mpmath.patch",
    "created_at": "2013-08-21T13:32:34Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161732",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
yes, in principle anybody can tell the bot which patch to apply. But the bot may choose not to obey its orders... :)

apply trac_13608_mpmath.patch



---

archive/issue_events_116091.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-09-15T16:46:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116091"
}
```



---

archive/issue_events_116092.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-09-15T16:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116092"
}
```



---

archive/issue_comments_161733.json:
```json
{
    "body": "<a id='comment:22'></a>\nthis needs to be rebased",
    "created_at": "2013-09-15T16:46:52Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161733",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
this needs to be rebased



---

archive/issue_comments_161734.json:
```json
{
    "body": "<a id='comment:23'></a>\nI need some assistance here. As far as I understand things, Sage development is currently moving from mercurial to git, right? So the way to grab the latest sources is not via hg (where I never found out how to update to the latest sources), but instead via git?\n\nSo I got myself a checkout of `ssh://git@trac.sagemath.org:2222/sage.git`, as outlined [here](http://sagemath.github.io/git-developer-guide/manual_git.html#the-trac-server). I rebased the patch to that, and then wanted to run the tests locally before committing and pushing them. But a bare source tree won't build sage due to lack of a spkg subtree. And using the sage 5.11 tarball as the basis for git-based development won't work either, I assume, since that tarball is still based on mercurial and doesn't provide the git metadata directories, afaics.\n\nHow do I obtain a working snapshot of the current sage development tree? Do I manually copy the spkg tree from the 5.11 tarball? Can I check out a repository of spkgs from somewhere, and if so, where and how? Or should I rebase to the 5.11 release instead of a current checkout? Or upgrade my 5.10-based hg dev tree to 5.11 sources somehow?",
    "created_at": "2013-09-17T11:16:51Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161734",
    "user": "https://github.com/gagern"
}
```

<a id='comment:23'></a>
I need some assistance here. As far as I understand things, Sage development is currently moving from mercurial to git, right? So the way to grab the latest sources is not via hg (where I never found out how to update to the latest sources), but instead via git?

So I got myself a checkout of `ssh://git@trac.sagemath.org:2222/sage.git`, as outlined [here](http://sagemath.github.io/git-developer-guide/manual_git.html#the-trac-server). I rebased the patch to that, and then wanted to run the tests locally before committing and pushing them. But a bare source tree won't build sage due to lack of a spkg subtree. And using the sage 5.11 tarball as the basis for git-based development won't work either, I assume, since that tarball is still based on mercurial and doesn't provide the git metadata directories, afaics.

How do I obtain a working snapshot of the current sage development tree? Do I manually copy the spkg tree from the 5.11 tarball? Can I check out a repository of spkgs from somewhere, and if so, where and how? Or should I rebase to the 5.11 release instead of a current checkout? Or upgrade my 5.10-based hg dev tree to 5.11 sources somehow?



---

archive/issue_events_116093.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116093"
}
```



---

archive/issue_events_116094.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116094"
}
```



---

archive/issue_comments_161735.json:
```json
{
    "body": "**Branch:** [u/gagern/ticket/13608](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/13608)",
    "created_at": "2014-03-27T15:23:14Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161735",
    "user": "https://github.com/gagern"
}
```

**Branch:** [u/gagern/ticket/13608](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/13608)



---

archive/issue_events_116095.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-03-27T15:25:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116095"
}
```



---

archive/issue_events_116096.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2014-03-27T15:25:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116096"
}
```



---

archive/issue_comments_161736.json:
```json
{
    "body": "<a id='comment:26'></a>\nOK, I finally got my sage git set up properly.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa26d97c3b099f8901f6bd6c82f2bae72f3ce109\">fa26d97</a></td><td><code>Trac #14753: Revert ATLAS package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96bf3313e1d3b81c32328fd55e35ad9e6c2da563\">96bf331</a></td><td><code>mpmath integration for builtin functions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d40615a3cfa2a9451332af7c4c6dfb83b317104a\">d40615a</a></td><td><code>Merge tag '6.0' into ticket/13608</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/343bf74024a02f319f4e78c6b978b76b595446e0\">343bf74</a></td><td><code>Merge branch 'develop' into ticket/13608</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/661fc7cca33033fc4c5aa817a2d78a2454116d6c\">661fc7c</a></td><td><code>Adjust doctest to actual output.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55\">6fbe6b9</a></td><td><code>Renamed memberfn to method.</code></td></tr></table>\n",
    "created_at": "2014-03-27T15:25:35Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161736",
    "user": "https://github.com/gagern"
}
```

<a id='comment:26'></a>
OK, I finally got my sage git set up properly.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa26d97c3b099f8901f6bd6c82f2bae72f3ce109">fa26d97</a></td><td><code>Trac #14753: Revert ATLAS package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96bf3313e1d3b81c32328fd55e35ad9e6c2da563">96bf331</a></td><td><code>mpmath integration for builtin functions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d40615a3cfa2a9451332af7c4c6dfb83b317104a">d40615a</a></td><td><code>Merge tag '6.0' into ticket/13608</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/343bf74024a02f319f4e78c6b978b76b595446e0">343bf74</a></td><td><code>Merge branch 'develop' into ticket/13608</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/661fc7cca33033fc4c5aa817a2d78a2454116d6c">661fc7c</a></td><td><code>Adjust doctest to actual output.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55">6fbe6b9</a></td><td><code>Renamed memberfn to method.</code></td></tr></table>




---

archive/issue_comments_161737.json:
```json
{
    "body": "**Commit:** [6fbe6b98fc6d135c6b7458af171d75481ab69a55](https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55)",
    "created_at": "2014-03-27T15:25:35Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161737",
    "user": "https://github.com/gagern"
}
```

**Commit:** [6fbe6b98fc6d135c6b7458af171d75481ab69a55](https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55)



---

archive/issue_comments_161738.json:
```json
{
    "body": "**Changing commit** from \"[6fbe6b98fc6d135c6b7458af171d75481ab69a55](https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55)\" to \"[8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)\".",
    "created_at": "2014-04-05T08:18:49Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161738",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[6fbe6b98fc6d135c6b7458af171d75481ab69a55](https://github.com/sagemath/sagetrac-mirror/commit/6fbe6b98fc6d135c6b7458af171d75481ab69a55)" to "[8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)".



---

archive/issue_events_116097.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-05T08:18:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116097"
}
```



---

archive/issue_events_116098.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2014-04-05T08:18:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116098"
}
```



---

archive/issue_comments_161739.json:
```json
{
    "body": "<a id='comment:27'></a>\nRebased on 6.2.beta6. Long tests pass in symbolic/ and functions/ (and tutorials).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0\">8a484a2</a></td><td><code>Merge branch 'u/gagern/ticket/13608' of ssh://trac.sagemath.org/sage into tmp</code></td></tr></table>\n",
    "created_at": "2014-04-05T08:18:49Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161739",
    "user": "https://github.com/rwst"
}
```

<a id='comment:27'></a>
Rebased on 6.2.beta6. Long tests pass in symbolic/ and functions/ (and tutorials).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0">8a484a2</a></td><td><code>Merge branch 'u/gagern/ticket/13608' of ssh://trac.sagemath.org/sage into tmp</code></td></tr></table>




---

archive/issue_comments_161740.json:
```json
{
    "body": "**Changing branch** from \"[u/gagern/ticket/13608](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/13608)\" to \"[public/13608](https://github.com/sagemath/sagetrac-mirror/tree/public/13608)\".",
    "created_at": "2014-04-05T08:18:49Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161740",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/gagern/ticket/13608](https://github.com/sagemath/sagetrac-mirror/tree/u/gagern/ticket/13608)" to "[public/13608](https://github.com/sagemath/sagetrac-mirror/tree/public/13608)".



---

archive/issue_comments_161741.json:
```json
{
    "body": "**Changing reviewer** from \"Dan Drake, Karl-Dieter Crisman\" to \"Dan Drake, Karl-Dieter Crisman, Ralf Stephan\".",
    "created_at": "2014-04-05T08:18:49Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161741",
    "user": "https://github.com/rwst"
}
```

**Changing reviewer** from "Dan Drake, Karl-Dieter Crisman" to "Dan Drake, Karl-Dieter Crisman, Ralf Stephan".



---

archive/issue_comments_161742.json:
```json
{
    "body": "<a id='comment:28'></a>\nauthor name",
    "created_at": "2014-04-06T20:55:08Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161742",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>
author name



---

archive/issue_comments_161743.json:
```json
{
    "body": "**Author:** Martin von Gagern",
    "created_at": "2014-04-06T21:09:15Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161743",
    "user": "https://github.com/gagern"
}
```

**Author:** Martin von Gagern



---

archive/issue_events_116099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-07T19:08:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116099"
}
```



---

archive/issue_events_116100.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "69aef339c9c0a986793cc89e4dffc1b57f71a415",
    "created_at": "2014-04-07T19:08:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13608#event-116100"
}
```



---

archive/issue_comments_161744.json:
```json
{
    "body": "**Changing branch** from \"[public/13608](https://github.com/sagemath/sagetrac-mirror/tree/public/13608)\" to \"[8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)\".",
    "created_at": "2014-04-07T19:08:58Z",
    "issue": "https://github.com/sagemath/sage/issues/13608",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13608#issuecomment-161744",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/13608](https://github.com/sagemath/sagetrac-mirror/tree/public/13608)" to "[8a484a2e07b56b1d98a0b4513619551089de13a0](https://github.com/sagemath/sagetrac-mirror/commit/8a484a2e07b56b1d98a0b4513619551089de13a0)".
