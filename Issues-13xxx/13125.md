# Issue 13125: Reals sets consisting of intervals and isolated points

archive/issues_012953.json:
```json
{
    "body": "Finite unions of open/closed/semi-closed subsets of the real line, for example\n\n```\n    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n    (0, 2) + [10, +Infinity)\n```\n\nThis ticket also encountered a number of bugs in the comparison of infinity with various field elements like\n\n```\nsage: RLF(0) < oo\nFalse\n```\nThese are now also fixed and extensive doctests were added.\n\nAssignee: Ares Rib\u00f3\n\nCC:  @kcrisman @tscrim @robertwb\n\nBranch/Commit: c8187460bc0e90c0b58713a5c55bc6b86895a12b\n\nReviewer: Ralf Stephan, Peter Bruin\n\nAuthor: Volker Braun , Jordi Saludes , Ares Rib\u00f3\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13125\n\n",
    "closed_at": "2014-05-25T10:09:18Z",
    "created_at": "2012-06-16T23:25:47Z",
    "labels": [
        "component: calculus"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Reals sets consisting of intervals and isolated points",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13125",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```
Finite unions of open/closed/semi-closed subsets of the real line, for example

```
    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
    (0, 2) + [10, +Infinity)
```

This ticket also encountered a number of bugs in the comparison of infinity with various field elements like

```
sage: RLF(0) < oo
False
```
These are now also fixed and extensive doctests were added.

Assignee: Ares Ribó

CC:  @kcrisman @tscrim @robertwb

Branch/Commit: c8187460bc0e90c0b58713a5c55bc6b86895a12b

Reviewer: Ralf Stephan, Peter Bruin

Author: Volker Braun , Jordi Saludes , Ares Ribó

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13125





---

archive/issue_comments_166131.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -4,11 +4,12 @@\n \n Laurent Claessens defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implemented union() and intersection() methods, as well as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet represening finite union and intersections of intervals by a list of disjoint intervals, and for this class ContinuousSet, union() and __contain__() methods were implemented.\n \n-We extend the previous work of Laurent Claessens defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class RInterval of real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class RInterval is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a RealSet.\n+We extend the previous work of Laurent Claessens defining the class \"RealSet\", that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class 'RInterval' of real intervals. A 'RInterval' is now a 'RealSet', consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class 'RInterval' is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a 'RealSet'.\n \n-For the class RealSet, we implement the intersection(), union() and __contain__(). We implement the function 'subsets' that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real sets. We implement also the infimum and the supremum of a RealSet. \n+For the class 'RealSet', we implement the intersection(), union() and __contain__(). We implement the function 'subsets' that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real sets. We implement also the infimum and the supremum of a 'RealSet'. \n \n-Also we support definite integration over a RealSet.\n+Also we support definite integration over a 'RealSet'.\n+    \n \n Author: Jordi Saludes and Ares Rib\u00f3\n \n```\n",
    "created_at": "2012-06-16T23:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166131",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

Description changed:
```diff
--- 
+++ 
@@ -4,11 +4,12 @@
 
 Laurent Claessens defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implemented union() and intersection() methods, as well as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet represening finite union and intersections of intervals by a list of disjoint intervals, and for this class ContinuousSet, union() and __contain__() methods were implemented.
 
-We extend the previous work of Laurent Claessens defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class RInterval of real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class RInterval is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a RealSet.
+We extend the previous work of Laurent Claessens defining the class "RealSet", that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class 'RInterval' of real intervals. A 'RInterval' is now a 'RealSet', consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class 'RInterval' is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a 'RealSet'.
 
-For the class RealSet, we implement the intersection(), union() and __contain__(). We implement the function 'subsets' that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real sets. We implement also the infimum and the supremum of a RealSet. 
+For the class 'RealSet', we implement the intersection(), union() and __contain__(). We implement the function 'subsets' that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real sets. We implement also the infimum and the supremum of a 'RealSet'. 
 
-Also we support definite integration over a RealSet.
+Also we support definite integration over a 'RealSet'.
+    
 
 Author: Jordi Saludes and Ares Ribó
 
```




---

archive/issue_comments_166132.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+This is based of previous work available from\n+     http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html\n+but supporting now integration on real intervals and real sets.\n \n+Laurent Claessens defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implemented union() and intersection() methods, as well as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet represening finite union and intersections of intervals by a list of disjoint intervals, and for this class ContinuousSet, union() and __contain__() methods were implemented.\n+\n+We extend the previous work of Laurent Claessens defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class RInterval of real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class RInterval is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a RealSet.\n+\n+For the class RealSet, we implement the intersection(), union() and __contain__(). We implement the function subsets that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function setdiff that returns the difference of two given real sets. We implement also the infimum and the supremum of a RealSet. \n+\n+Also we support definite integration over a RealSet.\n+    \n \n Author: Jordi Saludes and Ares Rib\u00f3\n \n```\n",
    "created_at": "2012-06-16T23:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166132",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,15 @@
+This is based of previous work available from
+     http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html
+but supporting now integration on real intervals and real sets.
 
+Laurent Claessens defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implemented union() and intersection() methods, as well as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet represening finite union and intersections of intervals by a list of disjoint intervals, and for this class ContinuousSet, union() and __contain__() methods were implemented.
+
+We extend the previous work of Laurent Claessens defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of isolated points.  We define the class RInterval of real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. Our class RInterval is now always an open interval. The boundary/ies can be added as isolated point/s if necessary, constituting a RealSet.
+
+For the class RealSet, we implement the intersection(), union() and __contain__(). We implement the function subsets that, given two different real sets A and B, returns if A is a (proper) subset of B, and the function setdiff that returns the difference of two given real sets. We implement also the infimum and the supremum of a RealSet. 
+
+Also we support definite integration over a RealSet.
+    
 
 Author: Jordi Saludes and Ares Ribó
 
```




---

archive/issue_comments_166133.json:
```json
{
    "body": "<a id='comment:3'></a>Patch?",
    "created_at": "2012-06-17T00:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166133",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>Patch?



---

archive/issue_comments_166134.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 kcrisman]:\n> Patch?\n\nuploaded",
    "created_at": "2012-06-18T00:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166134",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

<a id='comment:4'></a>Replying to [comment:3 kcrisman]:
> Patch?

uploaded



---

archive/issue_comments_166135.json:
```json
{
    "body": "Initial patch",
    "created_at": "2013-06-20T23:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166135",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_166136.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+Finite unions of open/closed/semi-closed subsets of the real line\n+\n+For example\n+\n+```\n+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n+    (0, 2) + [10, +Infinity)\n+```\n \n \n Author: Jordi Saludes and Ares Rib\u00f3\n```\n",
    "created_at": "2013-06-20T23:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166136",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,11 @@
+Finite unions of open/closed/semi-closed subsets of the real line
+
+For example
+
+```
+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
+    (0, 2) + [10, +Infinity)
+```
 
 
 Author: Jordi Saludes and Ares Ribó
```




---

archive/issue_comments_166137.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-20T23:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166137",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166138.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [trac_13125_real_set.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_real_set.patch) by @vbraun created at 2013-06-20 23:56:36\n\nI'm taking over this ticket since I need this for piecewise functions. I'm not sure what happened with the originally proposed patch, but what was attached here is not the actual code.",
    "created_at": "2013-06-20T23:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166138",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>Attachment [trac_13125_real_set.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_real_set.patch) by @vbraun created at 2013-06-20 23:56:36

I'm taking over this ticket since I need this for piecewise functions. I'm not sure what happened with the originally proposed patch, but what was attached here is not the actual code.



---

archive/issue_comments_166139.json:
```json
{
    "body": "<a id='comment:7'></a>Is `+` what we're looking for here?   Maybe something like `u` or `U`?  Just worried about the difference between this \"sum\" and the Minkowski sum (which is, in fact, already in Sage).\n\nIn fact, maybe these should inherit from something related to that... probably not, but just raising the possibility.\n\nHow do I get more exotic sets like the union of `1/n` for positive integer n?  ;-)",
    "created_at": "2013-06-21T00:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166139",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>Is `+` what we're looking for here?   Maybe something like `u` or `U`?  Just worried about the difference between this "sum" and the Minkowski sum (which is, in fact, already in Sage).

In fact, maybe these should inherit from something related to that... probably not, but just raising the possibility.

How do I get more exotic sets like the union of `1/n` for positive integer n?  ;-)



---

archive/issue_comments_166140.json:
```json
{
    "body": "<a id='comment:8'></a>It think it is better to stick to the category of finite unions of intervals and points, then with functions defined on such sets and their periodic extensions (like 1 on [0, 1], 0 on (1,2), then extend periodically in one or both directions to get square wave).\n\nThings with infinite unions lead to accumulation points and cannot really be handled in a uniform way, I suspect.",
    "created_at": "2013-06-21T02:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166140",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'></a>It think it is better to stick to the category of finite unions of intervals and points, then with functions defined on such sets and their periodic extensions (like 1 on [0, 1], 0 on (1,2), then extend periodically in one or both directions to get square wave).

Things with infinite unions lead to accumulation points and cannot really be handled in a uniform way, I suspect.



---

archive/issue_comments_166141.json:
```json
{
    "body": "<a id='comment:9'></a>Yes, I was being silly :)",
    "created_at": "2013-06-21T05:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166141",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>Yes, I was being silly :)



---

archive/issue_comments_166142.json:
```json
{
    "body": "Attachment [trac_13125_realsets.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_realsets.patch) by ares created at 2013-06-22 01:39:57\n\nPatch for realsets.py",
    "created_at": "2013-06-22T01:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166142",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

Attachment [trac_13125_realsets.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_realsets.patch) by ares created at 2013-06-22 01:39:57

Patch for realsets.py



---

archive/issue_comments_166143.json:
```json
{
    "body": "<a id='comment:10'></a>I just attached the original patch. I did not notice before that the initial patch was not correctly uploaded, I am very sorry for that.",
    "created_at": "2013-06-22T01:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166143",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

<a id='comment:10'></a>I just attached the original patch. I did not notice before that the initial patch was not correctly uploaded, I am very sorry for that.



---

archive/issue_comments_166144.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,48 @@\n+Finite unions of open/closed/semi-closed subsets of the real line\n \n+For example\n+\n+```\n+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n+    (0, 2) + [10, +Infinity)\n+```\n+'''\n+Reals sets consisting of union of real intervals and isolated points.'''\n+    \n+    This is based of previous work available from http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html\n+    but supporting now integration on real intervals and real sets.\n+    \n+- Laurent Claessens (2010-12-10): Original Interval and ContinuousSet from 'http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html'.\n+    Defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implements union() and intersection() methods, as well\n+    as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet that represents finite union and\n+    intersections of intervals by a list of disjoint intervals. For the class ContinuousSet, union() and __contain__() methods are implemented.\n+\n+- Ares Ribo (2011-10-24): Extended the previous work defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of     \n+    isolated points. For this class, we implemented the intersection() ( union() and __contain__() as for ContinuousSets). We implemented the function 'subsets'\n+    which given two different real sets A and B returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real\n+    sets. Also we support definite integration over a RealSet, and we implemented the infimum and the supremum of a RealSet. We define the class RInterval of\n+    real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. \n+\n+- Jordi Saludes (2011-12-10): Documentation and file reorganization. Reimplementation of 'setdiff'. RInterval is now always an open interval. The boundary/ies\n+    can be added as isolated point/s if necessary, constituting a RealSet. \n+\n+    The research leading to these results has received funding from the European Union's Seventh Framework Programme (FP7/2007-2013) under grant agreement \n+    n\u00b0 FP7-ICT-247914.\n+     \n+    Examples\n+\n+```\n+    sage: A = RealSet([RInterval((1,2)),RInterval((3,4))],[1,2])\n+\n+    sage: A\n+    [ 1 :: 2 ] + ] 3 :: 4 [\n+\n+    sage: B = RealSet([RInterval((2,3))],[1])\n+\n+    sage: B\n+    ] 2 :: 3 [ + {1}\n+```\n+    \n \n Author: Jordi Saludes and Ares Rib\u00f3\n \n```\n",
    "created_at": "2013-06-22T10:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166144",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,48 @@
+Finite unions of open/closed/semi-closed subsets of the real line
 
+For example
+
+```
+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
+    (0, 2) + [10, +Infinity)
+```
+'''
+Reals sets consisting of union of real intervals and isolated points.'''
+    
+    This is based of previous work available from http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html
+    but supporting now integration on real intervals and real sets.
+    
+- Laurent Claessens (2010-12-10): Original Interval and ContinuousSet from 'http://www.mail-archive.com/sage-support`@`googlegroups.com/msg21326.html'.
+    Defined a class Interval that represents an interval (can be open, closed, half open, unbounded), and implements union() and intersection() methods, as well
+    as the __contains__() method that tests if a number is contained in the interval. Also defined the class ContinuousSet that represents finite union and
+    intersections of intervals by a list of disjoint intervals. For the class ContinuousSet, union() and __contain__() methods are implemented.
+
+- Ares Ribo (2011-10-24): Extended the previous work defining the class RealSet, that describes any real set as a list of disjoint intervals and a list of     
+    isolated points. For this class, we implemented the intersection() ( union() and __contain__() as for ContinuousSets). We implemented the function 'subsets'
+    which given two different real sets A and B returns if A is a (proper) subset of B, and the function 'setdiff' that returns the difference of two given real
+    sets. Also we support definite integration over a RealSet, and we implemented the infimum and the supremum of a RealSet. We define the class RInterval of
+    real intervals. A RInterval is now a RealSet, consituted as a list of disjoint intervals with a unique element and an empty list of isolated points. 
+
+- Jordi Saludes (2011-12-10): Documentation and file reorganization. Reimplementation of 'setdiff'. RInterval is now always an open interval. The boundary/ies
+    can be added as isolated point/s if necessary, constituting a RealSet. 
+
+    The research leading to these results has received funding from the European Union's Seventh Framework Programme (FP7/2007-2013) under grant agreement 
+    n° FP7-ICT-247914.
+     
+    Examples
+
+```
+    sage: A = RealSet([RInterval((1,2)),RInterval((3,4))],[1,2])
+
+    sage: A
+    [ 1 :: 2 ] + ] 3 :: 4 [
+
+    sage: B = RealSet([RInterval((2,3))],[1])
+
+    sage: B
+    ] 2 :: 3 [ + {1}
+```
+    
 
 Author: Jordi Saludes and Ares Ribó
 
```




---

archive/issue_comments_166145.json:
```json
{
    "body": "Attachment [trac_13125_misc.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_misc.patch) by @vbraun created at 2013-06-23 00:45:04\n\nUpdated patch",
    "created_at": "2013-06-23T00:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166145",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_13125_misc.patch](tarball://root/attachments/some-uuid/ticket13125/trac_13125_misc.patch) by @vbraun created at 2013-06-23 00:45:04

Updated patch



---

archive/issue_comments_166146.json:
```json
{
    "body": "<a id='comment:12'></a>I've added the authors to my patch and incorporated any methods that made sense to me. Ares, since your patch would take a bit of work to make use of the Sage class hierarchy and since docstrings are not quite according to Sage specs I propose that we base the implementation on what I have currently posted. The imho only thing left is to decide what to do with the `toGf` method. Which is some third-party code, I suppose. Maybe you can explain what it is for? If you think it should go into Sage we could turn it into a underscore method.",
    "created_at": "2013-06-23T00:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166146",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>I've added the authors to my patch and incorporated any methods that made sense to me. Ares, since your patch would take a bit of work to make use of the Sage class hierarchy and since docstrings are not quite according to Sage specs I propose that we base the implementation on what I have currently posted. The imho only thing left is to decide what to do with the `toGf` method. Which is some third-party code, I suppose. Maybe you can explain what it is for? If you think it should go into Sage we could turn it into a underscore method.



---

archive/issue_comments_166147.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+Finite unions of open/closed/semi-closed subsets of the real line\n \n+For example\n+\n+```\n+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n+    (0, 2) + [10, +Infinity)\n+```\n+\n+Apply\n+* [attachment:trac_13125_real_set.patch]\n+* [attachment:trac_13125_misc.patch]\n \n Author: Jordi Saludes and Ares Rib\u00f3\n \n```\n",
    "created_at": "2013-06-23T00:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166147",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,15 @@
+Finite unions of open/closed/semi-closed subsets of the real line
 
+For example
+
+```
+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
+    (0, 2) + [10, +Infinity)
+```
+
+Apply
+* [attachment:trac_13125_real_set.patch]
+* [attachment:trac_13125_misc.patch]
 
 Author: Jordi Saludes and Ares Ribó
 
```




---

archive/issue_comments_166148.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 vbraun]:\n> I've added the authors to my patch and incorporated any methods that made sense to me. Ares, since your patch would take a bit of work to make use of the Sage class hierarchy and since docstrings are not quite according to Sage specs I propose that we base the implementation on what I have currently posted. The imho only thing left is to decide what to do with the `toGf` method. Which is some third-party code, I suppose. Maybe you can explain what it is for? If you think it should go into Sage we could turn it into a underscore method.\n\n\nWe will move the toGf method into another paquet, since we use it to support our MOLTO project demo (D6.2.pdf) and it is not directly related to realsets.",
    "created_at": "2013-06-24T23:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166148",
    "user": "https://trac.sagemath.org/admin/accounts/users/ares"
}
```

<a id='comment:13'></a>Replying to [comment:12 vbraun]:
> I've added the authors to my patch and incorporated any methods that made sense to me. Ares, since your patch would take a bit of work to make use of the Sage class hierarchy and since docstrings are not quite according to Sage specs I propose that we base the implementation on what I have currently posted. The imho only thing left is to decide what to do with the `toGf` method. Which is some third-party code, I suppose. Maybe you can explain what it is for? If you think it should go into Sage we could turn it into a underscore method.


We will move the toGf method into another paquet, since we use it to support our MOLTO project demo (D6.2.pdf) and it is not directly related to realsets.



---

archive/issue_events_036138.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36138"
}
```



---

archive/issue_events_036139.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36139"
}
```



---

archive/issue_events_036140.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36140"
}
```



---

archive/issue_comments_166149.json:
```json
{
    "body": "<a id='comment:17'></a>Looks and tests fine. I've fixed some typos and added the module to the reference manual.\n\n---\nNew commits:",
    "created_at": "2014-02-23T10:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166149",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>Looks and tests fine. I've fixed some typos and added the module to the reference manual.

---
New commits:



---

archive/issue_comments_166150.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-23T10:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166150",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166151.json:
```json
{
    "body": "<a id='comment:18'></a>Fails on OSX:\n\n```\nsage -t --long src/sage/sets/real_set.py\n**********************************************************************\nFile \"src/sage/sets/real_set.py\", line 1156, in sage.sets.real_set.RealSet.intersection\nFailed example:\n    s1.intersection(s2)\nExpected:\n    (1, 2)\nGot:\n    (-oo, -10] + (1, 2)\n**********************************************************************\nFile \"src/sage/sets/real_set.py\", line 1158, in sage.sets.real_set.RealSet.intersection\nFailed example:\n    s1 & s2    # syntactic sugar\nExpected:\n    (1, 2)\nGot:\n    (-oo, -10] + (1, 2)\n**********************************************************************\n1 item had failures:\n   2 of  11 in sage.sets.real_set.RealSet.intersection\n    [191 tests, 2 failures, 0.14 s]\n```",
    "created_at": "2014-03-04T13:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166151",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Fails on OSX:

```
sage -t --long src/sage/sets/real_set.py
**********************************************************************
File "src/sage/sets/real_set.py", line 1156, in sage.sets.real_set.RealSet.intersection
Failed example:
    s1.intersection(s2)
Expected:
    (1, 2)
Got:
    (-oo, -10] + (1, 2)
**********************************************************************
File "src/sage/sets/real_set.py", line 1158, in sage.sets.real_set.RealSet.intersection
Failed example:
    s1 & s2    # syntactic sugar
Expected:
    (1, 2)
Got:
    (-oo, -10] + (1, 2)
**********************************************************************
1 item had failures:
   2 of  11 in sage.sets.real_set.RealSet.intersection
    [191 tests, 2 failures, 0.14 s]
```



---

archive/issue_comments_166152.json:
```json
{
    "body": "<a id='comment:19'></a>In fact, only fails on OSX 10.9.2 but works on 10.6... weird.",
    "created_at": "2014-03-04T14:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166152",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>In fact, only fails on OSX 10.9.2 but works on 10.6... weird.



---

archive/issue_comments_166153.json:
```json
{
    "body": "<a id='comment:20'></a>It fails in OSX 10.7.5 too.\nThe error seems to be in the comparation involving one `sage.rings.real_lazy.LazyWrapper` instance:\n\n```\nsage: s1 = RealSet(0,2) + RealSet.unbounded_above_closed(10);  s1\n(0, 2) + [10, +oo)\nsage: s2 = RealSet(1,3) + RealSet.unbounded_below_closed(-10);  s2\n(-oo, -10] + (1, 3)\nsage: s1.intersection(s2)\n(-oo, -10] + (1, 2)\n```\nNot right. Look at the intersection of the first intervals:\n\n```\nsage: i1 = s1._intervals[0]; i1\n(0, 2)\nsage: i2 = s2._intervals[0]; i2\n(-oo, -10]\nsage: i1.intersection(i2)\n(-oo, -10]\n```\nWrong. Compare the bounds:\n\n```\nsage: (i1._lower, i2._lower)\n(0, -Infinity)\nsage: cmp(i1._lower, i2._lower)\n-1\nsage: i1._lower < i2._lower\nTrue\n```\nIt doesn't fail for floats or integers:\n\n```\nsage: 0.0 < i2._lower\nFalse\nsage: type(i1._lower), type(i2._lower)\n(sage.rings.real_lazy.LazyWrapper, sage.rings.infinity.MinusInfinity)\n```",
    "created_at": "2014-03-06T07:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166153",
    "user": "https://trac.sagemath.org/admin/accounts/users/saludes"
}
```

<a id='comment:20'></a>It fails in OSX 10.7.5 too.
The error seems to be in the comparation involving one `sage.rings.real_lazy.LazyWrapper` instance:

```
sage: s1 = RealSet(0,2) + RealSet.unbounded_above_closed(10);  s1
(0, 2) + [10, +oo)
sage: s2 = RealSet(1,3) + RealSet.unbounded_below_closed(-10);  s2
(-oo, -10] + (1, 3)
sage: s1.intersection(s2)
(-oo, -10] + (1, 2)
```
Not right. Look at the intersection of the first intervals:

```
sage: i1 = s1._intervals[0]; i1
(0, 2)
sage: i2 = s2._intervals[0]; i2
(-oo, -10]
sage: i1.intersection(i2)
(-oo, -10]
```
Wrong. Compare the bounds:

```
sage: (i1._lower, i2._lower)
(0, -Infinity)
sage: cmp(i1._lower, i2._lower)
-1
sage: i1._lower < i2._lower
True
```
It doesn't fail for floats or integers:

```
sage: 0.0 < i2._lower
False
sage: type(i1._lower), type(i2._lower)
(sage.rings.real_lazy.LazyWrapper, sage.rings.infinity.MinusInfinity)
```



---

archive/issue_comments_166154.json:
```json
{
    "body": "<a id='comment:21'></a>Confirm different (correct) behaviour on Linux:\n\n```\n...\nsage: s1.intersection(s2)\n(1, 2)\n...\nsage: i1.intersection(i2)\n(0, 0)\n...\nsage: cmp(i1._lower, i2._lower)\n1\nsage: i1._lower < i2._lower\nFalse\n```",
    "created_at": "2014-03-06T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166154",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>Confirm different (correct) behaviour on Linux:

```
...
sage: s1.intersection(s2)
(1, 2)
...
sage: i1.intersection(i2)
(0, 0)
...
sage: cmp(i1._lower, i2._lower)
1
sage: i1._lower < i2._lower
False
```



---

archive/issue_comments_166155.json:
```json
{
    "body": "<a id='comment:22'></a>More specifically, it seems to fail only when comparing to zero (OSX 10.7.5):\n\n```\nsage: filter(lambda x: RLF(x) < -oo, range(-10,10))\n[0]\nsage: filter(lambda x: RLF(float(x)/3) < -oo, range(-10,10))\n[0]\n```\n\nand `+oo` is not affected:\n\n```\nsage: filter(lambda x: RLF(x) >= oo, range(-10,10))\n[]\n```",
    "created_at": "2014-03-06T09:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166155",
    "user": "https://trac.sagemath.org/admin/accounts/users/saludes"
}
```

<a id='comment:22'></a>More specifically, it seems to fail only when comparing to zero (OSX 10.7.5):

```
sage: filter(lambda x: RLF(x) < -oo, range(-10,10))
[0]
sage: filter(lambda x: RLF(float(x)/3) < -oo, range(-10,10))
[0]
```

and `+oo` is not affected:

```
sage: filter(lambda x: RLF(x) >= oo, range(-10,10))
[]
```



---

archive/issue_comments_166156.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-03-06T09:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_166157.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-03-06T09:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_166158.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-03-06T09:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166158",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166159.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 rws]:\nWhat to do now? Since the problem seems to be related with `RLF`, should we open a new ticket and redirect this to the new one?",
    "created_at": "2014-03-24T07:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166159",
    "user": "https://trac.sagemath.org/admin/accounts/users/saludes"
}
```

<a id='comment:25'></a>Replying to [comment:24 rws]:
What to do now? Since the problem seems to be related with `RLF`, should we open a new ticket and redirect this to the new one?



---

archive/issue_comments_166160.json:
```json
{
    "body": "<a id='comment:26'></a>My guess is that the problem is comparisons with infinity, I noticed some wonky behavior when I wrote the patch. Its tricky to debug since it apparently depends on the position of objects in memory (the fall-back comparison order).",
    "created_at": "2014-03-24T08:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166160",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>My guess is that the problem is comparisons with infinity, I noticed some wonky behavior when I wrote the patch. Its tricky to debug since it apparently depends on the position of objects in memory (the fall-back comparison order).



---

archive/issue_comments_166161.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-03-31T16:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166161",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_166162.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:25 saludes]:\n> Replying to [comment:24 rws]:\n> What to do now? Since the problem seems to be related with `RLF`, should we open a new ticket and redirect this to the new one?\n\n\nIf it happens on OSX only then it cannot be in this patch, so I'll set to positive. Now it depends on if people on OSX can reproduce the problem without this patch or not; by the above reasoning it should be possible. If so, please open a ticket. If not you should wait until this one is in Sage.",
    "created_at": "2014-03-31T16:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166162",
    "user": "https://github.com/rwst"
}
```

<a id='comment:27'></a>Replying to [comment:25 saludes]:
> Replying to [comment:24 rws]:
> What to do now? Since the problem seems to be related with `RLF`, should we open a new ticket and redirect this to the new one?


If it happens on OSX only then it cannot be in this patch, so I'll set to positive. Now it depends on if people on OSX can reproduce the problem without this patch or not; by the above reasoning it should be possible. If so, please open a ticket. If not you should wait until this one is in Sage.



---

archive/issue_comments_166163.json:
```json
{
    "body": "<a id='comment:28'></a>Um, I just see that the problem code doesn't even need this patch, so I'll go ahead and open that ticket myself.",
    "created_at": "2014-03-31T16:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166163",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>Um, I just see that the problem code doesn't even need this patch, so I'll go ahead and open that ticket myself.



---

archive/issue_comments_166164.json:
```json
{
    "body": "<a id='comment:29'></a>Anything missing for this ticket being accepted?",
    "created_at": "2014-04-21T07:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166164",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>Anything missing for this ticket being accepted?



---

archive/issue_comments_166165.json:
```json
{
    "body": "<a id='comment:30'></a>Sorry, I wanted to have a look at the changes but haven't had the time yet.",
    "created_at": "2014-04-21T09:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166165",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>Sorry, I wanted to have a look at the changes but haven't had the time yet.



---

archive/issue_comments_166166.json:
```json
{
    "body": "<a id='comment:32'></a>I've added some tests for comparison with infinity; these need to be fixed before the ticket is usable. One of the gems on my machine is\n\n```\nsage: RLF(0) < oo\nFalse\n```\n\n---\nNew commits:",
    "created_at": "2014-04-21T14:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166166",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>I've added some tests for comparison with infinity; these need to be fixed before the ticket is usable. One of the gems on my machine is

```
sage: RLF(0) < oo
False
```

---
New commits:



---

archive/issue_comments_166167.json:
```json
{
    "body": "<a id='comment:33'></a>See also #15004",
    "created_at": "2014-04-21T15:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166167",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>See also #15004



---

archive/issue_comments_166168.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+Finite unions of open/closed/semi-closed subsets of the real line\n+\n+For example\n+\n+```\n+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n+    (0, 2) + [10, +Infinity)\n+```\n \n \n Author: Jordi Saludes and Ares Rib\u00f3\n```\n",
    "created_at": "2014-04-21T18:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166168",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,11 @@
+Finite unions of open/closed/semi-closed subsets of the real line
+
+For example
+
+```
+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
+    (0, 2) + [10, +Infinity)
+```
 
 
 Author: Jordi Saludes and Ares Ribó
```




---

archive/issue_comments_166169.json:
```json
{
    "body": "<a id='comment:35'></a>There was some work in #14045 to fix comparison with `float('inf')` but didn't go any further.",
    "created_at": "2014-04-21T19:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166169",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>There was some work in #14045 to fix comparison with `float('inf')` but didn't go any further.



---

archive/issue_comments_166170.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-04-21T20:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_166171.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-04-21T20:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_166172.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+Finite unions of open/closed/semi-closed subsets of the real line, for example\n \n+```\n+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)\n+    (0, 2) + [10, +Infinity)\n+```\n+\n+This ticket also encountered a number of bugs in the comparison of infinity with various field elements like\n+\n+```\n+sage: RLF(0) < oo\n+False\n+```\n+These are now also fixed and extensive doctests were added.\n \n Author: Jordi Saludes and Ares Rib\u00f3\n \n```\n",
    "created_at": "2014-04-21T20:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166172",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,17 @@
+Finite unions of open/closed/semi-closed subsets of the real line, for example
 
+```
+    sage: RealSet(0,2) + RealSet.unbounded_above_closed(10)
+    (0, 2) + [10, +Infinity)
+```
+
+This ticket also encountered a number of bugs in the comparison of infinity with various field elements like
+
+```
+sage: RLF(0) < oo
+False
+```
+These are now also fixed and extensive doctests were added.
 
 Author: Jordi Saludes and Ares Ribó
 
```




---

archive/issue_comments_166173.json:
```json
{
    "body": "<a id='comment:38'></a>I don't like this change:\n\n```diff\n+        elif isinstance(x, sage.rings.real_mpfi.RealIntervalFieldElement):\n+            if x.upper().is_infinity() or x.lower().is_infinity():\n                 return self.gen()\n```\nsince `RIF(0, oo)` gets turned into infinity (where is very likely to not be):\n\n```\nsage: UnsignedInfinityRing(RIF(2, oo))\nInfinity\n```\nI think we should follow the usual paradigm for RIF:\n\n```\nsage: RIF(2, 4) == 4\nFalse\nsage: RIF(2, 4) <= 4\nTrue\nsage: RIF(2, 4) < 4\nFalse\nsage: RIF(2) == 2\nTrue\n```\nSo I would say this is wrong:\n\n```\nsage: RIF(2, oo) == oo\nTrue\n```\nand I would raise an error anytime we're converting something which is not directly equal to a (signed) infinity. For example:\n\n```\nsage: UnsignedInfinityRing(RIF(2, oo))\nInfinity\n```\nshould raise an error, but this would be okay:\n\n```\nsage: UnsignedInfinityRing(RIF(oo, oo))\nInfinity\n```",
    "created_at": "2014-04-22T02:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166173",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>I don't like this change:

```diff
+        elif isinstance(x, sage.rings.real_mpfi.RealIntervalFieldElement):
+            if x.upper().is_infinity() or x.lower().is_infinity():
                 return self.gen()
```
since `RIF(0, oo)` gets turned into infinity (where is very likely to not be):

```
sage: UnsignedInfinityRing(RIF(2, oo))
Infinity
```
I think we should follow the usual paradigm for RIF:

```
sage: RIF(2, 4) == 4
False
sage: RIF(2, 4) <= 4
True
sage: RIF(2, 4) < 4
False
sage: RIF(2) == 2
True
```
So I would say this is wrong:

```
sage: RIF(2, oo) == oo
True
```
and I would raise an error anytime we're converting something which is not directly equal to a (signed) infinity. For example:

```
sage: UnsignedInfinityRing(RIF(2, oo))
Infinity
```
should raise an error, but this would be okay:

```
sage: UnsignedInfinityRing(RIF(oo, oo))
Infinity
```



---

archive/issue_comments_166174.json:
```json
{
    "body": "<a id='comment:39'></a>The question is not whether or not you like a pony, but if and how RIF should coerce into the infinity ring. The way Sage works is that everything that should be comparable with infinity can be coerced into the infinity ring, so if you ever compare with infinity the comparison is done there. If you don't have a coercion (e.g. RIF before this ticket) then you will get undesirable answers from the fallback comparison (=memory location).  \n\nSo if = yes, the only question is how. Semi-infinite intervals can either coerce into infinity, or \"less than infinity\", or zero (the only elements of the infinity ring). Its pretty clear that anything not infinite is undesirable.",
    "created_at": "2014-04-22T09:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166174",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>The question is not whether or not you like a pony, but if and how RIF should coerce into the infinity ring. The way Sage works is that everything that should be comparable with infinity can be coerced into the infinity ring, so if you ever compare with infinity the comparison is done there. If you don't have a coercion (e.g. RIF before this ticket) then you will get undesirable answers from the fallback comparison (=memory location).  

So if = yes, the only question is how. Semi-infinite intervals can either coerce into infinity, or "less than infinity", or zero (the only elements of the infinity ring). Its pretty clear that anything not infinite is undesirable.



---

archive/issue_comments_166175.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-22T10:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_166176.json:
```json
{
    "body": "<a id='comment:41'></a>I forgot that SR can also represent infinity and **conversion** to the infinity ring should work. For SR there is no coercion to the infinity ring since SR wants to handle its own infinities (in fact: the infinity ring coerces into SR).\n\nArguably that should be changed and SR also coerce into the infinity ring instead of the other way round. But then SR wouldn't be able to react to things like `oo * x`. Downside of the current way is \n\n```\nsage: bool(SR(-1000) > oo), bool(SR(-1000) < oo)\n(False, False)\n```\ni.e. SR doesn't know how to decide this rather simple inequality. In any case, thats for another ticket.",
    "created_at": "2014-04-22T10:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166176",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:41'></a>I forgot that SR can also represent infinity and **conversion** to the infinity ring should work. For SR there is no coercion to the infinity ring since SR wants to handle its own infinities (in fact: the infinity ring coerces into SR).

Arguably that should be changed and SR also coerce into the infinity ring instead of the other way round. But then SR wouldn't be able to react to things like `oo * x`. Downside of the current way is 

```
sage: bool(SR(-1000) > oo), bool(SR(-1000) < oo)
(False, False)
```
i.e. SR doesn't know how to decide this rather simple inequality. In any case, thats for another ticket.



---

archive/issue_events_036141.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36141"
}
```



---

archive/issue_events_036142.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36142"
}
```



---

archive/issue_comments_166177.json:
```json
{
    "body": "<a id='comment:43'></a>Merge conflicts.",
    "created_at": "2014-05-15T08:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166177",
    "user": "https://github.com/rwst"
}
```

<a id='comment:43'></a>Merge conflicts.



---

archive/issue_comments_166178.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-15T08:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166178",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166179.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-15T09:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_166180.json:
```json
{
    "body": "<a id='comment:45'></a>Fixed",
    "created_at": "2014-05-15T09:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166180",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>Fixed



---

archive/issue_comments_166181.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-15T09:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166181",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166182.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-19T10:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_166183.json:
```json
{
    "body": "<a id='comment:47'></a>I've removed the grant acknowledgement and will put it whereever we agree on in https://groups.google.com/d/msg/sage-devel/_NtS2b8W3uo/BsBz6IcLn4cJ",
    "created_at": "2014-05-19T10:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166183",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:47'></a>I've removed the grant acknowledgement and will put it whereever we agree on in https://groups.google.com/d/msg/sage-devel/_NtS2b8W3uo/BsBz6IcLn4cJ



---

archive/issue_comments_166184.json:
```json
{
    "body": "<a id='comment:48'></a>I'm mostly happy with the fixes related to infinity, although we are nowhere close to fixing all the bugs in #11506.  Of the examples listed there, the following one is changed by this ticket:\n\n```\nsage: InfinityRing(CC(oo))\nA positive finite number\n```\nThis used to return `+Infinity`, which is not perfect either, but is at least consistent with `InfinityRing(UnsignedInfinity(oo))`.  (I'd argue that both of these should probably be undefined, since complex and unsigned infinity are in no way more positive than negative.)\n\nCould you fix the above example to return `+Infinity` again?\n\nI leave it to someone else to review the new code for real sets.  It would have been better if the infinity-related stuff had been done on a separate ticket.",
    "created_at": "2014-05-20T15:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166184",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:48'></a>I'm mostly happy with the fixes related to infinity, although we are nowhere close to fixing all the bugs in #11506.  Of the examples listed there, the following one is changed by this ticket:

```
sage: InfinityRing(CC(oo))
A positive finite number
```
This used to return `+Infinity`, which is not perfect either, but is at least consistent with `InfinityRing(UnsignedInfinity(oo))`.  (I'd argue that both of these should probably be undefined, since complex and unsigned infinity are in no way more positive than negative.)

Could you fix the above example to return `+Infinity` again?

I leave it to someone else to review the new code for real sets.  It would have been better if the infinity-related stuff had been done on a separate ticket.



---

archive/issue_comments_166185.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-05-20T15:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_166186.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-20T15:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166186",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166187.json:
```json
{
    "body": "<a id='comment:50'></a>Agree that it should be a separate ticket. It just wasn't clear to me in the beginning that things were this messed up. I've split off the fixing-infinity part into #11506",
    "created_at": "2014-05-20T15:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166187",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:50'></a>Agree that it should be a separate ticket. It just wasn't clear to me in the beginning that things were this messed up. I've split off the fixing-infinity part into #11506



---

archive/issue_comments_166188.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2014-05-20T16:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166188",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_166189.json:
```json
{
    "body": "<a id='comment:51'></a>I let this slip off, sorry Volker. I think there should be no coercion because there is no way to deal with these (semi)infinite intervals. However if we are forced to make this a coercion, then it should be less than infinity since my (very anecdotal) evidence says that most computations won't escape to `oo`, but instead just don't have a good upper bound.\n\nThat being said, I think this should not be positively reviewed as it stands.\n\nDo you think Nils would be a good person to ask about this, someone else, or go directly to sage-devel?",
    "created_at": "2014-05-20T16:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166189",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:51'></a>I let this slip off, sorry Volker. I think there should be no coercion because there is no way to deal with these (semi)infinite intervals. However if we are forced to make this a coercion, then it should be less than infinity since my (very anecdotal) evidence says that most computations won't escape to `oo`, but instead just don't have a good upper bound.

That being said, I think this should not be positively reviewed as it stands.

Do you think Nils would be a good person to ask about this, someone else, or go directly to sage-devel?



---

archive/issue_comments_166190.json:
```json
{
    "body": "<a id='comment:52'></a>I've moved all infinity-related commits to #11506, let's move the discussion there.\n\nNo coercion means: comparison by memory location.",
    "created_at": "2014-05-20T16:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166190",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>I've moved all infinity-related commits to #11506, let's move the discussion there.

No coercion means: comparison by memory location.



---

archive/issue_comments_166191.json:
```json
{
    "body": "<a id='comment:53'></a>Okay, but the branch currently doesn't merge cleanly",
    "created_at": "2014-05-20T16:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166191",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:53'></a>Okay, but the branch currently doesn't merge cleanly



---

archive/issue_comments_166192.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-05-20T16:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166192",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_166193.json:
```json
{
    "body": "<a id='comment:54'></a>Just to be clear (since Volker set this to positive review after moving the infinity-related stuff to #11506): it wasn't my intention to give a positive review except for that example.  I haven't looked at the real sets code at all.",
    "created_at": "2014-05-20T16:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166193",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:54'></a>Just to be clear (since Volker set this to positive review after moving the infinity-related stuff to #11506): it wasn't my intention to give a positive review except for that example.  I haven't looked at the real sets code at all.



---

archive/issue_comments_166194.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-20T16:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_166195.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-05-20T16:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166195",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_166196.json:
```json
{
    "body": "<a id='comment:57'></a>OK, I didn't notice that the real sets code had already been reviewed.",
    "created_at": "2014-05-20T16:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166196",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:57'></a>OK, I didn't notice that the real sets code had already been reviewed.



---

archive/issue_comments_166197.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2014-05-24T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_166198.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-05-24T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_166199.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-24T12:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166199",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166200.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-25T10:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13125#issuecomment-166200",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_036143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-05-25T10:09:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13125",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13125#event-36143"
}
```
