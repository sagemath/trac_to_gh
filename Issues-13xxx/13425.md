# Issue 13425: Compute mutation type of a ClusterSeed or ClusterQuiver

archive/issues_013253.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-sage-combinat"
    ],
    "body": "This ticket implements mutation type checks for cluster seeds and quivers.\n\nApply to the sage library:\n* [attachment: trac_13425-mutation_type-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)\n* [attachment: trac_13425-review-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)\n* [attachment: trac_13425-review_two-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)\n* [attachment: trac_13425-small-doc-fix.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)\n* [attachment: trac_13425-review_four-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)\n* [attachment: trac_13425-review_five-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)\n* [attachment: trac_13425-sixth-review-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)\n\nDepends on #13424\n\nKeywords: **cluster algebra, quiver, days45**\n\nReviewer: **Christian Stump, Gregg Musiker**\n\nAuthor: **Gregg Musiker, Christian Stump**\n\nMerged: **sage-5.9.beta2**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13425_\n\n",
    "closed_at": "2013-03-28T17:58:12Z",
    "created_at": "2012-09-03T03:59:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Compute mutation type of a ClusterSeed or ClusterQuiver",
    "type": "issue",
    "updated_at": "2013-04-02T08:26:39Z",
    "url": "https://github.com/sagemath/sage/issues/13425",
    "user": "https://github.com/sagetrac-gmoose05"
}
```
This ticket implements mutation type checks for cluster seeds and quivers.

Apply to the sage library:
* [attachment: trac_13425-mutation_type-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)
* [attachment: trac_13425-review-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)
* [attachment: trac_13425-review_two-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)
* [attachment: trac_13425-small-doc-fix.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)
* [attachment: trac_13425-review_four-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)
* [attachment: trac_13425-review_five-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)
* [attachment: trac_13425-sixth-review-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)

Depends on #13424

Keywords: **cluster algebra, quiver, days45**

Reviewer: **Christian Stump, Gregg Musiker**

Author: **Gregg Musiker, Christian Stump**

Merged: **sage-5.9.beta2**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/13425_





---

archive/issue_events_185771.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2012-09-03T03:59:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "milestone_number": null,
    "milestone_title": "sage-5.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185771"
}
```



---

archive/issue_events_185772.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2012-09-03T03:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185772"
}
```



---

archive/issue_events_185773.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2012-09-03T03:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185773"
}
```



---

archive/issue_events_185774.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2012-09-03T03:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185774"
}
```



---

archive/issue_events_185775.json:
```json
{
    "actor": "https://github.com/sagetrac-sage-combinat",
    "created_at": "2012-09-03T03:59:57Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "subject": "https://github.com/sagetrac-gmoose05",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185775"
}
```



---

archive/issue_comments_156531.json:
```json
{
    "body": "Dependencies: **13424**",
    "created_at": "2012-09-03T04:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156531",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Dependencies: **13424**



---

archive/issue_comments_156532.json:
```json
{
    "body": "Changed dependencies from **13424** to **#13424**",
    "created_at": "2012-09-03T04:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156532",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Changed dependencies from **13424** to **#13424**



---

archive/issue_comments_156533.json:
```json
{
    "body": "Changed author from **Gregg Musiker and Christian Stump** to **Gregg Musiker, Christian Stump**",
    "created_at": "2012-09-03T04:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156533",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Changed author from **Gregg Musiker and Christian Stump** to **Gregg Musiker, Christian Stump**



---

archive/issue_comments_156534.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe tests become much too slow with this patch:\n\nwith only #13424 applied:\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py\"\n\t [3.3 s]\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py\"\n\t [2.2 s]\n```\nand with this patch applied as well:\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py\"\n\t [33.5 s]\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py\"\n\t [32.8 s]\n```\n\nWe should avoid that.",
    "created_at": "2012-09-07T15:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156534",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:4" align="right">comment:4</div>

The tests become much too slow with this patch:

with only #13424 applied:

```
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py"
	 [3.3 s]
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py"
	 [2.2 s]
```
and with this patch applied as well:

```
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py"
	 [33.5 s]
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py"
	 [32.8 s]
```

We should avoid that.



---

archive/issue_events_185776.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-02-14T16:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185776"
}
```



---

archive/issue_comments_156535.json:
```json
{
    "body": "Changed keywords from **cluster algebra, quiver** to **cluster algebra, quiver, days45**",
    "created_at": "2013-02-14T22:42:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156535",
    "user": "https://github.com/etn40ff"
}
```

Changed keywords from **cluster algebra, quiver** to **cluster algebra, quiver, days45**



---

archive/issue_comments_156536.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi Gregg!\n\nI know you are again working on this patch: it needs to be (almost trivially) rebased agains the newest version of #13424.",
    "created_at": "2013-02-20T08:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156536",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi Gregg!

I know you are again working on this patch: it needs to be (almost trivially) rebased agains the newest version of #13424.



---

archive/issue_comments_156537.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nJust uploaded a review patch (although I'm still working through it and this is just partial work).\n\nThe bulk of the changes are from mutation_type.py:\n\nI documented and added examples for all methods until the testing\ncommands near the end, and _connected_mutation_type which I still need\nto read and understand.\n\nI also changed auxiliary command names so that they begin with an underscore.\n\nChristian, there were a few places where I had questions for you,\nthese are indicated by the word \"CHECK\" in caps.\n\nMore to come later as I look through the other .py files in this patch also.\n\nGregg",
    "created_at": "2013-02-28T05:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156537",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:8" align="right">comment:8</div>

Just uploaded a review patch (although I'm still working through it and this is just partial work).

The bulk of the changes are from mutation_type.py:

I documented and added examples for all methods until the testing
commands near the end, and _connected_mutation_type which I still need
to read and understand.

I also changed auxiliary command names so that they begin with an underscore.

Christian, there were a few places where I had questions for you,
these are indicated by the word "CHECK" in caps.

More to come later as I look through the other .py files in this patch also.

Gregg



---

archive/issue_comments_156538.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nChristian, I just posted a new review patch.  I think the ticket is not too far away from being ready.  I documented as much of the code as I could with comments, and added explanations and examples for almost all methods.\n\nThere are a few outstanding comments or questions marked with CHECK.\n\nAlso, I see that in cluster_seed.py we add mutation_type() commands every time the user asks for a Cluster Variable or related command.  However, this greatly slows down those methods with the only advantage being the almost_positive_roots command.  So I figured we should discuss this over email or skype at some point.\n\nWe also discussed at Sage Days about trying to optimize by having the program test for infinite_mutation_type by randomly mutating a few times if more than 6 vertices before trying to test for a recognizable mutation_type.  I haven't made such changes.\n\nGregg",
    "created_at": "2013-03-10T04:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156538",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:9" align="right">comment:9</div>

Christian, I just posted a new review patch.  I think the ticket is not too far away from being ready.  I documented as much of the code as I could with comments, and added explanations and examples for almost all methods.

There are a few outstanding comments or questions marked with CHECK.

Also, I see that in cluster_seed.py we add mutation_type() commands every time the user asks for a Cluster Variable or related command.  However, this greatly slows down those methods with the only advantage being the almost_positive_roots command.  So I figured we should discuss this over email or skype at some point.

We also discussed at Sage Days about trying to optimize by having the program test for infinite_mutation_type by randomly mutating a few times if more than 6 vertices before trying to test for a recognizable mutation_type.  I haven't made such changes.

Gregg



---

archive/issue_comments_156539.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHi Gregg -- thanks a lot for the hard work you are putting into my unreadable code! I am about to upload a review patch. Most importantly, I have made the random tests work again and did quite some test to ensure the code does what it is supposed to do.\n\nI solved some of the CHECK's, I think it is better to discuss the others on the phone. Before giving the code a positive review, I think we should have a strong cpu make some tests and random tests for rank 8-12 since I think I never did that (though I also think that the problems should occur already earlier).\n\nCheers, Christian",
    "created_at": "2013-03-10T14:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156539",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:10" align="right">comment:10</div>

Hi Gregg -- thanks a lot for the hard work you are putting into my unreadable code! I am about to upload a review patch. Most importantly, I have made the random tests work again and did quite some test to ensure the code does what it is supposed to do.

I solved some of the CHECK's, I think it is better to discuss the others on the phone. Before giving the code a positive review, I think we should have a strong cpu make some tests and random tests for rank 8-12 since I think I never did that (though I also think that the problems should occur already earlier).

Cheers, Christian



---

archive/issue_comments_156540.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi Gregg, I uploaded a new patch.\n\nThe main changes are:\n\n- the mutation type check is now done in the order:\n  - check if it is mutation infinite\n  - look in existing files\n  - use the big algorithm to determine the type\n  - generate the files and look in these newly generated files\n\n  (I just realize that this results in two times looking in the data if it already exists. I should change that).\n\n- I moved the is_mutation_finite into mutation_type and take a matrix as input. I did this because this is quicker than computing the quiver and then the matrix again.\n\n- I rewrote the code to construct the classical and exceptional data. Please have a look and say what you think.\n\nThe old mutation type check was actually very buggy. We still have a problem to solve: if you want to test the mutation type of `ClusterQuiver([['A',3],['B',2],['T',(4,4,4)]])`, you will get an error since the third part is \"unknown infinite\" but the program is trying to build a reducible type from it.\n\nI would also appreciate if you could try to add some more tests to the mutation type and the is_finite_type tests and check if I didn't introduce any new bugs...\n\nCheers, Christian",
    "created_at": "2013-03-15T17:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156540",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi Gregg, I uploaded a new patch.

The main changes are:

- the mutation type check is now done in the order:
  - check if it is mutation infinite
  - look in existing files
  - use the big algorithm to determine the type
  - generate the files and look in these newly generated files

  (I just realize that this results in two times looking in the data if it already exists. I should change that).

- I moved the is_mutation_finite into mutation_type and take a matrix as input. I did this because this is quicker than computing the quiver and then the matrix again.

- I rewrote the code to construct the classical and exceptional data. Please have a look and say what you think.

The old mutation type check was actually very buggy. We still have a problem to solve: if you want to test the mutation type of `ClusterQuiver([['A',3],['B',2],['T',(4,4,4)]])`, you will get an error since the third part is "unknown infinite" but the program is trying to build a reducible type from it.

I would also appreciate if you could try to add some more tests to the mutation type and the is_finite_type tests and check if I didn't introduce any new bugs...

Cheers, Christian



---

archive/issue_comments_156541.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nConcerning the spkg: the method is now written in a way that the algorithm tries to be fast both if the data files are present or not. If this ticket is ready before we get the spkg ready I would this vote for getting it in 5.9 rather than wait for the spkg.",
    "created_at": "2013-03-15T17:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156541",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:12" align="right">comment:12</div>

Concerning the spkg: the method is now written in a way that the algorithm tries to be fast both if the data files are present or not. If this ticket is ready before we get the spkg ready I would this vote for getting it in 5.9 rather than wait for the spkg.



---

archive/issue_comments_156542.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+This ticket implements mutation type checks for cluster seeds and quivers.\n \n+Exceptional mutation classes are precomputed and contained in the following package:\n+\n+http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg\n+\n+This package is not necessary for the features to work but speed things quite a bit.\n``````\n",
    "created_at": "2013-03-19T10:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156542",
    "user": "https://github.com/stumpc5"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+This ticket implements mutation type checks for cluster seeds and quivers.
 
+Exceptional mutation classes are precomputed and contained in the following package:
+
+http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg
+
+This package is not necessary for the features to work but speed things quite a bit.
``````




---

archive/issue_comments_156543.json:
```json
{
    "body": "Reviewer: **Christian Stump, Gregg Musikier**",
    "created_at": "2013-03-19T10:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156543",
    "user": "https://github.com/stumpc5"
}
```

Reviewer: **Christian Stump, Gregg Musikier**



---

archive/issue_comments_156544.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_13425-mutation_type-gm.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)**",
    "created_at": "2013-03-19T10:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156544",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_13425-mutation_type-gm.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)**



---

archive/issue_comments_156545.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n-\n-Exceptional mutation classes are precomputed and contained in the following package:\n-\n-http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg\n-\n-This package is not necessary for the features to work but speed things quite a bit.\n``````\n",
    "created_at": "2013-03-19T18:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156545",
    "user": "https://github.com/stumpc5"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
-
-Exceptional mutation classes are precomputed and contained in the following package:
-
-http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg
-
-This package is not necessary for the features to work but speed things quite a bit.
``````




---

archive/issue_comments_156546.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttachment: **[trac_13425-review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)**\n\nThere is the green light, finally! Gregg, if you are happy with my latest changes and you can verify that I didn't do any mistakes while folding the patches, please give it a positive review!",
    "created_at": "2013-03-19T18:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156546",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:15" align="right">comment:15</div>

Attachment: **[trac_13425-review-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)**

There is the green light, finally! Gregg, if you are happy with my latest changes and you can verify that I didn't do any mistakes while folding the patches, please give it a positive review!



---

archive/issue_events_185777.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2013-03-19T20:16:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185777"
}
```



---

archive/issue_events_185778.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2013-03-19T20:16:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185778"
}
```



---

archive/issue_comments_156547.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThere are various problem with the documentation:\n\n```\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver.is_finite:5: WARNING: Literal block expected; none found.\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver:41: WARNING: Bullet list ends without a blank line; unexpected unindent.\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py:docstring of sage.combinat.cluster_algebra_quiver.quiver_mutation_type.save_quiver_data:1: WARNING: Inline literal start-string without end-string.\n```\n\nAlso, I wondering whether you are using `assert` correctly. `assert` should only be used to check for bugs, not for bad user input. In other words, if there is any way to produce an `AssertionError` by supplying bad input to a public function, that is by definition a bug. Use `ValueError` or `TypeError` (or other exceptions) for bad user input.",
    "created_at": "2013-03-20T17:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156547",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

There are various problem with the documentation:

```
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver.is_finite:5: WARNING: Literal block expected; none found.
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver:41: WARNING: Bullet list ends without a blank line; unexpected unindent.
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py:docstring of sage.combinat.cluster_algebra_quiver.quiver_mutation_type.save_quiver_data:1: WARNING: Inline literal start-string without end-string.
```

Also, I wondering whether you are using `assert` correctly. `assert` should only be used to check for bugs, not for bad user input. In other words, if there is any way to produce an `AssertionError` by supplying bad input to a public function, that is by definition a bug. Use `ValueError` or `TypeError` (or other exceptions) for bad user input.



---

archive/issue_events_185779.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-20T17:05:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185779"
}
```



---

archive/issue_events_185780.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-20T17:05:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185780"
}
```



---

archive/issue_comments_156548.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A18):\n\nHi Gregg, I will upload a fix within the next minutes -- though I don't really find the second doc warning in the docstring.",
    "created_at": "2013-03-20T17:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156548",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A18):

Hi Gregg, I will upload a fix within the next minutes -- though I don't really find the second doc warning in the docstring.



---

archive/issue_comments_156549.json:
```json
{
    "body": "Attachment: **[trac_13425-review_two-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)**",
    "created_at": "2013-03-21T14:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156549",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Attachment: **[trac_13425-review_two-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)**



---

archive/issue_comments_156550.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachment: **[trac_13425-small-doc-fix.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)**\n\nHi Christian, \n\nSmall one small typo in the cluster seed documentation that is fixed by this patch, but no warnings or other errors.\n\nIf the documentation builds correctly for you, I think it is ready to go.\n\nGregg",
    "created_at": "2013-03-21T14:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156550",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachment: **[trac_13425-small-doc-fix.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)**

Hi Christian, 

Small one small typo in the cluster seed documentation that is fixed by this patch, but no warnings or other errors.

If the documentation builds correctly for you, I think it is ready to go.

Gregg



---

archive/issue_events_185781.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-21T20:58:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185781"
}
```



---

archive/issue_events_185782.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-21T20:58:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185782"
}
```



---

archive/issue_comments_156551.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> If the documentation builds correctly for you, I think it is ready to go.\n\nIt does, so I press the positive review button again.",
    "created_at": "2013-03-21T20:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156551",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:21" align="right">comment:21</div>

> If the documentation builds correctly for you, I think it is ready to go.

It does, so I press the positive review button again.



---

archive/issue_events_185783.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-22T16:10:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185783"
}
```



---

archive/issue_events_185784.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-22T16:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185784"
}
```



---

archive/issue_comments_156552.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nDoctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.\n\nAlso: please dont do this, as it's a race condition:\n\n```\n    if not os.path.exists(types_path):\n        os.makedirs(types_path)\n```\nThere is a function `sage_makedirs()` which does this in a safe way.",
    "created_at": "2013-03-22T16:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156552",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.

Also: please dont do this, as it's a race condition:

```
    if not os.path.exists(types_path):
        os.makedirs(types_path)
```
There is a function `sage_makedirs()` which does this in a safe way.



---

archive/issue_comments_156553.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment%3A22):\n> Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.\n\nThanks for your comments!\n\nIn the current design of the code, there is no use of storing the \"quiver data\" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.\n\nDo you anyway think, it would be better to have an optional argument to specify the filename?\n\nThanks, Christian",
    "created_at": "2013-03-22T16:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156553",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment%3A22):
> Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.

Thanks for your comments!

In the current design of the code, there is no use of storing the "quiver data" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.

Do you anyway think, it would be better to have an optional argument to specify the filename?

Thanks, Christian



---

archive/issue_comments_156554.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@stumpc5](#comment%3A23):\n> In the current design of the code, there is no use of storing the \"quiver data\" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.\n\nOK, store it somewhere in `DOT_SAGE` then.",
    "created_at": "2013-03-22T16:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156554",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@stumpc5](#comment%3A23):
> In the current design of the code, there is no use of storing the "quiver data" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.

OK, store it somewhere in `DOT_SAGE` then.



---

archive/issue_events_185785.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-22T17:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185785"
}
```



---

archive/issue_events_185786.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-22T17:15:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185786"
}
```



---

archive/issue_comments_156555.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jdemeyer](#comment%3A22):\n> There is a function `sage_makedirs()` which does this in a safe way.\n\nFixed!\n\nReplying to [@jdemeyer](#comment%3A24):\n> OK, store it somewhere in `DOT_SAGE` then.\n\nFixed!\n\n`@`Gregg: please have a close look at my change to recheck that I didn't introduce any bugs. We now\n\n- store the data in `DOT_SAGE` (which is usually `~/.sage`) in the function `_save_data_dig6`,\n- check for the data in `load_data` first in the user folder for user saves and then in the folder coming from the package (if installed).\n\nCheers, Christian",
    "created_at": "2013-03-22T17:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156555",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jdemeyer](#comment%3A22):
> There is a function `sage_makedirs()` which does this in a safe way.

Fixed!

Replying to [@jdemeyer](#comment%3A24):
> OK, store it somewhere in `DOT_SAGE` then.

Fixed!

`@`Gregg: please have a close look at my change to recheck that I didn't introduce any bugs. We now

- store the data in `DOT_SAGE` (which is usually `~/.sage`) in the function `_save_data_dig6`,
- check for the data in `load_data` first in the user folder for user saves and then in the folder coming from the package (if installed).

Cheers, Christian



---

archive/issue_comments_156556.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHi Christian,\n\nIt seems to work for me except for two small issues.\n\n1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.\n\n2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).\nThis saves data to the ./sage folder.\n\nIf the user now runs the load_data(2) command, it looks in the ./sage folder and sees and prints data for ['A', (1,1),1], ['A', 2], ['B', 2], and ['BC', 1, 1].\n\nIf I then close sage and run ../../sage -i cluster_seed-1.0.spkg (technically with the -f option since I'm reinstalling after having deleted the folder for testing purposes), then, I should also have the exceptional data now too, but when I run load_data(2), it still only loads the classical data from the ./sage folder.  \n\nDo you get similar behavior?  I think it would be slightly better if load_data( n ) loaded the union of the dig6 data from the two sources.  Otherwise, if one saved the classical data (for e.g. for rank 9 or 10) then unless one also saved classicalexceptional, one would no longer have the exceptional data.  \n\nHowever, this is still better than the version before where save_quiver_data and the spkg were writing to the same filenames so the same problem would have been appearing there.\n\nBest, Gregg",
    "created_at": "2013-03-23T14:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156556",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:26" align="right">comment:26</div>

Hi Christian,

It seems to work for me except for two small issues.

1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.

2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).
This saves data to the ./sage folder.

If the user now runs the load_data(2) command, it looks in the ./sage folder and sees and prints data for ['A', (1,1),1], ['A', 2], ['B', 2], and ['BC', 1, 1].

If I then close sage and run ../../sage -i cluster_seed-1.0.spkg (technically with the -f option since I'm reinstalling after having deleted the folder for testing purposes), then, I should also have the exceptional data now too, but when I run load_data(2), it still only loads the classical data from the ./sage folder.  

Do you get similar behavior?  I think it would be slightly better if load_data( n ) loaded the union of the dig6 data from the two sources.  Otherwise, if one saved the classical data (for e.g. for rank 9 or 10) then unless one also saved classicalexceptional, one would no longer have the exceptional data.  

However, this is still better than the version before where save_quiver_data and the spkg were writing to the same filenames so the same problem would have been appearing there.

Best, Gregg



---

archive/issue_comments_156557.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAttachment: **[trac_13425-review_four-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)**\n\nReplying to [@sagetrac-gmoose05](#comment%3A26):\n\nHi Gregg,\n\n> 1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.\n\nI think this was a cached_function thing, so I now delete this cache when saving the data (see the last lines of the updated function).\n\nPlease recheck that this is the issue you were refering to, and you could maybe also provide a doctest for it.\n\n> 2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).\n> This saves data to the ./sage folder.\n\nFixed as well, we now update the data_dict from both sources. Also: please recheck and provide a doctest, if possible.\n\nCheers, Christian",
    "created_at": "2013-03-23T18:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156557",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:27" align="right">comment:27</div>

Attachment: **[trac_13425-review_four-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)**

Replying to [@sagetrac-gmoose05](#comment%3A26):

Hi Gregg,

> 1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.

I think this was a cached_function thing, so I now delete this cache when saving the data (see the last lines of the updated function).

Please recheck that this is the issue you were refering to, and you could maybe also provide a doctest for it.

> 2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).
> This saves data to the ./sage folder.

Fixed as well, we now update the data_dict from both sources. Also: please recheck and provide a doctest, if possible.

Cheers, Christian



---

archive/issue_comments_156558.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHi Christian,\n\nThanks, that fixed the two issues that I had. \n\n I think the behavior is relatively self-explanatory and I am worried that extra dooctests with save and load commands where the spkg may or may not be installed would be more difficult to write than they are worth.  So I am happy to go ahead and give a positive review at this point.\n\nCheers, Gregg",
    "created_at": "2013-03-23T20:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156558",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:28" align="right">comment:28</div>

Hi Christian,

Thanks, that fixed the two issues that I had. 

 I think the behavior is relatively self-explanatory and I am worried that extra dooctests with save and load commands where the spkg may or may not be installed would be more difficult to write than they are worth.  So I am happy to go ahead and give a positive review at this point.

Cheers, Gregg



---

archive/issue_events_185787.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2013-03-23T20:48:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185787"
}
```



---

archive/issue_events_185788.json:
```json
{
    "actor": "https://github.com/sagetrac-gmoose05",
    "created_at": "2013-03-23T20:48:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185788"
}
```



---

archive/issue_events_185789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-25T06:05:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185789"
}
```



---

archive/issue_events_185790.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-25T06:05:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185790"
}
```



---

archive/issue_comments_156559.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOn the buildbot ([snapperkob](http://build.sagemath.org/sage/builders/AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29/builds/118/steps/shell_8/logs/stdio) but several other systems too), I see\n\n```\nsage -t --long devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1259, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(2) # long time\nExpected:\n    True ('A', 2)\n    True ('A', (1, 1), 1)\n    True ('B', 2)\n    True ('BC', 1, 1)\n    True ('G', 2)\nGot:\n    True ('A', (1, 1), 1)\n    True ('A', 2)\n    True ('B', 2)\n    True ('BC', 1, 1)\n    True ('G', 2)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1266, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(3) # long time\nExpected:\n    True ('A', 3)\n    True ('A', (2, 1), 1)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    True ('G', 2, -1)\n    True ('G', 2, 1)\nGot:\n    True ('A', (2, 1), 1)\n    True ('A', 3)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    True ('G', 2, -1)\n    True ('G', 2, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1277, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(4) # long time\nExpected:\n    True ('A', 4)\n    True ('A', (2, 2), 1)\n    True ('A', (3, 1), 1)\n    True ('B', 4)\n    True ('BB', 3, 1)\n    True ('BC', 3, 1)\n    True ('BD', 3, 1)\n    True ('C', 4)\n    True ('CC', 3, 1)\n    True ('CD', 3, 1)\n    True ('D', 4)\n    True ('F', 4)\n    True ('G', 2, (1, 1))\n    True ('G', 2, (3, 3))\n    True ('G', 2, (1, 3))\nGot:\n    True ('A', (2, 2), 1)\n    True ('A', (3, 1), 1)\n    True ('A', 4)\n    True ('B', 4)\n    True ('BB', 3, 1)\n    True ('BC', 3, 1)\n    True ('BD', 3, 1)\n    True ('C', 4)\n    True ('CC', 3, 1)\n    True ('CD', 3, 1)\n    True ('D', 4)\n    True ('F', 4)\n    True ('G', 2, (1, 1))\n    True ('G', 2, (3, 3))\n    True ('G', 2, (1, 3))\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1294, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(5) # long time\nExpected:\n    True ('A', 5)\n    True ('A', (3, 2), 1)\n    True ('A', (4, 1), 1)\n    True ('B', 5)\n    True ('BB', 4, 1)\n    True ('BC', 4, 1)\n    True ('BD', 4, 1)\n    True ('C', 5)\n    True ('CC', 4, 1)\n    True ('CD', 4, 1)\n    False ('D', 4, 1)\n    True ('D', 5)\n    True ('F', 4, 1)\n    True ('F', 4, -1)\nGot:\n    True ('A', (3, 2), 1)\n    True ('A', (4, 1), 1)\n    True ('A', 5)\n    True ('B', 5)\n    True ('BB', 4, 1)\n    True ('BC', 4, 1)\n    True ('BD', 4, 1)\n    True ('C', 5)\n    True ('CC', 4, 1)\n    True ('CD', 4, 1)\n    False ('D', 4, 1)\n    True ('D', 5)\n    True ('F', 4, 1)\n    True ('F', 4, -1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1422, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(2,100) # long time\nExpected:\n    testing ('A', 2)\n    testing ('A', (1, 1), 1)\n    testing ('B', 2)\n    testing ('BC', 1, 1)\nGot:\n    testing ('A', (1, 1), 1)\n    testing ('A', 2)\n    testing ('B', 2)\n    testing ('BC', 1, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1428, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(3,100) # long time\nExpected:\n    testing ('A', 3)\n    testing ('A', (2, 1), 1)\n    testing ('B', 3)\n    testing ('BB', 2, 1)\n    testing ('BC', 2, 1)\n    testing ('C', 3)\n    testing ('CC', 2, 1)\nGot:\n    testing ('A', (2, 1), 1)\n    testing ('A', 3)\n    testing ('B', 3)\n    testing ('BB', 2, 1)\n    testing ('BC', 2, 1)\n    testing ('C', 3)\n    testing ('CC', 2, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1437, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(4,100) # long time\nExpected:\n    testing ('A', 4)\n    testing ('A', (2, 2), 1)\n    testing ('A', (3, 1), 1)\n    testing ('B', 4)\n    testing ('BB', 3, 1)\n    testing ('BC', 3, 1)\n    testing ('BD', 3, 1)\n    testing ('C', 4)\n    testing ('CC', 3, 1)\n    testing ('CD', 3, 1)\n    testing ('D', 4)\nGot:\n    testing ('A', (2, 2), 1)\n    testing ('A', (3, 1), 1)\n    testing ('A', 4)\n    testing ('B', 4)\n    testing ('BB', 3, 1)\n    testing ('BC', 3, 1)\n    testing ('BD', 3, 1)\n    testing ('C', 4)\n    testing ('CC', 3, 1)\n    testing ('CD', 3, 1)\n    testing ('D', 4)\n**********************************************************************\n```",
    "created_at": "2013-03-25T06:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156559",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

On the buildbot ([snapperkob](http://build.sagemath.org/sage/builders/AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29/builds/118/steps/shell_8/logs/stdio) but several other systems too), I see

```
sage -t --long devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1259, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(2) # long time
Expected:
    True ('A', 2)
    True ('A', (1, 1), 1)
    True ('B', 2)
    True ('BC', 1, 1)
    True ('G', 2)
Got:
    True ('A', (1, 1), 1)
    True ('A', 2)
    True ('B', 2)
    True ('BC', 1, 1)
    True ('G', 2)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1266, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(3) # long time
Expected:
    True ('A', 3)
    True ('A', (2, 1), 1)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    True ('G', 2, -1)
    True ('G', 2, 1)
Got:
    True ('A', (2, 1), 1)
    True ('A', 3)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    True ('G', 2, -1)
    True ('G', 2, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1277, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(4) # long time
Expected:
    True ('A', 4)
    True ('A', (2, 2), 1)
    True ('A', (3, 1), 1)
    True ('B', 4)
    True ('BB', 3, 1)
    True ('BC', 3, 1)
    True ('BD', 3, 1)
    True ('C', 4)
    True ('CC', 3, 1)
    True ('CD', 3, 1)
    True ('D', 4)
    True ('F', 4)
    True ('G', 2, (1, 1))
    True ('G', 2, (3, 3))
    True ('G', 2, (1, 3))
Got:
    True ('A', (2, 2), 1)
    True ('A', (3, 1), 1)
    True ('A', 4)
    True ('B', 4)
    True ('BB', 3, 1)
    True ('BC', 3, 1)
    True ('BD', 3, 1)
    True ('C', 4)
    True ('CC', 3, 1)
    True ('CD', 3, 1)
    True ('D', 4)
    True ('F', 4)
    True ('G', 2, (1, 1))
    True ('G', 2, (3, 3))
    True ('G', 2, (1, 3))
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1294, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(5) # long time
Expected:
    True ('A', 5)
    True ('A', (3, 2), 1)
    True ('A', (4, 1), 1)
    True ('B', 5)
    True ('BB', 4, 1)
    True ('BC', 4, 1)
    True ('BD', 4, 1)
    True ('C', 5)
    True ('CC', 4, 1)
    True ('CD', 4, 1)
    False ('D', 4, 1)
    True ('D', 5)
    True ('F', 4, 1)
    True ('F', 4, -1)
Got:
    True ('A', (3, 2), 1)
    True ('A', (4, 1), 1)
    True ('A', 5)
    True ('B', 5)
    True ('BB', 4, 1)
    True ('BC', 4, 1)
    True ('BD', 4, 1)
    True ('C', 5)
    True ('CC', 4, 1)
    True ('CD', 4, 1)
    False ('D', 4, 1)
    True ('D', 5)
    True ('F', 4, 1)
    True ('F', 4, -1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1422, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(2,100) # long time
Expected:
    testing ('A', 2)
    testing ('A', (1, 1), 1)
    testing ('B', 2)
    testing ('BC', 1, 1)
Got:
    testing ('A', (1, 1), 1)
    testing ('A', 2)
    testing ('B', 2)
    testing ('BC', 1, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1428, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(3,100) # long time
Expected:
    testing ('A', 3)
    testing ('A', (2, 1), 1)
    testing ('B', 3)
    testing ('BB', 2, 1)
    testing ('BC', 2, 1)
    testing ('C', 3)
    testing ('CC', 2, 1)
Got:
    testing ('A', (2, 1), 1)
    testing ('A', 3)
    testing ('B', 3)
    testing ('BB', 2, 1)
    testing ('BC', 2, 1)
    testing ('C', 3)
    testing ('CC', 2, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1437, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(4,100) # long time
Expected:
    testing ('A', 4)
    testing ('A', (2, 2), 1)
    testing ('A', (3, 1), 1)
    testing ('B', 4)
    testing ('BB', 3, 1)
    testing ('BC', 3, 1)
    testing ('BD', 3, 1)
    testing ('C', 4)
    testing ('CC', 3, 1)
    testing ('CD', 3, 1)
    testing ('D', 4)
Got:
    testing ('A', (2, 2), 1)
    testing ('A', (3, 1), 1)
    testing ('A', 4)
    testing ('B', 4)
    testing ('BB', 3, 1)
    testing ('BC', 3, 1)
    testing ('BD', 3, 1)
    testing ('C', 4)
    testing ('CC', 3, 1)
    testing ('CD', 3, 1)
    testing ('D', 4)
**********************************************************************
```



---

archive/issue_events_185791.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-25T06:15:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185791"
}
```



---

archive/issue_events_185792.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-25T06:15:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185792"
}
```



---

archive/issue_comments_156560.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@jdemeyer](#comment%3A30):\n\n```\n> Expected:\n>     True ('A', 2)\n>     True ('A', (1, 1), 1)\n> Got:\n>     True ('A', (1, 1), 1)\n>     True ('A', 2)\n```\nWe also had this problem on our machines. It is caused by the (expected, weird, buggy ???) behaviour that some machines give\n\n```\nsage: cmp(2,(1,1))\n1\n```\nand others do\n\n```\nsage: cmp(2,(1,1))\n-1\n```\nWhat should we thus do to get the output in some generic order?",
    "created_at": "2013-03-25T06:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156560",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@jdemeyer](#comment%3A30):

```
> Expected:
>     True ('A', 2)
>     True ('A', (1, 1), 1)
> Got:
>     True ('A', (1, 1), 1)
>     True ('A', 2)
```
We also had this problem on our machines. It is caused by the (expected, weird, buggy ???) behaviour that some machines give

```
sage: cmp(2,(1,1))
1
```
and others do

```
sage: cmp(2,(1,1))
-1
```
What should we thus do to get the output in some generic order?



---

archive/issue_comments_156561.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@stumpc5](#comment%3A31):\n> What should we thus do to get the output in some generic order?\n\nI have no idea, ask sage-devel.",
    "created_at": "2013-03-25T06:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156561",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@stumpc5](#comment%3A31):
> What should we thus do to get the output in some generic order?

I have no idea, ask sage-devel.



---

archive/issue_comments_156562.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@stumpc5](#comment%3A31):\n> We also had this problem on our machines.\n\nIf you knew this problem existed, this ticket should never have gotten positive review...",
    "created_at": "2013-03-25T06:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156562",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@stumpc5](#comment%3A31):
> We also had this problem on our machines.

If you knew this problem existed, this ticket should never have gotten positive review...



---

archive/issue_comments_156563.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> Replying to [@stumpc5](#comment%3A31):\n> > What should we thus do to get the output in some generic order?\n\n> I have no idea, ask sage-devel.\n\nIf you can afford a sort somewhere, a typical trick is to do:\n\n    sage: sorted(..., key=str)\n\nAnd then it will sort according to the string representation which is platform independent.\n\nI usually only use that for sorting the results in the doctests. But in your situation that could be ok too.\n\nCheers,",
    "created_at": "2013-03-25T06:33:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156563",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@jdemeyer](#comment%3A32):
> Replying to [@stumpc5](#comment%3A31):
> > What should we thus do to get the output in some generic order?

> I have no idea, ask sage-devel.

If you can afford a sort somewhere, a typical trick is to do:

    sage: sorted(..., key=str)

And then it will sort according to the string representation which is platform independent.

I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.

Cheers,



---

archive/issue_comments_156564.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@nthiery](#comment%3A34):\n> If you can afford a sort somewhere, a typical trick is to do:\n> I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.\n\nGood idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\n> Replying to [@jdemeyer](#comment%3A32):\n> If you knew this problem existed, this ticket should never have gotten positive review... \n\nI find it very hard to judge if a problem like this only appears because the machine it happened on is a 32bit Mac - I will anyway post such a problem on sage-devel next time...",
    "created_at": "2013-03-25T06:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156564",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@nthiery](#comment%3A34):
> If you can afford a sort somewhere, a typical trick is to do:
> I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.

Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!

> Replying to [@jdemeyer](#comment%3A32):
> If you knew this problem existed, this ticket should never have gotten positive review... 

I find it very hard to judge if a problem like this only appears because the machine it happened on is a 32bit Mac - I will anyway post such a problem on sage-devel next time...



---

archive/issue_events_185793.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-25T07:50:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185793"
}
```



---

archive/issue_events_185794.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-25T07:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185794"
}
```



---

archive/issue_comments_156565.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@stumpc5](#comment%3A35):\n> Replying to [@nthiery](#comment%3A34):\n> Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\nDone! Nicolas, would you look at this last change and give it a positive review? Cheers!",
    "created_at": "2013-03-25T07:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156565",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@stumpc5](#comment%3A35):
> Replying to [@nthiery](#comment%3A34):
> Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!

Done! Nicolas, would you look at this last change and give it a positive review? Cheers!



---

archive/issue_comments_156566.json:
```json
{
    "body": "Changed reviewer from **Christian Stump, Gregg Musikier** to **Christian Stump, Gregg Musiker**",
    "created_at": "2013-03-25T07:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156566",
    "user": "https://github.com/stumpc5"
}
```

Changed reviewer from **Christian Stump, Gregg Musikier** to **Christian Stump, Gregg Musiker**



---

archive/issue_comments_156567.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAttachment: **[trac_13425-review_five-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)**\n\nReplying to [@stumpc5](#comment%3A36):\n> Replying to [@stumpc5](#comment%3A35):\n> > Replying to [@nthiery](#comment%3A34):\n> > Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\n> \n> Done! Nicolas, would you look at this last change and give it a positive review? Cheers!\n\nI checked the patch, and it looks reasonable. You can set the ticket positive review on my behalf as soon as the light goes green and, if you can run them there, the test pass on your other machine which was causing trouble.",
    "created_at": "2013-03-25T15:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156567",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:38" align="right">comment:38</div>

Attachment: **[trac_13425-review_five-cs.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)**

Replying to [@stumpc5](#comment%3A36):
> Replying to [@stumpc5](#comment%3A35):
> > Replying to [@nthiery](#comment%3A34):
> > Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!

> 
> Done! Nicolas, would you look at this last change and give it a positive review? Cheers!

I checked the patch, and it looks reasonable. You can set the ticket positive review on my behalf as soon as the light goes green and, if you can run them there, the test pass on your other machine which was causing trouble.



---

archive/issue_comments_156568.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThe key=str fix in quiver_mutation_type.py seems to have already solved the issues in save_quiver_data(), etc.\n\nI am about to upload a new patch where we use the key=str for _mutation_type_test() and _random_multi_tests() in mutation_type.py.  \n\nReordering the examples accordingly slightly, this now passes on my machine (the one that was having trouble before).  All tests passed!\n\nChristian, assuming that it passes on your machine with the new order of examples, and if you don't see other issues, it should be ready to go. \n\nIs there any way to get the patchbot to run again??? \n\nDo you want to fold the patches all into one again?  If the patchbot and you are happy, I think it's ready for a positive review on my behalf.\n\nGregg",
    "created_at": "2013-03-26T03:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156568",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:39" align="right">comment:39</div>

The key=str fix in quiver_mutation_type.py seems to have already solved the issues in save_quiver_data(), etc.

I am about to upload a new patch where we use the key=str for _mutation_type_test() and _random_multi_tests() in mutation_type.py.  

Reordering the examples accordingly slightly, this now passes on my machine (the one that was having trouble before).  All tests passed!

Christian, assuming that it passes on your machine with the new order of examples, and if you don't see other issues, it should be ready to go. 

Is there any way to get the patchbot to run again??? 

Do you want to fold the patches all into one again?  If the patchbot and you are happy, I think it's ready for a positive review on my behalf.

Gregg



---

archive/issue_comments_156569.json:
```json
{
    "body": "Attachment: **[trac_13425-sixth-review-gm.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)**",
    "created_at": "2013-03-26T03:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156569",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Attachment: **[trac_13425-sixth-review-gm.patch.gz](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)**



---

archive/issue_comments_156570.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI confirmed with Christian that with the new patch, -t -long passes on his machine, and I just successfully ran -testall -long overnight on my machine (which was the one with the slight order difference in the output during a few doctests).\n\nSo with this latest patch, it is now ready to go.\n\nGregg",
    "created_at": "2013-03-26T13:00:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156570",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:40" align="right">comment:40</div>

I confirmed with Christian that with the new patch, -t -long passes on his machine, and I just successfully ran -testall -long overnight on my machine (which was the one with the slight order difference in the output during a few doctests).

So with this latest patch, it is now ready to go.

Gregg



---

archive/issue_events_185795.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-26T13:10:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185795"
}
```



---

archive/issue_events_185796.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2013-03-26T13:10:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185796"
}
```



---

archive/issue_comments_156571.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nJeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.",
    "created_at": "2013-03-28T01:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156571",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.



---

archive/issue_comments_156572.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n+\n+Apply all seven of the patches below, in order.\n``````\n",
    "created_at": "2013-03-28T05:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156572",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
+
+Apply all seven of the patches below, in order.
``````




---

archive/issue_comments_156573.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@kiwifb](#comment%3A42):\n> Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.\n\nJust modified the description accordingly.  All seven patches should be applied in order.\n\nGregg",
    "created_at": "2013-03-28T05:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156573",
    "user": "https://github.com/sagetrac-gmoose05"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@kiwifb](#comment%3A42):
> Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.

Just modified the description accordingly.  All seven patches should be applied in order.

Gregg



---

archive/issue_comments_156574.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n \n-Apply all seven of the patches below, in order.\n+Apply to the sage library:\n+* [attachment: trac_13425-mutation_type-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)\n+* [attachment: trac_13425-review-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)\n+* [attachment: trac_13425-review_two-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)\n+* [attachment: trac_13425-small-doc-fix.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)\n+* [attachment: trac_13425-review_four-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)\n+* [attachment: trac_13425-review_five-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)\n+* [attachment: trac_13425-sixth-review-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)\n``````\n",
    "created_at": "2013-03-28T09:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156574",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
 
-Apply all seven of the patches below, in order.
+Apply to the sage library:
+* [attachment: trac_13425-mutation_type-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-mutation_type-gm.patch.gz)
+* [attachment: trac_13425-review-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review-cs.patch.gz)
+* [attachment: trac_13425-review_two-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_two-cs.patch.gz)
+* [attachment: trac_13425-small-doc-fix.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-small-doc-fix.patch.gz)
+* [attachment: trac_13425-review_four-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_four-cs.patch.gz)
+* [attachment: trac_13425-review_five-cs.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-review_five-cs.patch.gz)
+* [attachment: trac_13425-sixth-review-gm.patch](https://github.com/sagemath/sage/files/ticket13425/trac_13425-sixth-review-gm.patch.gz)
``````




---

archive/issue_comments_156575.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThanks for the clarification. I have put it in the desired format.",
    "created_at": "2013-03-28T09:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156575",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">comment:45</div>

Thanks for the clarification. I have put it in the desired format.



---

archive/issue_comments_156576.json:
```json
{
    "body": "Merged: **sage-5.9.beta2**",
    "created_at": "2013-03-28T17:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156576",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.9.beta2**



---

archive/issue_events_185797.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-28T17:58:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185797"
}
```



---

archive/issue_events_185798.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-28T17:58:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13425#event-185798"
}
```



---

archive/issue_comments_156577.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nDoctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.",
    "created_at": "2013-04-01T15:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156577",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:47" align="right">comment:47</div>

Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.



---

archive/issue_comments_156578.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nDoctesting `sage/combinat/cluster_algebra_quiver/mutation_type.py` with `--long` also takes pretty long.",
    "created_at": "2013-04-01T15:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156578",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:48" align="right">comment:48</div>

Doctesting `sage/combinat/cluster_algebra_quiver/mutation_type.py` with `--long` also takes pretty long.



---

archive/issue_comments_156579.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@nexttime](#comment%3A47):\n> Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.\n\nThis one is totally weird.  When running `make testlong` on Sage 5.9.beta2, this test initially timed out, so I afterwards doctested it twice with `sage -t --long ...`.  In both cases, it took about 25 minutes (+/-, I don't recall exactly).\n\nI then built Sage 5.9.beta2 with FLINT 2.3, and there it took less than half a minute (same machine, same compiler flags), repeatedly, and so I reran the test in vanilla 5.9.beta2 again, and it now takes about the same time there as well.\n\nSeems like the new doctesting framework is pretty flaky.\n\n(Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)",
    "created_at": "2013-04-02T05:08:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156579",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@nexttime](#comment%3A47):
> Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.

This one is totally weird.  When running `make testlong` on Sage 5.9.beta2, this test initially timed out, so I afterwards doctested it twice with `sage -t --long ...`.  In both cases, it took about 25 minutes (+/-, I don't recall exactly).

I then built Sage 5.9.beta2 with FLINT 2.3, and there it took less than half a minute (same machine, same compiler flags), repeatedly, and so I reran the test in vanilla 5.9.beta2 again, and it now takes about the same time there as well.

Seems like the new doctesting framework is pretty flaky.

(Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)



---

archive/issue_comments_156580.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@nexttime](#comment%3A49):\n> Replying to [@nexttime](#comment%3A47):\n> (Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)\n\nThanks for your report - do you think we should provide a patch (in another ticket) to shorten the long doctests?",
    "created_at": "2013-04-02T08:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13425#issuecomment-156580",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@nexttime](#comment%3A49):
> Replying to [@nexttime](#comment%3A47):
> (Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)

Thanks for your report - do you think we should provide a patch (in another ticket) to shorten the long doctests?
