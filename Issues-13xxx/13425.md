# Issue 13425: Compute mutation type of a ClusterSeed or ClusterQuiver

archive/issues_013253.json:
```json
{
    "body": "This ticket implements mutation type checks for cluster seeds and quivers.\n\nApply to the sage library:\n* [attachment:trac_13425-mutation_type-gm.patch]\n* [attachment:trac_13425-review-cs.patch]\n* [attachment:trac_13425-review_two-cs.patch]\n* [attachment:trac_13425-small-doc-fix.patch]\n* [attachment:trac_13425-review_four-cs.patch]\n* [attachment:trac_13425-review_five-cs.patch]\n* [attachment:trac_13425-sixth-review-gm.patch]\n\n**Assignee:** sage-combinat\n\n**Keywords:** cluster algebra, quiver, days45\n\n**Reviewer:** Christian Stump, Gregg Musiker\n\n**Author:** Gregg Musiker, Christian Stump\n\n**Merged:** sage-5.9.beta2\n\n**Dependencies:** #13424\n\nIssue created by migration from https://trac.sagemath.org/ticket/13425\n\n",
    "closed_at": "2013-03-28T17:58:12Z",
    "created_at": "2012-09-03T03:59:57Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.9",
    "title": "Compute mutation type of a ClusterSeed or ClusterQuiver",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13425",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```
This ticket implements mutation type checks for cluster seeds and quivers.

Apply to the sage library:
* [attachment:trac_13425-mutation_type-gm.patch]
* [attachment:trac_13425-review-cs.patch]
* [attachment:trac_13425-review_two-cs.patch]
* [attachment:trac_13425-small-doc-fix.patch]
* [attachment:trac_13425-review_four-cs.patch]
* [attachment:trac_13425-review_five-cs.patch]
* [attachment:trac_13425-sixth-review-gm.patch]

**Assignee:** sage-combinat

**Keywords:** cluster algebra, quiver, days45

**Reviewer:** Christian Stump, Gregg Musiker

**Author:** Gregg Musiker, Christian Stump

**Merged:** sage-5.9.beta2

**Dependencies:** #13424

Issue created by migration from https://trac.sagemath.org/ticket/13425





---

archive/issue_comments_193934.json:
```json
{
    "body": "**Dependencies:** 13424",
    "created_at": "2012-09-03T04:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193934",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Dependencies:** 13424



---

archive/issue_comments_193935.json:
```json
{
    "body": "**Changing dependencies** from \"13424\" to \"#13424\".",
    "created_at": "2012-09-03T04:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193935",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Changing dependencies** from "13424" to "#13424".



---

archive/issue_comments_193936.json:
```json
{
    "body": "**Changing author** from \"Gregg Musiker and Christian Stump\" to \"Gregg Musiker, Christian Stump\".",
    "created_at": "2012-09-03T04:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193936",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Changing author** from "Gregg Musiker and Christian Stump" to "Gregg Musiker, Christian Stump".



---

archive/issue_comments_193937.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe tests become much too slow with this patch:\n\nwith only #13424 applied:\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py\"\n\t [3.3 s]\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py\"\n\t [2.2 s]\n```\nand with this patch applied as well:\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py\"\n\t [33.5 s]\nsage -t  \"devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py\"\n\t [32.8 s]\n```\n\nWe should avoid that.",
    "created_at": "2012-09-07T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193937",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
The tests become much too slow with this patch:

with only #13424 applied:

```
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py"
	 [3.3 s]
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py"
	 [2.2 s]
```
and with this patch applied as well:

```
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/cluster_seed.py"
	 [33.5 s]
sage -t  "devel/sage-combinat/sage/combinat/cluster_algebra_quiver/quiver.py"
	 [32.8 s]
```

We should avoid that.



---

archive/issue_comments_193938.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2013-02-14T16:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193938",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_193939.json:
```json
{
    "body": "**Changing keywords** from \"cluster algebra, quiver\" to \"cluster algebra, quiver, days45\".",
    "created_at": "2013-02-14T22:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193939",
    "user": "https://github.com/etn40ff"
}
```

**Changing keywords** from "cluster algebra, quiver" to "cluster algebra, quiver, days45".



---

archive/issue_comments_193940.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Gregg!\n\nI know you are again working on this patch: it needs to be (almost trivially) rebased agains the newest version of #13424.",
    "created_at": "2013-02-20T08:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193940",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:7'></a>
Hi Gregg!

I know you are again working on this patch: it needs to be (almost trivially) rebased agains the newest version of #13424.



---

archive/issue_comments_193941.json:
```json
{
    "body": "<a id='comment:8'></a>\nJust uploaded a review patch (although I'm still working through it and this is just partial work).\n\nThe bulk of the changes are from mutation_type.py:\n\nI documented and added examples for all methods until the testing\ncommands near the end, and _connected_mutation_type which I still need\nto read and understand.\n\nI also changed auxiliary command names so that they begin with an underscore.\n\nChristian, there were a few places where I had questions for you,\nthese are indicated by the word \"CHECK\" in caps.\n\nMore to come later as I look through the other .py files in this patch also.\n\nGregg",
    "created_at": "2013-02-28T05:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193941",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:8'></a>
Just uploaded a review patch (although I'm still working through it and this is just partial work).

The bulk of the changes are from mutation_type.py:

I documented and added examples for all methods until the testing
commands near the end, and _connected_mutation_type which I still need
to read and understand.

I also changed auxiliary command names so that they begin with an underscore.

Christian, there were a few places where I had questions for you,
these are indicated by the word "CHECK" in caps.

More to come later as I look through the other .py files in this patch also.

Gregg



---

archive/issue_comments_193942.json:
```json
{
    "body": "<a id='comment:9'></a>\nChristian, I just posted a new review patch.  I think the ticket is not too far away from being ready.  I documented as much of the code as I could with comments, and added explanations and examples for almost all methods.\n\nThere are a few outstanding comments or questions marked with CHECK.\n\nAlso, I see that in cluster_seed.py we add mutation_type() commands every time the user asks for a Cluster Variable or related command.  However, this greatly slows down those methods with the only advantage being the almost_positive_roots command.  So I figured we should discuss this over email or skype at some point.\n\nWe also discussed at Sage Days about trying to optimize by having the program test for infinite_mutation_type by randomly mutating a few times if more than 6 vertices before trying to test for a recognizable mutation_type.  I haven't made such changes.\n\nGregg",
    "created_at": "2013-03-10T04:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193942",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:9'></a>
Christian, I just posted a new review patch.  I think the ticket is not too far away from being ready.  I documented as much of the code as I could with comments, and added explanations and examples for almost all methods.

There are a few outstanding comments or questions marked with CHECK.

Also, I see that in cluster_seed.py we add mutation_type() commands every time the user asks for a Cluster Variable or related command.  However, this greatly slows down those methods with the only advantage being the almost_positive_roots command.  So I figured we should discuss this over email or skype at some point.

We also discussed at Sage Days about trying to optimize by having the program test for infinite_mutation_type by randomly mutating a few times if more than 6 vertices before trying to test for a recognizable mutation_type.  I haven't made such changes.

Gregg



---

archive/issue_comments_193943.json:
```json
{
    "body": "<a id='comment:10'></a>\nHi Gregg -- thanks a lot for the hard work you are putting into my unreadable code! I am about to upload a review patch. Most importantly, I have made the random tests work again and did quite some test to ensure the code does what it is supposed to do.\n\nI solved some of the CHECK's, I think it is better to discuss the others on the phone. Before giving the code a positive review, I think we should have a strong cpu make some tests and random tests for rank 8-12 since I think I never did that (though I also think that the problems should occur already earlier).\n\nCheers, Christian",
    "created_at": "2013-03-10T14:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193943",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:10'></a>
Hi Gregg -- thanks a lot for the hard work you are putting into my unreadable code! I am about to upload a review patch. Most importantly, I have made the random tests work again and did quite some test to ensure the code does what it is supposed to do.

I solved some of the CHECK's, I think it is better to discuss the others on the phone. Before giving the code a positive review, I think we should have a strong cpu make some tests and random tests for rank 8-12 since I think I never did that (though I also think that the problems should occur already earlier).

Cheers, Christian



---

archive/issue_comments_193944.json:
```json
{
    "body": "<a id='comment:11'></a>\nHi Gregg, I uploaded a new patch.\n\nThe main changes are:\n\n- the mutation type check is now done in the order:\n  - check if it is mutation infinite\n  - look in existing files\n  - use the big algorithm to determine the type\n  - generate the files and look in these newly generated files\n\n  (I just realize that this results in two times looking in the data if it already exists. I should change that).\n\n- I moved the is_mutation_finite into mutation_type and take a matrix as input. I did this because this is quicker than computing the quiver and then the matrix again.\n\n- I rewrote the code to construct the classical and exceptional data. Please have a look and say what you think.\n\nThe old mutation type check was actually very buggy. We still have a problem to solve: if you want to test the mutation type of `ClusterQuiver([['A',3],['B',2],['T',(4,4,4)]])`, you will get an error since the third part is \"unknown infinite\" but the program is trying to build a reducible type from it.\n\nI would also appreciate if you could try to add some more tests to the mutation type and the is_finite_type tests and check if I didn't introduce any new bugs...\n\nCheers, Christian",
    "created_at": "2013-03-15T17:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193944",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:11'></a>
Hi Gregg, I uploaded a new patch.

The main changes are:

- the mutation type check is now done in the order:
  - check if it is mutation infinite
  - look in existing files
  - use the big algorithm to determine the type
  - generate the files and look in these newly generated files

  (I just realize that this results in two times looking in the data if it already exists. I should change that).

- I moved the is_mutation_finite into mutation_type and take a matrix as input. I did this because this is quicker than computing the quiver and then the matrix again.

- I rewrote the code to construct the classical and exceptional data. Please have a look and say what you think.

The old mutation type check was actually very buggy. We still have a problem to solve: if you want to test the mutation type of `ClusterQuiver([['A',3],['B',2],['T',(4,4,4)]])`, you will get an error since the third part is "unknown infinite" but the program is trying to build a reducible type from it.

I would also appreciate if you could try to add some more tests to the mutation type and the is_finite_type tests and check if I didn't introduce any new bugs...

Cheers, Christian



---

archive/issue_comments_193945.json:
```json
{
    "body": "<a id='comment:12'></a>\nConcerning the spkg: the method is now written in a way that the algorithm tries to be fast both if the data files are present or not. If this ticket is ready before we get the spkg ready I would this vote for getting it in 5.9 rather than wait for the spkg.",
    "created_at": "2013-03-15T17:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193945",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:12'></a>
Concerning the spkg: the method is now written in a way that the algorithm tries to be fast both if the data files are present or not. If this ticket is ready before we get the spkg ready I would this vote for getting it in 5.9 rather than wait for the spkg.



---

archive/issue_comments_193946.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+This ticket implements mutation type checks for cluster seeds and quivers.\n \n+Exceptional mutation classes are precomputed and contained in the following package:\n+\n+http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg\n+\n+This package is not necessary for the features to work but speed things quite a bit.\n``````\n",
    "created_at": "2013-03-19T10:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193946",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+This ticket implements mutation type checks for cluster seeds and quivers.
 
+Exceptional mutation classes are precomputed and contained in the following package:
+
+http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg
+
+This package is not necessary for the features to work but speed things quite a bit.
``````




---

archive/issue_comments_193947.json:
```json
{
    "body": "**Reviewer:** Christian Stump, Gregg Musikier",
    "created_at": "2013-03-19T10:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193947",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Reviewer:** Christian Stump, Gregg Musikier



---

archive/attachments_018219.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-mutation_type-gm.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-mutation_type-gm.patch",
    "created_at": "2013-03-19T10:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```



---

archive/issue_comments_193948.json:
```json
{
    "body": "<a id='comment:13'></a>\n",
    "created_at": "2013-03-19T10:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193948",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:13'></a>




---

archive/issue_comments_193949.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n-\n-Exceptional mutation classes are precomputed and contained in the following package:\n-\n-http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg\n-\n-This package is not necessary for the features to work but speed things quite a bit.\n``````\n",
    "created_at": "2013-03-19T18:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193949",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
-
-Exceptional mutation classes are precomputed and contained in the following package:
-
-http://spkg-upload.googlecode.com/files/cluster_seed-1.0.spkg
-
-This package is not necessary for the features to work but speed things quite a bit.
``````




---

archive/attachments_018220.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-review-cs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-review-cs.patch",
    "created_at": "2013-03-19T18:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```



---

archive/issue_comments_193950.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere is the green light, finally! Gregg, if you are happy with my latest changes and you can verify that I didn't do any mistakes while folding the patches, please give it a positive review!",
    "created_at": "2013-03-19T18:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193950",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:15'></a>
There is the green light, finally! Gregg, if you are happy with my latest changes and you can verify that I didn't do any mistakes while folding the patches, please give it a positive review!



---

archive/issue_comments_193951.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-03-19T20:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193951",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_193952.json:
```json
{
    "body": "<a id='comment:17'></a>\nThere are various problem with the documentation:\n\n```\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver.is_finite:5: WARNING: Literal block expected; none found.\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver:41: WARNING: Bullet list ends without a blank line; unexpected unindent.\ndochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py:docstring of sage.combinat.cluster_algebra_quiver.quiver_mutation_type.save_quiver_data:1: WARNING: Inline literal start-string without end-string.\n```\n\nAlso, I wondering whether you are using `assert` correctly. `assert` should only be used to check for bugs, not for bad user input. In other words, if there is any way to produce an `AssertionError` by supplying bad input to a public function, that is by definition a bug. Use `ValueError` or `TypeError` (or other exceptions) for bad user input.",
    "created_at": "2013-03-20T17:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193952",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
There are various problem with the documentation:

```
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver.is_finite:5: WARNING: Literal block expected; none found.
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver.py:docstring of sage.combinat.cluster_algebra_quiver.quiver.ClusterQuiver:41: WARNING: Bullet list ends without a blank line; unexpected unindent.
dochtml.log:[combinat ] /padic/release/merger/sage-5.9.beta1/local/lib/python2.7/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py:docstring of sage.combinat.cluster_algebra_quiver.quiver_mutation_type.save_quiver_data:1: WARNING: Inline literal start-string without end-string.
```

Also, I wondering whether you are using `assert` correctly. `assert` should only be used to check for bugs, not for bad user input. In other words, if there is any way to produce an `AssertionError` by supplying bad input to a public function, that is by definition a bug. Use `ValueError` or `TypeError` (or other exceptions) for bad user input.



---

archive/issue_comments_193953.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-03-20T17:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193953",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_193954.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A18):\n\nHi Gregg, I will upload a fix within the next minutes -- though I don't really find the second doc warning in the docstring.",
    "created_at": "2013-03-20T17:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193954",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A18):

Hi Gregg, I will upload a fix within the next minutes -- though I don't really find the second doc warning in the docstring.



---

archive/attachments_018221.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-review_two-cs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-review_two-cs.patch",
    "created_at": "2013-03-21T14:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```



---

archive/issue_comments_193955.json:
```json
{
    "body": "",
    "created_at": "2013-03-21T14:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193955",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```





---

archive/attachments_018222.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-small-doc-fix.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-small-doc-fix.patch",
    "created_at": "2013-03-21T14:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```



---

archive/issue_comments_193956.json:
```json
{
    "body": "<a id='comment:20'></a>\nHi Christian, \n\nSmall one small typo in the cluster seed documentation that is fixed by this patch, but no warnings or other errors.\n\nIf the documentation builds correctly for you, I think it is ready to go.\n\nGregg",
    "created_at": "2013-03-21T14:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193956",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:20'></a>
Hi Christian, 

Small one small typo in the cluster seed documentation that is fixed by this patch, but no warnings or other errors.

If the documentation builds correctly for you, I think it is ready to go.

Gregg



---

archive/issue_comments_193957.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2013-03-21T20:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193957",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_193958.json:
```json
{
    "body": "<a id='comment:21'></a>\n> If the documentation builds correctly for you, I think it is ready to go.\n\n\nIt does, so I press the positive review button again.",
    "created_at": "2013-03-21T20:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193958",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:21'></a>
> If the documentation builds correctly for you, I think it is ready to go.


It does, so I press the positive review button again.



---

archive/issue_comments_193959.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-03-22T16:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193959",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_193960.json:
```json
{
    "body": "<a id='comment:22'></a>\nDoctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.\n\nAlso: please dont do this, as it's a race condition:\n\n```\n    if not os.path.exists(types_path):\n        os.makedirs(types_path)\n```\nThere is a function `sage_makedirs()` which does this in a safe way.",
    "created_at": "2013-03-22T16:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193960",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.

Also: please dont do this, as it's a race condition:

```
    if not os.path.exists(types_path):
        os.makedirs(types_path)
```
There is a function `sage_makedirs()` which does this in a safe way.



---

archive/issue_comments_193961.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jdemeyer](#comment%3A22):\n> Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.\n\n\nThanks for your comments!\n\nIn the current design of the code, there is no use of storing the \"quiver data\" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.\n\nDo you anyway think, it would be better to have an optional argument to specify the filename?\n\nThanks, Christian",
    "created_at": "2013-03-22T16:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193961",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:23'></a>
Replying to [jdemeyer](#comment%3A22):
> Doctests should write to temporary files, not to files within `SAGE_LOCAL`.  Probably, the function `save_quiver_data()` should take a `filename` parameter which should be `tmp_filename()` when used in doctests.


Thanks for your comments!

In the current design of the code, there is no use of storing the "quiver data" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.

Do you anyway think, it would be better to have an optional argument to specify the filename?

Thanks, Christian



---

archive/issue_comments_193962.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [stumpc5](#comment%3A23):\n> In the current design of the code, there is no use of storing the \"quiver data\" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.\n\n\nOK, store it somewhere in `DOT_SAGE` then.",
    "created_at": "2013-03-22T16:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193962",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Replying to [stumpc5](#comment%3A23):
> In the current design of the code, there is no use of storing the "quiver data" into a file of your choice, but rather into a particular data file! Information in this file will then later be used in other methods which need the same data over and over again. I do not see any use of this function in a way the user can decide the file to store the data.


OK, store it somewhere in `DOT_SAGE` then.



---

archive/issue_comments_193963.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2013-03-22T17:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193963",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_193964.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jdemeyer](#comment%3A22):\n> There is a function `sage_makedirs()` which does this in a safe way.\n\n\nFixed!\n\nReplying to [jdemeyer](#comment%3A24):\n> OK, store it somewhere in `DOT_SAGE` then.\n\n\nFixed!\n\n`@`Gregg: please have a close look at my change to recheck that I didn't introduce any bugs. We now\n\n- store the data in `DOT_SAGE` (which is usually `~/.sage`) in the function `_save_data_dig6`,\n- check for the data in `load_data` first in the user folder for user saves and then in the folder coming from the package (if installed).\n\nCheers, Christian",
    "created_at": "2013-03-22T17:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193964",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:25'></a>
Replying to [jdemeyer](#comment%3A22):
> There is a function `sage_makedirs()` which does this in a safe way.


Fixed!

Replying to [jdemeyer](#comment%3A24):
> OK, store it somewhere in `DOT_SAGE` then.


Fixed!

`@`Gregg: please have a close look at my change to recheck that I didn't introduce any bugs. We now

- store the data in `DOT_SAGE` (which is usually `~/.sage`) in the function `_save_data_dig6`,
- check for the data in `load_data` first in the user folder for user saves and then in the folder coming from the package (if installed).

Cheers, Christian



---

archive/issue_comments_193965.json:
```json
{
    "body": "<a id='comment:26'></a>\nHi Christian,\n\nIt seems to work for me except for two small issues.\n\n1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.\n\n2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).\nThis saves data to the ./sage folder.\n\nIf the user now runs the load_data(2) command, it looks in the ./sage folder and sees and prints data for ['A', (1,1),1], ['A', 2], ['B', 2], and ['BC', 1, 1].\n\nIf I then close sage and run ../../sage -i cluster_seed-1.0.spkg (technically with the -f option since I'm reinstalling after having deleted the folder for testing purposes), then, I should also have the exceptional data now too, but when I run load_data(2), it still only loads the classical data from the ./sage folder.  \n\nDo you get similar behavior?  I think it would be slightly better if load_data( n ) loaded the union of the dig6 data from the two sources.  Otherwise, if one saved the classical data (for e.g. for rank 9 or 10) then unless one also saved classicalexceptional, one would no longer have the exceptional data.  \n\nHowever, this is still better than the version before where save_quiver_data and the spkg were writing to the same filenames so the same problem would have been appearing there.\n\nBest, Gregg",
    "created_at": "2013-03-23T14:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193965",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:26'></a>
Hi Christian,

It seems to work for me except for two small issues.

1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.

2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).
This saves data to the ./sage folder.

If the user now runs the load_data(2) command, it looks in the ./sage folder and sees and prints data for ['A', (1,1),1], ['A', 2], ['B', 2], and ['BC', 1, 1].

If I then close sage and run ../../sage -i cluster_seed-1.0.spkg (technically with the -f option since I'm reinstalling after having deleted the folder for testing purposes), then, I should also have the exceptional data now too, but when I run load_data(2), it still only loads the classical data from the ./sage folder.  

Do you get similar behavior?  I think it would be slightly better if load_data( n ) loaded the union of the dig6 data from the two sources.  Otherwise, if one saved the classical data (for e.g. for rank 9 or 10) then unless one also saved classicalexceptional, one would no longer have the exceptional data.  

However, this is still better than the version before where save_quiver_data and the spkg were writing to the same filenames so the same problem would have been appearing there.

Best, Gregg



---

archive/attachments_018223.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-review_four-cs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-review_four-cs.patch",
    "created_at": "2013-03-23T18:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```



---

archive/issue_comments_193966.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [gmoose05](#comment%3A26):\n\nHi Gregg,\n\n> 1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.\n\n\nI think this was a cached_function thing, so I now delete this cache when saving the data (see the last lines of the updated function).\n\nPlease recheck that this is the issue you were refering to, and you could maybe also provide a doctest for it.\n\n> 2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).\n> This saves data to the ./sage folder.\n\n\nFixed as well, we now update the data_dict from both sources. Also: please recheck and provide a doctest, if possible.\n\nCheers, Christian",
    "created_at": "2013-03-23T18:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193966",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:27'></a>
Replying to [gmoose05](#comment%3A26):

Hi Gregg,

> 1) It seems that if I run save_quiver_data( ... ), and then load_data( ... ), I don't see the data I just saved.  If I close and restart sage, this seems okay, or maybe there's just a time-lag but let me know if you see similar behavior.


I think this was a cached_function thing, so I now delete this cache when saving the data (see the last lines of the updated function).

Please recheck that this is the issue you were refering to, and you could maybe also provide a doctest for it.

> 2) Let's say that a user runs save_quiver_data(2, up_to=False,'types'=Classical).
> This saves data to the ./sage folder.


Fixed as well, we now update the data_dict from both sources. Also: please recheck and provide a doctest, if possible.

Cheers, Christian



---

archive/issue_comments_193967.json:
```json
{
    "body": "<a id='comment:28'></a>\nHi Christian,\n\nThanks, that fixed the two issues that I had. \n\n I think the behavior is relatively self-explanatory and I am worried that extra dooctests with save and load commands where the spkg may or may not be installed would be more difficult to write than they are worth.  So I am happy to go ahead and give a positive review at this point.\n\nCheers, Gregg",
    "created_at": "2013-03-23T20:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193967",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:28'></a>
Hi Christian,

Thanks, that fixed the two issues that I had. 

 I think the behavior is relatively self-explanatory and I am worried that extra dooctests with save and load commands where the spkg may or may not be installed would be more difficult to write than they are worth.  So I am happy to go ahead and give a positive review at this point.

Cheers, Gregg



---

archive/issue_comments_193968.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-03-23T20:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193968",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_193969.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2013-03-25T06:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193969",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_193970.json:
```json
{
    "body": "<a id='comment:30'></a>\nOn the buildbot ([snapperkob](http://build.sagemath.org/sage/builders/AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29/builds/118/steps/shell_8/logs/stdio) but several other systems too), I see\n\n```\nsage -t --long devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1259, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(2) # long time\nExpected:\n    True ('A', 2)\n    True ('A', (1, 1), 1)\n    True ('B', 2)\n    True ('BC', 1, 1)\n    True ('G', 2)\nGot:\n    True ('A', (1, 1), 1)\n    True ('A', 2)\n    True ('B', 2)\n    True ('BC', 1, 1)\n    True ('G', 2)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1266, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(3) # long time\nExpected:\n    True ('A', 3)\n    True ('A', (2, 1), 1)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    True ('G', 2, -1)\n    True ('G', 2, 1)\nGot:\n    True ('A', (2, 1), 1)\n    True ('A', 3)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    True ('G', 2, -1)\n    True ('G', 2, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1277, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(4) # long time\nExpected:\n    True ('A', 4)\n    True ('A', (2, 2), 1)\n    True ('A', (3, 1), 1)\n    True ('B', 4)\n    True ('BB', 3, 1)\n    True ('BC', 3, 1)\n    True ('BD', 3, 1)\n    True ('C', 4)\n    True ('CC', 3, 1)\n    True ('CD', 3, 1)\n    True ('D', 4)\n    True ('F', 4)\n    True ('G', 2, (1, 1))\n    True ('G', 2, (3, 3))\n    True ('G', 2, (1, 3))\nGot:\n    True ('A', (2, 2), 1)\n    True ('A', (3, 1), 1)\n    True ('A', 4)\n    True ('B', 4)\n    True ('BB', 3, 1)\n    True ('BC', 3, 1)\n    True ('BD', 3, 1)\n    True ('C', 4)\n    True ('CC', 3, 1)\n    True ('CD', 3, 1)\n    True ('D', 4)\n    True ('F', 4)\n    True ('G', 2, (1, 1))\n    True ('G', 2, (3, 3))\n    True ('G', 2, (1, 3))\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1294, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(5) # long time\nExpected:\n    True ('A', 5)\n    True ('A', (3, 2), 1)\n    True ('A', (4, 1), 1)\n    True ('B', 5)\n    True ('BB', 4, 1)\n    True ('BC', 4, 1)\n    True ('BD', 4, 1)\n    True ('C', 5)\n    True ('CC', 4, 1)\n    True ('CD', 4, 1)\n    False ('D', 4, 1)\n    True ('D', 5)\n    True ('F', 4, 1)\n    True ('F', 4, -1)\nGot:\n    True ('A', (3, 2), 1)\n    True ('A', (4, 1), 1)\n    True ('A', 5)\n    True ('B', 5)\n    True ('BB', 4, 1)\n    True ('BC', 4, 1)\n    True ('BD', 4, 1)\n    True ('C', 5)\n    True ('CC', 4, 1)\n    True ('CD', 4, 1)\n    False ('D', 4, 1)\n    True ('D', 5)\n    True ('F', 4, 1)\n    True ('F', 4, -1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1422, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(2,100) # long time\nExpected:\n    testing ('A', 2)\n    testing ('A', (1, 1), 1)\n    testing ('B', 2)\n    testing ('BC', 1, 1)\nGot:\n    testing ('A', (1, 1), 1)\n    testing ('A', 2)\n    testing ('B', 2)\n    testing ('BC', 1, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1428, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(3,100) # long time\nExpected:\n    testing ('A', 3)\n    testing ('A', (2, 1), 1)\n    testing ('B', 3)\n    testing ('BB', 2, 1)\n    testing ('BC', 2, 1)\n    testing ('C', 3)\n    testing ('CC', 2, 1)\nGot:\n    testing ('A', (2, 1), 1)\n    testing ('A', 3)\n    testing ('B', 3)\n    testing ('BB', 2, 1)\n    testing ('BC', 2, 1)\n    testing ('C', 3)\n    testing ('CC', 2, 1)\n**********************************************************************\nFile \"devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1437, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests\nFailed example:\n    _random_multi_tests(4,100) # long time\nExpected:\n    testing ('A', 4)\n    testing ('A', (2, 2), 1)\n    testing ('A', (3, 1), 1)\n    testing ('B', 4)\n    testing ('BB', 3, 1)\n    testing ('BC', 3, 1)\n    testing ('BD', 3, 1)\n    testing ('C', 4)\n    testing ('CC', 3, 1)\n    testing ('CD', 3, 1)\n    testing ('D', 4)\nGot:\n    testing ('A', (2, 2), 1)\n    testing ('A', (3, 1), 1)\n    testing ('A', 4)\n    testing ('B', 4)\n    testing ('BB', 3, 1)\n    testing ('BC', 3, 1)\n    testing ('BD', 3, 1)\n    testing ('C', 4)\n    testing ('CC', 3, 1)\n    testing ('CD', 3, 1)\n    testing ('D', 4)\n**********************************************************************\n```",
    "created_at": "2013-03-25T06:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193970",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
On the buildbot ([snapperkob](http://build.sagemath.org/sage/builders/AIMS%20snapperkob%20%28Ubuntu%2012.04%20x86_64%29/builds/118/steps/shell_8/logs/stdio) but several other systems too), I see

```
sage -t --long devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1259, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(2) # long time
Expected:
    True ('A', 2)
    True ('A', (1, 1), 1)
    True ('B', 2)
    True ('BC', 1, 1)
    True ('G', 2)
Got:
    True ('A', (1, 1), 1)
    True ('A', 2)
    True ('B', 2)
    True ('BC', 1, 1)
    True ('G', 2)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1266, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(3) # long time
Expected:
    True ('A', 3)
    True ('A', (2, 1), 1)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    True ('G', 2, -1)
    True ('G', 2, 1)
Got:
    True ('A', (2, 1), 1)
    True ('A', 3)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    True ('G', 2, -1)
    True ('G', 2, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1277, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(4) # long time
Expected:
    True ('A', 4)
    True ('A', (2, 2), 1)
    True ('A', (3, 1), 1)
    True ('B', 4)
    True ('BB', 3, 1)
    True ('BC', 3, 1)
    True ('BD', 3, 1)
    True ('C', 4)
    True ('CC', 3, 1)
    True ('CD', 3, 1)
    True ('D', 4)
    True ('F', 4)
    True ('G', 2, (1, 1))
    True ('G', 2, (3, 3))
    True ('G', 2, (1, 3))
Got:
    True ('A', (2, 2), 1)
    True ('A', (3, 1), 1)
    True ('A', 4)
    True ('B', 4)
    True ('BB', 3, 1)
    True ('BC', 3, 1)
    True ('BD', 3, 1)
    True ('C', 4)
    True ('CC', 3, 1)
    True ('CD', 3, 1)
    True ('D', 4)
    True ('F', 4)
    True ('G', 2, (1, 1))
    True ('G', 2, (3, 3))
    True ('G', 2, (1, 3))
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1294, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(5) # long time
Expected:
    True ('A', 5)
    True ('A', (3, 2), 1)
    True ('A', (4, 1), 1)
    True ('B', 5)
    True ('BB', 4, 1)
    True ('BC', 4, 1)
    True ('BD', 4, 1)
    True ('C', 5)
    True ('CC', 4, 1)
    True ('CD', 4, 1)
    False ('D', 4, 1)
    True ('D', 5)
    True ('F', 4, 1)
    True ('F', 4, -1)
Got:
    True ('A', (3, 2), 1)
    True ('A', (4, 1), 1)
    True ('A', 5)
    True ('B', 5)
    True ('BB', 4, 1)
    True ('BC', 4, 1)
    True ('BD', 4, 1)
    True ('C', 5)
    True ('CC', 4, 1)
    True ('CD', 4, 1)
    False ('D', 4, 1)
    True ('D', 5)
    True ('F', 4, 1)
    True ('F', 4, -1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1422, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(2,100) # long time
Expected:
    testing ('A', 2)
    testing ('A', (1, 1), 1)
    testing ('B', 2)
    testing ('BC', 1, 1)
Got:
    testing ('A', (1, 1), 1)
    testing ('A', 2)
    testing ('B', 2)
    testing ('BC', 1, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1428, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(3,100) # long time
Expected:
    testing ('A', 3)
    testing ('A', (2, 1), 1)
    testing ('B', 3)
    testing ('BB', 2, 1)
    testing ('BC', 2, 1)
    testing ('C', 3)
    testing ('CC', 2, 1)
Got:
    testing ('A', (2, 1), 1)
    testing ('A', 3)
    testing ('B', 3)
    testing ('BB', 2, 1)
    testing ('BC', 2, 1)
    testing ('C', 3)
    testing ('CC', 2, 1)
**********************************************************************
File "devel/sage/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1437, in sage.combinat.cluster_algebra_quiver.mutation_type._random_multi_tests
Failed example:
    _random_multi_tests(4,100) # long time
Expected:
    testing ('A', 4)
    testing ('A', (2, 2), 1)
    testing ('A', (3, 1), 1)
    testing ('B', 4)
    testing ('BB', 3, 1)
    testing ('BC', 3, 1)
    testing ('BD', 3, 1)
    testing ('C', 4)
    testing ('CC', 3, 1)
    testing ('CD', 3, 1)
    testing ('D', 4)
Got:
    testing ('A', (2, 2), 1)
    testing ('A', (3, 1), 1)
    testing ('A', 4)
    testing ('B', 4)
    testing ('BB', 3, 1)
    testing ('BC', 3, 1)
    testing ('BD', 3, 1)
    testing ('C', 4)
    testing ('CC', 3, 1)
    testing ('CD', 3, 1)
    testing ('D', 4)
**********************************************************************
```



---

archive/issue_comments_193971.json:
```json
{
    "body": "**Changing status** from needs_work to needs_info.",
    "created_at": "2013-03-25T06:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193971",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from needs_work to needs_info.



---

archive/issue_comments_193972.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [jdemeyer](#comment%3A30):\n\n```\n> Expected:\n>     True ('A', 2)\n>     True ('A', (1, 1), 1)\n> Got:\n>     True ('A', (1, 1), 1)\n>     True ('A', 2)\n```\nWe also had this problem on our machines. It is caused by the (expected, weird, buggy ???) behaviour that some machines give\n\n```\nsage: cmp(2,(1,1))\n1\n```\nand others do\n\n```\nsage: cmp(2,(1,1))\n-1\n```\nWhat should we thus do to get the output in some generic order?",
    "created_at": "2013-03-25T06:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193972",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:31'></a>
Replying to [jdemeyer](#comment%3A30):

```
> Expected:
>     True ('A', 2)
>     True ('A', (1, 1), 1)
> Got:
>     True ('A', (1, 1), 1)
>     True ('A', 2)
```
We also had this problem on our machines. It is caused by the (expected, weird, buggy ???) behaviour that some machines give

```
sage: cmp(2,(1,1))
1
```
and others do

```
sage: cmp(2,(1,1))
-1
```
What should we thus do to get the output in some generic order?



---

archive/issue_comments_193973.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [stumpc5](#comment%3A31):\n> What should we thus do to get the output in some generic order?\n\nI have no idea, ask sage-devel.",
    "created_at": "2013-03-25T06:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193973",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Replying to [stumpc5](#comment%3A31):
> What should we thus do to get the output in some generic order?

I have no idea, ask sage-devel.



---

archive/issue_comments_193974.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [stumpc5](#comment%3A31):\n> We also had this problem on our machines.\n\nIf you knew this problem existed, this ticket should never have gotten positive review...",
    "created_at": "2013-03-25T06:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193974",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Replying to [stumpc5](#comment%3A31):
> We also had this problem on our machines.

If you knew this problem existed, this ticket should never have gotten positive review...



---

archive/issue_comments_193975.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jdemeyer](#comment%3A32):\n> Replying to [stumpc5](#comment%3A31):\n> > What should we thus do to get the output in some generic order?\n\n> I have no idea, ask sage-devel.\n\nIf you can afford a sort somewhere, a typical trick is to do:\n\n    sage: sorted(..., key=str)\n\nAnd then it will sort according to the string representation which is platform independent.\n\nI usually only use that for sorting the results in the doctests. But in your situation that could be ok too.\n\nCheers,",
    "created_at": "2013-03-25T06:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193975",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:34'></a>
Replying to [jdemeyer](#comment%3A32):
> Replying to [stumpc5](#comment%3A31):
> > What should we thus do to get the output in some generic order?

> I have no idea, ask sage-devel.

If you can afford a sort somewhere, a typical trick is to do:

    sage: sorted(..., key=str)

And then it will sort according to the string representation which is platform independent.

I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.

Cheers,



---

archive/issue_comments_193976.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [nthiery](#comment%3A34):\n> If you can afford a sort somewhere, a typical trick is to do:\n> I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.\n\n\nGood idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\n> Replying to [jdemeyer](#comment%3A32):\n> If you knew this problem existed, this ticket should never have gotten positive review... \n\n\nI find it very hard to judge if a problem like this only appears because the machine it happened on is a 32bit Mac - I will anyway post such a problem on sage-devel next time...",
    "created_at": "2013-03-25T06:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193976",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:35'></a>
Replying to [nthiery](#comment%3A34):
> If you can afford a sort somewhere, a typical trick is to do:
> I usually only use that for sorting the results in the doctests. But in your situation that could be ok too.


Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!

> Replying to [jdemeyer](#comment%3A32):
> If you knew this problem existed, this ticket should never have gotten positive review... 


I find it very hard to judge if a problem like this only appears because the machine it happened on is a 32bit Mac - I will anyway post such a problem on sage-devel next time...



---

archive/issue_comments_193977.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2013-03-25T07:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193977",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_193978.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [stumpc5](#comment%3A35):\n> Replying to [nthiery](#comment%3A34):\n> Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\n\nDone! Nicolas, would you look at this last change and give it a positive review? Cheers!",
    "created_at": "2013-03-25T07:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193978",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:36'></a>
Replying to [stumpc5](#comment%3A35):
> Replying to [nthiery](#comment%3A34):
> Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!


Done! Nicolas, would you look at this last change and give it a positive review? Cheers!



---

archive/issue_comments_193979.json:
```json
{
    "body": "**Changing reviewer** from \"Christian Stump, Gregg Musikier\" to \"Christian Stump, Gregg Musiker\".",
    "created_at": "2013-03-25T07:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193979",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing reviewer** from "Christian Stump, Gregg Musikier" to "Christian Stump, Gregg Musiker".



---

archive/attachments_018224.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-review_five-cs.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-review_five-cs.patch",
    "created_at": "2013-03-25T15:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nthiery"
}
```



---

archive/issue_comments_193980.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [stumpc5](#comment%3A36):\n> Replying to [stumpc5](#comment%3A35):\n> > Replying to [nthiery](#comment%3A34):\n> > Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!\n\n> \n> Done! Nicolas, would you look at this last change and give it a positive review? Cheers!\n\n\nI checked the patch, and it looks reasonable. You can set the ticket positive review on my behalf as soon as the light goes green and, if you can run them there, the test pass on your other machine which was causing trouble.",
    "created_at": "2013-03-25T15:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193980",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:38'></a>
Replying to [stumpc5](#comment%3A36):
> Replying to [stumpc5](#comment%3A35):
> > Replying to [nthiery](#comment%3A34):
> > Good idea, thanks -- the problem is not at all in a time critical method, so no problem to do your trick!

> 
> Done! Nicolas, would you look at this last change and give it a positive review? Cheers!


I checked the patch, and it looks reasonable. You can set the ticket positive review on my behalf as soon as the light goes green and, if you can run them there, the test pass on your other machine which was causing trouble.



---

archive/issue_comments_193981.json:
```json
{
    "body": "<a id='comment:39'></a>\nThe key=str fix in quiver_mutation_type.py seems to have already solved the issues in save_quiver_data(), etc.\n\nI am about to upload a new patch where we use the key=str for _mutation_type_test() and _random_multi_tests() in mutation_type.py.  \n\nReordering the examples accordingly slightly, this now passes on my machine (the one that was having trouble before).  All tests passed!\n\nChristian, assuming that it passes on your machine with the new order of examples, and if you don't see other issues, it should be ready to go. \n\nIs there any way to get the patchbot to run again??? \n\nDo you want to fold the patches all into one again?  If the patchbot and you are happy, I think it's ready for a positive review on my behalf.\n\nGregg",
    "created_at": "2013-03-26T03:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193981",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:39'></a>
The key=str fix in quiver_mutation_type.py seems to have already solved the issues in save_quiver_data(), etc.

I am about to upload a new patch where we use the key=str for _mutation_type_test() and _random_multi_tests() in mutation_type.py.  

Reordering the examples accordingly slightly, this now passes on my machine (the one that was having trouble before).  All tests passed!

Christian, assuming that it passes on your machine with the new order of examples, and if you don't see other issues, it should be ready to go. 

Is there any way to get the patchbot to run again??? 

Do you want to fold the patches all into one again?  If the patchbot and you are happy, I think it's ready for a positive review on my behalf.

Gregg



---

archive/attachments_018225.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_13425-sixth-review-gm.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket13425/trac_13425-sixth-review-gm.patch",
    "created_at": "2013-03-26T03:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```



---

archive/issue_comments_193982.json:
```json
{
    "body": "",
    "created_at": "2013-03-26T03:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193982",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```





---

archive/issue_comments_193983.json:
```json
{
    "body": "<a id='comment:40'></a>\nI confirmed with Christian that with the new patch, -t -long passes on his machine, and I just successfully ran -testall -long overnight on my machine (which was the one with the slight order difference in the output during a few doctests).\n\nSo with this latest patch, it is now ready to go.\n\nGregg",
    "created_at": "2013-03-26T13:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193983",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:40'></a>
I confirmed with Christian that with the new patch, -t -long passes on his machine, and I just successfully ran -testall -long overnight on my machine (which was the one with the slight order difference in the output during a few doctests).

So with this latest patch, it is now ready to go.

Gregg



---

archive/issue_comments_193984.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2013-03-26T13:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193984",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_193985.json:
```json
{
    "body": "<a id='comment:42'></a>\nJeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.",
    "created_at": "2013-03-28T01:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193985",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'></a>
Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.



---

archive/issue_comments_193986.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n+\n+Apply all seven of the patches below, in order.\n``````\n",
    "created_at": "2013-03-28T05:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193986",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
+
+Apply all seven of the patches below, in order.
``````




---

archive/issue_comments_193987.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [fbissey](#comment%3A42):\n> Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.\n\n\nJust modified the description accordingly.  All seven patches should be applied in order.\n\nGregg",
    "created_at": "2013-03-28T05:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193987",
    "user": "https://trac.sagemath.org/admin/accounts/users/gmoose05"
}
```

<a id='comment:44'></a>
Replying to [fbissey](#comment%3A42):
> Jeroen will want to know and I'd like to know too. Which patch do you need to apply? You should update the summary with the list of patches that needs to be applied for this ticket. We cannot know which of the patch listed in this ticket are to be applied without digging deeper.


Just modified the description accordingly.  All seven patches should be applied in order.

Gregg



---

archive/issue_comments_193988.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n This ticket implements mutation type checks for cluster seeds and quivers.\n \n-Apply all seven of the patches below, in order.\n+Apply to the sage library:\n+* [attachment:trac_13425-mutation_type-gm.patch]\n+* [attachment:trac_13425-review-cs.patch]\n+* [attachment:trac_13425-review_two-cs.patch]\n+* [attachment:trac_13425-small-doc-fix.patch]\n+* [attachment:trac_13425-review_four-cs.patch]\n+* [attachment:trac_13425-review_five-cs.patch]\n+* [attachment:trac_13425-sixth-review-gm.patch]\n``````\n",
    "created_at": "2013-03-28T09:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193988",
    "user": "https://github.com/kiwifb"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 This ticket implements mutation type checks for cluster seeds and quivers.
 
-Apply all seven of the patches below, in order.
+Apply to the sage library:
+* [attachment:trac_13425-mutation_type-gm.patch]
+* [attachment:trac_13425-review-cs.patch]
+* [attachment:trac_13425-review_two-cs.patch]
+* [attachment:trac_13425-small-doc-fix.patch]
+* [attachment:trac_13425-review_four-cs.patch]
+* [attachment:trac_13425-review_five-cs.patch]
+* [attachment:trac_13425-sixth-review-gm.patch]
``````




---

archive/issue_comments_193989.json:
```json
{
    "body": "<a id='comment:45'></a>\nThanks for the clarification. I have put it in the desired format.",
    "created_at": "2013-03-28T09:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193989",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'></a>
Thanks for the clarification. I have put it in the desired format.



---

archive/issue_comments_193990.json:
```json
{
    "body": "**Merged:** sage-5.9.beta2",
    "created_at": "2013-03-28T17:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193990",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.9.beta2



---

archive/issue_events_043587.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-03-28T17:58:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13425#event-43587"
}
```



---

archive/issue_comments_193991.json:
```json
{
    "body": "<a id='comment:47'></a>\nDoctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.",
    "created_at": "2013-04-01T15:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193991",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:47'></a>
Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.



---

archive/issue_comments_193992.json:
```json
{
    "body": "<a id='comment:48'></a>\nDoctesting `sage/combinat/cluster_algebra_quiver/mutation_type.py` with `--long` also takes pretty long.",
    "created_at": "2013-04-01T15:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193992",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:48'></a>
Doctesting `sage/combinat/cluster_algebra_quiver/mutation_type.py` with `--long` also takes pretty long.



---

archive/issue_comments_193993.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [leif](#comment%3A47):\n> Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.\n\n\nThis one is totally weird.  When running `make testlong` on Sage 5.9.beta2, this test initially timed out, so I afterwards doctested it twice with `sage -t --long ...`.  In both cases, it took about 25 minutes (+/-, I don't recall exactly).\n\nI then built Sage 5.9.beta2 with FLINT 2.3, and there it took less than half a minute (same machine, same compiler flags), repeatedly, and so I reran the test in vanilla 5.9.beta2 again, and it now takes about the same time there as well.\n\nSeems like the new doctesting framework is pretty flaky.\n\n(Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)",
    "created_at": "2013-04-02T05:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193993",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:49'></a>
Replying to [leif](#comment%3A47):
> Doctesting `devel/sage/sage/combinat/cluster_algebra_quiver/quiver.py` with `--long` takes by far too long, compared to other files.


This one is totally weird.  When running `make testlong` on Sage 5.9.beta2, this test initially timed out, so I afterwards doctested it twice with `sage -t --long ...`.  In both cases, it took about 25 minutes (+/-, I don't recall exactly).

I then built Sage 5.9.beta2 with FLINT 2.3, and there it took less than half a minute (same machine, same compiler flags), repeatedly, and so I reran the test in vanilla 5.9.beta2 again, and it now takes about the same time there as well.

Seems like the new doctesting framework is pretty flaky.

(Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)



---

archive/issue_comments_193994.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [leif](#comment%3A49):\n> Replying to [leif](#comment%3A47):\n> (Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)\n\n\nThanks for your report - do you think we should provide a patch (in another ticket) to shorten the long doctests?",
    "created_at": "2013-04-02T08:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13425#issuecomment-193994",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:50'></a>
Replying to [leif](#comment%3A49):
> Replying to [leif](#comment%3A47):
> (Still, `mutation_type.py`'s long doctests take quite a while in both installations, i.e., nearly 900 seconds.)


Thanks for your report - do you think we should provide a patch (in another ticket) to shorten the long doctests?
