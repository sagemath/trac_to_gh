# Issue 13511: Allow access to principal values of integrals

archive/issues_013307.json:
```json
{
    "assignees": [],
    "body": "In [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/AAZy318mXv4), the question was raised about accessing principal values of divergent integrals when they exist.  This is in Maxima, but we currently raise an error if the integral is divergent.  Some options mentioned in the thread were having another parameter, another method, or something else.\n\nAssignee: **@burcin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13511_\n\n",
    "created_at": "2012-09-20T12:17:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow access to principal values of integrals",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13511",
    "user": "https://github.com/kcrisman"
}
```
In [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/AAZy318mXv4), the question was raised about accessing principal values of divergent integrals when they exist.  This is in Maxima, but we currently raise an error if the integral is divergent.  Some options mentioned in the thread were having another parameter, another method, or something else.

Assignee: **@burcin**

_Issue created by migration from https://trac.sagemath.org/ticket/13511_





---

archive/issue_events_166737.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "component: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166737"
}
```



---

archive/issue_events_166738.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166738"
}
```



---

archive/issue_events_166739.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166739"
}
```



---

archive/issue_events_166740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166740"
}
```



---

archive/issue_events_166741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166741"
}
```



---

archive/issue_events_166742.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166742"
}
```



---

archive/issue_events_166743.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166743"
}
```



---

archive/issue_events_166744.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166744"
}
```



---

archive/issue_events_166745.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166745"
}
```



---

archive/issue_events_166746.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166746"
}
```



---

archive/issue_events_166747.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166747"
}
```



---

archive/issue_comments_159942.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nPerhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\n```\n\n(%i1) integral(sec(x), x, -%pi/4, %pi/4);\n                                              %pi  %pi\n(%o1)                   integral(sec(x), x, - ---, ---)\n                                               4    4\n(%i2) integrate(sec(x), x, -%pi/4, %pi/4);\nPrincipal Value\n                         sqrt(2) + 2          sqrt(2) - 2\n(%o2)                log(-----------) - log(- -----------)\n                              2                    2\n```\nSee #17608.",
    "created_at": "2015-01-09T02:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-159942",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'>Comment 5:</a>
Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

```

(%i1) integral(sec(x), x, -%pi/4, %pi/4);
                                              %pi  %pi
(%o1)                   integral(sec(x), x, - ---, ---)
                                               4    4
(%i2) integrate(sec(x), x, -%pi/4, %pi/4);
Principal Value
                         sqrt(2) + 2          sqrt(2) - 2
(%o2)                log(-----------) - log(- -----------)
                              2                    2
```
See #17608.



---

archive/issue_comments_159943.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@kcrisman](#comment%3A5):\n> Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\nIsn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?",
    "created_at": "2015-01-09T03:57:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-159943",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@kcrisman](#comment%3A5):
> Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?



---

archive/issue_comments_159944.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\n> > Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\n> Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?\n\nPossibly, though perhaps it's just saying this is how it was calculated.   See https://sourceforge.net/p/maxima/bugs/2880/ which was the genesis of #17608.  I feel like they are two separate tickets, however you can feel free to disagree and I won't object very strongly, it's quite amorphous.",
    "created_at": "2015-01-09T13:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-159944",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'>Comment 7:</a>
> > Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

> Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?

Possibly, though perhaps it's just saying this is how it was calculated.   See https://sourceforge.net/p/maxima/bugs/2880/ which was the genesis of #17608.  I feel like they are two separate tickets, however you can feel free to disagree and I won't object very strongly, it's quite amorphous.



---

archive/issue_comments_159945.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nIt gets even more exciting:\n\n```\n(%i2) integrate(sec(x),x,0,%pi/4);\n\n(%o2) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2\n(%i3) integrate(sec(x),x,-%pi/4,0);\nPrincipal Value\n(%o3) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2\n```",
    "created_at": "2015-01-09T16:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-159945",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:8'>Comment 8:</a>
It gets even more exciting:

```
(%i2) integrate(sec(x),x,0,%pi/4);

(%o2) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
(%i3) integrate(sec(x),x,-%pi/4,0);
Principal Value
(%o3) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
```



---

archive/issue_events_166748.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-166748"
}
```
