# Issue 13511: Allow access to principal values of integrals

archive/issues_013307.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "In [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/AAZy318mXv4), the question was raised about accessing principal values of divergent integrals when they exist.  This is in Maxima, but we currently raise an error if the integral is divergent.  Some options mentioned in the thread were having another parameter, another method, or something else.\n\nComponent: **calculus**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13511_\n\n",
    "created_at": "2012-09-20T12:17:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow access to principal values of integrals",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13511",
    "user": "https://github.com/kcrisman"
}
```
In [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/AAZy318mXv4), the question was raised about accessing principal values of divergent integrals when they exist.  This is in Maxima, but we currently raise an error if the integral is divergent.  Some options mentioned in the thread were having another parameter, another method, or something else.

Component: **calculus**

_Issue created by migration from https://trac.sagemath.org/ticket/13511_





---

archive/issue_events_186658.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186658"
}
```



---

archive/issue_events_186659.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186659"
}
```



---

archive/issue_events_186660.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186660"
}
```



---

archive/issue_events_186661.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186661"
}
```



---

archive/issue_events_186662.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2012-09-20T12:17:21Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "subject": "https://github.com/kcrisman",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186662"
}
```



---

archive/issue_events_186663.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186663"
}
```



---

archive/issue_events_186664.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186664"
}
```



---

archive/issue_events_186665.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186665"
}
```



---

archive/issue_events_186666.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186666"
}
```



---

archive/issue_events_186667.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186667"
}
```



---

archive/issue_events_186668.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186668"
}
```



---

archive/issue_events_186669.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186669"
}
```



---

archive/issue_events_186670.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186670"
}
```



---

archive/issue_comments_157563.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPerhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\n```\n\n(%i1) integral(sec(x), x, -%pi/4, %pi/4);\n                                              %pi  %pi\n(%o1)                   integral(sec(x), x, - ---, ---)\n                                               4    4\n(%i2) integrate(sec(x), x, -%pi/4, %pi/4);\nPrincipal Value\n                         sqrt(2) + 2          sqrt(2) - 2\n(%o2)                log(-----------) - log(- -----------)\n                              2                    2\n```\nSee #17608.",
    "created_at": "2015-01-09T02:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-157563",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

```

(%i1) integral(sec(x), x, -%pi/4, %pi/4);
                                              %pi  %pi
(%o1)                   integral(sec(x), x, - ---, ---)
                                               4    4
(%i2) integrate(sec(x), x, -%pi/4, %pi/4);
Principal Value
                         sqrt(2) + 2          sqrt(2) - 2
(%o2)                log(-----------) - log(- -----------)
                              2                    2
```
See #17608.



---

archive/issue_comments_157564.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kcrisman](#comment%3A5):\n> Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\nIsn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?",
    "created_at": "2015-01-09T03:57:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-157564",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kcrisman](#comment%3A5):
> Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?



---

archive/issue_comments_157565.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> > Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!\n\n> Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?\n\nPossibly, though perhaps it's just saying this is how it was calculated.   See https://sourceforge.net/p/maxima/bugs/2880/ which was the genesis of #17608.  I feel like they are two separate tickets, however you can feel free to disagree and I won't object very strongly, it's quite amorphous.",
    "created_at": "2015-01-09T13:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-157565",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

> > Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

> Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?

Possibly, though perhaps it's just saying this is how it was calculated.   See https://sourceforge.net/p/maxima/bugs/2880/ which was the genesis of #17608.  I feel like they are two separate tickets, however you can feel free to disagree and I won't object very strongly, it's quite amorphous.



---

archive/issue_comments_157566.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt gets even more exciting:\n\n```\n(%i2) integrate(sec(x),x,0,%pi/4);\n\n(%o2) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2\n(%i3) integrate(sec(x),x,-%pi/4,0);\nPrincipal Value\n(%o3) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2\n```",
    "created_at": "2015-01-09T16:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13511#issuecomment-157566",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

It gets even more exciting:

```
(%i2) integrate(sec(x),x,0,%pi/4);

(%o2) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
(%i3) integrate(sec(x),x,-%pi/4,0);
Principal Value
(%o3) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
```



---

archive/issue_events_186671.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13511",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13511#event-186671"
}
```
