# Issue 13122: Remove last vestiges of darcs from Sage

archive/issues_012950.json:
```json
{
    "body": "#9257 removed one of the last remnants of the darcs revision control system from Sage.   Currently we have\n\n```\n$ grep -r darcs Downloads/sage-4.8/devel/sage/\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/00manifest.d matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/changes.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/commit.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/doc/new.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/new.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/notes.txt.i matches\nBinary file Downloads/sage-4.8/devel/sage/.hg/store/data/sage/misc/darcs.py.i matches\n```\nwhich is fine, all repo history.  But apparently we still have a file named sage-mirror-darcs-script:\n\n```\n$ grep -r darcs Downloads/sage-5.0/local/bin/\nBinary file Downloads/sage-5.0/local/bin/.hg/dirstate matches\nDownloads/sage-5.0/local/bin/.hg/store/fncache:data/sage-mirror-darcs-scripts.i\nBinary file Downloads/sage-5.0/local/bin/.hg/undo.dirstate matches\nDownloads/sage-5.0/local/bin/.hgignore:(^|/)\\_darcs($|/)\nDownloads/sage-5.0/local/bin/.hgignore:darcs\nDownloads/sage-5.0/local/bin/sage-mirror:rsync -axLH --rsh=ssh --delete -r -v  bin/sage-* bin/_darcs modular:/home/was/www/sage/dist/src/scripts-darcs/\nDownloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:cd _darcs/\nDownloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:rsync -axLH --rsh=ssh --delete -r -v  * was@modular.math.washington.edu:www/sage/dist/src/scripts-darcs/_darcs/\n```\nand it's even still in spkg/bin/sage (the old sage-sage)!\n\n```\n$ grep -r darcs Downloads/sage-5.0/spkg/bin/\nDownloads/sage-5.0/spkg/bin/sage:if [ \"$1\" = '-darcs'  -o \"$1\" = '--darcs' ]; then\nDownloads/sage-5.0/spkg/bin/sage:    darcs \"$@\"\n```\nNeedless to say,\n\n```\n$ sage -darcs\n/Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found\n```\nSo let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...\n\n\n---\n\nApply\n* [attachment:trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo\n* [attachment:trac13122_root.patch] to the root repo\n* [attachment:trac13122_extcode.patch] to the extcode repo\n\nAlso reported upstream at https://github.com/sagemath/sagenb/pull/70\n\nAssignee: @nexttime\n\nCC:  @kini @robertwb\n\nUpstream: Completely fixed; Fix reported upstream\n\nReviewer: Karl-Dieter Crisman\n\nAuthor: R. Andrew Ohana\n\nMerged: sage-5.1.beta6\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13122\n\n",
    "closed_at": "2012-06-23T21:46:03Z",
    "created_at": "2012-06-16T03:19:47Z",
    "labels": [
        "component: scripts",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "Remove last vestiges of darcs from Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13122",
    "user": "https://github.com/kcrisman"
}
```
#9257 removed one of the last remnants of the darcs revision control system from Sage.   Currently we have

```
$ grep -r darcs Downloads/sage-4.8/devel/sage/
Binary file Downloads/sage-4.8/devel/sage/.hg/store/00manifest.d matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/changes.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/commit.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/doc/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/new.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/notes.txt.i matches
Binary file Downloads/sage-4.8/devel/sage/.hg/store/data/sage/misc/darcs.py.i matches
```
which is fine, all repo history.  But apparently we still have a file named sage-mirror-darcs-script:

```
$ grep -r darcs Downloads/sage-5.0/local/bin/
Binary file Downloads/sage-5.0/local/bin/.hg/dirstate matches
Downloads/sage-5.0/local/bin/.hg/store/fncache:data/sage-mirror-darcs-scripts.i
Binary file Downloads/sage-5.0/local/bin/.hg/undo.dirstate matches
Downloads/sage-5.0/local/bin/.hgignore:(^|/)\_darcs($|/)
Downloads/sage-5.0/local/bin/.hgignore:darcs
Downloads/sage-5.0/local/bin/sage-mirror:rsync -axLH --rsh=ssh --delete -r -v  bin/sage-* bin/_darcs modular:/home/was/www/sage/dist/src/scripts-darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:cd _darcs/
Downloads/sage-5.0/local/bin/sage-mirror-darcs-scripts:rsync -axLH --rsh=ssh --delete -r -v  * was@modular.math.washington.edu:www/sage/dist/src/scripts-darcs/_darcs/
```
and it's even still in spkg/bin/sage (the old sage-sage)!

```
$ grep -r darcs Downloads/sage-5.0/spkg/bin/
Downloads/sage-5.0/spkg/bin/sage:if [ "$1" = '-darcs'  -o "$1" = '--darcs' ]; then
Downloads/sage-5.0/spkg/bin/sage:    darcs "$@"
```
Needless to say,

```
$ sage -darcs
/Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found
```
So let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...


---

Apply
* [attachment:trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo
* [attachment:trac13122_root.patch] to the root repo
* [attachment:trac13122_extcode.patch] to the extcode repo

Also reported upstream at https://github.com/sagemath/sagenb/pull/70

Assignee: @nexttime

CC:  @kini @robertwb

Upstream: Completely fixed; Fix reported upstream

Reviewer: Karl-Dieter Crisman

Author: R. Andrew Ohana

Merged: sage-5.1.beta6

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13122





---

archive/issue_comments_191015.json:
```json
{
    "body": "Attachment [trac13122_scripts.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_scripts.patch) by @ohanar created at 2012-06-18 05:56:07",
    "created_at": "2012-06-18T05:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191015",
    "user": "https://github.com/ohanar"
}
```

Attachment [trac13122_scripts.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_scripts.patch) by @ohanar created at 2012-06-18 05:56:07



---

archive/issue_comments_191016.json:
```json
{
    "body": "Attachment [trac13122_root.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_root.patch) by @ohanar created at 2012-06-18 05:56:35",
    "created_at": "2012-06-18T05:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191016",
    "user": "https://github.com/ohanar"
}
```

Attachment [trac13122_root.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_root.patch) by @ohanar created at 2012-06-18 05:56:35



---

archive/issue_comments_191017.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [trac13122_extcode.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_extcode.patch) by @ohanar created at 2012-06-18 05:58:58\n\nThis is all of the stuff that I found that is related to darcs. There are other useless scripts that are unused, but that is for another ticket :).",
    "created_at": "2012-06-18T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191017",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:1'></a>
Attachment [trac13122_extcode.patch](tarball://root/attachments/some-uuid/ticket13122/trac13122_extcode.patch) by @ohanar created at 2012-06-18 05:58:58

This is all of the stuff that I found that is related to darcs. There are other useless scripts that are unused, but that is for another ticket :).



---

archive/issue_comments_191018.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-18T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191018",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_191019.json:
```json
{
    "body": "Changing author from \"\" to \"R. Andrew Ohana\"",
    "created_at": "2012-06-18T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191019",
    "user": "https://github.com/ohanar"
}
```

Changing author from "" to "R. Andrew Ohana"



---

archive/issue_comments_191020.json:
```json
{
    "body": "<a id='comment:2'></a>\nShould we also remove them from `.hgignore`?  Heck, why not.  Patch coming up for one of them, and I've submitted [an upstream pull request](https://github.com/sagemath/sagenb/pull/70) which you should be happy I figured out how to do :)",
    "created_at": "2012-06-18T13:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191020",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>
Should we also remove them from `.hgignore`?  Heck, why not.  Patch coming up for one of them, and I've submitted [an upstream pull request](https://github.com/sagemath/sagenb/pull/70) which you should be happy I figured out how to do :)



---

archive/issue_comments_191021.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [trac_13122-reviewer1.patch](tarball://root/attachments/some-uuid/ticket13122/trac_13122-reviewer1.patch) by @kcrisman created at 2012-06-18 13:59:23\n\nOtherwise I guess this is fine.  Everything I find now is either directly related to the changes made here (in .hg/patches etc.), part of the revision history, or part of unrelated files (like Pygments and hgext in our Python).\n\nPatchbot, apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191021",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>
Attachment [trac_13122-reviewer1.patch](tarball://root/attachments/some-uuid/ticket13122/trac_13122-reviewer1.patch) by @kcrisman created at 2012-06-18 13:59:23

Otherwise I guess this is fine.  Everything I find now is either directly related to the changes made here (in .hg/patches etc.), part of the revision history, or part of unrelated files (like Pygments and hgext in our Python).

Patchbot, apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].



---

archive/issue_comments_191022.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191022",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_049827.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2012-06-18T13:59:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13122#event-49827"
}
```



---

archive/issue_comments_191023.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Completely fixed; Fix reported upstream\"",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191023",
    "user": "https://github.com/kcrisman"
}
```

Changing upstream from "N/A" to "Completely fixed; Fix reported upstream"



---

archive/issue_comments_191024.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,3 +37,10 @@\n /Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found\n ```\n So let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...\n+\n+\n+---\n+\n+Apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].\n+\n+Also reported upstream at https://github.com/sagemath/sagenb/pull/70\n``````\n",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191024",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,3 +37,10 @@
 /Users/.../sage-5.0/spkg/bin/sage: line 606: darcs: command not found
 ```
 So let's get rid of these last things.  Especially if we might be migrating to git in the mid-range future...
+
+
+---
+
+Apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].
+
+Also reported upstream at https://github.com/sagemath/sagenb/pull/70
``````




---

archive/issue_comments_191025.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Karl-Dieter Crisman\"",
    "created_at": "2012-06-18T13:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191025",
    "user": "https://github.com/kcrisman"
}
```

Changing reviewer from "" to "Karl-Dieter Crisman"



---

archive/issue_comments_191026.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -41,6 +41,9 @@\n \n ---\n \n-Apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].\n+Apply\n+* [attachment: trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo\n+* [attachment:trac13122_root.patch] to the root repo\n+* [attachment:trac13122_extcode.patch] to the extcode repo\n \n Also reported upstream at https://github.com/sagemath/sagenb/pull/70\n``````\n",
    "created_at": "2012-06-18T22:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191026",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -41,6 +41,9 @@
 
 ---
 
-Apply [attachment: trac13122_scripts.patch], [attachment:trac13122_root.patch], [attachment:trac13122_extcode.patch], and [attachment:trac_13122-reviewer1.patch].
+Apply
+* [attachment: trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo
+* [attachment:trac13122_root.patch] to the root repo
+* [attachment:trac13122_extcode.patch] to the extcode repo
 
 Also reported upstream at https://github.com/sagemath/sagenb/pull/70
``````




---

archive/issue_events_049828.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-19T12:05:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13122#event-49828"
}
```



---

archive/issue_events_049829.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-19T12:05:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13122#event-49829"
}
```



---

archive/issue_comments_191027.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -42,7 +42,7 @@\n ---\n \n Apply\n-* [attachment: trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo\n+* [attachment:trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo\n * [attachment:trac13122_root.patch] to the root repo\n * [attachment:trac13122_extcode.patch] to the extcode repo\n \n``````\n",
    "created_at": "2012-06-19T12:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191027",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -42,7 +42,7 @@
 ---
 
 Apply
-* [attachment: trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo
+* [attachment:trac13122_scripts.patch] and [attachment:trac_13122-reviewer1.patch] to the scripts repo
 * [attachment:trac13122_root.patch] to the root repo
 * [attachment:trac13122_extcode.patch] to the extcode repo
 
``````




---

archive/issue_comments_191028.json:
```json
{
    "body": "<a id='comment:7'></a>\nJust FYI, sagenb upstream has just merged the pull request.",
    "created_at": "2012-06-21T00:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191028",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:7'></a>
Just FYI, sagenb upstream has just merged the pull request.



---

archive/issue_comments_191029.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-23T21:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191029",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_191030.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.1.beta6\"",
    "created_at": "2012-06-23T21:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13122#issuecomment-191030",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.1.beta6"



---

archive/issue_events_049830.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-06-23T21:46:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13122",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13122#event-49830"
}
```
