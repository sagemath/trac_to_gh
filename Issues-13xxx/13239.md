# Issue 13239: Contraction of edges in a graph.

archive/issues_013067.json:
```json
{
    "assignees": [],
    "body": "Contracts edges in a graph so that we can compute the Tutte polynomial (#1314)\n\nThis version of contracting edges is different from #7304 (this code will keep resulting multiedges and remove contracted edge).\n\nAssignee: **@jasongrout, @nathanncohen, @rlmill**\n\nCC:  @sagetrac-jeremy-l-martin @dcoudert\n\nKeywords: **SD40**\n\nReviewer: **Marshall Hampton, David Coudert**\n\nAuthor: **Lauren Keough, Jeremy Martin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13239_\n\n",
    "created_at": "2012-07-12T16:03:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Contraction of edges in a graph.",
    "type": "issue",
    "updated_at": "2022-12-29T01:28:25Z",
    "url": "https://github.com/sagemath/sage/issues/13239",
    "user": "https://github.com/sagetrac-lkeough"
}
```
Contracts edges in a graph so that we can compute the Tutte polynomial (#1314)

This version of contracting edges is different from #7304 (this code will keep resulting multiedges and remove contracted edge).

Assignee: **@jasongrout, @nathanncohen, @rlmill**

CC:  @sagetrac-jeremy-l-martin @dcoudert

Keywords: **SD40**

Reviewer: **Marshall Hampton, David Coudert**

Author: **Lauren Keough, Jeremy Martin**

_Issue created by migration from https://trac.sagemath.org/ticket/13239_





---

archive/issue_events_168904.json:
```json
{
    "actor": "https://github.com/sagetrac-lkeough",
    "created_at": "2012-07-12T16:03:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168904"
}
```



---

archive/issue_events_168905.json:
```json
{
    "actor": "https://github.com/sagetrac-lkeough",
    "created_at": "2012-07-12T16:03:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168905"
}
```



---

archive/issue_events_168906.json:
```json
{
    "actor": "https://github.com/sagetrac-lkeough",
    "created_at": "2012-07-12T16:03:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168906"
}
```



---

archive/issue_events_168907.json:
```json
{
    "actor": "https://github.com/sagetrac-lkeough",
    "created_at": "2012-07-12T16:03:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168907"
}
```



---

archive/issue_comments_154900.json:
```json
{
    "body": "Author: **Lauren Keough, Jeremy Martin**",
    "created_at": "2012-07-12T16:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154900",
    "user": "https://github.com/sagetrac-lkeough"
}
```

Author: **Lauren Keough, Jeremy Martin**



---

archive/issue_events_168908.json:
```json
{
    "actor": "https://github.com/sagetrac-lkeough",
    "created_at": "2012-07-12T16:26:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168908"
}
```



---

archive/issue_comments_154901.json:
```json
{
    "body": "Attachment: **[trac_13239.patch.gz](https://github.com/sagemath/sage/files/ticket13239/trac_13239.patch.gz)**",
    "created_at": "2012-07-12T19:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154901",
    "user": "https://github.com/sagetrac-lkeough"
}
```

Attachment: **[trac_13239.patch.gz](https://github.com/sagemath/sage/files/ticket13239/trac_13239.patch.gz)**



---

archive/issue_comments_154902.json:
```json
{
    "body": "Changed keywords from none to **SD40**",
    "created_at": "2012-07-12T19:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154902",
    "user": "https://github.com/sagetrac-lkeough"
}
```

Changed keywords from none to **SD40**



---

archive/issue_events_168909.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-12T19:21:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168909"
}
```



---

archive/issue_events_168910.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2012-07-12T19:21:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168910"
}
```



---

archive/issue_comments_154903.json:
```json
{
    "body": "Reviewer: **Marshall Hampton**",
    "created_at": "2012-07-12T19:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154903",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Reviewer: **Marshall Hampton**



---

archive/issue_events_168911.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-07-13T08:59:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168911"
}
```



---

archive/issue_events_168912.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-07-13T08:59:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168912"
}
```



---

archive/issue_comments_154904.json:
```json
{
    "body": "Changed reviewer from **Marshall Hampton** to **Marshall Hampton, David Coudert**",
    "created_at": "2012-07-13T08:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154904",
    "user": "https://github.com/dcoudert"
}
```

Changed reviewer from **Marshall Hampton** to **Marshall Hampton, David Coudert**



---

archive/issue_comments_154905.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nHello,\n\nI don't understand this new patch. If the behavior of the contract_edge function proposed in patch #7304 is not adapted to your purpose, you could add extra parameters (inplace = False, keep_multiedges, etc.)\n\nFurthermore, it works only for undirected graphs. So it should at least be in graph.py and not in generic_graph.py. \n\nIn the following example, arc (3,0) becomes arc (0,3)\n\n```\nsage: D = digraphs.RandomDirectedGNP(5,.5)\nsage: h = D.contraction((0,1))\nsage: D.edges(labels=None)\n[(0, 1), (0, 2), (0, 3), (1, 0), (1, 3), (1, 4), (2, 0), (3, 0), (3, 1), (3, 4), (4, 2)]\nsage: h.edges(labels=None)\n[(0, 0), (0, 2), (0, 2), (0, 3), (0, 3), (0, 3), (0, 3), (0, 4), (2, 4), (3, 4)]\n``` \n\nD.",
    "created_at": "2012-07-13T08:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154905",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">Comment 4</div>

Hello,

I don't understand this new patch. If the behavior of the contract_edge function proposed in patch #7304 is not adapted to your purpose, you could add extra parameters (inplace = False, keep_multiedges, etc.)

Furthermore, it works only for undirected graphs. So it should at least be in graph.py and not in generic_graph.py. 

In the following example, arc (3,0) becomes arc (0,3)

```
sage: D = digraphs.RandomDirectedGNP(5,.5)
sage: h = D.contraction((0,1))
sage: D.edges(labels=None)
[(0, 1), (0, 2), (0, 3), (1, 0), (1, 3), (1, 4), (2, 0), (3, 0), (3, 1), (3, 4), (4, 2)]
sage: h.edges(labels=None)
[(0, 0), (0, 2), (0, 2), (0, 3), (0, 3), (0, 3), (0, 3), (0, 4), (2, 4), (3, 4)]
``` 

D.



---

archive/issue_comments_154906.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@dcoudert](#comment%3A4):\n> Hello,\n> \n> I don't understand this new patch. If the behavior of the contract_edge function proposed in patch #7304 is not adapted to your purpose, you could add extra parameters (inplace = False, keep_multiedges, etc.)\n\n#7304 will keep multiedges if you do G.allow_multiedges . However, we also need to do G.allow_loops (for the tutte polynomial), but if we do that then the patch leaves the contracted edge (rather than deleting it which is what we want).  I suppose I could use their code and then add a line to mine that deletes that loop.\n\nI'm not really sure what the best option is here.  7304 already has a lot of parameters and adding another might be very confusing.  And I'm also not sure what most people mean by contracting an edge - I thought the definition I have written in this code was \"the\" definition, but it's becoming more apparent that it isn't at all!  Perhaps I could just include this code in the Tutte polynomial code and not as a separate function?  I'm very open to advice on this!\n\n> Furthermore, it works only for undirected graphs. So it should at least be in graph.py and not in generic_graph.py. \n\nOkay, I will definitely move to graph.py unless I can figure out how to make it work for digraphs.\n\n> In the following example, arc (3,0) becomes arc (0,3)\n> \n> ```\n> sage: D = digraphs.RandomDirectedGNP(5,.5)\n> sage: h = D.contraction((0,1))\n> sage: D.edges(labels=None)\n> [(0, 1), (0, 2), (0, 3), (1, 0), (1, 3), (1, 4), (2, 0), (3, 0), (3, 1), (3, 4), (4, 2)]\n> sage: h.edges(labels=None)\n> [(0, 0), (0, 2), (0, 2), (0, 3), (0, 3), (0, 3), (0, 3), (0, 4), (2, 4), (3, 4)]\n> ``` \n> \n> D.",
    "created_at": "2012-07-13T16:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154906",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@dcoudert](#comment%3A4):
> Hello,
> 
> I don't understand this new patch. If the behavior of the contract_edge function proposed in patch #7304 is not adapted to your purpose, you could add extra parameters (inplace = False, keep_multiedges, etc.)

#7304 will keep multiedges if you do G.allow_multiedges . However, we also need to do G.allow_loops (for the tutte polynomial), but if we do that then the patch leaves the contracted edge (rather than deleting it which is what we want).  I suppose I could use their code and then add a line to mine that deletes that loop.

I'm not really sure what the best option is here.  7304 already has a lot of parameters and adding another might be very confusing.  And I'm also not sure what most people mean by contracting an edge - I thought the definition I have written in this code was "the" definition, but it's becoming more apparent that it isn't at all!  Perhaps I could just include this code in the Tutte polynomial code and not as a separate function?  I'm very open to advice on this!

> Furthermore, it works only for undirected graphs. So it should at least be in graph.py and not in generic_graph.py. 

Okay, I will definitely move to graph.py unless I can figure out how to make it work for digraphs.

> In the following example, arc (3,0) becomes arc (0,3)
> 
> ```
> sage: D = digraphs.RandomDirectedGNP(5,.5)
> sage: h = D.contraction((0,1))
> sage: D.edges(labels=None)
> [(0, 1), (0, 2), (0, 3), (1, 0), (1, 3), (1, 4), (2, 0), (3, 0), (3, 1), (3, 4), (4, 2)]
> sage: h.edges(labels=None)
> [(0, 0), (0, 2), (0, 2), (0, 3), (0, 3), (0, 3), (0, 3), (0, 4), (2, 4), (3, 4)]
> ``` 
> 
> D.



---

archive/issue_comments_154907.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nIf the #7304 function is not adapted to your purpose, it could be better to include the code in your function instead of creating a new one.\n\nMay be some people from Sage Days could give good advise.",
    "created_at": "2012-07-13T16:39:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154907",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">Comment 6</div>

If the #7304 function is not adapted to your purpose, it could be better to include the code in your function instead of creating a new one.

May be some people from Sage Days could give good advise.



---

archive/issue_comments_154908.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@dcoudert](#comment%3A6):\n> If the #7304 function is not adapted to your purpose, it could be better to include the code in your function instead of creating a new one.\n> \n> May be some people from Sage Days could give good advise.\n\nA couple of graph theorists at Sage Days said they would prefer to have a function by the name of contraction that does what I described in the documentation for this one.  It is very easy to adapt their code and call it contraction.  I'm going to try both things and time them to see which is faster.  Thanks!",
    "created_at": "2012-07-13T17:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13239#issuecomment-154908",
    "user": "https://github.com/sagetrac-lkeough"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@dcoudert](#comment%3A6):
> If the #7304 function is not adapted to your purpose, it could be better to include the code in your function instead of creating a new one.
> 
> May be some people from Sage Days could give good advise.

A couple of graph theorists at Sage Days said they would prefer to have a function by the name of contraction that does what I described in the documentation for this one.  It is very easy to adapt their code and call it contraction.  I'm going to try both things and time them to see which is faster.  Thanks!



---

archive/issue_events_168913.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168913"
}
```



---

archive/issue_events_168914.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168914"
}
```



---

archive/issue_events_168915.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168915"
}
```



---

archive/issue_events_168916.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168916"
}
```



---

archive/issue_events_168917.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168917"
}
```



---

archive/issue_events_168918.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168918"
}
```



---

archive/issue_events_168919.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168919"
}
```



---

archive/issue_events_168920.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168920"
}
```



---

archive/issue_events_168921.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:28:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13239",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13239#event-168921"
}
```
