# Issue 13699: Another bug in graph products....

archive/issues_013495.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "The bug was found by Geoff Tims. It has been introduced in #12791, exactly as already spotted in #13091.\n\nAfter loops and multiple edges, I begin to hate directed graphs now.\n\nI *HATE* to see Sage return wrong answers. HATE it.\n\nNathann\n\nAPPLY:\n* [attachment: trac_13699.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)\n* [attachment: trac_13699-edge_iterators.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)\n\n\nCC:  @dcoudert\n\nReviewer: **David Coudert**\n\nAuthor: **Nathann Cohen, David Coudert**\n\nMerged: **sage-5.5.rc0**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13699_\n\n",
    "closed_at": "2012-11-17T08:56:22Z",
    "created_at": "2012-11-11T01:10:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Another bug in graph products....",
    "type": "issue",
    "updated_at": "2012-11-17T08:56:22Z",
    "url": "https://github.com/sagemath/sage/issues/13699",
    "user": "https://github.com/nathanncohen"
}
```
The bug was found by Geoff Tims. It has been introduced in #12791, exactly as already spotted in #13091.

After loops and multiple edges, I begin to hate directed graphs now.

I *HATE* to see Sage return wrong answers. HATE it.

Nathann

APPLY:
* [attachment: trac_13699.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)
* [attachment: trac_13699-edge_iterators.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)


CC:  @dcoudert

Reviewer: **David Coudert**

Author: **Nathann Cohen, David Coudert**

Merged: **sage-5.5.rc0**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/13699_





---

archive/issue_events_192723.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "milestone_number": null,
    "milestone_title": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192723"
}
```



---

archive/issue_events_192724.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192724"
}
```



---

archive/issue_events_192725.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192725"
}
```



---

archive/issue_events_192726.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192726"
}
```



---

archive/issue_events_192727.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192727"
}
```



---

archive/issue_events_192728.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192728"
}
```



---

archive/issue_events_192729.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2012-11-11T01:10:59Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192729"
}
```



---

archive/issue_comments_160860.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI re-read the other products changed by #12791. They look fine.\n\nGod, I HATE it.",
    "created_at": "2012-11-11T01:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160860",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

I re-read the other products changed by #12791. They look fine.

God, I HATE it.



---

archive/issue_comments_160861.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[trac_13699.patch.gz](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)**",
    "created_at": "2012-11-11T01:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160861",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[trac_13699.patch.gz](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)**



---

archive/issue_events_192730.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T01:23:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192730"
}
```



---

archive/issue_events_192731.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-11-11T09:10:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192731"
}
```



---

archive/issue_events_192732.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-11-11T09:10:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192732"
}
```



---

archive/issue_comments_160862.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2012-11-11T09:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160862",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_160863.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSorry about that. It means that the doctests were not sufficient to identify the error.\n\nThe patch is working, passes all tests, and the documentation is correctly build.\nHowever, could you add an extra doctest to check that strong product is the union of tensor and cartesian products. This is working correctly with this patch but not without this patch.\n\n\nSomething else: I'm pretty sure that this part https://github.com/sagemath/sage/files/ticket12791/trac_12791-edge-iterator.patch.gz of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.",
    "created_at": "2012-11-11T09:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160863",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Sorry about that. It means that the doctests were not sufficient to identify the error.

The patch is working, passes all tests, and the documentation is correctly build.
However, could you add an extra doctest to check that strong product is the union of tensor and cartesian products. This is working correctly with this patch but not without this patch.


Something else: I'm pretty sure that this part https://github.com/sagemath/sage/files/ticket12791/trac_12791-edge-iterator.patch.gz of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.



---

archive/issue_comments_160864.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nPatch updated.\n\n> Something else: I'm pretty sure that this part https://github.com/sagemath/sage/files/ticket12791/trac_12791-edge-iterator.patch.gz of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.\n\nYep, it hasn't. Well, the only thing to do is to ask Jeroen I guess.\n\nNathann",
    "created_at": "2012-11-11T10:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160864",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Patch updated.

> Something else: I'm pretty sure that this part https://github.com/sagemath/sage/files/ticket12791/trac_12791-edge-iterator.patch.gz of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.

Yep, it hasn't. Well, the only thing to do is to ask Jeroen I guess.

Nathann



---

archive/issue_events_192733.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T10:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192733"
}
```



---

archive/issue_events_192734.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2012-11-11T10:30:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192734"
}
```



---

archive/issue_comments_160865.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,8 @@\n I *HATE* to see Sage return wrong answers. HATE it.\n \n Nathann\n+\n+APPLY:\n+* [attachment: trac_13699.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)\n+* [attachment: trac_13699-edge_iterators.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)\n+\n``````\n",
    "created_at": "2012-11-11T10:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160865",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,8 @@
 I *HATE* to see Sage return wrong answers. HATE it.
 
 Nathann
+
+APPLY:
+* [attachment: trac_13699.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699.patch.gz)
+* [attachment: trac_13699-edge_iterators.patch](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)
+
``````




---

archive/issue_comments_160866.json:
```json
{
    "body": "Changed author from **Nathann Cohen** to **Nathann Cohen, David Coudert**",
    "created_at": "2012-11-11T10:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160866",
    "user": "https://github.com/nathanncohen"
}
```

Changed author from **Nathann Cohen** to **Nathann Cohen, David Coudert**



---

archive/issue_comments_160867.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAttachment: **[trac_13699-edge_iterators.patch.gz](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)**\n\nThe third patch from #12791, which hasnot been merged into Sage, could not be applied anymore after this patch. I just rebased it on top of this ticket and added after trac_13699.patch.\n\nNathann",
    "created_at": "2012-11-11T10:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160867",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Attachment: **[trac_13699-edge_iterators.patch.gz](https://github.com/sagemath/sage/files/ticket13699/trac_13699-edge_iterators.patch.gz)**

The third patch from #12791, which hasnot been merged into Sage, could not be applied anymore after this patch. I just rebased it on top of this ticket and added after trac_13699.patch.

Nathann



---

archive/issue_comments_160868.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWell, no need to ask Jeroen anymore. I had begun to send him an email, but as the file needed to be rebased anyway...`:-)`\n\nNathann",
    "created_at": "2012-11-11T10:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160868",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Well, no need to ask Jeroen anymore. I had begun to send him an email, but as the file needed to be rebased anyway...`:-)`

Nathann



---

archive/issue_events_192735.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-11-11T11:02:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192735"
}
```



---

archive/issue_events_192736.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2012-11-11T11:02:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192736"
}
```



---

archive/issue_comments_160869.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks Nathann. It's now working properly.",
    "created_at": "2012-11-11T11:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160869",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks Nathann. It's now working properly.



---

archive/issue_events_192737.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-17T08:56:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192737"
}
```



---

archive/issue_events_192738.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-17T08:56:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13699#event-192738"
}
```



---

archive/issue_comments_160870.json:
```json
{
    "body": "Merged: **sage-5.5.rc0**",
    "created_at": "2012-11-17T08:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13699#issuecomment-160870",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.5.rc0**
