# Issue 13699: Another bug in graph products....

archive/issues_013495.json:
```json
{
    "body": "The bug was found by Geoff Tims. It has been introduced in #12791, exactly as already spotted in #13091.\n\nAfter loops and multiple edges, I begin to hate directed graphs now.\n\nI *HATE* to see Sage return wrong answers. HATE it.\n\nNathann\n\nAPPLY:\n* [attachment:trac_13699.patch]\n* [attachment:trac_13699-edge_iterators.patch]\n\n\nAssignee: jason, ncohen, rlm\n\nCC:  @dcoudert\n\nReviewer: David Coudert\n\nAuthor: Nathann Cohen, David Coudert\n\nMerged: sage-5.5.rc0\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/13699\n\n",
    "closed_at": "2012-11-17T08:56:22Z",
    "created_at": "2012-11-11T01:10:59Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.5",
    "title": "Another bug in graph products....",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13699",
    "user": "https://github.com/nathanncohen"
}
```
The bug was found by Geoff Tims. It has been introduced in #12791, exactly as already spotted in #13091.

After loops and multiple edges, I begin to hate directed graphs now.

I *HATE* to see Sage return wrong answers. HATE it.

Nathann

APPLY:
* [attachment:trac_13699.patch]
* [attachment:trac_13699-edge_iterators.patch]


Assignee: jason, ncohen, rlm

CC:  @dcoudert

Reviewer: David Coudert

Author: Nathann Cohen, David Coudert

Merged: sage-5.5.rc0

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/13699





---

archive/issue_comments_212578.json:
```json
{
    "body": "<a id='comment:1'></a>\nI re-read the other products changed by #12791. They look fine.\n\nGod, I HATE it.",
    "created_at": "2012-11-11T01:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212578",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
I re-read the other products changed by #12791. They look fine.

God, I HATE it.



---

archive/issue_comments_212579.json:
```json
{
    "body": "<a id='comment:2'></a>\nAttachment [trac_13699.patch](tarball://root/attachments/some-uuid/ticket13699/trac_13699.patch) by @nathanncohen created at 2012-11-11 01:23:03",
    "created_at": "2012-11-11T01:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212579",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
Attachment [trac_13699.patch](tarball://root/attachments/some-uuid/ticket13699/trac_13699.patch) by @nathanncohen created at 2012-11-11 01:23:03



---

archive/issue_comments_212580.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-11T01:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212580",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_212581.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-11T09:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212581",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_212582.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2012-11-11T09:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212582",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_212583.json:
```json
{
    "body": "<a id='comment:3'></a>\nSorry about that. It means that the doctests were not sufficient to identify the error.\n\nThe patch is working, passes all tests, and the documentation is correctly build.\nHowever, could you add an extra doctest to check that strong product is the union of tensor and cartesian products. This is working correctly with this patch but not without this patch.\n\n\nSomething else: I'm pretty sure that this part http://trac.sagemath.org/sage_trac/attachment/ticket/12791/trac_12791-edge-iterator.patch of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.",
    "created_at": "2012-11-11T09:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212583",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
Sorry about that. It means that the doctests were not sufficient to identify the error.

The patch is working, passes all tests, and the documentation is correctly build.
However, could you add an extra doctest to check that strong product is the union of tensor and cartesian products. This is working correctly with this patch but not without this patch.


Something else: I'm pretty sure that this part http://trac.sagemath.org/sage_trac/attachment/ticket/12791/trac_12791-edge-iterator.patch of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.



---

archive/issue_comments_212584.json:
```json
{
    "body": "<a id='comment:4'></a>\nPatch updated.\n\n> Something else: I'm pretty sure that this part http://trac.sagemath.org/sage_trac/attachment/ticket/12791/trac_12791-edge-iterator.patch of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.\n\n\nYep, it hasn't. Well, the only thing to do is to ask Jeroen I guess.\n\nNathann",
    "created_at": "2012-11-11T10:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212584",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Patch updated.

> Something else: I'm pretty sure that this part http://trac.sagemath.org/sage_trac/attachment/ticket/12791/trac_12791-edge-iterator.patch of patch #12791 has not been included in Sage since most of the graph product functions are without iterators. Don't know what to do.


Yep, it hasn't. Well, the only thing to do is to ask Jeroen I guess.

Nathann



---

archive/issue_comments_212585.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-11T10:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212585",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_212586.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,8 @@\n I *HATE* to see Sage return wrong answers. HATE it.\n \n Nathann\n+\n+APPLY:\n+* [attachment:trac_13699.patch]\n+* [attachment:trac_13699-edge_iterators.patch]\n+\n``````\n",
    "created_at": "2012-11-11T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212586",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,8 @@
 I *HATE* to see Sage return wrong answers. HATE it.
 
 Nathann
+
+APPLY:
+* [attachment:trac_13699.patch]
+* [attachment:trac_13699-edge_iterators.patch]
+
``````




---

archive/issue_comments_212587.json:
```json
{
    "body": "Changing author from \"Nathann Cohen\" to \"Nathann Cohen, David Coudert\"",
    "created_at": "2012-11-11T10:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212587",
    "user": "https://github.com/nathanncohen"
}
```

Changing author from "Nathann Cohen" to "Nathann Cohen, David Coudert"



---

archive/issue_comments_212588.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [trac_13699-edge_iterators.patch](tarball://root/attachments/some-uuid/ticket13699/trac_13699-edge_iterators.patch) by @nathanncohen created at 2012-11-11 10:40:03\n\nThe third patch from #12791, which hasnot been merged into Sage, could not be applied anymore after this patch. I just rebased it on top of this ticket and added after trac_13699.patch.\n\nNathann",
    "created_at": "2012-11-11T10:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212588",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Attachment [trac_13699-edge_iterators.patch](tarball://root/attachments/some-uuid/ticket13699/trac_13699-edge_iterators.patch) by @nathanncohen created at 2012-11-11 10:40:03

The third patch from #12791, which hasnot been merged into Sage, could not be applied anymore after this patch. I just rebased it on top of this ticket and added after trac_13699.patch.

Nathann



---

archive/issue_comments_212589.json:
```json
{
    "body": "<a id='comment:7'></a>\nWell, no need to ask Jeroen anymore. I had begun to send him an email, but as the file needed to be rebased anyway...`:-)`\n\nNathann",
    "created_at": "2012-11-11T10:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212589",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
Well, no need to ask Jeroen anymore. I had begun to send him an email, but as the file needed to be rebased anyway...`:-)`

Nathann



---

archive/issue_comments_212590.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-11T11:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212590",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_212591.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks Nathann. It's now working properly.",
    "created_at": "2012-11-11T11:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212591",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
Thanks Nathann. It's now working properly.



---

archive/issue_events_044465.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-17T08:56:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13699#event-44465"
}
```



---

archive/issue_comments_212592.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-5.5.rc0\"",
    "created_at": "2012-11-17T08:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212592",
    "user": "https://github.com/jdemeyer"
}
```

Changing merged from "" to "sage-5.5.rc0"



---

archive/issue_comments_212593.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-17T08:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13699#issuecomment-212593",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
