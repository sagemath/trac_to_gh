# Issue 13137: Upgrade MPIR to 2.6.0

archive/issues_012965.json:
```json
{
    "assignees": [],
    "body": "As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.\nUpgrading to 2.6.0 fixes both issues.\n\nThis requires the fixed LinBox spkg from #13755.\n\n**Apply:**\n* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.\n\n**New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)\n\n**md5sum:** `ec21b55dce699d3c8ddf0492e1413107  mpir-2.6.0.p0.spkg`\n\n### mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013)\n* Trac #13137: Update to MPIR 2.6.0.\n* Modify `spkg-install` to rename `*,asm` files to `*.asm` files.\n* Remove `-Wl,-z,noexecstack` fix which has been integrated upstream.\n* Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.\n\n### mpir-2.5.2.p0 (John Palmieri, 3 October 2012)\n* Trac #13137: Update to MPIR 2.5.2.\n* Remove the patch `patches/yasm__tools__re2c__code.c.patch`.\n* Do not use clang, which fails to compile MPIR, on OS X.\n\n### mpir-2.4.0.p7 (Karl-Dieter Crisman, Jean-Pierre Flori, 1 August 2012)\n* Trac #12115: let MPIR build on Cygwin.\n* Only build the shared version of the library on Cygwin.\n* Export `ABI=32` on Cygwin.\n\nDepends on #13755\n\nCC:  @jpflori\n\nKeywords: **mpir spkg**\n\nReviewer: **Jeroen Demeyer, Leif Leonhardy, John Palmieri, R. Andrew Ohana, Karl-Dieter Crisman**\n\nAuthor: **John Palmieri, Jean-Pierre Flori, Karl-Dieter Crisman**\n\nMerged: **sage-5.7.beta0**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13137_\n\n",
    "closed_at": "2013-01-21T21:07:23Z",
    "created_at": "2012-06-19T20:32:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade MPIR to 2.6.0",
    "type": "issue",
    "updated_at": "2013-01-21T21:07:23Z",
    "url": "https://github.com/sagemath/sage/issues/13137",
    "user": "https://github.com/jhpalmieri"
}
```
As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.
Upgrading to 2.6.0 fixes both issues.

This requires the fixed LinBox spkg from #13755.

**Apply:**
* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.

**New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)

**md5sum:** `ec21b55dce699d3c8ddf0492e1413107  mpir-2.6.0.p0.spkg`

### mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013)
* Trac #13137: Update to MPIR 2.6.0.
* Modify `spkg-install` to rename `*,asm` files to `*.asm` files.
* Remove `-Wl,-z,noexecstack` fix which has been integrated upstream.
* Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.

### mpir-2.5.2.p0 (John Palmieri, 3 October 2012)
* Trac #13137: Update to MPIR 2.5.2.
* Remove the patch `patches/yasm__tools__re2c__code.c.patch`.
* Do not use clang, which fails to compile MPIR, on OS X.

### mpir-2.4.0.p7 (Karl-Dieter Crisman, Jean-Pierre Flori, 1 August 2012)
* Trac #12115: let MPIR build on Cygwin.
* Only build the shared version of the library on Cygwin.
* Export `ABI=32` on Cygwin.

Depends on #13755

CC:  @jpflori

Keywords: **mpir spkg**

Reviewer: **Jeroen Demeyer, Leif Leonhardy, John Palmieri, R. Andrew Ohana, Karl-Dieter Crisman**

Author: **John Palmieri, Jean-Pierre Flori, Karl-Dieter Crisman**

Merged: **sage-5.7.beta0**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/13137_





---

archive/issue_events_182489.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-06-19T20:32:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182489"
}
```



---

archive/issue_events_182490.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-06-19T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182490"
}
```



---

archive/issue_events_182491.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-06-19T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182491"
}
```



---

archive/issue_events_182492.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-06-19T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182492"
}
```



---

archive/issue_comments_150365.json:
```json
{
    "body": "Attachment: **[trac_13137-stopgap.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz)**\n\nroot repo",
    "created_at": "2012-06-19T20:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150365",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_13137-stopgap.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz)**

root repo



---

archive/issue_comments_150366.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,8 @@\n As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.\n \n+Here is a (preliminary?) spkg: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg).\n+\n+I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.\n+\n+If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.\n+\n``````\n",
    "created_at": "2012-06-19T20:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150366",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,8 @@
 As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.
 
+Here is a (preliminary?) spkg: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg).
+
+I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.
+
+If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.
+
``````




---

archive/issue_events_182493.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-06-19T20:59:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182493"
}
```



---

archive/issue_comments_150367.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2012-06-19T20:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150367",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **John Palmieri**



---

archive/issue_comments_150368.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis causes the libm4rie test suite to fail, as well as breaks the building of linbox (both have the same errors):\n\n```\nIn file included from .../local/include/gmp++/gmp++.h:20:0,\n                 from ../../linbox/integer.h:22,\n                 from ../../linbox/randiter/abstract.h:30,\n                 from ../../linbox/field/abstract.h:32,\n                 from ../../linbox/field/archetype.h:42,\n                 from ../../linbox/vector/vector-traits.h:35,\n                 from ../../linbox/blackbox/factory.h:17,\n                 from ../../linbox/matrix/sparse.h:54,\n                 from ../../linbox/blackbox/sparse.h:41,\n                 from linbox-sage.C:35:\n.../local/include/gmpxx.h:1566:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)\u2019 cannot be overloaded\n.../local/include/gmpxx.h:1562:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)\u2019\n.../local/include/gmpxx.h:1567:3: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)\u2019 cannot be overloaded\n.../local/include/gmpxx.h:1563:3: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)\u2019\n.../local/include/gmpxx.h:1635:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)\u2019 cannot be overloaded\n.../local/include/gmpxx.h:1629:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)\u2019\n.../local/include/gmpxx.h:1636:16: error: \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)\u2019 cannot be overloaded\n.../local/include/gmpxx.h:1631:16: error: with \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)\u2019\n.../local/include/gmpxx.h: In constructor \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)\u2019:\n.../local/include/gmpxx.h:1566:49: error: \u2018mpz_init_set_sx\u2019 was not declared in this scope\n.../local/include/gmpxx.h: In constructor \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)\u2019:\n.../local/include/gmpxx.h:1567:50: error: \u2018mpz_init_set_ux\u2019 was not declared in this scope\n.../local/include/gmpxx.h: In member function \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)\u2019:\n.../local/include/gmpxx.h:1635:56: error: \u2018mpz_set_sx\u2019 was not declared in this scope\n.../local/include/gmpxx.h: In member function \u2018__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)\u2019:\n.../local/include/gmpxx.h:1636:57: error: \u2018mpz_set_ux\u2019 was not declared in this scope\n.../local/include/gmpxx.h: In member function \u2018intmax_t __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::get_sx() const\u2019:\n.../local/include/gmpxx.h:1677:49: error: \u2018mpz_get_sx\u2019 was not declared in this scope\n.../local/include/gmpxx.h: In member function \u2018uintmax_t __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::get_ux() const\u2019:\n.../local/include/gmpxx.h:1678:50: error: \u2018mpz_get_ux\u2019 was not declared in this scope\n```\n\nThere may be other issues, but I haven't encountered them yet.",
    "created_at": "2012-06-20T03:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150368",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:2" align="right">comment:2</div>

This causes the libm4rie test suite to fail, as well as breaks the building of linbox (both have the same errors):

```
In file included from .../local/include/gmp++/gmp++.h:20:0,
                 from ../../linbox/integer.h:22,
                 from ../../linbox/randiter/abstract.h:30,
                 from ../../linbox/field/abstract.h:32,
                 from ../../linbox/field/archetype.h:42,
                 from ../../linbox/vector/vector-traits.h:35,
                 from ../../linbox/blackbox/factory.h:17,
                 from ../../linbox/matrix/sparse.h:54,
                 from ../../linbox/blackbox/sparse.h:41,
                 from linbox-sage.C:35:
.../local/include/gmpxx.h:1566:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)’ cannot be overloaded
.../local/include/gmpxx.h:1562:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long int)’
.../local/include/gmpxx.h:1567:3: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)’ cannot be overloaded
.../local/include/gmpxx.h:1563:3: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(long unsigned int)’
.../local/include/gmpxx.h:1635:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)’ cannot be overloaded
.../local/include/gmpxx.h:1629:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long int)’
.../local/include/gmpxx.h:1636:16: error: ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)’ cannot be overloaded
.../local/include/gmpxx.h:1631:16: error: with ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(long unsigned int)’
.../local/include/gmpxx.h: In constructor ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(intmax_t)’:
.../local/include/gmpxx.h:1566:49: error: ‘mpz_init_set_sx’ was not declared in this scope
.../local/include/gmpxx.h: In constructor ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>::__gmp_expr(uintmax_t)’:
.../local/include/gmpxx.h:1567:50: error: ‘mpz_init_set_ux’ was not declared in this scope
.../local/include/gmpxx.h: In member function ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(intmax_t)’:
.../local/include/gmpxx.h:1635:56: error: ‘mpz_set_sx’ was not declared in this scope
.../local/include/gmpxx.h: In member function ‘__gmp_expr<__mpz_struct [1], __mpz_struct [1]>& __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::operator=(uintmax_t)’:
.../local/include/gmpxx.h:1636:57: error: ‘mpz_set_ux’ was not declared in this scope
.../local/include/gmpxx.h: In member function ‘intmax_t __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::get_sx() const’:
.../local/include/gmpxx.h:1677:49: error: ‘mpz_get_sx’ was not declared in this scope
.../local/include/gmpxx.h: In member function ‘uintmax_t __gmp_expr<__mpz_struct [1], __mpz_struct [1]>::get_ux() const’:
.../local/include/gmpxx.h:1678:50: error: ‘mpz_get_ux’ was not declared in this scope
```

There may be other issues, but I haven't encountered them yet.



---

archive/issue_comments_150369.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThere is an mpir-2.4.0.p6 at #12751, probably the new spkg should be based on that.\n\nAlso, I guess the patch `patches/yasm__tools__re2c__code.c.patch` can be removed completely (then also remove it from `SPKG.txt`)",
    "created_at": "2012-06-20T07:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150369",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

There is an mpir-2.4.0.p6 at #12751, probably the new spkg should be based on that.

Also, I guess the patch `patches/yasm__tools__re2c__code.c.patch` can be removed completely (then also remove it from `SPKG.txt`)



---

archive/issue_comments_150370.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2012-08-12T21:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150370",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_182494.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-12T21:43:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182494"
}
```



---

archive/issue_events_182495.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-12T21:43:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182495"
}
```



---

archive/issue_comments_150371.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSee comment [comment:3]\n\n#12751 has been merged, so this spkg must certainly be rebased.",
    "created_at": "2012-08-12T21:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150371",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

See comment [comment:3]

#12751 has been merged, so this spkg must certainly be rebased.



---

archive/issue_comments_150372.json:
```json
{
    "body": "Attachment: **[trac_13137-mpir.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-mpir.patch.gz)**\n\npatch for mpir spkg; for review only",
    "created_at": "2012-08-20T18:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150372",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_13137-mpir.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-mpir.patch.gz)**

patch for mpir spkg; for review only



---

archive/issue_comments_150373.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI've rebased the spkg. I haven't investigated the issues in [the comment above](#comment:2). I'll take a look, but I may not know enough to be able to fix them.",
    "created_at": "2012-08-20T18:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150373",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

I've rebased the spkg. I haven't investigated the issues in [the comment above](#comment:2). I'll take a look, but I may not know enough to be able to fix them.



---

archive/issue_comments_150374.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOn hawk (OpenSolaris): linbox fails to build, as mentioned above, and the new spkg from #12883 doesn't help. libm4rie passes its test suite, though.\n\nOn sage.math (linux, Sage's gcc): the ppl build fails to configure (\"checking which instantiations are enabled... configure: error: invalid instantiation Polyhedron Error configuring the Parma Polyhedra Library.\"). linbox fails to build, and libm4rie fails its test suite.\n\nOn taurus (linux, gcc 4.7.0): same as with sage.math, and also pari fails its test suite.\n\nI'm still building on OS X; I'll report the results when they're available.\n\nI don't know enough to troubleshoot these. If someone else wants to work on this, please go ahead.",
    "created_at": "2012-08-20T21:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150374",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

On hawk (OpenSolaris): linbox fails to build, as mentioned above, and the new spkg from #12883 doesn't help. libm4rie passes its test suite, though.

On sage.math (linux, Sage's gcc): the ppl build fails to configure ("checking which instantiations are enabled... configure: error: invalid instantiation Polyhedron Error configuring the Parma Polyhedra Library."). linbox fails to build, and libm4rie fails its test suite.

On taurus (linux, gcc 4.7.0): same as with sage.math, and also pari fails its test suite.

I'm still building on OS X; I'll report the results when they're available.

I don't know enough to troubleshoot these. If someone else wants to work on this, please go ahead.



---

archive/issue_comments_150375.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOS X is similar to sage.math: linbox and ppl fail to build, libm4rie fails its test suite.",
    "created_at": "2012-08-21T00:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150375",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

OS X is similar to sage.math: linbox and ppl fail to build, libm4rie fails its test suite.



---

archive/issue_comments_150376.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI created an spkg out of the just-released version 2.5.2. It was more or less straightforward, except that it refuses to build using clang on OS X, so spkg-install required a little modification.\n\nWith this spkg, givaro no longer builds on sage.math or OS X, and I am seeing the same problems with ppl. Since givaro won't build, I'm not even getting to libm4rie or linbox.",
    "created_at": "2012-10-03T21:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150376",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I created an spkg out of the just-released version 2.5.2. It was more or less straightforward, except that it refuses to build using clang on OS X, so spkg-install required a little modification.

With this spkg, givaro no longer builds on sage.math or OS X, and I am seeing the same problems with ppl. Since givaro won't build, I'm not even getting to libm4rie or linbox.



---

archive/issue_comments_150377.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,7 @@\n As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.\n \n-Here is a (preliminary?) spkg: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg).\n+Here is are (preliminary?) spkgs: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg) and [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg).\n \n I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.\n \n If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.\n-\n``````\n",
    "created_at": "2012-10-03T21:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150377",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,7 @@
 As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.
 
-Here is a (preliminary?) spkg: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg).
+Here is are (preliminary?) spkgs: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg) and [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg).
 
 I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.
 
 If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.
-
``````




---

archive/issue_comments_150378.json:
```json
{
    "body": "Attachment: **[trac_13137-mpir-2.5.2.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-mpir-2.5.2.patch.gz)**\n\npatch for mpir 2.5.2 spkg",
    "created_at": "2012-10-03T21:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150378",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_13137-mpir-2.5.2.patch.gz](https://github.com/sagemath/sage/files/ticket13137/trac_13137-mpir-2.5.2.patch.gz)**

patch for mpir 2.5.2 spkg



---

archive/issue_comments_150379.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMPIR 2.6.0 is out and will be needed for FLINT 2.3.\nShould we cope with this upgrade here? Or in a subsequent ticket?\n\nBy the way, it would be nice to integrate the easy Cygwin fix of #12115 while upgrading MPIR.",
    "created_at": "2012-11-19T10:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150379",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

MPIR 2.6.0 is out and will be needed for FLINT 2.3.
Should we cope with this upgrade here? Or in a subsequent ticket?

By the way, it would be nice to integrate the easy Cygwin fix of #12115 while upgrading MPIR.



---

archive/issue_comments_150380.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI have no objections to trying to upgrade to 2.6.0 instead of 2.5.2. Maybe it will fix some of the issues mentioned on this ticket. If someone else wants to put together an spkg, please go ahead.",
    "created_at": "2012-11-20T20:56:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150380",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

I have no objections to trying to upgrade to 2.6.0 instead of 2.5.2. Maybe it will fix some of the issues mentioned on this ticket. If someone else wants to put together an spkg, please go ahead.



---

archive/issue_comments_150381.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI gave MPIR 2.6.0 a shot, and the problem with linbox remains.\nThat's really strange, because somehow in gmpxx.h the member function get_sx is defined to invoke the C mpz_get_sx function, conditionally on the fact that stdint.h is included, and the mpz_get_sx is prototyped in mpir.h conditionally on the same fact.\nBut somehow, the mpz_get_sx is not found.\nI'm asking that on mpir-devel as well because I have no clue.\n\nAnyway, these functions are not necessary, so badly removing the definition of the member functions in gmpxx.h let you compile linbox and go on with other bits of Sage, as long as a proper solution is not found.",
    "created_at": "2012-11-25T00:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150381",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12" align="right">comment:12</div>

I gave MPIR 2.6.0 a shot, and the problem with linbox remains.
That's really strange, because somehow in gmpxx.h the member function get_sx is defined to invoke the C mpz_get_sx function, conditionally on the fact that stdint.h is included, and the mpz_get_sx is prototyped in mpir.h conditionally on the same fact.
But somehow, the mpz_get_sx is not found.
I'm asking that on mpir-devel as well because I have no clue.

Anyway, these functions are not necessary, so badly removing the definition of the member functions in gmpxx.h let you compile linbox and go on with other bits of Sage, as long as a proper solution is not found.



---

archive/issue_comments_150382.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nMaybe the problem is that mpir.h gets first included withtout stdint.h inlcuded so that when gmpxx.h gets included mpir.h is not included again and the C functions get_sx and get_ux are not defined.",
    "created_at": "2012-11-25T14:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150382",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

Maybe the problem is that mpir.h gets first included withtout stdint.h inlcuded so that when gmpxx.h gets included mpir.h is not included again and the C functions get_sx and get_ux are not defined.



---

archive/issue_comments_150383.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOk that's it:\n\n```\nIn file included from linbox-sage.C:28:0:\n/home/jp/boulot/sage/sage-5.5.rc0/local/include/gmp.h:1228:17: note: #pragma message: gmp wo stdint\nIn file included from /home/jp/boulot/sage/sage-5.5.rc0/local/include/gmp++/gmp++.h:33:0,\n                 from ../../linbox/integer.h:57,\n                 from ../../linbox/randiter/abstract.h:31,\n                 from ../../linbox/field/abstract.h:33,\n                 from ../../linbox/field/archetype.h:49,\n                 from ../../linbox/vector/vector-traits.h:57,\n                 from ../../linbox/blackbox/factory.h:33,\n                 from ../../linbox/matrix/sparse.h:72,\n                 from ../../linbox/blackbox/sparse.h:57,\n                 from linbox-sage.C:38:\n/home/jp/boulot/sage/sage-5.5.rc0/local/include/gmpxx.h:1710:17: note: #pragma message: gmpxx w stdint\n```",
    "created_at": "2012-11-25T14:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150383",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

Ok that's it:

```
In file included from linbox-sage.C:28:0:
/home/jp/boulot/sage/sage-5.5.rc0/local/include/gmp.h:1228:17: note: #pragma message: gmp wo stdint
In file included from /home/jp/boulot/sage/sage-5.5.rc0/local/include/gmp++/gmp++.h:33:0,
                 from ../../linbox/integer.h:57,
                 from ../../linbox/randiter/abstract.h:31,
                 from ../../linbox/field/abstract.h:33,
                 from ../../linbox/field/archetype.h:49,
                 from ../../linbox/vector/vector-traits.h:57,
                 from ../../linbox/blackbox/factory.h:33,
                 from ../../linbox/matrix/sparse.h:72,
                 from ../../linbox/blackbox/sparse.h:57,
                 from linbox-sage.C:38:
/home/jp/boulot/sage/sage-5.5.rc0/local/include/gmpxx.h:1710:17: note: #pragma message: gmpxx w stdint
```



---

archive/issue_comments_150384.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNew spkg at http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg.\nIt also includes the changes from #12115.",
    "created_at": "2012-11-25T15:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150384",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">comment:15</div>

New spkg at http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg.
It also includes the changes from #12115.



---

archive/issue_comments_150385.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOn my linux install (Debian/experimental/gcc 4.7.?) the new MPIR spkg builds and passes its testsuite.\nI've upped a fixed LinBox spkg at #13755 which should get merged with this one.\nI'll now have a look at libm4rie where the problem should be similar.\nI'll also try to build on sage.math.\nI don't have access to skynet, so won't try on more exotic archs.",
    "created_at": "2012-11-25T15:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150385",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">comment:16</div>

On my linux install (Debian/experimental/gcc 4.7.?) the new MPIR spkg builds and passes its testsuite.
I've upped a fixed LinBox spkg at #13755 which should get merged with this one.
I'll now have a look at libm4rie where the problem should be similar.
I'll also try to build on sage.math.
I don't have access to skynet, so won't try on more exotic archs.



---

archive/issue_comments_150386.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWith this ticket and #13755 I have no problem with libm4rie test suite, nor with PPl or pari, on the same setup as before.\nI'm now launching a clean build on sage.math.\n\nAnd by the way, I've not put the clang changes in the spkg yet, as I cannot test if they are still needed.",
    "created_at": "2012-11-25T16:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150386",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

With this ticket and #13755 I have no problem with libm4rie test suite, nor with PPl or pari, on the same setup as before.
I'm now launching a clean build on sage.math.

And by the way, I've not put the clang changes in the spkg yet, as I cannot test if they are still needed.



---

archive/issue_events_182496.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-25T16:04:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "title_is": "upgrade MPIR to 2.6.0",
    "title_was": "upgrade MPIR to 2.5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182496"
}
```



---

archive/issue_comments_150387.json:
```json
{
    "body": "Dependencies: **#13755**",
    "created_at": "2012-11-25T16:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150387",
    "user": "https://github.com/jpflori"
}
```

Dependencies: **#13755**



---

archive/issue_comments_150388.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOn sage.math I get\n\n```\n../../lib/libR.so: undefined reference to `rl_sort_completion_matches'\n```\nwhile building the R spkg.",
    "created_at": "2012-11-25T16:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150388",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

On sage.math I get

```
../../lib/libR.so: undefined reference to `rl_sort_completion_matches'
```
while building the R spkg.



---

archive/issue_comments_150389.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nApart from that the rest seems fine on sage.math (with Sage'gcc spkg).\nMPIR passes its test suite as PARI and libm4rie.",
    "created_at": "2012-11-25T17:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150389",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

Apart from that the rest seems fine on sage.math (with Sage'gcc spkg).
MPIR passes its test suite as PARI and libm4rie.



---

archive/issue_comments_150390.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNo problem with PPl and its testsuite as well (by the way the spkg-check from ppl lacks a nice \"eerything got well, bye\" message).\n\nI'm still confused by the R issue.\nThe problematic symbol is from readline, not sure how MPIR has influence on it.",
    "created_at": "2012-11-25T17:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150390",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">comment:20</div>

No problem with PPl and its testsuite as well (by the way the spkg-check from ppl lacks a nice "eerything got well, bye" message).

I'm still confused by the R issue.
The problematic symbol is from readline, not sure how MPIR has influence on it.



---

archive/issue_comments_150391.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIn fact I get the same R error with a stock sage 5.5.rc0 so this is unrelated as expected.",
    "created_at": "2012-11-25T22:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150391",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:21" align="right">comment:21</div>

In fact I get the same R error with a stock sage 5.5.rc0 so this is unrelated as expected.



---

archive/issue_comments_150392.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe discussion about headers inclusion at mpir-devel can be read at:\nhttps://groups.google.com/d/topic/mpir-devel/m__z0PR_wBw/discussion\n\nAnyway, even if MPIR puts in a solution at some point, I think LinBox must be fixed anyway.\nSo #13755 makes sense and I'll put it as a dependency here.\n\nThe discussion about sage.math.washington.edu failure (which is highly likely to be unrelated):\nhttps://groups.google.com/d/topic/sage-devel/Tmg6nA1eWGk/discussion\n\nI guess what must be done now is to retry some builds on different archs/compilers combinations (to check the clang thing for example) because this spkg is highly sensitive to that, and then we could launch the patchbots (or launch them directly but I don't know how to do that, nor how to get their results), so I put this as need_info now.\n\nWe should also decide what to do with the \"history\" of the spkg.\nFor now, I've based the spkg on the one from #12115, mentionned in SPKG.txt with an hg commit plus an hg tag done by myself (if #12115 gets merged before that one, I guess we'll do a \"proper\" rebasing), then added mentionned of 2.5.2.p0 by John in SPKG.txt but without hg commit or hg tag, and finally mention of 2.6.0.p0 in SPKG.txt with an hg commit but no hg tag, assuming it will be automagically by Jeroen scripts.",
    "created_at": "2012-11-26T12:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150392",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

The discussion about headers inclusion at mpir-devel can be read at:
https://groups.google.com/d/topic/mpir-devel/m__z0PR_wBw/discussion

Anyway, even if MPIR puts in a solution at some point, I think LinBox must be fixed anyway.
So #13755 makes sense and I'll put it as a dependency here.

The discussion about sage.math.washington.edu failure (which is highly likely to be unrelated):
https://groups.google.com/d/topic/sage-devel/Tmg6nA1eWGk/discussion

I guess what must be done now is to retry some builds on different archs/compilers combinations (to check the clang thing for example) because this spkg is highly sensitive to that, and then we could launch the patchbots (or launch them directly but I don't know how to do that, nor how to get their results), so I put this as need_info now.

We should also decide what to do with the "history" of the spkg.
For now, I've based the spkg on the one from #12115, mentionned in SPKG.txt with an hg commit plus an hg tag done by myself (if #12115 gets merged before that one, I guess we'll do a "proper" rebasing), then added mentionned of 2.5.2.p0 by John in SPKG.txt but without hg commit or hg tag, and finally mention of 2.6.0.p0 in SPKG.txt with an hg commit but no hg tag, assuming it will be automagically by Jeroen scripts.



---

archive/issue_comments_150393.json:
```json
{
    "body": "Changed keywords from **mpir** to **mpir spkg**",
    "created_at": "2012-11-26T12:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150393",
    "user": "https://github.com/jpflori"
}
```

Changed keywords from **mpir** to **mpir spkg**



---

archive/issue_events_182497.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-26T12:27:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182497"
}
```



---

archive/issue_events_182498.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-26T12:27:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182498"
}
```



---

archive/issue_comments_150394.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,18 @@\n-As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.\n+As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.\n+Upgrading to 2.6.0 fixes both issue.\n \n-Here is are (preliminary?) spkgs: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg) and [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg).\n+Here are some (preliminary?) spkgs of MPIR version since 2.4.x:\n+* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg),\n+* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg),\n+* [http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg) (based on Cygwin fix of #12115).\n \n-I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.\n+The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.\n \n-If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.\n+Current concerns:\n+* `quote_asm.patch` patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.\n+* compilation with clang might fail on OSX\n+\n+In addition to using one of the above spkg,\n+apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).\n+\n+This also requires the fixed LinBox spkg from #13755.\n``````\n",
    "created_at": "2012-11-26T12:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150394",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,18 @@
-As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, and upgrading should fix this.
+As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.
+Upgrading to 2.6.0 fixes both issue.
 
-Here is are (preliminary?) spkgs: [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg) and [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg).
+Here are some (preliminary?) spkgs of MPIR version since 2.4.x:
+* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg),
+* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg),
+* [http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg) (based on Cygwin fix of #12115).
 
-I upgraded to version 2.5.1, removed files as described by SPKG.txt, and rebased the patches. One question about  `quote_asm.patch`: it patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.
+The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.
 
-If the stopgap at #13138 is applied, then [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) will need to be applied (to the root repo) to undo it.
+Current concerns:
+* `quote_asm.patch` patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.
+* compilation with clang might fail on OSX
+
+In addition to using one of the above spkg,
+apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).
+
+This also requires the fixed LinBox spkg from #13755.
``````




---

archive/issue_comments_150395.json:
```json
{
    "body": "Changed author from **John Palmieri** to **John Palmieri, Jean-Pierre Flori**",
    "created_at": "2012-11-26T12:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150395",
    "user": "https://github.com/jpflori"
}
```

Changed author from **John Palmieri** to **John Palmieri, Jean-Pierre Flori**



---

archive/issue_comments_150396.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOn my OS X 10.8 box, I have the same problems with clang. Trying again with the clang changes from my earlier spkg applied to jpflori's spkg: it builds and passes self-tests. Now I'm proceeding with the rest of the Sage build. I'm also trying it on the skynet machine taurus (linux, GCC 4.7.0, referred to [above](#comment:7)). I'll post results when I know more.",
    "created_at": "2012-11-28T23:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150396",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

On my OS X 10.8 box, I have the same problems with clang. Trying again with the clang changes from my earlier spkg applied to jpflori's spkg: it builds and passes self-tests. Now I'm proceeding with the rest of the Sage build. I'm also trying it on the skynet machine taurus (linux, GCC 4.7.0, referred to [above](#comment:7)). I'll post results when I know more.



---

archive/issue_comments_150397.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for the report, I'll put the clang patch back in and report upstream.",
    "created_at": "2012-11-28T23:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150397",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for the report, I'll put the clang patch back in and report upstream.



---

archive/issue_comments_150398.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nNo problems on either OS X (with modifications for clang) or taurus: with `SAGE_CHECK=yes`, all packages built and passed their tests. I ran `make ptestlong` and all tests passed on both platforms.\n\nI think that this is probably ready to go, once the clang changes are reinstated. I also think what you've done with the history is fine.",
    "created_at": "2012-11-29T06:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150398",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">comment:25</div>

No problems on either OS X (with modifications for clang) or taurus: with `SAGE_CHECK=yes`, all packages built and passed their tests. I ran `make ptestlong` and all tests passed on both platforms.

I think that this is probably ready to go, once the clang changes are reinstated. I also think what you've done with the history is fine.



---

archive/issue_comments_150399.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,10 +8,6 @@\n \n The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.\n \n-Current concerns:\n-* `quote_asm.patch` patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.\n-* compilation with clang might fail on OSX\n-\n In addition to using one of the above spkg,\n apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).\n \n``````\n",
    "created_at": "2012-11-29T10:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150399",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,10 +8,6 @@
 
 The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.
 
-Current concerns:
-* `quote_asm.patch` patches files of the form `*.asm`. Should it also address files of the form `*,asm`? There are two such: `mpn/x86/p6/addmul_1,asm` and `mpn/x86/p6/submul_1,asm`.
-* compilation with clang might fail on OSX
-
 In addition to using one of the above spkg,
 apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).
 
``````




---

archive/issue_comments_150400.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOk, I'm putting back the clang stuff.\n\nAbout the ,asm files, I think it's just a typo introduced here:\nhttps://github.com/wbhart/mpir/commit/295967cd2b11f7b964283c1e1bf8dd154e388af4\nWaiting for confirmation here:\nhttps://groups.google.com/d/topic/mpir-devel/0uhskYIbRII/discussion\nAs I have little doubt about this I'll add a patch to move the files and update the quote_patch patch.\n\n(I cannot put the ticket directly as needs_work, so I'm leaving it in its current state and will put it as needs_review when the new spkg is posted.)",
    "created_at": "2012-11-29T10:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150400",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:26" align="right">comment:26</div>

Ok, I'm putting back the clang stuff.

About the ,asm files, I think it's just a typo introduced here:
https://github.com/wbhart/mpir/commit/295967cd2b11f7b964283c1e1bf8dd154e388af4
Waiting for confirmation here:
https://groups.google.com/d/topic/mpir-devel/0uhskYIbRII/discussion
As I have little doubt about this I'll add a patch to move the files and update the quote_patch patch.

(I cannot put the ticket directly as needs_work, so I'm leaving it in its current state and will put it as needs_review when the new spkg is posted.)



---

archive/issue_comments_150401.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAs it seems diff/patch lack the ability of properly detecting filename changes, I propose to manually move the ,asm files to .asm files before patching.\nThis takes something like ten lines rather than more 1264 with a patch file which just - the *,asm and + the *.asm ones.\n\nWith the mv solution, I intend to hardcode the filenames in spkg-install, anyway this should get upstream and this part can (and will have to) then be removed.\nI'll report the quoting part as well while I'm at it.\n\nDoes this seem ok to everyone?",
    "created_at": "2012-11-29T11:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150401",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:27" align="right">comment:27</div>

As it seems diff/patch lack the ability of properly detecting filename changes, I propose to manually move the ,asm files to .asm files before patching.
This takes something like ten lines rather than more 1264 with a patch file which just - the *,asm and + the *.asm ones.

With the mv solution, I intend to hardcode the filenames in spkg-install, anyway this should get upstream and this part can (and will have to) then be removed.
I'll report the quoting part as well while I'm at it.

Does this seem ok to everyone?



---

archive/issue_comments_150402.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI've upped a new spkg.\nIt includes the fix mentioned above and I updated the patches in a minimal way in order to minimize mercurial history.\nI've also added a commit and a tag for 2.5.2.p0 spkg.\n\nI've asked about the quoting stuff on mpir-devel and it should get integrated upstream at some point.",
    "created_at": "2012-11-29T13:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150402",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:28" align="right">comment:28</div>

I've upped a new spkg.
It includes the fix mentioned above and I updated the patches in a minimal way in order to minimize mercurial history.
I've also added a commit and a tag for 2.5.2.p0 spkg.

I've asked about the quoting stuff on mpir-devel and it should get integrated upstream at some point.



---

archive/issue_events_182499.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T13:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182499"
}
```



---

archive/issue_events_182500.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T13:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182500"
}
```



---

archive/issue_events_182501.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T13:30:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182501"
}
```



---

archive/issue_events_182502.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T13:30:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182502"
}
```



---

archive/issue_comments_150403.json:
```json
{
    "body": "Work Issues: **update the remove_32...**",
    "created_at": "2012-11-29T13:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150403",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **update the remove_32...**



---

archive/issue_comments_150404.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOops, it seems we should update the remove_32_bit_assembly_code function in spkg-install because the asm files names changed.\nMaybe there are new files as well which need removing, not sure about that.",
    "created_at": "2012-11-29T13:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150404",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Oops, it seems we should update the remove_32_bit_assembly_code function in spkg-install because the asm files names changed.
Maybe there are new files as well which need removing, not sure about that.



---

archive/issue_comments_150405.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe files themselves does not seem to have been modified so the problem must still exist.\nI was not able to find relevant information on what kind of instructions cause this problem at #5315, so if this needs to be extended to new files (in addition to the renamed files).\n\n\nBut who still uses such old computers...",
    "created_at": "2012-11-29T17:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150405",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

The files themselves does not seem to have been modified so the problem must still exist.
I was not able to find relevant information on what kind of instructions cause this problem at #5315, so if this needs to be extended to new files (in addition to the renamed files).


But who still uses such old computers...



---

archive/issue_comments_150406.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOk it seems this is because of `@`GOT.\nSee http://lists.apple.com/archives/scitech/2006/Dec/msg00004.html which is more informative.\n\nBut now MPIR ships with YASM so I guess all of this is not needed anymore?\nCould someone who has access to a OS X 10.4 running on 64 bits intel processor test the spkg without the call to remove_32... function?",
    "created_at": "2012-11-29T17:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150406",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

Ok it seems this is because of `@`GOT.
See http://lists.apple.com/archives/scitech/2006/Dec/msg00004.html which is more informative.

But now MPIR ships with YASM so I guess all of this is not needed anymore?
Could someone who has access to a OS X 10.4 running on 64 bits intel processor test the spkg without the call to remove_32... function?



---

archive/issue_comments_150407.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThinking about it, I definitely think the fix is not needed anymore, or at least nobody encountered it for a couple of years because we don't delete the renamed problematic files since a couple of years.\n(the rename commit is here:\nhttps://github.com/wbhart/mpir/commit/5dad96491ba4d63613539a3124a7b63721bf4892\n)",
    "created_at": "2012-11-29T17:51:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150407",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

Thinking about it, I definitely think the fix is not needed anymore, or at least nobody encountered it for a couple of years because we don't delete the renamed problematic files since a couple of years.
(the rename commit is here:
https://github.com/wbhart/mpir/commit/5dad96491ba4d63613539a3124a7b63721bf4892
)



---

archive/issue_comments_150408.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOk and according to https://github.com/sagemath/sage/issues/10188#comment:19\nthe noexecstack thing is upstream now.",
    "created_at": "2012-11-29T17:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150408",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:33" align="right">comment:33</div>

Ok and according to https://github.com/sagemath/sage/issues/10188#comment:19
the noexecstack thing is upstream now.



---

archive/issue_events_182503.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T18:06:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182503"
}
```



---

archive/issue_events_182504.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-11-29T18:06:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182504"
}
```



---

archive/issue_comments_150409.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nSo goes an updated spkg removing all the (hopefully) obsolete fixes.\n\nTo get the old one replace spkg by bak at the end of the file url.",
    "created_at": "2012-11-29T18:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150409",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:34" align="right">comment:34</div>

So goes an updated spkg removing all the (hopefully) obsolete fixes.

To get the old one replace spkg by bak at the end of the file url.



---

archive/issue_comments_150410.json:
```json
{
    "body": "Changed work issues from **update the remove_32...** to none",
    "created_at": "2012-11-29T18:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150410",
    "user": "https://github.com/jpflori"
}
```

Changed work issues from **update the remove_32...** to none



---

archive/issue_comments_150411.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nA minor comment: in spkg-install, perhaps the following change would be a good idea:\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -19,8 +19,7 @@ cd src/\n # detecting filename changes. See Trac #13137.\n # This fix can (and will have to) be removed once integrated upstream.\n echo \"Renaming *,asm files to *.asm...\"\n-mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm\n-mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm\n+mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm && mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm\n if [ $? -ne 0 ]; then\n     echo >&2 \"Error: moving *,asm files failed.\"\n     exit 1\n```",
    "created_at": "2012-11-29T19:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150411",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

A minor comment: in spkg-install, perhaps the following change would be a good idea:

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -19,8 +19,7 @@ cd src/
 # detecting filename changes. See Trac #13137.
 # This fix can (and will have to) be removed once integrated upstream.
 echo "Renaming *,asm files to *.asm..."
-mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm
-mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm
+mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm && mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm
 if [ $? -ne 0 ]; then
     echo >&2 "Error: moving *,asm files failed."
     exit 1
```



---

archive/issue_comments_150412.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nUpdated spkg at same address.",
    "created_at": "2012-11-29T19:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150412",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:36" align="right">comment:36</div>

Updated spkg at same address.



---

archive/issue_comments_150413.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThis also builds and passes tests on skynet machine iras, which often has problems not found on other platforms. (Actually, gsl fails its self-tests, but it does that with the old mpir and linbox spkgs, so no regression there. I couldn't find a ticket for this, though...)\n\nSo I think this is pretty close. What else should be checked?",
    "created_at": "2012-11-30T17:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150413",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:37" align="right">comment:37</div>

This also builds and passes tests on skynet machine iras, which often has problems not found on other platforms. (Actually, gsl fails its self-tests, but it does that with the old mpir and linbox spkgs, so no regression there. I couldn't find a ticket for this, though...)

So I think this is pretty close. What else should be checked?



---

archive/issue_comments_150414.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nMaybe explicitely run tests on Fedora where the fix I removed is supposed to not be needed anymore.\nApart from that and the OSX 10.4 (and or 10.5) on 64 intel processors (not sure it will actually be tested by anyone so let's forget OS 10.4 unless someone raises its hand), I guess this is it if you agree with all the changes made to the spkg (I do agree with the one you did before).",
    "created_at": "2012-11-30T17:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150414",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:38" align="right">comment:38</div>

Maybe explicitely run tests on Fedora where the fix I removed is supposed to not be needed anymore.
Apart from that and the OSX 10.4 (and or 10.5) on 64 intel processors (not sure it will actually be tested by anyone so let's forget OS 10.4 unless someone raises its hand), I guess this is it if you agree with all the changes made to the spkg (I do agree with the one you did before).



---

archive/issue_comments_150415.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nBy the way, I (potentially again) reported all the patches we still ship upstream and they should get integrated at some point.",
    "created_at": "2012-11-30T17:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150415",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:39" align="right">comment:39</div>

By the way, I (potentially again) reported all the patches we still ship upstream and they should get integrated at some point.



---

archive/issue_comments_150416.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReintroduced fix for Mac OS 10.4 on intel hardware as it's still needed.\nSame address as before.",
    "created_at": "2012-12-03T10:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150416",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:40" align="right">comment:40</div>

Reintroduced fix for Mac OS 10.4 on intel hardware as it's still needed.
Same address as before.



---

archive/issue_events_182505.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-03T10:49:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182505"
}
```



---

archive/issue_events_182506.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-03T10:49:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182506"
}
```



---

archive/issue_comments_150417.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nWaiting for feedback from Mac Os X user on sage-devel:\nhttps://groups.google.com/d/topic/sage-devel/R43tQAKI8gA/discussion",
    "created_at": "2012-12-03T10:49:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150417",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:41" align="right">comment:41</div>

Waiting for feedback from Mac Os X user on sage-devel:
https://groups.google.com/d/topic/sage-devel/R43tQAKI8gA/discussion



---

archive/issue_comments_150418.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jpflori](#comment:41):\n> Waiting for feedback from Mac Os X user on sage-devel:\n> https://groups.google.com/d/topic/sage-devel/R43tQAKI8gA/discussion\n\nI'd suggest changing the relevant lines in `configure[.in]` to\n\n```sh\n\n    # 32bit apple darwin doesn't like our PIC format asm code\n    case $host in\n        i[34567]86-apple-darwin*|\n        pentium*-apple-darwin*|\n        prescott-apple-darwin*|\n        core-apple-darwin*)\n            path=\"x86/applenopic\" ;;\n        *-apple-darwin*) # assume Core2 or later\n            path=\"x86/applenopic/core2 x86/applenopic\" ;;\n        *)                                                      ;;\n    esac\n```\n\n(Cf. mpir-devel)",
    "created_at": "2012-12-03T19:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150418",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jpflori](#comment:41):
> Waiting for feedback from Mac Os X user on sage-devel:
> https://groups.google.com/d/topic/sage-devel/R43tQAKI8gA/discussion

I'd suggest changing the relevant lines in `configure[.in]` to

```sh

    # 32bit apple darwin doesn't like our PIC format asm code
    case $host in
        i[34567]86-apple-darwin*|
        pentium*-apple-darwin*|
        prescott-apple-darwin*|
        core-apple-darwin*)
            path="x86/applenopic" ;;
        *-apple-darwin*) # assume Core2 or later
            path="x86/applenopic/core2 x86/applenopic" ;;
        *)                                                      ;;
    esac
```

(Cf. mpir-devel)



---

archive/issue_events_182507.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-04T10:26:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182507"
}
```



---

archive/issue_events_182508.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2012-12-04T10:26:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182508"
}
```



---

archive/issue_comments_150419.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nNew spkg with the solution from mpir-devel.\n(The discussion is at\nhttps://groups.google.com/d/topic/mpir-devel/hsxEc_69lBo/discussion\n)\n\nBack to needs_review, I think everything is sorted out now.",
    "created_at": "2012-12-04T10:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150419",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:43" align="right">comment:43</div>

New spkg with the solution from mpir-devel.
(The discussion is at
https://groups.google.com/d/topic/mpir-devel/hsxEc_69lBo/discussion
)

Back to needs_review, I think everything is sorted out now.



---

archive/issue_comments_150420.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nStill a bit weird he now gets `-march=nocona -mtune=nocona` (instead of `-march=nehalem ...` as previously, with `-m32` of course); haven't looked at his full logs yet...\n\n[Perhaps this was just with Apple's GCC 4.**0.1**, which presumably doesn't know Core i7.]",
    "created_at": "2012-12-04T11:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150420",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:44" align="right">comment:44</div>

Still a bit weird he now gets `-march=nocona -mtune=nocona` (instead of `-march=nehalem ...` as previously, with `-m32` of course); haven't looked at his full logs yet...

[Perhaps this was just with Apple's GCC 4.**0.1**, which presumably doesn't know Core i7.]



---

archive/issue_comments_150421.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nA priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.",
    "created_at": "2012-12-04T11:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150421",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:45" align="right">comment:45</div>

A priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.



---

archive/issue_comments_150422.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@jpflori](#comment:45):\n> A priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.\n\nAll files in the p2 except `configure` are vanilla 2.6.0 again (especially `config.guess`)?\n\nAnother reason for the difference *might* be him setting `ABI=32` manually inbetween (which should matter only in the plain MPIR builds, as `spkg-install` does this as well, always on MacOS < 10.6 I think).",
    "created_at": "2012-12-04T11:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150422",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@jpflori](#comment:45):
> A priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.

All files in the p2 except `configure` are vanilla 2.6.0 again (especially `config.guess`)?

Another reason for the difference *might* be him setting `ABI=32` manually inbetween (which should matter only in the plain MPIR builds, as `spkg-install` does this as well, always on MacOS < 10.6 I think).



---

archive/issue_comments_150423.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@nexttime](#comment:46):\n> Replying to [@jpflori](#comment:45):\n> > A priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.\n\n> \n> All files in the p2 except `configure` are vanilla 2.6.0 again (especially `config.guess`)?\n> \n> Another reason for the difference *might* be him setting `ABI=32` manually inbetween (which should matter only in the plain MPIR builds, as `spkg-install` does this as well, always on MacOS < 10.6 I think).\n\nI probably just confused the output of `config.guess` and `-march=...`; in his recent logs we have:\n\n`configure` run \"manually\", Apple GCC 4.0.1:\n\n```\nchecking build system type... nehalem-apple-darwin9.8.0\n...\nchecking ABI=32\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer ... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer has sizeof(long)==4... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=corei7... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=core2... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=nocona... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=corei7... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=core2... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=nocona... yes\n...\nusing ABI=\"32\"\n      CC=\"gcc -std=gnu99\"\n      CFLAGS=\"-m32 -O2 -fomit-frame-pointer -mtune=nocona -march=nocona\"\n      CPPFLAGS=\"\"\n      MPN_PATH=\" x86/applenopic generic\"\n...\n```\n\n`configure` run \"manually\", Apple GCC 4.2.1:\n\n```\nchecking build system type... nehalem-apple-darwin9.8.0\n...\nchecking ABI=32\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer ... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer has sizeof(long)==4... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=corei7... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=core2... yes\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2  -march=corei7... no\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2  -march=core2... yes\n...\nusing ABI=\"32\"\n      CC=\"gcc -std=gnu99\"\n      CFLAGS=\"-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2\"\n      CPPFLAGS=\"\"\n      MPN_PATH=\" x86/applenopic generic\"\n...\n```\n\nMPIR 2.6.0.p2 (with `sage -i ...`, Apple GCC 4.2.1, build 5577):\n\n```\n...\nSettings chosen by MPIR when configuring with CFLAGS unset:\n  CC:      gcc -std=gnu99\n  CFLAGS:  -m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2\n...\nFinally using the following settings:\n  CC=gcc\n  CFLAGS=-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g \n...\nchecking build system type... nehalem-apple-darwin9.8.0\n...\nchecking ABI=32\nchecking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g  ... yes\n...\nusing ABI=\"32\"\n      CC=\"gcc -std=gnu99\"\n      CFLAGS=\"-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g \"\n      CPPFLAGS=\"\"\n      CXX=\"g++\"\n      CXXFLAGS=\"\"\n      MPN_PATH=\" x86/applenopic generic\"\n...\n```\n\n(Looks like our first \"dry\" `configure` run influences the second; we should probably delete some more cache files...)\n\nAnd FWIW, the `-std=gnu99` still(?) gets dropped in the first place at least, for whatever reason.  (It was a long-lasting MPIR bug that `gmp.h` -- in contrast to `mpir.h` -- was lacking this in the definition of `__GMP_CC`.)\n\nAlso, IMHO `CXXFLAGS` shouldn't be empty.  And it doesn't look like yasm's `configure` would pick up the settings from MPIR's...",
    "created_at": "2012-12-04T12:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150423",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@nexttime](#comment:46):
> Replying to [@jpflori](#comment:45):
> > A priori, I did not modify the configure file except for the few lines involved by the fix, so this is strange.

> 
> All files in the p2 except `configure` are vanilla 2.6.0 again (especially `config.guess`)?
> 
> Another reason for the difference *might* be him setting `ABI=32` manually inbetween (which should matter only in the plain MPIR builds, as `spkg-install` does this as well, always on MacOS < 10.6 I think).

I probably just confused the output of `config.guess` and `-march=...`; in his recent logs we have:

`configure` run "manually", Apple GCC 4.0.1:

```
checking build system type... nehalem-apple-darwin9.8.0
...
checking ABI=32
checking compiler gcc -m32 -O2 -fomit-frame-pointer ... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer has sizeof(long)==4... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=corei7... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=core2... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=nocona... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=corei7... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=core2... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=nocona  -march=nocona... yes
...
using ABI="32"
      CC="gcc -std=gnu99"
      CFLAGS="-m32 -O2 -fomit-frame-pointer -mtune=nocona -march=nocona"
      CPPFLAGS=""
      MPN_PATH=" x86/applenopic generic"
...
```

`configure` run "manually", Apple GCC 4.2.1:

```
checking build system type... nehalem-apple-darwin9.8.0
...
checking ABI=32
checking compiler gcc -m32 -O2 -fomit-frame-pointer ... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer has sizeof(long)==4... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=corei7... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer  -mtune=core2... yes
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2  -march=corei7... no
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2  -march=core2... yes
...
using ABI="32"
      CC="gcc -std=gnu99"
      CFLAGS="-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2"
      CPPFLAGS=""
      MPN_PATH=" x86/applenopic generic"
...
```

MPIR 2.6.0.p2 (with `sage -i ...`, Apple GCC 4.2.1, build 5577):

```
...
Settings chosen by MPIR when configuring with CFLAGS unset:
  CC:      gcc -std=gnu99
  CFLAGS:  -m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2
...
Finally using the following settings:
  CC=gcc
  CFLAGS=-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g 
...
checking build system type... nehalem-apple-darwin9.8.0
...
checking ABI=32
checking compiler gcc -m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g  ... yes
...
using ABI="32"
      CC="gcc -std=gnu99"
      CFLAGS="-m32 -O2 -fomit-frame-pointer -mtune=core2 -march=core2  -g "
      CPPFLAGS=""
      CXX="g++"
      CXXFLAGS=""
      MPN_PATH=" x86/applenopic generic"
...
```

(Looks like our first "dry" `configure` run influences the second; we should probably delete some more cache files...)

And FWIW, the `-std=gnu99` still(?) gets dropped in the first place at least, for whatever reason.  (It was a long-lasting MPIR bug that `gmp.h` -- in contrast to `mpir.h` -- was lacking this in the definition of `__GMP_CC`.)

Also, IMHO `CXXFLAGS` shouldn't be empty.  And it doesn't look like yasm's `configure` would pick up the settings from MPIR's...



---

archive/issue_comments_150424.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nMaybe we can do this in a follow up ticket \"Fix spkg-install of mpir spkg\"?\nAnd merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).",
    "created_at": "2012-12-04T13:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150424",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:48" align="right">comment:48</div>

Maybe we can do this in a follow up ticket "Fix spkg-install of mpir spkg"?
And merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).



---

archive/issue_comments_150425.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI reread your message above.\n\nThe p0 is the one targeted for inclusion. It should have pristine src directory, except some useless dir for us are deleted.\nThe patches modify configure for this apple problem, and for some fortran things which were here before.\nI also move \"by hand\" the wrongly name *,asm files.\n\nA priori, the p2 was based on p0, with editing in a sligthly more dirty way configure (i.e. I put somethign at the end of the swith case, that's the only difference as far as configure is concerned) and adding some asm files to the applenopic.\nNonetheless I don't expect that to have any influence on config.guess.",
    "created_at": "2012-12-04T16:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150425",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:49" align="right">comment:49</div>

I reread your message above.

The p0 is the one targeted for inclusion. It should have pristine src directory, except some useless dir for us are deleted.
The patches modify configure for this apple problem, and for some fortran things which were here before.
I also move "by hand" the wrongly name *,asm files.

A priori, the p2 was based on p0, with editing in a sligthly more dirty way configure (i.e. I put somethign at the end of the swith case, that's the only difference as far as configure is concerned) and adding some asm files to the applenopic.
Nonetheless I don't expect that to have any influence on config.guess.



---

archive/issue_comments_150426.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jpflori](#comment:48):\n> Maybe we can do this in a follow up ticket \"Fix spkg-install of mpir spkg\"?\n\nSure, but then we should probably add some comments to `SPKG.txt`.  (I haven't yet looked at the new spkg itself at all, just read Greg's logs and comments and upstream source.)\n\n> And merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).\n\n:-) Unfortunately we first need new FLINT and GMP-ECM spkgs as well, AFAIK; not sure what else...\n\n(Or does just the *new* FLINT spkg require MPIR 2.6, but not vice versa?  I only know at least GMP-ECM currently won't build with MPIR 2.6.)",
    "created_at": "2012-12-05T01:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150426",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jpflori](#comment:48):
> Maybe we can do this in a follow up ticket "Fix spkg-install of mpir spkg"?

Sure, but then we should probably add some comments to `SPKG.txt`.  (I haven't yet looked at the new spkg itself at all, just read Greg's logs and comments and upstream source.)

> And merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).

:-) Unfortunately we first need new FLINT and GMP-ECM spkgs as well, AFAIK; not sure what else...

(Or does just the *new* FLINT spkg require MPIR 2.6, but not vice versa?  I only know at least GMP-ECM currently won't build with MPIR 2.6.)



---

archive/issue_comments_150427.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@nexttime](#comment:50):\n> Replying to [@jpflori](#comment:48):\n> > Maybe we can do this in a follow up ticket \"Fix spkg-install of mpir spkg\"?\n\n> \n> Sure, but then we should probably add some comments to `SPKG.txt`.  (I haven't yet looked at the new spkg itself at all, just read Greg's logs and comments and upstream source.)\n\nI think there are already some mentions of CC and CXXFLAGS in SPKG.txt, so this does not seem new.\n> \n> > And merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).\n\n> \n> :-) Unfortunately we first need new FLINT and GMP-ECM spkgs as well, AFAIK; not sure what else...\n> \n> (Or does just the *new* FLINT spkg require MPIR 2.6, but not vice versa?  I only know at least GMP-ECM currently won't build with MPIR 2.6.)\n\nIts the new FLINT which depends on the new MPIR.\nThe old one should build which whatever version.\nIn fact the new FLINT release \"officially\" depends on MPIR 2.6.0.\nThe real deal is that there are symbols conflicts with MPIR 2.5.x, but as Sage still ships MPIR 2.4.x, there is no problem.\n\nI'll have a look at the GMP-ECM problems, but it indeed reminds me of something, thanks for the hint.",
    "created_at": "2012-12-05T08:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150427",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@nexttime](#comment:50):
> Replying to [@jpflori](#comment:48):
> > Maybe we can do this in a follow up ticket "Fix spkg-install of mpir spkg"?

> 
> Sure, but then we should probably add some comments to `SPKG.txt`.  (I haven't yet looked at the new spkg itself at all, just read Greg's logs and comments and upstream source.)

I think there are already some mentions of CC and CXXFLAGS in SPKG.txt, so this does not seem new.
> 
> > And merge this asap, as it looks functional everywhere (I know there is some fuzz for one patch as well because of the last fix included, but I got no time to fix it once again).

> 
> :-) Unfortunately we first need new FLINT and GMP-ECM spkgs as well, AFAIK; not sure what else...
> 
> (Or does just the *new* FLINT spkg require MPIR 2.6, but not vice versa?  I only know at least GMP-ECM currently won't build with MPIR 2.6.)

Its the new FLINT which depends on the new MPIR.
The old one should build which whatever version.
In fact the new FLINT release "officially" depends on MPIR 2.6.0.
The real deal is that there are symbols conflicts with MPIR 2.5.x, but as Sage still ships MPIR 2.4.x, there is no problem.

I'll have a look at the GMP-ECM problems, but it indeed reminds me of something, thanks for the hint.



---

archive/issue_comments_150428.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThis builds on Cygwin on XP.",
    "created_at": "2012-12-05T13:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150428",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:52" align="right">comment:52</div>

This builds on Cygwin on XP.



---

archive/issue_comments_150429.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nNo problem on 64 bits Windows 7 as well.\n\nIs there really a problem with gmp-ecm-6.4? it seems to build perfectly with MPIR 2.6.0.\n\nI'm aware of\nhttps://groups.google.com/forum/?fromgroups=#!searchin/mpir-devel/ecm/mpir-devel/Ba5Jl_XOSHM/pciuA7eN7dQJ\nbut doesn't it concern later svn version?\nThe latest svn version is still broken, a fix was commited but seems only partial.",
    "created_at": "2012-12-05T13:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150429",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:53" align="right">comment:53</div>

No problem on 64 bits Windows 7 as well.

Is there really a problem with gmp-ecm-6.4? it seems to build perfectly with MPIR 2.6.0.

I'm aware of
https://groups.google.com/forum/?fromgroups=#!searchin/mpir-devel/ecm/mpir-devel/Ba5Jl_XOSHM/pciuA7eN7dQJ
but doesn't it concern later svn version?
The latest svn version is still broken, a fix was commited but seems only partial.



---

archive/issue_comments_150430.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\n> No problem on 64 bits Windows 7 as well.\n> \n> Is there really a problem with gmp-ecm-6.4? it seems to build perfectly with MPIR 2.6.0.\n\nOn Cygwin on XP ecm-6.3.p8 (the current one) builds fine with this mpir spkg.",
    "created_at": "2012-12-12T16:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150430",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:54" align="right">comment:54</div>

> No problem on 64 bits Windows 7 as well.
> 
> Is there really a problem with gmp-ecm-6.4? it seems to build perfectly with MPIR 2.6.0.

On Cygwin on XP ecm-6.3.p8 (the current one) builds fine with this mpir spkg.



---

archive/issue_comments_150431.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nFor me everything looks fine here, any other concern from anybody?",
    "created_at": "2012-12-17T10:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150431",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:55" align="right">comment:55</div>

For me everything looks fine here, any other concern from anybody?



---

archive/issue_comments_150432.json:
```json
{
    "body": "Changed author from **John Palmieri, Jean-Pierre Flori** to **John Palmieri, Jean-Pierre Flori, Karl-Dieter Crisman**",
    "created_at": "2012-12-17T22:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150432",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **John Palmieri, Jean-Pierre Flori** to **John Palmieri, Jean-Pierre Flori, Karl-Dieter Crisman**



---

archive/issue_comments_150433.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI'm not having any problems with `SAGE_CHECK=yes` on sage.math or OS X 10.7.  On Mac,\n\n```\nGMP-ECM's test suite passed.\n```\nand so unless I encounter problems on either of those machines (which I'd report), let's get this in.  I *will* point out that\n\n```\npatching file configure.in\nHunk #1 succeeded at 1918 (offset -2 lines).\npatching file yasm/Makefile.in\npatching file configure\nHunk #2 succeeded at 5265 (offset -2 lines).\nHunk #3 succeeded at 5315 (offset -2 lines).\nHunk #4 succeeded at 5322 (offset -2 lines).\nHunk #5 succeeded at 5369 (offset -2 lines).\nHunk #6 succeeded at 5377 (offset -2 lines).\nHunk #7 succeeded at 5424 (offset -2 lines).\nHunk #8 succeeded at 6579 (offset -2 lines).\nHunk #9 succeeded at 6629 (offset -2 lines).\nHunk #10 succeeded at 6636 (offset -2 lines).\nHunk #11 succeeded at 6683 (offset -2 lines).\nHunk #12 succeeded at 6691 (offset -2 lines).\nHunk #13 succeeded at 6738 (offset -2 lines).\nHunk #14 succeeded at 11749 (offset -2 lines).\nHunk #15 succeeded at 14632 (offset -2 lines).\nHunk #16 succeeded at 21785 (offset -2 lines).\nHunk #17 succeeded at 26677 (offset -2 lines).\nHunk #18 succeeded at 26812 (offset -2 lines).\nHunk #19 succeeded at 26868 (offset -2 lines).\nHunk #20 succeeded at 26910 (offset -2 lines).\nHunk #21 succeeded at 27623 (offset -2 lines).\nHunk #22 succeeded at 28377 (offset -2 lines).\nHunk #23 succeeded at 29455 (offset -2 lines).\nHunk #24 succeeded at 29590 (offset -2 lines).\nHunk #25 succeeded at 29646 (offset -2 lines).\nHunk #26 succeeded at 29685 (offset -2 lines).\nHunk #27 succeeded at 30403 (offset -2 lines).\nHunk #28 succeeded at 31157 (offset -2 lines).\nHunk #29 succeeded at 32239 (offset -2 lines).\nHunk #30 succeeded at 32374 (offset -2 lines).\nHunk #31 succeeded at 32430 (offset -2 lines).\nHunk #32 succeeded at 32469 (offset -2 lines).\nHunk #33 succeeded at 33189 (offset -2 lines).\nHunk #34 succeeded at 33943 (offset -2 lines).\n```\nBut I'm not exactly worried about this, though the release manager may balk at it.",
    "created_at": "2013-01-04T17:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150433",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:57" align="right">comment:57</div>

I'm not having any problems with `SAGE_CHECK=yes` on sage.math or OS X 10.7.  On Mac,

```
GMP-ECM's test suite passed.
```
and so unless I encounter problems on either of those machines (which I'd report), let's get this in.  I *will* point out that

```
patching file configure.in
Hunk #1 succeeded at 1918 (offset -2 lines).
patching file yasm/Makefile.in
patching file configure
Hunk #2 succeeded at 5265 (offset -2 lines).
Hunk #3 succeeded at 5315 (offset -2 lines).
Hunk #4 succeeded at 5322 (offset -2 lines).
Hunk #5 succeeded at 5369 (offset -2 lines).
Hunk #6 succeeded at 5377 (offset -2 lines).
Hunk #7 succeeded at 5424 (offset -2 lines).
Hunk #8 succeeded at 6579 (offset -2 lines).
Hunk #9 succeeded at 6629 (offset -2 lines).
Hunk #10 succeeded at 6636 (offset -2 lines).
Hunk #11 succeeded at 6683 (offset -2 lines).
Hunk #12 succeeded at 6691 (offset -2 lines).
Hunk #13 succeeded at 6738 (offset -2 lines).
Hunk #14 succeeded at 11749 (offset -2 lines).
Hunk #15 succeeded at 14632 (offset -2 lines).
Hunk #16 succeeded at 21785 (offset -2 lines).
Hunk #17 succeeded at 26677 (offset -2 lines).
Hunk #18 succeeded at 26812 (offset -2 lines).
Hunk #19 succeeded at 26868 (offset -2 lines).
Hunk #20 succeeded at 26910 (offset -2 lines).
Hunk #21 succeeded at 27623 (offset -2 lines).
Hunk #22 succeeded at 28377 (offset -2 lines).
Hunk #23 succeeded at 29455 (offset -2 lines).
Hunk #24 succeeded at 29590 (offset -2 lines).
Hunk #25 succeeded at 29646 (offset -2 lines).
Hunk #26 succeeded at 29685 (offset -2 lines).
Hunk #27 succeeded at 30403 (offset -2 lines).
Hunk #28 succeeded at 31157 (offset -2 lines).
Hunk #29 succeeded at 32239 (offset -2 lines).
Hunk #30 succeeded at 32374 (offset -2 lines).
Hunk #31 succeeded at 32430 (offset -2 lines).
Hunk #32 succeeded at 32469 (offset -2 lines).
Hunk #33 succeeded at 33189 (offset -2 lines).
Hunk #34 succeeded at 33943 (offset -2 lines).
```
But I'm not exactly worried about this, though the release manager may balk at it.



---

archive/issue_comments_150434.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nIn both cases,\n\n```\nThe MPIR test suite passed successfully.\nGMP-ECM's test suite passed.\n```\nSo I think we're okay with respect to all that.\n\nHowever, possibly related, on Mac, is\n\n```\nAll tests passed.\nzn_poly's *quick* test suite passed.\n\nNow building and installing zn_poly's shared library...\ngcc  -single_module -fPIC -dynamiclib -o libzn_poly.dylib src/array.o src/inver$\n\nNow installing zn_poly's header files...\nFinished installing zn_poly.\n\nreal    1m25.136s\nuser    1m21.802s\nsys     0m1.354s\nSuccessfully installed zn_poly-0.9.p9\nRunning the test suite for zn_poly-0.9.p9...\n\nNow building zn_poly's extensive test suite (if not already built)...\nmake[3]: Nothing to be done for `test'.\n<snip>\nzn_array_mulmid_KS1()... ok\nzn_array_mulmid_KS2()... ok\nzn_array_mulmid_KS3()... ok\nzn_array_mulmid_KS4()... ok\nnuss_mul()... FAIL!\n\nAt least one test FAILED!\nError: zn_poly failed to pass its extensive test suite.\n\nreal    13m48.475s\nuser    13m47.253s\nsys     0m0.748s\n************************************************************************\nError testing package zn_poly-0.9.p9\n************************************************************************\n```\nCould be a race condition, I'm seeing what happens.  On sage.math,\n\n```\nzn_poly has passed its extensive test suite.\n```",
    "created_at": "2013-01-04T17:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150434",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:58" align="right">comment:58</div>

In both cases,

```
The MPIR test suite passed successfully.
GMP-ECM's test suite passed.
```
So I think we're okay with respect to all that.

However, possibly related, on Mac, is

```
All tests passed.
zn_poly's *quick* test suite passed.

Now building and installing zn_poly's shared library...
gcc  -single_module -fPIC -dynamiclib -o libzn_poly.dylib src/array.o src/inver$

Now installing zn_poly's header files...
Finished installing zn_poly.

real    1m25.136s
user    1m21.802s
sys     0m1.354s
Successfully installed zn_poly-0.9.p9
Running the test suite for zn_poly-0.9.p9...

Now building zn_poly's extensive test suite (if not already built)...
make[3]: Nothing to be done for `test'.
<snip>
zn_array_mulmid_KS1()... ok
zn_array_mulmid_KS2()... ok
zn_array_mulmid_KS3()... ok
zn_array_mulmid_KS4()... ok
nuss_mul()... FAIL!

At least one test FAILED!
Error: zn_poly failed to pass its extensive test suite.

real    13m48.475s
user    13m47.253s
sys     0m0.748s
************************************************************************
Error testing package zn_poly-0.9.p9
************************************************************************
```
Could be a race condition, I'm seeing what happens.  On sage.math,

```
zn_poly has passed its extensive test suite.
```



---

archive/issue_comments_150435.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nJust FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.\nNot sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.",
    "created_at": "2013-01-04T17:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150435",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:59" align="right">comment:59</div>

Just FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.
Not sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.



---

archive/issue_comments_150436.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\n> \n> ```\n> nuss_mul()... FAIL!\n> > }}}\n> ```\n\n\n```\nAll tests passed.\nzn_poly has passed its extensive test suite.\n```\nSo I'm not sure what's up, but it seems to be related to this ticket.  (Mac only.)  Note that both sage.math and my Mac use the gcc-4.6.3 spkg, so that's not the problem.",
    "created_at": "2013-01-04T18:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150436",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:60" align="right">comment:60</div>

> 
> ```
> nuss_mul()... FAIL!
> > }}}
> ```


```
All tests passed.
zn_poly has passed its extensive test suite.
```
So I'm not sure what's up, but it seems to be related to this ticket.  (Mac only.)  Note that both sage.math and my Mac use the gcc-4.6.3 spkg, so that's not the problem.



---

archive/issue_comments_150437.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nNotwithstanding, Sage passes all (not long) tests even with that on my Mac, as well as on sage.math.  Maybe that's good enough for this ticket.\n\n---\n\n> Just FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.\n> Not sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.\n\nI don't notice any talk there about getting rid of it, though I see the name changes.  That said, there are only three files in `module_list.py` which include `zn_poly` in their library list, and then there is the whole sage/schemes/hyperelliptic_curves/hypellfrob/ folder, also by David Harvey, which definitely depends on it.  It does appear that \"zn_poly is no longer maintained\" and the latest version was included in FLINT - has been since 2009, huh.  I assume its functionality is still in the \"complete rewrite\" of FLINT 2.x?",
    "created_at": "2013-01-04T19:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150437",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:61" align="right">comment:61</div>

Notwithstanding, Sage passes all (not long) tests even with that on my Mac, as well as on sage.math.  Maybe that's good enough for this ticket.

---

> Just FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.
> Not sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.

I don't notice any talk there about getting rid of it, though I see the name changes.  That said, there are only three files in `module_list.py` which include `zn_poly` in their library list, and then there is the whole sage/schemes/hyperelliptic_curves/hypellfrob/ folder, also by David Harvey, which definitely depends on it.  It does appear that "zn_poly is no longer maintained" and the latest version was included in FLINT - has been since 2009, huh.  I assume its functionality is still in the "complete rewrite" of FLINT 2.x?



---

archive/issue_comments_150438.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\n> > nuss_mul()... FAIL!\n\nAlso with one thread and this MPIR.  So it's not a race condition.  Bummer.",
    "created_at": "2013-01-05T13:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150438",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:62" align="right">comment:62</div>

> > nuss_mul()... FAIL!

Also with one thread and this MPIR.  So it's not a race condition.  Bummer.



---

archive/issue_comments_150439.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nLooks like I should take a look at the Clang changes we have so far (I currently don't recall any of them...), but we apparently have a \"new\" issue (which is present in at least MPIR 2.4.0, but presumably 2.6.0 and *any older version* as well), namely `configure` failing with `clang` and `-O0` (which gets added if `SAGE_DEBUG=yes`; `-O1` doesn't work either).\n\nIvan Andrus reported this (for Sage 5.6.beta2) on sage-release, I've cc'ed mpir-devel in my [preliminary] reply.",
    "created_at": "2013-01-06T06:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150439",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:63" align="right">comment:63</div>

Looks like I should take a look at the Clang changes we have so far (I currently don't recall any of them...), but we apparently have a "new" issue (which is present in at least MPIR 2.4.0, but presumably 2.6.0 and *any older version* as well), namely `configure` failing with `clang` and `-O0` (which gets added if `SAGE_DEBUG=yes`; `-O1` doesn't work either).

Ivan Andrus reported this (for Sage 5.6.beta2) on sage-release, I've cc'ed mpir-devel in my [preliminary] reply.



---

archive/issue_comments_150440.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nAlso, is the `.p0` in the description still current?\n\nI do have different versions, i.e., older and newer versions of a `.p1` (from JP IIRC), as well as of \"the\"(?) `.p0`.",
    "created_at": "2013-01-06T06:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150440",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:64" align="right">comment:64</div>

Also, is the `.p0` in the description still current?

I do have different versions, i.e., older and newer versions of a `.p1` (from JP IIRC), as well as of "the"(?) `.p0`.



---

archive/issue_comments_150441.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@nexttime](#comment:64):\n> Also, is the `.p0` in the description still current?\n> \n> I do have different versions, i.e., older and newer versions of a `.p1` (from JP IIRC), as well as of \"the\"(?) `.p0`.\n>  \n\nOne of my \"old\" `.p0`s (fetched around December 4th) is (still) identical to the one linked to in the description, md5sum:\n\n```\n2fc787c7ad53fee4d921d2f387b0dfca  mpir-2.6.0.p0.spkg\n```",
    "created_at": "2013-01-06T06:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150441",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@nexttime](#comment:64):
> Also, is the `.p0` in the description still current?
> 
> I do have different versions, i.e., older and newer versions of a `.p1` (from JP IIRC), as well as of "the"(?) `.p0`.
>  

One of my "old" `.p0`s (fetched around December 4th) is (still) identical to the one linked to in the description, md5sum:

```
2fc787c7ad53fee4d921d2f387b0dfca  mpir-2.6.0.p0.spkg
```



---

archive/issue_comments_150442.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n`patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).",
    "created_at": "2013-01-06T07:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150442",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:66" align="right">comment:66</div>

`patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).



---

archive/issue_comments_150443.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@nexttime](#comment:66):\n> `patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).\n> \n\nIn `spkg-install`, we have:\n\n```sh\n\n    Darwin)\n        # In some cases (see SAGE_ROOT/spkg/bin/sage-env), on Darwin,\n        # CC might be set to clang, but MPIR doesn't seem to build\n        # with clang.\n        CLANG=`command -v clang`\n        GCC=`command -v gcc`\n        if [ -n \"$CC\" ] && [ \"$CC\" = \"$CLANG\" ] && [ -n \"$GCC\" ] ; then\n            export CC=\"$GCC\"\n        fi\n```\n\nWhich means we use `$GCC` even if `CC` is set to `clang` (actually, the output of `command -v clang`) *if GCC is available* (more precisely, if `command -v gcc` is non-empty).\n\nApart from that these tests are pretty limited [to not say broken] (and `CC` is always set btw.), that doesn't prevent the use of Clang.  So we should either issue an error message if GCC is not available (while `command -v gcc` might actually give a link to `clang` :-) ), or we should fix the build(?) issues with Clang...",
    "created_at": "2013-01-06T07:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150443",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@nexttime](#comment:66):
> `patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).
> 

In `spkg-install`, we have:

```sh

    Darwin)
        # In some cases (see SAGE_ROOT/spkg/bin/sage-env), on Darwin,
        # CC might be set to clang, but MPIR doesn't seem to build
        # with clang.
        CLANG=`command -v clang`
        GCC=`command -v gcc`
        if [ -n "$CC" ] && [ "$CC" = "$CLANG" ] && [ -n "$GCC" ] ; then
            export CC="$GCC"
        fi
```

Which means we use `$GCC` even if `CC` is set to `clang` (actually, the output of `command -v clang`) *if GCC is available* (more precisely, if `command -v gcc` is non-empty).

Apart from that these tests are pretty limited [to not say broken] (and `CC` is always set btw.), that doesn't prevent the use of Clang.  So we should either issue an error message if GCC is not available (while `command -v gcc` might actually give a link to `clang` :-) ), or we should fix the build(?) issues with Clang...



---

archive/issue_comments_150444.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nFWIW, with vanilla MPIR 2.6.0, after fixing only the first (yet another) `configure` issue, so far MPIR builds, although a 32-bit version (due to another broken test; I'll fix that later), with Clang 3.1, and passes its test suite.  (This is on a Linux x86_64 box.)",
    "created_at": "2013-01-06T08:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150444",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:68" align="right">comment:68</div>

FWIW, with vanilla MPIR 2.6.0, after fixing only the first (yet another) `configure` issue, so far MPIR builds, although a 32-bit version (due to another broken test; I'll fix that later), with Clang 3.1, and passes its test suite.  (This is on a Linux x86_64 box.)



---

archive/issue_comments_150445.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@nexttime](#comment:67):\n> Replying to [@nexttime](#comment:66):\n> > `patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` \n\nYup, IIRC that's just autocrap diff.\n>doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).\n\nI don't think we support clang so that comes as no surprise.\nBy the way I've reportd some time ago the clang problem upstream but I saw you even proposed fixes, that's great.\n> > \n\n> \n> In `spkg-install`, we have:\n> \n> ```sh\n> \n>     Darwin)\n>         # In some cases (see SAGE_ROOT/spkg/bin/sage-env), on Darwin,\n>         # CC might be set to clang, but MPIR doesn't seem to build\n>         # with clang.\n>         CLANG=`command -v clang`\n>         GCC=`command -v gcc`\n>         if [ -n \"$CC\" ] && [ \"$CC\" = \"$CLANG\" ] && [ -n \"$GCC\" ] ; then\n>             export CC=\"$GCC\"\n>         fi\n> ```\n> \n> Which means we use `$GCC` even if `CC` is set to `clang` (actually, the output of `command -v clang`) *if GCC is available* (more precisely, if `command -v gcc` is non-empty).\n\nIndeed.\n> \n> Apart from that these tests are pretty limited [to not say broken] (and `CC` is always set btw.), that doesn't prevent the use of Clang.  So we should either issue an error message if GCC is not available (while `command -v gcc` might actually give a link to `clang` :-) ), or we should fix the build(?) issues with Clang...\n\nI don't really know what the best solution is.\nPersonally I don't use Apple stuff, so I would be inclined to merge the current spkg with minimal changes and deal with the clang nightmare in a later ticket.",
    "created_at": "2013-01-06T23:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150445",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@nexttime](#comment:67):
> Replying to [@nexttime](#comment:66):
> > `patches/configure.patch` is pretty unreadable, and as far as I can see `SPKG.txt` 

Yup, IIRC that's just autocrap diff.
>doesn't mention Clang at all (except for John's changelog entry, which says we shouldn't [or now do not] use it...?).

I don't think we support clang so that comes as no surprise.
By the way I've reportd some time ago the clang problem upstream but I saw you even proposed fixes, that's great.
> > 

> 
> In `spkg-install`, we have:
> 
> ```sh
> 
>     Darwin)
>         # In some cases (see SAGE_ROOT/spkg/bin/sage-env), on Darwin,
>         # CC might be set to clang, but MPIR doesn't seem to build
>         # with clang.
>         CLANG=`command -v clang`
>         GCC=`command -v gcc`
>         if [ -n "$CC" ] && [ "$CC" = "$CLANG" ] && [ -n "$GCC" ] ; then
>             export CC="$GCC"
>         fi
> ```
> 
> Which means we use `$GCC` even if `CC` is set to `clang` (actually, the output of `command -v clang`) *if GCC is available* (more precisely, if `command -v gcc` is non-empty).

Indeed.
> 
> Apart from that these tests are pretty limited [to not say broken] (and `CC` is always set btw.), that doesn't prevent the use of Clang.  So we should either issue an error message if GCC is not available (while `command -v gcc` might actually give a link to `clang` :-) ), or we should fix the build(?) issues with Clang...

I don't really know what the best solution is.
Personally I don't use Apple stuff, so I would be inclined to merge the current spkg with minimal changes and deal with the clang nightmare in a later ticket.



---

archive/issue_comments_150446.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\n> > > nuss_mul()... FAIL!\n\n> Also with one thread and this MPIR.  So it's not a race condition.  Bummer.\n\nThis is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.",
    "created_at": "2013-01-07T19:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150446",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:70" align="right">comment:70</div>

> > > nuss_mul()... FAIL!

> Also with one thread and this MPIR.  So it's not a race condition.  Bummer.

This is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.



---

archive/issue_comments_150447.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@kcrisman](#comment:61):\n> Notwithstanding, Sage passes all (not long) tests even with that on my Mac, as well as on sage.math.  Maybe that's good enough for this ticket.\n> \n> \n> ---\n> \n> > Just FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.\n> > Not sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.\n\n> I don't notice any talk there about getting rid of it, though I see the name changes.  That said, there are only three files in `module_list.py` which include `zn_poly` in their library list, and then \n\nFor the first file, linking to zn_poly should not be needed anymore and should be fixed at #12173.\nIn fact I'm not really sure anyway it was, there is no direct reference to zn_poly there and it must in fact use it through FLINT 1.5.2 (which ships zn_poly...).\n\nFor the second file, the sole function which still really directly use is some \"experimental preview\"...\nThe real deal is operated through FLINT (which then use its own zn_poly).\nI think this should be removed as well and the preview function deleted (I don't think it used anywhere).\n> there is the whole sage/schemes/hyperelliptic_curves/hypellfrob/ folder, also by David Harvey, which definitely depends on it.  It does appear that \"zn_poly is no longer maintained\" and the latest version was included in FLINT - has been since 2009, huh.  I assume its functionality is still in the \"complete rewrite\" of FLINT 2.x?\n\nIndeed the hypellfrob spkg will still depend on zn_poly.\nAlthough I think all functionalities of zn_poly should be given by FLINT 2.3 (and even 1.5.2 which ships zn_poly remember).\nThis is more problematic as we would need to patch hyperellfrob to use what is exposed by FLINT 1.5.2 or rather 2.3...",
    "created_at": "2013-01-09T16:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150447",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@kcrisman](#comment:61):
> Notwithstanding, Sage passes all (not long) tests even with that on my Mac, as well as on sage.math.  Maybe that's good enough for this ticket.
> 
> 
> ---
> 
> > Just FYI, it seems to me that we should quite quickly get rid of zn_poly spkg.
> > Not sure the spkg will be used at all when FLINT gets updated to 2.3, see #12173 which is definitely more than ready for review.

> I don't notice any talk there about getting rid of it, though I see the name changes.  That said, there are only three files in `module_list.py` which include `zn_poly` in their library list, and then 

For the first file, linking to zn_poly should not be needed anymore and should be fixed at #12173.
In fact I'm not really sure anyway it was, there is no direct reference to zn_poly there and it must in fact use it through FLINT 1.5.2 (which ships zn_poly...).

For the second file, the sole function which still really directly use is some "experimental preview"...
The real deal is operated through FLINT (which then use its own zn_poly).
I think this should be removed as well and the preview function deleted (I don't think it used anywhere).
> there is the whole sage/schemes/hyperelliptic_curves/hypellfrob/ folder, also by David Harvey, which definitely depends on it.  It does appear that "zn_poly is no longer maintained" and the latest version was included in FLINT - has been since 2009, huh.  I assume its functionality is still in the "complete rewrite" of FLINT 2.x?

Indeed the hypellfrob spkg will still depend on zn_poly.
Although I think all functionalities of zn_poly should be given by FLINT 2.3 (and even 1.5.2 which ships zn_poly remember).
This is more problematic as we would need to patch hyperellfrob to use what is exposed by FLINT 1.5.2 or rather 2.3...



---

archive/issue_comments_150448.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@kcrisman](#comment:70):\n> > > > nuss_mul()... FAIL!\n\n> > Also with one thread and this MPIR.  So it's not a race condition.  Bummer.\n\n> This is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.\n\nJust for info as it is surely unrelated, I have also always had random segfaults while building zn_poly on my 64 bits Windows 7 Cygwin install, with the old or the new MPIR.\nIt occured while doing some timings for multiplications.\nAfter a few tries it could go through though.\n\nThere is also a problem mentioned on the zn_poly page about GCC 4.6.3 and make tune, but I don't think we use that target anyway.",
    "created_at": "2013-01-09T16:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150448",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@kcrisman](#comment:70):
> > > > nuss_mul()... FAIL!

> > Also with one thread and this MPIR.  So it's not a race condition.  Bummer.

> This is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.

Just for info as it is surely unrelated, I have also always had random segfaults while building zn_poly on my 64 bits Windows 7 Cygwin install, with the old or the new MPIR.
It occured while doing some timings for multiplications.
After a few tries it could go through though.

There is also a problem mentioned on the zn_poly page about GCC 4.6.3 and make tune, but I don't think we use that target anyway.



---

archive/issue_comments_150449.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nIn fact the spkg-install calls make tune so we should be affected by the problems with GCC 4.6.3 onward Drew Sutherland mentioned, strange.",
    "created_at": "2013-01-09T16:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150449",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:73" align="right">comment:73</div>

In fact the spkg-install calls make tune so we should be affected by the problems with GCC 4.6.3 onward Drew Sutherland mentioned, strange.



---

archive/issue_comments_150450.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nFor future reference:\nhttps://groups.google.com/forum/?fromgroups=#!topic/sage-devel/gXBK78hstIc",
    "created_at": "2013-01-09T16:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150450",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:74" align="right">comment:74</div>

For future reference:
https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/gXBK78hstIc



---

archive/issue_comments_150451.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@kcrisman](#comment:70):\n> > > > nuss_mul()... FAIL!\n\n> > Also with one thread and this MPIR.  So it's not a race condition.  Bummer.\n\n> This is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.\n\nIn fact this might indeed be a bug in the new MPIR FFT, so I'm reporting that upstream.",
    "created_at": "2013-01-09T17:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150451",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@kcrisman](#comment:70):
> > > > nuss_mul()... FAIL!

> > Also with one thread and this MPIR.  So it's not a race condition.  Bummer.

> This is not 100% platform independent; I get the same failure on Cygwin on XP, with gcc 4.5.3, with this MPIR spkg.  The Mac one is of course with the Sage-provided gcc.

In fact this might indeed be a bug in the new MPIR FFT, so I'm reporting that upstream.



---

archive/issue_comments_150452.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nOn what exact Mac was the test failing?",
    "created_at": "2013-01-09T18:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150452",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:76" align="right">comment:76</div>

On what exact Mac was the test failing?



---

archive/issue_comments_150453.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nAnd could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?\nSo both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?",
    "created_at": "2013-01-09T20:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150453",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:77" align="right">comment:77</div>

And could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?
So both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?



---

archive/issue_comments_150454.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\n> On what exact Mac was the test failing?\n\nOS X 10.7 building the Sage gcc package.\n> And could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?\n> So both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?\n\nNo, I can't, I'm sorry - or to be more accurate, it's just too much time on the Cygwin.  It really takes me a *long* time to get things going on there, what with rebasing and only having occasional access to that computer.  Waiting for it to compile gcc spkgs... with the semester starting, I know that would be unwise.",
    "created_at": "2013-01-10T04:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150454",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:78" align="right">comment:78</div>

> On what exact Mac was the test failing?

OS X 10.7 building the Sage gcc package.
> And could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?
> So both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?

No, I can't, I'm sorry - or to be more accurate, it's just too much time on the Cygwin.  It really takes me a *long* time to get things going on there, what with rebasing and only having occasional access to that computer.  Waiting for it to compile gcc spkgs... with the semester starting, I know that would be unwise.



---

archive/issue_comments_150455.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@kcrisman](#comment:78):\n> > On what exact Mac was the test failing?\n\n> OS X 10.7 building the Sage gcc package.\n\nI guess this is on top of recent Mac, so Intel 64 bits CPU?\n> > And could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?\n> > So both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?\n\n> No, I can't, I'm sorry - or to be more accurate, it's just too much time on the Cygwin.  It really takes me a *long* time to get things going on there, what with rebasing and only having occasional access to that computer.  Waiting for it to compile gcc spkgs... with the semester starting, I know that would be unwise.\n\nNo problem, I should have some WinXP installs at my old workplace and at home on a laptop (with broken screen...).\nThat's not the best, but I should be able to try to reproduce it.\n\nCould you also specify the CPU used on this WinXP install? So far I assumed it was a 32 bits CPU and the install is 32 bits but I'm not sure about the former fact anymore.",
    "created_at": "2013-01-10T09:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150455",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@kcrisman](#comment:78):
> > On what exact Mac was the test failing?

> OS X 10.7 building the Sage gcc package.

I guess this is on top of recent Mac, so Intel 64 bits CPU?
> > And could you please try rebuildong MPIR and then zn_poly with other GCC versions on both Cygwin and the Mac?
> > So both Sages GCC 4.6.3 and 4.7.2 (from #13913 I advise, much smaller) and 4.7.2 on Mac?

> No, I can't, I'm sorry - or to be more accurate, it's just too much time on the Cygwin.  It really takes me a *long* time to get things going on there, what with rebasing and only having occasional access to that computer.  Waiting for it to compile gcc spkgs... with the semester starting, I know that would be unwise.

No problem, I should have some WinXP installs at my old workplace and at home on a laptop (with broken screen...).
That's not the best, but I should be able to try to reproduce it.

Could you also specify the CPU used on this WinXP install? So far I assumed it was a 32 bits CPU and the install is 32 bits but I'm not sure about the former fact anymore.



---

archive/issue_comments_150456.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nROFL.\n\n```\n...\nxmlto -o . man ./frontends/yasm/yasm.xml\n/usr/bin/xmlto: line 522:   917 Segmentation fault      \"$XMLLINT_PATH\" --noout --nonet --xinclude --postvalid --noent \"$INPUT_FILE\" 2> \"${VALIDATION}\"\nxmlto: .../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm/./frontends/yasm/yasm.xml does not validate (status 139)\nxmlto: Fix document syntax or use --skip-validation option\nmake[4]: *** [yasm.1] Error 149\nmake[4]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src'\nmake: *** [all] Error 2\nError building MPIR.\n\nreal    10m31.056s\nuser    4m9.180s\nsys     1m23.737s\n************************************************************************\n```",
    "created_at": "2013-01-10T16:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150456",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:80" align="right">comment:80</div>

ROFL.

```
...
xmlto -o . man ./frontends/yasm/yasm.xml
/usr/bin/xmlto: line 522:   917 Segmentation fault      "$XMLLINT_PATH" --noout --nonet --xinclude --postvalid --noent "$INPUT_FILE" 2> "${VALIDATION}"
xmlto: .../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm/./frontends/yasm/yasm.xml does not validate (status 139)
xmlto: Fix document syntax or use --skip-validation option
make[4]: *** [yasm.1] Error 149
make[4]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'
make[2]: *** [all] Error 2
make[2]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src/yasm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `.../sage-5.6.beta1-scratch-gcc-4.4.3/spkg/build/mpir-2.6.0.p0/src'
make: *** [all] Error 2
Error building MPIR.

real    10m31.056s
user    4m9.180s
sys     1m23.737s
************************************************************************
```



---

archive/issue_comments_150457.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nP.S.: FWIW, this didn't happen with the MPIR 2.4.0.p6 spkg... :-)",
    "created_at": "2013-01-10T16:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150457",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:81" align="right">comment:81</div>

P.S.: FWIW, this didn't happen with the MPIR 2.4.0.p6 spkg... :-)



---

archive/issue_comments_150458.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nI think this Mac is one of the sort-of 64-bit ones (potential, not everything is).  XP must be 32 bit, the computer is ancient.  But I really don't know for sure even how to check, and I wouldn't worry about it.\n\nLeif, what kind of computer are you on - some kind of Linux?",
    "created_at": "2013-01-10T16:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150458",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:82" align="right">comment:82</div>

I think this Mac is one of the sort-of 64-bit ones (potential, not everything is).  XP must be 32 bit, the computer is ancient.  But I really don't know for sure even how to check, and I wouldn't worry about it.

Leif, what kind of computer are you on - some kind of Linux?



---

archive/issue_comments_150459.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@kcrisman](#comment:82):\n> Leif, what kind of computer are you on - some kind of Linux?\n\nYes.  But you probably meant the machine `xmlto` is failing on... ;-)\n\nThat's a 32-bit Linux box I was trying to reproduce the zn_poly error on.  (I've so far only built several versions of *vanilla* MPIR 2.6.0 on that, with different GCC versions, and at least MPIR's test suite always passed.)",
    "created_at": "2013-01-10T16:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150459",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@kcrisman](#comment:82):
> Leif, what kind of computer are you on - some kind of Linux?

Yes.  But you probably meant the machine `xmlto` is failing on... ;-)

That's a 32-bit Linux box I was trying to reproduce the zn_poly error on.  (I've so far only built several versions of *vanilla* MPIR 2.6.0 on that, with different GCC versions, and at least MPIR's test suite always passed.)



---

archive/issue_comments_150460.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@nexttime](#comment:83):\n> That's a 32-bit Linux box I was trying to reproduce the zn_poly error on.  (I've so far only built several versions of *vanilla* MPIR 2.6.0 on that, with different GCC versions, and at least MPIR's test suite always passed.)\n\nI'm not sure whether `xmlto` was installed when testing the betas and RCs of MPIR 2.6.0, can't find the build logs right now.  Our MPIR 2.4.0 does look for `xmlto` as well, finds it, but apparently doesn't try to build yasm's man pages with it, in contrast to 2.6.0.",
    "created_at": "2013-01-10T17:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150460",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@nexttime](#comment:83):
> That's a 32-bit Linux box I was trying to reproduce the zn_poly error on.  (I've so far only built several versions of *vanilla* MPIR 2.6.0 on that, with different GCC versions, and at least MPIR's test suite always passed.)

I'm not sure whether `xmlto` was installed when testing the betas and RCs of MPIR 2.6.0, can't find the build logs right now.  Our MPIR 2.4.0 does look for `xmlto` as well, finds it, but apparently doesn't try to build yasm's man pages with it, in contrast to 2.6.0.



---

archive/issue_comments_150461.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nzn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...\n\nWill retry with FSF GCC 4.7.2 later...",
    "created_at": "2013-01-10T18:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150461",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:85" align="right">comment:85</div>

zn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...

Will retry with FSF GCC 4.7.2 later...



---

archive/issue_comments_150462.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@nexttime](#comment:85):\n> zn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...\n\nSame with FSF GCC 4.7.2;  same machine, same flags.\n\n[I didn't build or run the tests in parallel though.]",
    "created_at": "2013-01-10T19:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150462",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@nexttime](#comment:85):
> zn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...

Same with FSF GCC 4.7.2;  same machine, same flags.

[I didn't build or run the tests in parallel though.]



---

archive/issue_comments_150463.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@nexttime](#comment:86):\n> Replying to [@nexttime](#comment:85):\n> > zn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...\n\n> \n> Same with FSF GCC 4.7.2;  same machine, same flags.\n> \n> [I didn't build or run the tests in parallel though.]\n\nSame with `{C,CPP,CXX}FLAGS` unset (only in the shell of course);  Ubuntu GCC 4.4.3 and FSF GCC 4.7.2.",
    "created_at": "2013-01-10T21:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150463",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@nexttime](#comment:86):
> Replying to [@nexttime](#comment:85):
> > zn_poly's quick as well as its extensive test suite passed for me with the MPIR 2.6.0.p0 spkg; Pentium4 Prescott, Ubuntu GCC 4.4.3, `-march=native`, `-O3`, ...

> 
> Same with FSF GCC 4.7.2;  same machine, same flags.
> 
> [I didn't build or run the tests in parallel though.]

Same with `{C,CPP,CXX}FLAGS` unset (only in the shell of course);  Ubuntu GCC 4.4.3 and FSF GCC 4.7.2.



---

archive/issue_comments_150464.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nSo I've run zn_poly's (quick) test suite (built with MPIR 2.6.0.p0, Ubuntu GCC 4.4.3) 50 times on the already heavily-loaded 32-bit Linux box -- without any failures.",
    "created_at": "2013-01-11T00:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150464",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:88" align="right">comment:88</div>

So I've run zn_poly's (quick) test suite (built with MPIR 2.6.0.p0, Ubuntu GCC 4.4.3) 50 times on the already heavily-loaded 32-bit Linux box -- without any failures.



---

archive/issue_comments_150465.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@nexttime](#comment:88):\n> So I've run zn_poly's (quick) test suite (built with MPIR 2.6.0.p0, Ubuntu GCC 4.4.3) 50 times on the already heavily-loaded 32-bit Linux box -- without any failures.\n\n... and same for the version built with GCC 4.7.2.",
    "created_at": "2013-01-11T01:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150465",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@nexttime](#comment:88):
> So I've run zn_poly's (quick) test suite (built with MPIR 2.6.0.p0, Ubuntu GCC 4.4.3) 50 times on the already heavily-loaded 32-bit Linux box -- without any failures.

... and same for the version built with GCC 4.7.2.



---

archive/issue_comments_150466.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nFrom at I've read on sage-devel it is not clear that the zn_poly failure is MPIR 2.6.0 specific, waiting for feedback there, we should also try on top of GMP to gather more intel.\n\nFor leif: if you want to package a clang enabled spkg, please ase it on #12115 which was closed as we thought the one here would quickly get in.",
    "created_at": "2013-01-11T08:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150466",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:90" align="right">comment:90</div>

From at I've read on sage-devel it is not clear that the zn_poly failure is MPIR 2.6.0 specific, waiting for feedback there, we should also try on top of GMP to gather more intel.

For leif: if you want to package a clang enabled spkg, please ase it on #12115 which was closed as we thought the one here would quickly get in.



---

archive/issue_comments_150467.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nOk it failed with older MPIR as well, please have a look at build logs here:\nhttps://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion",
    "created_at": "2013-01-11T09:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150467",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:91" align="right">comment:91</div>

Ok it failed with older MPIR as well, please have a look at build logs here:
https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion



---

archive/issue_comments_150468.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@jpflori](#comment:91):\n> Ok it failed with older MPIR as well, please have a look at build logs here:\n> https://groups.google.com/d/topic/sagei-release/ngw_EiBaY0Q/discussion\n\nWell, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)\n\nOne would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...",
    "created_at": "2013-01-11T09:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150468",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@jpflori](#comment:91):
> Ok it failed with older MPIR as well, please have a look at build logs here:
> https://groups.google.com/d/topic/sagei-release/ngw_EiBaY0Q/discussion

Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)

One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...



---

archive/issue_comments_150469.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@nexttime](#comment:92):\n> Replying to [@jpflori](#comment:91):\n> > Ok it failed with older MPIR as well, please have a look at build logs here:\n> > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion\n\n> \n> Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)\n> \n\nHmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].\n> One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...\n\nThe problem is not during the tuning phase but during the quick test one.\n\nThe testing code is quite simple, it multiplies two (large) polys using FFT:\n* first with the zn_poly code,\n* then with the underlying MPIR/GMP code (using KS)\nand compare the results.\n\nSo a potential culprit was the new MPIR FFT, but as the [same] bug seemed to happen with older version of MPIR and the FFT code was completely changed inbeetween, we can mostly rule out that MPIR is to blame.\nIt looks like we have to blame zn_poly, which is unfortunate because it is unmaintained.\n\nAnd remember I mentioned I get segfaults quite often in different places as well on Cygwin when building zn_poly during the tuning phase (and tuning the threshold for FFT IIRC).\nSo it does not seem completely crazy to blame zn_poly rather than MPIR for the other problem as well.\n\nOf course a good test would be to try to reproduce the error on the problematic systems but on top of GMP.\nIf the problem persists, I guess we can definitely rule out that MPIR is buggy.\n>",
    "created_at": "2013-01-11T09:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150469",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@nexttime](#comment:92):
> Replying to [@jpflori](#comment:91):
> > Ok it failed with older MPIR as well, please have a look at build logs here:
> > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion

> 
> Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)
> 

Hmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].
> One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...

The problem is not during the tuning phase but during the quick test one.

The testing code is quite simple, it multiplies two (large) polys using FFT:
* first with the zn_poly code,
* then with the underlying MPIR/GMP code (using KS)
and compare the results.

So a potential culprit was the new MPIR FFT, but as the [same] bug seemed to happen with older version of MPIR and the FFT code was completely changed inbeetween, we can mostly rule out that MPIR is to blame.
It looks like we have to blame zn_poly, which is unfortunate because it is unmaintained.

And remember I mentioned I get segfaults quite often in different places as well on Cygwin when building zn_poly during the tuning phase (and tuning the threshold for FFT IIRC).
So it does not seem completely crazy to blame zn_poly rather than MPIR for the other problem as well.

Of course a good test would be to try to reproduce the error on the problematic systems but on top of GMP.
If the problem persists, I guess we can definitely rule out that MPIR is buggy.
>



---

archive/issue_comments_150470.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nOther previous problems report:\nhttps://groups.google.com/d/msg/sage-devel/FP96-mDGkxE/hlcfcZksGZMJ\n(this one is quite scarce I admit).\n\nSo nobody with a Mac wants to test this with GMP, MPIR 2.4.x and MPIR 2.6.0?\nI think bsd.math is but i don't have access to it.",
    "created_at": "2013-01-11T10:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150470",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:94" align="right">comment:94</div>

Other previous problems report:
https://groups.google.com/d/msg/sage-devel/FP96-mDGkxE/hlcfcZksGZMJ
(this one is quite scarce I admit).

So nobody with a Mac wants to test this with GMP, MPIR 2.4.x and MPIR 2.6.0?
I think bsd.math is but i don't have access to it.



---

archive/issue_comments_150471.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nOther problems reports here:\nhttps://groups.google.com/d/msg/sage-devel/2ulJLgc6-ao/zrzZZ7_uOikJ\n\nThe last one is similar to the one I evoked on Cygwin.\nSo I guess I'll have to gdb/valgrind it on Cygwin.\nBut I'm ok with Bill's cosmic ray explanation as well.",
    "created_at": "2013-01-11T10:08:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150471",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:95" align="right">comment:95</div>

Other problems reports here:
https://groups.google.com/d/msg/sage-devel/2ulJLgc6-ao/zrzZZ7_uOikJ

The last one is similar to the one I evoked on Cygwin.
So I guess I'll have to gdb/valgrind it on Cygwin.
But I'm ok with Bill's cosmic ray explanation as well.



---

archive/issue_comments_150472.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@jpflori](#comment:93):\n> Replying to [@nexttime](#comment:92):\n> > Replying to [@jpflori](#comment:91):\n> > > Ok it failed with older MPIR as well, please have a look at build logs here:\n> > > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion\n\n> > \n> > Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)\n> > \n\n> Hmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].\n\nI didn't mean to say it was MPIR's fault.  (I agree it's something with zn_poly['s tuning], perhaps in conjunction with a specific GCC version [and probably also the OS].  Note that the MacOSs most probably have GCC 4.6.3 [from our spkg] in common.]\n\n\n\n\n> > One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...\n\n> The problem is not during the tuning phase but during the quick test one.\n\nWell, it shows up during the tests, but presumably the tuning generates invalid code (or code triggering a compiler bug) under certain circumstances, like perhaps heavy load.",
    "created_at": "2013-01-11T10:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150472",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@jpflori](#comment:93):
> Replying to [@nexttime](#comment:92):
> > Replying to [@jpflori](#comment:91):
> > > Ok it failed with older MPIR as well, please have a look at build logs here:
> > > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion

> > 
> > Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)
> > 

> Hmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].

I didn't mean to say it was MPIR's fault.  (I agree it's something with zn_poly['s tuning], perhaps in conjunction with a specific GCC version [and probably also the OS].  Note that the MacOSs most probably have GCC 4.6.3 [from our spkg] in common.]




> > One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...

> The problem is not during the tuning phase but during the quick test one.

Well, it shows up during the tests, but presumably the tuning generates invalid code (or code triggering a compiler bug) under certain circumstances, like perhaps heavy load.



---

archive/issue_comments_150473.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nI agree, my point is that the zn_poly problem should not be dealt with here and should not prevent the upgrade of MPIR if it is unrelated.",
    "created_at": "2013-01-11T10:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150473",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:97" align="right">comment:97</div>

I agree, my point is that the zn_poly problem should not be dealt with here and should not prevent the upgrade of MPIR if it is unrelated.



---

archive/issue_comments_150474.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nNor should the clang stuff in my opinion, it should be on a follow-up ticket.\n\nBut we should fix the xmlto problem\n\nAnd patch the patches so that there is no offset, only changing the line numbers (but not the timestamps et al. in order to keep the hg history small if possible), if someone wants to write a script to do that automatically I'll be more than happy.",
    "created_at": "2013-01-11T10:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150474",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:98" align="right">comment:98</div>

Nor should the clang stuff in my opinion, it should be on a follow-up ticket.

But we should fix the xmlto problem

And patch the patches so that there is no offset, only changing the line numbers (but not the timestamps et al. in order to keep the hg history small if possible), if someone wants to write a script to do that automatically I'll be more than happy.



---

archive/issue_comments_150475.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@jpflori](#comment:73):\n> In fact the spkg-install calls make tune so we should be affected by the problems with GCC 4.6.3 onward Drew Sutherland mentioned, strange.\n\nOk, we don't have that one because we fixed it at #8771.",
    "created_at": "2013-01-11T10:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150475",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@jpflori](#comment:73):
> In fact the spkg-install calls make tune so we should be affected by the problems with GCC 4.6.3 onward Drew Sutherland mentioned, strange.

Ok, we don't have that one because we fixed it at #8771.



---

archive/issue_comments_150476.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@nexttime](#comment:96):\n> Replying to [@jpflori](#comment:93):\n> > Replying to [@nexttime](#comment:92):\n> > > Replying to [@jpflori](#comment:91):\n> > > > Ok it failed with older MPIR as well, please have a look at build logs here:\n> > > > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion\n\n> > > \n> > > Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)\n> > > \n\n> > Hmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].\n\n> \n> I didn't mean to say it was MPIR's fault.  (I agree it's something with zn_poly['s tuning], perhaps in conjunction with a specific GCC version [and probably also the OS].  Note that the MacOSs most probably have GCC 4.6.3 [from our spkg] in common.]\n> \n> \n\n> \n> > > One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...\n\n> > The problem is not during the tuning phase but during the quick test one.\n\n> \n> Well, it shows up during the tests, but presumably the tuning generates invalid code (or code triggering a compiler bug) under certain circumstances, like perhaps heavy load.\n> \n\nFrom what I see after a quick look, the tuning process only chooses thresholds, and does not generates code.\nSo maybe the code is genuinely buggy for certain random values, or there is a compiler bug (but from what we gathered I wouldn't say we always use the same GCC, bugs appear at least with FSF GCC 4.6.3 on different Os X and with Cywgin GCC 4.5.3 (maybe with later FSF GCC don't remember) on ... Cygwin) that generates code which fails on certain random values.\n\nOr maybe under heavy load, the thresholds get chosen so that code is called on value ranges it is not meant for and boom (but only on Os X and Cygwin, if that was to be true on Linuces I guess we would have seen it before).",
    "created_at": "2013-01-11T10:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150476",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@nexttime](#comment:96):
> Replying to [@jpflori](#comment:93):
> > Replying to [@nexttime](#comment:92):
> > > Replying to [@jpflori](#comment:91):
> > > > Ok it failed with older MPIR as well, please have a look at build logs here:
> > > > https://groups.google.com/d/topic/sage-release/ngw_EiBaY0Q/discussion

> > > 
> > > Well, that's a single failure, [although] in `nuss_mul()`[too] (and on an Apple *of course<sup>TM</sup>*)... ;-)
> > > 

> > Hmmm, the reports on sage-release for 5.6.beta3 also point that there is a problem with zn_poly on top of MPIR 2.4.x [on OS X], and I don't know why but I have strong suspicion it could be in nuss_mul [as well].

> 
> I didn't mean to say it was MPIR's fault.  (I agree it's something with zn_poly['s tuning], perhaps in conjunction with a specific GCC version [and probably also the OS].  Note that the MacOSs most probably have GCC 4.6.3 [from our spkg] in common.]
> 
> 

> 
> > > One would probably have to run *the tuning* multiple times under heavy load to reproduce this; haven't at all looked at the code...

> > The problem is not during the tuning phase but during the quick test one.

> 
> Well, it shows up during the tests, but presumably the tuning generates invalid code (or code triggering a compiler bug) under certain circumstances, like perhaps heavy load.
> 

From what I see after a quick look, the tuning process only chooses thresholds, and does not generates code.
So maybe the code is genuinely buggy for certain random values, or there is a compiler bug (but from what we gathered I wouldn't say we always use the same GCC, bugs appear at least with FSF GCC 4.6.3 on different Os X and with Cywgin GCC 4.5.3 (maybe with later FSF GCC don't remember) on ... Cygwin) that generates code which fails on certain random values.

Or maybe under heavy load, the thresholds get chosen so that code is called on value ranges it is not meant for and boom (but only on Os X and Cygwin, if that was to be true on Linuces I guess we would have seen it before).



---

archive/issue_comments_150477.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@jpflori](#comment:100):\n> Or maybe under heavy load, the thresholds get chosen so that code is called on value ranges it is not meant for and boom (but only on Os X and Cygwin, if that was to be true on Linuces I guess we would have seen it before).\n\nI just did\n\n```sh\nfor ((r=1;r<=100;r=r+1)); do\n    tune/tune > src/tuning.c && make && test/test -quick nuss_mul || break\ndone\n```\non bsd.math, with an older version of Sage (but GCC 4.6.3) though, and also zn_poly-0.9.**p5** (not sure whether that matters...).\n\nSince \"unfortunately\" the sysload happened to be low, I started building Sage in parallel during the 50th run, but that didn't \"help\" either. 8-)\n\nI'll probably retry with the `.p9`...\n\nCeterum censeo we should open another ticket for the zn_poly issue.",
    "created_at": "2013-01-11T12:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150477",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@jpflori](#comment:100):
> Or maybe under heavy load, the thresholds get chosen so that code is called on value ranges it is not meant for and boom (but only on Os X and Cygwin, if that was to be true on Linuces I guess we would have seen it before).

I just did

```sh
for ((r=1;r<=100;r=r+1)); do
    tune/tune > src/tuning.c && make && test/test -quick nuss_mul || break
done
```
on bsd.math, with an older version of Sage (but GCC 4.6.3) though, and also zn_poly-0.9.**p5** (not sure whether that matters...).

Since "unfortunately" the sysload happened to be low, I started building Sage in parallel during the 50th run, but that didn't "help" either. 8-)

I'll probably retry with the `.p9`...

Ceterum censeo we should open another ticket for the zn_poly issue.



---

archive/issue_comments_150478.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@nexttime](#comment:101):\n> I just did\n> \n> ```sh\n> for ((r=1;r<=100;r=r+1)); do\n>     tune/tune > src/tuning.c && make && test/test -quick nuss_mul || break\n> done\n> ```\n> on bsd.math, with an older version of Sage (but GCC 4.6.3) though, and also zn_poly-0.9.**p5** (not sure whether that matters...).\n> \n> Since \"unfortunately\" the sysload happened to be low, I started building Sage in parallel during the 50th run, but that didn't \"help\" either. 8-)\n\nI retried with Sage 5.5 (which comes with zn_poly 0.9.p9), `.../test -quick all` and a higher sysload, but couldn't reproduce the test failure either.  (Perhaps bsd.math is still too fast...)",
    "created_at": "2013-01-11T15:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150478",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@nexttime](#comment:101):
> I just did
> 
> ```sh
> for ((r=1;r<=100;r=r+1)); do
>     tune/tune > src/tuning.c && make && test/test -quick nuss_mul || break
> done
> ```
> on bsd.math, with an older version of Sage (but GCC 4.6.3) though, and also zn_poly-0.9.**p5** (not sure whether that matters...).
> 
> Since "unfortunately" the sysload happened to be low, I started building Sage in parallel during the 50th run, but that didn't "help" either. 8-)

I retried with Sage 5.5 (which comes with zn_poly 0.9.p9), `.../test -quick all` and a higher sysload, but couldn't reproduce the test failure either.  (Perhaps bsd.math is still too fast...)



---

archive/issue_comments_150479.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nUpdated spkg fixing the offset of configure.patch.\n\nFrom my point of view the last thing to fix in this ticket is the xmlto one.\n\nI'd prefer to postpone the clang one to another ticket and the zn_poly as well.",
    "created_at": "2013-01-11T15:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150479",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

Updated spkg fixing the offset of configure.patch.

From my point of view the last thing to fix in this ticket is the xmlto one.

I'd prefer to postpone the clang one to another ticket and the zn_poly as well.



---

archive/issue_comments_150480.json:
```json
{
    "body": "Attachment: **[mpir-2.6.0.p0.diff.gz](https://github.com/sagemath/sage/files/ticket13137/mpir-2.6.0.p0.diff.gz)**\n\nSpkg diff, for review only.",
    "created_at": "2013-01-11T15:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150480",
    "user": "https://github.com/jpflori"
}
```

Attachment: **[mpir-2.6.0.p0.diff.gz](https://github.com/sagemath/sage/files/ticket13137/mpir-2.6.0.p0.diff.gz)**

Spkg diff, for review only.



---

archive/issue_comments_150481.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAbout xmlto, I cannot reproduce the problem on my Ubuntu 12.04.1 x86_64.\nI did not have installed before, what was correctly detected, so I just installed it and it is detected by configure but it does not get used when I just issue make in a fresh MPIR dir or through Sage's spkg mecanism.",
    "created_at": "2013-01-11T15:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150481",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

About xmlto, I cannot reproduce the problem on my Ubuntu 12.04.1 x86_64.
I did not have installed before, what was correctly detected, so I just installed it and it is detected by configure but it does not get used when I just issue make in a fresh MPIR dir or through Sage's spkg mecanism.



---

archive/issue_comments_150482.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI spoke too fast, it gets used when installing with Sage's spkg mechanism and just works, but not in a plain upstream dir...",
    "created_at": "2013-01-11T15:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150482",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

I spoke too fast, it gets used when installing with Sage's spkg mechanism and just works, but not in a plain upstream dir...



---

archive/issue_comments_150483.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThat must be some timestamp autotools magic because we patch some autotools file...",
    "created_at": "2013-01-11T16:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150483",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

That must be some timestamp autotools magic because we patch some autotools file...



---

archive/issue_comments_150484.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOr not, patching upstream with our patches and then configuring and building does not trigger the use of xmlto (although it is detected).",
    "created_at": "2013-01-11T16:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150484",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

Or not, patching upstream with our patches and then configuring and building does not trigger the use of xmlto (although it is detected).



---

archive/issue_comments_150485.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOk, my bad, I must have changed some timestamp while tarring untarring stuff whence the rebuild of the man pages with the spkg (and not with upstream correctly untarred).\nCorrected spkg coming soon.",
    "created_at": "2013-01-11T16:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150485",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

Ok, my bad, I must have changed some timestamp while tarring untarring stuff whence the rebuild of the man pages with the spkg (and not with upstream correctly untarred).
Corrected spkg coming soon.



---

archive/issue_comments_150486.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe just uploaded spkg should avoid using xmlto even if it's installed (and broken :)).",
    "created_at": "2013-01-11T16:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150486",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

The just uploaded spkg should avoid using xmlto even if it's installed (and broken :)).



---

archive/issue_comments_150487.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nWith the old versions of the spkgs (the ones included in 5.6.beta3), on an OS X 10.8.2 machine: in one window, I can load the system by running `./sage -tp devel/sage/sage`. Then in another window, I can build zn_poly, or test it by running `./test nuss_mul` from `spkg/build/zn_poly-0.9.p9/src/test/`.\n\n- if the system is loaded *when zn_poly is built* (using `./sage -f -s spkg/standard/zn_poly-0.9.p9`), then the test fails frequently. It doesn't matter whether the system is loaded while running the test, only if it was loaded while installing the spkg.\n\n- on the other hand, if the system is not loaded when installing the spkg, the test seems to pass consistently (regardless of the load while the test is being run).\n\nI haven't tried this with any new versions of the spkgs.",
    "created_at": "2013-01-11T19:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150487",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:0" align="right">comment:0</div>

With the old versions of the spkgs (the ones included in 5.6.beta3), on an OS X 10.8.2 machine: in one window, I can load the system by running `./sage -tp devel/sage/sage`. Then in another window, I can build zn_poly, or test it by running `./test nuss_mul` from `spkg/build/zn_poly-0.9.p9/src/test/`.

- if the system is loaded *when zn_poly is built* (using `./sage -f -s spkg/standard/zn_poly-0.9.p9`), then the test fails frequently. It doesn't matter whether the system is loaded while running the test, only if it was loaded while installing the spkg.

- on the other hand, if the system is not loaded when installing the spkg, the test seems to pass consistently (regardless of the load while the test is being run).

I haven't tried this with any new versions of the spkgs.



---

archive/issue_comments_150488.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nJohn, could you please save the tuning parameters (`.../zn_poly-0.9.p9/src/src/tuning.c`) from [a] failing test[s]?",
    "created_at": "2013-01-11T19:38:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150488",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

John, could you please save the tuning parameters (`.../zn_poly-0.9.p9/src/src/tuning.c`) from [a] failing test[s]?



---

archive/issue_comments_150489.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nReplying to [@nexttime](#comment:111):\n> John, could you please save the tuning parameters (`.../zn_poly-0.9.p9/src/src/tuning.c`) from [a] failing test[s]?\n\nI saved it. Did you want me to do anything with it?  ;)\n\n- from a passing test (built on a lightly loaded system): [http://sage.math.washington.edu/home/palmieri/misc/tuning.c-PASSED](http://sage.math.washington.edu/home/palmieri/misc/tuning.c-PASSED)\n- from a failing test (heavily loaded): [http://sage.math.washington.edu/home/palmieri/misc/tuning.c-FAILED](http://sage.math.washington.edu/home/palmieri/misc/tuning.c-FAILED)\n- the difference: [http://sage.math.washington.edu/home/palmieri/misc/tuning.c.diff](http://sage.math.washington.edu/home/palmieri/misc/tuning.c.diff)",
    "created_at": "2013-01-11T20:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150489",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:112" align="right">comment:112</div>

Replying to [@nexttime](#comment:111):
> John, could you please save the tuning parameters (`.../zn_poly-0.9.p9/src/src/tuning.c`) from [a] failing test[s]?

I saved it. Did you want me to do anything with it?  ;)

- from a passing test (built on a lightly loaded system): [http://sage.math.washington.edu/home/palmieri/misc/tuning.c-PASSED](http://sage.math.washington.edu/home/palmieri/misc/tuning.c-PASSED)
- from a failing test (heavily loaded): [http://sage.math.washington.edu/home/palmieri/misc/tuning.c-FAILED](http://sage.math.washington.edu/home/palmieri/misc/tuning.c-FAILED)
- the difference: [http://sage.math.washington.edu/home/palmieri/misc/tuning.c.diff](http://sage.math.washington.edu/home/palmieri/misc/tuning.c.diff)



---

archive/issue_comments_150490.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI opened #13947 for the zn_poly issue, I suggest we continue to investigate the issue there.\n\nSame at #13948 for the clang issue.",
    "created_at": "2013-01-11T22:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150490",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

I opened #13947 for the zn_poly issue, I suggest we continue to investigate the issue there.

Same at #13948 for the clang issue.



---

archive/issue_comments_150491.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nJean-Pierre, do you intend to make any further changes to the spkg here?  (Or, is there anything left which has to be done here, as of now?)",
    "created_at": "2013-01-12T08:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150491",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

Jean-Pierre, do you intend to make any further changes to the spkg here?  (Or, is there anything left which has to be done here, as of now?)



---

archive/issue_comments_150492.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't see anything to change now, but I may have missed something.",
    "created_at": "2013-01-12T10:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150492",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't see anything to change now, but I may have missed something.



---

archive/issue_comments_150493.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nReplying to [@jpflori](#comment:115):\n> I don't see anything to change now, but I may have missed something.\n\nI'll repeat some tests with the \"final\" spkg (although I can't on Cygwin), do some checks, then I'll give it positive review I think.",
    "created_at": "2013-01-12T10:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150493",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:116" align="right">comment:116</div>

Replying to [@jpflori](#comment:115):
> I don't see anything to change now, but I may have missed something.

I'll repeat some tests with the "final" spkg (although I can't on Cygwin), do some checks, then I'll give it positive review I think.



---

archive/issue_comments_150494.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nA few (IMHO minor) things:\n\n```diff\n\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -19,7 +19,7 @@\n # detecting filename changes. See Trac #13137.\n # This fix can (and will have to) be removed once integrated upstream.\n echo \"Renaming *,asm files to *.asm...\"\n-mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm\n+mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm &&\n mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm\n if [ $? -ne 0 ]; then\n     echo >&2 \"Error: moving *,asm files failed.\"\n@@ -202,15 +202,15 @@\n     echo \"Building a reduced version of MPIR to bootstrap GCC.\"\n     echo \"MPIR will later get rebuilt (with the C++ interface and static libraries\"\n     echo \"enabled) using the new compiler.\"\n-    MPIR_CONFIGURE=\"--disable-cxx --disable-static $MPIR_CONFIGURE\"\n+    MPIR_CONFIGURE=\"$MPIR_CONFIGURE --disable-cxx --disable-static\"\n     SAGE_FAT_BINARY=no\n else\n     # Also build the static library to be used by e.g. ECM\n     # unless we are on Cygwin where we can only build a shared\n-    # or a static library but not both\n+    # or a static library but not both:\n     if [ \"$UNAME\" = \"CYGWIN\" ]; then\n-        echo \"Building MPIR with the C++ interface.\"\n-        MPIR_CONFIGURE=\"--enable-cxx --disable-static $MPIR_CONFIGURE\"\n+        echo \"Building MPIR with the C++ interface and (only) shared libraries.\"\n+        MPIR_CONFIGURE=\"--enable-cxx $MPIR_CONFIGURE --disable-static\"\n     else\n         echo \"Building MPIR with the C++ interface and (also) static libraries.\"\n         MPIR_CONFIGURE=\"--enable-cxx --enable-static $MPIR_CONFIGURE\"\n```\n\n* The date of the changelog entry. ;-)\n\n* The current treatment of `clang` in `spkg-install` (as mentioned earlier), but we can postpone changes to that to #13948 (although pretty unrelated, as it is only necessary to slightly patch `acinclude.m4` and `configure`).",
    "created_at": "2013-01-12T13:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150494",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:7" align="right">comment:7</div>

A few (IMHO minor) things:

```diff

diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -19,7 +19,7 @@
 # detecting filename changes. See Trac #13137.
 # This fix can (and will have to) be removed once integrated upstream.
 echo "Renaming *,asm files to *.asm..."
-mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm
+mv mpn/x86/p6/addmul_1,asm mpn/x86/p6/addmul_1.asm &&
 mv mpn/x86/p6/submul_1,asm mpn/x86/p6/submul_1.asm
 if [ $? -ne 0 ]; then
     echo >&2 "Error: moving *,asm files failed."
@@ -202,15 +202,15 @@
     echo "Building a reduced version of MPIR to bootstrap GCC."
     echo "MPIR will later get rebuilt (with the C++ interface and static libraries"
     echo "enabled) using the new compiler."
-    MPIR_CONFIGURE="--disable-cxx --disable-static $MPIR_CONFIGURE"
+    MPIR_CONFIGURE="$MPIR_CONFIGURE --disable-cxx --disable-static"
     SAGE_FAT_BINARY=no
 else
     # Also build the static library to be used by e.g. ECM
     # unless we are on Cygwin where we can only build a shared
-    # or a static library but not both
+    # or a static library but not both:
     if [ "$UNAME" = "CYGWIN" ]; then
-        echo "Building MPIR with the C++ interface."
-        MPIR_CONFIGURE="--enable-cxx --disable-static $MPIR_CONFIGURE"
+        echo "Building MPIR with the C++ interface and (only) shared libraries."
+        MPIR_CONFIGURE="--enable-cxx $MPIR_CONFIGURE --disable-static"
     else
         echo "Building MPIR with the C++ interface and (also) static libraries."
         MPIR_CONFIGURE="--enable-cxx --enable-static $MPIR_CONFIGURE"
```

* The date of the changelog entry. ;-)

* The current treatment of `clang` in `spkg-install` (as mentioned earlier), but we can postpone changes to that to #13948 (although pretty unrelated, as it is only necessary to slightly patch `acinclude.m4` and `configure`).



---

archive/issue_comments_150495.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nP.S.:  The spkg is otherwise clean. :-)",
    "created_at": "2013-01-12T13:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150495",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

P.S.:  The spkg is otherwise clean. :-)



---

archive/issue_comments_150496.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor completeness:\n\n```diff\n\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -50,11 +50,11 @@\n \n == Changelog ==\n \n-=== mpir-2.6.0.p0 (Jean-Pierre Flori, 25 November 2012) ===\n+=== mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013) ===\n  * Trac #13137: Update to MPIR 2.6.0.\n  * Modify spkg-install to rename *,asm files to *.asm files.\n  * Remove -Wl,-z,noexecstack fix which has been integrated upstream.\n- * Remove old code about 32 bits Apple Darwin and use upstream fix.\n+ * Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.\n \n === mpir-2.5.2.p0 (John Palmieri, 3 October 2012) ===\n  * Trac #13137: Update to MPIR 2.5.2.\n```\n\nAn updated spkg with the above changes (to `spkg-install` and `SPKG.txt`) is [here](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg), md5sum `ec21b55dce699d3c8ddf0492e1413107`.",
    "created_at": "2013-01-12T14:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150496",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:9" align="right">comment:9</div>

For completeness:

```diff

diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -50,11 +50,11 @@
 
 == Changelog ==
 
-=== mpir-2.6.0.p0 (Jean-Pierre Flori, 25 November 2012) ===
+=== mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013) ===
  * Trac #13137: Update to MPIR 2.6.0.
  * Modify spkg-install to rename *,asm files to *.asm files.
  * Remove -Wl,-z,noexecstack fix which has been integrated upstream.
- * Remove old code about 32 bits Apple Darwin and use upstream fix.
+ * Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.
 
 === mpir-2.5.2.p0 (John Palmieri, 3 October 2012) ===
  * Trac #13137: Update to MPIR 2.5.2.
```

An updated spkg with the above changes (to `spkg-install` and `SPKG.txt`) is [here](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg), md5sum `ec21b55dce699d3c8ddf0492e1413107`.



---

archive/issue_comments_150497.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Leif Leonhardy**",
    "created_at": "2013-01-12T14:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150497",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Leif Leonhardy**



---

archive/issue_comments_150498.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,35 @@\n \n The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.\n \n-In addition to using one of the above spkg,\n-apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).\n+In addition to using one of these spkgs, apply the patch below to the SAGE_ROOT repository.\n \n This also requires the fixed LinBox spkg from #13755.\n+\n+---\n+\n+**New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)\n+\n+**md5sum:** `ec21b55dce699d3c8ddf0492e1413107  mpir-2.6.0.p0.spkg`\n+\n+### mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013)\n+* Trac #13137: Update to MPIR 2.6.0.\n+* Modify `spkg-install` to rename `*,asm` files to `*.asm` files.\n+* Remove `-Wl,-z,noexecstack` fix which has been integrated upstream.\n+* Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.\n+\n+### mpir-2.5.2.p0 (John Palmieri, 3 October 2012)\n+* Trac #13137: Update to MPIR 2.5.2.\n+* Remove the patch `patches/yasm__tools__re2c__code.c.patch`.\n+* Do not use clang, which fails to compile MPIR, on OS X.\n+\n+### mpir-2.4.0.p7 (Karl-Dieter Crisman, Jean-Pierre Flori, 1 August 2012)\n+* Trac #12115: let MPIR build on Cygwin.\n+* Only build the shared version of the library on Cygwin.\n+* Export `ABI=32` on Cygwin.\n+\n+\n+\n+\n+**Apply:**\n+* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.\n+\n``````\n",
    "created_at": "2013-01-13T16:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150498",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,35 @@
 
 The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.
 
-In addition to using one of the above spkg,
-apply to SAGE_ROOT [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz).
+In addition to using one of these spkgs, apply the patch below to the SAGE_ROOT repository.
 
 This also requires the fixed LinBox spkg from #13755.
+
+---
+
+**New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)
+
+**md5sum:** `ec21b55dce699d3c8ddf0492e1413107  mpir-2.6.0.p0.spkg`
+
+### mpir-2.6.0.p0 (Jean-Pierre Flori, 12 January 2013)
+* Trac #13137: Update to MPIR 2.6.0.
+* Modify `spkg-install` to rename `*,asm` files to `*.asm` files.
+* Remove `-Wl,-z,noexecstack` fix which has been integrated upstream.
+* Remove old code about 32 bits Apple Darwin and use slightly modified upstream fix.
+
+### mpir-2.5.2.p0 (John Palmieri, 3 October 2012)
+* Trac #13137: Update to MPIR 2.5.2.
+* Remove the patch `patches/yasm__tools__re2c__code.c.patch`.
+* Do not use clang, which fails to compile MPIR, on OS X.
+
+### mpir-2.4.0.p7 (Karl-Dieter Crisman, Jean-Pierre Flori, 1 August 2012)
+* Trac #12115: let MPIR build on Cygwin.
+* Only build the shared version of the library on Cygwin.
+* Export `ABI=32` on Cygwin.
+
+
+
+
+**Apply:**
+* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.
+
``````




---

archive/issue_comments_150499.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI've put the link to the spkg with my minor corrections into the description.",
    "created_at": "2013-01-13T16:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150499",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:1" align="right">comment:1</div>

I've put the link to the spkg with my minor corrections into the description.



---

archive/issue_events_182509.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-01-13T16:37:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "title_is": "Upgrade MPIR to 2.6.0",
    "title_was": "upgrade MPIR to 2.6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182509"
}
```



---

archive/issue_events_182510.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-01-13T16:37:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182510"
}
```



---

archive/issue_events_182511.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2013-01-13T16:37:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182511"
}
```



---

archive/issue_events_182512.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-13T20:11:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182512"
}
```



---

archive/issue_events_182513.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-13T20:11:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182513"
}
```



---

archive/issue_comments_150500.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,10 @@\n As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.\n-Upgrading to 2.6.0 fixes both issue.\n+Upgrading to 2.6.0 fixes both issues.\n \n-Here are some (preliminary?) spkgs of MPIR version since 2.4.x:\n-* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg),\n-* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg),\n-* [http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg) (based on Cygwin fix of #12115).\n+This requires the fixed LinBox spkg from #13755.\n \n-The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.\n-\n-In addition to using one of these spkgs, apply the patch below to the SAGE_ROOT repository.\n-\n-This also requires the fixed LinBox spkg from #13755.\n-\n----\n+**Apply:**\n+* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.\n \n **New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)\n \n@@ -33,10 +25,3 @@\n * Trac #12115: let MPIR build on Cygwin.\n * Only build the shared version of the library on Cygwin.\n * Export `ABI=32` on Cygwin.\n-\n-\n-\n-\n-**Apply:**\n-* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.\n-\n``````\n",
    "created_at": "2013-01-13T20:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150500",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,10 @@
 As the summary says. Also, mpir-2.4.0.p5.spkg fails self-tests, moreover it's old.
-Upgrading to 2.6.0 fixes both issue.
+Upgrading to 2.6.0 fixes both issues.
 
-Here are some (preliminary?) spkgs of MPIR version since 2.4.x:
-* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.1.p0.spkg),
-* [http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/mpir-2.5.2.p0.spkg),
-* [http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/jpflori/mpir-2.6.0.p0.spkg) (based on Cygwin fix of #12115).
+This requires the fixed LinBox spkg from #13755.
 
-The different spkg were upgraded to the quoted versions, with files removed as described by SPKG.txt, and patches rebased except the yasm patch which seems no longer necessary was removed.
-
-In addition to using one of these spkgs, apply the patch below to the SAGE_ROOT repository.
-
-This also requires the fixed LinBox spkg from #13755.
-
----
+**Apply:**
+* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.
 
 **New spkg:** [http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg](http://boxen.math.washington.edu/home/leif/Sage/spkgs/mpir-2.6.0.p0.spkg)
 
@@ -33,10 +25,3 @@
 * Trac #12115: let MPIR build on Cygwin.
 * Only build the shared version of the library on Cygwin.
 * Export `ABI=32` on Cygwin.
-
-
-
-
-**Apply:**
-* [attachment: trac_13137-stopgap.patch](https://github.com/sagemath/sage/files/ticket13137/trac_13137-stopgap.patch.gz) to the SAGE_ROOT repository.
-
``````




---

archive/issue_comments_150501.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer, Leif Leonhardy** to **Jeroen Demeyer, Leif Leonhardy, John Palmieri, R. Andrew Ohana, Karl-Dieter Crisman**",
    "created_at": "2013-01-14T14:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150501",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Jeroen Demeyer, Leif Leonhardy** to **Jeroen Demeyer, Leif Leonhardy, John Palmieri, R. Andrew Ohana, Karl-Dieter Crisman**



---

archive/issue_comments_150502.json:
```json
{
    "body": "Merged: **sage-5.7.beta0**",
    "created_at": "2013-01-21T21:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13137#issuecomment-150502",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta0**



---

archive/issue_events_182514.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:07:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182514"
}
```



---

archive/issue_events_182515.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:07:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13137",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13137#event-182515"
}
```
