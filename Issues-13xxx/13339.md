# Issue 13339: wrapper_*.pyx fail to build on Cygwin

archive/issues_013167.json:
```json
{
    "assignees": [],
    "body": "Same problem as in #13336 with _ _ imp _ _ problems.\nAs a fix, gen_interpreter.py now produces header files for the C interpreters.\n\nApply [attachment: trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)\n\nCC:  @dimpase\n\nKeywords: **cygwin**\n\nReviewer: **Dmitrii Pasechnik**\n\nAuthor: **Jean-Pierre Flori**\n\nMerged: **sage-5.3.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13339_\n\n",
    "closed_at": "2012-08-23T12:47:33Z",
    "created_at": "2012-08-04T21:04:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "wrapper_*.pyx fail to build on Cygwin",
    "type": "issue",
    "updated_at": "2012-08-23T12:47:33Z",
    "url": "https://github.com/sagemath/sage/issues/13339",
    "user": "https://github.com/sagetrac-jpflori"
}
```
Same problem as in #13336 with _ _ imp _ _ problems.
As a fix, gen_interpreter.py now produces header files for the C interpreters.

Apply [attachment: trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)

CC:  @dimpase

Keywords: **cygwin**

Reviewer: **Dmitrii Pasechnik**

Author: **Jean-Pierre Flori**

Merged: **sage-5.3.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/13339_





---

archive/issue_events_170580.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-04T21:04:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "milestone_number": null,
    "milestone_title": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170580"
}
```



---

archive/issue_events_170581.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-04T21:04:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "component: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170581"
}
```



---

archive/issue_events_170582.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-04T21:04:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170582"
}
```



---

archive/issue_events_170583.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-04T21:04:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170583"
}
```



---

archive/issue_comments_157036.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nhere a fix will be a bit more involved. What happens is that `ext/interpreters/wrapper/wrapper_rdf.c`, which is Cython-autogenerated from the .pyx file, which in turn is generated by `ext/gen_interpreters.py`, has the line\n\n```\n __PYX_EXTERN_C DL_IMPORT(double) interp_rdf(double *, double *, PyObject **, double *, int *);\n```\nwhich should be \n\n```\n __PYX_EXTERN_C double interp_rdf(double *, double *, PyObject **, double *, int *);\n```\n\nAnd the same holds for `ext/interpreters/wrapper/wrapper_cdf.c` (and `ext/interpreters/wrapper/wrapper_rr.c`, `..._py.c`, `..._el.c`), just replace `rdf` (resp. `rr`, etc.) by `cdf` in every place above.\n\nAfter I do the corresponding changes in these C files, ./sage -b completes. \n\n---\n\nNow the attempt to start Sage ends with \n\n```\nTraceback (most recent call last):\n  File \"/home/Dima/sage-5.2.rc1/local/bin/sage-ipython\", line 18, in <module>\n    import IPython\nImportError: No module named IPython\n```\n(which is OK, I just have to run `make build`).",
    "created_at": "2012-08-05T05:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157036",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'>Comment 1:</a>
here a fix will be a bit more involved. What happens is that `ext/interpreters/wrapper/wrapper_rdf.c`, which is Cython-autogenerated from the .pyx file, which in turn is generated by `ext/gen_interpreters.py`, has the line

```
 __PYX_EXTERN_C DL_IMPORT(double) interp_rdf(double *, double *, PyObject **, double *, int *);
```
which should be 

```
 __PYX_EXTERN_C double interp_rdf(double *, double *, PyObject **, double *, int *);
```

And the same holds for `ext/interpreters/wrapper/wrapper_cdf.c` (and `ext/interpreters/wrapper/wrapper_rr.c`, `..._py.c`, `..._el.c`), just replace `rdf` (resp. `rr`, etc.) by `cdf` in every place above.

After I do the corresponding changes in these C files, ./sage -b completes. 

---

Now the attempt to start Sage ends with 

```
Traceback (most recent call last):
  File "/home/Dima/sage-5.2.rc1/local/bin/sage-ipython", line 18, in <module>
    import IPython
ImportError: No module named IPython
```
(which is OK, I just have to run `make build`).



---

archive/issue_comments_157037.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI've already a fix which consists in generating h files for the interp_*.c files which get included in wrapper_*.c files and avoid the Cython/import/_ _ imp _ _ stuff as desrcibed in the [CygwinPort](../wiki/CygwinPort) page, I'll post it a little later.\n\nThe IPython stuff was expected IIRC.\nI'll confirm that later as well, but were closing to finishing the build and starting Sage.",
    "created_at": "2012-08-05T07:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157037",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:2'>Comment 2:</a>
I've already a fix which consists in generating h files for the interp_*.c files which get included in wrapper_*.c files and avoid the Cython/import/_ _ imp _ _ stuff as desrcibed in the [CygwinPort](../wiki/CygwinPort) page, I'll post it a little later.

The IPython stuff was expected IIRC.
I'll confirm that later as well, but were closing to finishing the build and starting Sage.



---

archive/issue_comments_157038.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [jpflori](#comment%3A2):\n\n> The IPython stuff was expected IIRC.\n\nSure. By the way, I just encountered a GAP-specific problem (some `ln` hack, no longer needed, fails), which is easy to fix, but needs a new spkg. Have you dealt with this too? Or it worked for you without a problem? (In case, I can open a ticket for this and post a new spkg, just let me know).",
    "created_at": "2012-08-05T08:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157038",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [jpflori](#comment%3A2):

> The IPython stuff was expected IIRC.

Sure. By the way, I just encountered a GAP-specific problem (some `ln` hack, no longer needed, fails), which is easy to fix, but needs a new spkg. Have you dealt with this too? Or it worked for you without a problem? (In case, I can open a ticket for this and post a new spkg, just let me know).



---

archive/issue_comments_157039.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nand one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.\n\nProbably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/`",
    "created_at": "2012-08-05T08:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157039",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'>Comment 4:</a>
and one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.

Probably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/`



---

archive/issue_comments_157040.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@dimpase](#comment%3A3):\n> Replying to [jpflori](#comment%3A2):\n> \n> > The IPython stuff was expected IIRC.\n\n> Sure. By the way, I just encountered a GAP-specific problem (some `ln` hack, no longer needed, fails), which is easy to fix, but needs a new spkg. Have you dealt with this too? Or it worked for you without a problem? (In case, I can open a ticket for this and post a new spkg, just let me know). \n\nOh yeah I now remember about that problem.\nWe used to create a symlink from gap to gap.exe (or conversely) but my Cygwin was making the name conversion automatically and the symlink creation failed.\n\nAnyway, let's create another ticket for that.\nNot sure if the trick must be completely discrded or tthe error ignored if it fails.\n\nThis is now #13341.",
    "created_at": "2012-08-05T09:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157040",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@dimpase](#comment%3A3):
> Replying to [jpflori](#comment%3A2):
> 
> > The IPython stuff was expected IIRC.

> Sure. By the way, I just encountered a GAP-specific problem (some `ln` hack, no longer needed, fails), which is easy to fix, but needs a new spkg. Have you dealt with this too? Or it worked for you without a problem? (In case, I can open a ticket for this and post a new spkg, just let me know). 

Oh yeah I now remember about that problem.
We used to create a symlink from gap to gap.exe (or conversely) but my Cygwin was making the name conversion automatically and the symlink creation failed.

Anyway, let's create another ticket for that.
Not sure if the trick must be completely discrded or tthe error ignored if it fails.

This is now #13341.



---

archive/issue_comments_157041.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@dimpase](#comment%3A4):\n> and one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.\n> \n> Probably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/` \n\nI don't think I got that one with 5.1.rc1.\nSo either its a new problem, or I somehow got through it.\nI'll confirm when I'm getting there.",
    "created_at": "2012-08-05T09:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157041",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@dimpase](#comment%3A4):
> and one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.
> 
> Probably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/` 

I don't think I got that one with 5.1.rc1.
So either its a new problem, or I somehow got through it.
I'll confirm when I'm getting there.



---

archive/issue_comments_157042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n Same problem as in #13336 with _ _ imp _ _ problems.\n+As a fix, gen_interpreter.py now produces header files for the C interpreters.\n+\n+Apply [attachment: trac_13339-header.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-header.patch.gz)\n``````\n",
    "created_at": "2012-08-05T09:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157042",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 Same problem as in #13336 with _ _ imp _ _ problems.
+As a fix, gen_interpreter.py now produces header files for the C interpreters.
+
+Apply [attachment: trac_13339-header.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-header.patch.gz)
``````




---

archive/issue_comments_157043.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2012-08-05T09:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157043",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_events_170584.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-05T09:41:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170584"
}
```



---

archive/issue_comments_157044.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Same problem as in #13336 with _ _ imp _ _ problems.\n As a fix, gen_interpreter.py now produces header files for the C interpreters.\n \n-Apply [attachment: trac_13339-header.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-header.patch.gz)\n+Apply [attachment: trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)\n``````\n",
    "created_at": "2012-08-05T09:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157044",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Same problem as in #13336 with _ _ imp _ _ problems.
 As a fix, gen_interpreter.py now produces header files for the C interpreters.
 
-Apply [attachment: trac_13339-header.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-header.patch.gz)
+Apply [attachment: trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)
``````




---

archive/issue_comments_157045.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nPlease be aware that I also fixed all the EXAMPLES block with this patch.\n\nAnd I did not have the chance to test the doctests yet.",
    "created_at": "2012-08-05T09:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157045",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:9'>Comment 9:</a>
Please be aware that I also fixed all the EXAMPLES block with this patch.

And I did not have the chance to test the doctests yet.



---

archive/issue_comments_157046.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [jpflori](#comment%3A6):\n> Replying to [@dimpase](#comment%3A4):\n> > and one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.\n> > \n> > Probably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/` \n\n> I don't think I got that one with 5.1.rc1.\n> So either its a new problem, or I somehow got through it.\n> I'll confirm when I'm getting there.\n\nThis is indeed an issue with the new sage notebook.\nWouldn't you mind opening a ticket and posting an update spkg?",
    "created_at": "2012-08-05T10:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157046",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [jpflori](#comment%3A6):
> Replying to [@dimpase](#comment%3A4):
> > and one more trivial stop: I got `SAGELOCAL/lib/crypto.lib` file, from PARI or Singular, or at least it an ASCII file with crypto-related code written in one of these languages, and it stopped PyOpen-ssl  thing to install properly. Removing the file fixed the problem.
> > 
> > Probably there is a CYGWIN-only script somewhere that copies *.lib files to  `SAGELOCAL/lib/` 

> I don't think I got that one with 5.1.rc1.
> So either its a new problem, or I somehow got through it.
> I'll confirm when I'm getting there.

This is indeed an issue with the new sage notebook.
Wouldn't you mind opening a ticket and posting an update spkg?



---

archive/issue_comments_157047.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [jpflori](#comment%3A10):\n> \n> This is indeed an issue with the new sage notebook.\n> Wouldn't you mind opening a ticket and posting an update spkg?\n\nI got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.",
    "created_at": "2012-08-05T13:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157047",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [jpflori](#comment%3A10):
> 
> This is indeed an issue with the new sage notebook.
> Wouldn't you mind opening a ticket and posting an update spkg?

I got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.



---

archive/issue_comments_157048.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@dimpase](#comment%3A11):\n> Replying to [jpflori](#comment%3A10):\n> > \n> > This is indeed an issue with the new sage notebook.\n> > Wouldn't you mind opening a ticket and posting an update spkg?\n\n> I got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.\n\nI've crafted a new spkg for the crypto.lib problem, just moving it to crypto.xxx before installing pyOpenSSL and movind it back afterward.\n\nYou can test it at http://perso.telecom-paristech.fr/~flori/sage/sagenb-0.9.1.p0.spkg\nAs I'm not sure whether there's a special procedure for updating the sagenb spkg, nothing is committed yet and no ticket created.",
    "created_at": "2012-08-05T15:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157048",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@dimpase](#comment%3A11):
> Replying to [jpflori](#comment%3A10):
> > 
> > This is indeed an issue with the new sage notebook.
> > Wouldn't you mind opening a ticket and posting an update spkg?

> I got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.

I've crafted a new spkg for the crypto.lib problem, just moving it to crypto.xxx before installing pyOpenSSL and movind it back afterward.

You can test it at http://perso.telecom-paristech.fr/~flori/sage/sagenb-0.9.1.p0.spkg
As I'm not sure whether there's a special procedure for updating the sagenb spkg, nothing is committed yet and no ticket created.



---

archive/issue_comments_157049.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [jpflori](#comment%3A12):\n> Replying to [@dimpase](#comment%3A11):\n> > Replying to [jpflori](#comment%3A10):\n> > > \n> > > This is indeed an issue with the new sage notebook.\n> > > Wouldn't you mind opening a ticket and posting an update spkg?\n\n> > I got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.\n\n> I've crafted a new spkg for the crypto.lib problem, just moving it to crypto.xxx before installing pyOpenSSL and movind it back afterward.\n\nThat's a fix, but not a proper cure to the problem. See #13344.\nIt's a bug somewhere else. That `crypto.lib` does not belong there at all!",
    "created_at": "2012-08-05T16:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157049",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [jpflori](#comment%3A12):
> Replying to [@dimpase](#comment%3A11):
> > Replying to [jpflori](#comment%3A10):
> > > 
> > > This is indeed an issue with the new sage notebook.
> > > Wouldn't you mind opening a ticket and posting an update spkg?

> > I got stuck with #13343 (something I knew about, but forgot). So I'll have to rebuild Sage from scratch, as moving the half-built tree to another directory doesn't seem to work well.

> I've crafted a new spkg for the crypto.lib problem, just moving it to crypto.xxx before installing pyOpenSSL and movind it back afterward.

That's a fix, but not a proper cure to the problem. See #13344.
It's a bug somewhere else. That `crypto.lib` does not belong there at all!



---

archive/issue_events_170585.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-12T03:57:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170585"
}
```



---

archive/issue_events_170586.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-12T03:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170586"
}
```



---

archive/issue_comments_157050.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI tried this on (upgraded from Sage 5.2) Sage 5.3.rc0 (on x86_64 Ubuntu 12.04), and got\n\n```\nsage -t  --long -force_lib devel/sage/sage/ext/gen_interpreters.py\n**********************************************************************\nFile \"/tmp/sage-5.2/devel/sage-main/sage/ext/gen_interpreters.py\", line 2530:\n    sage: print interp.h_header\nExpected:\n    #include <mpfr.h>\nGot:\n    <BLANKLINE>\n    #include <mpfr.h>\n    <BLANKLINE>\n    extern int rr_py_call_helper(PyObject*, PyObject*, int, mpfr_t*, mpfr_t*);\n    <BLANKLINE>\n**********************************************************************\nFile \"/tmp/sage-5.2/devel/sage-main/sage/ext/gen_interpreters.py\", line 3353:\n    sage: print rdf_interp_h\nExpected:\n    /* Automatically generated by ext/gen_interpreters.py.  Do not edit! */\n    #include <Python.h>\nGot:\n    /* Automatically generated by ext/gen_interpreters.py.  Do not edit! */\n    #include <Python.h>\n    <BLANKLINE>\n    #include <gsl/gsl_math.h>\n    <BLANKLINE>\n    double interp_rdf(double* args,\n            double* constants,\n            PyObject** py_constants,\n            double* stack,\n            int* code);\n    <BLANKLINE>\n... and more similar failures in this file, 5 in total...\n ```\n\nPlease have a look.",
    "created_at": "2012-08-12T03:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157050",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
I tried this on (upgraded from Sage 5.2) Sage 5.3.rc0 (on x86_64 Ubuntu 12.04), and got

```
sage -t  --long -force_lib devel/sage/sage/ext/gen_interpreters.py
**********************************************************************
File "/tmp/sage-5.2/devel/sage-main/sage/ext/gen_interpreters.py", line 2530:
    sage: print interp.h_header
Expected:
    #include <mpfr.h>
Got:
    <BLANKLINE>
    #include <mpfr.h>
    <BLANKLINE>
    extern int rr_py_call_helper(PyObject*, PyObject*, int, mpfr_t*, mpfr_t*);
    <BLANKLINE>
**********************************************************************
File "/tmp/sage-5.2/devel/sage-main/sage/ext/gen_interpreters.py", line 3353:
    sage: print rdf_interp_h
Expected:
    /* Automatically generated by ext/gen_interpreters.py.  Do not edit! */
    #include <Python.h>
Got:
    /* Automatically generated by ext/gen_interpreters.py.  Do not edit! */
    #include <Python.h>
    <BLANKLINE>
    #include <gsl/gsl_math.h>
    <BLANKLINE>
    double interp_rdf(double* args,
            double* constants,
            PyObject** py_constants,
            double* stack,
            int* code);
    <BLANKLINE>
... and more similar failures in this file, 5 in total...
 ```

Please have a look.



---

archive/issue_comments_157051.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nMy bad, I rewrote the doctests by hand and did not actually test them...\nThe fixes should be trivial, I'll have a look next week.",
    "created_at": "2012-08-17T12:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157051",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:15'>Comment 15:</a>
My bad, I rewrote the doctests by hand and did not actually test them...
The fixes should be trivial, I'll have a look next week.



---

archive/issue_comments_157052.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nAttachment: **[trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)**\n\nThe new patch has correct BLANKLINE tags in the doctests and passes them on Linux with Sage-5.3.beta2.",
    "created_at": "2012-08-20T11:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157052",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:16'>Comment 16:</a>
Attachment: **[trac_13339-headers.patch.gz](https://github.com/sagemath/sage/files/ticket13339/trac_13339-headers.patch.gz)**

The new patch has correct BLANKLINE tags in the doctests and passes them on Linux with Sage-5.3.beta2.



---

archive/issue_comments_157053.json:
```json
{
    "body": "Changed keywords from **** to **cygwin**",
    "created_at": "2012-08-20T11:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157053",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Changed keywords from **** to **cygwin**



---

archive/issue_events_170587.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-20T11:58:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170587"
}
```



---

archive/issue_events_170588.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2012-08-20T11:58:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170588"
}
```



---

archive/issue_events_170589.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-20T15:39:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170589"
}
```



---

archive/issue_events_170590.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2012-08-20T15:39:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170590"
}
```



---

archive/issue_comments_157054.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nlooks and works good. Positive review.",
    "created_at": "2012-08-20T15:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157054",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
looks and works good. Positive review.



---

archive/issue_events_170591.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-23T12:47:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170591"
}
```



---

archive/issue_events_170592.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-23T12:47:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13339#event-170592"
}
```



---

archive/issue_comments_157055.json:
```json
{
    "body": "Reviewer: **Dmitrii Pasechnik**",
    "created_at": "2012-08-23T12:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157055",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Dmitrii Pasechnik**



---

archive/issue_comments_157056.json:
```json
{
    "body": "Merged: **sage-5.3.rc0**",
    "created_at": "2012-08-23T12:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13339",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13339#issuecomment-157056",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.3.rc0**
