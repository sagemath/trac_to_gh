# Issue 13154: Bug on Sage simple server

archive/issues_012982.json:
```json
{
    "assignees": [],
    "body": "*We have the following problems:*\n\n\n```\nnb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \nbash-3.2$ sage\n\n----------------------------------------------------------------------\n\n\n| Sage Version 5.0.1, Release Date: 2012-06-10                       |\n\n\n| Type notebook() for the GUI, and license() for information.        |\n\n\n----------------------------------------------------------------------\n\n\nLoading Sage library. Current Mercurial branch is: d6.2 \n\n\nsage: from sage.server.misc import find_next_available_port \n\n\nsage: port = find_next_available_port(9000, verbose=False) \n\n\nsage: from sagenb.notebook.notebook_object import test_notebook \n\n\nsage: passwd = str(randint(1,1<<128)) \n\n\nsage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \n\n\n--------------------------------------------------------------------------- \n\n \nTypeError                                 Traceback (most recent call last) \n\n\n/Applications/sage/<ipython console> in <module>()\n\nTypeError: test_notebook() got an unexpected keyword argument 'address'\n\n''This is the first error. It seems that `address` is not currently (in 5.0.1) a valid option.\nMust update the docs.\n''\n\n\n\n\n\n\n\n\n\n\nsage: nb = test_notebook(passwd, secure=False, port=port, verbose=True) \n\nNotebook started.\n\nsage: import urllib, re\n\nsage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data\n\n....: \n\nsage: sleep(1)\n\nsage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, \n\npasswd))\n\nsage: print login_page\n\n{\n\n\"session\": \"fcee333f07d53c13a46f65b9c4a15473\"\n\n}\n\n___S_A_G_E___\n\n\nsage: session = re.match(r'.*\"session\": \"([^\"]*)\"', login_page, re.DOTALL).groups()[0]\n\nsage: sleep(0.5)\n\nsage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2&timeout=60' % (port, \n\nsession))\n\n{\n\n\"status\": \"done\",\n\n\"files\": [],\n\n\"cell_id\": 2\n\n}\n\n___S_A_G_E___\n\n4\n```\n''\nJust repeating this command 3 times,  it gets stuck.''\n\nCC:  @jasongrout\n\nReviewer: **Jason Grout, Karl-Dieter Crisman, Kannappan Sampath**\n\nComponent: **notebook**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/13154_\n\n",
    "closed_at": "2014-08-20T20:36:27Z",
    "created_at": "2012-06-23T00:33:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug on Sage simple server",
    "type": "issue",
    "updated_at": "2014-08-20T20:36:27Z",
    "url": "https://github.com/sagemath/sage/issues/13154",
    "user": "https://github.com/sagetrac-ares"
}
```
*We have the following problems:*


```
nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 
bash-3.2$ sage

----------------------------------------------------------------------


| Sage Version 5.0.1, Release Date: 2012-06-10                       |


| Type notebook() for the GUI, and license() for information.        |


----------------------------------------------------------------------


Loading Sage library. Current Mercurial branch is: d6.2 


sage: from sage.server.misc import find_next_available_port 


sage: port = find_next_available_port(9000, verbose=False) 


sage: from sagenb.notebook.notebook_object import test_notebook 


sage: passwd = str(randint(1,1<<128)) 


sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 


--------------------------------------------------------------------------- 

 
TypeError                                 Traceback (most recent call last) 


/Applications/sage/<ipython console> in <module>()

TypeError: test_notebook() got an unexpected keyword argument 'address'

''This is the first error. It seems that `address` is not currently (in 5.0.1) a valid option.
Must update the docs.
''










sage: nb = test_notebook(passwd, secure=False, port=port, verbose=True) 

Notebook started.

sage: import urllib, re

sage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data

....: 

sage: sleep(1)

sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, 

passwd))

sage: print login_page

{

"session": "fcee333f07d53c13a46f65b9c4a15473"

}

___S_A_G_E___


sage: session = re.match(r'.*"session": "([^"]*)"', login_page, re.DOTALL).groups()[0]

sage: sleep(0.5)

sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2&timeout=60' % (port, 

session))

{

"status": "done",

"files": [],

"cell_id": 2

}

___S_A_G_E___

4
```
''
Just repeating this command 3 times,  it gets stuck.''

CC:  @jasongrout

Reviewer: **Jason Grout, Karl-Dieter Crisman, Kannappan Sampath**

Component: **notebook**

_Issue created by migration from https://trac.sagemath.org/ticket/13154_





---

archive/issue_events_183578.json:
```json
{
    "actor": "https://github.com/sagetrac-ares",
    "created_at": "2012-06-23T00:33:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183578"
}
```



---

archive/issue_events_183579.json:
```json
{
    "actor": "https://github.com/sagetrac-ares",
    "created_at": "2012-06-23T00:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183579"
}
```



---

archive/issue_events_183580.json:
```json
{
    "actor": "https://github.com/sagetrac-ares",
    "created_at": "2012-06-23T00:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183580"
}
```



---

archive/issue_events_183581.json:
```json
{
    "actor": "https://github.com/sagetrac-ares",
    "created_at": "2012-06-23T00:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183581"
}
```



---

archive/issue_comments_150730.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n *We have the following problems:*\n \n \n+```\n nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \n bash-3.2$ sage\n \n-\n----\n+----------------------------------------------------------------------\n \n \n | Sage Version 5.0.1, Release Date: 2012-06-10                       |\n@@ -14,7 +14,7 @@\n | Type notebook() for the GUI, and license() for information.        |\n \n \n----\n+----------------------------------------------------------------------\n \n \n Loading Sage library. Current Mercurial branch is: d6.2 \n@@ -35,7 +35,7 @@\n sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \n \n \n----\n+--------------------------------------------------------------------------- \n \n  \n TypeError                                 Traceback (most recent call last) \n@@ -106,5 +106,6 @@\n ___S_A_G_E___\n \n 4\n+```\n ''\n Just repeating this command 3 times,  it gets stuck.''\n``````\n",
    "created_at": "2012-07-07T02:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150730",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 *We have the following problems:*
 
 
+```
 nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 
 bash-3.2$ sage
 
-
----
+----------------------------------------------------------------------
 
 
 | Sage Version 5.0.1, Release Date: 2012-06-10                       |
@@ -14,7 +14,7 @@
 | Type notebook() for the GUI, and license() for information.        |
 
 
----
+----------------------------------------------------------------------
 
 
 Loading Sage library. Current Mercurial branch is: d6.2 
@@ -35,7 +35,7 @@
 sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 
 
 
----
+--------------------------------------------------------------------------- 
 
  
 TypeError                                 Traceback (most recent call last) 
@@ -106,5 +106,6 @@
 ___S_A_G_E___
 
 4
+```
 ''
 Just repeating this command 3 times,  it gets stuck.''
``````




---

archive/issue_comments_150731.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIf I'm not mistaken, the Sage simple server is more or less deprecated.  The [Sage cell server](https://github.com/sagemath/sagecell/) seems to be along the lines of replacing it.  Jason, is that correct?",
    "created_at": "2012-07-07T02:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150731",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:1" align="right">comment:1</div>

If I'm not mistaken, the Sage simple server is more or less deprecated.  The [Sage cell server](https://github.com/sagemath/sagecell/) seems to be along the lines of replacing it.  Jason, is that correct?



---

archive/issue_comments_150732.json:
```json
{
    "body": "Changed author from **Jordi Saludes** to none",
    "created_at": "2012-07-07T02:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150732",
    "user": "https://github.com/kcrisman"
}
```

Changed author from **Jordi Saludes** to none



---

archive/issue_comments_150733.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt does not work with the new notebook, and no one has volunteered to fix it yet.  Pull requests are welcome, of course.  The Sage Cell Server does do (most of) the things you'd want the simple server to do.",
    "created_at": "2012-07-07T02:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150733",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

It does not work with the new notebook, and no one has volunteered to fix it yet.  Pull requests are welcome, of course.  The Sage Cell Server does do (most of) the things you'd want the simple server to do.



---

archive/issue_comments_150734.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI guess what I'm wondering is whether this ticket should be closed.  It sounds like you're saying that this could be fixed, just that no one has volunteered yet.",
    "created_at": "2012-07-07T03:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150734",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

I guess what I'm wondering is whether this ticket should be closed.  It sounds like you're saying that this could be fixed, just that no one has volunteered yet.



---

archive/issue_comments_150735.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMy best guess is that the current simple server code is dead and will need to be rewritten from scratch to be useful again.",
    "created_at": "2012-07-07T04:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150735",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

My best guess is that the current simple server code is dead and will need to be rewritten from scratch to be useful again.



---

archive/issue_comments_150736.json:
```json
{
    "body": "Reviewer: **Jason Grout, Karl-Dieter Crisman**",
    "created_at": "2013-06-14T17:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150736",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Jason Grout, Karl-Dieter Crisman**



---

archive/issue_events_183582.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:08:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183582"
}
```



---

archive/issue_events_183583.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:08:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183583"
}
```



---

archive/issue_events_183584.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:08:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "c6c6c6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183584"
}
```



---

archive/issue_events_183585.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:08:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183585"
}
```



---

archive/issue_events_183586.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:09:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183586"
}
```



---

archive/issue_events_183587.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T17:09:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183587"
}
```



---

archive/issue_comments_150737.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNote that #11409 would remove this completely.",
    "created_at": "2013-06-14T18:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150737",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">comment:7</div>

Note that #11409 would remove this completely.



---

archive/issue_events_183588.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T18:36:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183588"
}
```



---

archive/issue_events_183589.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-06-14T18:36:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183589"
}
```



---

archive/issue_comments_150738.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAs a part of Sage Days 60, I was just going through these ticket lists to see if there were easy ones: \n\nIsn't this ticket a wont-fix/invalid kind ticket?",
    "created_at": "2014-08-14T19:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150738",
    "user": "https://github.com/KPanComputes"
}
```

<div id="comment:8" align="right">comment:8</div>

As a part of Sage Days 60, I was just going through these ticket lists to see if there were easy ones: 

Isn't this ticket a wont-fix/invalid kind ticket?



---

archive/issue_comments_150739.json:
```json
{
    "body": "Changed reviewer from **Jason Grout, Karl-Dieter Crisman** to **Jason Grout, Karl-Dieter Crisman, Kannappan Sampath**",
    "created_at": "2014-08-15T05:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/13154#issuecomment-150739",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Jason Grout, Karl-Dieter Crisman** to **Jason Grout, Karl-Dieter Crisman, Kannappan Sampath**



---

archive/issue_events_183590.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-08-15T05:11:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183590"
}
```



---

archive/issue_events_183591.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-08-15T05:11:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183591"
}
```



---

archive/issue_events_183592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-20T20:36:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183592"
}
```



---

archive/issue_events_183593.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-20T20:36:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/13154",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/13154#event-183593"
}
```
